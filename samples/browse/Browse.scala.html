<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Browse.scala</title>
        <script type="text/javascript" src="linked.js"></script>
        <link rel="stylesheet" type="text/css" href="style.css" title="Style">
    </head>
    <body onload="initializeLinked()">
        <pre>
<span class="comment">/* browse -- Scala Source Browser
 * Copyright 2009 Mark Harrah
 */</span>

<span class="keyword">package</span> browse

<span class="keyword">import</span> scala.tools.nsc.{ast, plugins, symtab, util, Global}
<span class="keyword">import</span> ast.parser.Tokens
<span class="keyword">import</span> plugins.Plugin
<span class="keyword">import</span> symtab.Flags
<span class="keyword">import</span> util.SourceFile
<span class="keyword">import</span> scala.collection.jcl.{TreeMap, TreeSet}

<span class="keyword">import</span> java.io.{File, Reader, Writer}

<span class="comment">/** The actual work extracting symbols and types is done here. */</span>
<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class Browse extends scala.tools.nsc.plugins.Plugin with ScalaObject" id="6168">Browse</a> <span class="keyword">extends</span> <a title="scala.tools.nsc.plugins.Plugin" id="8400">Plugin</a>
{
	<span class="comment">/** The directory to which the annotated sources will be written. */</span>
	<span class="keyword">def</span> <a title="=&gt; java.io.File" id="10763">outputDirectory</a>: <a title="java.io.File" id="3612">File</a>
	<span class="comment">/** The directory against which the input source paths will be relativized.*/</span>
	<span class="keyword">def</span> <a title="=&gt; Option[java.io.File]" id="10764">baseDirectory</a>: <a title="Option[java.io.File]" id="889">Option</a>[File]
	<span class="comment">/** The compiler.*/</span>
	<span class="keyword">val</span> <a title="=&gt; scala.tools.nsc.Global" id="10765">global</a>: <a title="scala.tools.nsc.Global" id="6639">Global</a>
	
	<span class="keyword">import</span> global._
	<span class="keyword">import</span> Browse._

	<span class="comment">/** The entry method for producing a set of html files and auxiliary javascript and CSS files that
	* annotate the source code for display in a web browser. */</span>
	<span class="keyword">def</span> <a title="()Unit" id="10768">generateOutput</a>()
	{
		<span class="keyword">val</span> <a title="java.io.File" id="16192">cssFile</a> = <a title="(java.io.File,java.lang.String)java.io.File" id="11663" class="keyword">new</a> <a title="java.io.File" id="3612">File</a>(<a href="#10763" title="=&gt; java.io.File">outputDirectory</a>, <a href="#16182" title="=&gt; java.lang.String">CSSRelativePath</a>)
		<span class="keyword">val</span> <a title="java.io.File" id="16193">jsFile</a> = <a title="(java.io.File,java.lang.String)java.io.File" id="11663" class="keyword">new</a> <a title="java.io.File" id="3612">File</a>(<a href="#10763" title="=&gt; java.io.File">outputDirectory</a>, <a href="#16184" title="=&gt; java.lang.String">JSRelativePath</a>)
		<a href="#16190" title="(java.io.File)Unit">writeDefaultCSS</a>(<a href="#16192" title="java.io.File">cssFile</a>)
		<a href="#16191" title="(java.io.File)Unit">writeJS</a>(<a href="#16193" title="java.io.File">jsFile</a>)
		<span class="keyword">for</span>(<span id="17339"><a title="((Browse.this.global.CompilationUnit) =&gt; Unit)Unit" id="17406">unit</a></span> &lt;- <a href="#10765" title="=&gt; Browse.this.global.Run" id="11125">currentRun</a>.<a title="=&gt; Iterator[Browse.this.global.CompilationUnit]" id="11112">units</a>)
		{
			<span class="keyword">val</span> <a title="java.io.File" id="17407">sourceFile</a> = <a href="#17406" title="Browse.this.global.CompilationUnit">unit</a>.<a title="=&gt; scala.tools.nsc.util.SourceFile" id="16136">source</a>.<a title="=&gt; scala.tools.nsc.io.AbstractFile" id="17427">file</a>.<a title="=&gt; java.io.File" id="17511">file</a>
			<span class="keyword">val</span> <a title="String" id="17408">relativeSourcePath</a> = <a href="#10780" title="(java.io.File)String">getRelativeSourcePath</a>(<a href="#17407" title="java.io.File">sourceFile</a>)
			<span class="keyword">val</span> <a title="java.io.File" id="17409">outputFile</a> = <a title="(java.io.File,java.lang.String)java.io.File" id="11663" class="keyword">new</a> <a title="java.io.File" id="3612">File</a>(<a href="#10763" title="=&gt; java.io.File">outputDirectory</a>, <a href="#17408" title="String">relativeSourcePath</a> <a title="(Any)java.lang.String" id="5736">+</a> <span title="java.lang.String(&quot;.html&quot;)" class="string">&quot;.html&quot;</span>)
			<span class="keyword">val</span> <a title="String" id="17410">relativizedCSSPath</a> = <a href="FileUtil.scala.html#6223" title="object browse.FileUtil">FileUtil</a>.<a href="FileUtil.scala.html#17551" title="(java.io.File,java.io.File)String">relativePath</a>(<a href="#17409" title="java.io.File">outputFile</a>, <a href="#16192" title="java.io.File">cssFile</a>)
			<span class="keyword">val</span> <a title="String" id="17411">relativizedJSPath</a> = <a href="FileUtil.scala.html#6223" title="object browse.FileUtil">FileUtil</a>.<a href="FileUtil.scala.html#17551" title="(java.io.File,java.io.File)String">relativePath</a>(<a href="#17409" title="java.io.File">outputFile</a>, <a href="#16193" title="java.io.File">jsFile</a>)

			<span class="comment">// generate the tokens</span>
			<span class="keyword">val</span> <a title="scala.collection.jcl.TreeSet[browse.Token]" id="17412">tokens</a> = <a href="#10769" title="(Browse.this.global.CompilationUnit)scala.collection.jcl.TreeSet[browse.Token]">scan</a>(<a href="#17406" title="Browse.this.global.CompilationUnit">unit</a>)
			<span class="keyword">val</span> <a title="Browse.this.Traverse" id="17413">traverser</a> = <span title="Browse.this.Traverse" class="keyword">new</span> <a href="#10774" title="Browse.this.Traverse">Traverse</a>(<a href="#17412" title="scala.collection.jcl.TreeSet[browse.Token]">tokens</a>, <a href="#17406" title="Browse.this.global.CompilationUnit">unit</a>.<a title="=&gt; scala.tools.nsc.util.SourceFile" id="16136">source</a>)
			<a href="#17413" title="(Browse.this.global.Tree)Browse.this.global.Tree" id="16049">traverser</a>(<a href="#17406" title="Browse.this.global.CompilationUnit">unit</a>.<a title="=&gt; Browse.this.global.Tree" id="16142">body</a>)

			<span class="keyword">val</span> <a title="browse.BasicStyler" id="17414">styler</a> = <span title="browse.BasicStyler" class="keyword">new</span> <a href="Styler.scala.html#6199" title="browse.BasicStyler">BasicStyler</a>(<a href="#17412" title="scala.collection.jcl.TreeSet[browse.Token]">tokens</a>, <a href="#17408" title="String">relativeSourcePath</a>, <a href="#17410" title="String">relativizedCSSPath</a>, <a href="#17411" title="String">relativizedJSPath</a>)
			<a href="Annotate.scala.html#19411" title="(java.io.File,java.io.File,scala.collection.jcl.TreeSet[browse.Token],browse.Styler)Unit">Annotate</a>(<a href="#17407" title="java.io.File">sourceFile</a>, <a href="#17409" title="java.io.File">outputFile</a>, <a href="#17412" title="scala.collection.jcl.TreeSet[browse.Token]">tokens</a>, <a href="#17414" title="browse.BasicStyler">styler</a>)
		}
	}
	<span class="comment">/** Tokenizes the given source.  The tokens are put into an ordered set by the start position of the token.
	* Symbols will be mapped back to these tokens by the offset of the symbol.*/</span>
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(Browse.this.global.CompilationUnit)scala.collection.jcl.TreeSet[browse.Token]" id="10769">scan</a>(<a title="Browse.this.global.CompilationUnit" id="17559">unit</a>: <a title="Browse.this.global.CompilationUnit" id="16135">CompilationUnit</a>) =
	{
		<span class="keyword">val</span> <a title="scala.collection.jcl.TreeSet[browse.Token]" id="17561">tokens</a> = <span id="6055"><a href="#18341" title="scala.collection.jcl.TreeSet[browse.Token]" id="779" class="keyword">new</a></span> <a title="scala.collection.jcl.TreeSet[browse.Token]" id="10489">TreeSet</a>[Token]
		<span class="keyword">val</span> <a title="Browse.this.global.syntaxAnalyzer.UnitScanner" id="17562">scanner</a> = <a title="template $anon extends Browse.this.global.syntaxAnalyzer.UnitScanner" id="18342" class="keyword">new</a> <a href="#10765" title="object Browse.this.global.syntaxAnalyzer" id="10921">syntaxAnalyzer</a>.<a title="Browse.this.global.syntaxAnalyzer.UnitScanner" id="18857">UnitScanner</a>(<a href="#17559" title="Browse.this.global.CompilationUnit">unit</a>) { <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Unit" id="19174">init</a> <span title="Unit">{</span>} }
		<span class="keyword">for</span>( <span id="17339"><a href="#19185" title="(((Int, Int, Int)) =&gt; Unit)Unit" id="17330">(</a></span><span id="19187"><a title="Int" id="19192">offset</a></span>, <span id="19188"><a title="Int" id="19193">length</a></span>, <span id="19189"><a title="Int" id="19194">code</a></span>) &lt;- <a href="#17562" title="Browse.this.global.syntaxAnalyzer.UnitScanner">scanner</a>.<a title="=&gt; &lt;refinement&gt; extends java.lang.Object with Iterator[(Int, Int, Int)]" id="18766">iterator</a>)
		{
			<span title="Unit" class="keyword">if</span>(<a href="#10770" title="(Int)Boolean">includeToken</a>(<a href="#19194" title="Int">code</a>))
				<a href="#17561" title="scala.collection.jcl.TreeSet[browse.Token]">tokens</a> <a title="(browse.Token)Unit" id="18215">+=</a> <span title="browse.Token" class="keyword">new</span> <a href="Token.scala.html#6182" title="browse.Token">Token</a>(<a href="#19192" title="Int">offset</a>, <a href="#19193" title="Int">length</a>, <a href="#19194" title="Int">code</a>)
		}
		<a href="#17561" title="scala.collection.jcl.TreeSet[browse.Token]">tokens</a>
	}
	<span class="comment">/** Filters out unwanted tokens such as whitespace and commas.  Braces are currently
	* included because () is annotated as Unit, and a partial function created by
	* { case ... } is associated with the opening brace.  */</span>
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(Int)Boolean" id="10770">includeToken</a>(<a title="Int" id="19195">code</a>: <a title="Int" id="2346">Int</a>) =
	{
		<span class="keyword">import</span> Tokens.{COMMENT, USCORE, isBrace, isKeyword, isIdentifier, isLiteral}
		<a href="#19195" title="Int">code</a> <span title="Boolean" class="keyword">match</span>
		{
			<span title="Boolean(true)" class="keyword">case</span> <span title="Int(97)">COMMENT</span> | <span title="Int(73)">USCORE</span> =&gt; <span title="Boolean(true)" class="keyword">true</span>
			<span title="Boolean" class="keyword">case</span> _ =&gt; <span id="19312"><a title="(Int)Boolean" id="8326">isKeyword</a></span>(<a href="#19195" title="Int">code</a>) <a title="(Boolean)Boolean" id="2693">||</a> <span id="19226"><a title="(Int)Boolean" id="8326">isIdentifier</a></span>(<a href="#19195" title="Int">code</a>) <a title="(Boolean)Boolean" id="2693">||</a> <span id="19221"><a title="(Int)Boolean" id="8326">isLiteral</a></span>(<a href="#19195" title="Int">code</a>) <a title="(Boolean)Boolean" id="2693">||</a> <span id="19357"><a title="(Int)Boolean" id="8326">isBrace</a></span>(<a href="#19195" title="Int">code</a>)
		}
	}
	<span class="comment">/** Gets the token for the given offset.*/</span>
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(scala.collection.jcl.TreeSet[browse.Token],Int)Option[browse.Token]" id="10771">tokenAt</a>(<a title="scala.collection.jcl.TreeSet[browse.Token]" id="19416">tokens</a>: <a title="scala.collection.jcl.TreeSet[browse.Token]" id="10489">TreeSet</a>[Token], <a title="Int" id="19417">offset</a>: <a title="Int" id="2346">Int</a>): <a title="Option[browse.Token]" id="889">Option</a>[Token] =
	{
		<span class="comment">// create artificial tokens to get a subset of the tokens starting at the given offset</span>
		<span class="keyword">val</span> <a title="tokens.SortedSelf" id="19418">inRange</a> = <a href="#19416" title="scala.collection.jcl.TreeSet[browse.Token]">tokens</a>.<a title="(browse.Token,browse.Token)tokens.SortedSelf" id="18273">range</a>(<span title="browse.Token" class="keyword">new</span> <a href="Token.scala.html#6182" title="browse.Token">Token</a>(<a href="#19417" title="Int">offset</a>, <span title="Int(1)" class="int">1</span>, <span title="Int(0)" class="int">0</span>), <span title="browse.Token" class="keyword">new</span> <a href="Token.scala.html#6182" title="browse.Token">Token</a>(<a href="#19417" title="Int">offset</a><a title="(Int)Int" id="3090">+</a><span title="Int(1)" class="int">1</span>, <span title="Int(1)" class="int">1</span>, <span title="Int(0)" class="int">0</span>))
		<span class="comment">// then, take the first token in the range</span>
		<span title="Option[browse.Token]" class="keyword">if</span>(<a href="#19418" title="tokens.SortedSelf">inRange</a>.<a title="=&gt; Boolean" id="18145">isEmpty</a>)
			<a title="object None" id="497">None</a>
		<span class="keyword">else</span>
			<span id="19626"><a title="(browse.Token)Some[browse.Token]" id="278">Some</a></span>(<a href="#19418" title="tokens.SortedSelf">inRange</a>.<a title="=&gt; browse.Token" id="17593">firstKey</a>)
	}

	<span class="comment">/** Filters unwanted symbols, such as packages.*/</span>
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(Browse.this.global.Symbol)Boolean" id="10772">ignore</a>(<a title="Browse.this.global.Symbol" id="19631">s</a>: <a title="Browse.this.global.Symbol" id="11886">Symbol</a>): <a title="Boolean" id="2110">Boolean</a> =
		<a href="#10773" title="(Browse.this.global.Symbol)Boolean">ignoreBase</a>(<a href="#19631" title="Browse.this.global.Symbol">s</a>) <a title="(Boolean)Boolean" id="2693">||</a>
		<a href="#19631" title="Browse.this.global.Symbol">s</a>.<a title="=&gt; Boolean" id="12085">isModuleClass</a> <a title="(Boolean)Boolean" id="2693">||</a> <span class="comment">// ignore the generated class for modules</span>
		<a href="#19631" title="Browse.this.global.Symbol">s</a>.<a title="=&gt; Boolean" id="12105">isPrimaryConstructor</a> <span class="comment">// the primary constructor overlaps with the class type, so just use the class type</span>
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(Browse.this.global.Symbol)Boolean" id="10773">ignoreBase</a>(<a title="Browse.this.global.Symbol" id="19658">s</a>: <a title="Browse.this.global.Symbol" id="11886">Symbol</a>): <a title="Boolean" id="2110">Boolean</a> =
		<a title="=&gt; Boolean" id="2690">!</a><a href="#19658" title="Browse.this.global.Symbol">s</a>.<a title="=&gt; Boolean" id="12122">exists</a> <a title="(Boolean)Boolean" id="2693">||</a>
		<a href="#19658" title="Browse.this.global.Symbol">s</a>.<a title="=&gt; Boolean" id="12070">isPackage</a> <a title="(Boolean)Boolean" id="2693">||</a> <span class="comment">// nothing done with packages</span>
		<a href="#19658" title="Browse.this.global.Symbol">s</a>.<a title="=&gt; Boolean" id="12107">isImplClass</a>
		
	<span class="keyword">private</span> <span class="keyword">class</span> <a title="class Traverse extends Browse.this.global.Traverser with ScalaObject" id="10774">Traverse</a>(<span id="19378"><a title="scala.collection.jcl.TreeSet[browse.Token]" id="19383">tokens</a></span>: <a title="scala.collection.jcl.TreeSet[browse.Token]" id="10489">TreeSet</a>[Token], <span id="19379"><a title="scala.tools.nsc.util.SourceFile" id="19384">source</a></span>: <a title="scala.tools.nsc.util.SourceFile" id="10189">SourceFile</a>) <span class="keyword">extends</span> <a href="#10765" title="Browse.this.global.Traverser" id="16040">Traverser</a>
	{
		<span class="comment">// magic method #1</span>
		<span class="keyword">override</span> <span class="keyword">def</span> <a title="(Browse.this.global.Tree)Unit" id="19381">traverse</a>(<a title="Browse.this.global.Tree" id="19662">tree</a>: <a title="Browse.this.global.Tree" id="15001">Tree</a>)
		{
			<span class="keyword">def</span> <a title="()Unit" id="19663">handleDefault</a>()
			{
				<a href="#19382" title="(Browse.this.global.Tree)Unit">process</a>(<a href="#19662" title="Browse.this.global.Tree">tree</a>)
				<span class="keyword">super</span>.<a title="(Browse.this.global.Tree)Unit" id="16045">traverse</a>(<a href="#19662" title="Browse.this.global.Tree">tree</a>)
			}
			<a href="#19662" title="Browse.this.global.Tree">tree</a> <span title="Unit" class="keyword">match</span>
			{
				<span title="Unit" class="keyword">case</span> <a id="1">ValDef</a>(_, _, _, <a title="Browse.this.global.Tree" id="19676">rhs</a>) =&gt;
					<span class="comment">// tests for synthetic val created for the x in x :: Nil, which would associate the wrong type with ::</span>
					<span class="comment">// because the synthetic val is associated with the :: token</span>
					<span title="Unit" class="keyword">if</span>(<a href="#19662" title="Browse.this.global.Tree">tree</a>.<a title="=&gt; Browse.this.global.Symbol" id="15012">symbol</a> <a title="(AnyRef)Boolean" id="5727">!=</a> <span title="Null(null)" class="keyword">null</span> <a title="(Boolean)Boolean" id="2694">&amp;&amp;</a> <a href="#19662" title="Browse.this.global.Tree">tree</a>.<a title="=&gt; Browse.this.global.Symbol" id="15012">symbol</a>.<a title="(Long)Boolean" id="12140">hasFlag</a>(Flags.<span title="Long(2097152L)">SYNTHETIC</span>))
						<a href="#19381" title="(Browse.this.global.Tree)Unit">traverse</a>(<a href="#19676" title="Browse.this.global.Tree">rhs</a>)
					<span class="keyword">else</span>
						<a href="#19663" title="()Unit">handleDefault</a>()
				<span title="Unit" class="keyword">case</span> <a id="1">Template</a>(<a title="List[Browse.this.global.Tree]" id="20036">parents</a>, <a title="Browse.this.global.ValDef" id="20037">self</a>, <a title="List[Browse.this.global.Tree]" id="20038">body</a>) =&gt;
					<span class="comment">// If the first parent in the source is a trait, the first parent in parents will be AnyRef and it will</span>
					<span class="comment">// use the trait's token, bumping the trait.  So, this hack processes traits first</span>
					<span class="keyword">val</span> <span id="16287"><a href="#20044" title="(List[Browse.this.global.Tree], List[Browse.this.global.Tree])" id="1322">(</a></span><span id="20044"><span id="20040"><a href="#20039" title="List[Browse.this.global.Tree]" id="16275">traits</a></span></span>, <span id="20045"><span id="20041"><a href="#20039" title="List[Browse.this.global.Tree]" id="16277">notTraits</a></span></span>) = <a href="#20036" title="List[Browse.this.global.Tree]">parents</a>.<a title="((Browse.this.global.Tree) =&gt; Boolean)(List[Browse.this.global.Tree], List[Browse.this.global.Tree])" id="11187">partition</a>(<a href="#20043" title="Browse.this.global.Tree">_</a>.<a title="=&gt; Browse.this.global.Symbol" id="15012">symbol</a>.<a title="=&gt; Boolean" id="12074">isTrait</a>)
					<a href="#10774" title="(List[Browse.this.global.Tree])Unit" id="16046">traverseTrees</a>(<a href="#20040" title="List[Browse.this.global.Tree]">traits</a>)
					<a href="#10774" title="(List[Browse.this.global.Tree])Unit" id="16046">traverseTrees</a>(<a href="#20041" title="List[Browse.this.global.Tree]">notTraits</a>)
					<span title="Unit" class="keyword">if</span> (<a title="=&gt; Boolean" id="2690">!</a><a href="#20037" title="Browse.this.global.ValDef">self</a>.<a title="=&gt; Boolean" id="15019">isEmpty</a>) <a href="#19381" title="(Browse.this.global.Tree)Unit">traverse</a>(<a href="#20037" title="Browse.this.global.ValDef">self</a>)
					<a href="#10774" title="(List[Browse.this.global.Tree],Browse.this.global.Symbol)Unit" id="16048">traverseStats</a>(<a href="#20038" title="List[Browse.this.global.Tree]">body</a>, <a href="#19662" title="Browse.this.global.Tree">tree</a>.<a title="=&gt; Browse.this.global.Symbol" id="15012">symbol</a>)
				<span class="comment">/*case DefDef(_, _, tparams, vparamss, _, rhs) =&gt;
					atOwner(tree.symbol) {
						traverseTrees(tparams); traverseTreess(vparamss); traverse(rhs)
					}*/</span>
				<span title="Unit" class="keyword">case</span> _ =&gt;
					<a href="#19663" title="()Unit">handleDefault</a>()
			}
		}
		
		<span class="comment">// magic method #2</span>
		<span class="keyword">private</span> <span class="keyword">def</span> <a title="(Browse.this.global.Tree)Unit" id="19382">process</a>(<a title="Browse.this.global.Tree" id="19664">t</a>: <a title="Browse.this.global.Tree" id="15001">Tree</a>)
		{
			<span class="keyword">for</span>(<span id="11724"><span id="11723"><span id="20060"><a title="((scala.tools.nsc.util.SourceFile) =&gt; Unit)Unit" id="20063">tSource</a></span></span></span> &lt;- <a href="#19664" title="Browse.this.global.Tree">t</a>.<a title="=&gt; scala.tools.nsc.util.Position" id="15006">pos</a>.<a title="=&gt; Option[scala.tools.nsc.util.SourceFile]" id="20053">source</a> <span class="keyword">if</span> <a href="#20060" title="scala.tools.nsc.util.SourceFile">tSource</a> <a title="(AnyRef)Boolean" id="3452">==</a> <a href="#19379" title="scala.tools.nsc.util.SourceFile">source</a>; <span id="11724"><a title="((Int) =&gt; Unit)Unit" id="20065">offset</a></span> &lt;- <a href="#19664" title="Browse.this.global.Tree">t</a>.<a title="=&gt; scala.tools.nsc.util.Position" id="15006">pos</a>.<a title="=&gt; Option[Int]" id="20052">offset</a>; <span id="11724"><a title="((browse.Token) =&gt; Unit)Unit" id="20067">token</a></span> &lt;- <a href="#10771" title="(scala.collection.jcl.TreeSet[browse.Token],Int)Option[browse.Token]">tokenAt</a>(<a href="#19378" title="scala.collection.jcl.TreeSet[browse.Token]">tokens</a>, <a href="#20065" title="Int">offset</a>))
			{
				<span class="keyword">def</span> <a title="()Unit" id="20068">processDefaultSymbol</a>() =
				{
					<span title="Unit" class="keyword">if</span>(<a href="#19664" title="Browse.this.global.Tree">t</a>.<a title="=&gt; Boolean" id="15015">hasSymbol</a> <a title="(Boolean)Boolean" id="2694">&amp;&amp;</a> <a title="=&gt; Boolean" id="2690">!</a><a href="#10772" title="(Browse.this.global.Symbol)Boolean">ignore</a>(<a href="#19664" title="Browse.this.global.Tree">t</a>.<a title="=&gt; Browse.this.global.Symbol" id="15012">symbol</a>))
						<a href="#10775" title="(Browse.this.global.Tree,browse.Token,java.io.File)Unit">processSymbol</a>(<a href="#19664" title="Browse.this.global.Tree">t</a>, <a href="#20067" title="browse.Token">token</a>, <a href="#19379" title="scala.tools.nsc.util.SourceFile">source</a>.<a title="=&gt; scala.tools.nsc.io.AbstractFile" id="17427">file</a>.<a title="=&gt; java.io.File" id="17511">file</a>)
				}
				<span class="keyword">def</span> <a title="()Unit" id="20069">processSimple</a>() { <a href="#20067" title="browse.Token">token</a>.<a href="Token.scala.html#18328" title="(browse.TypeAttribute)Unit">tpe</a> = <a href="Token.scala.html#20085" title="(String,Option[browse.Link])browse.TypeAttribute">TypeAttribute</a>(<a href="#10777" title="(Browse.this.global.Type)String">typeString</a>(<a href="#19664" title="Browse.this.global.Tree">t</a>.<a title="=&gt; Browse.this.global.Type" id="15008">tpe</a>), <a title="object None" id="497">None</a>) }
				<span class="keyword">def</span> <a title="(Browse.this.global.TypeTree)Unit" id="20070">processTypeTree</a>(<a title="Browse.this.global.TypeTree" id="20105">tt</a>: <a title="Browse.this.global.TypeTree" id="15547">TypeTree</a>) { <span title="Unit" class="keyword">if</span>(<a title="=&gt; Boolean" id="2690">!</a><a href="#10772" title="(Browse.this.global.Symbol)Boolean">ignore</a>(<a href="#20105" title="Browse.this.global.TypeTree">tt</a>.<a title="=&gt; Browse.this.global.Symbol" id="15555">symbol</a>)) <a href="#10775" title="(Browse.this.global.Tree,browse.Token,java.io.File)Unit">processSymbol</a>(<a href="#20105" title="Browse.this.global.TypeTree">tt</a>, <a href="#20067" title="browse.Token">token</a>, <a href="#19379" title="scala.tools.nsc.util.SourceFile">source</a>.<a title="=&gt; scala.tools.nsc.io.AbstractFile" id="17427">file</a>.<a title="=&gt; java.io.File" id="17511">file</a>) }
				<a href="#19664" title="Browse.this.global.Tree">t</a> <span title="Unit" class="keyword">match</span>
				{
					<span title="Unit" class="keyword">case</span> _: <a title="Browse.this.global.ClassDef" id="15055">ClassDef</a> =&gt; <a href="#20068" title="()Unit">processDefaultSymbol</a>()
					<span title="Unit" class="keyword">case</span> _: <a title="Browse.this.global.ModuleDef" id="15194">ModuleDef</a> =&gt; <a href="#20068" title="()Unit">processDefaultSymbol</a>()
					<span title="Unit" class="keyword">case</span> _: <a title="Browse.this.global.ValOrDefDef" id="15128">ValOrDefDef</a> =&gt; <a href="#20068" title="()Unit">processDefaultSymbol</a>()
					<span title="Unit" class="keyword">case</span> _: <a title="Browse.this.global.TypeDef" id="15158">TypeDef</a> =&gt; <a href="#20068" title="()Unit">processDefaultSymbol</a>()
					<span class="comment">//case _: Super =&gt; processDefaultSymbol()</span>
					<span title="Unit" class="keyword">case</span> _: <a title="Browse.this.global.This" id="15515">This</a> =&gt; <a href="#20068" title="()Unit">processDefaultSymbol</a>()
					<span title="Unit" class="keyword">case</span> <a title="Browse.this.global.Select" id="20106">s</a>: <a title="Browse.this.global.Select" id="15524">Select</a> =&gt; <a href="#20068" title="()Unit">processDefaultSymbol</a>()
					<span title="Unit" class="keyword">case</span> _: <a title="Browse.this.global.New" id="15443">New</a> =&gt; <a href="#20069" title="()Unit">processSimple</a>()
					<span title="Unit" class="keyword">case</span> _: <a title="Browse.this.global.Sequence" id="15304">Sequence</a> =&gt; <a href="#20068" title="()Unit">processDefaultSymbol</a>()
					<span title="Unit" class="keyword">case</span> _: <a title="Browse.this.global.Alternative" id="15313">Alternative</a> =&gt; <a href="#20068" title="()Unit">processDefaultSymbol</a>()
					<span title="Unit" class="keyword">case</span> _: <a title="Browse.this.global.Star" id="15322">Star</a> =&gt; <a href="#20068" title="()Unit">processDefaultSymbol</a>()
					<span title="Unit" class="keyword">case</span> _: <a title="Browse.this.global.Bind" id="15331">Bind</a> =&gt; <a href="#20068" title="()Unit">processDefaultSymbol</a>()
					<span title="Unit" class="keyword">case</span> <a id="1">Apply</a>(<a title="Browse.this.global.Tree" id="20107">fun</a>, <a title="List[Browse.this.global.Tree]" id="20108">args</a>) =&gt; <span class="comment">//processDefaultSymbol()</span>
						<span class="comment">/*fun match
						{
							case tt: TypeTree =&gt; if(!ignoreBase(tt.symbol)) processTypeTree(tt)
							case _ =&gt; traverse(fun)
						}
						traverseTrees(args)*/</span>
					<span class="comment">//case _: Import =&gt; processSimple()</span>
					<span title="Unit" class="keyword">case</span> _: <a title="Browse.this.global.Return" id="15412">Return</a> =&gt; <a href="#20069" title="()Unit">processSimple</a>()
					<span title="Unit" class="keyword">case</span> _: <a title="Browse.this.global.If" id="15388">If</a> =&gt; <a href="#20069" title="()Unit">processSimple</a>()
					<span title="Unit" class="keyword">case</span> _: <a title="Browse.this.global.Match" id="15401">Match</a> =&gt; <a href="#20069" title="()Unit">processSimple</a>() <span class="comment">// this will annotate the 'match' keyword with the type returned by the associated pattern match</span>
					<span title="Unit" class="keyword">case</span> _: <a title="Browse.this.global.CaseDef" id="15291">CaseDef</a> =&gt; <a href="#20069" title="()Unit">processSimple</a>() <span class="comment">// this will annotate the 'case' keyword with the type returned by that particular case statement</span>
					<span title="Unit" class="keyword">case</span> _: <a title="Browse.this.global.Throw" id="15434">Throw</a> =&gt; <a href="#20069" title="()Unit">processSimple</a>()
					<span title="Unit" class="keyword">case</span> <a title="Browse.this.global.TypeApply" id="20109">ta</a>: <a title="Browse.this.global.TypeApply" id="15463">TypeApply</a> =&gt; <a href="#20069" title="()Unit">processSimple</a>() <span class="comment">// this fills in type parameters for methods</span>
					<span title="Unit" class="keyword">case</span> <a id="1">Ident</a>(_) =&gt; <a href="#20068" title="()Unit">processDefaultSymbol</a>()
					<span title="Unit" class="keyword">case</span> <a id="1">Literal</a>(<a title="Browse.this.global.Constant" id="20112">value</a>) =&gt; <a href="#20069" title="()Unit">processSimple</a>() <span class="comment">// annotate literals</span>
					<span title="Unit" class="keyword">case</span> <a title="Browse.this.global.TypeTree" id="20113">tt</a>: <a title="Browse.this.global.TypeTree" id="15547">TypeTree</a> =&gt;
						<span title="Unit" class="keyword">if</span>(<a href="#20067" title="browse.Token">token</a>.<a href="Token.scala.html#18335" title="=&gt; Boolean">isPlain</a>)
							<a href="#10775" title="(Browse.this.global.Tree,browse.Token,java.io.File)Unit">processSymbol</a>(<a href="#20113" title="Browse.this.global.TypeTree">tt</a>, <a href="#20067" title="browse.Token">token</a>, <a href="#19379" title="scala.tools.nsc.util.SourceFile">source</a>.<a title="=&gt; scala.tools.nsc.io.AbstractFile" id="17427">file</a>.<a title="=&gt; java.io.File" id="17511">file</a>)
					<span title="Unit" class="keyword">case</span> _ =&gt; <span title="Unit">(</span>)
				}
			}
		}
	}
		<span class="comment">// magic method #3</span>
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(Browse.this.global.Tree,browse.Token,java.io.File)Unit" id="10775">processSymbol</a>(<a title="Browse.this.global.Tree" id="20071">t</a>: <a title="Browse.this.global.Tree" id="15001">Tree</a>, <a title="browse.Token" id="20072">token</a>: <a href="Token.scala.html#6182" title="browse.Token">Token</a>, <a title="java.io.File" id="20073">sourceFile</a>: <a title="java.io.File" id="3612">File</a>)
	{
		<span class="keyword">val</span> <a title="Browse.this.global.Symbol" id="20123">sym</a> = <a href="#20071" title="Browse.this.global.Tree">t</a>.<a title="=&gt; Browse.this.global.Symbol" id="15012">symbol</a>
		<a href="#20123" title="Browse.this.global.Symbol">sym</a> <span title="Unit" class="keyword">match</span>
		{
			<span title="Unit" class="keyword">case</span> <a title="Browse.this.global.TermSymbol" id="20124">ts</a>: <a title="Browse.this.global.TermSymbol" id="11920">TermSymbol</a> =&gt;
				<span class="keyword">val</span> <a title="Browse.this.global.Type" id="20125">sType</a> =
					<a href="#20071" title="Browse.this.global.Tree">t</a> <span title="Browse.this.global.Type" class="keyword">match</span>
					{
						<span title="Browse.this.global.Type" class="keyword">case</span> <a title="Browse.this.global.ApplyDynamic" id="20127">ad</a>: <a title="Browse.this.global.ApplyDynamic" id="15493">ApplyDynamic</a> =&gt; <a href="#20127" title="Browse.this.global.ApplyDynamic">ad</a>.<a title="=&gt; Browse.this.global.Tree" id="15494">qual</a>.<a title="=&gt; Browse.this.global.Type" id="15008">tpe</a>.<a title="(Browse.this.global.Symbol)Browse.this.global.Type" id="12456">memberType</a>(<a href="#20127" title="Browse.this.global.ApplyDynamic">ad</a>.<a title="=&gt; Browse.this.global.Symbol" id="15062">symbol</a>)
						<span title="Browse.this.global.Type" class="keyword">case</span> <a title="Browse.this.global.Select" id="20128">s</a>: <a title="Browse.this.global.Select" id="15524">Select</a> =&gt; <a href="#20128" title="Browse.this.global.Select">s</a>.<a title="=&gt; Browse.this.global.Tree" id="15525">qualifier</a>.<a title="=&gt; Browse.this.global.Type" id="15008">tpe</a>.<a title="(Browse.this.global.Symbol)Browse.this.global.Type" id="12456">memberType</a>(<a href="#20128" title="Browse.this.global.Select">s</a>.<a title="=&gt; Browse.this.global.Symbol" id="15062">symbol</a>)
						<span title="Browse.this.global.Type" class="keyword">case</span> _ =&gt; <a href="#20124" title="Browse.this.global.TermSymbol">ts</a>.<a title="=&gt; Browse.this.global.Symbol" id="12128">owner</a>.<a title="=&gt; Browse.this.global.Type" id="12195">thisType</a>.<a title="(Browse.this.global.Symbol)Browse.this.global.Type" id="12456">memberType</a>(<a href="#20124" title="Browse.this.global.TermSymbol">ts</a>)
					}
				<span class="keyword">val</span> <a title="java.lang.String" id="20126">asString</a> =
					<a href="#20125" title="Browse.this.global.Type">sType</a> <span title="java.lang.String" class="keyword">match</span>
					{
						<span title="java.lang.String" class="keyword">case</span> <a title="Browse.this.global.MethodType" id="20129">mt</a>: <a title="Browse.this.global.MethodType" id="13008">MethodType</a> <span class="keyword">if</span> <a href="#20124" title="Browse.this.global.TermSymbol">ts</a>.<a title="(Long)Boolean" id="12140">hasFlag</a>(Flags.<span title="Long(1L)">IMPLICIT</span>)=&gt; <span title="java.lang.String(&quot;implicit &quot;)" class="string">&quot;implicit &quot;</span> <a title="(Any)java.lang.String" id="5736">+</a> <a href="#10776" title="(Browse.this.global.Symbol)String">fullName</a>(<a href="#20123" title="Browse.this.global.Symbol">sym</a>) <a title="(Any)java.lang.String" id="5736">+</a> <span title="java.lang.String(&quot; : &quot;)" class="string">&quot; : &quot;</span> <a title="(Any)java.lang.String" id="5736">+</a> <a href="#10777" title="(Browse.this.global.Type)String">typeString</a>(<a href="#20125" title="Browse.this.global.Type">sType</a>)
						<span title="String" class="keyword">case</span> _ =&gt; <a href="#10777" title="(Browse.this.global.Type)String">typeString</a>(<a href="#20125" title="Browse.this.global.Type">sType</a>)
					}
				<span class="comment">//println(&quot;Term symbol &quot; + sym.id + &quot;: &quot; + asString)</span>
				<a href="#20072" title="browse.Token">token</a>.<a href="Token.scala.html#18328" title="(browse.TypeAttribute)Unit">tpe</a> = <a href="Token.scala.html#20085" title="(String,Option[browse.Link])browse.TypeAttribute">TypeAttribute</a>(<a href="#20126" title="java.lang.String">asString</a>, <a href="#10779" title="(java.io.File,Browse.this.global.Symbol)Option[browse.Link]">linkTo</a>(<a href="#20073" title="java.io.File">sourceFile</a>, <a href="#20125" title="Browse.this.global.Type">sType</a>.<a title="=&gt; Browse.this.global.Symbol" id="12387">typeSymbol</a>))
			<span title="Unit" class="keyword">case</span> <a title="Browse.this.global.TypeSymbol" id="20133">ts</a>: <a title="Browse.this.global.TypeSymbol" id="11945">TypeSymbol</a> =&gt;
				<span class="keyword">val</span> <a title="Browse.this.global.Type" id="20134">treeType</a> = <a href="#20071" title="Browse.this.global.Tree">t</a>.<a title="=&gt; Browse.this.global.Type" id="15008">tpe</a>
				<span class="keyword">val</span> <a title="Browse.this.global.Type" id="20135">sType</a> =
					<span title="Browse.this.global.Type" class="keyword">if</span>(<a href="#20134" title="Browse.this.global.Type">treeType</a> <a title="(AnyRef)Boolean" id="3452">==</a> <a href="#10765" title="object Browse.this.global.NoType" id="12689">NoType</a>) <a href="#20133" title="Browse.this.global.TypeSymbol">ts</a>.<a title="=&gt; Browse.this.global.Type" id="12163">info</a>
					<span class="keyword">else</span> <a href="#20134" title="Browse.this.global.Type">treeType</a>
				<span class="comment">//println(&quot;Type symbol &quot; + sym.id + &quot;: &quot; + typeString(sType))</span>
				<a href="#20072" title="browse.Token">token</a>.<a href="Token.scala.html#18328" title="(browse.TypeAttribute)Unit">tpe</a> = <a href="Token.scala.html#20085" title="(String,Option[browse.Link])browse.TypeAttribute">TypeAttribute</a>(<a href="#10777" title="(Browse.this.global.Type)String">typeString</a>(<a href="#20135" title="Browse.this.global.Type">sType</a>), <a href="#10779" title="(java.io.File,Browse.this.global.Symbol)Option[browse.Link]">linkTo</a>(<a href="#20073" title="java.io.File">sourceFile</a>, <a href="#20135" title="Browse.this.global.Type">sType</a>.<a title="=&gt; Browse.this.global.Symbol" id="12387">typeSymbol</a>))
			<span title="Unit" class="keyword">case</span> _ =&gt; <span title="Unit">(</span>)
		}
		<span title="Unit" class="keyword">if</span>(<a href="#20071" title="Browse.this.global.Tree">t</a>.<a title="=&gt; Boolean" id="15016">isDef</a>)
			<a href="#20072" title="browse.Token">token</a> <a href="Token.scala.html#18330" title="(Int)Unit">+=</a> <a href="#20123" title="Browse.this.global.Symbol">sym</a>.<a title="=&gt; Int" id="11903">id</a>
		<span class="keyword">else</span>
		{
			<a href="#10779" title="(java.io.File,Browse.this.global.Symbol)Option[browse.Link]">linkTo</a>(<a href="#20073" title="java.io.File">sourceFile</a>, <a href="#20123" title="Browse.this.global.Symbol">sym</a>) <span title="Unit" class="keyword">match</span>
			{
				<span title="Unit" class="keyword">case</span> <a id="1">Some</a>(<a title="browse.Link" id="20138">x</a>) =&gt; <a href="#20072" title="browse.Token">token</a>.<a href="Token.scala.html#18329" title="(browse.Link)Unit">reference</a> = <a href="#20138" title="browse.Link">x</a>
				<span title="Unit" class="keyword">case</span> <a title="object None" id="497">None</a> =&gt; <a href="#20072" title="browse.Token">token</a> <a href="Token.scala.html#18330" title="(Int)Unit">+=</a> <a href="#20123" title="Browse.this.global.Symbol">sym</a>.<a title="=&gt; Int" id="11903">id</a>
			}
		}
	}
	<span class="comment">/** Constructs a decoded fully qualified name for the given symbol. */</span>
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(Browse.this.global.Symbol)String" id="10776">fullName</a>(<a title="Browse.this.global.Symbol" id="20130">s</a>: <a title="Browse.this.global.Symbol" id="11886">Symbol</a>): <a title="String" id="1801">String</a> =
	{
		<span id="5933"><a title="(Boolean)Unit" id="779">require</a></span>(<a href="#20130" title="Browse.this.global.Symbol">s</a> <a title="(AnyRef)Boolean" id="5727">!=</a> <a href="#10765" title="object Browse.this.global.NoSymbol" id="12288">NoSymbol</a>)
		<span class="keyword">val</span> <a title="Browse.this.global.Symbol" id="20140">owner</a> = <a href="#20130" title="Browse.this.global.Symbol">s</a>.<a title="=&gt; Browse.this.global.Symbol" id="12128">owner</a>
		<span id="5933"><a title="(Boolean)Unit" id="779">require</a></span>(<a href="#20140" title="Browse.this.global.Symbol">owner</a> <a title="(AnyRef)Boolean" id="5727">!=</a> <a href="#10765" title="object Browse.this.global.NoSymbol" id="12288">NoSymbol</a>)
		<span title="String" class="keyword">if</span>(<a href="#20140" title="Browse.this.global.Symbol">owner</a>.<a title="=&gt; Boolean" id="12087">isRoot</a> <a title="(Boolean)Boolean" id="2693">||</a> <a href="#20140" title="Browse.this.global.Symbol">owner</a>.<a title="=&gt; Boolean" id="12090">isEmptyPackageClass</a>)
			<a href="#20130" title="Browse.this.global.Symbol">s</a>.<a title="=&gt; String" id="12242">nameString</a>
		<span class="keyword">else</span>
			<a href="#10776" title="(Browse.this.global.Symbol)String">fullName</a>(<a href="#20140" title="Browse.this.global.Symbol">owner</a>.<a title="=&gt; Browse.this.global.Symbol" id="12189">enclClass</a>) <a title="(Any)java.lang.String" id="5736">+</a> <span title="java.lang.String(&quot;.&quot;)" class="string">&quot;.&quot;</span> <a title="(Any)java.lang.String" id="5736">+</a> <a href="#20130" title="Browse.this.global.Symbol">s</a>.<a title="=&gt; String" id="12242">nameString</a>
	}
	<span class="comment">/** Produces a string for the given type that should be informative, but brief.*/</span>
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(Browse.this.global.Type)String" id="10777">typeString</a>(<a title="Browse.this.global.Type" id="20096">t</a>: <a title="Browse.this.global.Type" id="12378">Type</a>): <a title="String" id="1801">String</a> =
	{
		<a href="#20096" title="Browse.this.global.Type">t</a> <span title="String" class="keyword">match</span>
		{
			<span title="java.lang.String" class="keyword">case</span> <a title="Browse.this.global.CompoundType" id="20145">ct</a>: <a title="Browse.this.global.CompoundType" id="12820">CompoundType</a> =&gt; <a href="#10778" title="(Browse.this.global.CompoundType,String)java.lang.String">compoundTypeString</a>(<a href="#20145" title="Browse.this.global.CompoundType">ct</a>, <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>)<span class="comment">// tries to reduce size of some type strings</span>
			<span title="String" class="keyword">case</span> <a title="Browse.this.global.PolyType" id="20157">pt</a>: <a title="Browse.this.global.PolyType" id="13043">PolyType</a> =&gt;
				<span class="keyword">import</span> pt._
				<span title="String" class="keyword">if</span>(<a href="#20157" title="=&gt; List[Browse.this.global.Symbol]" id="13044">typeParams</a>.<a title="=&gt; Boolean" id="11453">isEmpty</a>)
					<span title="java.lang.String(&quot;=&gt; &quot;)" class="string">&quot;=&gt; &quot;</span> <a title="(Any)java.lang.String" id="5736">+</a> <a href="#10777" title="(Browse.this.global.Type)String">typeString</a>(<a href="#20157" title="=&gt; Browse.this.global.Type" id="13046">resultType</a>)
				<span class="keyword">else</span>
				{
					<span class="keyword">val</span> <a title="String" id="20160">typeParameters</a> = <a href="#20157" title="=&gt; List[Browse.this.global.Symbol]" id="13044">typeParams</a>.<a title="((Browse.this.global.Symbol) =&gt; String)List[String]" id="11180">map</a>(<a href="#20163" title="Browse.this.global.Symbol">_</a>.<a title="=&gt; String" id="12251">defString</a>).<a title="(String,String,String)String" id="11627">mkString</a>(<span title="java.lang.String(&quot;[&quot;)" class="string">&quot;[&quot;</span>, <span title="java.lang.String(&quot;, &quot;)" class="string">&quot;, &quot;</span>, <span title="java.lang.String(&quot;]&quot;)" class="string">&quot;]&quot;</span>)
					<a href="#20157" title="=&gt; Browse.this.global.Type" id="13046">resultType</a> <span title="String" class="keyword">match</span>
					{
						<span title="java.lang.String" class="keyword">case</span> <a title="Browse.this.global.CompoundType" id="20170">ct</a>: <a title="Browse.this.global.CompoundType" id="12820">CompoundType</a> =&gt; <a href="#10778" title="(Browse.this.global.CompoundType,String)java.lang.String">compoundTypeString</a>(<a href="#20170" title="Browse.this.global.CompoundType">ct</a>, <a href="#20160" title="String">typeParameters</a>)
						<span title="java.lang.String" class="keyword">case</span> _ =&gt; <a href="#20160" title="String">typeParameters</a> <a title="(Any)java.lang.String" id="5736">+</a> <a href="#10777" title="(Browse.this.global.Type)String">typeString</a>(<a href="#20157" title="=&gt; Browse.this.global.Type" id="13046">resultType</a>)
					}
				}
			<span title="String" class="keyword">case</span> _ =&gt; <a href="#20096" title="Browse.this.global.Type">t</a>.<a title="()String" id="12498">toString</a>
		}
	}
	<span class="comment">/** Converts the given compound type to a string.  'mainPostfix' is copied after the main type symbol
	* but before any parents or refinements*/</span>
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(Browse.this.global.CompoundType,String)java.lang.String" id="10778">compoundTypeString</a>(<a title="Browse.this.global.CompoundType" id="20146">ct</a>: <a title="Browse.this.global.CompoundType" id="12820">CompoundType</a>, <a title="String" id="20147">mainPostfix</a>: <a title="String" id="1801">String</a>) =
	{
		<span class="keyword">import</span> ct._
		<a href="#20146" title="=&gt; Browse.this.global.Symbol" id="12387">typeSymbol</a>.<a title="()String" id="12246">toString</a> <a title="(Any)java.lang.String" id="5736">+</a> <a href="#20147" title="String">mainPostfix</a> <a title="(Any)java.lang.String" id="5736">+</a>
		{
			<span title="Any" class="keyword">if</span>(<a href="#20146" title="Browse.this.global.CompoundType">ct</a>.<a title="=&gt; Browse.this.global.Symbol" id="12387">typeSymbol</a>.<a title="=&gt; Boolean" id="12086">isPackageClass</a>)
				<span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>
			<span class="keyword">else</span> <span title="Any" class="keyword">if</span>(<a href="#20146" title="=&gt; List[Browse.this.global.Type]" id="12425">parents</a>.<a title="=&gt; Boolean" id="11453">isEmpty</a>)
			{
				<span title="Any" class="keyword">if</span>(<a href="#20146" title="=&gt; Browse.this.global.Scope" id="12443">decls</a>.<a title="=&gt; Boolean" id="13553">isEmpty</a>)
					<span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>
				<span class="keyword">else</span>
					<a href="#20146" title="=&gt; Browse.this.global.Scope" id="12443">decls</a>.<a title="(String,String,String)String" id="13571">mkString</a>(<span title="java.lang.String(&quot;{&quot;)" class="string">&quot;{&quot;</span>, <span title="java.lang.String(&quot;; &quot;)" class="string">&quot;; &quot;</span>, <span title="java.lang.String(&quot;}&quot;)" class="string">&quot;}&quot;</span>)
			}
			<span class="keyword">else</span>
				<a href="#20146" title="=&gt; List[Browse.this.global.Type]" id="12425">parents</a>.<a title="(String,String,String)String" id="11627">mkString</a>(<span title="java.lang.String(&quot; extends &quot;)" class="string">&quot; extends &quot;</span>, <span title="java.lang.String(&quot; with &quot;)" class="string">&quot; with &quot;</span>, <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>)
		}
	}

	<span class="comment">/** Generates a link usable in the file 'from' to the symbol 'to', which might be in some other file. */</span>
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(java.io.File,Browse.this.global.Symbol)Option[browse.Link]" id="10779">linkTo</a>(<a title="java.io.File" id="20131">from</a>: <a title="java.io.File" id="3612">File</a>, <a title="Browse.this.global.Symbol" id="20132">sym</a>: <a title="Browse.this.global.Symbol" id="11886">Symbol</a>): <a title="Option[browse.Link]" id="889">Option</a>[Link] =
	{
		<span title="Option[browse.Link]" class="keyword">if</span>(<a href="#20132" title="Browse.this.global.Symbol">sym</a> <a title="(AnyRef)Boolean" id="3452">==</a> <a href="#10765" title="object Browse.this.global.NoSymbol" id="12288">NoSymbol</a>)
			<a title="object None" id="497">None</a>
		<span class="keyword">else</span>
		{
			<span class="keyword">val</span> <a title="scala.tools.nsc.io.AbstractFile" id="20173">source</a> = <a href="#20132" title="Browse.this.global.Symbol">sym</a>.<a title="=&gt; scala.tools.nsc.io.AbstractFile" id="12233">sourceFile</a>
			<span title="Option[browse.Link]" class="keyword">if</span>(<a href="#20173" title="scala.tools.nsc.io.AbstractFile">source</a> <a title="(AnyRef)Boolean" id="3452">==</a> <span title="Null(null)" class="keyword">null</span>)
				<a title="object None" id="497">None</a>
			<span class="keyword">else</span>
			{
				<span class="keyword">val</span> <a title="java.io.File" id="20175">file</a> = <a href="#20173" title="scala.tools.nsc.io.AbstractFile">source</a>.<a title="=&gt; java.io.File" id="17511">file</a>
				<span class="keyword">val</span> <a title="java.lang.String" id="20176">base</a> = <span title="java.lang.String" class="keyword">if</span>(<a href="#20175" title="java.io.File">file</a> <a title="(AnyRef)Boolean" id="3452">==</a> <a href="#20131" title="java.io.File">from</a>) <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span> <span class="keyword">else</span> <a href="FileUtil.scala.html#6223" title="object browse.FileUtil">FileUtil</a>.<a href="FileUtil.scala.html#17551" title="(java.io.File,java.io.File)String">relativePath</a>(<a href="#20131" title="java.io.File">from</a>, <a href="#20173" title="scala.tools.nsc.io.AbstractFile">source</a>.<a title="=&gt; java.io.File" id="17511">file</a>) <a title="(Any)java.lang.String" id="5736">+</a> <span title="java.lang.String(&quot;.html&quot;)" class="string">&quot;.html&quot;</span>
				<span id="19626"><a title="(browse.Link)Some[browse.Link]" id="278">Some</a></span>(<span title="browse.Link" class="keyword">new</span> <a href="Token.scala.html#6179" title="browse.Link">Link</a>(<a href="#20176" title="java.lang.String">base</a>, <a href="#20132" title="Browse.this.global.Symbol">sym</a>.<a title="=&gt; Int" id="11903">id</a>.<a title="()java.lang.String" id="3443">toString</a>))
			}
		}
	}
	<span class="comment">/** Relativizes the path to the given Scala source file to the base directory. */</span>
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(java.io.File)String" id="10780">getRelativeSourcePath</a>(<a title="java.io.File" id="17529">source</a>: <a title="java.io.File" id="3612">File</a>): <a title="String" id="1801">String</a> =
	{
		<a href="#10764" title="=&gt; Option[java.io.File]">baseDirectory</a> <span title="String" class="keyword">match</span>
		{
			<span title="String" class="keyword">case</span> <a id="1">Some</a>(<a title="java.io.File" id="20181">base</a>) =&gt;
				<a href="FileUtil.scala.html#6223" title="object browse.FileUtil">FileUtil</a>.<a href="FileUtil.scala.html#17555" title="(java.io.File,java.io.File)Option[String]">relativize</a>(<a href="#20181" title="java.io.File">base</a>, <a href="#17529" title="java.io.File">source</a>) <span title="String" class="keyword">match</span>
				{
					<span title="String" class="keyword">case</span> <a id="1">Some</a>(<a title="String" id="20184">relative</a>) =&gt; <a href="#20184" title="String">relative</a>
					<span title="java.lang.String" class="keyword">case</span> <a title="object None" id="497">None</a> =&gt; <a href="#10765" title="(String)Unit" id="10856">error</a>(<span title="java.lang.String(&quot;Source &quot;)" class="string">&quot;Source &quot;</span> <a title="(Any)java.lang.String" id="5736">+</a> <a href="#17529" title="java.io.File">source</a> <a title="(Any)java.lang.String" id="5736">+</a> <span title="java.lang.String(&quot; not in base directory &quot;)" class="string">&quot; not in base directory &quot;</span> <a title="(Any)java.lang.String" id="5736">+</a> <a href="#20181" title="java.io.File">base</a>); <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>
				}
			<span title="java.lang.String" class="keyword">case</span> <a title="object None" id="497">None</a> =&gt; <a href="#17529" title="java.io.File">source</a>.<a title="()java.lang.String" id="11665">getName</a>
		}
	}
}

<span class="keyword">object</span> <a title="object browse.Browse" id="6169">Browse</a>
{
	<span class="comment">/** The location to store the style sheet relative to the output directory.*/</span>
	<span class="keyword">val</span> <span id="16183"><a title="java.lang.String" id="16182">CSSRelativePath</a></span> = <span title="java.lang.String(&quot;style.css&quot;)" class="string">&quot;style.css&quot;</span>
	<span class="comment">/** The location to store the script relative to the output directory.*/</span>
	<span class="keyword">val</span> <span id="16185"><a title="java.lang.String" id="16184">JSRelativePath</a></span> = <span title="java.lang.String(&quot;linked.js&quot;)" class="string">&quot;linked.js&quot;</span>
	<span class="comment">/** The path of the default style sheet resource.*/</span>
	<span class="keyword">val</span> <span id="16187"><a title="java.lang.String" id="16186">DefaultCSS</a></span> = <span title="java.lang.String(&quot;/default-style.css&quot;)" class="string">&quot;/default-style.css&quot;</span>
	<span class="comment">/** The path of the default script resource.*/</span>
	<span class="keyword">val</span> <span id="16189"><a title="java.lang.String" id="16188">LinkedJS</a></span> = <span title="java.lang.String(&quot;/linked.js&quot;)" class="string">&quot;/linked.js&quot;</span>
	
	<span class="comment">/** Copies the default style sheet available as a resource on the classpath to the file 'to'.*/</span>
	<span class="keyword">def</span> <a title="(java.io.File)Unit" id="16190">writeDefaultCSS</a>(<a title="java.io.File" id="17294">to</a>: <a title="java.io.File" id="3612">File</a>) { <a href="FileUtil.scala.html#6223" title="object browse.FileUtil">FileUtil</a>.<a href="FileUtil.scala.html#17552" title="(String,java.io.File)Unit">writeResource</a>(<a href="#16186" title="=&gt; java.lang.String">DefaultCSS</a>, <a href="#17294" title="java.io.File">to</a>) }
	<span class="comment">/** Copies the default script available as a resource on the classpath to the file 'to'.*/</span>
	<span class="keyword">def</span> <a title="(java.io.File)Unit" id="16191">writeJS</a>(<a title="java.io.File" id="17295">to</a>: <a title="java.io.File" id="3612">File</a>) { <a href="FileUtil.scala.html#6223" title="object browse.FileUtil">FileUtil</a>.<a href="FileUtil.scala.html#17552" title="(String,java.io.File)Unit">writeResource</a>(<a href="#16188" title="=&gt; java.lang.String">LinkedJS</a>, <a href="#17295" title="java.io.File">to</a>) }
}
        </pre>
    </body>
</html>