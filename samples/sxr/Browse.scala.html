<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Browse.scala</title>
        <script type="text/javascript" src="linked.js"></script>
        <link rel="stylesheet" type="text/css" href="style.css" title="Style">
    </head>
    <body onload="initializeLinked()">
        <pre>
<span class="comment">/* sxr -- Scala X-Ray
 * Copyright 2009 Mark Harrah
 */</span>

<span class="keyword">package</span> sxr

<span class="keyword">import</span> scala.tools.nsc.{ast, plugins, symtab, util, Global}
<span class="keyword">import</span> ast.parser.Tokens
<span class="keyword">import</span> plugins.Plugin
<span class="keyword">import</span> symtab.Flags
<span class="keyword">import</span> util.SourceFile
<span class="keyword">import</span> scala.collection.jcl.{TreeMap, TreeSet}

<span class="keyword">import</span> java.io.{File, Reader, Writer}

<span class="comment">/** The actual work extracting symbols and types is done here. */</span>
<span class="keyword">abstract</span> <span class="keyword">class</span> <span class="typed"><span class="type">class Browse extends scala.tools.nsc.plugins.Plugin with ScalaObject</span><a id="6201">Browse</a></span> <span class="keyword">extends</span> <span class="typed"><span class="type">scala.tools.nsc.plugins.Plugin</span><a id="8756">Plugin</a></span>
{
	<span class="comment">/** The directory to which the annotated sources will be written. */</span>
	<span class="keyword">def</span> <span class="typed"><span class="type">=&gt; java.io.File</span><a id="11282">outputDirectory</a></span>: <span class="typed"><span class="type">java.io.File</span><a id="3644">File</a></span>
	<span class="comment">/** The directory against which the input source paths will be relativized.*/</span>
	<span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Option[java.io.File]</span><a id="11283">baseDirectory</a></span>: <span class="typed"><span class="type">Option[java.io.File]</span><a id="909">Option</a></span>[File]
	<span class="comment">/** The compiler.*/</span>
	<span class="keyword">val</span> <span class="typed"><span class="type">=&gt; scala.tools.nsc.Global</span><a id="11284">global</a></span>: <span class="typed"><span class="type">scala.tools.nsc.Global</span><a id="6516">Global</a></span>
	
	<span class="keyword">import</span> global._
	<span class="keyword">import</span> Browse._

	<span class="comment">/** The entry method for producing a set of html files and auxiliary javascript and CSS files that
	* annotate the source code for display in a web browser. */</span>
	<span class="keyword">def</span> <span class="typed"><span class="type">()Unit</span><a id="11287">generateOutput</a></span>()
	{
		<span class="keyword">val</span> <span class="typed"><span class="type">java.io.File</span><a id="16889">cssFile</a></span> = <span class="typed"><span class="type">(java.io.File,java.lang.String)java.io.File</span><a id="12308" class="keyword">new</a></span> <span class="typed"><span class="type">java.io.File</span><a id="3644">File</a></span>(<span class="typed"><span class="type">=&gt; java.io.File</span><a href="#11282">outputDirectory</a></span>, <span class="typed"><span class="type">=&gt; java.lang.String</span><a href="#16876">CSSRelativePath</a></span>)
		<span class="keyword">val</span> <span class="typed"><span class="type">java.io.File</span><a id="16890">jsFile</a></span> = <span class="typed"><span class="type">(java.io.File,java.lang.String)java.io.File</span><a id="12308" class="keyword">new</a></span> <span class="typed"><span class="type">java.io.File</span><a id="3644">File</a></span>(<span class="typed"><span class="type">=&gt; java.io.File</span><a href="#11282">outputDirectory</a></span>, <span class="typed"><span class="type">=&gt; java.lang.String</span><a href="#16878">JSRelativePath</a></span>)
		<span class="typed"><span class="type">(java.io.File)Unit</span><a href="#16884">writeDefaultCSS</a></span>(<span class="typed"><span class="type">java.io.File</span><a href="#16889">cssFile</a></span>)
		<span class="typed"><span class="type">(java.io.File)Unit</span><a href="#16885">writeJS</a></span>(<span class="typed"><span class="type">java.io.File</span><a href="#16890">jsFile</a></span>)
		<span class="keyword">var</span> <span class="typed"><span class="type">List[java.io.File]</span><a id="16891">outputFiles</a></span> = <span class="typed"><span class="type">object Nil</span><a id="310">List</a></span>[File]()
		<span class="keyword">for</span>(<span class="typed"><span class="type">((Browse.this.global.CompilationUnit) =&gt; Unit)Unit</span><span id="18039"><a id="18106">unit</a></span></span> &lt;- <span class="typed"><span class="type">=&gt; Browse.this.global.Run</span><a href="#11284" id="11761">currentRun</a></span>.<span class="typed"><span class="type">=&gt; Iterator[Browse.this.global.CompilationUnit]</span><a id="11748">units</a></span>)
		{
			<span class="keyword">val</span> <span class="typed"><span class="type">java.io.File</span><a id="18107">sourceFile</a></span> = <span class="typed"><span class="type">Browse.this.global.CompilationUnit</span><a href="#18106">unit</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.util.SourceFile</span><a id="16776">source</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.io.AbstractFile</span><a id="18127">file</a></span>.<span class="typed"><span class="type">=&gt; java.io.File</span><a id="18241">file</a></span>
			<span class="keyword">val</span> <span class="typed"><span class="type">String</span><a id="18108">relativeSourcePath</a></span> = <span class="typed"><span class="type">(java.io.File)String</span><a href="#11299">getRelativeSourcePath</a></span>(<span class="typed"><span class="type">java.io.File</span><a href="#18107">sourceFile</a></span>)
			<span class="keyword">val</span> <span class="typed"><span class="type">java.io.File</span><a id="18109">outputFile</a></span> = <span class="typed"><span class="type">(java.io.File,java.lang.String)java.io.File</span><a id="12308" class="keyword">new</a></span> <span class="typed"><span class="type">java.io.File</span><a id="3644">File</a></span>(<span class="typed"><span class="type">=&gt; java.io.File</span><a href="#11282">outputDirectory</a></span>, <span class="typed"><span class="type">String</span><a href="#18108">relativeSourcePath</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5768">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;.html&quot;)</span><span class="string">&quot;.html&quot;</span></span>)
			<span class="typed"><span class="type">List[java.io.File]</span><a href="#16891">outputFiles</a></span> <span class="typed"><span class="type">(java.io.File)List[java.io.File]</span><a id="11789">::=</a></span> <span class="typed"><span class="type">java.io.File</span><a href="#18109">outputFile</a></span>
			<span class="keyword">val</span> <span class="typed"><span class="type">String</span><a id="18110">relativizedCSSPath</a></span> = <span class="typed"><span class="type">object sxr.FileUtil</span><a href="FileUtil.scala.html#6256">FileUtil</a></span>.<span class="typed"><span class="type">(java.io.File,java.io.File)String</span><a href="FileUtil.scala.html#18293">relativePath</a></span>(<span class="typed"><span class="type">java.io.File</span><a href="#18109">outputFile</a></span>, <span class="typed"><span class="type">java.io.File</span><a href="#16889">cssFile</a></span>)
			<span class="keyword">val</span> <span class="typed"><span class="type">String</span><a id="18111">relativizedJSPath</a></span> = <span class="typed"><span class="type">object sxr.FileUtil</span><a href="FileUtil.scala.html#6256">FileUtil</a></span>.<span class="typed"><span class="type">(java.io.File,java.io.File)String</span><a href="FileUtil.scala.html#18293">relativePath</a></span>(<span class="typed"><span class="type">java.io.File</span><a href="#18109">outputFile</a></span>, <span class="typed"><span class="type">java.io.File</span><a href="#16890">jsFile</a></span>)

			<span class="comment">// generate the tokens</span>
			<span class="keyword">val</span> <span class="typed"><span class="type">scala.collection.jcl.TreeSet[sxr.Token]</span><a id="18112">tokens</a></span> = <span class="typed"><span class="type">(Browse.this.global.CompilationUnit)scala.collection.jcl.TreeSet[sxr.Token]</span><a href="#11288">scan</a></span>(<span class="typed"><span class="type">Browse.this.global.CompilationUnit</span><a href="#18106">unit</a></span>)
			<span class="keyword">val</span> <span class="typed"><span class="type">Browse.this.Traverse</span><a id="18113">traverser</a></span> = <span class="typed"><span class="type">Browse.this.Traverse</span><span class="keyword">new</span></span> <span class="typed"><span class="type">Browse.this.Traverse</span><a href="#11293">Traverse</a></span>(<span class="typed"><span class="type">scala.collection.jcl.TreeSet[sxr.Token]</span><a href="#18112">tokens</a></span>, <span class="typed"><span class="type">Browse.this.global.CompilationUnit</span><a href="#18106">unit</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.util.SourceFile</span><a id="16776">source</a></span>)
			<span class="typed"><span class="type">(Browse.this.global.Tree)Browse.this.global.Tree</span><a href="#18113" id="16684">traverser</a></span>(<span class="typed"><span class="type">Browse.this.global.CompilationUnit</span><a href="#18106">unit</a></span>.<span class="typed"><span class="type">=&gt; Browse.this.global.Tree</span><a id="16782">body</a></span>)

			<span class="keyword">val</span> <span class="typed"><span class="type">sxr.BasicStyler</span><a id="18114">styler</a></span> = <span class="typed"><span class="type">sxr.BasicStyler</span><span class="keyword">new</span></span> <span class="typed"><span class="type">sxr.BasicStyler</span><a href="Styler.scala.html#6232">BasicStyler</a></span>(<span class="typed"><span class="type">scala.collection.jcl.TreeSet[sxr.Token]</span><a href="#18112">tokens</a></span>, <span class="typed"><span class="type">String</span><a href="#18108">relativeSourcePath</a></span>, <span class="typed"><span class="type">String</span><a href="#18110">relativizedCSSPath</a></span>, <span class="typed"><span class="type">String</span><a href="#18111">relativizedJSPath</a></span>)
			<span class="typed"><span class="type">(java.io.File,java.io.File,scala.collection.jcl.TreeSet[sxr.Token],sxr.Styler)Unit</span><a href="Annotate.scala.html#20168">Annotate</a></span>(<span class="typed"><span class="type">java.io.File</span><a href="#18107">sourceFile</a></span>, <span class="typed"><span class="type">java.io.File</span><a href="#18109">outputFile</a></span>, <span class="typed"><span class="type">scala.collection.jcl.TreeSet[sxr.Token]</span><a href="#18112">tokens</a></span>, <span class="typed"><span class="type">sxr.BasicStyler</span><a href="#18114">styler</a></span>)
		}
		<span class="keyword">val</span> <span class="typed"><span class="type">java.io.File</span><a id="16892">indexFile</a></span> = <span class="typed"><span class="type">(java.io.File,java.lang.String)java.io.File</span><a id="12308" class="keyword">new</a></span> <span class="typed"><span class="type">java.io.File</span><a id="3644">File</a></span>(<span class="typed"><span class="type">=&gt; java.io.File</span><a href="#11282">outputDirectory</a></span>, <span class="typed"><span class="type">=&gt; java.lang.String</span><a href="#16874">IndexRelativePath</a></span>)
		<span class="typed"><span class="type">(java.io.File,Iterable[java.io.File])Unit</span><a href="#16886">writeIndex</a></span>(<span class="typed"><span class="type">java.io.File</span><a href="#16892">indexFile</a></span>, <span class="typed"><span class="type">List[java.io.File]</span><a href="#16891">outputFiles</a></span>)
	}
	<span class="comment">/** Tokenizes the given source.  The tokens are put into an ordered set by the start position of the token.
	* Symbols will be mapped back to these tokens by the offset of the symbol.*/</span>
	<span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(Browse.this.global.CompilationUnit)scala.collection.jcl.TreeSet[sxr.Token]</span><a id="11288">scan</a></span>(<span class="typed"><span class="type">Browse.this.global.CompilationUnit</span><a id="18301">unit</a></span>: <span class="typed"><span class="type">Browse.this.global.CompilationUnit</span><a id="16775">CompilationUnit</a></span>) =
	{
		<span class="keyword">val</span> <span class="typed"><span class="type">scala.collection.jcl.TreeSet[sxr.Token]</span><a id="18303">tokens</a></span> = <span class="typed"><span class="type">scala.collection.jcl.TreeSet[sxr.Token]</span><span id="6087"><a href="#19086" id="796" class="keyword">new</a></span></span> <span class="typed"><span class="type">scala.collection.jcl.TreeSet[sxr.Token]</span><a id="11010">TreeSet</a></span>[Token]
		<span class="keyword">val</span> <span class="typed"><span class="type">Browse.this.global.syntaxAnalyzer.UnitScanner</span><a id="18304">scanner</a></span> = <span class="typed"><span class="type">template $anon extends Browse.this.global.syntaxAnalyzer.UnitScanner</span><a id="19087" class="keyword">new</a></span> <span class="typed"><span class="type">object Browse.this.global.syntaxAnalyzer</span><a href="#11284" id="11435">syntaxAnalyzer</a></span>.<span class="typed"><span class="type">Browse.this.global.syntaxAnalyzer.UnitScanner</span><a id="19617">UnitScanner</a></span>(<span class="typed"><span class="type">Browse.this.global.CompilationUnit</span><a href="#18301">unit</a></span>) { <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Unit</span><a id="19930">init</a></span> <span class="typed"><span class="type">Unit</span><span >{</span></span>} }
		<span class="keyword">for</span>( <span class="typed"><span class="type">(((Int, Int, Int)) =&gt; Unit)Unit</span><span id="18039"><a href="#19941" id="18030">(</a></span></span><span class="typed"><span class="type">Int</span><span id="19943"><a id="19948">offset</a></span></span>, <span class="typed"><span class="type">Int</span><span id="19944"><a id="19949">length</a></span></span>, <span class="typed"><span class="type">Int</span><span id="19945"><a id="19950">code</a></span></span>) &lt;- <span class="typed"><span class="type">Browse.this.global.syntaxAnalyzer.UnitScanner</span><a href="#18304">scanner</a></span>.<span class="typed"><span class="type">=&gt; &lt;refinement&gt; extends java.lang.Object with Iterator[(Int, Int, Int)]</span><a id="19524">iterator</a></span>)
		{
			<span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span>(<span class="typed"><span class="type">(Int)Boolean</span><a href="#11289">includeToken</a></span>(<span class="typed"><span class="type">Int</span><a href="#19950">code</a></span>))
				<span class="typed"><span class="type">scala.collection.jcl.TreeSet[sxr.Token]</span><a href="#18303">tokens</a></span> <span class="typed"><span class="type">(sxr.Token)Unit</span><a id="18963">+=</a></span> <span class="typed"><span class="type">sxr.Token</span><span class="keyword">new</span></span> <span class="typed"><span class="type">sxr.Token</span><a href="Token.scala.html#6215">Token</a></span>(<span class="typed"><span class="type">Int</span><a href="#19948">offset</a></span>, <span class="typed"><span class="type">Int</span><a href="#19949">length</a></span>, <span class="typed"><span class="type">Int</span><a href="#19950">code</a></span>)
		}
		<span class="typed"><span class="type">scala.collection.jcl.TreeSet[sxr.Token]</span><a href="#18303">tokens</a></span>
	}
	<span class="comment">/** Filters out unwanted tokens such as whitespace and commas.  Braces are currently
	* included because () is annotated as Unit, and a partial function created by
	* { case ... } is associated with the opening brace.  */</span>
	<span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(Int)Boolean</span><a id="11289">includeToken</a></span>(<span class="typed"><span class="type">Int</span><a id="19951">code</a></span>: <span class="typed"><span class="type">Int</span><a id="2369">Int</a></span>) =
	{
		<span class="keyword">import</span> Tokens.{COMMENT, USCORE, isBrace, isKeyword, isIdentifier, isLiteral}
		<span class="typed"><span class="type">Int</span><a href="#19951">code</a></span> <span class="typed"><span class="type">Boolean</span><span class="keyword">match</span></span>
		{
			<span class="typed"><span class="type">Boolean(true)</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Int(97)</span><span >COMMENT</span></span> | <span class="typed"><span class="type">Int(73)</span><span >USCORE</span></span> =&gt; <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>
			<span class="typed"><span class="type">Boolean</span><span class="keyword">case</span></span> _ =&gt; <span class="typed"><span class="type">(Int)Boolean</span><span id="20068"><a id="8682">isKeyword</a></span></span>(<span class="typed"><span class="type">Int</span><a href="#19951">code</a></span>) <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2725">||</a></span> <span class="typed"><span class="type">(Int)Boolean</span><span id="19982"><a id="8682">isIdentifier</a></span></span>(<span class="typed"><span class="type">Int</span><a href="#19951">code</a></span>) <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2725">||</a></span> <span class="typed"><span class="type">(Int)Boolean</span><span id="19977"><a id="8682">isLiteral</a></span></span>(<span class="typed"><span class="type">Int</span><a href="#19951">code</a></span>) <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2725">||</a></span> <span class="typed"><span class="type">(Int)Boolean</span><span id="20113"><a id="8682">isBrace</a></span></span>(<span class="typed"><span class="type">Int</span><a href="#19951">code</a></span>)
		}
	}
	<span class="comment">/** Gets the token for the given offset.*/</span>
	<span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(scala.collection.jcl.TreeSet[sxr.Token],Int)Option[sxr.Token]</span><a id="11290">tokenAt</a></span>(<span class="typed"><span class="type">scala.collection.jcl.TreeSet[sxr.Token]</span><a id="20191">tokens</a></span>: <span class="typed"><span class="type">scala.collection.jcl.TreeSet[sxr.Token]</span><a id="11010">TreeSet</a></span>[Token], <span class="typed"><span class="type">Int</span><a id="20192">offset</a></span>: <span class="typed"><span class="type">Int</span><a id="2369">Int</a></span>): <span class="typed"><span class="type">Option[sxr.Token]</span><a id="909">Option</a></span>[Token] =
	{
		<span class="comment">// create artificial tokens to get a subset of the tokens starting at the given offset</span>
		<span class="keyword">val</span> <span class="typed"><span class="type">tokens.SortedSelf</span><a id="20193">inRange</a></span> = <span class="typed"><span class="type">scala.collection.jcl.TreeSet[sxr.Token]</span><a href="#20191">tokens</a></span>.<span class="typed"><span class="type">(sxr.Token,sxr.Token)tokens.SortedSelf</span><a id="19021">range</a></span>(<span class="typed"><span class="type">sxr.Token</span><span class="keyword">new</span></span> <span class="typed"><span class="type">sxr.Token</span><a href="Token.scala.html#6215">Token</a></span>(<span class="typed"><span class="type">Int</span><a href="#20192">offset</a></span>, <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>, <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>), <span class="typed"><span class="type">sxr.Token</span><span class="keyword">new</span></span> <span class="typed"><span class="type">sxr.Token</span><a href="Token.scala.html#6215">Token</a></span>(<span class="typed"><span class="type">Int</span><a href="#20192">offset</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3122">+</a></span><span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>, <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>, <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>))
		<span class="comment">// then, take the first token in the range</span>
		<span class="typed"><span class="type">Option[sxr.Token]</span><span class="keyword">if</span></span>(<span class="typed"><span class="type">tokens.SortedSelf</span><a href="#20193">inRange</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a id="18893">isEmpty</a></span>)
			<span class="typed"><span class="type">object None</span><a id="511">None</a></span>
		<span class="keyword">else</span>
			<span class="typed"><span class="type">(sxr.Token)Some[sxr.Token]</span><span id="20399"><a id="283">Some</a></span></span>(<span class="typed"><span class="type">tokens.SortedSelf</span><a href="#20193">inRange</a></span>.<span class="typed"><span class="type">=&gt; sxr.Token</span><a id="18335">firstKey</a></span>)
	}

	<span class="comment">/** Filters unwanted symbols, such as packages.*/</span>
	<span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(Browse.this.global.Symbol)Boolean</span><a id="11291">ignore</a></span>(<span class="typed"><span class="type">Browse.this.global.Symbol</span><a id="20404">s</a></span>: <span class="typed"><span class="type">Browse.this.global.Symbol</span><a id="12532">Symbol</a></span>): <span class="typed"><span class="type">Boolean</span><a id="2145">Boolean</a></span> =
		<span class="typed"><span class="type">(Browse.this.global.Symbol)Boolean</span><a href="#11292">ignoreBase</a></span>(<span class="typed"><span class="type">Browse.this.global.Symbol</span><a href="#20404">s</a></span>) <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2725">||</a></span>
		<span class="typed"><span class="type">Browse.this.global.Symbol</span><a href="#20404">s</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a id="12731">isModuleClass</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2725">||</a></span> <span class="comment">// ignore the generated class for modules</span>
		<span class="typed"><span class="type">Browse.this.global.Symbol</span><a href="#20404">s</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a id="12751">isPrimaryConstructor</a></span> <span class="comment">// the primary constructor overlaps with the class type, so just use the class type</span>
	<span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(Browse.this.global.Symbol)Boolean</span><a id="11292">ignoreBase</a></span>(<span class="typed"><span class="type">Browse.this.global.Symbol</span><a id="20431">s</a></span>: <span class="typed"><span class="type">Browse.this.global.Symbol</span><a id="12532">Symbol</a></span>): <span class="typed"><span class="type">Boolean</span><a id="2145">Boolean</a></span> =
		<span class="typed"><span class="type">=&gt; Boolean</span><a id="2722">!</a></span><span class="typed"><span class="type">Browse.this.global.Symbol</span><a href="#20431">s</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a id="12769">exists</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2725">||</a></span>
		<span class="typed"><span class="type">Browse.this.global.Symbol</span><a href="#20431">s</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a id="12716">isPackage</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2725">||</a></span> <span class="comment">// nothing done with packages</span>
		<span class="typed"><span class="type">Browse.this.global.Symbol</span><a href="#20431">s</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a id="12753">isImplClass</a></span>
		
	<span class="keyword">private</span> <span class="keyword">class</span> <span class="typed"><span class="type">class Traverse extends Browse.this.global.Traverser with ScalaObject</span><a id="11293">Traverse</a></span>(<span class="typed"><span class="type">scala.collection.jcl.TreeSet[sxr.Token]</span><span id="20134"><a id="20139">tokens</a></span></span>: <span class="typed"><span class="type">scala.collection.jcl.TreeSet[sxr.Token]</span><a id="11010">TreeSet</a></span>[Token], <span class="typed"><span class="type">scala.tools.nsc.util.SourceFile</span><span id="20135"><a id="20140">source</a></span></span>: <span class="typed"><span class="type">scala.tools.nsc.util.SourceFile</span><a id="10710">SourceFile</a></span>) <span class="keyword">extends</span> <span class="typed"><span class="type">Browse.this.global.Traverser</span><a href="#11284" id="16675">Traverser</a></span>
	{
		<span class="comment">// magic method #1</span>
		<span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">(Browse.this.global.Tree)Unit</span><a id="20137">traverse</a></span>(<span class="typed"><span class="type">Browse.this.global.Tree</span><a id="20435">tree</a></span>: <span class="typed"><span class="type">Browse.this.global.Tree</span><a id="15682">Tree</a></span>)
		{
			<span class="keyword">def</span> <span class="typed"><span class="type">()Unit</span><a id="20436">handleDefault</a></span>()
			{
				<span class="typed"><span class="type">(Browse.this.global.Tree)Unit</span><a href="#20138">process</a></span>(<span class="typed"><span class="type">Browse.this.global.Tree</span><a href="#20435">tree</a></span>)
				<span class="keyword">super</span>.<span class="typed"><span class="type">(Browse.this.global.Tree)Unit</span><a id="16680">traverse</a></span>(<span class="typed"><span class="type">Browse.this.global.Tree</span><a href="#20435">tree</a></span>)
			}
			<span class="typed"><span class="type">Browse.this.global.Tree</span><a href="#20435">tree</a></span> <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span>
			{
				<span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">ValDef</a>(_, _, _, <span class="typed"><span class="type">Browse.this.global.Tree</span><a id="20449">rhs</a></span>) =&gt;
					<span class="comment">// tests for synthetic val created for the x in x :: Nil, which would associate the wrong type with ::</span>
					<span class="comment">// because the synthetic val is associated with the :: token</span>
					<span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span>(<span class="typed"><span class="type">Browse.this.global.Tree</span><a href="#20435">tree</a></span>.<span class="typed"><span class="type">=&gt; Browse.this.global.Symbol</span><a id="15693">symbol</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5759">!=</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2726">&amp;&amp;</a></span> <span class="typed"><span class="type">Browse.this.global.Tree</span><a href="#20435">tree</a></span>.<span class="typed"><span class="type">=&gt; Browse.this.global.Symbol</span><a id="15693">symbol</a></span>.<span class="typed"><span class="type">(Long)Boolean</span><a id="12788">hasFlag</a></span>(Flags.<span class="typed"><span class="type">Long(2097152L)</span><span >SYNTHETIC</span></span>))
						<span class="typed"><span class="type">(Browse.this.global.Tree)Unit</span><a href="#20137">traverse</a></span>(<span class="typed"><span class="type">Browse.this.global.Tree</span><a href="#20449">rhs</a></span>)
					<span class="keyword">else</span>
						<span class="typed"><span class="type">()Unit</span><a href="#20436">handleDefault</a></span>()
				<span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">Template</a>(<span class="typed"><span class="type">List[Browse.this.global.Tree]</span><a id="20842">parents</a></span>, <span class="typed"><span class="type">Browse.this.global.ValDef</span><a id="20843">self</a></span>, <span class="typed"><span class="type">List[Browse.this.global.Tree]</span><a id="20844">body</a></span>) =&gt;
					<span class="comment">// If the first parent in the source is a trait, the first parent in parents will be AnyRef and it will</span>
					<span class="comment">// use the trait's token, bumping the trait.  So, this hack processes traits first</span>
					<span class="keyword">val</span> <span class="typed"><span class="type">(List[Browse.this.global.Tree], List[Browse.this.global.Tree])</span><span id="16985"><a href="#20850" id="1354">(</a></span></span><span class="typed"><span class="type">List[Browse.this.global.Tree]</span><span id="20850"><span id="20846"><a href="#20845" id="16974">traits</a></span></span></span>, <span class="typed"><span class="type">List[Browse.this.global.Tree]</span><span id="20851"><span id="20847"><a href="#20845" id="16976">notTraits</a></span></span></span>) = <span class="typed"><span class="type">List[Browse.this.global.Tree]</span><a href="#20842">parents</a></span>.<span class="typed"><span class="type">((Browse.this.global.Tree) =&gt; Boolean)(List[Browse.this.global.Tree], List[Browse.this.global.Tree])</span><a id="11823">partition</a></span>(<span class="typed"><span class="type">Browse.this.global.Tree</span><a href="#20849">_</a></span>.<span class="typed"><span class="type">=&gt; Browse.this.global.Symbol</span><a id="15693">symbol</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a id="12720">isTrait</a></span>)
					<span class="typed"><span class="type">(List[Browse.this.global.Tree])Unit</span><a href="#11293" id="16681">traverseTrees</a></span>(<span class="typed"><span class="type">List[Browse.this.global.Tree]</span><a href="#20846">traits</a></span>)
					<span class="typed"><span class="type">(List[Browse.this.global.Tree])Unit</span><a href="#11293" id="16681">traverseTrees</a></span>(<span class="typed"><span class="type">List[Browse.this.global.Tree]</span><a href="#20847">notTraits</a></span>)
					<span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a id="2722">!</a></span><span class="typed"><span class="type">Browse.this.global.ValDef</span><a href="#20843">self</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a id="15700">isEmpty</a></span>) <span class="typed"><span class="type">(Browse.this.global.Tree)Unit</span><a href="#20137">traverse</a></span>(<span class="typed"><span class="type">Browse.this.global.ValDef</span><a href="#20843">self</a></span>)
					<span class="typed"><span class="type">(List[Browse.this.global.Tree],Browse.this.global.Symbol)Unit</span><a href="#11293" id="16683">traverseStats</a></span>(<span class="typed"><span class="type">List[Browse.this.global.Tree]</span><a href="#20844">body</a></span>, <span class="typed"><span class="type">Browse.this.global.Tree</span><a href="#20435">tree</a></span>.<span class="typed"><span class="type">=&gt; Browse.this.global.Symbol</span><a id="15693">symbol</a></span>)
				<span class="comment">/*case DefDef(_, _, tparams, vparamss, _, rhs) =&gt;
					atOwner(tree.symbol) {
						traverseTrees(tparams); traverseTreess(vparamss); traverse(rhs)
					}*/</span>
				<span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> _ =&gt;
					<span class="typed"><span class="type">()Unit</span><a href="#20436">handleDefault</a></span>()
			}
		}
		
		<span class="comment">// magic method #2</span>
		<span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(Browse.this.global.Tree)Unit</span><a id="20138">process</a></span>(<span class="typed"><span class="type">Browse.this.global.Tree</span><a id="20437">t</a></span>: <span class="typed"><span class="type">Browse.this.global.Tree</span><a id="15682">Tree</a></span>)
		{
			<span class="keyword">for</span>(<span class="typed"><span class="type">((scala.tools.nsc.util.SourceFile) =&gt; Unit)Unit</span><span id="12369"><span id="12368"><span id="20866"><a id="20869">tSource</a></span></span></span></span> &lt;- <span class="typed"><span class="type">Browse.this.global.Tree</span><a href="#20437">t</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.util.Position</span><a id="15687">pos</a></span>.<span class="typed"><span class="type">=&gt; Option[scala.tools.nsc.util.SourceFile]</span><a id="20859">source</a></span> <span class="keyword">if</span> <span class="typed"><span class="type">scala.tools.nsc.util.SourceFile</span><a href="#20866">tSource</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3484">==</a></span> <span class="typed"><span class="type">scala.tools.nsc.util.SourceFile</span><a href="#20135">source</a></span>; <span class="typed"><span class="type">((Int) =&gt; Unit)Unit</span><span id="12369"><a id="20871">offset</a></span></span> &lt;- <span class="typed"><span class="type">Browse.this.global.Tree</span><a href="#20437">t</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.util.Position</span><a id="15687">pos</a></span>.<span class="typed"><span class="type">=&gt; Option[Int]</span><a id="20858">offset</a></span>; <span class="typed"><span class="type">((sxr.Token) =&gt; Unit)Unit</span><span id="12369"><a id="20873">token</a></span></span> &lt;- <span class="typed"><span class="type">(scala.collection.jcl.TreeSet[sxr.Token],Int)Option[sxr.Token]</span><a href="#11290">tokenAt</a></span>(<span class="typed"><span class="type">scala.collection.jcl.TreeSet[sxr.Token]</span><a href="#20134">tokens</a></span>, <span class="typed"><span class="type">Int</span><a href="#20871">offset</a></span>))
			{
				<span class="keyword">def</span> <span class="typed"><span class="type">()Unit</span><a id="20874">processDefaultSymbol</a></span>() =
				{
					<span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span>(<span class="typed"><span class="type">Browse.this.global.Tree</span><a href="#20437">t</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a id="15696">hasSymbol</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2726">&amp;&amp;</a></span> <span class="typed"><span class="type">=&gt; Boolean</span><a id="2722">!</a></span><span class="typed"><span class="type">(Browse.this.global.Symbol)Boolean</span><a href="#11291">ignore</a></span>(<span class="typed"><span class="type">Browse.this.global.Tree</span><a href="#20437">t</a></span>.<span class="typed"><span class="type">=&gt; Browse.this.global.Symbol</span><a id="15693">symbol</a></span>))
						<span class="typed"><span class="type">(Browse.this.global.Tree,sxr.Token,java.io.File)Unit</span><a href="#11294">processSymbol</a></span>(<span class="typed"><span class="type">Browse.this.global.Tree</span><a href="#20437">t</a></span>, <span class="typed"><span class="type">sxr.Token</span><a href="#20873">token</a></span>, <span class="typed"><span class="type">scala.tools.nsc.util.SourceFile</span><a href="#20135">source</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.io.AbstractFile</span><a id="18127">file</a></span>.<span class="typed"><span class="type">=&gt; java.io.File</span><a id="18241">file</a></span>)
				}
				<span class="keyword">def</span> <span class="typed"><span class="type">()Unit</span><a id="20875">processSimple</a></span>() { <span class="typed"><span class="type">sxr.Token</span><a href="#20873">token</a></span>.<span class="typed"><span class="type">(sxr.TypeAttribute)Unit</span><a href="Token.scala.html#19076">tpe</a></span> = <span class="typed"><span class="type">(String,Option[sxr.Link])sxr.TypeAttribute</span><a href="Token.scala.html#20891">TypeAttribute</a></span>(<span class="typed"><span class="type">(Browse.this.global.Type)String</span><a href="#11296">typeString</a></span>(<span class="typed"><span class="type">Browse.this.global.Tree</span><a href="#20437">t</a></span>.<span class="typed"><span class="type">=&gt; Browse.this.global.Type</span><a id="15689">tpe</a></span>), <span class="typed"><span class="type">object None</span><a id="511">None</a></span>) }
				<span class="keyword">def</span> <span class="typed"><span class="type">(Browse.this.global.TypeTree)Unit</span><a id="20876">processTypeTree</a></span>(<span class="typed"><span class="type">Browse.this.global.TypeTree</span><a id="20911">tt</a></span>: <span class="typed"><span class="type">Browse.this.global.TypeTree</span><a id="16191">TypeTree</a></span>) { <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span>(<span class="typed"><span class="type">=&gt; Boolean</span><a id="2722">!</a></span><span class="typed"><span class="type">(Browse.this.global.Symbol)Boolean</span><a href="#11291">ignore</a></span>(<span class="typed"><span class="type">Browse.this.global.TypeTree</span><a href="#20911">tt</a></span>.<span class="typed"><span class="type">=&gt; Browse.this.global.Symbol</span><a id="16199">symbol</a></span>)) <span class="typed"><span class="type">(Browse.this.global.Tree,sxr.Token,java.io.File)Unit</span><a href="#11294">processSymbol</a></span>(<span class="typed"><span class="type">Browse.this.global.TypeTree</span><a href="#20911">tt</a></span>, <span class="typed"><span class="type">sxr.Token</span><a href="#20873">token</a></span>, <span class="typed"><span class="type">scala.tools.nsc.util.SourceFile</span><a href="#20135">source</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.io.AbstractFile</span><a id="18127">file</a></span>.<span class="typed"><span class="type">=&gt; java.io.File</span><a id="18241">file</a></span>) }
				<span class="typed"><span class="type">Browse.this.global.Tree</span><a href="#20437">t</a></span> <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span>
				{
					<span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> _: <span class="typed"><span class="type">Browse.this.global.ClassDef</span><a id="15736">ClassDef</a></span> =&gt; <span class="typed"><span class="type">()Unit</span><a href="#20874">processDefaultSymbol</a></span>()
					<span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> _: <span class="typed"><span class="type">Browse.this.global.ModuleDef</span><a id="15868">ModuleDef</a></span> =&gt; <span class="typed"><span class="type">()Unit</span><a href="#20874">processDefaultSymbol</a></span>()
					<span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> _: <span class="typed"><span class="type">Browse.this.global.ValOrDefDef</span><a id="15807">ValOrDefDef</a></span> =&gt; <span class="typed"><span class="type">()Unit</span><a href="#20874">processDefaultSymbol</a></span>()
					<span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> _: <span class="typed"><span class="type">Browse.this.global.TypeDef</span><a id="15835">TypeDef</a></span> =&gt; <span class="typed"><span class="type">()Unit</span><a href="#20874">processDefaultSymbol</a></span>()
					<span class="comment">//case _: Super =&gt; processDefaultSymbol()</span>
					<span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> _: <span class="typed"><span class="type">Browse.this.global.This</span><a id="16162">This</a></span> =&gt; <span class="typed"><span class="type">()Unit</span><a href="#20874">processDefaultSymbol</a></span>()
					<span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Browse.this.global.Select</span><a id="20912">s</a></span>: <span class="typed"><span class="type">Browse.this.global.Select</span><a id="16170">Select</a></span> =&gt; <span class="typed"><span class="type">()Unit</span><a href="#20874">processDefaultSymbol</a></span>()
					<span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> _: <span class="typed"><span class="type">Browse.this.global.New</span><a id="16096">New</a></span> =&gt; <span class="typed"><span class="type">()Unit</span><a href="#20875">processSimple</a></span>()
					<span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> _: <span class="typed"><span class="type">Browse.this.global.Sequence</span><a id="15970">Sequence</a></span> =&gt; <span class="typed"><span class="type">()Unit</span><a href="#20874">processDefaultSymbol</a></span>()
					<span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> _: <span class="typed"><span class="type">Browse.this.global.Alternative</span><a id="15978">Alternative</a></span> =&gt; <span class="typed"><span class="type">()Unit</span><a href="#20874">processDefaultSymbol</a></span>()
					<span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> _: <span class="typed"><span class="type">Browse.this.global.Star</span><a id="15986">Star</a></span> =&gt; <span class="typed"><span class="type">()Unit</span><a href="#20874">processDefaultSymbol</a></span>()
					<span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> _: <span class="typed"><span class="type">Browse.this.global.Bind</span><a id="15994">Bind</a></span> =&gt; <span class="typed"><span class="type">()Unit</span><a href="#20874">processDefaultSymbol</a></span>()
					<span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">Apply</a>(<span class="typed"><span class="type">Browse.this.global.Tree</span><a id="20913">fun</a></span>, <span class="typed"><span class="type">List[Browse.this.global.Tree]</span><a id="20914">args</a></span>) =&gt; <span class="comment">//processDefaultSymbol()</span>
						<span class="comment">/*fun match
						{
							case tt: TypeTree =&gt; if(!ignoreBase(tt.symbol)) processTypeTree(tt)
							case _ =&gt; traverse(fun)
						}
						traverseTrees(args)*/</span>
					<span class="comment">//case _: Import =&gt; processSimple()</span>
					<span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> _: <span class="typed"><span class="type">Browse.this.global.Return</span><a id="16068">Return</a></span> =&gt; <span class="typed"><span class="type">()Unit</span><a href="#20875">processSimple</a></span>()
					<span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> _: <span class="typed"><span class="type">Browse.this.global.If</span><a id="16046">If</a></span> =&gt; <span class="typed"><span class="type">()Unit</span><a href="#20875">processSimple</a></span>()
					<span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> _: <span class="typed"><span class="type">Browse.this.global.Match</span><a id="16058">Match</a></span> =&gt; <span class="typed"><span class="type">()Unit</span><a href="#20875">processSimple</a></span>() <span class="comment">// this will annotate the 'match' keyword with the type returned by the associated pattern match</span>
					<span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> _: <span class="typed"><span class="type">Browse.this.global.CaseDef</span><a id="15958">CaseDef</a></span> =&gt; <span class="typed"><span class="type">()Unit</span><a href="#20875">processSimple</a></span>() <span class="comment">// this will annotate the 'case' keyword with the type returned by that particular case statement</span>
					<span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> _: <span class="typed"><span class="type">Browse.this.global.Throw</span><a id="16088">Throw</a></span> =&gt; <span class="typed"><span class="type">()Unit</span><a href="#20875">processSimple</a></span>()
					<span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Browse.this.global.TypeApply</span><a id="20915">ta</a></span>: <span class="typed"><span class="type">Browse.this.global.TypeApply</span><a id="16114">TypeApply</a></span> =&gt; <span class="typed"><span class="type">()Unit</span><a href="#20875">processSimple</a></span>() <span class="comment">// this fills in type parameters for methods</span>
					<span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">Ident</a>(_) =&gt; <span class="typed"><span class="type">()Unit</span><a href="#20874">processDefaultSymbol</a></span>()
					<span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">Literal</a>(<span class="typed"><span class="type">Browse.this.global.Constant</span><a id="20918">value</a></span>) =&gt; <span class="typed"><span class="type">()Unit</span><a href="#20875">processSimple</a></span>() <span class="comment">// annotate literals</span>
					<span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Browse.this.global.TypeTree</span><a id="20919">tt</a></span>: <span class="typed"><span class="type">Browse.this.global.TypeTree</span><a id="16191">TypeTree</a></span> =&gt;
						<span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span>(<span class="typed"><span class="type">sxr.Token</span><a href="#20873">token</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="Token.scala.html#19083">isPlain</a></span>)
							<span class="typed"><span class="type">(Browse.this.global.Tree,sxr.Token,java.io.File)Unit</span><a href="#11294">processSymbol</a></span>(<span class="typed"><span class="type">Browse.this.global.TypeTree</span><a href="#20919">tt</a></span>, <span class="typed"><span class="type">sxr.Token</span><a href="#20873">token</a></span>, <span class="typed"><span class="type">scala.tools.nsc.util.SourceFile</span><a href="#20135">source</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.io.AbstractFile</span><a id="18127">file</a></span>.<span class="typed"><span class="type">=&gt; java.io.File</span><a id="18241">file</a></span>)
					<span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> _ =&gt; <span class="typed"><span class="type">Unit</span><span >(</span></span>)
				}
			}
		}
	}
		<span class="comment">// magic method #3</span>
	<span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(Browse.this.global.Tree,sxr.Token,java.io.File)Unit</span><a id="11294">processSymbol</a></span>(<span class="typed"><span class="type">Browse.this.global.Tree</span><a id="20877">t</a></span>: <span class="typed"><span class="type">Browse.this.global.Tree</span><a id="15682">Tree</a></span>, <span class="typed"><span class="type">sxr.Token</span><a id="20878">token</a></span>: <span class="typed"><span class="type">sxr.Token</span><a href="Token.scala.html#6215">Token</a></span>, <span class="typed"><span class="type">java.io.File</span><a id="20879">sourceFile</a></span>: <span class="typed"><span class="type">java.io.File</span><a id="3644">File</a></span>)
	{
		<span class="keyword">val</span> <span class="typed"><span class="type">Browse.this.global.Symbol</span><a id="20929">sym</a></span> = <span class="typed"><span class="type">Browse.this.global.Tree</span><a href="#20877">t</a></span>.<span class="typed"><span class="type">=&gt; Browse.this.global.Symbol</span><a id="15693">symbol</a></span>
		<span class="typed"><span class="type">Browse.this.global.Symbol</span><a href="#20929">sym</a></span> <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span>
		{
			<span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Browse.this.global.TermSymbol</span><a id="20930">ts</a></span>: <span class="typed"><span class="type">Browse.this.global.TermSymbol</span><a id="12566">TermSymbol</a></span> =&gt;
				<span class="keyword">val</span> <span class="typed"><span class="type">Browse.this.global.Type</span><a id="20931">sType</a></span> =
					<span class="typed"><span class="type">Browse.this.global.Tree</span><a href="#20877">t</a></span> <span class="typed"><span class="type">Browse.this.global.Type</span><span class="keyword">match</span></span>
					{
						<span class="typed"><span class="type">Browse.this.global.Type</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Browse.this.global.ApplyDynamic</span><a id="20932">ad</a></span>: <span class="typed"><span class="type">Browse.this.global.ApplyDynamic</span><a id="16142">ApplyDynamic</a></span> =&gt; <span class="typed"><span class="type">Browse.this.global.ApplyDynamic</span><a href="#20932">ad</a></span>.<span class="typed"><span class="type">=&gt; Browse.this.global.Tree</span><a id="16143">qual</a></span>.<span class="typed"><span class="type">=&gt; Browse.this.global.Type</span><a id="15689">tpe</a></span>.<span class="typed"><span class="type">(Browse.this.global.Symbol)Browse.this.global.Type</span><a id="13102">memberType</a></span>(<span class="typed"><span class="type">Browse.this.global.ApplyDynamic</span><a href="#20932">ad</a></span>.<span class="typed"><span class="type">=&gt; Browse.this.global.Symbol</span><a id="15743">symbol</a></span>)
						<span class="typed"><span class="type">Browse.this.global.Type</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Browse.this.global.Select</span><a id="20933">s</a></span>: <span class="typed"><span class="type">Browse.this.global.Select</span><a id="16170">Select</a></span> =&gt; <span class="typed"><span class="type">Browse.this.global.Select</span><a href="#20933">s</a></span>.<span class="typed"><span class="type">=&gt; Browse.this.global.Tree</span><a id="16171">qualifier</a></span>.<span class="typed"><span class="type">=&gt; Browse.this.global.Type</span><a id="15689">tpe</a></span>.<span class="typed"><span class="type">(Browse.this.global.Symbol)Browse.this.global.Type</span><a id="13102">memberType</a></span>(<span class="typed"><span class="type">Browse.this.global.Select</span><a href="#20933">s</a></span>.<span class="typed"><span class="type">=&gt; Browse.this.global.Symbol</span><a id="15743">symbol</a></span>)
						<span class="typed"><span class="type">Browse.this.global.Type</span><span class="keyword">case</span></span> _ =&gt; <span class="typed"><span class="type">Browse.this.global.TermSymbol</span><a href="#20930">ts</a></span>.<span class="typed"><span class="type">=&gt; Browse.this.global.Symbol</span><a id="12776">owner</a></span>.<span class="typed"><span class="type">=&gt; Browse.this.global.Type</span><a id="12842">thisType</a></span>.<span class="typed"><span class="type">(Browse.this.global.Symbol)Browse.this.global.Type</span><a id="13102">memberType</a></span>(<span class="typed"><span class="type">Browse.this.global.TermSymbol</span><a href="#20930">ts</a></span>)
					}
				<span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span>(<span class="typed"><span class="type">Browse.this.global.Type</span><a href="#20931">sType</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5759">!=</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>)
				{
					<span class="keyword">val</span> <span class="typed"><span class="type">java.lang.String</span><a id="20935">asString</a></span> =
						<span class="typed"><span class="type">Browse.this.global.Type</span><a href="#20931">sType</a></span> <span class="typed"><span class="type">java.lang.String</span><span class="keyword">match</span></span>
						{
							<span class="typed"><span class="type">java.lang.String</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Browse.this.global.MethodType</span><a id="20936">mt</a></span>: <span class="typed"><span class="type">Browse.this.global.MethodType</span><a id="13645">MethodType</a></span> <span class="keyword">if</span> <span class="typed"><span class="type">Browse.this.global.TermSymbol</span><a href="#20930">ts</a></span>.<span class="typed"><span class="type">(Long)Boolean</span><a id="12788">hasFlag</a></span>(Flags.<span class="typed"><span class="type">Long(512L)</span><span >IMPLICIT</span></span>)=&gt; <span class="typed"><span class="type">java.lang.String(&quot;implicit &quot;)</span><span class="string">&quot;implicit &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5768">+</a></span> <span class="typed"><span class="type">(Browse.this.global.Symbol)String</span><a href="#11295">fullName</a></span>(<span class="typed"><span class="type">Browse.this.global.Symbol</span><a href="#20929">sym</a></span>) <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5768">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot; : &quot;)</span><span class="string">&quot; : &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5768">+</a></span> <span class="typed"><span class="type">(Browse.this.global.Type)String</span><a href="#11296">typeString</a></span>(<span class="typed"><span class="type">Browse.this.global.Type</span><a href="#20931">sType</a></span>)
							<span class="typed"><span class="type">String</span><span class="keyword">case</span></span> _ =&gt; <span class="typed"><span class="type">(Browse.this.global.Type)String</span><a href="#11296">typeString</a></span>(<span class="typed"><span class="type">Browse.this.global.Type</span><a href="#20931">sType</a></span>)
						}
					<span class="comment">//println(&quot;Term symbol &quot; + sym.id + &quot;: &quot; + asString)</span>
					<span class="typed"><span class="type">sxr.Token</span><a href="#20878">token</a></span>.<span class="typed"><span class="type">(sxr.TypeAttribute)Unit</span><a href="Token.scala.html#19076">tpe</a></span> = <span class="typed"><span class="type">(String,Option[sxr.Link])sxr.TypeAttribute</span><a href="Token.scala.html#20891">TypeAttribute</a></span>(<span class="typed"><span class="type">java.lang.String</span><a href="#20935">asString</a></span>, <span class="typed"><span class="type">(java.io.File,Browse.this.global.Symbol)Option[sxr.Link]</span><a href="#11298">linkTo</a></span>(<span class="typed"><span class="type">java.io.File</span><a href="#20879">sourceFile</a></span>, <span class="typed"><span class="type">Browse.this.global.Type</span><a href="#20931">sType</a></span>.<span class="typed"><span class="type">=&gt; Browse.this.global.Symbol</span><a id="13034">typeSymbol</a></span>))
				}
			<span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Browse.this.global.TypeSymbol</span><a id="20940">ts</a></span>: <span class="typed"><span class="type">Browse.this.global.TypeSymbol</span><a id="12591">TypeSymbol</a></span> =&gt;
				<span class="keyword">val</span> <span class="typed"><span class="type">Browse.this.global.Type</span><a id="20941">treeType</a></span> = <span class="typed"><span class="type">Browse.this.global.Tree</span><a href="#20877">t</a></span>.<span class="typed"><span class="type">=&gt; Browse.this.global.Type</span><a id="15689">tpe</a></span>
				<span class="keyword">val</span> <span class="typed"><span class="type">Browse.this.global.Type</span><a id="20942">sType</a></span> =
					<span class="typed"><span class="type">Browse.this.global.Type</span><span class="keyword">if</span></span>(<span class="typed"><span class="type">Browse.this.global.Type</span><a href="#20941">treeType</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3484">==</a></span> <span class="typed"><span class="type">object Browse.this.global.NoType</span><a href="#11284" id="13332">NoType</a></span>) <span class="typed"><span class="type">Browse.this.global.TypeSymbol</span><a href="#20940">ts</a></span>.<span class="typed"><span class="type">=&gt; Browse.this.global.Type</span><a id="12810">info</a></span>
					<span class="keyword">else</span> <span class="typed"><span class="type">Browse.this.global.Type</span><a href="#20941">treeType</a></span>
				<span class="comment">//println(&quot;Type symbol &quot; + sym.id + &quot;: &quot; + typeString(sType))</span>
				<span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span>(<span class="typed"><span class="type">Browse.this.global.Type</span><a href="#20942">sType</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5759">!=</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>)
					<span class="typed"><span class="type">sxr.Token</span><a href="#20878">token</a></span>.<span class="typed"><span class="type">(sxr.TypeAttribute)Unit</span><a href="Token.scala.html#19076">tpe</a></span> = <span class="typed"><span class="type">(String,Option[sxr.Link])sxr.TypeAttribute</span><a href="Token.scala.html#20891">TypeAttribute</a></span>(<span class="typed"><span class="type">(Browse.this.global.Type)String</span><a href="#11296">typeString</a></span>(<span class="typed"><span class="type">Browse.this.global.Type</span><a href="#20942">sType</a></span>), <span class="typed"><span class="type">(java.io.File,Browse.this.global.Symbol)Option[sxr.Link]</span><a href="#11298">linkTo</a></span>(<span class="typed"><span class="type">java.io.File</span><a href="#20879">sourceFile</a></span>, <span class="typed"><span class="type">Browse.this.global.Type</span><a href="#20942">sType</a></span>.<span class="typed"><span class="type">=&gt; Browse.this.global.Symbol</span><a id="13034">typeSymbol</a></span>))
			<span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> _ =&gt; <span class="typed"><span class="type">Unit</span><span >(</span></span>)
		}
		<span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span>(<span class="typed"><span class="type">Browse.this.global.Symbol</span><a href="#20929">sym</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5759">!=</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>)
		{
			<span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span>(<span class="typed"><span class="type">Browse.this.global.Tree</span><a href="#20877">t</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a id="15697">isDef</a></span>)
				<span class="typed"><span class="type">sxr.Token</span><a href="#20878">token</a></span> <span class="typed"><span class="type">(Int)Unit</span><a href="Token.scala.html#19078">+=</a></span> <span class="typed"><span class="type">Browse.this.global.Symbol</span><a href="#20929">sym</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="12549">id</a></span>
			<span class="keyword">else</span>
			{
				<span class="typed"><span class="type">(java.io.File,Browse.this.global.Symbol)Option[sxr.Link]</span><a href="#11298">linkTo</a></span>(<span class="typed"><span class="type">java.io.File</span><a href="#20879">sourceFile</a></span>, <span class="typed"><span class="type">Browse.this.global.Symbol</span><a href="#20929">sym</a></span>) <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span>
				{
					<span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">Some</a>(<span class="typed"><span class="type">sxr.Link</span><a id="20947">x</a></span>) =&gt; <span class="typed"><span class="type">sxr.Token</span><a href="#20878">token</a></span>.<span class="typed"><span class="type">(sxr.Link)Unit</span><a href="Token.scala.html#19077">reference</a></span> = <span class="typed"><span class="type">sxr.Link</span><a href="#20947">x</a></span>
					<span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object None</span><a id="511">None</a></span> =&gt; <span class="typed"><span class="type">sxr.Token</span><a href="#20878">token</a></span> <span class="typed"><span class="type">(Int)Unit</span><a href="Token.scala.html#19078">+=</a></span> <span class="typed"><span class="type">Browse.this.global.Symbol</span><a href="#20929">sym</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="12549">id</a></span>
				}
			}
		}
	}
	<span class="comment">/** Constructs a decoded fully qualified name for the given symbol. */</span>
	<span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(Browse.this.global.Symbol)String</span><a id="11295">fullName</a></span>(<span class="typed"><span class="type">Browse.this.global.Symbol</span><a id="20937">s</a></span>: <span class="typed"><span class="type">Browse.this.global.Symbol</span><a id="12532">Symbol</a></span>): <span class="typed"><span class="type">String</span><a id="1836">String</a></span> =
	{
		<span class="typed"><span class="type">(Boolean)Unit</span><span id="5965"><a id="796">require</a></span></span>(<span class="typed"><span class="type">Browse.this.global.Symbol</span><a href="#20937">s</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5759">!=</a></span> <span class="typed"><span class="type">object Browse.this.global.NoSymbol</span><a href="#11284" id="12936">NoSymbol</a></span>)
		<span class="keyword">val</span> <span class="typed"><span class="type">Browse.this.global.Symbol</span><a id="20949">owner</a></span> = <span class="typed"><span class="type">Browse.this.global.Symbol</span><a href="#20937">s</a></span>.<span class="typed"><span class="type">=&gt; Browse.this.global.Symbol</span><a id="12776">owner</a></span>
		<span class="typed"><span class="type">(Boolean)Unit</span><span id="5965"><a id="796">require</a></span></span>(<span class="typed"><span class="type">Browse.this.global.Symbol</span><a href="#20949">owner</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5759">!=</a></span> <span class="typed"><span class="type">object Browse.this.global.NoSymbol</span><a href="#11284" id="12936">NoSymbol</a></span>)
		<span class="typed"><span class="type">String</span><span class="keyword">if</span></span>(<span class="typed"><span class="type">Browse.this.global.Symbol</span><a href="#20949">owner</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a id="12733">isRoot</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2725">||</a></span> <span class="typed"><span class="type">Browse.this.global.Symbol</span><a href="#20949">owner</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a id="12736">isEmptyPackageClass</a></span>)
			<span class="typed"><span class="type">Browse.this.global.Symbol</span><a href="#20937">s</a></span>.<span class="typed"><span class="type">=&gt; String</span><a id="12889">nameString</a></span>
		<span class="keyword">else</span>
			<span class="typed"><span class="type">(Browse.this.global.Symbol)String</span><a href="#11295">fullName</a></span>(<span class="typed"><span class="type">Browse.this.global.Symbol</span><a href="#20949">owner</a></span>.<span class="typed"><span class="type">=&gt; Browse.this.global.Symbol</span><a id="12836">enclClass</a></span>) <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5768">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;.&quot;)</span><span class="string">&quot;.&quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5768">+</a></span> <span class="typed"><span class="type">Browse.this.global.Symbol</span><a href="#20937">s</a></span>.<span class="typed"><span class="type">=&gt; String</span><a id="12889">nameString</a></span>
	}
	<span class="comment">/** Produces a string for the given type that should be informative, but brief.*/</span>
	<span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(Browse.this.global.Type)String</span><a id="11296">typeString</a></span>(<span class="typed"><span class="type">Browse.this.global.Type</span><a id="20902">t</a></span>: <span class="typed"><span class="type">Browse.this.global.Type</span><a id="13025">Type</a></span>): <span class="typed"><span class="type">String</span><a id="1836">String</a></span> =
	{
		<span class="typed"><span class="type">Browse.this.global.Type</span><a href="#20902">t</a></span> <span class="typed"><span class="type">String</span><span class="keyword">match</span></span>
		{
			<span class="typed"><span class="type">java.lang.String</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Browse.this.global.CompoundType</span><a id="20954">ct</a></span>: <span class="typed"><span class="type">Browse.this.global.CompoundType</span><a id="13458">CompoundType</a></span> =&gt; <span class="typed"><span class="type">(Browse.this.global.CompoundType,String)java.lang.String</span><a href="#11297">compoundTypeString</a></span>(<span class="typed"><span class="type">Browse.this.global.CompoundType</span><a href="#20954">ct</a></span>, <span class="typed"><span class="type">java.lang.String(&quot;&quot;)</span><span class="string">&quot;&quot;</span></span>)<span class="comment">// tries to reduce size of some type strings</span>
			<span class="typed"><span class="type">String</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Browse.this.global.PolyType</span><a id="20966">pt</a></span>: <span class="typed"><span class="type">Browse.this.global.PolyType</span><a id="13679">PolyType</a></span> =&gt;
				<span class="keyword">import</span> pt._
				<span class="typed"><span class="type">String</span><span class="keyword">if</span></span>(<span class="typed"><span class="type">=&gt; List[Browse.this.global.Symbol]</span><a href="#20966" id="13680">typeParams</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a id="12099">isEmpty</a></span>)
					<span class="typed"><span class="type">java.lang.String(&quot;=&gt; &quot;)</span><span class="string">&quot;=&gt; &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5768">+</a></span> <span class="typed"><span class="type">(Browse.this.global.Type)String</span><a href="#11296">typeString</a></span>(<span class="typed"><span class="type">=&gt; Browse.this.global.Type</span><a href="#20966" id="13682">resultType</a></span>)
				<span class="keyword">else</span>
				{
					<span class="keyword">val</span> <span class="typed"><span class="type">String</span><a id="20969">typeParameters</a></span> = <span class="typed"><span class="type">=&gt; List[Browse.this.global.Symbol]</span><a href="#20966" id="13680">typeParams</a></span>.<span class="typed"><span class="type">((Browse.this.global.Symbol) =&gt; String)List[String]</span><a id="11816">map</a></span>(<span class="typed"><span class="type">Browse.this.global.Symbol</span><a href="#20972">_</a></span>.<span class="typed"><span class="type">=&gt; String</span><a id="12899">defString</a></span>).<span class="typed"><span class="type">(String,String,String)String</span><a id="12272">mkString</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;[&quot;)</span><span class="string">&quot;[&quot;</span></span>, <span class="typed"><span class="type">java.lang.String(&quot;, &quot;)</span><span class="string">&quot;, &quot;</span></span>, <span class="typed"><span class="type">java.lang.String(&quot;]&quot;)</span><span class="string">&quot;]&quot;</span></span>)
					<span class="typed"><span class="type">=&gt; Browse.this.global.Type</span><a href="#20966" id="13682">resultType</a></span> <span class="typed"><span class="type">String</span><span class="keyword">match</span></span>
					{
						<span class="typed"><span class="type">java.lang.String</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Browse.this.global.CompoundType</span><a id="20979">ct</a></span>: <span class="typed"><span class="type">Browse.this.global.CompoundType</span><a id="13458">CompoundType</a></span> =&gt; <span class="typed"><span class="type">(Browse.this.global.CompoundType,String)java.lang.String</span><a href="#11297">compoundTypeString</a></span>(<span class="typed"><span class="type">Browse.this.global.CompoundType</span><a href="#20979">ct</a></span>, <span class="typed"><span class="type">String</span><a href="#20969">typeParameters</a></span>)
						<span class="typed"><span class="type">java.lang.String</span><span class="keyword">case</span></span> _ =&gt; <span class="typed"><span class="type">String</span><a href="#20969">typeParameters</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5768">+</a></span> <span class="typed"><span class="type">(Browse.this.global.Type)String</span><a href="#11296">typeString</a></span>(<span class="typed"><span class="type">=&gt; Browse.this.global.Type</span><a href="#20966" id="13682">resultType</a></span>)
					}
				}
			<span class="typed"><span class="type">String</span><span class="keyword">case</span></span> _ =&gt;
				<span class="typed"><span class="type">String</span><span class="keyword">if</span></span>(<span class="typed"><span class="type">Browse.this.global.Type</span><a href="#20902">t</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3484">==</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>)
					<span class="typed"><span class="type">java.lang.String(&quot;&quot;)</span><span class="string">&quot;&quot;</span></span>
				<span class="keyword">else</span>
					<span class="typed"><span class="type">Browse.this.global.Type</span><a href="#20902">t</a></span>.<span class="typed"><span class="type">()String</span><a id="13145">toString</a></span>
		}
	}
	<span class="comment">/** Converts the given compound type to a string.  'mainPostfix' is copied after the main type symbol
	* but before any parents or refinements*/</span>
	<span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(Browse.this.global.CompoundType,String)java.lang.String</span><a id="11297">compoundTypeString</a></span>(<span class="typed"><span class="type">Browse.this.global.CompoundType</span><a id="20955">ct</a></span>: <span class="typed"><span class="type">Browse.this.global.CompoundType</span><a id="13458">CompoundType</a></span>, <span class="typed"><span class="type">String</span><a id="20956">mainPostfix</a></span>: <span class="typed"><span class="type">String</span><a id="1836">String</a></span>) =
	{
		<span class="keyword">import</span> ct._
		<span class="typed"><span class="type">=&gt; Browse.this.global.Symbol</span><a href="#20955" id="13034">typeSymbol</a></span>.<span class="typed"><span class="type">()String</span><a id="12894">toString</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5768">+</a></span> <span class="typed"><span class="type">String</span><a href="#20956">mainPostfix</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5768">+</a></span>
		{
			<span class="typed"><span class="type">Any</span><span class="keyword">if</span></span>(<span class="typed"><span class="type">Browse.this.global.CompoundType</span><a href="#20955">ct</a></span>.<span class="typed"><span class="type">=&gt; Browse.this.global.Symbol</span><a id="13034">typeSymbol</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a id="12732">isPackageClass</a></span>)
				<span class="typed"><span class="type">java.lang.String(&quot;&quot;)</span><span class="string">&quot;&quot;</span></span>
			<span class="keyword">else</span> <span class="typed"><span class="type">Any</span><span class="keyword">if</span></span>(<span class="typed"><span class="type">=&gt; List[Browse.this.global.Type]</span><a href="#20955" id="13071">parents</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a id="12099">isEmpty</a></span>)
			{
				<span class="typed"><span class="type">Any</span><span class="keyword">if</span></span>(<span class="typed"><span class="type">=&gt; Browse.this.global.Scope</span><a href="#20955" id="13089">decls</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a id="14184">isEmpty</a></span>)
					<span class="typed"><span class="type">java.lang.String(&quot;&quot;)</span><span class="string">&quot;&quot;</span></span>
				<span class="keyword">else</span>
					<span class="typed"><span class="type">=&gt; Browse.this.global.Scope</span><a href="#20955" id="13089">decls</a></span>.<span class="typed"><span class="type">(String,String,String)String</span><a id="14202">mkString</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;{&quot;)</span><span class="string">&quot;{&quot;</span></span>, <span class="typed"><span class="type">java.lang.String(&quot;; &quot;)</span><span class="string">&quot;; &quot;</span></span>, <span class="typed"><span class="type">java.lang.String(&quot;}&quot;)</span><span class="string">&quot;}&quot;</span></span>)
			}
			<span class="keyword">else</span>
				<span class="typed"><span class="type">=&gt; List[Browse.this.global.Type]</span><a href="#20955" id="13071">parents</a></span>.<span class="typed"><span class="type">(String,String,String)String</span><a id="12272">mkString</a></span>(<span class="typed"><span class="type">java.lang.String(&quot; extends &quot;)</span><span class="string">&quot; extends &quot;</span></span>, <span class="typed"><span class="type">java.lang.String(&quot; with &quot;)</span><span class="string">&quot; with &quot;</span></span>, <span class="typed"><span class="type">java.lang.String(&quot;&quot;)</span><span class="string">&quot;&quot;</span></span>)
		}
	}

	<span class="comment">/** Generates a link usable in the file 'from' to the symbol 'to', which might be in some other file. */</span>
	<span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(java.io.File,Browse.this.global.Symbol)Option[sxr.Link]</span><a id="11298">linkTo</a></span>(<span class="typed"><span class="type">java.io.File</span><a id="20938">from</a></span>: <span class="typed"><span class="type">java.io.File</span><a id="3644">File</a></span>, <span class="typed"><span class="type">Browse.this.global.Symbol</span><a id="20939">sym</a></span>: <span class="typed"><span class="type">Browse.this.global.Symbol</span><a id="12532">Symbol</a></span>): <span class="typed"><span class="type">Option[sxr.Link]</span><a id="909">Option</a></span>[Link] =
	{
		<span class="typed"><span class="type">Option[sxr.Link]</span><span class="keyword">if</span></span>(<span class="typed"><span class="type">Browse.this.global.Symbol</span><a href="#20939">sym</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3484">==</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2725">||</a></span> <span class="typed"><span class="type">Browse.this.global.Symbol</span><a href="#20939">sym</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3484">==</a></span> <span class="typed"><span class="type">object Browse.this.global.NoSymbol</span><a href="#11284" id="12936">NoSymbol</a></span>)
			<span class="typed"><span class="type">object None</span><a id="511">None</a></span>
		<span class="keyword">else</span>
		{
			<span class="keyword">val</span> <span class="typed"><span class="type">scala.tools.nsc.io.AbstractFile</span><a id="20984">source</a></span> = <span class="typed"><span class="type">Browse.this.global.Symbol</span><a href="#20939">sym</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.io.AbstractFile</span><a id="12880">sourceFile</a></span>
			<span class="typed"><span class="type">Option[sxr.Link]</span><span class="keyword">if</span></span>(<span class="typed"><span class="type">scala.tools.nsc.io.AbstractFile</span><a href="#20984">source</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3484">==</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>)
				<span class="typed"><span class="type">object None</span><a id="511">None</a></span>
			<span class="keyword">else</span>
			{
				<span class="keyword">val</span> <span class="typed"><span class="type">java.io.File</span><a id="20986">file</a></span> = <span class="typed"><span class="type">scala.tools.nsc.io.AbstractFile</span><a href="#20984">source</a></span>.<span class="typed"><span class="type">=&gt; java.io.File</span><a id="18241">file</a></span>
				<span class="keyword">val</span> <span class="typed"><span class="type">java.lang.String</span><a id="20987">base</a></span> = <span class="typed"><span class="type">java.lang.String</span><span class="keyword">if</span></span>(<span class="typed"><span class="type">java.io.File</span><a href="#20986">file</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3484">==</a></span> <span class="typed"><span class="type">java.io.File</span><a href="#20938">from</a></span>) <span class="typed"><span class="type">java.lang.String(&quot;&quot;)</span><span class="string">&quot;&quot;</span></span> <span class="keyword">else</span> <span class="typed"><span class="type">object sxr.FileUtil</span><a href="FileUtil.scala.html#6256">FileUtil</a></span>.<span class="typed"><span class="type">(java.io.File,java.io.File)String</span><a href="FileUtil.scala.html#18293">relativePath</a></span>(<span class="typed"><span class="type">java.io.File</span><a href="#20938">from</a></span>, <span class="typed"><span class="type">scala.tools.nsc.io.AbstractFile</span><a href="#20984">source</a></span>.<span class="typed"><span class="type">=&gt; java.io.File</span><a id="18241">file</a></span>) <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5768">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;.html&quot;)</span><span class="string">&quot;.html&quot;</span></span>
				<span class="typed"><span class="type">(sxr.Link)Some[sxr.Link]</span><span id="20399"><a id="283">Some</a></span></span>(<span class="typed"><span class="type">sxr.Link</span><span class="keyword">new</span></span> <span class="typed"><span class="type">sxr.Link</span><a href="Token.scala.html#6212">Link</a></span>(<span class="typed"><span class="type">java.lang.String</span><a href="#20987">base</a></span>, <span class="typed"><span class="type">Browse.this.global.Symbol</span><a href="#20939">sym</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="12549">id</a></span>.<span class="typed"><span class="type">()java.lang.String</span><a id="3475">toString</a></span>))
			}
		}
	}
	<span class="comment">/** Relativizes the path to the given Scala source file to the base directory. */</span>
	<span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(java.io.File)String</span><a id="11299">getRelativeSourcePath</a></span>(<span class="typed"><span class="type">java.io.File</span><a id="18259">source</a></span>: <span class="typed"><span class="type">java.io.File</span><a id="3644">File</a></span>): <span class="typed"><span class="type">String</span><a id="1836">String</a></span> =
	{
		<span class="typed"><span class="type">=&gt; Option[java.io.File]</span><a href="#11283">baseDirectory</a></span> <span class="typed"><span class="type">String</span><span class="keyword">match</span></span>
		{
			<span class="typed"><span class="type">String</span><span class="keyword">case</span></span> <a id="1">Some</a>(<span class="typed"><span class="type">java.io.File</span><a id="20992">base</a></span>) =&gt;
				<span class="typed"><span class="type">object sxr.FileUtil</span><a href="FileUtil.scala.html#6256">FileUtil</a></span>.<span class="typed"><span class="type">(java.io.File,java.io.File)Option[String]</span><a href="FileUtil.scala.html#18297">relativize</a></span>(<span class="typed"><span class="type">java.io.File</span><a href="#20992">base</a></span>, <span class="typed"><span class="type">java.io.File</span><a href="#18259">source</a></span>) <span class="typed"><span class="type">String</span><span class="keyword">match</span></span>
				{
					<span class="typed"><span class="type">String</span><span class="keyword">case</span></span> <a id="1">Some</a>(<span class="typed"><span class="type">String</span><a id="20995">relative</a></span>) =&gt; <span class="typed"><span class="type">String</span><a href="#20995">relative</a></span>
					<span class="typed"><span class="type">java.lang.String</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object None</span><a id="511">None</a></span> =&gt; <span class="typed"><span class="type">(String)Unit</span><a href="#11284" id="11375">error</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;Source &quot;)</span><span class="string">&quot;Source &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5768">+</a></span> <span class="typed"><span class="type">java.io.File</span><a href="#18259">source</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5768">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot; not in base directory &quot;)</span><span class="string">&quot; not in base directory &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5768">+</a></span> <span class="typed"><span class="type">java.io.File</span><a href="#20992">base</a></span>); <span class="typed"><span class="type">java.lang.String(&quot;&quot;)</span><span class="string">&quot;&quot;</span></span>
				}
			<span class="typed"><span class="type">java.lang.String</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object None</span><a id="511">None</a></span> =&gt; <span class="typed"><span class="type">java.io.File</span><a href="#18259">source</a></span>.<span class="typed"><span class="type">()java.lang.String</span><a id="12310">getName</a></span>
		}
	}
}

<span class="keyword">object</span> <span class="typed"><span class="type">object sxr.Browse</span><a id="6202">Browse</a></span>
{
	<span class="comment">/** The location to store the index relative to the output directory.*/</span>
	<span class="keyword">val</span> <span class="typed"><span class="type">java.lang.String</span><span id="16875"><a id="16874">IndexRelativePath</a></span></span> = <span class="typed"><span class="type">java.lang.String(&quot;index.html&quot;)</span><span class="string">&quot;index.html&quot;</span></span>
	<span class="comment">/** The location to store the style sheet relative to the output directory.*/</span>
	<span class="keyword">val</span> <span class="typed"><span class="type">java.lang.String</span><span id="16877"><a id="16876">CSSRelativePath</a></span></span> = <span class="typed"><span class="type">java.lang.String(&quot;style.css&quot;)</span><span class="string">&quot;style.css&quot;</span></span>
	<span class="comment">/** The location to store the script relative to the output directory.*/</span>
	<span class="keyword">val</span> <span class="typed"><span class="type">java.lang.String</span><span id="16879"><a id="16878">JSRelativePath</a></span></span> = <span class="typed"><span class="type">java.lang.String(&quot;linked.js&quot;)</span><span class="string">&quot;linked.js&quot;</span></span>
	<span class="comment">/** The path of the default style sheet resource.*/</span>
	<span class="keyword">val</span> <span class="typed"><span class="type">java.lang.String</span><span id="16881"><a id="16880">DefaultCSS</a></span></span> = <span class="typed"><span class="type">java.lang.String(&quot;/default-style.css&quot;)</span><span class="string">&quot;/default-style.css&quot;</span></span>
	<span class="comment">/** The path of the default script resource.*/</span>
	<span class="keyword">val</span> <span class="typed"><span class="type">java.lang.String</span><span id="16883"><a id="16882">LinkedJS</a></span></span> = <span class="typed"><span class="type">java.lang.String(&quot;/linked.js&quot;)</span><span class="string">&quot;/linked.js&quot;</span></span>
	
	<span class="comment">/** Copies the default style sheet available as a resource on the classpath to the file 'to'.*/</span>
	<span class="keyword">def</span> <span class="typed"><span class="type">(java.io.File)Unit</span><a id="16884">writeDefaultCSS</a></span>(<span class="typed"><span class="type">java.io.File</span><a id="17986">to</a></span>: <span class="typed"><span class="type">java.io.File</span><a id="3644">File</a></span>) { <span class="typed"><span class="type">object sxr.FileUtil</span><a href="FileUtil.scala.html#6256">FileUtil</a></span>.<span class="typed"><span class="type">(String,java.io.File)Unit</span><a href="FileUtil.scala.html#18294">writeResource</a></span>(<span class="typed"><span class="type">=&gt; java.lang.String</span><a href="#16880">DefaultCSS</a></span>, <span class="typed"><span class="type">java.io.File</span><a href="#17986">to</a></span>) }
	<span class="comment">/** Copies the default script available as a resource on the classpath to the file 'to'.*/</span>
	<span class="keyword">def</span> <span class="typed"><span class="type">(java.io.File)Unit</span><a id="16885">writeJS</a></span>(<span class="typed"><span class="type">java.io.File</span><a id="17987">to</a></span>: <span class="typed"><span class="type">java.io.File</span><a id="3644">File</a></span>) { <span class="typed"><span class="type">object sxr.FileUtil</span><a href="FileUtil.scala.html#6256">FileUtil</a></span>.<span class="typed"><span class="type">(String,java.io.File)Unit</span><a href="FileUtil.scala.html#18294">writeResource</a></span>(<span class="typed"><span class="type">=&gt; java.lang.String</span><a href="#16882">LinkedJS</a></span>, <span class="typed"><span class="type">java.io.File</span><a href="#17987">to</a></span>) }
	
	<span class="keyword">def</span> <span class="typed"><span class="type">(java.io.File,Iterable[java.io.File])Unit</span><a id="16886">writeIndex</a></span>(<span class="typed"><span class="type">java.io.File</span><a id="20187">to</a></span>: <span class="typed"><span class="type">java.io.File</span><a id="3644">File</a></span>, <span class="typed"><span class="type">Iterable[java.io.File]</span><a id="20188">files</a></span>: <span class="typed"><span class="type">Iterable[java.io.File]</span><a id="378">Iterable</a></span>[File])
	{
		<span class="keyword">val</span> <span class="typed"><span class="type">java.io.File</span><a id="20999">relativizeAgainst</a></span> = <span class="typed"><span class="type">java.io.File</span><a href="#20187">to</a></span>.<span class="typed"><span class="type">()java.io.File</span><a id="12312">getParentFile</a></span>
		<span class="keyword">val</span> <span class="typed"><span class="type">Iterable[String]</span><a id="21000">rawRelativePaths</a></span> = <span class="typed"><span class="type">Iterable[java.io.File]</span><a href="#20188">files</a></span>.<span class="typed"><span class="type">((java.io.File) =&gt; Iterable[String])Iterable[String]</span><a id="12238">flatMap</a></span>(<span class="typed"><span class="type">java.io.File</span><a id="21004">file</a></span> =&gt; <span class="typed"><span class="type">object sxr.FileUtil</span><a href="FileUtil.scala.html#6256">FileUtil</a></span>.<span class="typed"><span class="type">(java.io.File,java.io.File)Option[String]</span><a href="FileUtil.scala.html#18297">relativize</a></span>(<span class="typed"><span class="type">java.io.File</span><a href="#20999">relativizeAgainst</a></span>, <span class="typed"><span class="type">java.io.File</span><a href="#21004">file</a></span>).<span class="typed"><span class="type">=&gt; List[String]</span><a id="12373">toList</a></span>)
		<span class="keyword">val</span> <span class="typed"><span class="type">scala.collection.jcl.TreeSet[String]</span><a id="21001">sortedRelativePaths</a></span> = <span class="typed"><span class="type">scala.collection.jcl.TreeSet[String]</span><span id="6098"><a href="#21006" id="796" class="keyword">new</a></span></span> <span class="typed"><span class="type">scala.collection.jcl.TreeSet[String]</span><a id="11010">TreeSet</a></span>[String]
		<span class="typed"><span class="type">scala.collection.jcl.TreeSet[String]</span><a href="#21001">sortedRelativePaths</a></span> <span class="typed"><span class="type">(Iterable[String])Unit</span><a id="18921">++=</a></span> <span class="typed"><span class="type">Iterable[String]</span><a href="#21000">rawRelativePaths</a></span>
		<span class="typed"><span class="type">object sxr.FileUtil</span><a href="FileUtil.scala.html#6256">FileUtil</a></span>.<span class="typed"><span class="type">(java.io.File)((java.io.BufferedWriter) =&gt; Unit)Unit</span><a href="FileUtil.scala.html#18288">withWriter</a></span>(<span class="typed"><span class="type">java.io.File</span><a href="#20187">to</a></span>) { <span class="typed"><span class="type">java.io.BufferedWriter</span><a id="21024">out</a></span> =&gt;
			<span class="typed"><span class="type">java.io.BufferedWriter</span><a href="#21024">out</a></span>.<span class="typed"><span class="type">(java.lang.String)Unit</span><a id="21031">write</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;&lt;html&gt;&lt;body&gt;&quot;)</span><span class="string">&quot;&lt;html&gt;&lt;body&gt;&quot;</span></span>)
			<span class="typed"><span class="type">scala.collection.jcl.TreeSet[String]</span><a href="#21001">sortedRelativePaths</a></span>.<span class="typed"><span class="type">((String) =&gt; Unit)Unit</span><a id="12246">foreach</a></span>(<span class="typed"><span class="type">(java.io.File,java.io.Writer)(String)Unit</span><a href="#16888">writeEntry</a></span>(<span class="typed"><span class="type">java.io.File</span><a href="#20187">to</a></span>, <span class="typed"><span class="type">java.io.BufferedWriter</span><a href="#21024">out</a></span>))
			<span class="typed"><span class="type">java.io.BufferedWriter</span><a href="#21024">out</a></span>.<span class="typed"><span class="type">(java.lang.String)Unit</span><a id="21031">write</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;&lt;/body&gt;&lt;/html&gt;&quot;)</span><span class="string">&quot;&lt;/body&gt;&lt;/html&gt;&quot;</span></span>)
		}
	}
	<span class="keyword">import</span> java.io.Writer
	<span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(java.io.File,java.io.Writer)(String)Unit</span><a id="16888">writeEntry</a></span>(<span class="typed"><span class="type">java.io.File</span><a id="21048">index</a></span>: <span class="typed"><span class="type">java.io.File</span><a id="3644">File</a></span>, <span class="typed"><span class="type">java.io.Writer</span><a id="21049">out</a></span>: <span class="typed"><span class="type">java.io.Writer</span><a id="3779">Writer</a></span>)(<span class="typed"><span class="type">String</span><a id="21050">path</a></span>: <span class="typed"><span class="type">String</span><a id="1836">String</a></span>)
	{
		<span class="typed"><span class="type">java.io.Writer</span><a href="#21049">out</a></span>.<span class="typed"><span class="type">(java.lang.String)Unit</span><a id="21031">write</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;&lt;li&gt;&lt;a href=&quot;&quot;)</span><span class="string">&quot;&lt;li&gt;&lt;a href=\&quot;&quot;</span></span>)
		<span class="typed"><span class="type">java.io.Writer</span><a href="#21049">out</a></span>.<span class="typed"><span class="type">(java.lang.String)Unit</span><a id="21031">write</a></span>(<span class="typed"><span class="type">String</span><a href="#21050">path</a></span>)
		<span class="typed"><span class="type">java.io.Writer</span><a href="#21049">out</a></span>.<span class="typed"><span class="type">(java.lang.String)Unit</span><a id="21031">write</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;&quot;&gt;&quot;)</span><span class="string">&quot;\&quot;&gt;&quot;</span></span>)
		<span class="keyword">val</span> <span class="typed"><span class="type">java.lang.String</span><a id="21055">label</a></span> =
			<span class="typed"><span class="type">java.lang.String</span><span class="keyword">if</span></span>(<span class="typed"><span class="type">String</span><a href="#21050">path</a></span>.<span class="typed"><span class="type">(java.lang.String)Boolean</span><a id="5808">endsWith</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;.html&quot;)</span><span class="string">&quot;.html&quot;</span></span>))
				<span class="typed"><span class="type">String</span><a href="#21050">path</a></span>.<span class="typed"><span class="type">(Int,Int)java.lang.String</span><a id="5821">substring</a></span>(<span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>, <span class="typed"><span class="type">String</span><a href="#21050">path</a></span>.<span class="typed"><span class="type">()Int</span><a id="5787">length</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3123">-</a></span> <span class="typed"><span class="type">java.lang.String(&quot;.html&quot;)</span><span class="string">&quot;.html&quot;</span></span>.<span class="typed"><span class="type">()Int</span><a id="5787">length</a></span>)
			<span class="keyword">else</span>
				<span class="typed"><span class="type">String</span><a href="#21050">path</a></span>
		<span class="typed"><span class="type">java.io.Writer</span><a href="#21049">out</a></span>.<span class="typed"><span class="type">(java.lang.String)Unit</span><a id="21031">write</a></span>(<span class="typed"><span class="type">java.lang.String</span><a href="#21055">label</a></span>)
		<span class="typed"><span class="type">java.io.Writer</span><a href="#21049">out</a></span>.<span class="typed"><span class="type">(java.lang.String)Unit</span><a id="21031">write</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;&lt;/a&gt;&lt;/li&gt;&quot;)</span><span class="string">&quot;&lt;/a&gt;&lt;/li&gt;&quot;</span></span>)
	}
}
        </pre>
    </body>
</html>