<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>sbt/Resources.scala</title>
        <script type="text/javascript" src="../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../style.css" title="Style">
    </head>
    <body onload="initializeLinked()">
        <pre>
<span class="comment">/* sbt -- Simple Build Tool
 * Copyright 2008, 2009  Mark Harrah
 */</span>
<span class="keyword">package</span> sbt

<span class="keyword">import</span> java.io.File
<span class="keyword">import</span> FileUtilities._

<span class="keyword">object</span> <span class="typed"><span class="type">object sbt.Resources</span><a id="6711">Resources</a></span>
{
	<span class="keyword">def</span> <span class="typed"><span class="type">(String)sbt.Resources</span><a id="56214">apply</a></span>(<span class="typed"><span class="type">String</span><a id="56218">basePath</a></span>: <span class="typed"><span class="type">String</span><a id="1842">String</a></span>) =
	{
		<span class="typed"><span class="type">(Boolean)Unit</span><span id="5971"><a id="802">require</a></span></span>(<span class="typed"><span class="type">String</span><a href="#56218">basePath</a></span>.<span class="typed"><span class="type">(java.lang.String)Boolean</span><a id="5813">startsWith</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;/&quot;)</span><span class="string">&quot;/&quot;</span></span>))
		<span class="keyword">val</span> <span class="typed"><span class="type">java.net.URL</span><a id="56220">resource</a></span> = <span class="typed"><span class="type">()java.lang.Class[_ &lt;: java.lang.Object]</span><a id="3492">getClass</a></span>.<span class="typed"><span class="type">(java.lang.String)java.net.URL</span><a id="4633">getResource</a></span>(<span class="typed"><span class="type">String</span><a href="#56218">basePath</a></span>)
		<span class="typed"><span class="type">sbt.Resources</span><span class="keyword">if</span></span>(<span class="typed"><span class="type">java.net.URL</span><a href="#56220">resource</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3490">==</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>)
			<span class="typed"><span class="type">Nothing</span><span class="keyword">throw</span></span> <span class="typed"><span class="type">(java.lang.String)java.lang.Exception</span><a id="29024" class="keyword">new</a></span> <span class="typed"><span class="type">java.lang.Exception</span><span id="5938"><a id="802">Exception</a></span></span>(<span class="typed"><span class="type">java.lang.String(&quot;Resource base directory '&quot;)</span><span class="string">&quot;Resource base directory '&quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">String</span><a href="#56218">basePath</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;' not on classpath.&quot;)</span><span class="string">&quot;' not on classpath.&quot;</span></span>)
		<span class="keyword">else</span>
		{
			<span class="keyword">val</span> <span class="typed"><span class="type">java.io.File</span><a id="56227">file</a></span> = <span class="typed"><span class="type">(java.net.URI)java.io.File</span><a id="9654" class="keyword">new</a></span> <span class="typed"><span class="type">java.io.File</span><a id="3650">File</a></span>(<span class="typed"><span class="type">java.net.URL</span><a href="#56220">resource</a></span>.<span class="typed"><span class="type">()java.net.URI</span><a id="23808">toURI</a></span>)
			<span class="typed"><span class="type">sbt.Resources</span><span class="keyword">if</span></span>(<span class="typed"><span class="type">java.io.File</span><a href="#56227">file</a></span>.<span class="typed"><span class="type">()Boolean</span><a id="9668">exists</a></span>)
				<span class="typed"><span class="type">sbt.Resources</span><span class="keyword">new</span></span> <span class="typed"><span class="type">sbt.Resources</span><a href="#6713">Resources</a></span>(<span class="typed"><span class="type">java.io.File</span><a href="#56227">file</a></span>)
			<span class="keyword">else</span>
				<span class="typed"><span class="type">Nothing</span><span class="keyword">throw</span></span> <span class="typed"><span class="type">(java.lang.String)java.lang.Exception</span><a id="29024" class="keyword">new</a></span> <span class="typed"><span class="type">java.lang.Exception</span><span id="5938"><a id="802">Exception</a></span></span>(<span class="typed"><span class="type">java.lang.String(&quot;Resource base directory '&quot;)</span><span class="string">&quot;Resource base directory '&quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">String</span><a href="#56218">basePath</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;' does not exist.&quot;)</span><span class="string">&quot;' does not exist.&quot;</span></span>)
		}
	}
	<span class="keyword">private</span> <span class="keyword">val</span> <span class="typed"><span class="type">java.lang.String</span><span id="56216"><a id="56215">LoadErrorPrefix</a></span></span> = <span class="typed"><span class="type">java.lang.String(&quot;Error loading initial project: &quot;)</span><span class="string">&quot;Error loading initial project: &quot;</span></span>
}

<span class="keyword">class</span> <span class="typed"><span class="type">class Resources extends java.lang.Object with ScalaObject</span><a id="6713">Resources</a></span>(<span class="keyword">val</span> <span class="typed"><span class="type">java.io.File</span><span id="56232"><span id="56231"><a id="56255">baseDirectory</a></span></span></span>: <span class="typed"><span class="type">java.io.File</span><a id="3650">File</a></span>)
{
	<span class="keyword">import</span> Resources._
	<span class="comment">// The returned directory is not actually read-only, but it should be treated that way</span>
	<span class="keyword">def</span> <span class="typed"><span class="type">(String,String)Either[String,java.io.File]</span><a id="56235">readOnlyResourceDirectory</a></span>(<span class="typed"><span class="type">String</span><a id="56260">group</a></span>: <span class="typed"><span class="type">String</span><a id="1842">String</a></span>, <span class="typed"><span class="type">String</span><a id="56261">name</a></span>: <span class="typed"><span class="type">String</span><a id="1842">String</a></span>): <span class="typed"><span class="type">Either[String,java.io.File]</span><a id="342">Either</a></span>[String, File] =
	{
		<span class="keyword">val</span> <span class="typed"><span class="type">java.io.File</span><a id="56262">groupDirectory</a></span> = <span class="typed"><span class="type">(java.io.File,java.lang.String)java.io.File</span><a id="9653" class="keyword">new</a></span> <span class="typed"><span class="type">java.io.File</span><a id="3650">File</a></span>(<span class="typed"><span class="type">=&gt; java.io.File</span><a href="#56231">baseDirectory</a></span>, <span class="typed"><span class="type">String</span><a href="#56260">group</a></span>)
		<span class="typed"><span class="type">Either[String,java.io.File]</span><span class="keyword">if</span></span>(<span class="typed"><span class="type">java.io.File</span><a href="#56262">groupDirectory</a></span>.<span class="typed"><span class="type">()Boolean</span><a id="9669">isDirectory</a></span>)
		{
			<span class="keyword">val</span> <span class="typed"><span class="type">java.io.File</span><a id="56278">resourceDirectory</a></span> = <span class="typed"><span class="type">(java.io.File,java.lang.String)java.io.File</span><a id="9653" class="keyword">new</a></span> <span class="typed"><span class="type">java.io.File</span><a id="3650">File</a></span>(<span class="typed"><span class="type">java.io.File</span><a href="#56262">groupDirectory</a></span>, <span class="typed"><span class="type">String</span><a href="#56261">name</a></span>)
			<span class="typed"><span class="type">Either[String,java.io.File]</span><span class="keyword">if</span></span>(<span class="typed"><span class="type">java.io.File</span><a href="#56278">resourceDirectory</a></span>.<span class="typed"><span class="type">()Boolean</span><a id="9669">isDirectory</a></span>)
				<span class="typed"><span class="type">(java.io.File)Right[Nothing,java.io.File]</span><span id="30775"><a id="502">Right</a></span></span>(<span class="typed"><span class="type">java.io.File</span><a href="#56278">resourceDirectory</a></span>)
			<span class="keyword">else</span>
				<span class="typed"><span class="type">(java.lang.String)Left[java.lang.String,Nothing]</span><span id="31304"><a id="1198">Left</a></span></span>(<span class="typed"><span class="type">java.lang.String(&quot;Resource directory '&quot;)</span><span class="string">&quot;Resource directory '&quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">String</span><a href="#56261">name</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;' in group '&quot;)</span><span class="string">&quot;' in group '&quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">String</span><a href="#56260">group</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;' not found.&quot;)</span><span class="string">&quot;' not found.&quot;</span></span>)
		}
		<span class="keyword">else</span>
			<span class="typed"><span class="type">(java.lang.String)Left[java.lang.String,Nothing]</span><span id="31304"><a id="1198">Left</a></span></span>(<span class="typed"><span class="type">java.lang.String(&quot;Group '&quot;)</span><span class="string">&quot;Group '&quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">String</span><a href="#56260">group</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;' not found.&quot;)</span><span class="string">&quot;' not found.&quot;</span></span>)
	}
	<span class="keyword">def</span> <span class="typed"><span class="type">[T](String,String,sbt.Logger)((java.io.File) =&gt; Either[String,T])Either[String,T]</span><a id="56236">readWriteResourceDirectory</a></span>[<span class="typed"><span class="type">&gt;: Nothing &lt;: Any</span><a id="56238">T</a></span>](<span class="typed"><span class="type">String</span><a id="56299">group</a></span>: <span class="typed"><span class="type">String</span><a id="1842">String</a></span>, <span class="typed"><span class="type">String</span><a id="56300">name</a></span>: <span class="typed"><span class="type">String</span><a id="1842">String</a></span>, <span class="typed"><span class="type">sbt.Logger</span><a id="56301">log</a></span>: <span class="typed"><span class="type">sbt.Logger</span><a href="Logger.scala.html#6766">Logger</a></span>)
		(<span class="typed"><span class="type">(java.io.File) =&gt; Either[String,T]</span><a id="56302">withDirectory</a></span>: File =&gt; Either[String, T]): <span class="typed"><span class="type">Either[String,T]</span><a id="342">Either</a></span>[String, T] =
			<span class="typed"><span class="type">(String,String)Either[String,java.io.File]</span><a href="#56235">readOnlyResourceDirectory</a></span>(<span class="typed"><span class="type">String</span><a href="#56299">group</a></span>, <span class="typed"><span class="type">String</span><a href="#56300">name</a></span>).<span class="typed"><span class="type">=&gt; Either.RightProjection[String,java.io.File]</span><a id="23106">right</a></span> <span class="typed"><span class="type">((java.io.File) =&gt; Either[String,T])Either[String,T]</span><a id="23071">flatMap</a></span>(<span class="typed"><span class="type">java.io.File</span><a id="56308">file</a></span> =&gt; <span class="typed"><span class="type">(java.io.File,sbt.Logger)((java.io.File) =&gt; Either[String,T])Either[String,T]</span><a href="#56239">readWriteResourceDirectory</a></span>(<span class="typed"><span class="type">java.io.File</span><a href="#56308">file</a></span>, <span class="typed"><span class="type">sbt.Logger</span><a href="#56301">log</a></span>)(<span class="typed"><span class="type">(java.io.File) =&gt; Either[String,T]</span><a href="#56302">withDirectory</a></span>))
	<span class="keyword">def</span> <span class="typed"><span class="type">[T](java.io.File,sbt.Logger)((java.io.File) =&gt; Either[String,T])Either[String,T]</span><a id="56239">readWriteResourceDirectory</a></span>[<span class="typed"><span class="type">&gt;: Nothing &lt;: Any</span><a id="56241">T</a></span>](<span class="typed"><span class="type">java.io.File</span><a id="56310">readOnly</a></span>: <span class="typed"><span class="type">java.io.File</span><a id="3650">File</a></span>, <span class="typed"><span class="type">sbt.Logger</span><a id="56311">log</a></span>: <span class="typed"><span class="type">sbt.Logger</span><a href="Logger.scala.html#6766">Logger</a></span>)
		(<span class="typed"><span class="type">(java.io.File) =&gt; Either[String,T]</span><a id="56312">withDirectory</a></span>: File =&gt; Either[String, T]): <span class="typed"><span class="type">Either[String,T]</span><a id="342">Either</a></span>[String, T] =
	{
		<span class="typed"><span class="type">(Boolean)Unit</span><span id="5971"><a id="802">require</a></span></span>(<span class="typed"><span class="type">java.io.File</span><a href="#56310">readOnly</a></span>.<span class="typed"><span class="type">()Boolean</span><a id="9669">isDirectory</a></span>)
		<span class="keyword">def</span> <span class="typed"><span class="type">(java.io.File)(java.io.File)Either[String,T]</span><a id="56316">readWrite</a></span>(<span class="typed"><span class="type">java.io.File</span><a id="56318">readOnly</a></span>: <span class="typed"><span class="type">java.io.File</span><a id="3650">File</a></span>)(<span class="typed"><span class="type">java.io.File</span><a id="56319">temporary</a></span>: <span class="typed"><span class="type">java.io.File</span><a id="3650">File</a></span>): <span class="typed"><span class="type">Either[String,T]</span><a id="342">Either</a></span>[String, T] =
		{
			<span class="keyword">val</span> <span class="typed"><span class="type">java.io.File</span><a id="56320">readWriteDirectory</a></span> = <span class="typed"><span class="type">(java.io.File,java.lang.String)java.io.File</span><a id="9653" class="keyword">new</a></span> <span class="typed"><span class="type">java.io.File</span><a id="3650">File</a></span>(<span class="typed"><span class="type">java.io.File</span><a href="#56319">temporary</a></span>, <span class="typed"><span class="type">java.io.File</span><a href="#56318">readOnly</a></span>.<span class="typed"><span class="type">()java.lang.String</span><a id="9655">getName</a></span>)
			<span class="typed"><span class="type">object sbt.FileUtilities</span><a href="FileUtilities.scala.html#6450">FileUtilities</a></span>.<span class="typed"><span class="type">(java.io.File,java.io.File,sbt.Logger)Option[String]</span><a href="FileUtilities.scala.html#9546">copyDirectory</a></span>(<span class="typed"><span class="type">java.io.File</span><a href="#56318">readOnly</a></span>, <span class="typed"><span class="type">java.io.File</span><a href="#56320">readWriteDirectory</a></span>, <span class="typed"><span class="type">sbt.Logger</span><a href="#56311">log</a></span>).<span class="typed"><span class="type">(=&gt; Unit)Either[String,Unit] with Product</span><a id="10278">toLeft</a></span>(<span class="typed"><span class="type">Unit</span><span >(</span></span>)).<span class="typed"><span class="type">=&gt; Either.RightProjection[String,Unit]</span><a id="23106">right</a></span> <span class="typed"><span class="type">((Unit) =&gt; Either[String,T])Either[String,T]</span><a id="23071">flatMap</a></span> { <span class="typed"><span class="type">Unit</span><a id="56347">x</a></span> =&gt;
				<span class="typed"><span class="type">(java.io.File)Either[String,T]</span><a href="#56312" id="7330">withDirectory</a></span>(<span class="typed"><span class="type">java.io.File</span><a href="#56320">readWriteDirectory</a></span>)
			}
		}
		<span class="typed"><span class="type">(sbt.Logger)((java.io.File) =&gt; Either[String,T])Either[String,T]</span><a href="FileUtilities.scala.html#9534">doInTemporaryDirectory</a></span>(<span class="typed"><span class="type">sbt.Logger</span><a href="#56311">log</a></span>)(<span class="typed"><span class="type">(java.io.File)(java.io.File)Either[String,T]</span><a href="#56316">readWrite</a></span>(<span class="typed"><span class="type">java.io.File</span><a href="#56310">readOnly</a></span>))
	}
	
	<span class="keyword">def</span> <span class="typed"><span class="type">[T](java.io.File,sbt.Logger)((sbt.Project) =&gt; sbt.WithProjectResult[T])Either[String,T]</span><a id="56242">withProject</a></span>[<span class="typed"><span class="type">&gt;: Nothing &lt;: Any</span><a id="56244">T</a></span>](<span class="typed"><span class="type">java.io.File</span><a id="56351">projectDirectory</a></span>: <span class="typed"><span class="type">java.io.File</span><a id="3650">File</a></span>, <span class="typed"><span class="type">sbt.Logger</span><a id="56352">log</a></span>: <span class="typed"><span class="type">sbt.Logger</span><a href="Logger.scala.html#6766">Logger</a></span>)(<span class="typed"><span class="type">(sbt.Project) =&gt; sbt.WithProjectResult[T]</span><a id="56353">f</a></span>: Project =&gt; WithProjectResult[T]): <span class="typed"><span class="type">Either[String,T]</span><a id="342">Either</a></span>[String, T] =
		<span class="typed"><span class="type">(java.io.File,sbt.Logger)((java.io.File) =&gt; Either[String,T])Either[String,T]</span><a href="#56239">readWriteResourceDirectory</a></span>(<span class="typed"><span class="type">java.io.File</span><a href="#56351">projectDirectory</a></span>, <span class="typed"><span class="type">sbt.Logger</span><a href="#56352">log</a></span>)(<span class="typed"><span class="type">(sbt.Logger)((sbt.Project) =&gt; sbt.WithProjectResult[T])(java.io.File)Either[String,T]</span><a href="#56248">withProject</a></span>(<span class="typed"><span class="type">sbt.Logger</span><a href="#56352">log</a></span>)(<span class="typed"><span class="type">(sbt.Project) =&gt; sbt.WithProjectResult[T]</span><a href="#56353">f</a></span>))
	<span class="keyword">def</span> <span class="typed"><span class="type">[T](String,String,sbt.Logger)((sbt.Project) =&gt; sbt.WithProjectResult[T])Either[String,T]</span><a id="56245">withProject</a></span>[<span class="typed"><span class="type">&gt;: Nothing &lt;: Any</span><a id="56247">T</a></span>](<span class="typed"><span class="type">String</span><a id="56369">group</a></span>: <span class="typed"><span class="type">String</span><a id="1842">String</a></span>, <span class="typed"><span class="type">String</span><a id="56370">name</a></span>: <span class="typed"><span class="type">String</span><a id="1842">String</a></span>, <span class="typed"><span class="type">sbt.Logger</span><a id="56371">log</a></span>: <span class="typed"><span class="type">sbt.Logger</span><a href="Logger.scala.html#6766">Logger</a></span>)(<span class="typed"><span class="type">(sbt.Project) =&gt; sbt.WithProjectResult[T]</span><a id="56372">f</a></span>: Project =&gt; WithProjectResult[T]): <span class="typed"><span class="type">Either[String,T]</span><a id="342">Either</a></span>[String, T] =
		<span class="typed"><span class="type">(String,String,sbt.Logger)((java.io.File) =&gt; Either[String,T])Either[String,T]</span><a href="#56236">readWriteResourceDirectory</a></span>(<span class="typed"><span class="type">String</span><a href="#56369">group</a></span>, <span class="typed"><span class="type">String</span><a href="#56370">name</a></span>, <span class="typed"><span class="type">sbt.Logger</span><a href="#56371">log</a></span>)(<span class="typed"><span class="type">(sbt.Logger)((sbt.Project) =&gt; sbt.WithProjectResult[T])(java.io.File)Either[String,T]</span><a href="#56248">withProject</a></span>(<span class="typed"><span class="type">sbt.Logger</span><a href="#56371">log</a></span>)(<span class="typed"><span class="type">(sbt.Project) =&gt; sbt.WithProjectResult[T]</span><a href="#56372">f</a></span>))
	<span class="keyword">def</span> <span class="typed"><span class="type">[T](sbt.Logger)((sbt.Project) =&gt; sbt.WithProjectResult[T])(java.io.File)Either[String,T]</span><a id="56248">withProject</a></span>[<span class="typed"><span class="type">&gt;: Nothing &lt;: Any</span><a id="56250">T</a></span>](<span class="typed"><span class="type">sbt.Logger</span><a id="56365">log</a></span>: <span class="typed"><span class="type">sbt.Logger</span><a href="Logger.scala.html#6766">Logger</a></span>)(<span class="typed"><span class="type">(sbt.Project) =&gt; sbt.WithProjectResult[T]</span><a id="56366">f</a></span>: Project =&gt; WithProjectResult[T])(<span class="typed"><span class="type">java.io.File</span><a id="56367">dir</a></span>: <span class="typed"><span class="type">java.io.File</span><a id="3650">File</a></span>): <span class="typed"><span class="type">Either[String,T]</span><a id="342">Either</a></span>[String, T] =
		<span class="typed"><span class="type">(sbt.Logger,Option[sbt.Project],sbt.ReloadProject,java.io.File)((sbt.Project) =&gt; sbt.WithProjectResult[T])Either[String,T]</span><a href="#56251">withProject</a></span>(<span class="typed"><span class="type">sbt.Logger</span><a href="#56365">log</a></span>, <span class="typed"><span class="type">object None</span><a id="517">None</a></span>, <span class="typed"><span class="type">sbt.ReloadSuccessExpected</span><span class="keyword">new</span></span> <span class="typed"><span class="type">sbt.ReloadSuccessExpected</span><a href="#6717">ReloadSuccessExpected</a></span>(<span class="typed"><span class="type">=&gt; java.lang.String</span><a href="#56215">LoadErrorPrefix</a></span>), <span class="typed"><span class="type">java.io.File</span><a href="#56367">dir</a></span> )(<span class="typed"><span class="type">(sbt.Project) =&gt; sbt.WithProjectResult[T]</span><a href="#56366">f</a></span>)
	<span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">[T](sbt.Logger,Option[sbt.Project],sbt.ReloadProject,java.io.File)((sbt.Project) =&gt; sbt.WithProjectResult[T])Either[String,T]</span><a id="56251">withProject</a></span>[<span class="typed"><span class="type">&gt;: Nothing &lt;: Any</span><a id="56253">T</a></span>](<span class="typed"><span class="type">sbt.Logger</span><a id="56359">log</a></span>: <span class="typed"><span class="type">sbt.Logger</span><a href="Logger.scala.html#6766">Logger</a></span>, <span class="typed"><span class="type">Option[sbt.Project]</span><a id="56360">previousProject</a></span>: <span class="typed"><span class="type">Option[sbt.Project]</span><a id="915">Option</a></span>[Project], <span class="typed"><span class="type">sbt.ReloadProject</span><a id="56361">reload</a></span>: <span class="typed"><span class="type">sbt.ReloadProject</span><a href="#6714">ReloadProject</a></span>, <span class="typed"><span class="type">java.io.File</span><a id="56362">dir</a></span>: <span class="typed"><span class="type">java.io.File</span><a id="3650">File</a></span>)
		(<span class="typed"><span class="type">(sbt.Project) =&gt; sbt.WithProjectResult[T]</span><a id="56363">f</a></span>: Project =&gt; WithProjectResult[T]): <span class="typed"><span class="type">Either[String,T]</span><a id="342">Either</a></span>[String, T] =
	{
		<span class="typed"><span class="type">(Boolean,=&gt; Any)Unit</span><span id="5972"><a id="802">require</a></span></span>(<span class="typed"><span class="type">Option[sbt.Project]</span><a href="#56360">previousProject</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a id="10260">isDefined</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2731">||</a></span> <span class="typed"><span class="type">sbt.ReloadProject</span><a href="#56361">reload</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5765">!=</a></span> <span class="typed"><span class="type">object sbt.NoReload</span><a href="#6718">NoReload</a></span>, <span class="typed"><span class="type">java.lang.String(&quot;Previous project undefined and reload not requested.&quot;)</span><span class="string">&quot;Previous project undefined and reload not requested.&quot;</span></span>)
		<span class="keyword">val</span> <span class="typed"><span class="type">&lt;refinement&gt; extends Either[java.lang.String,sbt.Project] with Product</span><a id="56407">loadResult</a></span> =
			<span class="typed"><span class="type">&lt;refinement&gt; extends Either[java.lang.String,sbt.Project] with Product</span><span class="keyword">if</span></span>(<span class="typed"><span class="type">sbt.ReloadProject</span><a href="#56361">reload</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3490">==</a></span> <span class="typed"><span class="type">object sbt.NoReload</span><a href="#6718">NoReload</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2732">&amp;&amp;</a></span> <span class="typed"><span class="type">Option[sbt.Project]</span><a href="#56360">previousProject</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a id="10260">isDefined</a></span>)
				<span class="typed"><span class="type">(sbt.Project)Right[Nothing,sbt.Project]</span><span id="30775"><a id="502">Right</a></span></span>(<span class="typed"><span class="type">Option[sbt.Project]</span><a href="#56360">previousProject</a></span>.<span class="typed"><span class="type">=&gt; sbt.Project</span><a id="10261">get</a></span>)
			<span class="keyword">else</span>
			{
				<span class="keyword">val</span> <span class="typed"><span class="type">sbt.BufferedLogger</span><a id="56424">buffered</a></span> = <span class="typed"><span class="type">sbt.BufferedLogger</span><span class="keyword">new</span></span> <span class="typed"><span class="type">sbt.BufferedLogger</span><a href="Logger.scala.html#6770">BufferedLogger</a></span>(<span class="typed"><span class="type">sbt.Logger</span><a href="#56359">log</a></span>)
				<span class="keyword">def</span> <span class="typed"><span class="type">(String)Left[String,Nothing]</span><a id="56425">error</a></span>(<span class="typed"><span class="type">String</span><a id="56426">msg</a></span>: <span class="typed"><span class="type">String</span><a id="1842">String</a></span>) =
				{
					<span class="typed"><span class="type">sbt.BufferedLogger</span><a href="#56424">buffered</a></span>.<span class="typed"><span class="type">()Unit</span><a href="Logger.scala.html#47004">playAll</a></span>()
					<span class="typed"><span class="type">sbt.BufferedLogger</span><a href="#56424">buffered</a></span>.<span class="typed"><span class="type">()Unit</span><a href="Logger.scala.html#47006">stop</a></span>()
					<span class="typed"><span class="type">(String)Left[String,Nothing]</span><span id="31304"><a id="1198">Left</a></span></span>(<span class="typed"><span class="type">String</span><a href="#56426">msg</a></span>)
				}
				
				<span class="typed"><span class="type">sbt.BufferedLogger</span><a href="#56424">buffered</a></span>.<span class="typed"><span class="type">()Unit</span><a href="Logger.scala.html#47002">startRecording</a></span>()
				<span class="typed"><span class="type">(sbt.LoadResult)Either[String,sbt.Project]</span><a href="#56254">resultToEither</a></span>(<span class="typed"><span class="type">object sbt.Project</span><a href="Project.scala.html#6501">Project</a></span>.<span class="typed"><span class="type">(java.io.File,Iterable[sbt.Project],Option[sbt.Project],sbt.Logger)sbt.LoadResult</span><a href="Project.scala.html#25663">loadProject</a></span>(<span class="typed"><span class="type">java.io.File</span><a href="#56362">dir</a></span>, <span class="typed"><span class="type">object Nil</span><a id="316">Nil</a></span>, <span class="typed"><span class="type">object None</span><a id="517">None</a></span>, <span class="typed"><span class="type">sbt.BufferedLogger</span><a href="#56424">buffered</a></span>)) <span class="typed"><span class="type">&lt;refinement&gt; extends Either[java.lang.String,sbt.Project] with Product</span><span class="keyword">match</span></span>
				{
					<span class="typed"><span class="type">&lt;refinement&gt; extends Either[java.lang.String,sbt.Project] with Product</span><span class="keyword">case</span></span> <a id="1">Left</a>(<span class="typed"><span class="type">String</span><a id="56437">msg</a></span>) =&gt;
						<span class="typed"><span class="type">sbt.ReloadProject</span><a href="#56361">reload</a></span> <span class="typed"><span class="type">&lt;refinement&gt; extends Either[java.lang.String,sbt.Project] with Product</span><span class="keyword">match</span></span>
						{
							<span class="typed"><span class="type">&lt;refinement&gt; extends Either[java.lang.String,sbt.Project] with Product</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object sbt.ReloadErrorExpected</span><a href="#6715">ReloadErrorExpected</a></span> =&gt;
								<span class="typed"><span class="type">sbt.BufferedLogger</span><a href="#56424">buffered</a></span>.<span class="typed"><span class="type">()Unit</span><a href="Logger.scala.html#47006">stop</a></span>()
								<span class="typed"><span class="type">Option[sbt.Project]</span><a href="#56360">previousProject</a></span>.<span class="typed"><span class="type">(=&gt; java.lang.String)Either[java.lang.String,sbt.Project] with Product</span><a id="10276">toRight</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;Initial project load failed.&quot;)</span><span class="string">&quot;Initial project load failed.&quot;</span></span>)
							<span class="typed"><span class="type">Left[String,Nothing]</span><span class="keyword">case</span></span> <span class="typed"><span class="type">sbt.ReloadSuccessExpected</span><a id="56446">s</a></span>: <span class="typed"><span class="type">sbt.ReloadSuccessExpected</span><a href="#6717">ReloadSuccessExpected</a></span> =&gt; <span class="typed"><span class="type">(String)Left[String,Nothing]</span><a href="#56425">error</a></span>(<span class="typed"><span class="type">sbt.ReloadSuccessExpected</span><a href="#56446">s</a></span>.<span class="typed"><span class="type">=&gt; String</span><a href="#56403">prefixIfError</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">String</span><a href="#56437">msg</a></span>)
							<span class="typed"><span class="type">Left[String,Nothing]</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object sbt.NoReload</span><a href="#6718">NoReload</a></span> <span class="comment">/* shouldn't happen */</span>=&gt; <span class="typed"><span class="type">(String)Left[String,Nothing]</span><a href="#56425">error</a></span>(<span class="typed"><span class="type">String</span><a href="#56437">msg</a></span>)
						}
					<span class="typed"><span class="type">&lt;refinement&gt; extends Either[String,sbt.Project] with Product</span><span class="keyword">case</span></span> <a id="1">Right</a>(<span class="typed"><span class="type">sbt.Project</span><a id="56447">p</a></span>) =&gt;
						<span class="typed"><span class="type">sbt.ReloadProject</span><a href="#56361">reload</a></span> <span class="typed"><span class="type">&lt;refinement&gt; extends Either[String,sbt.Project] with Product</span><span class="keyword">match</span></span>
						{
							<span class="typed"><span class="type">Left[String,Nothing]</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object sbt.ReloadErrorExpected</span><a href="#6715">ReloadErrorExpected</a></span> =&gt; <span class="typed"><span class="type">(String)Left[String,Nothing]</span><a href="#56425">error</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;Expected project load failure, but it succeeded.&quot;)</span><span class="string">&quot;Expected project load failure, but it succeeded.&quot;</span></span>)
							<span class="typed"><span class="type">Right[Nothing,sbt.Project]</span><span class="keyword">case</span></span> _ =&gt;
								<span class="typed"><span class="type">sbt.BufferedLogger</span><a href="#56424">buffered</a></span>.<span class="typed"><span class="type">()Unit</span><a href="Logger.scala.html#47006">stop</a></span>()
								<span class="typed"><span class="type">(sbt.Project)Right[Nothing,sbt.Project]</span><span id="30775"><a id="502">Right</a></span></span>(<span class="typed"><span class="type">sbt.Project</span><a href="#56447">p</a></span>)
						}
				}
			}
		<span class="typed"><span class="type">&lt;refinement&gt; extends Either[java.lang.String,sbt.Project] with Product</span><a href="#56407">loadResult</a></span> <span class="typed"><span class="type">Either[String,T]</span><span class="keyword">match</span></span>
		{
			<span class="typed"><span class="type">Either[String,T]</span><span class="keyword">case</span></span> <a id="1">Right</a>(<span class="typed"><span class="type">sbt.Project</span><a id="56462">project</a></span>) =&gt;
				<span class="typed"><span class="type">(sbt.Project)sbt.WithProjectResult[T]</span><a href="#56363" id="7330">f</a></span>(<span class="typed"><span class="type">sbt.Project</span><a href="#56462">project</a></span>) <span class="typed"><span class="type">Either[String,T]</span><span class="keyword">match</span></span>
				{
					<span class="typed"><span class="type">Either[String,T]</span><span class="keyword">case</span></span> <a id="1">ContinueResult</a>(<span class="typed"><span class="type">(sbt.Project) =&gt; sbt.WithProjectResult[T]</span><a id="56487">newF</a></span>, <span class="typed"><span class="type">sbt.ReloadProject</span><a id="56488">newReload</a></span>) =&gt; <span class="typed"><span class="type">(sbt.Logger,Option[sbt.Project],sbt.ReloadProject,java.io.File)((sbt.Project) =&gt; sbt.WithProjectResult[T])Either[String,T]</span><a href="#56251">withProject</a></span>(<span class="typed"><span class="type">sbt.Logger</span><a href="#56359">log</a></span>, <span class="typed"><span class="type">(sbt.Project)Some[sbt.Project]</span><span id="10375"><a id="289">Some</a></span></span>(<span class="typed"><span class="type">sbt.Project</span><a href="#56462">project</a></span>), <span class="typed"><span class="type">sbt.ReloadProject</span><a href="#56488">newReload</a></span>, <span class="typed"><span class="type">java.io.File</span><a href="#56362">dir</a></span>)(<span class="typed"><span class="type">(sbt.Project) =&gt; sbt.WithProjectResult[T]</span><a href="#56487">newF</a></span>)
					<span class="typed"><span class="type">Right[Nothing,T]</span><span class="keyword">case</span></span> <a id="1">ValueResult</a>(<span class="typed"><span class="type">T</span><a id="56515">value</a></span>) =&gt; <span class="typed"><span class="type">(T)Right[Nothing,T]</span><span id="30775"><a id="502">Right</a></span></span>(<span class="typed"><span class="type">T</span><a href="#56515">value</a></span>)
					<span class="typed"><span class="type">Left[String,Nothing]</span><span class="keyword">case</span></span> <span class="typed"><span class="type">sbt.ErrorResult</span><a id="56518">err</a></span>: <span class="typed"><span class="type">sbt.ErrorResult</span><a href="#6730">ErrorResult</a></span> =&gt; <span class="typed"><span class="type">(String)Left[String,Nothing]</span><span id="31304"><a id="1198">Left</a></span></span>(<span class="typed"><span class="type">sbt.ErrorResult</span><a href="#56518">err</a></span>.<span class="typed"><span class="type">=&gt; String</span><a href="#56520">message</a></span>)
				}
			<span class="typed"><span class="type">Left[java.lang.String,Nothing]</span><span class="keyword">case</span></span> <a id="1">Left</a>(<span class="typed"><span class="type">java.lang.String</span><a id="56525">message</a></span>) =&gt; <span class="typed"><span class="type">(java.lang.String)Left[java.lang.String,Nothing]</span><span id="31304"><a id="1198">Left</a></span></span>(<span class="typed"><span class="type">java.lang.String</span><a href="#56525">message</a></span>)
		}
	}

	<span class="keyword">def</span> <span class="typed"><span class="type">(sbt.LoadResult)Either[String,sbt.Project]</span><a id="56254">resultToEither</a></span>(<span class="typed"><span class="type">sbt.LoadResult</span><a id="56429">result</a></span>: <span class="typed"><span class="type">sbt.LoadResult</span><a href="Project.scala.html#6495">LoadResult</a></span>): <span class="typed"><span class="type">Either[String,sbt.Project]</span><a id="342">Either</a></span>[String, Project] =
		<span class="typed"><span class="type">sbt.LoadResult</span><a href="#56429">result</a></span> <span class="typed"><span class="type">Either[String,sbt.Project]</span><span class="keyword">match</span></span>
		{
			<span class="typed"><span class="type">Right[Nothing,sbt.Project]</span><span class="keyword">case</span></span> <span class="typed"><span class="type">sbt.LoadSuccess</span><a id="56528">success</a></span>: <span class="typed"><span class="type">sbt.LoadSuccess</span><a href="Project.scala.html#6496">LoadSuccess</a></span> =&gt; <span class="typed"><span class="type">(sbt.Project)Right[Nothing,sbt.Project]</span><span id="30775"><a id="502">Right</a></span></span>(<span class="typed"><span class="type">sbt.LoadSuccess</span><a href="#56528">success</a></span>.<span class="typed"><span class="type">=&gt; sbt.Project</span><a href="Project.scala.html#47925">project</a></span>)
			<span class="typed"><span class="type">Left[String,Nothing]</span><span class="keyword">case</span></span> <span class="typed"><span class="type">sbt.LoadError</span><a id="56531">err</a></span>: <span class="typed"><span class="type">sbt.LoadError</span><a href="Project.scala.html#6497">LoadError</a></span> =&gt; <span class="typed"><span class="type">(String)Left[String,Nothing]</span><span id="31304"><a id="1198">Left</a></span></span>(<span class="typed"><span class="type">sbt.LoadError</span><a href="#56531">err</a></span>.<span class="typed"><span class="type">=&gt; String</span><a href="Project.scala.html#47920">message</a></span>)
			<span class="typed"><span class="type">Left[String,Nothing]</span><span class="keyword">case</span></span> <span class="typed"><span class="type">sbt.LoadSetupError</span><a id="56534">err</a></span>: <span class="typed"><span class="type">sbt.LoadSetupError</span><a href="Project.scala.html#6500">LoadSetupError</a></span> =&gt; <span class="typed"><span class="type">(String)Left[String,Nothing]</span><span id="31304"><a id="1198">Left</a></span></span>(<span class="typed"><span class="type">sbt.LoadSetupError</span><a href="#56534">err</a></span>.<span class="typed"><span class="type">=&gt; String</span><a href="Project.scala.html#47915">message</a></span>)
			<span class="typed"><span class="type">Left[java.lang.String,Nothing]</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object sbt.LoadSetupDeclined</span><a href="Project.scala.html#6498">LoadSetupDeclined</a></span> =&gt; <span class="typed"><span class="type">(java.lang.String)Left[java.lang.String,Nothing]</span><span id="31304"><a id="1198">Left</a></span></span>(<span class="typed"><span class="type">java.lang.String(&quot;Setup declined&quot;)</span><span class="string">&quot;Setup declined&quot;</span></span>)
		}
}
<span class="keyword">sealed</span> <span class="keyword">trait</span> <span class="typed"><span class="type">trait ReloadProject extends java.lang.Object with NotNull</span><a id="6714">ReloadProject</a></span> <span class="keyword">extends</span> <span class="typed"><span class="type">NotNull</span><a id="186">NotNull</a></span>
<span class="keyword">final</span> <span class="keyword">object</span> <span class="typed"><span class="type">object sbt.ReloadErrorExpected</span><a id="6715">ReloadErrorExpected</a></span> <span class="keyword">extends</span> <span class="typed"><span class="type">sbt.ReloadProject</span><a href="#6714">ReloadProject</a></span>
<span class="keyword">final</span> <span class="keyword">class</span> <span class="typed"><span class="type">class ReloadSuccessExpected extends java.lang.Object with sbt.ReloadProject with ScalaObject</span><a id="6717">ReloadSuccessExpected</a></span>(<span class="keyword">val</span> <span class="typed"><span class="type">String</span><span id="56404"><span id="56403"><a id="56406">prefixIfError</a></span></span></span>: <span class="typed"><span class="type">String</span><a id="1842">String</a></span>) <span class="keyword">extends</span> <span class="typed"><span class="type">sbt.ReloadProject</span><a href="#6714">ReloadProject</a></span>
<span class="keyword">final</span> <span class="keyword">object</span> <span class="typed"><span class="type">object sbt.NoReload</span><a id="6718">NoReload</a></span> <span class="keyword">extends</span> <span class="typed"><span class="type">sbt.ReloadProject</span><a href="#6714">ReloadProject</a></span>

<span class="keyword">sealed</span> <span class="keyword">trait</span> <span class="typed"><span class="type">trait WithProjectResult[+T] extends java.lang.Object with NotNull</span><a id="6720">WithProjectResult</a></span>[+<span class="typed"><span class="type">&gt;: Nothing &lt;: Any</span><a id="6721">T</a></span>] <span class="keyword">extends</span> <span class="typed"><span class="type">NotNull</span><a id="186">NotNull</a></span>
<span class="keyword">final</span> <span class="keyword">case</span> <span class="keyword">class</span> <span class="typed"><span class="type">class ContinueResult[T] extends java.lang.Object with sbt.WithProjectResult[T] with ScalaObject with Product</span><span id="56552"><span id="56480"><span id="56553"><span id="3490"><span id="28985"><span id="28986"><span id="56550"><span id="1360"><span id="56558"><span id="56477"><span id="289"><span id="9362"><span id="56559"><span id="29016"><span id="3481"><span id="6722"><span id="56467"><span id="56557"><span id="56548"><span id="2732"><span id="10375"><span id="56549"><span id="56556"><span id="5766"><span id="3482"><span id="56551"><a id="2731">ContinueResult</a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>[<span class="typed"><span class="type">&gt;: Nothing &lt;: Any</span><span id="6723"><span id="56479"><a id="56469">T</a></span></span></span>](<span class="typed"><span class="type">(sbt.Project) =&gt; sbt.WithProjectResult[T]</span><span id="56473"><span id="56472"><span id="56485"><a id="56593">f</a></span></span></span></span>: Project =&gt; WithProjectResult[T], <span class="typed"><span class="type">sbt.ReloadProject</span><span id="56475"><span id="56474"><span id="56486"><a id="56594">reload</a></span></span></span></span>: <span class="typed"><span class="type">sbt.ReloadProject</span><a href="#6714">ReloadProject</a></span>) <span class="keyword">extends</span> <span class="typed"><span class="type">sbt.WithProjectResult[T]</span><a href="#6720">WithProjectResult</a></span>[T]
<span class="keyword">final</span> <span class="keyword">case</span> <span class="keyword">class</span> <span class="typed"><span class="type">class ValueResult[T] extends java.lang.Object with sbt.WithProjectResult[T] with ScalaObject with Product</span><span id="2731"><span id="56563"><span id="6726"><span id="56571"><span id="28985"><span id="56568"><span id="56565"><span id="28986"><span id="56501"><span id="289"><span id="56566"><span id="29016"><span id="3481"><span id="56511"><span id="56567"><span id="56508"><span id="2732"><span id="56564"><span id="10375"><span id="56570"><span id="5766"><span id="3482"><span id="6728"><span id="56569"><a id="3477">ValueResult</a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>[<span class="typed"><span class="type">&gt;: Nothing &lt;: Any</span><span id="6727"><span id="56510"><a id="56503">T</a></span></span></span>](<span class="typed"><span class="type">T</span><span id="56506"><span id="56505"><span id="56514"><a id="56596">value</a></span></span></span></span>: <span class="typed"><span class="type">T</span><a href="#6727">T</a></span>) <span class="keyword">extends</span> <span class="typed"><span class="type">sbt.WithProjectResult[T]</span><a href="#6720">WithProjectResult</a></span>[T]
<span class="keyword">final</span> <span class="keyword">class</span> <span class="typed"><span class="type">class ErrorResult extends java.lang.Object with sbt.WithProjectResult[Nothing] with ScalaObject</span><a id="6730">ErrorResult</a></span>(<span class="keyword">val</span> <span class="typed"><span class="type">String</span><span id="56521"><span id="56520"><a id="56575">message</a></span></span></span>: <span class="typed"><span class="type">String</span><a id="1842">String</a></span>) <span class="keyword">extends</span> <span class="typed"><span class="type">sbt.WithProjectResult[Nothing]</span><a href="#6720">WithProjectResult</a></span>[Nothing]
<span class="keyword">object</span> <span class="typed"><span class="type">object sbt.ContinueResult</span><a id="6724">ContinueResult</a></span>
{
	<span class="keyword">def</span> <span class="typed"><span class="type">[T]((sbt.Project) =&gt; sbt.WithProjectResult[T],Option[String])sbt.ContinueResult[T]</span><a id="56464">apply</a></span>[<span class="typed"><span class="type">&gt;: Nothing &lt;: Any</span><a id="56466">T</a></span>](<span class="typed"><span class="type">(sbt.Project) =&gt; sbt.WithProjectResult[T]</span><a id="56577">f</a></span>: Project =&gt; WithProjectResult[T], <span class="typed"><span class="type">Option[String]</span><a id="56578">prefixIfError</a></span>: <span class="typed"><span class="type">Option[String]</span><a id="915">Option</a></span>[String]) =
	{
		<span class="keyword">val</span> <span class="typed"><span class="type">&lt;refinement&gt; extends sbt.ReloadProject with ScalaObject</span><a id="56580">reload</a></span> = <span class="typed"><span class="type">Option[String]</span><a href="#56578">prefixIfError</a></span> <span class="typed"><span class="type">&lt;refinement&gt; extends sbt.ReloadProject with ScalaObject</span><span class="keyword">match</span></span> { <span class="typed"><span class="type">sbt.NoReload.type</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object None</span><a id="517">None</a></span> =&gt; <span class="typed"><span class="type">object sbt.NoReload</span><a href="#6718">NoReload</a></span>; <span class="typed"><span class="type">sbt.ReloadSuccessExpected</span><span class="keyword">case</span></span> <a id="1">Some</a>(<span class="typed"><span class="type">String</span><a id="56581">p</a></span>) =&gt; <span class="typed"><span class="type">sbt.ReloadSuccessExpected</span><span class="keyword">new</span></span> <span class="typed"><span class="type">sbt.ReloadSuccessExpected</span><a href="#6717">ReloadSuccessExpected</a></span>(<span class="typed"><span class="type">String</span><a href="#56581">p</a></span>) }
		<span class="typed"><span class="type">sbt.ContinueResult[T]</span><span class="keyword">new</span></span> <span class="typed"><span class="type">sbt.ContinueResult[T]</span><a href="#6722">ContinueResult</a></span>[T](<span class="typed"><span class="type">(sbt.Project) =&gt; sbt.WithProjectResult[T]</span><a href="#56577">f</a></span>, <span class="typed"><span class="type">&lt;refinement&gt; extends sbt.ReloadProject with ScalaObject</span><a href="#56580">reload</a></span>)
	}
}
        </pre>
    </body>
</html>