<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>sbt/Version.scala</title>
        <script type="text/javascript" src="../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../style.css" title="Style">
    </head>
    <body onload="initializeLinked()">
        <pre>
<span class="comment">/* sbt -- Simple Build Tool
 * Copyright 2008 Mark Harrah
 */</span>
<span class="keyword">package</span> sbt

<span class="keyword">sealed</span> <span class="keyword">trait</span> <a title="trait Version extends java.lang.Object with NotNull" id="6713">Version</a> <span class="keyword">extends</span> <a title="NotNull" id="187">NotNull</a>
<span class="keyword">case</span> <span class="keyword">class</span> <span id="2640"><span id="6714"><span id="9173"><span id="3391"><span id="62740"><span id="62800"><span id="1163"><span id="10256"><span id="27624"><span id="62818"><span id="6715"><span id="62810"><span id="62816"><span id="62796"><span id="62809"><span id="62815"><span id="2641"><span id="62798"><span id="5675"><span id="62799"><span id="275"><span id="62817"><span id="62741"><span id="3399"><span id="3031"><span id="62807"><span id="62797"><span id="62808"><span id="3390"><a title="class BasicVersion extends java.lang.Object with sbt.Version with ScalaObject with Product" id="27651">BasicVersion</a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>(<span id="62694"><span id="62693"><span id="62712"><a title="Int" id="62742">major</a></span></span></span>: <a title="Int" id="2296">Int</a>, <span id="62696"><span id="62695"><span id="62713"><a title="Option[Int]" id="62743">minor</a></span></span></span>: <a title="Option[Int]" id="871">Option</a>[Int], <span id="62698"><span id="62697"><span id="62714"><a title="Option[Int]" id="62744">micro</a></span></span></span>: <a title="Option[Int]" id="871">Option</a>[Int], <span id="62700"><span id="62699"><span id="62715"><a title="Option[String]" id="62745">extra</a></span></span></span>: <a title="Option[String]" id="871">Option</a>[String]) <span class="keyword">extends</span> <a href="#6713" title="sbt.Version">Version</a>
{
	<span class="keyword">import</span> Version._
	<span id="5881"><a title="(Boolean,Any)Unit" id="770">require</a></span>(<a href="#62693" title="=&gt; Int">major</a> <a title="(Int)Boolean" id="3036">&gt;=</a> <span title="Int(0)" class="int">0</span>, <span title="java.lang.String(&quot;Major revision must be nonnegative.&quot;)" class="string">&quot;Major revision must be nonnegative.&quot;</span>)
	<span id="5881"><a title="(Boolean,Any)Unit" id="770">require</a></span>(<a href="#62695" title="=&gt; Option[Int]">minor</a>.<a title="=&gt; Boolean" id="10151">isDefined</a> <a title="(Boolean)Boolean" id="2640">||</a> <a href="#62697" title="=&gt; Option[Int]">micro</a>.<a title="=&gt; Boolean" id="10150">isEmpty</a>, <span title="java.lang.String(&quot;Cannot define micro revision without defining minor revision.&quot;)" class="string">&quot;Cannot define micro revision without defining minor revision.&quot;</span>)
	<a href="#46070" title="(Option[Int])Unit">requirePositive</a>(<a href="#62695" title="=&gt; Option[Int]">minor</a>)
	<a href="#46070" title="(Option[Int])Unit">requirePositive</a>(<a href="#62697" title="=&gt; Option[Int]">micro</a>)
	<span id="5880"><a title="(Boolean)Unit" id="770">require</a></span>(<a href="#46075" title="(Option[String])Boolean">isValidExtra</a>(<a href="#62699" title="=&gt; Option[String]">extra</a>))
	
	<span class="keyword">def</span> <a title="=&gt; sbt.BasicVersion" id="62703">incrementMicro</a> = <a href="#62740" title="(Int,Option[Int],Option[Int],Option[String])sbt.BasicVersion">BasicVersion</a>(<a href="#62693" title="=&gt; Int">major</a>, <a href="#62695" title="=&gt; Option[Int]">minor</a> <a title="(=&gt; Option[Int])Option[Int]" id="10163">orElse</a> <span id="10256"><a title="(Int)Some[Int]" id="275">Some</a></span>(<span title="Int(0)" class="int">0</span>), <a href="#46069" title="(Option[Int])Some[Int]">increment</a>(<a href="#62697" title="=&gt; Option[Int]">micro</a>), <a href="#62699" title="=&gt; Option[String]">extra</a>)
	<span class="keyword">def</span> <a title="=&gt; sbt.BasicVersion" id="62704">incrementMinor</a> = <a href="#62740" title="(Int,Option[Int],Option[Int],Option[String])sbt.BasicVersion">BasicVersion</a>(<a href="#62693" title="=&gt; Int">major</a>, <a href="#46069" title="(Option[Int])Some[Int]">increment</a>(<a href="#62695" title="=&gt; Option[Int]">minor</a>), <a href="#62697" title="=&gt; Option[Int]">micro</a>, <a href="#62699" title="=&gt; Option[String]">extra</a>)
	<span class="keyword">def</span> <a title="=&gt; sbt.BasicVersion" id="62705">incrementMajor</a> = <a href="#62740" title="(Int,Option[Int],Option[Int],Option[String])sbt.BasicVersion">BasicVersion</a>(<a href="#62693" title="=&gt; Int">major</a><a title="(Int)Int" id="3037">+</a><span title="Int(1)" class="int">1</span>, <a href="#62695" title="=&gt; Option[Int]">minor</a>, <a href="#62697" title="=&gt; Option[Int]">micro</a>, <a href="#62699" title="=&gt; Option[String]">extra</a>)
	
	<span class="keyword">override</span> <span class="keyword">def</span> <a title="()java.lang.String" id="62706">toString</a> = <a href="#62693" title="=&gt; Int">major</a> <a title="(java.lang.String)java.lang.String" id="2979">+</a>
		<a href="#62695" title="=&gt; Option[Int]">minor</a>.<a title="((Int) =&gt; java.lang.String)Option[java.lang.String]" id="10157">map</a>(<a title="Int" id="62783">minorI</a> =&gt; <span title="java.lang.String(&quot;.&quot;)" class="string">&quot;.&quot;</span> <a title="(Any)java.lang.String" id="5683">+</a> <a href="#62783" title="Int">minorI</a> <a title="(Any)java.lang.String" id="5683">+</a> <a href="#62697" title="=&gt; Option[Int]">micro</a>.<a title="((Int) =&gt; java.lang.String)Option[java.lang.String]" id="10157">map</a>(<a title="Int" id="62786">microI</a> =&gt; <span title="java.lang.String(&quot;.&quot;)" class="string">&quot;.&quot;</span> <a title="(Any)java.lang.String" id="5683">+</a> <a href="#62786" title="Int">microI</a>).<a title="(=&gt; java.lang.String)java.lang.String" id="10155">getOrElse</a>(<span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>)).<a title="(=&gt; java.lang.String)java.lang.String" id="10155">getOrElse</a>(<span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>) <a title="(Any)java.lang.String" id="5683">+</a>
			<a href="#62699" title="=&gt; Option[String]">extra</a>.<a title="((String) =&gt; java.lang.String)Option[java.lang.String]" id="10157">map</a>(<a title="String" id="62793">x</a> =&gt; <span title="java.lang.String(&quot;-&quot;)" class="string">&quot;-&quot;</span> <a title="(Any)java.lang.String" id="5683">+</a> <a href="#62793" title="String">x</a>).<a title="(=&gt; java.lang.String)java.lang.String" id="10155">getOrElse</a>(<span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>)
}
<span class="keyword">case</span> <span class="keyword">class</span> <span id="2640"><span id="62838"><span id="62844"><span id="5675"><span id="3391"><span id="62839"><span id="62840"><span id="275"><span id="10256"><span id="6717"><span id="27624"><span id="62843"><span id="6718"><span id="62848"><span id="3399"><span id="62850"><span id="62853"><span id="62845"><span id="3390"><span id="62841"><span id="2641"><span id="62852"><span id="27651"><a title="class OpaqueVersion extends java.lang.Object with sbt.Version with ScalaObject with Product" id="62851">OpaqueVersion</a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>(<span id="62822"><span id="62821"><span id="62827"><a title="String" id="62921">value</a></span></span></span>: <a title="String" id="1751">String</a>) <span class="keyword">extends</span> <a href="#6713" title="sbt.Version">Version</a>
{
	<span id="5880"><a title="(Boolean)Unit" id="770">require</a></span>(<a title="=&gt; Boolean" id="2637">!</a><a href="#62821" title="=&gt; String">value</a>.<span id="6012"><span id="770"><a title="implicit scala.Predef.stringWrapper : (String)scala.runtime.RichString" id="5751">trim</a></span></span>.<a title="=&gt; Boolean" id="7108">isEmpty</a>)
	<span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="62824">toString</a> = <a href="#62821" title="=&gt; String">value</a>
}
<span class="keyword">object</span> <a title="object sbt.Version" id="6720">Version</a>
{
	<span class="keyword">private</span>[sbt] <span class="keyword">def</span> <a title="(Option[Int])Some[Int]" id="46069">increment</a>(<a title="Option[Int]" id="62749">i</a>: <a title="Option[Int]" id="871">Option</a>[Int]) = <span id="10256"><a title="(Int)Some[Int]" id="275">Some</a></span>(<a href="#62749" title="Option[Int]">i</a>.<a title="(=&gt; Int)Int" id="10155">getOrElse</a>(<span title="Int(0)" class="int">0</span>) <a title="(Int)Int" id="3037">+</a> <span title="Int(1)" class="int">1</span>)
	<span class="keyword">private</span>[sbt] <span class="keyword">def</span> <a title="(Option[Int])Unit" id="46070">requirePositive</a>(<a title="Option[Int]" id="62732">i</a>: <a title="Option[Int]" id="871">Option</a>[Int]) { <a href="#62732" title="Option[Int]">i</a>.<a title="((Int) =&gt; Unit)Unit" id="10162">foreach</a>(<a title="Int" id="62858">x</a> =&gt; <span id="5880"><a title="(Boolean)Unit" id="770">require</a></span>(<a href="#62858" title="Int">x</a> <a title="(Int)Boolean" id="3036">&gt;=</a> <span title="Int(0)" class="int">0</span>)) }
	
	<span class="keyword">import</span> java.util.regex.Pattern
	<span class="keyword">val</span> <span id="46073"><a title="java.util.regex.Pattern" id="46072">versionPattern</a></span> = <a title="object java.util.regex.Pattern" id="8635">Pattern</a>.<a title="(java.lang.String)java.util.regex.Pattern" id="24054">compile</a>(<span title="java.lang.String(&quot;(\d+)(?:\.(\d+)(?:\.(\d+))?)?(?:-(.+))?&quot;)" class="string">&quot;&quot;&quot;(\d+)(?:\.(\d+)(?:\.(\d+))?)?(?:-(.+))?&quot;&quot;&quot;</span>)
	<span class="keyword">def</span> <a title="(String)Either[String,sbt.Version]" id="46074">fromString</a>(<a title="String" id="52577">v</a>: <a title="String" id="1751">String</a>): <a title="Either[String,sbt.Version]" id="322">Either</a>[String, Version] =
	{
		<span class="keyword">val</span> <a title="java.lang.String" id="62861">trimmed</a> = <a href="#52577" title="String">v</a>.<a title="()java.lang.String" id="5751">trim</a>
		<span title="Either[String,sbt.Version]" class="keyword">if</span>(<span id="6012"><a href="#62861" title="implicit scala.Predef.stringWrapper : (String)scala.runtime.RichString" id="770">trimmed</a></span>.<a title="=&gt; Boolean" id="7108">isEmpty</a>)
			<span id="29944"><a title="(java.lang.String)Left[java.lang.String,Nothing]" id="1130">Left</a></span>(<span title="java.lang.String(&quot;Version cannot be empty.&quot;)" class="string">&quot;Version cannot be empty.&quot;</span>)
		<span class="keyword">else</span>
		{
			<span class="keyword">val</span> <a title="java.util.regex.Matcher" id="62871">matcher</a> = <a href="#46072" title="=&gt; java.util.regex.Pattern">versionPattern</a>.<a title="(java.lang.CharSequence)java.util.regex.Matcher" id="24058">matcher</a>(<a href="#62861" title="java.lang.String">trimmed</a>)
			<span class="keyword">import</span> matcher._
			<span title="Either[String,sbt.Version]" class="keyword">if</span>(<a href="#62871" title="()Boolean" id="53433">matches</a>)
			{
				<span class="keyword">def</span> <a title="(Int)Option[java.lang.String]" id="62873">toOption</a>(<a title="Int" id="62876">index</a>: <a title="Int" id="2296">Int</a>) =
				{
					<span class="keyword">val</span> <a title="java.lang.String" id="62877">v</a> = <a href="#62871" title="(Int)java.lang.String" id="53431">group</a>(<a href="#62876" title="Int">index</a>)
					<span title="Option[java.lang.String]" class="keyword">if</span>(<a href="#62877" title="java.lang.String">v</a> <a title="(AnyRef)Boolean" id="3399">==</a> <span title="Null(null)" class="keyword">null</span>) <a title="object None" id="488">None</a> <span class="keyword">else</span> <span id="10256"><a title="(java.lang.String)Some[java.lang.String]" id="275">Some</a></span>(<a href="#62877" title="java.lang.String">v</a>)
				}
				<span class="keyword">def</span> <a title="(Int)Option[Int]" id="62874">toInt</a>(<a title="Int" id="62903">index</a>: <a title="Int" id="2296">Int</a>) = <a href="#62873" title="(Int)Option[java.lang.String]">toOption</a>(<a href="#62903" title="Int">index</a>).<a title="((java.lang.String) =&gt; Int)Option[Int]" id="10157">map</a>(<span id="6012"><a href="#62906" title="implicit scala.Predef.stringWrapper : (String)scala.runtime.RichString" id="770">_</a></span>.<a title="=&gt; Int" id="8771">toInt</a>)
				<span class="keyword">val</span> <a title="Option[java.lang.String]" id="62875">extra</a> = <a href="#62873" title="(Int)Option[java.lang.String]">toOption</a>(<span title="Int(4)" class="int">4</span>)
				<span title="Either[String,sbt.Version]" class="keyword">if</span>(<a href="#46075" title="(Option[String])Boolean">isValidExtra</a>(<a href="#62875" title="Option[java.lang.String]">extra</a>))
					<span id="29414"><a title="(sbt.BasicVersion)Right[Nothing,sbt.BasicVersion]" id="476">Right</a></span>(<a href="#62740" title="(Int,Option[Int],Option[Int],Option[String])sbt.BasicVersion">BasicVersion</a>(<span id="6012"><span id="770"><a href="#62871" title="implicit scala.Predef.stringWrapper : (String)scala.runtime.RichString" id="53431">group</a></span></span>(<span title="Int(1)" class="int">1</span>).<a title="=&gt; Int" id="8771">toInt</a>, <a href="#62874" title="(Int)Option[Int]">toInt</a>(<span title="Int(2)" class="int">2</span>), <a href="#62874" title="(Int)Option[Int]">toInt</a>(<span title="Int(3)" class="int">3</span>), <a href="#62875" title="Option[java.lang.String]">extra</a>))
				<span class="keyword">else</span>
					<span id="29414"><a title="(sbt.OpaqueVersion)Right[Nothing,sbt.OpaqueVersion]" id="476">Right</a></span>(<a href="#62843" title="(String)sbt.OpaqueVersion">OpaqueVersion</a>(<a href="#62861" title="java.lang.String">trimmed</a>))
			}
			<span class="keyword">else</span>
				<span id="29414"><a title="(sbt.OpaqueVersion)Right[Nothing,sbt.OpaqueVersion]" id="476">Right</a></span>(<a href="#62843" title="(String)sbt.OpaqueVersion">OpaqueVersion</a>(<a href="#62861" title="java.lang.String">trimmed</a>))
		}
	}
	<span class="keyword">def</span> <a title="(Option[String])Boolean" id="46075">isValidExtra</a>(<a title="Option[String]" id="62736">e</a>: <a title="Option[String]" id="871">Option</a>[String]): <a title="Boolean" id="2060">Boolean</a> = <a href="#62736" title="Option[String]">e</a>.<a title="((String) =&gt; Boolean)Option[Boolean]" id="10157">map</a>(<a href="#46076" title="(String)Boolean">isValidExtra</a>).<a title="(=&gt; Boolean)Boolean" id="10155">getOrElse</a>(<span title="Boolean(true)" class="keyword">true</span>)
	<span class="keyword">def</span> <a title="(String)Boolean" id="46076">isValidExtra</a>(<a title="String" id="62735">s</a>: <a title="String" id="1751">String</a>): <a title="Boolean" id="2060">Boolean</a> = <a title="=&gt; Boolean" id="2637">!</a>(<a href="#62735" title="String">s</a>.<span id="6012"><span id="770"><a title="implicit scala.Predef.stringWrapper : (String)scala.runtime.RichString" id="5751">trim</a></span></span>.<a title="=&gt; Boolean" id="7108">isEmpty</a> <a title="(Boolean)Boolean" id="2640">||</a> <span id="6012"><a href="#62735" title="implicit scala.Predef.stringWrapper : (String)scala.runtime.RichString" id="770">s</a></span>.<a title="((Char) =&gt; Boolean)Boolean" id="7258">exists</a>(java.lang.<a title="object java.lang.Character" id="1836">Character</a>.<a href="#62944" title="(Char)Boolean" id="25224">isISOControl</a>))
}

        </pre>
    </body>
</html>