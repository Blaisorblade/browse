<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>sbt/impl/RunTask.scala</title>
        <script type="text/javascript" src="../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../style.css" title="Style">
    </head>
    <body onload="initializeLinked()">
        <pre>
<span class="comment">/* sbt -- Simple Build Tool
 * Copyright 2009  Mark Harrah
 */</span>
 <span class="keyword">package</span> sbt.impl

<span class="keyword">import</span> scala.collection.{immutable, jcl, mutable}
<span class="keyword">import</span> scala.collection.Map
<span class="keyword">import</span> jcl.IdentityHashMap

<span class="keyword">private</span>[sbt] <span class="keyword">object</span> <span class="typed"><span class="type">object sbt.impl.RunTask</span><a id="6645">RunTask</a></span>
{
	<span class="keyword">final</span> <span class="keyword">type</span> <span class="typed"><span class="type">sbt.Project#Task</span><a id="47351">Task</a></span> = Project#<span class="typed"><span class="type">sbt.Project#Task</span><a href="../TaskManager.scala.html#25081">Task</a></span>
	<span class="keyword">val</span> <span class="typed"><span class="type">java.lang.String</span><span id="47353"><a id="47352">UnnamedName</a></span></span> = <span class="typed"><span class="type">java.lang.String(&quot;&lt;anonymous&gt;&quot;)</span><span class="string">&quot;&lt;anonymous&gt;&quot;</span></span>
	<span class="keyword">def</span> <span class="typed"><span class="type">(sbt.impl.RunTask.Task,String)List[sbt.WorkFailure[sbt.impl.RunTask.Task]]</span><a id="47354">apply</a></span>(<span class="typed"><span class="type">sbt.impl.RunTask.Task</span><a id="47749">root</a></span>: <span class="typed"><span class="type">sbt.impl.RunTask.Task</span><a href="../TaskManager.scala.html#25081">Task</a></span>, <span class="typed"><span class="type">String</span><a id="47750">rootName</a></span>: <span class="typed"><span class="type">String</span><a id="1842">String</a></span>): <span class="typed"><span class="type">List[sbt.WorkFailure[sbt.impl.RunTask.Task]]</span><a id="507">List</a></span>[WorkFailure[Task]]  = <span class="typed"><span class="type">(sbt.impl.RunTask.Task,String,Boolean)List[sbt.WorkFailure[sbt.impl.RunTask.Task]]</span><a href="#47355">apply</a></span>(<span class="typed"><span class="type">sbt.impl.RunTask.Task</span><a href="#47749">root</a></span>, <span class="typed"><span class="type">String</span><a href="#47750">rootName</a></span>, <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>)
	<span class="keyword">def</span> <span class="typed"><span class="type">(sbt.impl.RunTask.Task,String,Boolean)List[sbt.WorkFailure[sbt.impl.RunTask.Task]]</span><a id="47355">apply</a></span>(<span class="typed"><span class="type">sbt.impl.RunTask.Task</span><a id="47746">root</a></span>: <span class="typed"><span class="type">sbt.impl.RunTask.Task</span><a href="../TaskManager.scala.html#25081">Task</a></span>, <span class="typed"><span class="type">String</span><a id="47747">rootName</a></span>: <span class="typed"><span class="type">String</span><a id="1842">String</a></span>, <span class="typed"><span class="type">Boolean</span><a id="47748">parallelExecution</a></span>: <span class="typed"><span class="type">Boolean</span><a id="2151">Boolean</a></span>): <span class="typed"><span class="type">List[sbt.WorkFailure[sbt.impl.RunTask.Task]]</span><a id="507">List</a></span>[WorkFailure[Task]] =
		<span class="typed"><span class="type">(sbt.impl.RunTask.Task,String,Int)List[sbt.WorkFailure[sbt.impl.RunTask.Task]]</span><a href="#47356">apply</a></span>(<span class="typed"><span class="type">sbt.impl.RunTask.Task</span><a href="#47746">root</a></span>, <span class="typed"><span class="type">String</span><a href="#47747">rootName</a></span>, <span class="typed"><span class="type">Int</span><span class="keyword">if</span></span>(<span class="typed"><span class="type">Boolean</span><a href="#47748">parallelExecution</a></span>) <span class="typed"><span class="type">object java.lang.Runtime</span><a id="1732">Runtime</a></span>.<span class="typed"><span class="type">()java.lang.Runtime</span><a id="52186">getRuntime</a></span>.<span class="typed"><span class="type">()Int</span><a id="52198">availableProcessors</a></span> <span class="keyword">else</span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>)
	<span class="keyword">def</span> <span class="typed"><span class="type">(sbt.impl.RunTask.Task,String,Int)List[sbt.WorkFailure[sbt.impl.RunTask.Task]]</span><a id="47356">apply</a></span>(<span class="typed"><span class="type">sbt.impl.RunTask.Task</span><a id="47359">root</a></span>: <span class="typed"><span class="type">sbt.impl.RunTask.Task</span><a href="../TaskManager.scala.html#25081">Task</a></span>, <span class="typed"><span class="type">String</span><a id="47360">rootName</a></span>: <span class="typed"><span class="type">String</span><a id="1842">String</a></span>, <span class="typed"><span class="type">Int</span><a id="47361">maximumTasks</a></span>: <span class="typed"><span class="type">Int</span><a id="2375">Int</a></span>): <span class="typed"><span class="type">List[sbt.WorkFailure[sbt.impl.RunTask.Task]]</span><a id="507">List</a></span>[WorkFailure[Task]]  = (<span class="typed"><span class="type">sbt.impl.RunTask</span><span class="keyword">new</span></span> <span class="typed"><span class="type">sbt.impl.RunTask</span><a href="#6648">RunTask</a></span>(<span class="typed"><span class="type">sbt.impl.RunTask.Task</span><a href="#47359">root</a></span>, <span class="typed"><span class="type">String</span><a href="#47360">rootName</a></span>, <span class="typed"><span class="type">Int</span><a href="#47361">maximumTasks</a></span>)).<span class="typed"><span class="type">()List[sbt.WorkFailure[sbt.impl.RunTask.Task]]</span><a href="#54511">run</a></span>()
}
<span class="keyword">import</span> RunTask._
<span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="typed"><span class="type">class RunTask extends java.lang.Object with NotNull with ScalaObject</span><a id="6648">RunTask</a></span>(<span class="typed"><span class="type">sbt.impl.RunTask.Task</span><span id="54505"><a id="54549">root</a></span></span>: <span class="typed"><span class="type">sbt.impl.RunTask.Task</span><a href="../TaskManager.scala.html#25081">Task</a></span>, <span class="typed"><span class="type">String</span><span id="54506"><a id="54550">rootName</a></span></span>: <span class="typed"><span class="type">String</span><a id="1842">String</a></span>, <span class="typed"><span class="type">Int</span><span id="54507"><a id="54551">maximumTasks</a></span></span>: <span class="typed"><span class="type">Int</span><a id="2375">Int</a></span>) <span class="keyword">extends</span> <span class="typed"><span class="type">NotNull</span><a id="186">NotNull</a></span>
{
	<span class="typed"><span class="type">(Boolean)Unit</span><span id="5971"><a id="802">require</a></span></span>(<span class="typed"><span class="type">Int</span><a href="#54507">maximumTasks</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3127">&gt;=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>)
	<span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Boolean</span><a id="54509">parallel</a></span> = <span class="typed"><span class="type">Int</span><a href="#54507">maximumTasks</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3126">&gt;</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
	<span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Boolean</span><a id="54510">multiProject</a></span> = <span class="typed"><span class="type">=&gt; scala.collection.immutable.Set[sbt.Project#ManagerType]</span><a href="#54540">allProjects</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="22293">size</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3127">&gt;=</a></span> <span class="typed"><span class="type">Int(2)</span><span class="int">2</span></span>
	<span class="keyword">def</span> <span class="typed"><span class="type">()List[sbt.WorkFailure[sbt.impl.RunTask.Task]]</span><a id="54511">run</a></span>(): <span class="typed"><span class="type">List[sbt.WorkFailure[sbt.impl.RunTask.Task]]</span><a id="507">List</a></span>[WorkFailure[Task]]  =
	{
		<span class="keyword">try</span>
		{
			<span class="typed"><span class="type">()List[sbt.WorkFailure[sbt.impl.RunTask.Task]]</span><a href="#54512">runTasksExceptRoot</a></span>() <span class="typed"><span class="type">List[sbt.WorkFailure[sbt.impl.RunTask.Task]]</span><span class="keyword">match</span></span>
			{
				<span class="typed"><span class="type">List[sbt.WorkFailure[sbt.impl.RunTask.Task]]</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object Nil</span><a id="316">Nil</a></span> =&gt;
					<span class="keyword">val</span> <span class="typed"><span class="type">Option[String]</span><a id="54773">result</a></span> = <span class="typed"><span class="type">(sbt.impl.RunTask.Task,String)Option[String]</span><a href="#54516">runTask</a></span>(<span class="typed"><span class="type">sbt.impl.RunTask.Task</span><a href="#54505">root</a></span>, <span class="typed"><span class="type">String</span><a href="#54506">rootName</a></span>)
					<span class="typed"><span class="type">Option[String]</span><a href="#54773">result</a></span>.<span class="typed"><span class="type">((String) =&gt; sbt.WorkFailure[sbt.impl.RunTask.Task])Option[sbt.WorkFailure[sbt.impl.RunTask.Task]]</span><a id="10266">map</a></span>( <span class="typed"><span class="type">String</span><a id="54778">errorMessage</a></span> =&gt; <span class="typed"><span class="type">(sbt.impl.RunTask.Task,String)sbt.WorkFailure[sbt.impl.RunTask.Task]</span><a href="../ParallelRunner.scala.html#54780">WorkFailure</a></span>(<span class="typed"><span class="type">sbt.impl.RunTask.Task</span><a href="#54505">root</a></span>, <span class="typed"><span class="type">java.lang.String(&quot;Error running &quot;)</span><span class="string">&quot;Error running &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">String</span><a href="#54506">rootName</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;: &quot;)</span><span class="string">&quot;: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">String</span><a href="#54778">errorMessage</a></span>) ).<span class="typed"><span class="type">=&gt; List[sbt.WorkFailure[sbt.impl.RunTask.Task]]</span><a id="10275">toList</a></span>
				<span class="typed"><span class="type">List[sbt.WorkFailure[sbt.impl.RunTask.Task]]</span><span class="keyword">case</span></span> <span class="typed"><span class="type">List[sbt.WorkFailure[sbt.impl.RunTask.Task]]</span><a id="54789">failures</a></span> =&gt; <span class="typed"><span class="type">List[sbt.WorkFailure[sbt.impl.RunTask.Task]]</span><a href="#54789">failures</a></span>
			}
		}
		<span class="keyword">finally</span>
		{
			<span class="keyword">for</span>(<span class="typed"><span class="type">((sbt.Project#ManagerType) =&gt; Unit)Unit</span><span id="7365"><a id="54791">project</a></span></span> &lt;- <span class="typed"><span class="type">=&gt; scala.collection.immutable.Set[sbt.Project#ManagerType]</span><a href="#54540">allProjects</a></span>; <span class="typed"><span class="type">((String) =&gt; Unit)Unit</span><span id="10271"><a id="54793">saveError</a></span></span> &lt;- <span class="typed"><span class="type">sbt.Project#ManagerType</span><a href="#54791">project</a></span>.<span class="typed"><span class="type">()Option[String]</span><a href="../Environment.scala.html#25430">saveEnvironment</a></span>)
				<span class="typed"><span class="type">sbt.Project#ManagerType</span><a href="#54791">project</a></span>.<span class="typed"><span class="type">=&gt; sbt.Logger</span><a href="../Project.scala.html#25084">log</a></span>.<span class="typed"><span class="type">(=&gt; String)Unit</span><a href="../Logger.scala.html#8468">warn</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;Could not save properties for project &quot;)</span><span class="string">&quot;Could not save properties for project &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">sbt.Project#ManagerType</span><a href="#54791">project</a></span>.<span class="typed"><span class="type">=&gt; String</span><a href="../Project.scala.html#25089">name</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;: &quot;)</span><span class="string">&quot;: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">String</span><a href="#54793">saveError</a></span>)
		}
	}
	<span class="comment">// This runs all tasks except the root.task.</span>
	<span class="comment">// It uses a buffered logger in record mode to ensure that all output for a given task is consecutive</span>
	<span class="comment">// it ignores the root task so that the root task may be run with buffering disabled so that the output</span>
	<span class="comment">// occurs without delay.</span>
	<span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">()List[sbt.WorkFailure[sbt.impl.RunTask.Task]]</span><a id="54512">runTasksExceptRoot</a></span>() =
	{
		<span class="typed"><span class="type">((sbt.BufferedLogger) =&gt; Unit)Unit</span><a href="#54513">withBuffered</a></span>(<span class="typed"><span class="type">sbt.BufferedLogger</span><a href="#54737">_</a></span>.<span class="typed"><span class="type">()Unit</span><a href="../Logger.scala.html#47002">startRecording</a></span>())
		<span class="keyword">try</span> { <span class="typed"><span class="type">object sbt.ParallelRunner</span><a href="../ParallelRunner.scala.html#6654">ParallelRunner</a></span>.<span class="typed"><span class="type">(sbt.impl.RunTask.Task,(sbt.impl.RunTask.Task) =&gt; String,(sbt.impl.RunTask.Task) =&gt; Option[String],Int,(sbt.impl.RunTask.Task) =&gt; sbt.Logger)List[sbt.WorkFailure[sbt.impl.RunTask.Task]]</span><a href="../ParallelRunner.scala.html#54739">run</a></span>(<span class="typed"><span class="type">=&gt; sbt.impl.RunTask.Task</span><a href="#54536">expandedRoot</a></span>, <span class="typed"><span class="type">(sbt.impl.RunTask.Task)String</span><a href="#54528">expandedTaskName</a></span>, <span class="typed"><span class="type">(sbt.impl.RunTask.Task)Option[String]</span><a href="#54514">runIfNotRoot</a></span>, <span class="typed"><span class="type">Int</span><a href="#54507">maximumTasks</a></span>, (<span class="typed"><span class="type">sbt.impl.RunTask.Task</span><a id="54764">t</a></span>: <span class="typed"><span class="type">sbt.impl.RunTask.Task</span><a href="../TaskManager.scala.html#25081">Task</a></span>) =&gt; <span class="typed"><span class="type">sbt.impl.RunTask.Task</span><a href="#54764">t</a></span>.<span class="typed"><span class="type">=&gt; sbt.Project#ManagerType</span><a href="../TaskManager.scala.html#29382">manager</a></span>.<span class="typed"><span class="type">=&gt; sbt.Logger</span><a href="../Project.scala.html#25084">log</a></span>) }
		<span class="keyword">finally</span> { <span class="typed"><span class="type">((sbt.BufferedLogger) =&gt; Unit)Unit</span><a href="#54513">withBuffered</a></span>(<span class="typed"><span class="type">sbt.BufferedLogger</span><a href="#54772">_</a></span>.<span class="typed"><span class="type">()Unit</span><a href="../Logger.scala.html#47006">stop</a></span>()) }
	}
	<span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">((sbt.BufferedLogger) =&gt; Unit)Unit</span><a id="54513">withBuffered</a></span>(<span class="typed"><span class="type">(sbt.BufferedLogger) =&gt; Unit</span><a id="54735">f</a></span>: BufferedLogger =&gt; Unit)
	{
		<span class="keyword">for</span>(<span class="typed"><span class="type">((sbt.BufferedLogger) =&gt; Unit)Unit</span><span id="6939"><a id="54795">buffered</a></span></span> &lt;- <span class="typed"><span class="type">=&gt; List[sbt.BufferedLogger]</span><a href="#54542">bufferedLoggers</a></span>)
			<span class="typed"><span class="type">object sbt.Control</span><a href="../Control.scala.html#6704">Control</a></span>.<span class="typed"><span class="type">(=&gt; Unit)Unit</span><a href="../Control.scala.html#10300">trap</a></span>(<span class="typed"><span class="type">(sbt.BufferedLogger)Unit</span><a href="#54735" id="7330">f</a></span>(<span class="typed"><span class="type">sbt.BufferedLogger</span><a href="#54795">buffered</a></span>))
	}
	<span class="comment">/** Will be called in its own actor. Runs the given task if it is not the root task.*/</span>
	<span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(sbt.impl.RunTask.Task)Option[String]</span><a id="54514">runIfNotRoot</a></span>(<span class="typed"><span class="type">sbt.impl.RunTask.Task</span><a id="54760">action</a></span>: <span class="typed"><span class="type">sbt.impl.RunTask.Task</span><a href="../TaskManager.scala.html#25081">Task</a></span>): <span class="typed"><span class="type">Option[String]</span><a id="915">Option</a></span>[String] =
	{
		<span class="typed"><span class="type">Option[String]</span><span class="keyword">if</span></span>(<span class="typed"><span class="type">(sbt.impl.RunTask.Task)Boolean</span><a href="#54515">isRoot</a></span>(<span class="typed"><span class="type">sbt.impl.RunTask.Task</span><a href="#54760">action</a></span>))
			<span class="typed"><span class="type">object None</span><a id="517">None</a></span>
		<span class="keyword">else</span>
			<span class="typed"><span class="type">(sbt.impl.RunTask.Task,String)Option[String]</span><a href="#54516">runTask</a></span>(<span class="typed"><span class="type">sbt.impl.RunTask.Task</span><a href="#54760">action</a></span>, <span class="typed"><span class="type">(sbt.impl.RunTask.Task)String</span><a href="#54528">expandedTaskName</a></span>(<span class="typed"><span class="type">sbt.impl.RunTask.Task</span><a href="#54760">action</a></span>))
	}
	<span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(sbt.impl.RunTask.Task)Boolean</span><a id="54515">isRoot</a></span>(<span class="typed"><span class="type">sbt.impl.RunTask.Task</span><a id="54798">t</a></span>: <span class="typed"><span class="type">sbt.impl.RunTask.Task</span><a href="../TaskManager.scala.html#25081">Task</a></span>) = <span class="typed"><span class="type">sbt.impl.RunTask.Task</span><a href="#54798">t</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3490">==</a></span> <span class="typed"><span class="type">=&gt; sbt.impl.RunTask.Task</span><a href="#54536">expandedRoot</a></span>
	<span class="comment">/** Will be called in its own actor except for the root task. */</span>
	<span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(sbt.impl.RunTask.Task,String)Option[String]</span><a id="54516">runTask</a></span>(<span class="typed"><span class="type">sbt.impl.RunTask.Task</span><a id="54774">action</a></span>: <span class="typed"><span class="type">sbt.impl.RunTask.Task</span><a href="../TaskManager.scala.html#25081">Task</a></span>, <span class="typed"><span class="type">String</span><a id="54775">actionName</a></span>: <span class="typed"><span class="type">String</span><a id="1842">String</a></span>): <span class="typed"><span class="type">Option[String]</span><a id="915">Option</a></span>[String] =
	{
		<span class="keyword">val</span> <span class="typed"><span class="type">java.lang.String</span><a id="54801">label</a></span> = <span class="typed"><span class="type">java.lang.String</span><span class="keyword">if</span></span>(<span class="typed"><span class="type">=&gt; Boolean</span><a href="#54510">multiProject</a></span>) (<span class="typed"><span class="type">sbt.impl.RunTask.Task</span><a href="#54774">action</a></span>.<span class="typed"><span class="type">=&gt; sbt.Project#ManagerType</span><a href="../TaskManager.scala.html#29382">manager</a></span>.<span class="typed"><span class="type">=&gt; String</span><a href="../Project.scala.html#25089">name</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot; / &quot;)</span><span class="string">&quot; / &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">String</span><a href="#54775">actionName</a></span>) <span class="keyword">else</span> <span class="typed"><span class="type">String</span><a href="#54775">actionName</a></span>
		<span class="keyword">def</span> <span class="typed"><span class="type">(sbt.ControlEvent.Value,String,String)Unit</span><a id="54802">banner</a></span>(<span class="typed"><span class="type">sbt.ControlEvent.Value</span><a id="54805">event</a></span>: ControlEvent.<span class="typed"><span class="type">sbt.ControlEvent.Value</span><a id="21282">Value</a></span>, <span class="typed"><span class="type">String</span><a id="54806">firstSeparator</a></span>: <span class="typed"><span class="type">String</span><a id="1842">String</a></span>, <span class="typed"><span class="type">String</span><a id="54807">secondSeparator</a></span>: <span class="typed"><span class="type">String</span><a id="1842">String</a></span>) =
			<span class="typed"><span class="type">object sbt.Control</span><a href="../Control.scala.html#6704">Control</a></span>.<span class="typed"><span class="type">(=&gt; Unit)Unit</span><a href="../Control.scala.html#10300">trap</a></span>(<span class="typed"><span class="type">sbt.impl.RunTask.Task</span><a href="#54774">action</a></span>.<span class="typed"><span class="type">=&gt; sbt.Project#ManagerType</span><a href="../TaskManager.scala.html#29382">manager</a></span>.<span class="typed"><span class="type">=&gt; sbt.Logger</span><a href="../Project.scala.html#25084">log</a></span>.<span class="typed"><span class="type">(sbt.ControlEvent.Value,=&gt; String)Unit</span><a href="../Logger.scala.html#8472">control</a></span>(<span class="typed"><span class="type">sbt.ControlEvent.Value</span><a href="#54805">event</a></span>, <span class="typed"><span class="type">String</span><a href="#54806">firstSeparator</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot; &quot;)</span><span class="string">&quot; &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">java.lang.String</span><a href="#54801">label</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot; &quot;)</span><span class="string">&quot; &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">String</span><a href="#54807">secondSeparator</a></span>))
		<span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span>(<span class="typed"><span class="type">=&gt; Boolean</span><a href="#54509">parallel</a></span>)
		{
			<span class="keyword">try</span> { <span class="typed"><span class="type">(sbt.ControlEvent.Value,String,String)Unit</span><a href="#54802">banner</a></span>(<span class="typed"><span class="type">object sbt.ControlEvent</span><a href="../Logger.scala.html#6764">ControlEvent</a></span>.<span class="typed"><span class="type">=&gt; sbt.ControlEvent.Value</span><a href="../Logger.scala.html#54816">Start</a></span>, <span class="typed"><span class="type">java.lang.String(&quot;\012  &quot;)</span><span class="string">&quot;\n  &quot;</span></span>, <span class="typed"><span class="type">java.lang.String(&quot;...&quot;)</span><span class="string">&quot;...&quot;</span></span>) }
			<span class="keyword">finally</span> { <span class="typed"><span class="type">(sbt.impl.RunTask.Task)Unit</span><a href="#54518">flush</a></span>(<span class="typed"><span class="type">sbt.impl.RunTask.Task</span><a href="#54774">action</a></span>) }
		}
		<span class="typed"><span class="type">(sbt.ControlEvent.Value,String,String)Unit</span><a href="#54802">banner</a></span>(<span class="typed"><span class="type">object sbt.ControlEvent</span><a href="../Logger.scala.html#6764">ControlEvent</a></span>.<span class="typed"><span class="type">=&gt; sbt.ControlEvent.Value</span><a href="../Logger.scala.html#54818">Header</a></span>, <span class="typed"><span class="type">java.lang.String(&quot;\012==&quot;)</span><span class="string">&quot;\n==&quot;</span></span>, <span class="typed"><span class="type">java.lang.String(&quot;==&quot;)</span><span class="string">&quot;==&quot;</span></span>)
		<span class="keyword">try</span> { <span class="typed"><span class="type">sbt.impl.RunTask.Task</span><a href="#54774">action</a></span>.<span class="typed"><span class="type">=&gt; Option[String]</span><a href="../TaskManager.scala.html#29386">invoke</a></span> }
		<span class="keyword">catch</span> { <span class="typed"><span class="type">Some[java.lang.String]</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Exception</span><a id="54827">e</a></span>: <span class="typed"><span class="type">Exception</span><a id="2112">Exception</a></span> =&gt; <span class="typed"><span class="type">sbt.impl.RunTask.Task</span><a href="#54774">action</a></span>.<span class="typed"><span class="type">=&gt; sbt.Project#ManagerType</span><a href="../TaskManager.scala.html#29382">manager</a></span>.<span class="typed"><span class="type">=&gt; sbt.Logger</span><a href="../Project.scala.html#25084">log</a></span>.<span class="typed"><span class="type">(=&gt; Throwable)Unit</span><a href="../Logger.scala.html#8465">trace</a></span>(<span class="typed"><span class="type">Exception</span><a href="#54827">e</a></span>); <span class="typed"><span class="type">(java.lang.String)Some[java.lang.String]</span><span id="10375"><a id="289">Some</a></span></span>(<span class="typed"><span class="type">Exception</span><a href="#54827">e</a></span>.<span class="typed"><span class="type">()java.lang.String</span><a id="9387">toString</a></span>) }
		<span class="keyword">finally</span>
		{
			<span class="typed"><span class="type">(sbt.ControlEvent.Value,String,String)Unit</span><a href="#54802">banner</a></span>(<span class="typed"><span class="type">object sbt.ControlEvent</span><a href="../Logger.scala.html#6764">ControlEvent</a></span>.<span class="typed"><span class="type">=&gt; sbt.ControlEvent.Value</span><a href="../Logger.scala.html#54820">Finish</a></span>, <span class="typed"><span class="type">java.lang.String(&quot;==&quot;)</span><span class="string">&quot;==&quot;</span></span>, <span class="typed"><span class="type">java.lang.String(&quot;==&quot;)</span><span class="string">&quot;==&quot;</span></span>)
			<span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span>(<span class="typed"><span class="type">=&gt; Boolean</span><a href="#54509">parallel</a></span>)
				<span class="typed"><span class="type">(sbt.impl.RunTask.Task)Unit</span><a href="#54518">flush</a></span>(<span class="typed"><span class="type">sbt.impl.RunTask.Task</span><a href="#54774">action</a></span>)
		}
	}
	<span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(=&gt; Unit)(=&gt; Unit)Unit</span><a id="54517">trapFinally</a></span>(<span class="typed"><span class="type">=&gt; Unit</span><a id="54834">toTrap</a></span>: =&gt; Unit)(<span class="typed"><span class="type">=&gt; Unit</span><a id="54835">runFinally</a></span>: =&gt; Unit)
	{
		<span class="keyword">try</span> { <span class="typed"><span class="type">=&gt; Unit</span><a href="#54834">toTrap</a></span> }
		<span class="keyword">catch</span> { <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Exception</span><a id="54836">e</a></span>: <span class="typed"><span class="type">Exception</span><a id="2112">Exception</a></span> =&gt; <span class="typed"><span class="type">Unit</span><span >(</span></span>) }
		<span class="keyword">finally</span> { <span class="keyword">try</span> { <span class="typed"><span class="type">=&gt; Unit</span><a href="#54835">runFinally</a></span> } <span class="keyword">catch</span> { <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Exception</span><a id="54837">e</a></span>: <span class="typed"><span class="type">Exception</span><a id="2112">Exception</a></span> =&gt; <span class="typed"><span class="type">Unit</span><span >(</span></span>) } }
	}
	<span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(sbt.impl.RunTask.Task)Unit</span><a id="54518">flush</a></span>(<span class="typed"><span class="type">sbt.impl.RunTask.Task</span><a id="54825">action</a></span>: <span class="typed"><span class="type">sbt.impl.RunTask.Task</span><a href="../TaskManager.scala.html#25081">Task</a></span>)
	{
		<span class="keyword">for</span>(<span class="typed"><span class="type">((sbt.BufferedLogger) =&gt; Unit)Unit</span><span id="10271"><a id="54841">buffered</a></span></span> &lt;- <span class="typed"><span class="type">(sbt.Project)Option[sbt.BufferedLogger]</span><a href="#54548">bufferedLogger</a></span>(<span class="typed"><span class="type">sbt.impl.RunTask.Task</span><a href="#54825">action</a></span>.<span class="typed"><span class="type">=&gt; sbt.Project#ManagerType</span><a href="../TaskManager.scala.html#29382">manager</a></span>))
			<span class="typed"><span class="type">object sbt.Control</span><a href="../Control.scala.html#6704">Control</a></span>.<span class="typed"><span class="type">(=&gt; Unit)Unit</span><a href="../Control.scala.html#10300">trap</a></span>(<span class="typed"><span class="type">(sbt.BufferedLogger)Unit</span><a href="#54519">flush</a></span>(<span class="typed"><span class="type">sbt.BufferedLogger</span><a href="#54841">buffered</a></span>))
	}
	<span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(sbt.BufferedLogger)Unit</span><a id="54519">flush</a></span>(<span class="typed"><span class="type">sbt.BufferedLogger</span><a id="54824">buffered</a></span>: <span class="typed"><span class="type">sbt.BufferedLogger</span><a href="../Logger.scala.html#6770">BufferedLogger</a></span>)
	{
		<span class="typed"><span class="type">sbt.BufferedLogger</span><a href="#54824">buffered</a></span>.<span class="typed"><span class="type">()Unit</span><a href="../Logger.scala.html#47003">play</a></span>()
		<span class="typed"><span class="type">sbt.BufferedLogger</span><a href="#54824">buffered</a></span>.<span class="typed"><span class="type">()Unit</span><a href="../Logger.scala.html#47005">clear</a></span>()
	}

	<span class="comment">/* Most of the following is for implicitly adding dependencies (see the expand method)*/</span>
	<span class="keyword">private</span> <span class="keyword">val</span> <span class="typed"><span class="type">scala.collection.jcl.IdentityHashMap[sbt.Project,Iterable[sbt.Project]]</span><span id="54521"><a id="54520">projectDependencyCache</a></span></span> = <span class="typed"><span class="type">()scala.collection.jcl.IdentityHashMap[sbt.Project,Iterable[sbt.Project]]</span><a id="54561" class="keyword">new</a></span> <span class="typed"><span class="type">scala.collection.jcl.IdentityHashMap[sbt.Project,Iterable[sbt.Project]]</span><a id="7916">IdentityHashMap</a></span>[Project, Iterable[Project]]
	<span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(sbt.Project)Iterable[sbt.Project]</span><a id="54522">dependencies</a></span>(<span class="typed"><span class="type">sbt.Project</span><a id="54845">project</a></span>: <span class="typed"><span class="type">sbt.Project</span><a href="../Project.scala.html#6494">Project</a></span>) = <span class="typed"><span class="type">=&gt; scala.collection.jcl.IdentityHashMap[sbt.Project,Iterable[sbt.Project]]</span><a href="#54520">projectDependencyCache</a></span>.<span class="typed"><span class="type">(sbt.Project,=&gt; Iterable[sbt.Project])Iterable[sbt.Project]</span><a id="21411">getOrElseUpdate</a></span>(<span class="typed"><span class="type">sbt.Project</span><a href="#54845">project</a></span>, <span class="typed"><span class="type">sbt.Project</span><a href="#54845">project</a></span>.<span class="typed"><span class="type">=&gt; List[sbt.Project]</span><a href="../Dag.scala.html#25364">topologicalSort</a></span>.<span class="typed"><span class="type">(Int)List[sbt.Project]</span><a id="6928">dropRight</a></span>(<span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>))

	<span class="keyword">private</span> <span class="keyword">val</span> <span class="typed"><span class="type">scala.collection.jcl.IdentityHashMap[sbt.impl.RunTask.Task,sbt.impl.RunTask.Task]</span><span id="54524"><a id="54523">expandedCache</a></span></span> = <span class="typed"><span class="type">()scala.collection.jcl.IdentityHashMap[sbt.impl.RunTask.Task,sbt.impl.RunTask.Task]</span><a id="54561" class="keyword">new</a></span> <span class="typed"><span class="type">scala.collection.jcl.IdentityHashMap[sbt.impl.RunTask.Task,sbt.impl.RunTask.Task]</span><a id="7916">IdentityHashMap</a></span>[Task, Task]
	<span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(sbt.impl.RunTask.Task)sbt.impl.RunTask.Task</span><a id="54525">expanded</a></span>(<span class="typed"><span class="type">sbt.impl.RunTask.Task</span><a id="54847">task</a></span>: <span class="typed"><span class="type">sbt.impl.RunTask.Task</span><a href="../TaskManager.scala.html#25081">Task</a></span>): <span class="typed"><span class="type">sbt.impl.RunTask.Task</span><a href="../TaskManager.scala.html#25081">Task</a></span> = <span class="typed"><span class="type">=&gt; scala.collection.jcl.IdentityHashMap[sbt.impl.RunTask.Task,sbt.impl.RunTask.Task]</span><a href="#54523">expandedCache</a></span>.<span class="typed"><span class="type">(sbt.impl.RunTask.Task,=&gt; sbt.impl.RunTask.Task)sbt.impl.RunTask.Task</span><a id="21411">getOrElseUpdate</a></span>(<span class="typed"><span class="type">sbt.impl.RunTask.Task</span><a href="#54847">task</a></span>, <span class="typed"><span class="type">(sbt.impl.RunTask.Task)sbt.impl.RunTask.Task</span><a href="#54545">expandImpl</a></span>(<span class="typed"><span class="type">sbt.impl.RunTask.Task</span><a href="#54847">task</a></span>))

	<span class="keyword">private</span> <span class="keyword">val</span> <span class="typed"><span class="type">scala.collection.jcl.IdentityHashMap[sbt.impl.RunTask.Task,String]</span><span id="54527"><a id="54526">expandedTaskNameCache</a></span></span> = <span class="typed"><span class="type">()scala.collection.jcl.IdentityHashMap[sbt.impl.RunTask.Task,String]</span><a id="54561" class="keyword">new</a></span> <span class="typed"><span class="type">scala.collection.jcl.IdentityHashMap[sbt.impl.RunTask.Task,String]</span><a id="7916">IdentityHashMap</a></span>[Task, String]
	<span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(sbt.impl.RunTask.Task)String</span><a id="54528">expandedTaskName</a></span>(<span class="typed"><span class="type">sbt.impl.RunTask.Task</span><a id="54753">task</a></span>: <span class="typed"><span class="type">sbt.impl.RunTask.Task</span><a href="../TaskManager.scala.html#25081">Task</a></span>) =
		<span class="typed"><span class="type">String</span><span class="keyword">if</span></span>(<span class="typed"><span class="type">sbt.impl.RunTask.Task</span><a href="#54753">task</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3490">==</a></span> <span class="typed"><span class="type">=&gt; sbt.impl.RunTask.Task</span><a href="#54536">expandedRoot</a></span>)
			<span class="typed"><span class="type">String</span><a href="#54506">rootName</a></span>
		<span class="keyword">else</span>
			<span class="typed"><span class="type">=&gt; scala.collection.jcl.IdentityHashMap[sbt.impl.RunTask.Task,String]</span><a href="#54526">expandedTaskNameCache</a></span>.<span class="typed"><span class="type">(sbt.impl.RunTask.Task,=&gt; String)String</span><a id="21439">getOrElse</a></span>(<span class="typed"><span class="type">sbt.impl.RunTask.Task</span><a href="#54753">task</a></span>, <span class="typed"><span class="type">=&gt; java.lang.String</span><a href="#47352">UnnamedName</a></span>)

	<span class="keyword">private</span> <span class="keyword">val</span> <span class="typed"><span class="type">scala.collection.jcl.IdentityHashMap[sbt.Project,scala.collection.Map[String,sbt.impl.RunTask.Task]]</span><span id="54530"><a id="54529">nameToTaskCache</a></span></span> = <span class="typed"><span class="type">()scala.collection.jcl.IdentityHashMap[sbt.Project,scala.collection.Map[String,sbt.impl.RunTask.Task]]</span><a id="54561" class="keyword">new</a></span> <span class="typed"><span class="type">scala.collection.jcl.IdentityHashMap[sbt.Project,scala.collection.Map[String,sbt.impl.RunTask.Task]]</span><a id="7916">IdentityHashMap</a></span>[Project, Map[String, Task]]
	<span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(sbt.Project)scala.collection.Map[String,sbt.impl.RunTask.Task]</span><a id="54531">nameToTaskMap</a></span>(<span class="typed"><span class="type">sbt.Project</span><a id="54849">project</a></span>: <span class="typed"><span class="type">sbt.Project</span><a href="../Project.scala.html#6494">Project</a></span>): <span class="typed"><span class="type">scala.collection.Map[String,sbt.impl.RunTask.Task]</span><a id="7472">Map</a></span>[String, Task] = <span class="typed"><span class="type">=&gt; scala.collection.jcl.IdentityHashMap[sbt.Project,scala.collection.Map[String,sbt.impl.RunTask.Task]]</span><a href="#54529">nameToTaskCache</a></span>.<span class="typed"><span class="type">(sbt.Project,=&gt; scala.collection.Map[String,sbt.impl.RunTask.Task])scala.collection.Map[String,sbt.impl.RunTask.Task]</span><a id="21411">getOrElseUpdate</a></span>(<span class="typed"><span class="type">sbt.Project</span><a href="#54849">project</a></span>, <span class="typed"><span class="type">sbt.Project</span><a href="#54849">project</a></span>.<span class="typed"><span class="type">=&gt; scala.collection.Map[String,project.Task]</span><a href="../Project.scala.html#25094">tasks</a></span>)
	<span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(sbt.Project,String)Option[sbt.impl.RunTask.Task]</span><a id="54532">taskForName</a></span>(<span class="typed"><span class="type">sbt.Project</span><a id="54850">project</a></span>: <span class="typed"><span class="type">sbt.Project</span><a href="../Project.scala.html#6494">Project</a></span>, <span class="typed"><span class="type">String</span><a id="54851">name</a></span>: <span class="typed"><span class="type">String</span><a id="1842">String</a></span>): <span class="typed"><span class="type">Option[sbt.impl.RunTask.Task]</span><a id="915">Option</a></span>[Task] = <span class="typed"><span class="type">(sbt.Project)scala.collection.Map[String,sbt.impl.RunTask.Task]</span><a href="#54531">nameToTaskMap</a></span>(<span class="typed"><span class="type">sbt.Project</span><a href="#54850">project</a></span>).<span class="typed"><span class="type">(String)Option[sbt.impl.RunTask.Task]</span><a id="21438">get</a></span>(<span class="typed"><span class="type">String</span><a href="#54851">name</a></span>)
	
	<span class="keyword">private</span> <span class="keyword">val</span> <span class="typed"><span class="type">scala.collection.jcl.IdentityHashMap[sbt.Project,scala.collection.Map[sbt.impl.RunTask.Task,String]]</span><span id="54534"><a id="54533">taskNameCache</a></span></span> = <span class="typed"><span class="type">()scala.collection.jcl.IdentityHashMap[sbt.Project,scala.collection.Map[sbt.impl.RunTask.Task,String]]</span><a id="54561" class="keyword">new</a></span> <span class="typed"><span class="type">scala.collection.jcl.IdentityHashMap[sbt.Project,scala.collection.Map[sbt.impl.RunTask.Task,String]]</span><a id="7916">IdentityHashMap</a></span>[Project, Map[Task, String]]
	<span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(sbt.impl.RunTask.Task)Option[String]</span><a id="54535">taskName</a></span>(<span class="typed"><span class="type">sbt.impl.RunTask.Task</span><a id="54852">task</a></span>: <span class="typed"><span class="type">sbt.impl.RunTask.Task</span><a href="../TaskManager.scala.html#25081">Task</a></span>) =
	{
		<span class="keyword">val</span> <span class="typed"><span class="type">sbt.Project#ManagerType</span><a id="54854">project</a></span> = <span class="typed"><span class="type">sbt.impl.RunTask.Task</span><a href="#54852">task</a></span>.<span class="typed"><span class="type">=&gt; sbt.Project#ManagerType</span><a href="../TaskManager.scala.html#29382">manager</a></span>
		<span class="typed"><span class="type">=&gt; scala.collection.jcl.IdentityHashMap[sbt.Project,scala.collection.Map[sbt.impl.RunTask.Task,String]]</span><a href="#54533">taskNameCache</a></span>.<span class="typed"><span class="type">(sbt.Project,=&gt; scala.collection.Map[sbt.impl.RunTask.Task,String])scala.collection.Map[sbt.impl.RunTask.Task,String]</span><a id="21411">getOrElseUpdate</a></span>(<span class="typed"><span class="type">sbt.Project#ManagerType</span><a href="#54854">project</a></span>, <span class="typed"><span class="type">(sbt.Project)scala.collection.mutable.Map[sbt.impl.RunTask.Task,String]</span><a href="#54547">taskNameMap</a></span>(<span class="typed"><span class="type">sbt.Project#ManagerType</span><a href="#54854">project</a></span>)).<span class="typed"><span class="type">(sbt.impl.RunTask.Task)Option[String]</span><a id="21438">get</a></span>(<span class="typed"><span class="type">sbt.impl.RunTask.Task</span><a href="#54852">task</a></span>)
	}
	
	<span class="keyword">private</span> <span class="keyword">val</span> <span class="typed"><span class="type">sbt.impl.RunTask.Task</span><span id="54537"><a id="54536">expandedRoot</a></span></span> = <span class="typed"><span class="type">(sbt.impl.RunTask.Task)sbt.impl.RunTask.Task</span><a href="#54544">expand</a></span>(<span class="typed"><span class="type">sbt.impl.RunTask.Task</span><a href="#54505">root</a></span>)
	<span class="keyword">private</span> <span class="keyword">val</span> <span class="typed"><span class="type">List[sbt.Project#ManagedTask]</span><span id="54539"><a id="54538">allTasks</a></span></span> = <span class="typed"><span class="type">=&gt; sbt.impl.RunTask.Task</span><a href="#54536">expandedRoot</a></span>.<span class="typed"><span class="type">=&gt; List[sbt.Project#ManagedTask]</span><a href="../Dag.scala.html#25364">topologicalSort</a></span>
	<span class="keyword">private</span> <span class="keyword">val</span> <span class="typed"><span class="type">scala.collection.immutable.Set[sbt.Project#ManagerType]</span><span id="54541"><a id="54540">allProjects</a></span></span> = <span class="typed"><span class="type">(sbt.Project#ManagerType*)scala.collection.immutable.Set[sbt.Project#ManagerType]</span><span id="27714"><span id="5962"><a id="802">Set</a></span></span></span>(<span class="typed"><span class="type">=&gt; List[sbt.Project#ManagedTask]</span><a href="#54538">allTasks</a></span>.<span class="typed"><span class="type">((sbt.Project#ManagedTask) =&gt; sbt.Project#ManagerType)List[sbt.Project#ManagerType]</span><a id="6935">map</a></span>(<span class="typed"><span class="type">sbt.Project#ManagedTask</span><a href="#54714">_</a></span>.<span class="typed"><span class="type">=&gt; sbt.Project#ManagerType</span><a href="../TaskManager.scala.html#29382">manager</a></span>).<span class="typed"><span class="type">=&gt; Seq[sbt.Project#ManagerType]</span><a id="7250">toSeq</a></span> : _*)
	<span class="keyword">private</span> <span class="keyword">val</span> <span class="typed"><span class="type">List[sbt.BufferedLogger]</span><span id="54543"><a id="54542">bufferedLoggers</a></span></span> = <span class="typed"><span class="type">List[sbt.BufferedLogger]</span><span class="keyword">if</span></span>(<span class="typed"><span class="type">=&gt; Boolean</span><a href="#54509">parallel</a></span>) <span class="typed"><span class="type">=&gt; scala.collection.immutable.Set[sbt.Project#ManagerType]</span><a href="#54540">allProjects</a></span>.<span class="typed"><span class="type">=&gt; List[sbt.Project#ManagerType]</span><a id="7388">toList</a></span>.<span class="typed"><span class="type">((sbt.Project#ManagerType) =&gt; Iterable[sbt.BufferedLogger])List[sbt.BufferedLogger]</span><a id="6956">flatMap</a></span>(<span class="typed"><span class="type">(Option[sbt.BufferedLogger])Iterable[sbt.BufferedLogger]</span><span id="10255"><a href="#54548" id="916">bufferedLogger</a></span></span>) <span class="keyword">else</span> <span class="typed"><span class="type">object Nil</span><a id="316">Nil</a></span>
	
	<span class="comment">/** Adds implicit dependencies, which are tasks with the same name in the project dependencies
	* of the enclosing project of the task.*/</span>
	<span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(sbt.impl.RunTask.Task)sbt.impl.RunTask.Task</span><a id="54544">expand</a></span>(<span class="typed"><span class="type">sbt.impl.RunTask.Task</span><a id="54706">root</a></span>: <span class="typed"><span class="type">sbt.impl.RunTask.Task</span><a href="../TaskManager.scala.html#25081">Task</a></span>): <span class="typed"><span class="type">sbt.impl.RunTask.Task</span><a href="../TaskManager.scala.html#25081">Task</a></span> = <span class="typed"><span class="type">(sbt.impl.RunTask.Task)sbt.impl.RunTask.Task</span><a href="#54525">expanded</a></span>(<span class="typed"><span class="type">sbt.impl.RunTask.Task</span><a href="#54706">root</a></span>)
	<span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(sbt.impl.RunTask.Task)sbt.impl.RunTask.Task</span><a id="54545">expandImpl</a></span>(<span class="typed"><span class="type">sbt.impl.RunTask.Task</span><a id="54848">task</a></span>: <span class="typed"><span class="type">sbt.impl.RunTask.Task</span><a href="../TaskManager.scala.html#25081">Task</a></span>): <span class="typed"><span class="type">sbt.impl.RunTask.Task</span><a href="../TaskManager.scala.html#25081">Task</a></span> =
	{
		<span class="keyword">val</span> <span class="typed"><span class="type">Option[String]</span><a id="54864">nameOption</a></span> = <span class="typed"><span class="type">(sbt.impl.RunTask.Task)Option[String]</span><a href="#54535">taskName</a></span>(<span class="typed"><span class="type">sbt.impl.RunTask.Task</span><a href="#54848">task</a></span>)
		<span class="keyword">val</span> <span class="typed"><span class="type">List[sbt.Project#ManagedTask]</span><a id="54865">explicitDependencies</a></span> = <span class="typed"><span class="type">sbt.impl.RunTask.Task</span><a href="#54848">task</a></span>.<span class="typed"><span class="type">=&gt; List[sbt.Project#ManagedTask]</span><a href="../TaskManager.scala.html#29376">dependencies</a></span>
		<span class="keyword">val</span> <span class="typed"><span class="type">Iterable[sbt.impl.RunTask.Task]</span><a id="54866">implicitDependencies</a></span> = <span class="typed"><span class="type">Option[String]</span><a href="#54864">nameOption</a></span>.<span class="typed"><span class="type">((String) =&gt; Iterable[sbt.impl.RunTask.Task])Option[Iterable[sbt.impl.RunTask.Task]]</span><a id="10266">map</a></span>(<span class="typed"><span class="type">String</span><a id="54879">name</a></span> =&gt; <span class="typed"><span class="type">(sbt.Project)Iterable[sbt.Project]</span><a href="#54522">dependencies</a></span>(<span class="typed"><span class="type">sbt.impl.RunTask.Task</span><a href="#54848">task</a></span>.<span class="typed"><span class="type">=&gt; sbt.Project#ManagerType</span><a href="../TaskManager.scala.html#29382">manager</a></span>).<span class="typed"><span class="type">((sbt.Project) =&gt; Iterable[sbt.impl.RunTask.Task])Iterable[sbt.impl.RunTask.Task]</span><a id="7357">flatMap</a></span>(<span class="typed"><span class="type">(Option[sbt.impl.RunTask.Task])Iterable[sbt.impl.RunTask.Task]</span><span id="10255"><a href="#54546" id="916">noninteractiveTask</a></span></span>(<span class="typed"><span class="type">String</span><a href="#54879">name</a></span>)) ).<span class="typed"><span class="type">(=&gt; Iterable[sbt.impl.RunTask.Task])Iterable[sbt.impl.RunTask.Task]</span><a id="10264">getOrElse</a></span>(<span class="typed"><span class="type">object Nil</span><a id="316">Nil</a></span>)
		<span class="keyword">val</span> <span class="typed"><span class="type">scala.collection.mutable.Set[sbt.Project#ManagedTask]</span><a id="54867">allDependencies</a></span> = mutable.<span class="typed"><span class="type">(sbt.Project#ManagedTask*)scala.collection.mutable.Set[sbt.Project#ManagedTask]</span><span id="22731"><a id="8019">HashSet</a></span></span>( (<span class="typed"><span class="type">List[sbt.Project#ManagedTask]</span><a href="#54865">explicitDependencies</a></span> <span class="typed"><span class="type">(Iterable[sbt.Project#ManagedTask])List[sbt.Project#ManagedTask]</span><a id="6914">++</a></span> <span class="typed"><span class="type">Iterable[sbt.impl.RunTask.Task]</span><a href="#54866">implicitDependencies</a></span>).<span class="typed"><span class="type">=&gt; Seq[sbt.Project#ManagedTask]</span><a id="7250">toSeq</a></span>  : _* )
		<span class="keyword">val</span> <span class="typed"><span class="type">sbt.Project#Task</span><a id="54868">expandedTask</a></span> = <span class="typed"><span class="type">sbt.impl.RunTask.Task</span><a href="#54848">task</a></span>.<span class="typed"><span class="type">((List[_76.ManagedTask])_76.Task) forSome { val _76: sbt.Project }</span><a href="../TaskManager.scala.html#29384">setDependencies</a></span>(<span class="typed"><span class="type">scala.collection.mutable.Set[sbt.Project#ManagedTask]</span><a href="#54867">allDependencies</a></span>.<span class="typed"><span class="type">=&gt; List[sbt.Project#ManagedTask]</span><a id="7388">toList</a></span>.<span class="typed"><span class="type">((sbt.Project#ManagedTask) =&gt; sbt.impl.RunTask.Task)List[sbt.impl.RunTask.Task]</span><a id="6935">map</a></span>(<span class="typed"><span class="type">(sbt.impl.RunTask.Task)sbt.impl.RunTask.Task</span><a href="#54525">expanded</a></span>))
		<span class="typed"><span class="type">Option[String]</span><a href="#54864">nameOption</a></span>.<span class="typed"><span class="type">((String) =&gt; Unit)Unit</span><a id="10271">foreach</a></span>(<span class="typed"><span class="type">String</span><a id="54911">name</a></span> =&gt; <span class="typed"><span class="type">=&gt; scala.collection.jcl.IdentityHashMap[sbt.impl.RunTask.Task,String]</span><a href="#54526">expandedTaskNameCache</a></span>(<span class="typed"><span class="type">sbt.Project#Task</span><a href="#54868">expandedTask</a></span>) = <span class="typed"><span class="type">String</span><a href="#54911">name</a></span>)
		<span class="typed"><span class="type">sbt.Project#Task</span><a href="#54868">expandedTask</a></span>
	}
	<span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(String)(sbt.Project)Option[sbt.impl.RunTask.Task]</span><a id="54546">noninteractiveTask</a></span>(<span class="typed"><span class="type">String</span><a id="54883">name</a></span>: <span class="typed"><span class="type">String</span><a id="1842">String</a></span>)(<span class="typed"><span class="type">sbt.Project</span><a id="54884">project</a></span>: <span class="typed"><span class="type">sbt.Project</span><a href="../Project.scala.html#6494">Project</a></span>): <span class="typed"><span class="type">Option[sbt.impl.RunTask.Task]</span><a id="915">Option</a></span>[Task] =
		<span class="typed"><span class="type">(sbt.Project,String)Option[sbt.impl.RunTask.Task]</span><a href="#54532">taskForName</a></span>(<span class="typed"><span class="type">sbt.Project</span><a href="#54884">project</a></span>, <span class="typed"><span class="type">String</span><a href="#54883">name</a></span>) <span class="typed"><span class="type">((sbt.impl.RunTask.Task) =&gt; Option[sbt.impl.RunTask.Task])Option[sbt.impl.RunTask.Task]</span><a id="10268">flatMap</a></span> { <span class="typed"><span class="type">sbt.impl.RunTask.Task</span><a id="54914">task</a></span> =&gt;
			<span class="typed"><span class="type">Option[sbt.impl.RunTask.Task]</span><span class="keyword">if</span></span>(<span class="typed"><span class="type">sbt.impl.RunTask.Task</span><a href="#54914">task</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../TaskManager.scala.html#29378">interactive</a></span>)
			{
				<span class="typed"><span class="type">sbt.Project</span><a href="#54884">project</a></span>.<span class="typed"><span class="type">=&gt; sbt.Logger</span><a href="../Project.scala.html#25084">log</a></span>.<span class="typed"><span class="type">(=&gt; String)Unit</span><a href="../Logger.scala.html#8466">debug</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;Not including task &quot;)</span><span class="string">&quot;Not including task &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">String</span><a href="#54883">name</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot; in project &quot;)</span><span class="string">&quot; in project &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">sbt.Project</span><a href="#54884">project</a></span>.<span class="typed"><span class="type">=&gt; String</span><a href="../Project.scala.html#25089">name</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;: interactive tasks can only be run directly.&quot;)</span><span class="string">&quot;: interactive tasks can only be run directly.&quot;</span></span>)
				<span class="typed"><span class="type">object None</span><a id="517">None</a></span>
			}
			<span class="keyword">else</span>
				<span class="typed"><span class="type">(sbt.impl.RunTask.Task)Some[sbt.impl.RunTask.Task]</span><span id="10375"><a id="289">Some</a></span></span>(<span class="typed"><span class="type">sbt.impl.RunTask.Task</span><a href="#54914">task</a></span>)
		}
	<span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(sbt.Project)scala.collection.mutable.Map[sbt.impl.RunTask.Task,String]</span><a id="54547">taskNameMap</a></span>(<span class="typed"><span class="type">sbt.Project</span><a id="54857">project</a></span>: <span class="typed"><span class="type">sbt.Project</span><a href="../Project.scala.html#6494">Project</a></span>) = mutable.<span class="typed"><span class="type">((sbt.impl.RunTask.Task, String)*)scala.collection.mutable.Map[sbt.impl.RunTask.Task,String]</span><span id="21427"><a id="8004">Map</a></span></span>(<span class="typed"><span class="type">(sbt.Project)scala.collection.Map[String,sbt.impl.RunTask.Task]</span><a href="#54531">nameToTaskMap</a></span>(<span class="typed"><span class="type">sbt.Project</span><a href="#54857">project</a></span>).<span class="typed"><span class="type">(((String, sbt.impl.RunTask.Task)) =&gt; (sbt.impl.RunTask.Task, String))Iterable[(sbt.impl.RunTask.Task, String)]</span><a id="7355">map</a></span>(<span class="typed"><span class="type">(String, sbt.impl.RunTask.Task)</span><a href="#54863">_</a></span>.<span class="typed"><span class="type">=&gt; (sbt.impl.RunTask.Task, String)</span><a id="9357">swap</a></span>).<span class="typed"><span class="type">=&gt; Seq[(sbt.impl.RunTask.Task, String)]</span><a id="7389">toSeq</a></span> : _*)
	<span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(sbt.Project)Option[sbt.BufferedLogger]</span><a id="54548">bufferedLogger</a></span>(<span class="typed"><span class="type">sbt.Project</span><a id="54723">project</a></span>: <span class="typed"><span class="type">sbt.Project</span><a href="../Project.scala.html#6494">Project</a></span>): <span class="typed"><span class="type">Option[sbt.BufferedLogger]</span><a id="915">Option</a></span>[BufferedLogger] =
		<span class="typed"><span class="type">sbt.Project</span><a href="#54723">project</a></span>.<span class="typed"><span class="type">=&gt; sbt.Logger</span><a href="../Project.scala.html#25084">log</a></span> <span class="typed"><span class="type">Option[sbt.BufferedLogger]</span><span class="keyword">match</span></span>
		{
			<span class="typed"><span class="type">Some[sbt.BufferedLogger]</span><span class="keyword">case</span></span> <span class="typed"><span class="type">sbt.BufferedLogger</span><a id="54916">buffered</a></span>: <span class="typed"><span class="type">sbt.BufferedLogger</span><a href="../Logger.scala.html#6770">BufferedLogger</a></span> =&gt; <span class="typed"><span class="type">(sbt.BufferedLogger)Some[sbt.BufferedLogger]</span><span id="10375"><a id="289">Some</a></span></span>(<span class="typed"><span class="type">sbt.BufferedLogger</span><a href="#54916">buffered</a></span>)
			<span class="typed"><span class="type">None.type</span><span class="keyword">case</span></span> _ =&gt; <span class="typed"><span class="type">object None</span><a id="517">None</a></span>
		}
}
        </pre>
    </body>
</html>