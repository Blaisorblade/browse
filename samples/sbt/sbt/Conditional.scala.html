<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>sbt/Conditional.scala</title>
        <script type="text/javascript" src="../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../style.css" title="Style">
    </head>
    <body onload="initializeLinked()">
        <pre>
<span class="comment">/* sbt -- Simple Build Tool
 * Copyright 2008, 2009 Mark Harrah
 */</span>
<span class="keyword">package</span> sbt

<span class="keyword">trait</span> <span class="typed"><span class="type">trait Conditional[Source, Product, External] extends java.lang.Object with NotNull with ScalaObject</span><a id="6346">Conditional</a></span>[<span class="typed"><span class="type">&gt;: Nothing &lt;: Any</span><a id="6347">Source</a></span>, <span class="typed"><span class="type">&gt;: Nothing &lt;: Any</span><a id="6348">Product</a></span>, <span class="typed"><span class="type">&gt;: Nothing &lt;: Any</span><a id="6349">External</a></span>] <span class="keyword">extends</span> <span class="typed"><span class="type">NotNull</span><a id="186">NotNull</a></span>
{
	<span class="keyword">type</span> <span class="typed"><span class="type">&gt;: Nothing &lt;: sbt.TaskAnalysis[Source,Product,External]</span><a id="33381">AnalysisType</a></span> &lt;: TaskAnalysis[Source, Product, External]
	<span class="keyword">val</span> <span class="typed"><span class="type">Conditional.this.AnalysisType</span><span id="33383"><a id="33382">analysis</a></span></span>: <span class="typed"><span class="type">Conditional.this.AnalysisType</span><a href="#33381">AnalysisType</a></span> = <span class="typed"><span class="type">=&gt; Conditional.this.AnalysisType</span><a href="#33384">loadAnalysis</a></span>
	
	<span class="keyword">protected</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Conditional.this.AnalysisType</span><a id="33384">loadAnalysis</a></span>: <span class="typed"><span class="type">Conditional.this.AnalysisType</span><a href="#33381">AnalysisType</a></span>
	<span class="keyword">protected</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; sbt.Logger</span><a id="33385">log</a></span>: <span class="typed"><span class="type">sbt.Logger</span><a href="Logger.scala.html#6766">Logger</a></span>

	<span class="keyword">protected</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; String</span><a id="33386">productType</a></span>: <span class="typed"><span class="type">String</span><a id="1842">String</a></span>
	<span class="keyword">protected</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; String</span><a id="33387">productTypePlural</a></span>: <span class="typed"><span class="type">String</span><a id="1842">String</a></span>
	
	<span class="keyword">protected</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Iterable[Source]</span><a id="33388">sourcesToProcess</a></span>: <span class="typed"><span class="type">Iterable[Source]</span><a id="384">Iterable</a></span>[Source]
	
	<span class="keyword">protected</span> <span class="keyword">def</span> <span class="typed"><span class="type">(Source)Boolean</span><a id="33389">sourceExists</a></span>(<span class="typed"><span class="type">Source</span><a id="34184">source</a></span>: <span class="typed"><span class="type">Source</span><a href="#6347">Source</a></span>): <span class="typed"><span class="type">Boolean</span><a id="2151">Boolean</a></span>
	<span class="keyword">protected</span> <span class="keyword">def</span> <span class="typed"><span class="type">(Source)Long</span><a id="33390">sourceLastModified</a></span>(<span class="typed"><span class="type">Source</span><a id="33495">source</a></span>: <span class="typed"><span class="type">Source</span><a href="#6347">Source</a></span>): <span class="typed"><span class="type">Long</span><a id="2380">Long</a></span>
	
	<span class="keyword">protected</span> <span class="keyword">def</span> <span class="typed"><span class="type">(Product)Boolean</span><a id="33391">productExists</a></span>(<span class="typed"><span class="type">Product</span><a id="33497">product</a></span>: <span class="typed"><span class="type">Product</span><a href="#6348">Product</a></span>): <span class="typed"><span class="type">Boolean</span><a id="2151">Boolean</a></span>
	<span class="keyword">protected</span> <span class="keyword">def</span> <span class="typed"><span class="type">(Product)Long</span><a id="33392">productLastModified</a></span>(<span class="typed"><span class="type">Product</span><a id="33500">product</a></span>: <span class="typed"><span class="type">Product</span><a href="#6348">Product</a></span>): <span class="typed"><span class="type">Long</span><a id="2380">Long</a></span>
	
	<span class="keyword">protected</span> <span class="keyword">def</span> <span class="typed"><span class="type">(Iterable[External])Iterable[(External, Conditional.this.ExternalInfo)]</span><a id="33393">externalInfo</a></span>(<span class="typed"><span class="type">Iterable[External]</span><a id="33510">externals</a></span>: <span class="typed"><span class="type">Iterable[External]</span><a id="384">Iterable</a></span>[External]): <span class="typed"><span class="type">Iterable[(External, Conditional.this.ExternalInfo)]</span><a id="384">Iterable</a></span>[(External, ExternalInfo)]
	
	<span class="keyword">protected</span> <span class="keyword">def</span> <span class="typed"><span class="type">(Conditional.this.ConditionalAnalysis)Option[String]</span><a id="33394">execute</a></span>(<span class="typed"><span class="type">Conditional.this.ConditionalAnalysis</span><a id="33468">cAnalysis</a></span>: <span class="typed"><span class="type">Conditional.this.ConditionalAnalysis</span><a href="#33398">ConditionalAnalysis</a></span>): <span class="typed"><span class="type">Option[String]</span><a id="915">Option</a></span>[String]
	
	<span class="keyword">final</span> <span class="keyword">case</span> <span class="keyword">class</span> <span class="typed"><span class="type">class ExternalInfo extends java.lang.Object with NotNull with ScalaObject with Product</span><span id="2731"><span id="34197"><span id="33396"><span id="33395"><span id="34196"><span id="3481"><span id="34202"><span id="34207"><span id="34192"><span id="2729"><span id="5766"><span id="3482"><span id="34209"><span id="34208"><span id="34203"><span id="34206"><span id="34190"><span id="28985"><span id="28986"><span id="1360"><span id="289"><span id="9362"><span id="29016"><span id="3245"><span id="2732"><span id="34191"><span id="10375"><span id="34193"><a id="34195">ExternalInfo</a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>(<span class="typed"><span class="type">Boolean</span><span id="33527"><span id="33526"><span id="34188"><a id="34213">available</a></span></span></span></span>: <span class="typed"><span class="type">Boolean</span><a id="2151">Boolean</a></span>, <span class="typed"><span class="type">Long</span><span id="33529"><span id="33528"><span id="34189"><a id="34214">lastModified</a></span></span></span></span>: <span class="typed"><span class="type">Long</span><a id="2380">Long</a></span>) <span class="keyword">extends</span> <span class="typed"><span class="type">NotNull</span><a id="186">NotNull</a></span>
	<span class="keyword">trait</span> <span class="typed"><span class="type">trait ConditionalAnalysis extends java.lang.Object with NotNull</span><a id="33398">ConditionalAnalysis</a></span> <span class="keyword">extends</span> <span class="typed"><span class="type">NotNull</span><a id="186">NotNull</a></span>
	{
		<span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Iterable[Source]</span><a id="33573">dirtySources</a></span>: <span class="typed"><span class="type">Iterable[Source]</span><a id="384">Iterable</a></span>[Source]
		<span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Iterable[Source]</span><a id="33574">cleanSources</a></span>: <span class="typed"><span class="type">Iterable[Source]</span><a id="384">Iterable</a></span>[Source]
		<span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Int</span><a id="33575">directlyModifiedSourcesCount</a></span>: <span class="typed"><span class="type">Int</span><a id="2375">Int</a></span>
		<span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Int</span><a id="33576">invalidatedSourcesCount</a></span>: <span class="typed"><span class="type">Int</span><a id="2375">Int</a></span>
		<span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Int</span><a id="33577">removedSourcesCount</a></span>: <span class="typed"><span class="type">Int</span><a id="2375">Int</a></span>
	}
	
	<span class="keyword">final</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Option[String]</span><a id="33399">run</a></span> =
	{
		<span class="keyword">val</span> <span class="typed"><span class="type">Option[String]</span><a id="33467">result</a></span> = <span class="typed"><span class="type">(Conditional.this.ConditionalAnalysis)Option[String]</span><a href="#33394">execute</a></span>(<span class="typed"><span class="type">=&gt; &lt;refinement&gt; extends java.lang.Object with Conditional.this.ConditionalAnalysis</span><a href="#33400">analyze</a></span>)
		<span class="typed"><span class="type">(Boolean)Unit</span><a href="#33404">processingComplete</a></span>(<span class="typed"><span class="type">Option[String]</span><a href="#33467">result</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a id="10259">isEmpty</a></span>)
		<span class="typed"><span class="type">Option[String]</span><a href="#33467">result</a></span>
	}
	<span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; &lt;refinement&gt; extends java.lang.Object with Conditional.this.ConditionalAnalysis</span><a id="33400">analyze</a></span> =
	{
		<span class="keyword">import</span> scala.collection.mutable.HashSet
		
		<span class="keyword">val</span> <span class="typed"><span class="type">Iterable[Source]</span><a id="33472">sourcesSnapshot</a></span> = <span class="typed"><span class="type">=&gt; Iterable[Source]</span><a href="#33388">sourcesToProcess</a></span>
		<span class="keyword">val</span> <span class="typed"><span class="type">scala.collection.mutable.HashSet[Source]</span><a id="33473">removedSources</a></span> = <span class="typed"><span class="type">scala.collection.mutable.HashSet[Source]</span><span class="keyword">new</span></span> <span class="typed"><span class="type">scala.collection.mutable.HashSet[Source]</span><a id="8018">HashSet</a></span>[Source]
		<span class="typed"><span class="type">scala.collection.mutable.HashSet[Source]</span><a href="#33473">removedSources</a></span> <span class="typed"><span class="type">(Iterable[Source])Unit</span><a id="22480">++=</a></span> <span class="typed"><span class="type">=&gt; Conditional.this.AnalysisType</span><a href="#33382">analysis</a></span>.<span class="typed"><span class="type">=&gt; scala.collection.Set[Source]</span><a href="Analysis.scala.html#22383">allSources</a></span>
		<span class="typed"><span class="type">scala.collection.mutable.HashSet[Source]</span><a href="#33473">removedSources</a></span> <span class="typed"><span class="type">(Iterable[Source])Unit</span><a id="22489">--=</a></span> <span class="typed"><span class="type">Iterable[Source]</span><a href="#33472">sourcesSnapshot</a></span>
		<span class="keyword">val</span> <span class="typed"><span class="type">Int</span><a id="33474">removedCount</a></span> = <span class="typed"><span class="type">scala.collection.mutable.HashSet[Source]</span><a href="#33473">removedSources</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="24687">size</a></span>
		<span class="keyword">for</span>(<span class="typed"><span class="type">((Source) =&gt; Unit)Unit</span><span id="7365"><a id="33486">removed</a></span></span> &lt;- <span class="typed"><span class="type">scala.collection.mutable.HashSet[Source]</span><a href="#33473">removedSources</a></span>)
			<span class="typed"><span class="type">=&gt; Conditional.this.AnalysisType</span><a href="#33382">analysis</a></span>.<span class="typed"><span class="type">(Source)Unit</span><a href="Analysis.scala.html#22394">removeDependent</a></span>(<span class="typed"><span class="type">Source</span><a href="#33486">removed</a></span>)
		
		<span class="keyword">val</span> <span class="typed"><span class="type">scala.collection.mutable.HashSet[Source]</span><a id="33475">unmodified</a></span> = <span class="typed"><span class="type">scala.collection.mutable.HashSet[Source]</span><span class="keyword">new</span></span> <span class="typed"><span class="type">scala.collection.mutable.HashSet[Source]</span><a id="8018">HashSet</a></span>[Source]
		<span class="keyword">val</span> <span class="typed"><span class="type">scala.collection.mutable.HashSet[Source]</span><a id="33476">modified</a></span> = <span class="typed"><span class="type">scala.collection.mutable.HashSet[Source]</span><span class="keyword">new</span></span> <span class="typed"><span class="type">scala.collection.mutable.HashSet[Source]</span><a id="8018">HashSet</a></span>[Source]
		
		<span class="keyword">for</span>(<span class="typed"><span class="type">((Source) =&gt; Unit)Unit</span><span id="7365"><a id="33488">source</a></span></span> &lt;- <span class="typed"><span class="type">Iterable[Source]</span><a href="#33472">sourcesSnapshot</a></span>)
		{
			<span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span>(<span class="typed"><span class="type">(Source)Boolean</span><a href="#33403">isSourceModified</a></span>(<span class="typed"><span class="type">Source</span><a href="#33488">source</a></span>))
			{
				<span class="typed"><span class="type">=&gt; sbt.Logger</span><a href="#33385">log</a></span>.<span class="typed"><span class="type">(=&gt; String)Unit</span><a href="Logger.scala.html#8466">debug</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;Source &quot;)</span><span class="string">&quot;Source &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">Source</span><a href="#33488">source</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot; directly modified.&quot;)</span><span class="string">&quot; directly modified.&quot;</span></span>)
				<span class="typed"><span class="type">scala.collection.mutable.HashSet[Source]</span><a href="#33476">modified</a></span> <span class="typed"><span class="type">(Source)Unit</span><a id="22726">+=</a></span> <span class="typed"><span class="type">Source</span><a href="#33488">source</a></span>
			}
			<span class="keyword">else</span>
			{
				<span class="typed"><span class="type">=&gt; sbt.Logger</span><a href="#33385">log</a></span>.<span class="typed"><span class="type">(=&gt; String)Unit</span><a href="Logger.scala.html#8466">debug</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;Source &quot;)</span><span class="string">&quot;Source &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">Source</span><a href="#33488">source</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot; unmodified.&quot;)</span><span class="string">&quot; unmodified.&quot;</span></span>)
				<span class="typed"><span class="type">scala.collection.mutable.HashSet[Source]</span><a href="#33475">unmodified</a></span> <span class="typed"><span class="type">(Source)Unit</span><a id="22726">+=</a></span> <span class="typed"><span class="type">Source</span><a href="#33488">source</a></span>
			}
		}
		<span class="keyword">val</span> <span class="typed"><span class="type">Int</span><a id="33477">directlyModifiedCount</a></span> = <span class="typed"><span class="type">scala.collection.mutable.HashSet[Source]</span><a href="#33476">modified</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="24687">size</a></span>
		<span class="keyword">for</span>(<span class="typed"><span class="type">(((External, Conditional.this.ExternalInfo)) =&gt; Unit)Unit</span><span id="7365"><a href="#33512" id="7359">(</a></span></span><span class="typed"><span class="type">External</span><span id="33513"><a id="33517">external</a></span></span>, <span class="typed"><span class="type">Conditional.this.ExternalInfo</span><span id="33514"><a id="33518">info</a></span></span>) &lt;- <span class="typed"><span class="type">(Iterable[External])Iterable[(External, Conditional.this.ExternalInfo)]</span><a href="#33393">externalInfo</a></span>(<span class="typed"><span class="type">=&gt; Conditional.this.AnalysisType</span><a href="#33382">analysis</a></span>.<span class="typed"><span class="type">=&gt; scala.collection.Set[External]</span><a href="Analysis.scala.html#22385">allExternals</a></span>))
		{
			<span class="keyword">val</span> <span class="typed"><span class="type">scala.collection.Set[Source]</span><a id="33519">dependentSources</a></span> = <span class="typed"><span class="type">=&gt; Conditional.this.AnalysisType</span><a href="#33382">analysis</a></span>.<span class="typed"><span class="type">(External)Option[scala.collection.Set[Source]]</span><a href="Analysis.scala.html#22388">externalDependencies</a></span>(<span class="typed"><span class="type">External</span><a href="#33517">external</a></span>).<span class="typed"><span class="type">=&gt; scala.collection.Set[Source]</span><a id="10261">get</a></span>
			<span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span>(<span class="typed"><span class="type">Conditional.this.ExternalInfo</span><a href="#33518">info</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="#33526">available</a></span>)
			{
				<span class="keyword">val</span> <span class="typed"><span class="type">Long</span><a id="33531">dependencyLastModified</a></span> = <span class="typed"><span class="type">Conditional.this.ExternalInfo</span><a href="#33518">info</a></span>.<span class="typed"><span class="type">=&gt; Long</span><a href="#33528">lastModified</a></span>
				<span class="keyword">for</span>(<span class="typed"><span class="type">((Source) =&gt; Unit)Unit</span><span id="7365"><a id="33533">dependentSource</a></span></span> &lt;- <span class="typed"><span class="type">scala.collection.Set[Source]</span><a href="#33519">dependentSources</a></span>; <span class="typed"><span class="type">((scala.collection.Set[Product]) =&gt; Unit)Unit</span><span id="10271"><a id="33535">dependentProducts</a></span></span> &lt;- <span class="typed"><span class="type">=&gt; Conditional.this.AnalysisType</span><a href="#33382">analysis</a></span>.<span class="typed"><span class="type">(Source)Option[scala.collection.Set[Product]]</span><a href="Analysis.scala.html#22387">products</a></span>(<span class="typed"><span class="type">Source</span><a href="#33533">dependentSource</a></span>))
				{
					<span class="typed"><span class="type">scala.collection.Set[Product]</span><a href="#33535">dependentProducts</a></span>.<span class="typed"><span class="type">((Product) =&gt; Boolean)Option[Product]</span><a id="7368">find</a></span>(<span class="typed"><span class="type">Product</span><a id="33537">p</a></span> =&gt; <span class="typed"><span class="type">(Product)Long</span><a href="#33392">productLastModified</a></span>(<span class="typed"><span class="type">Product</span><a href="#33537">p</a></span>) <span class="typed"><span class="type">(Long)Boolean</span><a id="3247">&lt;</a></span> <span class="typed"><span class="type">Long</span><a href="#33531">dependencyLastModified</a></span>) <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span>
					{
						<span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">Some</a>(<span class="typed"><span class="type">Product</span><a id="33539">modifiedProduct</a></span>) =&gt;
						{
							<span class="typed"><span class="type">=&gt; sbt.Logger</span><a href="#33385">log</a></span>.<span class="typed"><span class="type">(=&gt; String)Unit</span><a href="Logger.scala.html#8466">debug</a></span>(<span class="typed"><span class="type">=&gt; String</span><a href="#33386">productType</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot; &quot;)</span><span class="string">&quot; &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">Product</span><a href="#33539">modifiedProduct</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot; older than external dependency &quot;)</span><span class="string">&quot; older than external dependency &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">External</span><a href="#33517">external</a></span>)
							<span class="typed"><span class="type">scala.collection.mutable.HashSet[Source]</span><a href="#33475">unmodified</a></span> <span class="typed"><span class="type">(Source)Unit</span><a id="22727">-=</a></span> <span class="typed"><span class="type">Source</span><a href="#33533">dependentSource</a></span>
							<span class="typed"><span class="type">scala.collection.mutable.HashSet[Source]</span><a href="#33476">modified</a></span> <span class="typed"><span class="type">(Source)Unit</span><a id="22726">+=</a></span> <span class="typed"><span class="type">Source</span><a href="#33533">dependentSource</a></span>
						}
						<span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object None</span><a id="517">None</a></span> =&gt; <span class="typed"><span class="type">Unit</span><span >(</span></span>)
					}
				}
			}
			<span class="keyword">else</span>
			{
				<span class="typed"><span class="type">=&gt; sbt.Logger</span><a href="#33385">log</a></span>.<span class="typed"><span class="type">(=&gt; String)Unit</span><a href="Logger.scala.html#8466">debug</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;External dependency &quot;)</span><span class="string">&quot;External dependency &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">External</span><a href="#33517">external</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot; not found.&quot;)</span><span class="string">&quot; not found.&quot;</span></span>)
				<span class="typed"><span class="type">scala.collection.mutable.HashSet[Source]</span><a href="#33475">unmodified</a></span> <span class="typed"><span class="type">(Iterable[Source])Unit</span><a id="22489">--=</a></span> <span class="typed"><span class="type">scala.collection.Set[Source]</span><a href="#33519">dependentSources</a></span>
				<span class="typed"><span class="type">scala.collection.mutable.HashSet[Source]</span><a href="#33476">modified</a></span> <span class="typed"><span class="type">(Iterable[Source])Unit</span><a id="22480">++=</a></span> <span class="typed"><span class="type">scala.collection.Set[Source]</span><a href="#33519">dependentSources</a></span>
				<span class="typed"><span class="type">=&gt; Conditional.this.AnalysisType</span><a href="#33382">analysis</a></span>.<span class="typed"><span class="type">(External)Unit</span><a href="Analysis.scala.html#22396">removeExternalDependency</a></span>(<span class="typed"><span class="type">External</span><a href="#33517">external</a></span>)
			}
		}
		
		<span class="keyword">val</span> <span class="typed"><span class="type">scala.collection.mutable.HashSet[Source]</span><a id="33478">handled</a></span> = <span class="typed"><span class="type">scala.collection.mutable.HashSet[Source]</span><span class="keyword">new</span></span> scala.collection.mutable.<span class="typed"><span class="type">scala.collection.mutable.HashSet[Source]</span><a id="8018">HashSet</a></span>[Source]
		<span class="keyword">def</span> <span class="typed"><span class="type">(Iterable[Source])Unit</span><a id="33479">markModified</a></span>(<span class="typed"><span class="type">Iterable[Source]</span><a id="33544">changed</a></span>: <span class="typed"><span class="type">Iterable[Source]</span><a id="384">Iterable</a></span>[Source]) { <span class="keyword">for</span>(<span class="typed"><span class="type">((Source) =&gt; Unit)Unit</span><span id="7365"><span id="7359"><span id="33546"><a id="33548">c</a></span></span></span></span> &lt;- <span class="typed"><span class="type">Iterable[Source]</span><a href="#33544">changed</a></span> <span class="keyword">if</span> <span class="typed"><span class="type">=&gt; Boolean</span><a id="2728">!</a></span><span class="typed"><span class="type">scala.collection.mutable.HashSet[Source]</span><a href="#33478">handled</a></span>.<span class="typed"><span class="type">(Source)Boolean</span><a id="22725">contains</a></span>(<span class="typed"><span class="type">Source</span><a href="#33546">c</a></span>)) <span class="typed"><span class="type">(Source)Unit</span><a href="#33480">markSourceModified</a></span>(<span class="typed"><span class="type">Source</span><a href="#33548">c</a></span>) }
		<span class="keyword">def</span> <span class="typed"><span class="type">(Source)Unit</span><a id="33480">markSourceModified</a></span>(<span class="typed"><span class="type">Source</span><a id="33549">src</a></span>: <span class="typed"><span class="type">Source</span><a href="#6347">Source</a></span>)
		{
			<span class="typed"><span class="type">scala.collection.mutable.HashSet[Source]</span><a href="#33475">unmodified</a></span> <span class="typed"><span class="type">(Source)Unit</span><a id="22727">-=</a></span> <span class="typed"><span class="type">Source</span><a href="#33549">src</a></span>
			<span class="typed"><span class="type">scala.collection.mutable.HashSet[Source]</span><a href="#33476">modified</a></span> <span class="typed"><span class="type">(Source)Unit</span><a id="22726">+=</a></span> <span class="typed"><span class="type">Source</span><a href="#33549">src</a></span>
			<span class="typed"><span class="type">scala.collection.mutable.HashSet[Source]</span><a href="#33478">handled</a></span> <span class="typed"><span class="type">(Source)Unit</span><a id="22726">+=</a></span> <span class="typed"><span class="type">Source</span><a href="#33549">src</a></span>
			<span class="typed"><span class="type">(Source)Unit</span><a href="#33481">markDependenciesModified</a></span>(<span class="typed"><span class="type">Source</span><a href="#33549">src</a></span>)
		}
		<span class="keyword">def</span> <span class="typed"><span class="type">(Source)Unit</span><a id="33481">markDependenciesModified</a></span>(<span class="typed"><span class="type">Source</span><a id="33553">src</a></span>: <span class="typed"><span class="type">Source</span><a href="#6347">Source</a></span>) { <span class="typed"><span class="type">=&gt; Conditional.this.AnalysisType</span><a href="#33382">analysis</a></span>.<span class="typed"><span class="type">(Source)Option[scala.collection.Set[Source]]</span><a href="Analysis.scala.html#22395">removeDependencies</a></span>(<span class="typed"><span class="type">Source</span><a href="#33553">src</a></span>).<span class="typed"><span class="type">((scala.collection.Set[Source]) =&gt; Unit)Option[Unit]</span><a id="10266">map</a></span>(<span class="typed"><span class="type">(Iterable[Source])Unit</span><a href="#33479">markModified</a></span>) }

		<span class="typed"><span class="type">(Iterable[Source])Unit</span><a href="#33479">markModified</a></span>(<span class="typed"><span class="type">scala.collection.mutable.HashSet[Source]</span><a href="#33476">modified</a></span>.<span class="typed"><span class="type">=&gt; List[Source]</span><a id="7388">toList</a></span>)
		<span class="typed"><span class="type">scala.collection.mutable.HashSet[Source]</span><a href="#33473">removedSources</a></span>.<span class="typed"><span class="type">((Source) =&gt; Unit)Unit</span><a id="7365">foreach</a></span>(<span class="typed"><span class="type">(Source)Unit</span><a href="#33481">markDependenciesModified</a></span>)
		
		<span class="keyword">for</span>(<span class="typed"><span class="type">((Source) =&gt; Unit)Unit</span><span id="7365"><a id="33571">changed</a></span></span> &lt;- <span class="typed"><span class="type">scala.collection.mutable.HashSet[Source]</span><a href="#33473">removedSources</a></span> <span class="typed"><span class="type">(Iterable[Source])scala.collection.mutable.Set[Source]</span><a id="22484">++</a></span> <span class="typed"><span class="type">scala.collection.mutable.HashSet[Source]</span><a href="#33476">modified</a></span>)
			<span class="typed"><span class="type">=&gt; Conditional.this.AnalysisType</span><a href="#33382">analysis</a></span>.<span class="typed"><span class="type">(Source)Unit</span><a href="Analysis.scala.html#22393">removeSource</a></span>(<span class="typed"><span class="type">Source</span><a href="#33571">changed</a></span>)
		
		<span class="typed"><span class="type">template $anon extends java.lang.Object with Conditional.this.ConditionalAnalysis</span><a id="33572" class="keyword">new</a></span> <span class="typed"><span class="type">Conditional.this.ConditionalAnalysis</span><a href="#33398">ConditionalAnalysis</a></span>
		{
			<span class="keyword">def</span> <span class="typed"><span class="type">=&gt; scala.collection.Set[Source]</span><a id="33579">dirtySources</a></span> = <span class="typed"><span class="type">scala.collection.mutable.HashSet[Source]</span><a href="#33476">modified</a></span>.<span class="typed"><span class="type">=&gt; scala.collection.Set[Source]</span><a id="22501">readOnly</a></span>
			<span class="keyword">def</span> <span class="typed"><span class="type">=&gt; scala.collection.Set[Source]</span><a id="33580">cleanSources</a></span> = <span class="typed"><span class="type">scala.collection.mutable.HashSet[Source]</span><a href="#33475">unmodified</a></span>.<span class="typed"><span class="type">=&gt; scala.collection.Set[Source]</span><a id="22501">readOnly</a></span>
			<span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Int</span><a id="33581">directlyModifiedSourcesCount</a></span> = <span class="typed"><span class="type">Int</span><a href="#33477">directlyModifiedCount</a></span>
			<span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Int</span><a id="33582">invalidatedSourcesCount</a></span> = <span class="typed"><span class="type">=&gt; scala.collection.Set[Source]</span><a href="#33579">dirtySources</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="22293">size</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3129">-</a></span> <span class="typed"><span class="type">Int</span><a href="#33477">directlyModifiedCount</a></span>
			<span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Int</span><a id="33583">removedSourcesCount</a></span> = <span class="typed"><span class="type">Int</span><a href="#33474">removedCount</a></span>
			<span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">()java.lang.String</span><a id="33584">toString</a></span> =
			{
				<span class="typed"><span class="type">java.lang.String(&quot;  Source analysis: &quot;)</span><span class="string">&quot;  Source analysis: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">=&gt; Int</span><a href="#33581">directlyModifiedSourcesCount</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot; new/modified, &quot;)</span><span class="string">&quot; new/modified, &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span>
					<span class="typed"><span class="type">=&gt; Int</span><a href="#33582">invalidatedSourcesCount</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot; indirectly invalidated, &quot;)</span><span class="string">&quot; indirectly invalidated, &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span>
					<span class="typed"><span class="type">=&gt; Int</span><a href="#33583">removedSourcesCount</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot; removed.&quot;)</span><span class="string">&quot; removed.&quot;</span></span>
			}
		}
	}
	
	<span class="keyword">protected</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Boolean</span><a id="33401">checkLastModified</a></span> = <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>
	<span class="keyword">protected</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Boolean</span><a id="33402">noProductsImpliesModified</a></span> = <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>
	<span class="keyword">protected</span> <span class="keyword">def</span> <span class="typed"><span class="type">(Source)Boolean</span><a id="33403">isSourceModified</a></span>(<span class="typed"><span class="type">Source</span><a id="33489">source</a></span>: <span class="typed"><span class="type">Source</span><a href="#6347">Source</a></span>) =
	{
		<span class="typed"><span class="type">=&gt; Conditional.this.AnalysisType</span><a href="#33382">analysis</a></span>.<span class="typed"><span class="type">(Source)Option[scala.collection.Set[Product]]</span><a href="Analysis.scala.html#22387">products</a></span>(<span class="typed"><span class="type">Source</span><a href="#33489">source</a></span>) <span class="typed"><span class="type">Boolean</span><span class="keyword">match</span></span>
		{
			<span class="typed"><span class="type">Boolean</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object None</span><a id="517">None</a></span> =&gt;
			{
				<span class="typed"><span class="type">=&gt; sbt.Logger</span><a href="#33385">log</a></span>.<span class="typed"><span class="type">(=&gt; String)Unit</span><a href="Logger.scala.html#8466">debug</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;New file &quot;)</span><span class="string">&quot;New file &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">Source</span><a href="#33489">source</a></span>)
				<span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>
			}
			<span class="typed"><span class="type">Boolean</span><span class="keyword">case</span></span> <a id="1">Some</a>(<span class="typed"><span class="type">scala.collection.Set[Product]</span><a id="33492">sourceProducts</a></span>) =&gt;
			{
				<span class="keyword">val</span> <span class="typed"><span class="type">Long</span><a id="33493">sourceModificationTime</a></span> = <span class="typed"><span class="type">(Source)Long</span><a href="#33390">sourceLastModified</a></span>(<span class="typed"><span class="type">Source</span><a href="#33489">source</a></span>)
				<span class="keyword">def</span> <span class="typed"><span class="type">(Product)Boolean</span><a id="33494">isOutofdate</a></span>(<span class="typed"><span class="type">Product</span><a id="33496">p</a></span>: <span class="typed"><span class="type">Product</span><a href="#6348">Product</a></span>) =
					<span class="typed"><span class="type">=&gt; Boolean</span><a id="2728">!</a></span><span class="typed"><span class="type">(Product)Boolean</span><a href="#33391">productExists</a></span>(<span class="typed"><span class="type">Product</span><a href="#33496">p</a></span>) <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2731">||</a></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a href="#33401">checkLastModified</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2732">&amp;&amp;</a></span> <span class="typed"><span class="type">(Product)Long</span><a href="#33392">productLastModified</a></span>(<span class="typed"><span class="type">Product</span><a href="#33496">p</a></span>) <span class="typed"><span class="type">(Long)Boolean</span><a id="3247">&lt;</a></span> <span class="typed"><span class="type">Long</span><a href="#33493">sourceModificationTime</a></span>)
				
				<span class="typed"><span class="type">scala.collection.Set[Product]</span><a href="#33492">sourceProducts</a></span>.<span class="typed"><span class="type">((Product) =&gt; Boolean)Option[Product]</span><a id="7368">find</a></span>(<span class="typed"><span class="type">(Product)Boolean</span><a href="#33494">isOutofdate</a></span>) <span class="typed"><span class="type">Boolean</span><span class="keyword">match</span></span>
				{
					<span class="typed"><span class="type">Boolean</span><span class="keyword">case</span></span> <a id="1">Some</a>(<span class="typed"><span class="type">Product</span><a id="33504">modifiedProduct</a></span>) =&gt;
						<span class="typed"><span class="type">=&gt; sbt.Logger</span><a href="#33385">log</a></span>.<span class="typed"><span class="type">(=&gt; String)Unit</span><a href="Logger.scala.html#8466">debug</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;Outdated &quot;)</span><span class="string">&quot;Outdated &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">=&gt; String</span><a href="#33386">productType</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;: &quot;)</span><span class="string">&quot;: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">Product</span><a href="#33504">modifiedProduct</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot; for source &quot;)</span><span class="string">&quot; for source &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">Source</span><a href="#33489">source</a></span>)
						<span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>
					<span class="typed"><span class="type">Boolean</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object None</span><a id="517">None</a></span> =&gt;
						<span class="typed"><span class="type">Boolean</span><span class="keyword">if</span></span>(<span class="typed"><span class="type">=&gt; Boolean</span><a href="#33402">noProductsImpliesModified</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2732">&amp;&amp;</a></span> <span class="typed"><span class="type">scala.collection.Set[Product]</span><a href="#33492">sourceProducts</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a id="22296">isEmpty</a></span>)
						{
							<span class="comment">// necessary for change detection that depends on last modified</span>
							<span class="typed"><span class="type">=&gt; sbt.Logger</span><a href="#33385">log</a></span>.<span class="typed"><span class="type">(=&gt; String)Unit</span><a href="Logger.scala.html#8466">debug</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;Source &quot;)</span><span class="string">&quot;Source &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">Source</span><a href="#33489">source</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot; has no products, marking it modified.&quot;)</span><span class="string">&quot; has no products, marking it modified.&quot;</span></span>)
							<span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>
						}
						<span class="keyword">else</span>
							<span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>
				}
			}
		}
	}
	<span class="keyword">protected</span> <span class="keyword">def</span> <span class="typed"><span class="type">(Boolean)Unit</span><a id="33404">processingComplete</a></span>(<span class="typed"><span class="type">Boolean</span><a id="33635">success</a></span>: <span class="typed"><span class="type">Boolean</span><a id="2151">Boolean</a></span>)
	{
		<span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span>(<span class="typed"><span class="type">Boolean</span><a href="#33635">success</a></span>)
		{
			<span class="typed"><span class="type">=&gt; Conditional.this.AnalysisType</span><a href="#33382">analysis</a></span>.<span class="typed"><span class="type">()Option[String]</span><a href="Analysis.scala.html#22380">save</a></span>()
			<span class="typed"><span class="type">=&gt; sbt.Logger</span><a href="#33385">log</a></span>.<span class="typed"><span class="type">(=&gt; String)Unit</span><a href="Logger.scala.html#8467">info</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;  Post-analysis: &quot;)</span><span class="string">&quot;  Post-analysis: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">=&gt; Conditional.this.AnalysisType</span><a href="#33382">analysis</a></span>.<span class="typed"><span class="type">=&gt; scala.collection.Set[Product]</span><a href="Analysis.scala.html#22384">allProducts</a></span>.<span class="typed"><span class="type">=&gt; Seq[Product]</span><a id="7389">toSeq</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="7215">length</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot; &quot;)</span><span class="string">&quot; &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">=&gt; String</span><a href="#33387">productTypePlural</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;.&quot;)</span><span class="string">&quot;.&quot;</span></span>)
		}
		<span class="keyword">else</span>
			<span class="typed"><span class="type">=&gt; Conditional.this.AnalysisType</span><a href="#33382">analysis</a></span>.<span class="typed"><span class="type">()Option[String]</span><a href="Analysis.scala.html#22381">revert</a></span>()
	}
}

<span class="keyword">abstract</span> <span class="keyword">class</span> <span class="typed"><span class="type">class CompileConfiguration extends java.lang.Object with NotNull with ScalaObject</span><a id="6350">CompileConfiguration</a></span> <span class="keyword">extends</span> <span class="typed"><span class="type">NotNull</span><a id="186">NotNull</a></span>
{
	<span class="keyword">def</span> <span class="typed"><span class="type">=&gt; String</span><a id="33439">label</a></span>: <span class="typed"><span class="type">String</span><a id="1842">String</a></span>
	<span class="keyword">def</span> <span class="typed"><span class="type">=&gt; sbt.PathFinder</span><a id="33440">sources</a></span>: <span class="typed"><span class="type">sbt.PathFinder</span><a href="Path.scala.html#6802">PathFinder</a></span>
	<span class="keyword">def</span> <span class="typed"><span class="type">=&gt; sbt.Path</span><a id="33441">outputDirectory</a></span>: <span class="typed"><span class="type">sbt.Path</span><a href="Path.scala.html#6796">Path</a></span>
	<span class="keyword">def</span> <span class="typed"><span class="type">=&gt; sbt.PathFinder</span><a id="33442">classpath</a></span>: <span class="typed"><span class="type">sbt.PathFinder</span><a href="Path.scala.html#6802">PathFinder</a></span>
	<span class="keyword">def</span> <span class="typed"><span class="type">=&gt; sbt.Path</span><a id="33443">analysisPath</a></span>: <span class="typed"><span class="type">sbt.Path</span><a href="Path.scala.html#6796">Path</a></span>
	<span class="keyword">def</span> <span class="typed"><span class="type">=&gt; sbt.Path</span><a id="33444">projectPath</a></span>: <span class="typed"><span class="type">sbt.Path</span><a href="Path.scala.html#6796">Path</a></span>
	<span class="keyword">def</span> <span class="typed"><span class="type">=&gt; sbt.Logger</span><a id="33445">log</a></span>: <span class="typed"><span class="type">sbt.Logger</span><a href="Logger.scala.html#6766">Logger</a></span>
	<span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Seq[String]</span><a id="33446">options</a></span>: <span class="typed"><span class="type">Seq[String]</span><a id="744">Seq</a></span>[String]
	<span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Iterable[String]</span><a id="33447">testDefinitionClassNames</a></span>: <span class="typed"><span class="type">Iterable[String]</span><a id="384">Iterable</a></span>[String]
}
<span class="keyword">import</span> java.io.File
<span class="keyword">class</span> <span class="typed"><span class="type">class CompileConditional extends java.lang.Object with sbt.Conditional[sbt.Path,sbt.Path,java.io.File] with ScalaObject</span><a id="6352">CompileConditional</a></span>(<span class="typed"><span class="type">sbt.CompileConfiguration</span><span id="33406"><a id="33435">config</a></span></span>: <span class="typed"><span class="type">sbt.CompileConfiguration</span><a href="#6350">CompileConfiguration</a></span>) <span class="keyword">extends</span> <span class="typed"><span class="type">sbt.Conditional[sbt.Path,sbt.Path,java.io.File]</span><a href="#6346">Conditional</a></span>[Path, Path, File]
{
	<span class="keyword">import</span> config._
	<span class="keyword">type</span> <span class="typed"><span class="type">sbt.CompileAnalysis</span><a id="33409">AnalysisType</a></span> = <span class="typed"><span class="type">sbt.CompileAnalysis</span><a href="Analysis.scala.html#6230">CompileAnalysis</a></span>
	<span class="keyword">protected</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; sbt.CompileAnalysis</span><a id="33410">loadAnalysis</a></span> =
	{
		<span class="keyword">val</span> <span class="typed"><span class="type">sbt.CompileAnalysis</span><a id="34231">a</a></span> = <span class="typed"><span class="type">sbt.CompileAnalysis</span><span class="keyword">new</span></span> <span class="typed"><span class="type">sbt.CompileAnalysis</span><a href="Analysis.scala.html#6230">CompileAnalysis</a></span>(<span class="typed"><span class="type">=&gt; sbt.Path</span><a href="#33443">analysisPath</a></span>, <span class="typed"><span class="type">=&gt; sbt.Path</span><a href="#33444">projectPath</a></span>, <span class="typed"><span class="type">=&gt; sbt.Logger</span><a href="#33411">log</a></span>)
		<span class="keyword">for</span>(<span class="typed"><span class="type">((String) =&gt; Unit)Unit</span><span id="10271"><a id="34235">errorMessage</a></span></span> &lt;- <span class="typed"><span class="type">sbt.CompileAnalysis</span><a href="#34231">a</a></span>.<span class="typed"><span class="type">()Option[String]</span><a href="Analysis.scala.html#22438">load</a></span>())
			<span class="typed"><span class="type">(String)Nothing</span><span id="5964"><a id="802">error</a></span></span>(<span class="typed"><span class="type">String</span><a href="#34235">errorMessage</a></span>)
		<span class="typed"><span class="type">sbt.CompileAnalysis</span><a href="#34231">a</a></span>
	}
	
	<span class="keyword">protected</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; sbt.Logger</span><a id="33411">log</a></span> = <span class="typed"><span class="type">sbt.CompileConfiguration</span><a href="#33406">config</a></span>.<span class="typed"><span class="type">=&gt; sbt.Logger</span><a href="#33445">log</a></span>
	
	<span class="keyword">protected</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; java.lang.String</span><a id="33412">productType</a></span> = <span class="typed"><span class="type">java.lang.String(&quot;class&quot;)</span><span class="string">&quot;class&quot;</span></span>
	<span class="keyword">protected</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; java.lang.String</span><a id="33413">productTypePlural</a></span> = <span class="typed"><span class="type">java.lang.String(&quot;classes&quot;)</span><span class="string">&quot;classes&quot;</span></span>
	<span class="keyword">protected</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; scala.collection.Set[sbt.Path]</span><a id="33414">sourcesToProcess</a></span> = <span class="typed"><span class="type">=&gt; sbt.PathFinder</span><a href="#33440">sources</a></span>.<span class="typed"><span class="type">=&gt; scala.collection.Set[sbt.Path]</span><a href="Path.scala.html#9627">get</a></span>
	
	<span class="keyword">protected</span> <span class="keyword">def</span> <span class="typed"><span class="type">(sbt.Path)Boolean</span><a id="33415">sourceExists</a></span>(<span class="typed"><span class="type">sbt.Path</span><a id="34242">source</a></span>: <span class="typed"><span class="type">sbt.Path</span><a href="Path.scala.html#6796">Path</a></span>) = <span class="typed"><span class="type">sbt.Path</span><a href="#34242">source</a></span>.<span class="typed"><span class="type">=&gt; java.io.File</span><a href="Path.scala.html#9638">asFile</a></span>.<span class="typed"><span class="type">()Boolean</span><a id="9668">exists</a></span>
	<span class="keyword">protected</span> <span class="keyword">def</span> <span class="typed"><span class="type">(sbt.Path)Long</span><a id="33416">sourceLastModified</a></span>(<span class="typed"><span class="type">sbt.Path</span><a id="34244">source</a></span>: <span class="typed"><span class="type">sbt.Path</span><a href="Path.scala.html#6796">Path</a></span>) = <span class="typed"><span class="type">sbt.Path</span><a href="#34244">source</a></span>.<span class="typed"><span class="type">=&gt; java.io.File</span><a href="Path.scala.html#9638">asFile</a></span>.<span class="typed"><span class="type">()Long</span><a id="9672">lastModified</a></span>
	
	<span class="keyword">protected</span> <span class="keyword">def</span> <span class="typed"><span class="type">(sbt.Path)Boolean</span><a id="33417">productExists</a></span>(<span class="typed"><span class="type">sbt.Path</span><a id="34246">product</a></span>: <span class="typed"><span class="type">sbt.Path</span><a href="Path.scala.html#6796">Path</a></span>) = <span class="typed"><span class="type">sbt.Path</span><a href="#34246">product</a></span>.<span class="typed"><span class="type">=&gt; java.io.File</span><a href="Path.scala.html#9638">asFile</a></span>.<span class="typed"><span class="type">()Boolean</span><a id="9668">exists</a></span>
	<span class="keyword">protected</span> <span class="keyword">def</span> <span class="typed"><span class="type">(sbt.Path)Long</span><a id="33418">productLastModified</a></span>(<span class="typed"><span class="type">sbt.Path</span><a id="34248">product</a></span>: <span class="typed"><span class="type">sbt.Path</span><a href="Path.scala.html#6796">Path</a></span>) = <span class="typed"><span class="type">sbt.Path</span><a href="#34248">product</a></span>.<span class="typed"><span class="type">=&gt; java.io.File</span><a href="Path.scala.html#9638">asFile</a></span>.<span class="typed"><span class="type">()Long</span><a id="9672">lastModified</a></span>
	
	<span class="keyword">protected</span> <span class="keyword">def</span> <span class="typed"><span class="type">(Iterable[java.io.File])Iterable[(java.io.File, CompileConditional.this.ExternalInfo)]</span><a id="33419">externalInfo</a></span>(<span class="typed"><span class="type">Iterable[java.io.File]</span><a id="34250">externals</a></span>: <span class="typed"><span class="type">Iterable[java.io.File]</span><a id="384">Iterable</a></span>[File]) =
	{
		<span class="keyword">val</span> <span class="typed"><span class="type">(scala.collection.Set[java.io.File], scala.collection.Set[java.io.File])</span><span id="9362"><a href="#34273" id="1360">(</a></span></span><span class="typed"><span class="type">scala.collection.Set[java.io.File]</span><span id="34273"><span id="34253"><a href="#34252" id="9351">classpathJars</a></span></span></span>, <span class="typed"><span class="type">scala.collection.Set[java.io.File]</span><span id="34274"><span id="34254"><a href="#34252" id="9353">classpathDirs</a></span></span></span>) = <span class="typed"><span class="type">object sbt.ClasspathUtilities</span><a href="ClasspathUtilities.scala.html#6466">ClasspathUtilities</a></span>.<span class="typed"><span class="type">(Iterable[sbt.Path])(scala.collection.Set[java.io.File], scala.collection.Set[java.io.File])</span><a href="ClasspathUtilities.scala.html#34261">buildSearchPaths</a></span>(<span class="typed"><span class="type">=&gt; sbt.PathFinder</span><a href="#33442">classpath</a></span>.<span class="typed"><span class="type">=&gt; scala.collection.Set[sbt.Path]</span><a href="Path.scala.html#9627">get</a></span>)
		<span class="keyword">for</span>(<span class="typed"><span class="type">((java.io.File) =&gt; (java.io.File, CompileConditional.this.ExternalInfo))Iterable[(java.io.File, CompileConditional.this.ExternalInfo)]</span><span id="7355"><a id="34279">external</a></span></span> &lt;- <span class="typed"><span class="type">Iterable[java.io.File]</span><a href="#34250">externals</a></span>) <span class="keyword">yield</span>
		{
			<span class="keyword">val</span> <span class="typed"><span class="type">Boolean</span><a id="34280">available</a></span> = <span class="typed"><span class="type">java.io.File</span><a href="#34279">external</a></span>.<span class="typed"><span class="type">()Boolean</span><a id="9668">exists</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2732">&amp;&amp;</a></span> <span class="typed"><span class="type">object sbt.ClasspathUtilities</span><a href="ClasspathUtilities.scala.html#6466">ClasspathUtilities</a></span>.<span class="typed"><span class="type">(scala.collection.Set[java.io.File],Iterable[java.io.File],java.io.File)Boolean</span><a href="ClasspathUtilities.scala.html#34262">onClasspath</a></span>(<span class="typed"><span class="type">scala.collection.Set[java.io.File]</span><a href="#34253">classpathJars</a></span>, <span class="typed"><span class="type">scala.collection.Set[java.io.File]</span><a href="#34254">classpathDirs</a></span>, <span class="typed"><span class="type">java.io.File</span><a href="#34279">external</a></span>)
			<span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span>(<span class="typed"><span class="type">=&gt; Boolean</span><a id="2728">!</a></span><span class="typed"><span class="type">Boolean</span><a href="#34280">available</a></span>)
				<span class="typed"><span class="type">=&gt; sbt.Logger</span><a href="#33411">log</a></span>.<span class="typed"><span class="type">(=&gt; String)Unit</span><a href="Logger.scala.html#8466">debug</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;External &quot;)</span><span class="string">&quot;External &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">java.io.File</span><a href="#34279">external</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> (<span class="typed"><span class="type">Any</span><span class="keyword">if</span></span>(<span class="typed"><span class="type">java.io.File</span><a href="#34279">external</a></span>.<span class="typed"><span class="type">()Boolean</span><a id="9668">exists</a></span>) <span class="typed"><span class="type">java.lang.String(&quot; not on classpath.&quot;)</span><span class="string">&quot; not on classpath.&quot;</span></span> <span class="keyword">else</span> <span class="typed"><span class="type">java.lang.String(&quot; does not exist.&quot;)</span><span class="string">&quot; does not exist.&quot;</span></span>))
			<span class="typed"><span class="type">(java.io.File,CompileConditional.this.ExternalInfo)(java.io.File, CompileConditional.this.ExternalInfo)</span><span id="9362"><a id="1360">(</a></span></span><span class="typed"><span class="type">java.io.File</span><a href="#34279">external</a></span>, <span class="typed"><span class="type">(Boolean,Long)CompileConditional.this.ExternalInfo</span><a href="#34195">ExternalInfo</a></span>(<span class="typed"><span class="type">Boolean</span><a href="#34280">available</a></span>, <span class="typed"><span class="type">java.io.File</span><a href="#34279">external</a></span>.<span class="typed"><span class="type">()Long</span><a id="9672">lastModified</a></span>))
		}
	}
	
	<span class="keyword">import</span> ChangeDetection._
	<span class="keyword">protected</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; sbt.ChangeDetection.Value</span><a id="33421">changeDetectionMethod</a></span>: ChangeDetection.<span class="typed"><span class="type">sbt.ChangeDetection.Value</span><a id="21282">Value</a></span> = <span class="typed"><span class="type">=&gt; sbt.ChangeDetection.Value</span><a href="#34227">HashAndProductsExist</a></span>
	<span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Boolean</span><a id="33422">checkLastModified</a></span> = <span class="typed"><span class="type">=&gt; sbt.ChangeDetection.Value</span><a href="#33421">changeDetectionMethod</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5765">!=</a></span> <span class="typed"><span class="type">=&gt; sbt.ChangeDetection.Value</span><a href="#34227">HashAndProductsExist</a></span>
	<span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Boolean</span><a id="33423">noProductsImpliesModified</a></span> = <span class="typed"><span class="type">=&gt; sbt.ChangeDetection.Value</span><a href="#33421">changeDetectionMethod</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3490">==</a></span> <span class="typed"><span class="type">=&gt; sbt.ChangeDetection.Value</span><a href="#34221">LastModifiedOnly</a></span>
	<span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <span class="typed"><span class="type">(sbt.Path)Boolean</span><a id="33424">isSourceModified</a></span>(<span class="typed"><span class="type">sbt.Path</span><a id="34297">source</a></span>: <span class="typed"><span class="type">sbt.Path</span><a href="Path.scala.html#6796">Path</a></span>) =
		<span class="typed"><span class="type">=&gt; sbt.ChangeDetection.Value</span><a href="#33421">changeDetectionMethod</a></span> <span class="typed"><span class="type">Boolean</span><span class="keyword">match</span></span>
		{
			<span class="typed"><span class="type">Boolean</span><span class="keyword">case</span></span> <span class="typed"><span class="type">=&gt; sbt.ChangeDetection.Value</span><a href="#34225">HashAndLastModified</a></span> | <span class="typed"><span class="type">=&gt; sbt.ChangeDetection.Value</span><a href="#34227">HashAndProductsExist</a></span> =&gt;
				<span class="comment">// behavior will differ because of checkLastModified</span>
				<span class="comment">// hash modified must come first so that the latest hash is calculated for every source</span>
				<span class="typed"><span class="type">(sbt.Path)Boolean</span><a href="#33429">hashModified</a></span>(<span class="typed"><span class="type">sbt.Path</span><a href="#34297">source</a></span>) <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2731">||</a></span> <span class="keyword">super</span>.<span class="typed"><span class="type">(sbt.Path)Boolean</span><a href="#33403">isSourceModified</a></span>(<span class="typed"><span class="type">sbt.Path</span><a href="#34297">source</a></span>)
			<span class="typed"><span class="type">Boolean</span><span class="keyword">case</span></span> <span class="typed"><span class="type">=&gt; sbt.ChangeDetection.Value</span><a href="#34223">HashOnly</a></span> =&gt; <span class="typed"><span class="type">(sbt.Path)Boolean</span><a href="#33429">hashModified</a></span>(<span class="typed"><span class="type">sbt.Path</span><a href="#34297">source</a></span>)
			<span class="typed"><span class="type">Boolean</span><span class="keyword">case</span></span> <span class="typed"><span class="type">=&gt; sbt.ChangeDetection.Value</span><a href="#34221">LastModifiedOnly</a></span> =&gt; <span class="keyword">super</span>.<span class="typed"><span class="type">(sbt.Path)Boolean</span><a href="#33403">isSourceModified</a></span>(<span class="typed"><span class="type">sbt.Path</span><a href="#34297">source</a></span>)
		}
	
	<span class="keyword">import</span> scala.collection.mutable.{Buffer, ListBuffer}
	<span class="keyword">private</span> <span class="keyword">val</span> <span class="typed"><span class="type">scala.collection.mutable.Buffer[(sbt.Path, Option[Array[Byte]])]</span><span id="33427"><a id="33426">newHashes</a></span></span>: <span class="typed"><span class="type">scala.collection.mutable.Buffer[(sbt.Path, Option[Array[Byte]])]</span><a id="8084">Buffer</a></span>[(Path, Option[Array[Byte]])] = <span class="typed"><span class="type">scala.collection.mutable.ListBuffer[(sbt.Path, Option[Array[Byte]])]</span><span class="keyword">new</span></span> <span class="typed"><span class="type">scala.collection.mutable.ListBuffer[(sbt.Path, Option[Array[Byte]])]</span><a id="8048">ListBuffer</a></span>
	<span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(sbt.Path,String)Unit</span><a id="33428">warnHashError</a></span>(<span class="typed"><span class="type">sbt.Path</span><a id="34317">source</a></span>: <span class="typed"><span class="type">sbt.Path</span><a href="Path.scala.html#6796">Path</a></span>, <span class="typed"><span class="type">String</span><a id="34318">message</a></span>: <span class="typed"><span class="type">String</span><a id="1842">String</a></span>)
	{
		<span class="typed"><span class="type">=&gt; sbt.Logger</span><a href="#33411">log</a></span>.<span class="typed"><span class="type">(=&gt; String)Unit</span><a href="Logger.scala.html#8468">warn</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;Error computing hash for source &quot;)</span><span class="string">&quot;Error computing hash for source &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">sbt.Path</span><a href="#34317">source</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;: &quot;)</span><span class="string">&quot;: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">String</span><a href="#34318">message</a></span>)
		<span class="typed"><span class="type">=&gt; scala.collection.mutable.Buffer[(sbt.Path, Option[Array[Byte]])]</span><a href="#33426">newHashes</a></span> <span class="typed"><span class="type">((sbt.Path, Option[Array[Byte]]))Unit</span><span id="22681"><span id="9362"><a id="1360">+=</a></span></span></span> (<span class="typed"><span class="type">sbt.Path</span><a href="#34317">source</a></span>, <span class="typed"><span class="type">object None</span><a id="517">None</a></span>)
	}
	<span class="keyword">protected</span> <span class="keyword">def</span> <span class="typed"><span class="type">(sbt.Path)Boolean</span><a id="33429">hashModified</a></span>(<span class="typed"><span class="type">sbt.Path</span><a id="34300">source</a></span>: <span class="typed"><span class="type">sbt.Path</span><a href="Path.scala.html#6796">Path</a></span>) =
	{
		<span class="typed"><span class="type">=&gt; CompileConditional.this.AnalysisType</span><a href="#33382">analysis</a></span>.<span class="typed"><span class="type">(sbt.Path)Option[Array[Byte]]</span><a href="Analysis.scala.html#22465">hash</a></span>(<span class="typed"><span class="type">sbt.Path</span><a href="#34300">source</a></span>) <span class="typed"><span class="type">Boolean</span><span class="keyword">match</span></span>
		{
			<span class="typed"><span class="type">Boolean</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object None</span><a id="517">None</a></span> =&gt;
				<span class="typed"><span class="type">=&gt; sbt.Logger</span><a href="#33411">log</a></span>.<span class="typed"><span class="type">(=&gt; String)Unit</span><a href="Logger.scala.html#8466">debug</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;Source &quot;)</span><span class="string">&quot;Source &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">sbt.Path</span><a href="#34300">source</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot; had no hash, marking modified.&quot;)</span><span class="string">&quot; had no hash, marking modified.&quot;</span></span>)
				<span class="typed"><span class="type">(sbt.Path,sbt.Logger)Either[String,Array[Byte]]</span><a href="Hash.scala.html#23681">Hash</a></span>(<span class="typed"><span class="type">sbt.Path</span><a href="#34300">source</a></span>, <span class="typed"><span class="type">=&gt; sbt.Logger</span><a href="#33411">log</a></span>).<span class="typed"><span class="type">((String) =&gt; Unit,(Array[Byte]) =&gt; Unit)Unit</span><a id="23107">fold</a></span>(<span class="typed"><span class="type">String</span><a id="34316">err</a></span> =&gt; <span class="typed"><span class="type">(sbt.Path,String)Unit</span><a href="#33428">warnHashError</a></span>(<span class="typed"><span class="type">sbt.Path</span><a href="#34300">source</a></span>, <span class="typed"><span class="type">String</span><a href="#34316">err</a></span>), <span class="typed"><span class="type">Array[Byte]</span><a id="34320">newHash</a></span> =&gt; <span class="typed"><span class="type">=&gt; scala.collection.mutable.Buffer[(sbt.Path, Option[Array[Byte]])]</span><a href="#33426">newHashes</a></span> <span class="typed"><span class="type">((sbt.Path, Option[Array[Byte]]))Unit</span><span id="22681"><span id="9362"><a id="1360">+=</a></span></span></span> (<span class="typed"><span class="type">sbt.Path</span><a href="#34300">source</a></span>, <span class="typed"><span class="type">(Array[Byte])Some[Array[Byte]]</span><span id="10375"><a id="289">Some</a></span></span>(<span class="typed"><span class="type">Array[Byte]</span><a href="#34320">newHash</a></span>)))
				<span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>
			<span class="typed"><span class="type">Boolean</span><span class="keyword">case</span></span> <a id="1">Some</a>(<span class="typed"><span class="type">Array[Byte]</span><a id="34324">oldHash</a></span>) =&gt;
			{
				<span class="typed"><span class="type">(sbt.Path,sbt.Logger)Either[String,Array[Byte]]</span><a href="Hash.scala.html#23681">Hash</a></span>(<span class="typed"><span class="type">sbt.Path</span><a href="#34300">source</a></span>, <span class="typed"><span class="type">=&gt; sbt.Logger</span><a href="#33411">log</a></span>) <span class="typed"><span class="type">Boolean</span><span class="keyword">match</span></span>
				{
					<span class="typed"><span class="type">Boolean</span><span class="keyword">case</span></span> <a id="1">Left</a>(<span class="typed"><span class="type">String</span><a id="34329">err</a></span>) =&gt;
						<span class="typed"><span class="type">(sbt.Path,String)Unit</span><a href="#33428">warnHashError</a></span>(<span class="typed"><span class="type">sbt.Path</span><a href="#34300">source</a></span>, <span class="typed"><span class="type">String</span><a href="#34329">err</a></span>)
						<span class="typed"><span class="type">=&gt; sbt.Logger</span><a href="#33411">log</a></span>.<span class="typed"><span class="type">(=&gt; String)Unit</span><a href="Logger.scala.html#8466">debug</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;Assuming source is modified because of error.&quot;)</span><span class="string">&quot;Assuming source is modified because of error.&quot;</span></span>)
						<span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>
					<span class="typed"><span class="type">Boolean</span><span class="keyword">case</span></span> <a id="1">Right</a>(<span class="typed"><span class="type">Array[Byte]</span><a id="34330">newHash</a></span>) =&gt;
						<span class="typed"><span class="type">=&gt; scala.collection.mutable.Buffer[(sbt.Path, Option[Array[Byte]])]</span><a href="#33426">newHashes</a></span> <span class="typed"><span class="type">((sbt.Path, Option[Array[Byte]]))Unit</span><span id="22681"><span id="9362"><a id="1360">+=</a></span></span></span> (<span class="typed"><span class="type">sbt.Path</span><a href="#34300">source</a></span>, <span class="typed"><span class="type">(Array[Byte])Some[Array[Byte]]</span><span id="10375"><a id="289">Some</a></span></span>(<span class="typed"><span class="type">Array[Byte]</span><a href="#34330">newHash</a></span>))
						<span class="keyword">val</span> <span class="typed"><span class="type">Boolean</span><a id="34331">different</a></span> = <span class="typed"><span class="type">=&gt; Boolean</span><a id="2728">!</a></span>(<span class="typed"><span class="type">Array[Byte]</span><a href="#34324">oldHash</a></span> <span class="typed"><span class="type">(Any)Boolean</span><a id="7100">deepEquals</a></span> <span class="typed"><span class="type">Array[Byte]</span><a href="#34330">newHash</a></span>)
						<span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span>(<span class="typed"><span class="type">Boolean</span><a href="#34331">different</a></span>)
							<span class="typed"><span class="type">=&gt; sbt.Logger</span><a href="#33411">log</a></span>.<span class="typed"><span class="type">(=&gt; String)Unit</span><a href="Logger.scala.html#8466">debug</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;Hash for source &quot;)</span><span class="string">&quot;Hash for source &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">sbt.Path</span><a href="#34300">source</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot; changed (was &quot;)</span><span class="string">&quot; changed (was &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">object sbt.Hash</span><a href="Hash.scala.html#6437">Hash</a></span>.<span class="typed"><span class="type">(Array[Byte])String</span><a href="Hash.scala.html#23678">toHex</a></span>(<span class="typed"><span class="type">Array[Byte]</span><a href="#34324">oldHash</a></span>) <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span>
							<span class="typed"><span class="type">java.lang.String(&quot;, is now &quot;)</span><span class="string">&quot;, is now &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">object sbt.Hash</span><a href="Hash.scala.html#6437">Hash</a></span>.<span class="typed"><span class="type">(Array[Byte])String</span><a href="Hash.scala.html#23678">toHex</a></span>(<span class="typed"><span class="type">Array[Byte]</span><a href="#34330">newHash</a></span>) <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;), marking modified.&quot;)</span><span class="string">&quot;), marking modified.&quot;</span></span>)
						<span class="typed"><span class="type">Boolean</span><a href="#34331">different</a></span>
				}
			}
		}
	}
	<span class="keyword">protected</span> <span class="keyword">def</span> <span class="typed"><span class="type">(CompileConditional.this.ConditionalAnalysis)Option[String]</span><a id="33430">execute</a></span>(<span class="typed"><span class="type">CompileConditional.this.ConditionalAnalysis</span><a id="34343">executeAnalysis</a></span>: <span class="typed"><span class="type">CompileConditional.this.ConditionalAnalysis</span><a href="#33398">ConditionalAnalysis</a></span>) =
	{
		<span class="typed"><span class="type">=&gt; sbt.Logger</span><a href="#33411">log</a></span>.<span class="typed"><span class="type">(=&gt; String)Unit</span><a href="Logger.scala.html#8467">info</a></span>(<span class="typed"><span class="type">CompileConditional.this.ConditionalAnalysis</span><a href="#34343">executeAnalysis</a></span>.<span class="typed"><span class="type">()java.lang.String</span><a id="5757">toString</a></span>)
		<span class="typed"><span class="type">()Unit</span><a href="#33431">finishHashes</a></span>()
		<span class="keyword">import</span> executeAnalysis.dirtySources
		<span class="keyword">val</span> <span class="typed"><span class="type">scala.collection.Set[sbt.Path]</span><a id="34346">cp</a></span> = <span class="typed"><span class="type">=&gt; sbt.PathFinder</span><a href="#33442">classpath</a></span>.<span class="typed"><span class="type">=&gt; scala.collection.Set[sbt.Path]</span><a href="Path.scala.html#9627">get</a></span>
		<span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span>(<span class="typed"><span class="type">=&gt; Boolean</span><a id="2728">!</a></span><span class="typed"><span class="type">=&gt; Iterable[sbt.Path]</span><a href="#33573">dirtySources</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a id="7399">isEmpty</a></span>)
			<span class="typed"><span class="type">(Iterable[sbt.Path])Unit</span><a href="#33432">checkClasspath</a></span>(<span class="typed"><span class="type">scala.collection.Set[sbt.Path]</span><a href="#34346">cp</a></span>)
		<span class="keyword">val</span> <span class="typed"><span class="type">String</span><a id="34347">classpathString</a></span> = <span class="typed"><span class="type">object sbt.Path</span><a href="Path.scala.html#6800">Path</a></span>.<span class="typed"><span class="type">(Iterable[sbt.Path])String</span><a href="Path.scala.html#9601">makeString</a></span>(<span class="typed"><span class="type">scala.collection.Set[sbt.Path]</span><a href="#34346">cp</a></span>)
		<span class="keyword">val</span> <span class="typed"><span class="type">Int</span><a id="34348">id</a></span> = <span class="typed"><span class="type">object sbt.AnalysisCallback</span><a href="AnalysisCallback.scala.html#6317">AnalysisCallback</a></span>.<span class="typed"><span class="type">(sbt.AnalysisCallback)Int</span><a href="AnalysisCallback.scala.html#33762">register</a></span>(<span class="typed"><span class="type">=&gt; sbt.AnalysisCallback</span><a href="#33433">analysisCallback</a></span>)
		<span class="keyword">val</span> <span class="typed"><span class="type">List[java.lang.String]</span><a id="34349">allOptions</a></span> = ((<span class="typed"><span class="type">java.lang.String(&quot;-Xplugin:&quot;)</span><span class="string">&quot;-Xplugin:&quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">object sbt.FileUtilities</span><a href="FileUtilities.scala.html#6450">FileUtilities</a></span>.<span class="typed"><span class="type">=&gt; java.io.File</span><a href="FileUtilities.scala.html#9594">sbtJar</a></span>.<span class="typed"><span class="type">()java.lang.String</span><a id="9662">getCanonicalPath</a></span>) <span class="typed"><span class="type">(java.lang.String)List[java.lang.String]</span><a href="#34354" id="6908">::</a></span>
			(<span class="typed"><span class="type">java.lang.String(&quot;-P:sbt-analyzer:callback:&quot;)</span><span class="string">&quot;-P:sbt-analyzer:callback:&quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">Int</span><a href="#34348">id</a></span>.<span class="typed"><span class="type">()java.lang.String</span><a id="3481">toString</a></span>) <span class="typed"><span class="type">(java.lang.String)List[java.lang.String]</span><a href="#34355" id="6908">::</a></span> <span class="typed"><span class="type">object Nil</span><a id="316">Nil</a></span>) <span class="typed"><span class="type">(Iterable[java.lang.String])List[java.lang.String]</span><a id="6914">++</a></span> <span class="typed"><span class="type">=&gt; Seq[String]</span><a href="#33446">options</a></span>
		<span class="keyword">val</span> <span class="typed"><span class="type">Option[String]</span><a id="34350">r</a></span> = <span class="typed"><span class="type">(String,Iterable[sbt.Path],String,sbt.Path,Iterable[String],sbt.Logger)Option[String]</span><a href="Compile.scala.html#6895">Compile</a></span>(<span class="typed"><span class="type">=&gt; String</span><a href="#33439">label</a></span>, <span class="typed"><span class="type">=&gt; Iterable[sbt.Path]</span><a href="#33573">dirtySources</a></span>, <span class="typed"><span class="type">String</span><a href="#34347">classpathString</a></span>, <span class="typed"><span class="type">=&gt; sbt.Path</span><a href="#33441">outputDirectory</a></span>, <span class="typed"><span class="type">List[java.lang.String]</span><a href="#34349">allOptions</a></span>, <span class="typed"><span class="type">=&gt; sbt.Logger</span><a href="#33411">log</a></span>)
		<span class="typed"><span class="type">object sbt.AnalysisCallback</span><a href="AnalysisCallback.scala.html#6317">AnalysisCallback</a></span>.<span class="typed"><span class="type">(Int)Unit</span><a href="AnalysisCallback.scala.html#33764">unregister</a></span>(<span class="typed"><span class="type">Int</span><a href="#34348">id</a></span>)
		<span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span>(<span class="typed"><span class="type">=&gt; sbt.Logger</span><a href="#33411">log</a></span>.<span class="typed"><span class="type">(sbt.Level.Value)Boolean</span><a href="Logger.scala.html#8464">atLevel</a></span>(<span class="typed"><span class="type">object sbt.Level</span><a href="Logger.scala.html#6774">Level</a></span>.<span class="typed"><span class="type">=&gt; sbt.Level.Value</span><a href="Logger.scala.html#21788">Debug</a></span>))
		{
			<span class="comment">/** This checks that the plugin accounted for all classes in the output directory.*/</span>
			<span class="keyword">val</span> <span class="typed"><span class="type">scala.collection.mutable.Set[sbt.Path]</span><a id="34382">classes</a></span> = scala.collection.mutable.<span class="typed"><span class="type">(sbt.Path*)scala.collection.mutable.Set[sbt.Path]</span><span id="22731"><a id="8019">HashSet</a></span></span>(<span class="typed"><span class="type">=&gt; CompileConditional.this.AnalysisType</span><a href="#33382">analysis</a></span>.<span class="typed"><span class="type">=&gt; scala.collection.mutable.Set[sbt.Path]</span><a href="Analysis.scala.html#22429">allProducts</a></span>.<span class="typed"><span class="type">=&gt; Seq[sbt.Path]</span><a id="7389">toSeq</a></span>: _*)
			<span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="34383">missed</a></span> = <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>
			<span class="keyword">for</span>(<span class="typed"><span class="type">((sbt.Path) =&gt; Unit)Unit</span><span id="7365"><a id="34391">c</a></span></span> &lt;- (<span class="typed"><span class="type">=&gt; sbt.Path</span><a href="#33441">outputDirectory</a></span> <span class="typed"><span class="type">(sbt.FileFilter)sbt.PathFinder</span><a href="Path.scala.html#9621">**</a></span> <span class="typed"><span class="type">(String)sbt.NameFilter</span><a href="NameFilter.scala.html#34387">GlobFilter</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;*.class&quot;)</span><span class="string">&quot;*.class&quot;</span></span>)).<span class="typed"><span class="type">=&gt; scala.collection.Set[sbt.Path]</span><a href="Path.scala.html#9627">get</a></span>)
			{
				<span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span>(<span class="typed"><span class="type">=&gt; Boolean</span><a id="2728">!</a></span><span class="typed"><span class="type">scala.collection.mutable.Set[sbt.Path]</span><a href="#34382">classes</a></span>.<span class="typed"><span class="type">(sbt.Path)Boolean</span><a id="22294">contains</a></span>(<span class="typed"><span class="type">sbt.Path</span><a href="#34391">c</a></span>))
				{
					<span class="typed"><span class="type">Int</span><a href="#34383">missed</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3128">+=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
					<span class="typed"><span class="type">=&gt; sbt.Logger</span><a href="#33411">log</a></span>.<span class="typed"><span class="type">(=&gt; String)Unit</span><a href="Logger.scala.html#8466">debug</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;Missed class: &quot;)</span><span class="string">&quot;Missed class: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">sbt.Path</span><a href="#34391">c</a></span>)
				}
			}
			<span class="typed"><span class="type">=&gt; sbt.Logger</span><a href="#33411">log</a></span>.<span class="typed"><span class="type">(=&gt; String)Unit</span><a href="Logger.scala.html#8466">debug</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;Total missed classes: &quot;)</span><span class="string">&quot;Total missed classes: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">Int</span><a href="#34383">missed</a></span>)
		}
		<span class="typed"><span class="type">Option[String]</span><a href="#34350">r</a></span>
	}
	<span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">()Unit</span><a id="33431">finishHashes</a></span>()
	{
		<span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span>(<span class="typed"><span class="type">=&gt; sbt.ChangeDetection.Value</span><a href="#33421">changeDetectionMethod</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3490">==</a></span> <span class="typed"><span class="type">=&gt; sbt.ChangeDetection.Value</span><a href="#34221">LastModifiedOnly</a></span>)
			<span class="typed"><span class="type">=&gt; CompileConditional.this.AnalysisType</span><a href="#33382">analysis</a></span>.<span class="typed"><span class="type">()Unit</span><a href="Analysis.scala.html#22466">clearHashes</a></span>()
		<span class="keyword">else</span>
		{
			<span class="keyword">for</span>(<span class="typed"><span class="type">(((sbt.Path, Option[Array[Byte]])) =&gt; Unit)Unit</span><span id="7365"><a href="#34417" id="7238">(</a></span></span><span class="typed"><span class="type">sbt.Path</span><span id="34418"><a id="34422">path</a></span></span>, <span class="typed"><span class="type">Option[Array[Byte]]</span><span id="34419"><a id="34423">hash</a></span></span>) &lt;- <span class="typed"><span class="type">=&gt; scala.collection.mutable.Buffer[(sbt.Path, Option[Array[Byte]])]</span><a href="#33426">newHashes</a></span>)
			{
				<span class="typed"><span class="type">Option[Array[Byte]]</span><a href="#34423">hash</a></span> <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span>
				{
					<span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object None</span><a id="517">None</a></span> =&gt; <span class="typed"><span class="type">=&gt; CompileConditional.this.AnalysisType</span><a href="#33382">analysis</a></span>.<span class="typed"><span class="type">(sbt.Path)Unit</span><a href="Analysis.scala.html#22464">clearHash</a></span>(<span class="typed"><span class="type">sbt.Path</span><a href="#34422">path</a></span>)
					<span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">Some</a>(<span class="typed"><span class="type">Array[Byte]</span><a id="34424">hash</a></span>) =&gt; <span class="typed"><span class="type">=&gt; CompileConditional.this.AnalysisType</span><a href="#33382">analysis</a></span>.<span class="typed"><span class="type">(sbt.Path,Array[Byte])Unit</span><a href="Analysis.scala.html#22463">setHash</a></span>(<span class="typed"><span class="type">sbt.Path</span><a href="#34422">path</a></span>, <span class="typed"><span class="type">Array[Byte]</span><a href="#34424">hash</a></span>)
				}
			}
		}
		<span class="typed"><span class="type">=&gt; scala.collection.mutable.Buffer[(sbt.Path, Option[Array[Byte]])]</span><a href="#33426">newHashes</a></span>.<span class="typed"><span class="type">()Unit</span><a id="22704">clear</a></span>()
	}
	<span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(Iterable[sbt.Path])Unit</span><a id="33432">checkClasspath</a></span>(<span class="typed"><span class="type">Iterable[sbt.Path]</span><a id="34351">cp</a></span>: <span class="typed"><span class="type">Iterable[sbt.Path]</span><a id="384">Iterable</a></span>[Path])
	{
		<span class="keyword">import</span> scala.collection.mutable.{HashMap, HashSet, Set}
		<span class="keyword">val</span> <span class="typed"><span class="type">scala.collection.mutable.HashMap[String,scala.collection.mutable.Set[sbt.Path]]</span><a id="34426">collisions</a></span> = <span class="typed"><span class="type">scala.collection.mutable.HashMap[String,scala.collection.mutable.Set[sbt.Path]]</span><span class="keyword">new</span></span> <span class="typed"><span class="type">scala.collection.mutable.HashMap[String,scala.collection.mutable.Set[sbt.Path]]</span><a id="8204">HashMap</a></span>[String, Set[Path]]
		<span class="keyword">for</span>(<span class="typed"><span class="type">((sbt.Path) =&gt; Unit)Unit</span><span id="7365"><span id="7359"><span id="34428"><a id="34433">jar</a></span></span></span></span> &lt;- <span class="typed"><span class="type">Iterable[sbt.Path]</span><a href="#34351">cp</a></span> <span class="keyword">if</span> <span class="typed"><span class="type">object sbt.ClasspathUtilities</span><a href="ClasspathUtilities.scala.html#6466">ClasspathUtilities</a></span>.<span class="typed"><span class="type">(sbt.Path)Boolean</span><a href="ClasspathUtilities.scala.html#34256">isArchive</a></span>(<span class="typed"><span class="type">sbt.Path</span><a href="#34428">jar</a></span>))
			<span class="typed"><span class="type">scala.collection.mutable.HashMap[String,scala.collection.mutable.Set[sbt.Path]]</span><a href="#34426">collisions</a></span>.<span class="typed"><span class="type">(String,=&gt; scala.collection.mutable.Set[sbt.Path])scala.collection.mutable.Set[sbt.Path]</span><a id="21411">getOrElseUpdate</a></span>(<span class="typed"><span class="type">sbt.Path</span><a href="#34433">jar</a></span>.<span class="typed"><span class="type">=&gt; java.io.File</span><a href="Path.scala.html#9638">asFile</a></span>.<span class="typed"><span class="type">()java.lang.String</span><a id="9655">getName</a></span>, <span class="typed"><span class="type">scala.collection.mutable.HashSet[sbt.Path]</span><span class="keyword">new</span></span> <span class="typed"><span class="type">scala.collection.mutable.HashSet[sbt.Path]</span><a id="8018">HashSet</a></span>[Path]) <span class="typed"><span class="type">(sbt.Path)Unit</span><a id="22478">+=</a></span> <span class="typed"><span class="type">sbt.Path</span><a href="#34433">jar</a></span>
		<span class="keyword">for</span>(<span class="typed"><span class="type">(((String, scala.collection.mutable.Set[sbt.Path])) =&gt; Unit)Unit</span><span id="7365"><a href="#34436" id="7359">(</a></span></span><span class="typed"><span class="type">String</span><span id="34437"><a id="34441">name</a></span></span>, <span class="typed"><span class="type">scala.collection.mutable.Set[sbt.Path]</span><span id="34438"><a id="34442">jars</a></span></span>) &lt;- <span class="typed"><span class="type">scala.collection.mutable.HashMap[String,scala.collection.mutable.Set[sbt.Path]]</span><a href="#34426">collisions</a></span>)
		{
			<span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span>(<span class="typed"><span class="type">scala.collection.mutable.Set[sbt.Path]</span><a href="#34442">jars</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="22293">size</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3126">&gt;</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>)
			{
				<span class="typed"><span class="type">=&gt; sbt.Logger</span><a href="#33411">log</a></span>.<span class="typed"><span class="type">(=&gt; String)Unit</span><a href="Logger.scala.html#8468">warn</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;Possible duplicate classpath locations for jar &quot;)</span><span class="string">&quot;Possible duplicate classpath locations for jar &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">String</span><a href="#34441">name</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;: &quot;)</span><span class="string">&quot;: &quot;</span></span>)
				<span class="keyword">for</span>(<span class="typed"><span class="type">((sbt.Path) =&gt; Unit)Unit</span><span id="7365"><a id="34445">jar</a></span></span> &lt;- <span class="typed"><span class="type">scala.collection.mutable.Set[sbt.Path]</span><a href="#34442">jars</a></span>) <span class="typed"><span class="type">=&gt; sbt.Logger</span><a href="#33411">log</a></span>.<span class="typed"><span class="type">(=&gt; String)Unit</span><a href="Logger.scala.html#8468">warn</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;\011&quot;)</span><span class="string">&quot;\t&quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5774">+</a></span> <span class="typed"><span class="type">sbt.Path</span><a href="#34445">jar</a></span>.<span class="typed"><span class="type">=&gt; java.io.File</span><a href="Path.scala.html#9638">asFile</a></span>.<span class="typed"><span class="type">()java.lang.String</span><a id="9662">getCanonicalPath</a></span>)
			}
		}
	}
	
	<span class="keyword">protected</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; sbt.AnalysisCallback</span><a id="33433">analysisCallback</a></span>: <span class="typed"><span class="type">sbt.AnalysisCallback</span><a href="AnalysisCallback.scala.html#6319">AnalysisCallback</a></span> = <span class="typed"><span class="type">CompileConditional.this.CompileAnalysisCallback</span><span class="keyword">new</span></span> <span class="typed"><span class="type">CompileConditional.this.CompileAnalysisCallback</span><a href="#33434">CompileAnalysisCallback</a></span>
	<span class="keyword">protected</span> <span class="keyword">class</span> <span class="typed"><span class="type">class CompileAnalysisCallback extends sbt.BasicAnalysisCallback with ScalaObject</span><a id="33434">CompileAnalysisCallback</a></span> <span class="keyword">extends</span> <span class="typed"><span class="type">sbt.BasicAnalysisCallback</span><a href="AnalysisCallback.scala.html#6320">BasicAnalysisCallback</a></span>(<span class="typed"><span class="type">=&gt; sbt.Path</span><a href="#33444">projectPath</a></span>, <span class="typed"><span class="type">=&gt; Iterable[String]</span><a href="#33447">testDefinitionClassNames</a></span>, <span class="typed"><span class="type">=&gt; CompileConditional.this.AnalysisType</span><a href="#33382">analysis</a></span>)
	{
		<span class="keyword">def</span> <span class="typed"><span class="type">(sbt.Path,String,String,Boolean)Unit</span><a id="34447">foundSubclass</a></span>(<span class="typed"><span class="type">sbt.Path</span><a id="34449">sourcePath</a></span>: <span class="typed"><span class="type">sbt.Path</span><a href="Path.scala.html#6796">Path</a></span>, <span class="typed"><span class="type">String</span><a id="34450">subclassName</a></span>: <span class="typed"><span class="type">String</span><a id="1842">String</a></span>, <span class="typed"><span class="type">String</span><a id="34451">superclassName</a></span>: <span class="typed"><span class="type">String</span><a id="1842">String</a></span>, <span class="typed"><span class="type">Boolean</span><a id="34452">isModule</a></span>: <span class="typed"><span class="type">Boolean</span><a id="2151">Boolean</a></span>)
		{
			<span class="typed"><span class="type">=&gt; sbt.CompileAnalysis</span><a href="AnalysisCallback.scala.html#33830">analysis</a></span>.<span class="typed"><span class="type">(sbt.Path,sbt.TestDefinition)Unit</span><a href="Analysis.scala.html#22461">addTest</a></span>(<span class="typed"><span class="type">sbt.Path</span><a href="#34449">sourcePath</a></span>, <span class="typed"><span class="type">(Boolean,String,String)sbt.TestDefinition</span><a href="impl/TestParser.scala.html#33876">TestDefinition</a></span>(<span class="typed"><span class="type">Boolean</span><a href="#34452">isModule</a></span>, <span class="typed"><span class="type">String</span><a href="#34450">subclassName</a></span>, <span class="typed"><span class="type">String</span><a href="#34451">superclassName</a></span>))
		}
	}
}
<span class="keyword">object</span> <span class="typed"><span class="type">object sbt.ChangeDetection</span><a id="6353">ChangeDetection</a></span> <span class="keyword">extends</span> <span class="typed"><span class="type">Enumeration</span><span id="1143"><a id="21278">Enumeration</a></span></span>
{
	<span class="keyword">val</span> <span class="typed"><span class="type">sbt.ChangeDetection.Value</span><span id="34222"><a id="34221">LastModifiedOnly</a></span></span>, <span class="typed"><span class="type">sbt.ChangeDetection.Value</span><span id="34224"><a id="34223">HashOnly</a></span></span>, <span class="typed"><span class="type">sbt.ChangeDetection.Value</span><span id="34226"><a id="34225">HashAndLastModified</a></span></span>, <span class="typed"><span class="type">sbt.ChangeDetection.Value</span><span id="34228"><a id="34227">HashAndProductsExist</a></span></span> = <span class="typed"><span class="type">=&gt; sbt.ChangeDetection.Value</span><a id="21317">Value</a></span>
}
        </pre>
    </body>
</html>