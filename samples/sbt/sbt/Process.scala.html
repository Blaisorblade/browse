<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>sbt/Process.scala</title>
        <script type="text/javascript" src="../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../style.css" title="Style">
    </head>
    <body onload="initializeLinked()">
        <pre>
<span class="comment">/* sbt -- Simple Build Tool
 * Copyright 2009 Mark Harrah
 */</span>
 
<span class="comment">/** The beginnings of a library for interacting with native processes.  It is not ready
 * for general use. */</span>
<span class="keyword">package</span> sbt

<span class="keyword">import</span> java.lang.ProcessBuilder
<span class="keyword">import</span> java.io.{File, InputStream, OutputStream}

<span class="keyword">class</span> <a title="class ProcessOptions extends java.lang.Object with NotNull with ScalaObject" id="6382">ProcessOptions</a>(<span class="keyword">val</span> <span id="45570"><span id="45569"><a title="java.io.File" id="45587">workingDirectory</a></span></span>: <a title="java.io.File" id="3559">File</a>, <span class="keyword">val</span> <span id="45572"><span id="45571"><a title="Boolean" id="45588">redirectErrorStream</a></span></span>: <a title="Boolean" id="2060">Boolean</a>,
	<span class="keyword">val</span> <span id="45574"><span id="45573"><a title="Map[String,String]" id="45589">environment</a></span></span>: <a title="Map[String,String]" id="25336">Map</a>[String, String], <span class="keyword">val</span> <span id="45576"><span id="45575"><a title="Boolean" id="45590">useDefaultEnvironment</a></span></span>: <a title="Boolean" id="2060">Boolean</a>) <span class="keyword">extends</span> <a title="NotNull" id="187">NotNull</a>
{
	<span class="keyword">def</span> <a title="(java.io.File)sbt.ProcessOptions" id="45578">newDirectory</a>(<a title="java.io.File" id="45591">dir</a>: <a title="java.io.File" id="3559">File</a>) = <span title="sbt.ProcessOptions" class="keyword">new</span> <a href="#6382" title="sbt.ProcessOptions">ProcessOptions</a>(<a href="#45591" title="java.io.File">dir</a>, <a href="#45571" title="=&gt; Boolean">redirectErrorStream</a>, <a href="#45573" title="=&gt; Map[String,String]">environment</a>, <a href="#45575" title="=&gt; Boolean">useDefaultEnvironment</a>)
	<span class="keyword">def</span> <a title="=&gt; sbt.ProcessOptions" id="45579">mergeErrorStream</a> = <span title="sbt.ProcessOptions" class="keyword">new</span> <a href="#6382" title="sbt.ProcessOptions">ProcessOptions</a>(<a href="#45569" title="=&gt; java.io.File">workingDirectory</a>, <span title="Boolean(true)" class="keyword">true</span>, <a href="#45573" title="=&gt; Map[String,String]">environment</a>, <a href="#45575" title="=&gt; Boolean">useDefaultEnvironment</a>)
	<span class="keyword">def</span> <a title="(Map[String,String])sbt.ProcessOptions" id="45580">setEnvironment</a>(<a title="Map[String,String]" id="45595">env</a>: <a title="Map[String,String]" id="25336">Map</a>[String, String]) =
		<span title="sbt.ProcessOptions" class="keyword">new</span> <a href="#6382" title="sbt.ProcessOptions">ProcessOptions</a>(<a href="#45569" title="=&gt; java.io.File">workingDirectory</a>, <a href="#45571" title="=&gt; Boolean">redirectErrorStream</a>, <a href="#45595" title="Map[String,String]">env</a>, <span title="Boolean(true)" class="keyword">true</span>)
	<span class="keyword">def</span> <a title="(Iterable[(String, String)])sbt.ProcessOptions" id="45581">modifyEnvironment</a>(<a title="Iterable[(String, String)]" id="45597">modifiedMappings</a>: <a title="Iterable[(String, String)]" id="358">Iterable</a>[(String, String)]) = 
		<span title="sbt.ProcessOptions" class="keyword">new</span> <a href="#6382" title="sbt.ProcessOptions">ProcessOptions</a>(<a href="#45569" title="=&gt; java.io.File">workingDirectory</a>, <a href="#45571" title="=&gt; Boolean">redirectErrorStream</a>, <a href="#45573" title="=&gt; Map[String,String]">environment</a> <a title="(Iterable[(String, String)])scala.collection.immutable.Map[String,String]" id="39594">++</a> <a href="#45597" title="Iterable[(String, String)]">modifiedMappings</a>, <a href="#45575" title="=&gt; Boolean">useDefaultEnvironment</a>)
}
<span class="keyword">class</span> <a title="class ProcessIO extends java.lang.Object with NotNull with ScalaObject" id="6383">ProcessIO</a>(<span class="keyword">val</span> <span id="45630"><span id="45629"><a title="(java.io.OutputStream) =&gt; Unit" id="45642">connectInput</a></span></span>: OutputStream =&gt; Unit, <span class="keyword">val</span> <span id="45632"><span id="45631"><a title="(java.io.InputStream) =&gt; Unit" id="45643">connectOutput</a></span></span>: InputStream =&gt; Unit,
	<span class="keyword">val</span> <span id="45634"><span id="45633"><a title="(java.io.InputStream) =&gt; Unit" id="45644">connectError</a></span></span>: InputStream =&gt; Unit) <span class="keyword">extends</span> <a title="NotNull" id="187">NotNull</a>
{
	<span class="keyword">def</span> <a title="()sbt.ProcessIO" id="45636" class="keyword">this</a>() = <a href="#6383" title="ProcessIO.this.type" class="keyword">this</a>(<a href="#6384" title="object sbt.ProcessIO">ProcessIO</a>.<a href="#45657" title="(java.io.Closeable)Unit">close</a>, <a href="#6384" title="object sbt.ProcessIO">ProcessIO</a>.<a href="#45658" title="(java.io.InputStream)Unit">readFully</a>, <a href="#6384" title="object sbt.ProcessIO">ProcessIO</a>.<a href="#45658" title="(java.io.InputStream)Unit">readFully</a>)
	<span class="keyword">def</span> <a title="(sbt.Logger)sbt.ProcessIO" id="45637" class="keyword">this</a>(<a title="sbt.Logger" id="45649">log</a>: <a href="Logger.scala.html#6667" title="sbt.Logger">Logger</a>) = <a href="#6383" title="ProcessIO.this.type" class="keyword">this</a>(<a href="#6384" title="object sbt.ProcessIO">ProcessIO</a>.<a href="#45657" title="(java.io.Closeable)Unit">close</a>, <a href="#6384" title="object sbt.ProcessIO">ProcessIO</a>.<a href="#45660" title="(sbt.Logger,sbt.Level.Value)(java.io.InputStream)Unit">processFully</a>(<a href="#45649" title="sbt.Logger">log</a>, <a href="Logger.scala.html#6675" title="object sbt.Level">Level</a>.<a href="Logger.scala.html#20854" title="=&gt; sbt.Level.Value">Info</a>), <a href="#6384" title="object sbt.ProcessIO">ProcessIO</a>.<a href="#45660" title="(sbt.Logger,sbt.Level.Value)(java.io.InputStream)Unit">processFully</a>(<a href="#45649" title="sbt.Logger">log</a>, <a href="Logger.scala.html#6675" title="object sbt.Level">Level</a>.<a href="Logger.scala.html#20858" title="=&gt; sbt.Level.Value">Error</a>))
}
<span class="keyword">object</span> <a title="object sbt.ProcessIO" id="6384">ProcessIO</a>
{
	<span class="keyword">import</span> java.io.{BufferedReader, InputStreamReader}
	<span class="keyword">def</span> <a title="(java.io.Closeable)Unit" id="45657">close</a>(<a title="java.io.Closeable" id="45668">c</a>: java.io.<a title="java.io.Closeable" id="3535">Closeable</a>) { <a href="#45668" title="java.io.Closeable">c</a>.<a title="()Unit" id="24760">close</a>() }
	<span class="keyword">def</span> <a title="(java.io.InputStream)Unit" id="45658">readFully</a>(<a title="java.io.InputStream" id="45671">i</a>: <a title="java.io.InputStream" id="3634">InputStream</a>) =
	{
		<span class="keyword">val</span> <a title="Array[Byte]" id="45673">buffer</a> = <span title="Array[Byte]" class="keyword">new</span> <a title="Array[Byte]" id="1003">Array</a>[Byte](<span title="Int(8192)" class="int">8192</span>)
		<span class="keyword">def</span> <a title="()Unit" id="45674">readFully</a>()
		{
			<span title="Unit" class="keyword">if</span>(<a href="#45671" title="java.io.InputStream">i</a>.<a title="(Array[Byte])Int" id="22799">read</a>(<a href="#45673" title="Array[Byte]">buffer</a>) <a title="(Int)Boolean" id="3036">&gt;=</a> <span title="Int(0)" class="int">0</span>)
				<a href="#45674" title="()Unit">readFully</a>()
		}
		<a href="#45659" title="(=&gt; Unit)Unit">newThread</a>(<span class="keyword">try</span> { <a href="#45674" title="()Unit">readFully</a>() } <span class="keyword">finally</span> { <a href="#45671" title="java.io.InputStream">i</a>.<a title="()Unit" id="22803">close</a>() })
	}
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(=&gt; Unit)Unit" id="45659">newThread</a>(<a title="=&gt; Unit" id="45678">action</a>: =&gt; Unit)
	{
		<span class="keyword">val</span> <a title="&lt;refinement&gt; extends java.lang.Object with java.lang.Runnable" id="45723">runnable</a> = <a title="template $anon extends java.lang.Object with java.lang.Runnable" id="45724" class="keyword">new</a> <a title="java.lang.Runnable" id="1955">Runnable</a> { <span class="keyword">def</span> <a title="()Unit" id="45726">run</a>() { <a href="#45678" title="=&gt; Unit">action</a> } }
		(<a title="(java.lang.Runnable)java.lang.Thread" id="35645" class="keyword">new</a> <a title="java.lang.Thread" id="1973">Thread</a>(<a href="#45723" title="&lt;refinement&gt; extends java.lang.Object with java.lang.Runnable">runnable</a>)).<a title="()Unit" id="35652">start</a>()
	}
	<span class="keyword">def</span> <a title="(sbt.Logger,sbt.Level.Value)(java.io.InputStream)Unit" id="45660">processFully</a>(<a title="sbt.Logger" id="45699">log</a>: <a href="Logger.scala.html#6667" title="sbt.Logger">Logger</a>, <a title="sbt.Level.Value" id="45700">level</a>: Level.<a title="sbt.Level.Value" id="20345">Value</a>)(<a title="java.io.InputStream" id="45701">i</a>: <a title="java.io.InputStream" id="3634">InputStream</a>) { <a href="#45661" title="((String) =&gt; Unit)(java.io.InputStream)Unit">processFully</a>(<a title="String" id="45779">x</a> =&gt; <a href="#45699" title="sbt.Logger">log</a>.<a href="Logger.scala.html#8356" title="(sbt.Level.Value,=&gt; String)Unit">log</a>(<a href="#45700" title="sbt.Level.Value">level</a>, <a href="#45779" title="String">x</a>))(<a href="#45701" title="java.io.InputStream">i</a>) }
	<span class="comment">// processLine will be called from a new thread</span>
	<span class="keyword">def</span> <a title="((String) =&gt; Unit)(java.io.InputStream)Unit" id="45661">processFully</a>(<a title="(String) =&gt; Unit" id="45693">processLine</a>: String =&gt; Unit)(<a title="java.io.InputStream" id="45694">i</a>: <a title="java.io.InputStream" id="3634">InputStream</a>)
	{
		<span class="keyword">def</span> <a title="(java.io.BufferedReader)Unit" id="45785">readFully</a>(<a title="java.io.BufferedReader" id="45786">reader</a>: <a title="java.io.BufferedReader" id="3439">BufferedReader</a>)
		{
			<span class="keyword">val</span> <a title="java.lang.String" id="45787">line</a> = <a href="#45786" title="java.io.BufferedReader">reader</a>.<a title="()java.lang.String" id="44486">readLine</a>()
			<span title="Unit" class="keyword">if</span>(<a href="#45787" title="java.lang.String">line</a> <a title="(AnyRef)Boolean" id="5674">!=</a> <span title="Null(null)" class="keyword">null</span>)
			{
				<a href="#45693" title="(String)Unit" id="7221">processLine</a>(<a href="#45787" title="java.lang.String">line</a>)
				<a href="#45785" title="(java.io.BufferedReader)Unit">readFully</a>(<a href="#45786" title="java.io.BufferedReader">reader</a>)
			}
		}
		<a href="#45667" title="(java.io.InputStream)((java.io.BufferedReader) =&gt; Unit)Unit">withReader</a>(<a href="#45694" title="java.io.InputStream">i</a>)(<a href="#45785" title="(java.io.BufferedReader)Unit">readFully</a>)
	}
	<span class="keyword">def</span> <a title="[T]((T, String) =&gt; T,T)(java.io.InputStream)T" id="45662">fold</a>[<a title="&gt;: Nothing &lt;: Any" id="45664">T</a>](<a title="(T, String) =&gt; T" id="45798">process</a>: (T,String) =&gt; T, <a title="T" id="45799">initial</a>: <a href="#45664" title="T">T</a>)(<a title="java.io.InputStream" id="45800">i</a>: <a title="java.io.InputStream" id="3634">InputStream</a>): <a href="#45664" title="T">T</a> =
	{
		<span class="keyword">var</span> <a title="T" id="45801">v</a> = <a href="#45799" title="T">initial</a>
		<a href="#45661" title="((String) =&gt; Unit)(java.io.InputStream)Unit">processFully</a>( <a title="String" id="45804">line</a> =&gt; <a href="#45801" title="T">v</a> = <a href="#45798" title="(T,String)T" id="11936">process</a>(<a href="#45801" title="T">v</a>, <a href="#45804" title="String">line</a>)  )(<a href="#45800" title="java.io.InputStream">i</a>)
		<a href="#45801" title="T">v</a>
	}
	<span class="keyword">def</span> <a title="=&gt; sbt.ProcessIO" id="45665">standard</a>: <a href="#6383" title="sbt.ProcessIO">ProcessIO</a> = <a href="#45666" title="((java.io.OutputStream) =&gt; Unit)sbt.ProcessIO">standard</a>(<a href="#45657" title="(java.io.Closeable)Unit">close</a>)
	<span class="keyword">def</span> <a title="((java.io.OutputStream) =&gt; Unit)sbt.ProcessIO" id="45666">standard</a>(<a title="(java.io.OutputStream) =&gt; Unit" id="45807">toProcessInput</a>: OutputStream =&gt; Unit): <a href="#6383" title="sbt.ProcessIO">ProcessIO</a> =
		 <span title="sbt.ProcessIO" class="keyword">new</span> <a href="#6383" title="sbt.ProcessIO">ProcessIO</a>(<a href="#45807" title="(java.io.OutputStream) =&gt; Unit">toProcessInput</a>, <a href="#45661" title="((String) =&gt; Unit)(java.io.InputStream)Unit">processFully</a>(<a title="object java.lang.System" id="1776">System</a>.<a title="java.io.PrintStream" id="24443">out</a>.<a href="#45818" title="(java.lang.String)Unit" id="34583">println</a>), <a href="#45661" title="((String) =&gt; Unit)(java.io.InputStream)Unit">processFully</a>(<a title="object java.lang.System" id="1776">System</a>.<a title="java.io.PrintStream" id="24444">err</a>.<a href="#45828" title="(java.lang.String)Unit" id="34583">println</a>))
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(java.io.InputStream)((java.io.BufferedReader) =&gt; Unit)Unit" id="45667">withReader</a>(<a title="java.io.InputStream" id="45790">i</a>: <a title="java.io.InputStream" id="3634">InputStream</a>)(<a title="(java.io.BufferedReader) =&gt; Unit" id="45791">f</a>: BufferedReader =&gt;Unit) =
	{
		<span class="keyword">val</span> <a title="java.io.BufferedReader" id="45793">reader</a> = <a title="(java.io.Reader)java.io.BufferedReader" id="44482" class="keyword">new</a> <a title="java.io.BufferedReader" id="3439">BufferedReader</a>(<span title="java.io.InputStreamReader" class="keyword">new</span> <a title="java.io.InputStreamReader" id="3631">InputStreamReader</a>(<a href="#45790" title="java.io.InputStream">i</a>))
		<a href="#45659" title="(=&gt; Unit)Unit">newThread</a>(<span class="keyword">try</span> { <a href="#45791" title="(java.io.BufferedReader)Unit" id="7221">f</a>(<a href="#45793" title="java.io.BufferedReader">reader</a>) } <span class="keyword">finally</span> { <a href="#45793" title="java.io.BufferedReader">reader</a>.<a title="()Unit" id="44492">close</a>() })
	}
}
<span class="keyword">final</span> <span class="keyword">class</span> <a title="class ProcessRunner extends java.lang.Object with NotNull with ScalaObject" id="6386">ProcessRunner</a>(<span class="keyword">val</span> <span id="45840"><span id="45839"><a title="String" id="45866">command</a></span></span>: <a title="String" id="1751">String</a>, <span class="keyword">val</span> <span id="45842"><span id="45841"><a title="Seq[String]" id="45867">arguments</a></span></span>: <a title="Seq[String]" id="715">Seq</a>[String], <span class="keyword">val</span> <span id="45844"><span id="45843"><a title="sbt.ProcessOptions" id="45868">options</a></span></span>: <a href="#6382" title="sbt.ProcessOptions">ProcessOptions</a>, <span class="keyword">val</span> <span id="45846"><span id="45845"><a title="sbt.ProcessIO" id="45869">io</a></span></span>: <a href="#6383" title="sbt.ProcessIO">ProcessIO</a>) <span class="keyword">extends</span> <a title="NotNull" id="187">NotNull</a>
{
	<span id="5881"><a title="(Boolean,Any)Unit" id="770">require</a></span>(<a title="=&gt; Boolean" id="2637">!</a><a href="#45839" title="=&gt; String">command</a>.<span id="6012"><span id="770"><a title="implicit scala.Predef.stringWrapper : (String)scala.runtime.RichString" id="5751">trim</a></span></span>.<a title="=&gt; Boolean" id="7108">isEmpty</a>, <span title="java.lang.String(&quot;Command cannot be empty.&quot;)" class="string">&quot;Command cannot be empty.&quot;</span>)
	<span class="keyword">def</span> <a title="(String,Seq[String],java.io.File,Boolean)sbt.ProcessRunner" id="45848" class="keyword">this</a>(<a title="String" id="45886">command</a>: <a title="String" id="1751">String</a>, <a title="Seq[String]" id="45887">arguments</a>: <a title="Seq[String]" id="715">Seq</a>[String], <a title="java.io.File" id="45888">workingDirectory</a>: <a title="java.io.File" id="3559">File</a>, <a title="Boolean" id="45889">redirectErrorStream</a>: <a title="Boolean" id="2060">Boolean</a>) =
		<a href="#6386" title="ProcessRunner.this.type" class="keyword">this</a>(<a href="#45886" title="String">command</a>, <a href="#45887" title="Seq[String]">arguments</a>, <span title="sbt.ProcessOptions" class="keyword">new</span> <a href="#6382" title="sbt.ProcessOptions">ProcessOptions</a>(<a href="#45888" title="java.io.File">workingDirectory</a>, <a href="#45889" title="Boolean">redirectErrorStream</a>, <span id="5869"><a title="=&gt; collection.immutable.Map.type" id="770">Map</a></span>.<a title="scala.collection.immutable.Map[String,Nothing]" id="39582">empty</a>, <span title="Boolean(true)" class="keyword">true</span>), <a href="#45636" title="()sbt.ProcessIO" class="keyword">new</a> <a href="#6383" title="sbt.ProcessIO">ProcessIO</a>)
	<span class="keyword">def</span> <a title="(String,Seq[String],java.io.File)sbt.ProcessRunner" id="45849" class="keyword">this</a>(<a title="String" id="45902">command</a>: <a title="String" id="1751">String</a>, <a title="Seq[String]" id="45903">arguments</a>: <a title="Seq[String]" id="715">Seq</a>[String], <a title="java.io.File" id="45904">workingDirectory</a>: <a title="java.io.File" id="3559">File</a>) = <a href="#45848" title="(String,Seq[String],java.io.File,Boolean)sbt.ProcessRunner" class="keyword">this</a>(<a href="#45902" title="String">command</a>, <a href="#45903" title="Seq[String]">arguments</a>, <a href="#45904" title="java.io.File">workingDirectory</a>, <span title="Boolean(false)" class="keyword">false</span>)
	<span class="keyword">def</span> <a title="(String,Seq[String])sbt.ProcessRunner" id="45850" class="keyword">this</a>(<a title="String" id="45900">command</a>: <a title="String" id="1751">String</a>, <a title="Seq[String]" id="45901">arguments</a>: <a title="Seq[String]" id="715">Seq</a>[String]) = <a href="#45849" title="(String,Seq[String],java.io.File)sbt.ProcessRunner" class="keyword">this</a>(<a href="#45900" title="String">command</a>, <a href="#45901" title="Seq[String]">arguments</a>, <span title="java.io.File" class="keyword">new</span> <a title="java.io.File" id="3559">File</a>(<span title="java.lang.String(&quot;.&quot;)" class="string">&quot;.&quot;</span>))
	<span class="keyword">def</span> <a title="(String,String,String*)sbt.ProcessRunner" id="45851" class="keyword">this</a>(<a title="String" id="45897">command</a>: <a title="String" id="1751">String</a>, <a title="String" id="45898">argument0</a>: <a title="String" id="1751">String</a>, <a title="String*" id="45899">arguments</a>: <a title="String*" id="2631">String</a>*) = <a href="#45849" title="(String,Seq[String],java.io.File)sbt.ProcessRunner" class="keyword">this</a>(<a href="#45897" title="String">command</a>, <a href="#45898" title="String">argument0</a> <a href="#45935" title="(String)List[String]" id="6808">::</a> <a href="#45899" title="String*">arguments</a>.<a title="=&gt; List[String]" id="7279">toList</a>, <span title="java.io.File" class="keyword">new</span> <a title="java.io.File" id="3559">File</a>(<span title="java.lang.String(&quot;.&quot;)" class="string">&quot;.&quot;</span>))
	<span class="keyword">def</span> <a title="(String)sbt.ProcessRunner" id="45852" class="keyword">this</a>(<a title="String" id="45892">command</a>: <a title="String" id="1751">String</a>) = <a href="#45850" title="(String,Seq[String])sbt.ProcessRunner" class="keyword">this</a>(<a href="#45892" title="String">command</a>, <a title="object Nil" id="299">Nil</a>)
	
	<span class="keyword">def</span> <a title="(java.io.File)sbt.ProcessRunner" id="45853">in</a>(<a title="java.io.File" id="45949">newDirectory</a>: <a title="java.io.File" id="3559">File</a>) = <span title="sbt.ProcessRunner" class="keyword">new</span> <a href="#6386" title="sbt.ProcessRunner">ProcessRunner</a>(<a href="#45839" title="=&gt; String">command</a>, <a href="#45841" title="=&gt; Seq[String]">arguments</a>, <a href="#45843" title="=&gt; sbt.ProcessOptions">options</a>.<a href="#45578" title="(java.io.File)sbt.ProcessOptions">newDirectory</a>(<a href="#45949" title="java.io.File">newDirectory</a>), <a href="#45845" title="=&gt; sbt.ProcessIO">io</a>)
	<span class="keyword">def</span> <a title="(Map[String,String])sbt.ProcessRunner" id="45854">withEnvironment</a>(<a title="Map[String,String]" id="45957">env</a>: <a title="Map[String,String]" id="25336">Map</a>[String, String]) =
		<span title="sbt.ProcessRunner" class="keyword">new</span> <a href="#6386" title="sbt.ProcessRunner">ProcessRunner</a>(<a href="#45839" title="=&gt; String">command</a>, <a href="#45841" title="=&gt; Seq[String]">arguments</a>, <a href="#45843" title="=&gt; sbt.ProcessOptions">options</a>.<a href="#45580" title="(Map[String,String])sbt.ProcessOptions">setEnvironment</a>(<a href="#45957" title="Map[String,String]">env</a>), <a href="#45845" title="=&gt; sbt.ProcessIO">io</a>)
	<span class="keyword">def</span> <a title="((String, String)*)sbt.ProcessRunner" id="45855">modifyEnvironment</a>(<a title="(String, String)*" id="45965">modifiedMappings</a>: <a title="(String, String)*" id="2631">(</a>String, String)*) =
		<span title="sbt.ProcessRunner" class="keyword">new</span> <a href="#6386" title="sbt.ProcessRunner">ProcessRunner</a>(<a href="#45839" title="=&gt; String">command</a>, <a href="#45841" title="=&gt; Seq[String]">arguments</a>, <a href="#45843" title="=&gt; sbt.ProcessOptions">options</a>.<a href="#45581" title="(Iterable[(String, String)])sbt.ProcessOptions">modifyEnvironment</a>(<a href="#45965" title="(String, String)*">modifiedMappings</a>), <a href="#45845" title="=&gt; sbt.ProcessIO">io</a>)
	<span class="keyword">def</span> <a title="=&gt; sbt.ProcessRunner" id="45856">mergeErrorStream</a> = <span title="sbt.ProcessRunner" class="keyword">new</span> <a href="#6386" title="sbt.ProcessRunner">ProcessRunner</a>(<a href="#45839" title="=&gt; String">command</a>, <a href="#45841" title="=&gt; Seq[String]">arguments</a>, <a href="#45843" title="=&gt; sbt.ProcessOptions">options</a>.<a href="#45579" title="=&gt; sbt.ProcessOptions">mergeErrorStream</a>, <a href="#45845" title="=&gt; sbt.ProcessIO">io</a>)
	<span class="keyword">def</span> <a title="(sbt.ProcessIO)sbt.ProcessRunner" id="45857">withIO</a>(<a title="sbt.ProcessIO" id="45981">pio</a>: <a href="#6383" title="sbt.ProcessIO">ProcessIO</a>) = <span title="sbt.ProcessRunner" class="keyword">new</span> <a href="#6386" title="sbt.ProcessRunner">ProcessRunner</a>(<a href="#45839" title="=&gt; String">command</a>, <a href="#45841" title="=&gt; Seq[String]">arguments</a>, <a href="#45843" title="=&gt; sbt.ProcessOptions">options</a>, <a href="#45981" title="sbt.ProcessIO">pio</a>)
	<span class="keyword">def</span> <a title="(sbt.Logger)sbt.ProcessRunner" id="45858">logIO</a>(<a title="sbt.Logger" id="45989">log</a>: <a href="Logger.scala.html#6667" title="sbt.Logger">Logger</a>) = <a href="#45857" title="(sbt.ProcessIO)sbt.ProcessRunner">withIO</a>(<a href="#45637" title="(sbt.Logger)sbt.ProcessIO" class="keyword">new</a> <a href="#6383" title="sbt.ProcessIO">ProcessIO</a>(<a href="#45989" title="sbt.Logger">log</a>))
	
	<span class="keyword">def</span> <a title="=&gt; sbt.SProcess" id="45859">run</a>: <a href="#6387" title="sbt.SProcess">SProcess</a> =
	{
		<span class="keyword">val</span> <a title="Array[String]" id="45998">commandArray</a> = (<a href="#45839" title="=&gt; String">command</a> <a href="#46004" title="(String)List[String]" id="6808">::</a> <a href="#45841" title="=&gt; Seq[String]">arguments</a>.<a title="=&gt; List[String]" id="7279">toList</a>).<a title="Array[String]" id="7138">toArray</a>
		<span class="keyword">val</span> <a title="java.lang.ProcessBuilder" id="45999">builder</a> = <a title="(java.lang.String*)java.lang.ProcessBuilder" id="46015" class="keyword">new</a> <a title="java.lang.ProcessBuilder" id="1787">ProcessBuilder</a>(<a href="#45998" title="Array[String]">commandArray</a> : _*)
		<span class="keyword">import</span> options._
		<a href="#45999" title="java.lang.ProcessBuilder">builder</a>.<a title="(Boolean)java.lang.ProcessBuilder" id="46028">redirectErrorStream</a>(<a href="#45571" title="=&gt; Boolean">redirectErrorStream</a>).<a title="(java.io.File)java.lang.ProcessBuilder" id="46026">directory</a>(<a href="#45569" title="=&gt; java.io.File">workingDirectory</a>)
		
		<span class="keyword">val</span> <a title="java.util.Map[java.lang.String,java.lang.String]" id="46001">env</a> = <a href="#45999" title="java.lang.ProcessBuilder">builder</a>.<a title="()java.util.Map[java.lang.String,java.lang.String]" id="46023">environment</a>
		<span title="Unit" class="keyword">if</span>(<a title="=&gt; Boolean" id="2637">!</a><a href="#45575" title="=&gt; Boolean">useDefaultEnvironment</a>)
			<a href="#46001" title="java.util.Map[java.lang.String,java.lang.String]">env</a>.<a title="()Unit" id="21903">clear</a>()
		<span class="keyword">for</span>( <span id="7256"><a href="#46036" title="(((String, String)) =&gt; Unit)Unit" id="39608">(</a></span><span id="46037"><a title="String" id="46041">key</a></span>, <span id="46038"><a title="String" id="46042">value</a></span>) &lt;- <a href="#45573" title="=&gt; Map[String,String]">environment</a> )
			<a href="#46001" title="java.util.Map[java.lang.String,java.lang.String]">env</a>.<a title="(java.lang.String,java.lang.String)java.lang.String" id="21896">put</a>(<a href="#46041" title="String">key</a>, <a href="#46042" title="String">value</a>)
			
		<span class="keyword">val</span> <a title="java.lang.Process" id="46002">process</a> = <a href="#45999" title="java.lang.ProcessBuilder">builder</a>.<a title="()java.lang.Process" id="46029">start</a>()
		<span class="keyword">import</span> io._
		<a href="#45629" title="(java.io.OutputStream)Unit" id="7221">connectInput</a>(<a href="#46002" title="java.lang.Process">process</a>.<a title="()java.io.OutputStream" id="46044">getOutputStream</a>)
		<a href="#45631" title="(java.io.InputStream)Unit" id="7221">connectOutput</a>(<a href="#46002" title="java.lang.Process">process</a>.<a title="()java.io.InputStream" id="46045">getInputStream</a>)
		<span title="Unit" class="keyword">if</span>(<a title="=&gt; Boolean" id="2637">!</a><a href="#45843" title="=&gt; sbt.ProcessOptions">options</a>.<a href="#45571" title="=&gt; Boolean">redirectErrorStream</a>)
			<a href="#45633" title="(java.io.InputStream)Unit" id="7221">connectError</a>(<a href="#46002" title="java.lang.Process">process</a>.<a title="()java.io.InputStream" id="46046">getErrorStream</a>)
		<span title="sbt.SProcess" class="keyword">new</span> <a href="#6387" title="sbt.SProcess">SProcess</a>(<a href="#46002" title="java.lang.Process">process</a>)
	}
	<span class="keyword">def</span> <a title="=&gt; String" id="45860">commandLine</a> = (<a href="#45839" title="=&gt; String">command</a> <a href="#46053" title="(String)List[String]" id="6808">::</a> <a href="#45841" title="=&gt; Seq[String]">arguments</a>.<a title="=&gt; List[String]" id="7279">toList</a>).<a title="(String)String" id="7283">mkString</a>(<span title="java.lang.String(&quot; &quot;)" class="string">&quot; &quot;</span>)
}
<span class="keyword">final</span> <span class="keyword">class</span> <a title="class SProcess extends java.lang.Object with NotNull with ScalaObject" id="6387">SProcess</a>(<span id="45994"><a title="java.lang.Process" id="46050">p</a></span>: <a title="java.lang.Process" id="1814">Process</a>) <span class="keyword">extends</span> <a title="NotNull" id="187">NotNull</a>
{
	<span class="keyword">def</span> <a title="()Int" id="45996">exitValue</a>(): <a title="Int" id="2296">Int</a> = <a href="#45994" title="java.lang.Process">p</a>.<a title="()Int" id="46047">waitFor</a>()
	<span class="keyword">def</span> <a title="()Unit" id="45997">destroy</a>() { <a href="#45994" title="java.lang.Process">p</a>.<a title="()Unit" id="46049">destroy</a> }
}

        </pre>
    </body>
</html>