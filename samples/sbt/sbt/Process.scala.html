<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>sbt/Process.scala</title>
        <script type="text/javascript" src="../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../style.css" title="Style">
    </head>
    <body onload="initializeLinked()">
        <pre>
<span class="comment">/* sbt -- Simple Build Tool
 * Copyright 2009 Mark Harrah
 */</span>
 
<span class="comment">/** The beginnings of a library for interacting with native processes.  It is not ready
 * for general use. */</span>
<span class="keyword">package</span> sbt

<span class="keyword">import</span> java.lang.ProcessBuilder
<span class="keyword">import</span> java.io.{File, InputStream, OutputStream}

<span class="keyword">class</span> <span class="typed"><span class="type">class ProcessOptions extends java.lang.Object with NotNull with ScalaObject</span><a id="6481">ProcessOptions</a></span>(<span class="keyword">val</span> <span class="typed"><span class="type">java.io.File</span><span id="20053"><span id="20052"><a id="46561">workingDirectory</a></span></span></span>: <span class="typed"><span class="type">java.io.File</span><a id="3650">File</a></span>, <span class="keyword">val</span> <span class="typed"><span class="type">Boolean</span><span id="20055"><span id="20054"><a id="46562">redirectErrorStream</a></span></span></span>: <span class="typed"><span class="type">Boolean</span><a id="2151">Boolean</a></span>,
	<span class="keyword">val</span> <span class="typed"><span class="type">Map[String,String]</span><span id="20057"><span id="20056"><a id="46563">environment</a></span></span></span>: <span class="typed"><span class="type">Map[String,String]</span><a id="27118">Map</a></span>[String, String], <span class="keyword">val</span> <span class="typed"><span class="type">Boolean</span><span id="20059"><span id="20058"><a id="46564">useDefaultEnvironment</a></span></span></span>: <span class="typed"><span class="type">Boolean</span><a id="2151">Boolean</a></span>) <span class="keyword">extends</span> <span class="typed"><span class="type">NotNull</span><a id="186">NotNull</a></span>
{
	<span class="keyword">def</span> <span class="typed"><span class="type">(java.io.File)sbt.ProcessOptions</span><a id="20061">newDirectory</a></span>(<span class="typed"><span class="type">java.io.File</span><a id="46565">dir</a></span>: <span class="typed"><span class="type">java.io.File</span><a id="3650">File</a></span>) = <span class="typed"><span class="type">sbt.ProcessOptions</span><span class="keyword">new</span></span> <span class="typed"><span class="type">sbt.ProcessOptions</span><a href="#6481">ProcessOptions</a></span>(<span class="typed"><span class="type">java.io.File</span><a href="#46565">dir</a></span>, <span class="typed"><span class="type">=&gt; Boolean</span><a href="#20054">redirectErrorStream</a></span>, <span class="typed"><span class="type">=&gt; Map[String,String]</span><a href="#20056">environment</a></span>, <span class="typed"><span class="type">=&gt; Boolean</span><a href="#20058">useDefaultEnvironment</a></span>)
	<span class="keyword">def</span> <span class="typed"><span class="type">=&gt; sbt.ProcessOptions</span><a id="20062">mergeErrorStream</a></span> = <span class="typed"><span class="type">sbt.ProcessOptions</span><span class="keyword">new</span></span> <span class="typed"><span class="type">sbt.ProcessOptions</span><a href="#6481">ProcessOptions</a></span>(<span class="typed"><span class="type">=&gt; java.io.File</span><a href="#20052">workingDirectory</a></span>, <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>, <span class="typed"><span class="type">=&gt; Map[String,String]</span><a href="#20056">environment</a></span>, <span class="typed"><span class="type">=&gt; Boolean</span><a href="#20058">useDefaultEnvironment</a></span>)
	<span class="keyword">def</span> <span class="typed"><span class="type">(Map[String,String])sbt.ProcessOptions</span><a id="20063">setEnvironment</a></span>(<span class="typed"><span class="type">Map[String,String]</span><a id="46569">env</a></span>: <span class="typed"><span class="type">Map[String,String]</span><a id="27118">Map</a></span>[String, String]) =
		<span class="typed"><span class="type">sbt.ProcessOptions</span><span class="keyword">new</span></span> <span class="typed"><span class="type">sbt.ProcessOptions</span><a href="#6481">ProcessOptions</a></span>(<span class="typed"><span class="type">=&gt; java.io.File</span><a href="#20052">workingDirectory</a></span>, <span class="typed"><span class="type">=&gt; Boolean</span><a href="#20054">redirectErrorStream</a></span>, <span class="typed"><span class="type">Map[String,String]</span><a href="#46569">env</a></span>, <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>)
	<span class="keyword">def</span> <span class="typed"><span class="type">(Iterable[(String, String)])sbt.ProcessOptions</span><a id="20064">modifyEnvironment</a></span>(<span class="typed"><span class="type">Iterable[(String, String)]</span><a id="46571">modifiedMappings</a></span>: <span class="typed"><span class="type">Iterable[(String, String)]</span><a id="384">Iterable</a></span>[(String, String)]) = 
		<span class="typed"><span class="type">sbt.ProcessOptions</span><span class="keyword">new</span></span> <span class="typed"><span class="type">sbt.ProcessOptions</span><a href="#6481">ProcessOptions</a></span>(<span class="typed"><span class="type">=&gt; java.io.File</span><a href="#20052">workingDirectory</a></span>, <span class="typed"><span class="type">=&gt; Boolean</span><a href="#20054">redirectErrorStream</a></span>, <span class="typed"><span class="type">=&gt; Map[String,String]</span><a href="#20056">environment</a></span> <span class="typed"><span class="type">(Iterable[(String, String)])scala.collection.immutable.Map[String,String]</span><a id="40587">++</a></span> <span class="typed"><span class="type">Iterable[(String, String)]</span><a href="#46571">modifiedMappings</a></span>, <span class="typed"><span class="type">=&gt; Boolean</span><a href="#20058">useDefaultEnvironment</a></span>)
}
<span class="keyword">class</span> <span class="typed"><span class="type">class ProcessIO extends java.lang.Object with NotNull with ScalaObject</span><a id="6482">ProcessIO</a></span>(<span class="keyword">val</span> <span class="typed"><span class="type">(java.io.OutputStream) =&gt; Unit</span><span id="20069"><span id="20068"><a id="20080">connectInput</a></span></span></span>: OutputStream =&gt; Unit, <span class="keyword">val</span> <span class="typed"><span class="type">(java.io.InputStream) =&gt; Unit</span><span id="20071"><span id="20070"><a id="20081">connectOutput</a></span></span></span>: InputStream =&gt; Unit,
	<span class="keyword">val</span> <span class="typed"><span class="type">(java.io.InputStream) =&gt; Unit</span><span id="20073"><span id="20072"><a id="20082">connectError</a></span></span></span>: InputStream =&gt; Unit) <span class="keyword">extends</span> <span class="typed"><span class="type">NotNull</span><a id="186">NotNull</a></span>
{
	<span class="keyword">def</span> <span class="typed"><span class="type">()sbt.ProcessIO</span><a id="20075" class="keyword">this</a></span>() = <span class="typed"><span class="type">ProcessIO.this.type</span><a href="#6482" class="keyword">this</a></span>(<span class="typed"><span class="type">object sbt.ProcessIO</span><a href="#6483">ProcessIO</a></span>.<span class="typed"><span class="type">(java.io.Closeable)Unit</span><a href="#46614">close</a></span>, <span class="typed"><span class="type">object sbt.ProcessIO</span><a href="#6483">ProcessIO</a></span>.<span class="typed"><span class="type">(java.io.InputStream)Unit</span><a href="#46615">readFully</a></span>, <span class="typed"><span class="type">object sbt.ProcessIO</span><a href="#6483">ProcessIO</a></span>.<span class="typed"><span class="type">(java.io.InputStream)Unit</span><a href="#46615">readFully</a></span>)
	<span class="keyword">def</span> <span class="typed"><span class="type">(sbt.Logger)sbt.ProcessIO</span><a id="20076" class="keyword">this</a></span>(<span class="typed"><span class="type">sbt.Logger</span><a id="20079">log</a></span>: <span class="typed"><span class="type">sbt.Logger</span><a href="Logger.scala.html#6766">Logger</a></span>) = <span class="typed"><span class="type">ProcessIO.this.type</span><a href="#6482" class="keyword">this</a></span>(<span class="typed"><span class="type">object sbt.ProcessIO</span><a href="#6483">ProcessIO</a></span>.<span class="typed"><span class="type">(java.io.Closeable)Unit</span><a href="#46614">close</a></span>, <span class="typed"><span class="type">object sbt.ProcessIO</span><a href="#6483">ProcessIO</a></span>.<span class="typed"><span class="type">(sbt.Logger,sbt.Level.Value)(java.io.InputStream)Unit</span><a href="#46617">processFully</a></span>(<span class="typed"><span class="type">sbt.Logger</span><a href="#20079">log</a></span>, <span class="typed"><span class="type">object sbt.Level</span><a href="Logger.scala.html#6774">Level</a></span>.<span class="typed"><span class="type">=&gt; sbt.Level.Value</span><a href="Logger.scala.html#21790">Info</a></span>), <span class="typed"><span class="type">object sbt.ProcessIO</span><a href="#6483">ProcessIO</a></span>.<span class="typed"><span class="type">(sbt.Logger,sbt.Level.Value)(java.io.InputStream)Unit</span><a href="#46617">processFully</a></span>(<span class="typed"><span class="type">sbt.Logger</span><a href="#20079">log</a></span>, <span class="typed"><span class="type">object sbt.Level</span><a href="Logger.scala.html#6774">Level</a></span>.<span class="typed"><span class="type">=&gt; sbt.Level.Value</span><a href="Logger.scala.html#21794">Error</a></span>))
}
<span class="keyword">object</span> <span class="typed"><span class="type">object sbt.ProcessIO</span><a id="6483">ProcessIO</a></span>
{
	<span class="keyword">import</span> java.io.{BufferedReader, InputStreamReader}
	<span class="keyword">def</span> <span class="typed"><span class="type">(java.io.Closeable)Unit</span><a id="46614">close</a></span>(<span class="typed"><span class="type">java.io.Closeable</span><a id="46625">c</a></span>: java.io.<span class="typed"><span class="type">java.io.Closeable</span><a id="3626">Closeable</a></span>) { <span class="typed"><span class="type">java.io.Closeable</span><a href="#46625">c</a></span>.<span class="typed"><span class="type">()Unit</span><a id="26722">close</a></span>() }
	<span class="keyword">def</span> <span class="typed"><span class="type">(java.io.InputStream)Unit</span><a id="46615">readFully</a></span>(<span class="typed"><span class="type">java.io.InputStream</span><a id="46628">i</a></span>: <span class="typed"><span class="type">java.io.InputStream</span><a id="3725">InputStream</a></span>) =
	{
		<span class="keyword">val</span> <span class="typed"><span class="type">Array[Byte]</span><a id="46630">buffer</a></span> = <span class="typed"><span class="type">Array[Byte]</span><span class="keyword">new</span></span> <span class="typed"><span class="type">Array[Byte]</span><a id="1053">Array</a></span>[Byte](<span class="typed"><span class="type">Int(8192)</span><span class="int">8192</span></span>)
		<span class="keyword">def</span> <span class="typed"><span class="type">()Unit</span><a id="46631">readFully</a></span>()
		{
			<span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span>(<span class="typed"><span class="type">java.io.InputStream</span><a href="#46628">i</a></span>.<span class="typed"><span class="type">(Array[Byte])Int</span><a id="20091">read</a></span>(<span class="typed"><span class="type">Array[Byte]</span><a href="#46630">buffer</a></span>) <span class="typed"><span class="type">(Int)Boolean</span><a id="3127">&gt;=</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>)
				<span class="typed"><span class="type">()Unit</span><a href="#46631">readFully</a></span>()
		}
		<span class="typed"><span class="type">(=&gt; Unit)Unit</span><a href="#46616">newThread</a></span>(<span class="keyword">try</span> { <span class="typed"><span class="type">()Unit</span><a href="#46631">readFully</a></span>() } <span class="keyword">finally</span> { <span class="typed"><span class="type">java.io.InputStream</span><a href="#46628">i</a></span>.<span class="typed"><span class="type">()Unit</span><a id="20095">close</a></span>() })
	}
	<span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(=&gt; Unit)Unit</span><a id="46616">newThread</a></span>(<span class="typed"><span class="type">=&gt; Unit</span><a id="46635">action</a></span>: =&gt; Unit)
	{
		<span class="keyword">val</span> <span class="typed"><span class="type">&lt;refinement&gt; extends java.lang.Object with java.lang.Runnable</span><a id="46680">runnable</a></span> = <span class="typed"><span class="type">template $anon extends java.lang.Object with java.lang.Runnable</span><a id="46681" class="keyword">new</a></span> <span class="typed"><span class="type">java.lang.Runnable</span><a id="2046">Runnable</a></span> { <span class="keyword">def</span> <span class="typed"><span class="type">()Unit</span><a id="46683">run</a></span>() { <span class="typed"><span class="type">=&gt; Unit</span><a href="#46635">action</a></span> } }
		(<span class="typed"><span class="type">(java.lang.Runnable)java.lang.Thread</span><a id="36638" class="keyword">new</a></span> <span class="typed"><span class="type">java.lang.Thread</span><a id="2064">Thread</a></span>(<span class="typed"><span class="type">&lt;refinement&gt; extends java.lang.Object with java.lang.Runnable</span><a href="#46680">runnable</a></span>)).<span class="typed"><span class="type">()Unit</span><a id="36645">start</a></span>()
	}
	<span class="keyword">def</span> <span class="typed"><span class="type">(sbt.Logger,sbt.Level.Value)(java.io.InputStream)Unit</span><a id="46617">processFully</a></span>(<span class="typed"><span class="type">sbt.Logger</span><a id="46656">log</a></span>: <span class="typed"><span class="type">sbt.Logger</span><a href="Logger.scala.html#6766">Logger</a></span>, <span class="typed"><span class="type">sbt.Level.Value</span><a id="46657">level</a></span>: Level.<span class="typed"><span class="type">sbt.Level.Value</span><a id="21282">Value</a></span>)(<span class="typed"><span class="type">java.io.InputStream</span><a id="46658">i</a></span>: <span class="typed"><span class="type">java.io.InputStream</span><a id="3725">InputStream</a></span>) { <span class="typed"><span class="type">((String) =&gt; Unit)(java.io.InputStream)Unit</span><a href="#46618">processFully</a></span>(<span class="typed"><span class="type">String</span><a id="46736">x</a></span> =&gt; <span class="typed"><span class="type">sbt.Logger</span><a href="#46656">log</a></span>.<span class="typed"><span class="type">(sbt.Level.Value,=&gt; String)Unit</span><a href="Logger.scala.html#8471">log</a></span>(<span class="typed"><span class="type">sbt.Level.Value</span><a href="#46657">level</a></span>, <span class="typed"><span class="type">String</span><a href="#46736">x</a></span>))(<span class="typed"><span class="type">java.io.InputStream</span><a href="#46658">i</a></span>) }
	<span class="comment">// processLine will be called from a new thread</span>
	<span class="keyword">def</span> <span class="typed"><span class="type">((String) =&gt; Unit)(java.io.InputStream)Unit</span><a id="46618">processFully</a></span>(<span class="typed"><span class="type">(String) =&gt; Unit</span><a id="46650">processLine</a></span>: String =&gt; Unit)(<span class="typed"><span class="type">java.io.InputStream</span><a id="46651">i</a></span>: <span class="typed"><span class="type">java.io.InputStream</span><a id="3725">InputStream</a></span>)
	{
		<span class="keyword">def</span> <span class="typed"><span class="type">(java.io.BufferedReader)Unit</span><a id="46742">readFully</a></span>(<span class="typed"><span class="type">java.io.BufferedReader</span><a id="46743">reader</a></span>: <span class="typed"><span class="type">java.io.BufferedReader</span><a id="3530">BufferedReader</a></span>)
		{
			<span class="keyword">val</span> <span class="typed"><span class="type">java.lang.String</span><a id="46744">line</a></span> = <span class="typed"><span class="type">java.io.BufferedReader</span><a href="#46743">reader</a></span>.<span class="typed"><span class="type">()java.lang.String</span><a id="45493">readLine</a></span>()
			<span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span>(<span class="typed"><span class="type">java.lang.String</span><a href="#46744">line</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5765">!=</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>)
			{
				<span class="typed"><span class="type">(String)Unit</span><a href="#46650" id="7330">processLine</a></span>(<span class="typed"><span class="type">java.lang.String</span><a href="#46744">line</a></span>)
				<span class="typed"><span class="type">(java.io.BufferedReader)Unit</span><a href="#46742">readFully</a></span>(<span class="typed"><span class="type">java.io.BufferedReader</span><a href="#46743">reader</a></span>)
			}
		}
		<span class="typed"><span class="type">(java.io.InputStream)((java.io.BufferedReader) =&gt; Unit)Unit</span><a href="#46624">withReader</a></span>(<span class="typed"><span class="type">java.io.InputStream</span><a href="#46651">i</a></span>)(<span class="typed"><span class="type">(java.io.BufferedReader)Unit</span><a href="#46742">readFully</a></span>)
	}
	<span class="keyword">def</span> <span class="typed"><span class="type">[T]((T, String) =&gt; T,T)(java.io.InputStream)T</span><a id="46619">fold</a></span>[<span class="typed"><span class="type">&gt;: Nothing &lt;: Any</span><a id="46621">T</a></span>](<span class="typed"><span class="type">(T, String) =&gt; T</span><a id="46755">process</a></span>: (T,String) =&gt; T, <span class="typed"><span class="type">T</span><a id="46756">initial</a></span>: <span class="typed"><span class="type">T</span><a href="#46621">T</a></span>)(<span class="typed"><span class="type">java.io.InputStream</span><a id="46757">i</a></span>: <span class="typed"><span class="type">java.io.InputStream</span><a id="3725">InputStream</a></span>): <span class="typed"><span class="type">T</span><a href="#46621">T</a></span> =
	{
		<span class="keyword">var</span> <span class="typed"><span class="type">T</span><a id="46758">v</a></span> = <span class="typed"><span class="type">T</span><a href="#46756">initial</a></span>
		<span class="typed"><span class="type">((String) =&gt; Unit)(java.io.InputStream)Unit</span><a href="#46618">processFully</a></span>( <span class="typed"><span class="type">String</span><a id="46761">line</a></span> =&gt; <span class="typed"><span class="type">T</span><a href="#46758">v</a></span> = <span class="typed"><span class="type">(T,String)T</span><a href="#46755" id="12397">process</a></span>(<span class="typed"><span class="type">T</span><a href="#46758">v</a></span>, <span class="typed"><span class="type">String</span><a href="#46761">line</a></span>)  )(<span class="typed"><span class="type">java.io.InputStream</span><a href="#46757">i</a></span>)
		<span class="typed"><span class="type">T</span><a href="#46758">v</a></span>
	}
	<span class="keyword">def</span> <span class="typed"><span class="type">=&gt; sbt.ProcessIO</span><a id="46622">standard</a></span>: <span class="typed"><span class="type">sbt.ProcessIO</span><a href="#6482">ProcessIO</a></span> = <span class="typed"><span class="type">((java.io.OutputStream) =&gt; Unit)sbt.ProcessIO</span><a href="#46623">standard</a></span>(<span class="typed"><span class="type">(java.io.Closeable)Unit</span><a href="#46614">close</a></span>)
	<span class="keyword">def</span> <span class="typed"><span class="type">((java.io.OutputStream) =&gt; Unit)sbt.ProcessIO</span><a id="46623">standard</a></span>(<span class="typed"><span class="type">(java.io.OutputStream) =&gt; Unit</span><a id="46764">toProcessInput</a></span>: OutputStream =&gt; Unit): <span class="typed"><span class="type">sbt.ProcessIO</span><a href="#6482">ProcessIO</a></span> =
		 <span class="typed"><span class="type">sbt.ProcessIO</span><span class="keyword">new</span></span> <span class="typed"><span class="type">sbt.ProcessIO</span><a href="#6482">ProcessIO</a></span>(<span class="typed"><span class="type">(java.io.OutputStream) =&gt; Unit</span><a href="#46764">toProcessInput</a></span>, <span class="typed"><span class="type">((String) =&gt; Unit)(java.io.InputStream)Unit</span><a href="#46618">processFully</a></span>(<span class="typed"><span class="type">object java.lang.System</span><a id="1867">System</a></span>.<span class="typed"><span class="type">java.io.PrintStream</span><a id="26405">out</a></span>.<span class="typed"><span class="type">(java.lang.String)Unit</span><a href="#46775" id="35587">println</a></span>), <span class="typed"><span class="type">((String) =&gt; Unit)(java.io.InputStream)Unit</span><a href="#46618">processFully</a></span>(<span class="typed"><span class="type">object java.lang.System</span><a id="1867">System</a></span>.<span class="typed"><span class="type">java.io.PrintStream</span><a id="26406">err</a></span>.<span class="typed"><span class="type">(java.lang.String)Unit</span><a href="#46785" id="35587">println</a></span>))
	<span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(java.io.InputStream)((java.io.BufferedReader) =&gt; Unit)Unit</span><a id="46624">withReader</a></span>(<span class="typed"><span class="type">java.io.InputStream</span><a id="46747">i</a></span>: <span class="typed"><span class="type">java.io.InputStream</span><a id="3725">InputStream</a></span>)(<span class="typed"><span class="type">(java.io.BufferedReader) =&gt; Unit</span><a id="46748">f</a></span>: BufferedReader =&gt;Unit) =
	{
		<span class="keyword">val</span> <span class="typed"><span class="type">java.io.BufferedReader</span><a id="46750">reader</a></span> = <span class="typed"><span class="type">(java.io.Reader)java.io.BufferedReader</span><a id="45489" class="keyword">new</a></span> <span class="typed"><span class="type">java.io.BufferedReader</span><a id="3530">BufferedReader</a></span>(<span class="typed"><span class="type">java.io.InputStreamReader</span><span class="keyword">new</span></span> <span class="typed"><span class="type">java.io.InputStreamReader</span><a id="3722">InputStreamReader</a></span>(<span class="typed"><span class="type">java.io.InputStream</span><a href="#46747">i</a></span>))
		<span class="typed"><span class="type">(=&gt; Unit)Unit</span><a href="#46616">newThread</a></span>(<span class="keyword">try</span> { <span class="typed"><span class="type">(java.io.BufferedReader)Unit</span><a href="#46748" id="7330">f</a></span>(<span class="typed"><span class="type">java.io.BufferedReader</span><a href="#46750">reader</a></span>) } <span class="keyword">finally</span> { <span class="typed"><span class="type">java.io.BufferedReader</span><a href="#46750">reader</a></span>.<span class="typed"><span class="type">()Unit</span><a id="45499">close</a></span>() })
	}
}
<span class="keyword">final</span> <span class="keyword">class</span> <span class="typed"><span class="type">class ProcessRunner extends java.lang.Object with NotNull with ScalaObject</span><a id="6485">ProcessRunner</a></span>(<span class="keyword">val</span> <span class="typed"><span class="type">String</span><span id="19993"><span id="19992"><a id="20033">command</a></span></span></span>: <span class="typed"><span class="type">String</span><a id="1842">String</a></span>, <span class="keyword">val</span> <span class="typed"><span class="type">Seq[String]</span><span id="19995"><span id="19994"><a id="20034">arguments</a></span></span></span>: <span class="typed"><span class="type">Seq[String]</span><a id="744">Seq</a></span>[String], <span class="keyword">val</span> <span class="typed"><span class="type">sbt.ProcessOptions</span><span id="19997"><span id="19996"><a id="20035">options</a></span></span></span>: <span class="typed"><span class="type">sbt.ProcessOptions</span><a href="#6481">ProcessOptions</a></span>, <span class="keyword">val</span> <span class="typed"><span class="type">sbt.ProcessIO</span><span id="19999"><span id="19998"><a id="20036">io</a></span></span></span>: <span class="typed"><span class="type">sbt.ProcessIO</span><a href="#6482">ProcessIO</a></span>) <span class="keyword">extends</span> <span class="typed"><span class="type">NotNull</span><a id="186">NotNull</a></span>
{
	<span class="typed"><span class="type">(Boolean,=&gt; Any)Unit</span><span id="5972"><a id="802">require</a></span></span>(<span class="typed"><span class="type">=&gt; Boolean</span><a id="2728">!</a></span><span class="typed"><span class="type">=&gt; String</span><a href="#19992">command</a></span>.<span class="typed"><span class="type">implicit scala.Predef.stringWrapper : (String)scala.runtime.RichString</span><span id="6104"><span id="802"><a id="5842">trim</a></span></span></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a id="7218">isEmpty</a></span>, <span class="typed"><span class="type">java.lang.String(&quot;Command cannot be empty.&quot;)</span><span class="string">&quot;Command cannot be empty.&quot;</span></span>)
	<span class="keyword">def</span> <span class="typed"><span class="type">(String,Seq[String],java.io.File,Boolean)sbt.ProcessRunner</span><a id="20001" class="keyword">this</a></span>(<span class="typed"><span class="type">String</span><a id="20029">command</a></span>: <span class="typed"><span class="type">String</span><a id="1842">String</a></span>, <span class="typed"><span class="type">Seq[String]</span><a id="20030">arguments</a></span>: <span class="typed"><span class="type">Seq[String]</span><a id="744">Seq</a></span>[String], <span class="typed"><span class="type">java.io.File</span><a id="20031">workingDirectory</a></span>: <span class="typed"><span class="type">java.io.File</span><a id="3650">File</a></span>, <span class="typed"><span class="type">Boolean</span><a id="20032">redirectErrorStream</a></span>: <span class="typed"><span class="type">Boolean</span><a id="2151">Boolean</a></span>) =
		<span class="typed"><span class="type">ProcessRunner.this.type</span><a href="#6485" class="keyword">this</a></span>(<span class="typed"><span class="type">String</span><a href="#20029">command</a></span>, <span class="typed"><span class="type">Seq[String]</span><a href="#20030">arguments</a></span>, <span class="typed"><span class="type">sbt.ProcessOptions</span><span class="keyword">new</span></span> <span class="typed"><span class="type">sbt.ProcessOptions</span><a href="#6481">ProcessOptions</a></span>(<span class="typed"><span class="type">java.io.File</span><a href="#20031">workingDirectory</a></span>, <span class="typed"><span class="type">Boolean</span><a href="#20032">redirectErrorStream</a></span>, <span class="typed"><span class="type">=&gt; collection.immutable.Map.type</span><span id="5960"><a id="802">Map</a></span></span>.<span class="typed"><span class="type">scala.collection.immutable.Map[String,Nothing]</span><a id="40575">empty</a></span>, <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>), <span class="typed"><span class="type">()sbt.ProcessIO</span><a href="#20075" class="keyword">new</a></span> <span class="typed"><span class="type">sbt.ProcessIO</span><a href="#6482">ProcessIO</a></span>)
	<span class="keyword">def</span> <span class="typed"><span class="type">(String,Seq[String],java.io.File)sbt.ProcessRunner</span><a id="20002" class="keyword">this</a></span>(<span class="typed"><span class="type">String</span><a id="20026">command</a></span>: <span class="typed"><span class="type">String</span><a id="1842">String</a></span>, <span class="typed"><span class="type">Seq[String]</span><a id="20027">arguments</a></span>: <span class="typed"><span class="type">Seq[String]</span><a id="744">Seq</a></span>[String], <span class="typed"><span class="type">java.io.File</span><a id="20028">workingDirectory</a></span>: <span class="typed"><span class="type">java.io.File</span><a id="3650">File</a></span>) = <span class="typed"><span class="type">(String,Seq[String],java.io.File,Boolean)sbt.ProcessRunner</span><a href="#20001" class="keyword">this</a></span>(<span class="typed"><span class="type">String</span><a href="#20026">command</a></span>, <span class="typed"><span class="type">Seq[String]</span><a href="#20027">arguments</a></span>, <span class="typed"><span class="type">java.io.File</span><a href="#20028">workingDirectory</a></span>, <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>)
	<span class="keyword">def</span> <span class="typed"><span class="type">(String,Seq[String])sbt.ProcessRunner</span><a id="20003" class="keyword">this</a></span>(<span class="typed"><span class="type">String</span><a id="20024">command</a></span>: <span class="typed"><span class="type">String</span><a id="1842">String</a></span>, <span class="typed"><span class="type">Seq[String]</span><a id="20025">arguments</a></span>: <span class="typed"><span class="type">Seq[String]</span><a id="744">Seq</a></span>[String]) = <span class="typed"><span class="type">(String,Seq[String],java.io.File)sbt.ProcessRunner</span><a href="#20002" class="keyword">this</a></span>(<span class="typed"><span class="type">String</span><a href="#20024">command</a></span>, <span class="typed"><span class="type">Seq[String]</span><a href="#20025">arguments</a></span>, <span class="typed"><span class="type">java.io.File</span><span class="keyword">new</span></span> <span class="typed"><span class="type">java.io.File</span><a id="3650">File</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;.&quot;)</span><span class="string">&quot;.&quot;</span></span>))
	<span class="keyword">def</span> <span class="typed"><span class="type">(String,String,String*)sbt.ProcessRunner</span><a id="20004" class="keyword">this</a></span>(<span class="typed"><span class="type">String</span><a id="20021">command</a></span>: <span class="typed"><span class="type">String</span><a id="1842">String</a></span>, <span class="typed"><span class="type">String</span><a id="20022">argument0</a></span>: <span class="typed"><span class="type">String</span><a id="1842">String</a></span>, <span class="typed"><span class="type">String*</span><a id="20023">arguments</a></span>: <span class="typed"><span class="type">String*</span><a id="2722">String</a></span>*) = <span class="typed"><span class="type">(String,Seq[String],java.io.File)sbt.ProcessRunner</span><a href="#20002" class="keyword">this</a></span>(<span class="typed"><span class="type">String</span><a href="#20021">command</a></span>, <span class="typed"><span class="type">String</span><a href="#20022">argument0</a></span> <span class="typed"><span class="type">(String)List[String]</span><a href="#46849" id="6908">::</a></span> <span class="typed"><span class="type">String*</span><a href="#20023">arguments</a></span>.<span class="typed"><span class="type">=&gt; List[String]</span><a id="7388">toList</a></span>, <span class="typed"><span class="type">java.io.File</span><span class="keyword">new</span></span> <span class="typed"><span class="type">java.io.File</span><a id="3650">File</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;.&quot;)</span><span class="string">&quot;.&quot;</span></span>))
	<span class="keyword">def</span> <span class="typed"><span class="type">(String)sbt.ProcessRunner</span><a id="20005" class="keyword">this</a></span>(<span class="typed"><span class="type">String</span><a id="20015">command</a></span>: <span class="typed"><span class="type">String</span><a id="1842">String</a></span>) = <span class="typed"><span class="type">(String,Seq[String])sbt.ProcessRunner</span><a href="#20003" class="keyword">this</a></span>(<span class="typed"><span class="type">String</span><a href="#20015">command</a></span>, <span class="typed"><span class="type">object Nil</span><a id="316">Nil</a></span>)
	
	<span class="keyword">def</span> <span class="typed"><span class="type">(java.io.File)sbt.ProcessRunner</span><a id="20006">in</a></span>(<span class="typed"><span class="type">java.io.File</span><a id="46863">newDirectory</a></span>: <span class="typed"><span class="type">java.io.File</span><a id="3650">File</a></span>) = <span class="typed"><span class="type">sbt.ProcessRunner</span><span class="keyword">new</span></span> <span class="typed"><span class="type">sbt.ProcessRunner</span><a href="#6485">ProcessRunner</a></span>(<span class="typed"><span class="type">=&gt; String</span><a href="#19992">command</a></span>, <span class="typed"><span class="type">=&gt; Seq[String]</span><a href="#19994">arguments</a></span>, <span class="typed"><span class="type">=&gt; sbt.ProcessOptions</span><a href="#19996">options</a></span>.<span class="typed"><span class="type">(java.io.File)sbt.ProcessOptions</span><a href="#20061">newDirectory</a></span>(<span class="typed"><span class="type">java.io.File</span><a href="#46863">newDirectory</a></span>), <span class="typed"><span class="type">=&gt; sbt.ProcessIO</span><a href="#19998">io</a></span>)
	<span class="keyword">def</span> <span class="typed"><span class="type">(Map[String,String])sbt.ProcessRunner</span><a id="20007">withEnvironment</a></span>(<span class="typed"><span class="type">Map[String,String]</span><a id="46871">env</a></span>: <span class="typed"><span class="type">Map[String,String]</span><a id="27118">Map</a></span>[String, String]) =
		<span class="typed"><span class="type">sbt.ProcessRunner</span><span class="keyword">new</span></span> <span class="typed"><span class="type">sbt.ProcessRunner</span><a href="#6485">ProcessRunner</a></span>(<span class="typed"><span class="type">=&gt; String</span><a href="#19992">command</a></span>, <span class="typed"><span class="type">=&gt; Seq[String]</span><a href="#19994">arguments</a></span>, <span class="typed"><span class="type">=&gt; sbt.ProcessOptions</span><a href="#19996">options</a></span>.<span class="typed"><span class="type">(Map[String,String])sbt.ProcessOptions</span><a href="#20063">setEnvironment</a></span>(<span class="typed"><span class="type">Map[String,String]</span><a href="#46871">env</a></span>), <span class="typed"><span class="type">=&gt; sbt.ProcessIO</span><a href="#19998">io</a></span>)
	<span class="keyword">def</span> <span class="typed"><span class="type">((String, String)*)sbt.ProcessRunner</span><a id="20008">modifyEnvironment</a></span>(<span class="typed"><span class="type">(String, String)*</span><a id="46879">modifiedMappings</a></span>: <span class="typed"><span class="type">(String, String)*</span><a id="2722">(</a></span>String, String)*) =
		<span class="typed"><span class="type">sbt.ProcessRunner</span><span class="keyword">new</span></span> <span class="typed"><span class="type">sbt.ProcessRunner</span><a href="#6485">ProcessRunner</a></span>(<span class="typed"><span class="type">=&gt; String</span><a href="#19992">command</a></span>, <span class="typed"><span class="type">=&gt; Seq[String]</span><a href="#19994">arguments</a></span>, <span class="typed"><span class="type">=&gt; sbt.ProcessOptions</span><a href="#19996">options</a></span>.<span class="typed"><span class="type">(Iterable[(String, String)])sbt.ProcessOptions</span><a href="#20064">modifyEnvironment</a></span>(<span class="typed"><span class="type">(String, String)*</span><a href="#46879">modifiedMappings</a></span>), <span class="typed"><span class="type">=&gt; sbt.ProcessIO</span><a href="#19998">io</a></span>)
	<span class="keyword">def</span> <span class="typed"><span class="type">=&gt; sbt.ProcessRunner</span><a id="20009">mergeErrorStream</a></span> = <span class="typed"><span class="type">sbt.ProcessRunner</span><span class="keyword">new</span></span> <span class="typed"><span class="type">sbt.ProcessRunner</span><a href="#6485">ProcessRunner</a></span>(<span class="typed"><span class="type">=&gt; String</span><a href="#19992">command</a></span>, <span class="typed"><span class="type">=&gt; Seq[String]</span><a href="#19994">arguments</a></span>, <span class="typed"><span class="type">=&gt; sbt.ProcessOptions</span><a href="#19996">options</a></span>.<span class="typed"><span class="type">=&gt; sbt.ProcessOptions</span><a href="#20062">mergeErrorStream</a></span>, <span class="typed"><span class="type">=&gt; sbt.ProcessIO</span><a href="#19998">io</a></span>)
	<span class="keyword">def</span> <span class="typed"><span class="type">(sbt.ProcessIO)sbt.ProcessRunner</span><a id="20010">withIO</a></span>(<span class="typed"><span class="type">sbt.ProcessIO</span><a id="20040">pio</a></span>: <span class="typed"><span class="type">sbt.ProcessIO</span><a href="#6482">ProcessIO</a></span>) = <span class="typed"><span class="type">sbt.ProcessRunner</span><span class="keyword">new</span></span> <span class="typed"><span class="type">sbt.ProcessRunner</span><a href="#6485">ProcessRunner</a></span>(<span class="typed"><span class="type">=&gt; String</span><a href="#19992">command</a></span>, <span class="typed"><span class="type">=&gt; Seq[String]</span><a href="#19994">arguments</a></span>, <span class="typed"><span class="type">=&gt; sbt.ProcessOptions</span><a href="#19996">options</a></span>, <span class="typed"><span class="type">sbt.ProcessIO</span><a href="#20040">pio</a></span>)
	<span class="keyword">def</span> <span class="typed"><span class="type">(sbt.Logger)sbt.ProcessRunner</span><a id="20011">logIO</a></span>(<span class="typed"><span class="type">sbt.Logger</span><a id="20038">log</a></span>: <span class="typed"><span class="type">sbt.Logger</span><a href="Logger.scala.html#6766">Logger</a></span>) = <span class="typed"><span class="type">(sbt.ProcessIO)sbt.ProcessRunner</span><a href="#20010">withIO</a></span>(<span class="typed"><span class="type">(sbt.Logger)sbt.ProcessIO</span><a href="#20076" class="keyword">new</a></span> <span class="typed"><span class="type">sbt.ProcessIO</span><a href="#6482">ProcessIO</a></span>(<span class="typed"><span class="type">sbt.Logger</span><a href="#20038">log</a></span>))
	
	<span class="keyword">def</span> <span class="typed"><span class="type">=&gt; sbt.SProcess</span><a id="20012">run</a></span>: <span class="typed"><span class="type">sbt.SProcess</span><a href="#6486">SProcess</a></span> =
	{
		<span class="keyword">val</span> <span class="typed"><span class="type">Array[String]</span><a id="46895">commandArray</a></span> = (<span class="typed"><span class="type">=&gt; String</span><a href="#19992">command</a></span> <span class="typed"><span class="type">(String)List[String]</span><a href="#46901" id="6908">::</a></span> <span class="typed"><span class="type">=&gt; Seq[String]</span><a href="#19994">arguments</a></span>.<span class="typed"><span class="type">=&gt; List[String]</span><a id="7388">toList</a></span>).<span class="typed"><span class="type">Array[String]</span><a id="7248">toArray</a></span>
		<span class="keyword">val</span> <span class="typed"><span class="type">java.lang.ProcessBuilder</span><a id="46896">builder</a></span> = <span class="typed"><span class="type">(java.lang.String*)java.lang.ProcessBuilder</span><a id="46912" class="keyword">new</a></span> <span class="typed"><span class="type">java.lang.ProcessBuilder</span><a id="1878">ProcessBuilder</a></span>(<span class="typed"><span class="type">Array[String]</span><a href="#46895">commandArray</a></span> : _*)
		<span class="keyword">import</span> options._
		<span class="typed"><span class="type">java.lang.ProcessBuilder</span><a href="#46896">builder</a></span>.<span class="typed"><span class="type">(Boolean)java.lang.ProcessBuilder</span><a id="46925">redirectErrorStream</a></span>(<span class="typed"><span class="type">=&gt; Boolean</span><a href="#20054">redirectErrorStream</a></span>).<span class="typed"><span class="type">(java.io.File)java.lang.ProcessBuilder</span><a id="46923">directory</a></span>(<span class="typed"><span class="type">=&gt; java.io.File</span><a href="#20052">workingDirectory</a></span>)
		
		<span class="keyword">val</span> <span class="typed"><span class="type">java.util.Map[java.lang.String,java.lang.String]</span><a id="46898">env</a></span> = <span class="typed"><span class="type">java.lang.ProcessBuilder</span><a href="#46896">builder</a></span>.<span class="typed"><span class="type">()java.util.Map[java.lang.String,java.lang.String]</span><a id="46920">environment</a></span>
		<span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span>(<span class="typed"><span class="type">=&gt; Boolean</span><a id="2728">!</a></span><span class="typed"><span class="type">=&gt; Boolean</span><a href="#20058">useDefaultEnvironment</a></span>)
			<span class="typed"><span class="type">java.util.Map[java.lang.String,java.lang.String]</span><a href="#46898">env</a></span>.<span class="typed"><span class="type">()Unit</span><a id="22866">clear</a></span>()
		<span class="keyword">for</span>( <span class="typed"><span class="type">(((String, String)) =&gt; Unit)Unit</span><span id="7365"><a href="#46933" id="40601">(</a></span></span><span class="typed"><span class="type">String</span><span id="46934"><a id="46938">key</a></span></span>, <span class="typed"><span class="type">String</span><span id="46935"><a id="46939">value</a></span></span>) &lt;- <span class="typed"><span class="type">=&gt; Map[String,String]</span><a href="#20056">environment</a></span> )
			<span class="typed"><span class="type">java.util.Map[java.lang.String,java.lang.String]</span><a href="#46898">env</a></span>.<span class="typed"><span class="type">(java.lang.String,java.lang.String)java.lang.String</span><a id="22859">put</a></span>(<span class="typed"><span class="type">String</span><a href="#46938">key</a></span>, <span class="typed"><span class="type">String</span><a href="#46939">value</a></span>)
			
		<span class="keyword">val</span> <span class="typed"><span class="type">java.lang.Process</span><a id="46899">process</a></span> = <span class="typed"><span class="type">java.lang.ProcessBuilder</span><a href="#46896">builder</a></span>.<span class="typed"><span class="type">()java.lang.Process</span><a id="46926">start</a></span>()
		<span class="keyword">import</span> io._
		<span class="typed"><span class="type">(java.io.OutputStream)Unit</span><a href="#20068" id="7330">connectInput</a></span>(<span class="typed"><span class="type">java.lang.Process</span><a href="#46899">process</a></span>.<span class="typed"><span class="type">()java.io.OutputStream</span><a id="46941">getOutputStream</a></span>)
		<span class="typed"><span class="type">(java.io.InputStream)Unit</span><a href="#20070" id="7330">connectOutput</a></span>(<span class="typed"><span class="type">java.lang.Process</span><a href="#46899">process</a></span>.<span class="typed"><span class="type">()java.io.InputStream</span><a id="46942">getInputStream</a></span>)
		<span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span>(<span class="typed"><span class="type">=&gt; Boolean</span><a id="2728">!</a></span><span class="typed"><span class="type">=&gt; sbt.ProcessOptions</span><a href="#19996">options</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="#20054">redirectErrorStream</a></span>)
			<span class="typed"><span class="type">(java.io.InputStream)Unit</span><a href="#20072" id="7330">connectError</a></span>(<span class="typed"><span class="type">java.lang.Process</span><a href="#46899">process</a></span>.<span class="typed"><span class="type">()java.io.InputStream</span><a id="46943">getErrorStream</a></span>)
		<span class="typed"><span class="type">sbt.SProcess</span><span class="keyword">new</span></span> <span class="typed"><span class="type">sbt.SProcess</span><a href="#6486">SProcess</a></span>(<span class="typed"><span class="type">java.lang.Process</span><a href="#46899">process</a></span>)
	}
	<span class="keyword">def</span> <span class="typed"><span class="type">=&gt; String</span><a id="20013">commandLine</a></span> = (<span class="typed"><span class="type">=&gt; String</span><a href="#19992">command</a></span> <span class="typed"><span class="type">(String)List[String]</span><a href="#46950" id="6908">::</a></span> <span class="typed"><span class="type">=&gt; Seq[String]</span><a href="#19994">arguments</a></span>.<span class="typed"><span class="type">=&gt; List[String]</span><a id="7388">toList</a></span>).<span class="typed"><span class="type">(String)String</span><a id="7392">mkString</a></span>(<span class="typed"><span class="type">java.lang.String(&quot; &quot;)</span><span class="string">&quot; &quot;</span></span>)
}
<span class="keyword">final</span> <span class="keyword">class</span> <span class="typed"><span class="type">class SProcess extends java.lang.Object with NotNull with ScalaObject</span><a id="6486">SProcess</a></span>(<span class="typed"><span class="type">java.lang.Process</span><span id="20101"><a id="46947">p</a></span></span>: <span class="typed"><span class="type">java.lang.Process</span><a id="1905">Process</a></span>) <span class="keyword">extends</span> <span class="typed"><span class="type">NotNull</span><a id="186">NotNull</a></span>
{
	<span class="keyword">def</span> <span class="typed"><span class="type">()Int</span><a id="20103">exitValue</a></span>(): <span class="typed"><span class="type">Int</span><a id="2375">Int</a></span> = <span class="typed"><span class="type">java.lang.Process</span><a href="#20101">p</a></span>.<span class="typed"><span class="type">()Int</span><a id="46944">waitFor</a></span>()
	<span class="keyword">def</span> <span class="typed"><span class="type">()Unit</span><a id="20104">destroy</a></span>() { <span class="typed"><span class="type">java.lang.Process</span><a href="#20101">p</a></span>.<span class="typed"><span class="type">()Unit</span><a id="46946">destroy</a></span> }
}

        </pre>
    </body>
</html>