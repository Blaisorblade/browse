<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/util/SocketConnection.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style">
    </head>
    <body>
        <pre>
/*                     __                                               *\
**     ________ ___   / /  ___     Scala API                            **
**    / __/ __// _ | / /  / _ |    (c) 2002-2009, LAMP/EPFL             **
**  __\ \/ /__/ __ |/ /__/ __ |    http://scala-lang.org/               **
** /____/\___/_/ |_/____/_/ | |                                         **
**                          |/                                          **
\*                                                                      */

// $Id: SocketConnection.scala 16893 2009-01-13 13:09:22Z cunei $

<span class="keyword">package</span> scala.tools.util

<span class="keyword">import</span> java.io.{PrintWriter, InputStreamReader, BufferedReader}
<span class="keyword">import</span> java.io.IOException
<span class="keyword">import</span> java.net.{Socket, InetAddress}
<span class="keyword">import</span> java.net.UnknownHostException

/** This class implements the connection to the server.
 *
 *  @author Martin Odersky
 *  @version 1.0
 */
<span class="keyword">class</span> <a title="class SocketConnection extends java.lang.Object with ScalaObject" id="21521">SocketConnection</a><a title="ScalaObject" id="977">(</a><a title="String" id="339954">hostname</a>: <span title="String">String</span>, <a title="Int" id="339955">port</a>: <span title="Int">Int</span>) {

  <span class="keyword">def</span> <a title="(port: Int)scala.tools.util.SocketConnection" id="339932" class="keyword">this</a>(<a title="Int" id="339960">port</a>: <span title="Int">Int</span>) = <a href="#21521" title="SocketConnection.this.type" class="keyword">this</a>(<a title="object java.net.InetAddress" id="5320">InetAddress</a>.<a title="()java.net.InetAddress" id="287645">getLocalHost</a>().<a title="()java.lang.String" id="287623">getHostName</a>(), <a href="#339960" title="Int">port</a>)

  <span class="keyword">private</span> <span class="keyword">var</span> <a title="java.net.Socket" id="339934">socket</a>: <span title="java.net.Socket">Socket</span> = _
  <span class="keyword">var</span> <a title="java.io.PrintWriter" id="339937">out</a>: <span title="java.io.PrintWriter">PrintWriter</span> = _
  <span class="keyword">var</span> <a title="java.io.BufferedReader" id="339940">in</a>: <span title="java.io.BufferedReader">BufferedReader</span> = _
  <span class="keyword">var</span> <a title="String" id="339943">errorMessage</a>: <span title="String">String</span> = _

  <span class="keyword">def</span> <a title="()Boolean" id="339945">open</a>(): <a title="Boolean" id="1972">Boolean</a> = {
    <span class="keyword">try</span> {
      <a href="#339934" title="(x$1: java.net.Socket)Unit">socket</a> = <a title="(x$1: java.lang.String,x$2: Int)java.net.Socket" id="132511" class="keyword">new</a> <span title="java.net.Socket">Socket</span>(<a href="#339954" title="String">hostname</a>, <a href="#339955" title="Int">port</a>)
      <a href="#339937" title="(x$1: java.io.PrintWriter)Unit">out</a> = <a title="(x$1: java.io.OutputStream,x$2: Boolean)java.io.PrintWriter" id="39099" class="keyword">new</a> <span title="java.io.PrintWriter">PrintWriter</span>(<a href="#339934" title="=&gt; java.net.Socket">socket</a>.<a title="()java.io.OutputStream" id="132558">getOutputStream</a>(), <span title="Boolean(true)" class="keyword">true</span>)
      <a href="#339940" title="(x$1: java.io.BufferedReader)Unit">in</a> = <a title="(x$1: java.io.Reader)java.io.BufferedReader" id="39072" class="keyword">new</a> <span title="java.io.BufferedReader">BufferedReader</span>(<span title="java.io.InputStreamReader" class="keyword">new</span> <a title="java.io.InputStreamReader" id="3909">InputStreamReader</a>(<a href="#339934" title="=&gt; java.net.Socket">socket</a>.<a title="()java.io.InputStream" id="132557">getInputStream</a>()))
      <span title="Boolean(true)" class="keyword">true</span>
    } <span class="keyword">catch</span> {
      <span title="Boolean" class="keyword">case</span> <a title="java.net.UnknownHostException" id="340051">e</a>: <a title="java.net.UnknownHostException" id="4980">UnknownHostException</a> =&gt;
        <a href="#339943" title="(x$1: String)Unit">errorMessage</a> = <span title="(x$1: Any)java.lang.String" class="string">&quot;Don't know about host: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#339954" title="String">hostname</a> + <span title="java.lang.String(&quot;.&quot;)" class="string">&quot;.&quot;</span>
        <span title="Boolean(false)" class="keyword">false</span>
      <span title="Boolean" class="keyword">case</span> <a title="java.io.IOException" id="340061">e</a>: <a title="java.io.IOException" id="3657">IOException</a> =&gt;
        <a href="#339943" title="(x$1: String)Unit">errorMessage</a> = <span title="(x$1: Any)java.lang.String" class="string">&quot;Couldn't get I/O for the connection to: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#339954" title="String">hostname</a> + <span title="java.lang.String(&quot;.&quot;)" class="string">&quot;.&quot;</span>
        <span title="Boolean(false)" class="keyword">false</span>
    }
  }

  <span class="keyword">def</span> <a title="()Unit" id="339946">close</a>() {
    <a href="#339940" title="=&gt; java.io.BufferedReader">in</a>.<a title="()Unit" id="39089">close</a>()
    <a href="#339937" title="=&gt; java.io.PrintWriter">out</a>.<a title="()Unit" id="39113">close</a>()
    <a href="#339934" title="=&gt; java.net.Socket">socket</a>.<a title="()Unit" id="132589">close</a>()
  }
}

        </pre>
    </body>
</html>