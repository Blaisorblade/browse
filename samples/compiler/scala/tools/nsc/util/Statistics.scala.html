<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/util/Statistics.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style">
    </head>
    <body>
        <pre>
/* NSC -- new Scala compiler
 * Copyright 2005-2009 LAMP/EPFL
 * @author  Martin Odersky
 */

// $Id: Statistics.scala 18387 2009-07-24 15:28:37Z odersky $

<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> util

<span class="keyword">object</span> <a title="object scala.tools.nsc.util.Statistics" id="14666">Statistics</a> <span title="ScalaObject">{</span>
  <span class="keyword">var</span> <a title="Boolean" id="175459">enabled</a> = <span title="Boolean(false)" class="keyword">false</span>
}

<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class Statistics extends java.lang.Object with ScalaObject" id="14665">Statistics</a> <span title="ScalaObject">{</span>

  <span class="keyword">val</span> <a title="=&gt; scala.tools.nsc.Global" id="175462">global</a>: <a href="../Global.scala.html#8529" title="scala.tools.nsc.Global">Global</a>
  <span class="keyword">import</span> global._

  <span class="keyword">def</span> <a title="(base: Long)(time: Long)java.lang.String" id="175464">showRelative</a>(<a title="Long" id="175474">base</a>: <span title="Long">Long</span>)(<a title="Long" id="175475">time</a>: <span title="Long">Long</span>) = <span title="implicit scala.Predef.stringWrapper : (x: String)scala.runtime.RichString" class="string">&quot;%2.1f&quot;</span>.<span title="(args: Any*)String">format</span><span title="(x$1: Any)java.lang.String">(</span><a href="#175475" title="Long">time</a>.<a title="(x$1: Long)Double" id="3079">toDouble</a> <span title="(x$1: Int)Double">/</span> <a href="#175474" title="Long">base</a> * <span title="Int(100)" class="int">100</span>)<span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot; / &quot;)" class="string">&quot; / &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#175475" title="Long">time</a>+<span title="java.lang.String(&quot;ns&quot;)" class="string">&quot;ns&quot;</span>
  <span class="keyword">def</span> <a title="(time: Long)java.lang.String" id="175465">showRelTyper</a>(<a title="Long" id="175520">time</a>: <span title="Long">Long</span>) = <a href="#175464" title="(base: Long)(time: Long)java.lang.String">showRelative</a>(<a href="../Global.scala.html#39334" title="object Statistics.this.global.analyzer">analyzer</a>.<a href="../typechecker/Analyzer.scala.html#40032" title="=&gt; Long">typerTime</a>)(<a href="#175520" title="Long">time</a>)

  <span class="keyword">def</span> <a title="(phase: scala.tools.nsc.Phase)Unit" id="175466">print</a>(<a title="scala.tools.nsc.Phase" id="175527">phase</a>: <a href="../Phase.scala.html#8931" title="scala.tools.nsc.Phase">Phase</a>) = {
    <span title="Unit" class="keyword">if</span> (<a title="(xs: java.lang.String*)List[java.lang.String]" id="7415">List</a><a title="(elem: Any)Boolean" id="25768">(</a><span title="java.lang.String(&quot;typer&quot;)" class="string">&quot;typer&quot;</span>, <span title="java.lang.String(&quot;erasure&quot;)" class="string">&quot;erasure&quot;</span>, <span title="java.lang.String(&quot;cleanup&quot;)" class="string">&quot;cleanup&quot;</span>) contains <a href="#175527" title="scala.tools.nsc.Phase">phase</a>.<a href="../Phase.scala.html#23303" title="=&gt; String">name</a>) {
      <a href="../Global.scala.html#39294" title="(msg: String)Unit">inform</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;*** Cumulative statistics at phase &quot;</span> + <a href="#175527" title="scala.tools.nsc.Phase">phase</a>)
      <a href="../Global.scala.html#39294" title="(msg: String)Unit">inform</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;#tree nodes  : &quot;</span> + <a href="../ast/Trees.scala.html#26732" title="=&gt; Int">nodeCount</a>)
      <a href="../Global.scala.html#39294" title="(msg: String)Unit">inform</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;#identifiers : &quot;</span> + <a href="../Global.scala.html#39334" title="object Statistics.this.global.analyzer">analyzer</a>.<a href="../typechecker/Typers.scala.html#40084" title="=&gt; Int">idcnt</a>)
      <a href="../Global.scala.html#39294" title="(msg: String)Unit">inform</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;#selections  : &quot;</span> + <a href="../Global.scala.html#39334" title="object Statistics.this.global.analyzer">analyzer</a>.<a href="../typechecker/Typers.scala.html#40087" title="=&gt; Int">selcnt</a>)
      <a href="../Global.scala.html#39294" title="(msg: String)Unit">inform</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;#applications: &quot;</span> + <a href="../Global.scala.html#39334" title="object Statistics.this.global.analyzer">analyzer</a>.<a href="../typechecker/Typers.scala.html#40081" title="=&gt; Int">appcnt</a>)
      <a href="../Global.scala.html#39294" title="(msg: String)Unit">inform</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;#implicits   : &quot;</span> + <a href="../Global.scala.html#39334" title="object Statistics.this.global.analyzer">analyzer</a>.<a href="../typechecker/Typers.scala.html#40090" title="=&gt; Int">implcnt</a>)
      <a href="../Global.scala.html#39294" title="(msg: String)Unit">inform</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;#uniquetypes : &quot;</span> + <a href="../symtab/Types.scala.html#26474" title="=&gt; Int">uniqueTypeCount</a>)
      <a href="../Global.scala.html#39294" title="(msg: String)Unit">inform</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;#symbols     : &quot;</span> + <a href="../symtab/Symbols.scala.html#26269" title="=&gt; Int">symbolCount</a>)
      <a href="../Global.scala.html#39294" title="(msg: String)Unit">inform</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;#type symbols: &quot;</span> + <a href="../symtab/Symbols.scala.html#26270" title="=&gt; Int">typeSymbolCount</a>)
      <a href="../Global.scala.html#39294" title="(msg: String)Unit">inform</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;#class symbols: &quot;</span> + <a href="../symtab/Symbols.scala.html#26273" title="=&gt; Int">classSymbolCount</a>)
      <a href="../Global.scala.html#39294" title="(msg: String)Unit">inform</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;#singleton closures: &quot;</span> + <a href="../symtab/Types.scala.html#26306" title="=&gt; Int">singletonBaseTypeSeqCount</a>)
      <a href="../Global.scala.html#39294" title="(msg: String)Unit">inform</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;#compound closures : &quot;</span> + <a href="../symtab/Types.scala.html#26309" title="=&gt; Int">compoundBaseTypeSeqCount</a>)
      <a href="../Global.scala.html#39294" title="(msg: String)Unit">inform</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;#typeref closures  : &quot;</span> + <a href="../symtab/Types.scala.html#26312" title="=&gt; Int">typerefBaseTypeSeqCount</a>)
      <a href="../Global.scala.html#39294" title="(msg: String)Unit">inform</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;#findMember     : &quot;</span> + <a href="../symtab/Types.scala.html#26315" title="=&gt; Int">findMemberCount</a>)
      <a href="../Global.scala.html#39294" title="(msg: String)Unit">inform</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;#notfound member: &quot;</span> + <a href="../symtab/Types.scala.html#26318" title="=&gt; Int">noMemberCount</a>)
      <a href="../Global.scala.html#39294" title="(msg: String)Unit">inform</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;#multiple member: &quot;</span> + <a href="../symtab/Types.scala.html#26321" title="=&gt; Int">multMemberCount</a>)
      <a href="../Global.scala.html#39294" title="(msg: String)Unit">inform</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;time findMember: &quot;</span> + <a href="../symtab/Types.scala.html#26324" title="=&gt; Long">findMemberNanos</a>)
      <a href="../Global.scala.html#39294" title="(msg: String)Unit">inform</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;#norm meth   : &quot;</span> + <a href="../Global.scala.html#39334" title="object Statistics.this.global.analyzer">analyzer</a>.<a href="../typechecker/Infer.scala.html#40158" title="=&gt; Int">normM</a>)
      <a href="../Global.scala.html#39294" title="(msg: String)Unit">inform</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;#norm poly   : &quot;</span> + <a href="../Global.scala.html#39334" title="object Statistics.this.global.analyzer">analyzer</a>.<a href="../typechecker/Infer.scala.html#40161" title="=&gt; Int">normP</a>)
      <a href="../Global.scala.html#39294" title="(msg: String)Unit">inform</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;#norm other  : &quot;</span> + <a href="../Global.scala.html#39334" title="object Statistics.this.global.analyzer">analyzer</a>.<a href="../typechecker/Infer.scala.html#40164" title="=&gt; Int">normO</a>)
      <a href="../Global.scala.html#39294" title="(msg: String)Unit">inform</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;#subtype     : &quot;</span> + <a href="../symtab/Types.scala.html#26327" title="=&gt; Int">subtypeCount</a>)
      <a href="../Global.scala.html#39294" title="(msg: String)Unit">inform</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;ns subtype   : &quot;</span> + <a href="../symtab/Types.scala.html#26333" title="=&gt; Long">subtypeNanos</a>)
      <a href="../Global.scala.html#39294" title="(msg: String)Unit">inform</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;#sametype    : &quot;</span> + <a href="../symtab/Types.scala.html#26330" title="=&gt; Int">sametypeCount</a>)
      <a href="../Global.scala.html#39294" title="(msg: String)Unit">inform</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;#unique types: &quot;</span> + <a href="../symtab/Types.scala.html#26468" title="=&gt; scala.tools.nsc.util.HashSet[AnyRef]">uniques</a>.<a href="HashSet.scala.html#113389" title="=&gt; Int">size</a>)
      <a href="../Global.scala.html#39294" title="(msg: String)Unit">inform</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;ms type-flow-analysis: &quot;</span> + <a href="../Global.scala.html#39271" title="object Statistics.this.global.analysis">analysis</a>.<a href="../backend/icode/analysis/TypeFlowAnalysis.scala.html#60662" title="=&gt; Statistics.this.global.analysis.Timer">timer</a>.<a href="../backend/icode/analysis/TypeFlowAnalysis.scala.html#60668" title="=&gt; Long">millis</a>) 
      <span title="Unit" class="keyword">if</span> (<a href="#175527" title="scala.tools.nsc.Phase">phase</a>.<a href="../Phase.scala.html#23303" title="(x$1: AnyRef)Boolean" id="3647">name</a> == <span title="java.lang.String(&quot;typer&quot;)" class="string">&quot;typer&quot;</span>) {
        <a href="../Global.scala.html#39294" title="(msg: String)Unit">inform</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;time spent typechecking: &quot;</span>+<a href="#175465" title="(time: Long)java.lang.String">showRelTyper</a>(<a href="../Global.scala.html#39334" title="object Statistics.this.global.analyzer">analyzer</a>.<a href="../typechecker/Analyzer.scala.html#40032" title="=&gt; Long">typerTime</a>))
        <a href="../Global.scala.html#39294" title="(msg: String)Unit">inform</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;time spent in implicits: &quot;</span>+<a href="#175465" title="(time: Long)java.lang.String">showRelTyper</a>(<a href="../Global.scala.html#39334" title="object Statistics.this.global.analyzer">analyzer</a>.<a href="../typechecker/Implicits.scala.html#40195" title="=&gt; Long">implicitTime</a>))
        <a href="../Global.scala.html#39294" title="(msg: String)Unit">inform</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;    successful in scope: &quot;</span>+<a href="#175465" title="(time: Long)java.lang.String">showRelTyper</a>(<a href="../Global.scala.html#39334" title="object Statistics.this.global.analyzer">analyzer</a>.<a href="../typechecker/Implicits.scala.html#40198" title="=&gt; Long">inscopeSucceed</a>))
        <a href="../Global.scala.html#39294" title="(msg: String)Unit">inform</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;        failed in scope: &quot;</span>+<a href="#175465" title="(time: Long)java.lang.String">showRelTyper</a>(<a href="../Global.scala.html#39334" title="object Statistics.this.global.analyzer">analyzer</a>.<a href="../typechecker/Implicits.scala.html#40201" title="=&gt; Long">inscopeFail</a>))
        <a href="../Global.scala.html#39294" title="(msg: String)Unit">inform</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;     successful of type: &quot;</span>+<a href="#175465" title="(time: Long)java.lang.String">showRelTyper</a>(<a href="../Global.scala.html#39334" title="object Statistics.this.global.analyzer">analyzer</a>.<a href="../typechecker/Implicits.scala.html#40204" title="=&gt; Long">oftypeSucceed</a>))
        <a href="../Global.scala.html#39294" title="(msg: String)Unit">inform</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;         failed of type: &quot;</span>+<a href="#175465" title="(time: Long)java.lang.String">showRelTyper</a>(<a href="../Global.scala.html#39334" title="object Statistics.this.global.analyzer">analyzer</a>.<a href="../typechecker/Implicits.scala.html#40207" title="=&gt; Long">oftypeFail</a>))
        <a href="../Global.scala.html#39294" title="(msg: String)Unit">inform</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;    successful manifest: &quot;</span>+<a href="#175465" title="(time: Long)java.lang.String">showRelTyper</a>(<a href="../Global.scala.html#39334" title="object Statistics.this.global.analyzer">analyzer</a>.<a href="../typechecker/Implicits.scala.html#40210" title="=&gt; Long">manifSucceed</a>))
        <a href="../Global.scala.html#39294" title="(msg: String)Unit">inform</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;        failed manifest: &quot;</span>+<a href="#175465" title="(time: Long)java.lang.String">showRelTyper</a>(<a href="../Global.scala.html#39334" title="object Statistics.this.global.analyzer">analyzer</a>.<a href="../typechecker/Implicits.scala.html#40213" title="=&gt; Long">manifFail</a>))
        <a href="../Global.scala.html#39294" title="(msg: String)Unit">inform</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;implicit cache hitratio: &quot;</span>+<span title="implicit scala.Predef.stringWrapper : (x: String)scala.runtime.RichString" class="string">&quot;%2.1f&quot;</span>.<span title="(args: Any*)String">format</span>(<a href="../Global.scala.html#39334" title="object Statistics.this.global.analyzer">analyzer</a>.<a href="../typechecker/Implicits.scala.html#40216" title="=&gt; Int">hits</a>.<span title="(x$1: Int)Double">toDouble</span> <span title="(x$1: Int)Double">/</span> (<a href="../Global.scala.html#39334" title="object Statistics.this.global.analyzer">analyzer</a>.<a href="../typechecker/Implicits.scala.html#40216" title="(x$1: Int)Int">hits</a> + <a href="../Global.scala.html#39334" title="object Statistics.this.global.analyzer">analyzer</a>.<a href="../typechecker/Implicits.scala.html#40219" title="=&gt; Int">misses</a>) * <span title="Int(100)" class="int">100</span>))
        <a href="../Global.scala.html#39294" title="(msg: String)Unit">inform</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;implicit cache coverage: &quot;</span>+<span title="implicit scala.Predef.stringWrapper : (x: String)scala.runtime.RichString" class="string">&quot;%2.1f&quot;</span>.<span title="(args: Any*)String">format</span>((<a href="../Global.scala.html#39334" title="object Statistics.this.global.analyzer">analyzer</a>.<a href="../typechecker/Implicits.scala.html#40216" title="(x$1: Int)Int">hits</a> + <a href="../Global.scala.html#39334" title="object Statistics.this.global.analyzer">analyzer</a>.<a href="../typechecker/Implicits.scala.html#40219" title="=&gt; Int">misses</a>).<span title="(x$1: Int)Double">toDouble</span> <span title="(x$1: Int)Double">/</span> (<a href="../Global.scala.html#39334" title="object Statistics.this.global.analyzer">analyzer</a>.<a href="../typechecker/Implicits.scala.html#40222" title="(x$1: Int)Int">uncached</a> <span title="(x$1: Int)Int">+</span> <a href="../Global.scala.html#39334" title="object Statistics.this.global.analyzer">analyzer</a>.<a href="../typechecker/Implicits.scala.html#40216" title="=&gt; Int">hits</a> + <a href="../Global.scala.html#39334" title="object Statistics.this.global.analyzer">analyzer</a>.<a href="../typechecker/Implicits.scala.html#40219" title="=&gt; Int">misses</a>) * <span title="Int(100)" class="int">100</span>))
        <a href="../Global.scala.html#39294" title="(msg: String)Unit">inform</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;time spent in failed   : &quot;</span>+<a href="#175465" title="(time: Long)java.lang.String">showRelTyper</a>(<a href="../Global.scala.html#39334" title="object Statistics.this.global.analyzer">analyzer</a>.<a href="../typechecker/Typers.scala.html#40102" title="=&gt; Long">failedSilent</a>))     
        <a href="../Global.scala.html#39294" title="(msg: String)Unit">inform</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;       failed op=      : &quot;</span>+<a href="#175465" title="(time: Long)java.lang.String">showRelTyper</a>(<a href="../Global.scala.html#39334" title="object Statistics.this.global.analyzer">analyzer</a>.<a href="../typechecker/Typers.scala.html#40099" title="=&gt; Long">failedOpEqs</a>))     
        <a href="../Global.scala.html#39294" title="(msg: String)Unit">inform</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;       failed apply    : &quot;</span>+<a href="#175465" title="(time: Long)java.lang.String">showRelTyper</a>(<a href="../Global.scala.html#39334" title="object Statistics.this.global.analyzer">analyzer</a>.<a href="../typechecker/Typers.scala.html#40096" title="=&gt; Long">failedApplies</a>))
      }
      //for (t &lt;- uniques.iterator) println(&quot;unique: &quot;+t)
    }
  }
}

        </pre>
    </body>
</html>