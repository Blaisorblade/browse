<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/util/TreeSet.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style">
    </head>
    <body>
        <pre>
/* NSC -- new Scala compiler
 * Copyright 2005-2009 LAMP/EPFL
 * @author  Martin Odersky
 */
// $Id: TreeSet.scala 18548 2009-08-22 21:27:49Z extempore $

<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> util

/** Sets implemented as binary trees.
 *
 *  @author Martin Odersky
 *  @version 1.0
 */
<span class="keyword">class</span> <a title="class TreeSet[T &gt;: Null &lt;: AnyRef] extends scala.tools.nsc.util.Set[T] with ScalaObject" id="14653">TreeSet</a>[<a title="&gt;: Null &lt;: AnyRef" id="22412">T</a> &gt;: Null &lt;: <a id="1">AnyRef</a>]<span title="ScalaObject">(</span><a title="(T, T) =&gt; Boolean" id="336604">less</a>: (T, T) =&gt; Boolean) <span class="keyword">extends</span> <a href="Set.scala.html#14533" title="scala.tools.nsc.util.Set[T]">Set</a>[T] {

  <span class="keyword">private</span> <span class="keyword">class</span> <a title="class Tree extends java.lang.Object with ScalaObject" id="336587">Tree</a><span title="ScalaObject">(</span><span class="keyword">val</span> <a title="T" id="605384">elem</a>: <a href="#22412" title="T">T</a>) {
    <span class="keyword">var</span> <a title="TreeSet.this.Tree" id="337029">l</a>: <a href="#336587" title="TreeSet.this.Tree">Tree</a> = <span title="Null(null)" class="keyword">null</span>
    <span class="keyword">var</span> <a title="TreeSet.this.Tree" id="337032">r</a>: <a href="#336587" title="TreeSet.this.Tree">Tree</a> = <span title="Null(null)" class="keyword">null</span>
  }

  <span class="keyword">private</span> <span class="keyword">var</span> <a title="TreeSet.this.Tree" id="336589">tree</a>: <a href="#336587" title="TreeSet.this.Tree">Tree</a> = <span title="Null(null)" class="keyword">null</span>

  <span class="keyword">def</span> <a title="(x: T)T" id="336591">findEntry</a>(<a title="T" id="605387">x</a>: <a href="#22412" title="T">T</a>): <a href="#22412" title="T">T</a> = {
    <span class="keyword">def</span> <a title="(t: TreeSet.this.Tree)T" id="605390">find</a>(<a title="TreeSet.this.Tree" id="605391">t</a>: <a href="#336587" title="TreeSet.this.Tree">Tree</a>): <a href="#22412" title="T">T</a> = {
      <span title="T" class="keyword">if</span> (<a href="#605391" title="(x$1: AnyRef)Boolean">t</a> eq <span title="Null(null)" class="keyword">null</span>) <span title="Null(null)" class="keyword">null</span>
      <span class="keyword">else</span> <span title="T" class="keyword">if</span> (<a href="#336604" title="(v1: T,v2: T)Boolean">less</a>(<a href="#605387" title="T">x</a>, <a href="#605391" title="TreeSet.this.Tree">t</a>.<a href="#605384" title="=&gt; T">elem</a>)) <a href="#605390" title="(t: TreeSet.this.Tree)T">find</a>(<a href="#605391" title="TreeSet.this.Tree">t</a>.<a href="#337029" title="=&gt; TreeSet.this.Tree">l</a>)
      <span class="keyword">else</span> <span title="T" class="keyword">if</span> (<a href="#336604" title="(v1: T,v2: T)Boolean">less</a>(<a href="#605391" title="TreeSet.this.Tree">t</a>.<a href="#605384" title="=&gt; T">elem</a>, <a href="#605387" title="T">x</a>)) <a href="#605390" title="(t: TreeSet.this.Tree)T">find</a>(<a href="#605391" title="TreeSet.this.Tree">t</a>.<a href="#337032" title="=&gt; TreeSet.this.Tree">r</a>)
      <span class="keyword">else</span> <a href="#605391" title="TreeSet.this.Tree">t</a>.<a href="#605384" title="=&gt; T">elem</a>
    }
    <a href="#605390" title="(t: TreeSet.this.Tree)T">find</a>(<a href="#336589" title="=&gt; TreeSet.this.Tree">tree</a>)
  }

  <span class="keyword">def</span> <a title="(x: T)Unit" id="336592">addEntry</a>(<a title="T" id="336645">x</a>: <a href="#22412" title="T">T</a>) {
    <span class="keyword">def</span> <a title="(t: TreeSet.this.Tree)TreeSet.this.Tree" id="605408">add</a>(<a title="TreeSet.this.Tree" id="605409">t</a>: <a href="#336587" title="TreeSet.this.Tree">Tree</a>): <a href="#336587" title="TreeSet.this.Tree">Tree</a> = {
      <span title="TreeSet.this.Tree" class="keyword">if</span> (<a href="#605409" title="(x$1: AnyRef)Boolean">t</a> eq <span title="Null(null)" class="keyword">null</span>) <span title="TreeSet.this.Tree" class="keyword">new</span> <a href="#336587" title="TreeSet.this.Tree">Tree</a>(<a href="#336645" title="T">x</a>)
      <span class="keyword">else</span> <span title="TreeSet.this.Tree" class="keyword">if</span> (<a href="#336604" title="(v1: T,v2: T)Boolean">less</a>(<a href="#336645" title="T">x</a>, <a href="#605409" title="TreeSet.this.Tree">t</a>.<a href="#605384" title="=&gt; T">elem</a>)) { <a href="#605409" title="TreeSet.this.Tree">t</a>.<a href="#337029" title="(x$1: TreeSet.this.Tree)Unit">l</a> = <a href="#605408" title="(t: TreeSet.this.Tree)TreeSet.this.Tree">add</a>(<a href="#605409" title="TreeSet.this.Tree">t</a>.<a href="#337029" title="=&gt; TreeSet.this.Tree">l</a>); <a href="#605409" title="TreeSet.this.Tree">t</a> }
      <span class="keyword">else</span> <span title="TreeSet.this.Tree" class="keyword">if</span> (<a href="#336604" title="(v1: T,v2: T)Boolean">less</a>(<a href="#605409" title="TreeSet.this.Tree">t</a>.<a href="#605384" title="=&gt; T">elem</a>, <a href="#336645" title="T">x</a>)) { <a href="#605409" title="TreeSet.this.Tree">t</a>.<a href="#337032" title="(x$1: TreeSet.this.Tree)Unit">r</a> = <a href="#605408" title="(t: TreeSet.this.Tree)TreeSet.this.Tree">add</a>(<a href="#605409" title="TreeSet.this.Tree">t</a>.<a href="#337032" title="=&gt; TreeSet.this.Tree">r</a>); <a href="#605409" title="TreeSet.this.Tree">t</a> }
      <span class="keyword">else</span> <a href="#605409" title="TreeSet.this.Tree">t</a>
    }
    <a href="#336589" title="(x$1: TreeSet.this.Tree)Unit">tree</a> = <a href="#605408" title="(t: TreeSet.this.Tree)TreeSet.this.Tree">add</a>(<a href="#336589" title="=&gt; TreeSet.this.Tree">tree</a>)
  }

  <span class="keyword">def</span> <a title="=&gt; Iterator[T]" id="336593">iterator</a> = {
    <span class="keyword">def</span> <a title="(t: TreeSet.this.Tree)Iterator[T]" id="337022">elems</a>(<a title="TreeSet.this.Tree" id="337023">t</a>: <a href="#336587" title="TreeSet.this.Tree">Tree</a>): <a title="Iterator[T]" id="4276">Iterator</a>[T] = {
      <span class="keyword">var</span> <a title="&lt;refinement&gt; extends java.lang.Object with Iterator[T]" id="337034">it</a> = <a title="(elem: T)java.lang.Object with Iterator[T]" id="32316">Iterator</a> single <a href="#337023" title="TreeSet.this.Tree">t</a>.<a href="#605384" title="=&gt; T">elem</a>
      <span title="Unit" class="keyword">if</span> (<a href="#337023" title="TreeSet.this.Tree">t</a>.<a href="#337029" title="(x$1: AnyRef)Boolean">l</a> ne <span title="Null(null)" class="keyword">null</span>) <a href="#337034" title="&lt;refinement&gt; extends java.lang.Object with Iterator[T]">it</a> = <a href="#337022" title="(t: TreeSet.this.Tree)Iterator[T]">elems</a><span title="(that: Iterator[T])java.lang.Object with Iterator[T]">(</span><a href="#337023" title="TreeSet.this.Tree">t</a>.<a href="#337029" title="=&gt; TreeSet.this.Tree">l</a>) append <a href="#337034" title="&lt;refinement&gt; extends java.lang.Object with Iterator[T]">it</a>
      <span title="Unit" class="keyword">if</span> (<a href="#337023" title="TreeSet.this.Tree">t</a>.<a href="#337032" title="(x$1: AnyRef)Boolean">r</a> ne <span title="Null(null)" class="keyword">null</span>) <a href="#337034" title="&lt;refinement&gt; extends java.lang.Object with Iterator[T]">it</a> = <a href="#337034" title="(that: Iterator[T])java.lang.Object with Iterator[T]">it</a> append <a href="#337022" title="(t: TreeSet.this.Tree)Iterator[T]">elems</a>(<a href="#337023" title="TreeSet.this.Tree">t</a>.<a href="#337032" title="=&gt; TreeSet.this.Tree">r</a>)
      // if (t.l ne null) it = elems(t.l) ++ it
      // if (t.r ne null) it = it ++ elems(t.r)
      <a href="#337034" title="&lt;refinement&gt; extends java.lang.Object with Iterator[T]">it</a>
    }
    <span title="Iterator[T]" class="keyword">if</span> (<a href="#336589" title="(x$1: AnyRef)Boolean">tree</a> eq <span title="Null(null)" class="keyword">null</span>) <span title="=&gt; collection.Iterator.type">Iterator</span>.<a title="=&gt; &lt;refinement&gt; extends java.lang.Object with Iterator[Nothing]" id="32117">empty</a> <span class="keyword">else</span> <a href="#337022" title="(t: TreeSet.this.Tree)Iterator[T]">elems</a>(<a href="#336589" title="=&gt; TreeSet.this.Tree">tree</a>)
  }

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="336594">toString</a>(): <a title="String" id="1605">String</a> = {
    <span title="String" class="keyword">if</span> (<a href="#336589" title="(x$1: AnyRef)Boolean">tree</a> eq <span title="Null(null)" class="keyword">null</span>) <span title="java.lang.String(&quot;&lt;empty&gt;&quot;)" class="string">&quot;&lt;empty&gt;&quot;</span> <span class="keyword">else</span> <span title="(x$1: Any)java.lang.String" class="string">&quot;(...&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#336589" title="=&gt; TreeSet.this.Tree">tree</a>.<a href="#605384" title="=&gt; T">elem</a> + <span title="java.lang.String(&quot;...)&quot;)" class="string">&quot;...)&quot;</span>
  }
}

        </pre>
    </body>
</html>