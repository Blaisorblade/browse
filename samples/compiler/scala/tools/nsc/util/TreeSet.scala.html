<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/util/TreeSet.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style">
    </head>
    <body>
        <pre>
/* NSC -- new Scala compiler
 * Copyright 2005-2009 LAMP/EPFL
 * @author  Martin Odersky
 */
// $Id: TreeSet.scala 18548 2009-08-22 21:27:49Z extempore $

<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> util

/** Sets implemented as binary trees.
 *
 *  @author Martin Odersky
 *  @version 1.0
 */
<span class="keyword">class</span> <a title="class TreeSet[T &gt;: Null &lt;: AnyRef] extends scala.tools.nsc.util.Set[T] with ScalaObject" id="14728">TreeSet</a>[<a title="&gt;: Null &lt;: AnyRef" id="22554">T</a> &gt;: Null &lt;: <a id="1">AnyRef</a>]<span title="ScalaObject">(</span><a title="(T, T) =&gt; Boolean" id="337588">less</a>: (T, T) =&gt; Boolean) <span class="keyword">extends</span> <a href="Set.scala.html#14608" title="scala.tools.nsc.util.Set[T]">Set</a>[T] {

  <span class="keyword">private</span> <span class="keyword">class</span> <a title="class Tree extends java.lang.Object with ScalaObject" id="337571">Tree</a><span title="ScalaObject">(</span><span class="keyword">val</span> <a title="T" id="606983">elem</a>: <a href="#22554" title="T">T</a>) {
    <span class="keyword">var</span> <a title="TreeSet.this.Tree" id="338013">l</a>: <a href="#337571" title="TreeSet.this.Tree">Tree</a> = <span title="Null(null)" class="keyword">null</span>
    <span class="keyword">var</span> <a title="TreeSet.this.Tree" id="338016">r</a>: <a href="#337571" title="TreeSet.this.Tree">Tree</a> = <span title="Null(null)" class="keyword">null</span>
  }

  <span class="keyword">private</span> <span class="keyword">var</span> <a title="TreeSet.this.Tree" id="337573">tree</a>: <a href="#337571" title="TreeSet.this.Tree">Tree</a> = <span title="Null(null)" class="keyword">null</span>

  <span class="keyword">def</span> <a title="(x: T)T" id="337575">findEntry</a>(<a title="T" id="606986">x</a>: <a href="#22554" title="T">T</a>): <a href="#22554" title="T">T</a> = {
    <span class="keyword">def</span> <a title="(t: TreeSet.this.Tree)T" id="606989">find</a>(<a title="TreeSet.this.Tree" id="606990">t</a>: <a href="#337571" title="TreeSet.this.Tree">Tree</a>): <a href="#22554" title="T">T</a> = {
      <span title="T" class="keyword">if</span> (<a href="#606990" title="(x$1: AnyRef)Boolean">t</a> eq <span title="Null(null)" class="keyword">null</span>) <span title="Null(null)" class="keyword">null</span>
      <span class="keyword">else</span> <span title="T" class="keyword">if</span> (<a href="#337588" title="(v1: T,v2: T)Boolean">less</a>(<a href="#606986" title="T">x</a>, <a href="#606990" title="TreeSet.this.Tree">t</a>.<a href="#606983" title="=&gt; T">elem</a>)) <a href="#606989" title="(t: TreeSet.this.Tree)T">find</a>(<a href="#606990" title="TreeSet.this.Tree">t</a>.<a href="#338013" title="=&gt; TreeSet.this.Tree">l</a>)
      <span class="keyword">else</span> <span title="T" class="keyword">if</span> (<a href="#337588" title="(v1: T,v2: T)Boolean">less</a>(<a href="#606990" title="TreeSet.this.Tree">t</a>.<a href="#606983" title="=&gt; T">elem</a>, <a href="#606986" title="T">x</a>)) <a href="#606989" title="(t: TreeSet.this.Tree)T">find</a>(<a href="#606990" title="TreeSet.this.Tree">t</a>.<a href="#338016" title="=&gt; TreeSet.this.Tree">r</a>)
      <span class="keyword">else</span> <a href="#606990" title="TreeSet.this.Tree">t</a>.<a href="#606983" title="=&gt; T">elem</a>
    }
    <a href="#606989" title="(t: TreeSet.this.Tree)T">find</a>(<a href="#337573" title="=&gt; TreeSet.this.Tree">tree</a>)
  }

  <span class="keyword">def</span> <a title="(x: T)Unit" id="337576">addEntry</a>(<a title="T" id="337629">x</a>: <a href="#22554" title="T">T</a>) {
    <span class="keyword">def</span> <a title="(t: TreeSet.this.Tree)TreeSet.this.Tree" id="607007">add</a>(<a title="TreeSet.this.Tree" id="607008">t</a>: <a href="#337571" title="TreeSet.this.Tree">Tree</a>): <a href="#337571" title="TreeSet.this.Tree">Tree</a> = {
      <span title="TreeSet.this.Tree" class="keyword">if</span> (<a href="#607008" title="(x$1: AnyRef)Boolean">t</a> eq <span title="Null(null)" class="keyword">null</span>) <span title="TreeSet.this.Tree" class="keyword">new</span> <a href="#337571" title="TreeSet.this.Tree">Tree</a>(<a href="#337629" title="T">x</a>)
      <span class="keyword">else</span> <span title="TreeSet.this.Tree" class="keyword">if</span> (<a href="#337588" title="(v1: T,v2: T)Boolean">less</a>(<a href="#337629" title="T">x</a>, <a href="#607008" title="TreeSet.this.Tree">t</a>.<a href="#606983" title="=&gt; T">elem</a>)) { <a href="#607008" title="TreeSet.this.Tree">t</a>.<a href="#338013" title="(x$1: TreeSet.this.Tree)Unit">l</a> = <a href="#607007" title="(t: TreeSet.this.Tree)TreeSet.this.Tree">add</a>(<a href="#607008" title="TreeSet.this.Tree">t</a>.<a href="#338013" title="=&gt; TreeSet.this.Tree">l</a>); <a href="#607008" title="TreeSet.this.Tree">t</a> }
      <span class="keyword">else</span> <span title="TreeSet.this.Tree" class="keyword">if</span> (<a href="#337588" title="(v1: T,v2: T)Boolean">less</a>(<a href="#607008" title="TreeSet.this.Tree">t</a>.<a href="#606983" title="=&gt; T">elem</a>, <a href="#337629" title="T">x</a>)) { <a href="#607008" title="TreeSet.this.Tree">t</a>.<a href="#338016" title="(x$1: TreeSet.this.Tree)Unit">r</a> = <a href="#607007" title="(t: TreeSet.this.Tree)TreeSet.this.Tree">add</a>(<a href="#607008" title="TreeSet.this.Tree">t</a>.<a href="#338016" title="=&gt; TreeSet.this.Tree">r</a>); <a href="#607008" title="TreeSet.this.Tree">t</a> }
      <span class="keyword">else</span> <a href="#607008" title="TreeSet.this.Tree">t</a>
    }
    <a href="#337573" title="(x$1: TreeSet.this.Tree)Unit">tree</a> = <a href="#607007" title="(t: TreeSet.this.Tree)TreeSet.this.Tree">add</a>(<a href="#337573" title="=&gt; TreeSet.this.Tree">tree</a>)
  }

  <span class="keyword">def</span> <a title="=&gt; Iterator[T]" id="337577">iterator</a> = {
    <span class="keyword">def</span> <a title="(t: TreeSet.this.Tree)Iterator[T]" id="338006">elems</a>(<a title="TreeSet.this.Tree" id="338007">t</a>: <a href="#337571" title="TreeSet.this.Tree">Tree</a>): <a title="Iterator[T]" id="4309">Iterator</a>[T] = {
      <span class="keyword">var</span> <a title="&lt;refinement&gt; extends java.lang.Object with Iterator[T]" id="338018">it</a> = <a title="(elem: T)java.lang.Object with Iterator[T]" id="32502">Iterator</a> single <a href="#338007" title="TreeSet.this.Tree">t</a>.<a href="#606983" title="=&gt; T">elem</a>
      <span title="Unit" class="keyword">if</span> (<a href="#338007" title="TreeSet.this.Tree">t</a>.<a href="#338013" title="(x$1: AnyRef)Boolean">l</a> ne <span title="Null(null)" class="keyword">null</span>) <a href="#338018" title="&lt;refinement&gt; extends java.lang.Object with Iterator[T]">it</a> = <a href="#338006" title="(t: TreeSet.this.Tree)Iterator[T]">elems</a><span title="(that: Iterator[T])java.lang.Object with Iterator[T]">(</span><a href="#338007" title="TreeSet.this.Tree">t</a>.<a href="#338013" title="=&gt; TreeSet.this.Tree">l</a>) append <a href="#338018" title="&lt;refinement&gt; extends java.lang.Object with Iterator[T]">it</a>
      <span title="Unit" class="keyword">if</span> (<a href="#338007" title="TreeSet.this.Tree">t</a>.<a href="#338016" title="(x$1: AnyRef)Boolean">r</a> ne <span title="Null(null)" class="keyword">null</span>) <a href="#338018" title="&lt;refinement&gt; extends java.lang.Object with Iterator[T]">it</a> = <a href="#338018" title="(that: Iterator[T])java.lang.Object with Iterator[T]">it</a> append <a href="#338006" title="(t: TreeSet.this.Tree)Iterator[T]">elems</a>(<a href="#338007" title="TreeSet.this.Tree">t</a>.<a href="#338016" title="=&gt; TreeSet.this.Tree">r</a>)
      // if (t.l ne null) it = elems(t.l) ++ it
      // if (t.r ne null) it = it ++ elems(t.r)
      <a href="#338018" title="&lt;refinement&gt; extends java.lang.Object with Iterator[T]">it</a>
    }
    <span title="Iterator[T]" class="keyword">if</span> (<a href="#337573" title="(x$1: AnyRef)Boolean">tree</a> eq <span title="Null(null)" class="keyword">null</span>) <span title="=&gt; collection.Iterator.type">Iterator</span>.<a title="=&gt; &lt;refinement&gt; extends java.lang.Object with Iterator[Nothing]" id="32303">empty</a> <span class="keyword">else</span> <a href="#338006" title="(t: TreeSet.this.Tree)Iterator[T]">elems</a>(<a href="#337573" title="=&gt; TreeSet.this.Tree">tree</a>)
  }

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="337578">toString</a>(): <a title="String" id="1626">String</a> = {
    <span title="String" class="keyword">if</span> (<a href="#337573" title="(x$1: AnyRef)Boolean">tree</a> eq <span title="Null(null)" class="keyword">null</span>) <span title="java.lang.String(&quot;&lt;empty&gt;&quot;)" class="string">&quot;&lt;empty&gt;&quot;</span> <span class="keyword">else</span> <span title="(x$1: Any)java.lang.String" class="string">&quot;(...&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#337573" title="=&gt; TreeSet.this.Tree">tree</a>.<a href="#606983" title="=&gt; T">elem</a> + <span title="java.lang.String(&quot;...)&quot;)" class="string">&quot;...)&quot;</span>
  }
}

        </pre>
    </body>
</html>