<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/util/ClassPath.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style">
    </head>
    <body>
        <pre>
/* NSC -- new Scala compiler
 * Copyright 2006-2009 LAMP/EPFL
 * @author  Martin Odersky
 */

// $Id: ClassPath.scala 18549 2009-08-22 23:29:38Z extempore $

<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> util

<span class="keyword">import</span> java.io.File
<span class="keyword">import</span> java.net.URL
<span class="keyword">import</span> java.util.StringTokenizer

<span class="keyword">import</span> scala.collection.mutable.ArrayBuffer
<span class="keyword">import</span> scala.tools.nsc.io.AbstractFile

/** &lt;p&gt;
 *    This module provides star expansion of '-classpath' option arguments.
 *  &lt;/p&gt;
 *
 *  @author Stepan Koltsov
 */
<span class="keyword">object</span> <a title="object scala.tools.nsc.util.ClassPath" id="14795">ClassPath</a> <span title="ScalaObject">{</span>
  /** Expand single path entry */
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(pattern: String)List[String]" id="118237">expandStar</a>(<a title="String" id="168542">pattern</a>: <span title="String">String</span>): <span title="List[String]">List</span>[String] = {
    <span class="keyword">def</span> <a title="(name: String)Boolean" id="168544">nameMatchesStar</a>(<a title="String" id="168547">name</a>: <span title="String">String</span>) = <a href="#168547" title="String">name</a>.<a title="()java.lang.String" id="7116">toLowerCase</a>().<span title="(x$1: java.lang.String)Boolean">endsWith</span>(<span title="java.lang.String(&quot;.jar&quot;)" class="string">&quot;.jar&quot;</span>)
    
    /** Get all jars in directory */
    <span class="keyword">def</span> <a title="(f: java.io.File)List[java.lang.String]" id="168545">lsJars</a>(<a title="java.io.File" id="168563">f</a>: <span title="java.io.File">File</span>) = {
      <span class="keyword">val</span> <a title="Array[java.io.File]" id="168564">list</a> = <a href="#168563" title="java.io.File">f</a>.<a title="()Array[java.io.File]" id="35393">listFiles</a>()
      <span title="List[java.lang.String]" class="keyword">if</span> (<a href="#168564" title="(x$1: AnyRef)Boolean">list</a> eq <span title="Null(null)" class="keyword">null</span>) <span title="object Nil">Nil</span>
      <span class="keyword">else</span> <a href="#168564" title="Array[java.io.File]">list</a>.<a title="(p: (java.io.File) =&gt; Boolean)Array[java.io.File]" id="25412">filter</a>(<a title="java.io.File" id="168586">f</a> =&gt; <a href="#168586" title="java.io.File">f</a>.<a title="()Boolean" id="35383">isFile</a><span title="(x$1: Boolean)Boolean">(</span>) &amp;&amp; <a href="#168544" title="(name: String)Boolean">nameMatchesStar</a>(<a href="#168586" title="java.io.File">f</a>.<a title="()java.lang.String" id="35368">getName</a>())).<a title="(f: (java.io.File) =&gt; java.lang.String)(implicit bf: scala.collection.generic.BuilderFactory[java.lang.String,Array[java.lang.String],Array[java.io.File]])Array[java.lang.String]" id="25402">map</a><a title="scala.collection.generic.BuilderFactory[java.lang.String,Array[java.lang.String],Array[_]]" id="906">(</a><a href="#168605" title="java.io.File">_</a>.<a title="()java.lang.String" id="35371">getPath</a>()).<span title="=&gt; List[java.lang.String]">toList</span>
    }
    
    <span class="keyword">val</span> <a title="java.lang.String" id="168546">suffix</a> = <span title="object java.io.File">File</span>.<a title="(x$1: Any)java.lang.String" id="35353">separator</a> + <span title="java.lang.String(&quot;*&quot;)" class="string">&quot;*&quot;</span>
    
    <span title="List[String]" class="keyword">if</span> (<a href="#168542" title="(x$1: AnyRef)Boolean">pattern</a> == <span title="java.lang.String(&quot;*&quot;)" class="string">&quot;*&quot;</span>) <a href="#168545" title="(f: java.io.File)List[java.lang.String]">lsJars</a>(<span title="java.io.File" class="keyword">new</span> <span title="java.io.File">File</span>(<span title="java.lang.String(&quot;.&quot;)" class="string">&quot;.&quot;</span>))
    <span class="keyword">else</span> <span title="List[String]" class="keyword">if</span> (<a href="#168542" title="(x$1: java.lang.String)Boolean">pattern</a> endsWith <a href="#168546" title="java.lang.String">suffix</a>) <a href="#168545" title="(f: java.io.File)List[java.lang.String]">lsJars</a>(<span title="java.io.File" class="keyword">new</span> <span title="java.io.File">File</span>(<a href="#168542" title="String">pattern</a>.<span title="(x$1: Int,x$2: Int)java.lang.String">substring</span>(<span title="Int(0)" class="int">0</span>, <a href="#168542" title="String">pattern</a>.<span title="(x$1: Int)Int">length</span> - <a href="#168546" title="java.lang.String">suffix</a>.<span title="()Int">length</span>)))
    <span class="keyword">else</span> <a href="#168542" title="String">pattern</a> <a href="#168744" title="String">::</a> <span title="(x: String)List[String]">Nil</span>
  }
  
  /** Split path using platform-dependent path separator */
  <span class="keyword">def</span> <a title="(path: String)List[String]" id="118238">splitPath</a>(<a title="String" id="168752">path</a>: <span title="String">String</span>): <span title="List[String]">List</span>[String] =
    <a href="#168752" title="(x$1: java.lang.String)Array[java.lang.String]" id="7112">path</a> split <span title="object java.io.File">File</span>.<span title="java.lang.String">pathSeparator</span> <span title="=&gt; List[java.lang.String]">toList</span>
  
  /** Expand path with expanding stars */
  <span class="keyword">def</span> <a title="(path: String)List[String]" id="118239">expandPath</a>(<a title="String" id="118246">path</a>: <span title="String">String</span>): <span title="List[String]">List</span>[String] = <a href="#118238" title="(path: String)List[String]">splitPath</a>(<a href="#118246" title="String">path</a>).<a title="(f: (String) =&gt; Traversable[String])(implicit bf: scala.collection.generic.BuilderFactory[String,List[String],List[String]])List[String]" id="25407">flatMap</a><a title="scala.collection.generic.BuilderFactory[String,List[String],List#Coll]" id="7415">(</a><a href="#118237" title="(pattern: String)List[String]">expandStar</a>(<a href="#168768" title="String">_</a>))
  
  <span class="keyword">def</span> <a title="(path: String,expandStar: Boolean)List[String]" id="118240">expandPath</a>(<a title="String" id="118243">path</a>: <span title="String">String</span>, <a title="Boolean" id="118244">expandStar</a>: <span title="Boolean">Boolean</span>): <span title="List[String]">List</span>[String] =
    <span title="List[String]" class="keyword">if</span> (<a href="#118244" title="Boolean">expandStar</a>) <a href="#118239" title="(path: String)List[String]">expandPath</a>(<a href="#118243" title="String">path</a>)
    <span class="keyword">else</span> <a href="#118238" title="(path: String)List[String]">splitPath</a>(<a href="#118243" title="String">path</a>)

}

/** &lt;p&gt;
 *    Richer classpath abstraction than files.
 *  &lt;/p&gt;
 *  &lt;p&gt;
 *    Roughly based on Eclipse's classpath abstractions.
 *  &lt;/p&gt;
 *
 *  @author Sean McDirmid
 */
<span class="keyword">class</span> <a title="class ClassPath extends java.lang.Object with ScalaObject" id="14794">ClassPath</a><span title="ScalaObject">(</span><a title="Boolean" id="109875">onlyPresentation</a>: <span title="Boolean">Boolean</span>) {

  <span class="keyword">def</span> <a title="()scala.tools.nsc.util.ClassPath" id="109866" class="keyword">this</a>() = <a href="#14794" title="ClassPath.this.type" class="keyword">this</a>(<span title="Boolean(false)" class="keyword">false</span>)

  <span class="keyword">class</span> <a title="class Source extends java.lang.Object with ScalaObject" id="109867">Source</a><span title="ScalaObject">(</span><span class="keyword">val</span> <a title="scala.tools.nsc.io.AbstractFile" id="168827">location</a>: <a href="../io/AbstractFile.scala.html#20689" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a>, <span class="keyword">val</span> <a title="Boolean" id="168828">compile</a>: <span title="Boolean">Boolean</span>) {
    // assert(location           != null, &quot;cannot find source location&quot;)
    // assert(location.getFile() != null, &quot;cannot find source location &quot; + &quot; &quot; + location + &quot; &quot; + location.getClass())
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="168823">toString</a>(): <span title="String">String</span> = <span title="(x$1: Any)java.lang.String" class="string">&quot;&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#168827" title="=&gt; scala.tools.nsc.io.AbstractFile">location</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; &quot;)" class="string">&quot; &quot;</span> + <a href="#168828" title="=&gt; Boolean">compile</a>
  }

  <span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class Entry extends java.lang.Object with ScalaObject" id="109868">Entry</a><span title="ScalaObject">(</span><span class="keyword">val</span> <a title="scala.tools.nsc.io.AbstractFile" id="168846">location</a>: <a href="../io/AbstractFile.scala.html#20689" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a>) {
    // assert(location           != null, &quot;cannot find classpath location&quot;)
    // assert(location.getFile() != null, &quot;cannot find classpath location &quot; + &quot; &quot; + location + &quot; &quot; + location.getClass())
    <span class="keyword">def</span> <a title="=&gt; ClassPath.this.Source" id="168842">source</a>: <a href="#109867" title="ClassPath.this.Source">Source</a>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="()java.lang.String" id="168843">toString</a>() = 
      <span title="(x$1: Any)java.lang.String">(</span><span title="java.lang.String" class="keyword">if</span> (<a href="#168846" title="(x$1: AnyRef)Boolean">location</a> == <span title="Null(null)" class="keyword">null</span>) <span title="java.lang.String(&quot;&lt;none&gt;&quot;)" class="string">&quot;&lt;none&gt;&quot;</span> <span class="keyword">else</span> <a href="#168846" title="=&gt; scala.tools.nsc.io.AbstractFile">location</a>.<a href="../io/AbstractFile.scala.html#51660" title="()String">toString</a>) + 
        (<span title="Any" class="keyword">if</span> (<a href="#168842" title="(x$1: AnyRef)Boolean">source</a> == <span title="Null(null)" class="keyword">null</span>) <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span> <span class="keyword">else</span> <span title="(x$1: Any)java.lang.String" class="string">&quot; source=&quot;</span> + <a href="#168842" title="=&gt; ClassPath.this.Source">source</a>)
  }

  <span class="keyword">class</span> <a title="class Output extends ClassPath.this.Entry with ScalaObject" id="109869">Output</a><span title="ScalaObject">(</span><a title="scala.tools.nsc.io.AbstractFile" id="168882">location0</a>: <a href="../io/AbstractFile.scala.html#20689" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a>, <span class="keyword">val</span> <a title="scala.tools.nsc.io.AbstractFile" id="168883">sourceFile</a>: <a href="../io/AbstractFile.scala.html#20689" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a>) <span class="keyword">extends</span> <a href="#109868" title="ClassPath.this.Entry">Entry</a>(<a href="#168882" title="scala.tools.nsc.io.AbstractFile">location0</a>) {
    <span class="keyword">def</span> <a title="=&gt; ClassPath.this.Source" id="168878">source</a> = <span title="ClassPath.this.Source" class="keyword">if</span> (<a href="#168883" title="(x$1: AnyRef)Boolean">sourceFile</a> ne <span title="Null(null)" class="keyword">null</span>) <span title="ClassPath.this.Source" class="keyword">new</span> <a href="#109867" title="ClassPath.this.Source">Source</a>(<a href="#168883" title="=&gt; scala.tools.nsc.io.AbstractFile">sourceFile</a>, <span title="Boolean(true)" class="keyword">true</span>) <span class="keyword">else</span> <span title="Null(null)" class="keyword">null</span>
  }

  <span class="keyword">class</span> <a title="class Library extends ClassPath.this.Entry with ScalaObject" id="109870">Library</a><span title="ScalaObject">(</span><a title="scala.tools.nsc.io.AbstractFile" id="168901">location0</a>: <a href="../io/AbstractFile.scala.html#20689" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a>) <span class="keyword">extends</span> <a href="#109868" title="ClassPath.this.Entry">Entry</a>(<a href="#168901" title="scala.tools.nsc.io.AbstractFile">location0</a>) {
    <span class="keyword">def</span> <a title="=&gt; scala.tools.nsc.io.AbstractFile" id="168896">doc</a>: <a href="../io/AbstractFile.scala.html#20689" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a> = <span title="Null(null)" class="keyword">null</span>
    <span class="keyword">def</span> <a title="=&gt; scala.tools.nsc.io.AbstractFile" id="168897">sourceFile</a>: <a href="../io/AbstractFile.scala.html#20689" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a> = <span title="Null(null)" class="keyword">null</span>
    <span class="keyword">def</span> <a title="=&gt; ClassPath.this.Source" id="168898">source</a> = <span title="ClassPath.this.Source" class="keyword">if</span> (<a href="#168897" title="(x$1: AnyRef)Boolean">sourceFile</a> eq <span title="Null(null)" class="keyword">null</span>) <span title="Null(null)" class="keyword">null</span> <span class="keyword">else</span> <span title="ClassPath.this.Source" class="keyword">new</span> <a href="#109867" title="ClassPath.this.Source">Source</a>(<a href="#168897" title="=&gt; scala.tools.nsc.io.AbstractFile">sourceFile</a>, <span title="Boolean(false)" class="keyword">false</span>)
  }

  <span class="keyword">class</span> <a title="class Context extends java.lang.Object with ScalaObject" id="109871">Context</a><span title="ScalaObject">(</span><span class="keyword">val</span> <a title="List[ClassPath.this.Entry]" id="168932">entries</a>: <span title="List[ClassPath.this.Entry]">List</span>[Entry]) {
    <span class="keyword">def</span> <a title="(name: String,isDir: Boolean)ClassPath.this.Context" id="168919">find</a>(<a title="String" id="168935">name</a>: <span title="String">String</span>, <a title="Boolean" id="168936">isDir</a>: <span title="Boolean">Boolean</span>): <a href="#109871" title="ClassPath.this.Context">Context</a> = <span title="ClassPath.this.Context" class="keyword">if</span> (<a href="#168920" title="=&gt; Boolean">isPackage</a>) {
      <span class="keyword">def</span> <a title="(entries: List[ClassPath.this.Entry])ClassPath.this.Context" id="168940">find0</a>(<a title="List[ClassPath.this.Entry]" id="168942">entries</a>: <span title="List[ClassPath.this.Entry]">List</span>[Entry]): <a href="#109871" title="ClassPath.this.Context">Context</a> = {
        <span title="ClassPath.this.Context" class="keyword">if</span> (<a href="#168942" title="List[ClassPath.this.Entry]">entries</a>.<span title="=&gt; Boolean">isEmpty</span>) <span title="ClassPath.this.Context" class="keyword">new</span> <a href="#109871" title="ClassPath.this.Context">Context</a>(<span title="object Nil">Nil</span>)
        <span class="keyword">else</span> {
          <span class="keyword">val</span> <a title="ClassPath.this.Context" id="168945">ret</a> = <a href="#168940" title="(entries: List[ClassPath.this.Entry])ClassPath.this.Context">find0</a>(<a href="#168942" title="List[ClassPath.this.Entry]">entries</a>.<span title="=&gt; List[ClassPath.this.Entry]">tail</span>)
          <span class="keyword">val</span> <a title="ClassPath.this.Entry" id="168946">head</a> = <a href="#168942" title="List[ClassPath.this.Entry]">entries</a>.<span title="=&gt; ClassPath.this.Entry">head</span>; 
          <span class="keyword">val</span> <a title="java.lang.String" id="168947">name0</a> = <a href="#168935" title="(x$1: Any)java.lang.String">name</a> + (<span title="Any" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="#168936" title="Boolean">isDir</a>) <span title="java.lang.String(&quot;.class&quot;)" class="string">&quot;.class&quot;</span> <span class="keyword">else</span> <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>)
          <span class="keyword">val</span> <a title="scala.tools.nsc.io.AbstractFile" id="168948">clazz</a> = <span title="scala.tools.nsc.io.AbstractFile" class="keyword">if</span> (<a href="#168946" title="ClassPath.this.Entry">head</a>.<a href="#168846" title="(x$1: AnyRef)Boolean">location</a> eq <span title="Null(null)" class="keyword">null</span>) <span title="Null(null)" class="keyword">null</span>
                      <span class="keyword">else</span> <a href="#168946" title="ClassPath.this.Entry">head</a>.<a href="#168846" title="=&gt; scala.tools.nsc.io.AbstractFile">location</a>.<a href="../io/AbstractFile.scala.html#51655" title="(path: String,directory: Boolean)scala.tools.nsc.io.AbstractFile">lookupPath</a>(<a href="#168947" title="java.lang.String">name0</a>, <a href="#168936" title="Boolean">isDir</a>)

          <span class="keyword">val</span> <a title="scala.tools.nsc.io.AbstractFile" id="168949">source0</a> =
            <span title="scala.tools.nsc.io.AbstractFile" class="keyword">if</span> (<a href="#168946" title="ClassPath.this.Entry">head</a>.<a href="#168842" title="(x$1: AnyRef)Boolean">source</a> eq <span title="Null(null)" class="keyword">null</span>) <span title="Null(null)" class="keyword">null</span>
            <span class="keyword">else</span> <span title="scala.tools.nsc.io.AbstractFile" class="keyword">if</span> (<span title="(x$1: Boolean)Boolean">(</span><a href="#168948" title="(x$1: AnyRef)Boolean">clazz</a> eq <span title="Null(null)" class="keyword">null</span>) || <a href="#168936" title="Boolean">isDir</a>) {
              <span class="keyword">val</span> <a title="scala.tools.nsc.io.AbstractFile" id="168964">source1</a> = <a href="#168946" title="ClassPath.this.Entry">head</a>.<a href="#168842" title="=&gt; ClassPath.this.Source">source</a>.<a href="#168827" title="=&gt; scala.tools.nsc.io.AbstractFile">location</a>.<a href="../io/AbstractFile.scala.html#51655" title="(path: String,directory: Boolean)scala.tools.nsc.io.AbstractFile">lookupPath</a>(
                <a href="#168935" title="(x$1: Any)java.lang.String">name</a> + (<span title="Any" class="keyword">if</span> (<a href="#168936" title="Boolean">isDir</a>) <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span> <span class="keyword">else</span> <span title="java.lang.String(&quot;.scala&quot;)" class="string">&quot;.scala&quot;</span>), <a href="#168936" title="Boolean">isDir</a>)
              <span title="scala.tools.nsc.io.AbstractFile" class="keyword">if</span> (<span title="(x$1: Boolean)Boolean">(</span><a href="#168964" title="(x$1: AnyRef)Boolean">source1</a> eq <span title="Null(null)" class="keyword">null</span>) <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#168936" title="Boolean">isDir</a> &amp;&amp; (<a href="#168948" title="(x$1: AnyRef)Boolean">clazz</a> ne <span title="Null(null)" class="keyword">null</span>)) <a href="#168946" title="ClassPath.this.Entry">head</a>.<a href="#168842" title="=&gt; ClassPath.this.Source">source</a>.<a href="#168827" title="=&gt; scala.tools.nsc.io.AbstractFile">location</a>
              <span class="keyword">else</span> <a href="#168964" title="scala.tools.nsc.io.AbstractFile">source1</a>
            }
            <span class="keyword">else</span> <a href="#168946" title="ClassPath.this.Entry">head</a>.<a href="#168842" title="=&gt; ClassPath.this.Source">source</a>.<a href="#168827" title="=&gt; scala.tools.nsc.io.AbstractFile">location</a>

          <span title="ClassPath.this.Context" class="keyword">if</span> (<span title="(x$1: Boolean)Boolean">(</span><a href="#168948" title="(x$1: AnyRef)Boolean">clazz</a> eq <span title="Null(null)" class="keyword">null</span>) &amp;&amp; (<a href="#168949" title="(x$1: AnyRef)Boolean">source0</a> eq <span title="Null(null)" class="keyword">null</span>)) <a href="#168945" title="ClassPath.this.Context">ret</a>
          <span class="keyword">else</span> {
            <span class="keyword">val</span> <a title="ClassPath.this.Entry" id="168983">entry</a> = <a href="#168984" title="ClassPath.this.Entry{ ... }" class="keyword">new</a> <a href="#109868" title="anonymous class $anon extends ClassPath.this.Entry" id="168984">Entry</a>(<a href="#168948" title="scala.tools.nsc.io.AbstractFile">clazz</a>) {
              <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; ClassPath.this.Source" id="168986">source</a> =
                <span title="ClassPath.this.Source" class="keyword">if</span> (<a href="#168949" title="(x$1: AnyRef)Boolean">source0</a> eq <span title="Null(null)" class="keyword">null</span>) <span title="Null(null)" class="keyword">null</span>
                <span class="keyword">else</span> <span title="ClassPath.this.Source" class="keyword">new</span> <a href="#109867" title="ClassPath.this.Source">Source</a>(<a href="#168949" title="scala.tools.nsc.io.AbstractFile">source0</a>, <a href="#168946" title="ClassPath.this.Entry">head</a>.<a href="#168842" title="=&gt; ClassPath.this.Source">source</a>.<a href="#168828" title="=&gt; Boolean">compile</a>)
            }
            <span class="keyword">try</span> {
              //Console.err.println(&quot;this=&quot; + this + &quot;\nclazz=&quot; + clazz + &quot;\nsource0=&quot; + source0 + &quot;\n&quot;)

              <span title="ClassPath.this.Context" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="#168936" title="Boolean">isDir</a>) <span title="ClassPath.this.Context" class="keyword">new</span> <a href="#109871" title="ClassPath.this.Context">Context</a>(<a href="#168983" title="ClassPath.this.Entry">entry</a> <a href="#169001" title="ClassPath.this.Entry">::</a> <span title="(x: ClassPath.this.Entry)List[ClassPath.this.Entry]">Nil</span>)
              <span class="keyword">else</span> <span title="ClassPath.this.Context" class="keyword">new</span> <a href="#109871" title="ClassPath.this.Context">Context</a>(<a href="#168983" title="ClassPath.this.Entry">entry</a> <a href="#169011" title="ClassPath.this.Entry">::</a> <a href="#168945" title="ClassPath.this.Context">ret</a>.<a href="#168932" title="(x: ClassPath.this.Entry)List[ClassPath.this.Entry]">entries</a>)
            } <span class="keyword">catch</span> {
              <span title="Nothing" class="keyword">case</span> <a title="Error" id="169021">e</a>: <a title="Error" id="1572">Error</a> =&gt;
              <span title="Nothing" class="keyword">throw</span> <a href="#169021" title="Error">e</a>
            }
          }
        }
      }

      <span class="keyword">val</span> <a title="ClassPath.this.Context" id="168941">ret</a> = <a href="#168940" title="(entries: List[ClassPath.this.Entry])ClassPath.this.Context">find0</a>(<a href="#168932" title="=&gt; List[ClassPath.this.Entry]">entries</a>)
      <span title="ClassPath.this.Context" class="keyword">if</span> (<a href="#168941" title="ClassPath.this.Context">ret</a>.<a href="#168932" title="=&gt; List[ClassPath.this.Entry]">entries</a>.<span title="=&gt; Boolean">isEmpty</span>) {
        //Console.err.println(&quot;BAD_FILE: &quot; + name + &quot; in &quot; + this)
        <span title="Null(null)" class="keyword">null</span>
      } <span class="keyword">else</span> <a href="#168941" title="ClassPath.this.Context">ret</a>
    } <span class="keyword">else</span> <span title="Null(null)" class="keyword">null</span>

    <span class="keyword">def</span> <a title="=&gt; Boolean" id="168920">isPackage</a>: <span title="Boolean">Boolean</span> =
      <span title="Boolean" class="keyword">if</span> (<a href="#168932" title="=&gt; List[ClassPath.this.Entry]">entries</a>.<span title="=&gt; Boolean">isEmpty</span>) <span title="Boolean(false)" class="keyword">false</span>
      <span class="keyword">else</span> <span title="Boolean" class="keyword">if</span> (<a href="#168932" title="=&gt; List[ClassPath.this.Entry]">entries</a>.<span title="=&gt; ClassPath.this.Entry">head</span>.<a href="#168846" title="(x$1: AnyRef)Boolean">location</a> ne <span title="Null(null)" class="keyword">null</span>) <a href="#168932" title="=&gt; List[ClassPath.this.Entry]">entries</a>.<span title="=&gt; ClassPath.this.Entry">head</span>.<a href="#168846" title="=&gt; scala.tools.nsc.io.AbstractFile">location</a>.<a href="../io/AbstractFile.scala.html#51645" title="=&gt; Boolean">isDirectory</a>
      <span class="keyword">else</span> <a href="#168932" title="=&gt; List[ClassPath.this.Entry]">entries</a>.<span title="=&gt; ClassPath.this.Entry">head</span>.<a href="#168842" title="=&gt; ClassPath.this.Source">source</a>.<a href="#168827" title="=&gt; scala.tools.nsc.io.AbstractFile">location</a>.<a href="../io/AbstractFile.scala.html#51645" title="=&gt; Boolean">isDirectory</a>

    <span class="keyword">def</span> <a title="=&gt; java.lang.String" id="168921">name</a> =
      <span title="java.lang.String" class="keyword">if</span> (<a href="#168932" title="=&gt; List[ClassPath.this.Entry]">entries</a>.<span title="=&gt; Boolean">isEmpty</span>) <span title="java.lang.String(&quot;&lt;none&gt;&quot;)" class="string">&quot;&lt;none&gt;&quot;</span>
      <span class="keyword">else</span> {
        <span class="keyword">val</span> <a title="ClassPath.this.Entry" id="169029">head</a> = <a href="#168932" title="=&gt; List[ClassPath.this.Entry]">entries</a>.<span title="=&gt; ClassPath.this.Entry">head</span>
        <span class="keyword">val</span> <a title="String" id="169030">name</a> = <span title="String" class="keyword">if</span> (<a href="#169029" title="ClassPath.this.Entry">head</a>.<a href="#168846" title="(x$1: AnyRef)Boolean">location</a> ne <span title="Null(null)" class="keyword">null</span>) <a href="#169029" title="ClassPath.this.Entry">head</a>.<a href="#168846" title="=&gt; scala.tools.nsc.io.AbstractFile">location</a>.<a href="../io/AbstractFile.scala.html#51636" title="=&gt; String">name</a>
                   <span class="keyword">else</span> <a href="#169029" title="ClassPath.this.Entry">head</a>.<a href="#168842" title="=&gt; ClassPath.this.Source">source</a>.<a href="#168827" title="=&gt; scala.tools.nsc.io.AbstractFile">location</a>.<a href="../io/AbstractFile.scala.html#51636" title="=&gt; String">name</a>
        <span title="String" class="keyword">if</span> (<a href="#168920" title="=&gt; Boolean">isPackage</a>) <a href="#169030" title="String">name</a>
        <span class="keyword">else</span> <a href="#169030" title="String">name</a>.<span title="(x$1: Int,x$2: Int)java.lang.String">substring</span>(<span title="Int(0)" class="int">0</span>, <a href="#169030" title="String">name</a>.<span title="()Int">length</span><span title="(x$1: Int)Int">(</span>) - (<span title="java.lang.String(&quot;.class&quot;)" class="string">&quot;.class&quot;</span>).<span title="()Int">length</span>())
      }

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="168922">toString</a>(): <span title="String">String</span> = <a href="#168924" title="(entries0: List[ClassPath.this.Entry])String">toString</a>(<a href="#168932" title="=&gt; List[ClassPath.this.Entry]">entries</a>)

    <span class="keyword">def</span> <a title="(entry: ClassPath.this.Entry)String" id="168923">toString</a>(<a title="ClassPath.this.Entry" id="169073">entry</a>: <a href="#109868" title="ClassPath.this.Entry">Entry</a>): <span title="String">String</span> =
      (<span title="(x$1: Any)java.lang.String">(</span><span title="java.lang.String" class="keyword">if</span> (<a href="#169073" title="ClassPath.this.Entry">entry</a>.<a href="#168846" title="(x$1: AnyRef)Boolean">location</a> eq <span title="Null(null)" class="keyword">null</span>) <span title="java.lang.String(&quot;&lt;none&gt;&quot;)" class="string">&quot;&lt;none&gt;&quot;</span>
        <span class="keyword">else</span> <a href="#169073" title="ClassPath.this.Entry">entry</a>.<a href="#168846" title="=&gt; scala.tools.nsc.io.AbstractFile">location</a>.<a href="../io/AbstractFile.scala.html#51660" title="()String">toString</a>()) +
       (<span title="Any" class="keyword">if</span> (<a href="#169073" title="ClassPath.this.Entry">entry</a>.<a href="#168842" title="(x$1: AnyRef)Boolean">source</a> eq <span title="Null(null)" class="keyword">null</span>) <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>
        <span class="keyword">else</span> <span title="(x$1: Any)java.lang.String" class="string">&quot; with_source=&quot;</span> + <a href="#169073" title="ClassPath.this.Entry">entry</a>.<a href="#168842" title="=&gt; ClassPath.this.Source">source</a>.<a href="#168827" title="=&gt; scala.tools.nsc.io.AbstractFile">location</a>.<a href="../io/AbstractFile.scala.html#51660" title="()String">toString</a>()))

    <span class="keyword">def</span> <a title="(entries0: List[ClassPath.this.Entry])String" id="168924">toString</a>(<a title="List[ClassPath.this.Entry]" id="169071">entries0</a>: <span title="List[ClassPath.this.Entry]">List</span>[Entry]): <span title="String">String</span> =
      <span title="String" class="keyword">if</span> (<a href="#169071" title="List[ClassPath.this.Entry]">entries0</a>.<span title="=&gt; Boolean">isEmpty</span>) <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>
      <span class="keyword">else</span> <a href="#168923" title="(entry: ClassPath.this.Entry)String">toString</a><span title="(x$1: Any)java.lang.String">(</span><a href="#169071" title="List[ClassPath.this.Entry]">entries0</a>.<span title="=&gt; ClassPath.this.Entry">head</span>) <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;:::&quot;)" class="string">&quot;:::&quot;</span> + <a href="#168924" title="(entries0: List[ClassPath.this.Entry])String">toString</a>(<a href="#169071" title="List[ClassPath.this.Entry]">entries0</a>.<span title="=&gt; List[ClassPath.this.Entry]">tail</span>)

    <span class="keyword">def</span> <a title="=&gt; Boolean" id="168925">isSourceFile</a> = {
      <span class="keyword">def</span> <a title="=&gt; ClassPath.this.Entry" id="169113">head</a> = <a href="#168932" title="=&gt; List[ClassPath.this.Entry]">entries</a>.<span title="=&gt; ClassPath.this.Entry">head</span>
      <span class="keyword">def</span> <a title="=&gt; scala.tools.nsc.io.AbstractFile" id="169114">clazz</a> = <a href="#169113" title="=&gt; ClassPath.this.Entry">head</a>.<a href="#168846" title="=&gt; scala.tools.nsc.io.AbstractFile">location</a>
      <span class="keyword">def</span> <a title="=&gt; scala.tools.nsc.io.AbstractFile" id="169115">source</a> = <span title="scala.tools.nsc.io.AbstractFile" class="keyword">if</span> (<a href="#169113" title="=&gt; ClassPath.this.Entry">head</a>.<a href="#168842" title="(x$1: AnyRef)Boolean">source</a> eq <span title="Null(null)" class="keyword">null</span>) <span title="Null(null)" class="keyword">null</span> <span class="keyword">else</span> <a href="#169113" title="=&gt; ClassPath.this.Entry">head</a>.<a href="#168842" title="=&gt; ClassPath.this.Source">source</a>.<a href="#168827" title="=&gt; scala.tools.nsc.io.AbstractFile">location</a>
      <span class="keyword">def</span> <a title="=&gt; Boolean" id="169116">isPredef</a> = <a href="#169115" title="=&gt; scala.tools.nsc.io.AbstractFile">source</a>.<a href="../io/AbstractFile.scala.html#51636" title="=&gt; String">name</a>.<span title="(x$1: Any)Boolean">equals</span><span title="(x$1: Boolean)Boolean">(</span><span title="java.lang.String(&quot;Predef.scala&quot;)" class="string">&quot;Predef.scala&quot;</span>) ||
                     <a href="#169115" title="=&gt; scala.tools.nsc.io.AbstractFile">source</a>.<a href="../io/AbstractFile.scala.html#51637" title="=&gt; String">path</a>.<span title="(x$1: java.lang.String)Boolean">startsWith</span>(<span title="java.lang.String(&quot;scala/runtime&quot;)" class="string">&quot;scala/runtime&quot;</span>)

      <span title="Boolean" class="keyword">if</span> (<a href="#168932" title="=&gt; List[ClassPath.this.Entry]">entries</a>.<span title="(x$1: Boolean)Boolean">isEmpty</span> <span title="(x$1: Boolean)Boolean">||</span> <a href="#168932" title="=&gt; List[ClassPath.this.Entry]">entries</a>.<span title="=&gt; Boolean">isEmpty</span> || (<a href="#169115" title="(x$1: AnyRef)Boolean">source</a> eq <span title="Null(null)" class="keyword">null</span>)) <span title="Boolean(false)" class="keyword">false</span>
      <span class="keyword">else</span> <span title="Boolean" class="keyword">if</span> (<span title="(x$1: Boolean)Boolean">!</span><a href="#109875" title="Boolean">onlyPresentation</a> &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#169113" title="=&gt; ClassPath.this.Entry">head</a>.<a href="#168842" title="=&gt; ClassPath.this.Source">source</a>.<a href="#168828" title="=&gt; Boolean">compile</a>) <span title="Boolean(false)" class="keyword">false</span>
      <span class="keyword">else</span> <span title="Boolean" class="keyword">if</span> (<a href="#169115" title="=&gt; scala.tools.nsc.io.AbstractFile">source</a>.<a href="../io/AbstractFile.scala.html#51645" title="=&gt; Boolean">isDirectory</a>) <span title="Boolean(false)" class="keyword">false</span>
      <span class="keyword">else</span> <span title="Boolean" class="keyword">if</span> (<a href="#169114" title="(x$1: AnyRef)Boolean">clazz</a> eq <span title="Null(null)" class="keyword">null</span>) <span title="Boolean(true)" class="keyword">true</span>
      <span class="keyword">else</span> <span title="Boolean" class="keyword">if</span> (<a href="#109875" title="(x$1: Boolean)Boolean">onlyPresentation</a> &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#169116" title="=&gt; Boolean">isPredef</a>) <span title="Boolean(true)" class="keyword">true</span>
      <span class="keyword">else</span> <span title="Boolean" class="keyword">if</span> (<a href="#169115" title="=&gt; scala.tools.nsc.io.AbstractFile">source</a>.<a href="../io/AbstractFile.scala.html#51646" title="(x$1: Long)Boolean" id="3217">lastModified</a> &gt; <a href="#169114" title="=&gt; scala.tools.nsc.io.AbstractFile">clazz</a>.<a href="../io/AbstractFile.scala.html#51646" title="=&gt; Long">lastModified</a>) <span title="Boolean(true)" class="keyword">true</span>
      <span class="keyword">else</span> <span title="Boolean(false)" class="keyword">false</span>
    }

    <span class="keyword">def</span> <a title="=&gt; scala.tools.nsc.io.AbstractFile" id="168926">sourceFile</a> = <span title="scala.tools.nsc.io.AbstractFile" class="keyword">if</span> (<span title="(x$1: Boolean)Boolean">(</span><a href="#168932" title="=&gt; List[ClassPath.this.Entry]">entries</a>.<span title="=&gt; ClassPath.this.Entry">head</span>.<a href="#168842" title="(x$1: AnyRef)Boolean">source</a> ne <span title="Null(null)" class="keyword">null</span>) &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#168932" title="=&gt; List[ClassPath.this.Entry]">entries</a>.<span title="=&gt; ClassPath.this.Entry">head</span>.<a href="#168842" title="=&gt; ClassPath.this.Source">source</a>.<a href="#168827" title="=&gt; scala.tools.nsc.io.AbstractFile">location</a>.<a href="../io/AbstractFile.scala.html#51645" title="=&gt; Boolean">isDirectory</a>)
      <a href="#168932" title="=&gt; List[ClassPath.this.Entry]">entries</a>.<span title="=&gt; ClassPath.this.Entry">head</span>.<a href="#168842" title="=&gt; ClassPath.this.Source">source</a>.<a href="#168827" title="=&gt; scala.tools.nsc.io.AbstractFile">location</a> <span class="keyword">else</span> <span title="Null(null)" class="keyword">null</span>

    <span class="keyword">def</span> <a title="=&gt; scala.tools.nsc.io.AbstractFile" id="168927">classFile</a> = <span title="scala.tools.nsc.io.AbstractFile" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="#168925" title="=&gt; Boolean">isSourceFile</a>) <a href="#168932" title="=&gt; List[ClassPath.this.Entry]">entries</a>.<span title="=&gt; ClassPath.this.Entry">head</span>.<a href="#168846" title="=&gt; scala.tools.nsc.io.AbstractFile">location</a> <span class="keyword">else</span> <span title="Null(null)" class="keyword">null</span>

    <span class="keyword">def</span> <a title="=&gt; scala.tools.nsc.io.AbstractFile" id="168928">sourcePath</a> =
      <span title="scala.tools.nsc.io.AbstractFile" class="keyword">if</span> (<span title="(x$1: Boolean)Boolean">!</span><a href="#168925" title="=&gt; Boolean">isSourceFile</a> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#168932" title="=&gt; List[ClassPath.this.Entry]">entries</a>.<span title="=&gt; Boolean">isEmpty</span> &amp;&amp; (<a href="#168932" title="=&gt; List[ClassPath.this.Entry]">entries</a>.<span title="=&gt; ClassPath.this.Entry">head</span>.<a href="#168842" title="(x$1: AnyRef)Boolean">source</a> ne <span title="Null(null)" class="keyword">null</span>)) {
        <span class="keyword">val</span> <a title="scala.tools.nsc.io.AbstractFile" id="169165">ret</a> = <a href="#168932" title="=&gt; List[ClassPath.this.Entry]">entries</a>.<span title="=&gt; ClassPath.this.Entry">head</span>.<a href="#168842" title="=&gt; ClassPath.this.Source">source</a>.<a href="#168827" title="=&gt; scala.tools.nsc.io.AbstractFile">location</a>
        <span title="scala.tools.nsc.io.AbstractFile" class="keyword">if</span> (<span title="(x$1: Boolean)Boolean">(</span><a href="#169165" title="(x$1: AnyRef)Boolean">ret</a> ne <span title="Null(null)" class="keyword">null</span>) &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#169165" title="scala.tools.nsc.io.AbstractFile">ret</a>.<a href="../io/AbstractFile.scala.html#51645" title="=&gt; Boolean">isDirectory</a>) {
          <span title="object Console">Console</span>.<a title="=&gt; java.io.PrintStream" id="51534">err</a>.<a title="(x$1: java.lang.String)Unit" id="41433">println</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;source path &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#169165" title="scala.tools.nsc.io.AbstractFile">ret</a> + <span title="java.lang.String(&quot; is not a directory&quot;)" class="string">&quot; is not a directory&quot;</span>)
          <span title="Null(null)" class="keyword">null</span>
        } <span class="keyword">else</span> <a href="#169165" title="scala.tools.nsc.io.AbstractFile">ret</a>
      }
      <span class="keyword">else</span> <span title="Null(null)" class="keyword">null</span>

    <span class="keyword">def</span> <a title="(name: String)Boolean" id="168929">validPackage</a>(<a title="String" id="169180">name</a>: <span title="String">String</span>): <span title="Boolean">Boolean</span> =
      <span title="=&gt; Boolean">!</span> (<a href="#169180" title="String">name</a>.<span title="(x$1: Any)Boolean">equals</span><span title="(x$1: Boolean)Boolean">(</span><span title="java.lang.String(&quot;META-INF&quot;)" class="string">&quot;META-INF&quot;</span>) || <a href="#169180" title="String">name</a>.<span title="(x$1: java.lang.String)Boolean">startsWith</span>(<span title="java.lang.String(&quot;.&quot;)" class="string">&quot;.&quot;</span>))
  }

  <span class="keyword">class</span> <a title="class Build extends java.lang.Object with ScalaObject" id="109872">Build</a> <span title="ScalaObject">{</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.ArrayBuffer[ClassPath.this.Entry]" id="109881">entries</a> = <a title="()scala.collection.mutable.ArrayBuffer[ClassPath.this.Entry]" id="108940" class="keyword">new</a> <a title="scala.collection.mutable.ArrayBuffer[ClassPath.this.Entry]" id="25155">ArrayBuffer</a>[Entry]

    <span class="keyword">def</span> <a title="=&gt; ClassPath.this.Context" id="109883">root</a> = <span title="ClassPath.this.Context" class="keyword">new</span> <a href="#109871" title="ClassPath.this.Context">Context</a>(<a href="#109881" title="=&gt; scala.collection.mutable.ArrayBuffer[ClassPath.this.Entry]">entries</a>.<span title="=&gt; List[ClassPath.this.Entry]">toList</span>)

    <span class="keyword">def</span> <a title="(classpath: String)ClassPath.this.Build" id="109884" class="keyword">this</a>(<a title="String" id="109907">classpath</a>: <span title="String">String</span>) <span title="Unit">{</span>
      <a href="#109872" title="Build.this.type" class="keyword">this</a>()
      <a href="#109890" title="(path: String)Unit">addFilesInPath</a>(<a href="#109907" title="String">classpath</a>)
    }

    <span class="keyword">def</span> <a title="(source: String,output: String)ClassPath.this.Build" id="109885" class="keyword">this</a>(<a title="String" id="109905">source</a>: <span title="String">String</span>, <a title="String" id="109906">output</a>: <span title="String">String</span>) <span title="Unit">{</span>
      <a href="#109872" title="Build.this.type" class="keyword">this</a>()
      <a href="#109892" title="(source: String,output: String)Unit">addDirsInPath</a>(<a href="#109905" title="String">source</a>, <a href="#109906" title="String">output</a>)
    }

    <span class="keyword">def</span> <a title="(classpath: String,source: String,output: String,boot: String,extdirs: String,codebase: String)ClassPath.this.Build" id="109886" class="keyword">this</a>(<a title="String" id="109899">classpath</a>: <span title="String">String</span>, <a title="String" id="109900">source</a>: <span title="String">String</span>, <a title="String" id="109901">output</a>: <span title="String">String</span>,
             <a title="String" id="109902">boot</a>: <span title="String">String</span>, <a title="String" id="109903">extdirs</a>: <span title="String">String</span>, <a title="String" id="109904">codebase</a>: <span title="String">String</span>) <span title="Unit">{</span>
      <a href="#109872" title="Build.this.type" class="keyword">this</a>()
      <a href="#109890" title="(path: String)Unit">addFilesInPath</a>(<a href="#109902" title="String">boot</a>)
      <a href="#109891" title="(path: String)Unit">addArchivesInExtDirPath</a>(<a href="#109903" title="String">extdirs</a>)
      <a href="#109892" title="(source: String,output: String)Unit">addDirsInPath</a>(<a href="#109900" title="String">source</a>, <a href="#109901" title="String">output</a>)
      <a href="#109890" title="(path: String)Unit">addFilesInPath</a>(<a href="#109899" title="String">classpath</a>)
      <a href="#109895" title="(codebase: String)Unit">addURLsInPath</a>(<a href="#109904" title="String">codebase</a>)
    }

    /**
     *  Lookup the given path in this classpath. Returns null if not found.
     *  Does not work with absolute paths (starting with '/').
     * 
     *  @param path  Path to look up (if isDir is false, '.class' is appended!).
     *  @param isDir Whether to look for a directory or a file
     *  @return      The abstract file or null if path was not found
     */
    <span class="keyword">def</span> <a title="(path: String,isDir: Boolean)scala.tools.nsc.io.AbstractFile" id="109887">lookupPath</a>(<a title="String" id="109953">path</a>: <span title="String">String</span>, <a title="Boolean" id="109954">isDir</a>: <span title="Boolean">Boolean</span>): <a href="../io/AbstractFile.scala.html#20689" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a> = {
      <span class="keyword">val</span> <a title="ClassPath.this.Context" id="169264">ctx</a> = <a href="#109883" title="=&gt; ClassPath.this.Context">root</a>.<a href="#168919" title="(name: String,isDir: Boolean)ClassPath.this.Context">find</a>(<a href="#109953" title="String">path</a>, <a href="#109954" title="Boolean">isDir</a>)
      <span title="scala.tools.nsc.io.AbstractFile" class="keyword">if</span> (<a href="#169264" title="(x$1: AnyRef)Boolean">ctx</a> eq <span title="Null(null)" class="keyword">null</span>) <span title="Null(null)" class="keyword">null</span>
      <span class="keyword">else</span> <span title="scala.tools.nsc.io.AbstractFile" class="keyword">if</span> (<a href="#169264" title="ClassPath.this.Context">ctx</a>.<a href="#168932" title="=&gt; List[ClassPath.this.Entry]">entries</a>.<span title="=&gt; Boolean">isEmpty</span>) <span title="Null(null)" class="keyword">null</span>
      <span class="keyword">else</span> <span title="scala.tools.nsc.io.AbstractFile" class="keyword">if</span> (<a href="#169264" title="ClassPath.this.Context">ctx</a>.<a href="#168932" title="=&gt; List[ClassPath.this.Entry]">entries</a>.<span title="(x$1: AnyRef)Boolean">head</span> eq <span title="Null(null)" class="keyword">null</span>) <span title="Null(null)" class="keyword">null</span>
      <span class="keyword">else</span> <a href="#169264" title="ClassPath.this.Context">ctx</a>.<a href="#168932" title="=&gt; List[ClassPath.this.Entry]">entries</a>.<span title="=&gt; ClassPath.this.Entry">head</span>.<a href="#168846" title="=&gt; scala.tools.nsc.io.AbstractFile">location</a>
    }

    /**
     *  @param classes where the class files come from and are written to
     *  @param sources where the source files come from
     */
    <span class="keyword">def</span> <a title="(classes: String,sources: String)scala.collection.mutable.ArrayBuffer[ClassPath.this.Entry]" id="109888">output</a>(<a title="String" id="169271">classes</a> : <span title="String">String</span>, <a title="String" id="169272">sources</a> : <span title="String">String</span>) = {
      <span title="(assertion: Boolean)Unit">assert</span>(<a href="#169271" title="(x$1: AnyRef)Boolean">classes</a> ne <span title="Null(null)" class="keyword">null</span>)
      <span title="(assertion: Boolean)Unit">assert</span>(<a href="#169272" title="(x$1: AnyRef)Boolean">sources</a> ne <span title="Null(null)" class="keyword">null</span>)
      <span class="keyword">val</span> <a title="scala.tools.nsc.io.AbstractFile" id="169275">location</a> = <a href="../io/AbstractFile.scala.html#20690" title="object scala.tools.nsc.io.AbstractFile">AbstractFile</a>.<a href="../io/AbstractFile.scala.html#121548" title="(path: scala.io.Path)scala.tools.nsc.io.AbstractFile">getDirectory</a>(<a href="#169271" title="implicit scala.io.Path.string2path : (s: String)scala.io.Path">classes</a>)
      <span class="keyword">val</span> <a title="scala.tools.nsc.io.AbstractFile" id="169276">sources0</a> = <a href="../io/AbstractFile.scala.html#20690" title="object scala.tools.nsc.io.AbstractFile">AbstractFile</a>.<a href="../io/AbstractFile.scala.html#121548" title="(path: scala.io.Path)scala.tools.nsc.io.AbstractFile">getDirectory</a>(<a href="#169272" title="implicit scala.io.Path.string2path : (s: String)scala.io.Path">sources</a>)
      <span class="keyword">class</span> <a title="class Output0 extends ClassPath.this.Output with ScalaObject" id="169277">Output0</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#109869" title="ClassPath.this.Output">Output</a>(<a href="#169275" title="scala.tools.nsc.io.AbstractFile">location</a>, <a href="#169276" title="scala.tools.nsc.io.AbstractFile">sources0</a>) 
      <a href="#109881" title="(elem: ClassPath.this.Entry)Build.this.entries.type">entries</a> += <span title="Output0" class="keyword">new</span> <a href="#169277" title="Output0">Output0</a>()
    }
    /**
     *  @param classes where the class files come from
     *  @param sources optional source file attachment, otherwise null
     */
    <span class="keyword">def</span> <a title="(classes: String,sources: String)Unit" id="109889">library</a>(<a title="String" id="169363">classes</a>: <span title="String">String</span>, <a title="String" id="169364">sources</a>: <span title="String">String</span>) {
      <span title="(assertion: Boolean)Unit">assert</span>(<a href="#169363" title="(x$1: AnyRef)Boolean">classes</a> ne <span title="Null(null)" class="keyword">null</span>)
      <span class="keyword">val</span> <a title="scala.tools.nsc.io.AbstractFile" id="169366">location</a> = <a href="../io/AbstractFile.scala.html#20690" title="object scala.tools.nsc.io.AbstractFile">AbstractFile</a>.<a href="../io/AbstractFile.scala.html#121548" title="(path: scala.io.Path)scala.tools.nsc.io.AbstractFile">getDirectory</a>(<a href="#169363" title="implicit scala.io.Path.string2path : (s: String)scala.io.Path">classes</a>)
      <span class="keyword">var</span> <a title="scala.tools.nsc.io.AbstractFile" id="169367">sourceFile0</a> =
        <span title="scala.tools.nsc.io.AbstractFile" class="keyword">if</span> (<a href="#169364" title="(x$1: AnyRef)Boolean">sources</a> ne <span title="Null(null)" class="keyword">null</span>) <a href="../io/AbstractFile.scala.html#20690" title="object scala.tools.nsc.io.AbstractFile">AbstractFile</a>.<a href="../io/AbstractFile.scala.html#121548" title="(path: scala.io.Path)scala.tools.nsc.io.AbstractFile">getDirectory</a>(<a href="#169364" title="implicit scala.io.Path.string2path : (s: String)scala.io.Path">sources</a>)
        <span class="keyword">else</span> <span title="Null(null)" class="keyword">null</span>
      <span title="Unit" class="keyword">if</span> (<a href="#169367" title="(x$1: AnyRef)Boolean">sourceFile0</a> ne <span title="Null(null)" class="keyword">null</span>) {
        <span class="keyword">val</span> <a title="scala.tools.nsc.io.AbstractFile" id="169411">file00</a> = <a href="#169367" title="scala.tools.nsc.io.AbstractFile">sourceFile0</a>.<a href="../io/AbstractFile.scala.html#51655" title="(path: String,directory: Boolean)scala.tools.nsc.io.AbstractFile">lookupPath</a>(<span title="java.lang.String(&quot;src&quot;)" class="string">&quot;src&quot;</span>, <span title="Boolean(true)" class="keyword">true</span>)
        <span title="Unit" class="keyword">if</span> (<span title="(x$1: Boolean)Boolean">(</span><a href="#169411" title="(x$1: AnyRef)Boolean">file00</a> ne <span title="Null(null)" class="keyword">null</span>) &amp;&amp; <a href="#169411" title="scala.tools.nsc.io.AbstractFile">file00</a>.<a href="../io/AbstractFile.scala.html#51645" title="=&gt; Boolean">isDirectory</a>) {
          <a href="#169367" title="scala.tools.nsc.io.AbstractFile">sourceFile0</a> = <a href="#169411" title="scala.tools.nsc.io.AbstractFile">file00</a>
        }
      }
        
      <span class="keyword">class</span> <a title="class Library0 extends ClassPath.this.Library with ScalaObject" id="169368">Library0</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#109870" title="ClassPath.this.Library">Library</a>(<a href="#169366" title="scala.tools.nsc.io.AbstractFile">location</a>) {
        <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; scala.tools.nsc.io.AbstractFile" id="169419">sourceFile</a> = <a href="#169367" title="scala.tools.nsc.io.AbstractFile">sourceFile0</a>
      }
      <a href="#109881" title="(elem: ClassPath.this.Entry)Build.this.entries.type">entries</a> <span title="Unit">+=</span> <span title="Library0" class="keyword">new</span> <a href="#169368" title="Library0">Library0</a>()
    }

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(path: String)Unit" id="109890">addFilesInPath</a>(<a title="String" id="169218">path</a>: <span title="String">String</span>) {
      <span class="keyword">for</span> (<a title="String" id="169480">fileName</a> &lt;- <a href="#14795" title="object scala.tools.nsc.util.ClassPath">ClassPath</a>.<a href="#118239" title="(path: String)List[String]">expandPath</a><span title="(f: (String) =&gt; Any)Unit">(</span><a href="#169218" title="String">path</a>)) {
        <span class="keyword">val</span> <a title="scala.tools.nsc.io.AbstractFile" id="169481">file</a> = <a href="../io/AbstractFile.scala.html#20690" title="object scala.tools.nsc.io.AbstractFile">AbstractFile</a>.<a href="../io/AbstractFile.scala.html#121548" title="(path: scala.io.Path)scala.tools.nsc.io.AbstractFile">getDirectory</a>(<a href="#169480" title="implicit scala.io.Path.string2path : (s: String)scala.io.Path">fileName</a>)
        <span title="Any" class="keyword">if</span> (<a href="#169481" title="(x$1: AnyRef)Boolean">file</a> ne <span title="Null(null)" class="keyword">null</span>) <a href="#109881" title="(elem: ClassPath.this.Entry)Build.this.entries.type">entries</a> += (<span title="ClassPath.this.Library" class="keyword">new</span> <a href="#109870" title="ClassPath.this.Library">Library</a>(<a href="#169481" title="scala.tools.nsc.io.AbstractFile">file</a>))
      }
    }

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(path: String)Unit" id="109891">addArchivesInExtDirPath</a>(<a title="String" id="169251">path</a>: <span title="String">String</span>) {
      <span class="keyword">for</span> (<a title="String" id="169563">fileName</a> &lt;- <a href="#14795" title="object scala.tools.nsc.util.ClassPath">ClassPath</a>.<a href="#118239" title="(path: String)List[String]">expandPath</a><span title="(f: (String) =&gt; Unit)Unit">(</span><a href="#169251" title="String">path</a>)) {
        <span class="keyword">val</span> <a title="scala.tools.nsc.io.AbstractFile" id="169564">file</a> = <a href="../io/AbstractFile.scala.html#20690" title="object scala.tools.nsc.io.AbstractFile">AbstractFile</a>.<a href="../io/AbstractFile.scala.html#121548" title="(path: scala.io.Path)scala.tools.nsc.io.AbstractFile">getDirectory</a>(<a href="#169563" title="implicit scala.io.Path.string2path : (s: String)scala.io.Path">fileName</a>)
        <span title="Unit" class="keyword">if</span> (<a href="#169564" title="(x$1: AnyRef)Boolean">file</a> ne <span title="Null(null)" class="keyword">null</span>) {
          <span class="keyword">for</span> (<a title="scala.tools.nsc.io.AbstractFile" id="169593">file0</a> &lt;- <a href="#169564" title="(f: (scala.tools.nsc.io.AbstractFile) =&gt; Any)Unit" id="25590">file</a>) {
            <span class="keyword">val</span> <a title="String" id="169594">name</a> = <a href="#169593" title="scala.tools.nsc.io.AbstractFile">file0</a>.<a href="../io/AbstractFile.scala.html#51636" title="=&gt; String">name</a>
            <span title="Any" class="keyword">if</span> (<a href="#169594" title="String">name</a>.<span title="(x$1: java.lang.String)Boolean">endsWith</span><span title="(x$1: Boolean)Boolean">(</span><span title="java.lang.String(&quot;.jar&quot;)" class="string">&quot;.jar&quot;</span>) <span title="(x$1: Boolean)Boolean">||</span> <a href="#169594" title="String">name</a>.<span title="(x$1: java.lang.String)Boolean">endsWith</span>(<span title="java.lang.String(&quot;.zip&quot;)" class="string">&quot;.zip&quot;</span>) || <a href="#169593" title="scala.tools.nsc.io.AbstractFile">file0</a>.<a href="../io/AbstractFile.scala.html#51645" title="=&gt; Boolean">isDirectory</a>) {
              <span class="keyword">val</span> <a title="scala.tools.nsc.io.AbstractFile" id="169603">archive</a> = <a href="../io/AbstractFile.scala.html#20690" title="object scala.tools.nsc.io.AbstractFile">AbstractFile</a>.<a href="../io/AbstractFile.scala.html#121548" title="(path: scala.io.Path)scala.tools.nsc.io.AbstractFile">getDirectory</a>(<a title="implicit scala.io.Path.jfile2path : (jfile: java.io.File)scala.io.Path" id="35363" class="keyword">new</a> <span title="java.io.File">File</span>(<a href="#169564" title="scala.tools.nsc.io.AbstractFile">file</a>.<a href="../io/AbstractFile.scala.html#51640" title="=&gt; java.io.File">file</a>, <a href="#169594" title="String">name</a>))
              <span title="Any" class="keyword">if</span> (<a href="#169603" title="(x$1: AnyRef)Boolean">archive</a> ne <span title="Null(null)" class="keyword">null</span>) <a href="#109881" title="(elem: ClassPath.this.Entry)Build.this.entries.type">entries</a> += (<span title="ClassPath.this.Library" class="keyword">new</span> <a href="#109870" title="ClassPath.this.Library">Library</a>(<a href="#169603" title="scala.tools.nsc.io.AbstractFile">archive</a>))
            }
          }
        }
      }
    }

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(source: String,output: String)Unit" id="109892">addDirsInPath</a>(<a title="String" id="169233">source</a>: <span title="String">String</span>, <a title="String" id="169234">output</a>: <span title="String">String</span>) {
      <span class="keyword">val</span> <a title="scala.tools.nsc.io.AbstractFile" id="169697">clazzes</a> = <a href="../io/AbstractFile.scala.html#20690" title="object scala.tools.nsc.io.AbstractFile">AbstractFile</a>.<a href="../io/AbstractFile.scala.html#121548" title="(path: scala.io.Path)scala.tools.nsc.io.AbstractFile">getDirectory</a>(<a href="#169234" title="implicit scala.io.Path.string2path : (s: String)scala.io.Path">output</a>)
      <span title="Unit" class="keyword">if</span> (<a href="#169697" title="(x$1: AnyRef)Boolean">clazzes</a> eq <span title="Null(null)" class="keyword">null</span>)
        <span title="Nothing" class="keyword">throw</span> <span title="scala.tools.nsc.FatalError" class="keyword">new</span> <a href="../FatalError.scala.html#8289" title="scala.tools.nsc.FatalError">FatalError</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Output location \&quot;&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#169234" title="String">output</a> + <span title="java.lang.String(&quot;&quot; not found&quot;)" class="string">&quot;\&quot; not found&quot;</span>)
      <span class="keyword">val</span> <a title="java.util.StringTokenizer" id="169698">strtok</a> = <span title="(x$1: java.lang.String,x$2: java.lang.String)java.util.StringTokenizer" class="keyword">new</span> <span title="java.util.StringTokenizer">StringTokenizer</span>(<a href="#169233" title="String">source</a>, <span title="object java.io.File">File</span>.<span title="java.lang.String">pathSeparator</span>)
      <span title="Unit" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="#169698" title="java.util.StringTokenizer">strtok</a>.<span title="()Boolean">hasMoreTokens</span>()) {
        <span class="keyword">val</span> <a title="ClassPath.this.Output" id="169749">output0</a> = (<span title="ClassPath.this.Output" class="keyword">new</span> <a href="#109869" title="ClassPath.this.Output">Output</a>(<a href="#169697" title="scala.tools.nsc.io.AbstractFile">clazzes</a>, <span title="Null(null)" class="keyword">null</span>))
        <a href="#109881" title="(elem: ClassPath.this.Entry)Build.this.entries.type">entries</a> <span title="Unit">+=</span> <a href="#169749" title="ClassPath.this.Output">output0</a>
      }
      <span class="keyword">else</span> <span title="Unit" class="keyword">while</span> (<a href="#169698" title="java.util.StringTokenizer">strtok</a>.<span title="()Boolean">hasMoreTokens</span>()) <a href="#169783" title="()Unit">{</a>
        <span class="keyword">val</span> <a title="scala.tools.nsc.io.AbstractFile" id="169786">sources</a> = <a href="../io/AbstractFile.scala.html#20690" title="object scala.tools.nsc.io.AbstractFile">AbstractFile</a>.<a href="../io/AbstractFile.scala.html#121548" title="(path: scala.io.Path)scala.tools.nsc.io.AbstractFile">getDirectory</a>(<a href="#169698" title="java.util.StringTokenizer">strtok</a>.<span title="()java.lang.String">nextToken</span><span title="implicit scala.io.Path.string2path : (s: String)scala.io.Path">(</span>))
        <span class="keyword">val</span> <a title="ClassPath.this.Output" id="169787">output0</a> = (<span title="ClassPath.this.Output" class="keyword">new</span> <a href="#109869" title="ClassPath.this.Output">Output</a>(<a href="#169697" title="scala.tools.nsc.io.AbstractFile">clazzes</a>, <a href="#169786" title="scala.tools.nsc.io.AbstractFile">sources</a>))
        <a href="#109881" title="(elem: ClassPath.this.Entry)Build.this.entries.type">entries</a> += <a href="#169787" title="ClassPath.this.Output">output0</a>
      }    
    }

    <span class="keyword">private</span> <span class="keyword">val</span> <a title="java.lang.String" id="109893">urlSeparator</a> = <span title="java.lang.String(&quot; &quot;)" class="string">&quot; &quot;</span>
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(codebase: String)Unit" id="109895">addURLsInPath</a>(<a title="String" id="169259">codebase</a>: <span title="String">String</span>) {
      <span class="keyword">val</span> <a title="java.util.StringTokenizer" id="169857">strtok</a> = <span title="(x$1: java.lang.String,x$2: java.lang.String)java.util.StringTokenizer" class="keyword">new</span> <span title="java.util.StringTokenizer">StringTokenizer</span>(<a href="#169259" title="String">codebase</a>, <a href="#109893" title="=&gt; java.lang.String">urlSeparator</a>)
      <span title="Unit" class="keyword">while</span> (<a href="#169857" title="java.util.StringTokenizer">strtok</a>.<span title="()Boolean">hasMoreTokens</span>()) {
        <a href="#169866" title="()Unit" class="keyword">try</a> {
          <span class="keyword">val</span> <a title="java.net.URL" id="169869">url</a> = <a title="(x$1: java.lang.String)java.net.URL" id="117850" class="keyword">new</a> <a title="java.net.URL" id="4989">URL</a>(<a href="#169857" title="java.util.StringTokenizer">strtok</a>.<span title="()java.lang.String">nextToken</span>())
          <span class="keyword">val</span> <a title="scala.tools.nsc.io.AbstractFile" id="169870">archive</a> = <a href="../io/AbstractFile.scala.html#20690" title="object scala.tools.nsc.io.AbstractFile">AbstractFile</a>.<a href="../io/AbstractFile.scala.html#121550" title="(url: java.net.URL)scala.tools.nsc.io.AbstractFile">getURL</a>(<a href="#169869" title="java.net.URL">url</a>)
          <span title="Any" class="keyword">if</span> (<a href="#169870" title="(x$1: AnyRef)Boolean">archive</a> ne <span title="Null(null)" class="keyword">null</span>) <a href="#109881" title="(elem: ClassPath.this.Entry)Build.this.entries.type">entries</a> += (<span title="ClassPath.this.Library" class="keyword">new</span> <a href="#109870" title="ClassPath.this.Library">Library</a>(<a href="#169870" title="scala.tools.nsc.io.AbstractFile">archive</a>))
        }
        <span class="keyword">catch</span> {
          <span title="Nothing" class="keyword">case</span> <a title="java.lang.Throwable" id="169972">e</a> =&gt;
            <span title="object Console">Console</span>.<a title="(x: Any)Unit" id="51576">println</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;error in addURLsInPath: &quot;</span> + <a href="#169972" title="java.lang.Throwable">e</a>.<a title="()java.lang.String" id="26085">getMessage</a>)//debug
            <span title="Nothing" class="keyword">throw</span> <a href="#169972" title="java.lang.Throwable">e</a>
        }
      }
    }

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="109896">toString</a>() =
      <a href="#109881" title="=&gt; scala.collection.mutable.ArrayBuffer[ClassPath.this.Entry]">entries</a>.<span title="=&gt; List[ClassPath.this.Entry]">toList</span>.<a title="(start: String,sep: String,end: String)String" id="25519">mkString</a>(<span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>, <span title="object java.io.File">File</span>.<span title="java.lang.String">pathSeparator</span>, <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>)
  } // class Build

}

        </pre>
    </body>
</html>