<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/util/ClassPath.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style">
    </head>
    <body>
        <pre>
/* NSC -- new Scala compiler
 * Copyright 2006-2009 LAMP/EPFL
 * @author  Martin Odersky
 */

// $Id: ClassPath.scala 18549 2009-08-22 23:29:38Z extempore $

<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> util

<span class="keyword">import</span> java.io.File
<span class="keyword">import</span> java.net.URL
<span class="keyword">import</span> java.util.StringTokenizer

<span class="keyword">import</span> scala.collection.mutable.ArrayBuffer
<span class="keyword">import</span> scala.tools.nsc.io.AbstractFile

/** &lt;p&gt;
 *    This module provides star expansion of '-classpath' option arguments.
 *  &lt;/p&gt;
 *
 *  @author Stepan Koltsov
 */
<span class="keyword">object</span> <a title="object scala.tools.nsc.util.ClassPath" id="14720">ClassPath</a> <span title="ScalaObject">{</span>
  /** Expand single path entry */
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(pattern: String)List[String]" id="117750">expandStar</a>(<a title="String" id="167906">pattern</a>: <span title="String">String</span>): <span title="List[String]">List</span>[String] = {
    <span class="keyword">def</span> <a title="(name: String)Boolean" id="167908">nameMatchesStar</a>(<a title="String" id="167911">name</a>: <span title="String">String</span>) = <a href="#167911" title="String">name</a>.<a title="()java.lang.String" id="7047">toLowerCase</a>().<span title="(x$1: java.lang.String)Boolean">endsWith</span>(<span title="java.lang.String(&quot;.jar&quot;)" class="string">&quot;.jar&quot;</span>)
    
    /** Get all jars in directory */
    <span class="keyword">def</span> <a title="(f: java.io.File)List[java.lang.String]" id="167909">lsJars</a>(<a title="java.io.File" id="167927">f</a>: <span title="java.io.File">File</span>) = {
      <span class="keyword">val</span> <a title="Array[java.io.File]" id="167928">list</a> = <a href="#167927" title="java.io.File">f</a>.<a title="()Array[java.io.File]" id="35204">listFiles</a>()
      <span title="List[java.lang.String]" class="keyword">if</span> (<a href="#167928" title="(x$1: AnyRef)Boolean">list</a> eq <span title="Null(null)" class="keyword">null</span>) <span title="object Nil">Nil</span>
      <span class="keyword">else</span> <a href="#167928" title="Array[java.io.File]">list</a>.<a title="(p: (java.io.File) =&gt; Boolean)Array[java.io.File]" id="25253">filter</a>(<a title="java.io.File" id="167950">f</a> =&gt; <a href="#167950" title="java.io.File">f</a>.<a title="()Boolean" id="35194">isFile</a><span title="(x$1: Boolean)Boolean">(</span>) &amp;&amp; <a href="#167908" title="(name: String)Boolean">nameMatchesStar</a>(<a href="#167950" title="java.io.File">f</a>.<a title="()java.lang.String" id="35179">getName</a>())).<a title="(f: (java.io.File) =&gt; java.lang.String)(implicit bf: scala.collection.generic.BuilderFactory[java.lang.String,Array[java.lang.String],Array[java.io.File]])Array[java.lang.String]" id="25243">map</a><a title="scala.collection.generic.BuilderFactory[java.lang.String,Array[java.lang.String],Array[_]]" id="888">(</a><a href="#167969" title="java.io.File">_</a>.<a title="()java.lang.String" id="35182">getPath</a>()).<span title="=&gt; List[java.lang.String]">toList</span>
    }
    
    <span class="keyword">val</span> <a title="java.lang.String" id="167910">suffix</a> = <span title="object java.io.File">File</span>.<a title="(x$1: Any)java.lang.String" id="35164">separator</a> + <span title="java.lang.String(&quot;*&quot;)" class="string">&quot;*&quot;</span>
    
    <span title="List[String]" class="keyword">if</span> (<a href="#167906" title="(x$1: AnyRef)Boolean">pattern</a> == <span title="java.lang.String(&quot;*&quot;)" class="string">&quot;*&quot;</span>) <a href="#167909" title="(f: java.io.File)List[java.lang.String]">lsJars</a>(<span title="java.io.File" class="keyword">new</span> <span title="java.io.File">File</span>(<span title="java.lang.String(&quot;.&quot;)" class="string">&quot;.&quot;</span>))
    <span class="keyword">else</span> <span title="List[String]" class="keyword">if</span> (<a href="#167906" title="(x$1: java.lang.String)Boolean">pattern</a> endsWith <a href="#167910" title="java.lang.String">suffix</a>) <a href="#167909" title="(f: java.io.File)List[java.lang.String]">lsJars</a>(<span title="java.io.File" class="keyword">new</span> <span title="java.io.File">File</span>(<a href="#167906" title="String">pattern</a>.<span title="(x$1: Int,x$2: Int)java.lang.String">substring</span>(<span title="Int(0)" class="int">0</span>, <a href="#167906" title="String">pattern</a>.<span title="(x$1: Int)Int">length</span> - <a href="#167910" title="java.lang.String">suffix</a>.<span title="()Int">length</span>)))
    <span class="keyword">else</span> <a href="#167906" title="String">pattern</a> <a href="#168106" title="String">::</a> <span title="(x: String)List[String]">Nil</span>
  }
  
  /** Split path using platform-dependent path separator */
  <span class="keyword">def</span> <a title="(path: String)List[String]" id="117751">splitPath</a>(<a title="String" id="168114">path</a>: <span title="String">String</span>): <span title="List[String]">List</span>[String] =
    <a href="#168114" title="(x$1: java.lang.String)Array[java.lang.String]" id="7043">path</a> split <span title="object java.io.File">File</span>.<span title="java.lang.String">pathSeparator</span> <span title="=&gt; List[java.lang.String]">toList</span>
  
  /** Expand path with expanding stars */
  <span class="keyword">def</span> <a title="(path: String)List[String]" id="117752">expandPath</a>(<a title="String" id="117759">path</a>: <span title="String">String</span>): <span title="List[String]">List</span>[String] = <a href="#117751" title="(path: String)List[String]">splitPath</a>(<a href="#117759" title="String">path</a>).<a title="(f: (String) =&gt; Traversable[String])(implicit bf: scala.collection.generic.BuilderFactory[String,List[String],List[String]])List[String]" id="25248">flatMap</a><a title="scala.collection.generic.BuilderFactory[String,List[String],List#Coll]" id="7346">(</a><a href="#117750" title="(pattern: String)List[String]">expandStar</a>(<a href="#168130" title="String">_</a>))
  
  <span class="keyword">def</span> <a title="(path: String,expandStar: Boolean)List[String]" id="117753">expandPath</a>(<a title="String" id="117756">path</a>: <span title="String">String</span>, <a title="Boolean" id="117757">expandStar</a>: <span title="Boolean">Boolean</span>): <span title="List[String]">List</span>[String] =
    <span title="List[String]" class="keyword">if</span> (<a href="#117757" title="Boolean">expandStar</a>) <a href="#117752" title="(path: String)List[String]">expandPath</a>(<a href="#117756" title="String">path</a>)
    <span class="keyword">else</span> <a href="#117751" title="(path: String)List[String]">splitPath</a>(<a href="#117756" title="String">path</a>)

}

/** &lt;p&gt;
 *    Richer classpath abstraction than files.
 *  &lt;/p&gt;
 *  &lt;p&gt;
 *    Roughly based on Eclipse's classpath abstractions.
 *  &lt;/p&gt;
 *
 *  @author Sean McDirmid
 */
<span class="keyword">class</span> <a title="class ClassPath extends java.lang.Object with ScalaObject" id="14719">ClassPath</a><span title="ScalaObject">(</span><a title="Boolean" id="109477">onlyPresentation</a>: <span title="Boolean">Boolean</span>) {

  <span class="keyword">def</span> <a title="()scala.tools.nsc.util.ClassPath" id="109468" class="keyword">this</a>() = <a href="#14719" title="ClassPath.this.type" class="keyword">this</a>(<span title="Boolean(false)" class="keyword">false</span>)

  <span class="keyword">class</span> <a title="class Source extends java.lang.Object with ScalaObject" id="109469">Source</a><span title="ScalaObject">(</span><span class="keyword">val</span> <a title="scala.tools.nsc.io.AbstractFile" id="168189">location</a>: <a href="../io/AbstractFile.scala.html#20548" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a>, <span class="keyword">val</span> <a title="Boolean" id="168190">compile</a>: <span title="Boolean">Boolean</span>) {
    // assert(location           != null, &quot;cannot find source location&quot;)
    // assert(location.getFile() != null, &quot;cannot find source location &quot; + &quot; &quot; + location + &quot; &quot; + location.getClass())
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="168185">toString</a>(): <span title="String">String</span> = <span title="(x$1: Any)java.lang.String" class="string">&quot;&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#168189" title="=&gt; scala.tools.nsc.io.AbstractFile">location</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; &quot;)" class="string">&quot; &quot;</span> + <a href="#168190" title="=&gt; Boolean">compile</a>
  }

  <span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class Entry extends java.lang.Object with ScalaObject" id="109470">Entry</a><span title="ScalaObject">(</span><span class="keyword">val</span> <a title="scala.tools.nsc.io.AbstractFile" id="168208">location</a>: <a href="../io/AbstractFile.scala.html#20548" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a>) {
    // assert(location           != null, &quot;cannot find classpath location&quot;)
    // assert(location.getFile() != null, &quot;cannot find classpath location &quot; + &quot; &quot; + location + &quot; &quot; + location.getClass())
    <span class="keyword">def</span> <a title="=&gt; ClassPath.this.Source" id="168204">source</a>: <a href="#109469" title="ClassPath.this.Source">Source</a>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="()java.lang.String" id="168205">toString</a>() = 
      <span title="(x$1: Any)java.lang.String">(</span><span title="java.lang.String" class="keyword">if</span> (<a href="#168208" title="(x$1: AnyRef)Boolean">location</a> == <span title="Null(null)" class="keyword">null</span>) <span title="java.lang.String(&quot;&lt;none&gt;&quot;)" class="string">&quot;&lt;none&gt;&quot;</span> <span class="keyword">else</span> <a href="#168208" title="=&gt; scala.tools.nsc.io.AbstractFile">location</a>.<a href="../io/AbstractFile.scala.html#51406" title="()String">toString</a>) + 
        (<span title="Any" class="keyword">if</span> (<a href="#168204" title="(x$1: AnyRef)Boolean">source</a> == <span title="Null(null)" class="keyword">null</span>) <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span> <span class="keyword">else</span> <span title="(x$1: Any)java.lang.String" class="string">&quot; source=&quot;</span> + <a href="#168204" title="=&gt; ClassPath.this.Source">source</a>)
  }

  <span class="keyword">class</span> <a title="class Output extends ClassPath.this.Entry with ScalaObject" id="109471">Output</a><span title="ScalaObject">(</span><a title="scala.tools.nsc.io.AbstractFile" id="168244">location0</a>: <a href="../io/AbstractFile.scala.html#20548" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a>, <span class="keyword">val</span> <a title="scala.tools.nsc.io.AbstractFile" id="168245">sourceFile</a>: <a href="../io/AbstractFile.scala.html#20548" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a>) <span class="keyword">extends</span> <a href="#109470" title="ClassPath.this.Entry">Entry</a>(<a href="#168244" title="scala.tools.nsc.io.AbstractFile">location0</a>) {
    <span class="keyword">def</span> <a title="=&gt; ClassPath.this.Source" id="168240">source</a> = <span title="ClassPath.this.Source" class="keyword">if</span> (<a href="#168245" title="(x$1: AnyRef)Boolean">sourceFile</a> ne <span title="Null(null)" class="keyword">null</span>) <span title="ClassPath.this.Source" class="keyword">new</span> <a href="#109469" title="ClassPath.this.Source">Source</a>(<a href="#168245" title="=&gt; scala.tools.nsc.io.AbstractFile">sourceFile</a>, <span title="Boolean(true)" class="keyword">true</span>) <span class="keyword">else</span> <span title="Null(null)" class="keyword">null</span>
  }

  <span class="keyword">class</span> <a title="class Library extends ClassPath.this.Entry with ScalaObject" id="109472">Library</a><span title="ScalaObject">(</span><a title="scala.tools.nsc.io.AbstractFile" id="168263">location0</a>: <a href="../io/AbstractFile.scala.html#20548" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a>) <span class="keyword">extends</span> <a href="#109470" title="ClassPath.this.Entry">Entry</a>(<a href="#168263" title="scala.tools.nsc.io.AbstractFile">location0</a>) {
    <span class="keyword">def</span> <a title="=&gt; scala.tools.nsc.io.AbstractFile" id="168258">doc</a>: <a href="../io/AbstractFile.scala.html#20548" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a> = <span title="Null(null)" class="keyword">null</span>
    <span class="keyword">def</span> <a title="=&gt; scala.tools.nsc.io.AbstractFile" id="168259">sourceFile</a>: <a href="../io/AbstractFile.scala.html#20548" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a> = <span title="Null(null)" class="keyword">null</span>
    <span class="keyword">def</span> <a title="=&gt; ClassPath.this.Source" id="168260">source</a> = <span title="ClassPath.this.Source" class="keyword">if</span> (<a href="#168259" title="(x$1: AnyRef)Boolean">sourceFile</a> eq <span title="Null(null)" class="keyword">null</span>) <span title="Null(null)" class="keyword">null</span> <span class="keyword">else</span> <span title="ClassPath.this.Source" class="keyword">new</span> <a href="#109469" title="ClassPath.this.Source">Source</a>(<a href="#168259" title="=&gt; scala.tools.nsc.io.AbstractFile">sourceFile</a>, <span title="Boolean(false)" class="keyword">false</span>)
  }

  <span class="keyword">class</span> <a title="class Context extends java.lang.Object with ScalaObject" id="109473">Context</a><span title="ScalaObject">(</span><span class="keyword">val</span> <a title="List[ClassPath.this.Entry]" id="168294">entries</a>: <span title="List[ClassPath.this.Entry]">List</span>[Entry]) {
    <span class="keyword">def</span> <a title="(name: String,isDir: Boolean)ClassPath.this.Context" id="168281">find</a>(<a title="String" id="168297">name</a>: <span title="String">String</span>, <a title="Boolean" id="168298">isDir</a>: <span title="Boolean">Boolean</span>): <a href="#109473" title="ClassPath.this.Context">Context</a> = <span title="ClassPath.this.Context" class="keyword">if</span> (<a href="#168282" title="=&gt; Boolean">isPackage</a>) {
      <span class="keyword">def</span> <a title="(entries: List[ClassPath.this.Entry])ClassPath.this.Context" id="168302">find0</a>(<a title="List[ClassPath.this.Entry]" id="168304">entries</a>: <span title="List[ClassPath.this.Entry]">List</span>[Entry]): <a href="#109473" title="ClassPath.this.Context">Context</a> = {
        <span title="ClassPath.this.Context" class="keyword">if</span> (<a href="#168304" title="List[ClassPath.this.Entry]">entries</a>.<span title="=&gt; Boolean">isEmpty</span>) <span title="ClassPath.this.Context" class="keyword">new</span> <a href="#109473" title="ClassPath.this.Context">Context</a>(<span title="object Nil">Nil</span>)
        <span class="keyword">else</span> {
          <span class="keyword">val</span> <a title="ClassPath.this.Context" id="168307">ret</a> = <a href="#168302" title="(entries: List[ClassPath.this.Entry])ClassPath.this.Context">find0</a>(<a href="#168304" title="List[ClassPath.this.Entry]">entries</a>.<span title="=&gt; List[ClassPath.this.Entry]">tail</span>)
          <span class="keyword">val</span> <a title="ClassPath.this.Entry" id="168308">head</a> = <a href="#168304" title="List[ClassPath.this.Entry]">entries</a>.<span title="=&gt; ClassPath.this.Entry">head</span>; 
          <span class="keyword">val</span> <a title="java.lang.String" id="168309">name0</a> = <a href="#168297" title="(x$1: Any)java.lang.String">name</a> + (<span title="Any" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="#168298" title="Boolean">isDir</a>) <span title="java.lang.String(&quot;.class&quot;)" class="string">&quot;.class&quot;</span> <span class="keyword">else</span> <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>)
          <span class="keyword">val</span> <a title="scala.tools.nsc.io.AbstractFile" id="168310">clazz</a> = <span title="scala.tools.nsc.io.AbstractFile" class="keyword">if</span> (<a href="#168308" title="ClassPath.this.Entry">head</a>.<a href="#168208" title="(x$1: AnyRef)Boolean">location</a> eq <span title="Null(null)" class="keyword">null</span>) <span title="Null(null)" class="keyword">null</span>
                      <span class="keyword">else</span> <a href="#168308" title="ClassPath.this.Entry">head</a>.<a href="#168208" title="=&gt; scala.tools.nsc.io.AbstractFile">location</a>.<a href="../io/AbstractFile.scala.html#51401" title="(path: String,directory: Boolean)scala.tools.nsc.io.AbstractFile">lookupPath</a>(<a href="#168309" title="java.lang.String">name0</a>, <a href="#168298" title="Boolean">isDir</a>)

          <span class="keyword">val</span> <a title="scala.tools.nsc.io.AbstractFile" id="168311">source0</a> =
            <span title="scala.tools.nsc.io.AbstractFile" class="keyword">if</span> (<a href="#168308" title="ClassPath.this.Entry">head</a>.<a href="#168204" title="(x$1: AnyRef)Boolean">source</a> eq <span title="Null(null)" class="keyword">null</span>) <span title="Null(null)" class="keyword">null</span>
            <span class="keyword">else</span> <span title="scala.tools.nsc.io.AbstractFile" class="keyword">if</span> (<span title="(x$1: Boolean)Boolean">(</span><a href="#168310" title="(x$1: AnyRef)Boolean">clazz</a> eq <span title="Null(null)" class="keyword">null</span>) || <a href="#168298" title="Boolean">isDir</a>) {
              <span class="keyword">val</span> <a title="scala.tools.nsc.io.AbstractFile" id="168326">source1</a> = <a href="#168308" title="ClassPath.this.Entry">head</a>.<a href="#168204" title="=&gt; ClassPath.this.Source">source</a>.<a href="#168189" title="=&gt; scala.tools.nsc.io.AbstractFile">location</a>.<a href="../io/AbstractFile.scala.html#51401" title="(path: String,directory: Boolean)scala.tools.nsc.io.AbstractFile">lookupPath</a>(
                <a href="#168297" title="(x$1: Any)java.lang.String">name</a> + (<span title="Any" class="keyword">if</span> (<a href="#168298" title="Boolean">isDir</a>) <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span> <span class="keyword">else</span> <span title="java.lang.String(&quot;.scala&quot;)" class="string">&quot;.scala&quot;</span>), <a href="#168298" title="Boolean">isDir</a>)
              <span title="scala.tools.nsc.io.AbstractFile" class="keyword">if</span> (<span title="(x$1: Boolean)Boolean">(</span><a href="#168326" title="(x$1: AnyRef)Boolean">source1</a> eq <span title="Null(null)" class="keyword">null</span>) <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#168298" title="Boolean">isDir</a> &amp;&amp; (<a href="#168310" title="(x$1: AnyRef)Boolean">clazz</a> ne <span title="Null(null)" class="keyword">null</span>)) <a href="#168308" title="ClassPath.this.Entry">head</a>.<a href="#168204" title="=&gt; ClassPath.this.Source">source</a>.<a href="#168189" title="=&gt; scala.tools.nsc.io.AbstractFile">location</a>
              <span class="keyword">else</span> <a href="#168326" title="scala.tools.nsc.io.AbstractFile">source1</a>
            }
            <span class="keyword">else</span> <a href="#168308" title="ClassPath.this.Entry">head</a>.<a href="#168204" title="=&gt; ClassPath.this.Source">source</a>.<a href="#168189" title="=&gt; scala.tools.nsc.io.AbstractFile">location</a>

          <span title="ClassPath.this.Context" class="keyword">if</span> (<span title="(x$1: Boolean)Boolean">(</span><a href="#168310" title="(x$1: AnyRef)Boolean">clazz</a> eq <span title="Null(null)" class="keyword">null</span>) &amp;&amp; (<a href="#168311" title="(x$1: AnyRef)Boolean">source0</a> eq <span title="Null(null)" class="keyword">null</span>)) <a href="#168307" title="ClassPath.this.Context">ret</a>
          <span class="keyword">else</span> {
            <span class="keyword">val</span> <a title="ClassPath.this.Entry" id="168345">entry</a> = <a href="#168346" title="ClassPath.this.Entry{ ... }" class="keyword">new</a> <a href="#109470" title="anonymous class $anon extends ClassPath.this.Entry" id="168346">Entry</a>(<a href="#168310" title="scala.tools.nsc.io.AbstractFile">clazz</a>) {
              <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; ClassPath.this.Source" id="168348">source</a> =
                <span title="ClassPath.this.Source" class="keyword">if</span> (<a href="#168311" title="(x$1: AnyRef)Boolean">source0</a> eq <span title="Null(null)" class="keyword">null</span>) <span title="Null(null)" class="keyword">null</span>
                <span class="keyword">else</span> <span title="ClassPath.this.Source" class="keyword">new</span> <a href="#109469" title="ClassPath.this.Source">Source</a>(<a href="#168311" title="scala.tools.nsc.io.AbstractFile">source0</a>, <a href="#168308" title="ClassPath.this.Entry">head</a>.<a href="#168204" title="=&gt; ClassPath.this.Source">source</a>.<a href="#168190" title="=&gt; Boolean">compile</a>)
            }
            <span class="keyword">try</span> {
              //Console.err.println(&quot;this=&quot; + this + &quot;\nclazz=&quot; + clazz + &quot;\nsource0=&quot; + source0 + &quot;\n&quot;)

              <span title="ClassPath.this.Context" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="#168298" title="Boolean">isDir</a>) <span title="ClassPath.this.Context" class="keyword">new</span> <a href="#109473" title="ClassPath.this.Context">Context</a>(<a href="#168345" title="ClassPath.this.Entry">entry</a> <a href="#168363" title="ClassPath.this.Entry">::</a> <span title="(x: ClassPath.this.Entry)List[ClassPath.this.Entry]">Nil</span>)
              <span class="keyword">else</span> <span title="ClassPath.this.Context" class="keyword">new</span> <a href="#109473" title="ClassPath.this.Context">Context</a>(<a href="#168345" title="ClassPath.this.Entry">entry</a> <a href="#168373" title="ClassPath.this.Entry">::</a> <a href="#168307" title="ClassPath.this.Context">ret</a>.<a href="#168294" title="(x: ClassPath.this.Entry)List[ClassPath.this.Entry]">entries</a>)
            } <span class="keyword">catch</span> {
              <span title="Nothing" class="keyword">case</span> <a title="Error" id="168383">e</a>: <a title="Error" id="1551">Error</a> =&gt;
              <span title="Nothing" class="keyword">throw</span> <a href="#168383" title="Error">e</a>
            }
          }
        }
      }

      <span class="keyword">val</span> <a title="ClassPath.this.Context" id="168303">ret</a> = <a href="#168302" title="(entries: List[ClassPath.this.Entry])ClassPath.this.Context">find0</a>(<a href="#168294" title="=&gt; List[ClassPath.this.Entry]">entries</a>)
      <span title="ClassPath.this.Context" class="keyword">if</span> (<a href="#168303" title="ClassPath.this.Context">ret</a>.<a href="#168294" title="=&gt; List[ClassPath.this.Entry]">entries</a>.<span title="=&gt; Boolean">isEmpty</span>) {
        //Console.err.println(&quot;BAD_FILE: &quot; + name + &quot; in &quot; + this)
        <span title="Null(null)" class="keyword">null</span>
      } <span class="keyword">else</span> <a href="#168303" title="ClassPath.this.Context">ret</a>
    } <span class="keyword">else</span> <span title="Null(null)" class="keyword">null</span>

    <span class="keyword">def</span> <a title="=&gt; Boolean" id="168282">isPackage</a>: <span title="Boolean">Boolean</span> =
      <span title="Boolean" class="keyword">if</span> (<a href="#168294" title="=&gt; List[ClassPath.this.Entry]">entries</a>.<span title="=&gt; Boolean">isEmpty</span>) <span title="Boolean(false)" class="keyword">false</span>
      <span class="keyword">else</span> <span title="Boolean" class="keyword">if</span> (<a href="#168294" title="=&gt; List[ClassPath.this.Entry]">entries</a>.<span title="=&gt; ClassPath.this.Entry">head</span>.<a href="#168208" title="(x$1: AnyRef)Boolean">location</a> ne <span title="Null(null)" class="keyword">null</span>) <a href="#168294" title="=&gt; List[ClassPath.this.Entry]">entries</a>.<span title="=&gt; ClassPath.this.Entry">head</span>.<a href="#168208" title="=&gt; scala.tools.nsc.io.AbstractFile">location</a>.<a href="../io/AbstractFile.scala.html#51391" title="=&gt; Boolean">isDirectory</a>
      <span class="keyword">else</span> <a href="#168294" title="=&gt; List[ClassPath.this.Entry]">entries</a>.<span title="=&gt; ClassPath.this.Entry">head</span>.<a href="#168204" title="=&gt; ClassPath.this.Source">source</a>.<a href="#168189" title="=&gt; scala.tools.nsc.io.AbstractFile">location</a>.<a href="../io/AbstractFile.scala.html#51391" title="=&gt; Boolean">isDirectory</a>

    <span class="keyword">def</span> <a title="=&gt; java.lang.String" id="168283">name</a> =
      <span title="java.lang.String" class="keyword">if</span> (<a href="#168294" title="=&gt; List[ClassPath.this.Entry]">entries</a>.<span title="=&gt; Boolean">isEmpty</span>) <span title="java.lang.String(&quot;&lt;none&gt;&quot;)" class="string">&quot;&lt;none&gt;&quot;</span>
      <span class="keyword">else</span> {
        <span class="keyword">val</span> <a title="ClassPath.this.Entry" id="168391">head</a> = <a href="#168294" title="=&gt; List[ClassPath.this.Entry]">entries</a>.<span title="=&gt; ClassPath.this.Entry">head</span>
        <span class="keyword">val</span> <a title="String" id="168392">name</a> = <span title="String" class="keyword">if</span> (<a href="#168391" title="ClassPath.this.Entry">head</a>.<a href="#168208" title="(x$1: AnyRef)Boolean">location</a> ne <span title="Null(null)" class="keyword">null</span>) <a href="#168391" title="ClassPath.this.Entry">head</a>.<a href="#168208" title="=&gt; scala.tools.nsc.io.AbstractFile">location</a>.<a href="../io/AbstractFile.scala.html#51383" title="=&gt; String">name</a>
                   <span class="keyword">else</span> <a href="#168391" title="ClassPath.this.Entry">head</a>.<a href="#168204" title="=&gt; ClassPath.this.Source">source</a>.<a href="#168189" title="=&gt; scala.tools.nsc.io.AbstractFile">location</a>.<a href="../io/AbstractFile.scala.html#51383" title="=&gt; String">name</a>
        <span title="String" class="keyword">if</span> (<a href="#168282" title="=&gt; Boolean">isPackage</a>) <a href="#168392" title="String">name</a>
        <span class="keyword">else</span> <a href="#168392" title="String">name</a>.<span title="(x$1: Int,x$2: Int)java.lang.String">substring</span>(<span title="Int(0)" class="int">0</span>, <a href="#168392" title="String">name</a>.<span title="()Int">length</span><span title="(x$1: Int)Int">(</span>) - (<span title="java.lang.String(&quot;.class&quot;)" class="string">&quot;.class&quot;</span>).<span title="()Int">length</span>())
      }

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="168284">toString</a>(): <span title="String">String</span> = <a href="#168286" title="(entries0: List[ClassPath.this.Entry])String">toString</a>(<a href="#168294" title="=&gt; List[ClassPath.this.Entry]">entries</a>)

    <span class="keyword">def</span> <a title="(entry: ClassPath.this.Entry)String" id="168285">toString</a>(<a title="ClassPath.this.Entry" id="168435">entry</a>: <a href="#109470" title="ClassPath.this.Entry">Entry</a>): <span title="String">String</span> =
      (<span title="(x$1: Any)java.lang.String">(</span><span title="java.lang.String" class="keyword">if</span> (<a href="#168435" title="ClassPath.this.Entry">entry</a>.<a href="#168208" title="(x$1: AnyRef)Boolean">location</a> eq <span title="Null(null)" class="keyword">null</span>) <span title="java.lang.String(&quot;&lt;none&gt;&quot;)" class="string">&quot;&lt;none&gt;&quot;</span>
        <span class="keyword">else</span> <a href="#168435" title="ClassPath.this.Entry">entry</a>.<a href="#168208" title="=&gt; scala.tools.nsc.io.AbstractFile">location</a>.<a href="../io/AbstractFile.scala.html#51406" title="()String">toString</a>()) +
       (<span title="Any" class="keyword">if</span> (<a href="#168435" title="ClassPath.this.Entry">entry</a>.<a href="#168204" title="(x$1: AnyRef)Boolean">source</a> eq <span title="Null(null)" class="keyword">null</span>) <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>
        <span class="keyword">else</span> <span title="(x$1: Any)java.lang.String" class="string">&quot; with_source=&quot;</span> + <a href="#168435" title="ClassPath.this.Entry">entry</a>.<a href="#168204" title="=&gt; ClassPath.this.Source">source</a>.<a href="#168189" title="=&gt; scala.tools.nsc.io.AbstractFile">location</a>.<a href="../io/AbstractFile.scala.html#51406" title="()String">toString</a>()))

    <span class="keyword">def</span> <a title="(entries0: List[ClassPath.this.Entry])String" id="168286">toString</a>(<a title="List[ClassPath.this.Entry]" id="168433">entries0</a>: <span title="List[ClassPath.this.Entry]">List</span>[Entry]): <span title="String">String</span> =
      <span title="String" class="keyword">if</span> (<a href="#168433" title="List[ClassPath.this.Entry]">entries0</a>.<span title="=&gt; Boolean">isEmpty</span>) <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>
      <span class="keyword">else</span> <a href="#168285" title="(entry: ClassPath.this.Entry)String">toString</a><span title="(x$1: Any)java.lang.String">(</span><a href="#168433" title="List[ClassPath.this.Entry]">entries0</a>.<span title="=&gt; ClassPath.this.Entry">head</span>) <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;:::&quot;)" class="string">&quot;:::&quot;</span> + <a href="#168286" title="(entries0: List[ClassPath.this.Entry])String">toString</a>(<a href="#168433" title="List[ClassPath.this.Entry]">entries0</a>.<span title="=&gt; List[ClassPath.this.Entry]">tail</span>)

    <span class="keyword">def</span> <a title="=&gt; Boolean" id="168287">isSourceFile</a> = {
      <span class="keyword">def</span> <a title="=&gt; ClassPath.this.Entry" id="168475">head</a> = <a href="#168294" title="=&gt; List[ClassPath.this.Entry]">entries</a>.<span title="=&gt; ClassPath.this.Entry">head</span>
      <span class="keyword">def</span> <a title="=&gt; scala.tools.nsc.io.AbstractFile" id="168476">clazz</a> = <a href="#168475" title="=&gt; ClassPath.this.Entry">head</a>.<a href="#168208" title="=&gt; scala.tools.nsc.io.AbstractFile">location</a>
      <span class="keyword">def</span> <a title="=&gt; scala.tools.nsc.io.AbstractFile" id="168477">source</a> = <span title="scala.tools.nsc.io.AbstractFile" class="keyword">if</span> (<a href="#168475" title="=&gt; ClassPath.this.Entry">head</a>.<a href="#168204" title="(x$1: AnyRef)Boolean">source</a> eq <span title="Null(null)" class="keyword">null</span>) <span title="Null(null)" class="keyword">null</span> <span class="keyword">else</span> <a href="#168475" title="=&gt; ClassPath.this.Entry">head</a>.<a href="#168204" title="=&gt; ClassPath.this.Source">source</a>.<a href="#168189" title="=&gt; scala.tools.nsc.io.AbstractFile">location</a>
      <span class="keyword">def</span> <a title="=&gt; Boolean" id="168478">isPredef</a> = <a href="#168477" title="=&gt; scala.tools.nsc.io.AbstractFile">source</a>.<a href="../io/AbstractFile.scala.html#51383" title="=&gt; String">name</a>.<span title="(x$1: Any)Boolean">equals</span><span title="(x$1: Boolean)Boolean">(</span><span title="java.lang.String(&quot;Predef.scala&quot;)" class="string">&quot;Predef.scala&quot;</span>) ||
                     <a href="#168477" title="=&gt; scala.tools.nsc.io.AbstractFile">source</a>.<a href="../io/AbstractFile.scala.html#51384" title="=&gt; String">path</a>.<span title="(x$1: java.lang.String)Boolean">startsWith</span>(<span title="java.lang.String(&quot;scala/runtime&quot;)" class="string">&quot;scala/runtime&quot;</span>)

      <span title="Boolean" class="keyword">if</span> (<a href="#168294" title="=&gt; List[ClassPath.this.Entry]">entries</a>.<span title="(x$1: Boolean)Boolean">isEmpty</span> <span title="(x$1: Boolean)Boolean">||</span> <a href="#168294" title="=&gt; List[ClassPath.this.Entry]">entries</a>.<span title="=&gt; Boolean">isEmpty</span> || (<a href="#168477" title="(x$1: AnyRef)Boolean">source</a> eq <span title="Null(null)" class="keyword">null</span>)) <span title="Boolean(false)" class="keyword">false</span>
      <span class="keyword">else</span> <span title="Boolean" class="keyword">if</span> (<span title="(x$1: Boolean)Boolean">!</span><a href="#109477" title="Boolean">onlyPresentation</a> &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#168475" title="=&gt; ClassPath.this.Entry">head</a>.<a href="#168204" title="=&gt; ClassPath.this.Source">source</a>.<a href="#168190" title="=&gt; Boolean">compile</a>) <span title="Boolean(false)" class="keyword">false</span>
      <span class="keyword">else</span> <span title="Boolean" class="keyword">if</span> (<a href="#168477" title="=&gt; scala.tools.nsc.io.AbstractFile">source</a>.<a href="../io/AbstractFile.scala.html#51391" title="=&gt; Boolean">isDirectory</a>) <span title="Boolean(false)" class="keyword">false</span>
      <span class="keyword">else</span> <span title="Boolean" class="keyword">if</span> (<a href="#168476" title="(x$1: AnyRef)Boolean">clazz</a> eq <span title="Null(null)" class="keyword">null</span>) <span title="Boolean(true)" class="keyword">true</span>
      <span class="keyword">else</span> <span title="Boolean" class="keyword">if</span> (<a href="#109477" title="(x$1: Boolean)Boolean">onlyPresentation</a> &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#168478" title="=&gt; Boolean">isPredef</a>) <span title="Boolean(true)" class="keyword">true</span>
      <span class="keyword">else</span> <span title="Boolean" class="keyword">if</span> (<a href="#168477" title="=&gt; scala.tools.nsc.io.AbstractFile">source</a>.<a href="../io/AbstractFile.scala.html#51392" title="(x$1: Long)Boolean" id="3196">lastModified</a> &gt; <a href="#168476" title="=&gt; scala.tools.nsc.io.AbstractFile">clazz</a>.<a href="../io/AbstractFile.scala.html#51392" title="=&gt; Long">lastModified</a>) <span title="Boolean(true)" class="keyword">true</span>
      <span class="keyword">else</span> <span title="Boolean(false)" class="keyword">false</span>
    }

    <span class="keyword">def</span> <a title="=&gt; scala.tools.nsc.io.AbstractFile" id="168288">sourceFile</a> = <span title="scala.tools.nsc.io.AbstractFile" class="keyword">if</span> (<span title="(x$1: Boolean)Boolean">(</span><a href="#168294" title="=&gt; List[ClassPath.this.Entry]">entries</a>.<span title="=&gt; ClassPath.this.Entry">head</span>.<a href="#168204" title="(x$1: AnyRef)Boolean">source</a> ne <span title="Null(null)" class="keyword">null</span>) &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#168294" title="=&gt; List[ClassPath.this.Entry]">entries</a>.<span title="=&gt; ClassPath.this.Entry">head</span>.<a href="#168204" title="=&gt; ClassPath.this.Source">source</a>.<a href="#168189" title="=&gt; scala.tools.nsc.io.AbstractFile">location</a>.<a href="../io/AbstractFile.scala.html#51391" title="=&gt; Boolean">isDirectory</a>)
      <a href="#168294" title="=&gt; List[ClassPath.this.Entry]">entries</a>.<span title="=&gt; ClassPath.this.Entry">head</span>.<a href="#168204" title="=&gt; ClassPath.this.Source">source</a>.<a href="#168189" title="=&gt; scala.tools.nsc.io.AbstractFile">location</a> <span class="keyword">else</span> <span title="Null(null)" class="keyword">null</span>

    <span class="keyword">def</span> <a title="=&gt; scala.tools.nsc.io.AbstractFile" id="168289">classFile</a> = <span title="scala.tools.nsc.io.AbstractFile" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="#168287" title="=&gt; Boolean">isSourceFile</a>) <a href="#168294" title="=&gt; List[ClassPath.this.Entry]">entries</a>.<span title="=&gt; ClassPath.this.Entry">head</span>.<a href="#168208" title="=&gt; scala.tools.nsc.io.AbstractFile">location</a> <span class="keyword">else</span> <span title="Null(null)" class="keyword">null</span>

    <span class="keyword">def</span> <a title="=&gt; scala.tools.nsc.io.AbstractFile" id="168290">sourcePath</a> =
      <span title="scala.tools.nsc.io.AbstractFile" class="keyword">if</span> (<span title="(x$1: Boolean)Boolean">!</span><a href="#168287" title="=&gt; Boolean">isSourceFile</a> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#168294" title="=&gt; List[ClassPath.this.Entry]">entries</a>.<span title="=&gt; Boolean">isEmpty</span> &amp;&amp; (<a href="#168294" title="=&gt; List[ClassPath.this.Entry]">entries</a>.<span title="=&gt; ClassPath.this.Entry">head</span>.<a href="#168204" title="(x$1: AnyRef)Boolean">source</a> ne <span title="Null(null)" class="keyword">null</span>)) {
        <span class="keyword">val</span> <a title="scala.tools.nsc.io.AbstractFile" id="168527">ret</a> = <a href="#168294" title="=&gt; List[ClassPath.this.Entry]">entries</a>.<span title="=&gt; ClassPath.this.Entry">head</span>.<a href="#168204" title="=&gt; ClassPath.this.Source">source</a>.<a href="#168189" title="=&gt; scala.tools.nsc.io.AbstractFile">location</a>
        <span title="scala.tools.nsc.io.AbstractFile" class="keyword">if</span> (<span title="(x$1: Boolean)Boolean">(</span><a href="#168527" title="(x$1: AnyRef)Boolean">ret</a> ne <span title="Null(null)" class="keyword">null</span>) &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#168527" title="scala.tools.nsc.io.AbstractFile">ret</a>.<a href="../io/AbstractFile.scala.html#51391" title="=&gt; Boolean">isDirectory</a>) {
          <span title="object Console">Console</span>.<a title="=&gt; java.io.PrintStream" id="51281">err</a>.<a title="(x$1: java.lang.String)Unit" id="41201">println</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;source path &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#168527" title="scala.tools.nsc.io.AbstractFile">ret</a> + <span title="java.lang.String(&quot; is not a directory&quot;)" class="string">&quot; is not a directory&quot;</span>)
          <span title="Null(null)" class="keyword">null</span>
        } <span class="keyword">else</span> <a href="#168527" title="scala.tools.nsc.io.AbstractFile">ret</a>
      }
      <span class="keyword">else</span> <span title="Null(null)" class="keyword">null</span>

    <span class="keyword">def</span> <a title="(name: String)Boolean" id="168291">validPackage</a>(<a title="String" id="168542">name</a>: <span title="String">String</span>): <span title="Boolean">Boolean</span> =
      <span title="=&gt; Boolean">!</span> (<a href="#168542" title="String">name</a>.<span title="(x$1: Any)Boolean">equals</span><span title="(x$1: Boolean)Boolean">(</span><span title="java.lang.String(&quot;META-INF&quot;)" class="string">&quot;META-INF&quot;</span>) || <a href="#168542" title="String">name</a>.<span title="(x$1: java.lang.String)Boolean">startsWith</span>(<span title="java.lang.String(&quot;.&quot;)" class="string">&quot;.&quot;</span>))
  }

  <span class="keyword">class</span> <a title="class Build extends java.lang.Object with ScalaObject" id="109474">Build</a> <span title="ScalaObject">{</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.ArrayBuffer[ClassPath.this.Entry]" id="109483">entries</a> = <a title="()scala.collection.mutable.ArrayBuffer[ClassPath.this.Entry]" id="108542" class="keyword">new</a> <a title="scala.collection.mutable.ArrayBuffer[ClassPath.this.Entry]" id="24996">ArrayBuffer</a>[Entry]

    <span class="keyword">def</span> <a title="=&gt; ClassPath.this.Context" id="109485">root</a> = <span title="ClassPath.this.Context" class="keyword">new</span> <a href="#109473" title="ClassPath.this.Context">Context</a>(<a href="#109483" title="=&gt; scala.collection.mutable.ArrayBuffer[ClassPath.this.Entry]">entries</a>.<span title="=&gt; List[ClassPath.this.Entry]">toList</span>)

    <span class="keyword">def</span> <a title="(classpath: String)ClassPath.this.Build" id="109486" class="keyword">this</a>(<a title="String" id="109509">classpath</a>: <span title="String">String</span>) <span title="Unit">{</span>
      <a href="#109474" title="Build.this.type" class="keyword">this</a>()
      <a href="#109492" title="(path: String)Unit">addFilesInPath</a>(<a href="#109509" title="String">classpath</a>)
    }

    <span class="keyword">def</span> <a title="(source: String,output: String)ClassPath.this.Build" id="109487" class="keyword">this</a>(<a title="String" id="109507">source</a>: <span title="String">String</span>, <a title="String" id="109508">output</a>: <span title="String">String</span>) <span title="Unit">{</span>
      <a href="#109474" title="Build.this.type" class="keyword">this</a>()
      <a href="#109494" title="(source: String,output: String)Unit">addDirsInPath</a>(<a href="#109507" title="String">source</a>, <a href="#109508" title="String">output</a>)
    }

    <span class="keyword">def</span> <a title="(classpath: String,source: String,output: String,boot: String,extdirs: String,codebase: String)ClassPath.this.Build" id="109488" class="keyword">this</a>(<a title="String" id="109501">classpath</a>: <span title="String">String</span>, <a title="String" id="109502">source</a>: <span title="String">String</span>, <a title="String" id="109503">output</a>: <span title="String">String</span>,
             <a title="String" id="109504">boot</a>: <span title="String">String</span>, <a title="String" id="109505">extdirs</a>: <span title="String">String</span>, <a title="String" id="109506">codebase</a>: <span title="String">String</span>) <span title="Unit">{</span>
      <a href="#109474" title="Build.this.type" class="keyword">this</a>()
      <a href="#109492" title="(path: String)Unit">addFilesInPath</a>(<a href="#109504" title="String">boot</a>)
      <a href="#109493" title="(path: String)Unit">addArchivesInExtDirPath</a>(<a href="#109505" title="String">extdirs</a>)
      <a href="#109494" title="(source: String,output: String)Unit">addDirsInPath</a>(<a href="#109502" title="String">source</a>, <a href="#109503" title="String">output</a>)
      <a href="#109492" title="(path: String)Unit">addFilesInPath</a>(<a href="#109501" title="String">classpath</a>)
      <a href="#109497" title="(codebase: String)Unit">addURLsInPath</a>(<a href="#109506" title="String">codebase</a>)
    }

    /**
     *  Lookup the given path in this classpath. Returns null if not found.
     *  Does not work with absolute paths (starting with '/').
     * 
     *  @param path  Path to look up (if isDir is false, '.class' is appended!).
     *  @param isDir Whether to look for a directory or a file
     *  @return      The abstract file or null if path was not found
     */
    <span class="keyword">def</span> <a title="(path: String,isDir: Boolean)scala.tools.nsc.io.AbstractFile" id="109489">lookupPath</a>(<a title="String" id="109555">path</a>: <span title="String">String</span>, <a title="Boolean" id="109556">isDir</a>: <span title="Boolean">Boolean</span>): <a href="../io/AbstractFile.scala.html#20548" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a> = {
      <span class="keyword">val</span> <a title="ClassPath.this.Context" id="168626">ctx</a> = <a href="#109485" title="=&gt; ClassPath.this.Context">root</a>.<a href="#168281" title="(name: String,isDir: Boolean)ClassPath.this.Context">find</a>(<a href="#109555" title="String">path</a>, <a href="#109556" title="Boolean">isDir</a>)
      <span title="scala.tools.nsc.io.AbstractFile" class="keyword">if</span> (<a href="#168626" title="(x$1: AnyRef)Boolean">ctx</a> eq <span title="Null(null)" class="keyword">null</span>) <span title="Null(null)" class="keyword">null</span>
      <span class="keyword">else</span> <span title="scala.tools.nsc.io.AbstractFile" class="keyword">if</span> (<a href="#168626" title="ClassPath.this.Context">ctx</a>.<a href="#168294" title="=&gt; List[ClassPath.this.Entry]">entries</a>.<span title="=&gt; Boolean">isEmpty</span>) <span title="Null(null)" class="keyword">null</span>
      <span class="keyword">else</span> <span title="scala.tools.nsc.io.AbstractFile" class="keyword">if</span> (<a href="#168626" title="ClassPath.this.Context">ctx</a>.<a href="#168294" title="=&gt; List[ClassPath.this.Entry]">entries</a>.<span title="(x$1: AnyRef)Boolean">head</span> eq <span title="Null(null)" class="keyword">null</span>) <span title="Null(null)" class="keyword">null</span>
      <span class="keyword">else</span> <a href="#168626" title="ClassPath.this.Context">ctx</a>.<a href="#168294" title="=&gt; List[ClassPath.this.Entry]">entries</a>.<span title="=&gt; ClassPath.this.Entry">head</span>.<a href="#168208" title="=&gt; scala.tools.nsc.io.AbstractFile">location</a>
    }

    /**
     *  @param classes where the class files come from and are written to
     *  @param sources where the source files come from
     */
    <span class="keyword">def</span> <a title="(classes: String,sources: String)scala.collection.mutable.ArrayBuffer[ClassPath.this.Entry]" id="109490">output</a>(<a title="String" id="168633">classes</a> : <span title="String">String</span>, <a title="String" id="168634">sources</a> : <span title="String">String</span>) = {
      <span title="(assertion: Boolean)Unit">assert</span>(<a href="#168633" title="(x$1: AnyRef)Boolean">classes</a> ne <span title="Null(null)" class="keyword">null</span>)
      <span title="(assertion: Boolean)Unit">assert</span>(<a href="#168634" title="(x$1: AnyRef)Boolean">sources</a> ne <span title="Null(null)" class="keyword">null</span>)
      <span class="keyword">val</span> <a title="scala.tools.nsc.io.AbstractFile" id="168637">location</a> = <a href="../io/AbstractFile.scala.html#20549" title="object scala.tools.nsc.io.AbstractFile">AbstractFile</a>.<a href="../io/AbstractFile.scala.html#121038" title="(path: String)scala.tools.nsc.io.AbstractFile">getDirectory</a>(<a href="#168633" title="String">classes</a>)
      <span class="keyword">val</span> <a title="scala.tools.nsc.io.AbstractFile" id="168638">sources0</a> = <a href="../io/AbstractFile.scala.html#20549" title="object scala.tools.nsc.io.AbstractFile">AbstractFile</a>.<a href="../io/AbstractFile.scala.html#121038" title="(path: String)scala.tools.nsc.io.AbstractFile">getDirectory</a>(<a href="#168634" title="String">sources</a>)
      <span class="keyword">class</span> <a title="class Output0 extends ClassPath.this.Output with ScalaObject" id="168639">Output0</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#109471" title="ClassPath.this.Output">Output</a>(<a href="#168637" title="scala.tools.nsc.io.AbstractFile">location</a>, <a href="#168638" title="scala.tools.nsc.io.AbstractFile">sources0</a>) 
      <a href="#109483" title="(elem: ClassPath.this.Entry)Build.this.entries.type">entries</a> += <span title="Output0" class="keyword">new</span> <a href="#168639" title="Output0">Output0</a>()
    }
    /**
     *  @param classes where the class files come from
     *  @param sources optional source file attachment, otherwise null
     */
    <span class="keyword">def</span> <a title="(classes: String,sources: String)Unit" id="109491">library</a>(<a title="String" id="168705">classes</a>: <span title="String">String</span>, <a title="String" id="168706">sources</a>: <span title="String">String</span>) {
      <span title="(assertion: Boolean)Unit">assert</span>(<a href="#168705" title="(x$1: AnyRef)Boolean">classes</a> ne <span title="Null(null)" class="keyword">null</span>)
      <span class="keyword">val</span> <a title="scala.tools.nsc.io.AbstractFile" id="168708">location</a> = <a href="../io/AbstractFile.scala.html#20549" title="object scala.tools.nsc.io.AbstractFile">AbstractFile</a>.<a href="../io/AbstractFile.scala.html#121038" title="(path: String)scala.tools.nsc.io.AbstractFile">getDirectory</a>(<a href="#168705" title="String">classes</a>)
      <span class="keyword">var</span> <a title="scala.tools.nsc.io.AbstractFile" id="168709">sourceFile0</a> =
        <span title="scala.tools.nsc.io.AbstractFile" class="keyword">if</span> (<a href="#168706" title="(x$1: AnyRef)Boolean">sources</a> ne <span title="Null(null)" class="keyword">null</span>) <a href="../io/AbstractFile.scala.html#20549" title="object scala.tools.nsc.io.AbstractFile">AbstractFile</a>.<a href="../io/AbstractFile.scala.html#121038" title="(path: String)scala.tools.nsc.io.AbstractFile">getDirectory</a>(<a href="#168706" title="String">sources</a>)
        <span class="keyword">else</span> <span title="Null(null)" class="keyword">null</span>
      <span title="Unit" class="keyword">if</span> (<a href="#168709" title="(x$1: AnyRef)Boolean">sourceFile0</a> ne <span title="Null(null)" class="keyword">null</span>) {
        <span class="keyword">val</span> <a title="scala.tools.nsc.io.AbstractFile" id="168733">file00</a> = <a href="#168709" title="scala.tools.nsc.io.AbstractFile">sourceFile0</a>.<a href="../io/AbstractFile.scala.html#51401" title="(path: String,directory: Boolean)scala.tools.nsc.io.AbstractFile">lookupPath</a>(<span title="java.lang.String(&quot;src&quot;)" class="string">&quot;src&quot;</span>, <span title="Boolean(true)" class="keyword">true</span>)
        <span title="Unit" class="keyword">if</span> (<span title="(x$1: Boolean)Boolean">(</span><a href="#168733" title="(x$1: AnyRef)Boolean">file00</a> ne <span title="Null(null)" class="keyword">null</span>) &amp;&amp; <a href="#168733" title="scala.tools.nsc.io.AbstractFile">file00</a>.<a href="../io/AbstractFile.scala.html#51391" title="=&gt; Boolean">isDirectory</a>) {
          <a href="#168709" title="scala.tools.nsc.io.AbstractFile">sourceFile0</a> = <a href="#168733" title="scala.tools.nsc.io.AbstractFile">file00</a>
        }
      }
        
      <span class="keyword">class</span> <a title="class Library0 extends ClassPath.this.Library with ScalaObject" id="168710">Library0</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#109472" title="ClassPath.this.Library">Library</a>(<a href="#168708" title="scala.tools.nsc.io.AbstractFile">location</a>) {
        <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; scala.tools.nsc.io.AbstractFile" id="168741">sourceFile</a> = <a href="#168709" title="scala.tools.nsc.io.AbstractFile">sourceFile0</a>
      }
      <a href="#109483" title="(elem: ClassPath.this.Entry)Build.this.entries.type">entries</a> <span title="Unit">+=</span> <span title="Library0" class="keyword">new</span> <a href="#168710" title="Library0">Library0</a>()
    }

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(path: String)Unit" id="109492">addFilesInPath</a>(<a title="String" id="168580">path</a>: <span title="String">String</span>) {
      <span class="keyword">for</span> (<a title="String" id="168802">fileName</a> &lt;- <a href="#14720" title="object scala.tools.nsc.util.ClassPath">ClassPath</a>.<a href="#117752" title="(path: String)List[String]">expandPath</a><span title="(f: (String) =&gt; Any)Unit">(</span><a href="#168580" title="String">path</a>)) {
        <span class="keyword">val</span> <a title="scala.tools.nsc.io.AbstractFile" id="168803">file</a> = <a href="../io/AbstractFile.scala.html#20549" title="object scala.tools.nsc.io.AbstractFile">AbstractFile</a>.<a href="../io/AbstractFile.scala.html#121038" title="(path: String)scala.tools.nsc.io.AbstractFile">getDirectory</a>(<a href="#168802" title="String">fileName</a>)
        <span title="Any" class="keyword">if</span> (<a href="#168803" title="(x$1: AnyRef)Boolean">file</a> ne <span title="Null(null)" class="keyword">null</span>) <a href="#109483" title="(elem: ClassPath.this.Entry)Build.this.entries.type">entries</a> += (<span title="ClassPath.this.Library" class="keyword">new</span> <a href="#109472" title="ClassPath.this.Library">Library</a>(<a href="#168803" title="scala.tools.nsc.io.AbstractFile">file</a>))
      }
    }

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(path: String)Unit" id="109493">addArchivesInExtDirPath</a>(<a title="String" id="168613">path</a>: <span title="String">String</span>) {
      <span class="keyword">for</span> (<a title="String" id="168875">fileName</a> &lt;- <a href="#14720" title="object scala.tools.nsc.util.ClassPath">ClassPath</a>.<a href="#117752" title="(path: String)List[String]">expandPath</a><span title="(f: (String) =&gt; Unit)Unit">(</span><a href="#168613" title="String">path</a>)) {
        <span class="keyword">val</span> <a title="scala.tools.nsc.io.AbstractFile" id="168876">file</a> = <a href="../io/AbstractFile.scala.html#20549" title="object scala.tools.nsc.io.AbstractFile">AbstractFile</a>.<a href="../io/AbstractFile.scala.html#121038" title="(path: String)scala.tools.nsc.io.AbstractFile">getDirectory</a>(<a href="#168875" title="String">fileName</a>)
        <span title="Unit" class="keyword">if</span> (<a href="#168876" title="(x$1: AnyRef)Boolean">file</a> ne <span title="Null(null)" class="keyword">null</span>) {
          <span class="keyword">for</span> (<a title="scala.tools.nsc.io.AbstractFile" id="168895">file0</a> &lt;- <a href="#168876" title="(f: (scala.tools.nsc.io.AbstractFile) =&gt; Any)Unit" id="25431">file</a>) {
            <span class="keyword">val</span> <a title="String" id="168896">name</a> = <a href="#168895" title="scala.tools.nsc.io.AbstractFile">file0</a>.<a href="../io/AbstractFile.scala.html#51383" title="=&gt; String">name</a>
            <span title="Any" class="keyword">if</span> (<a href="#168896" title="String">name</a>.<span title="(x$1: java.lang.String)Boolean">endsWith</span><span title="(x$1: Boolean)Boolean">(</span><span title="java.lang.String(&quot;.jar&quot;)" class="string">&quot;.jar&quot;</span>) <span title="(x$1: Boolean)Boolean">||</span> <a href="#168896" title="String">name</a>.<span title="(x$1: java.lang.String)Boolean">endsWith</span>(<span title="java.lang.String(&quot;.zip&quot;)" class="string">&quot;.zip&quot;</span>) || <a href="#168895" title="scala.tools.nsc.io.AbstractFile">file0</a>.<a href="../io/AbstractFile.scala.html#51391" title="=&gt; Boolean">isDirectory</a>) {
              <span class="keyword">val</span> <a title="scala.tools.nsc.io.AbstractFile" id="168905">archive</a> = <a href="../io/AbstractFile.scala.html#20549" title="object scala.tools.nsc.io.AbstractFile">AbstractFile</a>.<a href="../io/AbstractFile.scala.html#121039" title="(file: java.io.File)scala.tools.nsc.io.AbstractFile">getDirectory</a>(<a title="(x$1: java.io.File,x$2: java.lang.String)java.io.File" id="35174" class="keyword">new</a> <span title="java.io.File">File</span>(<a href="#168876" title="scala.tools.nsc.io.AbstractFile">file</a>.<a href="../io/AbstractFile.scala.html#51387" title="=&gt; java.io.File">file</a>, <a href="#168896" title="String">name</a>))
              <span title="Any" class="keyword">if</span> (<a href="#168905" title="(x$1: AnyRef)Boolean">archive</a> ne <span title="Null(null)" class="keyword">null</span>) <a href="#109483" title="(elem: ClassPath.this.Entry)Build.this.entries.type">entries</a> += (<span title="ClassPath.this.Library" class="keyword">new</span> <a href="#109472" title="ClassPath.this.Library">Library</a>(<a href="#168905" title="scala.tools.nsc.io.AbstractFile">archive</a>))
            }
          }
        }
      }
    }

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(source: String,output: String)Unit" id="109494">addDirsInPath</a>(<a title="String" id="168595">source</a>: <span title="String">String</span>, <a title="String" id="168596">output</a>: <span title="String">String</span>) {
      <span class="keyword">val</span> <a title="scala.tools.nsc.io.AbstractFile" id="168979">clazzes</a> = <a href="../io/AbstractFile.scala.html#20549" title="object scala.tools.nsc.io.AbstractFile">AbstractFile</a>.<a href="../io/AbstractFile.scala.html#121038" title="(path: String)scala.tools.nsc.io.AbstractFile">getDirectory</a>(<a href="#168596" title="String">output</a>)
      <span title="Unit" class="keyword">if</span> (<a href="#168979" title="(x$1: AnyRef)Boolean">clazzes</a> eq <span title="Null(null)" class="keyword">null</span>)
        <span title="Nothing" class="keyword">throw</span> <span title="scala.tools.nsc.FatalError" class="keyword">new</span> <a href="../FatalError.scala.html#8220" title="scala.tools.nsc.FatalError">FatalError</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Output location \&quot;&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#168596" title="String">output</a> + <span title="java.lang.String(&quot;&quot; not found&quot;)" class="string">&quot;\&quot; not found&quot;</span>)
      <span class="keyword">val</span> <a title="java.util.StringTokenizer" id="168980">strtok</a> = <span title="(x$1: java.lang.String,x$2: java.lang.String)java.util.StringTokenizer" class="keyword">new</span> <span title="java.util.StringTokenizer">StringTokenizer</span>(<a href="#168595" title="String">source</a>, <span title="object java.io.File">File</span>.<span title="java.lang.String">pathSeparator</span>)
      <span title="Unit" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="#168980" title="java.util.StringTokenizer">strtok</a>.<span title="()Boolean">hasMoreTokens</span>()) {
        <span class="keyword">val</span> <a title="ClassPath.this.Output" id="169021">output0</a> = (<span title="ClassPath.this.Output" class="keyword">new</span> <a href="#109471" title="ClassPath.this.Output">Output</a>(<a href="#168979" title="scala.tools.nsc.io.AbstractFile">clazzes</a>, <span title="Null(null)" class="keyword">null</span>))
        <a href="#109483" title="(elem: ClassPath.this.Entry)Build.this.entries.type">entries</a> <span title="Unit">+=</span> <a href="#169021" title="ClassPath.this.Output">output0</a>
      }
      <span class="keyword">else</span> <span title="Unit" class="keyword">while</span> (<a href="#168980" title="java.util.StringTokenizer">strtok</a>.<span title="()Boolean">hasMoreTokens</span>()) <a href="#169055" title="()Unit">{</a>
        <span class="keyword">val</span> <a title="scala.tools.nsc.io.AbstractFile" id="169058">sources</a> = <a href="../io/AbstractFile.scala.html#20549" title="object scala.tools.nsc.io.AbstractFile">AbstractFile</a>.<a href="../io/AbstractFile.scala.html#121038" title="(path: String)scala.tools.nsc.io.AbstractFile">getDirectory</a>(<a href="#168980" title="java.util.StringTokenizer">strtok</a>.<span title="()java.lang.String">nextToken</span>())
        <span class="keyword">val</span> <a title="ClassPath.this.Output" id="169059">output0</a> = (<span title="ClassPath.this.Output" class="keyword">new</span> <a href="#109471" title="ClassPath.this.Output">Output</a>(<a href="#168979" title="scala.tools.nsc.io.AbstractFile">clazzes</a>, <a href="#169058" title="scala.tools.nsc.io.AbstractFile">sources</a>))
        <a href="#109483" title="(elem: ClassPath.this.Entry)Build.this.entries.type">entries</a> += <a href="#169059" title="ClassPath.this.Output">output0</a>
      }    
    }

    <span class="keyword">private</span> <span class="keyword">val</span> <a title="java.lang.String" id="109495">urlSeparator</a> = <span title="java.lang.String(&quot; &quot;)" class="string">&quot; &quot;</span>
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(codebase: String)Unit" id="109497">addURLsInPath</a>(<a title="String" id="168621">codebase</a>: <span title="String">String</span>) {
      <span class="keyword">val</span> <a title="java.util.StringTokenizer" id="169109">strtok</a> = <span title="(x$1: java.lang.String,x$2: java.lang.String)java.util.StringTokenizer" class="keyword">new</span> <span title="java.util.StringTokenizer">StringTokenizer</span>(<a href="#168621" title="String">codebase</a>, <a href="#109495" title="=&gt; java.lang.String">urlSeparator</a>)
      <span title="Unit" class="keyword">while</span> (<a href="#169109" title="java.util.StringTokenizer">strtok</a>.<span title="()Boolean">hasMoreTokens</span>()) {
        <a href="#169118" title="()Unit" class="keyword">try</a> {
          <span class="keyword">val</span> <a title="java.net.URL" id="169121">url</a> = <a title="(x$1: java.lang.String)java.net.URL" id="117363" class="keyword">new</a> <a title="java.net.URL" id="4920">URL</a>(<a href="#169109" title="java.util.StringTokenizer">strtok</a>.<span title="()java.lang.String">nextToken</span>())
          <span class="keyword">val</span> <a title="scala.tools.nsc.io.AbstractFile" id="169122">archive</a> = <a href="../io/AbstractFile.scala.html#20549" title="object scala.tools.nsc.io.AbstractFile">AbstractFile</a>.<a href="../io/AbstractFile.scala.html#121040" title="(url: java.net.URL)scala.tools.nsc.io.AbstractFile">getURL</a>(<a href="#169121" title="java.net.URL">url</a>)
          <span title="Any" class="keyword">if</span> (<a href="#169122" title="(x$1: AnyRef)Boolean">archive</a> ne <span title="Null(null)" class="keyword">null</span>) <a href="#109483" title="(elem: ClassPath.this.Entry)Build.this.entries.type">entries</a> += (<span title="ClassPath.this.Library" class="keyword">new</span> <a href="#109472" title="ClassPath.this.Library">Library</a>(<a href="#169122" title="scala.tools.nsc.io.AbstractFile">archive</a>))
        }
        <span class="keyword">catch</span> {
          <span title="Nothing" class="keyword">case</span> <a title="java.lang.Throwable" id="169224">e</a> =&gt;
            <span title="object Console">Console</span>.<a title="(x: Any)Unit" id="51323">println</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;error in addURLsInPath: &quot;</span> + <a href="#169224" title="java.lang.Throwable">e</a>.<a title="()java.lang.String" id="25926">getMessage</a>)//debug
            <span title="Nothing" class="keyword">throw</span> <a href="#169224" title="java.lang.Throwable">e</a>
        }
      }
    }

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="109498">toString</a>() =
      <a href="#109483" title="=&gt; scala.collection.mutable.ArrayBuffer[ClassPath.this.Entry]">entries</a>.<span title="=&gt; List[ClassPath.this.Entry]">toList</span>.<a title="(start: String,sep: String,end: String)String" id="25360">mkString</a>(<span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>, <span title="object java.io.File">File</span>.<span title="java.lang.String">pathSeparator</span>, <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>)
  } // class Build

}

        </pre>
    </body>
</html>