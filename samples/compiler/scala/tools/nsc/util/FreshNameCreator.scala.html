<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/util/FreshNameCreator.scala</title>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style">
    </head>
    <body onload="initializeLinked()">
        <pre>
<span class="comment">/* NSC -- new Scala compiler
 * Copyright 2005-2009 LAMP/EPFL
 * @author  Martin Odersky
 */</span>
<span class="comment">// $Id: FreshNameCreator.scala 17274 2009-03-10 11:39:04Z michelou $</span>

<span class="keyword">package</span> scala.tools.nsc.util

<span class="keyword">import</span> scala.collection.mutable.HashMap

<span class="keyword">trait</span> <span class="typed"><span class="type">trait FreshNameCreator extends java.lang.Object</span><span id="8468"><a id="2165">FreshNameCreator</a></span></span> {

  <span class="comment">/** do not call before after type checking ends.
   *  Use &lt;code&gt;newName(Position, String)&lt;/code&gt; instead.
   */</span>
  @<span class="typed"><span class="type">deprecated</span><a id="217">deprecated</a></span> <span class="keyword">def</span> <span class="typed"><span class="type">(String)String</span><a id="48782">newName</a></span>(<span class="typed"><span class="type">String</span><a id="52449">prefix</a></span>: <span class="typed"><span class="type">String</span><a id="1861">String</a></span>): <span class="typed"><span class="type">String</span><a id="1861">String</a></span>

  <span class="comment">/** do not call before after type checking ends.
   *  Use newName(Position) instead.
   */</span>
  @<span class="typed"><span class="type">deprecated</span><a id="217">deprecated</a></span> <span class="keyword">def</span> <span class="typed"><span class="type">()String</span><a id="48783">newName</a></span>(): <span class="typed"><span class="type">String</span><a id="1861">String</a></span>

  <span class="keyword">def</span> <span class="typed"><span class="type">(scala.tools.nsc.util.Position,String)String</span><a id="48784">newName</a></span>(<span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a id="52446">pos</a></span>: util.<span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a href="Position.scala.html#8480">Position</a></span>, <span class="typed"><span class="type">String</span><a id="52447">prefix</a></span>: <span class="typed"><span class="type">String</span><a id="1861">String</a></span>): <span class="typed"><span class="type">String</span><a id="1861">String</a></span>
  <span class="keyword">def</span> <span class="typed"><span class="type">(scala.tools.nsc.util.Position)String</span><a id="48785">newName</a></span>(<span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a id="52439">pos</a></span>: util.<span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a href="Position.scala.html#8480">Position</a></span>): <span class="typed"><span class="type">String</span><a id="1861">String</a></span>
}

<span class="keyword">object</span> <span class="typed"><span class="type">object scala.tools.nsc.util.FreshNameCreator</span><a id="8469">FreshNameCreator</a></span> {

  <span class="keyword">class</span> <span class="typed"><span class="type">class Default extends java.lang.Object with scala.tools.nsc.util.FreshNameCreator with ScalaObject</span><a id="77539">Default</a></span> <span class="keyword">extends</span> <span class="typed"><span class="type">scala.tools.nsc.util.FreshNameCreator</span><a href="#8468">FreshNameCreator</a></span> {

    <span class="keyword">protected</span> <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><span id="77543"><span id="77541"><span id="77542"><a id="153187">counter</a></span></span></span></span> = <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>
    <span class="keyword">protected</span> <span class="keyword">val</span> <span class="typed"><span class="type">scala.collection.mutable.HashMap[String,Int]</span><span id="77545"><a id="77544">counters</a></span></span> = <span class="typed"><span class="type">scala.collection.mutable.HashMap[String,Int]</span><span class="keyword">new</span></span> <span class="typed"><span class="type">scala.collection.mutable.HashMap[String,Int]</span><a id="20081">HashMap</a></span>[String, Int]

    <span class="comment">/**
     * Create a fresh name with the given prefix. It is guaranteed
     * that the returned name has never been returned by a previous
     * call to this function (provided the prefix does not end in a digit).
     */</span>
    <span class="keyword">def</span> <span class="typed"><span class="type">(String)String</span><a id="77546">newName</a></span>(<span class="typed"><span class="type">String</span><a id="153188">prefix</a></span>: <span class="typed"><span class="type">String</span><a id="1861">String</a></span>): <span class="typed"><span class="type">String</span><a id="1861">String</a></span> = {
      <span class="keyword">val</span> <span class="typed"><span class="type">java.lang.String</span><a id="153189">safePrefix</a></span> = <span class="typed"><span class="type">String</span><a href="#153188">prefix</a></span>.<span class="typed"><span class="type">(Char,Char)java.lang.String</span><a id="5858">replace</a></span>(<span class="typed"><span class="type">Char('&lt;')</span><span class="char">'&lt;'</span></span>, <span class="typed"><span class="type">Char('$')</span><span class="char">'$'</span></span>).<span class="typed"><span class="type">(Char,Char)java.lang.String</span><a id="5858">replace</a></span>(<span class="typed"><span class="type">Char('&gt;')</span><span class="char">'&gt;'</span></span>, <span class="typed"><span class="type">Char('$')</span><span class="char">'$'</span></span>)
      <span class="keyword">val</span> <span class="typed"><span class="type">Int</span><a id="153190">count</a></span> = <span class="typed"><span class="type">=&gt; scala.collection.mutable.HashMap[String,Int]</span><a href="#77544">counters</a></span>.<span class="typed"><span class="type">(String,=&gt; Int)Int</span><a id="24236">getOrElse</a></span>(<span class="typed"><span class="type">java.lang.String</span><a href="#153189">safePrefix</a></span>, <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>) <span class="typed"><span class="type">(Int)Int</span><a id="3147">+</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
      <span class="typed"><span class="type">=&gt; scala.collection.mutable.HashMap[String,Int]</span><a href="#77544">counters</a></span>(<span class="typed"><span class="type">java.lang.String</span><a href="#153189">safePrefix</a></span>) = <span class="typed"><span class="type">Int</span><a href="#153190">count</a></span>
      <span class="typed"><span class="type">java.lang.String</span><a href="#153189">safePrefix</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">Int</span><a href="#153190">count</a></span>
    }
    <span class="keyword">def</span> <span class="typed"><span class="type">(scala.tools.nsc.util.Position,String)String</span><a id="77547">newName</a></span>(<span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a id="153196">pos</a></span>: util.<span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a href="Position.scala.html#8480">Position</a></span>, <span class="typed"><span class="type">String</span><a id="153197">prefix</a></span>: <span class="typed"><span class="type">String</span><a id="1861">String</a></span>) = <span class="typed"><span class="type">(String)String</span><a href="#77546">newName</a></span>(<span class="typed"><span class="type">String</span><a href="#153197">prefix</a></span>)
    <span class="keyword">def</span> <span class="typed"><span class="type">(scala.tools.nsc.util.Position)String</span><a id="77548">newName</a></span>(<span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a id="153200">pos</a></span>: util.<span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a href="Position.scala.html#8480">Position</a></span>) = <span class="typed"><span class="type">()String</span><a href="#77549">newName</a></span>()

    <span class="keyword">def</span> <span class="typed"><span class="type">()String</span><a id="77549">newName</a></span>(): <span class="typed"><span class="type">String</span><a id="1861">String</a></span> = {
      <span class="typed"><span class="type">(Int)Unit</span><a href="#77542">counter</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">+=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
      <span class="typed"><span class="type">java.lang.String(&quot;$&quot;)</span><span class="string">&quot;$&quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">=&gt; Int</span><a href="#77541">counter</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;$&quot;)</span><span class="string">&quot;$&quot;</span></span>
    }
  }

}

        </pre>
    </body>
</html>