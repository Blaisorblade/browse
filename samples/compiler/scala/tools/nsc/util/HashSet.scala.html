<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/util/HashSet.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style">
    </head>
    <body>
        <pre>
/* NSC -- new Scala compiler
 * Copyright 2005-2009 LAMP/EPFL
 * @author  Martin Odersky
 */
// $Id: HashSet.scala 18387 2009-07-24 15:28:37Z odersky $

<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> util

<span class="keyword">class</span> <a title="class HashSet[T &gt;: Null &lt;: AnyRef] extends scala.tools.nsc.util.Set[T] with ScalaObject" id="14524">HashSet</a>[<a title="&gt;: Null &lt;: AnyRef" id="21277">T</a> &gt;: Null &lt;: <a id="1">AnyRef</a>]<a title="ScalaObject" id="959">(</a><a title="Int" id="112923">initialCapacity</a>: <span title="Int">Int</span>) <span class="keyword">extends</span> <a href="Set.scala.html#14533" title="scala.tools.nsc.util.Set[T]">Set</a>[T] {

  <span class="keyword">def</span> <a title="()scala.tools.nsc.util.HashSet[T]" id="112905" class="keyword">this</a>() = <a href="#14524" title="HashSet.this.type" class="keyword">this</a>(<span title="Int(16)" class="int">16</span>)

  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Int" id="112907">capacity</a> = <a href="#112923" title="Int">initialCapacity</a>
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Int" id="112910">used</a> = <span title="Int(0)" class="int">0</span>
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Array[AnyRef]" id="112913">table</a> = <span title="Array[AnyRef]" class="keyword">new</span> <span title="Array[AnyRef]">Array</span>[AnyRef](<a href="#112907" title="=&gt; Int">capacity</a>)

  <span class="keyword">def</span> <a title="=&gt; Int" id="112915">size</a>: <span title="Int">Int</span> = <a href="#112910" title="=&gt; Int">used</a>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(x: Int)Int" id="112916">index</a>(<a title="Int" id="174211">x</a>: <span title="Int">Int</span>): <span title="Int">Int</span> = <a title="object Math" id="525">Math</a>.<a title="(x: Int)Int" id="69584">abs</a>(<a href="#174211" title="(x$1: Int)Int" id="2972">x</a> % <a href="#112907" title="=&gt; Int">capacity</a>)

  <span class="keyword">def</span> <a title="(x: T)T" id="112917">findEntry</a>(<a title="T" id="174250">x</a>: <a href="#21277" title="T">T</a>): <a href="#21277" title="T">T</a> = {
    <span class="keyword">var</span> <a title="Int" id="174255">h</a> = <a href="#112916" title="(x: Int)Int">index</a>(<a href="#174250" title="T">x</a>.<span title="()Int">hashCode</span>())
    <span class="keyword">var</span> <a title="AnyRef" id="174256">entry</a> = <a href="#112913" title="(i: Int)AnyRef">table</a>(<a href="#174255" title="Int">h</a>)
    <span title="Unit" class="keyword">while</span> (<span title="(x$1: Boolean)Boolean">(</span><a href="#174256" title="(x$1: AnyRef)Boolean">entry</a> ne <span title="Null(null)" class="keyword">null</span>) &amp;&amp; <a href="#174256" title="(x$1: AnyRef)Boolean" id="6540">entry</a> != <a href="#174250" title="T">x</a>) <a href="#174257" title="()Unit">{</a>
      <a href="#174255" title="Int">h</a> = <a href="#112916" title="(x: Int)Int">index</a>(<a href="#174255" title="(x$1: Int)Int">h</a> + <span title="Int(1)" class="int">1</span>)
      <a href="#174256" title="AnyRef">entry</a> = <a href="#112913" title="(i: Int)AnyRef">table</a>(<a href="#174255" title="Int">h</a>)
    }
    <a href="#174256" title="AnyRef">entry</a>.<span title="[T0]T0">asInstanceOf</span><span title="T">[</span><a href="#21277" title="T">T</a>]
  }

  <span class="keyword">def</span> <a title="(x: T)Unit" id="112918">addEntry</a>(<a title="T" id="113562">x</a>: <a href="#21277" title="T">T</a>) {
    <span class="keyword">var</span> <a title="Int" id="174319">h</a> = <a href="#112916" title="(x: Int)Int">index</a>(<a href="#113562" title="T">x</a>.<span title="()Int">hashCode</span>())
    <span class="keyword">var</span> <a title="AnyRef" id="174320">entry</a> = <a href="#112913" title="(i: Int)AnyRef">table</a>(<a href="#174319" title="Int">h</a>)
    <span title="Unit" class="keyword">while</span> (<a href="#174320" title="(x$1: AnyRef)Boolean">entry</a> ne <span title="Null(null)" class="keyword">null</span>) <a href="#174321" title="()Unit">{</a>
      <span title="Unit" class="keyword">if</span> (<a href="#174320" title="(x$1: AnyRef)Boolean" id="3626">entry</a> == <a href="#113562" title="T">x</a>) <span title="Nothing" class="keyword">return</span>
      <a href="#174319" title="Int">h</a> = <a href="#112916" title="(x: Int)Int">index</a>((<a href="#174319" title="(x$1: Int)Int">h</a> + <span title="Int(1)" class="int">1</span>))
      <a href="#174320" title="AnyRef">entry</a> = <a href="#112913" title="(i: Int)AnyRef">table</a>(<a href="#174319" title="Int">h</a>)
    }
    <a href="#112913" title="(i: Int,x: AnyRef)Unit" id="24572">table</a>(<a href="#174319" title="Int">h</a>) = <a href="#113562" title="T">x</a>
    <a href="#112910" title="(x$1: Int)Unit">used</a> += <span title="Int(1)" class="int">1</span>
    <span title="Unit" class="keyword">if</span> (<a href="#112910" title="(x$1: Int)Boolean" id="2962">used</a> &gt;= (<a href="#112907" title="(x$1: Int)Int" id="2861">capacity</a> &gt;&gt; <span title="Int(2)" class="int">2</span>)) <a href="#112920" title="()Unit">growTable</a>()
  }

  <span class="keyword">def</span> <a title="=&gt; &lt;refinement&gt; extends java.lang.Object with Iterator[T]" id="112919">iterator</a> = <a href="#174450" title="java.lang.Object with Iterator[T]{ ... }" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with Iterator[T]" id="174450">Iterator</a>[T] {
    <span class="keyword">private</span> <span class="keyword">var</span> <a title="Int" id="174453">i</a> = <span title="Int(0)" class="int">0</span>
    <span class="keyword">def</span> <a title="=&gt; Boolean" id="174455">hasNext</a>: <a title="Boolean" id="1951">Boolean</a> = {
      <span title="Unit" class="keyword">while</span> (<a href="#174453" title="(x$1: Int)Boolean">i</a> <span title="(x$1: Boolean)Boolean">&lt;</span> <a href="#112907" title="=&gt; Int">capacity</a> &amp;&amp; (<a href="#112913" title="(i: Int)AnyRef">table</a><a title="(x$1: AnyRef)Boolean" id="6542">(</a><a href="#174453" title="=&gt; Int">i</a>) eq <span title="Null(null)" class="keyword">null</span>)) <a href="#174453" title="(x$1: Int)Unit">i</a> <a href="#174464" title="()Unit">+=</a> <span title="Int(1)" class="int">1</span>
      <a href="#174453" title="(x$1: Int)Boolean">i</a> &lt; <a href="#112907" title="=&gt; Int">capacity</a>
    }
    <span class="keyword">def</span> <a title="()T" id="174456">next</a>: <a href="#21277" title="T">T</a> =
      <span title="T" class="keyword">if</span> (<a href="#174455" title="=&gt; Boolean">hasNext</a>) { <a href="#174453" title="(x$1: Int)Unit">i</a> += <span title="Int(1)" class="int">1</span>; <a href="#112913" title="(i: Int)AnyRef">table</a>(<a href="#174453" title="(x$1: Int)Int" id="2966">i</a> - <span title="Int(1)" class="int">1</span>).<span title="[T0]T0">asInstanceOf</span><span title="T">[</span><a href="#21277" title="T">T</a>] }
      <span class="keyword">else</span> <span title="Null(null)" class="keyword">null</span>
  }

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="()Unit" id="112920">growTable</a>() {
    <span class="keyword">val</span> <a title="Array[AnyRef]" id="174608">oldtable</a> = <a href="#112913" title="=&gt; Array[AnyRef]">table</a>
    <a href="#112907" title="(x$1: Int)Unit" id="2968">capacity</a> *= <span title="Int(2)" class="int">2</span>
    <a href="#112913" title="(x$1: Array[AnyRef])Unit">table</a> = <span title="Array[AnyRef]" class="keyword">new</span> <span title="Array[AnyRef]">Array</span>[AnyRef](<a href="#112907" title="=&gt; Int">capacity</a>)
    <span class="keyword">var</span> <a title="Int" id="174609">i</a> = <span title="Int(0)" class="int">0</span>
    <span title="Unit" class="keyword">while</span> (<a href="#174609" title="(x$1: Int)Boolean">i</a> &lt; <a href="#174608" title="Array[AnyRef]">oldtable</a>.<a title="=&gt; Int" id="24569">length</a>) <a href="#174648" title="()Unit">{</a>
      <span class="keyword">val</span> <a title="AnyRef" id="174655">entry</a> = <a href="#174608" title="(i: Int)AnyRef">oldtable</a>(<a href="#174609" title="Int">i</a>)
      <span title="Unit" class="keyword">if</span> (<a href="#174655" title="(x$1: AnyRef)Boolean">entry</a> ne <span title="Null(null)" class="keyword">null</span>) <a href="#112918" title="(x: T)Unit">addEntry</a>(<a href="#174655" title="AnyRef">entry</a>.<span title="[T0]T0">asInstanceOf</span><span title="T">[</span><a href="#21277" title="T">T</a>])
      <a href="#174609" title="Int">i</a> += <span title="Int(1)" class="int">1</span>
    }
  }
}

        </pre>
    </body>
</html>