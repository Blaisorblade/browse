<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/util/HashSet.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style">
    </head>
    <body>
        <pre>
/* NSC -- new Scala compiler
 * Copyright 2005-2009 LAMP/EPFL
 * @author  Martin Odersky
 */
// $Id: HashSet.scala 18387 2009-07-24 15:28:37Z odersky $

<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> util

<span class="keyword">class</span> <a title="class HashSet[T &gt;: Null &lt;: AnyRef] extends scala.tools.nsc.util.Set[T] with ScalaObject" id="14599">HashSet</a>[<a title="&gt;: Null &lt;: AnyRef" id="21419">T</a> &gt;: Null &lt;: <a id="1">AnyRef</a>]<a title="ScalaObject" id="977">(</a><a title="Int" id="113397">initialCapacity</a>: <span title="Int">Int</span>) <span class="keyword">extends</span> <a href="Set.scala.html#14608" title="scala.tools.nsc.util.Set[T]">Set</a>[T] {

  <span class="keyword">def</span> <a title="()scala.tools.nsc.util.HashSet[T]" id="113379" class="keyword">this</a>() = <a href="#14599" title="HashSet.this.type" class="keyword">this</a>(<span title="Int(16)" class="int">16</span>)

  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Int" id="113381">capacity</a> = <a href="#113397" title="Int">initialCapacity</a>
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Int" id="113384">used</a> = <span title="Int(0)" class="int">0</span>
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Array[AnyRef]" id="113387">table</a> = <span title="Array[AnyRef]" class="keyword">new</span> <span title="Array[AnyRef]">Array</span>[AnyRef](<a href="#113381" title="=&gt; Int">capacity</a>)

  <span class="keyword">def</span> <a title="=&gt; Int" id="113389">size</a>: <span title="Int">Int</span> = <a href="#113384" title="=&gt; Int">used</a>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(x: Int)Int" id="113390">index</a>(<a title="Int" id="174959">x</a>: <span title="Int">Int</span>): <span title="Int">Int</span> = <a title="object Math" id="537">Math</a>.<a title="(x: Int)Int" id="69862">abs</a>(<a href="#174959" title="(x$1: Int)Int" id="2993">x</a> % <a href="#113381" title="=&gt; Int">capacity</a>)

  <span class="keyword">def</span> <a title="(x: T)T" id="113391">findEntry</a>(<a title="T" id="174998">x</a>: <a href="#21419" title="T">T</a>): <a href="#21419" title="T">T</a> = {
    <span class="keyword">var</span> <a title="Int" id="175003">h</a> = <a href="#113390" title="(x: Int)Int">index</a>(<a href="#174998" title="T">x</a>.<span title="()Int">hashCode</span>())
    <span class="keyword">var</span> <a title="AnyRef" id="175004">entry</a> = <a href="#113387" title="(i: Int)AnyRef">table</a>(<a href="#175003" title="Int">h</a>)
    <span title="Unit" class="keyword">while</span> (<span title="(x$1: Boolean)Boolean">(</span><a href="#175004" title="(x$1: AnyRef)Boolean">entry</a> ne <span title="Null(null)" class="keyword">null</span>) &amp;&amp; <a href="#175004" title="(x$1: AnyRef)Boolean" id="6609">entry</a> != <a href="#174998" title="T">x</a>) <a href="#175005" title="()Unit">{</a>
      <a href="#175003" title="Int">h</a> = <a href="#113390" title="(x: Int)Int">index</a>(<a href="#175003" title="(x$1: Int)Int">h</a> + <span title="Int(1)" class="int">1</span>)
      <a href="#175004" title="AnyRef">entry</a> = <a href="#113387" title="(i: Int)AnyRef">table</a>(<a href="#175003" title="Int">h</a>)
    }
    <a href="#175004" title="AnyRef">entry</a>.<span title="[T0]T0">asInstanceOf</span><span title="T">[</span><a href="#21419" title="T">T</a>]
  }

  <span class="keyword">def</span> <a title="(x: T)Unit" id="113392">addEntry</a>(<a title="T" id="114036">x</a>: <a href="#21419" title="T">T</a>) {
    <span class="keyword">var</span> <a title="Int" id="175067">h</a> = <a href="#113390" title="(x: Int)Int">index</a>(<a href="#114036" title="T">x</a>.<span title="()Int">hashCode</span>())
    <span class="keyword">var</span> <a title="AnyRef" id="175068">entry</a> = <a href="#113387" title="(i: Int)AnyRef">table</a>(<a href="#175067" title="Int">h</a>)
    <span title="Unit" class="keyword">while</span> (<a href="#175068" title="(x$1: AnyRef)Boolean">entry</a> ne <span title="Null(null)" class="keyword">null</span>) <a href="#175069" title="()Unit">{</a>
      <span title="Unit" class="keyword">if</span> (<a href="#175068" title="(x$1: AnyRef)Boolean" id="3647">entry</a> == <a href="#114036" title="T">x</a>) <span title="Nothing" class="keyword">return</span>
      <a href="#175067" title="Int">h</a> = <a href="#113390" title="(x: Int)Int">index</a>((<a href="#175067" title="(x$1: Int)Int">h</a> + <span title="Int(1)" class="int">1</span>))
      <a href="#175068" title="AnyRef">entry</a> = <a href="#113387" title="(i: Int)AnyRef">table</a>(<a href="#175067" title="Int">h</a>)
    }
    <a href="#113387" title="(i: Int,x: AnyRef)Unit" id="24731">table</a>(<a href="#175067" title="Int">h</a>) = <a href="#114036" title="T">x</a>
    <a href="#113384" title="(x$1: Int)Unit">used</a> += <span title="Int(1)" class="int">1</span>
    <span title="Unit" class="keyword">if</span> (<a href="#113384" title="(x$1: Int)Boolean" id="2983">used</a> &gt;= (<a href="#113381" title="(x$1: Int)Int" id="2882">capacity</a> &gt;&gt; <span title="Int(2)" class="int">2</span>)) <a href="#113394" title="()Unit">growTable</a>()
  }

  <span class="keyword">def</span> <a title="=&gt; &lt;refinement&gt; extends java.lang.Object with Iterator[T]" id="113393">iterator</a> = <a href="#175198" title="java.lang.Object with Iterator[T]{ ... }" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with Iterator[T]" id="175198">Iterator</a>[T] {
    <span class="keyword">private</span> <span class="keyword">var</span> <a title="Int" id="175201">i</a> = <span title="Int(0)" class="int">0</span>
    <span class="keyword">def</span> <a title="=&gt; Boolean" id="175203">hasNext</a>: <a title="Boolean" id="1972">Boolean</a> = {
      <span title="Unit" class="keyword">while</span> (<a href="#175201" title="(x$1: Int)Boolean">i</a> <span title="(x$1: Boolean)Boolean">&lt;</span> <a href="#113381" title="=&gt; Int">capacity</a> &amp;&amp; (<a href="#113387" title="(i: Int)AnyRef">table</a><a title="(x$1: AnyRef)Boolean" id="6611">(</a><a href="#175201" title="=&gt; Int">i</a>) eq <span title="Null(null)" class="keyword">null</span>)) <a href="#175201" title="(x$1: Int)Unit">i</a> <a href="#175212" title="()Unit">+=</a> <span title="Int(1)" class="int">1</span>
      <a href="#175201" title="(x$1: Int)Boolean">i</a> &lt; <a href="#113381" title="=&gt; Int">capacity</a>
    }
    <span class="keyword">def</span> <a title="()T" id="175204">next</a>: <a href="#21419" title="T">T</a> =
      <span title="T" class="keyword">if</span> (<a href="#175203" title="=&gt; Boolean">hasNext</a>) { <a href="#175201" title="(x$1: Int)Unit">i</a> += <span title="Int(1)" class="int">1</span>; <a href="#113387" title="(i: Int)AnyRef">table</a>(<a href="#175201" title="(x$1: Int)Int" id="2987">i</a> - <span title="Int(1)" class="int">1</span>).<span title="[T0]T0">asInstanceOf</span><span title="T">[</span><a href="#21419" title="T">T</a>] }
      <span class="keyword">else</span> <span title="Null(null)" class="keyword">null</span>
  }

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="()Unit" id="113394">growTable</a>() {
    <span class="keyword">val</span> <a title="Array[AnyRef]" id="175356">oldtable</a> = <a href="#113387" title="=&gt; Array[AnyRef]">table</a>
    <a href="#113381" title="(x$1: Int)Unit" id="2989">capacity</a> *= <span title="Int(2)" class="int">2</span>
    <a href="#113387" title="(x$1: Array[AnyRef])Unit">table</a> = <span title="Array[AnyRef]" class="keyword">new</span> <span title="Array[AnyRef]">Array</span>[AnyRef](<a href="#113381" title="=&gt; Int">capacity</a>)
    <span class="keyword">var</span> <a title="Int" id="175357">i</a> = <span title="Int(0)" class="int">0</span>
    <span title="Unit" class="keyword">while</span> (<a href="#175357" title="(x$1: Int)Boolean">i</a> &lt; <a href="#175356" title="Array[AnyRef]">oldtable</a>.<a title="=&gt; Int" id="24728">length</a>) <a href="#175396" title="()Unit">{</a>
      <span class="keyword">val</span> <a title="AnyRef" id="175403">entry</a> = <a href="#175356" title="(i: Int)AnyRef">oldtable</a>(<a href="#175357" title="Int">i</a>)
      <span title="Unit" class="keyword">if</span> (<a href="#175403" title="(x$1: AnyRef)Boolean">entry</a> ne <span title="Null(null)" class="keyword">null</span>) <a href="#113392" title="(x: T)Unit">addEntry</a>(<a href="#175403" title="AnyRef">entry</a>.<span title="[T0]T0">asInstanceOf</span><span title="T">[</span><a href="#21419" title="T">T</a>])
      <a href="#175357" title="Int">i</a> += <span title="Int(1)" class="int">1</span>
    }
  }
}

        </pre>
    </body>
</html>