<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/util/SourceFile.scala</title>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style">
    </head>
    <body onload="initializeLinked()">
        <pre>
<span class="comment">/* NSC -- new Scala compiler
 * Copyright 2005-2009 LAMP/EPFL
 * @author  Martin Odersky
 */</span>

<span class="comment">// $Id: SourceFile.scala 17238 2009-03-04 18:07:36Z extempore $</span>

<span class="keyword">package</span> scala.tools.nsc.util
<span class="keyword">import</span> scala.tools.nsc.io.{AbstractFile, VirtualFile}

<span class="keyword">object</span> <span class="typed"><span class="type">object scala.tools.nsc.util.SourceFile</span><a id="8484">SourceFile</a></span> {
  <span class="comment">// Be very careful touching these.</span>
  <span class="comment">// Apparently trivial changes to the way you write these constants </span>
  <span class="comment">// will cause Scanners.scala to go from a nice efficient switch to </span>
  <span class="comment">// a ghastly nested if statement which will bring the type checker</span>
  <span class="comment">// to its knees. See ticket #1456</span>
  <span class="keyword">final</span> <span class="keyword">val</span> <span class="typed"><span class="type">Char('\012')</span><span id="22700"><a id="22699">LF</a></span></span> = <span class="typed"><span class="type">Char('\012')</span><span class="char">'\u000A'</span></span>
  <span class="keyword">final</span> <span class="keyword">val</span> <span class="typed"><span class="type">Char('\014')</span><span id="22702"><a id="22701">FF</a></span></span> = <span class="typed"><span class="type">Char('\014')</span><span class="char">'\u000C'</span></span>
  <span class="keyword">final</span> <span class="keyword">val</span> <span class="typed"><span class="type">Char('\015')</span><span id="22704"><a id="22703">CR</a></span></span> = <span class="typed"><span class="type">Char('\015')</span><span class="char">'\u000D'</span></span>
  <span class="keyword">final</span> <span class="keyword">val</span> <span class="typed"><span class="type">Char('\032')</span><span id="22706"><a id="22705">SU</a></span></span> = <span class="typed"><span class="type">Char('\032')</span><span class="char">'\u001A'</span></span>

  <span class="keyword">def</span> <span class="typed"><span class="type">(Int)Boolean</span><a id="22707">isLineBreak</a></span>(<span class="typed"><span class="type">Int</span><a id="140594">c</a></span>: <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span>) = <span class="typed"><span class="type">Int</span><a href="#140594">c</a></span> <span class="typed"><span class="type">Boolean</span><span class="keyword">match</span></span> {
  <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">case</span></span> <span class="typed"><span class="type">=&gt; Char('\012')</span><a href="#22699">LF</a></span>|<span class="typed"><span class="type">=&gt; Char('\014')</span><a href="#22701">FF</a></span>|<span class="typed"><span class="type">=&gt; Char('\015')</span><a href="#22703">CR</a></span>|<span class="typed"><span class="type">=&gt; Char('\032')</span><a href="#22705">SU</a></span> =&gt; <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>
  <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">case</span></span> _ =&gt; <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>
  }
}
<span class="comment">/** abstract base class of a source file used in the compiler */</span>
<span class="keyword">abstract</span> <span class="keyword">class</span> <span class="typed"><span class="type">class SourceFile extends java.lang.Object with ScalaObject</span><a id="8483">SourceFile</a></span> {
  <span class="keyword">import</span> SourceFile._
  <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; RandomAccessSeq[Char]</span><a id="22649">content</a></span> : <span class="typed"><span class="type">RandomAccessSeq[Char]</span><a id="667">RandomAccessSeq</a></span>[Char] <span class="comment">// normalized, must end in SU</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; scala.tools.nsc.io.AbstractFile</span><a id="22650">file</a></span>    : <span class="typed"><span class="type">scala.tools.nsc.io.AbstractFile</span><a href="../io/AbstractFile.scala.html#12693">AbstractFile</a></span>
  <span class="keyword">def</span> <span class="typed"><span class="type">(Int)Boolean</span><a id="22651">isLineBreak</a></span>(<span class="typed"><span class="type">Int</span><a id="140597">idx</a></span> : <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span>) : <span class="typed"><span class="type">Boolean</span><a id="2170">Boolean</a></span>
  <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Int</span><a id="22652">length</a></span> : <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span>
  <span class="keyword">def</span> <span class="typed"><span class="type">(Int)scala.tools.nsc.util.Position</span><a id="22653">position</a></span>(<span class="typed"><span class="type">Int</span><a id="95592">offset</a></span>: <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span>) : <span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a href="Position.scala.html#8480">Position</a></span> = {
    <span class="typed"><span class="type">(Boolean)Unit</span><span id="6003"><a id="821">assert</a></span></span>(<span class="typed"><span class="type">Int</span><a href="#95592">offset</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&lt;</a></span> <span class="typed"><span class="type">=&gt; Int</span><a href="#22652">length</a></span>)
    <span class="typed"><span class="type">scala.tools.nsc.util.OffsetPosition</span><span class="keyword">new</span></span> <span class="typed"><span class="type">scala.tools.nsc.util.OffsetPosition</span><a href="Position.scala.html#8327">OffsetPosition</a></span>(<span class="typed"><span class="type">scala.tools.nsc.util.SourceFile</span><a href="#8483" class="keyword">this</a></span>, <span class="typed"><span class="type">Int</span><a href="#95592">offset</a></span>)
  }
  <span class="keyword">def</span> <span class="typed"><span class="type">(Int,Int)scala.tools.nsc.util.Position</span><a id="22654">position</a></span>(<span class="typed"><span class="type">Int</span><a id="95590">line</a></span>: <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span>, <span class="typed"><span class="type">Int</span><a id="95591">column</a></span>: <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span>) : <span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a href="Position.scala.html#8480">Position</a></span> = <span class="typed"><span class="type">scala.tools.nsc.util.OffsetPosition</span><span class="keyword">new</span></span> <span class="typed"><span class="type">scala.tools.nsc.util.OffsetPosition</span><a href="Position.scala.html#8327">OffsetPosition</a></span>(<span class="typed"><span class="type">scala.tools.nsc.util.SourceFile</span><a href="#8483" class="keyword">this</a></span>, <span class="typed"><span class="type">(Int)Int</span><a href="#22656">lineToOffset</a></span>(<span class="typed"><span class="type">Int</span><a href="#95590">line</a></span>) <span class="typed"><span class="type">(Int)Int</span><a id="3147">+</a></span> <span class="typed"><span class="type">Int</span><a href="#95591">column</a></span>)
  <span class="keyword">def</span> <span class="typed"><span class="type">(Int)Int</span><a id="22655">offsetToLine</a></span>(<span class="typed"><span class="type">Int</span><a id="139488">offset</a></span>: <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span>): <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span> 
  <span class="keyword">def</span> <span class="typed"><span class="type">(Int)Int</span><a id="22656">lineToOffset</a></span>(<span class="typed"><span class="type">Int</span><a id="139525">index</a></span> : <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span>): <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span>
  <span class="comment">/** Map a position to a position in the underlying source file.
   *  For regular source files, simply return the argument.
   */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">(scala.tools.nsc.util.Position)scala.tools.nsc.util.Position</span><a id="22657">positionInUltimateSource</a></span>(<span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a id="60063">position</a></span>: <span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a href="Position.scala.html#8480">Position</a></span>) = <span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a href="#60063">position</a></span>
  <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">()String</span><a id="22658">toString</a></span>(): <span class="typed"><span class="type">String</span><a id="1861">String</a></span> = <span class="typed"><span class="type">=&gt; scala.tools.nsc.io.AbstractFile</span><a href="#22650">file</a></span>.<span class="typed"><span class="type">=&gt; String</span><a href="../io/AbstractFile.scala.html#25439">name</a></span> <span class="comment">/* + &quot;:&quot; + content.length */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">(Int)java.lang.String</span><a id="22659">dbg</a></span>(<span class="typed"><span class="type">Int</span><a id="82320">offset</a></span>: <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span>) = (<span class="typed"><span class="type">scala.tools.nsc.util.OffsetPosition</span><span class="keyword">new</span></span> <span class="typed"><span class="type">scala.tools.nsc.util.OffsetPosition</span><a href="Position.scala.html#8327">OffsetPosition</a></span>(<span class="typed"><span class="type">scala.tools.nsc.util.SourceFile</span><a href="#8483" class="keyword">this</a></span>, <span class="typed"><span class="type">Int</span><a href="#82320">offset</a></span>)).<span class="typed"><span class="type">=&gt; java.lang.String</span><a href="Position.scala.html#25347">dbgString</a></span>
  <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; String</span><a id="22660">path</a></span> = <span class="typed"><span class="type">=&gt; scala.tools.nsc.io.AbstractFile</span><a href="#22650">file</a></span>.<span class="typed"><span class="type">=&gt; String</span><a href="../io/AbstractFile.scala.html#25440">path</a></span>

  <span class="keyword">def</span> <span class="typed"><span class="type">(Int,String)Boolean</span><a id="22661">beginsWith</a></span>(<span class="typed"><span class="type">Int</span><a id="22712">offset</a></span>: <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span>, <span class="typed"><span class="type">String</span><a id="22713">text</a></span>: <span class="typed"><span class="type">String</span><a id="1861">String</a></span>): <span class="typed"><span class="type">Boolean</span><a id="2170">Boolean</a></span>
  <span class="keyword">def</span> <span class="typed"><span class="type">(Int)Int</span><a id="22662">skipWhitespace</a></span>(<span class="typed"><span class="type">Int</span><a id="27192">offset</a></span>: <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span>): <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span>
  <span class="keyword">def</span> <span class="typed"><span class="type">(Int)String</span><a id="22663">lineToString</a></span>(<span class="typed"><span class="type">Int</span><a id="139613">index</a></span>: <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span>): <span class="typed"><span class="type">String</span><a id="1861">String</a></span>
  
  <span class="keyword">def</span> <span class="typed"><span class="type">(scala.tools.nsc.util.Position,scala.tools.nsc.Global)Option[String]</span><a id="22664">identifier</a></span>(<span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a id="26896">pos</a></span> : <span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a href="Position.scala.html#8480">Position</a></span>, <span class="typed"><span class="type">scala.tools.nsc.Global</span><a id="26897">compiler</a></span>  : scala.tools.nsc.<span class="typed"><span class="type">scala.tools.nsc.Global</span><a href="../Global.scala.html#6489">Global</a></span>) : <span class="typed"><span class="type">Option[String]</span><a id="934">Option</a></span>[String] = <span class="typed"><span class="type">object None</span><a id="536">None</a></span>
  
}
<span class="comment">/** a file whose contents do not change over time */</span>
<span class="keyword">class</span> <span class="typed"><span class="type">class BatchSourceFile extends scala.tools.nsc.util.SourceFile with ScalaObject</span><a id="8435">BatchSourceFile</a></span>(<span class="keyword">val</span> <span class="typed"><span class="type">scala.tools.nsc.io.AbstractFile</span><span id="22668"><span id="22667"><a id="82419">file</a></span></span></span> : <span class="typed"><span class="type">scala.tools.nsc.io.AbstractFile</span><a href="../io/AbstractFile.scala.html#12693">AbstractFile</a></span>, <span class="typed"><span class="type">Array[Char]</span><span id="22669"><a id="82420">_content</a></span></span> : <span class="typed"><span class="type">Array[Char]</span><a id="1072">Array</a></span>[Char]) <span class="keyword">extends</span> <span class="typed"><span class="type">scala.tools.nsc.util.SourceFile</span><a href="#8483">SourceFile</a></span> {
  <span class="keyword">import</span> SourceFile._
  <span class="keyword">def</span> <span class="typed"><span class="type">(scala.tools.nsc.io.AbstractFile)scala.tools.nsc.util.BatchSourceFile</span><a id="22672" class="keyword">this</a></span>(<span class="typed"><span class="type">scala.tools.nsc.io.AbstractFile</span><a id="82410">_file</a></span>: <span class="typed"><span class="type">scala.tools.nsc.io.AbstractFile</span><a href="../io/AbstractFile.scala.html#12693">AbstractFile</a></span>)                 = <span class="typed"><span class="type">BatchSourceFile.this.type</span><a href="#8435" class="keyword">this</a></span>(<span class="typed"><span class="type">scala.tools.nsc.io.AbstractFile</span><a href="#82410">_file</a></span>, <span class="typed"><span class="type">scala.tools.nsc.io.AbstractFile</span><a href="#82410">_file</a></span>.<span class="typed"><span class="type">=&gt; Array[Char]</span><a href="../io/AbstractFile.scala.html#25448">toCharArray</a></span>)
  <span class="keyword">def</span> <span class="typed"><span class="type">(String,Seq[Char])scala.tools.nsc.util.BatchSourceFile</span><a id="22673" class="keyword">this</a></span>(<span class="typed"><span class="type">String</span><a id="82408">sourceName</a></span>: <span class="typed"><span class="type">String</span><a id="1861">String</a></span>, <span class="typed"><span class="type">Seq[Char]</span><a id="82409">cs</a></span>: <span class="typed"><span class="type">Seq[Char]</span><a id="763">Seq</a></span>[Char])   = <span class="typed"><span class="type">BatchSourceFile.this.type</span><a href="#8435" class="keyword">this</a></span>(<span class="typed"><span class="type">(String)scala.tools.nsc.io.VirtualFile</span><a href="../io/VirtualFile.scala.html#41007" class="keyword">new</a></span> <span class="typed"><span class="type">scala.tools.nsc.io.VirtualFile</span><a href="../io/VirtualFile.scala.html#12744">VirtualFile</a></span>(<span class="typed"><span class="type">String</span><a href="#82408">sourceName</a></span>), <span class="typed"><span class="type">Seq[Char]</span><a href="#82409">cs</a></span>.<span class="typed"><span class="type">Array[Char]</span><a id="21675">toArray</a></span>)
  <span class="keyword">def</span> <span class="typed"><span class="type">(scala.tools.nsc.io.AbstractFile,Seq[Char])scala.tools.nsc.util.BatchSourceFile</span><a id="22674" class="keyword">this</a></span>(<span class="typed"><span class="type">scala.tools.nsc.io.AbstractFile</span><a id="82406">_file</a></span>: <span class="typed"><span class="type">scala.tools.nsc.io.AbstractFile</span><a href="../io/AbstractFile.scala.html#12693">AbstractFile</a></span>, <span class="typed"><span class="type">Seq[Char]</span><a id="82407">cs</a></span>: <span class="typed"><span class="type">Seq[Char]</span><a id="763">Seq</a></span>[Char])  = <span class="typed"><span class="type">BatchSourceFile.this.type</span><a href="#8435" class="keyword">this</a></span>(<span class="typed"><span class="type">scala.tools.nsc.io.AbstractFile</span><a href="#82406">_file</a></span>, <span class="typed"><span class="type">Seq[Char]</span><a href="#82407">cs</a></span>.<span class="typed"><span class="type">Array[Char]</span><a id="21675">toArray</a></span>)
    
  <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">(Any)Boolean</span><a id="22675">equals</a></span>(<span class="typed"><span class="type">Any</span><a id="140669">that</a></span> : <span class="typed"><span class="type">Any</span><a id="51">Any</a></span>) = <span class="typed"><span class="type">Any</span><a href="#140669">that</a></span> <span class="typed"><span class="type">Boolean</span><span class="keyword">match</span></span> {
    <span class="typed"><span class="type">Boolean</span><span class="keyword">case</span></span> <span class="typed"><span class="type">scala.tools.nsc.util.BatchSourceFile</span><a id="140671">that</a></span> : <span class="typed"><span class="type">scala.tools.nsc.util.BatchSourceFile</span><a href="#8435">BatchSourceFile</a></span> =&gt; <span class="typed"><span class="type">=&gt; scala.tools.nsc.io.AbstractFile</span><a href="#22667">file</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">scala.tools.nsc.util.BatchSourceFile</span><a href="#140671">that</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.io.AbstractFile</span><a href="#22667">file</a></span>
    <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">case</span></span> _ =&gt; <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>
  }
  <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">()Int</span><a id="22676">hashCode</a></span> = <span class="typed"><span class="type">=&gt; scala.tools.nsc.io.AbstractFile</span><a href="#22667">file</a></span>.<span class="typed"><span class="type">()Int</span><a id="5782">hashCode</a></span>
    
  <span class="keyword">val</span> <span class="typed"><span class="type">Array[Char]</span><span id="22678"><a id="22677">content</a></span></span> = <span class="typed"><span class="type">Array[Char]</span><a href="#22669">_content</a></span>
  <span class="keyword">override</span> <span class="keyword">val</span> <span class="typed"><span class="type">Int</span><span id="22680"><a id="22679">length</a></span></span> = <span class="typed"><span class="type">=&gt; Array[Char]</span><a href="#22677">content</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21508">length</a></span>
  <span class="comment">// in SourceFileFragments, these are overridden to compensate during offset calculation</span>
  <span class="comment">// Invariant: length + start = underlyingLength</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Int</span><a id="22681">underlyingLength</a></span> = <span class="typed"><span class="type">=&gt; Int</span><a href="#22679">length</a></span>
  <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Int</span><a id="22682">start</a></span> = <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>

  <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">(scala.tools.nsc.util.Position,scala.tools.nsc.Global)Option[String]</span><a id="22683">identifier</a></span>(<span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a id="140679">pos</a></span> : <span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a href="Position.scala.html#8480">Position</a></span>, <span class="typed"><span class="type">scala.tools.nsc.Global</span><a id="140680">compiler</a></span> : scala.tools.nsc.<span class="typed"><span class="type">scala.tools.nsc.Global</span><a href="../Global.scala.html#6489">Global</a></span>) = <span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a href="#140679">pos</a></span> <span class="typed"><span class="type">Option[String]</span><span class="keyword">match</span></span> {
    <span class="typed"><span class="type">Option[String]</span><span class="keyword">case</span></span> <a id="1">OffsetPosition</a>(<span class="typed"><span class="type">scala.tools.nsc.util.SourceFile</span><a id="140682">source</a></span>,<span class="typed"><span class="type">Int</span><a id="140683">offset</a></span>) <span class="keyword">if</span> <span class="typed"><span class="type">scala.tools.nsc.util.SourceFile</span><a href="#140682">source</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">scala.tools.nsc.util.BatchSourceFile</span><a href="#8435" class="keyword">this</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">Int</span><a href="#140683">offset</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3142">!=</a></span> -<span class="typed"><span class="type">Int(-1)</span><span class="int">1</span></span> =&gt;  
      <span class="keyword">import</span> java.lang.Character
      <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="140687">i</a></span> = <span class="typed"><span class="type">Int</span><a href="#140683">offset</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">+</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
      <span class="typed"><span class="type">Unit</span><a href="#140688" class="keyword">while</a></span> (<span class="typed"><span class="type">Int</span><a href="#140687">i</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&lt;</a></span> <span class="typed"><span class="type">=&gt; Array[Char]</span><a href="#22677">content</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21508">length</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> 
             (<span class="typed"><span class="type">scala.tools.nsc.Global</span><a href="#140680">compiler</a></span>.<span class="typed"><span class="type">object compiler.syntaxAnalyzer</span><a href="../Global.scala.html#21237">syntaxAnalyzer</a></span>.<span class="typed"><span class="type">(Char)Boolean</span><a href="../ast/parser/NewScanners.scala.html#38712">isOperatorPart</a></span>(<span class="typed"><span class="type">(Int)Char</span><a href="#22677" id="21509">content</a></span>(<span class="typed"><span class="type">Int</span><a href="#140687">i</a></span>)) <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2750">||</a></span>
              <span class="typed"><span class="type">scala.tools.nsc.Global</span><a href="#140680">compiler</a></span>.<span class="typed"><span class="type">object compiler.syntaxAnalyzer</span><a href="../Global.scala.html#21237">syntaxAnalyzer</a></span>.<span class="typed"><span class="type">(Char)Boolean</span><a href="../ast/parser/NewScanners.scala.html#38711">isIdentifierPart</a></span>(<span class="typed"><span class="type">(Int)Char</span><a href="#22677" id="21509">content</a></span>(<span class="typed"><span class="type">Int</span><a href="#140687">i</a></span>)))) <span class="typed"><span class="type">Int</span><a href="#140687">i</a></span> = <span class="typed"><span class="type">Int</span><a href="#140687">i</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">+</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
    
      <span class="typed"><span class="type">(Boolean)Unit</span><span id="6003"><a id="821">assert</a></span></span>(<span class="typed"><span class="type">Int</span><a href="#140687">i</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3145">&gt;</a></span> <span class="typed"><span class="type">Int</span><a href="#140683">offset</a></span>)
      <span class="typed"><span class="type">Option[String]</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#140687">i</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3144">&lt;=</a></span> <span class="typed"><span class="type">=&gt; Array[Char]</span><a href="#22677">content</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21508">length</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">Int</span><a href="#140683">offset</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3146">&gt;=</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>)
        <span class="typed"><span class="type">(java.lang.String)Some[java.lang.String]</span><span id="29737"><a id="308">Some</a></span></span>(<span class="typed"><span class="type">(Array[Char],Int,Int)java.lang.String</span><a id="5810" class="keyword">new</a></span> <span class="typed"><span class="type">java.lang.String</span><span id="5971"><a id="821">String</a></span></span>(<span class="typed"><span class="type">=&gt; Array[Char]</span><a href="#22677">content</a></span>, <span class="typed"><span class="type">Int</span><a href="#140683">offset</a></span>, <span class="typed"><span class="type">Int</span><a href="#140687">i</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3148">-</a></span> <span class="typed"><span class="type">Int</span><a href="#140683">offset</a></span>))
      <span class="keyword">else</span> <span class="typed"><span class="type">object None</span><a id="536">None</a></span>
  <span class="typed"><span class="type">Option[String]</span><span class="keyword">case</span></span> _ =&gt; <span class="keyword">super</span>.<span class="typed"><span class="type">(scala.tools.nsc.util.Position,scala.tools.nsc.Global)Option[String]</span><a href="#22664">identifier</a></span>(<span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a href="#140679">pos</a></span>, <span class="typed"><span class="type">scala.tools.nsc.Global</span><a href="#140680">compiler</a></span>)
  }
  
  <span class="keyword">def</span> <span class="typed"><span class="type">(Int)Boolean</span><a id="22684">isLineBreak</a></span>(<span class="typed"><span class="type">Int</span><a id="140774">idx</a></span>: <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span>) =
    <span class="typed"><span class="type">Boolean</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#140774">idx</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3146">&gt;=</a></span> <span class="typed"><span class="type">=&gt; Array[Char]</span><a href="#22677">content</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21508">length</a></span>) <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>
    <span class="keyword">else</span> <span class="typed"><span class="type">Boolean</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">object scala.tools.nsc.util.SourceFile</span><a href="#8484">SourceFile</a></span>.<span class="typed"><span class="type">(Int)Boolean</span><a href="#22707">isLineBreak</a></span>(<span class="typed"><span class="type">implicit scala.Predef.char2int : (Char)Int</span><span id="6208"><span id="821"><a href="#22677" id="21509">content</a></span></span></span>(<span class="typed"><span class="type">Int</span><a href="#140774">idx</a></span>))) <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>
    <span class="keyword">else</span> <span class="typed"><span class="type">Boolean</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">(Int)Char</span><a href="#22677" id="21509">content</a></span>(<span class="typed"><span class="type">Int</span><a href="#140774">idx</a></span>) <span class="typed"><span class="type">(Char)Boolean</span><a id="3018">==</a></span> <span class="typed"><span class="type">Char('\015')</span><span >CR</span></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">(Int)Char</span><a href="#22677" id="21509">content</a></span>(<span class="typed"><span class="type">Int</span><a href="#140774">idx</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">+</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>) <span class="typed"><span class="type">(Char)Boolean</span><a id="3018">==</a></span> <span class="typed"><span class="type">Char('\012')</span><span >LF</span></span>) <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>
    <span class="keyword">else</span> <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>
  
  <span class="keyword">def</span> <span class="typed"><span class="type">(Int,String)Boolean</span><a id="22685">beginsWith</a></span>(<span class="typed"><span class="type">Int</span><a id="22710">offset</a></span>: <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span>, <span class="typed"><span class="type">String</span><a id="22711">text</a></span>: <span class="typed"><span class="type">String</span><a id="1861">String</a></span>): <span class="typed"><span class="type">Boolean</span><a id="2170">Boolean</a></span> = {
    <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="140808">idx</a></span> = <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>
    <span class="typed"><span class="type">Unit</span><a href="#140809" class="keyword">while</a></span> (<span class="typed"><span class="type">Int</span><a href="#140808">idx</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&lt;</a></span> <span class="typed"><span class="type">String</span><a href="#22711">text</a></span>.<span class="typed"><span class="type">()Int</span><a id="5821">length</a></span>()) {
      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#22710">offset</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">+</a></span> <span class="typed"><span class="type">Int</span><a href="#140808">idx</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3146">&gt;=</a></span> <span class="typed"><span class="type">=&gt; Array[Char]</span><a href="#22677">content</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21508">length</a></span>) <span class="typed"><span class="type">Nothing</span><span class="keyword">return</span></span> <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>
      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">(Int)Char</span><a href="#22677" id="21509">content</a></span>(<span class="typed"><span class="type">Int</span><a href="#22710">offset</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">+</a></span> <span class="typed"><span class="type">Int</span><a href="#140808">idx</a></span>) <span class="typed"><span class="type">(Char)Boolean</span><a id="3019">!=</a></span> <span class="typed"><span class="type">String</span><a href="#22711">text</a></span>.<span class="typed"><span class="type">(Int)Char</span><a id="5822">charAt</a></span>(<span class="typed"><span class="type">Int</span><a href="#140808">idx</a></span>)) <span class="typed"><span class="type">Nothing</span><span class="keyword">return</span></span> <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>
      <span class="typed"><span class="type">Int</span><a href="#140808">idx</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">+=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
    }
    <span class="typed"><span class="type">Nothing</span><span class="keyword">return</span></span> <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>
  }
  <span class="keyword">def</span> <span class="typed"><span class="type">(Int)Int</span><a id="22686">skipWhitespace</a></span>(<span class="typed"><span class="type">Int</span><a id="140858">offset</a></span>: <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span>): <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span> =
    <span class="typed"><span class="type">Int</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">implicit scala.Predef.charWrapper : (Char)scala.runtime.RichChar</span><span id="6134"><span id="821"><a href="#22677" id="21509">content</a></span></span></span>(<span class="typed"><span class="type">Int</span><a href="#140858">offset</a></span>).<span class="typed"><span class="type">=&gt; Boolean</span><a id="27435">isWhitespace</a></span>) <span class="typed"><span class="type">(Int)Int</span><a href="#22686">skipWhitespace</a></span>(<span class="typed"><span class="type">Int</span><a href="#140858">offset</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">+</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>)
    <span class="keyword">else</span> <span class="typed"><span class="type">Int</span><a href="#140858">offset</a></span>

  <span class="keyword">def</span> <span class="typed"><span class="type">(Int)String</span><a id="22687">lineToString</a></span>(<span class="typed"><span class="type">Int</span><a id="140884">index</a></span>: <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span>): <span class="typed"><span class="type">String</span><a id="1861">String</a></span> = {
    <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="140885">offset</a></span> = <span class="typed"><span class="type">(Int)Int</span><a href="#22691">lineToOffset</a></span>(<span class="typed"><span class="type">Int</span><a href="#140884">index</a></span>)
    <span class="keyword">val</span> <span class="typed"><span class="type">StringBuilder</span><a id="140886">buf</a></span> = <span class="typed"><span class="type">()StringBuilder</span><a id="23671" class="keyword">new</a></span> <span class="typed"><span class="type">StringBuilder</span><a id="1435">StringBuilder</a></span>()
    <span class="typed"><span class="type">Unit</span><a href="#140887" class="keyword">while</a></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">(Int)Boolean</span><a href="#22684">isLineBreak</a></span>(<span class="typed"><span class="type">Int</span><a href="#140885">offset</a></span>) <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">Int</span><a href="#140885">offset</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&lt;</a></span> <span class="typed"><span class="type">=&gt; Array[Char]</span><a href="#22677">content</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21508">length</a></span>) {
      <span class="typed"><span class="type">StringBuilder</span><a href="#140886">buf</a></span>.<span class="typed"><span class="type">(Char)StringBuilder</span><a id="23697">append</a></span>(<span class="typed"><span class="type">(Int)Char</span><a href="#22677" id="21509">content</a></span>(<span class="typed"><span class="type">Int</span><a href="#140885">offset</a></span>))
      <span class="typed"><span class="type">Int</span><a href="#140885">offset</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">+=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
    }
    <span class="typed"><span class="type">StringBuilder</span><a href="#140886">buf</a></span>.<span class="typed"><span class="type">()String</span><a id="23723">toString</a></span>()
  }
  <span class="keyword">object</span> <span class="typed"><span class="type">object BatchSourceFile.this.line</span><a id="22688">line</a></span> {
    <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><span id="140923"><span id="140921"><span id="140922"><a id="140929">index</a></span></span></span></span>  = <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>
    <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><span id="140926"><span id="140924"><span id="140925"><a id="140930">offset</a></span></span></span></span> = <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>

    <span class="keyword">def</span> <span class="typed"><span class="type">(Int,Boolean)Int</span><a id="140927">find</a></span>(<span class="typed"><span class="type">Int</span><a id="140931">toFind</a></span>: <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span>, <span class="typed"><span class="type">Boolean</span><a id="140932">isIndex</a></span>: <span class="typed"><span class="type">Boolean</span><a id="2170">Boolean</a></span>): <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span> = {
      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#140931">toFind</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3141">==</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>) <span class="typed"><span class="type">Nothing</span><span class="keyword">return</span></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>
      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">Boolean</span><a href="#140932">isIndex</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> (<span class="typed"><span class="type">Int</span><a href="#140931">toFind</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3145">&gt;</a></span> <span class="typed"><span class="type">=&gt; Array[Char]</span><a href="#22677">content</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21508">length</a></span>)) {
        <span class="typed"><span class="type">Nothing</span><span class="keyword">throw</span></span> <span class="typed"><span class="type">(java.lang.String)java.lang.Error</span><a id="27228" class="keyword">new</a></span> <span class="typed"><span class="type">java.lang.Error</span><span id="5975"><a id="821">Error</a></span></span>(<span class="typed"><span class="type">Int</span><a href="#140931">toFind</a></span> <span class="typed"><span class="type">(java.lang.String)java.lang.String</span><a id="3089">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot; not valid offset in &quot;)</span><span class="string">&quot; not valid offset in &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span>
                        <span class="typed"><span class="type">=&gt; scala.tools.nsc.io.AbstractFile</span><a href="#22667">file</a></span>.<span class="typed"><span class="type">=&gt; String</span><a href="../io/AbstractFile.scala.html#25439">name</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;:&quot;)</span><span class="string">&quot;:&quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">=&gt; Array[Char]</span><a href="#22677">content</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21508">length</a></span>)
      }

      <span class="keyword">def</span> <span class="typed"><span class="type">(Boolean)Int</span><a id="140933">get</a></span>(<span class="typed"><span class="type">Boolean</span><a id="140943">isIndex</a></span> : <span class="typed"><span class="type">Boolean</span><a id="2170">Boolean</a></span>) = <span class="typed"><span class="type">Int</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Boolean</span><a href="#140943">isIndex</a></span>) <span class="typed"><span class="type">=&gt; Int</span><a href="#140921">index</a></span> <span class="keyword">else</span> <span class="typed"><span class="type">=&gt; Int</span><a href="#140924">offset</a></span>

      <span class="keyword">val</span> <span class="typed"><span class="type">Boolean</span><a id="140934">isBackward</a></span> = <span class="typed"><span class="type">Int</span><a href="#140931">toFind</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3144">&lt;=</a></span> <span class="typed"><span class="type">(Boolean)Int</span><a href="#140933">get</a></span>(<span class="typed"><span class="type">Boolean</span><a href="#140932">isIndex</a></span>)
      <span class="keyword">val</span> <span class="typed"><span class="type">Int</span><a id="140935">increment</a></span> = <span class="typed"><span class="type">Int</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Boolean</span><a href="#140934">isBackward</a></span>) -<span class="typed"><span class="type">Int(-1)</span><span class="int">1</span></span> <span class="keyword">else</span> <span class="typed"><span class="type">=&gt; Int</span><a id="3096">+</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
      <span class="keyword">val</span> <span class="typed"><span class="type">Int</span><a id="140936">oneIfBackward</a></span> = <span class="typed"><span class="type">Int</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Boolean</span><a href="#140934">isBackward</a></span>) <span class="typed"><span class="type">=&gt; Int</span><a id="3096">+</a></span><span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span> <span class="keyword">else</span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>

      <span class="typed"><span class="type">Unit</span><a href="#140937" class="keyword">while</a></span> (<span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>) {
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">Boolean</span><a href="#140932">isIndex</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">=&gt; Int</span><a href="#140924">offset</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3141">==</a></span> <span class="typed"><span class="type">Int</span><a href="#140931">toFind</a></span>) <span class="typed"><span class="type">Nothing</span><span class="keyword">return</span></span> <span class="typed"><span class="type">=&gt; Int</span><a href="#140921">index</a></span>;
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Boolean</span><a href="#140934">isBackward</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">=&gt; Int</span><a href="#140924">offset</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3144">&lt;=</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>)
          <span class="typed"><span class="type">Nothing</span><span class="keyword">throw</span></span> <span class="typed"><span class="type">(java.lang.String)java.lang.Error</span><a id="27228" class="keyword">new</a></span> <span class="typed"><span class="type">java.lang.Error</span><span id="5975"><a id="821">Error</a></span></span>(<span class="typed"><span class="type">=&gt; Int</span><a href="#140924">offset</a></span> <span class="typed"><span class="type">(java.lang.String)java.lang.String</span><a id="3089">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot; &quot;)</span><span class="string">&quot; &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">=&gt; Int</span><a href="#140921">index</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot; &quot;)</span><span class="string">&quot; &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">Int</span><a href="#140931">toFind</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot; &quot;)</span><span class="string">&quot; &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">Boolean</span><a href="#140932">isIndex</a></span>);
        <span class="typed"><span class="type">(Int)Unit</span><a href="#140925">offset</a></span> = <span class="typed"><span class="type">=&gt; Int</span><a href="#140924">offset</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">+</a></span> <span class="typed"><span class="type">Int</span><a href="#140935">increment</a></span>
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">Boolean</span><a href="#140934">isBackward</a></span>) <span class="typed"><span class="type">(Boolean)Unit</span><span id="6003"><a id="821">assert</a></span></span>(<span class="typed"><span class="type">=&gt; Int</span><a href="#140924">offset</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3144">&lt;=</a></span> <span class="typed"><span class="type">=&gt; Array[Char]</span><a href="#22677">content</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21508">length</a></span>);

        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">(Int)Boolean</span><a href="#22684">isLineBreak</a></span>(<span class="typed"><span class="type">=&gt; Int</span><a href="#140924">offset</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">+</a></span> (<span class="typed"><span class="type">Int</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Boolean</span><a href="#140934">isBackward</a></span>) <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span> <span class="keyword">else</span> -<span class="typed"><span class="type">Int(-1)</span><span class="int">1</span></span>))) {
          <span class="typed"><span class="type">(Int)Unit</span><a href="#140922">index</a></span> = <span class="typed"><span class="type">=&gt; Int</span><a href="#140921">index</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">+</a></span> <span class="typed"><span class="type">Int</span><a href="#140935">increment</a></span>
          <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Boolean</span><a href="#140932">isIndex</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">=&gt; Int</span><a href="#140921">index</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">+</a></span> <span class="typed"><span class="type">Int</span><a href="#140936">oneIfBackward</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3141">==</a></span> <span class="typed"><span class="type">Int</span><a href="#140931">toFind</a></span>) 
            <span class="typed"><span class="type">Nothing</span><span class="keyword">return</span></span> <span class="typed"><span class="type">=&gt; Int</span><a href="#140924">offset</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">+</a></span> <span class="typed"><span class="type">Int</span><a href="#140936">oneIfBackward</a></span>;
        }
      }
      <span class="typed"><span class="type">Nothing</span><span class="keyword">throw</span></span> <span class="typed"><span class="type">java.lang.Error</span><span class="keyword">new</span></span> <span class="typed"><span class="type">java.lang.Error</span><span id="5975"><a id="821">Error</a></span></span>()
    }
  }
  <span class="keyword">def</span> <span class="typed"><span class="type">(Int)Int</span><a id="22690">offsetToLine</a></span>(<span class="typed"><span class="type">Int</span><a id="141031">offset</a></span>: <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span>): <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span> = <span class="typed"><span class="type">object BatchSourceFile.this.line</span><a href="#22688">line</a></span>.<span class="typed"><span class="type">(Int,Boolean)Int</span><a href="#140927">find</a></span>(<span class="typed"><span class="type">Int</span><a href="#141031">offset</a></span>, <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>)
  <span class="keyword">def</span> <span class="typed"><span class="type">(Int)Int</span><a id="22691">lineToOffset</a></span>(<span class="typed"><span class="type">Int</span><a id="140888">index</a></span> : <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span>): <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span> = <span class="typed"><span class="type">object BatchSourceFile.this.line</span><a href="#22688">line</a></span>.<span class="typed"><span class="type">(Int,Boolean)Int</span><a href="#140927">find</a></span>(<span class="typed"><span class="type">Int</span><a href="#140888">index</a></span> , <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>)
}



<span class="comment">/** A source file composed of multiple other source files.
 *
 *  @version 1.0
 */</span>
<span class="keyword">class</span> <span class="typed"><span class="type">class CompoundSourceFile extends scala.tools.nsc.util.BatchSourceFile with ScalaObject</span><a id="8246">CompoundSourceFile</a></span>(
    <span class="typed"><span class="type">String</span><span id="114655"><a id="114666">name</a></span></span>: <span class="typed"><span class="type">String</span><a id="1861">String</a></span>,
    <span class="typed"><span class="type">List[scala.tools.nsc.util.BatchSourceFile]</span><span id="114656"><a id="114667">components</a></span></span>: <span class="typed"><span class="type">List[scala.tools.nsc.util.BatchSourceFile]</span><a id="526">List</a></span>[BatchSourceFile],
    <span class="typed"><span class="type">Array[Char]</span><span id="114657"><a id="114668">contents</a></span></span>: <span class="typed"><span class="type">Array[Char]</span><a id="1072">Array</a></span>[Char])
<span class="keyword">extends</span> <span class="typed"><span class="type">scala.tools.nsc.util.BatchSourceFile</span><a href="#8435">BatchSourceFile</a></span>(<span class="typed"><span class="type">String</span><a href="#114666">name</a></span>, <span class="typed"><span class="type">Array[Char]</span><a href="#114668">contents</a></span>)
{
  <span class="comment">/** The usual constructor.  Specify a name for the compound file and
   *  a list of component sources.
   */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">(String,scala.tools.nsc.util.BatchSourceFile*)scala.tools.nsc.util.CompoundSourceFile</span><a id="114659" class="keyword">this</a></span>(<span class="typed"><span class="type">String</span><a id="114664">name</a></span>: <span class="typed"><span class="type">String</span><a id="1861">String</a></span>, <span class="typed"><span class="type">scala.tools.nsc.util.BatchSourceFile*</span><a id="114665">components</a></span>: <span class="typed"><span class="type">scala.tools.nsc.util.BatchSourceFile*</span><a id="2741">BatchSourceFile</a></span>*) = <span class="typed"><span class="type">Unit</span><span >{</span></span>
    <span class="typed"><span class="type">CompoundSourceFile.this.type</span><a href="#8246" class="keyword">this</a></span>(
      <span class="typed"><span class="type">String</span><a href="#114664">name</a></span>,
      <span class="typed"><span class="type">scala.tools.nsc.util.BatchSourceFile*</span><a href="#114665">components</a></span>.<span class="typed"><span class="type">=&gt; List[scala.tools.nsc.util.BatchSourceFile]</span><a id="21815">toList</a></span>,
      <span class="typed"><span class="type">object Array</span><a id="1073">Array</a></span>.<span class="typed"><span class="type">(Seq[Char]*)Array[Char]</span><a id="21468">concat</a></span>(<span class="typed"><span class="type">scala.tools.nsc.util.BatchSourceFile*</span><a href="#114665">components</a></span>.<span class="typed"><span class="type">=&gt; List[scala.tools.nsc.util.BatchSourceFile]</span><a id="21815">toList</a></span>.<span class="typed"><span class="type">((scala.tools.nsc.util.BatchSourceFile) =&gt; Array[Char])List[Array[Char]]</span><a id="21362">map</a></span>(<span class="typed"><span class="type">scala.tools.nsc.util.BatchSourceFile</span><a id="141055">comp</a></span> =&gt; 
        <span class="typed"><span class="type">object scala.tools.nsc.util.CompoundSourceFile</span><a href="#8247">CompoundSourceFile</a></span>.<span class="typed"><span class="type">(Array[Char])Array.ArrayLike[Char]{def reverse: Array.Projection[Char]; def slice(Int,Int): Array.Projection[Char]; def take(Int): Array.Projection[Char]; def drop(Int): Array.Projection[Char]}</span><a href="#141057">stripSU</a></span>(<span class="typed"><span class="type">scala.tools.nsc.util.BatchSourceFile</span><a href="#141055">comp</a></span>.<span class="typed"><span class="type">=&gt; Array[Char]</span><a href="#22677">content</a></span>).<span class="typed"><span class="type">Array[Char]</span><a id="21675">toArray</a></span>):_*))
  }

  <span class="comment">/** Create an instance with the specified components and a generic name. */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">(scala.tools.nsc.util.BatchSourceFile*)scala.tools.nsc.util.CompoundSourceFile</span><a id="114660" class="keyword">this</a></span>(<span class="typed"><span class="type">scala.tools.nsc.util.BatchSourceFile*</span><a id="114663">components</a></span>: <span class="typed"><span class="type">scala.tools.nsc.util.BatchSourceFile*</span><a id="2741">BatchSourceFile</a></span>*) =
    <span class="typed"><span class="type">(String,scala.tools.nsc.util.BatchSourceFile*)scala.tools.nsc.util.CompoundSourceFile</span><a href="#114659" class="keyword">this</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;(virtual file)&quot;)</span><span class="string">&quot;(virtual file)&quot;</span></span>, <span class="typed"><span class="type">scala.tools.nsc.util.BatchSourceFile*</span><a href="#114663">components</a></span>.<span class="typed"><span class="type">=&gt; List[scala.tools.nsc.util.BatchSourceFile]</span><a id="21815">toList</a></span>:_*)

  <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">(scala.tools.nsc.util.Position)scala.tools.nsc.util.Position</span><a id="114661">positionInUltimateSource</a></span>(<span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a id="141169">position</a></span>: <span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a href="Position.scala.html#8480">Position</a></span>) = {
    <span class="typed"><span class="type">scala.tools.nsc.util.Position</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a href="#141169">position</a></span>.<span class="typed"><span class="type">=&gt; Option[Int]</span><a href="Position.scala.html#25341">offset</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a id="25406">isEmpty</a></span>) <span class="keyword">super</span>.<span class="typed"><span class="type">(scala.tools.nsc.util.Position)scala.tools.nsc.util.Position</span><a href="#22657">positionInUltimateSource</a></span>(<span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a href="#141169">position</a></span>)
    <span class="keyword">else</span> {
      <span class="typed"><span class="type">(Any)Unit</span><span id="6112"><a id="821">println</a></span></span>(<span class="typed"><span class="type">java.lang.String(&quot;!!!&quot;)</span><span class="string">&quot;!!!&quot;</span></span>)
      <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="141172">off</a></span> = <span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a href="#141169">position</a></span>.<span class="typed"><span class="type">=&gt; Option[Int]</span><a href="Position.scala.html#25341">offset</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="25408">get</a></span>
      <span class="keyword">var</span> <span class="typed"><span class="type">List[scala.tools.nsc.util.BatchSourceFile]</span><a id="141173">compsLeft</a></span> = <span class="typed"><span class="type">List[scala.tools.nsc.util.BatchSourceFile]</span><a href="#114656">components</a></span>
      <span class="comment">// the search here has to be against the length of the files underlying the</span>
      <span class="comment">// components, not their advertised length (which in the case of a fragment is</span>
      <span class="comment">// less than the underlying length.) Otherwise we can and will overshoot the</span>
      <span class="comment">// correct component and return a garbage position.</span>
      <span class="typed"><span class="type">Unit</span><a href="#141175" class="keyword">while</a></span> (<span class="typed"><span class="type">List[scala.tools.nsc.util.BatchSourceFile]</span><a href="#141173">compsLeft</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.util.BatchSourceFile</span><a id="21332">head</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a href="#22681">underlyingLength</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3148">-</a></span><span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3144">&lt;=</a></span> <span class="typed"><span class="type">Int</span><a href="#141172">off</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">List[scala.tools.nsc.util.BatchSourceFile]</span><a href="#141173">compsLeft</a></span>.<span class="typed"><span class="type">=&gt; List[scala.tools.nsc.util.BatchSourceFile]</span><a id="21334">tail</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a id="21645">isEmpty</a></span>) {
        <span class="typed"><span class="type">(Any)Unit</span><span id="6112"><a id="821">println</a></span></span>(<span class="typed"><span class="type">java.lang.String(&quot;discarding &quot;)</span><span class="string">&quot;discarding &quot;</span></span><span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span><span class="typed"><span class="type">List[scala.tools.nsc.util.BatchSourceFile]</span><a href="#141173">compsLeft</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.util.BatchSourceFile</span><a id="21332">head</a></span>)
        <span class="typed"><span class="type">Int</span><a href="#141172">off</a></span> = <span class="typed"><span class="type">Int</span><a href="#141172">off</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3148">-</a></span> <span class="typed"><span class="type">List[scala.tools.nsc.util.BatchSourceFile]</span><a href="#141173">compsLeft</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.util.BatchSourceFile</span><a id="21332">head</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a href="#22681">underlyingLength</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">+</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
        <span class="typed"><span class="type">List[scala.tools.nsc.util.BatchSourceFile]</span><a href="#141173">compsLeft</a></span> = <span class="typed"><span class="type">List[scala.tools.nsc.util.BatchSourceFile]</span><a href="#141173">compsLeft</a></span>.<span class="typed"><span class="type">=&gt; List[scala.tools.nsc.util.BatchSourceFile]</span><a id="21334">tail</a></span>
      }
      <span class="comment">// now that we've identified the correct component, we have to adjust the</span>
      <span class="comment">// position we report since it is expected relative to the fragment, not the</span>
      <span class="comment">// underlying file.  Thus, off - comp.start.</span>
      <span class="keyword">val</span> <span class="typed"><span class="type">scala.tools.nsc.util.BatchSourceFile</span><a id="141174">comp</a></span> = <span class="typed"><span class="type">List[scala.tools.nsc.util.BatchSourceFile]</span><a href="#141173">compsLeft</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.util.BatchSourceFile</span><a id="21332">head</a></span>
      <span class="typed"><span class="type">scala.tools.nsc.util.BatchSourceFile</span><a href="#141174">comp</a></span>.<span class="typed"><span class="type">(scala.tools.nsc.util.Position)scala.tools.nsc.util.Position</span><a href="#22657">positionInUltimateSource</a></span>(<span class="typed"><span class="type">scala.tools.nsc.util.OffsetPosition</span><span class="keyword">new</span></span> <span class="typed"><span class="type">scala.tools.nsc.util.OffsetPosition</span><a href="Position.scala.html#8327">OffsetPosition</a></span>(<span class="typed"><span class="type">scala.tools.nsc.util.CompoundSourceFile</span><a href="#8246" class="keyword">this</a></span>, <span class="typed"><span class="type">Int</span><a href="#141172">off</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3148">-</a></span> <span class="typed"><span class="type">scala.tools.nsc.util.BatchSourceFile</span><a href="#141174">comp</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a href="#22682">start</a></span>))
    }
  }
}

<span class="keyword">object</span> <span class="typed"><span class="type">object scala.tools.nsc.util.CompoundSourceFile</span><a id="8247">CompoundSourceFile</a></span> {
  <span class="keyword">private</span>[util] <span class="keyword">def</span> <span class="typed"><span class="type">(Array[Char])Array.ArrayLike[Char]{def reverse: Array.Projection[Char]; def slice(Int,Int): Array.Projection[Char]; def take(Int): Array.Projection[Char]; def drop(Int): Array.Projection[Char]}</span><a id="141057">stripSU</a></span>(<span class="typed"><span class="type">Array[Char]</span><a id="141058">chars</a></span>: <span class="typed"><span class="type">Array[Char]</span><a id="1072">Array</a></span>[Char]) =
    <span class="typed"><span class="type">&lt;refinement&gt; extends Array.ArrayLike[Char]</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Array[Char]</span><a href="#141058">chars</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21508">length</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3145">&gt;</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">Array[Char]</span><a href="#141058">chars</a></span>.<span class="typed"><span class="type">=&gt; Char</span><a id="21648">last</a></span> <span class="typed"><span class="type">(Char)Boolean</span><a id="3018">==</a></span> SourceFile.<span class="typed"><span class="type">Char('\032')</span><span >SU</span></span>)
      <span class="typed"><span class="type">Array[Char]</span><a href="#141058">chars</a></span>.<span class="typed"><span class="type">(Int,Int)Array.Projection[Char]</span><a id="21490">slice</a></span>(<span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>, <span class="typed"><span class="type">Array[Char]</span><a href="#141058">chars</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21508">length</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3148">-</a></span><span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>)
    <span class="keyword">else</span>
      <span class="typed"><span class="type">Array[Char]</span><a href="#141058">chars</a></span>
}


<span class="comment">/** One portion of an underlying file.  The fragment includes
  * the indices from the specified start (inclusively) to stop
  * (not inclusively).
  */</span>
<span class="keyword">class</span> <span class="typed"><span class="type">class SourceFileFragment extends scala.tools.nsc.util.BatchSourceFile with ScalaObject</span><a id="8408">SourceFileFragment</a></span> <span class="keyword">private</span> (
    <span class="typed"><span class="type">String</span><span id="114622"><a id="141225">name</a></span></span>: <span class="typed"><span class="type">String</span><a id="1861">String</a></span>,
    <span class="typed"><span class="type">scala.tools.nsc.util.BatchSourceFile</span><span id="114623"><a id="141226">underlyingFile</a></span></span>: <span class="typed"><span class="type">scala.tools.nsc.util.BatchSourceFile</span><a href="#8435">BatchSourceFile</a></span>,
    <span class="keyword">override</span> <span class="keyword">val</span> <span class="typed"><span class="type">Int</span><span id="114625"><span id="114624"><a id="141227">start</a></span></span></span>: <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span>,
    <span class="typed"><span class="type">Int</span><span id="114626"><a id="141228">stop</a></span></span>: <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span>,
    <span class="typed"><span class="type">Array[Char]</span><span id="114627"><a id="141229">contents</a></span></span>: <span class="typed"><span class="type">Array[Char]</span><a id="1072">Array</a></span>[Char])
<span class="keyword">extends</span> <span class="typed"><span class="type">scala.tools.nsc.util.BatchSourceFile</span><a href="#8435">BatchSourceFile</a></span>(<span class="typed"><span class="type">String</span><a href="#141225">name</a></span>, <span class="typed"><span class="type">Array[Char]</span><a href="#141229">contents</a></span>) {
  <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Int</span><a id="114629">underlyingLength</a></span> = <span class="typed"><span class="type">scala.tools.nsc.util.BatchSourceFile</span><a href="#114623">underlyingFile</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a href="#22679">length</a></span>
  <span class="keyword">def</span> <span class="typed"><span class="type">(String,scala.tools.nsc.util.BatchSourceFile,Int,Int)scala.tools.nsc.util.SourceFileFragment</span><a id="114630" class="keyword">this</a></span>(<span class="typed"><span class="type">String</span><a id="114638">name</a></span>: <span class="typed"><span class="type">String</span><a id="1861">String</a></span>, <span class="typed"><span class="type">scala.tools.nsc.util.BatchSourceFile</span><a id="114639">underlyingFile</a></span>: <span class="typed"><span class="type">scala.tools.nsc.util.BatchSourceFile</span><a href="#8435">BatchSourceFile</a></span>, <span class="typed"><span class="type">Int</span><a id="114640">start</a></span>: <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span>, <span class="typed"><span class="type">Int</span><a id="114641">stop</a></span>: <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span>) =
    <span class="typed"><span class="type">SourceFileFragment.this.type</span><a href="#8408" class="keyword">this</a></span>(
      <span class="typed"><span class="type">String</span><a href="#114638">name</a></span>,
      <span class="typed"><span class="type">scala.tools.nsc.util.BatchSourceFile</span><a href="#114639">underlyingFile</a></span>,
      <span class="typed"><span class="type">Int</span><a href="#114640">start</a></span>,
      <span class="typed"><span class="type">Int</span><a href="#114641">stop</a></span>,
      { <span class="typed"><span class="type">(Boolean)Unit</span><span id="6003"><a id="821">assert</a></span></span>(<span class="typed"><span class="type">Int</span><a href="#114640">start</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3146">&gt;=</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>)
        <span class="typed"><span class="type">(Boolean)Unit</span><span id="6003"><a id="821">assert</a></span></span>(<span class="typed"><span class="type">Int</span><a href="#114640">start</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3144">&lt;=</a></span> <span class="typed"><span class="type">Int</span><a href="#114641">stop</a></span>)
        <span class="typed"><span class="type">(Boolean)Unit</span><span id="6003"><a id="821">assert</a></span></span>(<span class="typed"><span class="type">Int</span><a href="#114640">start</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3144">&lt;=</a></span> <span class="typed"><span class="type">scala.tools.nsc.util.BatchSourceFile</span><a href="#114639">underlyingFile</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a href="#22679">length</a></span>)
        <span class="typed"><span class="type">(Boolean)Unit</span><span id="6003"><a id="821">assert</a></span></span>(<span class="typed"><span class="type">Int</span><a href="#114641">stop</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3144">&lt;=</a></span> <span class="typed"><span class="type">scala.tools.nsc.util.BatchSourceFile</span><a href="#114639">underlyingFile</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a href="#22679">length</a></span>)
        <span class="typed"><span class="type">scala.tools.nsc.util.BatchSourceFile</span><a href="#114639">underlyingFile</a></span>.<span class="typed"><span class="type">=&gt; Array[Char]</span><a href="#22677">content</a></span>.<span class="typed"><span class="type">(Int,Int)Array.Projection[Char]</span><a id="21490">slice</a></span>(<span class="typed"><span class="type">Int</span><a href="#114640">start</a></span>, <span class="typed"><span class="type">Int</span><a href="#114641">stop</a></span>).<span class="typed"><span class="type">Array[Char]</span><a id="21481">toArray</a></span> })

  <span class="keyword">def</span> <span class="typed"><span class="type">(scala.tools.nsc.util.BatchSourceFile,Int,Int)scala.tools.nsc.util.SourceFileFragment</span><a id="114631" class="keyword">this</a></span>(<span class="typed"><span class="type">scala.tools.nsc.util.BatchSourceFile</span><a id="114635">underlyingFile</a></span>: <span class="typed"><span class="type">scala.tools.nsc.util.BatchSourceFile</span><a href="#8435">BatchSourceFile</a></span>, <span class="typed"><span class="type">Int</span><a id="114636">start</a></span>: <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span>, <span class="typed"><span class="type">Int</span><a id="114637">stop</a></span>: <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span>) =
    <span class="typed"><span class="type">(String,scala.tools.nsc.util.BatchSourceFile,Int,Int)scala.tools.nsc.util.SourceFileFragment</span><a href="#114630" class="keyword">this</a></span>(
      <span class="typed"><span class="type">java.lang.String(&quot;(fragment of &quot;)</span><span class="string">&quot;(fragment of &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">scala.tools.nsc.util.BatchSourceFile</span><a href="#114635">underlyingFile</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.io.AbstractFile</span><a href="#22667">file</a></span>.<span class="typed"><span class="type">=&gt; String</span><a href="../io/AbstractFile.scala.html#25439">name</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;)&quot;)</span><span class="string">&quot;)&quot;</span></span>,
      <span class="typed"><span class="type">scala.tools.nsc.util.BatchSourceFile</span><a href="#114635">underlyingFile</a></span>,
      <span class="typed"><span class="type">Int</span><a href="#114636">start</a></span>,
      <span class="typed"><span class="type">Int</span><a href="#114637">stop</a></span>)

  <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">(scala.tools.nsc.util.Position)scala.tools.nsc.util.Position</span><a id="114632">positionInUltimateSource</a></span>(<span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a id="141273">position</a></span>: <span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a href="Position.scala.html#8480">Position</a></span>) = {
    <span class="typed"><span class="type">scala.tools.nsc.util.Position</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a href="#141273">position</a></span>.<span class="typed"><span class="type">=&gt; Option[Int]</span><a href="Position.scala.html#25341">offset</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a id="25406">isEmpty</a></span>)
      <span class="keyword">super</span>.<span class="typed"><span class="type">(scala.tools.nsc.util.Position)scala.tools.nsc.util.Position</span><a href="#22657">positionInUltimateSource</a></span>(<span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a href="#141273">position</a></span>)
    <span class="keyword">else</span> {
      <span class="keyword">super</span>.<span class="typed"><span class="type">(scala.tools.nsc.util.Position)scala.tools.nsc.util.Position</span><a href="#22657">positionInUltimateSource</a></span>(
      <span class="typed"><span class="type">scala.tools.nsc.util.OffsetPosition</span><span class="keyword">new</span></span> <span class="typed"><span class="type">scala.tools.nsc.util.OffsetPosition</span><a href="Position.scala.html#8327">OffsetPosition</a></span>(<span class="typed"><span class="type">scala.tools.nsc.util.SourceFileFragment</span><a href="#8408" class="keyword">this</a></span>, <span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a href="#141273">position</a></span>.<span class="typed"><span class="type">=&gt; Option[Int]</span><a href="Position.scala.html#25341">offset</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="25408">get</a></span>))
    }
  }
}

        </pre>
    </body>
</html>