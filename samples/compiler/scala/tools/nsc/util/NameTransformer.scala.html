<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/util/NameTransformer.scala</title>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style">
    </head>
    <body onload="initializeLinked()">
        <pre>
<span class="comment">/* NSC -- new Scala compiler
 * Copyright 2005-2009 LAMP/EPFL
 * @author  Martin Odersky
 */</span>
<span class="comment">// $Id: NameTransformer.scala 17012 2009-02-02 11:52:05Z washburn $</span>

<span class="keyword">package</span> scala.tools.nsc.util

<span class="keyword">object</span> <span class="typed"><span class="type">object scala.tools.nsc.util.NameTransformer</span><a id="8346">NameTransformer</a></span> {
  <span class="keyword">private</span> <span class="keyword">val</span> <span class="typed"><span class="type">Int</span><span id="25606"><a id="25605">nops</a></span></span> = <span class="typed"><span class="type">Int(128)</span><span class="int">128</span></span>
  <span class="keyword">private</span> <span class="keyword">val</span> <span class="typed"><span class="type">Int</span><span id="25608"><a id="25607">ncodes</a></span></span> = <span class="int">26</span> <span class="typed"><span class="type">Int(676)</span><span >*</span></span> <span class="int">26</span>

  <span class="keyword">private</span> <span class="keyword">class</span> <span class="typed"><span class="type">class OpCodes extends java.lang.Object with ScalaObject</span><a id="25609">OpCodes</a></span>(<span class="keyword">val</span> <span class="typed"><span class="type">Char</span><span id="38221"><span id="38220"><a id="38231">op</a></span></span></span>: <span class="typed"><span class="type">Char</span><a id="2389">Char</a></span>, <span class="keyword">val</span> <span class="typed"><span class="type">String</span><span id="38223"><span id="38222"><a id="38232">code</a></span></span></span>: <span class="typed"><span class="type">String</span><a id="1861">String</a></span>, <span class="keyword">val</span> <span class="typed"><span class="type">scala.tools.nsc.util.NameTransformer.OpCodes</span><span id="38225"><span id="38224"><a id="38233">next</a></span></span></span>: <span class="typed"><span class="type">scala.tools.nsc.util.NameTransformer.OpCodes</span><a href="#25609">OpCodes</a></span>)

  <span class="keyword">private</span> <span class="keyword">val</span> <span class="typed"><span class="type">Array[String]</span><span id="25611"><a id="25610">op2code</a></span></span> = <span class="typed"><span class="type">Array[String]</span><span class="keyword">new</span></span> <span class="typed"><span class="type">Array[String]</span><a id="1072">Array</a></span>[String](<span class="typed"><span class="type">=&gt; Int</span><a href="#25605">nops</a></span>)
  <span class="keyword">private</span> <span class="keyword">val</span> <span class="typed"><span class="type">Array[scala.tools.nsc.util.NameTransformer.OpCodes]</span><span id="25613"><a id="25612">code2op</a></span></span> = <span class="typed"><span class="type">Array[scala.tools.nsc.util.NameTransformer.OpCodes]</span><span class="keyword">new</span></span> <span class="typed"><span class="type">Array[scala.tools.nsc.util.NameTransformer.OpCodes]</span><a id="1072">Array</a></span>[OpCodes](<span class="typed"><span class="type">=&gt; Int</span><a href="#25607">ncodes</a></span>)

  <span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(Char,String)Unit</span><a id="25614">enterOp</a></span>(<span class="typed"><span class="type">Char</span><a id="38234">op</a></span>: <span class="typed"><span class="type">Char</span><a id="2389">Char</a></span>, <span class="typed"><span class="type">String</span><a id="38235">code</a></span>: <span class="typed"><span class="type">String</span><a id="1861">String</a></span>) = {
    <span class="typed"><span class="type">=&gt; Array[String]</span><a href="#25610">op2code</a></span>(<span class="typed"><span class="type">implicit scala.Predef.char2int : (Char)Int</span><span id="6208"><a href="#38234" id="821">op</a></span></span>) = <span class="typed"><span class="type">String</span><a href="#38235">code</a></span>
    <span class="keyword">val</span> <span class="typed"><span class="type">Int</span><a id="38237">c</a></span> = (<span class="typed"><span class="type">String</span><a href="#38235">code</a></span>.<span class="typed"><span class="type">(Int)Char</span><a id="5822">charAt</a></span>(<span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>) <span class="typed"><span class="type">(Char)Int</span><a id="3025">-</a></span> <span class="typed"><span class="type">Char('a')</span><span class="char">'a'</span></span>) <span class="typed"><span class="type">(Int)Int</span><a id="3149">*</a></span> <span class="typed"><span class="type">Int(26)</span><span class="int">26</span></span> <span class="typed"><span class="type">(Char)Int</span><a id="3133">+</a></span> <span class="typed"><span class="type">String</span><a href="#38235">code</a></span>.<span class="typed"><span class="type">(Int)Char</span><a id="5822">charAt</a></span>(<span class="typed"><span class="type">Int(2)</span><span class="int">2</span></span>) <span class="typed"><span class="type">(Char)Int</span><a id="3134">-</a></span> <span class="typed"><span class="type">Char('a')</span><span class="char">'a'</span></span>
    <span class="typed"><span class="type">=&gt; Array[scala.tools.nsc.util.NameTransformer.OpCodes]</span><a href="#25612">code2op</a></span>(<span class="typed"><span class="type">Int</span><a href="#38237">c</a></span>) = <span class="typed"><span class="type">scala.tools.nsc.util.NameTransformer.OpCodes</span><span class="keyword">new</span></span> <span class="typed"><span class="type">scala.tools.nsc.util.NameTransformer.OpCodes</span><a href="#25609">OpCodes</a></span>(<span class="typed"><span class="type">Char</span><a href="#38234">op</a></span>, <span class="typed"><span class="type">String</span><a href="#38235">code</a></span>, <span class="typed"><span class="type">(Int)scala.tools.nsc.util.NameTransformer.OpCodes</span><a href="#25612" id="21509">code2op</a></span>(<span class="typed"><span class="type">Int</span><a href="#38237">c</a></span>))
  }

  <span class="comment">/* Note: decoding assumes opcodes are only ever lowercase. */</span>
  <span class="typed"><span class="type">(Char,String)Unit</span><a href="#25614">enterOp</a></span>(<span class="typed"><span class="type">Char('~')</span><span class="char">'~'</span></span>, <span class="typed"><span class="type">java.lang.String(&quot;$tilde&quot;)</span><span class="string">&quot;$tilde&quot;</span></span>)
  <span class="typed"><span class="type">(Char,String)Unit</span><a href="#25614">enterOp</a></span>(<span class="typed"><span class="type">Char('=')</span><span class="char">'='</span></span>, <span class="typed"><span class="type">java.lang.String(&quot;$eq&quot;)</span><span class="string">&quot;$eq&quot;</span></span>)
  <span class="typed"><span class="type">(Char,String)Unit</span><a href="#25614">enterOp</a></span>(<span class="typed"><span class="type">Char('&lt;')</span><span class="char">'&lt;'</span></span>, <span class="typed"><span class="type">java.lang.String(&quot;$less&quot;)</span><span class="string">&quot;$less&quot;</span></span>)
  <span class="typed"><span class="type">(Char,String)Unit</span><a href="#25614">enterOp</a></span>(<span class="typed"><span class="type">Char('&gt;')</span><span class="char">'&gt;'</span></span>, <span class="typed"><span class="type">java.lang.String(&quot;$greater&quot;)</span><span class="string">&quot;$greater&quot;</span></span>)
  <span class="typed"><span class="type">(Char,String)Unit</span><a href="#25614">enterOp</a></span>(<span class="typed"><span class="type">Char('!')</span><span class="char">'!'</span></span>, <span class="typed"><span class="type">java.lang.String(&quot;$bang&quot;)</span><span class="string">&quot;$bang&quot;</span></span>)
  <span class="typed"><span class="type">(Char,String)Unit</span><a href="#25614">enterOp</a></span>(<span class="typed"><span class="type">Char('#')</span><span class="char">'#'</span></span>, <span class="typed"><span class="type">java.lang.String(&quot;$hash&quot;)</span><span class="string">&quot;$hash&quot;</span></span>)
  <span class="typed"><span class="type">(Char,String)Unit</span><a href="#25614">enterOp</a></span>(<span class="typed"><span class="type">Char('%')</span><span class="char">'%'</span></span>, <span class="typed"><span class="type">java.lang.String(&quot;$percent&quot;)</span><span class="string">&quot;$percent&quot;</span></span>)
  <span class="typed"><span class="type">(Char,String)Unit</span><a href="#25614">enterOp</a></span>(<span class="typed"><span class="type">Char('^')</span><span class="char">'^'</span></span>, <span class="typed"><span class="type">java.lang.String(&quot;$up&quot;)</span><span class="string">&quot;$up&quot;</span></span>)
  <span class="typed"><span class="type">(Char,String)Unit</span><a href="#25614">enterOp</a></span>(<span class="typed"><span class="type">Char('&amp;')</span><span class="char">'&amp;'</span></span>, <span class="typed"><span class="type">java.lang.String(&quot;$amp&quot;)</span><span class="string">&quot;$amp&quot;</span></span>)
  <span class="typed"><span class="type">(Char,String)Unit</span><a href="#25614">enterOp</a></span>(<span class="typed"><span class="type">Char('|')</span><span class="char">'|'</span></span>, <span class="typed"><span class="type">java.lang.String(&quot;$bar&quot;)</span><span class="string">&quot;$bar&quot;</span></span>)
  <span class="typed"><span class="type">(Char,String)Unit</span><a href="#25614">enterOp</a></span>(<span class="typed"><span class="type">Char('*')</span><span class="char">'*'</span></span>, <span class="typed"><span class="type">java.lang.String(&quot;$times&quot;)</span><span class="string">&quot;$times&quot;</span></span>)
  <span class="typed"><span class="type">(Char,String)Unit</span><a href="#25614">enterOp</a></span>(<span class="typed"><span class="type">Char('/')</span><span class="char">'/'</span></span>, <span class="typed"><span class="type">java.lang.String(&quot;$div&quot;)</span><span class="string">&quot;$div&quot;</span></span>)
  <span class="typed"><span class="type">(Char,String)Unit</span><a href="#25614">enterOp</a></span>(<span class="typed"><span class="type">Char('+')</span><span class="char">'+'</span></span>, <span class="typed"><span class="type">java.lang.String(&quot;$plus&quot;)</span><span class="string">&quot;$plus&quot;</span></span>)
  <span class="typed"><span class="type">(Char,String)Unit</span><a href="#25614">enterOp</a></span>(<span class="typed"><span class="type">Char('-')</span><span class="char">'-'</span></span>, <span class="typed"><span class="type">java.lang.String(&quot;$minus&quot;)</span><span class="string">&quot;$minus&quot;</span></span>)
  <span class="typed"><span class="type">(Char,String)Unit</span><a href="#25614">enterOp</a></span>(<span class="typed"><span class="type">Char(':')</span><span class="char">':'</span></span>, <span class="typed"><span class="type">java.lang.String(&quot;$colon&quot;)</span><span class="string">&quot;$colon&quot;</span></span>)
  <span class="typed"><span class="type">(Char,String)Unit</span><a href="#25614">enterOp</a></span>(<span class="typed"><span class="type">Char('\')</span><span class="char">'\\'</span></span>, <span class="typed"><span class="type">java.lang.String(&quot;$bslash&quot;)</span><span class="string">&quot;$bslash&quot;</span></span>)
  <span class="typed"><span class="type">(Char,String)Unit</span><a href="#25614">enterOp</a></span>(<span class="typed"><span class="type">Char('?')</span><span class="char">'?'</span></span>, <span class="typed"><span class="type">java.lang.String(&quot;$qmark&quot;)</span><span class="string">&quot;$qmark&quot;</span></span>)
  <span class="typed"><span class="type">(Char,String)Unit</span><a href="#25614">enterOp</a></span>(<span class="typed"><span class="type">Char('@')</span><span class="char">'@'</span></span>, <span class="typed"><span class="type">java.lang.String(&quot;$at&quot;)</span><span class="string">&quot;$at&quot;</span></span>)

  <span class="comment">/** Replace operator symbols by corresponding &quot;&lt;code&gt;$op_name&lt;/code&gt;&quot;.
   *
   *  @param name ...
   *  @return     ...
   */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">(String)String</span><a id="25615">encode</a></span>(<span class="typed"><span class="type">String</span><a id="38246">name</a></span>: <span class="typed"><span class="type">String</span><a id="1861">String</a></span>): <span class="typed"><span class="type">String</span><a id="1861">String</a></span> = {
    <span class="keyword">var</span> <span class="typed"><span class="type">StringBuilder</span><a id="38247">buf</a></span>: <span class="typed"><span class="type">StringBuilder</span><a id="1435">StringBuilder</a></span> = <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>
    <span class="keyword">val</span> <span class="typed"><span class="type">Int</span><a id="38248">len</a></span> = <span class="typed"><span class="type">String</span><a href="#38246">name</a></span>.<span class="typed"><span class="type">()Int</span><a id="5821">length</a></span>()
    <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="38249">i</a></span> = <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>
    <span class="typed"><span class="type">Unit</span><a href="#38250" class="keyword">while</a></span> (<span class="typed"><span class="type">Int</span><a href="#38249">i</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&lt;</a></span> <span class="typed"><span class="type">Int</span><a href="#38248">len</a></span>) {
      <span class="keyword">val</span> <span class="typed"><span class="type">Char</span><a id="38252">c</a></span> = <span class="typed"><span class="type">String</span><a href="#38246">name</a></span> <span class="typed"><span class="type">(Int)Char</span><a id="5822">charAt</a></span> <span class="typed"><span class="type">Int</span><a href="#38249">i</a></span>
      <span class="typed"><span class="type">Any</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Char</span><a href="#38252">c</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3034">&lt;</a></span> <span class="typed"><span class="type">=&gt; Int</span><a href="#25605">nops</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> (<span class="typed"><span class="type">(Int)String</span><a href="#25610" id="21509">op2code</a></span>(<span class="typed"><span class="type">implicit scala.Predef.char2int : (Char)Int</span><span id="6208"><a href="#38252" id="821">c</a></span></span>) <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5795">ne</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>)) {
        <span class="typed"><span class="type">Any</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">StringBuilder</span><a href="#38247">buf</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5794">eq</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>) {
          <span class="typed"><span class="type">StringBuilder</span><a href="#38247">buf</a></span> = <span class="typed"><span class="type">()StringBuilder</span><a id="23671" class="keyword">new</a></span> <span class="typed"><span class="type">StringBuilder</span><a id="1435">StringBuilder</a></span>()
          <span class="typed"><span class="type">StringBuilder</span><a href="#38247">buf</a></span>.<span class="typed"><span class="type">(String)StringBuilder</span><a id="23690">append</a></span>(<span class="typed"><span class="type">String</span><a href="#38246">name</a></span>.<span class="typed"><span class="type">(Int,Int)java.lang.String</span><a id="5855">substring</a></span>(<span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>, <span class="typed"><span class="type">Int</span><a href="#38249">i</a></span>))
        }
        <span class="typed"><span class="type">StringBuilder</span><a href="#38247">buf</a></span>.<span class="typed"><span class="type">(String)StringBuilder</span><a id="23690">append</a></span>(<span class="typed"><span class="type">(Int)String</span><a href="#25610" id="21509">op2code</a></span>(<span class="typed"><span class="type">implicit scala.Predef.char2int : (Char)Int</span><span id="6208"><a href="#38252" id="821">c</a></span></span>))
      <span class="comment">/* Handle glyphs that are not valid Java/JVM identifiers */</span>
      } <span class="keyword">else</span> <span class="typed"><span class="type">Any</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">object java.lang.Character</span><a id="1946">Character</a></span>.<span class="typed"><span class="type">(Char)Boolean</span><a id="19702">isJavaIdentifierPart</a></span>(<span class="typed"><span class="type">Char</span><a href="#38252">c</a></span>)) {
	<span class="typed"><span class="type">Any</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">StringBuilder</span><a href="#38247">buf</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5794">eq</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>) {
	  <span class="typed"><span class="type">StringBuilder</span><a href="#38247">buf</a></span> = <span class="typed"><span class="type">()StringBuilder</span><a id="23671" class="keyword">new</a></span> <span class="typed"><span class="type">StringBuilder</span><a id="1435">StringBuilder</a></span>()
	  <span class="typed"><span class="type">StringBuilder</span><a href="#38247">buf</a></span>.<span class="typed"><span class="type">(String)StringBuilder</span><a id="23690">append</a></span>(<span class="typed"><span class="type">String</span><a href="#38246">name</a></span>.<span class="typed"><span class="type">(Int,Int)java.lang.String</span><a id="5855">substring</a></span>(<span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>, <span class="typed"><span class="type">Int</span><a href="#38249">i</a></span>))
	}
        <span class="comment">/* Annoying hack to format a hexadeciaml number with leading
           zeros -- there does not appear to be any function pre-Java
           1.5 to do this. */</span> 
	<span class="typed"><span class="type">StringBuilder</span><a href="#38247">buf</a></span>.<span class="typed"><span class="type">(String)StringBuilder</span><a id="23690">append</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;$u&quot;)</span><span class="string">&quot;$u&quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">object java.lang.Integer</span><a id="1784">Integer</a></span>.<span class="typed"><span class="type">(Int)java.lang.String</span><a id="26735">toHexString</a></span>(<span class="typed"><span class="type">Char</span><a href="#38252">c</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3038">+</a></span> <span class="typed"><span class="type">Int(65536)</span><span class="int">0x10000</span></span>).<span class="typed"><span class="type">(Int)java.lang.String</span><a id="5854">substring</a></span>(<span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>).<span class="typed"><span class="type">()java.lang.String</span><a id="5869">toUpperCase</a></span>)
      } <span class="keyword">else</span> <span class="typed"><span class="type">Any</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">StringBuilder</span><a href="#38247">buf</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5795">ne</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>) {
        <span class="typed"><span class="type">StringBuilder</span><a href="#38247">buf</a></span>.<span class="typed"><span class="type">(Char)StringBuilder</span><a id="23697">append</a></span>(<span class="typed"><span class="type">Char</span><a href="#38252">c</a></span>)
      }
      <span class="typed"><span class="type">Int</span><a href="#38249">i</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">+=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
    }
    <span class="typed"><span class="type">String</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">StringBuilder</span><a href="#38247">buf</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5794">eq</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>) <span class="typed"><span class="type">String</span><a href="#38246">name</a></span> <span class="keyword">else</span> <span class="typed"><span class="type">StringBuilder</span><a href="#38247">buf</a></span>.<span class="typed"><span class="type">()String</span><a id="23723">toString</a></span>()
  }

  <span class="comment">/** Replace &lt;code&gt;$op_name&lt;/code&gt; by corresponding operator symbol.
   *
   *  @param name0 ...
   *  @return      ...
   */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">(String)String</span><a id="25616">decode</a></span>(<span class="typed"><span class="type">String</span><a id="25617">name0</a></span>: <span class="typed"><span class="type">String</span><a id="1861">String</a></span>): <span class="typed"><span class="type">String</span><a id="1861">String</a></span> = {
    <span class="comment">//System.out.println(&quot;decode: &quot; + name);//DEBUG</span>
    <span class="keyword">val</span> <span class="typed"><span class="type">java.lang.String</span><a id="38401">name</a></span> = <span class="typed"><span class="type">java.lang.String</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">String</span><a href="#25617">name0</a></span>.<span class="typed"><span class="type">(java.lang.String)Boolean</span><a id="5842">endsWith</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;&lt;init&gt;&quot;)</span><span class="string">&quot;&lt;init&gt;&quot;</span></span>)) <span class="typed"><span class="type">String</span><a href="#25617">name0</a></span>.<span class="typed"><span class="type">(Int,Int)java.lang.String</span><a id="5855">substring</a></span>(<span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>, <span class="typed"><span class="type">String</span><a href="#25617">name0</a></span>.<span class="typed"><span class="type">()Int</span><a id="5821">length</a></span>() <span class="typed"><span class="type">(Int)Int</span><a id="3148">-</a></span> (<span class="typed"><span class="type">java.lang.String(&quot;&lt;init&gt;&quot;)</span><span class="string">&quot;&lt;init&gt;&quot;</span></span>).<span class="typed"><span class="type">()Int</span><a id="5821">length</a></span>()) <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;this&quot;)</span><span class="string">&quot;this&quot;</span></span>
               <span class="keyword">else</span> <span class="typed"><span class="type">String</span><a href="#25617">name0</a></span>;
    <span class="keyword">var</span> <span class="typed"><span class="type">StringBuilder</span><a id="38402">buf</a></span>: <span class="typed"><span class="type">StringBuilder</span><a id="1435">StringBuilder</a></span> = <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>
    <span class="keyword">val</span> <span class="typed"><span class="type">Int</span><a id="38403">len</a></span> = <span class="typed"><span class="type">java.lang.String</span><a href="#38401">name</a></span>.<span class="typed"><span class="type">()Int</span><a id="5821">length</a></span>()
    <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="38404">i</a></span> = <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>
    <span class="typed"><span class="type">Unit</span><a href="#38405" class="keyword">while</a></span> (<span class="typed"><span class="type">Int</span><a href="#38404">i</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&lt;</a></span> <span class="typed"><span class="type">Int</span><a href="#38403">len</a></span>) {
      <span class="keyword">var</span> <span class="typed"><span class="type">scala.tools.nsc.util.NameTransformer.OpCodes</span><a id="38429">ops</a></span>: <span class="typed"><span class="type">scala.tools.nsc.util.NameTransformer.OpCodes</span><a href="#25609">OpCodes</a></span> = <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>
      <span class="keyword">var</span> <span class="typed"><span class="type">Boolean</span><a id="38430">unicode</a></span> = <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>
      <span class="keyword">val</span> <span class="typed"><span class="type">Char</span><a id="38431">c</a></span> = <span class="typed"><span class="type">java.lang.String</span><a href="#38401">name</a></span> <span class="typed"><span class="type">(Int)Char</span><a id="5822">charAt</a></span> <span class="typed"><span class="type">Int</span><a href="#38404">i</a></span>
      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Char</span><a href="#38431">c</a></span> <span class="typed"><span class="type">(Char)Boolean</span><a id="3018">==</a></span> <span class="typed"><span class="type">Char('$')</span><span class="char">'$'</span></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">Int</span><a href="#38404">i</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">+</a></span> <span class="typed"><span class="type">Int(2)</span><span class="int">2</span></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&lt;</a></span> <span class="typed"><span class="type">Int</span><a href="#38403">len</a></span>) {
        <span class="keyword">val</span> <span class="typed"><span class="type">Char</span><a id="38435">ch1</a></span> = <span class="typed"><span class="type">java.lang.String</span><a href="#38401">name</a></span>.<span class="typed"><span class="type">(Int)Char</span><a id="5822">charAt</a></span>(<span class="typed"><span class="type">Int</span><a href="#38404">i</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3147">+</a></span><span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>)
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Char('a')</span><span class="char">'a'</span></span> <span class="typed"><span class="type">(Char)Boolean</span><a id="3021">&lt;=</a></span> <span class="typed"><span class="type">Char</span><a href="#38435">ch1</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">Char</span><a href="#38435">ch1</a></span> <span class="typed"><span class="type">(Char)Boolean</span><a id="3021">&lt;=</a></span> <span class="typed"><span class="type">Char('z')</span><span class="char">'z'</span></span>) {
          <span class="keyword">val</span> <span class="typed"><span class="type">Char</span><a id="38456">ch2</a></span> = <span class="typed"><span class="type">java.lang.String</span><a href="#38401">name</a></span>.<span class="typed"><span class="type">(Int)Char</span><a id="5822">charAt</a></span>(<span class="typed"><span class="type">Int</span><a href="#38404">i</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3147">+</a></span><span class="typed"><span class="type">Int(2)</span><span class="int">2</span></span>)
          <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Char('a')</span><span class="char">'a'</span></span> <span class="typed"><span class="type">(Char)Boolean</span><a id="3021">&lt;=</a></span> <span class="typed"><span class="type">Char</span><a href="#38456">ch2</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">Char</span><a href="#38456">ch2</a></span> <span class="typed"><span class="type">(Char)Boolean</span><a id="3021">&lt;=</a></span> <span class="typed"><span class="type">Char('z')</span><span class="char">'z'</span></span>) {
            <span class="typed"><span class="type">scala.tools.nsc.util.NameTransformer.OpCodes</span><a href="#38429">ops</a></span> = <span class="typed"><span class="type">(Int)scala.tools.nsc.util.NameTransformer.OpCodes</span><a href="#25612" id="21509">code2op</a></span>((<span class="typed"><span class="type">Char</span><a href="#38435">ch1</a></span> <span class="typed"><span class="type">(Char)Int</span><a id="3025">-</a></span> <span class="typed"><span class="type">Char('a')</span><span class="char">'a'</span></span>) <span class="typed"><span class="type">(Int)Int</span><a id="3149">*</a></span> <span class="typed"><span class="type">Int(26)</span><span class="int">26</span></span> <span class="typed"><span class="type">(Char)Int</span><a id="3133">+</a></span> <span class="typed"><span class="type">Char</span><a href="#38456">ch2</a></span> <span class="typed"><span class="type">(Char)Int</span><a id="3134">-</a></span> <span class="typed"><span class="type">Char('a')</span><span class="char">'a'</span></span>)
            <span class="typed"><span class="type">Unit</span><a href="#38477" class="keyword">while</a></span> ((<span class="typed"><span class="type">scala.tools.nsc.util.NameTransformer.OpCodes</span><a href="#38429">ops</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5795">ne</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>) <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">java.lang.String</span><a href="#38401">name</a></span>.<span class="typed"><span class="type">(java.lang.String,Int)Boolean</span><a id="5840">startsWith</a></span>(<span class="typed"><span class="type">scala.tools.nsc.util.NameTransformer.OpCodes</span><a href="#38429">ops</a></span>.<span class="typed"><span class="type">=&gt; String</span><a href="#38222">code</a></span>, <span class="typed"><span class="type">Int</span><a href="#38404">i</a></span>)) <span class="typed"><span class="type">scala.tools.nsc.util.NameTransformer.OpCodes</span><a href="#38429">ops</a></span> = <span class="typed"><span class="type">scala.tools.nsc.util.NameTransformer.OpCodes</span><a href="#38429">ops</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.util.NameTransformer.OpCodes</span><a href="#38224">next</a></span>
            <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">scala.tools.nsc.util.NameTransformer.OpCodes</span><a href="#38429">ops</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5795">ne</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>) {
              <span class="typed"><span class="type">Any</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">StringBuilder</span><a href="#38402">buf</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5794">eq</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>) {
                <span class="typed"><span class="type">StringBuilder</span><a href="#38402">buf</a></span> = <span class="typed"><span class="type">()StringBuilder</span><a id="23671" class="keyword">new</a></span> <span class="typed"><span class="type">StringBuilder</span><a id="1435">StringBuilder</a></span>()
                <span class="typed"><span class="type">StringBuilder</span><a href="#38402">buf</a></span>.<span class="typed"><span class="type">(String)StringBuilder</span><a id="23690">append</a></span>(<span class="typed"><span class="type">java.lang.String</span><a href="#38401">name</a></span>.<span class="typed"><span class="type">(Int,Int)java.lang.String</span><a id="5855">substring</a></span>(<span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>, <span class="typed"><span class="type">Int</span><a href="#38404">i</a></span>))
              }
              <span class="typed"><span class="type">StringBuilder</span><a href="#38402">buf</a></span>.<span class="typed"><span class="type">(Char)StringBuilder</span><a id="23697">append</a></span>(<span class="typed"><span class="type">scala.tools.nsc.util.NameTransformer.OpCodes</span><a href="#38429">ops</a></span>.<span class="typed"><span class="type">=&gt; Char</span><a href="#38220">op</a></span>)
              <span class="typed"><span class="type">Int</span><a href="#38404">i</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">+=</a></span> <span class="typed"><span class="type">scala.tools.nsc.util.NameTransformer.OpCodes</span><a href="#38429">ops</a></span>.<span class="typed"><span class="type">=&gt; String</span><a href="#38222">code</a></span>.<span class="typed"><span class="type">()Int</span><a id="5821">length</a></span>()
            }
            <span class="comment">/* Handle the decoding of Unicode glyphs that are 
             * not valid Java/JVM identifiers */</span>
          } <span class="keyword">else</span> <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> ((<span class="typed"><span class="type">Int</span><a href="#38403">len</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3148">-</a></span> <span class="typed"><span class="type">Int</span><a href="#38404">i</a></span>) <span class="typed"><span class="type">(Int)Boolean</span><a id="3146">&gt;=</a></span> <span class="typed"><span class="type">Int(6)</span><span class="int">6</span></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="comment">// Check that there are enough characters left</span>
	             <span class="typed"><span class="type">Char</span><a href="#38435">ch1</a></span> <span class="typed"><span class="type">(Char)Boolean</span><a id="3018">==</a></span> <span class="typed"><span class="type">Char('u')</span><span class="char">'u'</span></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> 
                     ((<span class="typed"><span class="type">object java.lang.Character</span><a id="1946">Character</a></span>.<span class="typed"><span class="type">(Char)Boolean</span><a id="19690">isDigit</a></span>(<span class="typed"><span class="type">Char</span><a href="#38456">ch2</a></span>)) <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2750">||</a></span> 
		     (<span class="typed"><span class="type">Char('A')</span><span class="char">'A'</span></span> <span class="typed"><span class="type">(Char)Boolean</span><a id="3021">&lt;=</a></span> <span class="typed"><span class="type">Char</span><a href="#38456">ch2</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">Char</span><a href="#38456">ch2</a></span> <span class="typed"><span class="type">(Char)Boolean</span><a id="3021">&lt;=</a></span> <span class="typed"><span class="type">Char('F')</span><span class="char">'F'</span></span>))) {
            <span class="comment">/* Skip past &quot;$u&quot;, next four should be hexadecimal */</span>
            <span class="keyword">val</span> <span class="typed"><span class="type">java.lang.String</span><a id="38554">hex</a></span> = <span class="typed"><span class="type">java.lang.String</span><a href="#38401">name</a></span>.<span class="typed"><span class="type">(Int,Int)java.lang.String</span><a id="5855">substring</a></span>(<span class="typed"><span class="type">Int</span><a href="#38404">i</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3147">+</a></span><span class="typed"><span class="type">Int(2)</span><span class="int">2</span></span>, <span class="typed"><span class="type">Int</span><a href="#38404">i</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3147">+</a></span><span class="typed"><span class="type">Int(6)</span><span class="int">6</span></span>)
            <span class="keyword">try</span> {
              <span class="keyword">val</span> <span class="typed"><span class="type">Char</span><a id="38598">str</a></span> = <span class="typed"><span class="type">object java.lang.Integer</span><a id="1784">Integer</a></span>.<span class="typed"><span class="type">(java.lang.String,Int)Int</span><a id="26741">parseInt</a></span>(<span class="typed"><span class="type">java.lang.String</span><a href="#38554">hex</a></span>, <span class="typed"><span class="type">Int(16)</span><span class="int">16</span></span>).<span class="typed"><span class="type">=&gt; Char</span><a id="3084">toChar</a></span>
              <span class="typed"><span class="type">Any</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">StringBuilder</span><a href="#38402">buf</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5794">eq</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>) {
                <span class="typed"><span class="type">StringBuilder</span><a href="#38402">buf</a></span> = <span class="typed"><span class="type">()StringBuilder</span><a id="23671" class="keyword">new</a></span> <span class="typed"><span class="type">StringBuilder</span><a id="1435">StringBuilder</a></span>()
                <span class="typed"><span class="type">StringBuilder</span><a href="#38402">buf</a></span>.<span class="typed"><span class="type">(String)StringBuilder</span><a id="23690">append</a></span>(<span class="typed"><span class="type">java.lang.String</span><a href="#38401">name</a></span>.<span class="typed"><span class="type">(Int,Int)java.lang.String</span><a id="5855">substring</a></span>(<span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>, <span class="typed"><span class="type">Int</span><a href="#38404">i</a></span>))
              }
              <span class="typed"><span class="type">StringBuilder</span><a href="#38402">buf</a></span>.<span class="typed"><span class="type">(Char)StringBuilder</span><a id="23697">append</a></span>(<span class="typed"><span class="type">Char</span><a href="#38598">str</a></span>)
              <span class="comment">/* 2 for &quot;$u&quot;, 4 for hexadecimal number */</span>
              <span class="typed"><span class="type">Int</span><a href="#38404">i</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">+=</a></span> <span class="typed"><span class="type">Int(6)</span><span class="int">6</span></span>
              <span class="typed"><span class="type">Boolean</span><a href="#38430">unicode</a></span> = <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>
            } <span class="keyword">catch</span> {
              <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> _:<span class="typed"><span class="type">NumberFormatException</span><a id="2104">NumberFormatException</a></span> =&gt;
                <span class="comment">/* &lt;code&gt;hex&lt;/code&gt; did not decode to a hexadecimal number, so
                 * do nothing. */</span>
            }
                       }
        }
      }
      <span class="comment">/* If we didn't see an opcode or encoded Unicode glyph, and the
        buffer is non-empty, write the current character and advance
         one */</span> 
      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> ((<span class="typed"><span class="type">scala.tools.nsc.util.NameTransformer.OpCodes</span><a href="#38429">ops</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5794">eq</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>) <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">Boolean</span><a href="#38430">unicode</a></span>) { 
	<span class="typed"><span class="type">Any</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">StringBuilder</span><a href="#38402">buf</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5795">ne</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>)
          <span class="typed"><span class="type">StringBuilder</span><a href="#38402">buf</a></span>.<span class="typed"><span class="type">(Char)StringBuilder</span><a id="23697">append</a></span>(<span class="typed"><span class="type">Char</span><a href="#38431">c</a></span>) 
	<span class="typed"><span class="type">Int</span><a href="#38404">i</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">+=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span> 
      } 
    }
    <span class="comment">//System.out.println(&quot;= &quot; + (if (buf == null) name else buf.toString()));//DEBUG</span>
    <span class="typed"><span class="type">String</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">StringBuilder</span><a href="#38402">buf</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5794">eq</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>) <span class="typed"><span class="type">java.lang.String</span><a href="#38401">name</a></span> <span class="keyword">else</span> <span class="typed"><span class="type">StringBuilder</span><a href="#38402">buf</a></span>.<span class="typed"><span class="type">()String</span><a id="23723">toString</a></span>()
  }
}

        </pre>
    </body>
</html>