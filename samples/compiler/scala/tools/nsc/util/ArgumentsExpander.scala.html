<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/util/ArgumentsExpander.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style">
    </head>
    <body>
        <pre>
<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> util

<span class="keyword">import</span> java.io.{FileReader, BufferedReader, StreamTokenizer, FileNotFoundException}
<span class="keyword">import</span> scala.tools.nsc.io.AbstractFile
<span class="keyword">import</span> scala.collection.mutable.ListBuffer

/**
 * Expands all arguments starting with @ to the contents of the
 * file named like each argument.
 */
<span class="keyword">object</span> <a title="object scala.tools.nsc.util.ArgumentsExpander" id="14582">ArgumentsExpander</a> <a title="ScalaObject" id="977">{</a>

  <span class="keyword">def</span> <a title="(arg: String)List[String]" id="329637">expandArg</a>(<a title="String" id="329639">arg</a>: <span title="String">String</span>): <span title="List[String]">List</span>[String] =
    <a href="#329638" title="(fileName: String)List[String]">expandFromFile</a>(<a href="#329639" title="String">arg</a>.<a title="(x$1: Int)java.lang.String" id="7083">substring</a>(<span title="Int(1)" class="int">1</span>))

  /*
   * Extracts all the arguments in a specified file.
   * Throws FileNotFoundException if the file does not exist.
   */
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(fileName: String)List[String]" id="329638">expandFromFile</a>(<a title="String" id="777004">fileName</a>: <span title="String">String</span>): <span title="List[String]">List</span>[String]  = {
    <span class="keyword">val</span> <a title="scala.tools.nsc.io.AbstractFile" id="777012">f</a> = <a href="../io/AbstractFile.scala.html#20690" title="object scala.tools.nsc.io.AbstractFile">AbstractFile</a>.<a href="../io/AbstractFile.scala.html#121545" title="(path: String)scala.tools.nsc.io.AbstractFile">getFile</a>(<a href="#777004" title="String">fileName</a>)
    <span title="Unit" class="keyword">if</span> (<a href="#777012" title="(x$1: AnyRef)Boolean" id="6611">f</a> eq <span title="Null(null)" class="keyword">null</span>) <span title="Nothing" class="keyword">throw</span> <a title="(x$1: java.lang.String)java.io.FileNotFoundException" id="580235" class="keyword">new</a> <a title="java.io.FileNotFoundException" id="3720">FileNotFoundException</a>(
      <span title="(x$1: Any)java.lang.String" class="string">&quot;argument file &quot;</span><span title="(x$1: Any)java.lang.String">+</span> <a href="#777004" title="String">fileName</a> +<span title="java.lang.String(&quot; could not be found&quot;)" class="string">&quot; could not be found&quot;</span>)

    <span class="keyword">val</span> <a title="java.io.BufferedReader" id="777013">in</a> = <a title="(x$1: java.io.Reader)java.io.BufferedReader" id="39072" class="keyword">new</a> <a title="java.io.BufferedReader" id="3690">BufferedReader</a>(<a title="(x$1: java.io.File)java.io.FileReader" id="566002" class="keyword">new</a> <a title="java.io.FileReader" id="3999">FileReader</a>(<a href="#777012" title="scala.tools.nsc.io.AbstractFile">f</a>.<a href="../io/AbstractFile.scala.html#51640" title="=&gt; java.io.File">file</a>))

    <span class="keyword">val</span> <a title="java.io.StreamTokenizer" id="777014">tokenizer</a> = <a title="(x$1: java.io.Reader)java.io.StreamTokenizer" id="777052" class="keyword">new</a> <a title="java.io.StreamTokenizer" id="3951">StreamTokenizer</a>( <a href="#777013" title="java.io.BufferedReader">in</a> )
    <a href="#777014" title="java.io.StreamTokenizer">tokenizer</a>.<a title="()Unit" id="777054">resetSyntax</a>
    <a href="#777014" title="java.io.StreamTokenizer">tokenizer</a>.<a title="(x$1: Int,x$2: Int)Unit" id="777055">wordChars</a>(<span title="Int(32)" class="char">' '</span>, <span title="Int(255)" class="int">255</span>)
    <a href="#777014" title="java.io.StreamTokenizer">tokenizer</a>.<a title="(x$1: Int,x$2: Int)Unit" id="777058">whitespaceChars</a>(<span title="Int(0)" class="int">0</span>, <span title="Int(32)" class="char">' '</span>)
    <a href="#777014" title="java.io.StreamTokenizer">tokenizer</a>.<a title="(x$1: Int)Unit" id="777066">commentChar</a>(<span title="Int(35)" class="char">'#'</span>)
    <a href="#777014" title="java.io.StreamTokenizer">tokenizer</a>.<span title="(x$1: Int)Unit">quoteChar</span>(<span title="Int(34)" class="char">'&quot;'</span>)
    <a href="#777014" title="java.io.StreamTokenizer">tokenizer</a>.<span title="(x$1: Int)Unit">quoteChar</span>(<span title="Int(39)" class="char">'\''</span>)

    <span class="keyword">val</span> <a title="scala.collection.mutable.ListBuffer[String]" id="777015">ts</a> = <span title="scala.collection.mutable.ListBuffer[String]" class="keyword">new</span> <a title="scala.collection.mutable.ListBuffer[String]" id="24978">ListBuffer</a>[String]
    <span title="Unit" class="keyword">while</span> (<a href="#777014" title="java.io.StreamTokenizer">tokenizer</a>.<a title="()Int" id="777079">nextToken</a><a title="(x$1: Int)Boolean" id="2975">(</a>) != StreamTokenizer.<span title="Int(-1)">TT_EOF</span>) {
      <a href="#777015" title="(x: String)ts.type" id="61852">ts</a> <a href="#777016" title="()Unit">+=</a> <a href="#777014" title="java.io.StreamTokenizer">tokenizer</a>.<a title="java.lang.String" id="777048">sval</a>
    }
    <a href="#777013" title="java.io.BufferedReader">in</a>.<a title="()Unit" id="39089">close</a>()
    <a href="#777015" title="scala.collection.mutable.ListBuffer[String]">ts</a>.<a title="=&gt; List[String]" id="61864">toList</a>
  }
}

        </pre>
    </body>
</html>