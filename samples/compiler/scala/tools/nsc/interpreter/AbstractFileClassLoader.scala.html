<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/interpreter/AbstractFileClassLoader.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style">
    </head>
    <body>
        <pre>
/* NSC -- new Scala compiler
 * Copyright 2005-2009 LAMP/EPFL
 */
// $Id: $

<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> interpreter

<span class="keyword">import</span> scala.tools.nsc.io.AbstractFile
<span class="keyword">import</span> scala.util.ScalaClassLoader

/**
 * A class loader that loads files from a {@link scala.tools.nsc.io.AbstractFile}.
 * 
 * @author Lex Spoon
 */
<span class="keyword">class</span> <a title="class AbstractFileClassLoader extends java.lang.ClassLoader with scala.util.ScalaClassLoader with ScalaObject" id="22183">AbstractFileClassLoader</a><a title="ScalaObject" id="959">(</a><a title="scala.tools.nsc.io.AbstractFile" id="118855">root</a>: <a href="../io/AbstractFile.scala.html#20548" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a>, <a title="java.lang.ClassLoader" id="118856">parent</a>: <span title="java.lang.ClassLoader">ClassLoader</span>)
    <span class="keyword">extends</span> <span title="java.lang.ClassLoader">ClassLoader</span>(<a href="#118856" title="java.lang.ClassLoader">parent</a>)
    <span class="keyword">with</span> <a title="scala.util.ScalaClassLoader" id="27736">ScalaClassLoader</a>
{ 
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(name: String)Class[_]" id="118854">findClass</a>(<a title="String" id="582595">name</a>: <a title="String" id="1605">String</a>): <a title="Class[_]" id="1416">Class</a>[_] = {
    <span class="keyword">def</span> <a title="[T](x: T)T" id="582601">onull</a>[<a title="&gt;: Nothing &lt;: Any" id="582603">T</a><a id="1">]</a>(<a title="T" id="582607">x</a>: <a href="#582603" title="T">T</a>): <a href="#582603" title="T">T</a> = <span title="T" class="keyword">if</span> (<a href="#582607" title="(x$1: Any)Boolean" id="3612">x</a> == <span title="Null(null)" class="keyword">null</span>) <span title="Nothing" class="keyword">throw</span> <a title="(x$1: java.lang.String)java.lang.ClassNotFoundException" id="132649" class="keyword">new</a> <a title="java.lang.ClassNotFoundException" id="1473">ClassNotFoundException</a>(<a href="#582595" title="String">name</a>) <span class="keyword">else</span> <a href="#582607" title="T">x</a>
    <span class="keyword">var</span> <a title="scala.tools.nsc.io.AbstractFile" id="582604">file</a>: <a href="../io/AbstractFile.scala.html#20548" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a> = <a href="#118855" title="scala.tools.nsc.io.AbstractFile">root</a>
    <span class="keyword">val</span> <a title="List[java.lang.String]" id="582605">pathParts</a> = <a href="#582595" title="String">name</a>.<a title="(x$1: java.lang.String)Array[java.lang.String]" id="7043">split</a>(<span title="java.lang.String(&quot;[./]&quot;)" class="string">&quot;[./]&quot;</span>).<a title="=&gt; List[java.lang.String]" id="25352">toList</a>
    
    <span class="keyword">for</span> (<a title="java.lang.String" id="582636">dirPart</a> &lt;- <a href="#582605" title="List[java.lang.String]">pathParts</a>.<a title="(f: (java.lang.String) =&gt; Unit)Unit" id="25321">init</a>)
      <a href="#582604" title="scala.tools.nsc.io.AbstractFile">file</a> = <a href="#582601" title="(x: scala.tools.nsc.io.AbstractFile)scala.tools.nsc.io.AbstractFile">onull</a>(<a href="#582604" title="scala.tools.nsc.io.AbstractFile">file</a>.<a href="../io/AbstractFile.scala.html#51399" title="(name: String,directory: Boolean)scala.tools.nsc.io.AbstractFile">lookupName</a>(<a href="#582636" title="java.lang.String">dirPart</a>, <span title="Boolean(true)" class="keyword">true</span>))
      
    <a href="#582604" title="scala.tools.nsc.io.AbstractFile">file</a> = <a href="#582601" title="(x: scala.tools.nsc.io.AbstractFile)scala.tools.nsc.io.AbstractFile">onull</a>(<a href="#582604" title="scala.tools.nsc.io.AbstractFile">file</a>.<a href="../io/AbstractFile.scala.html#51399" title="(name: String,directory: Boolean)scala.tools.nsc.io.AbstractFile">lookupName</a>(<a href="#582605" title="List[java.lang.String]">pathParts</a>.<a title="(x$1: Any)java.lang.String" id="28957">last</a>+<span title="java.lang.String(&quot;.class&quot;)" class="string">&quot;.class&quot;</span>, <span title="Boolean(false)" class="keyword">false</span>))
    <span class="keyword">val</span> <a title="Array[Byte]" id="582606">bytes</a> = <a href="#582604" title="scala.tools.nsc.io.AbstractFile">file</a>.<a href="../io/AbstractFile.scala.html#51397" title="=&gt; Array[Byte]">toByteArray</a>
    <a href="#22183" title="(x$1: java.lang.String,x$2: Array[Byte],x$3: Int,x$4: Int)java.lang.Class[_]" id="118163">defineClass</a>(<a href="#582595" title="String">name</a>, <a href="#582606" title="Array[Byte]">bytes</a>, <span title="Int(0)" class="int">0</span>, <a href="#582606" title="Array[Byte]">bytes</a>.<a title="=&gt; Int" id="24569">length</a>)
  }
}

        </pre>
    </body>
</html>