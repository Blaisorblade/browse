<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/interpreter/JLineReader.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style">
    </head>
    <body>
        <pre>
/* NSC -- new Scala compiler
 * Copyright 2005-2009 LAMP/EPFL
 * @author Stepan Koltsov
 */
// $Id: JLineReader.scala 18387 2009-07-24 15:28:37Z odersky $

<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> interpreter

<span class="keyword">import</span> java.io.File
<span class="keyword">import</span> jline.{ History, ConsoleReader, ArgumentCompletor }

/** Reads from the console using JLine */
<span class="keyword">class</span> <a title="class JLineReader extends java.lang.Object with scala.tools.nsc.interpreter.InteractiveReader with ScalaObject" id="22289">JLineReader</a><a title="ScalaObject" id="977">(</a><a title="scala.tools.nsc.Interpreter" id="593313">interpreter</a>: <a href="../Interpreter.scala.html#8439" title="scala.tools.nsc.Interpreter">Interpreter</a>) <span class="keyword">extends</span> <a href="InteractiveReader.scala.html#22274" title="scala.tools.nsc.interpreter.InteractiveReader">InteractiveReader</a> {
  <span class="keyword">def</span> <a title="()scala.tools.nsc.interpreter.JLineReader" id="592807" class="keyword">this</a>() = <a href="#22289" title="JLineReader.this.type" class="keyword">this</a>(<span title="Null(null)" class="keyword">null</span>)
  <span class="keyword">val</span> <a title="jline.ConsoleReader" id="592808">consoleReader</a> = {
    <span class="keyword">val</span> <a title="jline.History" id="592815">history</a> = <span class="keyword">try</span> {
      <a title="(x$1: java.io.File)jline.History" id="592818" class="keyword">new</a> jline.<span title="jline.History">History</span>(<a title="(x$1: java.lang.String,x$2: java.lang.String)java.io.File" id="35360" class="keyword">new</a> <a title="java.io.File" id="3828">File</a>(<a title="object java.lang.System" id="1651">System</a>.<a title="(x$1: java.lang.String)java.lang.String" id="65327">getProperty</a>(<span title="java.lang.String(&quot;user.home&quot;)" class="string">&quot;user.home&quot;</span>), <span title="java.lang.String(&quot;.scala_history&quot;)" class="string">&quot;.scala_history&quot;</span>))
    } <span class="keyword">catch</span> {
      // do not store history if error
      <span title="jline.History" class="keyword">case</span> _ =&gt; <span title="jline.History" class="keyword">new</span> jline.<span title="jline.History">History</span>()
    }
    <span class="keyword">val</span> <a title="jline.ConsoleReader" id="592816">r</a> = <span title="jline.ConsoleReader" class="keyword">new</span> jline.<a title="jline.ConsoleReader" id="126558">ConsoleReader</a>()
    <a href="#592816" title="(x$1: jline.History)Unit" id="592983">r</a> setHistory <a href="#592815" title="jline.History">history</a>
    <a href="#592816" title="(x$1: Boolean)Unit" id="592920">r</a> setBellEnabled <span title="Boolean(false)" class="keyword">false</span>
    
    <span title="Unit" class="keyword">if</span> (<a href="#593313" title="(x$1: AnyRef)Boolean" id="6609">interpreter</a> != <span title="Null(null)" class="keyword">null</span>) {
      // have to specify all delimiters for completion to work nicely
      <span class="keyword">val</span> <a title="&lt;refinement&gt; extends jline.ArgumentCompletor.AbstractArgumentDelimiter" id="593104">delims</a> = <a href="#126601" title="jline.ArgumentCompletor.AbstractArgumentDelimiter{ ... }" class="keyword">new</a> <a title="anonymous class $anon extends jline.ArgumentCompletor.AbstractArgumentDelimiter" id="126601">ArgumentCompletor</a>.<a title="jline.ArgumentCompletor.AbstractArgumentDelimiter" id="593113">AbstractArgumentDelimiter</a> {
        <span class="keyword">val</span> <a title="Array[Char]" id="593170">delimChars</a> = <a title="implicit scala.Predef.stringWrapper : (x: String)scala.runtime.RichString" id="708" class="string">&quot;(){}[],`;'\&quot; \t&quot;</a>.<a title="(implicit evidence$1: scala.reflect.ClassManifest[Char])Array[Char]" id="27759">toArray</a>
        <span class="keyword">def</span> <a title="(s: String,pos: Int)Boolean" id="593172">isDelimiterChar</a>(<a title="String" id="593209">s</a>: <span title="String">String</span>, <a title="Int" id="593210">pos</a>: <a title="Int" id="2198">Int</a>) = <a href="#593170" title="(elem: Any)Boolean" id="25768">delimChars</a> contains <a href="#593209" title="String">s</a>.<a title="(x$1: Int)Char" id="6986">charAt</a>(<a href="#593210" title="Int">pos</a>)
      }
      <span class="keyword">val</span> <a title="jline.ArgumentCompletor" id="593105">comp</a> = <a title="(x$1: jline.Completor,x$2: jline.ArgumentCompletor.ArgumentDelimiter)jline.ArgumentCompletor" id="593130" class="keyword">new</a> <a title="jline.ArgumentCompletor" id="126600">ArgumentCompletor</a>(<span title="scala.tools.nsc.interpreter.Completion" class="keyword">new</span> <a href="Completion.scala.html#22352" title="scala.tools.nsc.interpreter.Completion">Completion</a>(<a href="#593313" title="scala.tools.nsc.Interpreter">interpreter</a>), <a href="#593104" title="&lt;refinement&gt; extends jline.ArgumentCompletor.AbstractArgumentDelimiter">delims</a>)
      <a href="#593105" title="(x$1: Boolean)Unit" id="593136">comp</a> setStrict <span title="Boolean(false)" class="keyword">false</span>
      <a href="#592816" title="(x$1: jline.Completor)Boolean" id="592952">r</a> addCompletor <a href="#593105" title="jline.ArgumentCompletor">comp</a>
      // XXX make this use a setting
      <a href="#592816" title="(x$1: Int)Unit" id="592925">r</a> setAutoprintThreshhold <span title="Int(250)" class="int">250</span>
    }
       
    <a href="#592816" title="jline.ConsoleReader">r</a>
  }
  
  <span class="keyword">def</span> <a title="(prompt: String)java.lang.String" id="592810">readOneLine</a>(<a title="String" id="593325">prompt</a>: <span title="String">String</span>) = <a href="#592808" title="(x$1: java.lang.String)java.lang.String" id="592937">consoleReader</a> readLine <a href="#593325" title="String">prompt</a>
  <span class="keyword">val</span> <a title="Boolean" id="592811">interactive</a> = <span title="Boolean(true)" class="keyword">true</span>
}


        </pre>
    </body>
</html>