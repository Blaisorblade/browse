<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/plugins/Plugins.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style">
    </head>
    <body>
        <pre>
/* NSC -- new Scala compiler
 * Copyright 2007-2009 LAMP/EPFL
 * @author Lex Spoon
 * Updated by Anders Bach Nielsen
 */
// $Id: Plugins.scala 18387 2009-07-24 15:28:37Z odersky $

<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> plugins

<span class="keyword">import</span> java.io.File

/** Support for run-time loading of compiler plugins.
 *
 *  @author Lex Spoon 
 *  @version 1.1, 2009/1/2
 *  Updated 2009/1/2 by Anders Bach Nielsen: Added features to implement SIP 00002
 */
<span class="keyword">trait</span> <a title="trait Plugins extends java.lang.Object with ScalaObject" id="22110">Plugins</a> <a title="ScalaObject" id="977">{</a> self: Global =&gt;

  /** Load a rough list of the plugins.  For speed, it
   *  does not instantiate a compiler run.  Therefore it cannot
   *  test for same-named phases or other problems that are
   *  filtered from the final list of plugins.
   */
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="()List[scala.tools.nsc.plugins.Plugin]" id="39431">loadRoughPluginsList</a>(): <span title="List[scala.tools.nsc.plugins.Plugin]">List</span>[Plugin] = {
    <span class="keyword">val</span> <a title="List[java.io.File]" id="578305">jars</a> = <a href="../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../Settings.scala.html#37297" title="=&gt; scala.tools.nsc.Settings.MultiStringSetting">plugin</a>.<a href="../Settings.scala.html#37988" title="=&gt; List[java.lang.String]">value</a>.<span title="(f: (java.lang.String) =&gt; java.io.File)(implicit bf: scala.collection.generic.BuilderFactory[java.io.File,List[java.io.File],List[java.lang.String]])List[java.io.File]">map</span><span title="scala.collection.generic.BuilderFactory[java.io.File,List[java.io.File],List#Coll]">(</span><span title="java.io.File" class="keyword">new</span> <span title="java.io.File">File</span>(<a href="#578317" title="java.lang.String">_</a>))
    <span class="keyword">val</span> <a title="List[java.io.File]" id="578306">dirs</a> =
      <span class="keyword">for</span> (<a title="java.lang.String" id="578423">name</a> &lt;- <a href="../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../Settings.scala.html#37305" title="=&gt; scala.tools.nsc.Settings.StringSetting">pluginsDir</a>.<a href="../Settings.scala.html#37988" title="=&gt; java.lang.String">value</a>.<a title="(x$1: java.lang.String)Array[java.lang.String]" id="7112">split</a>(<a title="object java.io.File" id="3829">File</a>.<a title="java.lang.String" id="35355">pathSeparator</a>).<a title="(f: (java.lang.String) =&gt; java.io.File)(implicit bf: scala.collection.generic.BuilderFactory[java.io.File,List[java.io.File],List[java.lang.String]])List[java.io.File]" id="25511">toList</a>)
	<span class="keyword">yield</span> <span title="java.io.File" class="keyword">new</span> <span title="java.io.File">File</span>(<a href="#578423" title="java.lang.String">name</a>)

    <span class="keyword">for</span> (<a title="scala.tools.nsc.plugins.Plugin.AnyClass" id="578526">plugClass</a> &lt;- <a href="Plugin.scala.html#22075" title="object scala.tools.nsc.plugins.Plugin">Plugin</a>.<a href="Plugin.scala.html#559164" title="(jars: List[java.io.File],dirs: List[java.io.File],ignoring: List[String])List[scala.tools.nsc.plugins.Plugin.AnyClass]">loadAllFrom</a><span title="(f: (scala.tools.nsc.plugins.Plugin.AnyClass) =&gt; scala.tools.nsc.plugins.Plugin)(implicit bf: scala.collection.generic.BuilderFactory[scala.tools.nsc.plugins.Plugin,List[scala.tools.nsc.plugins.Plugin],List[scala.tools.nsc.plugins.Plugin.AnyClass]])List[scala.tools.nsc.plugins.Plugin]">(</span><a href="#578305" title="List[java.io.File]">jars</a>, <a href="#578306" title="List[java.io.File]">dirs</a>, <a href="../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../Settings.scala.html#37299" title="=&gt; scala.tools.nsc.Settings.MultiStringSetting">disable</a>.<a href="../Settings.scala.html#37988" title="=&gt; List[java.lang.String]">value</a>))
    <span class="keyword">yield</span> <a href="Plugin.scala.html#22075" title="object scala.tools.nsc.plugins.Plugin">Plugin</a>.<a href="Plugin.scala.html#559165" title="(clazz: scala.tools.nsc.plugins.Plugin.AnyClass,global: scala.tools.nsc.Global)scala.tools.nsc.plugins.Plugin">instantiate</a>(<a href="#578526" title="scala.tools.nsc.plugins.Plugin.AnyClass">plugClass</a>, <a href="#22110" title="scala.tools.nsc.Global" class="keyword">this</a>)
  }

  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Option[List[scala.tools.nsc.plugins.Plugin]]" id="39433">roughPluginsListCache</a>: <span title="Option[List[scala.tools.nsc.plugins.Plugin]]">Option</span>[List[Plugin]] = <span title="object None">None</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; List[scala.tools.nsc.plugins.Plugin]" id="39435">roughPluginsList</a>: <span title="List[scala.tools.nsc.plugins.Plugin]">List</span>[Plugin] =
    <a href="#39433" title="=&gt; Option[List[scala.tools.nsc.plugins.Plugin]]">roughPluginsListCache</a> <span title="List[scala.tools.nsc.plugins.Plugin]" class="keyword">match</span> {
      <span title="List[scala.tools.nsc.plugins.Plugin]" class="keyword">case</span> Some(<a title="List[scala.tools.nsc.plugins.Plugin]" id="578561">list</a>) =&gt; <a href="#578561" title="List[scala.tools.nsc.plugins.Plugin]">list</a>
      <span title="List[scala.tools.nsc.plugins.Plugin]" class="keyword">case</span> <span title="object None">None</span> =&gt;
	<a href="#39433" title="(x$1: Option[List[scala.tools.nsc.plugins.Plugin]])Unit">roughPluginsListCache</a> = <span title="(x: List[scala.tools.nsc.plugins.Plugin])Some[List[scala.tools.nsc.plugins.Plugin]]">Some</span>(<a href="#39431" title="()List[scala.tools.nsc.plugins.Plugin]">loadRoughPluginsList</a>)
        <a href="#39433" title="=&gt; Option[List[scala.tools.nsc.plugins.Plugin]]">roughPluginsListCache</a>.<span title="=&gt; List[scala.tools.nsc.plugins.Plugin]">get</span>
    }

  /** Load all available plugins.  Skips plugins that
   *  either have the same name as another one, or which
   *  define a phase name that another one does.
   */
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="()List[scala.tools.nsc.plugins.Plugin]" id="39436">loadPlugins</a>(): <span title="List[scala.tools.nsc.plugins.Plugin]">List</span>[Plugin] = {
    // remove any with conflicting names or subcomponent names
    <span class="keyword">def</span> <a title="(plugins: List[scala.tools.nsc.plugins.Plugin],plugNames: Set[String],phaseNames: Set[String])List[scala.tools.nsc.plugins.Plugin]" id="578578">pick</a>(
      <a title="List[scala.tools.nsc.plugins.Plugin]" id="578580">plugins</a>: <span title="List[scala.tools.nsc.plugins.Plugin]">List</span>[Plugin], 
      <a title="Set[String]" id="578581">plugNames</a>: <span title="Set[String]">Set</span>[String], 
      <a title="Set[String]" id="578582">phaseNames</a>: <span title="Set[String]">Set</span>[String]): <span title="List[scala.tools.nsc.plugins.Plugin]">List</span>[Plugin] =
    {
      <a href="#578580" title="List[scala.tools.nsc.plugins.Plugin]">plugins</a> <span title="List[scala.tools.nsc.plugins.Plugin]" class="keyword">match</span> {
	<span title="scala.collection.immutable.Nil.type" class="keyword">case</span> <span title="object Nil">Nil</span> =&gt; <span title="object Nil">Nil</span>
	<span title="List[scala.tools.nsc.plugins.Plugin]" class="keyword">case</span> <a title="scala.tools.nsc.plugins.Plugin" id="578587">plug</a> :: <a title="List[scala.tools.nsc.plugins.Plugin]" id="578588">rest</a> =&gt;
	  <span class="keyword">val</span> <a title="scala.collection.immutable.Set[String]" id="578591">plugPhaseNames</a> = <span title="=&gt; collection.immutable.Set.type">Set</span>.<span title="(elems: Traversable[String])scala.collection.immutable.Set[String]">empty</span> ++ <a href="#578587" title="scala.tools.nsc.plugins.Plugin">plug</a>.<a href="Plugin.scala.html#559140" title="=&gt; List[scala.tools.nsc.plugins.PluginComponent]">components</a>.<span title="(f: (scala.tools.nsc.plugins.PluginComponent) =&gt; String)(implicit bf: scala.collection.generic.BuilderFactory[String,List[String],List[scala.tools.nsc.plugins.PluginComponent]])List[String]">map</span><span title="scala.collection.generic.BuilderFactory[String,List[String],List#Coll]">(</span><a href="#578658" title="scala.tools.nsc.plugins.PluginComponent">_</a>.<a href="../SubComponent.scala.html#39854" title="=&gt; String">phaseName</a>)
	  <span class="keyword">def</span> <a title="=&gt; List[scala.tools.nsc.plugins.Plugin]" id="578592">withoutPlug</a> = <a href="#578578" title="(plugins: List[scala.tools.nsc.plugins.Plugin],plugNames: Set[String],phaseNames: Set[String])List[scala.tools.nsc.plugins.Plugin]">pick</a>(<a href="#578588" title="List[scala.tools.nsc.plugins.Plugin]">rest</a>, <a href="#578581" title="Set[String]">plugNames</a>, <a href="#578591" title="scala.collection.immutable.Set[String]">plugPhaseNames</a>)
	  <span class="keyword">def</span> <a title="=&gt; List[scala.tools.nsc.plugins.Plugin]" id="578593">withPlug</a> =
	    (<a href="#578587" title="scala.tools.nsc.plugins.Plugin">plug</a> <a href="#578748" title="scala.tools.nsc.plugins.Plugin">::</a> 
	     <a href="#578578" title="(plugins: List[scala.tools.nsc.plugins.Plugin],plugNames: Set[String],phaseNames: Set[String])List[scala.tools.nsc.plugins.Plugin]">pick</a><a title="(x: scala.tools.nsc.plugins.Plugin)List[scala.tools.nsc.plugins.Plugin]" id="24417">(</a><a href="#578588" title="List[scala.tools.nsc.plugins.Plugin]">rest</a>, 
		  <a href="#578581" title="(elem: String)scala.collection.immutable.Set[String]" id="39566">plugNames</a>+<a href="#578587" title="scala.tools.nsc.plugins.Plugin">plug</a>.<a href="Plugin.scala.html#559139" title="=&gt; String">name</a>,
		  <a href="#578582" title="(elems: Traversable[String])scala.collection.immutable.Set[String]">phaseNames</a>++<a href="#578591" title="scala.collection.immutable.Set[String]">plugPhaseNames</a>))

	  <span title="List[scala.tools.nsc.plugins.Plugin]" class="keyword">if</span> (<a href="#578581" title="Set[String]">plugNames</a>.<a title="(elem: String)Boolean" id="39564">contains</a>(<a href="#578587" title="scala.tools.nsc.plugins.Plugin">plug</a>.<a href="Plugin.scala.html#559139" title="=&gt; String">name</a>)) {
	    <span title="Unit" class="keyword">if</span> (<a href="../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../Settings.scala.html#37265" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">verbose</a>.<a href="../Settings.scala.html#37988" title="=&gt; Boolean">value</a>)
	      <a href="../Global.scala.html#39294" title="(msg: String)Unit">inform</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;[skipping a repeated plugin: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#578587" title="scala.tools.nsc.plugins.Plugin">plug</a>.<a href="Plugin.scala.html#559139" title="=&gt; String">name</a> + <span title="java.lang.String(&quot;]&quot;)" class="string">&quot;]&quot;</span>)
	    <a href="#578592" title="=&gt; List[scala.tools.nsc.plugins.Plugin]">withoutPlug</a>
	  } <span class="keyword">else</span> <span title="List[scala.tools.nsc.plugins.Plugin]" class="keyword">if</span> (<a href="../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../Settings.scala.html#37299" title="=&gt; scala.tools.nsc.Settings.MultiStringSetting">disable</a>.<a href="../Settings.scala.html#37988" title="(elem: Any)Boolean" id="25768">value</a> contains(<a href="#578587" title="scala.tools.nsc.plugins.Plugin">plug</a>.<a href="Plugin.scala.html#559139" title="=&gt; String">name</a>)) {
	    <span title="Unit" class="keyword">if</span> (<a href="../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../Settings.scala.html#37265" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">verbose</a>.<a href="../Settings.scala.html#37988" title="=&gt; Boolean">value</a>)
	      <a href="../Global.scala.html#39294" title="(msg: String)Unit">inform</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;[disabling plugin: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#578587" title="scala.tools.nsc.plugins.Plugin">plug</a>.<a href="Plugin.scala.html#559139" title="=&gt; String">name</a> + <span title="java.lang.String(&quot;]&quot;)" class="string">&quot;]&quot;</span>)
	    <a href="#578592" title="=&gt; List[scala.tools.nsc.plugins.Plugin]">withoutPlug</a>
	  } <span class="keyword">else</span> {
	    <span class="keyword">val</span> <a title="scala.collection.immutable.Set[String]" id="578921">commonPhases</a> = <a href="#578582" title="Set[String]">phaseNames</a>.<a title="(that: scala.collection.Set[String])scala.collection.immutable.Set[String]" id="39573">intersect</a>(<a href="#578591" title="scala.collection.immutable.Set[String]">plugPhaseNames</a>)
	    <span title="List[scala.tools.nsc.plugins.Plugin]" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="#578921" title="scala.collection.immutable.Set[String]">commonPhases</a>.<a title="=&gt; Boolean" id="39570">isEmpty</a>) {
	      <span title="Unit" class="keyword">if</span> (<a href="../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../Settings.scala.html#37265" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">verbose</a>.<a href="../Settings.scala.html#37988" title="=&gt; Boolean">value</a>)
		<a href="../Global.scala.html#39294" title="(msg: String)Unit">inform</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;[skipping plugin &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#578587" title="scala.tools.nsc.plugins.Plugin">plug</a>.<a href="Plugin.scala.html#559139" title="=&gt; String">name</a> <span title="(x$1: Any)java.lang.String">+</span>
		       <span title="java.lang.String(&quot;because it repeats phase names: &quot;)" class="string">&quot;because it repeats phase names: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span>
		       <a href="#578921" title="scala.collection.immutable.Set[String]">commonPhases</a>.<span title="(sep: String)String">mkString</span>(<span title="java.lang.String(&quot;, &quot;)" class="string">&quot;, &quot;</span>) + <span title="java.lang.String(&quot;]&quot;)" class="string">&quot;]&quot;</span>)
	      <a href="#578592" title="=&gt; List[scala.tools.nsc.plugins.Plugin]">withoutPlug</a>
	    } <span class="keyword">else</span> {
	      <span title="Unit" class="keyword">if</span> (<a href="../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../Settings.scala.html#37265" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">verbose</a>.<a href="../Settings.scala.html#37988" title="=&gt; Boolean">value</a>)
		<a href="../Global.scala.html#39294" title="(msg: String)Unit">inform</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;[loaded plugin &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#578587" title="scala.tools.nsc.plugins.Plugin">plug</a>.<a href="Plugin.scala.html#559139" title="=&gt; String">name</a> + <span title="java.lang.String(&quot;]&quot;)" class="string">&quot;]&quot;</span>)
	      <a href="#578593" title="=&gt; List[scala.tools.nsc.plugins.Plugin]">withPlug</a>
	    }
	  }
      }
    }

    <span class="keyword">val</span> <a title="List[scala.tools.nsc.plugins.Plugin]" id="578579">plugs</a> =
    <a href="#578578" title="(plugins: List[scala.tools.nsc.plugins.Plugin],plugNames: Set[String],phaseNames: Set[String])List[scala.tools.nsc.plugins.Plugin]">pick</a>(<a href="#39435" title="=&gt; List[scala.tools.nsc.plugins.Plugin]">roughPluginsList</a>,
	 <span title="=&gt; collection.immutable.Set.type">Set</span>.<span title="scala.collection.immutable.Set[String]">empty</span>,
	 <span title="=&gt; collection.immutable.Set.type">Set</span>.<span title="(elems: Traversable[String])scala.collection.immutable.Set[String]">empty</span> ++ <a href="../Global.scala.html#39398" title="=&gt; scala.collection.mutable.HashSet[scala.tools.nsc.SubComponent]">phasesSet</a>.<span title="(f: (scala.tools.nsc.SubComponent) =&gt; String)(implicit bf: scala.collection.generic.BuilderFactory[String,scala.collection.mutable.HashSet[String],scala.collection.mutable.HashSet[scala.tools.nsc.SubComponent]])scala.collection.mutable.HashSet[String]">map</span><a title="scala.collection.generic.BuilderFactory[String,scala.collection.mutable.HashSet[String],scala.collection.mutable.HashSet#Coll]" id="24961">(</a><a href="#579026" title="scala.tools.nsc.SubComponent">_</a>.<a href="../SubComponent.scala.html#39854" title="=&gt; String">phaseName</a>))

    <span class="keyword">for</span> (<a title="java.lang.String" id="579134">req</a> &lt;- <a href="../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../Settings.scala.html#37303" title="=&gt; scala.tools.nsc.Settings.MultiStringSetting">require</a>.<a href="../Settings.scala.html#37988" title="(f: (java.lang.String) =&gt; Unit)Unit">value</a>; <span class="keyword">if</span> <span title="=&gt; Boolean">!</span><a href="#578579" title="List[scala.tools.nsc.plugins.Plugin]">plugs</a>.<span title="(p: (scala.tools.nsc.plugins.Plugin) =&gt; Boolean)Boolean">exists</span>(<a title="scala.tools.nsc.plugins.Plugin" id="579106">p</a> =&gt; <a href="#579106" title="scala.tools.nsc.plugins.Plugin">p</a>.<a href="Plugin.scala.html#559139" title="(x$1: AnyRef)Boolean" id="3647">name</a>==<a href="#579134" title="java.lang.String">req</a>))
      <a href="../Global.scala.html#39292" title="(msg: String)Unit">error</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Missing required plugin: &quot;</span> + <a href="#579134" title="java.lang.String">req</a>)

    
    <span class="keyword">for</span> (<a title="scala.tools.nsc.plugins.Plugin" id="579158">plug</a> &lt;- <a href="#578579" title="(f: (scala.tools.nsc.plugins.Plugin) =&gt; Unit)Unit">plugs</a>) {
      <span class="keyword">val</span> <a title="java.lang.String" id="579159">nameColon</a> = <a href="#579158" title="scala.tools.nsc.plugins.Plugin">plug</a>.<a href="Plugin.scala.html#559139" title="(x$1: Any)java.lang.String">name</a> + <span title="java.lang.String(&quot;:&quot;)" class="string">&quot;:&quot;</span>
      <span class="keyword">val</span> <a title="List[java.lang.String]" id="579160">opts</a> = <span class="keyword">for</span> {
	<a title="java.lang.String" id="579182">raw</a> &lt;- <a href="../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../Settings.scala.html#37387" title="=&gt; scala.tools.nsc.Settings.MultiStringSetting">pluginOptions</a>.<a href="../Settings.scala.html#37988" title="(f: (java.lang.String) =&gt; java.lang.String)(implicit bf: scala.collection.generic.BuilderFactory[java.lang.String,List[java.lang.String],List[java.lang.String]])List[java.lang.String]">value</a>
	<span class="keyword">if</span> <a href="#579182" title="java.lang.String">raw</a>.<span title="(x$1: java.lang.String)Boolean">startsWith</span>(<a href="#579159" title="java.lang.String">nameColon</a>)
      } <span class="keyword">yield</span> <a href="#579182" title="java.lang.String">raw</a>.<a title="(x$1: Int)java.lang.String" id="7083">substring</a>(<a href="#579159" title="java.lang.String">nameColon</a>.<a title="()Int" id="6984">length</a>)

      <span title="Unit" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="#579160" title="List[java.lang.String]">opts</a>.<a title="=&gt; Boolean" id="25593">isEmpty</a>)
	<a href="#579158" title="scala.tools.nsc.plugins.Plugin">plug</a>.<a href="Plugin.scala.html#559143" title="(options: List[String],error: (String) =&gt; Unit)Unit">processOptions</a>(<a href="#579160" title="List[java.lang.String]">opts</a>, <a href="../Global.scala.html#39292" title="(msg: String)Unit">error</a>)
    }

    <span class="keyword">for</span> {
      <a title="java.lang.String" id="579316">opt</a> &lt;- <a href="../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../Settings.scala.html#37387" title="=&gt; scala.tools.nsc.Settings.MultiStringSetting">pluginOptions</a>.<a href="../Settings.scala.html#37988" title="(f: (java.lang.String) =&gt; Unit)Unit">value</a>
      <span class="keyword">if</span> <span title="=&gt; Boolean">!</span><a href="#578579" title="List[scala.tools.nsc.plugins.Plugin]">plugs</a>.<span title="(p: (scala.tools.nsc.plugins.Plugin) =&gt; Boolean)Boolean">exists</span>(<a title="scala.tools.nsc.plugins.Plugin" id="579288">p</a> =&gt; <a href="#579316" title="java.lang.String">opt</a>.<span title="(x$1: java.lang.String)Boolean">startsWith</span>(<a href="#579288" title="scala.tools.nsc.plugins.Plugin">p</a>.<a href="Plugin.scala.html#559139" title="(x$1: Any)java.lang.String">name</a> + <span title="java.lang.String(&quot;:&quot;)" class="string">&quot;:&quot;</span>))
    } <a href="../Global.scala.html#39292" title="(msg: String)Unit">error</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;bad option: -P:&quot;</span> + <a href="#579316" title="java.lang.String">opt</a>)

    <a href="#578579" title="List[scala.tools.nsc.plugins.Plugin]">plugs</a>
  }

  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Option[List[scala.tools.nsc.plugins.Plugin]]" id="39438">pluginsCache</a>: <span title="Option[List[scala.tools.nsc.plugins.Plugin]]">Option</span>[List[Plugin]] = <span title="object None">None</span>

  <span class="keyword">def</span> <a title="=&gt; List[scala.tools.nsc.plugins.Plugin]" id="39440">plugins</a>: <span title="List[scala.tools.nsc.plugins.Plugin]">List</span>[Plugin] = {
    <span title="Unit" class="keyword">if</span> (<a href="#39438" title="=&gt; Option[List[scala.tools.nsc.plugins.Plugin]]">pluginsCache</a>.<a title="=&gt; Boolean" id="35230">isEmpty</a>)
      <a href="#39438" title="(x$1: Option[List[scala.tools.nsc.plugins.Plugin]])Unit">pluginsCache</a> = <span title="(x: List[scala.tools.nsc.plugins.Plugin])Some[List[scala.tools.nsc.plugins.Plugin]]">Some</span>(<a href="#39436" title="()List[scala.tools.nsc.plugins.Plugin]">loadPlugins</a>)
    <a href="#39438" title="=&gt; Option[List[scala.tools.nsc.plugins.Plugin]]">pluginsCache</a>.<span title="=&gt; List[scala.tools.nsc.plugins.Plugin]">get</span>
  }

  /** A description of all the plugins that are loaded */
  <span class="keyword">def</span> <a title="=&gt; String" id="39441">pluginDescriptions</a>: <span title="String">String</span> = {
    <span class="keyword">val</span> <a title="List[java.lang.String]" id="579339">messages</a> =
      <span class="keyword">for</span> (<a title="scala.tools.nsc.plugins.Plugin" id="579348">plugin</a> &lt;- <a href="#39435" title="(f: (scala.tools.nsc.plugins.Plugin) =&gt; java.lang.String)(implicit bf: scala.collection.generic.BuilderFactory[java.lang.String,List[java.lang.String],List[scala.tools.nsc.plugins.Plugin]])List[java.lang.String]">roughPluginsList</a>)
	<span class="keyword">yield</span> <a href="#579348" title="scala.tools.nsc.plugins.Plugin">plugin</a>.<a href="Plugin.scala.html#559139" title="(x$1: Any)java.lang.String">name</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; - &quot;)" class="string">&quot; - &quot;</span> + <a href="#579348" title="scala.tools.nsc.plugins.Plugin">plugin</a>.<a href="Plugin.scala.html#559141" title="=&gt; String">description</a>
    <a href="#579339" title="List[java.lang.String]">messages</a>.<span title="(sep: String)String">mkString</span>(<span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span>)
  }

  /**
   * Extract all phases supplied by plugins and add them to the phasesSet.
   * @see phasesSet
   */
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="()Unit" id="39442">computePluginPhases</a>() {    
    <span class="keyword">val</span> <a title="List[scala.tools.nsc.plugins.PluginComponent]" id="579440">plugPhases</a> = <a href="#39440" title="=&gt; List[scala.tools.nsc.plugins.Plugin]">plugins</a>.<a title="(f: (scala.tools.nsc.plugins.Plugin) =&gt; Traversable[scala.tools.nsc.plugins.PluginComponent])(implicit bf: scala.collection.generic.BuilderFactory[scala.tools.nsc.plugins.PluginComponent,List[scala.tools.nsc.plugins.PluginComponent],List[scala.tools.nsc.plugins.Plugin]])List[scala.tools.nsc.plugins.PluginComponent]" id="25407">flatMap</a><span title="scala.collection.generic.BuilderFactory[scala.tools.nsc.plugins.PluginComponent,List[scala.tools.nsc.plugins.PluginComponent],List#Coll]">(</span><a href="#579449" title="scala.tools.nsc.plugins.Plugin">_</a>.<a href="Plugin.scala.html#559140" title="=&gt; List[scala.tools.nsc.plugins.PluginComponent]">components</a>)
    <span class="keyword">for</span> (<a title="scala.tools.nsc.plugins.PluginComponent" id="579547">pPhase</a> &lt;- <a href="#579440" title="(f: (scala.tools.nsc.plugins.PluginComponent) =&gt; scala.collection.mutable.HashSet[scala.tools.nsc.SubComponent])Unit">plugPhases</a>) {
      <a href="../Global.scala.html#39398" title="(elem: scala.tools.nsc.SubComponent)Plugins.this.phasesSet.type" id="39520">phasesSet</a> += <a href="#579547" title="scala.tools.nsc.plugins.PluginComponent">pPhase</a>
     }
   }

  /** Summary of the options for all loaded plugins */
  <span class="keyword">def</span> <a title="=&gt; String" id="39443">pluginOptionsHelp</a>: <span title="String">String</span> = {
    <span class="keyword">val</span> <a title="java.lang.StringBuffer" id="579582">buf</a> = <span title="java.lang.StringBuffer" class="keyword">new</span> <a title="java.lang.StringBuffer" id="1755">StringBuffer</a>
    <span class="keyword">for</span> (<a title="scala.tools.nsc.plugins.Plugin" id="579616">plug</a> &lt;- <a href="#39435" title="(f: (scala.tools.nsc.plugins.Plugin) =&gt; Unit)Unit">roughPluginsList</a>; <a title="String" id="579621">help</a> &lt;- <a href="#579616" title="scala.tools.nsc.plugins.Plugin">plug</a>.<a href="Plugin.scala.html#559144" title="(f: (String) =&gt; java.lang.StringBuffer)Unit" id="35247">optionsHelp</a>) {
      <a href="#579582" title="(x$1: java.lang.String)java.lang.StringBuffer">buf</a> append (<span title="(x$1: Any)java.lang.String" class="string">&quot;Options for plugin &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#579616" title="scala.tools.nsc.plugins.Plugin">plug</a>.<a href="Plugin.scala.html#559139" title="=&gt; String">name</a> + <span title="java.lang.String(&quot;:\012&quot;)" class="string">&quot;:\n&quot;</span>)
      <a href="#579582" title="(x$1: java.lang.String)java.lang.StringBuffer">buf</a> append <a href="#579621" title="String">help</a>
      <a href="#579582" title="(x$1: java.lang.String)java.lang.StringBuffer">buf</a> append <span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span>
    }
    <a href="#579582" title="java.lang.StringBuffer">buf</a>.<a title="()java.lang.String" id="120944">toString</a>
  }
}

        </pre>
    </body>
</html>