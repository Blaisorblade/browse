<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/plugins/Plugins.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style">
    </head>
    <body>
        <pre>
/* NSC -- new Scala compiler
 * Copyright 2007-2009 LAMP/EPFL
 * @author Lex Spoon
 * Updated by Anders Bach Nielsen
 */
// $Id: Plugins.scala 18387 2009-07-24 15:28:37Z odersky $

<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> plugins

<span class="keyword">import</span> java.io.File

/** Support for run-time loading of compiler plugins.
 *
 *  @author Lex Spoon 
 *  @version 1.1, 2009/1/2
 *  Updated 2009/1/2 by Anders Bach Nielsen: Added features to implement SIP 00002
 */
<span class="keyword">trait</span> <a title="trait Plugins extends java.lang.Object with ScalaObject" id="21968">Plugins</a> <a title="ScalaObject" id="959">{</a> self: Global =&gt;

  /** Load a rough list of the plugins.  For speed, it
   *  does not instantiate a compiler run.  Therefore it cannot
   *  test for same-named phases or other problems that are
   *  filtered from the final list of plugins.
   */
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="()List[scala.tools.nsc.plugins.Plugin]" id="39199">loadRoughPluginsList</a>(): <span title="List[scala.tools.nsc.plugins.Plugin]">List</span>[Plugin] = {
    <span class="keyword">val</span> <a title="List[java.io.File]" id="576793">jars</a> = <a href="../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../Settings.scala.html#37102" title="=&gt; scala.tools.nsc.Settings.MultiStringSetting">plugin</a>.<a href="../Settings.scala.html#37759" title="=&gt; List[java.lang.String]">value</a>.<span title="(f: (java.lang.String) =&gt; java.io.File)(implicit bf: scala.collection.generic.BuilderFactory[java.io.File,List[java.io.File],List[java.lang.String]])List[java.io.File]">map</span><span title="scala.collection.generic.BuilderFactory[java.io.File,List[java.io.File],List#Coll]">(</span><span title="java.io.File" class="keyword">new</span> <span title="java.io.File">File</span>(<a href="#576805" title="java.lang.String">_</a>))
    <span class="keyword">val</span> <a title="List[java.io.File]" id="576794">dirs</a> =
      <span class="keyword">for</span> (<a title="java.lang.String" id="576908">name</a> &lt;- <a href="../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../Settings.scala.html#37110" title="=&gt; scala.tools.nsc.Settings.StringSetting">pluginsDir</a>.<a href="../Settings.scala.html#37759" title="=&gt; java.lang.String">value</a>.<a title="(x$1: java.lang.String)Array[java.lang.String]" id="7043">split</a>(<a title="object java.io.File" id="3808">File</a>.<a title="java.lang.String" id="35166">pathSeparator</a>).<a title="(f: (java.lang.String) =&gt; java.io.File)(implicit bf: scala.collection.generic.BuilderFactory[java.io.File,List[java.io.File],List[java.lang.String]])List[java.io.File]" id="25352">toList</a>)
	<span class="keyword">yield</span> <span title="java.io.File" class="keyword">new</span> <span title="java.io.File">File</span>(<a href="#576908" title="java.lang.String">name</a>)

    <span class="keyword">for</span> (<a title="scala.tools.nsc.plugins.Plugin.AnyClass" id="577008">plugClass</a> &lt;- <a href="Plugin.scala.html#21933" title="object scala.tools.nsc.plugins.Plugin">Plugin</a>.<a href="Plugin.scala.html#557782" title="(jars: List[java.io.File],dirs: List[java.io.File],ignoring: List[String])List[scala.tools.nsc.plugins.Plugin.AnyClass]">loadAllFrom</a><span title="(f: (scala.tools.nsc.plugins.Plugin.AnyClass) =&gt; scala.tools.nsc.plugins.Plugin)(implicit bf: scala.collection.generic.BuilderFactory[scala.tools.nsc.plugins.Plugin,List[scala.tools.nsc.plugins.Plugin],List[scala.tools.nsc.plugins.Plugin.AnyClass]])List[scala.tools.nsc.plugins.Plugin]">(</span><a href="#576793" title="List[java.io.File]">jars</a>, <a href="#576794" title="List[java.io.File]">dirs</a>, <a href="../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../Settings.scala.html#37104" title="=&gt; scala.tools.nsc.Settings.MultiStringSetting">disable</a>.<a href="../Settings.scala.html#37759" title="=&gt; List[java.lang.String]">value</a>))
    <span class="keyword">yield</span> <a href="Plugin.scala.html#21933" title="object scala.tools.nsc.plugins.Plugin">Plugin</a>.<a href="Plugin.scala.html#557783" title="(clazz: scala.tools.nsc.plugins.Plugin.AnyClass,global: scala.tools.nsc.Global)scala.tools.nsc.plugins.Plugin">instantiate</a>(<a href="#577008" title="scala.tools.nsc.plugins.Plugin.AnyClass">plugClass</a>, <a href="#21968" title="scala.tools.nsc.Global" class="keyword">this</a>)
  }

  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Option[List[scala.tools.nsc.plugins.Plugin]]" id="39201">roughPluginsListCache</a>: <span title="Option[List[scala.tools.nsc.plugins.Plugin]]">Option</span>[List[Plugin]] = <span title="object None">None</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; List[scala.tools.nsc.plugins.Plugin]" id="39203">roughPluginsList</a>: <span title="List[scala.tools.nsc.plugins.Plugin]">List</span>[Plugin] =
    <a href="#39201" title="=&gt; Option[List[scala.tools.nsc.plugins.Plugin]]">roughPluginsListCache</a> <span title="List[scala.tools.nsc.plugins.Plugin]" class="keyword">match</span> {
      <span title="List[scala.tools.nsc.plugins.Plugin]" class="keyword">case</span> Some(<a title="List[scala.tools.nsc.plugins.Plugin]" id="577043">list</a>) =&gt; <a href="#577043" title="List[scala.tools.nsc.plugins.Plugin]">list</a>
      <span title="List[scala.tools.nsc.plugins.Plugin]" class="keyword">case</span> <span title="object None">None</span> =&gt;
	<a href="#39201" title="(x$1: Option[List[scala.tools.nsc.plugins.Plugin]])Unit">roughPluginsListCache</a> = <span title="(x: List[scala.tools.nsc.plugins.Plugin])Some[List[scala.tools.nsc.plugins.Plugin]]">Some</span>(<a href="#39199" title="()List[scala.tools.nsc.plugins.Plugin]">loadRoughPluginsList</a>)
        <a href="#39201" title="=&gt; Option[List[scala.tools.nsc.plugins.Plugin]]">roughPluginsListCache</a>.<span title="=&gt; List[scala.tools.nsc.plugins.Plugin]">get</span>
    }

  /** Load all available plugins.  Skips plugins that
   *  either have the same name as another one, or which
   *  define a phase name that another one does.
   */
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="()List[scala.tools.nsc.plugins.Plugin]" id="39204">loadPlugins</a>(): <span title="List[scala.tools.nsc.plugins.Plugin]">List</span>[Plugin] = {
    // remove any with conflicting names or subcomponent names
    <span class="keyword">def</span> <a title="(plugins: List[scala.tools.nsc.plugins.Plugin],plugNames: Set[String],phaseNames: Set[String])List[scala.tools.nsc.plugins.Plugin]" id="577060">pick</a>(
      <a title="List[scala.tools.nsc.plugins.Plugin]" id="577062">plugins</a>: <span title="List[scala.tools.nsc.plugins.Plugin]">List</span>[Plugin], 
      <a title="Set[String]" id="577063">plugNames</a>: <span title="Set[String]">Set</span>[String], 
      <a title="Set[String]" id="577064">phaseNames</a>: <span title="Set[String]">Set</span>[String]): <span title="List[scala.tools.nsc.plugins.Plugin]">List</span>[Plugin] =
    {
      <a href="#577062" title="List[scala.tools.nsc.plugins.Plugin]">plugins</a> <span title="List[scala.tools.nsc.plugins.Plugin]" class="keyword">match</span> {
	<span title="scala.collection.immutable.Nil.type" class="keyword">case</span> <span title="object Nil">Nil</span> =&gt; <span title="object Nil">Nil</span>
	<span title="List[scala.tools.nsc.plugins.Plugin]" class="keyword">case</span> <a title="scala.tools.nsc.plugins.Plugin" id="577069">plug</a> :: <a title="List[scala.tools.nsc.plugins.Plugin]" id="577070">rest</a> =&gt;
	  <span class="keyword">val</span> <a title="scala.collection.immutable.Set[String]" id="577073">plugPhaseNames</a> = <span title="=&gt; collection.immutable.Set.type">Set</span>.<span title="(elems: Traversable[String])scala.collection.immutable.Set[String]">empty</span> ++ <a href="#577069" title="scala.tools.nsc.plugins.Plugin">plug</a>.<a href="Plugin.scala.html#557758" title="=&gt; List[scala.tools.nsc.plugins.PluginComponent]">components</a>.<span title="(f: (scala.tools.nsc.plugins.PluginComponent) =&gt; String)(implicit bf: scala.collection.generic.BuilderFactory[String,List[String],List[scala.tools.nsc.plugins.PluginComponent]])List[String]">map</span><span title="scala.collection.generic.BuilderFactory[String,List[String],List#Coll]">(</span><a href="#577140" title="scala.tools.nsc.plugins.PluginComponent">_</a>.<a href="../SubComponent.scala.html#39622" title="=&gt; String">phaseName</a>)
	  <span class="keyword">def</span> <a title="=&gt; List[scala.tools.nsc.plugins.Plugin]" id="577074">withoutPlug</a> = <a href="#577060" title="(plugins: List[scala.tools.nsc.plugins.Plugin],plugNames: Set[String],phaseNames: Set[String])List[scala.tools.nsc.plugins.Plugin]">pick</a>(<a href="#577070" title="List[scala.tools.nsc.plugins.Plugin]">rest</a>, <a href="#577063" title="Set[String]">plugNames</a>, <a href="#577073" title="scala.collection.immutable.Set[String]">plugPhaseNames</a>)
	  <span class="keyword">def</span> <a title="=&gt; List[scala.tools.nsc.plugins.Plugin]" id="577075">withPlug</a> =
	    (<a href="#577069" title="scala.tools.nsc.plugins.Plugin">plug</a> <a href="#577227" title="scala.tools.nsc.plugins.Plugin">::</a> 
	     <a href="#577060" title="(plugins: List[scala.tools.nsc.plugins.Plugin],plugNames: Set[String],phaseNames: Set[String])List[scala.tools.nsc.plugins.Plugin]">pick</a><a title="(x: scala.tools.nsc.plugins.Plugin)List[scala.tools.nsc.plugins.Plugin]" id="24258">(</a><a href="#577070" title="List[scala.tools.nsc.plugins.Plugin]">rest</a>, 
		  <a href="#577063" title="(elem: String)scala.collection.immutable.Set[String]" id="39334">plugNames</a>+<a href="#577069" title="scala.tools.nsc.plugins.Plugin">plug</a>.<a href="Plugin.scala.html#557757" title="=&gt; String">name</a>,
		  <a href="#577064" title="(elems: Traversable[String])scala.collection.immutable.Set[String]">phaseNames</a>++<a href="#577073" title="scala.collection.immutable.Set[String]">plugPhaseNames</a>))

	  <span title="List[scala.tools.nsc.plugins.Plugin]" class="keyword">if</span> (<a href="#577063" title="Set[String]">plugNames</a>.<a title="(elem: String)Boolean" id="39332">contains</a>(<a href="#577069" title="scala.tools.nsc.plugins.Plugin">plug</a>.<a href="Plugin.scala.html#557757" title="=&gt; String">name</a>)) {
	    <span title="Unit" class="keyword">if</span> (<a href="../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../Settings.scala.html#37070" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">verbose</a>.<a href="../Settings.scala.html#37759" title="=&gt; Boolean">value</a>)
	      <a href="../Global.scala.html#39062" title="(msg: String)Unit">inform</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;[skipping a repeated plugin: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#577069" title="scala.tools.nsc.plugins.Plugin">plug</a>.<a href="Plugin.scala.html#557757" title="=&gt; String">name</a> + <span title="java.lang.String(&quot;]&quot;)" class="string">&quot;]&quot;</span>)
	    <a href="#577074" title="=&gt; List[scala.tools.nsc.plugins.Plugin]">withoutPlug</a>
	  } <span class="keyword">else</span> <span title="List[scala.tools.nsc.plugins.Plugin]" class="keyword">if</span> (<a href="../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../Settings.scala.html#37104" title="=&gt; scala.tools.nsc.Settings.MultiStringSetting">disable</a>.<a href="../Settings.scala.html#37759" title="(elem: Any)Boolean" id="25609">value</a> contains(<a href="#577069" title="scala.tools.nsc.plugins.Plugin">plug</a>.<a href="Plugin.scala.html#557757" title="=&gt; String">name</a>)) {
	    <span title="Unit" class="keyword">if</span> (<a href="../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../Settings.scala.html#37070" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">verbose</a>.<a href="../Settings.scala.html#37759" title="=&gt; Boolean">value</a>)
	      <a href="../Global.scala.html#39062" title="(msg: String)Unit">inform</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;[disabling plugin: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#577069" title="scala.tools.nsc.plugins.Plugin">plug</a>.<a href="Plugin.scala.html#557757" title="=&gt; String">name</a> + <span title="java.lang.String(&quot;]&quot;)" class="string">&quot;]&quot;</span>)
	    <a href="#577074" title="=&gt; List[scala.tools.nsc.plugins.Plugin]">withoutPlug</a>
	  } <span class="keyword">else</span> {
	    <span class="keyword">val</span> <a title="scala.collection.immutable.Set[String]" id="577400">commonPhases</a> = <a href="#577064" title="Set[String]">phaseNames</a>.<a title="(that: scala.collection.Set[String])scala.collection.immutable.Set[String]" id="39341">intersect</a>(<a href="#577073" title="scala.collection.immutable.Set[String]">plugPhaseNames</a>)
	    <span title="List[scala.tools.nsc.plugins.Plugin]" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="#577400" title="scala.collection.immutable.Set[String]">commonPhases</a>.<a title="=&gt; Boolean" id="39338">isEmpty</a>) {
	      <span title="Unit" class="keyword">if</span> (<a href="../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../Settings.scala.html#37070" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">verbose</a>.<a href="../Settings.scala.html#37759" title="=&gt; Boolean">value</a>)
		<a href="../Global.scala.html#39062" title="(msg: String)Unit">inform</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;[skipping plugin &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#577069" title="scala.tools.nsc.plugins.Plugin">plug</a>.<a href="Plugin.scala.html#557757" title="=&gt; String">name</a> <span title="(x$1: Any)java.lang.String">+</span>
		       <span title="java.lang.String(&quot;because it repeats phase names: &quot;)" class="string">&quot;because it repeats phase names: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span>
		       <a href="#577400" title="scala.collection.immutable.Set[String]">commonPhases</a>.<span title="(sep: String)String">mkString</span>(<span title="java.lang.String(&quot;, &quot;)" class="string">&quot;, &quot;</span>) + <span title="java.lang.String(&quot;]&quot;)" class="string">&quot;]&quot;</span>)
	      <a href="#577074" title="=&gt; List[scala.tools.nsc.plugins.Plugin]">withoutPlug</a>
	    } <span class="keyword">else</span> {
	      <span title="Unit" class="keyword">if</span> (<a href="../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../Settings.scala.html#37070" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">verbose</a>.<a href="../Settings.scala.html#37759" title="=&gt; Boolean">value</a>)
		<a href="../Global.scala.html#39062" title="(msg: String)Unit">inform</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;[loaded plugin &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#577069" title="scala.tools.nsc.plugins.Plugin">plug</a>.<a href="Plugin.scala.html#557757" title="=&gt; String">name</a> + <span title="java.lang.String(&quot;]&quot;)" class="string">&quot;]&quot;</span>)
	      <a href="#577075" title="=&gt; List[scala.tools.nsc.plugins.Plugin]">withPlug</a>
	    }
	  }
      }
    }

    <span class="keyword">val</span> <a title="List[scala.tools.nsc.plugins.Plugin]" id="577061">plugs</a> =
    <a href="#577060" title="(plugins: List[scala.tools.nsc.plugins.Plugin],plugNames: Set[String],phaseNames: Set[String])List[scala.tools.nsc.plugins.Plugin]">pick</a>(<a href="#39203" title="=&gt; List[scala.tools.nsc.plugins.Plugin]">roughPluginsList</a>,
	 <span title="=&gt; collection.immutable.Set.type">Set</span>.<span title="scala.collection.immutable.Set[String]">empty</span>,
	 <span title="=&gt; collection.immutable.Set.type">Set</span>.<span title="(elems: Traversable[String])scala.collection.immutable.Set[String]">empty</span> ++ <a href="../Global.scala.html#39166" title="=&gt; scala.collection.mutable.HashSet[scala.tools.nsc.SubComponent]">phasesSet</a>.<span title="(f: (scala.tools.nsc.SubComponent) =&gt; String)(implicit bf: scala.collection.generic.BuilderFactory[String,scala.collection.mutable.HashSet[String],scala.collection.mutable.HashSet[scala.tools.nsc.SubComponent]])scala.collection.mutable.HashSet[String]">map</span><a title="scala.collection.generic.BuilderFactory[String,scala.collection.mutable.HashSet[String],scala.collection.mutable.HashSet#Coll]" id="24802">(</a><a href="#577505" title="scala.tools.nsc.SubComponent">_</a>.<a href="../SubComponent.scala.html#39622" title="=&gt; String">phaseName</a>))

    <span class="keyword">for</span> (<a title="java.lang.String" id="577612">req</a> &lt;- <a href="../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../Settings.scala.html#37108" title="=&gt; scala.tools.nsc.Settings.MultiStringSetting">require</a>.<a href="../Settings.scala.html#37759" title="(f: (java.lang.String) =&gt; Unit)Unit">value</a>; <span class="keyword">if</span> <span title="=&gt; Boolean">!</span><a href="#577061" title="List[scala.tools.nsc.plugins.Plugin]">plugs</a>.<span title="(p: (scala.tools.nsc.plugins.Plugin) =&gt; Boolean)Boolean">exists</span>(<a title="scala.tools.nsc.plugins.Plugin" id="577584">p</a> =&gt; <a href="#577584" title="scala.tools.nsc.plugins.Plugin">p</a>.<a href="Plugin.scala.html#557757" title="(x$1: AnyRef)Boolean" id="3626">name</a>==<a href="#577612" title="java.lang.String">req</a>))
      <a href="../Global.scala.html#39060" title="(msg: String)Unit">error</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Missing required plugin: &quot;</span> + <a href="#577612" title="java.lang.String">req</a>)

    
    <span class="keyword">for</span> (<a title="scala.tools.nsc.plugins.Plugin" id="577636">plug</a> &lt;- <a href="#577061" title="(f: (scala.tools.nsc.plugins.Plugin) =&gt; Unit)Unit">plugs</a>) {
      <span class="keyword">val</span> <a title="java.lang.String" id="577637">nameColon</a> = <a href="#577636" title="scala.tools.nsc.plugins.Plugin">plug</a>.<a href="Plugin.scala.html#557757" title="(x$1: Any)java.lang.String">name</a> + <span title="java.lang.String(&quot;:&quot;)" class="string">&quot;:&quot;</span>
      <span class="keyword">val</span> <a title="List[java.lang.String]" id="577638">opts</a> = <span class="keyword">for</span> {
	<a title="java.lang.String" id="577660">raw</a> &lt;- <a href="../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../Settings.scala.html#37192" title="=&gt; scala.tools.nsc.Settings.MultiStringSetting">pluginOptions</a>.<a href="../Settings.scala.html#37759" title="(f: (java.lang.String) =&gt; java.lang.String)(implicit bf: scala.collection.generic.BuilderFactory[java.lang.String,List[java.lang.String],List[java.lang.String]])List[java.lang.String]">value</a>
	<span class="keyword">if</span> <a href="#577660" title="java.lang.String">raw</a>.<span title="(x$1: java.lang.String)Boolean">startsWith</span>(<a href="#577637" title="java.lang.String">nameColon</a>)
      } <span class="keyword">yield</span> <a href="#577660" title="java.lang.String">raw</a>.<a title="(x$1: Int)java.lang.String" id="7014">substring</a>(<a href="#577637" title="java.lang.String">nameColon</a>.<a title="()Int" id="6915">length</a>)

      <span title="Unit" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="#577638" title="List[java.lang.String]">opts</a>.<a title="=&gt; Boolean" id="25434">isEmpty</a>)
	<a href="#577636" title="scala.tools.nsc.plugins.Plugin">plug</a>.<a href="Plugin.scala.html#557761" title="(options: List[String],error: (String) =&gt; Unit)Unit">processOptions</a>(<a href="#577638" title="List[java.lang.String]">opts</a>, <a href="../Global.scala.html#39060" title="(msg: String)Unit">error</a>)
    }

    <span class="keyword">for</span> {
      <a title="java.lang.String" id="577791">opt</a> &lt;- <a href="../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../Settings.scala.html#37192" title="=&gt; scala.tools.nsc.Settings.MultiStringSetting">pluginOptions</a>.<a href="../Settings.scala.html#37759" title="(f: (java.lang.String) =&gt; Unit)Unit">value</a>
      <span class="keyword">if</span> <span title="=&gt; Boolean">!</span><a href="#577061" title="List[scala.tools.nsc.plugins.Plugin]">plugs</a>.<span title="(p: (scala.tools.nsc.plugins.Plugin) =&gt; Boolean)Boolean">exists</span>(<a title="scala.tools.nsc.plugins.Plugin" id="577763">p</a> =&gt; <a href="#577791" title="java.lang.String">opt</a>.<span title="(x$1: java.lang.String)Boolean">startsWith</span>(<a href="#577763" title="scala.tools.nsc.plugins.Plugin">p</a>.<a href="Plugin.scala.html#557757" title="(x$1: Any)java.lang.String">name</a> + <span title="java.lang.String(&quot;:&quot;)" class="string">&quot;:&quot;</span>))
    } <a href="../Global.scala.html#39060" title="(msg: String)Unit">error</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;bad option: -P:&quot;</span> + <a href="#577791" title="java.lang.String">opt</a>)

    <a href="#577061" title="List[scala.tools.nsc.plugins.Plugin]">plugs</a>
  }

  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Option[List[scala.tools.nsc.plugins.Plugin]]" id="39206">pluginsCache</a>: <span title="Option[List[scala.tools.nsc.plugins.Plugin]]">Option</span>[List[Plugin]] = <span title="object None">None</span>

  <span class="keyword">def</span> <a title="=&gt; List[scala.tools.nsc.plugins.Plugin]" id="39208">plugins</a>: <span title="List[scala.tools.nsc.plugins.Plugin]">List</span>[Plugin] = {
    <span title="Unit" class="keyword">if</span> (<a href="#39206" title="=&gt; Option[List[scala.tools.nsc.plugins.Plugin]]">pluginsCache</a>.<a title="=&gt; Boolean" id="35041">isEmpty</a>)
      <a href="#39206" title="(x$1: Option[List[scala.tools.nsc.plugins.Plugin]])Unit">pluginsCache</a> = <span title="(x: List[scala.tools.nsc.plugins.Plugin])Some[List[scala.tools.nsc.plugins.Plugin]]">Some</span>(<a href="#39204" title="()List[scala.tools.nsc.plugins.Plugin]">loadPlugins</a>)
    <a href="#39206" title="=&gt; Option[List[scala.tools.nsc.plugins.Plugin]]">pluginsCache</a>.<span title="=&gt; List[scala.tools.nsc.plugins.Plugin]">get</span>
  }

  /** A description of all the plugins that are loaded */
  <span class="keyword">def</span> <a title="=&gt; String" id="39209">pluginDescriptions</a>: <span title="String">String</span> = {
    <span class="keyword">val</span> <a title="List[java.lang.String]" id="577814">messages</a> =
      <span class="keyword">for</span> (<a title="scala.tools.nsc.plugins.Plugin" id="577823">plugin</a> &lt;- <a href="#39203" title="(f: (scala.tools.nsc.plugins.Plugin) =&gt; java.lang.String)(implicit bf: scala.collection.generic.BuilderFactory[java.lang.String,List[java.lang.String],List[scala.tools.nsc.plugins.Plugin]])List[java.lang.String]">roughPluginsList</a>)
	<span class="keyword">yield</span> <a href="#577823" title="scala.tools.nsc.plugins.Plugin">plugin</a>.<a href="Plugin.scala.html#557757" title="(x$1: Any)java.lang.String">name</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; - &quot;)" class="string">&quot; - &quot;</span> + <a href="#577823" title="scala.tools.nsc.plugins.Plugin">plugin</a>.<a href="Plugin.scala.html#557759" title="=&gt; String">description</a>
    <a href="#577814" title="List[java.lang.String]">messages</a>.<span title="(sep: String)String">mkString</span>(<span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span>)
  }

  /**
   * Extract all phases supplied by plugins and add them to the phasesSet.
   * @see phasesSet
   */
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="()Unit" id="39210">computePluginPhases</a>() {    
    <span class="keyword">val</span> <a title="List[scala.tools.nsc.plugins.PluginComponent]" id="577912">plugPhases</a> = <a href="#39208" title="=&gt; List[scala.tools.nsc.plugins.Plugin]">plugins</a>.<a title="(f: (scala.tools.nsc.plugins.Plugin) =&gt; Traversable[scala.tools.nsc.plugins.PluginComponent])(implicit bf: scala.collection.generic.BuilderFactory[scala.tools.nsc.plugins.PluginComponent,List[scala.tools.nsc.plugins.PluginComponent],List[scala.tools.nsc.plugins.Plugin]])List[scala.tools.nsc.plugins.PluginComponent]" id="25248">flatMap</a><span title="scala.collection.generic.BuilderFactory[scala.tools.nsc.plugins.PluginComponent,List[scala.tools.nsc.plugins.PluginComponent],List#Coll]">(</span><a href="#577921" title="scala.tools.nsc.plugins.Plugin">_</a>.<a href="Plugin.scala.html#557758" title="=&gt; List[scala.tools.nsc.plugins.PluginComponent]">components</a>)
    <span class="keyword">for</span> (<a title="scala.tools.nsc.plugins.PluginComponent" id="578016">pPhase</a> &lt;- <a href="#577912" title="(f: (scala.tools.nsc.plugins.PluginComponent) =&gt; scala.collection.mutable.HashSet[scala.tools.nsc.SubComponent])Unit">plugPhases</a>) {
      <a href="../Global.scala.html#39166" title="(elem: scala.tools.nsc.SubComponent)Plugins.this.phasesSet.type" id="39288">phasesSet</a> += <a href="#578016" title="scala.tools.nsc.plugins.PluginComponent">pPhase</a>
     }
   }

  /** Summary of the options for all loaded plugins */
  <span class="keyword">def</span> <a title="=&gt; String" id="39211">pluginOptionsHelp</a>: <span title="String">String</span> = {
    <span class="keyword">val</span> <a title="java.lang.StringBuffer" id="578051">buf</a> = <span title="java.lang.StringBuffer" class="keyword">new</span> <a title="java.lang.StringBuffer" id="1734">StringBuffer</a>
    <span class="keyword">for</span> (<a title="scala.tools.nsc.plugins.Plugin" id="578085">plug</a> &lt;- <a href="#39203" title="(f: (scala.tools.nsc.plugins.Plugin) =&gt; Unit)Unit">roughPluginsList</a>; <a title="String" id="578090">help</a> &lt;- <a href="#578085" title="scala.tools.nsc.plugins.Plugin">plug</a>.<a href="Plugin.scala.html#557762" title="(f: (String) =&gt; java.lang.StringBuffer)Unit" id="35058">optionsHelp</a>) {
      <a href="#578051" title="(x$1: java.lang.String)java.lang.StringBuffer">buf</a> append (<span title="(x$1: Any)java.lang.String" class="string">&quot;Options for plugin &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#578085" title="scala.tools.nsc.plugins.Plugin">plug</a>.<a href="Plugin.scala.html#557757" title="=&gt; String">name</a> + <span title="java.lang.String(&quot;:\012&quot;)" class="string">&quot;:\n&quot;</span>)
      <a href="#578051" title="(x$1: java.lang.String)java.lang.StringBuffer">buf</a> append <a href="#578090" title="String">help</a>
      <a href="#578051" title="(x$1: java.lang.String)java.lang.StringBuffer">buf</a> append <span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span>
    }
    <a href="#578051" title="java.lang.StringBuffer">buf</a>.<a title="()java.lang.String" id="120436">toString</a>
  }
}

        </pre>
    </body>
</html>