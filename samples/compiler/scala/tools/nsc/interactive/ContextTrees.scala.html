<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/interactive/ContextTrees.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style">
    </head>
    <body>
        <pre>
<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> interactive

<span class="keyword">import</span> collection.mutable.ArrayBuffer
<span class="keyword">import</span> util.Position

<span class="keyword">trait</span> <a title="trait ContextTrees extends java.lang.Object with ScalaObject" id="18578">ContextTrees</a> <span title="ScalaObject">{</span> self: Global =&gt;

  <span class="keyword">type</span> <a title="ContextTrees.this.analyzer.Context" id="255724">Context</a> = analyzer.<a href="../typechecker/Contexts.scala.html#39821" title="ContextTrees.this.analyzer.Context">Context</a>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="ContextTrees.this.analyzer.Context" id="255726">NoContext</a> = <a href="../Global.scala.html#39102" title="object ContextTrees.this.analyzer">analyzer</a>.<a href="../typechecker/Contexts.scala.html#39813" title="=&gt; ContextTrees.this.analyzer.Context">NoContext</a>
  <span class="keyword">type</span> <a title="scala.collection.mutable.ArrayBuffer[ContextTrees.this.ContextTree]" id="255727">Contexts</a> = <span title="scala.collection.mutable.ArrayBuffer[ContextTrees.this.ContextTree]">ArrayBuffer</span>[ContextTree]

  /** A context tree contains contexts that are indexed by positions.
   *  It satisfies the following properties:
   *  1. All context come from compiling the same unit.
   *  2. Child contexts have parent contexts in their outer chain.
   *  3. The `pos` field of a context is the same as `context.tree.pos`, unless that
   *     position is transparent. In that case, `pos` equals the position of
   *     one of the solid descendants of `context.tree`.
   *  4. Children of a context have non-overlapping increasining positions.
   *  5. No context in the tree has a transparent position. 
   */
  <span class="keyword">class</span> <a title="class ContextTree extends java.lang.Object with ScalaObject" id="255728">ContextTree</a><span title="ScalaObject">(</span><span class="keyword">val</span> <a title="scala.tools.nsc.util.Position" id="755033">pos</a>: <a href="../util/Position.scala.html#14710" title="scala.tools.nsc.util.Position">Position</a>, <span class="keyword">val</span> <a title="ContextTrees.this.Context" id="755034">context</a>: <a href="../typechecker/Contexts.scala.html#39821" title="ContextTrees.this.Context">Context</a>, <span class="keyword">val</span> <a title="scala.collection.mutable.ArrayBuffer[ContextTrees.this.ContextTree]" id="755035">children</a>: <span title="scala.collection.mutable.ArrayBuffer[ContextTrees.this.ContextTree]">ArrayBuffer</span>[ContextTree]) {
    <span class="keyword">def</span> <a title="(pos: scala.tools.nsc.util.Position,context: ContextTrees.this.Context)ContextTrees.this.ContextTree" id="755027" class="keyword">this</a>(<a title="scala.tools.nsc.util.Position" id="755040">pos</a>: <a href="../util/Position.scala.html#14710" title="scala.tools.nsc.util.Position">Position</a>, <a title="ContextTrees.this.Context" id="755041">context</a>: <a href="../typechecker/Contexts.scala.html#39821" title="ContextTrees.this.Context">Context</a>) = <a href="#255728" title="ContextTree.this.type" class="keyword">this</a>(<a href="#755040" title="scala.tools.nsc.util.Position">pos</a>, <a href="#755041" title="ContextTrees.this.Context">context</a>, <a title="()scala.collection.mutable.ArrayBuffer[ContextTrees.this.ContextTree]" id="108542" class="keyword">new</a> <span title="scala.collection.mutable.ArrayBuffer[ContextTrees.this.ContextTree]">ArrayBuffer</span>[ContextTree])
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="()java.lang.String" id="755028">toString</a> = <span title="(x$1: Any)java.lang.String" class="string">&quot;ContextTree(&quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#755033" title="=&gt; scala.tools.nsc.util.Position">pos</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot;, &quot;)" class="string">&quot;, &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#755035" title="=&gt; scala.collection.mutable.ArrayBuffer[ContextTrees.this.ContextTree]">children</a>+<span title="java.lang.String(&quot;)&quot;)" class="string">&quot;)&quot;</span>
  }

  /** Optionally returns the smallest context that contains given `pos`, or None if none exists.
   */
  <span class="keyword">def</span> <a title="(contexts: ContextTrees.this.Contexts,pos: scala.tools.nsc.util.Position)Option[ContextTrees.this.Context]" id="255729">locateContext</a>(<a title="ContextTrees.this.Contexts" id="326508">contexts</a>: <span title="ContextTrees.this.Contexts">Contexts</span>, <a title="scala.tools.nsc.util.Position" id="326509">pos</a>: <a href="../util/Position.scala.html#14710" title="scala.tools.nsc.util.Position">Position</a>): <span title="Option[ContextTrees.this.Context]">Option</span>[Context] = {
    <span title="Option[ContextTrees.this.Context]" class="keyword">if</span> (<a href="#326508" title="ContextTrees.this.Contexts">contexts</a>.<span title="=&gt; Boolean">isEmpty</span>) <span title="object None">None</span>
    <span class="keyword">else</span> {
      <span class="keyword">val</span> <a title="Int" id="755071">hi</a> = <a href="#326508" title="ContextTrees.this.Contexts">contexts</a>.<span title="(x$1: Int)Int">length</span> - <span title="Int(1)" class="int">1</span>
      <span title="Option[ContextTrees.this.Context]" class="keyword">if</span> (<a title="(x$1: Boolean)Boolean" id="2210">(</a><a href="#326508" title="(idx: Int)ContextTrees.this.ContextTree">contexts</a>(<a href="#755071" title="Int">hi</a>).<a href="../util/Position.scala.html#30300" title="(pos: scala.tools.nsc.util.Position)Boolean">pos</a> precedes <a href="#326509" title="scala.tools.nsc.util.Position">pos</a>) || (<a href="../util/Position.scala.html#30300" title="(pos: scala.tools.nsc.util.Position)Boolean">pos</a> precedes <a href="#326508" title="(idx: Int)ContextTrees.this.ContextTree">contexts</a>(<span title="Int(0)" class="int">0</span>).<a href="#755033" title="=&gt; scala.tools.nsc.util.Position">pos</a>)) <span title="object None">None</span>
      <span class="keyword">else</span> {
        <span class="keyword">def</span> <a title="(lo: Int,hi: Int)Option[ContextTrees.this.Context]" id="755115">loop</a>(<a title="Int" id="755116">lo</a>: <span title="Int">Int</span>, <a title="Int" id="755117">hi</a>: <span title="Int">Int</span>): <span title="Option[ContextTrees.this.Context]">Option</span>[Context] = {
          <span class="keyword">val</span> <a title="Int" id="755118">mid</a> = <span title="(x$1: Int)Int">(</span><a href="#755116" title="(x$1: Int)Int">lo</a> + <a href="#755117" title="Int">hi</a>) / <span title="Int(2)" class="int">2</span>
          <span class="keyword">val</span> <a title="scala.tools.nsc.util.Position" id="755119">midpos</a> = <a href="#326508" title="(idx: Int)ContextTrees.this.ContextTree">contexts</a>(<a href="#755118" title="Int">mid</a>).<a href="#755033" title="=&gt; scala.tools.nsc.util.Position">pos</a>
          <span title="Option[ContextTrees.this.Context]" class="keyword">if</span> (<span title="(x$1: Boolean)Boolean">(</span><a href="../util/Position.scala.html#30300" title="(pos: scala.tools.nsc.util.Position)Boolean">pos</a> precedes <a href="#755119" title="scala.tools.nsc.util.Position">midpos</a>) &amp;&amp; (<a href="#755118" title="(x$1: Int)Boolean">mid</a> &lt; <a href="#755117" title="Int">hi</a>))
            <a href="#755115" title="(lo: Int,hi: Int)Option[ContextTrees.this.Context]">loop</a>(<a href="#755116" title="Int">lo</a>, <a href="#755118" title="Int">mid</a>)
          <span class="keyword">else</span> <span title="Option[ContextTrees.this.Context]" class="keyword">if</span> (<span title="(x$1: Boolean)Boolean">(</span><a href="../util/Position.scala.html#30300" title="(pos: scala.tools.nsc.util.Position)Boolean">midpos</a> precedes <a href="#326509" title="scala.tools.nsc.util.Position">pos</a>) &amp;&amp; (<a href="#755116" title="(x$1: Int)Boolean">lo</a> &lt; <a href="#755118" title="Int">mid</a>))
            <a href="#755115" title="(lo: Int,hi: Int)Option[ContextTrees.this.Context]">loop</a>(<a href="#755118" title="Int">mid</a>, <a href="#755117" title="Int">hi</a>)
          <span class="keyword">else</span> <span title="Option[ContextTrees.this.Context]" class="keyword">if</span> (<a href="../util/Position.scala.html#30298" title="(pos: scala.tools.nsc.util.Position)Boolean">midpos</a> includes <a href="#326509" title="scala.tools.nsc.util.Position">pos</a>) 
            <span title="(x: ContextTrees.this.Context)Some[ContextTrees.this.Context]">Some</span>(<a href="#326508" title="(idx: Int)ContextTrees.this.ContextTree">contexts</a>(<a href="#755118" title="Int">mid</a>).<a href="#755034" title="=&gt; ContextTrees.this.Context">context</a>)
          <span class="keyword">else</span> <span title="Option[ContextTrees.this.Context]" class="keyword">if</span> (<a href="#326508" title="(idx: Int)ContextTrees.this.ContextTree">contexts</a>(<a href="#755118" title="(x$1: Int)Int">mid</a>+<span title="Int(1)" class="int">1</span>).<a href="../util/Position.scala.html#30298" title="(pos: scala.tools.nsc.util.Position)Boolean">pos</a> includes <a href="#326509" title="scala.tools.nsc.util.Position">pos</a>)
            <span title="(x: ContextTrees.this.Context)Some[ContextTrees.this.Context]">Some</span>(<a href="#326508" title="(idx: Int)ContextTrees.this.ContextTree">contexts</a>(<a href="#755118" title="(x$1: Int)Int">mid</a>+<span title="Int(1)" class="int">1</span>).<a href="#755034" title="=&gt; ContextTrees.this.Context">context</a>)
          <span class="keyword">else</span> <span title="object None">None</span>
        }
        <a href="#755115" title="(lo: Int,hi: Int)Option[ContextTrees.this.Context]">loop</a>(<span title="Int(0)" class="int">0</span>, <a href="#755071" title="Int">hi</a>)
      }
    }
  }

  /** Insert a context at correct position into a buffer of context trees.
   *  If the `context` has a transparent position, add it multiple times
   *  at the positions of all its solid descendant trees.
   */
  <span class="keyword">def</span> <a title="(contexts: ContextTrees.this.Contexts,context: ContextTrees.this.Context)Unit" id="255730">addContext</a>(<a title="ContextTrees.this.Contexts" id="555924">contexts</a>: <span title="ContextTrees.this.Contexts">Contexts</span>, <a title="ContextTrees.this.Context" id="555925">context</a>: <a href="../typechecker/Contexts.scala.html#39821" title="ContextTrees.this.Context">Context</a>) {
    <span class="keyword">val</span> <a title="scala.tools.nsc.util.Position" id="755252">cpos</a> = <a href="#555925" title="ContextTrees.this.Context">context</a>.<a href="../typechecker/Contexts.scala.html#48359" title="=&gt; ContextTrees.this.analyzer.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29361" title="=&gt; scala.tools.nsc.util.Position">pos</a>
    <span title="Unit" class="keyword">if</span> (<a href="#755252" title="scala.tools.nsc.util.Position">cpos</a>.<a href="../util/Position.scala.html#30280" title="=&gt; Boolean">isTransparent</a>)
      <span class="keyword">for</span> (<a title="ContextTrees.this.Tree" id="755360">t</a> &lt;- <a href="#555925" title="ContextTrees.this.Context">context</a>.<a href="../typechecker/Contexts.scala.html#48359" title="=&gt; ContextTrees.this.analyzer.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29380" title="(f: (ContextTrees.this.analyzer.global.Tree) =&gt; Traversable[ContextTrees.this.Tree])(implicit bf: scala.collection.generic.BuilderFactory[ContextTrees.this.Tree,List[ContextTrees.this.Tree],List[ContextTrees.this.analyzer.global.Tree]])List[ContextTrees.this.Tree]" id="25248">children</a> <a title="(f: (ContextTrees.this.Tree) =&gt; Unit)Unit" id="7346">flatMap</a> <a href="RangePositions.scala.html#68012" title="(tree: ContextTrees.this.Tree)List[ContextTrees.this.Tree]">solidDescendants</a>)
        <a href="#255731" title="(contexts: ContextTrees.this.Contexts,context: ContextTrees.this.Context,cpos: scala.tools.nsc.util.Position)Unit">addContext</a>(<a href="#555924" title="ContextTrees.this.Contexts">contexts</a>, <a href="#555925" title="ContextTrees.this.Context">context</a>, <a href="#755360" title="ContextTrees.this.Tree">t</a>.<a href="../ast/Trees.scala.html#29361" title="=&gt; scala.tools.nsc.util.Position">pos</a>)
    <span class="keyword">else</span>
      <a href="#255731" title="(contexts: ContextTrees.this.Contexts,context: ContextTrees.this.Context,cpos: scala.tools.nsc.util.Position)Unit">addContext</a>(<a href="#555924" title="ContextTrees.this.Contexts">contexts</a>, <a href="#555925" title="ContextTrees.this.Context">context</a>, <a href="#755252" title="scala.tools.nsc.util.Position">cpos</a>)
  }

  /** Insert a context with non-transparent position `cpos`
   *  at correct position into a buffer of context trees.
   */
  <span class="keyword">def</span> <a title="(contexts: ContextTrees.this.Contexts,context: ContextTrees.this.Context,cpos: scala.tools.nsc.util.Position)Unit" id="255731">addContext</a>(<a title="ContextTrees.this.Contexts" id="555917">contexts</a>: <span title="ContextTrees.this.Contexts">Contexts</span>, <a title="ContextTrees.this.Context" id="555918">context</a>: <a href="../typechecker/Contexts.scala.html#39821" title="ContextTrees.this.Context">Context</a>, <a title="scala.tools.nsc.util.Position" id="555919">cpos</a>: <a href="../util/Position.scala.html#14710" title="scala.tools.nsc.util.Position">Position</a>) {
    <span class="keyword">try</span> {
      <span title="Unit" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="#555919" title="scala.tools.nsc.util.Position">cpos</a>.<a href="../util/Position.scala.html#30281" title="=&gt; Boolean">isRange</a>) <span title="Unit">{</span>}
      <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<a href="#555917" title="ContextTrees.this.Contexts">contexts</a>.<span title="=&gt; Boolean">isEmpty</span>) <a href="#555917" title="(elem: ContextTrees.this.ContextTree)contexts.type">contexts</a> <span title="Unit">+=</span> <a href="#755027" title="(pos: scala.tools.nsc.util.Position,context: ContextTrees.this.Context)ContextTrees.this.ContextTree" class="keyword">new</a> <a href="#255728" title="ContextTrees.this.ContextTree">ContextTree</a>(<a href="#555919" title="scala.tools.nsc.util.Position">cpos</a>, <a href="#555918" title="ContextTrees.this.Context">context</a>)
      <span class="keyword">else</span> {
        <span class="keyword">val</span> <a title="Int" id="755409">hi</a> = <a href="#555917" title="ContextTrees.this.Contexts">contexts</a>.<span title="(x$1: Int)Int">length</span> - <span title="Int(1)" class="int">1</span>
        <span title="Unit" class="keyword">if</span> (<a href="#555917" title="(idx: Int)ContextTrees.this.ContextTree">contexts</a>(<a href="#755409" title="Int">hi</a>).<a href="../util/Position.scala.html#30301" title="(pos: scala.tools.nsc.util.Position)Boolean">pos</a> properlyPrecedes <a href="#555919" title="scala.tools.nsc.util.Position">cpos</a>) 
          <a href="#555917" title="(elem: ContextTrees.this.ContextTree)contexts.type">contexts</a> <span title="Unit">+=</span> <a href="#755027" title="(pos: scala.tools.nsc.util.Position,context: ContextTrees.this.Context)ContextTrees.this.ContextTree" class="keyword">new</a> <a href="#255728" title="ContextTrees.this.ContextTree">ContextTree</a>(<a href="#555919" title="scala.tools.nsc.util.Position">cpos</a>, <a href="#555918" title="ContextTrees.this.Context">context</a>)
        <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<a href="#555917" title="(idx: Int)ContextTrees.this.ContextTree">contexts</a>(<a href="#755409" title="Int">hi</a>).<a href="../util/Position.scala.html#30299" title="(pos: scala.tools.nsc.util.Position)Boolean">pos</a> properlyIncludes <a href="#555919" title="scala.tools.nsc.util.Position">cpos</a>) // fast path w/o search
          <a href="#255731" title="(contexts: ContextTrees.this.Contexts,context: ContextTrees.this.Context,cpos: scala.tools.nsc.util.Position)Unit">addContext</a>(<a href="#555917" title="(idx: Int)ContextTrees.this.ContextTree">contexts</a>(<a href="#755409" title="Int">hi</a>).<a href="#755035" title="=&gt; scala.collection.mutable.ArrayBuffer[ContextTrees.this.ContextTree]">children</a>, <a href="#555918" title="ContextTrees.this.Context">context</a>, <a href="#555919" title="scala.tools.nsc.util.Position">cpos</a>)
        <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<a href="../util/Position.scala.html#30301" title="(pos: scala.tools.nsc.util.Position)Boolean">cpos</a> properlyPrecedes <a href="#555917" title="(idx: Int)ContextTrees.this.ContextTree">contexts</a>(<span title="Int(0)" class="int">0</span>).<a href="#755033" title="=&gt; scala.tools.nsc.util.Position">pos</a>) 
          <a href="#755027" title="(pos: scala.tools.nsc.util.Position,context: ContextTrees.this.Context)ContextTrees.this.ContextTree" class="keyword">new</a> <a href="#255728" title="ContextTrees.this.ContextTree">ContextTree</a>(<a href="#555919" title="scala.tools.nsc.util.Position">cpos</a>, <a href="#555918" title="ContextTrees.this.Context">context</a>) <a href="#755532" title="ContextTrees.this.ContextTree">+:</a> <a href="#555917" title="(elem: ContextTrees.this.ContextTree)contexts.type" id="108550">contexts</a>
        <span class="keyword">else</span> {
          <span class="keyword">def</span> <a title="(idx: Int)Boolean" id="755542">insertAt</a>(<a title="Int" id="755544">idx</a>: <span title="Int">Int</span>): <a title="Boolean" id="1951">Boolean</a> = {
            <span class="keyword">val</span> <a title="scala.tools.nsc.util.Position" id="755545">oldpos</a> = <a href="#555917" title="(idx: Int)ContextTrees.this.ContextTree">contexts</a>(<a href="#755544" title="Int">idx</a>).<a href="#755033" title="=&gt; scala.tools.nsc.util.Position">pos</a>
            <span title="Boolean" class="keyword">if</span> (<a href="../util/Position.scala.html#30303" title="(pos: scala.tools.nsc.util.Position)Boolean">oldpos</a> sameRange <a href="#555919" title="scala.tools.nsc.util.Position">cpos</a>) {
              <a href="#555917" title="(idx: Int,elem: ContextTrees.this.ContextTree)Unit">contexts</a>(<a href="#755544" title="Int">idx</a>) = <span title="ContextTrees.this.ContextTree" class="keyword">new</span> <a href="#255728" title="ContextTrees.this.ContextTree">ContextTree</a>(<a href="#555919" title="scala.tools.nsc.util.Position">cpos</a>, <a href="#555918" title="ContextTrees.this.Context">context</a>, <a href="#555917" title="(idx: Int)ContextTrees.this.ContextTree">contexts</a>(<a href="#755544" title="Int">idx</a>).<a href="#755035" title="=&gt; scala.collection.mutable.ArrayBuffer[ContextTrees.this.ContextTree]">children</a>)
              <span title="Boolean(true)" class="keyword">true</span>
            } <span class="keyword">else</span> <span title="Boolean" class="keyword">if</span> (<a href="../util/Position.scala.html#30298" title="(pos: scala.tools.nsc.util.Position)Boolean">oldpos</a> includes <a href="#555919" title="scala.tools.nsc.util.Position">cpos</a>) {
              <a href="#255731" title="(contexts: ContextTrees.this.Contexts,context: ContextTrees.this.Context,cpos: scala.tools.nsc.util.Position)Unit">addContext</a>(<a href="#555917" title="(idx: Int)ContextTrees.this.ContextTree">contexts</a>(<a href="#755544" title="Int">idx</a>).<a href="#755035" title="=&gt; scala.collection.mutable.ArrayBuffer[ContextTrees.this.ContextTree]">children</a>, <a href="#555918" title="ContextTrees.this.Context">context</a>, <a href="#555919" title="scala.tools.nsc.util.Position">cpos</a>)
              <span title="Boolean(true)" class="keyword">true</span>
            } <span class="keyword">else</span> <span title="Boolean" class="keyword">if</span> (<a href="../util/Position.scala.html#30298" title="(pos: scala.tools.nsc.util.Position)Boolean">cpos</a> includes <a href="#755545" title="scala.tools.nsc.util.Position">oldpos</a>) {
              <span class="keyword">val</span> <a title="Int" id="755627">start</a> = <a href="#555917" title="ContextTrees.this.Contexts">contexts</a>.<a title="(p: (ContextTrees.this.ContextTree) =&gt; Boolean)Int" id="25556">indexWhere</a>(<a href="../util/Position.scala.html#30298" title="(pos: scala.tools.nsc.util.Position)Boolean">cpos</a> includes <a href="#755643" title="ContextTrees.this.ContextTree">_</a>.<a href="#755033" title="=&gt; scala.tools.nsc.util.Position">pos</a>)
              <span class="keyword">val</span> <a title="Int" id="755628">last</a> = <a href="#555917" title="ContextTrees.this.Contexts">contexts</a>.<a title="(p: (ContextTrees.this.ContextTree) =&gt; Boolean)Int" id="25577">lastIndexWhere</a>(<a href="../util/Position.scala.html#30298" title="(pos: scala.tools.nsc.util.Position)Boolean">cpos</a> includes <a href="#755662" title="ContextTrees.this.ContextTree">_</a>.<a href="#755033" title="=&gt; scala.tools.nsc.util.Position">pos</a>)
              <a href="#555917" title="(idx: Int,elem: ContextTrees.this.ContextTree)Unit">contexts</a>(<a href="#755627" title="Int">start</a>) = <span title="ContextTrees.this.ContextTree" class="keyword">new</span> <a href="#255728" title="ContextTrees.this.ContextTree">ContextTree</a>(<a href="#555919" title="scala.tools.nsc.util.Position">cpos</a>, <a href="#555918" title="ContextTrees.this.Context">context</a>, <a href="#555917" title="ContextTrees.this.Contexts">contexts</a>.<a title="(from: Int,until: Int)scala.collection.mutable.ArrayBuffer[ContextTrees.this.ContextTree]" id="25777">slice</a>(<a href="#755627" title="Int">start</a>, <a href="#755628" title="(x$1: Int)Int">last</a> + <span title="Int(1)" class="int">1</span>))
              <a href="#555917" title="ContextTrees.this.Contexts">contexts</a>.<a title="(n: Int,count: Int)Unit" id="108557">remove</a>(<a href="#755627" title="(x$1: Int)Int">start</a> + <span title="Int(1)" class="int">1</span>, <a href="#755628" title="(x$1: Int)Int">last</a> - <a href="#755627" title="Int">start</a>)
              <span title="Boolean(true)" class="keyword">true</span>
            } <span class="keyword">else</span> <span title="Boolean(false)" class="keyword">false</span>
          }
          <span class="keyword">def</span> <a title="(lo: Int,hi: Int)Unit" id="755543">loop</a>(<a title="Int" id="755782">lo</a>: <span title="Int">Int</span>, <a title="Int" id="755783">hi</a>: <span title="Int">Int</span>) {
            <span title="Unit" class="keyword">if</span> (<a href="#755783" title="(x$1: Int)Int">hi</a> <a title="(x$1: Int)Boolean" id="2960">-</a> <a href="#755782" title="Int">lo</a> &gt; <span title="Int(1)" class="int">1</span>) {
              <span class="keyword">val</span> <a title="Int" id="755796">mid</a> = <span title="(x$1: Int)Int">(</span><a href="#755782" title="(x$1: Int)Int">lo</a> + <a href="#755783" title="Int">hi</a>) / <span title="Int(2)" class="int">2</span>
              <span class="keyword">val</span> <a title="scala.tools.nsc.util.Position" id="755797">midpos</a> = <a href="#555917" title="(idx: Int)ContextTrees.this.ContextTree">contexts</a>(<a href="#755796" title="Int">mid</a>).<a href="#755033" title="=&gt; scala.tools.nsc.util.Position">pos</a>
              <span title="Unit" class="keyword">if</span> (<a href="../util/Position.scala.html#30300" title="(pos: scala.tools.nsc.util.Position)Boolean">cpos</a> precedes <a href="#755797" title="scala.tools.nsc.util.Position">midpos</a>)
                <a href="#755543" title="(lo: Int,hi: Int)Unit">loop</a>(<a href="#755782" title="Int">lo</a>, <a href="#755796" title="Int">mid</a>)
              <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<a href="../util/Position.scala.html#30300" title="(pos: scala.tools.nsc.util.Position)Boolean">midpos</a> precedes <a href="#555919" title="scala.tools.nsc.util.Position">cpos</a>) 
                <a href="#755543" title="(lo: Int,hi: Int)Unit">loop</a>(<a href="#755796" title="Int">mid</a>, <a href="#755783" title="Int">hi</a>)
            } <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<span title="(x$1: Boolean)Boolean">!</span><a href="#755542" title="(idx: Int)Boolean">insertAt</a>(<a href="#755782" title="Int">lo</a>) &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#755542" title="(idx: Int)Boolean">insertAt</a>(<a href="#755783" title="Int">hi</a>)) {
              <span class="keyword">val</span> <a title="scala.tools.nsc.util.Position" id="755833">lopos</a> = <a href="#555917" title="(idx: Int)ContextTrees.this.ContextTree">contexts</a>(<a href="#755782" title="Int">lo</a>).<a href="#755033" title="=&gt; scala.tools.nsc.util.Position">pos</a>
              <span class="keyword">val</span> <a title="scala.tools.nsc.util.Position" id="755834">hipos</a> = <a href="#555917" title="(idx: Int)ContextTrees.this.ContextTree">contexts</a>(<a href="#755783" title="Int">hi</a>).<a href="#755033" title="=&gt; scala.tools.nsc.util.Position">pos</a>
              <span title="Unit" class="keyword">if</span> (<span title="(x$1: Boolean)Boolean">(</span><a href="../util/Position.scala.html#30300" title="(pos: scala.tools.nsc.util.Position)Boolean">lopos</a> precedes <a href="#555919" title="scala.tools.nsc.util.Position">cpos</a>) &amp;&amp; (<a href="../util/Position.scala.html#30300" title="(pos: scala.tools.nsc.util.Position)Boolean">cpos</a> precedes <a href="#755834" title="scala.tools.nsc.util.Position">hipos</a>))
                <a href="#555917" title="ContextTrees.this.Contexts">contexts</a>.<a title="(n: Int,elems: ContextTrees.this.ContextTree*)Unit" id="61659">insert</a>(<a href="#755783" title="Int">hi</a>, <a href="#755027" title="(pos: scala.tools.nsc.util.Position,context: ContextTrees.this.Context)ContextTrees.this.ContextTree" class="keyword">new</a> <a href="#255728" title="ContextTrees.this.ContextTree">ContextTree</a>(<a href="#555919" title="scala.tools.nsc.util.Position">cpos</a>, <a href="#555918" title="ContextTrees.this.Context">context</a>))
              <span class="keyword">else</span> 
                <a href="../Global.scala.html#39062" title="(msg: String)Unit">inform</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;internal error? skewed positions: &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#755833" title="scala.tools.nsc.util.Position">lopos</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot; !&lt; &quot;)" class="string">&quot; !&lt; &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#555919" title="scala.tools.nsc.util.Position">cpos</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot; !&lt; &quot;)" class="string">&quot; !&lt; &quot;</span>+<a href="#755834" title="scala.tools.nsc.util.Position">hipos</a>)
            }
          }
          <a href="#755543" title="(lo: Int,hi: Int)Unit">loop</a>(<span title="Int(0)" class="int">0</span>, <a href="#755409" title="Int">hi</a>)
        }
      }
    } <span class="keyword">catch</span> {
      <span title="Nothing" class="keyword">case</span> <a title="java.lang.Throwable" id="755887">ex</a>: <a title="Throwable" id="1887">Throwable</a> =&gt;
        <span title="(x: Any)Unit">println</span>(<a href="#755887" title="java.lang.Throwable">ex</a>)
        <a href="#755887" title="java.lang.Throwable">ex</a>.<a title="()Unit" id="25932">printStackTrace</a>()
        <span title="(x: Any)Unit">println</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;failure inserting &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#555919" title="scala.tools.nsc.util.Position">cpos</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot; into &quot;)" class="string">&quot; into &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#555917" title="ContextTrees.this.Contexts">contexts</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot;/&quot;)" class="string">&quot;/&quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#555917" title="(idx: Int)ContextTrees.this.ContextTree">contexts</a>(<a href="#555917" title="ContextTrees.this.Contexts">contexts</a>.<span title="(x$1: Int)Int">length</span> - <span title="Int(1)" class="int">1</span>).<a href="#755033" title="=&gt; scala.tools.nsc.util.Position">pos</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot;/&quot;)" class="string">&quot;/&quot;</span>+
                (<a href="#555917" title="(idx: Int)ContextTrees.this.ContextTree">contexts</a>(<a href="#555917" title="ContextTrees.this.Contexts">contexts</a>.<span title="(x$1: Int)Int">length</span> - <span title="Int(1)" class="int">1</span>).<a href="../util/Position.scala.html#30298" title="(pos: scala.tools.nsc.util.Position)Boolean">pos</a> includes <a href="#555919" title="scala.tools.nsc.util.Position">cpos</a>))
        <span title="Nothing" class="keyword">throw</span> <a href="#755887" title="java.lang.Throwable">ex</a>
    }
  }
}
        

        </pre>
    </body>
</html>