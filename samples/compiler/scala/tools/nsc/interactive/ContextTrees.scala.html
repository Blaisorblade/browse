<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/interactive/ContextTrees.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style">
    </head>
    <body>
        <pre>
<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> interactive

<span class="keyword">import</span> collection.mutable.ArrayBuffer
<span class="keyword">import</span> util.Position

<span class="keyword">trait</span> <a title="trait ContextTrees extends java.lang.Object with ScalaObject" id="18713">ContextTrees</a> <span title="ScalaObject">{</span> self: Global =&gt;

  <span class="keyword">type</span> <a title="ContextTrees.this.analyzer.Context" id="256508">Context</a> = analyzer.<a href="../typechecker/Contexts.scala.html#40053" title="ContextTrees.this.analyzer.Context">Context</a>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="ContextTrees.this.analyzer.Context" id="256510">NoContext</a> = <a href="../Global.scala.html#39334" title="object ContextTrees.this.analyzer">analyzer</a>.<a href="../typechecker/Contexts.scala.html#40045" title="=&gt; ContextTrees.this.analyzer.Context">NoContext</a>
  <span class="keyword">type</span> <a title="scala.collection.mutable.ArrayBuffer[ContextTrees.this.ContextTree]" id="256511">Contexts</a> = <span title="scala.collection.mutable.ArrayBuffer[ContextTrees.this.ContextTree]">ArrayBuffer</span>[ContextTree]

  /** A context tree contains contexts that are indexed by positions.
   *  It satisfies the following properties:
   *  1. All context come from compiling the same unit.
   *  2. Child contexts have parent contexts in their outer chain.
   *  3. The `pos` field of a context is the same as `context.tree.pos`, unless that
   *     position is transparent. In that case, `pos` equals the position of
   *     one of the solid descendants of `context.tree`.
   *  4. Children of a context have non-overlapping increasining positions.
   *  5. No context in the tree has a transparent position. 
   */
  <span class="keyword">class</span> <a title="class ContextTree extends java.lang.Object with ScalaObject" id="256512">ContextTree</a><span title="ScalaObject">(</span><span class="keyword">val</span> <a title="scala.tools.nsc.util.Position" id="756869">pos</a>: <a href="../util/Position.scala.html#14785" title="scala.tools.nsc.util.Position">Position</a>, <span class="keyword">val</span> <a title="ContextTrees.this.Context" id="756870">context</a>: <a href="../typechecker/Contexts.scala.html#40053" title="ContextTrees.this.Context">Context</a>, <span class="keyword">val</span> <a title="scala.collection.mutable.ArrayBuffer[ContextTrees.this.ContextTree]" id="756871">children</a>: <span title="scala.collection.mutable.ArrayBuffer[ContextTrees.this.ContextTree]">ArrayBuffer</span>[ContextTree]) {
    <span class="keyword">def</span> <a title="(pos: scala.tools.nsc.util.Position,context: ContextTrees.this.Context)ContextTrees.this.ContextTree" id="756863" class="keyword">this</a>(<a title="scala.tools.nsc.util.Position" id="756876">pos</a>: <a href="../util/Position.scala.html#14785" title="scala.tools.nsc.util.Position">Position</a>, <a title="ContextTrees.this.Context" id="756877">context</a>: <a href="../typechecker/Contexts.scala.html#40053" title="ContextTrees.this.Context">Context</a>) = <a href="#256512" title="ContextTree.this.type" class="keyword">this</a>(<a href="#756876" title="scala.tools.nsc.util.Position">pos</a>, <a href="#756877" title="ContextTrees.this.Context">context</a>, <a title="()scala.collection.mutable.ArrayBuffer[ContextTrees.this.ContextTree]" id="108940" class="keyword">new</a> <span title="scala.collection.mutable.ArrayBuffer[ContextTrees.this.ContextTree]">ArrayBuffer</span>[ContextTree])
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="()java.lang.String" id="756864">toString</a> = <span title="(x$1: Any)java.lang.String" class="string">&quot;ContextTree(&quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#756869" title="=&gt; scala.tools.nsc.util.Position">pos</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot;, &quot;)" class="string">&quot;, &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#756871" title="=&gt; scala.collection.mutable.ArrayBuffer[ContextTrees.this.ContextTree]">children</a>+<span title="java.lang.String(&quot;)&quot;)" class="string">&quot;)&quot;</span>
  }

  /** Optionally returns the smallest context that contains given `pos`, or None if none exists.
   */
  <span class="keyword">def</span> <a title="(contexts: ContextTrees.this.Contexts,pos: scala.tools.nsc.util.Position)Option[ContextTrees.this.Context]" id="256513">locateContext</a>(<a title="ContextTrees.this.Contexts" id="327468">contexts</a>: <span title="ContextTrees.this.Contexts">Contexts</span>, <a title="scala.tools.nsc.util.Position" id="327469">pos</a>: <a href="../util/Position.scala.html#14785" title="scala.tools.nsc.util.Position">Position</a>): <span title="Option[ContextTrees.this.Context]">Option</span>[Context] = {
    <span title="Option[ContextTrees.this.Context]" class="keyword">if</span> (<a href="#327468" title="ContextTrees.this.Contexts">contexts</a>.<span title="=&gt; Boolean">isEmpty</span>) <span title="object None">None</span>
    <span class="keyword">else</span> {
      <span class="keyword">val</span> <a title="Int" id="756907">hi</a> = <a href="#327468" title="ContextTrees.this.Contexts">contexts</a>.<span title="(x$1: Int)Int">length</span> - <span title="Int(1)" class="int">1</span>
      <span title="Option[ContextTrees.this.Context]" class="keyword">if</span> (<a title="(x$1: Boolean)Boolean" id="2231">(</a><a href="#327468" title="(idx: Int)ContextTrees.this.ContextTree">contexts</a>(<a href="#756907" title="Int">hi</a>).<a href="../util/Position.scala.html#30486" title="(pos: scala.tools.nsc.util.Position)Boolean">pos</a> precedes <a href="#327469" title="scala.tools.nsc.util.Position">pos</a>) || (<a href="../util/Position.scala.html#30486" title="(pos: scala.tools.nsc.util.Position)Boolean">pos</a> precedes <a href="#327468" title="(idx: Int)ContextTrees.this.ContextTree">contexts</a>(<span title="Int(0)" class="int">0</span>).<a href="#756869" title="=&gt; scala.tools.nsc.util.Position">pos</a>)) <span title="object None">None</span>
      <span class="keyword">else</span> {
        <span class="keyword">def</span> <a title="(lo: Int,hi: Int)Option[ContextTrees.this.Context]" id="756951">loop</a>(<a title="Int" id="756952">lo</a>: <span title="Int">Int</span>, <a title="Int" id="756953">hi</a>: <span title="Int">Int</span>): <span title="Option[ContextTrees.this.Context]">Option</span>[Context] = {
          <span class="keyword">val</span> <a title="Int" id="756954">mid</a> = <span title="(x$1: Int)Int">(</span><a href="#756952" title="(x$1: Int)Int">lo</a> + <a href="#756953" title="Int">hi</a>) / <span title="Int(2)" class="int">2</span>
          <span class="keyword">val</span> <a title="scala.tools.nsc.util.Position" id="756955">midpos</a> = <a href="#327468" title="(idx: Int)ContextTrees.this.ContextTree">contexts</a>(<a href="#756954" title="Int">mid</a>).<a href="#756869" title="=&gt; scala.tools.nsc.util.Position">pos</a>
          <span title="Option[ContextTrees.this.Context]" class="keyword">if</span> (<span title="(x$1: Boolean)Boolean">(</span><a href="../util/Position.scala.html#30486" title="(pos: scala.tools.nsc.util.Position)Boolean">pos</a> precedes <a href="#756955" title="scala.tools.nsc.util.Position">midpos</a>) &amp;&amp; (<a href="#756954" title="(x$1: Int)Boolean">mid</a> &lt; <a href="#756953" title="Int">hi</a>))
            <a href="#756951" title="(lo: Int,hi: Int)Option[ContextTrees.this.Context]">loop</a>(<a href="#756952" title="Int">lo</a>, <a href="#756954" title="Int">mid</a>)
          <span class="keyword">else</span> <span title="Option[ContextTrees.this.Context]" class="keyword">if</span> (<span title="(x$1: Boolean)Boolean">(</span><a href="../util/Position.scala.html#30486" title="(pos: scala.tools.nsc.util.Position)Boolean">midpos</a> precedes <a href="#327469" title="scala.tools.nsc.util.Position">pos</a>) &amp;&amp; (<a href="#756952" title="(x$1: Int)Boolean">lo</a> &lt; <a href="#756954" title="Int">mid</a>))
            <a href="#756951" title="(lo: Int,hi: Int)Option[ContextTrees.this.Context]">loop</a>(<a href="#756954" title="Int">mid</a>, <a href="#756953" title="Int">hi</a>)
          <span class="keyword">else</span> <span title="Option[ContextTrees.this.Context]" class="keyword">if</span> (<a href="../util/Position.scala.html#30484" title="(pos: scala.tools.nsc.util.Position)Boolean">midpos</a> includes <a href="#327469" title="scala.tools.nsc.util.Position">pos</a>) 
            <span title="(x: ContextTrees.this.Context)Some[ContextTrees.this.Context]">Some</span>(<a href="#327468" title="(idx: Int)ContextTrees.this.ContextTree">contexts</a>(<a href="#756954" title="Int">mid</a>).<a href="#756870" title="=&gt; ContextTrees.this.Context">context</a>)
          <span class="keyword">else</span> <span title="Option[ContextTrees.this.Context]" class="keyword">if</span> (<a href="#327468" title="(idx: Int)ContextTrees.this.ContextTree">contexts</a>(<a href="#756954" title="(x$1: Int)Int">mid</a>+<span title="Int(1)" class="int">1</span>).<a href="../util/Position.scala.html#30484" title="(pos: scala.tools.nsc.util.Position)Boolean">pos</a> includes <a href="#327469" title="scala.tools.nsc.util.Position">pos</a>)
            <span title="(x: ContextTrees.this.Context)Some[ContextTrees.this.Context]">Some</span>(<a href="#327468" title="(idx: Int)ContextTrees.this.ContextTree">contexts</a>(<a href="#756954" title="(x$1: Int)Int">mid</a>+<span title="Int(1)" class="int">1</span>).<a href="#756870" title="=&gt; ContextTrees.this.Context">context</a>)
          <span class="keyword">else</span> <span title="object None">None</span>
        }
        <a href="#756951" title="(lo: Int,hi: Int)Option[ContextTrees.this.Context]">loop</a>(<span title="Int(0)" class="int">0</span>, <a href="#756907" title="Int">hi</a>)
      }
    }
  }

  /** Insert a context at correct position into a buffer of context trees.
   *  If the `context` has a transparent position, add it multiple times
   *  at the positions of all its solid descendant trees.
   */
  <span class="keyword">def</span> <a title="(contexts: ContextTrees.this.Contexts,context: ContextTrees.this.Context)Unit" id="256514">addContext</a>(<a title="ContextTrees.this.Contexts" id="557303">contexts</a>: <span title="ContextTrees.this.Contexts">Contexts</span>, <a title="ContextTrees.this.Context" id="557304">context</a>: <a href="../typechecker/Contexts.scala.html#40053" title="ContextTrees.this.Context">Context</a>) {
    <span class="keyword">val</span> <a title="scala.tools.nsc.util.Position" id="757088">cpos</a> = <a href="#557304" title="ContextTrees.this.Context">context</a>.<a href="../typechecker/Contexts.scala.html#48612" title="=&gt; ContextTrees.this.analyzer.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29547" title="=&gt; scala.tools.nsc.util.Position">pos</a>
    <span title="Unit" class="keyword">if</span> (<a href="#757088" title="scala.tools.nsc.util.Position">cpos</a>.<a href="../util/Position.scala.html#30466" title="=&gt; Boolean">isTransparent</a>)
      <span class="keyword">for</span> (<a title="ContextTrees.this.Tree" id="757199">t</a> &lt;- <a href="#557304" title="ContextTrees.this.Context">context</a>.<a href="../typechecker/Contexts.scala.html#48612" title="=&gt; ContextTrees.this.analyzer.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29566" title="(f: (ContextTrees.this.analyzer.global.Tree) =&gt; Traversable[ContextTrees.this.Tree])(implicit bf: scala.collection.generic.BuilderFactory[ContextTrees.this.Tree,List[ContextTrees.this.Tree],List[ContextTrees.this.analyzer.global.Tree]])List[ContextTrees.this.Tree]" id="25407">children</a> <a title="(f: (ContextTrees.this.Tree) =&gt; Unit)Unit" id="7415">flatMap</a> <a href="RangePositions.scala.html#68284" title="(tree: ContextTrees.this.Tree)List[ContextTrees.this.Tree]">solidDescendants</a>)
        <a href="#256515" title="(contexts: ContextTrees.this.Contexts,context: ContextTrees.this.Context,cpos: scala.tools.nsc.util.Position)Unit">addContext</a>(<a href="#557303" title="ContextTrees.this.Contexts">contexts</a>, <a href="#557304" title="ContextTrees.this.Context">context</a>, <a href="#757199" title="ContextTrees.this.Tree">t</a>.<a href="../ast/Trees.scala.html#29547" title="=&gt; scala.tools.nsc.util.Position">pos</a>)
    <span class="keyword">else</span>
      <a href="#256515" title="(contexts: ContextTrees.this.Contexts,context: ContextTrees.this.Context,cpos: scala.tools.nsc.util.Position)Unit">addContext</a>(<a href="#557303" title="ContextTrees.this.Contexts">contexts</a>, <a href="#557304" title="ContextTrees.this.Context">context</a>, <a href="#757088" title="scala.tools.nsc.util.Position">cpos</a>)
  }

  /** Insert a context with non-transparent position `cpos`
   *  at correct position into a buffer of context trees.
   */
  <span class="keyword">def</span> <a title="(contexts: ContextTrees.this.Contexts,context: ContextTrees.this.Context,cpos: scala.tools.nsc.util.Position)Unit" id="256515">addContext</a>(<a title="ContextTrees.this.Contexts" id="557296">contexts</a>: <span title="ContextTrees.this.Contexts">Contexts</span>, <a title="ContextTrees.this.Context" id="557297">context</a>: <a href="../typechecker/Contexts.scala.html#40053" title="ContextTrees.this.Context">Context</a>, <a title="scala.tools.nsc.util.Position" id="557298">cpos</a>: <a href="../util/Position.scala.html#14785" title="scala.tools.nsc.util.Position">Position</a>) {
    <span class="keyword">try</span> {
      <span title="Unit" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="#557298" title="scala.tools.nsc.util.Position">cpos</a>.<a href="../util/Position.scala.html#30467" title="=&gt; Boolean">isRange</a>) <span title="Unit">{</span>}
      <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<a href="#557296" title="ContextTrees.this.Contexts">contexts</a>.<span title="=&gt; Boolean">isEmpty</span>) <a href="#557296" title="(elem: ContextTrees.this.ContextTree)contexts.type">contexts</a> <span title="Unit">+=</span> <a href="#756863" title="(pos: scala.tools.nsc.util.Position,context: ContextTrees.this.Context)ContextTrees.this.ContextTree" class="keyword">new</a> <a href="#256512" title="ContextTrees.this.ContextTree">ContextTree</a>(<a href="#557298" title="scala.tools.nsc.util.Position">cpos</a>, <a href="#557297" title="ContextTrees.this.Context">context</a>)
      <span class="keyword">else</span> {
        <span class="keyword">val</span> <a title="Int" id="757248">hi</a> = <a href="#557296" title="ContextTrees.this.Contexts">contexts</a>.<span title="(x$1: Int)Int">length</span> - <span title="Int(1)" class="int">1</span>
        <span title="Unit" class="keyword">if</span> (<a href="#557296" title="(idx: Int)ContextTrees.this.ContextTree">contexts</a>(<a href="#757248" title="Int">hi</a>).<a href="../util/Position.scala.html#30487" title="(pos: scala.tools.nsc.util.Position)Boolean">pos</a> properlyPrecedes <a href="#557298" title="scala.tools.nsc.util.Position">cpos</a>) 
          <a href="#557296" title="(elem: ContextTrees.this.ContextTree)contexts.type">contexts</a> <span title="Unit">+=</span> <a href="#756863" title="(pos: scala.tools.nsc.util.Position,context: ContextTrees.this.Context)ContextTrees.this.ContextTree" class="keyword">new</a> <a href="#256512" title="ContextTrees.this.ContextTree">ContextTree</a>(<a href="#557298" title="scala.tools.nsc.util.Position">cpos</a>, <a href="#557297" title="ContextTrees.this.Context">context</a>)
        <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<a href="#557296" title="(idx: Int)ContextTrees.this.ContextTree">contexts</a>(<a href="#757248" title="Int">hi</a>).<a href="../util/Position.scala.html#30485" title="(pos: scala.tools.nsc.util.Position)Boolean">pos</a> properlyIncludes <a href="#557298" title="scala.tools.nsc.util.Position">cpos</a>) // fast path w/o search
          <a href="#256515" title="(contexts: ContextTrees.this.Contexts,context: ContextTrees.this.Context,cpos: scala.tools.nsc.util.Position)Unit">addContext</a>(<a href="#557296" title="(idx: Int)ContextTrees.this.ContextTree">contexts</a>(<a href="#757248" title="Int">hi</a>).<a href="#756871" title="=&gt; scala.collection.mutable.ArrayBuffer[ContextTrees.this.ContextTree]">children</a>, <a href="#557297" title="ContextTrees.this.Context">context</a>, <a href="#557298" title="scala.tools.nsc.util.Position">cpos</a>)
        <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<a href="../util/Position.scala.html#30487" title="(pos: scala.tools.nsc.util.Position)Boolean">cpos</a> properlyPrecedes <a href="#557296" title="(idx: Int)ContextTrees.this.ContextTree">contexts</a>(<span title="Int(0)" class="int">0</span>).<a href="#756869" title="=&gt; scala.tools.nsc.util.Position">pos</a>) 
          <a href="#756863" title="(pos: scala.tools.nsc.util.Position,context: ContextTrees.this.Context)ContextTrees.this.ContextTree" class="keyword">new</a> <a href="#256512" title="ContextTrees.this.ContextTree">ContextTree</a>(<a href="#557298" title="scala.tools.nsc.util.Position">cpos</a>, <a href="#557297" title="ContextTrees.this.Context">context</a>) <a href="#757371" title="ContextTrees.this.ContextTree">+:</a> <a href="#557296" title="(elem: ContextTrees.this.ContextTree)contexts.type" id="108948">contexts</a>
        <span class="keyword">else</span> {
          <span class="keyword">def</span> <a title="(idx: Int)Boolean" id="757381">insertAt</a>(<a title="Int" id="757383">idx</a>: <span title="Int">Int</span>): <a title="Boolean" id="1972">Boolean</a> = {
            <span class="keyword">val</span> <a title="scala.tools.nsc.util.Position" id="757384">oldpos</a> = <a href="#557296" title="(idx: Int)ContextTrees.this.ContextTree">contexts</a>(<a href="#757383" title="Int">idx</a>).<a href="#756869" title="=&gt; scala.tools.nsc.util.Position">pos</a>
            <span title="Boolean" class="keyword">if</span> (<a href="../util/Position.scala.html#30489" title="(pos: scala.tools.nsc.util.Position)Boolean">oldpos</a> sameRange <a href="#557298" title="scala.tools.nsc.util.Position">cpos</a>) {
              <a href="#557296" title="(idx: Int,elem: ContextTrees.this.ContextTree)Unit">contexts</a>(<a href="#757383" title="Int">idx</a>) = <span title="ContextTrees.this.ContextTree" class="keyword">new</span> <a href="#256512" title="ContextTrees.this.ContextTree">ContextTree</a>(<a href="#557298" title="scala.tools.nsc.util.Position">cpos</a>, <a href="#557297" title="ContextTrees.this.Context">context</a>, <a href="#557296" title="(idx: Int)ContextTrees.this.ContextTree">contexts</a>(<a href="#757383" title="Int">idx</a>).<a href="#756871" title="=&gt; scala.collection.mutable.ArrayBuffer[ContextTrees.this.ContextTree]">children</a>)
              <span title="Boolean(true)" class="keyword">true</span>
            } <span class="keyword">else</span> <span title="Boolean" class="keyword">if</span> (<a href="../util/Position.scala.html#30484" title="(pos: scala.tools.nsc.util.Position)Boolean">oldpos</a> includes <a href="#557298" title="scala.tools.nsc.util.Position">cpos</a>) {
              <a href="#256515" title="(contexts: ContextTrees.this.Contexts,context: ContextTrees.this.Context,cpos: scala.tools.nsc.util.Position)Unit">addContext</a>(<a href="#557296" title="(idx: Int)ContextTrees.this.ContextTree">contexts</a>(<a href="#757383" title="Int">idx</a>).<a href="#756871" title="=&gt; scala.collection.mutable.ArrayBuffer[ContextTrees.this.ContextTree]">children</a>, <a href="#557297" title="ContextTrees.this.Context">context</a>, <a href="#557298" title="scala.tools.nsc.util.Position">cpos</a>)
              <span title="Boolean(true)" class="keyword">true</span>
            } <span class="keyword">else</span> <span title="Boolean" class="keyword">if</span> (<a href="../util/Position.scala.html#30484" title="(pos: scala.tools.nsc.util.Position)Boolean">cpos</a> includes <a href="#757384" title="scala.tools.nsc.util.Position">oldpos</a>) {
              <span class="keyword">val</span> <a title="Int" id="757466">start</a> = <a href="#557296" title="ContextTrees.this.Contexts">contexts</a>.<a title="(p: (ContextTrees.this.ContextTree) =&gt; Boolean)Int" id="25715">indexWhere</a>(<a href="../util/Position.scala.html#30484" title="(pos: scala.tools.nsc.util.Position)Boolean">cpos</a> includes <a href="#757482" title="ContextTrees.this.ContextTree">_</a>.<a href="#756869" title="=&gt; scala.tools.nsc.util.Position">pos</a>)
              <span class="keyword">val</span> <a title="Int" id="757467">last</a> = <a href="#557296" title="ContextTrees.this.Contexts">contexts</a>.<a title="(p: (ContextTrees.this.ContextTree) =&gt; Boolean)Int" id="25736">lastIndexWhere</a>(<a href="../util/Position.scala.html#30484" title="(pos: scala.tools.nsc.util.Position)Boolean">cpos</a> includes <a href="#757501" title="ContextTrees.this.ContextTree">_</a>.<a href="#756869" title="=&gt; scala.tools.nsc.util.Position">pos</a>)
              <a href="#557296" title="(idx: Int,elem: ContextTrees.this.ContextTree)Unit">contexts</a>(<a href="#757466" title="Int">start</a>) = <span title="ContextTrees.this.ContextTree" class="keyword">new</span> <a href="#256512" title="ContextTrees.this.ContextTree">ContextTree</a>(<a href="#557298" title="scala.tools.nsc.util.Position">cpos</a>, <a href="#557297" title="ContextTrees.this.Context">context</a>, <a href="#557296" title="ContextTrees.this.Contexts">contexts</a>.<a title="(from: Int,until: Int)scala.collection.mutable.ArrayBuffer[ContextTrees.this.ContextTree]" id="25936">slice</a>(<a href="#757466" title="Int">start</a>, <a href="#757467" title="(x$1: Int)Int">last</a> + <span title="Int(1)" class="int">1</span>))
              <a href="#557296" title="ContextTrees.this.Contexts">contexts</a>.<a title="(n: Int,count: Int)Unit" id="108955">remove</a>(<a href="#757466" title="(x$1: Int)Int">start</a> + <span title="Int(1)" class="int">1</span>, <a href="#757467" title="(x$1: Int)Int">last</a> - <a href="#757466" title="Int">start</a>)
              <span title="Boolean(true)" class="keyword">true</span>
            } <span class="keyword">else</span> <span title="Boolean(false)" class="keyword">false</span>
          }
          <span class="keyword">def</span> <a title="(lo: Int,hi: Int)Unit" id="757382">loop</a>(<a title="Int" id="757621">lo</a>: <span title="Int">Int</span>, <a title="Int" id="757622">hi</a>: <span title="Int">Int</span>) {
            <span title="Unit" class="keyword">if</span> (<a href="#757622" title="(x$1: Int)Int">hi</a> <a title="(x$1: Int)Boolean" id="2981">-</a> <a href="#757621" title="Int">lo</a> &gt; <span title="Int(1)" class="int">1</span>) {
              <span class="keyword">val</span> <a title="Int" id="757635">mid</a> = <span title="(x$1: Int)Int">(</span><a href="#757621" title="(x$1: Int)Int">lo</a> + <a href="#757622" title="Int">hi</a>) / <span title="Int(2)" class="int">2</span>
              <span class="keyword">val</span> <a title="scala.tools.nsc.util.Position" id="757636">midpos</a> = <a href="#557296" title="(idx: Int)ContextTrees.this.ContextTree">contexts</a>(<a href="#757635" title="Int">mid</a>).<a href="#756869" title="=&gt; scala.tools.nsc.util.Position">pos</a>
              <span title="Unit" class="keyword">if</span> (<a href="../util/Position.scala.html#30486" title="(pos: scala.tools.nsc.util.Position)Boolean">cpos</a> precedes <a href="#757636" title="scala.tools.nsc.util.Position">midpos</a>)
                <a href="#757382" title="(lo: Int,hi: Int)Unit">loop</a>(<a href="#757621" title="Int">lo</a>, <a href="#757635" title="Int">mid</a>)
              <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<a href="../util/Position.scala.html#30486" title="(pos: scala.tools.nsc.util.Position)Boolean">midpos</a> precedes <a href="#557298" title="scala.tools.nsc.util.Position">cpos</a>) 
                <a href="#757382" title="(lo: Int,hi: Int)Unit">loop</a>(<a href="#757635" title="Int">mid</a>, <a href="#757622" title="Int">hi</a>)
            } <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<span title="(x$1: Boolean)Boolean">!</span><a href="#757381" title="(idx: Int)Boolean">insertAt</a>(<a href="#757621" title="Int">lo</a>) &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#757381" title="(idx: Int)Boolean">insertAt</a>(<a href="#757622" title="Int">hi</a>)) {
              <span class="keyword">val</span> <a title="scala.tools.nsc.util.Position" id="757672">lopos</a> = <a href="#557296" title="(idx: Int)ContextTrees.this.ContextTree">contexts</a>(<a href="#757621" title="Int">lo</a>).<a href="#756869" title="=&gt; scala.tools.nsc.util.Position">pos</a>
              <span class="keyword">val</span> <a title="scala.tools.nsc.util.Position" id="757673">hipos</a> = <a href="#557296" title="(idx: Int)ContextTrees.this.ContextTree">contexts</a>(<a href="#757622" title="Int">hi</a>).<a href="#756869" title="=&gt; scala.tools.nsc.util.Position">pos</a>
              <span title="Unit" class="keyword">if</span> (<span title="(x$1: Boolean)Boolean">(</span><a href="../util/Position.scala.html#30486" title="(pos: scala.tools.nsc.util.Position)Boolean">lopos</a> precedes <a href="#557298" title="scala.tools.nsc.util.Position">cpos</a>) &amp;&amp; (<a href="../util/Position.scala.html#30486" title="(pos: scala.tools.nsc.util.Position)Boolean">cpos</a> precedes <a href="#757673" title="scala.tools.nsc.util.Position">hipos</a>))
                <a href="#557296" title="ContextTrees.this.Contexts">contexts</a>.<a title="(n: Int,elems: ContextTrees.this.ContextTree*)Unit" id="61931">insert</a>(<a href="#757622" title="Int">hi</a>, <a href="#756863" title="(pos: scala.tools.nsc.util.Position,context: ContextTrees.this.Context)ContextTrees.this.ContextTree" class="keyword">new</a> <a href="#256512" title="ContextTrees.this.ContextTree">ContextTree</a>(<a href="#557298" title="scala.tools.nsc.util.Position">cpos</a>, <a href="#557297" title="ContextTrees.this.Context">context</a>))
              <span class="keyword">else</span> 
                <a href="../Global.scala.html#39294" title="(msg: String)Unit">inform</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;internal error? skewed positions: &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#757672" title="scala.tools.nsc.util.Position">lopos</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot; !&lt; &quot;)" class="string">&quot; !&lt; &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#557298" title="scala.tools.nsc.util.Position">cpos</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot; !&lt; &quot;)" class="string">&quot; !&lt; &quot;</span>+<a href="#757673" title="scala.tools.nsc.util.Position">hipos</a>)
            }
          }
          <a href="#757382" title="(lo: Int,hi: Int)Unit">loop</a>(<span title="Int(0)" class="int">0</span>, <a href="#757248" title="Int">hi</a>)
        }
      }
    } <span class="keyword">catch</span> {
      <span title="Nothing" class="keyword">case</span> <a title="java.lang.Throwable" id="757726">ex</a>: <a title="Throwable" id="1908">Throwable</a> =&gt;
        <span title="(x: Any)Unit">println</span>(<a href="#757726" title="java.lang.Throwable">ex</a>)
        <a href="#757726" title="java.lang.Throwable">ex</a>.<a title="()Unit" id="26091">printStackTrace</a>()
        <span title="(x: Any)Unit">println</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;failure inserting &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#557298" title="scala.tools.nsc.util.Position">cpos</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot; into &quot;)" class="string">&quot; into &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#557296" title="ContextTrees.this.Contexts">contexts</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot;/&quot;)" class="string">&quot;/&quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#557296" title="(idx: Int)ContextTrees.this.ContextTree">contexts</a>(<a href="#557296" title="ContextTrees.this.Contexts">contexts</a>.<span title="(x$1: Int)Int">length</span> - <span title="Int(1)" class="int">1</span>).<a href="#756869" title="=&gt; scala.tools.nsc.util.Position">pos</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot;/&quot;)" class="string">&quot;/&quot;</span>+
                (<a href="#557296" title="(idx: Int)ContextTrees.this.ContextTree">contexts</a>(<a href="#557296" title="ContextTrees.this.Contexts">contexts</a>.<span title="(x$1: Int)Int">length</span> - <span title="Int(1)" class="int">1</span>).<a href="../util/Position.scala.html#30484" title="(pos: scala.tools.nsc.util.Position)Boolean">pos</a> includes <a href="#557298" title="scala.tools.nsc.util.Position">cpos</a>))
        <span title="Nothing" class="keyword">throw</span> <a href="#757726" title="java.lang.Throwable">ex</a>
    }
  }
}
        

        </pre>
    </body>
</html>