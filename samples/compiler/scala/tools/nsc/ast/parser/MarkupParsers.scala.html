<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/ast/parser/MarkupParsers.scala</title>
        <script type="text/javascript" src="../../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../../style.css" title="Style">
    </head>
    <body onload="initializeLinked()">
        <pre>
<span class="comment">/* NSC -- new Scala compiler
 * Copyright 2005-2009 LAMP/EPFL
 * @author Burak Emir
 */</span>
<span class="comment">// $Id: MarkupParsers.scala 17315 2009-03-16 17:46:58Z extempore $</span>

<span class="keyword">package</span> scala.tools.nsc.ast.parser

<span class="keyword">import</span> scala.collection.mutable
<span class="keyword">import</span> scala.tools.nsc.util.{Position,NoPosition,SourceFile}
<span class="keyword">import</span> scala.xml.{Text, TextBuffer}
<span class="keyword">import</span> SourceFile.{SU,LF}
<span class="keyword">import</span> scala.annotation.switch

<span class="comment">/** This trait ...
 *
 *  @author  Burak Emir
 *  @version 1.0
 */</span>
<span class="keyword">trait</span> <span class="typed"><span class="type">trait MarkupParsers extends java.lang.Object with ScalaObject</span><a id="12282">MarkupParsers</a></span> {self: Parsers =&gt;
  <span class="keyword">case</span> <span class="keyword">object</span> <span class="typed"><span class="type">object MarkupParsers.this.MissingEndTagException</span><span id="169571"><span id="46843"><span id="3500"><span id="169568"><span id="169569"><span id="169570"><span id="29856"><a id="169573">MissingEndTagException</a></span></span></span></span></span></span></span></span> <span class="keyword">extends</span> <span class="typed"><span class="type">java.lang.RuntimeException</span><span id="5976"><a id="821">RuntimeException</a></span></span> {
    <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">()java.lang.String</span><a id="169559">getMessage</a></span> = <span class="typed"><span class="type">java.lang.String(&quot;start tag was here: &quot;)</span><span class="string">&quot;start tag was here: &quot;</span></span>
  }

  <span class="keyword">case</span> <span class="keyword">object</span> <span class="typed"><span class="type">object MarkupParsers.this.ConfusedAboutBracesException</span><span id="46845"><span id="169583"><span id="169585"><span id="3500"><span id="169588"><span id="169586"><span id="29856"><a id="169584">ConfusedAboutBracesException</a></span></span></span></span></span></span></span></span> <span class="keyword">extends</span> <span class="typed"><span class="type">java.lang.RuntimeException</span><span id="5976"><a id="821">RuntimeException</a></span></span> {
    <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">()java.lang.String</span><a id="169575">getMessage</a></span> = <span class="typed"><span class="type">java.lang.String(&quot; I encountered a '}' where I didn't expect one, maybe this tag isn't closed &lt;&quot;)</span><span class="string">&quot; I encountered a '}' where I didn't expect one, maybe this tag isn't closed &lt;&quot;</span></span>
  }

  <span class="keyword">case</span> <span class="keyword">object</span> <span class="typed"><span class="type">object MarkupParsers.this.TruncatedXML</span><span id="169598"><span id="169603"><span id="3500"><span id="46847"><span id="169600"><span id="169601"><span id="29856"><a id="169599">TruncatedXML</a></span></span></span></span></span></span></span></span> <span class="keyword">extends</span> <span class="typed"><span class="type">java.lang.RuntimeException</span><span id="5976"><a id="821">RuntimeException</a></span></span> {
    <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">()java.lang.String</span><a id="169590">getMessage</a></span> = <span class="typed"><span class="type">java.lang.String(&quot;input ended while parsing XML&quot;)</span><span class="string">&quot;input ended while parsing XML&quot;</span></span>
  }

  <span class="keyword">import</span> global._
  <span class="comment">//import posAssigner.atPos</span>

  <span class="keyword">class</span> <span class="typed"><span class="type">class MarkupParser extends java.lang.Object with ScalaObject</span><a id="46850">MarkupParser</a></span>(<span class="typed"><span class="type">MarkupParsers.this.UnitParser</span><span id="142151"><a id="142207">parser</a></span></span>: <span class="typed"><span class="type">MarkupParsers.this.UnitParser</span><a href="Parsers.scala.html#46837">UnitParser</a></span>, <span class="typed"><span class="type">Boolean</span><span id="142152"><a id="142208">presWS</a></span></span>: <span class="typed"><span class="type">Boolean</span><a id="2170">Boolean</a></span>) <span class="comment">/*with scala.xml.parsing.MarkupParser[Tree,Tree] */</span>{

    <span class="keyword">import</span> Tokens.{EMPTY, LBRACE, RBRACE}
    <span class="keyword">import</span> parser.i2p

    <span class="keyword">final</span> <span class="keyword">val</span> <span class="typed"><span class="type">Boolean</span><span id="142157"><a id="142156">preserveWS</a></span></span> = <span class="typed"><span class="type">Boolean</span><a href="#142152">presWS</a></span>
    <span class="keyword">var</span> <span class="typed"><span class="type">MarkupParsers.this.ScannerInput</span><span id="142160"><span id="142158"><span id="142159"><a id="169607">input</a></span></span></span></span> : <span class="typed"><span class="type">MarkupParsers.this.ScannerInput</span><a href="NewScanners.scala.html#38703">ScannerInput</a></span> = _

    <span class="keyword">import</span> parser.{symbXMLBuilder =&gt; handle}

    <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Int</span><a id="142162">pos</a></span> : <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span> = <span class="typed"><span class="type">=&gt; MarkupParsers.this.ScannerInput</span><a href="#142158">input</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a href="NewScanners.scala.html#38952">offset</a></span>
    <span class="keyword">var</span> <span class="typed"><span class="type">scala.tools.nsc.util.Position</span><span id="142165"><span id="142163"><span id="142164"><a id="169608">tmppos</a></span></span></span></span> : <span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a href="../../util/Position.scala.html#8480">Position</a></span> = <span class="typed"><span class="type">object scala.tools.nsc.util.NoPosition</span><a href="../../util/Position.scala.html#8304">NoPosition</a></span>
    <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Char</span><a id="142166">ch</a></span> = <span class="typed"><span class="type">=&gt; MarkupParsers.this.ScannerInput</span><a href="#142158">input</a></span>.<span class="typed"><span class="type">=&gt; Char</span><a id="38905">head</a></span>
    <span class="comment">/** this method assign the next character to ch and advances in input */</span>
    <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Char</span><a id="142167">nextch</a></span> = <span class="typed"><span class="type">=&gt; MarkupParsers.this.ScannerInput</span><a href="#142158">input</a></span>.<span class="typed"><span class="type">()Char</span><a id="32164">next</a></span> <span class="comment">// { s.in.next; /*s.xNext;*/ ch = s.in.ch ; pos = s.in.cpos }</span>

    <span class="comment">/*[Duplicate]*/</span> <span class="keyword">var</span> <span class="typed"><span class="type">Boolean</span><span id="142170"><span id="142168"><span id="142169"><a id="169609">xEmbeddedBlock</a></span></span></span></span> = <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>

    <span class="comment">/** munch expected XML token, report syntax error for unexpected.
     *
     *  @param that ...
     */</span>
    <span class="comment">/*[Duplicate]*/</span> <span class="keyword">def</span> <span class="typed"><span class="type">(Char)Unit</span><a id="142171">xToken</a></span>(<span class="typed"><span class="type">Char</span><a id="169617">that</a></span>: <span class="typed"><span class="type">Char</span><a id="2389">Char</a></span>) {
      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span> <span class="typed"><span class="type">(Char)Boolean</span><a id="3018">==</a></span> <span class="typed"><span class="type">Char</span><a href="#169617">that</a></span>) <span class="typed"><span class="type">=&gt; Char</span><a href="#142167">nextch</a></span>
      <span class="keyword">else</span> <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span> <span class="typed"><span class="type">(Char)Boolean</span><a id="3018">==</a></span> <span class="typed"><span class="type">Char('\032')</span><span >SU</span></span>)
        <span class="typed"><span class="type">Nothing</span><span class="keyword">throw</span></span> <span class="typed"><span class="type">object MarkupParsers.this.TruncatedXML</span><a href="#46847">TruncatedXML</a></span>
      <span class="keyword">else</span> <span class="typed"><span class="type">(String)Char</span><a href="#142203">reportSyntaxError</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;'&quot;)</span><span class="string">&quot;'&quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">Char</span><a href="#169617">that</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;' expected instead of '&quot;)</span><span class="string">&quot;' expected instead of '&quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;'&quot;)</span><span class="string">&quot;'&quot;</span></span>)
    }

    <span class="keyword">var</span> <span class="typed"><span class="type">scala.collection.mutable.Stack[(Int, String)]</span><span id="142174"><span id="142172"><span id="142173"><a id="169610">debugLastStartElement</a></span></span></span></span> = <span class="typed"><span class="type">scala.collection.mutable.Stack[(Int, String)]</span><span class="keyword">new</span></span> mutable.<span class="typed"><span class="type">scala.collection.mutable.Stack[(Int, String)]</span><a id="20063">Stack</a></span>[(Int, String)]

    <span class="comment">/** checks whether next character starts a Scala block, if yes, skip it.
     * @return true if next character starts a scala block 
     */</span>
    <span class="comment">/*[Duplicate]*/</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Boolean</span><a id="142175">xCheckEmbeddedBlock</a></span>: <span class="typed"><span class="type">Boolean</span><a id="2170">Boolean</a></span> = {
      <span class="comment">// attentions, side-effect, used in xText</span>
      <span class="typed"><span class="type">(Boolean)Unit</span><a href="#142169">xEmbeddedBlock</a></span> = (<span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span> <span class="typed"><span class="type">(Char)Boolean</span><a id="3018">==</a></span> <span class="typed"><span class="type">Char('{')</span><span class="char">'{'</span></span>) <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> { <span class="typed"><span class="type">=&gt; Char</span><a href="#142167">nextch</a></span>; (<span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span> <span class="typed"><span class="type">(Char)Boolean</span><a id="3019">!=</a></span> <span class="typed"><span class="type">Char('{')</span><span class="char">'{'</span></span>) }
      <span class="comment">//Console.println(&quot;pos = &quot;+pos+&quot; xEmbeddedBlock returns &quot;+xEmbeddedBlock)</span>
      <span class="typed"><span class="type">=&gt; Boolean</span><a href="#142168">xEmbeddedBlock</a></span>
    }

    <span class="comment">/** parse attribute and add it to listmap
     *  [41] Attributes   ::= { S Name Eq AttValue }
     *       AttValue     ::= `'` { _  } `'`
     *                      | `&quot;` { _ } `&quot;`
     *                      | `{` scalablock `}`
     */</span>
    <span class="comment">/*[Duplicate]*/</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; scala.collection.mutable.HashMap[String,MarkupParsers.this.global.Tree]</span><a id="142176">xAttributes</a></span> = {
      <span class="keyword">var</span> <span class="typed"><span class="type">scala.collection.mutable.HashMap[String,MarkupParsers.this.global.Tree]</span><a id="169635">aMap</a></span> = <span class="typed"><span class="type">scala.collection.mutable.HashMap[String,MarkupParsers.this.global.Tree]</span><span class="keyword">new</span></span> mutable.<span class="typed"><span class="type">scala.collection.mutable.HashMap[String,MarkupParsers.this.global.Tree]</span><a id="20081">HashMap</a></span>[String, Tree]()
      <span class="typed"><span class="type">Unit</span><a href="#169636" class="keyword">while</a></span> (xml.<span class="typed"><span class="type">object scala.xml.Parsing</span><a id="39718">Parsing</a></span>.<span class="typed"><span class="type">(Char)Boolean</span><a id="39749">isNameStart</a></span>(<span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span>)) {
        <span class="keyword">val</span> <span class="typed"><span class="type">String</span><a id="169637">key</a></span> = <span class="typed"><span class="type">=&gt; String</span><a href="#142190">xName</a></span>
        <span class="typed"><span class="type">=&gt; Unit</span><a href="#142191">xEQ</a></span>
        <span class="keyword">val</span> <span class="typed"><span class="type">Char</span><a id="169638">delim</a></span> = <span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span>
        <span class="keyword">val</span> <span class="typed"><span class="type">Int</span><a id="169639">pos1</a></span> = <span class="typed"><span class="type">=&gt; Int</span><a href="#142162">pos</a></span>
        <span class="keyword">val</span> <span class="typed"><span class="type">MarkupParsers.this.global.Tree</span><a id="169640">value</a></span>: <span class="comment">/* AttribValue[*/</span><span class="typed"><span class="type">MarkupParsers.this.global.Tree</span><a href="../Trees.scala.html#22371">Tree</a></span><span class="comment">/*]*/</span> = <span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span> <span class="typed"><span class="type">MarkupParsers.this.global.Tree</span><span class="keyword">match</span></span> {
          <span class="typed"><span class="type">MarkupParsers.this.global.Tree</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Char('&quot;')</span><span class="char">'&quot;'</span></span> | <span class="typed"><span class="type">Char(''')</span><span class="char">'\''</span></span> =&gt;
            <span class="typed"><span class="type">=&gt; Char</span><a href="#142167">nextch</a></span>
            <span class="keyword">val</span> <span class="typed"><span class="type">String</span><a id="169648">tmp</a></span> = <span class="typed"><span class="type">(Char)String</span><a href="#142177">xAttributeValue</a></span>(<span class="typed"><span class="type">Char</span><a href="#169638">delim</a></span>)
            <span class="typed"><span class="type">=&gt; Char</span><a href="#142167">nextch</a></span>
            <span class="keyword">try</span> {
              <span class="typed"><span class="type">object MarkupParser.this.parser.symbXMLBuilder</span><a href="Parsers.scala.html#108960">handle</a></span>.<span class="typed"><span class="type">(scala.tools.nsc.util.Position,String)MarkupParser.this.parser.symbXMLBuilder.global.Tree</span><a href="SymbolicXMLBuilder.scala.html#64856">parseAttribute</a></span>(<span class="typed"><span class="type">implicit scala.tools.nsc.ast.parser.Parsers.UnitParser.i2p : (Int)scala.tools.nsc.util.Position</span><a href="Parsers.scala.html#108954">pos1</a></span>, <span class="typed"><span class="type">String</span><a href="#169648">tmp</a></span>)
            } <span class="keyword">catch</span> {
              <span class="typed"><span class="type">MarkupParsers.this.global.Literal</span><span class="keyword">case</span></span> <span class="typed"><span class="type">java.lang.Throwable</span><a id="169651">e</a></span> =&gt; 
                <span class="typed"><span class="type">(String)Char</span><a href="#142203">reportSyntaxError</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;error parsing attribute value&quot;)</span><span class="string">&quot;error parsing attribute value&quot;</span></span>)
                <span class="typed"><span class="type">MarkupParsers.this.UnitParser</span><a href="#142151">parser</a></span>.<span class="typed"><span class="type">=&gt; MarkupParsers.this.global.Literal</span><a href="Parsers.scala.html#64992">errorTermTree</a></span>
            }
          
          <span class="typed"><span class="type">MarkupParsers.this.global.Tree</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Char('{')</span><span class="char">'{'</span></span>  =&gt;
            <span class="typed"><span class="type">=&gt; Char</span><a href="#142167">nextch</a></span>
            <span class="typed"><span class="type">=&gt; MarkupParsers.this.global.Tree</span><a href="#142198">xEmbeddedExpr</a></span>
          <span class="typed"><span class="type">Nothing</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Char('\032')</span><span >SU</span></span> =&gt;
            <span class="typed"><span class="type">Nothing</span><span class="keyword">throw</span></span> <span class="typed"><span class="type">object MarkupParsers.this.TruncatedXML</span><a href="#46847">TruncatedXML</a></span>
          <span class="typed"><span class="type">MarkupParsers.this.global.Literal</span><span class="keyword">case</span></span> _ =&gt;
            <span class="typed"><span class="type">(String)Char</span><a href="#142203">reportSyntaxError</a></span>(<span class="string">&quot;' or \&quot; delimited attribute value&quot;</span> <span class="typed"><span class="type">java.lang.String(&quot;' or &quot; delimited attribute value or '{' scala-expr '}' expected&quot;)</span><span >+</span></span>
                              <span class="string">&quot; or '{' scala-expr '}' expected&quot;</span> )
            <span class="typed"><span class="type">(MarkupParsers.this.global.Constant)MarkupParsers.this.global.Literal</span><a href="../Trees.scala.html#43688">Literal</a></span>(<span class="typed"><span class="type">(Any)MarkupParsers.this.global.Constant</span><a href="../../symtab/Constants.scala.html#50347">Constant</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;&lt;syntax-error&gt;&quot;)</span><span class="string">&quot;&lt;syntax-error&gt;&quot;</span></span>))
        }
        <span class="comment">// well-formedness constraint: unique attribute names</span>
        <span class="typed"><span class="type">AnyVal with NotNull</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">scala.collection.mutable.HashMap[String,MarkupParsers.this.global.Tree]</span><a href="#169635">aMap</a></span>.<span class="typed"><span class="type">(String)Boolean</span><a id="24240">contains</a></span>(<span class="typed"><span class="type">String</span><a href="#169637">key</a></span>)) {
          <span class="typed"><span class="type">(String)Char</span><a href="#142203">reportSyntaxError</a></span>( <span class="typed"><span class="type">java.lang.String(&quot;attribute &quot;)</span><span class="string">&quot;attribute &quot;</span></span><span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span><span class="typed"><span class="type">String</span><a href="#169637">key</a></span><span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span><span class="typed"><span class="type">java.lang.String(&quot; may only be defined once&quot;)</span><span class="string">&quot; may only be defined once&quot;</span></span> )
        }
        <span class="typed"><span class="type">scala.collection.mutable.HashMap[String,MarkupParsers.this.global.Tree]</span><a href="#169635">aMap</a></span>.<span class="typed"><span class="type">(String,MarkupParsers.this.global.Tree)Unit</span><a id="24296">update</a></span>(<span class="typed"><span class="type">String</span><a href="#169637">key</a></span>, <span class="typed"><span class="type">MarkupParsers.this.global.Tree</span><a href="#169640">value</a></span>)
        <span class="typed"><span class="type">AnyVal</span><span class="keyword">if</span></span> ((<span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span> <span class="typed"><span class="type">(Char)Boolean</span><a id="3019">!=</a></span> <span class="typed"><span class="type">Char('/')</span><span class="char">'/'</span></span>) <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> (<span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span> <span class="typed"><span class="type">(Char)Boolean</span><a id="3019">!=</a></span> <span class="typed"><span class="type">Char('&gt;')</span><span class="char">'&gt;'</span></span>)) {
          <span class="typed"><span class="type">=&gt; AnyVal</span><a href="#142193">xSpace</a></span>
        }
      }
      <span class="typed"><span class="type">scala.collection.mutable.HashMap[String,MarkupParsers.this.global.Tree]</span><a href="#169635">aMap</a></span>
    }

    <span class="comment">/** attribute value, terminated by either ' or &quot;. value may not contain &lt;.
     *  @param endch either ' or &quot;
     */</span>
    <span class="comment">/*[Duplicate]*/</span> <span class="keyword">def</span> <span class="typed"><span class="type">(Char)String</span><a id="142177">xAttributeValue</a></span>(<span class="typed"><span class="type">Char</span><a id="169649">endCh</a></span>: <span class="typed"><span class="type">Char</span><a id="2389">Char</a></span>): <span class="typed"><span class="type">String</span><a id="1861">String</a></span> = {
      <span class="keyword">val</span> <span class="typed"><span class="type">StringBuilder</span><a id="169674">buf</a></span> = <span class="typed"><span class="type">()StringBuilder</span><a id="23671" class="keyword">new</a></span> <span class="typed"><span class="type">StringBuilder</span><a id="1435">StringBuilder</a></span>      
      <span class="typed"><span class="type">Unit</span><a href="#169676" class="keyword">while</a></span> (<span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span> <span class="typed"><span class="type">(Char)Boolean</span><a id="3019">!=</a></span> <span class="typed"><span class="type">Char</span><a href="#169649">endCh</a></span>) {
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span> <span class="typed"><span class="type">(Char)Boolean</span><a id="3018">==</a></span> <span class="typed"><span class="type">Char('\032')</span><span >SU</span></span>)
          <span class="typed"><span class="type">Nothing</span><span class="keyword">throw</span></span> <span class="typed"><span class="type">object MarkupParsers.this.TruncatedXML</span><a href="#46847">TruncatedXML</a></span>
        <span class="typed"><span class="type">StringBuilder</span><a href="#169674">buf</a></span> <span class="typed"><span class="type">(Char)StringBuilder</span><a id="23697">append</a></span> <span class="typed"><span class="type">=&gt; Char</span><a href="#142167">nextch</a></span>
      }
      <span class="keyword">val</span> <span class="typed"><span class="type">String</span><a id="169675">str</a></span> = <span class="typed"><span class="type">StringBuilder</span><a href="#169674">buf</a></span>.<span class="typed"><span class="type">()String</span><a id="23723">toString</a></span>()
      
      <span class="comment">// @todo: normalize attribute value</span>
      <span class="comment">// well-formedness constraint</span>
      <span class="typed"><span class="type">String</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">String</span><a href="#169675">str</a></span>.<span class="typed"><span class="type">(Int)Int</span><a id="5844">indexOf</a></span>(<span class="typed"><span class="type">Int(60)</span><span class="char">'&lt;'</span></span>) <span class="typed"><span class="type">(Int)Boolean</span><a id="3142">!=</a></span> -<span class="typed"><span class="type">Int(-1)</span><span class="int">1</span></span>) {
        <span class="typed"><span class="type">(String)Char</span><a href="#142203">reportSyntaxError</a></span>( <span class="typed"><span class="type">java.lang.String(&quot;'&lt;' not allowed in attrib value&quot;)</span><span class="string">&quot;'&lt;' not allowed in attrib value&quot;</span></span> ); <span class="typed"><span class="type">java.lang.String(&quot;&quot;)</span><span class="string">&quot;&quot;</span></span>
      } <span class="keyword">else</span> {
        <span class="typed"><span class="type">String</span><a href="#169675">str</a></span>
      }
    }

    <span class="comment">/** parse a start or empty tag.
     *  [40] STag         ::= '&lt;' Name { S Attribute } [S] 
     *  [44] EmptyElemTag ::= '&lt;' Name { S Attribute } [S] 
     */</span>
    <span class="comment">/*[Duplicate]*/</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; (String, scala.collection.mutable.Map[String,MarkupParsers.this.global.Tree])</span><a id="142178">xTag</a></span>: <span class="typed"><span class="type">(String, scala.collection.mutable.Map[String,MarkupParsers.this.global.Tree])</span><a id="1378">(</a></span>String, mutable.Map[String, Tree]) = {
      <span class="keyword">val</span> <span class="typed"><span class="type">String</span><a id="169695">elemName</a></span> = <span class="typed"><span class="type">=&gt; String</span><a href="#142190">xName</a></span>
      <span class="typed"><span class="type">=&gt; Unit</span><a href="#142192">xSpaceOpt</a></span>
      <span class="keyword">val</span> <span class="typed"><span class="type">scala.collection.mutable.HashMap[String,MarkupParsers.this.global.Tree]</span><a id="169696">aMap</a></span> =
        <span class="typed"><span class="type">scala.collection.mutable.HashMap[String,MarkupParsers.this.global.Tree]</span><span class="keyword">if</span></span> (xml.<span class="typed"><span class="type">object scala.xml.Parsing</span><a id="39718">Parsing</a></span>.<span class="typed"><span class="type">(Char)Boolean</span><a id="39749">isNameStart</a></span>(<span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span>)) <span class="typed"><span class="type">=&gt; scala.collection.mutable.HashMap[String,MarkupParsers.this.global.Tree]</span><a href="#142176">xAttributes</a></span>
        <span class="keyword">else</span> <span class="typed"><span class="type">scala.collection.mutable.HashMap[String,MarkupParsers.this.global.Tree]</span><span class="keyword">new</span></span> mutable.<span class="typed"><span class="type">scala.collection.mutable.HashMap[String,MarkupParsers.this.global.Tree]</span><a id="20081">HashMap</a></span>[String, Tree]()
      <span class="typed"><span class="type">(String,scala.collection.mutable.HashMap[String,MarkupParsers.this.global.Tree])(String, scala.collection.mutable.HashMap[String,MarkupParsers.this.global.Tree])</span><span id="23625"><a id="1379">(</a></span></span><span class="typed"><span class="type">String</span><a href="#169695">elemName</a></span>, <span class="typed"><span class="type">scala.collection.mutable.HashMap[String,MarkupParsers.this.global.Tree]</span><a href="#169696">aMap</a></span>)
    }

    <span class="comment">/** [42]  '&lt;' xmlEndTag ::=  '&lt;' '/' Name S? '&gt;'
     */</span>
    <span class="comment">/*[Duplicate]*/</span> <span class="keyword">def</span> <span class="typed"><span class="type">(String)Unit</span><a id="142179">xEndTag</a></span>(<span class="typed"><span class="type">String</span><a id="169699">startName</a></span>: <span class="typed"><span class="type">String</span><a id="1861">String</a></span>) {
      <span class="typed"><span class="type">(Char)Unit</span><a href="#142171">xToken</a></span>(<span class="typed"><span class="type">Char('/')</span><span class="char">'/'</span></span>)
      <span class="keyword">val</span> <span class="typed"><span class="type">String</span><a id="169700">endName</a></span> = <span class="typed"><span class="type">=&gt; String</span><a href="#142190">xName</a></span>
      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">String</span><a href="#169700">endName</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5793">!=</a></span> <span class="typed"><span class="type">String</span><a href="#169699">startName</a></span>) {
        <span class="typed"><span class="type">(String)Char</span><a href="#142203">reportSyntaxError</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;expected closing tag of &quot;)</span><span class="string">&quot;expected closing tag of &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">String</span><a href="#169699">startName</a></span>)
        <span class="typed"><span class="type">Nothing</span><span class="keyword">throw</span></span> <span class="typed"><span class="type">object MarkupParsers.this.MissingEndTagException</span><a href="#46843">MissingEndTagException</a></span>
      }
      <span class="typed"><span class="type">=&gt; Unit</span><a href="#142192">xSpaceOpt</a></span>
      <span class="typed"><span class="type">(Char)Unit</span><a href="#142171">xToken</a></span>(<span class="typed"><span class="type">Char('&gt;')</span><span class="char">'&gt;'</span></span>)
    }

    <span class="comment">/** '&lt;! CharData ::= [CDATA[ ( {char} - {char}&quot;]]&gt;&quot;{char} ) ']]&gt;'
     *
     * see [15]
     */</span>
    <span class="comment">/*[Duplicate]*/</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; MarkupParsers.this.global.Tree</span><a id="142180">xCharData</a></span>: <span class="typed"><span class="type">MarkupParsers.this.global.Tree</span><a href="../Trees.scala.html#22371">Tree</a></span> = {
      <span class="typed"><span class="type">(Char)Unit</span><a href="#142171">xToken</a></span>(<span class="typed"><span class="type">Char('[')</span><span class="char">'['</span></span>)
      <span class="typed"><span class="type">(Char)Unit</span><a href="#142171">xToken</a></span>(<span class="typed"><span class="type">Char('C')</span><span class="char">'C'</span></span>)
      <span class="typed"><span class="type">(Char)Unit</span><a href="#142171">xToken</a></span>(<span class="typed"><span class="type">Char('D')</span><span class="char">'D'</span></span>)
      <span class="typed"><span class="type">(Char)Unit</span><a href="#142171">xToken</a></span>(<span class="typed"><span class="type">Char('A')</span><span class="char">'A'</span></span>)
      <span class="typed"><span class="type">(Char)Unit</span><a href="#142171">xToken</a></span>(<span class="typed"><span class="type">Char('T')</span><span class="char">'T'</span></span>)
      <span class="typed"><span class="type">(Char)Unit</span><a href="#142171">xToken</a></span>(<span class="typed"><span class="type">Char('A')</span><span class="char">'A'</span></span>)
      <span class="typed"><span class="type">(Char)Unit</span><a href="#142171">xToken</a></span>(<span class="typed"><span class="type">Char('[')</span><span class="char">'['</span></span>)
      <span class="keyword">val</span> <span class="typed"><span class="type">Int</span><a id="169703">pos1</a></span> = <span class="typed"><span class="type">=&gt; Int</span><a href="#142162">pos</a></span>
      <span class="keyword">val</span> <span class="typed"><span class="type">StringBuilder</span><a id="169704">sb</a></span>: <span class="typed"><span class="type">StringBuilder</span><a id="1435">StringBuilder</a></span> = <span class="typed"><span class="type">()StringBuilder</span><a id="23671" class="keyword">new</a></span> <span class="typed"><span class="type">StringBuilder</span><a id="1435">StringBuilder</a></span>()
      <span class="typed"><span class="type">Unit</span><a href="#169705" class="keyword">while</a></span> (<span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>) {
        <span class="typed"><span class="type">StringBuilder</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span><span class="typed"><span class="type">(Char)Boolean</span><a id="3018">==</a></span><span class="typed"><span class="type">Char(']')</span><span class="char">']'</span></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span>
           { <span class="typed"><span class="type">StringBuilder</span><a href="#169704">sb</a></span>.<span class="typed"><span class="type">(Char)StringBuilder</span><a id="23697">append</a></span>(<span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span>); <span class="typed"><span class="type">=&gt; Char</span><a href="#142167">nextch</a></span>; <span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span> <span class="typed"><span class="type">(Char)Boolean</span><a id="3018">==</a></span> <span class="typed"><span class="type">Char(']')</span><span class="char">']'</span></span> } <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span>
           { <span class="typed"><span class="type">StringBuilder</span><a href="#169704">sb</a></span>.<span class="typed"><span class="type">(Char)StringBuilder</span><a id="23697">append</a></span>(<span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span>); <span class="typed"><span class="type">=&gt; Char</span><a href="#142167">nextch</a></span>; <span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span> <span class="typed"><span class="type">(Char)Boolean</span><a id="3018">==</a></span> <span class="typed"><span class="type">Char('&gt;')</span><span class="char">'&gt;'</span></span> }) {
          <span class="typed"><span class="type">StringBuilder</span><a href="#169704">sb</a></span>.<span class="typed"><span class="type">(Int)Unit</span><a id="23676">length</a></span> = <span class="typed"><span class="type">StringBuilder</span><a href="#169704">sb</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="23675">length</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3148">-</a></span> <span class="typed"><span class="type">Int(2)</span><span class="int">2</span></span>
          <span class="typed"><span class="type">=&gt; Char</span><a href="#142167">nextch</a></span>
          <span class="typed"><span class="type">Nothing</span><span class="keyword">return</span></span> <span class="typed"><span class="type">object MarkupParser.this.parser.symbXMLBuilder</span><a href="Parsers.scala.html#108960">handle</a></span>.<span class="typed"><span class="type">(scala.tools.nsc.util.Position,String)MarkupParser.this.parser.symbXMLBuilder.global.Tree</span><a href="SymbolicXMLBuilder.scala.html#64850">charData</a></span>(<span class="typed"><span class="type">implicit scala.tools.nsc.ast.parser.Parsers.UnitParser.i2p : (Int)scala.tools.nsc.util.Position</span><a href="Parsers.scala.html#108954">pos1</a></span>, <span class="typed"><span class="type">StringBuilder</span><a href="#169704">sb</a></span>.<span class="typed"><span class="type">()String</span><a id="23723">toString</a></span>())
        } <span class="keyword">else</span> <span class="typed"><span class="type">StringBuilder</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span> <span class="typed"><span class="type">(Char)Boolean</span><a id="3018">==</a></span> <span class="typed"><span class="type">Char('\032')</span><span >SU</span></span>)
          <span class="typed"><span class="type">Nothing</span><span class="keyword">throw</span></span> <span class="typed"><span class="type">object MarkupParsers.this.TruncatedXML</span><a href="#46847">TruncatedXML</a></span>
        <span class="keyword">else</span>
          <span class="typed"><span class="type">StringBuilder</span><a href="#169704">sb</a></span>.<span class="typed"><span class="type">(Char)StringBuilder</span><a id="23697">append</a></span>(<span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span>)
        <span class="typed"><span class="type">=&gt; Char</span><a href="#142167">nextch</a></span>
      }
      <span class="typed"><span class="type">object Predef</span><a id="821">Predef</a></span>.<span class="typed"><span class="type">(String)Nothing</span><a id="6000">error</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;this cannot happen&quot;)</span><span class="string">&quot;this cannot happen&quot;</span></span>)
    }

    <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; MarkupParsers.this.global.Tree</span><a id="142181">xUnparsed</a></span>: <span class="typed"><span class="type">MarkupParsers.this.global.Tree</span><a href="../Trees.scala.html#22371">Tree</a></span> = {
      <span class="keyword">val</span> <span class="typed"><span class="type">Int</span><a id="169738">pos1</a></span> = <span class="typed"><span class="type">=&gt; Int</span><a href="#142162">pos</a></span>
      <span class="keyword">val</span> <span class="typed"><span class="type">StringBuilder</span><a id="169739">sb</a></span>: <span class="typed"><span class="type">StringBuilder</span><a id="1435">StringBuilder</a></span> = <span class="typed"><span class="type">()StringBuilder</span><a id="23671" class="keyword">new</a></span> <span class="typed"><span class="type">StringBuilder</span><a id="1435">StringBuilder</a></span>()
      <span class="typed"><span class="type">Unit</span><a href="#169740" class="keyword">while</a></span> (<span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>) {
        <span class="typed"><span class="type">StringBuilder</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span><span class="typed"><span class="type">(Char)Boolean</span><a id="3018">==</a></span><span class="typed"><span class="type">Char('&lt;')</span><span class="char">'&lt;'</span></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span>
           { <span class="typed"><span class="type">StringBuilder</span><a href="#169739">sb</a></span>.<span class="typed"><span class="type">(Char)StringBuilder</span><a id="23697">append</a></span>(<span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span>); <span class="typed"><span class="type">=&gt; Char</span><a href="#142167">nextch</a></span>; <span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span> <span class="typed"><span class="type">(Char)Boolean</span><a id="3018">==</a></span> <span class="typed"><span class="type">Char('/')</span><span class="char">'/'</span></span> } <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span>
           { <span class="typed"><span class="type">StringBuilder</span><a href="#169739">sb</a></span>.<span class="typed"><span class="type">(Char)StringBuilder</span><a id="23697">append</a></span>(<span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span>); <span class="typed"><span class="type">=&gt; Char</span><a href="#142167">nextch</a></span>; <span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span> <span class="typed"><span class="type">(Char)Boolean</span><a id="3018">==</a></span> <span class="typed"><span class="type">Char('x')</span><span class="char">'x'</span></span> } <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span>
           { <span class="typed"><span class="type">StringBuilder</span><a href="#169739">sb</a></span>.<span class="typed"><span class="type">(Char)StringBuilder</span><a id="23697">append</a></span>(<span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span>); <span class="typed"><span class="type">=&gt; Char</span><a href="#142167">nextch</a></span>; <span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span> <span class="typed"><span class="type">(Char)Boolean</span><a id="3018">==</a></span> <span class="typed"><span class="type">Char('m')</span><span class="char">'m'</span></span> } <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span>
           { <span class="typed"><span class="type">StringBuilder</span><a href="#169739">sb</a></span>.<span class="typed"><span class="type">(Char)StringBuilder</span><a id="23697">append</a></span>(<span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span>); <span class="typed"><span class="type">=&gt; Char</span><a href="#142167">nextch</a></span>; <span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span> <span class="typed"><span class="type">(Char)Boolean</span><a id="3018">==</a></span> <span class="typed"><span class="type">Char('l')</span><span class="char">'l'</span></span> } <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span>
           { <span class="typed"><span class="type">StringBuilder</span><a href="#169739">sb</a></span>.<span class="typed"><span class="type">(Char)StringBuilder</span><a id="23697">append</a></span>(<span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span>); <span class="typed"><span class="type">=&gt; Char</span><a href="#142167">nextch</a></span>; <span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span> <span class="typed"><span class="type">(Char)Boolean</span><a id="3018">==</a></span> <span class="typed"><span class="type">Char(':')</span><span class="char">':'</span></span> } <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span>
           { <span class="typed"><span class="type">StringBuilder</span><a href="#169739">sb</a></span>.<span class="typed"><span class="type">(Char)StringBuilder</span><a id="23697">append</a></span>(<span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span>); <span class="typed"><span class="type">=&gt; Char</span><a href="#142167">nextch</a></span>; <span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span> <span class="typed"><span class="type">(Char)Boolean</span><a id="3018">==</a></span> <span class="typed"><span class="type">Char('u')</span><span class="char">'u'</span></span> } <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span>
           { <span class="typed"><span class="type">StringBuilder</span><a href="#169739">sb</a></span>.<span class="typed"><span class="type">(Char)StringBuilder</span><a id="23697">append</a></span>(<span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span>); <span class="typed"><span class="type">=&gt; Char</span><a href="#142167">nextch</a></span>; <span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span> <span class="typed"><span class="type">(Char)Boolean</span><a id="3018">==</a></span> <span class="typed"><span class="type">Char('n')</span><span class="char">'n'</span></span> } <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span>
           { <span class="typed"><span class="type">StringBuilder</span><a href="#169739">sb</a></span>.<span class="typed"><span class="type">(Char)StringBuilder</span><a id="23697">append</a></span>(<span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span>); <span class="typed"><span class="type">=&gt; Char</span><a href="#142167">nextch</a></span>; <span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span> <span class="typed"><span class="type">(Char)Boolean</span><a id="3018">==</a></span> <span class="typed"><span class="type">Char('p')</span><span class="char">'p'</span></span> } <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span>
           { <span class="typed"><span class="type">StringBuilder</span><a href="#169739">sb</a></span>.<span class="typed"><span class="type">(Char)StringBuilder</span><a id="23697">append</a></span>(<span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span>); <span class="typed"><span class="type">=&gt; Char</span><a href="#142167">nextch</a></span>; <span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span> <span class="typed"><span class="type">(Char)Boolean</span><a id="3018">==</a></span> <span class="typed"><span class="type">Char('a')</span><span class="char">'a'</span></span> } <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span>
           { <span class="typed"><span class="type">StringBuilder</span><a href="#169739">sb</a></span>.<span class="typed"><span class="type">(Char)StringBuilder</span><a id="23697">append</a></span>(<span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span>); <span class="typed"><span class="type">=&gt; Char</span><a href="#142167">nextch</a></span>; <span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span> <span class="typed"><span class="type">(Char)Boolean</span><a id="3018">==</a></span> <span class="typed"><span class="type">Char('r')</span><span class="char">'r'</span></span> } <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span>
           { <span class="typed"><span class="type">StringBuilder</span><a href="#169739">sb</a></span>.<span class="typed"><span class="type">(Char)StringBuilder</span><a id="23697">append</a></span>(<span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span>); <span class="typed"><span class="type">=&gt; Char</span><a href="#142167">nextch</a></span>; <span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span> <span class="typed"><span class="type">(Char)Boolean</span><a id="3018">==</a></span> <span class="typed"><span class="type">Char('s')</span><span class="char">'s'</span></span> } <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span>
           { <span class="typed"><span class="type">StringBuilder</span><a href="#169739">sb</a></span>.<span class="typed"><span class="type">(Char)StringBuilder</span><a id="23697">append</a></span>(<span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span>); <span class="typed"><span class="type">=&gt; Char</span><a href="#142167">nextch</a></span>; <span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span> <span class="typed"><span class="type">(Char)Boolean</span><a id="3018">==</a></span> <span class="typed"><span class="type">Char('e')</span><span class="char">'e'</span></span> } <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span>
           { <span class="typed"><span class="type">StringBuilder</span><a href="#169739">sb</a></span>.<span class="typed"><span class="type">(Char)StringBuilder</span><a id="23697">append</a></span>(<span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span>); <span class="typed"><span class="type">=&gt; Char</span><a href="#142167">nextch</a></span>; <span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span> <span class="typed"><span class="type">(Char)Boolean</span><a id="3018">==</a></span> <span class="typed"><span class="type">Char('d')</span><span class="char">'d'</span></span> } <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span>
           { <span class="typed"><span class="type">StringBuilder</span><a href="#169739">sb</a></span>.<span class="typed"><span class="type">(Char)StringBuilder</span><a id="23697">append</a></span>(<span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span>); <span class="typed"><span class="type">=&gt; Char</span><a href="#142167">nextch</a></span>; <span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span> <span class="typed"><span class="type">(Char)Boolean</span><a id="3018">==</a></span> <span class="typed"><span class="type">Char('&gt;')</span><span class="char">'&gt;'</span></span> }) {
          <span class="typed"><span class="type">StringBuilder</span><a href="#169739">sb</a></span>.<span class="typed"><span class="type">(Int)Unit</span><a id="23676">length</a></span> = <span class="typed"><span class="type">StringBuilder</span><a href="#169739">sb</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="23675">length</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3148">-</a></span> <span class="typed"><span class="type">java.lang.String(&quot;&lt;/xml:unparsed&quot;)</span><span class="string">&quot;&lt;/xml:unparsed&quot;</span></span>.<span class="typed"><span class="type">()Int</span><a id="5821">length</a></span>
          <span class="typed"><span class="type">=&gt; Char</span><a href="#142167">nextch</a></span>
          <span class="typed"><span class="type">Nothing</span><span class="keyword">return</span></span> <span class="typed"><span class="type">object MarkupParser.this.parser.symbXMLBuilder</span><a href="Parsers.scala.html#108960">handle</a></span>.<span class="typed"><span class="type">(scala.tools.nsc.util.Position,String)MarkupParser.this.parser.symbXMLBuilder.global.Tree</span><a href="SymbolicXMLBuilder.scala.html#64863">unparsed</a></span>(<span class="typed"><span class="type">implicit scala.tools.nsc.ast.parser.Parsers.UnitParser.i2p : (Int)scala.tools.nsc.util.Position</span><a href="Parsers.scala.html#108954">pos1</a></span>, <span class="typed"><span class="type">StringBuilder</span><a href="#169739">sb</a></span>.<span class="typed"><span class="type">()String</span><a id="23723">toString</a></span>())
        } <span class="keyword">else</span> <span class="typed"><span class="type">StringBuilder</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span> <span class="typed"><span class="type">(Char)Boolean</span><a id="3018">==</a></span> <span class="typed"><span class="type">Char('\032')</span><span >SU</span></span>) {
          <span class="typed"><span class="type">Nothing</span><span class="keyword">throw</span></span> <span class="typed"><span class="type">object MarkupParsers.this.TruncatedXML</span><a href="#46847">TruncatedXML</a></span>
        } <span class="keyword">else</span> <span class="typed"><span class="type">StringBuilder</span><a href="#169739">sb</a></span>.<span class="typed"><span class="type">(Char)StringBuilder</span><a id="23697">append</a></span>(<span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span>)
        <span class="typed"><span class="type">=&gt; Char</span><a href="#142167">nextch</a></span>
      }
      <span class="typed"><span class="type">object Predef</span><a id="821">Predef</a></span>.<span class="typed"><span class="type">(String)Nothing</span><a id="6000">error</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;this cannot happen&quot;)</span><span class="string">&quot;this cannot happen&quot;</span></span>)
    }

    <span class="comment">/** CharRef ::= &quot;&amp;#&quot; '0'..'9' {'0'..'9'} &quot;;&quot;
     *            | &quot;&amp;#x&quot; '0'..'9'|'A'..'F'|'a'..'f' { hexdigit } &quot;;&quot;
     *
     * see [66]
     */</span>
    <span class="comment">/*[Duplicate]*/</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; String</span><a id="142182">xCharRef</a></span>: <span class="typed"><span class="type">String</span><a id="1861">String</a></span> = {
      <span class="keyword">val</span> <span class="typed"><span class="type">Boolean</span><a id="169822">hex</a></span> = (<span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span> <span class="typed"><span class="type">(Char)Boolean</span><a id="3018">==</a></span> <span class="typed"><span class="type">Char('x')</span><span class="char">'x'</span></span>) <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> { <span class="typed"><span class="type">=&gt; Char</span><a href="#142167">nextch</a></span>; <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span> }
      <span class="keyword">val</span> <span class="typed"><span class="type">Int</span><a id="169823">base</a></span> = <span class="typed"><span class="type">Int</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Boolean</span><a href="#169822">hex</a></span>) <span class="typed"><span class="type">Int(16)</span><span class="int">16</span></span> <span class="keyword">else</span> <span class="typed"><span class="type">Int(10)</span><span class="int">10</span></span>
      <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="169824">i</a></span> = <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>
      <span class="typed"><span class="type">Unit</span><a href="#169825" class="keyword">while</a></span> (<span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span> <span class="typed"><span class="type">(Char)Boolean</span><a id="3019">!=</a></span> <span class="typed"><span class="type">Char(';')</span><span class="char">';'</span></span>) { 
        (<span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span>: @<span class="typed"><span class="type">Char @scala.annotation.switch</span><a id="2389">switch</a></span>) <span class="typed"><span class="type">AnyVal</span><span class="keyword">match</span></span> {
          <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Char('0')</span><span class="char">'0'</span></span> | <span class="typed"><span class="type">Char('1')</span><span class="char">'1'</span></span> | <span class="typed"><span class="type">Char('2')</span><span class="char">'2'</span></span> | <span class="typed"><span class="type">Char('3')</span><span class="char">'3'</span></span> | <span class="typed"><span class="type">Char('4')</span><span class="char">'4'</span></span> | <span class="typed"><span class="type">Char('5')</span><span class="char">'5'</span></span> | <span class="typed"><span class="type">Char('6')</span><span class="char">'6'</span></span> | <span class="typed"><span class="type">Char('7')</span><span class="char">'7'</span></span> | <span class="typed"><span class="type">Char('8')</span><span class="char">'8'</span></span> | <span class="typed"><span class="type">Char('9')</span><span class="char">'9'</span></span> =&gt;
            <span class="typed"><span class="type">Int</span><a href="#169824">i</a></span> = <span class="typed"><span class="type">Int</span><a href="#169824">i</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3149">*</a></span> <span class="typed"><span class="type">Int</span><a href="#169823">base</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">+</a></span> <span class="typed"><span class="type">implicit scala.Predef.charWrapper : (Char)scala.runtime.RichChar</span><span id="6134"><a href="#142166" id="821">ch</a></span></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="27428">asDigit</a></span>
          <span class="typed"><span class="type">AnyVal with NotNull</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Char('a')</span><span class="char">'a'</span></span> | <span class="typed"><span class="type">Char('b')</span><span class="char">'b'</span></span> | <span class="typed"><span class="type">Char('c')</span><span class="char">'c'</span></span> | <span class="typed"><span class="type">Char('d')</span><span class="char">'d'</span></span> | <span class="typed"><span class="type">Char('e')</span><span class="char">'e'</span></span> | <span class="typed"><span class="type">Char('f')</span><span class="char">'f'</span></span>
             | <span class="typed"><span class="type">Char('A')</span><span class="char">'A'</span></span> | <span class="typed"><span class="type">Char('B')</span><span class="char">'B'</span></span> | <span class="typed"><span class="type">Char('C')</span><span class="char">'C'</span></span> | <span class="typed"><span class="type">Char('D')</span><span class="char">'D'</span></span> | <span class="typed"><span class="type">Char('E')</span><span class="char">'E'</span></span> | <span class="typed"><span class="type">Char('F')</span><span class="char">'F'</span></span> =&gt;
            <span class="typed"><span class="type">AnyVal with NotNull</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">Boolean</span><a href="#169822">hex</a></span>)
              <span class="typed"><span class="type">(String)Char</span><a href="#142203">reportSyntaxError</a></span>(<span class="string">&quot;hex char not allowed in decimal char ref\n&quot;</span>
                           <span class="typed"><span class="type">java.lang.String(&quot;hex char not allowed in decimal char ref\012Did you mean to write &amp;#x ?&quot;)</span><span >+</span></span><span class="string">&quot;Did you mean to write &amp;#x ?&quot;</span>);
            <span class="keyword">else</span>
              <span class="typed"><span class="type">Int</span><a href="#169824">i</a></span> = <span class="typed"><span class="type">Int</span><a href="#169824">i</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3149">*</a></span> <span class="typed"><span class="type">Int</span><a href="#169823">base</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">+</a></span> <span class="typed"><span class="type">implicit scala.Predef.charWrapper : (Char)scala.runtime.RichChar</span><span id="6134"><a href="#142166" id="821">ch</a></span></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="27428">asDigit</a></span>
          <span class="typed"><span class="type">Nothing</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Char('\032')</span><span >SU</span></span> =&gt;
            <span class="typed"><span class="type">Nothing</span><span class="keyword">throw</span></span> <span class="typed"><span class="type">object MarkupParsers.this.TruncatedXML</span><a href="#46847">TruncatedXML</a></span>
          <span class="typed"><span class="type">Char</span><span class="keyword">case</span></span> _ =&gt;
            <span class="typed"><span class="type">(String)Char</span><a href="#142203">reportSyntaxError</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;character '&quot;)</span><span class="string">&quot;character '&quot;</span></span><span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span><span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span><span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span><span class="typed"><span class="type">java.lang.String(&quot;' not allowed in char ref&quot;)</span><span class="string">&quot;' not allowed in char ref&quot;</span></span>)
        }
        <span class="typed"><span class="type">=&gt; Char</span><a href="#142167">nextch</a></span>
      }
      <span class="typed"><span class="type">(Array[Char])java.lang.String</span><a id="5809" class="keyword">new</a></span> <span class="typed"><span class="type">java.lang.String</span><span id="5971"><a id="821">String</a></span></span>(<span class="typed"><span class="type">(Char*)Array[Char]</span><span id="21535"><a id="1073">Array</a></span></span>(<span class="typed"><span class="type">Int</span><a href="#169824">i</a></span>.<span class="typed"><span class="type">Char</span><a id="3503">asInstanceOf</a></span>[<span class="typed"><span class="type">Char</span><a id="2389">Char</a></span>]))
    }

    <span class="comment">/** Comment ::= '&lt;!--' ((Char - '-') | ('-' (Char - '-')))* '--&gt;'
     *
     * see [15]
     */</span>
    <span class="comment">/*[Duplicate]*/</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; MarkupParsers.this.global.Tree</span><a id="142183">xComment</a></span>: <span class="typed"><span class="type">MarkupParsers.this.global.Tree</span><a href="../Trees.scala.html#22371">Tree</a></span> = {
      <span class="keyword">val</span> <span class="typed"><span class="type">StringBuilder</span><a id="169892">sb</a></span>: <span class="typed"><span class="type">StringBuilder</span><a id="1435">StringBuilder</a></span> = <span class="typed"><span class="type">()StringBuilder</span><a id="23671" class="keyword">new</a></span> <span class="typed"><span class="type">StringBuilder</span><a id="1435">StringBuilder</a></span>()
      <span class="typed"><span class="type">(Char)Unit</span><a href="#142171">xToken</a></span>(<span class="typed"><span class="type">Char('-')</span><span class="char">'-'</span></span>)
      <span class="typed"><span class="type">(Char)Unit</span><a href="#142171">xToken</a></span>(<span class="typed"><span class="type">Char('-')</span><span class="char">'-'</span></span>)
      <span class="typed"><span class="type">Unit</span><a href="#169893" class="keyword">while</a></span> (<span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>) {
        <span class="typed"><span class="type">StringBuilder</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span><span class="typed"><span class="type">(Char)Boolean</span><a id="3018">==</a></span><span class="typed"><span class="type">Char('-')</span><span class="char">'-'</span></span>  <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> { <span class="typed"><span class="type">StringBuilder</span><a href="#169892">sb</a></span>.<span class="typed"><span class="type">(Char)StringBuilder</span><a id="23697">append</a></span>(<span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span>); <span class="typed"><span class="type">=&gt; Char</span><a href="#142167">nextch</a></span>; <span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span> <span class="typed"><span class="type">(Char)Boolean</span><a id="3018">==</a></span> <span class="typed"><span class="type">Char('-')</span><span class="char">'-'</span></span> }) {
          <span class="typed"><span class="type">StringBuilder</span><a href="#169892">sb</a></span>.<span class="typed"><span class="type">(Int)Unit</span><a id="23676">length</a></span> = <span class="typed"><span class="type">StringBuilder</span><a href="#169892">sb</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="23675">length</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3148">-</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
          <span class="typed"><span class="type">=&gt; Char</span><a href="#142167">nextch</a></span>
          <span class="typed"><span class="type">(Char)Unit</span><a href="#142171">xToken</a></span>(<span class="typed"><span class="type">Char('&gt;')</span><span class="char">'&gt;'</span></span>)
          <span class="typed"><span class="type">Nothing</span><span class="keyword">return</span></span> <span class="typed"><span class="type">object MarkupParser.this.parser.symbXMLBuilder</span><a href="Parsers.scala.html#108960">handle</a></span>.<span class="typed"><span class="type">(scala.tools.nsc.util.Position,String)MarkupParser.this.parser.symbXMLBuilder.global.Tree</span><a href="SymbolicXMLBuilder.scala.html#64849">comment</a></span>(<span class="typed"><span class="type">implicit scala.tools.nsc.ast.parser.Parsers.UnitParser.i2p : (Int)scala.tools.nsc.util.Position</span><a href="Parsers.scala.html#108954">pos</a></span>, <span class="typed"><span class="type">StringBuilder</span><a href="#169892">sb</a></span>.<span class="typed"><span class="type">()String</span><a id="23723">toString</a></span>())
        } <span class="keyword">else</span> <span class="typed"><span class="type">StringBuilder</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span> <span class="typed"><span class="type">(Char)Boolean</span><a id="3018">==</a></span> <span class="typed"><span class="type">Char('\032')</span><span >SU</span></span>) {
          <span class="typed"><span class="type">Nothing</span><span class="keyword">throw</span></span> <span class="typed"><span class="type">object MarkupParsers.this.TruncatedXML</span><a href="#46847">TruncatedXML</a></span>
        } <span class="keyword">else</span> <span class="typed"><span class="type">StringBuilder</span><a href="#169892">sb</a></span>.<span class="typed"><span class="type">(Char)StringBuilder</span><a id="23697">append</a></span>(<span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span>)
        <span class="typed"><span class="type">=&gt; Char</span><a href="#142167">nextch</a></span>
      }
      <span class="typed"><span class="type">object Predef</span><a id="821">Predef</a></span>.<span class="typed"><span class="type">(String)Nothing</span><a id="6000">error</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;this cannot happen&quot;)</span><span class="string">&quot;this cannot happen&quot;</span></span>)
    }

    <span class="comment">/**
     *  @param pos ...
     *  @param ts  ...
     *  @param txt ...
     */</span>
    <span class="comment">/*[Duplicate]*/</span> <span class="keyword">def</span> <span class="typed"><span class="type">(scala.tools.nsc.util.Position,scala.collection.mutable.Buffer[MarkupParsers.this.global.Tree],String)Unit</span><a id="142184">appendText</a></span>(<span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a id="169921">pos</a></span>: <span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a href="../../util/Position.scala.html#8480">Position</a></span>, <span class="typed"><span class="type">scala.collection.mutable.Buffer[MarkupParsers.this.global.Tree]</span><a id="169922">ts</a></span>: mutable.<span class="typed"><span class="type">scala.collection.mutable.Buffer[MarkupParsers.this.global.Tree]</span><a id="19961">Buffer</a></span>[Tree],
                                   <span class="typed"><span class="type">String</span><a id="169923">txt</a></span>: <span class="typed"><span class="type">String</span><a id="1861">String</a></span>) {
      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">=&gt; Boolean</span><a href="#142156">preserveWS</a></span>) {
        <span class="keyword">for</span> (<span class="typed"><span class="type">((scala.xml.Text) =&gt; Unit)Unit</span><span id="21792"><a id="169937">t</a></span></span> &lt;- <span class="typed"><span class="type">object scala.xml.TextBuffer</span><a id="39529">TextBuffer</a></span>.<span class="typed"><span class="type">(String)scala.xml.TextBuffer</span><a id="169925">fromString</a></span>(<span class="typed"><span class="type">String</span><a href="#169923">txt</a></span>).<span class="typed"><span class="type">=&gt; Seq[scala.xml.Text]</span><a id="169935">toText</a></span>) {
          <span class="typed"><span class="type">scala.collection.mutable.Buffer[MarkupParsers.this.global.Tree]</span><a href="#169922">ts</a></span>.<span class="typed"><span class="type">(MarkupParsers.this.global.Tree*)Unit</span><a id="31632">append</a></span>(<span class="typed"><span class="type">object MarkupParser.this.parser.symbXMLBuilder</span><a href="Parsers.scala.html#108960">handle</a></span>.<span class="typed"><span class="type">(scala.tools.nsc.util.Position,String)MarkupParser.this.parser.symbXMLBuilder.global.Tree</span><a href="SymbolicXMLBuilder.scala.html#64846">text</a></span>(<span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a href="#169921">pos</a></span>, <span class="typed"><span class="type">scala.xml.Text</span><a href="#169937">t</a></span>.<span class="typed"><span class="type">=&gt; String</span><a id="65667">text</a></span>))
        }
      }
      <span class="keyword">else</span>
        <span class="typed"><span class="type">scala.collection.mutable.Buffer[MarkupParsers.this.global.Tree]</span><a href="#169922">ts</a></span>.<span class="typed"><span class="type">(MarkupParsers.this.global.Tree*)Unit</span><a id="31632">append</a></span>( <span class="typed"><span class="type">object MarkupParser.this.parser.symbXMLBuilder</span><a href="Parsers.scala.html#108960">handle</a></span>.<span class="typed"><span class="type">(scala.tools.nsc.util.Position,String)MarkupParser.this.parser.symbXMLBuilder.global.Tree</span><a href="SymbolicXMLBuilder.scala.html#64846">text</a></span>(<span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a href="#169921">pos</a></span>, <span class="typed"><span class="type">String</span><a href="#169923">txt</a></span>))
    }

    <span class="comment">/** adds entity/character to to ts as side-effect 
     *  @precond ch == '&amp;amp;'
     */</span>
    <span class="keyword">def</span> <span class="typed"><span class="type">(scala.collection.mutable.ArrayBuffer[MarkupParsers.this.global.Tree])Unit</span><a id="142185">content_AMP</a></span>(<span class="typed"><span class="type">scala.collection.mutable.ArrayBuffer[MarkupParsers.this.global.Tree]</span><a id="169938">ts</a></span>: mutable.<span class="typed"><span class="type">scala.collection.mutable.ArrayBuffer[MarkupParsers.this.global.Tree]</span><a id="20132">ArrayBuffer</a></span>[Tree]) {
      <span class="typed"><span class="type">=&gt; Char</span><a href="#142167">nextch</a></span>
      <span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span> <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
        <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Char('#')</span><span class="char">'#'</span></span> =&gt; <span class="comment">// CharacterRef</span>
          <span class="typed"><span class="type">=&gt; Char</span><a href="#142167">nextch</a></span>
          <span class="keyword">val</span> <span class="typed"><span class="type">MarkupParser.this.parser.symbXMLBuilder.global.Tree</span><a id="169939">theChar</a></span> = <span class="typed"><span class="type">object MarkupParser.this.parser.symbXMLBuilder</span><a href="Parsers.scala.html#108960">handle</a></span>.<span class="typed"><span class="type">(scala.tools.nsc.util.Position,String)MarkupParser.this.parser.symbXMLBuilder.global.Tree</span><a href="SymbolicXMLBuilder.scala.html#64846">text</a></span>(<span class="typed"><span class="type">=&gt; scala.tools.nsc.util.Position</span><a href="#142163">tmppos</a></span>, <span class="typed"><span class="type">=&gt; String</span><a href="#142182">xCharRef</a></span>)
          <span class="typed"><span class="type">(Char)Unit</span><a href="#142171">xToken</a></span>(<span class="typed"><span class="type">Char(';')</span><span class="char">';'</span></span>)
          <span class="typed"><span class="type">scala.collection.mutable.ArrayBuffer[MarkupParsers.this.global.Tree]</span><a href="#169938">ts</a></span>.<span class="typed"><span class="type">(MarkupParsers.this.global.Tree*)Unit</span><a id="31632">append</a></span>(<span class="typed"><span class="type">MarkupParser.this.parser.symbXMLBuilder.global.Tree</span><a href="#169939">theChar</a></span>)
        <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> _ =&gt; <span class="comment">// EntityRef</span>
          <span class="keyword">val</span> <span class="typed"><span class="type">String</span><a id="169940">n</a></span> = <span class="typed"><span class="type">=&gt; String</span><a href="#142190">xName</a></span>
          <span class="typed"><span class="type">(Char)Unit</span><a href="#142171">xToken</a></span>(<span class="typed"><span class="type">Char(';')</span><span class="char">';'</span></span>)
          <span class="typed"><span class="type">scala.collection.mutable.ArrayBuffer[MarkupParsers.this.global.Tree]</span><a href="#169938">ts</a></span>.<span class="typed"><span class="type">(MarkupParsers.this.global.Tree*)Unit</span><a id="31632">append</a></span>(<span class="typed"><span class="type">object MarkupParser.this.parser.symbXMLBuilder</span><a href="Parsers.scala.html#108960">handle</a></span>.<span class="typed"><span class="type">(scala.tools.nsc.util.Position,String)MarkupParser.this.parser.symbXMLBuilder.global.Tree</span><a href="SymbolicXMLBuilder.scala.html#64845">entityRef</a></span>(<span class="typed"><span class="type">=&gt; scala.tools.nsc.util.Position</span><a href="#142163">tmppos</a></span>, <span class="typed"><span class="type">String</span><a href="#169940">n</a></span>))
      }
    }

    <span class="comment">/**
     *  @precond ch == '{'
     *  @postcond: xEmbeddedBlock == false!
     */</span>
    <span class="keyword">def</span> <span class="typed"><span class="type">(scala.tools.nsc.util.Position,scala.collection.mutable.ArrayBuffer[MarkupParsers.this.global.Tree])Unit</span><a id="142186">content_BRACE</a></span>(<span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a id="169941">p</a></span>: <span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a href="../../util/Position.scala.html#8480">Position</a></span>, <span class="typed"><span class="type">scala.collection.mutable.ArrayBuffer[MarkupParsers.this.global.Tree]</span><a id="169942">ts</a></span>:mutable.<span class="typed"><span class="type">scala.collection.mutable.ArrayBuffer[MarkupParsers.this.global.Tree]</span><a id="20132">ArrayBuffer</a></span>[Tree]) {
      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a href="#142175">xCheckEmbeddedBlock</a></span>)
        <span class="typed"><span class="type">scala.collection.mutable.ArrayBuffer[MarkupParsers.this.global.Tree]</span><a href="#169942">ts</a></span>.<span class="typed"><span class="type">(MarkupParsers.this.global.Tree*)Unit</span><a id="31632">append</a></span>(<span class="typed"><span class="type">=&gt; MarkupParsers.this.global.Tree</span><a href="#142198">xEmbeddedExpr</a></span>)
      <span class="keyword">else</span> {
        <span class="typed"><span class="type">(scala.tools.nsc.util.Position,scala.collection.mutable.Buffer[MarkupParsers.this.global.Tree],String)Unit</span><a href="#142184">appendText</a></span>(<span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a href="#169941">p</a></span>, <span class="typed"><span class="type">scala.collection.mutable.ArrayBuffer[MarkupParsers.this.global.Tree]</span><a href="#169942">ts</a></span>, <span class="typed"><span class="type">=&gt; String</span><a href="#142195">xText</a></span>)<span class="comment">/*
        val str = new StringBuilder(&quot;{&quot;)
        str.append(xText)
        nextch
        appendText(p, ts, str.toString())*/</span>
      }
    }

    <span class="comment">/** Returns true if it encounters an end tag (without consuming it),
     *  appends trees to ts as side-effect.
     *
     *  @param ts ...
     *  @return   ...
     */</span>
    <span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(scala.collection.mutable.ArrayBuffer[MarkupParsers.this.global.Tree])Boolean</span><a id="142187">content_LT</a></span>(<span class="typed"><span class="type">scala.collection.mutable.ArrayBuffer[MarkupParsers.this.global.Tree]</span><a id="169944">ts</a></span>: mutable.<span class="typed"><span class="type">scala.collection.mutable.ArrayBuffer[MarkupParsers.this.global.Tree]</span><a id="20132">ArrayBuffer</a></span>[Tree]): <span class="typed"><span class="type">Boolean</span><a id="2170">Boolean</a></span> = {
      <span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span> <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
        <span class="typed"><span class="type">Nothing</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Char('/')</span><span class="char">'/'</span></span> =&gt;
          <span class="typed"><span class="type">Nothing</span><span class="keyword">return</span></span> <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>               <span class="comment">// end tag</span>
        <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Char('!')</span><span class="char">'!'</span></span> =&gt;
          <span class="typed"><span class="type">=&gt; Char</span><a href="#142167">nextch</a></span>                    <span class="comment">// CDATA or Comment</span>
          <span class="typed"><span class="type">scala.collection.mutable.ArrayBuffer[MarkupParsers.this.global.Tree]</span><a href="#169944">ts</a></span>.<span class="typed"><span class="type">(MarkupParsers.this.global.Tree*)Unit</span><a id="31632">append</a></span>(<span class="typed"><span class="type">MarkupParsers.this.global.Tree</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Char('[')</span><span class="char">'['</span></span> <span class="typed"><span class="type">(Char)Boolean</span><a id="3018">==</a></span> <span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span>) <span class="typed"><span class="type">=&gt; MarkupParsers.this.global.Tree</span><a href="#142180">xCharData</a></span> <span class="keyword">else</span> <span class="typed"><span class="type">=&gt; MarkupParsers.this.global.Tree</span><a href="#142183">xComment</a></span>)
        <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Char('?')</span><span class="char">'?'</span></span> =&gt;                 <span class="comment">// PI</span>
          <span class="typed"><span class="type">=&gt; Char</span><a href="#142167">nextch</a></span>
          <span class="typed"><span class="type">scala.collection.mutable.ArrayBuffer[MarkupParsers.this.global.Tree]</span><a href="#169944">ts</a></span>.<span class="typed"><span class="type">(MarkupParsers.this.global.Tree*)Unit</span><a id="31632">append</a></span>(<span class="typed"><span class="type">=&gt; MarkupParsers.this.global.Tree</span><a href="#142194">xProcInstr</a></span>)
        <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> _   =&gt;
          <span class="typed"><span class="type">scala.collection.mutable.ArrayBuffer[MarkupParsers.this.global.Tree]</span><a href="#169944">ts</a></span>.<span class="typed"><span class="type">(MarkupParsers.this.global.Tree*)Unit</span><a id="31632">append</a></span>(<span class="typed"><span class="type">=&gt; MarkupParsers.this.global.Tree</span><a href="#142189">element</a></span>)        <span class="comment">// child node</span>
      }
      <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>
    }

    <span class="comment">/*[Duplicate]*/</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; scala.collection.mutable.Buffer[MarkupParsers.this.global.Tree]</span><a id="142188">content</a></span>: mutable.<span class="typed"><span class="type">scala.collection.mutable.Buffer[MarkupParsers.this.global.Tree]</span><a id="19961">Buffer</a></span>[Tree] = {
      <span class="keyword">var</span> <span class="typed"><span class="type">scala.collection.mutable.ArrayBuffer[MarkupParsers.this.global.Tree]</span><a id="169950">ts</a></span> = <span class="typed"><span class="type">scala.collection.mutable.ArrayBuffer[MarkupParsers.this.global.Tree]</span><span class="keyword">new</span></span> mutable.<span class="typed"><span class="type">scala.collection.mutable.ArrayBuffer[MarkupParsers.this.global.Tree]</span><a id="20132">ArrayBuffer</a></span>[Tree]
      <span class="keyword">var</span> <span class="typed"><span class="type">Boolean</span><a id="169951">exit</a></span> = <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>
      <span class="typed"><span class="type">Unit</span><a href="#169952" class="keyword">while</a></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">Boolean</span><a href="#169951">exit</a></span>) {
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a href="#142168">xEmbeddedBlock</a></span>)
          <span class="typed"><span class="type">scala.collection.mutable.ArrayBuffer[MarkupParsers.this.global.Tree]</span><a href="#169950">ts</a></span>.<span class="typed"><span class="type">(MarkupParsers.this.global.Tree*)Unit</span><a id="31632">append</a></span>(<span class="typed"><span class="type">=&gt; MarkupParsers.this.global.Tree</span><a href="#142198">xEmbeddedExpr</a></span>)
        <span class="keyword">else</span> {
          <span class="typed"><span class="type">(scala.tools.nsc.util.Position)Unit</span><a href="#142164">tmppos</a></span> = <span class="typed"><span class="type">implicit scala.tools.nsc.ast.parser.Parsers.UnitParser.i2p : (Int)scala.tools.nsc.util.Position</span><a href="Parsers.scala.html#108954">pos</a></span>
          <span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span> <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
            <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Char('&lt;')</span><span class="char">'&lt;'</span></span> =&gt; <span class="comment">// end tag, cdata, comment, pi or child node</span>
              <span class="typed"><span class="type">=&gt; Char</span><a href="#142167">nextch</a></span>
              <span class="typed"><span class="type">Boolean</span><a href="#169951">exit</a></span> = <span class="typed"><span class="type">(scala.collection.mutable.ArrayBuffer[MarkupParsers.this.global.Tree])Boolean</span><a href="#142187">content_LT</a></span>(<span class="typed"><span class="type">scala.collection.mutable.ArrayBuffer[MarkupParsers.this.global.Tree]</span><a href="#169950">ts</a></span>)
            <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Char('{')</span><span class="char">'{'</span></span> =&gt; <span class="comment">// either the character '{' or an embedded scala block</span>
              <span class="typed"><span class="type">(scala.tools.nsc.util.Position,scala.collection.mutable.ArrayBuffer[MarkupParsers.this.global.Tree])Unit</span><a href="#142186">content_BRACE</a></span>(<span class="typed"><span class="type">=&gt; scala.tools.nsc.util.Position</span><a href="#142163">tmppos</a></span>, <span class="typed"><span class="type">scala.collection.mutable.ArrayBuffer[MarkupParsers.this.global.Tree]</span><a href="#169950">ts</a></span>)
            <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Char('&amp;')</span><span class="char">'&amp;'</span></span> =&gt; <span class="comment">// EntityRef or CharRef </span>
              <span class="typed"><span class="type">(scala.collection.mutable.ArrayBuffer[MarkupParsers.this.global.Tree])Unit</span><a href="#142185">content_AMP</a></span>(<span class="typed"><span class="type">scala.collection.mutable.ArrayBuffer[MarkupParsers.this.global.Tree]</span><a href="#169950">ts</a></span>)
            <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Char('\032')</span><span >SU</span></span> =&gt;
              <span class="typed"><span class="type">Boolean</span><a href="#169951">exit</a></span> = <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>
            <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> _ =&gt;  <span class="comment">// text content</span>
              <span class="typed"><span class="type">(scala.tools.nsc.util.Position,scala.collection.mutable.Buffer[MarkupParsers.this.global.Tree],String)Unit</span><a href="#142184">appendText</a></span>(<span class="typed"><span class="type">=&gt; scala.tools.nsc.util.Position</span><a href="#142163">tmppos</a></span>, <span class="typed"><span class="type">scala.collection.mutable.ArrayBuffer[MarkupParsers.this.global.Tree]</span><a href="#169950">ts</a></span>, <span class="typed"><span class="type">=&gt; String</span><a href="#142195">xText</a></span>)
              <span class="comment">// here xEmbeddedBlock might be true</span>
          }
        }
      }
      <span class="typed"><span class="type">scala.collection.mutable.ArrayBuffer[MarkupParsers.this.global.Tree]</span><a href="#169950">ts</a></span>
    }

    <span class="comment">/** '&lt;' element ::= xmlTag1 '&gt;'  { xmlExpr | '{' simpleExpr '}' } ETag
     *                | xmlTag1 '/' '&gt;'
     */</span>
    <span class="comment">/*[Duplicate]*/</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; MarkupParsers.this.global.Tree</span><a id="142189">element</a></span>: <span class="typed"><span class="type">MarkupParsers.this.global.Tree</span><a href="../Trees.scala.html#22371">Tree</a></span> = {
      <span class="keyword">val</span> <span class="typed"><span class="type">Int</span><a id="169953">pos1</a></span> = <span class="typed"><span class="type">=&gt; Int</span><a href="#142162">pos</a></span>
      <span class="keyword">val</span> <span class="typed"><span class="type">(String, scala.collection.mutable.Map[String,MarkupParsers.this.global.Tree])</span><span id="23625"><a href="#169957" id="1379">(</a></span></span><span class="typed"><span class="type">String</span><span id="169957"><span id="169955"><a href="#169954" id="23614">qname</a></span></span></span>, <span class="typed"><span class="type">scala.collection.mutable.Map[String,MarkupParsers.this.global.Tree]</span><span id="169958"><span id="169956"><a href="#169954" id="23616">attrMap</a></span></span></span>) = <span class="typed"><span class="type">=&gt; (String, scala.collection.mutable.Map[String,MarkupParsers.this.global.Tree])</span><a href="#142178">xTag</a></span>
      <span class="typed"><span class="type">MarkupParsers.this.global.Tree</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span> <span class="typed"><span class="type">(Char)Boolean</span><a id="3018">==</a></span> <span class="typed"><span class="type">Char('/')</span><span class="char">'/'</span></span>) { <span class="comment">// empty element</span>
        <span class="typed"><span class="type">(Char)Unit</span><a href="#142171">xToken</a></span>(<span class="typed"><span class="type">Char('/')</span><span class="char">'/'</span></span>)
        <span class="typed"><span class="type">(Char)Unit</span><a href="#142171">xToken</a></span>(<span class="typed"><span class="type">Char('&gt;')</span><span class="char">'&gt;'</span></span>)
        <span class="typed"><span class="type">object MarkupParser.this.parser.symbXMLBuilder</span><a href="Parsers.scala.html#108960">handle</a></span>.<span class="typed"><span class="type">(scala.tools.nsc.util.Position,String,scala.collection.mutable.Map[String,MarkupParser.this.parser.symbXMLBuilder.global.Tree],scala.collection.mutable.Buffer[MarkupParser.this.parser.symbXMLBuilder.global.Tree])MarkupParser.this.parser.symbXMLBuilder.global.Tree</span><a href="SymbolicXMLBuilder.scala.html#64864">element</a></span>(<span class="typed"><span class="type">implicit scala.tools.nsc.ast.parser.Parsers.UnitParser.i2p : (Int)scala.tools.nsc.util.Position</span><a href="Parsers.scala.html#108954">pos1</a></span>, <span class="typed"><span class="type">String</span><a href="#169955">qname</a></span>, <span class="typed"><span class="type">scala.collection.mutable.Map[String,MarkupParsers.this.global.Tree]</span><a href="#169956">attrMap</a></span>, <span class="typed"><span class="type">scala.collection.mutable.ListBuffer[MarkupParsers.this.global.Tree]</span><span class="keyword">new</span></span> mutable.<span class="typed"><span class="type">scala.collection.mutable.ListBuffer[MarkupParsers.this.global.Tree]</span><a id="19925">ListBuffer</a></span>[Tree])
      }
      <span class="keyword">else</span> { <span class="comment">// handle content</span>
        <span class="typed"><span class="type">(Char)Unit</span><a href="#142171">xToken</a></span>(<span class="typed"><span class="type">Char('&gt;')</span><span class="char">'&gt;'</span></span>)
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">String</span><a href="#169955">qname</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">java.lang.String(&quot;xml:unparsed&quot;)</span><span class="string">&quot;xml:unparsed&quot;</span></span>)
          <span class="typed"><span class="type">Nothing</span><span class="keyword">return</span></span> <span class="typed"><span class="type">=&gt; MarkupParsers.this.global.Tree</span><a href="#142181">xUnparsed</a></span>

        <span class="typed"><span class="type">=&gt; scala.collection.mutable.Stack[(Int, String)]</span><a href="#142172">debugLastStartElement</a></span>.<span class="typed"><span class="type">((Int, String)*)Unit</span><a id="108638">push</a></span>(<span class="typed"><span class="type">(Int,String)(Int, String)</span><span id="23625"><a id="1379">(</a></span></span><span class="typed"><span class="type">Int</span><a href="#169953">pos1</a></span>, <span class="typed"><span class="type">String</span><a href="#169955">qname</a></span>))
        <span class="keyword">val</span> <span class="typed"><span class="type">scala.collection.mutable.Buffer[MarkupParsers.this.global.Tree]</span><a id="169963">ts</a></span> = <span class="typed"><span class="type">=&gt; scala.collection.mutable.Buffer[MarkupParsers.this.global.Tree]</span><a href="#142188">content</a></span>
        <span class="typed"><span class="type">(String)Unit</span><a href="#142179">xEndTag</a></span>(<span class="typed"><span class="type">String</span><a href="#169955">qname</a></span>)
        <span class="typed"><span class="type">=&gt; scala.collection.mutable.Stack[(Int, String)]</span><a href="#142172">debugLastStartElement</a></span>.<span class="typed"><span class="type">()(Int, String)</span><a id="108640">pop</a></span>
        <span class="typed"><span class="type">String</span><a href="#169955">qname</a></span> <span class="typed"><span class="type">MarkupParsers.this.global.Tree</span><span class="keyword">match</span></span> {
          <span class="typed"><span class="type">MarkupParser.this.parser.symbXMLBuilder.global.Tree</span><span class="keyword">case</span></span> <span class="typed"><span class="type">java.lang.String(&quot;xml:group&quot;)</span><span class="string">&quot;xml:group&quot;</span></span> =&gt; <span class="typed"><span class="type">object MarkupParser.this.parser.symbXMLBuilder</span><a href="Parsers.scala.html#108960">handle</a></span>.<span class="typed"><span class="type">(scala.tools.nsc.util.Position,scala.collection.mutable.Buffer[MarkupParser.this.parser.symbXMLBuilder.global.Tree])MarkupParser.this.parser.symbXMLBuilder.global.Tree</span><a href="SymbolicXMLBuilder.scala.html#64862">group</a></span>(<span class="typed"><span class="type">implicit scala.tools.nsc.ast.parser.Parsers.UnitParser.i2p : (Int)scala.tools.nsc.util.Position</span><a href="Parsers.scala.html#108954">pos1</a></span>, <span class="typed"><span class="type">scala.collection.mutable.Buffer[MarkupParsers.this.global.Tree]</span><a href="#169963">ts</a></span>)
          <span class="typed"><span class="type">MarkupParser.this.parser.symbXMLBuilder.global.Tree</span><span class="keyword">case</span></span> _ =&gt; <span class="typed"><span class="type">object MarkupParser.this.parser.symbXMLBuilder</span><a href="Parsers.scala.html#108960">handle</a></span>.<span class="typed"><span class="type">(scala.tools.nsc.util.Position,String,scala.collection.mutable.Map[String,MarkupParser.this.parser.symbXMLBuilder.global.Tree],scala.collection.mutable.Buffer[MarkupParser.this.parser.symbXMLBuilder.global.Tree])MarkupParser.this.parser.symbXMLBuilder.global.Tree</span><a href="SymbolicXMLBuilder.scala.html#64864">element</a></span>(<span class="typed"><span class="type">implicit scala.tools.nsc.ast.parser.Parsers.UnitParser.i2p : (Int)scala.tools.nsc.util.Position</span><a href="Parsers.scala.html#108954">pos1</a></span>, <span class="typed"><span class="type">String</span><a href="#169955">qname</a></span>, <span class="typed"><span class="type">scala.collection.mutable.Map[String,MarkupParsers.this.global.Tree]</span><a href="#169956">attrMap</a></span>, <span class="typed"><span class="type">scala.collection.mutable.Buffer[MarkupParsers.this.global.Tree]</span><a href="#169963">ts</a></span>)
        }
      }
    }

    <span class="comment">/** actually, Name ::= (Letter | '_' | ':') (NameChar)*  but starting with ':' cannot happen
     *  Name ::= (Letter | '_') (NameChar)*
     *
     *  see  [5] of XML 1.0 specification
     *
     *  pre-condition:  ch != ':' // assured by definition of XMLSTART token
     *  post-condition: name does neither start, nor end in ':'
     */</span>
    <span class="comment">/*[Duplicate]*/</span>   <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; String</span><a id="142190">xName</a></span>: <span class="typed"><span class="type">String</span><a id="1861">String</a></span> = {
      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span> <span class="typed"><span class="type">(Char)Boolean</span><a id="3018">==</a></span> <span class="typed"><span class="type">Char('\032')</span><span >SU</span></span>) {
        <span class="typed"><span class="type">Nothing</span><span class="keyword">throw</span></span> <span class="typed"><span class="type">object MarkupParsers.this.TruncatedXML</span><a href="#46847">TruncatedXML</a></span>
        <span class="typed"><span class="type">(String)Char</span><a href="#142203">reportSyntaxError</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;name expected, but char '&quot;)</span><span class="string">&quot;name expected, but char '&quot;</span></span><span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span><span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span><span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span><span class="typed"><span class="type">java.lang.String(&quot;' cannot start a name&quot;)</span><span class="string">&quot;' cannot start a name&quot;</span></span>)
        <span class="typed"><span class="type">Nothing</span><span class="keyword">return</span></span> <span class="typed"><span class="type">java.lang.String(&quot;&quot;)</span><span class="string">&quot;&quot;</span></span>
      }
      <span class="keyword">val</span> <span class="typed"><span class="type">StringBuilder</span><a id="169967">buf</a></span> = <span class="typed"><span class="type">()StringBuilder</span><a id="23671" class="keyword">new</a></span> <span class="typed"><span class="type">StringBuilder</span><a id="1435">StringBuilder</a></span>
      <span class="typed"><span class="type">Unit</span><a href="#169969" class="keyword">do</a></span> {
        <span class="typed"><span class="type">StringBuilder</span><a href="#169967">buf</a></span> <span class="typed"><span class="type">(Char)StringBuilder</span><a id="23697">append</a></span> <span class="typed"><span class="type">=&gt; Char</span><a href="#142167">nextch</a></span>        
      } <span class="keyword">while</span> (xml.<span class="typed"><span class="type">object scala.xml.Parsing</span><a id="39718">Parsing</a></span>.<span class="typed"><span class="type">(Char)Boolean</span><a id="39748">isNameChar</a></span>(<span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span>))
      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Char(':')</span><span class="char">':'</span></span> <span class="typed"><span class="type">(Char)Boolean</span><a id="3018">==</a></span> <span class="typed"><span class="type">implicit scala.Predef.stringBuilderWrapper : (StringBuilder)scala.runtime.RichStringBuilder</span><span id="6141"><a href="#169967" id="821">buf</a></span></span>.<span class="typed"><span class="type">=&gt; Char</span><a id="21648">last</a></span>) {
        <span class="typed"><span class="type">(String)Char</span><a href="#142203">reportSyntaxError</a></span>( <span class="typed"><span class="type">java.lang.String(&quot;name cannot end in ':'&quot;)</span><span class="string">&quot;name cannot end in ':'&quot;</span></span> )
        <span class="typed"><span class="type">StringBuilder</span><a href="#169967">buf</a></span>.<span class="typed"><span class="type">(Int)Unit</span><a id="23677">setLength</a></span>(<span class="typed"><span class="type">StringBuilder</span><a href="#169967">buf</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="23675">length</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3148">-</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>)
      }
      <span class="keyword">val</span> <span class="typed"><span class="type">java.lang.String</span><a id="169968">n</a></span> = <span class="typed"><span class="type">StringBuilder</span><a href="#169967">buf</a></span>.<span class="typed"><span class="type">()String</span><a id="23723">toString</a></span>().<span class="typed"><span class="type">()java.lang.String</span><a id="5886">intern</a></span>()
      <span class="comment">//cbuf.length = 0</span>
      <span class="typed"><span class="type">java.lang.String</span><a href="#169968">n</a></span>
    }

    <span class="comment">/** scan [S] '=' [S]*/</span>
    <span class="comment">/*[Duplicate]*/</span>   <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Unit</span><a id="142191">xEQ</a></span> = { <span class="typed"><span class="type">=&gt; Unit</span><a href="#142192">xSpaceOpt</a></span>; <span class="typed"><span class="type">(Char)Unit</span><a href="#142171">xToken</a></span>(<span class="typed"><span class="type">Char('=')</span><span class="char">'='</span></span>); <span class="typed"><span class="type">=&gt; Unit</span><a href="#142192">xSpaceOpt</a></span> }

    <span class="comment">/** skip optional space S? */</span>
    <span class="comment">/*[Duplicate]*/</span>   <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Unit</span><a id="142192">xSpaceOpt</a></span> = { <span class="typed"><span class="type">Unit</span><a href="#169646" class="keyword">while</a></span> (xml.<span class="typed"><span class="type">object scala.xml.Parsing</span><a id="39718">Parsing</a></span>.<span class="typed"><span class="type">(Char)Boolean</span><a id="39746">isSpace</a></span>(<span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span>)) { <span class="typed"><span class="type">=&gt; Char</span><a href="#142167">nextch</a></span> }}

    <span class="comment">/** scan [3] S ::= (#x20 | #x9 | #xD | #xA)+ */</span>
    <span class="comment">/*[Duplicate]*/</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; AnyVal</span><a id="142193">xSpace</a></span> =
      <span class="typed"><span class="type">AnyVal with NotNull</span><span class="keyword">if</span></span> (xml.<span class="typed"><span class="type">object scala.xml.Parsing</span><a id="39718">Parsing</a></span>.<span class="typed"><span class="type">(Char)Boolean</span><a id="39746">isSpace</a></span>(<span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span>)) { <span class="typed"><span class="type">=&gt; Char</span><a href="#142167">nextch</a></span>; <span class="typed"><span class="type">=&gt; Unit</span><a href="#142192">xSpaceOpt</a></span> }
      <span class="keyword">else</span> <span class="typed"><span class="type">Char</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span> <span class="typed"><span class="type">(Char)Boolean</span><a id="3018">==</a></span> <span class="typed"><span class="type">Char('\032')</span><span >SU</span></span>)
        <span class="typed"><span class="type">Nothing</span><span class="keyword">throw</span></span> <span class="typed"><span class="type">object MarkupParsers.this.TruncatedXML</span><a href="#46847">TruncatedXML</a></span>
      <span class="keyword">else</span> <span class="typed"><span class="type">(String)Char</span><a href="#142203">reportSyntaxError</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;whitespace expected&quot;)</span><span class="string">&quot;whitespace expected&quot;</span></span>)

    <span class="comment">/** '&lt;?' ProcInstr ::= Name [S ({Char} - ({Char}'&gt;?' {Char})]'?&gt;'
     *
     * see [15]
     */</span>
    <span class="comment">/*[Duplicate]*/</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; MarkupParsers.this.global.Tree</span><a id="142194">xProcInstr</a></span>: <span class="typed"><span class="type">MarkupParsers.this.global.Tree</span><a href="../Trees.scala.html#22371">Tree</a></span> = {
      <span class="keyword">val</span> <span class="typed"><span class="type">StringBuilder</span><a id="169997">sb</a></span>: <span class="typed"><span class="type">StringBuilder</span><a id="1435">StringBuilder</a></span> = <span class="typed"><span class="type">()StringBuilder</span><a id="23671" class="keyword">new</a></span> <span class="typed"><span class="type">StringBuilder</span><a id="1435">StringBuilder</a></span>()
      <span class="keyword">val</span> <span class="typed"><span class="type">String</span><a id="169998">n</a></span> = <span class="typed"><span class="type">=&gt; String</span><a href="#142190">xName</a></span>
      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (xml.<span class="typed"><span class="type">object scala.xml.Parsing</span><a id="39718">Parsing</a></span>.<span class="typed"><span class="type">(Char)Boolean</span><a id="39746">isSpace</a></span>(<span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span>)) {
        <span class="typed"><span class="type">=&gt; AnyVal</span><a href="#142193">xSpace</a></span>
        <span class="typed"><span class="type">Unit</span><a href="#170003" class="keyword">while</a></span> (<span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>) {
          <span class="typed"><span class="type">StringBuilder</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span> <span class="typed"><span class="type">(Char)Boolean</span><a id="3018">==</a></span> <span class="typed"><span class="type">Char('?')</span><span class="char">'?'</span></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> { <span class="typed"><span class="type">StringBuilder</span><a href="#169997">sb</a></span>.<span class="typed"><span class="type">(Char)StringBuilder</span><a id="23697">append</a></span>(<span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span>); <span class="typed"><span class="type">=&gt; Char</span><a href="#142167">nextch</a></span>; <span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span> <span class="typed"><span class="type">(Char)Boolean</span><a id="3018">==</a></span> <span class="typed"><span class="type">Char('&gt;')</span><span class="char">'&gt;'</span></span> }) {
            <span class="typed"><span class="type">StringBuilder</span><a href="#169997">sb</a></span>.<span class="typed"><span class="type">(Int)Unit</span><a id="23676">length</a></span> = <span class="typed"><span class="type">StringBuilder</span><a href="#169997">sb</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="23675">length</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3148">-</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
            <span class="typed"><span class="type">=&gt; Char</span><a href="#142167">nextch</a></span>
            <span class="typed"><span class="type">Nothing</span><span class="keyword">return</span></span> <span class="typed"><span class="type">object MarkupParser.this.parser.symbXMLBuilder</span><a href="Parsers.scala.html#108960">handle</a></span>.<span class="typed"><span class="type">(scala.tools.nsc.util.Position,String,String)MarkupParser.this.parser.symbXMLBuilder.global.Tree</span><a href="SymbolicXMLBuilder.scala.html#64851">procInstr</a></span>(<span class="typed"><span class="type">=&gt; scala.tools.nsc.util.Position</span><a href="#142163">tmppos</a></span>, <span class="typed"><span class="type">String</span><a href="#169998">n</a></span>, <span class="typed"><span class="type">StringBuilder</span><a href="#169997">sb</a></span>.<span class="typed"><span class="type">()String</span><a id="23723">toString</a></span>)
          } <span class="keyword">else</span> 
            <span class="typed"><span class="type">StringBuilder</span><a href="#169997">sb</a></span>.<span class="typed"><span class="type">(Char)StringBuilder</span><a id="23697">append</a></span>(<span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span>);
          <span class="typed"><span class="type">=&gt; Char</span><a href="#142167">nextch</a></span>
        }
      }
      <span class="typed"><span class="type">(Char)Unit</span><a href="#142171">xToken</a></span>(<span class="typed"><span class="type">Char('?')</span><span class="char">'?'</span></span>)
      <span class="typed"><span class="type">(Char)Unit</span><a href="#142171">xToken</a></span>(<span class="typed"><span class="type">Char('&gt;')</span><span class="char">'&gt;'</span></span>) 
      <span class="typed"><span class="type">object MarkupParser.this.parser.symbXMLBuilder</span><a href="Parsers.scala.html#108960">handle</a></span>.<span class="typed"><span class="type">(scala.tools.nsc.util.Position,String,String)MarkupParser.this.parser.symbXMLBuilder.global.Tree</span><a href="SymbolicXMLBuilder.scala.html#64851">procInstr</a></span>(<span class="typed"><span class="type">=&gt; scala.tools.nsc.util.Position</span><a href="#142163">tmppos</a></span>, <span class="typed"><span class="type">String</span><a href="#169998">n</a></span>, <span class="typed"><span class="type">StringBuilder</span><a href="#169997">sb</a></span>.<span class="typed"><span class="type">()String</span><a id="23723">toString</a></span>)
    }

    <span class="comment">/** parse character data.
     *  precondition: xEmbeddedBlock == false (we are not in a scala block)
     */</span>
    <span class="comment">/*[Duplicate]*/</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; String</span><a id="142195">xText</a></span>: <span class="typed"><span class="type">String</span><a id="1861">String</a></span> = {
      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a href="#142168">xEmbeddedBlock</a></span>) <span class="typed"><span class="type">object Predef</span><a id="821">Predef</a></span>.<span class="typed"><span class="type">(String)Nothing</span><a id="6000">error</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;internal error: encountered embedded block&quot;)</span><span class="string">&quot;internal error: encountered embedded block&quot;</span></span>); <span class="comment">// assert</span>
      <span class="comment">//Console.println(&quot;xText ch now &quot;+ch)</span>
      <span class="comment">//if( xCheckEmbeddedBlock ) {</span>
      <span class="comment">//  return &quot;&quot;</span>
      <span class="comment">//} else {</span>
        <span class="keyword">var</span> <span class="typed"><span class="type">Boolean</span><a id="170026">exit</a></span> = <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>
        <span class="keyword">val</span> <span class="typed"><span class="type">StringBuilder</span><a id="170027">buf</a></span> = <span class="typed"><span class="type">()StringBuilder</span><a id="23671" class="keyword">new</a></span> <span class="typed"><span class="type">StringBuilder</span><a id="1435">StringBuilder</a></span>
        <span class="typed"><span class="type">Unit</span><a href="#170029" class="keyword">while</a></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">Boolean</span><a href="#170026">exit</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> (<span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span><span class="typed"><span class="type">(Char)Boolean</span><a id="3019">!=</a></span><span class="typed"><span class="type">Char('\032')</span><span >SU</span></span>)) {
          <span class="typed"><span class="type">StringBuilder</span><a href="#170027">buf</a></span> <span class="typed"><span class="type">(Char)StringBuilder</span><a id="23697">append</a></span> <span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span>
          <span class="keyword">val</span> <span class="typed"><span class="type">Boolean</span><a id="170035">expectRBRACE</a></span> = <span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span> <span class="typed"><span class="type">(Char)Boolean</span><a id="3018">==</a></span> <span class="typed"><span class="type">Char('}')</span><span class="char">'}'</span></span>
          <span class="comment">// TODO check for &quot;}}&quot;</span>
          <span class="typed"><span class="type">=&gt; Char</span><a href="#142167">nextch</a></span>
          <span class="typed"><span class="type">AnyVal with NotNull</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Boolean</span><a href="#170035">expectRBRACE</a></span>) {
            <span class="typed"><span class="type">Char</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span> <span class="typed"><span class="type">(Char)Boolean</span><a id="3018">==</a></span> <span class="typed"><span class="type">Char('}')</span><span class="char">'}'</span></span>)
              <span class="typed"><span class="type">=&gt; Char</span><a href="#142167">nextch</a></span>
            <span class="keyword">else</span> {
              <span class="typed"><span class="type">(String)Char</span><a href="#142203">reportSyntaxError</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;in XML content, please use '}}' to express '}'&quot;)</span><span class="string">&quot;in XML content, please use '}}' to express '}'&quot;</span></span>)
              <span class="typed"><span class="type">Nothing</span><span class="keyword">throw</span></span> <span class="typed"><span class="type">object MarkupParsers.this.ConfusedAboutBracesException</span><a href="#46845">ConfusedAboutBracesException</a></span>
            }
          }
          <span class="typed"><span class="type">Boolean</span><a href="#170026">exit</a></span> = <span class="typed"><span class="type">=&gt; Boolean</span><a href="#142175">xCheckEmbeddedBlock</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2750">||</a></span>(<span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span> <span class="typed"><span class="type">(Char)Boolean</span><a id="3018">==</a></span> <span class="typed"><span class="type">Char('&lt;')</span><span class="char">'&lt;'</span></span>) <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2750">||</a></span> (<span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span> <span class="typed"><span class="type">(Char)Boolean</span><a id="3018">==</a></span> <span class="typed"><span class="type">Char('&amp;')</span><span class="char">'&amp;'</span></span>)
        }
        <span class="keyword">val</span> <span class="typed"><span class="type">String</span><a id="170028">str</a></span> = <span class="typed"><span class="type">StringBuilder</span><a href="#170027">buf</a></span>.<span class="typed"><span class="type">()String</span><a id="23723">toString</a></span>()
        <span class="comment">//cbuf.length = 0</span>
        <span class="typed"><span class="type">String</span><a href="#170028">str</a></span>
      <span class="comment">//}</span>
    }

    <span class="comment">//val cbuf = new StringBuilder()</span>

    <span class="comment">/** append Unicode character to name buffer*/</span>
    <span class="comment">//private def putChar(c: char) = cbuf.append(c)</span>

    <span class="comment">/** xLiteral = element { element }
     *  @return Scala representation of this xml literal
     *  precondition: s.xStartsXML == true
     */</span>
    <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; MarkupParsers.this.global.Tree</span><a id="142196">xLiteral</a></span>: <span class="typed"><span class="type">MarkupParsers.this.global.Tree</span><a href="../Trees.scala.html#22371">Tree</a></span> = <span class="keyword">try</span> {
      <span class="typed"><span class="type">(MarkupParsers.this.ScannerInput)Unit</span><a href="#142159">input</a></span> = <span class="typed"><span class="type">MarkupParsers.this.UnitParser</span><a href="#142151">parser</a></span>.<span class="typed"><span class="type">=&gt; MarkupParsers.this.UnitScanner</span><a href="Parsers.scala.html#108951">in</a></span>.<span class="typed"><span class="type">=&gt; MarkupParsers.this.ScannerInput</span><a href="NewScanners.scala.html#39122">flush</a></span>
      <span class="typed"><span class="type">object MarkupParser.this.parser.symbXMLBuilder</span><a href="Parsers.scala.html#108960">handle</a></span>.<span class="typed"><span class="type">(Boolean)Unit</span><a href="SymbolicXMLBuilder.scala.html#64788">isPattern</a></span> = <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>
      
      <span class="comment">//val pos = s.currentPos</span>
      <span class="keyword">var</span> <span class="typed"><span class="type">MarkupParsers.this.global.Tree</span><a id="170052">tree</a></span>:<span class="typed"><span class="type">MarkupParsers.this.global.Tree</span><a href="../Trees.scala.html#22371">Tree</a></span> = <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>
      <span class="keyword">val</span> <span class="typed"><span class="type">scala.collection.mutable.ArrayBuffer[MarkupParsers.this.global.Tree]</span><a id="170053">ts</a></span> = <span class="typed"><span class="type">scala.collection.mutable.ArrayBuffer[MarkupParsers.this.global.Tree]</span><span class="keyword">new</span></span> mutable.<span class="typed"><span class="type">scala.collection.mutable.ArrayBuffer[MarkupParsers.this.global.Tree]</span><a id="20132">ArrayBuffer</a></span>[Tree]()
      <span class="typed"><span class="type">(scala.tools.nsc.util.Position)Unit</span><a href="#142164">tmppos</a></span> = (<span class="typed"><span class="type">implicit scala.tools.nsc.ast.parser.Parsers.UnitParser.i2p : (Int)scala.tools.nsc.util.Position</span><a href="Parsers.scala.html#108954">pos</a></span>)    <span class="comment">// Iuli: added this line, as it seems content_LT uses tmppos when creating trees</span>
      <span class="typed"><span class="type">(Boolean)Unit</span><span id="6003"><a id="821">assert</a></span></span>(<span class="typed"><span class="type">=&gt; Char</span><a href="#142167">nextch</a></span> <span class="typed"><span class="type">(Char)Boolean</span><a id="3018">==</a></span> <span class="typed"><span class="type">Char('&lt;')</span><span class="char">'&lt;'</span></span>)
      <span class="typed"><span class="type">(scala.collection.mutable.ArrayBuffer[MarkupParsers.this.global.Tree])Boolean</span><a href="#142187">content_LT</a></span>(<span class="typed"><span class="type">scala.collection.mutable.ArrayBuffer[MarkupParsers.this.global.Tree]</span><a href="#170053">ts</a></span>)
      <span class="comment">//Console.println(&quot;xLiteral:ts = &quot;+ts.toList)</span>
      <span class="comment">//lastend = s.in.bp</span>
      <span class="comment">//lastch  = s.in.ch</span>
      <span class="comment">//if (settings.debug.value) {</span>
      <span class="comment">//  Console.println(&quot;DEBUG 1: I am getting char '&quot;+ch+&quot;' at lastend &quot;+lastend+&quot; pos = &quot;+pos); // DEBUG </span>
      <span class="comment">//}</span>
      <span class="keyword">val</span> <span class="typed"><span class="type">Int</span><a id="170054">save</a></span> = <span class="typed"><span class="type">=&gt; MarkupParsers.this.ScannerInput</span><a href="#142158">input</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a href="NewScanners.scala.html#38952">offset</a></span>
      <span class="typed"><span class="type">=&gt; Unit</span><a href="#142192">xSpaceOpt</a></span>
      <span class="comment">// parse more XML ?</span>
      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span> <span class="typed"><span class="type">(Char)Boolean</span><a id="3018">==</a></span> <span class="typed"><span class="type">Char('&lt;')</span><span class="char">'&lt;'</span></span>) {
        <span class="typed"><span class="type">Unit</span><a href="#170060" class="keyword">while</a></span> (<span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span> <span class="typed"><span class="type">(Char)Boolean</span><a id="3018">==</a></span> <span class="typed"><span class="type">Char('&lt;')</span><span class="char">'&lt;'</span></span>) { 
          <span class="typed"><span class="type">=&gt; Char</span><a href="#142167">nextch</a></span>
          <span class="typed"><span class="type">scala.collection.mutable.ArrayBuffer[MarkupParsers.this.global.Tree]</span><a href="#170053">ts</a></span>.<span class="typed"><span class="type">(MarkupParsers.this.global.Tree*)Unit</span><a id="31632">append</a></span>(<span class="typed"><span class="type">=&gt; MarkupParsers.this.global.Tree</span><a href="#142189">element</a></span>)
          <span class="typed"><span class="type">=&gt; Unit</span><a href="#142192">xSpaceOpt</a></span>
        }
        <span class="typed"><span class="type">MarkupParsers.this.global.Tree</span><a href="#170052">tree</a></span> = <span class="typed"><span class="type">object MarkupParser.this.parser.symbXMLBuilder</span><a href="Parsers.scala.html#108960">handle</a></span>.<span class="typed"><span class="type">(scala.tools.nsc.util.Position,scala.collection.mutable.Buffer[MarkupParser.this.parser.symbXMLBuilder.global.Tree])MarkupParser.this.parser.symbXMLBuilder.global.Block</span><a href="SymbolicXMLBuilder.scala.html#64860">makeXMLseq</a></span>((<span class="typed"><span class="type">implicit scala.tools.nsc.ast.parser.Parsers.UnitParser.i2p : (Int)scala.tools.nsc.util.Position</span><a href="Parsers.scala.html#108954">pos</a></span>), <span class="typed"><span class="type">scala.collection.mutable.ArrayBuffer[MarkupParsers.this.global.Tree]</span><a href="#170053">ts</a></span>)
        <span class="typed"><span class="type">MarkupParsers.this.UnitParser</span><a href="#142151">parser</a></span>.<span class="typed"><span class="type">=&gt; MarkupParsers.this.UnitScanner</span><a href="Parsers.scala.html#108951">in</a></span>.<span class="typed"><span class="type">(Int)Unit</span><a href="NewScanners.scala.html#39124">resume</a></span>(Tokens.<span class="typed"><span class="type">Int(96)</span><span >XMLSTART</span></span>)
      } <span class="keyword">else</span> {
        <span class="typed"><span class="type">MarkupParsers.this.UnitParser</span><a href="#142151">parser</a></span>.<span class="typed"><span class="type">=&gt; MarkupParsers.this.UnitScanner</span><a href="Parsers.scala.html#108951">in</a></span>.<span class="typed"><span class="type">(Int,Int)Unit</span><a href="NewScanners.scala.html#39123">seek</a></span>(<span class="typed"><span class="type">Int</span><a href="#170054">save</a></span>, Tokens.<span class="typed"><span class="type">Int(96)</span><span >XMLSTART</span></span>)
        <span class="typed"><span class="type">(Boolean)Unit</span><span id="6003"><a id="821">assert</a></span></span>(<span class="typed"><span class="type">scala.collection.mutable.ArrayBuffer[MarkupParsers.this.global.Tree]</span><a href="#170053">ts</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="41571">length</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3141">==</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>)
        <span class="typed"><span class="type">MarkupParsers.this.global.Tree</span><a href="#170052">tree</a></span> = <span class="typed"><span class="type">(Int)MarkupParsers.this.global.Tree</span><a href="#170053" id="41551">ts</a></span>(<span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>)
      }
      <span class="typed"><span class="type">MarkupParsers.this.global.Tree</span><a href="#170052">tree</a></span>
    } <span class="keyword">catch</span> {
      <span class="typed"><span class="type">MarkupParsers.this.global.EmptyTree.type</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object MarkupParsers.this.TruncatedXML</span><a id="170069">c</a></span> @ <span class="typed"><span class="type">object MarkupParsers.this.TruncatedXML</span><a href="#46847">TruncatedXML</a></span> =&gt;
        <span class="typed"><span class="type">MarkupParsers.this.UnitParser</span><a href="#142151">parser</a></span>.<span class="typed"><span class="type">(String)Unit</span><a href="Parsers.scala.html#108956">incompleteInputError</a></span>(<span class="typed"><span class="type">object MarkupParsers.this.TruncatedXML</span><a href="#170069">c</a></span>.<span class="typed"><span class="type">()java.lang.String</span><a href="#169590">getMessage</a></span>)
        <span class="typed"><span class="type">MarkupParsers.this.UnitParser</span><a href="#142151">parser</a></span>.<span class="typed"><span class="type">=&gt; MarkupParsers.this.UnitScanner</span><a href="Parsers.scala.html#108951">in</a></span>.<span class="typed"><span class="type">(Int)Unit</span><a href="NewScanners.scala.html#39124">resume</a></span>(Tokens.<span class="typed"><span class="type">Int(96)</span><span >XMLSTART</span></span>)
        <span class="typed"><span class="type">object MarkupParsers.this.global.EmptyTree</span><a href="../Trees.scala.html#22380">EmptyTree</a></span>

      <span class="typed"><span class="type">MarkupParsers.this.global.EmptyTree.type</span><span class="keyword">case</span></span> <span class="typed"><span class="type">java.lang.Throwable</span><a id="170070">c</a></span> @ (<span class="typed"><span class="type">object MarkupParsers.this.MissingEndTagException</span><a href="#46843">MissingEndTagException</a></span> | <span class="typed"><span class="type">object MarkupParsers.this.ConfusedAboutBracesException</span><a href="#46845">ConfusedAboutBracesException</a></span>) =&gt;
        <span class="typed"><span class="type">MarkupParsers.this.UnitParser</span><a href="#142151">parser</a></span>.<span class="typed"><span class="type">(Int,String)Unit</span><a href="Parsers.scala.html#108958">syntaxError</a></span>((<span class="typed"><span class="type">=&gt; scala.collection.mutable.Stack[(Int, String)]</span><a href="#142172">debugLastStartElement</a></span>.<span class="typed"><span class="type">=&gt; (Int, String)</span><a id="108639">top</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="23614">_1</a></span>):<span class="typed"><span class="type">Int</span><a id="2394">Int</a></span>,
                           <span class="typed"><span class="type">java.lang.Throwable</span><a href="#170070">c</a></span>.<span class="typed"><span class="type">()java.lang.String</span><a id="23646">getMessage</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">=&gt; scala.collection.mutable.Stack[(Int, String)]</span><a href="#142172">debugLastStartElement</a></span>.<span class="typed"><span class="type">=&gt; (Int, String)</span><a id="108639">top</a></span>.<span class="typed"><span class="type">=&gt; String</span><a id="23616">_2</a></span><span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span><span class="typed"><span class="type">java.lang.String(&quot;&gt;&quot;)</span><span class="string">&quot;&gt;&quot;</span></span>)
        <span class="typed"><span class="type">MarkupParsers.this.UnitParser</span><a href="#142151">parser</a></span>.<span class="typed"><span class="type">=&gt; MarkupParsers.this.UnitScanner</span><a href="Parsers.scala.html#108951">in</a></span>.<span class="typed"><span class="type">(Int)Unit</span><a href="NewScanners.scala.html#39124">resume</a></span>(Tokens.<span class="typed"><span class="type">Int(96)</span><span >XMLSTART</span></span>)
        <span class="typed"><span class="type">object MarkupParsers.this.global.EmptyTree</span><a href="../Trees.scala.html#22380">EmptyTree</a></span>

      <span class="typed"><span class="type">MarkupParsers.this.global.EmptyTree.type</span><span class="keyword">case</span></span> _:<span class="typed"><span class="type">ArrayIndexOutOfBoundsException</span><a id="1699">ArrayIndexOutOfBoundsException</a></span> =&gt; 
        <span class="typed"><span class="type">MarkupParsers.this.UnitParser</span><a href="#142151">parser</a></span>.<span class="typed"><span class="type">(Int,String)Unit</span><a href="Parsers.scala.html#108958">syntaxError</a></span>((<span class="typed"><span class="type">=&gt; scala.collection.mutable.Stack[(Int, String)]</span><a href="#142172">debugLastStartElement</a></span>.<span class="typed"><span class="type">=&gt; (Int, String)</span><a id="108639">top</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="23614">_1</a></span>),
                      <span class="typed"><span class="type">java.lang.String(&quot;missing end tag in XML literal for &lt;&quot;)</span><span class="string">&quot;missing end tag in XML literal for &lt;&quot;</span></span>
                      <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span><span class="typed"><span class="type">=&gt; scala.collection.mutable.Stack[(Int, String)]</span><a href="#142172">debugLastStartElement</a></span>.<span class="typed"><span class="type">=&gt; (Int, String)</span><a id="108639">top</a></span>.<span class="typed"><span class="type">=&gt; String</span><a id="23616">_2</a></span><span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span><span class="typed"><span class="type">java.lang.String(&quot;&gt;&quot;)</span><span class="string">&quot;&gt;&quot;</span></span>);
        <span class="typed"><span class="type">MarkupParsers.this.UnitParser</span><a href="#142151">parser</a></span>.<span class="typed"><span class="type">=&gt; MarkupParsers.this.UnitScanner</span><a href="Parsers.scala.html#108951">in</a></span>.<span class="typed"><span class="type">(Int)Unit</span><a href="NewScanners.scala.html#39124">resume</a></span>(Tokens.<span class="typed"><span class="type">Int(96)</span><span >XMLSTART</span></span>)
        <span class="typed"><span class="type">object MarkupParsers.this.global.EmptyTree</span><a href="../Trees.scala.html#22380">EmptyTree</a></span>
    }

    <span class="comment">/** @see xmlPattern. resynchronizes after successful parse 
     *  @return this xml pattern
     *  precondition: s.xStartsXML == true
     */</span>
    <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; MarkupParsers.this.global.Tree</span><a id="142197">xLiteralPattern</a></span>: <span class="typed"><span class="type">MarkupParsers.this.global.Tree</span><a href="../Trees.scala.html#22371">Tree</a></span> = <span class="keyword">try</span> {
      <span class="typed"><span class="type">(MarkupParsers.this.ScannerInput)Unit</span><a href="#142159">input</a></span> = <span class="typed"><span class="type">MarkupParsers.this.UnitParser</span><a href="#142151">parser</a></span>.<span class="typed"><span class="type">=&gt; MarkupParsers.this.UnitScanner</span><a href="Parsers.scala.html#108951">in</a></span>.<span class="typed"><span class="type">=&gt; MarkupParsers.this.ScannerInput</span><a href="NewScanners.scala.html#39122">flush</a></span>
      <span class="keyword">val</span> <span class="typed"><span class="type">Boolean</span><a id="170081">oldMode</a></span> = <span class="typed"><span class="type">object MarkupParser.this.parser.symbXMLBuilder</span><a href="Parsers.scala.html#108960">handle</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="SymbolicXMLBuilder.scala.html#64787">isPattern</a></span>;
      <span class="typed"><span class="type">object MarkupParser.this.parser.symbXMLBuilder</span><a href="Parsers.scala.html#108960">handle</a></span>.<span class="typed"><span class="type">(Boolean)Unit</span><a href="SymbolicXMLBuilder.scala.html#64788">isPattern</a></span> = <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>
      <span class="typed"><span class="type">(Boolean)Unit</span><span id="6003"><a id="821">assert</a></span></span>(<span class="typed"><span class="type">=&gt; Char</span><a href="#142167">nextch</a></span> <span class="typed"><span class="type">(Char)Boolean</span><a id="3018">==</a></span> <span class="typed"><span class="type">Char('&lt;')</span><span class="char">'&lt;'</span></span>)
      <span class="keyword">var</span> <span class="typed"><span class="type">MarkupParsers.this.global.Tree</span><a id="170082">tree</a></span> = <span class="typed"><span class="type">=&gt; MarkupParsers.this.global.Tree</span><a href="#142204">xPattern</a></span>; <span class="typed"><span class="type">=&gt; Unit</span><a href="#142192">xSpaceOpt</a></span>;
      <span class="typed"><span class="type">object MarkupParser.this.parser.symbXMLBuilder</span><a href="Parsers.scala.html#108960">handle</a></span>.<span class="typed"><span class="type">(Boolean)Unit</span><a href="SymbolicXMLBuilder.scala.html#64788">isPattern</a></span> = <span class="typed"><span class="type">Boolean</span><a href="#170081">oldMode</a></span>;
      <span class="typed"><span class="type">MarkupParsers.this.UnitParser</span><a href="#142151">parser</a></span>.<span class="typed"><span class="type">=&gt; MarkupParsers.this.UnitScanner</span><a href="Parsers.scala.html#108951">in</a></span>.<span class="typed"><span class="type">(Int)Unit</span><a href="NewScanners.scala.html#39124">resume</a></span>(Tokens.<span class="typed"><span class="type">Int(96)</span><span >XMLSTART</span></span>)
      <span class="typed"><span class="type">MarkupParsers.this.global.Tree</span><a href="#170082">tree</a></span>
    } <span class="keyword">catch</span> {
      <span class="typed"><span class="type">MarkupParsers.this.global.EmptyTree.type</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object MarkupParsers.this.TruncatedXML</span><a id="170087">c</a></span> @ <span class="typed"><span class="type">object MarkupParsers.this.TruncatedXML</span><a href="#46847">TruncatedXML</a></span> =&gt;
        <span class="typed"><span class="type">MarkupParsers.this.UnitParser</span><a href="#142151">parser</a></span>.<span class="typed"><span class="type">(Int,String)Unit</span><a href="Parsers.scala.html#108958">syntaxError</a></span>(<span class="typed"><span class="type">=&gt; Int</span><a href="#142162">pos</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3148">-</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>, <span class="typed"><span class="type">object MarkupParsers.this.TruncatedXML</span><a href="#170087">c</a></span>.<span class="typed"><span class="type">()java.lang.String</span><a href="#169590">getMessage</a></span>)
        <span class="comment">//s.nextToken</span>
        <span class="typed"><span class="type">MarkupParsers.this.UnitParser</span><a href="#142151">parser</a></span>.<span class="typed"><span class="type">=&gt; MarkupParsers.this.UnitScanner</span><a href="Parsers.scala.html#108951">in</a></span>.<span class="typed"><span class="type">(Int)Unit</span><a href="NewScanners.scala.html#39124">resume</a></span>(Tokens.<span class="typed"><span class="type">Int(96)</span><span >XMLSTART</span></span>)
        <span class="typed"><span class="type">object MarkupParsers.this.global.EmptyTree</span><a href="../Trees.scala.html#22380">EmptyTree</a></span>

      <span class="typed"><span class="type">MarkupParsers.this.global.EmptyTree.type</span><span class="keyword">case</span></span> <span class="typed"><span class="type">java.lang.Throwable</span><a id="170092">c</a></span> @ (<span class="typed"><span class="type">object MarkupParsers.this.MissingEndTagException</span><a href="#46843">MissingEndTagException</a></span> | <span class="typed"><span class="type">object MarkupParsers.this.ConfusedAboutBracesException</span><a href="#46845">ConfusedAboutBracesException</a></span>) =&gt;
        <span class="typed"><span class="type">MarkupParsers.this.UnitParser</span><a href="#142151">parser</a></span>.<span class="typed"><span class="type">(Int,String)Unit</span><a href="Parsers.scala.html#108958">syntaxError</a></span>((<span class="typed"><span class="type">=&gt; scala.collection.mutable.Stack[(Int, String)]</span><a href="#142172">debugLastStartElement</a></span>.<span class="typed"><span class="type">=&gt; (Int, String)</span><a id="108639">top</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="23614">_1</a></span>),
                      <span class="typed"><span class="type">java.lang.Throwable</span><a href="#170092">c</a></span>.<span class="typed"><span class="type">()java.lang.String</span><a id="23646">getMessage</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">=&gt; scala.collection.mutable.Stack[(Int, String)]</span><a href="#142172">debugLastStartElement</a></span>.<span class="typed"><span class="type">=&gt; (Int, String)</span><a id="108639">top</a></span>.<span class="typed"><span class="type">=&gt; String</span><a id="23616">_2</a></span><span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span><span class="typed"><span class="type">java.lang.String(&quot;&gt;&quot;)</span><span class="string">&quot;&gt;&quot;</span></span>)
        <span class="typed"><span class="type">object MarkupParsers.this.global.EmptyTree</span><a href="../Trees.scala.html#22380">EmptyTree</a></span>

      <span class="typed"><span class="type">MarkupParsers.this.global.EmptyTree.type</span><span class="keyword">case</span></span> _:<span class="typed"><span class="type">ArrayIndexOutOfBoundsException</span><a id="1699">ArrayIndexOutOfBoundsException</a></span> =&gt;
        <span class="typed"><span class="type">MarkupParsers.this.UnitParser</span><a href="#142151">parser</a></span>.<span class="typed"><span class="type">(Int,String)Unit</span><a href="Parsers.scala.html#108958">syntaxError</a></span>((<span class="typed"><span class="type">=&gt; scala.collection.mutable.Stack[(Int, String)]</span><a href="#142172">debugLastStartElement</a></span>.<span class="typed"><span class="type">=&gt; (Int, String)</span><a id="108639">top</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="23614">_1</a></span>),
                      <span class="typed"><span class="type">java.lang.String(&quot;missing end tag in XML literal for &lt;&quot;)</span><span class="string">&quot;missing end tag in XML literal for &lt;&quot;</span></span>
                      <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span><span class="typed"><span class="type">=&gt; scala.collection.mutable.Stack[(Int, String)]</span><a href="#142172">debugLastStartElement</a></span>.<span class="typed"><span class="type">=&gt; (Int, String)</span><a id="108639">top</a></span>.<span class="typed"><span class="type">=&gt; String</span><a id="23616">_2</a></span><span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span><span class="typed"><span class="type">java.lang.String(&quot;&gt;&quot;)</span><span class="string">&quot;&gt;&quot;</span></span>)
        <span class="typed"><span class="type">object MarkupParsers.this.global.EmptyTree</span><a href="../Trees.scala.html#22380">EmptyTree</a></span>
    }

    <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; MarkupParsers.this.global.Tree</span><a id="142198">xEmbeddedExpr</a></span>: <span class="typed"><span class="type">MarkupParsers.this.global.Tree</span><a href="../Trees.scala.html#22371">Tree</a></span> = {
      <span class="typed"><span class="type">(Boolean)Unit</span><a href="#142169">xEmbeddedBlock</a></span> = <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>
      <span class="typed"><span class="type">MarkupParsers.this.UnitParser</span><a href="#142151">parser</a></span>.<span class="typed"><span class="type">=&gt; MarkupParsers.this.UnitScanner</span><a href="Parsers.scala.html#108951">in</a></span>.<span class="typed"><span class="type">(Int)Unit</span><a href="NewScanners.scala.html#39124">resume</a></span>(<span class="typed"><span class="type">Int(94)</span><span >LBRACE</span></span>)
      <span class="typed"><span class="type">MarkupParsers.this.UnitParser</span><a href="#142151">parser</a></span>.<span class="typed"><span class="type">=&gt; MarkupParsers.this.UnitScanner</span><a href="Parsers.scala.html#108951">in</a></span>.<span class="typed"><span class="type">(List[Int])Unit</span><a href="NewScanners.scala.html#39109">sepRegions</a></span> = <span class="typed"><span class="type">Int(95)</span><span >RBRACE</span></span> <span class="typed"><span class="type">(Int)List[Int]</span><a href="#170104" id="21335">::</a></span> <span class="typed"><span class="type">MarkupParsers.this.UnitParser</span><a href="#142151">parser</a></span>.<span class="typed"><span class="type">=&gt; MarkupParsers.this.UnitScanner</span><a href="Parsers.scala.html#108951">in</a></span>.<span class="typed"><span class="type">=&gt; List[Int]</span><a href="NewScanners.scala.html#39108">sepRegions</a></span>
      <span class="keyword">val</span> <span class="typed"><span class="type">MarkupParsers.this.global.Tree</span><a id="170103">b</a></span> = <span class="typed"><span class="type">MarkupParsers.this.UnitParser</span><a href="#142151">parser</a></span>.<span class="typed"><span class="type">()MarkupParsers.this.global.Tree</span><a href="Parsers.scala.html#65058">block</a></span>() <span class="comment">//p.expr(true,false);</span>
      <span class="typed"><span class="type">MarkupParsers.this.UnitParser</span><a href="#142151">parser</a></span>.<span class="typed"><span class="type">=&gt; MarkupParsers.this.UnitScanner</span><a href="Parsers.scala.html#108951">in</a></span>.<span class="typed"><span class="type">(List[Int])Unit</span><a href="NewScanners.scala.html#39109">sepRegions</a></span> = <span class="typed"><span class="type">MarkupParsers.this.UnitParser</span><a href="#142151">parser</a></span>.<span class="typed"><span class="type">=&gt; MarkupParsers.this.UnitScanner</span><a href="Parsers.scala.html#108951">in</a></span>.<span class="typed"><span class="type">=&gt; List[Int]</span><a href="NewScanners.scala.html#39108">sepRegions</a></span>.<span class="typed"><span class="type">=&gt; List[Int]</span><a id="21334">tail</a></span>
      <span class="typed"><span class="type">AnyVal with NotNull</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">MarkupParsers.this.UnitParser</span><a href="#142151">parser</a></span>.<span class="typed"><span class="type">=&gt; MarkupParsers.this.UnitScanner</span><a href="Parsers.scala.html#108951">in</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a href="NewScanners.scala.html#39130">token</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3142">!=</a></span> <span class="typed"><span class="type">Int(95)</span><span >RBRACE</span></span>) {
        <span class="typed"><span class="type">(MarkupParsers.this.ScannerInput)Unit</span><a href="#142159">input</a></span> = <span class="typed"><span class="type">MarkupParsers.this.UnitParser</span><a href="#142151">parser</a></span>.<span class="typed"><span class="type">=&gt; MarkupParsers.this.UnitScanner</span><a href="Parsers.scala.html#108951">in</a></span>.<span class="typed"><span class="type">=&gt; MarkupParsers.this.ScannerInput</span><a href="NewScanners.scala.html#39122">flush</a></span>
        <span class="typed"><span class="type">(String)Char</span><a href="#142203">reportSyntaxError</a></span>(<span class="typed"><span class="type">java.lang.String(&quot; expected end of Scala block&quot;)</span><span class="string">&quot; expected end of Scala block&quot;</span></span>)
      } <span class="keyword">else</span> {
        <span class="typed"><span class="type">(MarkupParsers.this.ScannerInput)Unit</span><a href="#142159">input</a></span> = <span class="typed"><span class="type">MarkupParsers.this.UnitParser</span><a href="#142151">parser</a></span>.<span class="typed"><span class="type">=&gt; MarkupParsers.this.UnitScanner</span><a href="Parsers.scala.html#108951">in</a></span>.<span class="typed"><span class="type">=&gt; MarkupParsers.this.ScannerInput</span><a href="NewScanners.scala.html#39122">flush</a></span>
        <span class="typed"><span class="type">(Boolean)Unit</span><span id="6003"><a id="821">assert</a></span></span>(<span class="typed"><span class="type">=&gt; Char</span><a href="#142167">nextch</a></span> <span class="typed"><span class="type">(Char)Boolean</span><a id="3018">==</a></span> <span class="typed"><span class="type">Char('}')</span><span class="char">'}'</span></span>)
      }
      <span class="typed"><span class="type">MarkupParsers.this.global.Tree</span><a href="#170103">b</a></span>
    }

    <span class="comment">/** xScalaPatterns  ::= patterns
     */</span>
    <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; List[MarkupParsers.this.global.Tree]</span><a id="142199">xScalaPatterns</a></span>: <span class="typed"><span class="type">List[MarkupParsers.this.global.Tree]</span><a id="526">List</a></span>[Tree] = {
      <span class="typed"><span class="type">(Boolean)Unit</span><a href="#142169">xEmbeddedBlock</a></span> = <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>
      <span class="typed"><span class="type">MarkupParsers.this.UnitParser</span><a href="#142151">parser</a></span>.<span class="typed"><span class="type">=&gt; MarkupParsers.this.UnitScanner</span><a href="Parsers.scala.html#108951">in</a></span>.<span class="typed"><span class="type">(Int)Unit</span><a href="NewScanners.scala.html#39124">resume</a></span>(<span class="typed"><span class="type">Int(94)</span><span >LBRACE</span></span>)
      <span class="keyword">val</span> <span class="typed"><span class="type">List[MarkupParsers.this.global.Tree]</span><a id="170119">b</a></span> = <span class="typed"><span class="type">MarkupParsers.this.UnitParser</span><a href="#142151">parser</a></span>.<span class="typed"><span class="type">(Boolean)List[MarkupParsers.this.global.Tree]</span><a href="Parsers.scala.html#65065">patterns</a></span>(<span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>)
      <span class="typed"><span class="type">AnyVal with NotNull</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">MarkupParsers.this.UnitParser</span><a href="#142151">parser</a></span>.<span class="typed"><span class="type">=&gt; MarkupParsers.this.UnitScanner</span><a href="Parsers.scala.html#108951">in</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a href="NewScanners.scala.html#39130">token</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3142">!=</a></span> <span class="typed"><span class="type">Int(95)</span><span >RBRACE</span></span>) {
        <span class="typed"><span class="type">(MarkupParsers.this.ScannerInput)Unit</span><a href="#142159">input</a></span> = <span class="typed"><span class="type">MarkupParsers.this.UnitParser</span><a href="#142151">parser</a></span>.<span class="typed"><span class="type">=&gt; MarkupParsers.this.UnitScanner</span><a href="Parsers.scala.html#108951">in</a></span>.<span class="typed"><span class="type">=&gt; MarkupParsers.this.ScannerInput</span><a href="NewScanners.scala.html#39122">flush</a></span>
        <span class="typed"><span class="type">(String)Char</span><a href="#142203">reportSyntaxError</a></span>(<span class="typed"><span class="type">java.lang.String(&quot; expected end of Scala pattern&quot;)</span><span class="string">&quot; expected end of Scala pattern&quot;</span></span>)
      } <span class="keyword">else</span> {
        <span class="typed"><span class="type">(MarkupParsers.this.ScannerInput)Unit</span><a href="#142159">input</a></span> = <span class="typed"><span class="type">MarkupParsers.this.UnitParser</span><a href="#142151">parser</a></span>.<span class="typed"><span class="type">=&gt; MarkupParsers.this.UnitScanner</span><a href="Parsers.scala.html#108951">in</a></span>.<span class="typed"><span class="type">=&gt; MarkupParsers.this.ScannerInput</span><a href="NewScanners.scala.html#39122">flush</a></span>
        <span class="typed"><span class="type">(Boolean)Unit</span><span id="6003"><a id="821">assert</a></span></span>(<span class="typed"><span class="type">=&gt; Char</span><a href="#142167">nextch</a></span> <span class="typed"><span class="type">(Char)Boolean</span><a id="3018">==</a></span> <span class="typed"><span class="type">Char('}')</span><span class="char">'}'</span></span>)
      }
      <span class="typed"><span class="type">List[MarkupParsers.this.global.Tree]</span><a href="#170119">b</a></span>
    }

    <span class="comment">//var ch: Char = _;</span>


    <span class="comment">//def lookahead = { s.xLookahead }</span>
    <span class="keyword">var</span> <span class="typed"><span class="type">List[List[Int]]</span><span id="142202"><span id="142200"><span id="142201"><a id="169611">scannerState</a></span></span></span></span>: <span class="typed"><span class="type">List[List[Int]]</span><a id="526">List</a></span>[List[Int]] = <span class="typed"><span class="type">object Nil</span><a id="335">Nil</a></span>

<span class="comment">/*
    private def pushScannerState {
      scannerState = s.sepRegions :: scannerState
      s.sepRegions = Nil
    }
    private def popScannerState { 
      s.sepRegions = scannerState.head
      scannerState = scannerState.tail
    }
    */</span>
<span class="comment">/*
    private def init {
      ch = s.in.ch
      pos = s.in.cpos
    }
    */</span>

    <span class="keyword">def</span> <span class="typed"><span class="type">(String)Char</span><a id="142203">reportSyntaxError</a></span>(<span class="typed"><span class="type">String</span><a id="169622">str</a></span>: <span class="typed"><span class="type">String</span><a id="1861">String</a></span>) = {
      <span class="typed"><span class="type">MarkupParsers.this.UnitParser</span><a href="#142151">parser</a></span>.<span class="typed"><span class="type">(Int,String)Unit</span><a href="Parsers.scala.html#108958">syntaxError</a></span>(<span class="typed"><span class="type">=&gt; Int</span><a href="#142162">pos</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3148">-</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>, <span class="typed"><span class="type">java.lang.String(&quot;in XML literal: &quot;)</span><span class="string">&quot;in XML literal: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">String</span><a href="#169622">str</a></span>)
      <span class="typed"><span class="type">=&gt; Char</span><a href="#142167">nextch</a></span>
    }
<span class="comment">/*
    private def sync {
      xEmbeddedBlock = false
      s.xSync
    }
*/</span>
    <span class="comment">/** '&lt;' xPattern  ::= Name [S] { xmlPattern | '{' pattern3 '}' } ETag
     *                  | Name [S] '/' '&gt;'
     */</span>
    <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; MarkupParsers.this.global.Tree</span><a id="142204">xPattern</a></span>: <span class="typed"><span class="type">MarkupParsers.this.global.Tree</span><a href="../Trees.scala.html#22371">Tree</a></span> = {
      <span class="keyword">val</span> <span class="typed"><span class="type">Int</span><a id="170131">pos1</a></span> = <span class="typed"><span class="type">=&gt; Int</span><a href="#142162">pos</a></span>
      <span class="keyword">val</span> <span class="typed"><span class="type">String</span><a id="170132">qname</a></span> = <span class="typed"><span class="type">=&gt; String</span><a href="#142190">xName</a></span>
      <span class="typed"><span class="type">=&gt; scala.collection.mutable.Stack[(Int, String)]</span><a href="#142172">debugLastStartElement</a></span>.<span class="typed"><span class="type">((Int, String)*)Unit</span><a id="108638">push</a></span>(<span class="typed"><span class="type">(Int,String)(Int, String)</span><span id="23625"><a id="1379">(</a></span></span><span class="typed"><span class="type">Int</span><a href="#170131">pos1</a></span>, <span class="typed"><span class="type">String</span><a href="#170132">qname</a></span>))
      <span class="typed"><span class="type">=&gt; Unit</span><a href="#142192">xSpaceOpt</a></span>
      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span> <span class="typed"><span class="type">(Char)Boolean</span><a id="3018">==</a></span> <span class="typed"><span class="type">Char('/')</span><span class="char">'/'</span></span>) { <span class="comment">// empty tag</span>
        <span class="typed"><span class="type">=&gt; Char</span><a href="#142167">nextch</a></span>
        <span class="typed"><span class="type">(Char)Unit</span><a href="#142171">xToken</a></span>(<span class="typed"><span class="type">Char('&gt;')</span><span class="char">'&gt;'</span></span>)
        <span class="typed"><span class="type">Nothing</span><span class="keyword">return</span></span> <span class="typed"><span class="type">object MarkupParser.this.parser.symbXMLBuilder</span><a href="Parsers.scala.html#108960">handle</a></span>.<span class="typed"><span class="type">(scala.tools.nsc.util.Position,String,scala.collection.mutable.Buffer[MarkupParser.this.parser.symbXMLBuilder.global.Tree])MarkupParser.this.parser.symbXMLBuilder.global.Tree</span><a href="SymbolicXMLBuilder.scala.html#64854">makeXMLpat</a></span>(<span class="typed"><span class="type">implicit scala.tools.nsc.ast.parser.Parsers.UnitParser.i2p : (Int)scala.tools.nsc.util.Position</span><a href="Parsers.scala.html#108954">pos1</a></span>, <span class="typed"><span class="type">String</span><a href="#170132">qname</a></span>, <span class="typed"><span class="type">scala.collection.mutable.ArrayBuffer[MarkupParsers.this.global.Tree]</span><span class="keyword">new</span></span> mutable.<span class="typed"><span class="type">scala.collection.mutable.ArrayBuffer[MarkupParsers.this.global.Tree]</span><a id="20132">ArrayBuffer</a></span>[Tree]())
      }

      <span class="comment">// else: tag with content</span>
      <span class="typed"><span class="type">(Char)Unit</span><a href="#142171">xToken</a></span>(<span class="typed"><span class="type">Char('&gt;')</span><span class="char">'&gt;'</span></span>)
      <span class="keyword">var</span> <span class="typed"><span class="type">scala.collection.mutable.ArrayBuffer[MarkupParsers.this.global.Tree]</span><a id="170133">ts</a></span> = <span class="typed"><span class="type">scala.collection.mutable.ArrayBuffer[MarkupParsers.this.global.Tree]</span><span class="keyword">new</span></span> mutable.<span class="typed"><span class="type">scala.collection.mutable.ArrayBuffer[MarkupParsers.this.global.Tree]</span><a id="20132">ArrayBuffer</a></span>[Tree]
      <span class="keyword">var</span> <span class="typed"><span class="type">Boolean</span><a id="170134">exit</a></span> = <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>
      <span class="typed"><span class="type">Unit</span><a href="#170135" class="keyword">while</a></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span> <span class="typed"><span class="type">Boolean</span><a href="#170134">exit</a></span>) {
        <span class="keyword">val</span> <span class="typed"><span class="type">Int</span><a id="170140">pos2</a></span> = <span class="typed"><span class="type">=&gt; Int</span><a href="#142162">pos</a></span>
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a href="#142168">xEmbeddedBlock</a></span>) {
          <span class="typed"><span class="type">scala.collection.mutable.ArrayBuffer[MarkupParsers.this.global.Tree]</span><a href="#170133">ts</a></span> <span class="typed"><span class="type">(Iterable[MarkupParsers.this.global.Tree])Unit</span><a id="41546">++=</a></span> <span class="typed"><span class="type">=&gt; List[MarkupParsers.this.global.Tree]</span><a href="#142199">xScalaPatterns</a></span>
        } <span class="keyword">else</span>
          <span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span> <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
            <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Char('&lt;')</span><span class="char">'&lt;'</span></span> =&gt; <span class="comment">// tag</span>
              <span class="typed"><span class="type">=&gt; Char</span><a href="#142167">nextch</a></span>
              <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span> <span class="typed"><span class="type">(Char)Boolean</span><a id="3019">!=</a></span> <span class="typed"><span class="type">Char('/')</span><span class="char">'/'</span></span>) { <span class="comment">//child</span>
                <span class="typed"><span class="type">scala.collection.mutable.ArrayBuffer[MarkupParsers.this.global.Tree]</span><a href="#170133">ts</a></span>.<span class="typed"><span class="type">(MarkupParsers.this.global.Tree*)Unit</span><a id="31632">append</a></span>(<span class="typed"><span class="type">=&gt; MarkupParsers.this.global.Tree</span><a href="#142204">xPattern</a></span>)
              } <span class="keyword">else</span> {
                <span class="typed"><span class="type">Boolean</span><a href="#170134">exit</a></span> = <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>
              }
            <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Char('{')</span><span class="char">'{'</span></span> =&gt; <span class="comment">// embedded Scala patterns</span>
              <span class="typed"><span class="type">Unit</span><a href="#170146" class="keyword">while</a></span> (<span class="typed"><span class="type">=&gt; Char</span><a href="#142166">ch</a></span> <span class="typed"><span class="type">(Char)Boolean</span><a id="3018">==</a></span> <span class="typed"><span class="type">Char('{')</span><span class="char">'{'</span></span>) {
                <span class="typed"><span class="type">=&gt; Char</span><a href="#142167">nextch</a></span>
                <span class="typed"><span class="type">scala.collection.mutable.ArrayBuffer[MarkupParsers.this.global.Tree]</span><a href="#170133">ts</a></span> <span class="typed"><span class="type">(Iterable[MarkupParsers.this.global.Tree])Unit</span><a id="41546">++=</a></span> <span class="typed"><span class="type">=&gt; List[MarkupParsers.this.global.Tree]</span><a href="#142199">xScalaPatterns</a></span>
              }
              <span class="comment">// postcond: xEmbeddedBlock = false;</span>
              <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a href="#142168">xEmbeddedBlock</a></span>) <span class="typed"><span class="type">object Predef</span><a id="821">Predef</a></span>.<span class="typed"><span class="type">(String)Nothing</span><a id="6000">error</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;problem with embedded block&quot;)</span><span class="string">&quot;problem with embedded block&quot;</span></span>); <span class="comment">// assert</span>

            <span class="typed"><span class="type">Nothing</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Char('\032')</span><span >SU</span></span> =&gt;
              <span class="typed"><span class="type">Nothing</span><span class="keyword">throw</span></span> <span class="typed"><span class="type">object MarkupParsers.this.TruncatedXML</span><a href="#46847">TruncatedXML</a></span>

            <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> _ =&gt; <span class="comment">// teMaxt </span>
              <span class="typed"><span class="type">(scala.tools.nsc.util.Position,scala.collection.mutable.Buffer[MarkupParsers.this.global.Tree],String)Unit</span><a href="#142184">appendText</a></span>(<span class="typed"><span class="type">implicit scala.tools.nsc.ast.parser.Parsers.UnitParser.i2p : (Int)scala.tools.nsc.util.Position</span><a href="Parsers.scala.html#108954">pos2</a></span>, <span class="typed"><span class="type">scala.collection.mutable.ArrayBuffer[MarkupParsers.this.global.Tree]</span><a href="#170133">ts</a></span>, <span class="typed"><span class="type">=&gt; String</span><a href="#142195">xText</a></span>)
              <span class="comment">// here  xEmbeddedBlock might be true;</span>
              <span class="comment">//if( xEmbeddedBlock ) throw new ApplicationError(&quot;after:&quot;+text); // assert</span>
          }
      }
      <span class="typed"><span class="type">(String)Unit</span><a href="#142179">xEndTag</a></span>(<span class="typed"><span class="type">String</span><a href="#170132">qname</a></span>)
      <span class="typed"><span class="type">=&gt; scala.collection.mutable.Stack[(Int, String)]</span><a href="#142172">debugLastStartElement</a></span>.<span class="typed"><span class="type">()(Int, String)</span><a id="108640">pop</a></span>
      <span class="typed"><span class="type">object MarkupParser.this.parser.symbXMLBuilder</span><a href="Parsers.scala.html#108960">handle</a></span>.<span class="typed"><span class="type">(scala.tools.nsc.util.Position,String,scala.collection.mutable.Buffer[MarkupParser.this.parser.symbXMLBuilder.global.Tree])MarkupParser.this.parser.symbXMLBuilder.global.Tree</span><a href="SymbolicXMLBuilder.scala.html#64854">makeXMLpat</a></span>(<span class="typed"><span class="type">implicit scala.tools.nsc.ast.parser.Parsers.UnitParser.i2p : (Int)scala.tools.nsc.util.Position</span><a href="Parsers.scala.html#108954">pos1</a></span>, <span class="typed"><span class="type">String</span><a href="#170132">qname</a></span>, <span class="typed"><span class="type">scala.collection.mutable.ArrayBuffer[MarkupParsers.this.global.Tree]</span><a href="#170133">ts</a></span>)
    }

  } <span class="comment">/* class MarkupParser */</span>
}

        </pre>
    </body>
</html>