<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/ast/parser/Scanners.scala</title>
        <script type="text/javascript" src="../../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../../style.css" title="Style">
    </head>
    <body>
        <pre>
/* NSC -- new Scala compiler
 * Copyright 2005-2009 LAMP/EPFL
 * @author  Martin Odersky
 */
// $Id: Scanners.scala 17285 2009-03-11 13:51:56Z rytz $
<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> ast.parser

<span class="keyword">import</span> scala.tools.nsc.util._
<span class="keyword">import</span> SourceFile.{LF, FF, CR, SU}
<span class="keyword">import</span> Tokens._
<span class="keyword">import</span> scala.annotation.switch
<span class="keyword">import</span> scala.collection.mutable.{ListBuffer, ArrayBuffer}

<span class="keyword">trait</span> <a title="trait Scanners extends java.lang.Object with ScalaObject" id="12398">Scanners</a> <span title="ScalaObject">{</span>
  <span class="keyword">val</span> <a title="=&gt; scala.tools.nsc.Global" id="39903">global</a> : <a href="../../Global.scala.html#8529" title="scala.tools.nsc.Global">Global</a>
  <span class="keyword">import</span> global._

  /** Offset into source character array */
  <span class="keyword">type</span> <a title="Int" id="39905">Offset</a> = <span title="Int">Int</span>

  /** An undefined offset */
  <span class="keyword">val</span> <a title="Scanners.this.Offset" id="39906">NoOffset</a>: <span title="Scanners.this.Offset">Offset</span> = <span title="Int(-1)">-</span><span class="int">1</span>

  <span class="keyword">trait</span> <a title="trait TokenData extends java.lang.Object with ScalaObject" id="39908">TokenData</a> <span title="ScalaObject">{</span>

    /** the next token */
    <span class="keyword">var</span> <a title="Int" id="122270">token</a>: <span title="Int">Int</span> = <span title="Int(-3)">EMPTY</span>

    /** the offset of the first character of the current token */
    <span class="keyword">var</span> <a title="Scanners.this.Offset" id="122273">offset</a>: <span title="Scanners.this.Offset">Offset</span> = <span title="Int(0)" class="int">0</span>

    /** the offset of the character following the token preceding this one */
    <span class="keyword">var</span> <a title="Scanners.this.Offset" id="122276">lastOffset</a>: <span title="Scanners.this.Offset">Offset</span> = <span title="Int(0)" class="int">0</span>

    /** the name of an identifier */
    <span class="keyword">var</span> <a title="Scanners.this.global.Name" id="122279">name</a>: <a href="../../symtab/Names.scala.html#26214" title="Scanners.this.global.Name">Name</a> = <span title="Null(null)" class="keyword">null</span>

    /** the string value of a literal */
    <span class="keyword">var</span> <a title="String" id="122282">strVal</a>: <span title="String">String</span> = <span title="Null(null)" class="keyword">null</span>

    /** the base of a number */
    <span class="keyword">var</span> <a title="Int" id="122285">base</a>: <span title="Int">Int</span> = <span title="Int(0)" class="int">0</span>

    <span class="keyword">def</span> <a title="(td: Scanners.this.TokenData)Unit" id="122287">copyFrom</a>(<a title="Scanners.this.TokenData" id="524621">td</a>: <a href="#39908" title="Scanners.this.TokenData">TokenData</a>) = {
      <a href="#39908" title="TokenData.this.type" class="keyword">this</a>.<a href="#122270" title="(x$1: Int)Unit">token</a> = <a href="#524621" title="Scanners.this.TokenData">td</a>.<a href="#122270" title="=&gt; Int">token</a>
      <a href="#39908" title="TokenData.this.type" class="keyword">this</a>.<a href="#122273" title="(x$1: Scanners.this.Offset)Unit">offset</a> = <a href="#524621" title="Scanners.this.TokenData">td</a>.<a href="#122273" title="=&gt; Scanners.this.Offset">offset</a>
      <a href="#39908" title="TokenData.this.type" class="keyword">this</a>.<a href="#122276" title="(x$1: Scanners.this.Offset)Unit">lastOffset</a> = <a href="#524621" title="Scanners.this.TokenData">td</a>.<a href="#122276" title="=&gt; Scanners.this.Offset">lastOffset</a>
      <a href="#39908" title="TokenData.this.type" class="keyword">this</a>.<a href="#122279" title="(x$1: Scanners.this.global.Name)Unit">name</a> = <a href="#524621" title="Scanners.this.TokenData">td</a>.<a href="#122279" title="=&gt; Scanners.this.global.Name">name</a>
      <a href="#39908" title="TokenData.this.type" class="keyword">this</a>.<a href="#122282" title="(x$1: String)Unit">strVal</a> = <a href="#524621" title="Scanners.this.TokenData">td</a>.<a href="#122282" title="=&gt; String">strVal</a>
      <a href="#39908" title="TokenData.this.type" class="keyword">this</a>.<a href="#122285" title="(x$1: Int)Unit">base</a> = <a href="#524621" title="Scanners.this.TokenData">td</a>.<a href="#122285" title="=&gt; Int">base</a>
    }
  }
  
  <span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class Scanner extends scala.tools.nsc.util.CharArrayReader with Scanners.this.TokenData with ScalaObject" id="39909">Scanner</a> <span title="ScalaObject" class="keyword">extends</span> <a href="../../util/CharArrayReader.scala.html#14674" title="scala.tools.nsc.util.CharArrayReader">CharArrayReader</a> <span class="keyword">with</span> <a href="#39908" title="Scanners.this.TokenData">TokenData</a> {

    <span class="keyword">def</span> <a title="=&gt; Scanners.this.Scanner" id="122209">flush</a> = { <a href="../../util/CharArrayReader.scala.html#122191" title="(x$1: Int)Unit">charOffset</a> = <a href="#122273" title="=&gt; Scanners.this.Offset">offset</a>; <a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>(); <a href="#39909" title="Scanners.this.Scanner" class="keyword">this</a> }

    <span class="keyword">def</span> <a title="(lastCode: Int)Unit" id="122210">resume</a>(<a title="Int" id="524666">lastCode</a>: <span title="Int">Int</span>) = {
      <a href="#122270" title="(x$1: Int)Unit">token</a> = <a href="#524666" title="Int">lastCode</a>
      <a title="(assertion: Boolean)Unit" id="7943">assert</a>(<a href="#122230" title="=&gt; Scanners.this.TokenData">next</a>.<a href="#122270" title="(x$1: Int)Boolean">token</a> == <span title="Int(-3)">EMPTY</span>)
      <a href="#122238" title="()Unit">nextToken</a>()
    }

    // things to fill in, in addition to buf, decodeUni
    <span class="keyword">def</span> <a title="(off: Scanners.this.Offset,msg: String)Unit" id="122211">warning</a>(<a title="Scanners.this.Offset" id="524684">off</a>: <span title="Scanners.this.Offset">Offset</span>, <a title="String" id="524685">msg</a>: <span title="String">String</span>): <span title="Unit">Unit</span>
    <span class="keyword">def</span> <a title="(off: Scanners.this.Offset,msg: String)Unit" id="122212">error</a>  (<a title="Scanners.this.Offset" id="524687">off</a>: <span title="Scanners.this.Offset">Offset</span>, <a title="String" id="524688">msg</a>: <span title="String">String</span>): <span title="Unit">Unit</span>
    <span class="keyword">def</span> <a title="(off: Scanners.this.Offset,msg: String)Unit" id="122213">incompleteInputError</a>(<a title="Scanners.this.Offset" id="524693">off</a>: <span title="Scanners.this.Offset">Offset</span>, <a title="String" id="524694">msg</a>: <span title="String">String</span>): <span title="Unit">Unit</span>
    <span class="keyword">def</span> <a title="(off: Scanners.this.Offset,msg: String)Unit" id="122214">deprecationWarning</a>(<a title="Scanners.this.Offset" id="524696">off</a>: <span title="Scanners.this.Offset">Offset</span>, <a title="String" id="524697">msg</a>: <span title="String">String</span>): <span title="Unit">Unit</span>

    /** the last error offset
     */
    <span class="keyword">var</span> <a title="Scanners.this.Offset" id="122216">errOffset</a>: <span title="Scanners.this.Offset">Offset</span> = <a href="#39906" title="=&gt; Scanners.this.Offset">NoOffset</a>

    /** A character buffer for literals
     */  
    <span class="keyword">val</span> <a title="StringBuilder" id="122218">cbuf</a> = <a title="()StringBuilder" id="57658" class="keyword">new</a> <span title="StringBuilder">StringBuilder</span>

    /** append Unicode character to &quot;cbuf&quot; buffer
     */
    <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(c: Char)Unit" id="122220">putChar</a>(<a title="Char" id="524699">c</a>: <span title="Char">Char</span>) { 
//      assert(cbuf.size &lt; 10000, cbuf)
      <a href="#122218" title="=&gt; StringBuilder">cbuf</a>.<span title="(x: Char)StringBuilder">append</span><span title="Unit">(</span><a href="#524699" title="Char">c</a>) 
    }

    /** Clear buffer and set name and token */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="()Unit" id="122221">finishNamed</a>() {
      <a href="#122279" title="(x$1: Scanners.this.global.Name)Unit">name</a> = <a href="../../symtab/Names.scala.html#26207" title="(s: String)Scanners.this.global.Name">newTermName</a>(<a href="#122218" title="=&gt; StringBuilder">cbuf</a>.<span title="()String">toString</span>)
      <a href="#122270" title="(x$1: Int)Unit">token</a> = <a href="#39928" title="(name: Scanners.this.global.Name)Int">name2token</a>(<a href="#122279" title="=&gt; Scanners.this.global.Name">name</a>)
      <a href="#122218" title="=&gt; StringBuilder">cbuf</a>.<span title="()Unit">clear</span>()
    }

    /** Clear buffer and set string */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="()Unit" id="122222">setStrVal</a>() {
      <a href="#122282" title="(x$1: String)Unit">strVal</a> = <a href="#122218" title="=&gt; StringBuilder">cbuf</a>.<span title="()String">toString</span>
      <a href="#122218" title="=&gt; StringBuilder">cbuf</a>.<span title="()Unit">clear</span>()
    }

    /** Should doc comments be built? */
    <span class="keyword">def</span> <a title="=&gt; Boolean" id="122223">buildDocs</a>: <span title="Boolean">Boolean</span> = <a href="../../Global.scala.html#39417" title="=&gt; Boolean">onlyPresentation</a>
  
    /** buffer for the documentation comment
     */
    <span class="keyword">var</span> <a title="StringBuilder" id="122225">docBuffer</a>: <a title="StringBuilder" id="25179">StringBuilder</a> = <span title="Null(null)" class="keyword">null</span>

    /** Return current docBuffer and set docBuffer to null */
    <span class="keyword">def</span> <a title="=&gt; String" id="122227">flushDoc</a> = {
      <span class="keyword">val</span> <a title="String" id="524736">ret</a> = <span title="String" class="keyword">if</span> (<a href="#122225" title="(x$1: AnyRef)Boolean" id="6609">docBuffer</a> != <span title="Null(null)" class="keyword">null</span>) <a href="#122225" title="=&gt; StringBuilder">docBuffer</a>.<span title="()String">toString</span> <span class="keyword">else</span> <span title="Null(null)" class="keyword">null</span>
      <a href="#122225" title="(x$1: StringBuilder)Unit">docBuffer</a> = <span title="Null(null)" class="keyword">null</span>
      <a href="#524736" title="String">ret</a>
    }

    /** add the given character to the documentation buffer 
     */
    <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(c: Char)Unit" id="122228">putDocChar</a>(<a title="Char" id="524749">c</a>: <span title="Char">Char</span>) {
      <span title="Unit" class="keyword">if</span> (<a href="#122225" title="(x$1: AnyRef)Boolean">docBuffer</a> ne <span title="Null(null)" class="keyword">null</span>) <a href="#122225" title="=&gt; StringBuilder">docBuffer</a>.<span title="(x: Char)StringBuilder">append</span><span title="Unit">(</span><a href="#524749" title="Char">c</a>)
    }

    <span class="keyword">private</span> <span class="keyword">class</span> <a title="class TokenData0 extends java.lang.Object with Scanners.this.TokenData with ScalaObject" id="122229">TokenData0</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#39908" title="Scanners.this.TokenData">TokenData</a>

    /** we need one token lookahead and one token history
     */
    <span class="keyword">val</span> <a title="Scanners.this.TokenData" id="122230">next</a> : <a href="#39908" title="Scanners.this.TokenData">TokenData</a> = <span title="Scanner.this.TokenData0" class="keyword">new</span> <a href="#122229" title="Scanner.this.TokenData0">TokenData0</a>
    <span class="keyword">val</span> <a title="Scanners.this.TokenData" id="122232">prev</a> : <a href="#39908" title="Scanners.this.TokenData">TokenData</a> = <span title="Scanner.this.TokenData0" class="keyword">new</span> <a href="#122229" title="Scanner.this.TokenData0">TokenData0</a>

    /** a stack of tokens which indicates whether line-ends can be statement separators
     */
    <span class="keyword">var</span> <a title="List[Int]" id="122235">sepRegions</a>: <span title="List[Int]">List</span>[Int] = List<span title="object Nil">(</span>)

// Get next token ------------------------------------------------------------

    /** read next token and return last offset
     */
    <span class="keyword">def</span> <a title="()Scanners.this.Offset" id="122237">skipToken</a>(): <span title="Scanners.this.Offset">Offset</span> = {
      <span class="keyword">val</span> <a title="Scanners.this.Offset" id="524777">off</a> = <a href="#122273" title="=&gt; Scanners.this.Offset">offset</a>
      <a href="#122238" title="()Unit">nextToken</a>()
      <a href="#524777" title="Scanners.this.Offset">off</a>
    }
    
    /** Produce next token, filling TokenData fields of Scanner.
     */
    <span class="keyword">def</span> <a title="()Unit" id="122238">nextToken</a>() {
      <span class="keyword">val</span> <a title="Int" id="524780">lastToken</a> = <a href="#122270" title="=&gt; Int">token</a>
      // Adapt sepRegions according to last token 
      (<a href="#524780" title="Int">lastToken</a>: @<span title="Int @scala.annotation.switch">switch</span>) <span title="Unit" class="keyword">match</span> {
        <span title="Unit" class="keyword">case</span> <span title="Int(90)">LPAREN</span> =&gt; 
          <a href="#122235" title="(x$1: List[Int])Unit">sepRegions</a> = <span title="Int(91)">RPAREN</span> <a href="#524783" title="Int">::</a> <a href="#122235" title="(x: Int)List[Int]">sepRegions</a>
        <span title="Unit" class="keyword">case</span> <span title="Int(92)">LBRACKET</span> =&gt; 
          <a href="#122235" title="(x$1: List[Int])Unit">sepRegions</a> = <span title="Int(93)">RBRACKET</span> <a href="#524793" title="Int">::</a> <a href="#122235" title="(x: Int)List[Int]">sepRegions</a>
        <span title="Unit" class="keyword">case</span> <span title="Int(94)">LBRACE</span> =&gt;
          <a href="#122235" title="(x$1: List[Int])Unit">sepRegions</a> = <span title="Int(95)">RBRACE</span> <a href="#524803" title="Int">::</a> <a href="#122235" title="(x: Int)List[Int]">sepRegions</a>
        <span title="Unit" class="keyword">case</span> <span title="Int(28)">CASE</span> =&gt;
          <a href="#122235" title="(x$1: List[Int])Unit">sepRegions</a> = <span title="Int(77)">ARROW</span> <a href="#524813" title="Int">::</a> <a href="#122235" title="(x: Int)List[Int]">sepRegions</a>
        <span title="Unit" class="keyword">case</span> <span title="Int(95)">RBRACE</span> =&gt;
          <a href="#122235" title="(x$1: List[Int])Unit">sepRegions</a> = <a href="#122235" title="(p: (Int) =&gt; Boolean)List[Int]" id="24456">sepRegions</a> dropWhile (<a href="#524828" title="(x$1: Int)Boolean">_</a> != <span title="Int(95)">RBRACE</span>)
          <span title="Unit" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="#122235" title="=&gt; List[Int]">sepRegions</a>.<span title="=&gt; Boolean">isEmpty</span>) <a href="#122235" title="(x$1: List[Int])Unit">sepRegions</a> = <a href="#122235" title="=&gt; List[Int]">sepRegions</a>.<span title="=&gt; List[Int]">tail</span>
        <span title="Unit" class="keyword">case</span> <span title="Int(93)">RBRACKET</span> | <span title="Int(91)">RPAREN</span> | <span title="Int(77)">ARROW</span> =&gt;
          <span title="Unit" class="keyword">if</span> (<span title="(x$1: Boolean)Boolean">!</span><a href="#122235" title="=&gt; List[Int]">sepRegions</a>.<span title="=&gt; Boolean">isEmpty</span> &amp;&amp; <a href="#122235" title="=&gt; List[Int]">sepRegions</a>.<span title="(x$1: Int)Boolean">head</span> == <a href="#524780" title="Int">lastToken</a>)
            <a href="#122235" title="(x$1: List[Int])Unit">sepRegions</a> = <a href="#122235" title="=&gt; List[Int]">sepRegions</a>.<span title="=&gt; List[Int]">tail</span>
        <span title="Unit" class="keyword">case</span> _ =&gt;
      }

      // Read a token or copy it from `next` tokenData
      <span title="Unit" class="keyword">if</span> (<a href="#122230" title="=&gt; Scanners.this.TokenData">next</a>.<a href="#122270" title="(x$1: Int)Boolean">token</a> == <span title="Int(-3)">EMPTY</span>) {
        <a href="#122276" title="(x$1: Scanners.this.Offset)Unit">lastOffset</a> = <a href="../../util/CharArrayReader.scala.html#122190" title="(x$1: Int)Int">charOffset</a> - <span title="Int(1)" class="int">1</span>
        <a href="#122241" title="()Unit">fetchToken</a>()
      } <span class="keyword">else</span> {
        <a href="#122287" title="(td: Scanners.this.TokenData)Unit" class="keyword">this</a> copyFrom <a href="#122230" title="=&gt; Scanners.this.TokenData">next</a>
        <a href="#122230" title="=&gt; Scanners.this.TokenData">next</a>.<a href="#122270" title="(x$1: Int)Unit">token</a> = <span title="Int(-3)">EMPTY</span>
      }

      /** Insert NEWLINE or NEWLINES if
       *  - we are after a newline
       *  - we are within a { ... } or on toplevel (wrt sepRegions)
       *  - the current token can start a statement and the one before can end it
       *  insert NEWLINES if we are past a blank line, NEWLINE otherwise
       */
      <span title="Unit" class="keyword">if</span> (<span title="(x$1: Boolean)Boolean">!</span><a href="#122264" title="()Boolean">applyBracePatch</a>() <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> <a href="#122239" title="()Boolean">afterLineEnd</a>() <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> <a href="#122244" title="(token: Int)Boolean">inLastOfStat</a>(<a href="#524780" title="Int">lastToken</a>) <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> <a href="#122243" title="(token: Int)Boolean">inFirstOfStat</a>(<a href="#122270" title="=&gt; Int">token</a>) &amp;&amp;
          (<a href="#122235" title="=&gt; List[Int]">sepRegions</a>.<span title="(x$1: Boolean)Boolean">isEmpty</span> || <a href="#122235" title="=&gt; List[Int]">sepRegions</a>.<span title="(x$1: Int)Boolean">head</span> == <span title="Int(95)">RBRACE</span>)) {
        <a href="#122287" title="(td: Scanners.this.TokenData)Unit">next</a> copyFrom <a href="#39909" title="Scanners.this.Scanner" class="keyword">this</a>
        <a href="#122273" title="(x$1: Scanners.this.Offset)Unit">offset</a> = <span title="Scanners.this.Offset" class="keyword">if</span> (<a href="../../util/CharArrayReader.scala.html#122193" title="(x$1: Int)Boolean">lineStartOffset</a> &lt;= <a href="#122273" title="=&gt; Scanners.this.Offset">offset</a>) <a href="../../util/CharArrayReader.scala.html#122193" title="=&gt; Int">lineStartOffset</a> <span class="keyword">else</span> <a href="../../util/CharArrayReader.scala.html#122196" title="=&gt; Int">lastLineStartOffset</a>
        <a href="#122270" title="(x$1: Int)Unit">token</a> = <span title="Int" class="keyword">if</span> (<a href="#122240" title="()Boolean">pastBlankLine</a>()) <span title="Int(79)">NEWLINES</span> <span class="keyword">else</span> <span title="Int(78)">NEWLINE</span>
      }

      // Join CASE + CLASS =&gt; CASECLASS, CASE + OBJECT =&gt; CASEOBJECT, SEMI + ELSE =&gt; ELSE
      <span title="Unit" class="keyword">if</span> (<a href="#122270" title="(x$1: Int)Boolean">token</a> == <span title="Int(28)">CASE</span>) {
        <a href="#122287" title="(td: Scanners.this.TokenData)Unit">prev</a> copyFrom <a href="#39909" title="Scanners.this.Scanner" class="keyword">this</a>
        <span class="keyword">val</span> <a title="Int" id="524963">nextLastOffset</a> = <a href="../../util/CharArrayReader.scala.html#122190" title="(x$1: Int)Int">charOffset</a> - <span title="Int(1)" class="int">1</span>
        <a href="#122241" title="()Unit">fetchToken</a>()
        <span title="Unit" class="keyword">if</span> (<a href="#122270" title="(x$1: Int)Boolean">token</a> == <span title="Int(45)">CLASS</span>) {
          <a href="#122270" title="(x$1: Int)Unit">token</a> = <span title="Int(29)">CASECLASS</span>
        } <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<a href="#122270" title="(x$1: Int)Boolean">token</a> == <span title="Int(44)">OBJECT</span>) {
          <a href="#122270" title="(x$1: Int)Unit">token</a> = <span title="Int(30)">CASEOBJECT</span>
        } <span class="keyword">else</span> {
          <a href="#122276" title="(x$1: Scanners.this.Offset)Unit">lastOffset</a> = <a href="#524963" title="Int">nextLastOffset</a>
          <a href="#122287" title="(td: Scanners.this.TokenData)Unit">next</a> copyFrom <a href="#39909" title="Scanners.this.Scanner" class="keyword">this</a>
          <a href="#122287" title="(td: Scanners.this.TokenData)Unit" class="keyword">this</a> copyFrom <a href="#122232" title="=&gt; Scanners.this.TokenData">prev</a>
        }
      } <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<a href="#122270" title="(x$1: Int)Boolean">token</a> == <span title="Int(71)">SEMI</span>) {
        <a href="#122287" title="(td: Scanners.this.TokenData)Unit">prev</a> copyFrom <a href="#39909" title="Scanners.this.Scanner" class="keyword">this</a>
        <a href="#122241" title="()Unit">fetchToken</a>()
        <span title="Unit" class="keyword">if</span> (<a href="#122270" title="(x$1: Int)Boolean">token</a> != <span title="Int(22)">ELSE</span>) {
          <a href="#122287" title="(td: Scanners.this.TokenData)Unit">next</a> copyFrom <a href="#39909" title="Scanners.this.Scanner" class="keyword">this</a>
          <a href="#122287" title="(td: Scanners.this.TokenData)Unit" class="keyword">this</a> copyFrom <a href="#122232" title="=&gt; Scanners.this.TokenData">prev</a>
        }
      }  

//      print(&quot;[&quot;+this+&quot;]&quot;)
    }

    /** Is current token first one after a newline? */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="()Boolean" id="122239">afterLineEnd</a>(): <span title="Boolean">Boolean</span> =
      <a href="#122276" title="(x$1: Int)Boolean">lastOffset</a> <span title="(x$1: Boolean)Boolean">&lt;</span> <a href="../../util/CharArrayReader.scala.html#122193" title="=&gt; Int">lineStartOffset</a> &amp;&amp; 
      (<a href="../../util/CharArrayReader.scala.html#122193" title="(x$1: Int)Boolean">lineStartOffset</a> <span title="(x$1: Boolean)Boolean">&lt;=</span> <a href="#122273" title="=&gt; Scanners.this.Offset">offset</a> || 
       <a href="#122276" title="(x$1: Int)Boolean">lastOffset</a> <span title="(x$1: Boolean)Boolean">&lt;</span> <a href="../../util/CharArrayReader.scala.html#122196" title="=&gt; Int">lastLineStartOffset</a> &amp;&amp; <a href="../../util/CharArrayReader.scala.html#122196" title="(x$1: Int)Boolean">lastLineStartOffset</a> &lt;= <a href="#122273" title="=&gt; Scanners.this.Offset">offset</a>)

    /** Is there a blank line between the current token and the last one?
     *  @pre  afterLineEnd().
     */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="()Boolean" id="122240">pastBlankLine</a>(): <span title="Boolean">Boolean</span> = {
      <span class="keyword">var</span> <a title="Scanners.this.Offset" id="525050">idx</a> = <a href="#122276" title="=&gt; Scanners.this.Offset">lastOffset</a>
      <span class="keyword">var</span> <a title="Char" id="525051">ch</a> = <a href="../../util/CharArrayReader.scala.html#122184" title="(i: Int)Char">buf</a>(<a href="#525050" title="Scanners.this.Offset">idx</a>)
      <span class="keyword">val</span> <a title="Scanners.this.Offset" id="525052">end</a> = <a href="#122273" title="=&gt; Scanners.this.Offset">offset</a>
      <span title="Unit" class="keyword">while</span> (<a href="#525050" title="(x$1: Int)Boolean">idx</a> &lt; <a href="#525052" title="Scanners.this.Offset">end</a>) <a href="#525053" title="()Unit">{</a>
        <span title="Unit" class="keyword">if</span> (<a href="#525051" title="(x$1: Char)Boolean">ch</a> <span title="(x$1: Boolean)Boolean">==</span> <span title="Char('\012')">LF</span> || <a href="#525051" title="(x$1: Char)Boolean">ch</a> == <span title="Char('\014')">FF</span>) {
          <a href="#525085" title="Unit" class="keyword">do</a> {
            <a href="#525050" title="Scanners.this.Offset">idx</a> += <span title="Int(1)" class="int">1</span>; <a href="#525051" title="Char">ch</a> = <a href="../../util/CharArrayReader.scala.html#122184" title="(i: Int)Char">buf</a>(<a href="#525050" title="Scanners.this.Offset">idx</a>)
            <span title="Unit" class="keyword">if</span> (<a href="#525051" title="(x$1: Char)Boolean">ch</a> <span title="(x$1: Boolean)Boolean">==</span> <span title="Char('\012')">LF</span> || <a href="#525051" title="(x$1: Char)Boolean">ch</a> == <span title="Char('\014')">FF</span>) {
//              println(&quot;blank line found at &quot;+lastOffset+&quot;:&quot;+(lastOffset to idx).map(buf(_)).toList)
              <span title="Nothing" class="keyword">return</span> <span title="Boolean(true)" class="keyword">true</span>
            }
          } <span class="keyword">while</span> (<a href="#525050" title="(x$1: Int)Boolean">idx</a> <span title="(x$1: Boolean)Boolean">&lt;</span> <a href="#525052" title="Scanners.this.Offset">end</a> &amp;&amp; <a href="#525051" title="(x$1: Char)Boolean">ch</a> &lt;= <span title="Char(' ')" class="char">' '</span>)
        }
        <a href="#525050" title="Scanners.this.Offset">idx</a> += <span title="Int(1)" class="int">1</span>; <a href="#525051" title="Char">ch</a> = <a href="../../util/CharArrayReader.scala.html#122184" title="(i: Int)Char">buf</a>(<a href="#525050" title="Scanners.this.Offset">idx</a>)
      }
      <span title="Boolean(false)" class="keyword">false</span>
    }

    /** read next token, filling TokenData fields of Scanner.
     */
    <span class="keyword">protected</span> <span class="keyword">final</span> <span class="keyword">def</span> <a title="()Unit" id="122241">fetchToken</a>() {
      <a href="#122273" title="(x$1: Scanners.this.Offset)Unit">offset</a> = <a href="../../util/CharArrayReader.scala.html#122190" title="(x$1: Int)Int">charOffset</a> - <span title="Int(1)" class="int">1</span>
      (<a href="../../util/CharArrayReader.scala.html#122187" title="=&gt; Char">ch</a>: @<span title="Char @scala.annotation.switch">switch</span>) <span title="Unit" class="keyword">match</span> {
        
        <span title="Unit" class="keyword">case</span> <span title="Char(' ')" class="char">' '</span> | <span title="Char('\011')" class="char">'\t'</span> | <span title="Char('\015')">CR</span> | <span title="Char('\012')">LF</span> | <span title="Char('\014')">FF</span> =&gt;
          <a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>()
          <a href="#122241" title="()Unit">fetchToken</a>()
        <span title="Unit" class="keyword">case</span> <span title="Char('A')" class="char">'A'</span> | <span title="Char('B')" class="char">'B'</span> | <span title="Char('C')" class="char">'C'</span> | <span title="Char('D')" class="char">'D'</span> | <span title="Char('E')" class="char">'E'</span> |
             <span title="Char('F')" class="char">'F'</span> | <span title="Char('G')" class="char">'G'</span> | <span title="Char('H')" class="char">'H'</span> | <span title="Char('I')" class="char">'I'</span> | <span title="Char('J')" class="char">'J'</span> |
             <span title="Char('K')" class="char">'K'</span> | <span title="Char('L')" class="char">'L'</span> | <span title="Char('M')" class="char">'M'</span> | <span title="Char('N')" class="char">'N'</span> | <span title="Char('O')" class="char">'O'</span> |
             <span title="Char('P')" class="char">'P'</span> | <span title="Char('Q')" class="char">'Q'</span> | <span title="Char('R')" class="char">'R'</span> | <span title="Char('S')" class="char">'S'</span> | <span title="Char('T')" class="char">'T'</span> |
             <span title="Char('U')" class="char">'U'</span> | <span title="Char('V')" class="char">'V'</span> | <span title="Char('W')" class="char">'W'</span> | <span title="Char('X')" class="char">'X'</span> | <span title="Char('Y')" class="char">'Y'</span> |
             <span title="Char('Z')" class="char">'Z'</span> | <span title="Char('$')" class="char">'$'</span> | <span title="Char('_')" class="char">'_'</span> |
             <span title="Char('a')" class="char">'a'</span> | <span title="Char('b')" class="char">'b'</span> | <span title="Char('c')" class="char">'c'</span> | <span title="Char('d')" class="char">'d'</span> | <span title="Char('e')" class="char">'e'</span> |
             <span title="Char('f')" class="char">'f'</span> | <span title="Char('g')" class="char">'g'</span> | <span title="Char('h')" class="char">'h'</span> | <span title="Char('i')" class="char">'i'</span> | <span title="Char('j')" class="char">'j'</span> |
             <span title="Char('k')" class="char">'k'</span> | <span title="Char('l')" class="char">'l'</span> | <span title="Char('m')" class="char">'m'</span> | <span title="Char('n')" class="char">'n'</span> | <span title="Char('o')" class="char">'o'</span> |
             <span title="Char('p')" class="char">'p'</span> | <span title="Char('q')" class="char">'q'</span> | <span title="Char('r')" class="char">'r'</span> | <span title="Char('s')" class="char">'s'</span> | <span title="Char('t')" class="char">'t'</span> |
             <span title="Char('u')" class="char">'u'</span> | <span title="Char('v')" class="char">'v'</span> | <span title="Char('w')" class="char">'w'</span> | <span title="Char('x')" class="char">'x'</span> | <span title="Char('y')" class="char">'y'</span> |  // scala-mode: need to understand multi-line case patterns
             <span title="Char('z')" class="char">'z'</span> =&gt;
          <a href="#122220" title="(c: Char)Unit">putChar</a>(<a href="../../util/CharArrayReader.scala.html#122187" title="=&gt; Char">ch</a>)
          <a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>()
          <a href="#122245" title="()Unit">getIdentRest</a>()  // scala-mode: wrong indent for multi-line case blocks
        <span title="Unit" class="keyword">case</span> <span title="Char('&lt;')" class="char">'&lt;'</span> =&gt; // is XMLSTART?
          <span class="keyword">val</span> <a title="Char" id="525243">last</a> = <span title="Char" class="keyword">if</span> (<a href="../../util/CharArrayReader.scala.html#122190" title="(x$1: Int)Boolean">charOffset</a> &gt;= <span title="Int(2)" class="int">2</span>) <a href="../../util/CharArrayReader.scala.html#122184" title="(i: Int)Char">buf</a>(<a href="../../util/CharArrayReader.scala.html#122190" title="(x$1: Int)Int">charOffset</a> - <span title="Int(2)" class="int">2</span>) <span class="keyword">else</span> <span title="Char(' ')" class="char">' '</span>
          <a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>()
          <a href="#525243" title="Char">last</a> <span title="Unit" class="keyword">match</span> {
            <span title="Unit" class="keyword">case</span> <span title="Char(' ')" class="char">' '</span>|<span title="Char('\011')" class="char">'\t'</span>|<span title="Char('\012')" class="char">'\n'</span>|<span title="Char('{')" class="char">'{'</span>|<span title="Char('(')" class="char">'('</span>|<span title="Char('&gt;')" class="char">'&gt;'</span> <span class="keyword">if</span> xml.<a title="object scala.xml.Parsing" id="40964">Parsing</a>.<a title="(ch: Char)Boolean" id="525288">isNameStart</a><span title="(x$1: Boolean)Boolean">(</span><a href="../../util/CharArrayReader.scala.html#122187" title="=&gt; Char">ch</a>) <span title="(x$1: Boolean)Boolean">||</span> <a href="../../util/CharArrayReader.scala.html#122187" title="(x$1: Char)Boolean">ch</a> == <span title="Char('!')" class="char">'!'</span> || <a href="../../util/CharArrayReader.scala.html#122187" title="(x$1: Char)Boolean">ch</a> == <span title="Char('?')" class="char">'?'</span> =&gt;
              <a href="#122270" title="(x$1: Int)Unit">token</a> = <span title="Int(96)">XMLSTART</span>
            <span title="Unit" class="keyword">case</span> _ =&gt;
              // Console.println(&quot;found '&lt;', but last is '&quot;+in.last+&quot;'&quot;); // DEBUG
              <a href="#122220" title="(c: Char)Unit">putChar</a>(<span title="Char('&lt;')" class="char">'&lt;'</span>)
              <a href="#122246" title="()Unit">getOperatorRest</a>()
          }
        <span title="Unit" class="keyword">case</span> <span title="Char('~')" class="char">'~'</span> | <span title="Char('!')" class="char">'!'</span> | <span title="Char('@')" class="char">'@'</span> | <span title="Char('#')" class="char">'#'</span> | <span title="Char('%')" class="char">'%'</span> |
             <span title="Char('^')" class="char">'^'</span> | <span title="Char('*')" class="char">'*'</span> | <span title="Char('+')" class="char">'+'</span> | <span title="Char('-')" class="char">'-'</span> | /*'&lt;' | */
             <span title="Char('&gt;')" class="char">'&gt;'</span> | <span title="Char('?')" class="char">'?'</span> | <span title="Char(':')" class="char">':'</span> | <span title="Char('=')" class="char">'='</span> | <span title="Char('&amp;')" class="char">'&amp;'</span> | 
             <span title="Char('|')" class="char">'|'</span> | <span title="Char('\')" class="char">'\\'</span> =&gt;
          <a href="#122220" title="(c: Char)Unit">putChar</a>(<a href="../../util/CharArrayReader.scala.html#122187" title="=&gt; Char">ch</a>)
          <a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>()
          <a href="#122246" title="()Unit">getOperatorRest</a>() 
        <span title="Unit" class="keyword">case</span> <span title="Char('/')" class="char">'/'</span> =&gt;
          <a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>()
          <span title="Unit" class="keyword">if</span> (<a href="#122242" title="()Boolean">skipComment</a>()) {
            <a href="#122241" title="()Unit">fetchToken</a>()
          } <span class="keyword">else</span> {
            <a href="#122220" title="(c: Char)Unit">putChar</a>(<span title="Char('/')" class="char">'/'</span>)
            <a href="#122246" title="()Unit">getOperatorRest</a>()
          }
        <span title="Unit" class="keyword">case</span> <span title="Char('0')" class="char">'0'</span> =&gt;
          <a href="#122220" title="(c: Char)Unit">putChar</a>(<a href="../../util/CharArrayReader.scala.html#122187" title="=&gt; Char">ch</a>)
          <a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>()
          <span title="Unit" class="keyword">if</span> (<a href="../../util/CharArrayReader.scala.html#122187" title="(x$1: Char)Boolean">ch</a> <span title="(x$1: Boolean)Boolean">==</span> <span title="Char('x')" class="char">'x'</span> || <a href="../../util/CharArrayReader.scala.html#122187" title="(x$1: Char)Boolean">ch</a> == <span title="Char('X')" class="char">'X'</span>) {
            <a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>()
            <a href="#122285" title="(x$1: Int)Unit">base</a> = <span title="Int(16)" class="int">16</span>
          } <span class="keyword">else</span> {
            <a href="#122285" title="(x$1: Int)Unit">base</a> = <span title="Int(8)" class="int">8</span>
          }
          <a href="#122258" title="()Unit">getNumber</a>()
        <span title="Unit" class="keyword">case</span> <span title="Char('1')" class="char">'1'</span> | <span title="Char('2')" class="char">'2'</span> | <span title="Char('3')" class="char">'3'</span> | <span title="Char('4')" class="char">'4'</span> | <span title="Char('5')" class="char">'5'</span> | <span title="Char('6')" class="char">'6'</span> | <span title="Char('7')" class="char">'7'</span> | <span title="Char('8')" class="char">'8'</span> | <span title="Char('9')" class="char">'9'</span> =&gt;
          <a href="#122285" title="(x$1: Int)Unit">base</a> = <span title="Int(10)" class="int">10</span>
          <a href="#122258" title="()Unit">getNumber</a>()
        <span title="Unit" class="keyword">case</span> <span title="Char('`')" class="char">'`'</span> =&gt; 
          <a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>()
          <span title="Unit" class="keyword">if</span> (<a href="#122248" title="(delimiter: Char)Boolean">getStringLit</a>(<span title="Char('`')" class="char">'`'</span>)) { 
            <a href="#122221" title="()Unit">finishNamed</a>(); 
            <span title="Unit" class="keyword">if</span> (<a href="#122279" title="=&gt; Scanners.this.global.Name">name</a>.<a href="../../symtab/Names.scala.html#28383" title="(x$1: Int)Boolean">length</a> == <span title="Int(0)" class="int">0</span>) <a href="#122261" title="(msg: String)Unit">syntaxError</a>(<span title="java.lang.String(&quot;empty quoted identifier&quot;)" class="string">&quot;empty quoted identifier&quot;</span>)
            <a href="#122270" title="(x$1: Int)Unit">token</a> = <span title="Int(11)">BACKQUOTED_IDENT</span> 
          }
          <span class="keyword">else</span> <a href="#122261" title="(msg: String)Unit">syntaxError</a>(<span title="java.lang.String(&quot;unclosed quoted identifier&quot;)" class="string">&quot;unclosed quoted identifier&quot;</span>)
        <span title="Unit" class="keyword">case</span> <span title="Char('&quot;')" class="char">'\&quot;'</span> =&gt; 
          <a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>()
          <span title="Unit" class="keyword">if</span> (<a href="../../util/CharArrayReader.scala.html#122187" title="(x$1: Char)Boolean">ch</a> == <span title="Char('&quot;')" class="char">'\&quot;'</span>) {
            <a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>()
            <span title="Unit" class="keyword">if</span> (<a href="../../util/CharArrayReader.scala.html#122187" title="(x$1: Char)Boolean">ch</a> == <span title="Char('&quot;')" class="char">'\&quot;'</span>) {
              <a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>()
              <span class="keyword">val</span> <a title="Int" id="525425">saved</a> = <a href="../../util/CharArrayReader.scala.html#122193" title="=&gt; Int">lineStartOffset</a>
              <a href="#122249" title="()Unit">getMultiLineStringLit</a>()
              <span title="Unit" class="keyword">if</span> (<a href="../../util/CharArrayReader.scala.html#122193" title="(x$1: Int)Boolean">lineStartOffset</a> != <a href="#525425" title="Int">saved</a>) // ignore linestarts within a multi-line string 
                <a href="../../util/CharArrayReader.scala.html#122197" title="(x$1: Int)Unit">lastLineStartOffset</a> = <a href="#525425" title="Int">saved</a>
            } <span class="keyword">else</span> {
              <a href="#122270" title="(x$1: Int)Unit">token</a> = <span title="Int(6)">STRINGLIT</span>
              <a href="#122282" title="(x$1: String)Unit">strVal</a> = <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>
            }
          } <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<a href="#122248" title="(delimiter: Char)Boolean">getStringLit</a>(<span title="Char('&quot;')" class="char">'\&quot;'</span>)) { 
            <a href="#122222" title="()Unit">setStrVal</a>()
            <a href="#122270" title="(x$1: Int)Unit">token</a> = <span title="Int(6)">STRINGLIT</span> 
          } <span class="keyword">else</span> {
            <a href="#122261" title="(msg: String)Unit">syntaxError</a>(<span title="java.lang.String(&quot;unclosed string literal&quot;)" class="string">&quot;unclosed string literal&quot;</span>)
          }
        <span title="Unit" class="keyword">case</span> <span title="Char(''')" class="char">'\''</span> =&gt;
          <a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>()
          <span title="Unit" class="keyword">if</span> (<a href="#39910" title="(c: Char)Boolean">isIdentifierStart</a>(<a href="../../util/CharArrayReader.scala.html#122187" title="=&gt; Char">ch</a>))
            <a href="#122259" title="(op: () =&gt; Unit)Unit">charLitOr</a>(<a href="#122245" title="()Unit">getIdentRest</a>)
          <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<a href="#39912" title="(c: Char)Boolean">isSpecial</a>(<a href="../../util/CharArrayReader.scala.html#122187" title="=&gt; Char">ch</a>))
            <a href="#122259" title="(op: () =&gt; Unit)Unit">charLitOr</a>(<a href="#122246" title="()Unit">getOperatorRest</a>)
          <span class="keyword">else</span> {
            <a href="#122250" title="()Unit">getLitChar</a>()
            <span title="Unit" class="keyword">if</span> (<a href="../../util/CharArrayReader.scala.html#122187" title="(x$1: Char)Boolean">ch</a> == <span title="Char(''')" class="char">'\''</span>) {
              <a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>()
              <a href="#122270" title="(x$1: Int)Unit">token</a> = <span title="Int(1)">CHARLIT</span>
              <a href="#122222" title="()Unit">setStrVal</a>()
            } <span class="keyword">else</span> {
              <a href="#122261" title="(msg: String)Unit">syntaxError</a>(<span title="java.lang.String(&quot;unclosed character literal&quot;)" class="string">&quot;unclosed character literal&quot;</span>)
            }
          }
        <span title="Unit" class="keyword">case</span> <span title="Char('.')" class="char">'.'</span> =&gt;
          <a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>()
          <span title="Unit" class="keyword">if</span> (<span title="(x$1: Char)Boolean" class="char">'0'</span> <span title="(x$1: Boolean)Boolean">&lt;=</span> <a href="../../util/CharArrayReader.scala.html#122187" title="=&gt; Char">ch</a> &amp;&amp; <a href="../../util/CharArrayReader.scala.html#122187" title="(x$1: Char)Boolean">ch</a> &lt;= <span title="Char('9')" class="char">'9'</span>) {
            <a href="#122220" title="(c: Char)Unit">putChar</a>(<span title="Char('.')" class="char">'.'</span>); <a href="#122251" title="()Unit">getFraction</a>()
          } <span class="keyword">else</span> {
            <a href="#122270" title="(x$1: Int)Unit">token</a> = <span title="Int(72)">DOT</span>
          }
        <span title="Unit" class="keyword">case</span> <span title="Char(';')" class="char">';'</span> =&gt;
          <a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>(); <a href="#122270" title="(x$1: Int)Unit">token</a> = <span title="Int(71)">SEMI</span>
        <span title="Unit" class="keyword">case</span> <span title="Char(',')" class="char">','</span> =&gt;
          <a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>(); <a href="#122270" title="(x$1: Int)Unit">token</a> = <span title="Int(70)">COMMA</span>
        <span title="Unit" class="keyword">case</span> <span title="Char('(')" class="char">'('</span> =&gt;
          <a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>(); <a href="#122270" title="(x$1: Int)Unit">token</a> = <span title="Int(90)">LPAREN</span>
        <span title="Unit" class="keyword">case</span> <span title="Char('{')" class="char">'{'</span> =&gt;
          <a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>(); <a href="#122270" title="(x$1: Int)Unit">token</a> = <span title="Int(94)">LBRACE</span>
        <span title="Unit" class="keyword">case</span> <span title="Char(')')" class="char">')'</span> =&gt;
          <a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>(); <a href="#122270" title="(x$1: Int)Unit">token</a> = <span title="Int(91)">RPAREN</span>
        <span title="Unit" class="keyword">case</span> <span title="Char('}')" class="char">'}'</span> =&gt;
          <a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>(); <a href="#122270" title="(x$1: Int)Unit">token</a> = <span title="Int(95)">RBRACE</span>
        <span title="Unit" class="keyword">case</span> <span title="Char('[')" class="char">'['</span> =&gt;
          <a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>(); <a href="#122270" title="(x$1: Int)Unit">token</a> = <span title="Int(92)">LBRACKET</span>
        <span title="Unit" class="keyword">case</span> <span title="Char(']')" class="char">']'</span> =&gt;
          <a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>(); <a href="#122270" title="(x$1: Int)Unit">token</a> = <span title="Int(93)">RBRACKET</span>
        <span title="Unit" class="keyword">case</span> <span title="Char('\032')">SU</span> =&gt;
          <span title="Unit" class="keyword">if</span> (<a href="../../util/CharArrayReader.scala.html#122190" title="(x$1: Int)Boolean">charOffset</a> &gt;= <a href="../../util/CharArrayReader.scala.html#122184" title="=&gt; Array[Char]">buf</a>.<span title="=&gt; Int">length</span>) <a href="#122270" title="(x$1: Int)Unit">token</a> = <span title="Int(0)">EOF</span>
          <span class="keyword">else</span> {
            <a href="#122261" title="(msg: String)Unit">syntaxError</a>(<span title="java.lang.String(&quot;illegal character&quot;)" class="string">&quot;illegal character&quot;</span>)
            <a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>()
          }
        <span title="Unit" class="keyword">case</span> _ =&gt;
          <span title="Unit" class="keyword">if</span> (<a href="../../util/CharArrayReader.scala.html#122187" title="(x$1: Char)Boolean">ch</a> == <span title="Char('⇒')" class="char">'\u21D2'</span>) {
            <a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>(); <a href="#122270" title="(x$1: Int)Unit">token</a> = <span title="Int(77)">ARROW</span>
          } <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<a href="../../util/CharArrayReader.scala.html#122187" title="(x$1: Char)Boolean">ch</a> == <span title="Char('←')" class="char">'\u2190'</span>) {
            <a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>(); <a href="#122270" title="(x$1: Int)Unit">token</a> = <span title="Int(76)">LARROW</span>
          } <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<span title="object java.lang.Character">Character</span>.<span title="(x$1: Char)Boolean">isUnicodeIdentifierStart</span>(<a href="../../util/CharArrayReader.scala.html#122187" title="=&gt; Char">ch</a>)) {
            <a href="#122220" title="(c: Char)Unit">putChar</a>(<a href="../../util/CharArrayReader.scala.html#122187" title="=&gt; Char">ch</a>)
            <a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>()
            <a href="#122245" title="()Unit">getIdentRest</a>()
          } <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<a href="#39912" title="(c: Char)Boolean">isSpecial</a>(<a href="../../util/CharArrayReader.scala.html#122187" title="=&gt; Char">ch</a>)) {
            <a href="#122220" title="(c: Char)Unit">putChar</a>(<a href="../../util/CharArrayReader.scala.html#122187" title="=&gt; Char">ch</a>)
            <a href="#122246" title="()Unit">getOperatorRest</a>()
          } <span class="keyword">else</span> {
            <a href="#122261" title="(msg: String)Unit">syntaxError</a>(<span title="java.lang.String(&quot;illegal character&quot;)" class="string">&quot;illegal character&quot;</span>)
            <a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>()
          }
      }
    }

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="()Boolean" id="122242">skipComment</a>(): <span title="Boolean">Boolean</span> = {
      <span title="Boolean" class="keyword">if</span> (<a href="../../util/CharArrayReader.scala.html#122187" title="(x$1: Char)Boolean">ch</a> == <span title="Char('/')" class="char">'/'</span>) {
        <a href="#525829" title="Unit" class="keyword">do</a> {
          <a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>()
        } <span class="keyword">while</span> (<span title="(x$1: Boolean)Boolean">(</span><a href="../../util/CharArrayReader.scala.html#122187" title="(x$1: Char)Boolean">ch</a> != <span title="Char('\015')">CR</span>) <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> (<a href="../../util/CharArrayReader.scala.html#122187" title="(x$1: Char)Boolean">ch</a> != <span title="Char('\012')">LF</span>) &amp;&amp; (<a href="../../util/CharArrayReader.scala.html#122187" title="(x$1: Char)Boolean">ch</a> != <span title="Char('\032')">SU</span>))
        <span title="Boolean(true)" class="keyword">true</span>
      } <span class="keyword">else</span> <span title="Boolean" class="keyword">if</span> (<a href="../../util/CharArrayReader.scala.html#122187" title="(x$1: Char)Boolean">ch</a> == <span title="Char('*')" class="char">'*'</span>) {
        <a href="#122225" title="(x$1: StringBuilder)Unit">docBuffer</a> = <span title="Null(null)" class="keyword">null</span>
        <span class="keyword">var</span> <a title="Int" id="525866">openComments</a> = <span title="Int(1)" class="int">1</span>
        <a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>()
        <span title="Unit" class="keyword">if</span> (<a href="../../util/CharArrayReader.scala.html#122187" title="(x$1: Char)Boolean">ch</a> <span title="(x$1: Boolean)Boolean">==</span> <span title="Char('*')" class="char">'*'</span> &amp;&amp; <a href="#122223" title="=&gt; Boolean">buildDocs</a>)
          <a href="#122225" title="(x$1: StringBuilder)Unit">docBuffer</a> = <a title="(str: String)StringBuilder" id="57661" class="keyword">new</a> <span title="StringBuilder">StringBuilder</span>(<span title="java.lang.String(&quot;/**&quot;)" class="string">&quot;/**&quot;</span>)
        <span title="Unit" class="keyword">while</span> (<a href="#525866" title="(x$1: Int)Boolean">openComments</a> &gt; <span title="Int(0)" class="int">0</span>) <a href="#525867" title="()Unit">{</a>
          <a href="#525895" title="Unit" class="keyword">do</a> {
            <a href="#525896" title="Unit" class="keyword">do</a> {
              <span title="Unit" class="keyword">if</span> (<a href="../../util/CharArrayReader.scala.html#122187" title="(x$1: Char)Boolean">ch</a> == <span title="Char('/')" class="char">'/'</span>) {
                <a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>(); <a href="#122228" title="(c: Char)Unit">putDocChar</a>(<a href="../../util/CharArrayReader.scala.html#122187" title="=&gt; Char">ch</a>)
                <span title="Unit" class="keyword">if</span> (<a href="../../util/CharArrayReader.scala.html#122187" title="(x$1: Char)Boolean">ch</a> == <span title="Char('*')" class="char">'*'</span>) {
                  <a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>(); <a href="#122228" title="(c: Char)Unit">putDocChar</a>(<a href="../../util/CharArrayReader.scala.html#122187" title="=&gt; Char">ch</a>)
                  <a href="#525866" title="Int">openComments</a> += <span title="Int(1)" class="int">1</span>
                }
              }
              <span title="Unit" class="keyword">if</span> (<a href="../../util/CharArrayReader.scala.html#122187" title="(x$1: Char)Boolean">ch</a> <span title="(x$1: Boolean)Boolean">!=</span> <span title="Char('*')" class="char">'*'</span> &amp;&amp; <a href="../../util/CharArrayReader.scala.html#122187" title="(x$1: Char)Boolean">ch</a> != <span title="Char('\032')">SU</span>) {
                <a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>(); <a href="#122228" title="(c: Char)Unit">putDocChar</a>(<a href="../../util/CharArrayReader.scala.html#122187" title="=&gt; Char">ch</a>)
              }
            } <span class="keyword">while</span> (<a href="../../util/CharArrayReader.scala.html#122187" title="(x$1: Char)Boolean">ch</a> <span title="(x$1: Boolean)Boolean">!=</span> <span title="Char('*')" class="char">'*'</span> &amp;&amp; <a href="../../util/CharArrayReader.scala.html#122187" title="(x$1: Char)Boolean">ch</a> != <span title="Char('\032')">SU</span>)
            <span title="Unit" class="keyword">while</span> (<a href="../../util/CharArrayReader.scala.html#122187" title="(x$1: Char)Boolean">ch</a> == <span title="Char('*')" class="char">'*'</span>) <a href="#525991" title="()Unit">{</a>
              <a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>(); <a href="#122228" title="(c: Char)Unit">putDocChar</a>(<a href="../../util/CharArrayReader.scala.html#122187" title="=&gt; Char">ch</a>)
            }
          } <span class="keyword">while</span> (<a href="../../util/CharArrayReader.scala.html#122187" title="(x$1: Char)Boolean">ch</a> <span title="(x$1: Boolean)Boolean">!=</span> <span title="Char('/')" class="char">'/'</span> &amp;&amp; <a href="../../util/CharArrayReader.scala.html#122187" title="(x$1: Char)Boolean">ch</a> != <span title="Char('\032')">SU</span>)
          <span title="Unit" class="keyword">if</span> (<a href="../../util/CharArrayReader.scala.html#122187" title="(x$1: Char)Boolean">ch</a> == <span title="Char('/')" class="char">'/'</span>) <a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>()
          <span class="keyword">else</span> <a href="#122262" title="(msg: String)Unit">incompleteInputError</a>(<span title="java.lang.String(&quot;unclosed comment&quot;)" class="string">&quot;unclosed comment&quot;</span>)
          <a href="#525866" title="Int">openComments</a> -= <span title="Int(1)" class="int">1</span>
        }
        <span title="Boolean(true)" class="keyword">true</span>
      } <span class="keyword">else</span> {
        <span title="Boolean(false)" class="keyword">false</span>
      }
    }

    /** Can token start a statement? */
    <span class="keyword">def</span> <a title="(token: Int)Boolean" id="122243">inFirstOfStat</a>(<a title="Int" id="524921">token</a>: <span title="Int">Int</span>) = <a href="#524921" title="Int">token</a> <span title="Boolean" class="keyword">match</span> {
      <span title="Boolean(false)" class="keyword">case</span> <span title="Int(0)">EOF</span> | <span title="Int(54)">CATCH</span> | <span title="Int(22)">ELSE</span> | <span title="Int(41)">EXTENDS</span> | <span title="Int(55)">FINALLY</span> | <span title="Int(59)">FORSOME</span> | <span title="Int(58)">MATCH</span> | <span title="Int(26)">WITH</span> | <span title="Int(48)">YIELD</span> |
           <span title="Int(70)">COMMA</span> | <span title="Int(71)">SEMI</span> | <span title="Int(78)">NEWLINE</span> | <span title="Int(79)">NEWLINES</span> | <span title="Int(72)">DOT</span> | <span title="Int(74)">COLON</span> | <span title="Int(75)">EQUALS</span> | <span title="Int(77)">ARROW</span> | <span title="Int(76)">LARROW</span> | 
           <span title="Int(80)">SUBTYPE</span> | <span title="Int(84)">VIEWBOUND</span> | <span title="Int(81)">SUPERTYPE</span> | <span title="Int(82)">HASH</span> | <span title="Int(91)">RPAREN</span> | <span title="Int(93)">RBRACKET</span> | <span title="Int(95)">RBRACE</span> | <span title="Int(92)">LBRACKET</span> =&gt;
        <span title="Boolean(false)" class="keyword">false</span>
      <span title="Boolean(true)" class="keyword">case</span> _ =&gt;
        <span title="Boolean(true)" class="keyword">true</span>
    }

    /** Can token end a statement? */
    <span class="keyword">def</span> <a title="(token: Int)Boolean" id="122244">inLastOfStat</a>(<a title="Int" id="524914">token</a>: <span title="Int">Int</span>) = <a href="#524914" title="Int">token</a> <span title="Boolean" class="keyword">match</span> {
      <span title="Boolean(true)" class="keyword">case</span> <span title="Int(1)">CHARLIT</span> | <span title="Int(2)">INTLIT</span> | <span title="Int(3)">LONGLIT</span> | <span title="Int(4)">FLOATLIT</span> | <span title="Int(5)">DOUBLELIT</span> | <span title="Int(6)">STRINGLIT</span> | <span title="Int(7)">SYMBOLLIT</span> |
           <span title="Int(10)">IDENTIFIER</span> | <span title="Int(11)">BACKQUOTED_IDENT</span> | <span title="Int(23)">THIS</span> | <span title="Int(24)">NULL</span> | <span title="Int(42)">TRUE</span> | <span title="Int(43)">FALSE</span> | <span title="Int(57)">RETURN</span> | <span title="Int(73)">USCORE</span> | 
           <span title="Int(40)">TYPE</span> | <span title="Int(96)">XMLSTART</span> | <span title="Int(91)">RPAREN</span> | <span title="Int(93)">RBRACKET</span> | <span title="Int(95)">RBRACE</span> =&gt;
        <span title="Boolean(true)" class="keyword">true</span>
      <span title="Boolean(false)" class="keyword">case</span> _ =&gt;
        <span title="Boolean(false)" class="keyword">false</span>
    }

// Identifiers ---------------------------------------------------------------

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="()Unit" id="122245">getIdentRest</a>(): <span title="Unit">Unit</span> = (<a href="../../util/CharArrayReader.scala.html#122187" title="=&gt; Char">ch</a>: @<span title="Char @scala.annotation.switch">switch</span>) <span title="Unit" class="keyword">match</span> {
      <span title="Unit" class="keyword">case</span> <span title="Char('A')" class="char">'A'</span> | <span title="Char('B')" class="char">'B'</span> | <span title="Char('C')" class="char">'C'</span> | <span title="Char('D')" class="char">'D'</span> | <span title="Char('E')" class="char">'E'</span> |
           <span title="Char('F')" class="char">'F'</span> | <span title="Char('G')" class="char">'G'</span> | <span title="Char('H')" class="char">'H'</span> | <span title="Char('I')" class="char">'I'</span> | <span title="Char('J')" class="char">'J'</span> |
           <span title="Char('K')" class="char">'K'</span> | <span title="Char('L')" class="char">'L'</span> | <span title="Char('M')" class="char">'M'</span> | <span title="Char('N')" class="char">'N'</span> | <span title="Char('O')" class="char">'O'</span> |
           <span title="Char('P')" class="char">'P'</span> | <span title="Char('Q')" class="char">'Q'</span> | <span title="Char('R')" class="char">'R'</span> | <span title="Char('S')" class="char">'S'</span> | <span title="Char('T')" class="char">'T'</span> |
           <span title="Char('U')" class="char">'U'</span> | <span title="Char('V')" class="char">'V'</span> | <span title="Char('W')" class="char">'W'</span> | <span title="Char('X')" class="char">'X'</span> | <span title="Char('Y')" class="char">'Y'</span> |
           <span title="Char('Z')" class="char">'Z'</span> | <span title="Char('$')" class="char">'$'</span> |
           <span title="Char('a')" class="char">'a'</span> | <span title="Char('b')" class="char">'b'</span> | <span title="Char('c')" class="char">'c'</span> | <span title="Char('d')" class="char">'d'</span> | <span title="Char('e')" class="char">'e'</span> |
           <span title="Char('f')" class="char">'f'</span> | <span title="Char('g')" class="char">'g'</span> | <span title="Char('h')" class="char">'h'</span> | <span title="Char('i')" class="char">'i'</span> | <span title="Char('j')" class="char">'j'</span> |
           <span title="Char('k')" class="char">'k'</span> | <span title="Char('l')" class="char">'l'</span> | <span title="Char('m')" class="char">'m'</span> | <span title="Char('n')" class="char">'n'</span> | <span title="Char('o')" class="char">'o'</span> |
           <span title="Char('p')" class="char">'p'</span> | <span title="Char('q')" class="char">'q'</span> | <span title="Char('r')" class="char">'r'</span> | <span title="Char('s')" class="char">'s'</span> | <span title="Char('t')" class="char">'t'</span> |
           <span title="Char('u')" class="char">'u'</span> | <span title="Char('v')" class="char">'v'</span> | <span title="Char('w')" class="char">'w'</span> | <span title="Char('x')" class="char">'x'</span> | <span title="Char('y')" class="char">'y'</span> |
           <span title="Char('z')" class="char">'z'</span> |
           <span title="Char('0')" class="char">'0'</span> | <span title="Char('1')" class="char">'1'</span> | <span title="Char('2')" class="char">'2'</span> | <span title="Char('3')" class="char">'3'</span> | <span title="Char('4')" class="char">'4'</span> |
           <span title="Char('5')" class="char">'5'</span> | <span title="Char('6')" class="char">'6'</span> | <span title="Char('7')" class="char">'7'</span> | <span title="Char('8')" class="char">'8'</span> | <span title="Char('9')" class="char">'9'</span> =&gt;
        <a href="#122220" title="(c: Char)Unit">putChar</a>(<a href="../../util/CharArrayReader.scala.html#122187" title="=&gt; Char">ch</a>)
        <a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>()
        <a href="#122245" title="()Unit">getIdentRest</a>()
      <span title="Unit" class="keyword">case</span> <span title="Char('_')" class="char">'_'</span> =&gt;
        <a href="#122220" title="(c: Char)Unit">putChar</a>(<a href="../../util/CharArrayReader.scala.html#122187" title="=&gt; Char">ch</a>)
        <a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>()
        <a href="#122247" title="()Unit">getIdentOrOperatorRest</a>()
      <span title="Unit" class="keyword">case</span> <span title="Char('\032')">SU</span> =&gt; // strangely enough, Character.isUnicodeIdentifierPart(SU) returns true!
        <a href="#122221" title="()Unit">finishNamed</a>()
      <span title="Unit" class="keyword">case</span> _ =&gt;
        <span title="Unit" class="keyword">if</span> (<span title="object java.lang.Character">Character</span>.<span title="(x$1: Char)Boolean">isUnicodeIdentifierPart</span>(<a href="../../util/CharArrayReader.scala.html#122187" title="=&gt; Char">ch</a>)) {
          <a href="#122220" title="(c: Char)Unit">putChar</a>(<a href="../../util/CharArrayReader.scala.html#122187" title="=&gt; Char">ch</a>)
          <a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>()
          <a href="#122245" title="()Unit">getIdentRest</a>()
        } <span class="keyword">else</span> {
          <a href="#122221" title="()Unit">finishNamed</a>()
        }
    }

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="()Unit" id="122246">getOperatorRest</a>(): <span title="Unit">Unit</span> = (<a href="../../util/CharArrayReader.scala.html#122187" title="=&gt; Char">ch</a>: @<span title="Char @scala.annotation.switch">switch</span>) <span title="Unit" class="keyword">match</span> {
      <span title="Unit" class="keyword">case</span> <span title="Char('~')" class="char">'~'</span> | <span title="Char('!')" class="char">'!'</span> | <span title="Char('@')" class="char">'@'</span> | <span title="Char('#')" class="char">'#'</span> | <span title="Char('%')" class="char">'%'</span> | 
           <span title="Char('^')" class="char">'^'</span> | <span title="Char('*')" class="char">'*'</span> | <span title="Char('+')" class="char">'+'</span> | <span title="Char('-')" class="char">'-'</span> | <span title="Char('&lt;')" class="char">'&lt;'</span> |
           <span title="Char('&gt;')" class="char">'&gt;'</span> | <span title="Char('?')" class="char">'?'</span> | <span title="Char(':')" class="char">':'</span> | <span title="Char('=')" class="char">'='</span> | <span title="Char('&amp;')" class="char">'&amp;'</span> | 
           <span title="Char('|')" class="char">'|'</span> | <span title="Char('\')" class="char">'\\'</span> =&gt;
        <a href="#122220" title="(c: Char)Unit">putChar</a>(<a href="../../util/CharArrayReader.scala.html#122187" title="=&gt; Char">ch</a>); <a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>(); <a href="#122246" title="()Unit">getOperatorRest</a>()
      <span title="Unit" class="keyword">case</span> <span title="Char('/')" class="char">'/'</span> =&gt;
        <a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>()
        <span title="Unit" class="keyword">if</span> (<a href="#122242" title="()Boolean">skipComment</a>()) <a href="#122221" title="()Unit">finishNamed</a>()
        <span class="keyword">else</span> { <a href="#122220" title="(c: Char)Unit">putChar</a>(<span title="Char('/')" class="char">'/'</span>); <a href="#122246" title="()Unit">getOperatorRest</a>() }
      <span title="Unit" class="keyword">case</span> _ =&gt;
        <span title="Unit" class="keyword">if</span> (<a href="#39912" title="(c: Char)Boolean">isSpecial</a>(<a href="../../util/CharArrayReader.scala.html#122187" title="=&gt; Char">ch</a>)) { <a href="#122220" title="(c: Char)Unit">putChar</a>(<a href="../../util/CharArrayReader.scala.html#122187" title="=&gt; Char">ch</a>); <a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>(); <a href="#122246" title="()Unit">getOperatorRest</a>() }
        <span class="keyword">else</span> <a href="#122221" title="()Unit">finishNamed</a>()
    }

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="()Unit" id="122247">getIdentOrOperatorRest</a>() {
      <span title="Unit" class="keyword">if</span> (<a href="#39911" title="(c: Char)Boolean">isIdentifierPart</a>(<a href="../../util/CharArrayReader.scala.html#122187" title="=&gt; Char">ch</a>)) 
        <a href="#122245" title="()Unit">getIdentRest</a>()
      <span class="keyword">else</span> <a href="../../util/CharArrayReader.scala.html#122187" title="=&gt; Char">ch</a> <span title="Unit" class="keyword">match</span> {
        <span title="Unit" class="keyword">case</span> <span title="Char('~')" class="char">'~'</span> | <span title="Char('!')" class="char">'!'</span> | <span title="Char('@')" class="char">'@'</span> | <span title="Char('#')" class="char">'#'</span> | <span title="Char('%')" class="char">'%'</span> |
             <span title="Char('^')" class="char">'^'</span> | <span title="Char('*')" class="char">'*'</span> | <span title="Char('+')" class="char">'+'</span> | <span title="Char('-')" class="char">'-'</span> | <span title="Char('&lt;')" class="char">'&lt;'</span> |
             <span title="Char('&gt;')" class="char">'&gt;'</span> | <span title="Char('?')" class="char">'?'</span> | <span title="Char(':')" class="char">':'</span> | <span title="Char('=')" class="char">'='</span> | <span title="Char('&amp;')" class="char">'&amp;'</span> | 
             <span title="Char('|')" class="char">'|'</span> | <span title="Char('\')" class="char">'\\'</span> | <span title="Char('/')" class="char">'/'</span> =&gt;
          <a href="#122246" title="()Unit">getOperatorRest</a>()
        <span title="Unit" class="keyword">case</span> _ =&gt;
          <span title="Unit" class="keyword">if</span> (<a href="#39912" title="(c: Char)Boolean">isSpecial</a>(<a href="../../util/CharArrayReader.scala.html#122187" title="=&gt; Char">ch</a>)) <a href="#122246" title="()Unit">getOperatorRest</a>()
          <span class="keyword">else</span> <a href="#122221" title="()Unit">finishNamed</a>()
      }
    }
 
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(delimiter: Char)Boolean" id="122248">getStringLit</a>(<a title="Char" id="525377">delimiter</a>: <span title="Char">Char</span>): <span title="Boolean">Boolean</span> = {
      <span title="Unit" class="keyword">while</span> (<a href="../../util/CharArrayReader.scala.html#122187" title="(x$1: Char)Boolean">ch</a> <span title="(x$1: Boolean)Boolean">!=</span> <a href="#525377" title="Char">delimiter</a> &amp;&amp; (<a href="../../util/CharArrayReader.scala.html#122202" title="(x$1: Boolean)Boolean">isUnicodeEscape</a> || <a href="../../util/CharArrayReader.scala.html#122187" title="(x$1: Char)Boolean">ch</a> <span title="(x$1: Boolean)Boolean">!=</span> <span title="Char('\015')">CR</span> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> <a href="../../util/CharArrayReader.scala.html#122187" title="(x$1: Char)Boolean">ch</a> != <span title="Char('\012')">LF</span> &amp;&amp; <a href="../../util/CharArrayReader.scala.html#122187" title="(x$1: Char)Boolean">ch</a> != <span title="Char('\032')">SU</span>)) {
        <a href="#122250" title="()Unit">getLitChar</a><a href="#526142" title="()Unit">(</a>)
      }
      <span title="Boolean" class="keyword">if</span> (<a href="../../util/CharArrayReader.scala.html#122187" title="(x$1: Char)Boolean">ch</a> == <a href="#525377" title="Char">delimiter</a>) { <a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>(); <span title="Boolean(true)" class="keyword">true</span> }
      <span class="keyword">else</span> <span title="Boolean(false)" class="keyword">false</span>
    }

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="()Unit" id="122249">getMultiLineStringLit</a>() {
      <span title="Unit" class="keyword">if</span> (<a href="../../util/CharArrayReader.scala.html#122187" title="(x$1: Char)Boolean">ch</a> == <span title="Char('&quot;')" class="char">'\&quot;'</span>) {
        <a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>()
        <span title="Unit" class="keyword">if</span> (<a href="../../util/CharArrayReader.scala.html#122187" title="(x$1: Char)Boolean">ch</a> == <span title="Char('&quot;')" class="char">'\&quot;'</span>) {
          <a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>()
          <span title="Unit" class="keyword">if</span> (<a href="../../util/CharArrayReader.scala.html#122187" title="(x$1: Char)Boolean">ch</a> == <span title="Char('&quot;')" class="char">'\&quot;'</span>) {
            <a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>()
            <a href="#122270" title="(x$1: Int)Unit">token</a> = <span title="Int(6)">STRINGLIT</span>
            <a href="#122222" title="()Unit">setStrVal</a>()
          } <span class="keyword">else</span> {
            <a href="#122220" title="(c: Char)Unit">putChar</a>(<span title="Char('&quot;')" class="char">'\&quot;'</span>)
            <a href="#122220" title="(c: Char)Unit">putChar</a>(<span title="Char('&quot;')" class="char">'\&quot;'</span>)
            <a href="#122249" title="()Unit">getMultiLineStringLit</a>()
          }
        } <span class="keyword">else</span> {
          <a href="#122220" title="(c: Char)Unit">putChar</a>(<span title="Char('&quot;')" class="char">'\&quot;'</span>)
          <a href="#122249" title="()Unit">getMultiLineStringLit</a>()
        }
      } <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<a href="../../util/CharArrayReader.scala.html#122187" title="(x$1: Char)Boolean">ch</a> == <span title="Char('\032')">SU</span>) {
        <a href="#122262" title="(msg: String)Unit">incompleteInputError</a>(<span title="java.lang.String(&quot;unclosed multi-line string literal&quot;)" class="string">&quot;unclosed multi-line string literal&quot;</span>)
      } <span class="keyword">else</span> {
        <a href="#122220" title="(c: Char)Unit">putChar</a>(<a href="../../util/CharArrayReader.scala.html#122187" title="=&gt; Char">ch</a>)
        <a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>()
        <a href="#122249" title="()Unit">getMultiLineStringLit</a>()
      }
    }

// Literals -----------------------------------------------------------------

    /** read next character in character or string literal:
    */
    <span class="keyword">protected</span> <span class="keyword">def</span> <a title="()Unit" id="122250">getLitChar</a>() =
      <span title="Unit" class="keyword">if</span> (<a href="../../util/CharArrayReader.scala.html#122187" title="(x$1: Char)Boolean">ch</a> == <span title="Char('\')" class="char">'\\'</span>) {
        <a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>()
        <span title="Unit" class="keyword">if</span> (<span title="(x$1: Char)Boolean" class="char">'0'</span> <span title="(x$1: Boolean)Boolean">&lt;=</span> <a href="../../util/CharArrayReader.scala.html#122187" title="=&gt; Char">ch</a> &amp;&amp; <a href="../../util/CharArrayReader.scala.html#122187" title="(x$1: Char)Boolean">ch</a> &lt;= <span title="Char('7')" class="char">'7'</span>) {
          <span class="keyword">val</span> <a title="Char" id="525523">leadch</a>: <span title="Char">Char</span> = <a href="../../util/CharArrayReader.scala.html#122187" title="=&gt; Char">ch</a>
          <span class="keyword">var</span> <a title="Int" id="525524">oct</a>: <span title="Int">Int</span> = <a href="../../util/CharArrayReader.scala.html#122206" title="(ch: Char,base: Int)Int">digit2int</a>(<a href="../../util/CharArrayReader.scala.html#122187" title="=&gt; Char">ch</a>, <span title="Int(8)" class="int">8</span>)
          <a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>()
          <span title="Unit" class="keyword">if</span> (<span title="(x$1: Char)Boolean" class="char">'0'</span> <span title="(x$1: Boolean)Boolean">&lt;=</span> <a href="../../util/CharArrayReader.scala.html#122187" title="=&gt; Char">ch</a> &amp;&amp; <a href="../../util/CharArrayReader.scala.html#122187" title="(x$1: Char)Boolean">ch</a> &lt;= <span title="Char('7')" class="char">'7'</span>) {
            <a href="#525524" title="Int">oct</a> = <a href="#525524" title="(x$1: Int)Int">oct</a> <span title="(x$1: Int)Int">*</span> <span title="Int(8)" class="int">8</span> + <a href="../../util/CharArrayReader.scala.html#122206" title="(ch: Char,base: Int)Int">digit2int</a>(<a href="../../util/CharArrayReader.scala.html#122187" title="=&gt; Char">ch</a>, <span title="Int(8)" class="int">8</span>)
            <a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>()
            <span title="Unit" class="keyword">if</span> (<a href="#525523" title="(x$1: Char)Boolean">leadch</a> <span title="(x$1: Boolean)Boolean">&lt;=</span> <span title="Char('3')" class="char">'3'</span> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> <span title="(x$1: Char)Boolean" class="char">'0'</span> &lt;= <a href="../../util/CharArrayReader.scala.html#122187" title="=&gt; Char">ch</a> &amp;&amp; <a href="../../util/CharArrayReader.scala.html#122187" title="(x$1: Char)Boolean">ch</a> &lt;= <span title="Char('7')" class="char">'7'</span>) {
              <a href="#525524" title="Int">oct</a> = <a href="#525524" title="(x$1: Int)Int">oct</a> <span title="(x$1: Int)Int">*</span> <span title="Int(8)" class="int">8</span> + <a href="../../util/CharArrayReader.scala.html#122206" title="(ch: Char,base: Int)Int">digit2int</a>(<a href="../../util/CharArrayReader.scala.html#122187" title="=&gt; Char">ch</a>, <span title="Int(8)" class="int">8</span>)
              <a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>()
            }
          }
          <a href="#122220" title="(c: Char)Unit">putChar</a>(<a href="#525524" title="Int">oct</a>.<a title="=&gt; Char" id="2867">toChar</a>)
        } <span class="keyword">else</span> {
          <a href="../../util/CharArrayReader.scala.html#122187" title="=&gt; Char">ch</a> <span title="Unit" class="keyword">match</span> {
            <span title="Unit" class="keyword">case</span> <span title="Char('b')" class="char">'b'</span>  =&gt; <a href="#122220" title="(c: Char)Unit">putChar</a>(<span title="Char('\010')" class="char">'\b'</span>)
            <span title="Unit" class="keyword">case</span> <span title="Char('t')" class="char">'t'</span>  =&gt; <a href="#122220" title="(c: Char)Unit">putChar</a>(<span title="Char('\011')" class="char">'\t'</span>)
            <span title="Unit" class="keyword">case</span> <span title="Char('n')" class="char">'n'</span>  =&gt; <a href="#122220" title="(c: Char)Unit">putChar</a>(<span title="Char('\012')" class="char">'\n'</span>)
            <span title="Unit" class="keyword">case</span> <span title="Char('f')" class="char">'f'</span>  =&gt; <a href="#122220" title="(c: Char)Unit">putChar</a>(<span title="Char('\014')" class="char">'\f'</span>)
            <span title="Unit" class="keyword">case</span> <span title="Char('r')" class="char">'r'</span>  =&gt; <a href="#122220" title="(c: Char)Unit">putChar</a>(<span title="Char('\015')" class="char">'\r'</span>)
            <span title="Unit" class="keyword">case</span> <span title="Char('&quot;')" class="char">'\&quot;'</span> =&gt; <a href="#122220" title="(c: Char)Unit">putChar</a>(<span title="Char('&quot;')" class="char">'\&quot;'</span>)
            <span title="Unit" class="keyword">case</span> <span title="Char(''')" class="char">'\''</span> =&gt; <a href="#122220" title="(c: Char)Unit">putChar</a>(<span title="Char(''')" class="char">'\''</span>)
            <span title="Unit" class="keyword">case</span> <span title="Char('\')" class="char">'\\'</span> =&gt; <a href="#122220" title="(c: Char)Unit">putChar</a>(<span title="Char('\')" class="char">'\\'</span>)
            <span title="Unit" class="keyword">case</span> _    =&gt;
              <a href="#122260" title="(off: Scanners.this.Offset,msg: String)Unit">syntaxError</a>(<a href="../../util/CharArrayReader.scala.html#122190" title="(x$1: Int)Int">charOffset</a> - <span title="Int(1)" class="int">1</span>, <span title="java.lang.String(&quot;invalid escape character&quot;)" class="string">&quot;invalid escape character&quot;</span>)
              <a href="#122220" title="(c: Char)Unit">putChar</a>(<a href="../../util/CharArrayReader.scala.html#122187" title="=&gt; Char">ch</a>)
          }
          <a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>()
        }
      } <span class="keyword">else</span>  {
        <a href="#122220" title="(c: Char)Unit">putChar</a>(<a href="../../util/CharArrayReader.scala.html#122187" title="=&gt; Char">ch</a>)
        <a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>()
      }

    /** read fractional part and exponent of floating point number
     *  if one is present.
     */
    <span class="keyword">protected</span> <span class="keyword">def</span> <a title="()Unit" id="122251">getFraction</a>() {
      <a href="#122270" title="(x$1: Int)Unit">token</a> = <span title="Int(5)">DOUBLELIT</span>
      <span title="Unit" class="keyword">while</span> (<span title="(x$1: Char)Boolean" class="char">'0'</span> <span title="(x$1: Boolean)Boolean">&lt;=</span> <a href="../../util/CharArrayReader.scala.html#122187" title="=&gt; Char">ch</a> &amp;&amp; <a href="../../util/CharArrayReader.scala.html#122187" title="(x$1: Char)Boolean">ch</a> &lt;= <span title="Char('9')" class="char">'9'</span>) <a href="#526261" title="()Unit">{</a>
        <a href="#122220" title="(c: Char)Unit">putChar</a>(<a href="../../util/CharArrayReader.scala.html#122187" title="=&gt; Char">ch</a>)
        <a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>()
      }
      <span title="Unit" class="keyword">if</span> (<a href="../../util/CharArrayReader.scala.html#122187" title="(x$1: Char)Boolean">ch</a> <span title="(x$1: Boolean)Boolean">==</span> <span title="Char('e')" class="char">'e'</span> || <a href="../../util/CharArrayReader.scala.html#122187" title="(x$1: Char)Boolean">ch</a> == <span title="Char('E')" class="char">'E'</span>) {
        <span class="keyword">val</span> <a title="scala.tools.nsc.util.CharArrayReader" id="526300">lookahead</a> = <a href="../../util/CharArrayReader.scala.html#122207" title="=&gt; scala.tools.nsc.util.CharArrayReader">lookaheadReader</a>
        <a href="#526300" title="scala.tools.nsc.util.CharArrayReader">lookahead</a>.<a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>()
        <span title="Unit" class="keyword">if</span> (<a href="#526300" title="scala.tools.nsc.util.CharArrayReader">lookahead</a>.<a href="../../util/CharArrayReader.scala.html#122187" title="(x$1: Char)Boolean">ch</a> <span title="(x$1: Boolean)Boolean">==</span> <span title="Char('+')" class="char">'+'</span> || <a href="#526300" title="scala.tools.nsc.util.CharArrayReader">lookahead</a>.<a href="../../util/CharArrayReader.scala.html#122187" title="(x$1: Char)Boolean">ch</a> == <span title="Char('-')" class="char">'-'</span>) {
          <a href="#526300" title="scala.tools.nsc.util.CharArrayReader">lookahead</a>.<a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>()
        }
        <span title="Unit" class="keyword">if</span> (<span title="(x$1: Char)Boolean" class="char">'0'</span> <span title="(x$1: Boolean)Boolean">&lt;=</span> <a href="#526300" title="scala.tools.nsc.util.CharArrayReader">lookahead</a>.<a href="../../util/CharArrayReader.scala.html#122187" title="=&gt; Char">ch</a> &amp;&amp; <a href="#526300" title="scala.tools.nsc.util.CharArrayReader">lookahead</a>.<a href="../../util/CharArrayReader.scala.html#122187" title="(x$1: Char)Boolean">ch</a> &lt;= <span title="Char('9')" class="char">'9'</span>) {
          <a href="#122220" title="(c: Char)Unit">putChar</a>(<a href="../../util/CharArrayReader.scala.html#122187" title="=&gt; Char">ch</a>)
          <a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>()
          <span title="Unit" class="keyword">if</span> (<a href="../../util/CharArrayReader.scala.html#122187" title="(x$1: Char)Boolean">ch</a> <span title="(x$1: Boolean)Boolean">==</span> <span title="Char('+')" class="char">'+'</span> || <a href="../../util/CharArrayReader.scala.html#122187" title="(x$1: Char)Boolean">ch</a> == <span title="Char('-')" class="char">'-'</span>) {
            <a href="#122220" title="(c: Char)Unit">putChar</a>(<a href="../../util/CharArrayReader.scala.html#122187" title="=&gt; Char">ch</a>)
            <a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>()
          }
          <span title="Unit" class="keyword">while</span> (<span title="(x$1: Char)Boolean" class="char">'0'</span> <span title="(x$1: Boolean)Boolean">&lt;=</span> <a href="../../util/CharArrayReader.scala.html#122187" title="=&gt; Char">ch</a> &amp;&amp; <a href="../../util/CharArrayReader.scala.html#122187" title="(x$1: Char)Boolean">ch</a> &lt;= <span title="Char('9')" class="char">'9'</span>) <a href="#526397" title="()Unit">{</a>
            <a href="#122220" title="(c: Char)Unit">putChar</a>(<a href="../../util/CharArrayReader.scala.html#122187" title="=&gt; Char">ch</a>)
            <a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>()
          }
        }
        <a href="#122270" title="(x$1: Int)Unit">token</a> = <span title="Int(5)">DOUBLELIT</span>
      }
      <span title="Unit" class="keyword">if</span> (<a href="../../util/CharArrayReader.scala.html#122187" title="(x$1: Char)Boolean">ch</a> <span title="(x$1: Boolean)Boolean">==</span> <span title="Char('d')" class="char">'d'</span> || <a href="../../util/CharArrayReader.scala.html#122187" title="(x$1: Char)Boolean">ch</a> == <span title="Char('D')" class="char">'D'</span>) {
        <a href="#122220" title="(c: Char)Unit">putChar</a>(<a href="../../util/CharArrayReader.scala.html#122187" title="=&gt; Char">ch</a>)
        <a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>()
        <a href="#122270" title="(x$1: Int)Unit">token</a> = <span title="Int(5)">DOUBLELIT</span>
      } <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<a href="../../util/CharArrayReader.scala.html#122187" title="(x$1: Char)Boolean">ch</a> <span title="(x$1: Boolean)Boolean">==</span> <span title="Char('f')" class="char">'f'</span> || <a href="../../util/CharArrayReader.scala.html#122187" title="(x$1: Char)Boolean">ch</a> == <span title="Char('F')" class="char">'F'</span>) {
        <a href="#122220" title="(c: Char)Unit">putChar</a>(<a href="../../util/CharArrayReader.scala.html#122187" title="=&gt; Char">ch</a>)
        <a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>()
        <a href="#122270" title="(x$1: Int)Unit">token</a> = <span title="Int(4)">FLOATLIT</span>
      }
      <a href="#122257" title="()Unit">checkNoLetter</a>()
      <a href="#122222" title="()Unit">setStrVal</a>()
    }

    /** Convert current strVal to char value
     */
    <span class="keyword">def</span> <a title="=&gt; Char" id="122252">charVal</a>: <span title="Char">Char</span> = <span title="Char" class="keyword">if</span> (<a href="#122282" title="=&gt; String">strVal</a>.<span title="(x$1: Int)Boolean">length</span> &gt; <span title="Int(0)" class="int">0</span>) <a href="#122282" title="=&gt; String">strVal</a>.<span title="(x$1: Int)Char">charAt</span>(<span title="Int(0)" class="int">0</span>) <span class="keyword">else</span> <span title="Char('\00')" class="int">0</span>

    /** Convert current strVal, base to long value
     *  This is tricky because of max negative value.
     */
    <span class="keyword">def</span> <a title="(negated: Boolean)Long" id="122253">intVal</a>(<a title="Boolean" id="526483">negated</a>: <span title="Boolean">Boolean</span>): <span title="Long">Long</span> = {
      <span title="Long" class="keyword">if</span> (<a href="#122270" title="(x$1: Int)Boolean">token</a> <span title="(x$1: Boolean)Boolean">==</span> <span title="Int(1)">CHARLIT</span> &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#526483" title="Boolean">negated</a>) {
        <a href="#122252" title="implicit scala.Predef.char2long : (x: Char)Long" id="8200">charVal</a>
      } <span class="keyword">else</span> {
        <span class="keyword">var</span> <a title="Long" id="526500">value</a>: <span title="Long">Long</span> = <span title="Long(0L)" class="int">0</span>
        <span class="keyword">val</span> <a title="Int" id="526501">divider</a> = <span title="Int" class="keyword">if</span> (<a href="#122285" title="(x$1: Int)Boolean">base</a> == <span title="Int(10)" class="int">10</span>) <span title="Int(1)" class="int">1</span> <span class="keyword">else</span> <span title="Int(2)" class="int">2</span>
        <span class="keyword">val</span> <a title="Long" id="526502">limit</a>: <span title="Long">Long</span> =
          <span title="Long" class="keyword">if</span> (<a href="#122270" title="(x$1: Int)Boolean">token</a> == <span title="Int(3)">LONGLIT</span>) <span title="object Math">Math</span>.<a title="=&gt; Long" id="69790">MAX_LONG</a> <span class="keyword">else</span> <span title="object Math">Math</span>.<a title="implicit scala.Predef.int2long : (x: Int)Long" id="69786">MAX_INT</a>
        <span class="keyword">var</span> <a title="Int" id="526503">i</a> = <span title="Int(0)" class="int">0</span>
        <span class="keyword">val</span> <a title="Int" id="526504">len</a> = <a href="#122282" title="=&gt; String">strVal</a>.<span title="()Int">length</span>
        <span title="Unit" class="keyword">while</span> (<a href="#526503" title="(x$1: Int)Boolean">i</a> &lt; <a href="#526504" title="Int">len</a>) <a href="#526505" title="()Unit">{</a>
          <span class="keyword">val</span> <a title="Int" id="526535">d</a> = <a href="../../util/CharArrayReader.scala.html#122206" title="(ch: Char,base: Int)Int">digit2int</a>(<a href="#122282" title="(x$1: Int)Char">strVal</a> charAt <a href="#526503" title="Int">i</a>, <a href="#122285" title="=&gt; Int">base</a>)
          <span title="Unit" class="keyword">if</span> (<a href="#526535" title="(x$1: Int)Boolean">d</a> &lt; <span title="Int(0)" class="int">0</span>) {
            <a href="#122261" title="(msg: String)Unit">syntaxError</a>(<span title="java.lang.String(&quot;malformed integer number&quot;)" class="string">&quot;malformed integer number&quot;</span>)
            <span title="Nothing" class="keyword">return</span> <span title="Long(0L)" class="int">0</span>
          }
          <span title="Unit" class="keyword">if</span> (<a href="#526500" title="(x$1: Int)Boolean" id="3185">value</a> <span title="(x$1: Boolean)Boolean">&lt;</span> <span title="Int(0)" class="int">0</span> <span title="(x$1: Boolean)Boolean">||</span>
              <a href="#526502" title="(x$1: Int)Long" id="3199">limit</a> <span title="(x$1: Long)Boolean">/</span> (<a href="#122285" title="(x$1: Int)Int">base</a> / <a href="#526501" title="Int">divider</a>) &lt; <a href="#526500" title="Long">value</a> ||
              <a href="#526502" title="(x$1: Int)Long">limit</a> <span title="(x$1: Long)Boolean">-</span> (<a href="#526535" title="(x$1: Int)Int">d</a> / <a href="#526501" title="Int">divider</a>) <span title="(x$1: Boolean)Boolean">&lt;</span> <a href="#526500" title="(x$1: Int)Long">value</a> * (<a href="#122285" title="(x$1: Int)Int">base</a> / <a href="#526501" title="Int">divider</a>) &amp;&amp;
              <span title="=&gt; Boolean">!</span>(<a href="#526483" title="(x$1: Boolean)Boolean">negated</a> &amp;&amp; <a href="#526502" title="(x$1: Long)Boolean" id="3209">limit</a> == <a href="#526500" title="(x$1: Int)Long">value</a> <span title="(x$1: Int)Long">*</span> <a href="#122285" title="=&gt; Int">base</a> <span title="(x$1: Int)Long">-</span> <span title="Int(1)" class="int">1</span> + <a href="#526535" title="Int">d</a>)) {
                <a href="#122261" title="(msg: String)Unit">syntaxError</a>(<span title="java.lang.String(&quot;integer number too large&quot;)" class="string">&quot;integer number too large&quot;</span>)
                <span title="Nothing" class="keyword">return</span> <span title="Long(0L)" class="int">0</span>
              }
          <a href="#526500" title="Long">value</a> = <a href="#526500" title="(x$1: Int)Long">value</a> <span title="(x$1: Int)Long">*</span> <a href="#122285" title="=&gt; Int">base</a> + <a href="#526535" title="Int">d</a>
          <a href="#526503" title="Int">i</a> += <span title="Int(1)" class="int">1</span>
        }
        <span title="Long" class="keyword">if</span> (<a href="#526483" title="Boolean">negated</a>) <a title="=&gt; Long" id="3095">-</a><a href="#526500" title="Long">value</a> <span class="keyword">else</span> <a href="#526500" title="Long">value</a>
      }
    }

    <span class="keyword">def</span> <a title="=&gt; Long" id="122254">intVal</a>: <span title="Long">Long</span> = <a href="#122253" title="(negated: Boolean)Long">intVal</a>(<span title="Boolean(false)" class="keyword">false</span>)

    /** Convert current strVal, base to double value
    */
    <span class="keyword">def</span> <a title="(negated: Boolean)Double" id="122255">floatVal</a>(<a title="Boolean" id="526710">negated</a>: <span title="Boolean">Boolean</span>): <span title="Double">Double</span> = {
      <span class="keyword">val</span> <a title="Double" id="526712">limit</a>: <span title="Double">Double</span> = 
        <span title="Double" class="keyword">if</span> (<a href="#122270" title="(x$1: Int)Boolean">token</a> == <span title="Int(5)">DOUBLELIT</span>) <span title="object Math">Math</span>.<a title="=&gt; Double" id="69808">MAX_DOUBLE</a> <span class="keyword">else</span> <span title="object Math">Math</span>.<a title="implicit scala.Predef.float2double : (x: Float)Double" id="69796">MAX_FLOAT</a>
      <span class="keyword">try</span> {
        <span class="keyword">val</span> <a title="Double" id="526726">value</a>: <span title="Double">Double</span> = java.lang.<a title="object java.lang.Double" id="1900">Double</a>.<a title="(x$1: java.lang.String)java.lang.Double" id="31039">valueOf</a>(<a href="#122282" title="=&gt; String">strVal</a>).<a title="()Double" id="31061">doubleValue</a>()
        <span title="Unit" class="keyword">if</span> (<a href="#526726" title="(x$1: Double)Boolean" id="3597">value</a> &gt; <a href="#526712" title="Double">limit</a>)
          <a href="#122261" title="(msg: String)Unit">syntaxError</a>(<span title="java.lang.String(&quot;floating point number too large&quot;)" class="string">&quot;floating point number too large&quot;</span>)
        <span title="Double" class="keyword">if</span> (<a href="#526710" title="Boolean">negated</a>) <a title="=&gt; Double" id="3456">-</a><a href="#526726" title="Double">value</a> <span class="keyword">else</span> <a href="#526726" title="Double">value</a>
      } <span class="keyword">catch</span> {
        <span title="Double" class="keyword">case</span> _: <a title="NumberFormatException" id="1869">NumberFormatException</a> =&gt; 
          <a href="#122261" title="(msg: String)Unit">syntaxError</a>(<span title="java.lang.String(&quot;malformed floating point number&quot;)" class="string">&quot;malformed floating point number&quot;</span>)
          <span title="Double(0.0)" class="double">0.0</span>
      }
    }

    <span class="keyword">def</span> <a title="=&gt; Double" id="122256">floatVal</a>: <span title="Double">Double</span> = <a href="#122255" title="(negated: Boolean)Double">floatVal</a>(<span title="Boolean(false)" class="keyword">false</span>)

    <span class="keyword">def</span> <a title="()Unit" id="122257">checkNoLetter</a>() {
      <span title="Unit" class="keyword">if</span> (<a href="#39911" title="(c: Char)Boolean">isIdentifierPart</a><span title="(x$1: Boolean)Boolean">(</span><a href="../../util/CharArrayReader.scala.html#122187" title="=&gt; Char">ch</a>) &amp;&amp; <a href="../../util/CharArrayReader.scala.html#122187" title="(x$1: Char)Boolean" id="2747">ch</a> &gt;= <span title="Char(' ')" class="char">' '</span>) 
        <a href="#122261" title="(msg: String)Unit">syntaxError</a>(<span title="java.lang.String(&quot;Invalid literal number&quot;)" class="string">&quot;Invalid literal number&quot;</span>)
    }

    /** Read a number into strVal and set base
    */
    <span class="keyword">protected</span> <span class="keyword">def</span> <a title="()Unit" id="122258">getNumber</a>() {
      <span class="keyword">val</span> <a title="Int" id="526788">base1</a> = <span title="Int" class="keyword">if</span> (<a href="#122285" title="(x$1: Int)Boolean">base</a> &lt; <span title="Int(10)" class="int">10</span>) <span title="Int(10)" class="int">10</span> <span class="keyword">else</span> <a href="#122285" title="=&gt; Int">base</a> 
        // read 8,9's even if format is octal, produce a malformed number error afterwards.
      <span title="Unit" class="keyword">while</span> (<a href="../../util/CharArrayReader.scala.html#122206" title="(ch: Char,base: Int)Int">digit2int</a><span title="(x$1: Int)Boolean">(</span><a href="../../util/CharArrayReader.scala.html#122187" title="=&gt; Char">ch</a>, <a href="#526788" title="Int">base1</a>) &gt;= <span title="Int(0)" class="int">0</span>) <a href="#526789" title="()Unit">{</a>
        <a href="#122220" title="(c: Char)Unit">putChar</a>(<a href="../../util/CharArrayReader.scala.html#122187" title="=&gt; Char">ch</a>)
        <a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>()
      }
      <a href="#122270" title="(x$1: Int)Unit">token</a> = <span title="Int(2)">INTLIT</span>
      <span title="Unit" class="keyword">if</span> (<a href="#122285" title="(x$1: Int)Boolean">base</a> <span title="(x$1: Boolean)Boolean">&lt;=</span> <span title="Int(10)" class="int">10</span> &amp;&amp; <a href="../../util/CharArrayReader.scala.html#122187" title="(x$1: Char)Boolean">ch</a> == <span title="Char('.')" class="char">'.'</span>) {
        <span class="keyword">val</span> <a title="scala.tools.nsc.util.CharArrayReader" id="526827">lookahead</a> = <a href="../../util/CharArrayReader.scala.html#122207" title="=&gt; scala.tools.nsc.util.CharArrayReader">lookaheadReader</a>
        <a href="#526827" title="scala.tools.nsc.util.CharArrayReader">lookahead</a>.<a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>()
        <a href="#526827" title="scala.tools.nsc.util.CharArrayReader">lookahead</a>.<a href="../../util/CharArrayReader.scala.html#122187" title="=&gt; Char">ch</a> <span title="Unit" class="keyword">match</span> {
          <span title="Nothing" class="keyword">case</span> <span title="Char('0')" class="char">'0'</span> | <span title="Char('1')" class="char">'1'</span> | <span title="Char('2')" class="char">'2'</span> | <span title="Char('3')" class="char">'3'</span> | <span title="Char('4')" class="char">'4'</span> | <span title="Char('5')" class="char">'5'</span> | <span title="Char('6')" class="char">'6'</span> | <span title="Char('7')" class="char">'7'</span> | 
               <span title="Char('8')" class="char">'8'</span> | <span title="Char('9')" class="char">'9'</span> | <span title="Char('d')" class="char">'d'</span> | <span title="Char('D')" class="char">'D'</span> | <span title="Char('e')" class="char">'e'</span> | <span title="Char('E')" class="char">'E'</span> | <span title="Char('f')" class="char">'f'</span> | <span title="Char('F')" class="char">'F'</span> =&gt;
            <a href="#122220" title="(c: Char)Unit">putChar</a>(<a href="../../util/CharArrayReader.scala.html#122187" title="=&gt; Char">ch</a>)
            <a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>()
            <span title="Nothing" class="keyword">return</span> <a href="#122251" title="()Unit">getFraction</a>()
          <span title="Unit" class="keyword">case</span> _ =&gt;
            <span title="Unit" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="#39910" title="(c: Char)Boolean">isIdentifierStart</a>(<a href="#526827" title="scala.tools.nsc.util.CharArrayReader">lookahead</a>.<a href="../../util/CharArrayReader.scala.html#122187" title="=&gt; Char">ch</a>)) {
              <a href="#122220" title="(c: Char)Unit">putChar</a>(<a href="../../util/CharArrayReader.scala.html#122187" title="=&gt; Char">ch</a>)
              <a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>()
              <span title="Nothing" class="keyword">return</span> <a href="#122251" title="()Unit">getFraction</a>()
            }
        }
      }
      <span title="Unit" class="keyword">if</span> (<a href="#122285" title="(x$1: Int)Boolean">base</a> <span title="(x$1: Boolean)Boolean">&lt;=</span> <span title="Int(10)" class="int">10</span> &amp;&amp; 
          (<a href="../../util/CharArrayReader.scala.html#122187" title="(x$1: Char)Boolean">ch</a> <span title="(x$1: Boolean)Boolean">==</span> <span title="Char('e')" class="char">'e'</span> <span title="(x$1: Boolean)Boolean">||</span> <a href="../../util/CharArrayReader.scala.html#122187" title="(x$1: Char)Boolean">ch</a> == <span title="Char('E')" class="char">'E'</span> <span title="(x$1: Boolean)Boolean">||</span>
           <a href="../../util/CharArrayReader.scala.html#122187" title="(x$1: Char)Boolean">ch</a> == <span title="Char('f')" class="char">'f'</span> <span title="(x$1: Boolean)Boolean">||</span> <a href="../../util/CharArrayReader.scala.html#122187" title="(x$1: Char)Boolean">ch</a> == <span title="Char('F')" class="char">'F'</span> <span title="(x$1: Boolean)Boolean">||</span>
           <a href="../../util/CharArrayReader.scala.html#122187" title="(x$1: Char)Boolean">ch</a> == <span title="Char('d')" class="char">'d'</span> || <a href="../../util/CharArrayReader.scala.html#122187" title="(x$1: Char)Boolean">ch</a> == <span title="Char('D')" class="char">'D'</span>)) {
        <span title="Nothing" class="keyword">return</span> <a href="#122251" title="()Unit">getFraction</a>()
      }
      <a href="#122222" title="()Unit">setStrVal</a>()
      <span title="Unit" class="keyword">if</span> (<a href="../../util/CharArrayReader.scala.html#122187" title="(x$1: Char)Boolean">ch</a> <span title="(x$1: Boolean)Boolean">==</span> <span title="Char('l')" class="char">'l'</span> || <a href="../../util/CharArrayReader.scala.html#122187" title="(x$1: Char)Boolean">ch</a> == <span title="Char('L')" class="char">'L'</span>) {
        <a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>()
        <a href="#122270" title="(x$1: Int)Unit">token</a> = <span title="Int(3)">LONGLIT</span>
      } <span class="keyword">else</span> <a href="#122257" title="()Unit">checkNoLetter</a>()
    }

    /** Parse character literal if current character is followed by \',
     *  or follow with given op and return a symol literal token
     */
    <span class="keyword">def</span> <a title="(op: () =&gt; Unit)Unit" id="122259">charLitOr</a>(<a title="() =&gt; Unit" id="525460">op</a>: () =&gt; Unit) {
      <a href="#122220" title="(c: Char)Unit">putChar</a>(<a href="../../util/CharArrayReader.scala.html#122187" title="=&gt; Char">ch</a>)
      <a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>()
      <span title="Unit" class="keyword">if</span> (<a href="../../util/CharArrayReader.scala.html#122187" title="(x$1: Char)Boolean">ch</a> == <span title="Char(''')" class="char">'\''</span>) {
        <a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>()
        <a href="#122270" title="(x$1: Int)Unit">token</a> = <span title="Int(1)">CHARLIT</span>
        <a href="#122222" title="()Unit">setStrVal</a>()
      } <span class="keyword">else</span> {
        <a href="#525460" title="()Unit" id="44943">op</a>()
        <a href="#122270" title="(x$1: Int)Unit">token</a> = <span title="Int(7)">SYMBOLLIT</span>
        <a href="#122282" title="(x$1: String)Unit">strVal</a> = <a href="#122279" title="=&gt; Scanners.this.global.Name">name</a>.<a href="../../symtab/Names.scala.html#28391" title="()String">toString</a>
      }
    }

// Errors -----------------------------------------------------------------

    /** generate an error at the given offset
    */
    <span class="keyword">def</span> <a title="(off: Scanners.this.Offset,msg: String)Unit" id="122260">syntaxError</a>(<a title="Scanners.this.Offset" id="525395">off</a>: <span title="Scanners.this.Offset">Offset</span>, <a title="String" id="525396">msg</a>: <span title="String">String</span>) {
      <a href="#122212" title="(off: Scanners.this.Offset,msg: String)Unit">error</a>(<a href="#525395" title="Scanners.this.Offset">off</a>, <a href="#525396" title="String">msg</a>)
      <a href="#122270" title="(x$1: Int)Unit">token</a> = <span title="Int(-1)">ERROR</span>
      <a href="#122216" title="(x$1: Scanners.this.Offset)Unit">errOffset</a> = <a href="#525395" title="Scanners.this.Offset">off</a>
    }

    /** generate an error at the current token offset
    */
    <span class="keyword">def</span> <a title="(msg: String)Unit" id="122261">syntaxError</a>(<a title="String" id="525393">msg</a>: <span title="String">String</span>): <span title="Unit">Unit</span> = <a href="#122260" title="(off: Scanners.this.Offset,msg: String)Unit">syntaxError</a>(<a href="#122273" title="=&gt; Scanners.this.Offset">offset</a>, <a href="#525393" title="String">msg</a>)

    /** signal an error where the input ended in the middle of a token */
    <span class="keyword">def</span> <a title="(msg: String)Unit" id="122262">incompleteInputError</a>(<a title="String" id="526035">msg</a>: <span title="String">String</span>) {
      <a href="#122213" title="(off: Scanners.this.Offset,msg: String)Unit">incompleteInputError</a>(<a href="#122273" title="=&gt; Scanners.this.Offset">offset</a>, <a href="#526035" title="String">msg</a>)
      <a href="#122270" title="(x$1: Int)Unit">token</a> = <span title="Int(0)">EOF</span>
      <a href="#122216" title="(x$1: Scanners.this.Offset)Unit">errOffset</a> = <a href="#122273" title="=&gt; Scanners.this.Offset">offset</a>
    }

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="()java.lang.String" id="122263">toString</a>() = <a href="#122270" title="=&gt; Int">token</a> <span title="java.lang.String" class="keyword">match</span> {
      <span title="java.lang.String" class="keyword">case</span> <span title="Int(10)">IDENTIFIER</span> | <span title="Int(11)">BACKQUOTED_IDENT</span> =&gt;
        <span title="(x$1: Any)java.lang.String" class="string">&quot;id(&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#122279" title="=&gt; Scanners.this.global.Name">name</a> + <span title="java.lang.String(&quot;)&quot;)" class="string">&quot;)&quot;</span>
      <span title="java.lang.String" class="keyword">case</span> <span title="Int(1)">CHARLIT</span> =&gt;
        <span title="(x$1: Any)java.lang.String" class="string">&quot;char(&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#122254" title="=&gt; Long">intVal</a> + <span title="java.lang.String(&quot;)&quot;)" class="string">&quot;)&quot;</span>
      <span title="java.lang.String" class="keyword">case</span> <span title="Int(2)">INTLIT</span> =&gt;
        <span title="(x$1: Any)java.lang.String" class="string">&quot;int(&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#122254" title="=&gt; Long">intVal</a> + <span title="java.lang.String(&quot;)&quot;)" class="string">&quot;)&quot;</span>
      <span title="java.lang.String" class="keyword">case</span> <span title="Int(3)">LONGLIT</span> =&gt;
        <span title="(x$1: Any)java.lang.String" class="string">&quot;long(&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#122254" title="=&gt; Long">intVal</a> + <span title="java.lang.String(&quot;)&quot;)" class="string">&quot;)&quot;</span>
      <span title="java.lang.String" class="keyword">case</span> <span title="Int(4)">FLOATLIT</span> =&gt;
        <span title="(x$1: Any)java.lang.String" class="string">&quot;float(&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#122256" title="=&gt; Double">floatVal</a> + <span title="java.lang.String(&quot;)&quot;)" class="string">&quot;)&quot;</span>
      <span title="java.lang.String" class="keyword">case</span> <span title="Int(5)">DOUBLELIT</span> =&gt;
        <span title="(x$1: Any)java.lang.String" class="string">&quot;double(&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#122256" title="=&gt; Double">floatVal</a> + <span title="java.lang.String(&quot;)&quot;)" class="string">&quot;)&quot;</span>
      <span title="java.lang.String" class="keyword">case</span> <span title="Int(6)">STRINGLIT</span> =&gt;
        <span title="(x$1: Any)java.lang.String" class="string">&quot;string(&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#122282" title="=&gt; String">strVal</a> + <span title="java.lang.String(&quot;)&quot;)" class="string">&quot;)&quot;</span>
      <span title="java.lang.String(&quot;;&quot;)" class="keyword">case</span> <span title="Int(71)">SEMI</span> =&gt;
        <span title="java.lang.String(&quot;;&quot;)" class="string">&quot;;&quot;</span>
      <span title="java.lang.String(&quot;;&quot;)" class="keyword">case</span> <span title="Int(78)">NEWLINE</span> =&gt;
        <span title="java.lang.String(&quot;;&quot;)" class="string">&quot;;&quot;</span>
      <span title="java.lang.String(&quot;;;&quot;)" class="keyword">case</span> <span title="Int(79)">NEWLINES</span> =&gt;
        <span title="java.lang.String(&quot;;;&quot;)" class="string">&quot;;;&quot;</span>
      <span title="java.lang.String(&quot;,&quot;)" class="keyword">case</span> <span title="Int(70)">COMMA</span> =&gt;
        <span title="java.lang.String(&quot;,&quot;)" class="string">&quot;,&quot;</span>
      <span title="String" class="keyword">case</span> _ =&gt;
        <a href="#39929" title="(token: Int)String">token2string</a>(<a href="#122270" title="=&gt; Int">token</a>)
    }

    // ------------- brace counting and healing ------------------------------
 
    /** overridden in UnitScanners:
     *  apply brace patch if one exists for this offset
     *  return true if subsequent end of line handling should be suppressed.
     */
    <span class="keyword">def</span> <a title="()Boolean" id="122264">applyBracePatch</a>(): <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span>
 
    /** overridden in UnitScanners */
    <span class="keyword">def</span> <a title="(token: Int)Int" id="122265">parenBalance</a>(<a title="Int" id="527033">token</a>: <span title="Int">Int</span>) = <span title="Int(0)" class="int">0</span>
    
    /** overridden in UnitScanners */
    <span class="keyword">def</span> <a title="()List[scala.tools.nsc.ast.parser.BracePatch]" id="122266">healBraces</a>(): <span title="List[scala.tools.nsc.ast.parser.BracePatch]">List</span>[BracePatch] = List<span title="object Nil">(</span>)

    /** Initialization method: read first char, then first token
     */
    <span class="keyword">def</span> <a title="()Unit" id="122267">init</a>() {
      <a href="../../util/CharArrayReader.scala.html#122203" title="()Unit">nextChar</a>()
      <a href="#122238" title="()Unit">nextToken</a>()
    }
  } // end Scanner

  // ------------- character classification --------------------------------

  <span class="keyword">def</span> <a title="(c: Char)Boolean" id="39910">isIdentifierStart</a>(<a title="Char" id="334000">c</a>: <span title="Char">Char</span>): <span title="Boolean">Boolean</span> =
    <span title="(x$1: Boolean)Boolean">(</span><span title="(x$1: Char)Boolean" class="char">'A'</span> <span title="(x$1: Boolean)Boolean">&lt;=</span> <a href="#334000" title="Char">c</a> &amp;&amp; <a href="#334000" title="(x$1: Char)Boolean">c</a> &lt;= <span title="Char('Z')" class="char">'Z'</span>) <span title="(x$1: Boolean)Boolean">||</span>
    (<span title="(x$1: Char)Boolean" class="char">'a'</span> <span title="(x$1: Boolean)Boolean">&lt;=</span> <a href="#334000" title="Char">c</a> &amp;&amp; <a href="#334000" title="(x$1: Char)Boolean">c</a> &lt;= <span title="Char('a')" class="char">'a'</span>) <span title="(x$1: Boolean)Boolean">||</span>
    (<a href="#334000" title="(x$1: Char)Boolean">c</a> == <span title="Char('_')" class="char">'_'</span>) <span title="(x$1: Boolean)Boolean">||</span> (<a href="#334000" title="(x$1: Char)Boolean">c</a> == <span title="Char('$')" class="char">'$'</span>) ||
    <span title="object java.lang.Character">Character</span>.<span title="(x$1: Char)Boolean">isUnicodeIdentifierStart</span>(<a href="#334000" title="Char">c</a>)
  
  <span class="keyword">def</span> <a title="(c: Char)Boolean" id="39911">isIdentifierPart</a>(<a title="Char" id="333997">c</a>: <span title="Char">Char</span>) =
    <a href="#39910" title="(c: Char)Boolean">isIdentifierStart</a><span title="(x$1: Boolean)Boolean">(</span><a href="#333997" title="Char">c</a>) <span title="(x$1: Boolean)Boolean">||</span> 
    (<span title="(x$1: Char)Boolean" class="char">'0'</span> <span title="(x$1: Boolean)Boolean">&lt;=</span> <a href="#333997" title="Char">c</a> &amp;&amp; <a href="#333997" title="(x$1: Char)Boolean">c</a> &lt;= <span title="Char('9')" class="char">'9'</span>) ||
    <span title="object java.lang.Character">Character</span>.<span title="(x$1: Char)Boolean">isUnicodeIdentifierPart</span>(<a href="#333997" title="Char">c</a>)

  <span class="keyword">def</span> <a title="(c: Char)Boolean" id="39912">isSpecial</a>(<a title="Char" id="525467">c</a>: <span title="Char">Char</span>) = {
    <span class="keyword">val</span> <a title="Int" id="525470">chtp</a> = <span title="object java.lang.Character">Character</span>.<a title="(x$1: Char)Int" id="43463">getType</a>(<a href="#525467" title="Char">c</a>)
    <a href="#525470" title="(x$1: Byte)Boolean">chtp</a> <span title="(x$1: Boolean)Boolean">==</span> Character.<span title="Byte(25)">MATH_SYMBOL</span> || <a href="#525470" title="(x$1: Byte)Boolean">chtp</a> == Character.<span title="Byte(28)">OTHER_SYMBOL</span>
  }

  <span class="keyword">def</span> <a title="(c: Char)Boolean" id="39913">isOperatorPart</a>(<a title="Char" id="334030">c</a> : <span title="Char">Char</span>) : <span title="Boolean">Boolean</span> = (<a href="#334030" title="Char">c</a>: @<span title="Char @scala.annotation.switch">switch</span>) <span title="Boolean" class="keyword">match</span> {
    <span title="Boolean(true)" class="keyword">case</span> <span title="Char('~')" class="char">'~'</span> | <span title="Char('!')" class="char">'!'</span> | <span title="Char('@')" class="char">'@'</span> | <span title="Char('#')" class="char">'#'</span> | <span title="Char('%')" class="char">'%'</span> | 
         <span title="Char('^')" class="char">'^'</span> | <span title="Char('*')" class="char">'*'</span> | <span title="Char('+')" class="char">'+'</span> | <span title="Char('-')" class="char">'-'</span> | <span title="Char('&lt;')" class="char">'&lt;'</span> |
         <span title="Char('&gt;')" class="char">'&gt;'</span> | <span title="Char('?')" class="char">'?'</span> | <span title="Char(':')" class="char">':'</span> | <span title="Char('=')" class="char">'='</span> | <span title="Char('&amp;')" class="char">'&amp;'</span> | 
         <span title="Char('|')" class="char">'|'</span> | <span title="Char('/')" class="char">'/'</span> | <span title="Char('\')" class="char">'\\'</span> =&gt; <span title="Boolean(true)" class="keyword">true</span>
    <span title="Boolean" class="keyword">case</span> <a title="Char @scala.annotation.switch" id="527107">c</a> =&gt; <a href="#39912" title="(c: Char)Boolean">isSpecial</a>(<a href="#527107" title="Char @scala.annotation.switch">c</a>)
  }

  // ------------- keyword configuration -----------------------------------
  
  /** Keyword array; maps from name indices to tokens */
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Array[Byte]" id="39915">keyCode</a>: <span title="Array[Byte]">Array</span>[Byte] = _
  /** The highest name index of a keyword token */
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Int" id="39918">maxKey</a> = <span title="Int(0)" class="int">0</span>
  /** An array of all keyword token names */
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Array[Scanners.this.global.Name]" id="39921">keyName</a> = <span title="Array[Scanners.this.global.Name]" class="keyword">new</span> <span title="Array[Scanners.this.global.Name]">Array</span>[Name](<span title="Int(128)" class="int">128</span>)
  /** The highest keyword token plus one */
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Int" id="39924">tokenCount</a> = <span title="Int(0)" class="int">0</span> 

  /** Enter keyword with given name and token id */
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(n: Scanners.this.global.Name,tokenId: Int)Unit" id="39926">enterKeyword</a>(<a title="Scanners.this.global.Name" id="527110">n</a>: <a href="../../symtab/Names.scala.html#26214" title="Scanners.this.global.Name">Name</a>, <a title="Int" id="527111">tokenId</a>: <span title="Int">Int</span>) {
    <span title="Unit" class="keyword">while</span> (<a href="#527111" title="(x$1: Int)Boolean">tokenId</a> &gt;= <a href="#39921" title="=&gt; Array[Scanners.this.global.Name]">keyName</a>.<span title="=&gt; Int">length</span>) <a href="#527113" title="()Unit">{</a>
      <span class="keyword">val</span> <a title="Array[Scanners.this.global.Name]" id="527121">newTokName</a> = <span title="Array[Scanners.this.global.Name]" class="keyword">new</span> <span title="Array[Scanners.this.global.Name]">Array</span>[Name](<a href="#39921" title="=&gt; Array[Scanners.this.global.Name]">keyName</a>.<span title="(x$1: Int)Int">length</span> * <span title="Int(2)" class="int">2</span>)
      compat.<a title="object scala.compat.Platform" id="39220">Platform</a>.<a title="(src: AnyRef,srcPos: Int,dest: AnyRef,destPos: Int,length: Int)Unit" id="39228">arraycopy</a>(<a href="#39921" title="=&gt; Array[Scanners.this.global.Name]">keyName</a>, <span title="Int(0)" class="int">0</span>, <a href="#527121" title="Array[Scanners.this.global.Name]">newTokName</a>, <span title="Int(0)" class="int">0</span>, <a href="#527121" title="Array[Scanners.this.global.Name]">newTokName</a>.<span title="=&gt; Int">length</span>)
      <a href="#39921" title="(x$1: Array[Scanners.this.global.Name])Unit">keyName</a> = <a href="#527121" title="Array[Scanners.this.global.Name]">newTokName</a>
    }
    <a href="#39921" title="(i: Int,x: Scanners.this.global.Name)Unit">keyName</a>(<a href="#527111" title="Int">tokenId</a>) = <a href="#527110" title="Scanners.this.global.Name">n</a>
    <span title="Unit" class="keyword">if</span> (<a href="#527110" title="Scanners.this.global.Name">n</a>.<a href="../../symtab/Names.scala.html#28379" title="(x$1: Int)Boolean">start</a> &gt; <a href="#39918" title="=&gt; Int">maxKey</a>) <a href="#39918" title="(x$1: Int)Unit">maxKey</a> = <a href="#527110" title="Scanners.this.global.Name">n</a>.<a href="../../symtab/Names.scala.html#28379" title="=&gt; Int">start</a>
    <span title="Unit" class="keyword">if</span> (<a href="#527111" title="(x$1: Int)Boolean">tokenId</a> &gt;= <a href="#39924" title="=&gt; Int">tokenCount</a>) <a href="#39924" title="(x$1: Int)Unit">tokenCount</a> = <a href="#527111" title="(x$1: Int)Int">tokenId</a> + <span title="Int(1)" class="int">1</span>
  }

  /** Enter all keywords */
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="()Unit" id="39927">enterKeywords</a>() {
    <a href="#39926" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26690" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29694" title="=&gt; Scanners.this.global.Name">ABSTRACTkw</a>, <span title="Int(32)">ABSTRACT</span>)
    <a href="#39926" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26690" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29696" title="=&gt; Scanners.this.global.Name">CASEkw</a>, <span title="Int(28)">CASE</span>)
    <a href="#39926" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26690" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29700" title="=&gt; Scanners.this.global.Name">CATCHkw</a>, <span title="Int(54)">CATCH</span>)
    <a href="#39926" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26690" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29698" title="=&gt; Scanners.this.global.Name">CLASSkw</a>, <span title="Int(45)">CLASS</span>)
    <a href="#39926" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26690" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29702" title="=&gt; Scanners.this.global.Name">DEFkw</a>, <span title="Int(39)">DEF</span>)
    <a href="#39926" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26690" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29704" title="=&gt; Scanners.this.global.Name">DOkw</a>, <span title="Int(49)">DO</span>)
    <a href="#39926" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26690" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29706" title="=&gt; Scanners.this.global.Name">ELSEkw</a>, <span title="Int(22)">ELSE</span>)
    <a href="#39926" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26690" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29708" title="=&gt; Scanners.this.global.Name">EXTENDSkw</a>, <span title="Int(41)">EXTENDS</span>)
    <a href="#39926" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26690" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29710" title="=&gt; Scanners.this.global.Name">FALSEkw</a>, <span title="Int(43)">FALSE</span>)
    <a href="#39926" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26690" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29712" title="=&gt; Scanners.this.global.Name">FINALkw</a>, <span title="Int(33)">FINAL</span>)
    <a href="#39926" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26690" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29714" title="=&gt; Scanners.this.global.Name">FINALLYkw</a>, <span title="Int(55)">FINALLY</span>)
    <a href="#39926" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26690" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29716" title="=&gt; Scanners.this.global.Name">FORkw</a>, <span title="Int(21)">FOR</span>)
    <a href="#39926" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26690" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29718" title="=&gt; Scanners.this.global.Name">FORSOMEkw</a>, <span title="Int(59)">FORSOME</span>)
    <a href="#39926" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26690" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29720" title="=&gt; Scanners.this.global.Name">IFkw</a>, <span title="Int(20)">IF</span>)
    <a href="#39926" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26690" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29722" title="=&gt; Scanners.this.global.Name">IMPLICITkw</a>, <span title="Int(37)">IMPLICIT</span>)
    <a href="#39926" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26690" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29724" title="=&gt; Scanners.this.global.Name">IMPORTkw</a>, <span title="Int(46)">IMPORT</span>)
    <a href="#39926" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26690" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29726" title="=&gt; Scanners.this.global.Name">LAZYkw</a>, <span title="Int(61)">LAZY</span>)
    <a href="#39926" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26690" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29728" title="=&gt; Scanners.this.global.Name">MATCHkw</a>, <span title="Int(58)">MATCH</span>)
    <a href="#39926" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26690" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29732" title="=&gt; Scanners.this.global.Name">NEWkw</a>, <span title="Int(25)">NEW</span>)
    <a href="#39926" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26690" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29734" title="=&gt; Scanners.this.global.Name">NULLkw</a>, <span title="Int(24)">NULL</span>)
    <a href="#39926" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26690" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29736" title="=&gt; Scanners.this.global.Name">OBJECTkw</a>, <span title="Int(44)">OBJECT</span>)
    <a href="#39926" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26690" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29742" title="=&gt; Scanners.this.global.Name">OVERRIDEkw</a>, <span title="Int(36)">OVERRIDE</span>)
    <a href="#39926" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26690" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29744" title="=&gt; Scanners.this.global.Name">PACKAGEkw</a>, <span title="Int(47)">PACKAGE</span>)
    <a href="#39926" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26690" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29746" title="=&gt; Scanners.this.global.Name">PRIVATEkw</a>, <span title="Int(34)">PRIVATE</span>)
    <a href="#39926" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26690" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29748" title="=&gt; Scanners.this.global.Name">PROTECTEDkw</a>, <span title="Int(35)">PROTECTED</span>)
    <a href="#39926" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26690" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29750" title="=&gt; Scanners.this.global.Name">RETURNkw</a>, <span title="Int(57)">RETURN</span>)
    <a href="#39926" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26690" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29754" title="=&gt; Scanners.this.global.Name">SEALEDkw</a>, <span title="Int(51)">SEALED</span>)
    <a href="#39926" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26690" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29756" title="=&gt; Scanners.this.global.Name">SUPERkw</a>, <span title="Int(27)">SUPER</span>)
    <a href="#39926" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26690" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29758" title="=&gt; Scanners.this.global.Name">THISkw</a>, <span title="Int(23)">THIS</span>)
    <a href="#39926" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26690" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29760" title="=&gt; Scanners.this.global.Name">THROWkw</a>, <span title="Int(52)">THROW</span>)
    <a href="#39926" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26690" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29762" title="=&gt; Scanners.this.global.Name">TRAITkw</a>, <span title="Int(50)">TRAIT</span>)
    <a href="#39926" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26690" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29764" title="=&gt; Scanners.this.global.Name">TRUEkw</a>, <span title="Int(42)">TRUE</span>)
    <a href="#39926" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26690" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29766" title="=&gt; Scanners.this.global.Name">TRYkw</a>, <span title="Int(53)">TRY</span>)
    <a href="#39926" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26690" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29768" title="=&gt; Scanners.this.global.Name">TYPEkw</a>, <span title="Int(40)">TYPE</span>)
    <a href="#39926" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26690" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29770" title="=&gt; Scanners.this.global.Name">VALkw</a>, <span title="Int(31)">VAL</span>)
    <a href="#39926" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26690" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29772" title="=&gt; Scanners.this.global.Name">VARkw</a>, <span title="Int(38)">VAR</span>)
    <a href="#39926" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26690" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29776" title="=&gt; Scanners.this.global.Name">WHILEkw</a>, <span title="Int(56)">WHILE</span>)
    <a href="#39926" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26690" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29774" title="=&gt; Scanners.this.global.Name">WITHkw</a>, <span title="Int(26)">WITH</span>)
    <a href="#39926" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26690" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29778" title="=&gt; Scanners.this.global.Name">YIELDkw</a>, <span title="Int(48)">YIELD</span>)
    <a href="#39926" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26690" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29780" title="=&gt; Scanners.this.global.Name">DOTkw</a>, <span title="Int(72)">DOT</span>)
    <a href="#39926" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26690" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29782" title="=&gt; Scanners.this.global.Name">USCOREkw</a>, <span title="Int(73)">USCORE</span>)
    <a href="#39926" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26690" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29784" title="=&gt; Scanners.this.global.Name">COLONkw</a>, <span title="Int(74)">COLON</span>)
    <a href="#39926" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26690" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29786" title="=&gt; Scanners.this.global.Name">EQUALSkw</a>, <span title="Int(75)">EQUALS</span>)
    <a href="#39926" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26690" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29788" title="=&gt; Scanners.this.global.Name">ARROWkw</a>, <span title="Int(77)">ARROW</span>)
    <a href="#39926" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26690" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29790" title="=&gt; Scanners.this.global.Name">LARROWkw</a>, <span title="Int(76)">LARROW</span>)
    <a href="#39926" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26690" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29792" title="=&gt; Scanners.this.global.Name">SUBTYPEkw</a>, <span title="Int(80)">SUBTYPE</span>)
    <a href="#39926" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26690" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29794" title="=&gt; Scanners.this.global.Name">VIEWBOUNDkw</a>, <span title="Int(84)">VIEWBOUND</span>)
    <a href="#39926" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26690" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29796" title="=&gt; Scanners.this.global.Name">SUPERTYPEkw</a>, <span title="Int(81)">SUPERTYPE</span>)
    <a href="#39926" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26690" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29798" title="=&gt; Scanners.this.global.Name">HASHkw</a>, <span title="Int(82)">HASH</span>)
    <a href="#39926" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26690" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29800" title="=&gt; Scanners.this.global.Name">ATkw</a>, <span title="Int(83)">AT</span>)
  }

  { // initialization
    <a href="#39927" title="()Unit">enterKeywords</a>()
    // Build keyword array
    <a href="#39915" title="(x$1: Array[Byte])Unit">keyCode</a> = <a title="object Array" id="906">Array</a>.<a title="(n: Int)(elem: =&gt; Byte)(implicit evidence$9: scala.reflect.ClassManifest[Byte])Array[Byte]" id="24819">fill</a>(<a href="#39918" title="(x$1: Int)Int">maxKey</a> + <span title="Int(1)" class="int">1</span>)<a title="=&gt; &lt;refinement&gt; extends java.lang.Object with scala.reflect.Manifest[Byte]" id="27759">(</a><span title="Byte(10)">IDENTIFIER</span>)
    <span class="keyword">for</span> (<a title="Int" id="527680">j</a> &lt;- <a title="(end: Int)Range" id="8158" class="int">0</a> <a title="(f: (Int) =&gt; Unit)Unit" id="57119">until</a> <a href="#39924" title="=&gt; Int">tokenCount</a> <span class="keyword">if</span> <a href="#39921" title="(i: Int)Scanners.this.global.Name">keyName</a><span title="(x$1: AnyRef)Boolean">(</span><a href="#527680" title="Int">j</a>) ne <span title="Null(null)" class="keyword">null</span>)
      <a href="#39915" title="(i: Int,x: Byte)Unit">keyCode</a>(<a href="#39921" title="(i: Int)Scanners.this.global.Name">keyName</a>(<a href="#527680" title="Int">j</a>).<a href="../../symtab/Names.scala.html#28379" title="=&gt; Int">start</a>) = <a href="#527680" title="Int">j</a>.<a title="=&gt; Byte" id="2865">toByte</a>
  }

  /** Convert name to token */
  <span class="keyword">def</span> <a title="(name: Scanners.this.global.Name)Int" id="39928">name2token</a>(<a title="Scanners.this.global.Name" id="524716">name</a>: <a href="../../symtab/Names.scala.html#26214" title="Scanners.this.global.Name">Name</a>): <span title="Int">Int</span> =
    <span title="Int" class="keyword">if</span> (<a href="#524716" title="Scanners.this.global.Name">name</a>.<a href="../../symtab/Names.scala.html#28379" title="(x$1: Int)Boolean">start</a> &lt;= <a href="#39918" title="=&gt; Int">maxKey</a>) <a href="#39915" title="(i: Int)Byte">keyCode</a><a title="implicit scala.Predef.byte2int : (x: Byte)Int" id="8182">(</a><a href="#524716" title="Scanners.this.global.Name">name</a>.<a href="../../symtab/Names.scala.html#28379" title="=&gt; Int">start</a>) <span class="keyword">else</span> <span title="Int(10)">IDENTIFIER</span>

// Token representation ----------------------------------------------------

  /** Returns the string representation of given token. */
  <span class="keyword">def</span> <a title="(token: Int)String" id="39929">token2string</a>(<a title="Int" id="527029">token</a>: <span title="Int">Int</span>): <span title="String">String</span> = (<a href="#527029" title="Int">token</a>: @<span title="Int @scala.annotation.switch">switch</span>) <span title="String" class="keyword">match</span> {
    <span title="java.lang.String(&quot;identifier&quot;)" class="keyword">case</span> <span title="Int(10)">IDENTIFIER</span> | <span title="Int(11)">BACKQUOTED_IDENT</span> =&gt; <span title="java.lang.String(&quot;identifier&quot;)" class="string">&quot;identifier&quot;</span>
    <span title="java.lang.String(&quot;character literal&quot;)" class="keyword">case</span> <span title="Int(1)">CHARLIT</span> =&gt; <span title="java.lang.String(&quot;character literal&quot;)" class="string">&quot;character literal&quot;</span>
    <span title="java.lang.String(&quot;integer literal&quot;)" class="keyword">case</span> <span title="Int(2)">INTLIT</span> =&gt; <span title="java.lang.String(&quot;integer literal&quot;)" class="string">&quot;integer literal&quot;</span>
    <span title="java.lang.String(&quot;long literal&quot;)" class="keyword">case</span> <span title="Int(3)">LONGLIT</span> =&gt; <span title="java.lang.String(&quot;long literal&quot;)" class="string">&quot;long literal&quot;</span>
    <span title="java.lang.String(&quot;float literal&quot;)" class="keyword">case</span> <span title="Int(4)">FLOATLIT</span> =&gt; <span title="java.lang.String(&quot;float literal&quot;)" class="string">&quot;float literal&quot;</span>
    <span title="java.lang.String(&quot;double literal&quot;)" class="keyword">case</span> <span title="Int(5)">DOUBLELIT</span> =&gt; <span title="java.lang.String(&quot;double literal&quot;)" class="string">&quot;double literal&quot;</span>
    <span title="java.lang.String(&quot;string literal&quot;)" class="keyword">case</span> <span title="Int(6)">STRINGLIT</span> =&gt; <span title="java.lang.String(&quot;string literal&quot;)" class="string">&quot;string literal&quot;</span>
    <span title="java.lang.String(&quot;symbol literal&quot;)" class="keyword">case</span> <span title="Int(7)">SYMBOLLIT</span> =&gt; <span title="java.lang.String(&quot;symbol literal&quot;)" class="string">&quot;symbol literal&quot;</span>
    <span title="java.lang.String(&quot;'('&quot;)" class="keyword">case</span> <span title="Int(90)">LPAREN</span> =&gt; <span title="java.lang.String(&quot;'('&quot;)" class="string">&quot;'('&quot;</span>
    <span title="java.lang.String(&quot;')'&quot;)" class="keyword">case</span> <span title="Int(91)">RPAREN</span> =&gt; <span title="java.lang.String(&quot;')'&quot;)" class="string">&quot;')'&quot;</span>
    <span title="java.lang.String(&quot;'{'&quot;)" class="keyword">case</span> <span title="Int(94)">LBRACE</span> =&gt; <span title="java.lang.String(&quot;'{'&quot;)" class="string">&quot;'{'&quot;</span>
    <span title="java.lang.String(&quot;'}'&quot;)" class="keyword">case</span> <span title="Int(95)">RBRACE</span> =&gt; <span title="java.lang.String(&quot;'}'&quot;)" class="string">&quot;'}'&quot;</span>
    <span title="java.lang.String(&quot;'['&quot;)" class="keyword">case</span> <span title="Int(92)">LBRACKET</span> =&gt; <span title="java.lang.String(&quot;'['&quot;)" class="string">&quot;'['&quot;</span>
    <span title="java.lang.String(&quot;']'&quot;)" class="keyword">case</span> <span title="Int(93)">RBRACKET</span> =&gt; <span title="java.lang.String(&quot;']'&quot;)" class="string">&quot;']'&quot;</span>
    <span title="java.lang.String(&quot;eof&quot;)" class="keyword">case</span> <span title="Int(0)">EOF</span> =&gt; <span title="java.lang.String(&quot;eof&quot;)" class="string">&quot;eof&quot;</span>
    <span title="java.lang.String(&quot;something&quot;)" class="keyword">case</span> <span title="Int(-1)">ERROR</span> =&gt; <span title="java.lang.String(&quot;something&quot;)" class="string">&quot;something&quot;</span>
    <span title="java.lang.String(&quot;';'&quot;)" class="keyword">case</span> <span title="Int(71)">SEMI</span> =&gt; <span title="java.lang.String(&quot;';'&quot;)" class="string">&quot;';'&quot;</span>
    <span title="java.lang.String(&quot;';'&quot;)" class="keyword">case</span> <span title="Int(78)">NEWLINE</span> =&gt; <span title="java.lang.String(&quot;';'&quot;)" class="string">&quot;';'&quot;</span>
    <span title="java.lang.String(&quot;';'&quot;)" class="keyword">case</span> <span title="Int(79)">NEWLINES</span> =&gt; <span title="java.lang.String(&quot;';'&quot;)" class="string">&quot;';'&quot;</span>
    <span title="java.lang.String(&quot;','&quot;)" class="keyword">case</span> <span title="Int(70)">COMMA</span> =&gt; <span title="java.lang.String(&quot;','&quot;)" class="string">&quot;','&quot;</span>
    <span title="java.lang.String(&quot;case class&quot;)" class="keyword">case</span> <span title="Int(29)">CASECLASS</span> =&gt; <span title="java.lang.String(&quot;case class&quot;)" class="string">&quot;case class&quot;</span>
    <span title="java.lang.String(&quot;case object&quot;)" class="keyword">case</span> <span title="Int(30)">CASEOBJECT</span> =&gt; <span title="java.lang.String(&quot;case object&quot;)" class="string">&quot;case object&quot;</span>
    <span title="java.lang.String(&quot;$XMLSTART$&lt;&quot;)" class="keyword">case</span> <span title="Int(96)">XMLSTART</span> =&gt; <span title="java.lang.String(&quot;$XMLSTART$&lt;&quot;)" class="string">&quot;$XMLSTART$&lt;&quot;</span>
    <span title="String" class="keyword">case</span> _ =&gt;
      <span title="String" class="keyword">if</span> (<a href="#527029" title="(x$1: Int)Boolean">token</a> &lt;= <a href="#39918" title="=&gt; Int">maxKey</a>) <span title="(x$1: Any)java.lang.String" class="string">&quot;'&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#39921" title="(i: Int)Scanners.this.global.Name">keyName</a>(<a href="#527029" title="Int">token</a>) + <span title="java.lang.String(&quot;'&quot;)" class="string">&quot;'&quot;</span>
      <span class="keyword">else</span> <span title="(x$1: Any)java.lang.String" class="string">&quot;'&lt;&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#527029" title="Int">token</a> + <span title="java.lang.String(&quot;&gt;'&quot;)" class="string">&quot;&gt;'&quot;</span>
  }

  /** A scanner over a given compilation unit
   */
  <span class="keyword">class</span> <a title="class UnitScanner extends Scanners.this.Scanner with ScalaObject" id="39930">UnitScanner</a><span title="ScalaObject">(</span><a title="Scanners.this.global.CompilationUnit" id="527826">unit</a>: <a href="../../CompilationUnits.scala.html#39428" title="Scanners.this.global.CompilationUnit">CompilationUnit</a>, <a title="List[scala.tools.nsc.ast.parser.BracePatch]" id="527827">patches</a>: <span title="List[scala.tools.nsc.ast.parser.BracePatch]">List</span>[BracePatch]) <span class="keyword">extends</span> <a href="#39909" title="Scanners.this.Scanner">Scanner</a> {
    <span class="keyword">def</span> <a title="(unit: Scanners.this.global.CompilationUnit)Scanners.this.UnitScanner" id="527760" class="keyword">this</a>(<a title="Scanners.this.global.CompilationUnit" id="527832">unit</a>: <a href="../../CompilationUnits.scala.html#39428" title="Scanners.this.global.CompilationUnit">CompilationUnit</a>) = <a href="#39930" title="UnitScanner.this.type" class="keyword">this</a>(<a href="#527832" title="Scanners.this.global.CompilationUnit">unit</a>, List<span title="object Nil">(</span>))
    <span class="keyword">val</span> <a title="Array[Char]" id="527761">buf</a> = <a href="#527826" title="Scanners.this.global.CompilationUnit">unit</a>.<a href="../../CompilationUnits.scala.html#45663" title="=&gt; scala.tools.nsc.util.SourceFile">source</a>.<a title="[T0]T0" id="3644">asInstanceOf</a><span title="scala.tools.nsc.util.BatchSourceFile">[</span><a href="../../util/SourceFile.scala.html#14734" title="scala.tools.nsc.util.BatchSourceFile">BatchSourceFile</a>].<a href="../../util/SourceFile.scala.html#121510" title="=&gt; Array[Char]">content</a>
    <span class="keyword">val</span> <a title="Boolean" id="527763">decodeUnit</a> = <span title="=&gt; Boolean">!</span><a href="../../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37291" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">nouescape</a>.<a href="../../Settings.scala.html#37988" title="=&gt; Boolean">value</a>

    <span class="keyword">def</span> <a title="(off: Scanners.this.Offset,msg: String)Unit" id="527765">warning</a>(<a title="Scanners.this.Offset" id="527857">off</a>: <span title="Scanners.this.Offset">Offset</span>, <a title="String" id="527858">msg</a>: <span title="String">String</span>) = <a href="#527826" title="Scanners.this.global.CompilationUnit">unit</a>.<a href="../../CompilationUnits.scala.html#45688" title="(pos: scala.tools.nsc.util.Position,msg: String)Unit">warning</a>(<a href="#527826" title="Scanners.this.global.CompilationUnit">unit</a>.<a href="../../CompilationUnits.scala.html#45683" title="(pos: Int)scala.tools.nsc.util.Position">position</a>(<a href="#527857" title="Scanners.this.Offset">off</a>), <a href="#527858" title="String">msg</a>)
    <span class="keyword">def</span> <a title="(off: Scanners.this.Offset,msg: String)Unit" id="527766">error</a>  (<a title="Scanners.this.Offset" id="527865">off</a>: <span title="Scanners.this.Offset">Offset</span>, <a title="String" id="527866">msg</a>: <span title="String">String</span>) = <a href="#527826" title="Scanners.this.global.CompilationUnit">unit</a>.<a href="../../CompilationUnits.scala.html#45687" title="(pos: scala.tools.nsc.util.Position,msg: String)Unit">error</a>(<a href="#527826" title="Scanners.this.global.CompilationUnit">unit</a>.<a href="../../CompilationUnits.scala.html#45683" title="(pos: Int)scala.tools.nsc.util.Position">position</a>(<a href="#527865" title="Scanners.this.Offset">off</a>), <a href="#527866" title="String">msg</a>)
    <span class="keyword">def</span> <a title="(off: Scanners.this.Offset,msg: String)Unit" id="527767">incompleteInputError</a>(<a title="Scanners.this.Offset" id="527873">off</a>: <span title="Scanners.this.Offset">Offset</span>, <a title="String" id="527874">msg</a>: <span title="String">String</span>) = <a href="#527826" title="Scanners.this.global.CompilationUnit">unit</a>.<a href="../../CompilationUnits.scala.html#45691" title="(pos: scala.tools.nsc.util.Position,msg: String)Unit">incompleteInputError</a>(<a href="#527826" title="Scanners.this.global.CompilationUnit">unit</a>.<a href="../../CompilationUnits.scala.html#45683" title="(pos: Int)scala.tools.nsc.util.Position">position</a>(<a href="#527873" title="Scanners.this.Offset">off</a>), <a href="#527874" title="String">msg</a>)
    <span class="keyword">def</span> <a title="(off: Scanners.this.Offset,msg: String)Unit" id="527768">deprecationWarning</a>(<a title="Scanners.this.Offset" id="527883">off</a>: <span title="Scanners.this.Offset">Offset</span>, <a title="String" id="527884">msg</a>: <span title="String">String</span>) = <a href="#527826" title="Scanners.this.global.CompilationUnit">unit</a>.<a href="../../CompilationUnits.scala.html#45689" title="(pos: scala.tools.nsc.util.Position,msg: String)Unit">deprecationWarning</a>(<a href="#527826" title="Scanners.this.global.CompilationUnit">unit</a>.<a href="../../CompilationUnits.scala.html#45683" title="(pos: Int)scala.tools.nsc.util.Position">position</a>(<a href="#527883" title="Scanners.this.Offset">off</a>), <a href="#527884" title="String">msg</a>)

    <span class="keyword">private</span> <span class="keyword">var</span> <a title="List[scala.tools.nsc.ast.parser.BracePatch]" id="527770">bracePatches</a>: <span title="List[scala.tools.nsc.ast.parser.BracePatch]">List</span>[BracePatch] = <a href="#527827" title="List[scala.tools.nsc.ast.parser.BracePatch]">patches</a>

    <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Scanners.this.ParensAnalyzer" id="527773">parensAnalyzer</a> = <span title="Scanners.this.ParensAnalyzer" class="keyword">new</span> <a href="#39931" title="Scanners.this.ParensAnalyzer">ParensAnalyzer</a>(<a href="#527826" title="Scanners.this.global.CompilationUnit">unit</a>, List<span title="object Nil">(</span>))

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(token: Int)Int" id="527774">parenBalance</a>(<a title="Int" id="527891">token</a>: <span title="Int">Int</span>) = <a href="#527772" title="=&gt; Scanners.this.ParensAnalyzer">parensAnalyzer</a>.<a href="#527794" title="(key: Int)Int">balance</a>(<a href="#527891" title="Int">token</a>)

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="()List[scala.tools.nsc.ast.parser.BracePatch]" id="527775">healBraces</a>(): <span title="List[scala.tools.nsc.ast.parser.BracePatch]">List</span>[BracePatch] = {
      <span class="keyword">var</span> <a title="List[scala.tools.nsc.ast.parser.BracePatch]" id="527982">patches</a>: <span title="List[scala.tools.nsc.ast.parser.BracePatch]">List</span>[BracePatch] = List<span title="object Nil">(</span>)
      <span title="Unit" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="#527772" title="=&gt; Scanners.this.ParensAnalyzer">parensAnalyzer</a>.<a href="#527801" title="=&gt; Boolean">tabSeen</a>) {
        <span class="keyword">var</span> <a title="Int" id="527992">bal</a> = <a href="#527772" title="=&gt; Scanners.this.ParensAnalyzer">parensAnalyzer</a>.<a href="#527794" title="(key: Int)Int">balance</a>(<span title="Int(95)">RBRACE</span>)
        <span title="Unit" class="keyword">while</span> (<a href="#527992" title="(x$1: Int)Boolean">bal</a> &lt; <span title="Int(0)" class="int">0</span>) <a href="#527993" title="()Unit">{</a>
          <a href="#527982" title="List[scala.tools.nsc.ast.parser.BracePatch]">patches</a> = <span title="Scanners.this.ParensAnalyzer" class="keyword">new</span> <a href="#39931" title="Scanners.this.ParensAnalyzer">ParensAnalyzer</a>(<a href="#527826" title="Scanners.this.global.CompilationUnit">unit</a>, <a href="#527982" title="List[scala.tools.nsc.ast.parser.BracePatch]">patches</a>).<a href="#527808" title="()List[scala.tools.nsc.ast.parser.BracePatch]">insertRBrace</a>()
          <a href="#527992" title="Int">bal</a> += <span title="Int(1)" class="int">1</span>
        }
        <span title="Unit" class="keyword">while</span> (<a href="#527992" title="(x$1: Int)Boolean">bal</a> &gt; <span title="Int(0)" class="int">0</span>) <a href="#528056" title="()Unit">{</a>
          <a href="#527982" title="List[scala.tools.nsc.ast.parser.BracePatch]">patches</a> = <span title="Scanners.this.ParensAnalyzer" class="keyword">new</span> <a href="#39931" title="Scanners.this.ParensAnalyzer">ParensAnalyzer</a>(<a href="#527826" title="Scanners.this.global.CompilationUnit">unit</a>, <a href="#527982" title="List[scala.tools.nsc.ast.parser.BracePatch]">patches</a>).<a href="#527809" title="()List[scala.tools.nsc.ast.parser.BracePatch]">deleteRBrace</a>()
          <a href="#527992" title="Int">bal</a> -= <span title="Int(1)" class="int">1</span>
        }
      }
      <a href="#527982" title="List[scala.tools.nsc.ast.parser.BracePatch]">patches</a>
    }

    /** Insert or delete a brace, if a patch exists for this offset */
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Boolean" id="527776">applyBracePatch</a>(): <span title="Boolean">Boolean</span> = {
      <span title="Boolean" class="keyword">if</span> (<a href="#527770" title="=&gt; List[scala.tools.nsc.ast.parser.BracePatch]">bracePatches</a>.<span title="(x$1: Boolean)Boolean">isEmpty</span> || <a href="#527770" title="=&gt; List[scala.tools.nsc.ast.parser.BracePatch]">bracePatches</a>.<span title="=&gt; scala.tools.nsc.ast.parser.BracePatch">head</span>.<a href="BracePatch.scala.html#78557" title="(x$1: Int)Boolean">off</a> != <a href="#122273" title="=&gt; Scanners.this.Offset">offset</a>) <span title="Boolean(false)" class="keyword">false</span>
      <span class="keyword">else</span> {
        <span class="keyword">val</span> <a title="scala.tools.nsc.ast.parser.BracePatch" id="528112">patch</a> = <a href="#527770" title="=&gt; List[scala.tools.nsc.ast.parser.BracePatch]">bracePatches</a>.<span title="=&gt; scala.tools.nsc.ast.parser.BracePatch">head</span>
        <a href="#527770" title="(x$1: List[scala.tools.nsc.ast.parser.BracePatch])Unit">bracePatches</a> = <a href="#527770" title="=&gt; List[scala.tools.nsc.ast.parser.BracePatch]">bracePatches</a>.<span title="=&gt; List[scala.tools.nsc.ast.parser.BracePatch]">tail</span>
//        println(&quot;applying brace patch &quot;+offset)//DEBUG
        <span title="Boolean" class="keyword">if</span> (<a href="#528112" title="scala.tools.nsc.ast.parser.BracePatch">patch</a>.<a href="BracePatch.scala.html#78559" title="=&gt; Boolean">inserted</a>) {
          <a href="#122287" title="(td: Scanners.this.TokenData)Unit">next</a> copyFrom <a href="#39930" title="Scanners.this.UnitScanner" class="keyword">this</a>
          <a href="#527766" title="(off: Scanners.this.Offset,msg: String)Unit">error</a>(<a href="#122273" title="=&gt; Scanners.this.Offset">offset</a>, <span title="java.lang.String(&quot;Missing closing brace `}' assumed here&quot;)" class="string">&quot;Missing closing brace `}' assumed here&quot;</span>)
          <a href="#122270" title="(x$1: Int)Unit">token</a> = <span title="Int(95)">RBRACE</span>
          <span title="Boolean(true)" class="keyword">true</span>
        } <span class="keyword">else</span> {
          <a href="#527766" title="(off: Scanners.this.Offset,msg: String)Unit">error</a>(<a href="#122273" title="=&gt; Scanners.this.Offset">offset</a>, <span title="java.lang.String(&quot;Unmatched closing brace '}' ignored here&quot;)" class="string">&quot;Unmatched closing brace '}' ignored here&quot;</span>)
          <a href="#122241" title="()Unit">fetchToken</a>()
          <span title="Boolean(false)" class="keyword">false</span>
        }
      }
    }
  }

  <span class="keyword">class</span> <a title="class ParensAnalyzer extends Scanners.this.UnitScanner with ScalaObject" id="39931">ParensAnalyzer</a><span title="ScalaObject">(</span><a title="Scanners.this.global.CompilationUnit" id="527813">unit</a>: <a href="../../CompilationUnits.scala.html#39428" title="Scanners.this.global.CompilationUnit">CompilationUnit</a>, <a title="List[scala.tools.nsc.ast.parser.BracePatch]" id="527814">patches</a>: <span title="List[scala.tools.nsc.ast.parser.BracePatch]">List</span>[BracePatch]) <span class="keyword">extends</span> <a href="#39930" title="Scanners.this.UnitScanner">UnitScanner</a>(<a href="#527813" title="Scanners.this.global.CompilationUnit">unit</a>, <a href="#527814" title="List[scala.tools.nsc.ast.parser.BracePatch]">patches</a>) {
    <span class="keyword">var</span> <a title="scala.collection.mutable.Map[Int,Int]" id="527794">balance</a> = collection.mutable.<span title="(elems: (Int, Int)*)scala.collection.mutable.Map[Int,Int]">Map</span>(<span title="(y: Int)(Int, Int)">RPAREN</span> -&gt; <span title="Int(0)" class="int">0</span>, <span title="(y: Int)(Int, Int)">RBRACKET</span> -&gt; <span title="Int(0)" class="int">0</span>, <span title="(y: Int)(Int, Int)">RBRACE</span> -&gt; <span title="Int(0)" class="int">0</span>)

    <a href="#122267" title="()Unit">init</a>()
    
    /** The offset of the first token on this line, or next following line if blank
     */
    <span class="keyword">val</span> <a title="scala.collection.mutable.ArrayBuffer[Int]" id="527796">lineStart</a> = <a title="()scala.collection.mutable.ArrayBuffer[Int]" id="108940" class="keyword">new</a> <a title="scala.collection.mutable.ArrayBuffer[Int]" id="25155">ArrayBuffer</a>[Int]

    /** The list of matching top-level brace pairs (each of which may contain nested brace pairs).
     */
    <span class="keyword">val</span> <a title="List[scala.tools.nsc.ast.parser.BracePair]" id="527798">bracePairs</a>: <span title="List[scala.tools.nsc.ast.parser.BracePair]">List</span>[BracePair] = {

      <span class="keyword">var</span> <a title="Int" id="528151">lineCount</a> = <span title="Int(1)" class="int">1</span>
      <span class="keyword">var</span> <a title="Int" id="528152">lastOffset</a> = <span title="Int(0)" class="int">0</span>
      <span class="keyword">var</span> <a title="Int" id="528153">indent</a> = <span title="Int(0)" class="int">0</span>
      <span class="keyword">val</span> <a title="scala.collection.mutable.Map[Int,Int]" id="528154">oldBalance</a> = collection.mutable.<span title="[A, B](elems: (A, B)*)scala.collection.mutable.Map[A,B]">Map</span><span title="(elems: (Int, Int)*)scala.collection.mutable.Map[Int,Int]">[</span><span title="Int">Int</span>, <span title="Int">Int</span>]()
      <span class="keyword">def</span> <a title="()Unit" id="528155">markBalance</a>() = <span class="keyword">for</span> ((<a title="Int" id="528192">k</a>, <a title="Int" id="528193">v</a>) &lt;- <a href="#527794" title="(f: ((Int, Int)) =&gt; Unit)Unit" id="25412">balance</a>) <a href="#528154" title="(key: Int,value: Int)Unit">oldBalance</a>(<a href="#528192" title="Int">k</a>) = <a href="#528193" title="Int">v</a>
      <a href="#528155" title="()Unit">markBalance</a>()

      <span class="keyword">def</span> <a title="(bpbuf: scala.collection.mutable.ListBuffer[scala.tools.nsc.ast.parser.BracePair])(Int, Int)" id="528156">scan</a>(<a title="scala.collection.mutable.ListBuffer[scala.tools.nsc.ast.parser.BracePair]" id="528205">bpbuf</a>: <span title="scala.collection.mutable.ListBuffer[scala.tools.nsc.ast.parser.BracePair]">ListBuffer</span>[BracePair]): <span title="(Int, Int)">(</span>Int, Int) = {
        <span title="Unit" class="keyword">if</span> (<a href="#122270" title="(x$1: Int)Boolean">token</a> <span title="(x$1: Boolean)Boolean">!=</span> <span title="Int(78)">NEWLINE</span> &amp;&amp; <a href="#122270" title="(x$1: Int)Boolean">token</a> != <span title="Int(79)">NEWLINES</span>) {
          <span title="Unit" class="keyword">while</span> (<a href="#528152" title="(x$1: Int)Boolean">lastOffset</a> &lt; <a href="#122273" title="=&gt; Scanners.this.Offset">offset</a>) <a href="#528222" title="()Unit">{</a>
            <span title="Unit" class="keyword">if</span> (<a href="#527761" title="(i: Int)Char">buf</a><span title="(x$1: Char)Boolean">(</span><a href="#528152" title="Int">lastOffset</a>) == <span title="Char('\012')">LF</span>) <a href="#528151" title="Int">lineCount</a> += <span title="Int(1)" class="int">1</span>
            <a href="#528152" title="Int">lastOffset</a> += <span title="Int(1)" class="int">1</span>
          }
          <span title="Unit" class="keyword">while</span> (<a href="#528151" title="(x$1: Int)Boolean">lineCount</a> &gt; <a href="#527796" title="=&gt; scala.collection.mutable.ArrayBuffer[Int]">lineStart</a>.<span title="=&gt; Int">length</span>) <a href="#528315" title="()Unit">{</a>
            <a href="#527796" title="(elem: Int)ParensAnalyzer.this.lineStart.type" id="108944">lineStart</a> += <a href="#122273" title="=&gt; Scanners.this.Offset">offset</a>
            // reset indentation unless there are new opening brackets or
            // braces since last ident line and at the same time there
            // are no new braces.
            <span title="Unit" class="keyword">if</span> (<a href="#527794" title="(key: Int)Int">balance</a><span title="(x$1: Int)Boolean">(</span><span title="Int(91)">RPAREN</span>) <span title="(x$1: Boolean)Boolean">&gt;=</span> <a href="#528154" title="(key: Int)Int">oldBalance</a>(<span title="Int(91)">RPAREN</span>) <span title="(x$1: Boolean)Boolean">&amp;&amp;</span>
                <a href="#527794" title="(key: Int)Int">balance</a><span title="(x$1: Int)Boolean">(</span><span title="Int(93)">RBRACKET</span>) &gt;= <a href="#528154" title="(key: Int)Int">oldBalance</a>(<span title="Int(93)">RBRACKET</span>) ||
                <a href="#527794" title="(key: Int)Int">balance</a><span title="(x$1: Int)Boolean">(</span><span title="Int(95)">RBRACE</span>) != <a href="#528154" title="(key: Int)Int">oldBalance</a>(<span title="Int(95)">RBRACE</span>)) {
              <a href="#528153" title="Int">indent</a> = <a href="#527804" title="(offset: Int)Int">column</a>(<a href="#122273" title="=&gt; Scanners.this.Offset">offset</a>)
              <a href="#528155" title="()Unit">markBalance</a>()
            }
          }
        }

        <a href="#122270" title="=&gt; Int">token</a> <span title="(Int, Int)" class="keyword">match</span> {
          <span title="(Int, Int)" class="keyword">case</span> <span title="Int(90)">LPAREN</span> =&gt; 
            <a href="#527794" title="=&gt; scala.collection.mutable.Map[Int,Int]">balance</a><span title="(x$1: Int)Int">(</span><span title="Int(91)">RPAREN</span>) -= <span title="Int(1)" class="int">1</span>; <a href="#122238" title="()Unit">nextToken</a>(); <a href="#528156" title="(bpbuf: scala.collection.mutable.ListBuffer[scala.tools.nsc.ast.parser.BracePair])(Int, Int)">scan</a>(<a href="#528205" title="scala.collection.mutable.ListBuffer[scala.tools.nsc.ast.parser.BracePair]">bpbuf</a>) 
          <span title="(Int, Int)" class="keyword">case</span> <span title="Int(92)">LBRACKET</span> =&gt; 
            <a href="#527794" title="=&gt; scala.collection.mutable.Map[Int,Int]">balance</a><span title="(x$1: Int)Int">(</span><span title="Int(93)">RBRACKET</span>) -= <span title="Int(1)" class="int">1</span>; <a href="#122238" title="()Unit">nextToken</a>(); <a href="#528156" title="(bpbuf: scala.collection.mutable.ListBuffer[scala.tools.nsc.ast.parser.BracePair])(Int, Int)">scan</a>(<a href="#528205" title="scala.collection.mutable.ListBuffer[scala.tools.nsc.ast.parser.BracePair]">bpbuf</a>) 
          <span title="(Int, Int)" class="keyword">case</span> <span title="Int(91)">RPAREN</span> =&gt; 
            <a href="#527794" title="=&gt; scala.collection.mutable.Map[Int,Int]">balance</a><span title="(x$1: Int)Int">(</span><span title="Int(91)">RPAREN</span>) += <span title="Int(1)" class="int">1</span>; <a href="#122238" title="()Unit">nextToken</a>(); <a href="#528156" title="(bpbuf: scala.collection.mutable.ListBuffer[scala.tools.nsc.ast.parser.BracePair])(Int, Int)">scan</a>(<a href="#528205" title="scala.collection.mutable.ListBuffer[scala.tools.nsc.ast.parser.BracePair]">bpbuf</a>)
          <span title="(Int, Int)" class="keyword">case</span> <span title="Int(93)">RBRACKET</span> =&gt; 
            <a href="#527794" title="=&gt; scala.collection.mutable.Map[Int,Int]">balance</a><span title="(x$1: Int)Int">(</span><span title="Int(93)">RBRACKET</span>) += <span title="Int(1)" class="int">1</span>; <a href="#122238" title="()Unit">nextToken</a>(); <a href="#528156" title="(bpbuf: scala.collection.mutable.ListBuffer[scala.tools.nsc.ast.parser.BracePair])(Int, Int)">scan</a>(<a href="#528205" title="scala.collection.mutable.ListBuffer[scala.tools.nsc.ast.parser.BracePair]">bpbuf</a>)
          <span title="(Int, Int)" class="keyword">case</span> <span title="Int(94)">LBRACE</span> =&gt;  
            <a href="#527794" title="=&gt; scala.collection.mutable.Map[Int,Int]">balance</a><span title="(x$1: Int)Int">(</span><span title="Int(95)">RBRACE</span>) -= <span title="Int(1)" class="int">1</span>
            <span class="keyword">val</span> <a title="Int" id="528779">lc</a> = <a href="#528151" title="Int">lineCount</a>
            <span class="keyword">val</span> <a title="Scanners.this.Offset" id="528780">loff</a> = <a href="#122273" title="=&gt; Scanners.this.Offset">offset</a>
            <span class="keyword">val</span> <a title="Int" id="528781">lindent</a> = <a href="#528153" title="Int">indent</a>
            <span class="keyword">val</span> <a title="scala.collection.mutable.ListBuffer[scala.tools.nsc.ast.parser.BracePair]" id="528782">bpbuf1</a> = <span title="scala.collection.mutable.ListBuffer[scala.tools.nsc.ast.parser.BracePair]" class="keyword">new</span> <span title="scala.collection.mutable.ListBuffer[scala.tools.nsc.ast.parser.BracePair]">ListBuffer</span>[BracePair]
            <a href="#122238" title="()Unit">nextToken</a>()
            <span class="keyword">val</span> <a href="#528784" title="(Int, Int)">(</a><a href="#528783" title="Int" id="528784">roff</a>, <a href="#528783" title="Int" id="528785">rindent</a>) = <a href="#528156" title="(bpbuf: scala.collection.mutable.ListBuffer[scala.tools.nsc.ast.parser.BracePair])(Int, Int)">scan</a><span title="(Int, Int) @unchecked">(</span><a href="#528782" title="scala.collection.mutable.ListBuffer[scala.tools.nsc.ast.parser.BracePair]">bpbuf1</a>)
            <span title="Any" class="keyword">if</span> (<a href="#528779" title="(x$1: Int)Boolean">lc</a> != <a href="#528151" title="Int">lineCount</a>)
              <a href="#528205" title="(x: scala.tools.nsc.ast.parser.BracePair)bpbuf.type">bpbuf</a> += <a href="BracePair.scala.html#41654" title="(loff: Int,lindent: Int,roff: Int,rindent: Int,nested: List[scala.tools.nsc.ast.parser.BracePair])scala.tools.nsc.ast.parser.BracePair">BracePair</a>(<a href="#528780" title="Scanners.this.Offset">loff</a>, <a href="#528781" title="Int">lindent</a>, <a href="#528784" title="Int">roff</a>, <a href="#528785" title="Int">rindent</a>, <a href="#528782" title="scala.collection.mutable.ListBuffer[scala.tools.nsc.ast.parser.BracePair]">bpbuf1</a>.<span title="=&gt; List[scala.tools.nsc.ast.parser.BracePair]">toList</span>)
            <a href="#528156" title="(bpbuf: scala.collection.mutable.ListBuffer[scala.tools.nsc.ast.parser.BracePair])(Int, Int)">scan</a>(<a href="#528205" title="scala.collection.mutable.ListBuffer[scala.tools.nsc.ast.parser.BracePair]">bpbuf</a>)
          <span title="(Scanners.this.Offset, Int)" class="keyword">case</span> <span title="Int(95)">RBRACE</span> =&gt;
            <a href="#527794" title="=&gt; scala.collection.mutable.Map[Int,Int]">balance</a><span title="(x$1: Int)Int">(</span><span title="Int(95)">RBRACE</span>) += <span title="Int(1)" class="int">1</span>
            <span class="keyword">val</span> <a title="Scanners.this.Offset" id="528952">off</a> = <a href="#122273" title="=&gt; Scanners.this.Offset">offset</a>; <a href="#122238" title="()Unit">nextToken</a>(); <span title="(_1: Scanners.this.Offset,_2: Int)(Scanners.this.Offset, Int)">(</span><a href="#528952" title="Scanners.this.Offset">off</a>, <a href="#528153" title="Int">indent</a>)
          <span title="(Int, Int)" class="keyword">case</span> <span title="Int(0)">EOF</span> =&gt;
            <span title="(_1: Int,_2: Int)(Int, Int)">(</span><span title="Int(-1)">-</span><span class="int">1</span>, <span title="Int(-1)">-</span><span class="int">1</span>)
          <span title="(Int, Int)" class="keyword">case</span> _ =&gt;
            <a href="#122238" title="()Unit">nextToken</a>(); <a href="#528156" title="(bpbuf: scala.collection.mutable.ListBuffer[scala.tools.nsc.ast.parser.BracePair])(Int, Int)">scan</a>(<a href="#528205" title="scala.collection.mutable.ListBuffer[scala.tools.nsc.ast.parser.BracePair]">bpbuf</a>)
        }
      }

      <span class="keyword">val</span> <a title="scala.collection.mutable.ListBuffer[scala.tools.nsc.ast.parser.BracePair]" id="528157">bpbuf</a> = <span title="scala.collection.mutable.ListBuffer[scala.tools.nsc.ast.parser.BracePair]" class="keyword">new</span> <span title="scala.collection.mutable.ListBuffer[scala.tools.nsc.ast.parser.BracePair]">ListBuffer</span>[BracePair]
      <span title="Unit" class="keyword">while</span> (<a href="#122270" title="(x$1: Int)Boolean">token</a> != <span title="Int(0)">EOF</span>) <a href="#528159" title="()Unit">{</a>
        <span class="keyword">val</span> <a href="#529060" title="(Int, Int)">(</a><a href="#529059" title="Int" id="529060">roff</a>, <a href="#529059" title="Int" id="529061">rindent</a>) = <a href="#528156" title="(bpbuf: scala.collection.mutable.ListBuffer[scala.tools.nsc.ast.parser.BracePair])(Int, Int)">scan</a><span title="(Int, Int) @unchecked">(</span><a href="#528157" title="scala.collection.mutable.ListBuffer[scala.tools.nsc.ast.parser.BracePair]">bpbuf</a>)
        <span title="Any" class="keyword">if</span> (<a href="#529060" title="(x$1: Int)Boolean">roff</a> != <span title="Int(-1)">-</span><span class="int">1</span>) {
          <span class="keyword">val</span> <a title="scala.tools.nsc.ast.parser.BracePair" id="529086">current</a> = <a href="BracePair.scala.html#41654" title="(loff: Int,lindent: Int,roff: Int,rindent: Int,nested: List[scala.tools.nsc.ast.parser.BracePair])scala.tools.nsc.ast.parser.BracePair">BracePair</a>(<span title="Int(-1)">-</span><span class="int">1</span>, <span title="Int(-1)">-</span><span class="int">1</span>, <a href="#529060" title="Int">roff</a>, <a href="#529061" title="Int">rindent</a>, <a href="#528157" title="scala.collection.mutable.ListBuffer[scala.tools.nsc.ast.parser.BracePair]">bpbuf</a>.<span title="=&gt; List[scala.tools.nsc.ast.parser.BracePair]">toList</span>)
          <a href="#528157" title="scala.collection.mutable.ListBuffer[scala.tools.nsc.ast.parser.BracePair]">bpbuf</a>.<a title="()Unit" id="61854">clear</a>()
          <a href="#528157" title="(x: scala.tools.nsc.ast.parser.BracePair)bpbuf.type">bpbuf</a> += <a href="#529086" title="scala.tools.nsc.ast.parser.BracePair">current</a>
        }
      }

      <span class="keyword">def</span> <a title="(bp: scala.tools.nsc.ast.parser.BracePair,indent: Int)Unit" id="528158">printBP</a>(<a title="scala.tools.nsc.ast.parser.BracePair" id="529150">bp</a>: <a href="BracePair.scala.html#12578" title="scala.tools.nsc.ast.parser.BracePair">BracePair</a>, <a title="Int" id="529151">indent</a>: <span title="Int">Int</span>) {
        <a title="(x: Any)Unit" id="8126">println</a>(<a title="(n: Int)String" id="8170" class="string">&quot; &quot;</a><span title="(x$1: Any)java.lang.String">*</span><a href="#529151" title="Int">indent</a><span title="(x$1: Any)java.lang.String">+</span><a href="#527803" title="(offset: Int)Int">line</a>(<a href="#529150" title="scala.tools.nsc.ast.parser.BracePair">bp</a>.<a href="BracePair.scala.html#41590" title="=&gt; Int">loff</a>)<span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot;:&quot;)" class="string">&quot;:&quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#529150" title="scala.tools.nsc.ast.parser.BracePair">bp</a>.<a href="BracePair.scala.html#41592" title="=&gt; Int">lindent</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot; to &quot;)" class="string">&quot; to &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#527803" title="(offset: Int)Int">line</a>(<a href="#529150" title="scala.tools.nsc.ast.parser.BracePair">bp</a>.<a href="BracePair.scala.html#41594" title="=&gt; Int">roff</a>)<span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot;:&quot;)" class="string">&quot;:&quot;</span>+<a href="#529150" title="scala.tools.nsc.ast.parser.BracePair">bp</a>.<a href="BracePair.scala.html#41596" title="=&gt; Int">rindent</a>)
        <span title="Unit" class="keyword">if</span> (<a href="#529150" title="scala.tools.nsc.ast.parser.BracePair">bp</a>.<a href="BracePair.scala.html#41598" title="=&gt; List[scala.tools.nsc.ast.parser.BracePair]">nested</a>.<a title="=&gt; Boolean" id="25377">nonEmpty</a>) 
          <span class="keyword">for</span> (<a title="scala.tools.nsc.ast.parser.BracePair" id="529207">bp1</a> &lt;- <a href="#529150" title="scala.tools.nsc.ast.parser.BracePair">bp</a>.<a href="BracePair.scala.html#41598" title="(f: (scala.tools.nsc.ast.parser.BracePair) =&gt; Unit)Unit" id="29118">nested</a>) {
            <a href="#528158" title="(bp: scala.tools.nsc.ast.parser.BracePair,indent: Int)Unit">printBP</a>(<a href="#529207" title="scala.tools.nsc.ast.parser.BracePair">bp1</a>, <a href="#529151" title="(x$1: Int)Int">indent</a> + <span title="Int(2)" class="int">2</span>)
          }
      }
//      println(&quot;lineStart = &quot;+lineStart)//DEBUG
//      println(&quot;bracepairs = &quot;)
//      for (bp &lt;- bpbuf.toList) printBP(bp, 0)
      <a href="#528157" title="scala.collection.mutable.ListBuffer[scala.tools.nsc.ast.parser.BracePair]">bpbuf</a>.<span title="=&gt; List[scala.tools.nsc.ast.parser.BracePair]">toList</span>
    }

    <span class="keyword">var</span> <a title="Boolean" id="527801">tabSeen</a> = <span title="Boolean(false)" class="keyword">false</span>

    <span class="keyword">def</span> <a title="(offset: Int)Int" id="527803">line</a>(<a title="Int" id="529169">offset</a>: <span title="Int">Int</span>): <span title="Int">Int</span> = {
      <span class="keyword">def</span> <a title="(lo: Int,hi: Int)Int" id="529235">findLine</a>(<a title="Int" id="529236">lo</a>: <span title="Int">Int</span>, <a title="Int" id="529237">hi</a>: <span title="Int">Int</span>): <span title="Int">Int</span> = {
        <span class="keyword">val</span> <a title="Int" id="529238">mid</a> = <span title="(x$1: Int)Int">(</span><a href="#529236" title="(x$1: Int)Int">lo</a> + <a href="#529237" title="Int">hi</a>) / <span title="Int(2)" class="int">2</span>
        <span title="Int" class="keyword">if</span> (<a href="#529169" title="(x$1: Int)Boolean">offset</a> &lt; <a href="#527796" title="(idx: Int)Int">lineStart</a>(<a href="#529238" title="Int">mid</a>)) <a href="#529235" title="(lo: Int,hi: Int)Int">findLine</a>(<a href="#529236" title="Int">lo</a>, <a href="#529238" title="(x$1: Int)Int">mid</a> - <span title="Int(1)" class="int">1</span>)
        <span class="keyword">else</span> <span title="Int" class="keyword">if</span> (<a href="#529238" title="(x$1: Int)Int">mid</a> <span title="(x$1: Int)Boolean">+</span> <span title="Int(1)" class="int">1</span> <span title="(x$1: Boolean)Boolean">&lt;</span> <a href="#527796" title="=&gt; scala.collection.mutable.ArrayBuffer[Int]">lineStart</a>.<span title="=&gt; Int">length</span> &amp;&amp; <a href="#529169" title="(x$1: Int)Boolean">offset</a> &gt;= <a href="#527796" title="(idx: Int)Int">lineStart</a>(<a href="#529238" title="(x$1: Int)Int">mid</a> + <span title="Int(1)" class="int">1</span>)) <a href="#529235" title="(lo: Int,hi: Int)Int">findLine</a>(<a href="#529238" title="(x$1: Int)Int">mid</a> + <span title="Int(1)" class="int">1</span>, <a href="#529237" title="Int">hi</a>)
        <span class="keyword">else</span> <a href="#529238" title="Int">mid</a>
      }
      <span title="Int" class="keyword">if</span> (<a href="#529169" title="(x$1: Int)Boolean">offset</a> &lt;= <span title="Int(0)" class="int">0</span>) <span title="Int(0)" class="int">0</span>
      <span class="keyword">else</span> <a href="#529235" title="(lo: Int,hi: Int)Int">findLine</a>(<span title="Int(0)" class="int">0</span>, <a href="#527796" title="=&gt; scala.collection.mutable.ArrayBuffer[Int]">lineStart</a>.<span title="(x$1: Int)Int">length</span> - <span title="Int(1)" class="int">1</span>)
    }

    <span class="keyword">def</span> <a title="(offset: Int)Int" id="527804">column</a>(<a title="Int" id="528463">offset</a>: <span title="Int">Int</span>): <span title="Int">Int</span> = {
      <span class="keyword">var</span> <a title="Int" id="529387">col</a> = <span title="Int(0)" class="int">0</span>
      <span class="keyword">var</span> <a title="Int" id="529388">i</a> = <a href="#528463" title="(x$1: Int)Int">offset</a> - <span title="Int(1)" class="int">1</span>
      <span title="Unit" class="keyword">while</span> (<a href="#529388" title="(x$1: Int)Boolean">i</a> <span title="(x$1: Boolean)Boolean">&gt;=</span> <span title="Int(0)" class="int">0</span> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> <a href="#527761" title="(i: Int)Char">buf</a><span title="(x$1: Char)Boolean">(</span><a href="#529388" title="Int">i</a>) != <span title="Char('\015')">CR</span> &amp;&amp; <a href="#527761" title="(i: Int)Char">buf</a><span title="(x$1: Char)Boolean">(</span><a href="#529388" title="Int">i</a>) != <span title="Char('\012')">LF</span>) <a href="#529389" title="()Unit">{</a>
        <span title="Unit" class="keyword">if</span> (<a href="#527761" title="(i: Int)Char">buf</a><span title="(x$1: Char)Boolean">(</span><a href="#529388" title="Int">i</a>) == <span title="Char('\011')" class="char">'\t'</span>) <a href="#527801" title="(x$1: Boolean)Unit">tabSeen</a> = <span title="Boolean(true)" class="keyword">true</span>
        <a href="#529387" title="Int">col</a> += <span title="Int(1)" class="int">1</span>
        <a href="#529388" title="Int">i</a> -= <span title="Int(1)" class="int">1</span>
      }
      <a href="#529387" title="Int">col</a>
    }

    <span class="keyword">def</span> <a title="(patches: List[scala.tools.nsc.ast.parser.BracePatch],patch: scala.tools.nsc.ast.parser.BracePatch)List[scala.tools.nsc.ast.parser.BracePatch]" id="527805">insertPatch</a>(<a title="List[scala.tools.nsc.ast.parser.BracePatch]" id="529522">patches</a>: <span title="List[scala.tools.nsc.ast.parser.BracePatch]">List</span>[BracePatch], <a title="scala.tools.nsc.ast.parser.BracePatch" id="529523">patch</a>: <a href="BracePatch.scala.html#12347" title="scala.tools.nsc.ast.parser.BracePatch">BracePatch</a>): <span title="List[scala.tools.nsc.ast.parser.BracePatch]">List</span>[BracePatch] = <a href="#529522" title="List[scala.tools.nsc.ast.parser.BracePatch]">patches</a> <span title="List[scala.tools.nsc.ast.parser.BracePatch]" class="keyword">match</span> {
      <span title="List[scala.tools.nsc.ast.parser.BracePatch]" class="keyword">case</span> <a href="#529526" title="(x: List[scala.tools.nsc.ast.parser.BracePatch])Some[List[scala.tools.nsc.ast.parser.BracePatch]]">List</a>() =&gt; <a title="(xs: scala.tools.nsc.ast.parser.BracePatch*)List[scala.tools.nsc.ast.parser.BracePatch]" id="24478">List</a>(<a href="#529523" title="scala.tools.nsc.ast.parser.BracePatch">patch</a>)
      <span title="List[scala.tools.nsc.ast.parser.BracePatch]" class="keyword">case</span> <a title="scala.tools.nsc.ast.parser.BracePatch" id="529549">bp</a> :: <a title="List[scala.tools.nsc.ast.parser.BracePatch]" id="529550">bps</a> =&gt; <span title="List[scala.tools.nsc.ast.parser.BracePatch]" class="keyword">if</span> (<a href="#529523" title="scala.tools.nsc.ast.parser.BracePatch">patch</a>.<a href="BracePatch.scala.html#78557" title="(x$1: Int)Boolean">off</a> &lt; <a href="#529549" title="scala.tools.nsc.ast.parser.BracePatch">bp</a>.<a href="BracePatch.scala.html#78557" title="=&gt; Int">off</a>) <a href="#529523" title="scala.tools.nsc.ast.parser.BracePatch">patch</a> <a href="#529559" title="scala.tools.nsc.ast.parser.BracePatch">::</a> <a href="#529522" title="(x: scala.tools.nsc.ast.parser.BracePatch)List[scala.tools.nsc.ast.parser.BracePatch]">patches</a>
                        <span class="keyword">else</span> <a href="#529549" title="scala.tools.nsc.ast.parser.BracePatch">bp</a> <a href="#529567" title="scala.tools.nsc.ast.parser.BracePatch">::</a> <a href="#527805" title="(patches: List[scala.tools.nsc.ast.parser.BracePatch],patch: scala.tools.nsc.ast.parser.BracePatch)List[scala.tools.nsc.ast.parser.BracePatch]">insertPatch</a><span title="(x: scala.tools.nsc.ast.parser.BracePatch)List[scala.tools.nsc.ast.parser.BracePatch]">(</span><a href="#529550" title="List[scala.tools.nsc.ast.parser.BracePatch]">bps</a>, <a href="#529523" title="scala.tools.nsc.ast.parser.BracePatch">patch</a>)
    }    
    
    <span class="keyword">def</span> <a title="(offset: Int)Int" id="527806">leftColumn</a>(<a title="Int" id="529577">offset</a>: <span title="Int">Int</span>) = 
      <span title="Int" class="keyword">if</span> (<a href="#529577" title="(x$1: Int)Boolean">offset</a> == <span title="Int(-1)">-</span><span class="int">1</span>) <span title="Int(-1)">-</span><span class="int">1</span> <span class="keyword">else</span> <a href="#527804" title="(offset: Int)Int">column</a>(<a href="#527796" title="(idx: Int)Int">lineStart</a>(<a href="#527803" title="(offset: Int)Int">line</a>(<a href="#529577" title="Int">offset</a>)))

    <span class="keyword">def</span> <a title="(offset: Int,default: Int)Int" id="527807">rightColumn</a>(<a title="Int" id="529599">offset</a>: <span title="Int">Int</span>, <a title="Int" id="529600">default</a>: <span title="Int">Int</span>) = 
      <span title="Int" class="keyword">if</span> (<a href="#529599" title="(x$1: Int)Boolean">offset</a> == <span title="Int(-1)">-</span><span class="int">1</span>) <span title="Int(-1)">-</span><span class="int">1</span> 
      <span class="keyword">else</span> {
        <span class="keyword">val</span> <a title="Int" id="529609">rlin</a> = <a href="#527803" title="(offset: Int)Int">line</a>(<a href="#529599" title="Int">offset</a>)
        <span title="Int" class="keyword">if</span> (<a href="#527796" title="(idx: Int)Int">lineStart</a><span title="(x$1: Int)Boolean">(</span><a href="#529609" title="Int">rlin</a>) == <a href="#529599" title="Int">offset</a>) <a href="#527804" title="(offset: Int)Int">column</a>(<a href="#529599" title="Int">offset</a>)
        <span class="keyword">else</span> <span title="Int" class="keyword">if</span> (<a href="#529609" title="(x$1: Int)Int">rlin</a> <span title="(x$1: Int)Boolean">+</span> <span title="Int(1)" class="int">1</span> &lt; <a href="#527796" title="=&gt; scala.collection.mutable.ArrayBuffer[Int]">lineStart</a>.<span title="=&gt; Int">length</span>) <a href="#527804" title="(offset: Int)Int">column</a>(<a href="#527796" title="(idx: Int)Int">lineStart</a>(<a href="#529609" title="(x$1: Int)Int">rlin</a> + <span title="Int(1)" class="int">1</span>))
        <span class="keyword">else</span> <a href="#529600" title="Int">default</a>
      }

    <span class="keyword">def</span> <a title="()List[scala.tools.nsc.ast.parser.BracePatch]" id="527808">insertRBrace</a>(): <span title="List[scala.tools.nsc.ast.parser.BracePatch]">List</span>[BracePatch] = {
      <span class="keyword">def</span> <a title="(bps: List[scala.tools.nsc.ast.parser.BracePair])List[scala.tools.nsc.ast.parser.BracePatch]" id="529675">insert</a>(<a title="List[scala.tools.nsc.ast.parser.BracePair]" id="529676">bps</a>: <span title="List[scala.tools.nsc.ast.parser.BracePair]">List</span>[BracePair]): <span title="List[scala.tools.nsc.ast.parser.BracePatch]">List</span>[BracePatch] = <a href="#529676" title="List[scala.tools.nsc.ast.parser.BracePair]">bps</a> <span title="List[scala.tools.nsc.ast.parser.BracePatch]" class="keyword">match</span> {
        <span title="List[scala.tools.nsc.ast.parser.BracePatch]" class="keyword">case</span> <a href="#529678" title="(x: List[scala.tools.nsc.ast.parser.BracePair])Some[List[scala.tools.nsc.ast.parser.BracePair]]">List</a>() =&gt; <a href="#527814" title="List[scala.tools.nsc.ast.parser.BracePatch]">patches</a>
        <span title="List[scala.tools.nsc.ast.parser.BracePatch]" class="keyword">case</span> (<a title="scala.tools.nsc.ast.parser.BracePair" id="529692">bp</a> @ BracePair(<a title="Int" id="529693">loff</a>, <a title="Int" id="529694">lindent</a>, <a title="Int" id="529695">roff</a>, <a title="Int" id="529696">rindent</a>, <a title="List[scala.tools.nsc.ast.parser.BracePair]" id="529697">nested</a>)) :: <a title="List[scala.tools.nsc.ast.parser.BracePair]" id="529700">bps1</a> =&gt;
          <span title="List[scala.tools.nsc.ast.parser.BracePatch]" class="keyword">if</span> (<a href="#529694" title="(x$1: Int)Boolean">lindent</a> &lt;= <a href="#529696" title="Int">rindent</a>) <a href="#529675" title="(bps: List[scala.tools.nsc.ast.parser.BracePair])List[scala.tools.nsc.ast.parser.BracePatch]">insert</a>(<a href="#529700" title="List[scala.tools.nsc.ast.parser.BracePair]">bps1</a>)
          <span class="keyword">else</span> {
//           println(&quot;patch inside &quot;+bp+&quot;/&quot;+line(loff)+&quot;/&quot;+lineStart(line(loff))+&quot;/&quot;+lindent&quot;/&quot;+rindent)//DEBUG
            <span class="keyword">val</span> <a title="List[scala.tools.nsc.ast.parser.BracePatch]" id="529711">patches1</a> = <a href="#529675" title="(bps: List[scala.tools.nsc.ast.parser.BracePair])List[scala.tools.nsc.ast.parser.BracePatch]">insert</a>(<a href="#529697" title="List[scala.tools.nsc.ast.parser.BracePair]">nested</a>)
            <span title="List[scala.tools.nsc.ast.parser.BracePatch]" class="keyword">if</span> (<a href="#529711" title="(x$1: AnyRef)Boolean">patches1</a> ne <a href="#527814" title="List[scala.tools.nsc.ast.parser.BracePatch]">patches</a>) <a href="#529711" title="List[scala.tools.nsc.ast.parser.BracePatch]">patches1</a>
            <span class="keyword">else</span> {
              <span class="keyword">var</span> <a title="Int" id="529716">lin</a> = <a href="#527803" title="(offset: Int)Int">line</a><span title="(x$1: Int)Int">(</span><a href="#529693" title="Int">loff</a>) + <span title="Int(1)" class="int">1</span>
              <span title="Unit" class="keyword">while</span> (<a href="#529716" title="(x$1: Int)Boolean">lin</a> <span title="(x$1: Boolean)Boolean">&lt;</span> <a href="#527796" title="=&gt; scala.collection.mutable.ArrayBuffer[Int]">lineStart</a>.<span title="=&gt; Int">length</span> &amp;&amp; <a href="#527804" title="(offset: Int)Int">column</a><span title="(x$1: Int)Boolean">(</span><a href="#527796" title="(idx: Int)Int">lineStart</a>(<a href="#529716" title="Int">lin</a>)) &gt; <a href="#529694" title="Int">lindent</a>)
                <a href="#529716" title="Int">lin</a> <a href="#529717" title="()Unit">+=</a> <span title="Int(1)" class="int">1</span>
              <span title="List[scala.tools.nsc.ast.parser.BracePatch]" class="keyword">if</span> (<a href="#529716" title="(x$1: Int)Boolean">lin</a> &lt; <a href="#527796" title="=&gt; scala.collection.mutable.ArrayBuffer[Int]">lineStart</a>.<span title="=&gt; Int">length</span>) {
                <span class="keyword">val</span> <a title="List[scala.tools.nsc.ast.parser.BracePatch]" id="529793">patches1</a> = <a href="#527805" title="(patches: List[scala.tools.nsc.ast.parser.BracePatch],patch: scala.tools.nsc.ast.parser.BracePatch)List[scala.tools.nsc.ast.parser.BracePatch]">insertPatch</a>(<a href="#527814" title="List[scala.tools.nsc.ast.parser.BracePatch]">patches</a>, <a href="BracePatch.scala.html#78594" title="(off: Int,inserted: Boolean)scala.tools.nsc.ast.parser.BracePatch">BracePatch</a>(<a href="#527796" title="(idx: Int)Int">lineStart</a>(<a href="#529716" title="Int">lin</a>), <span title="Boolean(true)" class="keyword">true</span>))
                //println(&quot;patch for &quot;+bp+&quot;/&quot;+imbalanceMeasure+&quot;/&quot;+new ParensAnalyzer(unit, patches1).imbalanceMeasure)
                /*if (improves(patches1))*/ 
                <a href="#529793" title="List[scala.tools.nsc.ast.parser.BracePatch]">patches1</a> 
                /*else insert(bps1)*/
                // (this test did not seem to work very well in practice)
              } <span class="keyword">else</span> <a href="#527814" title="List[scala.tools.nsc.ast.parser.BracePatch]">patches</a>
            }
          }
      }
      <a href="#529675" title="(bps: List[scala.tools.nsc.ast.parser.BracePair])List[scala.tools.nsc.ast.parser.BracePatch]">insert</a>(<a href="#527798" title="=&gt; List[scala.tools.nsc.ast.parser.BracePair]">bracePairs</a>)
    }
      
    <span class="keyword">def</span> <a title="()List[scala.tools.nsc.ast.parser.BracePatch]" id="527809">deleteRBrace</a>(): <span title="List[scala.tools.nsc.ast.parser.BracePatch]">List</span>[BracePatch] = {
      <span class="keyword">def</span> <a title="(bps: List[scala.tools.nsc.ast.parser.BracePair])List[scala.tools.nsc.ast.parser.BracePatch]" id="529817">delete</a>(<a title="List[scala.tools.nsc.ast.parser.BracePair]" id="529818">bps</a>: <span title="List[scala.tools.nsc.ast.parser.BracePair]">List</span>[BracePair]): <span title="List[scala.tools.nsc.ast.parser.BracePatch]">List</span>[BracePatch] = <a href="#529818" title="List[scala.tools.nsc.ast.parser.BracePair]">bps</a> <span title="List[scala.tools.nsc.ast.parser.BracePatch]" class="keyword">match</span> {
        <span title="List[scala.tools.nsc.ast.parser.BracePatch]" class="keyword">case</span> <a href="#529820" title="(x: List[scala.tools.nsc.ast.parser.BracePair])Some[List[scala.tools.nsc.ast.parser.BracePair]]">List</a>() =&gt; <a href="#527814" title="List[scala.tools.nsc.ast.parser.BracePatch]">patches</a>
        <span title="List[scala.tools.nsc.ast.parser.BracePatch]" class="keyword">case</span> BracePair(<a title="Int" id="529834">loff</a>, <a title="Int" id="529835">lindent</a>, <a title="Int" id="529836">roff</a>, <a title="Int" id="529837">rindent</a>, <a title="List[scala.tools.nsc.ast.parser.BracePair]" id="529838">nested</a>) :: <a title="List[scala.tools.nsc.ast.parser.BracePair]" id="529841">bps1</a> =&gt;
          <span title="List[scala.tools.nsc.ast.parser.BracePatch]" class="keyword">if</span> (<a href="#529835" title="(x$1: Int)Boolean">lindent</a> &gt;= <a href="#529837" title="Int">rindent</a>) <a href="#529817" title="(bps: List[scala.tools.nsc.ast.parser.BracePair])List[scala.tools.nsc.ast.parser.BracePatch]">delete</a>(<a href="#529841" title="List[scala.tools.nsc.ast.parser.BracePair]">bps1</a>)
          <span class="keyword">else</span> {
            <span class="keyword">val</span> <a title="List[scala.tools.nsc.ast.parser.BracePatch]" id="529852">patches1</a> = <a href="#529817" title="(bps: List[scala.tools.nsc.ast.parser.BracePair])List[scala.tools.nsc.ast.parser.BracePatch]">delete</a>(<a href="#529838" title="List[scala.tools.nsc.ast.parser.BracePair]">nested</a>)
            <span title="List[scala.tools.nsc.ast.parser.BracePatch]" class="keyword">if</span> (<a href="#529852" title="(x$1: AnyRef)Boolean">patches1</a> ne <a href="#527814" title="List[scala.tools.nsc.ast.parser.BracePatch]">patches</a>) <a href="#529852" title="List[scala.tools.nsc.ast.parser.BracePatch]">patches1</a>
            <span class="keyword">else</span> <a href="#527805" title="(patches: List[scala.tools.nsc.ast.parser.BracePatch],patch: scala.tools.nsc.ast.parser.BracePatch)List[scala.tools.nsc.ast.parser.BracePatch]">insertPatch</a>(<a href="#527814" title="List[scala.tools.nsc.ast.parser.BracePatch]">patches</a>, <a href="BracePatch.scala.html#78594" title="(off: Int,inserted: Boolean)scala.tools.nsc.ast.parser.BracePatch">BracePatch</a>(<a href="#529836" title="Int">roff</a>, <span title="Boolean(false)" class="keyword">false</span>))
          }
      }
      <a href="#529817" title="(bps: List[scala.tools.nsc.ast.parser.BracePair])List[scala.tools.nsc.ast.parser.BracePatch]">delete</a>(<a href="#527798" title="=&gt; List[scala.tools.nsc.ast.parser.BracePair]">bracePairs</a>)
    }    

    <span class="keyword">def</span> <a title="=&gt; Int" id="527810">imbalanceMeasure</a>: <span title="Int">Int</span> = {
      <span class="keyword">def</span> <a title="(bps: List[scala.tools.nsc.ast.parser.BracePair])Int" id="529873">measureList</a>(<a title="List[scala.tools.nsc.ast.parser.BracePair]" id="529875">bps</a>: <span title="List[scala.tools.nsc.ast.parser.BracePair]">List</span>[BracePair]): <span title="Int">Int</span> =
        (<a href="#529875" title="(f: (scala.tools.nsc.ast.parser.BracePair) =&gt; Int)(implicit bf: scala.collection.generic.BuilderFactory[Int,List[Int],List[scala.tools.nsc.ast.parser.BracePair]])List[Int]" id="25402">bps</a> <a title="scala.collection.generic.BuilderFactory[Int,List[Int],List#Coll]" id="24472">map</a> <a href="#529874" title="(bp: scala.tools.nsc.ast.parser.BracePair)Int">measure</a>).<a title="(implicit num: Numeric[Int])Int" id="168">sum</a>
      <span class="keyword">def</span> <a title="(bp: scala.tools.nsc.ast.parser.BracePair)Int" id="529874">measure</a>(<a title="scala.tools.nsc.ast.parser.BracePair" id="529883">bp</a>: <a href="BracePair.scala.html#12578" title="scala.tools.nsc.ast.parser.BracePair">BracePair</a>): <span title="Int">Int</span> = 
        <span title="(x$1: Int)Int">(</span><span title="Int" class="keyword">if</span> (<a href="#529883" title="scala.tools.nsc.ast.parser.BracePair">bp</a>.<a href="BracePair.scala.html#41592" title="(x$1: Int)Boolean">lindent</a> != <a href="#529883" title="scala.tools.nsc.ast.parser.BracePair">bp</a>.<a href="BracePair.scala.html#41596" title="=&gt; Int">rindent</a>) <span title="Int(1)" class="int">1</span> <span class="keyword">else</span> <span title="Int(0)" class="int">0</span>) + <a href="#529873" title="(bps: List[scala.tools.nsc.ast.parser.BracePair])Int">measureList</a>(<a href="#529883" title="scala.tools.nsc.ast.parser.BracePair">bp</a>.<a href="BracePair.scala.html#41598" title="=&gt; List[scala.tools.nsc.ast.parser.BracePair]">nested</a>)
      <a href="#529873" title="(bps: List[scala.tools.nsc.ast.parser.BracePair])Int">measureList</a>(<a href="#527798" title="=&gt; List[scala.tools.nsc.ast.parser.BracePair]">bracePairs</a>)
    }

    <span class="keyword">def</span> <a title="(patches1: List[scala.tools.nsc.ast.parser.BracePatch])Boolean" id="527811">improves</a>(<a title="List[scala.tools.nsc.ast.parser.BracePatch]" id="530403">patches1</a>: <span title="List[scala.tools.nsc.ast.parser.BracePatch]">List</span>[BracePatch]): <span title="Boolean">Boolean</span> =
      <a href="#527810" title="(x$1: Int)Boolean">imbalanceMeasure</a> &gt; <span title="Scanners.this.ParensAnalyzer" class="keyword">new</span> <a href="#39931" title="Scanners.this.ParensAnalyzer">ParensAnalyzer</a>(<a href="#527813" title="Scanners.this.global.CompilationUnit">unit</a>, <a href="#530403" title="List[scala.tools.nsc.ast.parser.BracePatch]">patches1</a>).<a href="#527810" title="=&gt; Int">imbalanceMeasure</a>

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(offset: Int,msg: String)Unit" id="527812">error</a>(<a title="Int" id="530413">offset</a>: <span title="Int">Int</span>, <a title="String" id="530414">msg</a>: <span title="String">String</span>) <span title="Unit">{</span>}
  }
}

        </pre>
    </body>
</html>