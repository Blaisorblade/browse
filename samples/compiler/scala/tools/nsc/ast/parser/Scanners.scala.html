<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/ast/parser/Scanners.scala</title>
        <script type="text/javascript" src="../../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../../style.css" title="Style">
    </head>
    <body>
        <pre>
/* NSC -- new Scala compiler
 * Copyright 2005-2009 LAMP/EPFL
 * @author  Martin Odersky
 */
// $Id: Scanners.scala 17285 2009-03-11 13:51:56Z rytz $
<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> ast.parser

<span class="keyword">import</span> scala.tools.nsc.util._
<span class="keyword">import</span> SourceFile.{LF, FF, CR, SU}
<span class="keyword">import</span> Tokens._
<span class="keyword">import</span> scala.annotation.switch
<span class="keyword">import</span> scala.collection.mutable.{ListBuffer, ArrayBuffer}

<span class="keyword">trait</span> <a title="trait Scanners extends java.lang.Object with ScalaObject" id="12329">Scanners</a> <span title="ScalaObject">{</span>
  <span class="keyword">val</span> <a title="=&gt; scala.tools.nsc.Global" id="39671">global</a> : <a href="../../Global.scala.html#8460" title="scala.tools.nsc.Global">Global</a>
  <span class="keyword">import</span> global._

  /** Offset into source character array */
  <span class="keyword">type</span> <a title="Int" id="39673">Offset</a> = <span title="Int">Int</span>

  /** An undefined offset */
  <span class="keyword">val</span> <a title="Scanners.this.Offset" id="39674">NoOffset</a>: <span title="Scanners.this.Offset">Offset</span> = <span title="Int(-1)">-</span><span class="int">1</span>

  <span class="keyword">trait</span> <a title="trait TokenData extends java.lang.Object with ScalaObject" id="39676">TokenData</a> <span title="ScalaObject">{</span>

    /** the next token */
    <span class="keyword">var</span> <a title="Int" id="121760">token</a>: <span title="Int">Int</span> = <span title="Int(-3)">EMPTY</span>

    /** the offset of the first character of the current token */
    <span class="keyword">var</span> <a title="Scanners.this.Offset" id="121763">offset</a>: <span title="Scanners.this.Offset">Offset</span> = <span title="Int(0)" class="int">0</span>

    /** the offset of the character following the token preceding this one */
    <span class="keyword">var</span> <a title="Scanners.this.Offset" id="121766">lastOffset</a>: <span title="Scanners.this.Offset">Offset</span> = <span title="Int(0)" class="int">0</span>

    /** the name of an identifier */
    <span class="keyword">var</span> <a title="Scanners.this.global.Name" id="121769">name</a>: <a href="../../symtab/Names.scala.html#26055" title="Scanners.this.global.Name">Name</a> = <span title="Null(null)" class="keyword">null</span>

    /** the string value of a literal */
    <span class="keyword">var</span> <a title="String" id="121772">strVal</a>: <span title="String">String</span> = <span title="Null(null)" class="keyword">null</span>

    /** the base of a number */
    <span class="keyword">var</span> <a title="Int" id="121775">base</a>: <span title="Int">Int</span> = <span title="Int(0)" class="int">0</span>

    <span class="keyword">def</span> <a title="(td: Scanners.this.TokenData)Unit" id="121777">copyFrom</a>(<a title="Scanners.this.TokenData" id="523433">td</a>: <a href="#39676" title="Scanners.this.TokenData">TokenData</a>) = {
      <a href="#39676" title="TokenData.this.type" class="keyword">this</a>.<a href="#121760" title="(x$1: Int)Unit">token</a> = <a href="#523433" title="Scanners.this.TokenData">td</a>.<a href="#121760" title="=&gt; Int">token</a>
      <a href="#39676" title="TokenData.this.type" class="keyword">this</a>.<a href="#121763" title="(x$1: Scanners.this.Offset)Unit">offset</a> = <a href="#523433" title="Scanners.this.TokenData">td</a>.<a href="#121763" title="=&gt; Scanners.this.Offset">offset</a>
      <a href="#39676" title="TokenData.this.type" class="keyword">this</a>.<a href="#121766" title="(x$1: Scanners.this.Offset)Unit">lastOffset</a> = <a href="#523433" title="Scanners.this.TokenData">td</a>.<a href="#121766" title="=&gt; Scanners.this.Offset">lastOffset</a>
      <a href="#39676" title="TokenData.this.type" class="keyword">this</a>.<a href="#121769" title="(x$1: Scanners.this.global.Name)Unit">name</a> = <a href="#523433" title="Scanners.this.TokenData">td</a>.<a href="#121769" title="=&gt; Scanners.this.global.Name">name</a>
      <a href="#39676" title="TokenData.this.type" class="keyword">this</a>.<a href="#121772" title="(x$1: String)Unit">strVal</a> = <a href="#523433" title="Scanners.this.TokenData">td</a>.<a href="#121772" title="=&gt; String">strVal</a>
      <a href="#39676" title="TokenData.this.type" class="keyword">this</a>.<a href="#121775" title="(x$1: Int)Unit">base</a> = <a href="#523433" title="Scanners.this.TokenData">td</a>.<a href="#121775" title="=&gt; Int">base</a>
    }
  }
  
  <span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class Scanner extends scala.tools.nsc.util.CharArrayReader with Scanners.this.TokenData with ScalaObject" id="39677">Scanner</a> <span title="ScalaObject" class="keyword">extends</span> <a href="../../util/CharArrayReader.scala.html#14599" title="scala.tools.nsc.util.CharArrayReader">CharArrayReader</a> <span class="keyword">with</span> <a href="#39676" title="Scanners.this.TokenData">TokenData</a> {

    <span class="keyword">def</span> <a title="=&gt; Scanners.this.Scanner" id="121699">flush</a> = { <a href="../../util/CharArrayReader.scala.html#121681" title="(x$1: Int)Unit">charOffset</a> = <a href="#121763" title="=&gt; Scanners.this.Offset">offset</a>; <a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>(); <a href="#39677" title="Scanners.this.Scanner" class="keyword">this</a> }

    <span class="keyword">def</span> <a title="(lastCode: Int)Unit" id="121700">resume</a>(<a title="Int" id="523478">lastCode</a>: <span title="Int">Int</span>) = {
      <a href="#121760" title="(x$1: Int)Unit">token</a> = <a href="#523478" title="Int">lastCode</a>
      <a title="(assertion: Boolean)Unit" id="7874">assert</a>(<a href="#121720" title="=&gt; Scanners.this.TokenData">next</a>.<a href="#121760" title="(x$1: Int)Boolean">token</a> == <span title="Int(-3)">EMPTY</span>)
      <a href="#121728" title="()Unit">nextToken</a>()
    }

    // things to fill in, in addition to buf, decodeUni
    <span class="keyword">def</span> <a title="(off: Scanners.this.Offset,msg: String)Unit" id="121701">warning</a>(<a title="Scanners.this.Offset" id="523496">off</a>: <span title="Scanners.this.Offset">Offset</span>, <a title="String" id="523497">msg</a>: <span title="String">String</span>): <span title="Unit">Unit</span>
    <span class="keyword">def</span> <a title="(off: Scanners.this.Offset,msg: String)Unit" id="121702">error</a>  (<a title="Scanners.this.Offset" id="523499">off</a>: <span title="Scanners.this.Offset">Offset</span>, <a title="String" id="523500">msg</a>: <span title="String">String</span>): <span title="Unit">Unit</span>
    <span class="keyword">def</span> <a title="(off: Scanners.this.Offset,msg: String)Unit" id="121703">incompleteInputError</a>(<a title="Scanners.this.Offset" id="523505">off</a>: <span title="Scanners.this.Offset">Offset</span>, <a title="String" id="523506">msg</a>: <span title="String">String</span>): <span title="Unit">Unit</span>
    <span class="keyword">def</span> <a title="(off: Scanners.this.Offset,msg: String)Unit" id="121704">deprecationWarning</a>(<a title="Scanners.this.Offset" id="523508">off</a>: <span title="Scanners.this.Offset">Offset</span>, <a title="String" id="523509">msg</a>: <span title="String">String</span>): <span title="Unit">Unit</span>

    /** the last error offset
     */
    <span class="keyword">var</span> <a title="Scanners.this.Offset" id="121706">errOffset</a>: <span title="Scanners.this.Offset">Offset</span> = <a href="#39674" title="=&gt; Scanners.this.Offset">NoOffset</a>

    /** A character buffer for literals
     */  
    <span class="keyword">val</span> <a title="StringBuilder" id="121708">cbuf</a> = <a title="()StringBuilder" id="57398" class="keyword">new</a> <span title="StringBuilder">StringBuilder</span>

    /** append Unicode character to &quot;cbuf&quot; buffer
     */
    <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(c: Char)Unit" id="121710">putChar</a>(<a title="Char" id="523511">c</a>: <span title="Char">Char</span>) { 
//      assert(cbuf.size &lt; 10000, cbuf)
      <a href="#121708" title="=&gt; StringBuilder">cbuf</a>.<span title="(x: Char)StringBuilder">append</span><span title="Unit">(</span><a href="#523511" title="Char">c</a>) 
    }

    /** Clear buffer and set name and token */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="()Unit" id="121711">finishNamed</a>() {
      <a href="#121769" title="(x$1: Scanners.this.global.Name)Unit">name</a> = <a href="../../symtab/Names.scala.html#26048" title="(s: String)Scanners.this.global.Name">newTermName</a>(<a href="#121708" title="=&gt; StringBuilder">cbuf</a>.<span title="()String">toString</span>)
      <a href="#121760" title="(x$1: Int)Unit">token</a> = <a href="#39696" title="(name: Scanners.this.global.Name)Int">name2token</a>(<a href="#121769" title="=&gt; Scanners.this.global.Name">name</a>)
      <a href="#121708" title="=&gt; StringBuilder">cbuf</a>.<span title="()Unit">clear</span>()
    }

    /** Clear buffer and set string */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="()Unit" id="121712">setStrVal</a>() {
      <a href="#121772" title="(x$1: String)Unit">strVal</a> = <a href="#121708" title="=&gt; StringBuilder">cbuf</a>.<span title="()String">toString</span>
      <a href="#121708" title="=&gt; StringBuilder">cbuf</a>.<span title="()Unit">clear</span>()
    }

    /** Should doc comments be built? */
    <span class="keyword">def</span> <a title="=&gt; Boolean" id="121713">buildDocs</a>: <span title="Boolean">Boolean</span> = <a href="../../Global.scala.html#39185" title="=&gt; Boolean">onlyPresentation</a>
  
    /** buffer for the documentation comment
     */
    <span class="keyword">var</span> <a title="StringBuilder" id="121715">docBuffer</a>: <a title="StringBuilder" id="25020">StringBuilder</a> = <span title="Null(null)" class="keyword">null</span>

    /** Return current docBuffer and set docBuffer to null */
    <span class="keyword">def</span> <a title="=&gt; String" id="121717">flushDoc</a> = {
      <span class="keyword">val</span> <a title="String" id="523548">ret</a> = <span title="String" class="keyword">if</span> (<a href="#121715" title="(x$1: AnyRef)Boolean" id="6540">docBuffer</a> != <span title="Null(null)" class="keyword">null</span>) <a href="#121715" title="=&gt; StringBuilder">docBuffer</a>.<span title="()String">toString</span> <span class="keyword">else</span> <span title="Null(null)" class="keyword">null</span>
      <a href="#121715" title="(x$1: StringBuilder)Unit">docBuffer</a> = <span title="Null(null)" class="keyword">null</span>
      <a href="#523548" title="String">ret</a>
    }

    /** add the given character to the documentation buffer 
     */
    <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(c: Char)Unit" id="121718">putDocChar</a>(<a title="Char" id="523561">c</a>: <span title="Char">Char</span>) {
      <span title="Unit" class="keyword">if</span> (<a href="#121715" title="(x$1: AnyRef)Boolean">docBuffer</a> ne <span title="Null(null)" class="keyword">null</span>) <a href="#121715" title="=&gt; StringBuilder">docBuffer</a>.<span title="(x: Char)StringBuilder">append</span><span title="Unit">(</span><a href="#523561" title="Char">c</a>)
    }

    <span class="keyword">private</span> <span class="keyword">class</span> <a title="class TokenData0 extends java.lang.Object with Scanners.this.TokenData with ScalaObject" id="121719">TokenData0</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#39676" title="Scanners.this.TokenData">TokenData</a>

    /** we need one token lookahead and one token history
     */
    <span class="keyword">val</span> <a title="Scanners.this.TokenData" id="121720">next</a> : <a href="#39676" title="Scanners.this.TokenData">TokenData</a> = <span title="Scanner.this.TokenData0" class="keyword">new</span> <a href="#121719" title="Scanner.this.TokenData0">TokenData0</a>
    <span class="keyword">val</span> <a title="Scanners.this.TokenData" id="121722">prev</a> : <a href="#39676" title="Scanners.this.TokenData">TokenData</a> = <span title="Scanner.this.TokenData0" class="keyword">new</span> <a href="#121719" title="Scanner.this.TokenData0">TokenData0</a>

    /** a stack of tokens which indicates whether line-ends can be statement separators
     */
    <span class="keyword">var</span> <a title="List[Int]" id="121725">sepRegions</a>: <span title="List[Int]">List</span>[Int] = List<span title="object Nil">(</span>)

// Get next token ------------------------------------------------------------

    /** read next token and return last offset
     */
    <span class="keyword">def</span> <a title="()Scanners.this.Offset" id="121727">skipToken</a>(): <span title="Scanners.this.Offset">Offset</span> = {
      <span class="keyword">val</span> <a title="Scanners.this.Offset" id="523589">off</a> = <a href="#121763" title="=&gt; Scanners.this.Offset">offset</a>
      <a href="#121728" title="()Unit">nextToken</a>()
      <a href="#523589" title="Scanners.this.Offset">off</a>
    }
    
    /** Produce next token, filling TokenData fields of Scanner.
     */
    <span class="keyword">def</span> <a title="()Unit" id="121728">nextToken</a>() {
      <span class="keyword">val</span> <a title="Int" id="523592">lastToken</a> = <a href="#121760" title="=&gt; Int">token</a>
      // Adapt sepRegions according to last token 
      (<a href="#523592" title="Int">lastToken</a>: @<span title="Int @scala.annotation.switch">switch</span>) <span title="Unit" class="keyword">match</span> {
        <span title="Unit" class="keyword">case</span> <span title="Int(90)">LPAREN</span> =&gt; 
          <a href="#121725" title="(x$1: List[Int])Unit">sepRegions</a> = <span title="Int(91)">RPAREN</span> <a href="#523595" title="Int">::</a> <a href="#121725" title="(x: Int)List[Int]">sepRegions</a>
        <span title="Unit" class="keyword">case</span> <span title="Int(92)">LBRACKET</span> =&gt; 
          <a href="#121725" title="(x$1: List[Int])Unit">sepRegions</a> = <span title="Int(93)">RBRACKET</span> <a href="#523605" title="Int">::</a> <a href="#121725" title="(x: Int)List[Int]">sepRegions</a>
        <span title="Unit" class="keyword">case</span> <span title="Int(94)">LBRACE</span> =&gt;
          <a href="#121725" title="(x$1: List[Int])Unit">sepRegions</a> = <span title="Int(95)">RBRACE</span> <a href="#523615" title="Int">::</a> <a href="#121725" title="(x: Int)List[Int]">sepRegions</a>
        <span title="Unit" class="keyword">case</span> <span title="Int(28)">CASE</span> =&gt;
          <a href="#121725" title="(x$1: List[Int])Unit">sepRegions</a> = <span title="Int(77)">ARROW</span> <a href="#523625" title="Int">::</a> <a href="#121725" title="(x: Int)List[Int]">sepRegions</a>
        <span title="Unit" class="keyword">case</span> <span title="Int(95)">RBRACE</span> =&gt;
          <a href="#121725" title="(x$1: List[Int])Unit">sepRegions</a> = <a href="#121725" title="(p: (Int) =&gt; Boolean)List[Int]" id="24297">sepRegions</a> dropWhile (<a href="#523640" title="(x$1: Int)Boolean">_</a> != <span title="Int(95)">RBRACE</span>)
          <span title="Unit" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="#121725" title="=&gt; List[Int]">sepRegions</a>.<span title="=&gt; Boolean">isEmpty</span>) <a href="#121725" title="(x$1: List[Int])Unit">sepRegions</a> = <a href="#121725" title="=&gt; List[Int]">sepRegions</a>.<span title="=&gt; List[Int]">tail</span>
        <span title="Unit" class="keyword">case</span> <span title="Int(93)">RBRACKET</span> | <span title="Int(91)">RPAREN</span> | <span title="Int(77)">ARROW</span> =&gt;
          <span title="Unit" class="keyword">if</span> (<span title="(x$1: Boolean)Boolean">!</span><a href="#121725" title="=&gt; List[Int]">sepRegions</a>.<span title="=&gt; Boolean">isEmpty</span> &amp;&amp; <a href="#121725" title="=&gt; List[Int]">sepRegions</a>.<span title="(x$1: Int)Boolean">head</span> == <a href="#523592" title="Int">lastToken</a>)
            <a href="#121725" title="(x$1: List[Int])Unit">sepRegions</a> = <a href="#121725" title="=&gt; List[Int]">sepRegions</a>.<span title="=&gt; List[Int]">tail</span>
        <span title="Unit" class="keyword">case</span> _ =&gt;
      }

      // Read a token or copy it from `next` tokenData
      <span title="Unit" class="keyword">if</span> (<a href="#121720" title="=&gt; Scanners.this.TokenData">next</a>.<a href="#121760" title="(x$1: Int)Boolean">token</a> == <span title="Int(-3)">EMPTY</span>) {
        <a href="#121766" title="(x$1: Scanners.this.Offset)Unit">lastOffset</a> = <a href="../../util/CharArrayReader.scala.html#121680" title="(x$1: Int)Int">charOffset</a> - <span title="Int(1)" class="int">1</span>
        <a href="#121731" title="()Unit">fetchToken</a>()
      } <span class="keyword">else</span> {
        <a href="#121777" title="(td: Scanners.this.TokenData)Unit" class="keyword">this</a> copyFrom <a href="#121720" title="=&gt; Scanners.this.TokenData">next</a>
        <a href="#121720" title="=&gt; Scanners.this.TokenData">next</a>.<a href="#121760" title="(x$1: Int)Unit">token</a> = <span title="Int(-3)">EMPTY</span>
      }

      /** Insert NEWLINE or NEWLINES if
       *  - we are after a newline
       *  - we are within a { ... } or on toplevel (wrt sepRegions)
       *  - the current token can start a statement and the one before can end it
       *  insert NEWLINES if we are past a blank line, NEWLINE otherwise
       */
      <span title="Unit" class="keyword">if</span> (<span title="(x$1: Boolean)Boolean">!</span><a href="#121754" title="()Boolean">applyBracePatch</a>() <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> <a href="#121729" title="()Boolean">afterLineEnd</a>() <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> <a href="#121734" title="(token: Int)Boolean">inLastOfStat</a>(<a href="#523592" title="Int">lastToken</a>) <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> <a href="#121733" title="(token: Int)Boolean">inFirstOfStat</a>(<a href="#121760" title="=&gt; Int">token</a>) &amp;&amp;
          (<a href="#121725" title="=&gt; List[Int]">sepRegions</a>.<span title="(x$1: Boolean)Boolean">isEmpty</span> || <a href="#121725" title="=&gt; List[Int]">sepRegions</a>.<span title="(x$1: Int)Boolean">head</span> == <span title="Int(95)">RBRACE</span>)) {
        <a href="#121777" title="(td: Scanners.this.TokenData)Unit">next</a> copyFrom <a href="#39677" title="Scanners.this.Scanner" class="keyword">this</a>
        <a href="#121763" title="(x$1: Scanners.this.Offset)Unit">offset</a> = <span title="Scanners.this.Offset" class="keyword">if</span> (<a href="../../util/CharArrayReader.scala.html#121683" title="(x$1: Int)Boolean">lineStartOffset</a> &lt;= <a href="#121763" title="=&gt; Scanners.this.Offset">offset</a>) <a href="../../util/CharArrayReader.scala.html#121683" title="=&gt; Int">lineStartOffset</a> <span class="keyword">else</span> <a href="../../util/CharArrayReader.scala.html#121686" title="=&gt; Int">lastLineStartOffset</a>
        <a href="#121760" title="(x$1: Int)Unit">token</a> = <span title="Int" class="keyword">if</span> (<a href="#121730" title="()Boolean">pastBlankLine</a>()) <span title="Int(79)">NEWLINES</span> <span class="keyword">else</span> <span title="Int(78)">NEWLINE</span>
      }

      // Join CASE + CLASS =&gt; CASECLASS, CASE + OBJECT =&gt; CASEOBJECT, SEMI + ELSE =&gt; ELSE
      <span title="Unit" class="keyword">if</span> (<a href="#121760" title="(x$1: Int)Boolean">token</a> == <span title="Int(28)">CASE</span>) {
        <a href="#121777" title="(td: Scanners.this.TokenData)Unit">prev</a> copyFrom <a href="#39677" title="Scanners.this.Scanner" class="keyword">this</a>
        <span class="keyword">val</span> <a title="Int" id="523775">nextLastOffset</a> = <a href="../../util/CharArrayReader.scala.html#121680" title="(x$1: Int)Int">charOffset</a> - <span title="Int(1)" class="int">1</span>
        <a href="#121731" title="()Unit">fetchToken</a>()
        <span title="Unit" class="keyword">if</span> (<a href="#121760" title="(x$1: Int)Boolean">token</a> == <span title="Int(45)">CLASS</span>) {
          <a href="#121760" title="(x$1: Int)Unit">token</a> = <span title="Int(29)">CASECLASS</span>
        } <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<a href="#121760" title="(x$1: Int)Boolean">token</a> == <span title="Int(44)">OBJECT</span>) {
          <a href="#121760" title="(x$1: Int)Unit">token</a> = <span title="Int(30)">CASEOBJECT</span>
        } <span class="keyword">else</span> {
          <a href="#121766" title="(x$1: Scanners.this.Offset)Unit">lastOffset</a> = <a href="#523775" title="Int">nextLastOffset</a>
          <a href="#121777" title="(td: Scanners.this.TokenData)Unit">next</a> copyFrom <a href="#39677" title="Scanners.this.Scanner" class="keyword">this</a>
          <a href="#121777" title="(td: Scanners.this.TokenData)Unit" class="keyword">this</a> copyFrom <a href="#121722" title="=&gt; Scanners.this.TokenData">prev</a>
        }
      } <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<a href="#121760" title="(x$1: Int)Boolean">token</a> == <span title="Int(71)">SEMI</span>) {
        <a href="#121777" title="(td: Scanners.this.TokenData)Unit">prev</a> copyFrom <a href="#39677" title="Scanners.this.Scanner" class="keyword">this</a>
        <a href="#121731" title="()Unit">fetchToken</a>()
        <span title="Unit" class="keyword">if</span> (<a href="#121760" title="(x$1: Int)Boolean">token</a> != <span title="Int(22)">ELSE</span>) {
          <a href="#121777" title="(td: Scanners.this.TokenData)Unit">next</a> copyFrom <a href="#39677" title="Scanners.this.Scanner" class="keyword">this</a>
          <a href="#121777" title="(td: Scanners.this.TokenData)Unit" class="keyword">this</a> copyFrom <a href="#121722" title="=&gt; Scanners.this.TokenData">prev</a>
        }
      }  

//      print(&quot;[&quot;+this+&quot;]&quot;)
    }

    /** Is current token first one after a newline? */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="()Boolean" id="121729">afterLineEnd</a>(): <span title="Boolean">Boolean</span> =
      <a href="#121766" title="(x$1: Int)Boolean">lastOffset</a> <span title="(x$1: Boolean)Boolean">&lt;</span> <a href="../../util/CharArrayReader.scala.html#121683" title="=&gt; Int">lineStartOffset</a> &amp;&amp; 
      (<a href="../../util/CharArrayReader.scala.html#121683" title="(x$1: Int)Boolean">lineStartOffset</a> <span title="(x$1: Boolean)Boolean">&lt;=</span> <a href="#121763" title="=&gt; Scanners.this.Offset">offset</a> || 
       <a href="#121766" title="(x$1: Int)Boolean">lastOffset</a> <span title="(x$1: Boolean)Boolean">&lt;</span> <a href="../../util/CharArrayReader.scala.html#121686" title="=&gt; Int">lastLineStartOffset</a> &amp;&amp; <a href="../../util/CharArrayReader.scala.html#121686" title="(x$1: Int)Boolean">lastLineStartOffset</a> &lt;= <a href="#121763" title="=&gt; Scanners.this.Offset">offset</a>)

    /** Is there a blank line between the current token and the last one?
     *  @pre  afterLineEnd().
     */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="()Boolean" id="121730">pastBlankLine</a>(): <span title="Boolean">Boolean</span> = {
      <span class="keyword">var</span> <a title="Scanners.this.Offset" id="523862">idx</a> = <a href="#121766" title="=&gt; Scanners.this.Offset">lastOffset</a>
      <span class="keyword">var</span> <a title="Char" id="523863">ch</a> = <a href="../../util/CharArrayReader.scala.html#121674" title="(i: Int)Char">buf</a>(<a href="#523862" title="Scanners.this.Offset">idx</a>)
      <span class="keyword">val</span> <a title="Scanners.this.Offset" id="523864">end</a> = <a href="#121763" title="=&gt; Scanners.this.Offset">offset</a>
      <span title="Unit" class="keyword">while</span> (<a href="#523862" title="(x$1: Int)Boolean">idx</a> &lt; <a href="#523864" title="Scanners.this.Offset">end</a>) <a href="#523865" title="()Unit">{</a>
        <span title="Unit" class="keyword">if</span> (<a href="#523863" title="(x$1: Char)Boolean">ch</a> <span title="(x$1: Boolean)Boolean">==</span> <span title="Char('\012')">LF</span> || <a href="#523863" title="(x$1: Char)Boolean">ch</a> == <span title="Char('\014')">FF</span>) {
          <a href="#523897" title="Unit" class="keyword">do</a> {
            <a href="#523862" title="Scanners.this.Offset">idx</a> += <span title="Int(1)" class="int">1</span>; <a href="#523863" title="Char">ch</a> = <a href="../../util/CharArrayReader.scala.html#121674" title="(i: Int)Char">buf</a>(<a href="#523862" title="Scanners.this.Offset">idx</a>)
            <span title="Unit" class="keyword">if</span> (<a href="#523863" title="(x$1: Char)Boolean">ch</a> <span title="(x$1: Boolean)Boolean">==</span> <span title="Char('\012')">LF</span> || <a href="#523863" title="(x$1: Char)Boolean">ch</a> == <span title="Char('\014')">FF</span>) {
//              println(&quot;blank line found at &quot;+lastOffset+&quot;:&quot;+(lastOffset to idx).map(buf(_)).toList)
              <span title="Nothing" class="keyword">return</span> <span title="Boolean(true)" class="keyword">true</span>
            }
          } <span class="keyword">while</span> (<a href="#523862" title="(x$1: Int)Boolean">idx</a> <span title="(x$1: Boolean)Boolean">&lt;</span> <a href="#523864" title="Scanners.this.Offset">end</a> &amp;&amp; <a href="#523863" title="(x$1: Char)Boolean">ch</a> &lt;= <span title="Char(' ')" class="char">' '</span>)
        }
        <a href="#523862" title="Scanners.this.Offset">idx</a> += <span title="Int(1)" class="int">1</span>; <a href="#523863" title="Char">ch</a> = <a href="../../util/CharArrayReader.scala.html#121674" title="(i: Int)Char">buf</a>(<a href="#523862" title="Scanners.this.Offset">idx</a>)
      }
      <span title="Boolean(false)" class="keyword">false</span>
    }

    /** read next token, filling TokenData fields of Scanner.
     */
    <span class="keyword">protected</span> <span class="keyword">final</span> <span class="keyword">def</span> <a title="()Unit" id="121731">fetchToken</a>() {
      <a href="#121763" title="(x$1: Scanners.this.Offset)Unit">offset</a> = <a href="../../util/CharArrayReader.scala.html#121680" title="(x$1: Int)Int">charOffset</a> - <span title="Int(1)" class="int">1</span>
      (<a href="../../util/CharArrayReader.scala.html#121677" title="=&gt; Char">ch</a>: @<span title="Char @scala.annotation.switch">switch</span>) <span title="Unit" class="keyword">match</span> {
        
        <span title="Unit" class="keyword">case</span> <span title="Char(' ')" class="char">' '</span> | <span title="Char('\011')" class="char">'\t'</span> | <span title="Char('\015')">CR</span> | <span title="Char('\012')">LF</span> | <span title="Char('\014')">FF</span> =&gt;
          <a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>()
          <a href="#121731" title="()Unit">fetchToken</a>()
        <span title="Unit" class="keyword">case</span> <span title="Char('A')" class="char">'A'</span> | <span title="Char('B')" class="char">'B'</span> | <span title="Char('C')" class="char">'C'</span> | <span title="Char('D')" class="char">'D'</span> | <span title="Char('E')" class="char">'E'</span> |
             <span title="Char('F')" class="char">'F'</span> | <span title="Char('G')" class="char">'G'</span> | <span title="Char('H')" class="char">'H'</span> | <span title="Char('I')" class="char">'I'</span> | <span title="Char('J')" class="char">'J'</span> |
             <span title="Char('K')" class="char">'K'</span> | <span title="Char('L')" class="char">'L'</span> | <span title="Char('M')" class="char">'M'</span> | <span title="Char('N')" class="char">'N'</span> | <span title="Char('O')" class="char">'O'</span> |
             <span title="Char('P')" class="char">'P'</span> | <span title="Char('Q')" class="char">'Q'</span> | <span title="Char('R')" class="char">'R'</span> | <span title="Char('S')" class="char">'S'</span> | <span title="Char('T')" class="char">'T'</span> |
             <span title="Char('U')" class="char">'U'</span> | <span title="Char('V')" class="char">'V'</span> | <span title="Char('W')" class="char">'W'</span> | <span title="Char('X')" class="char">'X'</span> | <span title="Char('Y')" class="char">'Y'</span> |
             <span title="Char('Z')" class="char">'Z'</span> | <span title="Char('$')" class="char">'$'</span> | <span title="Char('_')" class="char">'_'</span> |
             <span title="Char('a')" class="char">'a'</span> | <span title="Char('b')" class="char">'b'</span> | <span title="Char('c')" class="char">'c'</span> | <span title="Char('d')" class="char">'d'</span> | <span title="Char('e')" class="char">'e'</span> |
             <span title="Char('f')" class="char">'f'</span> | <span title="Char('g')" class="char">'g'</span> | <span title="Char('h')" class="char">'h'</span> | <span title="Char('i')" class="char">'i'</span> | <span title="Char('j')" class="char">'j'</span> |
             <span title="Char('k')" class="char">'k'</span> | <span title="Char('l')" class="char">'l'</span> | <span title="Char('m')" class="char">'m'</span> | <span title="Char('n')" class="char">'n'</span> | <span title="Char('o')" class="char">'o'</span> |
             <span title="Char('p')" class="char">'p'</span> | <span title="Char('q')" class="char">'q'</span> | <span title="Char('r')" class="char">'r'</span> | <span title="Char('s')" class="char">'s'</span> | <span title="Char('t')" class="char">'t'</span> |
             <span title="Char('u')" class="char">'u'</span> | <span title="Char('v')" class="char">'v'</span> | <span title="Char('w')" class="char">'w'</span> | <span title="Char('x')" class="char">'x'</span> | <span title="Char('y')" class="char">'y'</span> |  // scala-mode: need to understand multi-line case patterns
             <span title="Char('z')" class="char">'z'</span> =&gt;
          <a href="#121710" title="(c: Char)Unit">putChar</a>(<a href="../../util/CharArrayReader.scala.html#121677" title="=&gt; Char">ch</a>)
          <a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>()
          <a href="#121735" title="()Unit">getIdentRest</a>()  // scala-mode: wrong indent for multi-line case blocks
        <span title="Unit" class="keyword">case</span> <span title="Char('&lt;')" class="char">'&lt;'</span> =&gt; // is XMLSTART?
          <span class="keyword">val</span> <a title="Char" id="524055">last</a> = <span title="Char" class="keyword">if</span> (<a href="../../util/CharArrayReader.scala.html#121680" title="(x$1: Int)Boolean">charOffset</a> &gt;= <span title="Int(2)" class="int">2</span>) <a href="../../util/CharArrayReader.scala.html#121674" title="(i: Int)Char">buf</a>(<a href="../../util/CharArrayReader.scala.html#121680" title="(x$1: Int)Int">charOffset</a> - <span title="Int(2)" class="int">2</span>) <span class="keyword">else</span> <span title="Char(' ')" class="char">' '</span>
          <a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>()
          <a href="#524055" title="Char">last</a> <span title="Unit" class="keyword">match</span> {
            <span title="Unit" class="keyword">case</span> <span title="Char(' ')" class="char">' '</span>|<span title="Char('\011')" class="char">'\t'</span>|<span title="Char('\012')" class="char">'\n'</span>|<span title="Char('{')" class="char">'{'</span>|<span title="Char('(')" class="char">'('</span>|<span title="Char('&gt;')" class="char">'&gt;'</span> <span class="keyword">if</span> xml.<a title="object scala.xml.Parsing" id="40732">Parsing</a>.<a title="(ch: Char)Boolean" id="524100">isNameStart</a><span title="(x$1: Boolean)Boolean">(</span><a href="../../util/CharArrayReader.scala.html#121677" title="=&gt; Char">ch</a>) <span title="(x$1: Boolean)Boolean">||</span> <a href="../../util/CharArrayReader.scala.html#121677" title="(x$1: Char)Boolean">ch</a> == <span title="Char('!')" class="char">'!'</span> || <a href="../../util/CharArrayReader.scala.html#121677" title="(x$1: Char)Boolean">ch</a> == <span title="Char('?')" class="char">'?'</span> =&gt;
              <a href="#121760" title="(x$1: Int)Unit">token</a> = <span title="Int(96)">XMLSTART</span>
            <span title="Unit" class="keyword">case</span> _ =&gt;
              // Console.println(&quot;found '&lt;', but last is '&quot;+in.last+&quot;'&quot;); // DEBUG
              <a href="#121710" title="(c: Char)Unit">putChar</a>(<span title="Char('&lt;')" class="char">'&lt;'</span>)
              <a href="#121736" title="()Unit">getOperatorRest</a>()
          }
        <span title="Unit" class="keyword">case</span> <span title="Char('~')" class="char">'~'</span> | <span title="Char('!')" class="char">'!'</span> | <span title="Char('@')" class="char">'@'</span> | <span title="Char('#')" class="char">'#'</span> | <span title="Char('%')" class="char">'%'</span> |
             <span title="Char('^')" class="char">'^'</span> | <span title="Char('*')" class="char">'*'</span> | <span title="Char('+')" class="char">'+'</span> | <span title="Char('-')" class="char">'-'</span> | /*'&lt;' | */
             <span title="Char('&gt;')" class="char">'&gt;'</span> | <span title="Char('?')" class="char">'?'</span> | <span title="Char(':')" class="char">':'</span> | <span title="Char('=')" class="char">'='</span> | <span title="Char('&amp;')" class="char">'&amp;'</span> | 
             <span title="Char('|')" class="char">'|'</span> | <span title="Char('\')" class="char">'\\'</span> =&gt;
          <a href="#121710" title="(c: Char)Unit">putChar</a>(<a href="../../util/CharArrayReader.scala.html#121677" title="=&gt; Char">ch</a>)
          <a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>()
          <a href="#121736" title="()Unit">getOperatorRest</a>() 
        <span title="Unit" class="keyword">case</span> <span title="Char('/')" class="char">'/'</span> =&gt;
          <a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>()
          <span title="Unit" class="keyword">if</span> (<a href="#121732" title="()Boolean">skipComment</a>()) {
            <a href="#121731" title="()Unit">fetchToken</a>()
          } <span class="keyword">else</span> {
            <a href="#121710" title="(c: Char)Unit">putChar</a>(<span title="Char('/')" class="char">'/'</span>)
            <a href="#121736" title="()Unit">getOperatorRest</a>()
          }
        <span title="Unit" class="keyword">case</span> <span title="Char('0')" class="char">'0'</span> =&gt;
          <a href="#121710" title="(c: Char)Unit">putChar</a>(<a href="../../util/CharArrayReader.scala.html#121677" title="=&gt; Char">ch</a>)
          <a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>()
          <span title="Unit" class="keyword">if</span> (<a href="../../util/CharArrayReader.scala.html#121677" title="(x$1: Char)Boolean">ch</a> <span title="(x$1: Boolean)Boolean">==</span> <span title="Char('x')" class="char">'x'</span> || <a href="../../util/CharArrayReader.scala.html#121677" title="(x$1: Char)Boolean">ch</a> == <span title="Char('X')" class="char">'X'</span>) {
            <a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>()
            <a href="#121775" title="(x$1: Int)Unit">base</a> = <span title="Int(16)" class="int">16</span>
          } <span class="keyword">else</span> {
            <a href="#121775" title="(x$1: Int)Unit">base</a> = <span title="Int(8)" class="int">8</span>
          }
          <a href="#121748" title="()Unit">getNumber</a>()
        <span title="Unit" class="keyword">case</span> <span title="Char('1')" class="char">'1'</span> | <span title="Char('2')" class="char">'2'</span> | <span title="Char('3')" class="char">'3'</span> | <span title="Char('4')" class="char">'4'</span> | <span title="Char('5')" class="char">'5'</span> | <span title="Char('6')" class="char">'6'</span> | <span title="Char('7')" class="char">'7'</span> | <span title="Char('8')" class="char">'8'</span> | <span title="Char('9')" class="char">'9'</span> =&gt;
          <a href="#121775" title="(x$1: Int)Unit">base</a> = <span title="Int(10)" class="int">10</span>
          <a href="#121748" title="()Unit">getNumber</a>()
        <span title="Unit" class="keyword">case</span> <span title="Char('`')" class="char">'`'</span> =&gt; 
          <a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>()
          <span title="Unit" class="keyword">if</span> (<a href="#121738" title="(delimiter: Char)Boolean">getStringLit</a>(<span title="Char('`')" class="char">'`'</span>)) { 
            <a href="#121711" title="()Unit">finishNamed</a>(); 
            <span title="Unit" class="keyword">if</span> (<a href="#121769" title="=&gt; Scanners.this.global.Name">name</a>.<a href="../../symtab/Names.scala.html#28197" title="(x$1: Int)Boolean">length</a> == <span title="Int(0)" class="int">0</span>) <a href="#121751" title="(msg: String)Unit">syntaxError</a>(<span title="java.lang.String(&quot;empty quoted identifier&quot;)" class="string">&quot;empty quoted identifier&quot;</span>)
            <a href="#121760" title="(x$1: Int)Unit">token</a> = <span title="Int(11)">BACKQUOTED_IDENT</span> 
          }
          <span class="keyword">else</span> <a href="#121751" title="(msg: String)Unit">syntaxError</a>(<span title="java.lang.String(&quot;unclosed quoted identifier&quot;)" class="string">&quot;unclosed quoted identifier&quot;</span>)
        <span title="Unit" class="keyword">case</span> <span title="Char('&quot;')" class="char">'\&quot;'</span> =&gt; 
          <a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>()
          <span title="Unit" class="keyword">if</span> (<a href="../../util/CharArrayReader.scala.html#121677" title="(x$1: Char)Boolean">ch</a> == <span title="Char('&quot;')" class="char">'\&quot;'</span>) {
            <a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>()
            <span title="Unit" class="keyword">if</span> (<a href="../../util/CharArrayReader.scala.html#121677" title="(x$1: Char)Boolean">ch</a> == <span title="Char('&quot;')" class="char">'\&quot;'</span>) {
              <a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>()
              <span class="keyword">val</span> <a title="Int" id="524237">saved</a> = <a href="../../util/CharArrayReader.scala.html#121683" title="=&gt; Int">lineStartOffset</a>
              <a href="#121739" title="()Unit">getMultiLineStringLit</a>()
              <span title="Unit" class="keyword">if</span> (<a href="../../util/CharArrayReader.scala.html#121683" title="(x$1: Int)Boolean">lineStartOffset</a> != <a href="#524237" title="Int">saved</a>) // ignore linestarts within a multi-line string 
                <a href="../../util/CharArrayReader.scala.html#121687" title="(x$1: Int)Unit">lastLineStartOffset</a> = <a href="#524237" title="Int">saved</a>
            } <span class="keyword">else</span> {
              <a href="#121760" title="(x$1: Int)Unit">token</a> = <span title="Int(6)">STRINGLIT</span>
              <a href="#121772" title="(x$1: String)Unit">strVal</a> = <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>
            }
          } <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<a href="#121738" title="(delimiter: Char)Boolean">getStringLit</a>(<span title="Char('&quot;')" class="char">'\&quot;'</span>)) { 
            <a href="#121712" title="()Unit">setStrVal</a>()
            <a href="#121760" title="(x$1: Int)Unit">token</a> = <span title="Int(6)">STRINGLIT</span> 
          } <span class="keyword">else</span> {
            <a href="#121751" title="(msg: String)Unit">syntaxError</a>(<span title="java.lang.String(&quot;unclosed string literal&quot;)" class="string">&quot;unclosed string literal&quot;</span>)
          }
        <span title="Unit" class="keyword">case</span> <span title="Char(''')" class="char">'\''</span> =&gt;
          <a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>()
          <span title="Unit" class="keyword">if</span> (<a href="#39678" title="(c: Char)Boolean">isIdentifierStart</a>(<a href="../../util/CharArrayReader.scala.html#121677" title="=&gt; Char">ch</a>))
            <a href="#121749" title="(op: () =&gt; Unit)Unit">charLitOr</a>(<a href="#121735" title="()Unit">getIdentRest</a>)
          <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<a href="#39680" title="(c: Char)Boolean">isSpecial</a>(<a href="../../util/CharArrayReader.scala.html#121677" title="=&gt; Char">ch</a>))
            <a href="#121749" title="(op: () =&gt; Unit)Unit">charLitOr</a>(<a href="#121736" title="()Unit">getOperatorRest</a>)
          <span class="keyword">else</span> {
            <a href="#121740" title="()Unit">getLitChar</a>()
            <span title="Unit" class="keyword">if</span> (<a href="../../util/CharArrayReader.scala.html#121677" title="(x$1: Char)Boolean">ch</a> == <span title="Char(''')" class="char">'\''</span>) {
              <a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>()
              <a href="#121760" title="(x$1: Int)Unit">token</a> = <span title="Int(1)">CHARLIT</span>
              <a href="#121712" title="()Unit">setStrVal</a>()
            } <span class="keyword">else</span> {
              <a href="#121751" title="(msg: String)Unit">syntaxError</a>(<span title="java.lang.String(&quot;unclosed character literal&quot;)" class="string">&quot;unclosed character literal&quot;</span>)
            }
          }
        <span title="Unit" class="keyword">case</span> <span title="Char('.')" class="char">'.'</span> =&gt;
          <a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>()
          <span title="Unit" class="keyword">if</span> (<span title="(x$1: Char)Boolean" class="char">'0'</span> <span title="(x$1: Boolean)Boolean">&lt;=</span> <a href="../../util/CharArrayReader.scala.html#121677" title="=&gt; Char">ch</a> &amp;&amp; <a href="../../util/CharArrayReader.scala.html#121677" title="(x$1: Char)Boolean">ch</a> &lt;= <span title="Char('9')" class="char">'9'</span>) {
            <a href="#121710" title="(c: Char)Unit">putChar</a>(<span title="Char('.')" class="char">'.'</span>); <a href="#121741" title="()Unit">getFraction</a>()
          } <span class="keyword">else</span> {
            <a href="#121760" title="(x$1: Int)Unit">token</a> = <span title="Int(72)">DOT</span>
          }
        <span title="Unit" class="keyword">case</span> <span title="Char(';')" class="char">';'</span> =&gt;
          <a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>(); <a href="#121760" title="(x$1: Int)Unit">token</a> = <span title="Int(71)">SEMI</span>
        <span title="Unit" class="keyword">case</span> <span title="Char(',')" class="char">','</span> =&gt;
          <a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>(); <a href="#121760" title="(x$1: Int)Unit">token</a> = <span title="Int(70)">COMMA</span>
        <span title="Unit" class="keyword">case</span> <span title="Char('(')" class="char">'('</span> =&gt;
          <a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>(); <a href="#121760" title="(x$1: Int)Unit">token</a> = <span title="Int(90)">LPAREN</span>
        <span title="Unit" class="keyword">case</span> <span title="Char('{')" class="char">'{'</span> =&gt;
          <a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>(); <a href="#121760" title="(x$1: Int)Unit">token</a> = <span title="Int(94)">LBRACE</span>
        <span title="Unit" class="keyword">case</span> <span title="Char(')')" class="char">')'</span> =&gt;
          <a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>(); <a href="#121760" title="(x$1: Int)Unit">token</a> = <span title="Int(91)">RPAREN</span>
        <span title="Unit" class="keyword">case</span> <span title="Char('}')" class="char">'}'</span> =&gt;
          <a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>(); <a href="#121760" title="(x$1: Int)Unit">token</a> = <span title="Int(95)">RBRACE</span>
        <span title="Unit" class="keyword">case</span> <span title="Char('[')" class="char">'['</span> =&gt;
          <a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>(); <a href="#121760" title="(x$1: Int)Unit">token</a> = <span title="Int(92)">LBRACKET</span>
        <span title="Unit" class="keyword">case</span> <span title="Char(']')" class="char">']'</span> =&gt;
          <a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>(); <a href="#121760" title="(x$1: Int)Unit">token</a> = <span title="Int(93)">RBRACKET</span>
        <span title="Unit" class="keyword">case</span> <span title="Char('\032')">SU</span> =&gt;
          <span title="Unit" class="keyword">if</span> (<a href="../../util/CharArrayReader.scala.html#121680" title="(x$1: Int)Boolean">charOffset</a> &gt;= <a href="../../util/CharArrayReader.scala.html#121674" title="=&gt; Array[Char]">buf</a>.<span title="=&gt; Int">length</span>) <a href="#121760" title="(x$1: Int)Unit">token</a> = <span title="Int(0)">EOF</span>
          <span class="keyword">else</span> {
            <a href="#121751" title="(msg: String)Unit">syntaxError</a>(<span title="java.lang.String(&quot;illegal character&quot;)" class="string">&quot;illegal character&quot;</span>)
            <a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>()
          }
        <span title="Unit" class="keyword">case</span> _ =&gt;
          <span title="Unit" class="keyword">if</span> (<a href="../../util/CharArrayReader.scala.html#121677" title="(x$1: Char)Boolean">ch</a> == <span title="Char('⇒')" class="char">'\u21D2'</span>) {
            <a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>(); <a href="#121760" title="(x$1: Int)Unit">token</a> = <span title="Int(77)">ARROW</span>
          } <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<a href="../../util/CharArrayReader.scala.html#121677" title="(x$1: Char)Boolean">ch</a> == <span title="Char('←')" class="char">'\u2190'</span>) {
            <a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>(); <a href="#121760" title="(x$1: Int)Unit">token</a> = <span title="Int(76)">LARROW</span>
          } <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<span title="object java.lang.Character">Character</span>.<span title="(x$1: Char)Boolean">isUnicodeIdentifierStart</span>(<a href="../../util/CharArrayReader.scala.html#121677" title="=&gt; Char">ch</a>)) {
            <a href="#121710" title="(c: Char)Unit">putChar</a>(<a href="../../util/CharArrayReader.scala.html#121677" title="=&gt; Char">ch</a>)
            <a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>()
            <a href="#121735" title="()Unit">getIdentRest</a>()
          } <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<a href="#39680" title="(c: Char)Boolean">isSpecial</a>(<a href="../../util/CharArrayReader.scala.html#121677" title="=&gt; Char">ch</a>)) {
            <a href="#121710" title="(c: Char)Unit">putChar</a>(<a href="../../util/CharArrayReader.scala.html#121677" title="=&gt; Char">ch</a>)
            <a href="#121736" title="()Unit">getOperatorRest</a>()
          } <span class="keyword">else</span> {
            <a href="#121751" title="(msg: String)Unit">syntaxError</a>(<span title="java.lang.String(&quot;illegal character&quot;)" class="string">&quot;illegal character&quot;</span>)
            <a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>()
          }
      }
    }

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="()Boolean" id="121732">skipComment</a>(): <span title="Boolean">Boolean</span> = {
      <span title="Boolean" class="keyword">if</span> (<a href="../../util/CharArrayReader.scala.html#121677" title="(x$1: Char)Boolean">ch</a> == <span title="Char('/')" class="char">'/'</span>) {
        <a href="#524641" title="Unit" class="keyword">do</a> {
          <a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>()
        } <span class="keyword">while</span> (<span title="(x$1: Boolean)Boolean">(</span><a href="../../util/CharArrayReader.scala.html#121677" title="(x$1: Char)Boolean">ch</a> != <span title="Char('\015')">CR</span>) <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> (<a href="../../util/CharArrayReader.scala.html#121677" title="(x$1: Char)Boolean">ch</a> != <span title="Char('\012')">LF</span>) &amp;&amp; (<a href="../../util/CharArrayReader.scala.html#121677" title="(x$1: Char)Boolean">ch</a> != <span title="Char('\032')">SU</span>))
        <span title="Boolean(true)" class="keyword">true</span>
      } <span class="keyword">else</span> <span title="Boolean" class="keyword">if</span> (<a href="../../util/CharArrayReader.scala.html#121677" title="(x$1: Char)Boolean">ch</a> == <span title="Char('*')" class="char">'*'</span>) {
        <a href="#121715" title="(x$1: StringBuilder)Unit">docBuffer</a> = <span title="Null(null)" class="keyword">null</span>
        <span class="keyword">var</span> <a title="Int" id="524678">openComments</a> = <span title="Int(1)" class="int">1</span>
        <a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>()
        <span title="Unit" class="keyword">if</span> (<a href="../../util/CharArrayReader.scala.html#121677" title="(x$1: Char)Boolean">ch</a> <span title="(x$1: Boolean)Boolean">==</span> <span title="Char('*')" class="char">'*'</span> &amp;&amp; <a href="#121713" title="=&gt; Boolean">buildDocs</a>)
          <a href="#121715" title="(x$1: StringBuilder)Unit">docBuffer</a> = <a title="(str: String)StringBuilder" id="57401" class="keyword">new</a> <span title="StringBuilder">StringBuilder</span>(<span title="java.lang.String(&quot;/**&quot;)" class="string">&quot;/**&quot;</span>)
        <span title="Unit" class="keyword">while</span> (<a href="#524678" title="(x$1: Int)Boolean">openComments</a> &gt; <span title="Int(0)" class="int">0</span>) <a href="#524679" title="()Unit">{</a>
          <a href="#524707" title="Unit" class="keyword">do</a> {
            <a href="#524708" title="Unit" class="keyword">do</a> {
              <span title="Unit" class="keyword">if</span> (<a href="../../util/CharArrayReader.scala.html#121677" title="(x$1: Char)Boolean">ch</a> == <span title="Char('/')" class="char">'/'</span>) {
                <a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>(); <a href="#121718" title="(c: Char)Unit">putDocChar</a>(<a href="../../util/CharArrayReader.scala.html#121677" title="=&gt; Char">ch</a>)
                <span title="Unit" class="keyword">if</span> (<a href="../../util/CharArrayReader.scala.html#121677" title="(x$1: Char)Boolean">ch</a> == <span title="Char('*')" class="char">'*'</span>) {
                  <a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>(); <a href="#121718" title="(c: Char)Unit">putDocChar</a>(<a href="../../util/CharArrayReader.scala.html#121677" title="=&gt; Char">ch</a>)
                  <a href="#524678" title="Int">openComments</a> += <span title="Int(1)" class="int">1</span>
                }
              }
              <span title="Unit" class="keyword">if</span> (<a href="../../util/CharArrayReader.scala.html#121677" title="(x$1: Char)Boolean">ch</a> <span title="(x$1: Boolean)Boolean">!=</span> <span title="Char('*')" class="char">'*'</span> &amp;&amp; <a href="../../util/CharArrayReader.scala.html#121677" title="(x$1: Char)Boolean">ch</a> != <span title="Char('\032')">SU</span>) {
                <a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>(); <a href="#121718" title="(c: Char)Unit">putDocChar</a>(<a href="../../util/CharArrayReader.scala.html#121677" title="=&gt; Char">ch</a>)
              }
            } <span class="keyword">while</span> (<a href="../../util/CharArrayReader.scala.html#121677" title="(x$1: Char)Boolean">ch</a> <span title="(x$1: Boolean)Boolean">!=</span> <span title="Char('*')" class="char">'*'</span> &amp;&amp; <a href="../../util/CharArrayReader.scala.html#121677" title="(x$1: Char)Boolean">ch</a> != <span title="Char('\032')">SU</span>)
            <span title="Unit" class="keyword">while</span> (<a href="../../util/CharArrayReader.scala.html#121677" title="(x$1: Char)Boolean">ch</a> == <span title="Char('*')" class="char">'*'</span>) <a href="#524803" title="()Unit">{</a>
              <a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>(); <a href="#121718" title="(c: Char)Unit">putDocChar</a>(<a href="../../util/CharArrayReader.scala.html#121677" title="=&gt; Char">ch</a>)
            }
          } <span class="keyword">while</span> (<a href="../../util/CharArrayReader.scala.html#121677" title="(x$1: Char)Boolean">ch</a> <span title="(x$1: Boolean)Boolean">!=</span> <span title="Char('/')" class="char">'/'</span> &amp;&amp; <a href="../../util/CharArrayReader.scala.html#121677" title="(x$1: Char)Boolean">ch</a> != <span title="Char('\032')">SU</span>)
          <span title="Unit" class="keyword">if</span> (<a href="../../util/CharArrayReader.scala.html#121677" title="(x$1: Char)Boolean">ch</a> == <span title="Char('/')" class="char">'/'</span>) <a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>()
          <span class="keyword">else</span> <a href="#121752" title="(msg: String)Unit">incompleteInputError</a>(<span title="java.lang.String(&quot;unclosed comment&quot;)" class="string">&quot;unclosed comment&quot;</span>)
          <a href="#524678" title="Int">openComments</a> -= <span title="Int(1)" class="int">1</span>
        }
        <span title="Boolean(true)" class="keyword">true</span>
      } <span class="keyword">else</span> {
        <span title="Boolean(false)" class="keyword">false</span>
      }
    }

    /** Can token start a statement? */
    <span class="keyword">def</span> <a title="(token: Int)Boolean" id="121733">inFirstOfStat</a>(<a title="Int" id="523733">token</a>: <span title="Int">Int</span>) = <a href="#523733" title="Int">token</a> <span title="Boolean" class="keyword">match</span> {
      <span title="Boolean(false)" class="keyword">case</span> <span title="Int(0)">EOF</span> | <span title="Int(54)">CATCH</span> | <span title="Int(22)">ELSE</span> | <span title="Int(41)">EXTENDS</span> | <span title="Int(55)">FINALLY</span> | <span title="Int(59)">FORSOME</span> | <span title="Int(58)">MATCH</span> | <span title="Int(26)">WITH</span> | <span title="Int(48)">YIELD</span> |
           <span title="Int(70)">COMMA</span> | <span title="Int(71)">SEMI</span> | <span title="Int(78)">NEWLINE</span> | <span title="Int(79)">NEWLINES</span> | <span title="Int(72)">DOT</span> | <span title="Int(74)">COLON</span> | <span title="Int(75)">EQUALS</span> | <span title="Int(77)">ARROW</span> | <span title="Int(76)">LARROW</span> | 
           <span title="Int(80)">SUBTYPE</span> | <span title="Int(84)">VIEWBOUND</span> | <span title="Int(81)">SUPERTYPE</span> | <span title="Int(82)">HASH</span> | <span title="Int(91)">RPAREN</span> | <span title="Int(93)">RBRACKET</span> | <span title="Int(95)">RBRACE</span> | <span title="Int(92)">LBRACKET</span> =&gt;
        <span title="Boolean(false)" class="keyword">false</span>
      <span title="Boolean(true)" class="keyword">case</span> _ =&gt;
        <span title="Boolean(true)" class="keyword">true</span>
    }

    /** Can token end a statement? */
    <span class="keyword">def</span> <a title="(token: Int)Boolean" id="121734">inLastOfStat</a>(<a title="Int" id="523726">token</a>: <span title="Int">Int</span>) = <a href="#523726" title="Int">token</a> <span title="Boolean" class="keyword">match</span> {
      <span title="Boolean(true)" class="keyword">case</span> <span title="Int(1)">CHARLIT</span> | <span title="Int(2)">INTLIT</span> | <span title="Int(3)">LONGLIT</span> | <span title="Int(4)">FLOATLIT</span> | <span title="Int(5)">DOUBLELIT</span> | <span title="Int(6)">STRINGLIT</span> | <span title="Int(7)">SYMBOLLIT</span> |
           <span title="Int(10)">IDENTIFIER</span> | <span title="Int(11)">BACKQUOTED_IDENT</span> | <span title="Int(23)">THIS</span> | <span title="Int(24)">NULL</span> | <span title="Int(42)">TRUE</span> | <span title="Int(43)">FALSE</span> | <span title="Int(57)">RETURN</span> | <span title="Int(73)">USCORE</span> | 
           <span title="Int(40)">TYPE</span> | <span title="Int(96)">XMLSTART</span> | <span title="Int(91)">RPAREN</span> | <span title="Int(93)">RBRACKET</span> | <span title="Int(95)">RBRACE</span> =&gt;
        <span title="Boolean(true)" class="keyword">true</span>
      <span title="Boolean(false)" class="keyword">case</span> _ =&gt;
        <span title="Boolean(false)" class="keyword">false</span>
    }

// Identifiers ---------------------------------------------------------------

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="()Unit" id="121735">getIdentRest</a>(): <span title="Unit">Unit</span> = (<a href="../../util/CharArrayReader.scala.html#121677" title="=&gt; Char">ch</a>: @<span title="Char @scala.annotation.switch">switch</span>) <span title="Unit" class="keyword">match</span> {
      <span title="Unit" class="keyword">case</span> <span title="Char('A')" class="char">'A'</span> | <span title="Char('B')" class="char">'B'</span> | <span title="Char('C')" class="char">'C'</span> | <span title="Char('D')" class="char">'D'</span> | <span title="Char('E')" class="char">'E'</span> |
           <span title="Char('F')" class="char">'F'</span> | <span title="Char('G')" class="char">'G'</span> | <span title="Char('H')" class="char">'H'</span> | <span title="Char('I')" class="char">'I'</span> | <span title="Char('J')" class="char">'J'</span> |
           <span title="Char('K')" class="char">'K'</span> | <span title="Char('L')" class="char">'L'</span> | <span title="Char('M')" class="char">'M'</span> | <span title="Char('N')" class="char">'N'</span> | <span title="Char('O')" class="char">'O'</span> |
           <span title="Char('P')" class="char">'P'</span> | <span title="Char('Q')" class="char">'Q'</span> | <span title="Char('R')" class="char">'R'</span> | <span title="Char('S')" class="char">'S'</span> | <span title="Char('T')" class="char">'T'</span> |
           <span title="Char('U')" class="char">'U'</span> | <span title="Char('V')" class="char">'V'</span> | <span title="Char('W')" class="char">'W'</span> | <span title="Char('X')" class="char">'X'</span> | <span title="Char('Y')" class="char">'Y'</span> |
           <span title="Char('Z')" class="char">'Z'</span> | <span title="Char('$')" class="char">'$'</span> |
           <span title="Char('a')" class="char">'a'</span> | <span title="Char('b')" class="char">'b'</span> | <span title="Char('c')" class="char">'c'</span> | <span title="Char('d')" class="char">'d'</span> | <span title="Char('e')" class="char">'e'</span> |
           <span title="Char('f')" class="char">'f'</span> | <span title="Char('g')" class="char">'g'</span> | <span title="Char('h')" class="char">'h'</span> | <span title="Char('i')" class="char">'i'</span> | <span title="Char('j')" class="char">'j'</span> |
           <span title="Char('k')" class="char">'k'</span> | <span title="Char('l')" class="char">'l'</span> | <span title="Char('m')" class="char">'m'</span> | <span title="Char('n')" class="char">'n'</span> | <span title="Char('o')" class="char">'o'</span> |
           <span title="Char('p')" class="char">'p'</span> | <span title="Char('q')" class="char">'q'</span> | <span title="Char('r')" class="char">'r'</span> | <span title="Char('s')" class="char">'s'</span> | <span title="Char('t')" class="char">'t'</span> |
           <span title="Char('u')" class="char">'u'</span> | <span title="Char('v')" class="char">'v'</span> | <span title="Char('w')" class="char">'w'</span> | <span title="Char('x')" class="char">'x'</span> | <span title="Char('y')" class="char">'y'</span> |
           <span title="Char('z')" class="char">'z'</span> |
           <span title="Char('0')" class="char">'0'</span> | <span title="Char('1')" class="char">'1'</span> | <span title="Char('2')" class="char">'2'</span> | <span title="Char('3')" class="char">'3'</span> | <span title="Char('4')" class="char">'4'</span> |
           <span title="Char('5')" class="char">'5'</span> | <span title="Char('6')" class="char">'6'</span> | <span title="Char('7')" class="char">'7'</span> | <span title="Char('8')" class="char">'8'</span> | <span title="Char('9')" class="char">'9'</span> =&gt;
        <a href="#121710" title="(c: Char)Unit">putChar</a>(<a href="../../util/CharArrayReader.scala.html#121677" title="=&gt; Char">ch</a>)
        <a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>()
        <a href="#121735" title="()Unit">getIdentRest</a>()
      <span title="Unit" class="keyword">case</span> <span title="Char('_')" class="char">'_'</span> =&gt;
        <a href="#121710" title="(c: Char)Unit">putChar</a>(<a href="../../util/CharArrayReader.scala.html#121677" title="=&gt; Char">ch</a>)
        <a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>()
        <a href="#121737" title="()Unit">getIdentOrOperatorRest</a>()
      <span title="Unit" class="keyword">case</span> <span title="Char('\032')">SU</span> =&gt; // strangely enough, Character.isUnicodeIdentifierPart(SU) returns true!
        <a href="#121711" title="()Unit">finishNamed</a>()
      <span title="Unit" class="keyword">case</span> _ =&gt;
        <span title="Unit" class="keyword">if</span> (<span title="object java.lang.Character">Character</span>.<span title="(x$1: Char)Boolean">isUnicodeIdentifierPart</span>(<a href="../../util/CharArrayReader.scala.html#121677" title="=&gt; Char">ch</a>)) {
          <a href="#121710" title="(c: Char)Unit">putChar</a>(<a href="../../util/CharArrayReader.scala.html#121677" title="=&gt; Char">ch</a>)
          <a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>()
          <a href="#121735" title="()Unit">getIdentRest</a>()
        } <span class="keyword">else</span> {
          <a href="#121711" title="()Unit">finishNamed</a>()
        }
    }

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="()Unit" id="121736">getOperatorRest</a>(): <span title="Unit">Unit</span> = (<a href="../../util/CharArrayReader.scala.html#121677" title="=&gt; Char">ch</a>: @<span title="Char @scala.annotation.switch">switch</span>) <span title="Unit" class="keyword">match</span> {
      <span title="Unit" class="keyword">case</span> <span title="Char('~')" class="char">'~'</span> | <span title="Char('!')" class="char">'!'</span> | <span title="Char('@')" class="char">'@'</span> | <span title="Char('#')" class="char">'#'</span> | <span title="Char('%')" class="char">'%'</span> | 
           <span title="Char('^')" class="char">'^'</span> | <span title="Char('*')" class="char">'*'</span> | <span title="Char('+')" class="char">'+'</span> | <span title="Char('-')" class="char">'-'</span> | <span title="Char('&lt;')" class="char">'&lt;'</span> |
           <span title="Char('&gt;')" class="char">'&gt;'</span> | <span title="Char('?')" class="char">'?'</span> | <span title="Char(':')" class="char">':'</span> | <span title="Char('=')" class="char">'='</span> | <span title="Char('&amp;')" class="char">'&amp;'</span> | 
           <span title="Char('|')" class="char">'|'</span> | <span title="Char('\')" class="char">'\\'</span> =&gt;
        <a href="#121710" title="(c: Char)Unit">putChar</a>(<a href="../../util/CharArrayReader.scala.html#121677" title="=&gt; Char">ch</a>); <a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>(); <a href="#121736" title="()Unit">getOperatorRest</a>()
      <span title="Unit" class="keyword">case</span> <span title="Char('/')" class="char">'/'</span> =&gt;
        <a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>()
        <span title="Unit" class="keyword">if</span> (<a href="#121732" title="()Boolean">skipComment</a>()) <a href="#121711" title="()Unit">finishNamed</a>()
        <span class="keyword">else</span> { <a href="#121710" title="(c: Char)Unit">putChar</a>(<span title="Char('/')" class="char">'/'</span>); <a href="#121736" title="()Unit">getOperatorRest</a>() }
      <span title="Unit" class="keyword">case</span> _ =&gt;
        <span title="Unit" class="keyword">if</span> (<a href="#39680" title="(c: Char)Boolean">isSpecial</a>(<a href="../../util/CharArrayReader.scala.html#121677" title="=&gt; Char">ch</a>)) { <a href="#121710" title="(c: Char)Unit">putChar</a>(<a href="../../util/CharArrayReader.scala.html#121677" title="=&gt; Char">ch</a>); <a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>(); <a href="#121736" title="()Unit">getOperatorRest</a>() }
        <span class="keyword">else</span> <a href="#121711" title="()Unit">finishNamed</a>()
    }

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="()Unit" id="121737">getIdentOrOperatorRest</a>() {
      <span title="Unit" class="keyword">if</span> (<a href="#39679" title="(c: Char)Boolean">isIdentifierPart</a>(<a href="../../util/CharArrayReader.scala.html#121677" title="=&gt; Char">ch</a>)) 
        <a href="#121735" title="()Unit">getIdentRest</a>()
      <span class="keyword">else</span> <a href="../../util/CharArrayReader.scala.html#121677" title="=&gt; Char">ch</a> <span title="Unit" class="keyword">match</span> {
        <span title="Unit" class="keyword">case</span> <span title="Char('~')" class="char">'~'</span> | <span title="Char('!')" class="char">'!'</span> | <span title="Char('@')" class="char">'@'</span> | <span title="Char('#')" class="char">'#'</span> | <span title="Char('%')" class="char">'%'</span> |
             <span title="Char('^')" class="char">'^'</span> | <span title="Char('*')" class="char">'*'</span> | <span title="Char('+')" class="char">'+'</span> | <span title="Char('-')" class="char">'-'</span> | <span title="Char('&lt;')" class="char">'&lt;'</span> |
             <span title="Char('&gt;')" class="char">'&gt;'</span> | <span title="Char('?')" class="char">'?'</span> | <span title="Char(':')" class="char">':'</span> | <span title="Char('=')" class="char">'='</span> | <span title="Char('&amp;')" class="char">'&amp;'</span> | 
             <span title="Char('|')" class="char">'|'</span> | <span title="Char('\')" class="char">'\\'</span> | <span title="Char('/')" class="char">'/'</span> =&gt;
          <a href="#121736" title="()Unit">getOperatorRest</a>()
        <span title="Unit" class="keyword">case</span> _ =&gt;
          <span title="Unit" class="keyword">if</span> (<a href="#39680" title="(c: Char)Boolean">isSpecial</a>(<a href="../../util/CharArrayReader.scala.html#121677" title="=&gt; Char">ch</a>)) <a href="#121736" title="()Unit">getOperatorRest</a>()
          <span class="keyword">else</span> <a href="#121711" title="()Unit">finishNamed</a>()
      }
    }
 
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(delimiter: Char)Boolean" id="121738">getStringLit</a>(<a title="Char" id="524189">delimiter</a>: <span title="Char">Char</span>): <span title="Boolean">Boolean</span> = {
      <span title="Unit" class="keyword">while</span> (<a href="../../util/CharArrayReader.scala.html#121677" title="(x$1: Char)Boolean">ch</a> <span title="(x$1: Boolean)Boolean">!=</span> <a href="#524189" title="Char">delimiter</a> &amp;&amp; (<a href="../../util/CharArrayReader.scala.html#121692" title="(x$1: Boolean)Boolean">isUnicodeEscape</a> || <a href="../../util/CharArrayReader.scala.html#121677" title="(x$1: Char)Boolean">ch</a> <span title="(x$1: Boolean)Boolean">!=</span> <span title="Char('\015')">CR</span> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> <a href="../../util/CharArrayReader.scala.html#121677" title="(x$1: Char)Boolean">ch</a> != <span title="Char('\012')">LF</span> &amp;&amp; <a href="../../util/CharArrayReader.scala.html#121677" title="(x$1: Char)Boolean">ch</a> != <span title="Char('\032')">SU</span>)) {
        <a href="#121740" title="()Unit">getLitChar</a><a href="#524954" title="()Unit">(</a>)
      }
      <span title="Boolean" class="keyword">if</span> (<a href="../../util/CharArrayReader.scala.html#121677" title="(x$1: Char)Boolean">ch</a> == <a href="#524189" title="Char">delimiter</a>) { <a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>(); <span title="Boolean(true)" class="keyword">true</span> }
      <span class="keyword">else</span> <span title="Boolean(false)" class="keyword">false</span>
    }

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="()Unit" id="121739">getMultiLineStringLit</a>() {
      <span title="Unit" class="keyword">if</span> (<a href="../../util/CharArrayReader.scala.html#121677" title="(x$1: Char)Boolean">ch</a> == <span title="Char('&quot;')" class="char">'\&quot;'</span>) {
        <a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>()
        <span title="Unit" class="keyword">if</span> (<a href="../../util/CharArrayReader.scala.html#121677" title="(x$1: Char)Boolean">ch</a> == <span title="Char('&quot;')" class="char">'\&quot;'</span>) {
          <a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>()
          <span title="Unit" class="keyword">if</span> (<a href="../../util/CharArrayReader.scala.html#121677" title="(x$1: Char)Boolean">ch</a> == <span title="Char('&quot;')" class="char">'\&quot;'</span>) {
            <a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>()
            <a href="#121760" title="(x$1: Int)Unit">token</a> = <span title="Int(6)">STRINGLIT</span>
            <a href="#121712" title="()Unit">setStrVal</a>()
          } <span class="keyword">else</span> {
            <a href="#121710" title="(c: Char)Unit">putChar</a>(<span title="Char('&quot;')" class="char">'\&quot;'</span>)
            <a href="#121710" title="(c: Char)Unit">putChar</a>(<span title="Char('&quot;')" class="char">'\&quot;'</span>)
            <a href="#121739" title="()Unit">getMultiLineStringLit</a>()
          }
        } <span class="keyword">else</span> {
          <a href="#121710" title="(c: Char)Unit">putChar</a>(<span title="Char('&quot;')" class="char">'\&quot;'</span>)
          <a href="#121739" title="()Unit">getMultiLineStringLit</a>()
        }
      } <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<a href="../../util/CharArrayReader.scala.html#121677" title="(x$1: Char)Boolean">ch</a> == <span title="Char('\032')">SU</span>) {
        <a href="#121752" title="(msg: String)Unit">incompleteInputError</a>(<span title="java.lang.String(&quot;unclosed multi-line string literal&quot;)" class="string">&quot;unclosed multi-line string literal&quot;</span>)
      } <span class="keyword">else</span> {
        <a href="#121710" title="(c: Char)Unit">putChar</a>(<a href="../../util/CharArrayReader.scala.html#121677" title="=&gt; Char">ch</a>)
        <a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>()
        <a href="#121739" title="()Unit">getMultiLineStringLit</a>()
      }
    }

// Literals -----------------------------------------------------------------

    /** read next character in character or string literal:
    */
    <span class="keyword">protected</span> <span class="keyword">def</span> <a title="()Unit" id="121740">getLitChar</a>() =
      <span title="Unit" class="keyword">if</span> (<a href="../../util/CharArrayReader.scala.html#121677" title="(x$1: Char)Boolean">ch</a> == <span title="Char('\')" class="char">'\\'</span>) {
        <a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>()
        <span title="Unit" class="keyword">if</span> (<span title="(x$1: Char)Boolean" class="char">'0'</span> <span title="(x$1: Boolean)Boolean">&lt;=</span> <a href="../../util/CharArrayReader.scala.html#121677" title="=&gt; Char">ch</a> &amp;&amp; <a href="../../util/CharArrayReader.scala.html#121677" title="(x$1: Char)Boolean">ch</a> &lt;= <span title="Char('7')" class="char">'7'</span>) {
          <span class="keyword">val</span> <a title="Char" id="524335">leadch</a>: <span title="Char">Char</span> = <a href="../../util/CharArrayReader.scala.html#121677" title="=&gt; Char">ch</a>
          <span class="keyword">var</span> <a title="Int" id="524336">oct</a>: <span title="Int">Int</span> = <a href="../../util/CharArrayReader.scala.html#121696" title="(ch: Char,base: Int)Int">digit2int</a>(<a href="../../util/CharArrayReader.scala.html#121677" title="=&gt; Char">ch</a>, <span title="Int(8)" class="int">8</span>)
          <a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>()
          <span title="Unit" class="keyword">if</span> (<span title="(x$1: Char)Boolean" class="char">'0'</span> <span title="(x$1: Boolean)Boolean">&lt;=</span> <a href="../../util/CharArrayReader.scala.html#121677" title="=&gt; Char">ch</a> &amp;&amp; <a href="../../util/CharArrayReader.scala.html#121677" title="(x$1: Char)Boolean">ch</a> &lt;= <span title="Char('7')" class="char">'7'</span>) {
            <a href="#524336" title="Int">oct</a> = <a href="#524336" title="(x$1: Int)Int">oct</a> <span title="(x$1: Int)Int">*</span> <span title="Int(8)" class="int">8</span> + <a href="../../util/CharArrayReader.scala.html#121696" title="(ch: Char,base: Int)Int">digit2int</a>(<a href="../../util/CharArrayReader.scala.html#121677" title="=&gt; Char">ch</a>, <span title="Int(8)" class="int">8</span>)
            <a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>()
            <span title="Unit" class="keyword">if</span> (<a href="#524335" title="(x$1: Char)Boolean">leadch</a> <span title="(x$1: Boolean)Boolean">&lt;=</span> <span title="Char('3')" class="char">'3'</span> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> <span title="(x$1: Char)Boolean" class="char">'0'</span> &lt;= <a href="../../util/CharArrayReader.scala.html#121677" title="=&gt; Char">ch</a> &amp;&amp; <a href="../../util/CharArrayReader.scala.html#121677" title="(x$1: Char)Boolean">ch</a> &lt;= <span title="Char('7')" class="char">'7'</span>) {
              <a href="#524336" title="Int">oct</a> = <a href="#524336" title="(x$1: Int)Int">oct</a> <span title="(x$1: Int)Int">*</span> <span title="Int(8)" class="int">8</span> + <a href="../../util/CharArrayReader.scala.html#121696" title="(ch: Char,base: Int)Int">digit2int</a>(<a href="../../util/CharArrayReader.scala.html#121677" title="=&gt; Char">ch</a>, <span title="Int(8)" class="int">8</span>)
              <a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>()
            }
          }
          <a href="#121710" title="(c: Char)Unit">putChar</a>(<a href="#524336" title="Int">oct</a>.<a title="=&gt; Char" id="2846">toChar</a>)
        } <span class="keyword">else</span> {
          <a href="../../util/CharArrayReader.scala.html#121677" title="=&gt; Char">ch</a> <span title="Unit" class="keyword">match</span> {
            <span title="Unit" class="keyword">case</span> <span title="Char('b')" class="char">'b'</span>  =&gt; <a href="#121710" title="(c: Char)Unit">putChar</a>(<span title="Char('\010')" class="char">'\b'</span>)
            <span title="Unit" class="keyword">case</span> <span title="Char('t')" class="char">'t'</span>  =&gt; <a href="#121710" title="(c: Char)Unit">putChar</a>(<span title="Char('\011')" class="char">'\t'</span>)
            <span title="Unit" class="keyword">case</span> <span title="Char('n')" class="char">'n'</span>  =&gt; <a href="#121710" title="(c: Char)Unit">putChar</a>(<span title="Char('\012')" class="char">'\n'</span>)
            <span title="Unit" class="keyword">case</span> <span title="Char('f')" class="char">'f'</span>  =&gt; <a href="#121710" title="(c: Char)Unit">putChar</a>(<span title="Char('\014')" class="char">'\f'</span>)
            <span title="Unit" class="keyword">case</span> <span title="Char('r')" class="char">'r'</span>  =&gt; <a href="#121710" title="(c: Char)Unit">putChar</a>(<span title="Char('\015')" class="char">'\r'</span>)
            <span title="Unit" class="keyword">case</span> <span title="Char('&quot;')" class="char">'\&quot;'</span> =&gt; <a href="#121710" title="(c: Char)Unit">putChar</a>(<span title="Char('&quot;')" class="char">'\&quot;'</span>)
            <span title="Unit" class="keyword">case</span> <span title="Char(''')" class="char">'\''</span> =&gt; <a href="#121710" title="(c: Char)Unit">putChar</a>(<span title="Char(''')" class="char">'\''</span>)
            <span title="Unit" class="keyword">case</span> <span title="Char('\')" class="char">'\\'</span> =&gt; <a href="#121710" title="(c: Char)Unit">putChar</a>(<span title="Char('\')" class="char">'\\'</span>)
            <span title="Unit" class="keyword">case</span> _    =&gt;
              <a href="#121750" title="(off: Scanners.this.Offset,msg: String)Unit">syntaxError</a>(<a href="../../util/CharArrayReader.scala.html#121680" title="(x$1: Int)Int">charOffset</a> - <span title="Int(1)" class="int">1</span>, <span title="java.lang.String(&quot;invalid escape character&quot;)" class="string">&quot;invalid escape character&quot;</span>)
              <a href="#121710" title="(c: Char)Unit">putChar</a>(<a href="../../util/CharArrayReader.scala.html#121677" title="=&gt; Char">ch</a>)
          }
          <a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>()
        }
      } <span class="keyword">else</span>  {
        <a href="#121710" title="(c: Char)Unit">putChar</a>(<a href="../../util/CharArrayReader.scala.html#121677" title="=&gt; Char">ch</a>)
        <a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>()
      }

    /** read fractional part and exponent of floating point number
     *  if one is present.
     */
    <span class="keyword">protected</span> <span class="keyword">def</span> <a title="()Unit" id="121741">getFraction</a>() {
      <a href="#121760" title="(x$1: Int)Unit">token</a> = <span title="Int(5)">DOUBLELIT</span>
      <span title="Unit" class="keyword">while</span> (<span title="(x$1: Char)Boolean" class="char">'0'</span> <span title="(x$1: Boolean)Boolean">&lt;=</span> <a href="../../util/CharArrayReader.scala.html#121677" title="=&gt; Char">ch</a> &amp;&amp; <a href="../../util/CharArrayReader.scala.html#121677" title="(x$1: Char)Boolean">ch</a> &lt;= <span title="Char('9')" class="char">'9'</span>) <a href="#525073" title="()Unit">{</a>
        <a href="#121710" title="(c: Char)Unit">putChar</a>(<a href="../../util/CharArrayReader.scala.html#121677" title="=&gt; Char">ch</a>)
        <a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>()
      }
      <span title="Unit" class="keyword">if</span> (<a href="../../util/CharArrayReader.scala.html#121677" title="(x$1: Char)Boolean">ch</a> <span title="(x$1: Boolean)Boolean">==</span> <span title="Char('e')" class="char">'e'</span> || <a href="../../util/CharArrayReader.scala.html#121677" title="(x$1: Char)Boolean">ch</a> == <span title="Char('E')" class="char">'E'</span>) {
        <span class="keyword">val</span> <a title="scala.tools.nsc.util.CharArrayReader" id="525112">lookahead</a> = <a href="../../util/CharArrayReader.scala.html#121697" title="=&gt; scala.tools.nsc.util.CharArrayReader">lookaheadReader</a>
        <a href="#525112" title="scala.tools.nsc.util.CharArrayReader">lookahead</a>.<a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>()
        <span title="Unit" class="keyword">if</span> (<a href="#525112" title="scala.tools.nsc.util.CharArrayReader">lookahead</a>.<a href="../../util/CharArrayReader.scala.html#121677" title="(x$1: Char)Boolean">ch</a> <span title="(x$1: Boolean)Boolean">==</span> <span title="Char('+')" class="char">'+'</span> || <a href="#525112" title="scala.tools.nsc.util.CharArrayReader">lookahead</a>.<a href="../../util/CharArrayReader.scala.html#121677" title="(x$1: Char)Boolean">ch</a> == <span title="Char('-')" class="char">'-'</span>) {
          <a href="#525112" title="scala.tools.nsc.util.CharArrayReader">lookahead</a>.<a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>()
        }
        <span title="Unit" class="keyword">if</span> (<span title="(x$1: Char)Boolean" class="char">'0'</span> <span title="(x$1: Boolean)Boolean">&lt;=</span> <a href="#525112" title="scala.tools.nsc.util.CharArrayReader">lookahead</a>.<a href="../../util/CharArrayReader.scala.html#121677" title="=&gt; Char">ch</a> &amp;&amp; <a href="#525112" title="scala.tools.nsc.util.CharArrayReader">lookahead</a>.<a href="../../util/CharArrayReader.scala.html#121677" title="(x$1: Char)Boolean">ch</a> &lt;= <span title="Char('9')" class="char">'9'</span>) {
          <a href="#121710" title="(c: Char)Unit">putChar</a>(<a href="../../util/CharArrayReader.scala.html#121677" title="=&gt; Char">ch</a>)
          <a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>()
          <span title="Unit" class="keyword">if</span> (<a href="../../util/CharArrayReader.scala.html#121677" title="(x$1: Char)Boolean">ch</a> <span title="(x$1: Boolean)Boolean">==</span> <span title="Char('+')" class="char">'+'</span> || <a href="../../util/CharArrayReader.scala.html#121677" title="(x$1: Char)Boolean">ch</a> == <span title="Char('-')" class="char">'-'</span>) {
            <a href="#121710" title="(c: Char)Unit">putChar</a>(<a href="../../util/CharArrayReader.scala.html#121677" title="=&gt; Char">ch</a>)
            <a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>()
          }
          <span title="Unit" class="keyword">while</span> (<span title="(x$1: Char)Boolean" class="char">'0'</span> <span title="(x$1: Boolean)Boolean">&lt;=</span> <a href="../../util/CharArrayReader.scala.html#121677" title="=&gt; Char">ch</a> &amp;&amp; <a href="../../util/CharArrayReader.scala.html#121677" title="(x$1: Char)Boolean">ch</a> &lt;= <span title="Char('9')" class="char">'9'</span>) <a href="#525209" title="()Unit">{</a>
            <a href="#121710" title="(c: Char)Unit">putChar</a>(<a href="../../util/CharArrayReader.scala.html#121677" title="=&gt; Char">ch</a>)
            <a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>()
          }
        }
        <a href="#121760" title="(x$1: Int)Unit">token</a> = <span title="Int(5)">DOUBLELIT</span>
      }
      <span title="Unit" class="keyword">if</span> (<a href="../../util/CharArrayReader.scala.html#121677" title="(x$1: Char)Boolean">ch</a> <span title="(x$1: Boolean)Boolean">==</span> <span title="Char('d')" class="char">'d'</span> || <a href="../../util/CharArrayReader.scala.html#121677" title="(x$1: Char)Boolean">ch</a> == <span title="Char('D')" class="char">'D'</span>) {
        <a href="#121710" title="(c: Char)Unit">putChar</a>(<a href="../../util/CharArrayReader.scala.html#121677" title="=&gt; Char">ch</a>)
        <a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>()
        <a href="#121760" title="(x$1: Int)Unit">token</a> = <span title="Int(5)">DOUBLELIT</span>
      } <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<a href="../../util/CharArrayReader.scala.html#121677" title="(x$1: Char)Boolean">ch</a> <span title="(x$1: Boolean)Boolean">==</span> <span title="Char('f')" class="char">'f'</span> || <a href="../../util/CharArrayReader.scala.html#121677" title="(x$1: Char)Boolean">ch</a> == <span title="Char('F')" class="char">'F'</span>) {
        <a href="#121710" title="(c: Char)Unit">putChar</a>(<a href="../../util/CharArrayReader.scala.html#121677" title="=&gt; Char">ch</a>)
        <a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>()
        <a href="#121760" title="(x$1: Int)Unit">token</a> = <span title="Int(4)">FLOATLIT</span>
      }
      <a href="#121747" title="()Unit">checkNoLetter</a>()
      <a href="#121712" title="()Unit">setStrVal</a>()
    }

    /** Convert current strVal to char value
     */
    <span class="keyword">def</span> <a title="=&gt; Char" id="121742">charVal</a>: <span title="Char">Char</span> = <span title="Char" class="keyword">if</span> (<a href="#121772" title="=&gt; String">strVal</a>.<span title="(x$1: Int)Boolean">length</span> &gt; <span title="Int(0)" class="int">0</span>) <a href="#121772" title="=&gt; String">strVal</a>.<span title="(x$1: Int)Char">charAt</span>(<span title="Int(0)" class="int">0</span>) <span class="keyword">else</span> <span title="Char('\00')" class="int">0</span>

    /** Convert current strVal, base to long value
     *  This is tricky because of max negative value.
     */
    <span class="keyword">def</span> <a title="(negated: Boolean)Long" id="121743">intVal</a>(<a title="Boolean" id="525295">negated</a>: <span title="Boolean">Boolean</span>): <span title="Long">Long</span> = {
      <span title="Long" class="keyword">if</span> (<a href="#121760" title="(x$1: Int)Boolean">token</a> <span title="(x$1: Boolean)Boolean">==</span> <span title="Int(1)">CHARLIT</span> &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#525295" title="Boolean">negated</a>) {
        <a href="#121742" title="implicit scala.Predef.char2long : (x: Char)Long" id="8131">charVal</a>
      } <span class="keyword">else</span> {
        <span class="keyword">var</span> <a title="Long" id="525312">value</a>: <span title="Long">Long</span> = <span title="Long(0L)" class="int">0</span>
        <span class="keyword">val</span> <a title="Int" id="525313">divider</a> = <span title="Int" class="keyword">if</span> (<a href="#121775" title="(x$1: Int)Boolean">base</a> == <span title="Int(10)" class="int">10</span>) <span title="Int(1)" class="int">1</span> <span class="keyword">else</span> <span title="Int(2)" class="int">2</span>
        <span class="keyword">val</span> <a title="Long" id="525314">limit</a>: <span title="Long">Long</span> =
          <span title="Long" class="keyword">if</span> (<a href="#121760" title="(x$1: Int)Boolean">token</a> == <span title="Int(3)">LONGLIT</span>) <span title="object Math">Math</span>.<a title="=&gt; Long" id="69512">MAX_LONG</a> <span class="keyword">else</span> <span title="object Math">Math</span>.<a title="implicit scala.Predef.int2long : (x: Int)Long" id="69508">MAX_INT</a>
        <span class="keyword">var</span> <a title="Int" id="525315">i</a> = <span title="Int(0)" class="int">0</span>
        <span class="keyword">val</span> <a title="Int" id="525316">len</a> = <a href="#121772" title="=&gt; String">strVal</a>.<span title="()Int">length</span>
        <span title="Unit" class="keyword">while</span> (<a href="#525315" title="(x$1: Int)Boolean">i</a> &lt; <a href="#525316" title="Int">len</a>) <a href="#525317" title="()Unit">{</a>
          <span class="keyword">val</span> <a title="Int" id="525347">d</a> = <a href="../../util/CharArrayReader.scala.html#121696" title="(ch: Char,base: Int)Int">digit2int</a>(<a href="#121772" title="(x$1: Int)Char">strVal</a> charAt <a href="#525315" title="Int">i</a>, <a href="#121775" title="=&gt; Int">base</a>)
          <span title="Unit" class="keyword">if</span> (<a href="#525347" title="(x$1: Int)Boolean">d</a> &lt; <span title="Int(0)" class="int">0</span>) {
            <a href="#121751" title="(msg: String)Unit">syntaxError</a>(<span title="java.lang.String(&quot;malformed integer number&quot;)" class="string">&quot;malformed integer number&quot;</span>)
            <span title="Nothing" class="keyword">return</span> <span title="Long(0L)" class="int">0</span>
          }
          <span title="Unit" class="keyword">if</span> (<a href="#525312" title="(x$1: Int)Boolean" id="3164">value</a> <span title="(x$1: Boolean)Boolean">&lt;</span> <span title="Int(0)" class="int">0</span> <span title="(x$1: Boolean)Boolean">||</span>
              <a href="#525314" title="(x$1: Int)Long" id="3178">limit</a> <span title="(x$1: Long)Boolean">/</span> (<a href="#121775" title="(x$1: Int)Int">base</a> / <a href="#525313" title="Int">divider</a>) &lt; <a href="#525312" title="Long">value</a> ||
              <a href="#525314" title="(x$1: Int)Long">limit</a> <span title="(x$1: Long)Boolean">-</span> (<a href="#525347" title="(x$1: Int)Int">d</a> / <a href="#525313" title="Int">divider</a>) <span title="(x$1: Boolean)Boolean">&lt;</span> <a href="#525312" title="(x$1: Int)Long">value</a> * (<a href="#121775" title="(x$1: Int)Int">base</a> / <a href="#525313" title="Int">divider</a>) &amp;&amp;
              <span title="=&gt; Boolean">!</span>(<a href="#525295" title="(x$1: Boolean)Boolean">negated</a> &amp;&amp; <a href="#525314" title="(x$1: Long)Boolean" id="3188">limit</a> == <a href="#525312" title="(x$1: Int)Long">value</a> <span title="(x$1: Int)Long">*</span> <a href="#121775" title="=&gt; Int">base</a> <span title="(x$1: Int)Long">-</span> <span title="Int(1)" class="int">1</span> + <a href="#525347" title="Int">d</a>)) {
                <a href="#121751" title="(msg: String)Unit">syntaxError</a>(<span title="java.lang.String(&quot;integer number too large&quot;)" class="string">&quot;integer number too large&quot;</span>)
                <span title="Nothing" class="keyword">return</span> <span title="Long(0L)" class="int">0</span>
              }
          <a href="#525312" title="Long">value</a> = <a href="#525312" title="(x$1: Int)Long">value</a> <span title="(x$1: Int)Long">*</span> <a href="#121775" title="=&gt; Int">base</a> + <a href="#525347" title="Int">d</a>
          <a href="#525315" title="Int">i</a> += <span title="Int(1)" class="int">1</span>
        }
        <span title="Long" class="keyword">if</span> (<a href="#525295" title="Boolean">negated</a>) <a title="=&gt; Long" id="3074">-</a><a href="#525312" title="Long">value</a> <span class="keyword">else</span> <a href="#525312" title="Long">value</a>
      }
    }

    <span class="keyword">def</span> <a title="=&gt; Long" id="121744">intVal</a>: <span title="Long">Long</span> = <a href="#121743" title="(negated: Boolean)Long">intVal</a>(<span title="Boolean(false)" class="keyword">false</span>)

    /** Convert current strVal, base to double value
    */
    <span class="keyword">def</span> <a title="(negated: Boolean)Double" id="121745">floatVal</a>(<a title="Boolean" id="525522">negated</a>: <span title="Boolean">Boolean</span>): <span title="Double">Double</span> = {
      <span class="keyword">val</span> <a title="Double" id="525524">limit</a>: <span title="Double">Double</span> = 
        <span title="Double" class="keyword">if</span> (<a href="#121760" title="(x$1: Int)Boolean">token</a> == <span title="Int(5)">DOUBLELIT</span>) <span title="object Math">Math</span>.<a title="=&gt; Double" id="69530">MAX_DOUBLE</a> <span class="keyword">else</span> <span title="object Math">Math</span>.<a title="implicit scala.Predef.float2double : (x: Float)Double" id="69518">MAX_FLOAT</a>
      <span class="keyword">try</span> {
        <span class="keyword">val</span> <a title="Double" id="525538">value</a>: <span title="Double">Double</span> = java.lang.<a title="object java.lang.Double" id="1879">Double</a>.<a title="(x$1: java.lang.String)java.lang.Double" id="30853">valueOf</a>(<a href="#121772" title="=&gt; String">strVal</a>).<a title="()Double" id="30875">doubleValue</a>()
        <span title="Unit" class="keyword">if</span> (<a href="#525538" title="(x$1: Double)Boolean" id="3576">value</a> &gt; <a href="#525524" title="Double">limit</a>)
          <a href="#121751" title="(msg: String)Unit">syntaxError</a>(<span title="java.lang.String(&quot;floating point number too large&quot;)" class="string">&quot;floating point number too large&quot;</span>)
        <span title="Double" class="keyword">if</span> (<a href="#525522" title="Boolean">negated</a>) <a title="=&gt; Double" id="3435">-</a><a href="#525538" title="Double">value</a> <span class="keyword">else</span> <a href="#525538" title="Double">value</a>
      } <span class="keyword">catch</span> {
        <span title="Double" class="keyword">case</span> _: <a title="NumberFormatException" id="1848">NumberFormatException</a> =&gt; 
          <a href="#121751" title="(msg: String)Unit">syntaxError</a>(<span title="java.lang.String(&quot;malformed floating point number&quot;)" class="string">&quot;malformed floating point number&quot;</span>)
          <span title="Double(0.0)" class="double">0.0</span>
      }
    }

    <span class="keyword">def</span> <a title="=&gt; Double" id="121746">floatVal</a>: <span title="Double">Double</span> = <a href="#121745" title="(negated: Boolean)Double">floatVal</a>(<span title="Boolean(false)" class="keyword">false</span>)

    <span class="keyword">def</span> <a title="()Unit" id="121747">checkNoLetter</a>() {
      <span title="Unit" class="keyword">if</span> (<a href="#39679" title="(c: Char)Boolean">isIdentifierPart</a><span title="(x$1: Boolean)Boolean">(</span><a href="../../util/CharArrayReader.scala.html#121677" title="=&gt; Char">ch</a>) &amp;&amp; <a href="../../util/CharArrayReader.scala.html#121677" title="(x$1: Char)Boolean" id="2726">ch</a> &gt;= <span title="Char(' ')" class="char">' '</span>) 
        <a href="#121751" title="(msg: String)Unit">syntaxError</a>(<span title="java.lang.String(&quot;Invalid literal number&quot;)" class="string">&quot;Invalid literal number&quot;</span>)
    }

    /** Read a number into strVal and set base
    */
    <span class="keyword">protected</span> <span class="keyword">def</span> <a title="()Unit" id="121748">getNumber</a>() {
      <span class="keyword">val</span> <a title="Int" id="525600">base1</a> = <span title="Int" class="keyword">if</span> (<a href="#121775" title="(x$1: Int)Boolean">base</a> &lt; <span title="Int(10)" class="int">10</span>) <span title="Int(10)" class="int">10</span> <span class="keyword">else</span> <a href="#121775" title="=&gt; Int">base</a> 
        // read 8,9's even if format is octal, produce a malformed number error afterwards.
      <span title="Unit" class="keyword">while</span> (<a href="../../util/CharArrayReader.scala.html#121696" title="(ch: Char,base: Int)Int">digit2int</a><span title="(x$1: Int)Boolean">(</span><a href="../../util/CharArrayReader.scala.html#121677" title="=&gt; Char">ch</a>, <a href="#525600" title="Int">base1</a>) &gt;= <span title="Int(0)" class="int">0</span>) <a href="#525601" title="()Unit">{</a>
        <a href="#121710" title="(c: Char)Unit">putChar</a>(<a href="../../util/CharArrayReader.scala.html#121677" title="=&gt; Char">ch</a>)
        <a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>()
      }
      <a href="#121760" title="(x$1: Int)Unit">token</a> = <span title="Int(2)">INTLIT</span>
      <span title="Unit" class="keyword">if</span> (<a href="#121775" title="(x$1: Int)Boolean">base</a> <span title="(x$1: Boolean)Boolean">&lt;=</span> <span title="Int(10)" class="int">10</span> &amp;&amp; <a href="../../util/CharArrayReader.scala.html#121677" title="(x$1: Char)Boolean">ch</a> == <span title="Char('.')" class="char">'.'</span>) {
        <span class="keyword">val</span> <a title="scala.tools.nsc.util.CharArrayReader" id="525639">lookahead</a> = <a href="../../util/CharArrayReader.scala.html#121697" title="=&gt; scala.tools.nsc.util.CharArrayReader">lookaheadReader</a>
        <a href="#525639" title="scala.tools.nsc.util.CharArrayReader">lookahead</a>.<a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>()
        <a href="#525639" title="scala.tools.nsc.util.CharArrayReader">lookahead</a>.<a href="../../util/CharArrayReader.scala.html#121677" title="=&gt; Char">ch</a> <span title="Unit" class="keyword">match</span> {
          <span title="Nothing" class="keyword">case</span> <span title="Char('0')" class="char">'0'</span> | <span title="Char('1')" class="char">'1'</span> | <span title="Char('2')" class="char">'2'</span> | <span title="Char('3')" class="char">'3'</span> | <span title="Char('4')" class="char">'4'</span> | <span title="Char('5')" class="char">'5'</span> | <span title="Char('6')" class="char">'6'</span> | <span title="Char('7')" class="char">'7'</span> | 
               <span title="Char('8')" class="char">'8'</span> | <span title="Char('9')" class="char">'9'</span> | <span title="Char('d')" class="char">'d'</span> | <span title="Char('D')" class="char">'D'</span> | <span title="Char('e')" class="char">'e'</span> | <span title="Char('E')" class="char">'E'</span> | <span title="Char('f')" class="char">'f'</span> | <span title="Char('F')" class="char">'F'</span> =&gt;
            <a href="#121710" title="(c: Char)Unit">putChar</a>(<a href="../../util/CharArrayReader.scala.html#121677" title="=&gt; Char">ch</a>)
            <a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>()
            <span title="Nothing" class="keyword">return</span> <a href="#121741" title="()Unit">getFraction</a>()
          <span title="Unit" class="keyword">case</span> _ =&gt;
            <span title="Unit" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="#39678" title="(c: Char)Boolean">isIdentifierStart</a>(<a href="#525639" title="scala.tools.nsc.util.CharArrayReader">lookahead</a>.<a href="../../util/CharArrayReader.scala.html#121677" title="=&gt; Char">ch</a>)) {
              <a href="#121710" title="(c: Char)Unit">putChar</a>(<a href="../../util/CharArrayReader.scala.html#121677" title="=&gt; Char">ch</a>)
              <a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>()
              <span title="Nothing" class="keyword">return</span> <a href="#121741" title="()Unit">getFraction</a>()
            }
        }
      }
      <span title="Unit" class="keyword">if</span> (<a href="#121775" title="(x$1: Int)Boolean">base</a> <span title="(x$1: Boolean)Boolean">&lt;=</span> <span title="Int(10)" class="int">10</span> &amp;&amp; 
          (<a href="../../util/CharArrayReader.scala.html#121677" title="(x$1: Char)Boolean">ch</a> <span title="(x$1: Boolean)Boolean">==</span> <span title="Char('e')" class="char">'e'</span> <span title="(x$1: Boolean)Boolean">||</span> <a href="../../util/CharArrayReader.scala.html#121677" title="(x$1: Char)Boolean">ch</a> == <span title="Char('E')" class="char">'E'</span> <span title="(x$1: Boolean)Boolean">||</span>
           <a href="../../util/CharArrayReader.scala.html#121677" title="(x$1: Char)Boolean">ch</a> == <span title="Char('f')" class="char">'f'</span> <span title="(x$1: Boolean)Boolean">||</span> <a href="../../util/CharArrayReader.scala.html#121677" title="(x$1: Char)Boolean">ch</a> == <span title="Char('F')" class="char">'F'</span> <span title="(x$1: Boolean)Boolean">||</span>
           <a href="../../util/CharArrayReader.scala.html#121677" title="(x$1: Char)Boolean">ch</a> == <span title="Char('d')" class="char">'d'</span> || <a href="../../util/CharArrayReader.scala.html#121677" title="(x$1: Char)Boolean">ch</a> == <span title="Char('D')" class="char">'D'</span>)) {
        <span title="Nothing" class="keyword">return</span> <a href="#121741" title="()Unit">getFraction</a>()
      }
      <a href="#121712" title="()Unit">setStrVal</a>()
      <span title="Unit" class="keyword">if</span> (<a href="../../util/CharArrayReader.scala.html#121677" title="(x$1: Char)Boolean">ch</a> <span title="(x$1: Boolean)Boolean">==</span> <span title="Char('l')" class="char">'l'</span> || <a href="../../util/CharArrayReader.scala.html#121677" title="(x$1: Char)Boolean">ch</a> == <span title="Char('L')" class="char">'L'</span>) {
        <a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>()
        <a href="#121760" title="(x$1: Int)Unit">token</a> = <span title="Int(3)">LONGLIT</span>
      } <span class="keyword">else</span> <a href="#121747" title="()Unit">checkNoLetter</a>()
    }

    /** Parse character literal if current character is followed by \',
     *  or follow with given op and return a symol literal token
     */
    <span class="keyword">def</span> <a title="(op: () =&gt; Unit)Unit" id="121749">charLitOr</a>(<a title="() =&gt; Unit" id="524272">op</a>: () =&gt; Unit) {
      <a href="#121710" title="(c: Char)Unit">putChar</a>(<a href="../../util/CharArrayReader.scala.html#121677" title="=&gt; Char">ch</a>)
      <a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>()
      <span title="Unit" class="keyword">if</span> (<a href="../../util/CharArrayReader.scala.html#121677" title="(x$1: Char)Boolean">ch</a> == <span title="Char(''')" class="char">'\''</span>) {
        <a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>()
        <a href="#121760" title="(x$1: Int)Unit">token</a> = <span title="Int(1)">CHARLIT</span>
        <a href="#121712" title="()Unit">setStrVal</a>()
      } <span class="keyword">else</span> {
        <a href="#524272" title="()Unit" id="44711">op</a>()
        <a href="#121760" title="(x$1: Int)Unit">token</a> = <span title="Int(7)">SYMBOLLIT</span>
        <a href="#121772" title="(x$1: String)Unit">strVal</a> = <a href="#121769" title="=&gt; Scanners.this.global.Name">name</a>.<a href="../../symtab/Names.scala.html#28205" title="()String">toString</a>
      }
    }

// Errors -----------------------------------------------------------------

    /** generate an error at the given offset
    */
    <span class="keyword">def</span> <a title="(off: Scanners.this.Offset,msg: String)Unit" id="121750">syntaxError</a>(<a title="Scanners.this.Offset" id="524207">off</a>: <span title="Scanners.this.Offset">Offset</span>, <a title="String" id="524208">msg</a>: <span title="String">String</span>) {
      <a href="#121702" title="(off: Scanners.this.Offset,msg: String)Unit">error</a>(<a href="#524207" title="Scanners.this.Offset">off</a>, <a href="#524208" title="String">msg</a>)
      <a href="#121760" title="(x$1: Int)Unit">token</a> = <span title="Int(-1)">ERROR</span>
      <a href="#121706" title="(x$1: Scanners.this.Offset)Unit">errOffset</a> = <a href="#524207" title="Scanners.this.Offset">off</a>
    }

    /** generate an error at the current token offset
    */
    <span class="keyword">def</span> <a title="(msg: String)Unit" id="121751">syntaxError</a>(<a title="String" id="524205">msg</a>: <span title="String">String</span>): <span title="Unit">Unit</span> = <a href="#121750" title="(off: Scanners.this.Offset,msg: String)Unit">syntaxError</a>(<a href="#121763" title="=&gt; Scanners.this.Offset">offset</a>, <a href="#524205" title="String">msg</a>)

    /** signal an error where the input ended in the middle of a token */
    <span class="keyword">def</span> <a title="(msg: String)Unit" id="121752">incompleteInputError</a>(<a title="String" id="524847">msg</a>: <span title="String">String</span>) {
      <a href="#121703" title="(off: Scanners.this.Offset,msg: String)Unit">incompleteInputError</a>(<a href="#121763" title="=&gt; Scanners.this.Offset">offset</a>, <a href="#524847" title="String">msg</a>)
      <a href="#121760" title="(x$1: Int)Unit">token</a> = <span title="Int(0)">EOF</span>
      <a href="#121706" title="(x$1: Scanners.this.Offset)Unit">errOffset</a> = <a href="#121763" title="=&gt; Scanners.this.Offset">offset</a>
    }

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="()java.lang.String" id="121753">toString</a>() = <a href="#121760" title="=&gt; Int">token</a> <span title="java.lang.String" class="keyword">match</span> {
      <span title="java.lang.String" class="keyword">case</span> <span title="Int(10)">IDENTIFIER</span> | <span title="Int(11)">BACKQUOTED_IDENT</span> =&gt;
        <span title="(x$1: Any)java.lang.String" class="string">&quot;id(&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#121769" title="=&gt; Scanners.this.global.Name">name</a> + <span title="java.lang.String(&quot;)&quot;)" class="string">&quot;)&quot;</span>
      <span title="java.lang.String" class="keyword">case</span> <span title="Int(1)">CHARLIT</span> =&gt;
        <span title="(x$1: Any)java.lang.String" class="string">&quot;char(&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#121744" title="=&gt; Long">intVal</a> + <span title="java.lang.String(&quot;)&quot;)" class="string">&quot;)&quot;</span>
      <span title="java.lang.String" class="keyword">case</span> <span title="Int(2)">INTLIT</span> =&gt;
        <span title="(x$1: Any)java.lang.String" class="string">&quot;int(&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#121744" title="=&gt; Long">intVal</a> + <span title="java.lang.String(&quot;)&quot;)" class="string">&quot;)&quot;</span>
      <span title="java.lang.String" class="keyword">case</span> <span title="Int(3)">LONGLIT</span> =&gt;
        <span title="(x$1: Any)java.lang.String" class="string">&quot;long(&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#121744" title="=&gt; Long">intVal</a> + <span title="java.lang.String(&quot;)&quot;)" class="string">&quot;)&quot;</span>
      <span title="java.lang.String" class="keyword">case</span> <span title="Int(4)">FLOATLIT</span> =&gt;
        <span title="(x$1: Any)java.lang.String" class="string">&quot;float(&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#121746" title="=&gt; Double">floatVal</a> + <span title="java.lang.String(&quot;)&quot;)" class="string">&quot;)&quot;</span>
      <span title="java.lang.String" class="keyword">case</span> <span title="Int(5)">DOUBLELIT</span> =&gt;
        <span title="(x$1: Any)java.lang.String" class="string">&quot;double(&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#121746" title="=&gt; Double">floatVal</a> + <span title="java.lang.String(&quot;)&quot;)" class="string">&quot;)&quot;</span>
      <span title="java.lang.String" class="keyword">case</span> <span title="Int(6)">STRINGLIT</span> =&gt;
        <span title="(x$1: Any)java.lang.String" class="string">&quot;string(&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#121772" title="=&gt; String">strVal</a> + <span title="java.lang.String(&quot;)&quot;)" class="string">&quot;)&quot;</span>
      <span title="java.lang.String(&quot;;&quot;)" class="keyword">case</span> <span title="Int(71)">SEMI</span> =&gt;
        <span title="java.lang.String(&quot;;&quot;)" class="string">&quot;;&quot;</span>
      <span title="java.lang.String(&quot;;&quot;)" class="keyword">case</span> <span title="Int(78)">NEWLINE</span> =&gt;
        <span title="java.lang.String(&quot;;&quot;)" class="string">&quot;;&quot;</span>
      <span title="java.lang.String(&quot;;;&quot;)" class="keyword">case</span> <span title="Int(79)">NEWLINES</span> =&gt;
        <span title="java.lang.String(&quot;;;&quot;)" class="string">&quot;;;&quot;</span>
      <span title="java.lang.String(&quot;,&quot;)" class="keyword">case</span> <span title="Int(70)">COMMA</span> =&gt;
        <span title="java.lang.String(&quot;,&quot;)" class="string">&quot;,&quot;</span>
      <span title="String" class="keyword">case</span> _ =&gt;
        <a href="#39697" title="(token: Int)String">token2string</a>(<a href="#121760" title="=&gt; Int">token</a>)
    }

    // ------------- brace counting and healing ------------------------------
 
    /** overridden in UnitScanners:
     *  apply brace patch if one exists for this offset
     *  return true if subsequent end of line handling should be suppressed.
     */
    <span class="keyword">def</span> <a title="()Boolean" id="121754">applyBracePatch</a>(): <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span>
 
    /** overridden in UnitScanners */
    <span class="keyword">def</span> <a title="(token: Int)Int" id="121755">parenBalance</a>(<a title="Int" id="525845">token</a>: <span title="Int">Int</span>) = <span title="Int(0)" class="int">0</span>
    
    /** overridden in UnitScanners */
    <span class="keyword">def</span> <a title="()List[scala.tools.nsc.ast.parser.BracePatch]" id="121756">healBraces</a>(): <span title="List[scala.tools.nsc.ast.parser.BracePatch]">List</span>[BracePatch] = List<span title="object Nil">(</span>)

    /** Initialization method: read first char, then first token
     */
    <span class="keyword">def</span> <a title="()Unit" id="121757">init</a>() {
      <a href="../../util/CharArrayReader.scala.html#121693" title="()Unit">nextChar</a>()
      <a href="#121728" title="()Unit">nextToken</a>()
    }
  } // end Scanner

  // ------------- character classification --------------------------------

  <span class="keyword">def</span> <a title="(c: Char)Boolean" id="39678">isIdentifierStart</a>(<a title="Char" id="333028">c</a>: <span title="Char">Char</span>): <span title="Boolean">Boolean</span> =
    <span title="(x$1: Boolean)Boolean">(</span><span title="(x$1: Char)Boolean" class="char">'A'</span> <span title="(x$1: Boolean)Boolean">&lt;=</span> <a href="#333028" title="Char">c</a> &amp;&amp; <a href="#333028" title="(x$1: Char)Boolean">c</a> &lt;= <span title="Char('Z')" class="char">'Z'</span>) <span title="(x$1: Boolean)Boolean">||</span>
    (<span title="(x$1: Char)Boolean" class="char">'a'</span> <span title="(x$1: Boolean)Boolean">&lt;=</span> <a href="#333028" title="Char">c</a> &amp;&amp; <a href="#333028" title="(x$1: Char)Boolean">c</a> &lt;= <span title="Char('a')" class="char">'a'</span>) <span title="(x$1: Boolean)Boolean">||</span>
    (<a href="#333028" title="(x$1: Char)Boolean">c</a> == <span title="Char('_')" class="char">'_'</span>) <span title="(x$1: Boolean)Boolean">||</span> (<a href="#333028" title="(x$1: Char)Boolean">c</a> == <span title="Char('$')" class="char">'$'</span>) ||
    <span title="object java.lang.Character">Character</span>.<span title="(x$1: Char)Boolean">isUnicodeIdentifierStart</span>(<a href="#333028" title="Char">c</a>)
  
  <span class="keyword">def</span> <a title="(c: Char)Boolean" id="39679">isIdentifierPart</a>(<a title="Char" id="333025">c</a>: <span title="Char">Char</span>) =
    <a href="#39678" title="(c: Char)Boolean">isIdentifierStart</a><span title="(x$1: Boolean)Boolean">(</span><a href="#333025" title="Char">c</a>) <span title="(x$1: Boolean)Boolean">||</span> 
    (<span title="(x$1: Char)Boolean" class="char">'0'</span> <span title="(x$1: Boolean)Boolean">&lt;=</span> <a href="#333025" title="Char">c</a> &amp;&amp; <a href="#333025" title="(x$1: Char)Boolean">c</a> &lt;= <span title="Char('9')" class="char">'9'</span>) ||
    <span title="object java.lang.Character">Character</span>.<span title="(x$1: Char)Boolean">isUnicodeIdentifierPart</span>(<a href="#333025" title="Char">c</a>)

  <span class="keyword">def</span> <a title="(c: Char)Boolean" id="39680">isSpecial</a>(<a title="Char" id="524279">c</a>: <span title="Char">Char</span>) = {
    <span class="keyword">val</span> <a title="Int" id="524282">chtp</a> = <span title="object java.lang.Character">Character</span>.<a title="(x$1: Char)Int" id="43231">getType</a>(<a href="#524279" title="Char">c</a>)
    <a href="#524282" title="(x$1: Byte)Boolean">chtp</a> <span title="(x$1: Boolean)Boolean">==</span> Character.<span title="Byte(25)">MATH_SYMBOL</span> || <a href="#524282" title="(x$1: Byte)Boolean">chtp</a> == Character.<span title="Byte(28)">OTHER_SYMBOL</span>
  }

  <span class="keyword">def</span> <a title="(c: Char)Boolean" id="39681">isOperatorPart</a>(<a title="Char" id="333058">c</a> : <span title="Char">Char</span>) : <span title="Boolean">Boolean</span> = (<a href="#333058" title="Char">c</a>: @<span title="Char @scala.annotation.switch">switch</span>) <span title="Boolean" class="keyword">match</span> {
    <span title="Boolean(true)" class="keyword">case</span> <span title="Char('~')" class="char">'~'</span> | <span title="Char('!')" class="char">'!'</span> | <span title="Char('@')" class="char">'@'</span> | <span title="Char('#')" class="char">'#'</span> | <span title="Char('%')" class="char">'%'</span> | 
         <span title="Char('^')" class="char">'^'</span> | <span title="Char('*')" class="char">'*'</span> | <span title="Char('+')" class="char">'+'</span> | <span title="Char('-')" class="char">'-'</span> | <span title="Char('&lt;')" class="char">'&lt;'</span> |
         <span title="Char('&gt;')" class="char">'&gt;'</span> | <span title="Char('?')" class="char">'?'</span> | <span title="Char(':')" class="char">':'</span> | <span title="Char('=')" class="char">'='</span> | <span title="Char('&amp;')" class="char">'&amp;'</span> | 
         <span title="Char('|')" class="char">'|'</span> | <span title="Char('/')" class="char">'/'</span> | <span title="Char('\')" class="char">'\\'</span> =&gt; <span title="Boolean(true)" class="keyword">true</span>
    <span title="Boolean" class="keyword">case</span> <a title="Char @scala.annotation.switch" id="525919">c</a> =&gt; <a href="#39680" title="(c: Char)Boolean">isSpecial</a>(<a href="#525919" title="Char @scala.annotation.switch">c</a>)
  }

  // ------------- keyword configuration -----------------------------------
  
  /** Keyword array; maps from name indices to tokens */
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Array[Byte]" id="39683">keyCode</a>: <span title="Array[Byte]">Array</span>[Byte] = _
  /** The highest name index of a keyword token */
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Int" id="39686">maxKey</a> = <span title="Int(0)" class="int">0</span>
  /** An array of all keyword token names */
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Array[Scanners.this.global.Name]" id="39689">keyName</a> = <span title="Array[Scanners.this.global.Name]" class="keyword">new</span> <span title="Array[Scanners.this.global.Name]">Array</span>[Name](<span title="Int(128)" class="int">128</span>)
  /** The highest keyword token plus one */
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Int" id="39692">tokenCount</a> = <span title="Int(0)" class="int">0</span> 

  /** Enter keyword with given name and token id */
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(n: Scanners.this.global.Name,tokenId: Int)Unit" id="39694">enterKeyword</a>(<a title="Scanners.this.global.Name" id="525922">n</a>: <a href="../../symtab/Names.scala.html#26055" title="Scanners.this.global.Name">Name</a>, <a title="Int" id="525923">tokenId</a>: <span title="Int">Int</span>) {
    <span title="Unit" class="keyword">while</span> (<a href="#525923" title="(x$1: Int)Boolean">tokenId</a> &gt;= <a href="#39689" title="=&gt; Array[Scanners.this.global.Name]">keyName</a>.<span title="=&gt; Int">length</span>) <a href="#525925" title="()Unit">{</a>
      <span class="keyword">val</span> <a title="Array[Scanners.this.global.Name]" id="525933">newTokName</a> = <span title="Array[Scanners.this.global.Name]" class="keyword">new</span> <span title="Array[Scanners.this.global.Name]">Array</span>[Name](<a href="#39689" title="=&gt; Array[Scanners.this.global.Name]">keyName</a>.<span title="(x$1: Int)Int">length</span> * <span title="Int(2)" class="int">2</span>)
      compat.<a title="object scala.compat.Platform" id="38988">Platform</a>.<a title="(src: AnyRef,srcPos: Int,dest: AnyRef,destPos: Int,length: Int)Unit" id="38996">arraycopy</a>(<a href="#39689" title="=&gt; Array[Scanners.this.global.Name]">keyName</a>, <span title="Int(0)" class="int">0</span>, <a href="#525933" title="Array[Scanners.this.global.Name]">newTokName</a>, <span title="Int(0)" class="int">0</span>, <a href="#525933" title="Array[Scanners.this.global.Name]">newTokName</a>.<span title="=&gt; Int">length</span>)
      <a href="#39689" title="(x$1: Array[Scanners.this.global.Name])Unit">keyName</a> = <a href="#525933" title="Array[Scanners.this.global.Name]">newTokName</a>
    }
    <a href="#39689" title="(i: Int,x: Scanners.this.global.Name)Unit">keyName</a>(<a href="#525923" title="Int">tokenId</a>) = <a href="#525922" title="Scanners.this.global.Name">n</a>
    <span title="Unit" class="keyword">if</span> (<a href="#525922" title="Scanners.this.global.Name">n</a>.<a href="../../symtab/Names.scala.html#28193" title="(x$1: Int)Boolean">start</a> &gt; <a href="#39686" title="=&gt; Int">maxKey</a>) <a href="#39686" title="(x$1: Int)Unit">maxKey</a> = <a href="#525922" title="Scanners.this.global.Name">n</a>.<a href="../../symtab/Names.scala.html#28193" title="=&gt; Int">start</a>
    <span title="Unit" class="keyword">if</span> (<a href="#525923" title="(x$1: Int)Boolean">tokenId</a> &gt;= <a href="#39692" title="=&gt; Int">tokenCount</a>) <a href="#39692" title="(x$1: Int)Unit">tokenCount</a> = <a href="#525923" title="(x$1: Int)Int">tokenId</a> + <span title="Int(1)" class="int">1</span>
  }

  /** Enter all keywords */
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="()Unit" id="39695">enterKeywords</a>() {
    <a href="#39694" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26531" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29508" title="=&gt; Scanners.this.global.Name">ABSTRACTkw</a>, <span title="Int(32)">ABSTRACT</span>)
    <a href="#39694" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26531" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29510" title="=&gt; Scanners.this.global.Name">CASEkw</a>, <span title="Int(28)">CASE</span>)
    <a href="#39694" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26531" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29514" title="=&gt; Scanners.this.global.Name">CATCHkw</a>, <span title="Int(54)">CATCH</span>)
    <a href="#39694" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26531" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29512" title="=&gt; Scanners.this.global.Name">CLASSkw</a>, <span title="Int(45)">CLASS</span>)
    <a href="#39694" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26531" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29516" title="=&gt; Scanners.this.global.Name">DEFkw</a>, <span title="Int(39)">DEF</span>)
    <a href="#39694" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26531" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29518" title="=&gt; Scanners.this.global.Name">DOkw</a>, <span title="Int(49)">DO</span>)
    <a href="#39694" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26531" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29520" title="=&gt; Scanners.this.global.Name">ELSEkw</a>, <span title="Int(22)">ELSE</span>)
    <a href="#39694" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26531" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29522" title="=&gt; Scanners.this.global.Name">EXTENDSkw</a>, <span title="Int(41)">EXTENDS</span>)
    <a href="#39694" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26531" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29524" title="=&gt; Scanners.this.global.Name">FALSEkw</a>, <span title="Int(43)">FALSE</span>)
    <a href="#39694" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26531" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29526" title="=&gt; Scanners.this.global.Name">FINALkw</a>, <span title="Int(33)">FINAL</span>)
    <a href="#39694" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26531" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29528" title="=&gt; Scanners.this.global.Name">FINALLYkw</a>, <span title="Int(55)">FINALLY</span>)
    <a href="#39694" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26531" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29530" title="=&gt; Scanners.this.global.Name">FORkw</a>, <span title="Int(21)">FOR</span>)
    <a href="#39694" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26531" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29532" title="=&gt; Scanners.this.global.Name">FORSOMEkw</a>, <span title="Int(59)">FORSOME</span>)
    <a href="#39694" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26531" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29534" title="=&gt; Scanners.this.global.Name">IFkw</a>, <span title="Int(20)">IF</span>)
    <a href="#39694" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26531" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29536" title="=&gt; Scanners.this.global.Name">IMPLICITkw</a>, <span title="Int(37)">IMPLICIT</span>)
    <a href="#39694" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26531" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29538" title="=&gt; Scanners.this.global.Name">IMPORTkw</a>, <span title="Int(46)">IMPORT</span>)
    <a href="#39694" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26531" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29540" title="=&gt; Scanners.this.global.Name">LAZYkw</a>, <span title="Int(61)">LAZY</span>)
    <a href="#39694" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26531" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29542" title="=&gt; Scanners.this.global.Name">MATCHkw</a>, <span title="Int(58)">MATCH</span>)
    <a href="#39694" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26531" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29546" title="=&gt; Scanners.this.global.Name">NEWkw</a>, <span title="Int(25)">NEW</span>)
    <a href="#39694" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26531" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29548" title="=&gt; Scanners.this.global.Name">NULLkw</a>, <span title="Int(24)">NULL</span>)
    <a href="#39694" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26531" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29550" title="=&gt; Scanners.this.global.Name">OBJECTkw</a>, <span title="Int(44)">OBJECT</span>)
    <a href="#39694" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26531" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29556" title="=&gt; Scanners.this.global.Name">OVERRIDEkw</a>, <span title="Int(36)">OVERRIDE</span>)
    <a href="#39694" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26531" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29558" title="=&gt; Scanners.this.global.Name">PACKAGEkw</a>, <span title="Int(47)">PACKAGE</span>)
    <a href="#39694" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26531" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29560" title="=&gt; Scanners.this.global.Name">PRIVATEkw</a>, <span title="Int(34)">PRIVATE</span>)
    <a href="#39694" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26531" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29562" title="=&gt; Scanners.this.global.Name">PROTECTEDkw</a>, <span title="Int(35)">PROTECTED</span>)
    <a href="#39694" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26531" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29564" title="=&gt; Scanners.this.global.Name">RETURNkw</a>, <span title="Int(57)">RETURN</span>)
    <a href="#39694" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26531" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29568" title="=&gt; Scanners.this.global.Name">SEALEDkw</a>, <span title="Int(51)">SEALED</span>)
    <a href="#39694" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26531" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29570" title="=&gt; Scanners.this.global.Name">SUPERkw</a>, <span title="Int(27)">SUPER</span>)
    <a href="#39694" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26531" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29572" title="=&gt; Scanners.this.global.Name">THISkw</a>, <span title="Int(23)">THIS</span>)
    <a href="#39694" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26531" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29574" title="=&gt; Scanners.this.global.Name">THROWkw</a>, <span title="Int(52)">THROW</span>)
    <a href="#39694" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26531" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29576" title="=&gt; Scanners.this.global.Name">TRAITkw</a>, <span title="Int(50)">TRAIT</span>)
    <a href="#39694" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26531" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29578" title="=&gt; Scanners.this.global.Name">TRUEkw</a>, <span title="Int(42)">TRUE</span>)
    <a href="#39694" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26531" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29580" title="=&gt; Scanners.this.global.Name">TRYkw</a>, <span title="Int(53)">TRY</span>)
    <a href="#39694" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26531" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29582" title="=&gt; Scanners.this.global.Name">TYPEkw</a>, <span title="Int(40)">TYPE</span>)
    <a href="#39694" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26531" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29584" title="=&gt; Scanners.this.global.Name">VALkw</a>, <span title="Int(31)">VAL</span>)
    <a href="#39694" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26531" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29586" title="=&gt; Scanners.this.global.Name">VARkw</a>, <span title="Int(38)">VAR</span>)
    <a href="#39694" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26531" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29590" title="=&gt; Scanners.this.global.Name">WHILEkw</a>, <span title="Int(56)">WHILE</span>)
    <a href="#39694" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26531" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29588" title="=&gt; Scanners.this.global.Name">WITHkw</a>, <span title="Int(26)">WITH</span>)
    <a href="#39694" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26531" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29592" title="=&gt; Scanners.this.global.Name">YIELDkw</a>, <span title="Int(48)">YIELD</span>)
    <a href="#39694" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26531" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29594" title="=&gt; Scanners.this.global.Name">DOTkw</a>, <span title="Int(72)">DOT</span>)
    <a href="#39694" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26531" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29596" title="=&gt; Scanners.this.global.Name">USCOREkw</a>, <span title="Int(73)">USCORE</span>)
    <a href="#39694" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26531" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29598" title="=&gt; Scanners.this.global.Name">COLONkw</a>, <span title="Int(74)">COLON</span>)
    <a href="#39694" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26531" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29600" title="=&gt; Scanners.this.global.Name">EQUALSkw</a>, <span title="Int(75)">EQUALS</span>)
    <a href="#39694" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26531" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29602" title="=&gt; Scanners.this.global.Name">ARROWkw</a>, <span title="Int(77)">ARROW</span>)
    <a href="#39694" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26531" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29604" title="=&gt; Scanners.this.global.Name">LARROWkw</a>, <span title="Int(76)">LARROW</span>)
    <a href="#39694" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26531" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29606" title="=&gt; Scanners.this.global.Name">SUBTYPEkw</a>, <span title="Int(80)">SUBTYPE</span>)
    <a href="#39694" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26531" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29608" title="=&gt; Scanners.this.global.Name">VIEWBOUNDkw</a>, <span title="Int(84)">VIEWBOUND</span>)
    <a href="#39694" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26531" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29610" title="=&gt; Scanners.this.global.Name">SUPERTYPEkw</a>, <span title="Int(81)">SUPERTYPE</span>)
    <a href="#39694" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26531" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29612" title="=&gt; Scanners.this.global.Name">HASHkw</a>, <span title="Int(82)">HASH</span>)
    <a href="#39694" title="(n: Scanners.this.global.Name,tokenId: Int)Unit">enterKeyword</a>(<a href="../../symtab/StdNames.scala.html#26531" title="object Scanners.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29614" title="=&gt; Scanners.this.global.Name">ATkw</a>, <span title="Int(83)">AT</span>)
  }

  { // initialization
    <a href="#39695" title="()Unit">enterKeywords</a>()
    // Build keyword array
    <a href="#39683" title="(x$1: Array[Byte])Unit">keyCode</a> = <a title="object Array" id="888">Array</a>.<a title="(n: Int)(elem: =&gt; Byte)(implicit evidence$9: scala.reflect.ClassManifest[Byte])Array[Byte]" id="24660">fill</a>(<a href="#39686" title="(x$1: Int)Int">maxKey</a> + <span title="Int(1)" class="int">1</span>)<a title="=&gt; &lt;refinement&gt; extends java.lang.Object with scala.reflect.Manifest[Byte]" id="27603">(</a><span title="Byte(10)">IDENTIFIER</span>)
    <span class="keyword">for</span> (<a title="Int" id="526492">j</a> &lt;- <a title="(end: Int)Range" id="8089" class="int">0</a> <a title="(f: (Int) =&gt; Unit)Unit" id="56859">until</a> <a href="#39692" title="=&gt; Int">tokenCount</a> <span class="keyword">if</span> <a href="#39689" title="(i: Int)Scanners.this.global.Name">keyName</a><span title="(x$1: AnyRef)Boolean">(</span><a href="#526492" title="Int">j</a>) ne <span title="Null(null)" class="keyword">null</span>)
      <a href="#39683" title="(i: Int,x: Byte)Unit">keyCode</a>(<a href="#39689" title="(i: Int)Scanners.this.global.Name">keyName</a>(<a href="#526492" title="Int">j</a>).<a href="../../symtab/Names.scala.html#28193" title="=&gt; Int">start</a>) = <a href="#526492" title="Int">j</a>.<a title="=&gt; Byte" id="2844">toByte</a>
  }

  /** Convert name to token */
  <span class="keyword">def</span> <a title="(name: Scanners.this.global.Name)Int" id="39696">name2token</a>(<a title="Scanners.this.global.Name" id="523528">name</a>: <a href="../../symtab/Names.scala.html#26055" title="Scanners.this.global.Name">Name</a>): <span title="Int">Int</span> =
    <span title="Int" class="keyword">if</span> (<a href="#523528" title="Scanners.this.global.Name">name</a>.<a href="../../symtab/Names.scala.html#28193" title="(x$1: Int)Boolean">start</a> &lt;= <a href="#39686" title="=&gt; Int">maxKey</a>) <a href="#39683" title="(i: Int)Byte">keyCode</a><a title="implicit scala.Predef.byte2int : (x: Byte)Int" id="8113">(</a><a href="#523528" title="Scanners.this.global.Name">name</a>.<a href="../../symtab/Names.scala.html#28193" title="=&gt; Int">start</a>) <span class="keyword">else</span> <span title="Int(10)">IDENTIFIER</span>

// Token representation ----------------------------------------------------

  /** Returns the string representation of given token. */
  <span class="keyword">def</span> <a title="(token: Int)String" id="39697">token2string</a>(<a title="Int" id="525841">token</a>: <span title="Int">Int</span>): <span title="String">String</span> = (<a href="#525841" title="Int">token</a>: @<span title="Int @scala.annotation.switch">switch</span>) <span title="String" class="keyword">match</span> {
    <span title="java.lang.String(&quot;identifier&quot;)" class="keyword">case</span> <span title="Int(10)">IDENTIFIER</span> | <span title="Int(11)">BACKQUOTED_IDENT</span> =&gt; <span title="java.lang.String(&quot;identifier&quot;)" class="string">&quot;identifier&quot;</span>
    <span title="java.lang.String(&quot;character literal&quot;)" class="keyword">case</span> <span title="Int(1)">CHARLIT</span> =&gt; <span title="java.lang.String(&quot;character literal&quot;)" class="string">&quot;character literal&quot;</span>
    <span title="java.lang.String(&quot;integer literal&quot;)" class="keyword">case</span> <span title="Int(2)">INTLIT</span> =&gt; <span title="java.lang.String(&quot;integer literal&quot;)" class="string">&quot;integer literal&quot;</span>
    <span title="java.lang.String(&quot;long literal&quot;)" class="keyword">case</span> <span title="Int(3)">LONGLIT</span> =&gt; <span title="java.lang.String(&quot;long literal&quot;)" class="string">&quot;long literal&quot;</span>
    <span title="java.lang.String(&quot;float literal&quot;)" class="keyword">case</span> <span title="Int(4)">FLOATLIT</span> =&gt; <span title="java.lang.String(&quot;float literal&quot;)" class="string">&quot;float literal&quot;</span>
    <span title="java.lang.String(&quot;double literal&quot;)" class="keyword">case</span> <span title="Int(5)">DOUBLELIT</span> =&gt; <span title="java.lang.String(&quot;double literal&quot;)" class="string">&quot;double literal&quot;</span>
    <span title="java.lang.String(&quot;string literal&quot;)" class="keyword">case</span> <span title="Int(6)">STRINGLIT</span> =&gt; <span title="java.lang.String(&quot;string literal&quot;)" class="string">&quot;string literal&quot;</span>
    <span title="java.lang.String(&quot;symbol literal&quot;)" class="keyword">case</span> <span title="Int(7)">SYMBOLLIT</span> =&gt; <span title="java.lang.String(&quot;symbol literal&quot;)" class="string">&quot;symbol literal&quot;</span>
    <span title="java.lang.String(&quot;'('&quot;)" class="keyword">case</span> <span title="Int(90)">LPAREN</span> =&gt; <span title="java.lang.String(&quot;'('&quot;)" class="string">&quot;'('&quot;</span>
    <span title="java.lang.String(&quot;')'&quot;)" class="keyword">case</span> <span title="Int(91)">RPAREN</span> =&gt; <span title="java.lang.String(&quot;')'&quot;)" class="string">&quot;')'&quot;</span>
    <span title="java.lang.String(&quot;'{'&quot;)" class="keyword">case</span> <span title="Int(94)">LBRACE</span> =&gt; <span title="java.lang.String(&quot;'{'&quot;)" class="string">&quot;'{'&quot;</span>
    <span title="java.lang.String(&quot;'}'&quot;)" class="keyword">case</span> <span title="Int(95)">RBRACE</span> =&gt; <span title="java.lang.String(&quot;'}'&quot;)" class="string">&quot;'}'&quot;</span>
    <span title="java.lang.String(&quot;'['&quot;)" class="keyword">case</span> <span title="Int(92)">LBRACKET</span> =&gt; <span title="java.lang.String(&quot;'['&quot;)" class="string">&quot;'['&quot;</span>
    <span title="java.lang.String(&quot;']'&quot;)" class="keyword">case</span> <span title="Int(93)">RBRACKET</span> =&gt; <span title="java.lang.String(&quot;']'&quot;)" class="string">&quot;']'&quot;</span>
    <span title="java.lang.String(&quot;eof&quot;)" class="keyword">case</span> <span title="Int(0)">EOF</span> =&gt; <span title="java.lang.String(&quot;eof&quot;)" class="string">&quot;eof&quot;</span>
    <span title="java.lang.String(&quot;something&quot;)" class="keyword">case</span> <span title="Int(-1)">ERROR</span> =&gt; <span title="java.lang.String(&quot;something&quot;)" class="string">&quot;something&quot;</span>
    <span title="java.lang.String(&quot;';'&quot;)" class="keyword">case</span> <span title="Int(71)">SEMI</span> =&gt; <span title="java.lang.String(&quot;';'&quot;)" class="string">&quot;';'&quot;</span>
    <span title="java.lang.String(&quot;';'&quot;)" class="keyword">case</span> <span title="Int(78)">NEWLINE</span> =&gt; <span title="java.lang.String(&quot;';'&quot;)" class="string">&quot;';'&quot;</span>
    <span title="java.lang.String(&quot;';'&quot;)" class="keyword">case</span> <span title="Int(79)">NEWLINES</span> =&gt; <span title="java.lang.String(&quot;';'&quot;)" class="string">&quot;';'&quot;</span>
    <span title="java.lang.String(&quot;','&quot;)" class="keyword">case</span> <span title="Int(70)">COMMA</span> =&gt; <span title="java.lang.String(&quot;','&quot;)" class="string">&quot;','&quot;</span>
    <span title="java.lang.String(&quot;case class&quot;)" class="keyword">case</span> <span title="Int(29)">CASECLASS</span> =&gt; <span title="java.lang.String(&quot;case class&quot;)" class="string">&quot;case class&quot;</span>
    <span title="java.lang.String(&quot;case object&quot;)" class="keyword">case</span> <span title="Int(30)">CASEOBJECT</span> =&gt; <span title="java.lang.String(&quot;case object&quot;)" class="string">&quot;case object&quot;</span>
    <span title="java.lang.String(&quot;$XMLSTART$&lt;&quot;)" class="keyword">case</span> <span title="Int(96)">XMLSTART</span> =&gt; <span title="java.lang.String(&quot;$XMLSTART$&lt;&quot;)" class="string">&quot;$XMLSTART$&lt;&quot;</span>
    <span title="String" class="keyword">case</span> _ =&gt;
      <span title="String" class="keyword">if</span> (<a href="#525841" title="(x$1: Int)Boolean">token</a> &lt;= <a href="#39686" title="=&gt; Int">maxKey</a>) <span title="(x$1: Any)java.lang.String" class="string">&quot;'&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#39689" title="(i: Int)Scanners.this.global.Name">keyName</a>(<a href="#525841" title="Int">token</a>) + <span title="java.lang.String(&quot;'&quot;)" class="string">&quot;'&quot;</span>
      <span class="keyword">else</span> <span title="(x$1: Any)java.lang.String" class="string">&quot;'&lt;&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#525841" title="Int">token</a> + <span title="java.lang.String(&quot;&gt;'&quot;)" class="string">&quot;&gt;'&quot;</span>
  }

  /** A scanner over a given compilation unit
   */
  <span class="keyword">class</span> <a title="class UnitScanner extends Scanners.this.Scanner with ScalaObject" id="39698">UnitScanner</a><span title="ScalaObject">(</span><a title="Scanners.this.global.CompilationUnit" id="526638">unit</a>: <a href="../../CompilationUnits.scala.html#39196" title="Scanners.this.global.CompilationUnit">CompilationUnit</a>, <a title="List[scala.tools.nsc.ast.parser.BracePatch]" id="526639">patches</a>: <span title="List[scala.tools.nsc.ast.parser.BracePatch]">List</span>[BracePatch]) <span class="keyword">extends</span> <a href="#39677" title="Scanners.this.Scanner">Scanner</a> {
    <span class="keyword">def</span> <a title="(unit: Scanners.this.global.CompilationUnit)Scanners.this.UnitScanner" id="526572" class="keyword">this</a>(<a title="Scanners.this.global.CompilationUnit" id="526644">unit</a>: <a href="../../CompilationUnits.scala.html#39196" title="Scanners.this.global.CompilationUnit">CompilationUnit</a>) = <a href="#39698" title="UnitScanner.this.type" class="keyword">this</a>(<a href="#526644" title="Scanners.this.global.CompilationUnit">unit</a>, List<span title="object Nil">(</span>))
    <span class="keyword">val</span> <a title="Array[Char]" id="526573">buf</a> = <a href="#526638" title="Scanners.this.global.CompilationUnit">unit</a>.<a href="../../CompilationUnits.scala.html#45431" title="=&gt; scala.tools.nsc.util.SourceFile">source</a>.<a title="[T0]T0" id="3623">asInstanceOf</a><span title="scala.tools.nsc.util.BatchSourceFile">[</span><a href="../../util/SourceFile.scala.html#14659" title="scala.tools.nsc.util.BatchSourceFile">BatchSourceFile</a>].<a href="../../util/SourceFile.scala.html#121002" title="=&gt; Array[Char]">content</a>
    <span class="keyword">val</span> <a title="Boolean" id="526575">decodeUnit</a> = <span title="=&gt; Boolean">!</span><a href="../../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37096" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">nouescape</a>.<a href="../../Settings.scala.html#37759" title="=&gt; Boolean">value</a>

    <span class="keyword">def</span> <a title="(off: Scanners.this.Offset,msg: String)Unit" id="526577">warning</a>(<a title="Scanners.this.Offset" id="526669">off</a>: <span title="Scanners.this.Offset">Offset</span>, <a title="String" id="526670">msg</a>: <span title="String">String</span>) = <a href="#526638" title="Scanners.this.global.CompilationUnit">unit</a>.<a href="../../CompilationUnits.scala.html#45456" title="(pos: scala.tools.nsc.util.Position,msg: String)Unit">warning</a>(<a href="#526638" title="Scanners.this.global.CompilationUnit">unit</a>.<a href="../../CompilationUnits.scala.html#45451" title="(pos: Int)scala.tools.nsc.util.Position">position</a>(<a href="#526669" title="Scanners.this.Offset">off</a>), <a href="#526670" title="String">msg</a>)
    <span class="keyword">def</span> <a title="(off: Scanners.this.Offset,msg: String)Unit" id="526578">error</a>  (<a title="Scanners.this.Offset" id="526677">off</a>: <span title="Scanners.this.Offset">Offset</span>, <a title="String" id="526678">msg</a>: <span title="String">String</span>) = <a href="#526638" title="Scanners.this.global.CompilationUnit">unit</a>.<a href="../../CompilationUnits.scala.html#45455" title="(pos: scala.tools.nsc.util.Position,msg: String)Unit">error</a>(<a href="#526638" title="Scanners.this.global.CompilationUnit">unit</a>.<a href="../../CompilationUnits.scala.html#45451" title="(pos: Int)scala.tools.nsc.util.Position">position</a>(<a href="#526677" title="Scanners.this.Offset">off</a>), <a href="#526678" title="String">msg</a>)
    <span class="keyword">def</span> <a title="(off: Scanners.this.Offset,msg: String)Unit" id="526579">incompleteInputError</a>(<a title="Scanners.this.Offset" id="526685">off</a>: <span title="Scanners.this.Offset">Offset</span>, <a title="String" id="526686">msg</a>: <span title="String">String</span>) = <a href="#526638" title="Scanners.this.global.CompilationUnit">unit</a>.<a href="../../CompilationUnits.scala.html#45459" title="(pos: scala.tools.nsc.util.Position,msg: String)Unit">incompleteInputError</a>(<a href="#526638" title="Scanners.this.global.CompilationUnit">unit</a>.<a href="../../CompilationUnits.scala.html#45451" title="(pos: Int)scala.tools.nsc.util.Position">position</a>(<a href="#526685" title="Scanners.this.Offset">off</a>), <a href="#526686" title="String">msg</a>)
    <span class="keyword">def</span> <a title="(off: Scanners.this.Offset,msg: String)Unit" id="526580">deprecationWarning</a>(<a title="Scanners.this.Offset" id="526695">off</a>: <span title="Scanners.this.Offset">Offset</span>, <a title="String" id="526696">msg</a>: <span title="String">String</span>) = <a href="#526638" title="Scanners.this.global.CompilationUnit">unit</a>.<a href="../../CompilationUnits.scala.html#45457" title="(pos: scala.tools.nsc.util.Position,msg: String)Unit">deprecationWarning</a>(<a href="#526638" title="Scanners.this.global.CompilationUnit">unit</a>.<a href="../../CompilationUnits.scala.html#45451" title="(pos: Int)scala.tools.nsc.util.Position">position</a>(<a href="#526695" title="Scanners.this.Offset">off</a>), <a href="#526696" title="String">msg</a>)

    <span class="keyword">private</span> <span class="keyword">var</span> <a title="List[scala.tools.nsc.ast.parser.BracePatch]" id="526582">bracePatches</a>: <span title="List[scala.tools.nsc.ast.parser.BracePatch]">List</span>[BracePatch] = <a href="#526639" title="List[scala.tools.nsc.ast.parser.BracePatch]">patches</a>

    <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Scanners.this.ParensAnalyzer" id="526585">parensAnalyzer</a> = <span title="Scanners.this.ParensAnalyzer" class="keyword">new</span> <a href="#39699" title="Scanners.this.ParensAnalyzer">ParensAnalyzer</a>(<a href="#526638" title="Scanners.this.global.CompilationUnit">unit</a>, List<span title="object Nil">(</span>))

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(token: Int)Int" id="526586">parenBalance</a>(<a title="Int" id="526703">token</a>: <span title="Int">Int</span>) = <a href="#526584" title="=&gt; Scanners.this.ParensAnalyzer">parensAnalyzer</a>.<a href="#526606" title="(key: Int)Int">balance</a>(<a href="#526703" title="Int">token</a>)

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="()List[scala.tools.nsc.ast.parser.BracePatch]" id="526587">healBraces</a>(): <span title="List[scala.tools.nsc.ast.parser.BracePatch]">List</span>[BracePatch] = {
      <span class="keyword">var</span> <a title="List[scala.tools.nsc.ast.parser.BracePatch]" id="526794">patches</a>: <span title="List[scala.tools.nsc.ast.parser.BracePatch]">List</span>[BracePatch] = List<span title="object Nil">(</span>)
      <span title="Unit" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="#526584" title="=&gt; Scanners.this.ParensAnalyzer">parensAnalyzer</a>.<a href="#526613" title="=&gt; Boolean">tabSeen</a>) {
        <span class="keyword">var</span> <a title="Int" id="526804">bal</a> = <a href="#526584" title="=&gt; Scanners.this.ParensAnalyzer">parensAnalyzer</a>.<a href="#526606" title="(key: Int)Int">balance</a>(<span title="Int(95)">RBRACE</span>)
        <span title="Unit" class="keyword">while</span> (<a href="#526804" title="(x$1: Int)Boolean">bal</a> &lt; <span title="Int(0)" class="int">0</span>) <a href="#526805" title="()Unit">{</a>
          <a href="#526794" title="List[scala.tools.nsc.ast.parser.BracePatch]">patches</a> = <span title="Scanners.this.ParensAnalyzer" class="keyword">new</span> <a href="#39699" title="Scanners.this.ParensAnalyzer">ParensAnalyzer</a>(<a href="#526638" title="Scanners.this.global.CompilationUnit">unit</a>, <a href="#526794" title="List[scala.tools.nsc.ast.parser.BracePatch]">patches</a>).<a href="#526620" title="()List[scala.tools.nsc.ast.parser.BracePatch]">insertRBrace</a>()
          <a href="#526804" title="Int">bal</a> += <span title="Int(1)" class="int">1</span>
        }
        <span title="Unit" class="keyword">while</span> (<a href="#526804" title="(x$1: Int)Boolean">bal</a> &gt; <span title="Int(0)" class="int">0</span>) <a href="#526868" title="()Unit">{</a>
          <a href="#526794" title="List[scala.tools.nsc.ast.parser.BracePatch]">patches</a> = <span title="Scanners.this.ParensAnalyzer" class="keyword">new</span> <a href="#39699" title="Scanners.this.ParensAnalyzer">ParensAnalyzer</a>(<a href="#526638" title="Scanners.this.global.CompilationUnit">unit</a>, <a href="#526794" title="List[scala.tools.nsc.ast.parser.BracePatch]">patches</a>).<a href="#526621" title="()List[scala.tools.nsc.ast.parser.BracePatch]">deleteRBrace</a>()
          <a href="#526804" title="Int">bal</a> -= <span title="Int(1)" class="int">1</span>
        }
      }
      <a href="#526794" title="List[scala.tools.nsc.ast.parser.BracePatch]">patches</a>
    }

    /** Insert or delete a brace, if a patch exists for this offset */
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Boolean" id="526588">applyBracePatch</a>(): <span title="Boolean">Boolean</span> = {
      <span title="Boolean" class="keyword">if</span> (<a href="#526582" title="=&gt; List[scala.tools.nsc.ast.parser.BracePatch]">bracePatches</a>.<span title="(x$1: Boolean)Boolean">isEmpty</span> || <a href="#526582" title="=&gt; List[scala.tools.nsc.ast.parser.BracePatch]">bracePatches</a>.<span title="=&gt; scala.tools.nsc.ast.parser.BracePatch">head</span>.<a href="BracePatch.scala.html#78267" title="(x$1: Int)Boolean">off</a> != <a href="#121763" title="=&gt; Scanners.this.Offset">offset</a>) <span title="Boolean(false)" class="keyword">false</span>
      <span class="keyword">else</span> {
        <span class="keyword">val</span> <a title="scala.tools.nsc.ast.parser.BracePatch" id="526924">patch</a> = <a href="#526582" title="=&gt; List[scala.tools.nsc.ast.parser.BracePatch]">bracePatches</a>.<span title="=&gt; scala.tools.nsc.ast.parser.BracePatch">head</span>
        <a href="#526582" title="(x$1: List[scala.tools.nsc.ast.parser.BracePatch])Unit">bracePatches</a> = <a href="#526582" title="=&gt; List[scala.tools.nsc.ast.parser.BracePatch]">bracePatches</a>.<span title="=&gt; List[scala.tools.nsc.ast.parser.BracePatch]">tail</span>
//        println(&quot;applying brace patch &quot;+offset)//DEBUG
        <span title="Boolean" class="keyword">if</span> (<a href="#526924" title="scala.tools.nsc.ast.parser.BracePatch">patch</a>.<a href="BracePatch.scala.html#78269" title="=&gt; Boolean">inserted</a>) {
          <a href="#121777" title="(td: Scanners.this.TokenData)Unit">next</a> copyFrom <a href="#39698" title="Scanners.this.UnitScanner" class="keyword">this</a>
          <a href="#526578" title="(off: Scanners.this.Offset,msg: String)Unit">error</a>(<a href="#121763" title="=&gt; Scanners.this.Offset">offset</a>, <span title="java.lang.String(&quot;Missing closing brace `}' assumed here&quot;)" class="string">&quot;Missing closing brace `}' assumed here&quot;</span>)
          <a href="#121760" title="(x$1: Int)Unit">token</a> = <span title="Int(95)">RBRACE</span>
          <span title="Boolean(true)" class="keyword">true</span>
        } <span class="keyword">else</span> {
          <a href="#526578" title="(off: Scanners.this.Offset,msg: String)Unit">error</a>(<a href="#121763" title="=&gt; Scanners.this.Offset">offset</a>, <span title="java.lang.String(&quot;Unmatched closing brace '}' ignored here&quot;)" class="string">&quot;Unmatched closing brace '}' ignored here&quot;</span>)
          <a href="#121731" title="()Unit">fetchToken</a>()
          <span title="Boolean(false)" class="keyword">false</span>
        }
      }
    }
  }

  <span class="keyword">class</span> <a title="class ParensAnalyzer extends Scanners.this.UnitScanner with ScalaObject" id="39699">ParensAnalyzer</a><span title="ScalaObject">(</span><a title="Scanners.this.global.CompilationUnit" id="526625">unit</a>: <a href="../../CompilationUnits.scala.html#39196" title="Scanners.this.global.CompilationUnit">CompilationUnit</a>, <a title="List[scala.tools.nsc.ast.parser.BracePatch]" id="526626">patches</a>: <span title="List[scala.tools.nsc.ast.parser.BracePatch]">List</span>[BracePatch]) <span class="keyword">extends</span> <a href="#39698" title="Scanners.this.UnitScanner">UnitScanner</a>(<a href="#526625" title="Scanners.this.global.CompilationUnit">unit</a>, <a href="#526626" title="List[scala.tools.nsc.ast.parser.BracePatch]">patches</a>) {
    <span class="keyword">var</span> <a title="scala.collection.mutable.Map[Int,Int]" id="526606">balance</a> = collection.mutable.<span title="(elems: (Int, Int)*)scala.collection.mutable.Map[Int,Int]">Map</span>(<span title="(y: Int)(Int, Int)">RPAREN</span> -&gt; <span title="Int(0)" class="int">0</span>, <span title="(y: Int)(Int, Int)">RBRACKET</span> -&gt; <span title="Int(0)" class="int">0</span>, <span title="(y: Int)(Int, Int)">RBRACE</span> -&gt; <span title="Int(0)" class="int">0</span>)

    <a href="#121757" title="()Unit">init</a>()
    
    /** The offset of the first token on this line, or next following line if blank
     */
    <span class="keyword">val</span> <a title="scala.collection.mutable.ArrayBuffer[Int]" id="526608">lineStart</a> = <a title="()scala.collection.mutable.ArrayBuffer[Int]" id="108542" class="keyword">new</a> <a title="scala.collection.mutable.ArrayBuffer[Int]" id="24996">ArrayBuffer</a>[Int]

    /** The list of matching top-level brace pairs (each of which may contain nested brace pairs).
     */
    <span class="keyword">val</span> <a title="List[scala.tools.nsc.ast.parser.BracePair]" id="526610">bracePairs</a>: <span title="List[scala.tools.nsc.ast.parser.BracePair]">List</span>[BracePair] = {

      <span class="keyword">var</span> <a title="Int" id="526963">lineCount</a> = <span title="Int(1)" class="int">1</span>
      <span class="keyword">var</span> <a title="Int" id="526964">lastOffset</a> = <span title="Int(0)" class="int">0</span>
      <span class="keyword">var</span> <a title="Int" id="526965">indent</a> = <span title="Int(0)" class="int">0</span>
      <span class="keyword">val</span> <a title="scala.collection.mutable.Map[Int,Int]" id="526966">oldBalance</a> = collection.mutable.<span title="[A, B](elems: (A, B)*)scala.collection.mutable.Map[A,B]">Map</span><span title="(elems: (Int, Int)*)scala.collection.mutable.Map[Int,Int]">[</span><span title="Int">Int</span>, <span title="Int">Int</span>]()
      <span class="keyword">def</span> <a title="()Unit" id="526967">markBalance</a>() = <span class="keyword">for</span> ((<a title="Int" id="527004">k</a>, <a title="Int" id="527005">v</a>) &lt;- <a href="#526606" title="(f: ((Int, Int)) =&gt; Unit)Unit" id="25253">balance</a>) <a href="#526966" title="(key: Int,value: Int)Unit">oldBalance</a>(<a href="#527004" title="Int">k</a>) = <a href="#527005" title="Int">v</a>
      <a href="#526967" title="()Unit">markBalance</a>()

      <span class="keyword">def</span> <a title="(bpbuf: scala.collection.mutable.ListBuffer[scala.tools.nsc.ast.parser.BracePair])(Int, Int)" id="526968">scan</a>(<a title="scala.collection.mutable.ListBuffer[scala.tools.nsc.ast.parser.BracePair]" id="527017">bpbuf</a>: <span title="scala.collection.mutable.ListBuffer[scala.tools.nsc.ast.parser.BracePair]">ListBuffer</span>[BracePair]): <span title="(Int, Int)">(</span>Int, Int) = {
        <span title="Unit" class="keyword">if</span> (<a href="#121760" title="(x$1: Int)Boolean">token</a> <span title="(x$1: Boolean)Boolean">!=</span> <span title="Int(78)">NEWLINE</span> &amp;&amp; <a href="#121760" title="(x$1: Int)Boolean">token</a> != <span title="Int(79)">NEWLINES</span>) {
          <span title="Unit" class="keyword">while</span> (<a href="#526964" title="(x$1: Int)Boolean">lastOffset</a> &lt; <a href="#121763" title="=&gt; Scanners.this.Offset">offset</a>) <a href="#527034" title="()Unit">{</a>
            <span title="Unit" class="keyword">if</span> (<a href="#526573" title="(i: Int)Char">buf</a><span title="(x$1: Char)Boolean">(</span><a href="#526964" title="Int">lastOffset</a>) == <span title="Char('\012')">LF</span>) <a href="#526963" title="Int">lineCount</a> += <span title="Int(1)" class="int">1</span>
            <a href="#526964" title="Int">lastOffset</a> += <span title="Int(1)" class="int">1</span>
          }
          <span title="Unit" class="keyword">while</span> (<a href="#526963" title="(x$1: Int)Boolean">lineCount</a> &gt; <a href="#526608" title="=&gt; scala.collection.mutable.ArrayBuffer[Int]">lineStart</a>.<span title="=&gt; Int">length</span>) <a href="#527127" title="()Unit">{</a>
            <a href="#526608" title="(elem: Int)ParensAnalyzer.this.lineStart.type" id="108546">lineStart</a> += <a href="#121763" title="=&gt; Scanners.this.Offset">offset</a>
            // reset indentation unless there are new opening brackets or
            // braces since last ident line and at the same time there
            // are no new braces.
            <span title="Unit" class="keyword">if</span> (<a href="#526606" title="(key: Int)Int">balance</a><span title="(x$1: Int)Boolean">(</span><span title="Int(91)">RPAREN</span>) <span title="(x$1: Boolean)Boolean">&gt;=</span> <a href="#526966" title="(key: Int)Int">oldBalance</a>(<span title="Int(91)">RPAREN</span>) <span title="(x$1: Boolean)Boolean">&amp;&amp;</span>
                <a href="#526606" title="(key: Int)Int">balance</a><span title="(x$1: Int)Boolean">(</span><span title="Int(93)">RBRACKET</span>) &gt;= <a href="#526966" title="(key: Int)Int">oldBalance</a>(<span title="Int(93)">RBRACKET</span>) ||
                <a href="#526606" title="(key: Int)Int">balance</a><span title="(x$1: Int)Boolean">(</span><span title="Int(95)">RBRACE</span>) != <a href="#526966" title="(key: Int)Int">oldBalance</a>(<span title="Int(95)">RBRACE</span>)) {
              <a href="#526965" title="Int">indent</a> = <a href="#526616" title="(offset: Int)Int">column</a>(<a href="#121763" title="=&gt; Scanners.this.Offset">offset</a>)
              <a href="#526967" title="()Unit">markBalance</a>()
            }
          }
        }

        <a href="#121760" title="=&gt; Int">token</a> <span title="(Int, Int)" class="keyword">match</span> {
          <span title="(Int, Int)" class="keyword">case</span> <span title="Int(90)">LPAREN</span> =&gt; 
            <a href="#526606" title="=&gt; scala.collection.mutable.Map[Int,Int]">balance</a><span title="(x$1: Int)Int">(</span><span title="Int(91)">RPAREN</span>) -= <span title="Int(1)" class="int">1</span>; <a href="#121728" title="()Unit">nextToken</a>(); <a href="#526968" title="(bpbuf: scala.collection.mutable.ListBuffer[scala.tools.nsc.ast.parser.BracePair])(Int, Int)">scan</a>(<a href="#527017" title="scala.collection.mutable.ListBuffer[scala.tools.nsc.ast.parser.BracePair]">bpbuf</a>) 
          <span title="(Int, Int)" class="keyword">case</span> <span title="Int(92)">LBRACKET</span> =&gt; 
            <a href="#526606" title="=&gt; scala.collection.mutable.Map[Int,Int]">balance</a><span title="(x$1: Int)Int">(</span><span title="Int(93)">RBRACKET</span>) -= <span title="Int(1)" class="int">1</span>; <a href="#121728" title="()Unit">nextToken</a>(); <a href="#526968" title="(bpbuf: scala.collection.mutable.ListBuffer[scala.tools.nsc.ast.parser.BracePair])(Int, Int)">scan</a>(<a href="#527017" title="scala.collection.mutable.ListBuffer[scala.tools.nsc.ast.parser.BracePair]">bpbuf</a>) 
          <span title="(Int, Int)" class="keyword">case</span> <span title="Int(91)">RPAREN</span> =&gt; 
            <a href="#526606" title="=&gt; scala.collection.mutable.Map[Int,Int]">balance</a><span title="(x$1: Int)Int">(</span><span title="Int(91)">RPAREN</span>) += <span title="Int(1)" class="int">1</span>; <a href="#121728" title="()Unit">nextToken</a>(); <a href="#526968" title="(bpbuf: scala.collection.mutable.ListBuffer[scala.tools.nsc.ast.parser.BracePair])(Int, Int)">scan</a>(<a href="#527017" title="scala.collection.mutable.ListBuffer[scala.tools.nsc.ast.parser.BracePair]">bpbuf</a>)
          <span title="(Int, Int)" class="keyword">case</span> <span title="Int(93)">RBRACKET</span> =&gt; 
            <a href="#526606" title="=&gt; scala.collection.mutable.Map[Int,Int]">balance</a><span title="(x$1: Int)Int">(</span><span title="Int(93)">RBRACKET</span>) += <span title="Int(1)" class="int">1</span>; <a href="#121728" title="()Unit">nextToken</a>(); <a href="#526968" title="(bpbuf: scala.collection.mutable.ListBuffer[scala.tools.nsc.ast.parser.BracePair])(Int, Int)">scan</a>(<a href="#527017" title="scala.collection.mutable.ListBuffer[scala.tools.nsc.ast.parser.BracePair]">bpbuf</a>)
          <span title="(Int, Int)" class="keyword">case</span> <span title="Int(94)">LBRACE</span> =&gt;  
            <a href="#526606" title="=&gt; scala.collection.mutable.Map[Int,Int]">balance</a><span title="(x$1: Int)Int">(</span><span title="Int(95)">RBRACE</span>) -= <span title="Int(1)" class="int">1</span>
            <span class="keyword">val</span> <a title="Int" id="527591">lc</a> = <a href="#526963" title="Int">lineCount</a>
            <span class="keyword">val</span> <a title="Scanners.this.Offset" id="527592">loff</a> = <a href="#121763" title="=&gt; Scanners.this.Offset">offset</a>
            <span class="keyword">val</span> <a title="Int" id="527593">lindent</a> = <a href="#526965" title="Int">indent</a>
            <span class="keyword">val</span> <a title="scala.collection.mutable.ListBuffer[scala.tools.nsc.ast.parser.BracePair]" id="527594">bpbuf1</a> = <span title="scala.collection.mutable.ListBuffer[scala.tools.nsc.ast.parser.BracePair]" class="keyword">new</span> <span title="scala.collection.mutable.ListBuffer[scala.tools.nsc.ast.parser.BracePair]">ListBuffer</span>[BracePair]
            <a href="#121728" title="()Unit">nextToken</a>()
            <span class="keyword">val</span> <a href="#527596" title="(Int, Int)">(</a><a href="#527595" title="Int" id="527596">roff</a>, <a href="#527595" title="Int" id="527597">rindent</a>) = <a href="#526968" title="(bpbuf: scala.collection.mutable.ListBuffer[scala.tools.nsc.ast.parser.BracePair])(Int, Int)">scan</a><span title="(Int, Int) @unchecked">(</span><a href="#527594" title="scala.collection.mutable.ListBuffer[scala.tools.nsc.ast.parser.BracePair]">bpbuf1</a>)
            <span title="Any" class="keyword">if</span> (<a href="#527591" title="(x$1: Int)Boolean">lc</a> != <a href="#526963" title="Int">lineCount</a>)
              <a href="#527017" title="(x: scala.tools.nsc.ast.parser.BracePair)bpbuf.type">bpbuf</a> += <a href="BracePair.scala.html#41422" title="(loff: Int,lindent: Int,roff: Int,rindent: Int,nested: List[scala.tools.nsc.ast.parser.BracePair])scala.tools.nsc.ast.parser.BracePair">BracePair</a>(<a href="#527592" title="Scanners.this.Offset">loff</a>, <a href="#527593" title="Int">lindent</a>, <a href="#527596" title="Int">roff</a>, <a href="#527597" title="Int">rindent</a>, <a href="#527594" title="scala.collection.mutable.ListBuffer[scala.tools.nsc.ast.parser.BracePair]">bpbuf1</a>.<span title="=&gt; List[scala.tools.nsc.ast.parser.BracePair]">toList</span>)
            <a href="#526968" title="(bpbuf: scala.collection.mutable.ListBuffer[scala.tools.nsc.ast.parser.BracePair])(Int, Int)">scan</a>(<a href="#527017" title="scala.collection.mutable.ListBuffer[scala.tools.nsc.ast.parser.BracePair]">bpbuf</a>)
          <span title="(Scanners.this.Offset, Int)" class="keyword">case</span> <span title="Int(95)">RBRACE</span> =&gt;
            <a href="#526606" title="=&gt; scala.collection.mutable.Map[Int,Int]">balance</a><span title="(x$1: Int)Int">(</span><span title="Int(95)">RBRACE</span>) += <span title="Int(1)" class="int">1</span>
            <span class="keyword">val</span> <a title="Scanners.this.Offset" id="527764">off</a> = <a href="#121763" title="=&gt; Scanners.this.Offset">offset</a>; <a href="#121728" title="()Unit">nextToken</a>(); <span title="(_1: Scanners.this.Offset,_2: Int)(Scanners.this.Offset, Int)">(</span><a href="#527764" title="Scanners.this.Offset">off</a>, <a href="#526965" title="Int">indent</a>)
          <span title="(Int, Int)" class="keyword">case</span> <span title="Int(0)">EOF</span> =&gt;
            <span title="(_1: Int,_2: Int)(Int, Int)">(</span><span title="Int(-1)">-</span><span class="int">1</span>, <span title="Int(-1)">-</span><span class="int">1</span>)
          <span title="(Int, Int)" class="keyword">case</span> _ =&gt;
            <a href="#121728" title="()Unit">nextToken</a>(); <a href="#526968" title="(bpbuf: scala.collection.mutable.ListBuffer[scala.tools.nsc.ast.parser.BracePair])(Int, Int)">scan</a>(<a href="#527017" title="scala.collection.mutable.ListBuffer[scala.tools.nsc.ast.parser.BracePair]">bpbuf</a>)
        }
      }

      <span class="keyword">val</span> <a title="scala.collection.mutable.ListBuffer[scala.tools.nsc.ast.parser.BracePair]" id="526969">bpbuf</a> = <span title="scala.collection.mutable.ListBuffer[scala.tools.nsc.ast.parser.BracePair]" class="keyword">new</span> <span title="scala.collection.mutable.ListBuffer[scala.tools.nsc.ast.parser.BracePair]">ListBuffer</span>[BracePair]
      <span title="Unit" class="keyword">while</span> (<a href="#121760" title="(x$1: Int)Boolean">token</a> != <span title="Int(0)">EOF</span>) <a href="#526971" title="()Unit">{</a>
        <span class="keyword">val</span> <a href="#527872" title="(Int, Int)">(</a><a href="#527871" title="Int" id="527872">roff</a>, <a href="#527871" title="Int" id="527873">rindent</a>) = <a href="#526968" title="(bpbuf: scala.collection.mutable.ListBuffer[scala.tools.nsc.ast.parser.BracePair])(Int, Int)">scan</a><span title="(Int, Int) @unchecked">(</span><a href="#526969" title="scala.collection.mutable.ListBuffer[scala.tools.nsc.ast.parser.BracePair]">bpbuf</a>)
        <span title="Any" class="keyword">if</span> (<a href="#527872" title="(x$1: Int)Boolean">roff</a> != <span title="Int(-1)">-</span><span class="int">1</span>) {
          <span class="keyword">val</span> <a title="scala.tools.nsc.ast.parser.BracePair" id="527898">current</a> = <a href="BracePair.scala.html#41422" title="(loff: Int,lindent: Int,roff: Int,rindent: Int,nested: List[scala.tools.nsc.ast.parser.BracePair])scala.tools.nsc.ast.parser.BracePair">BracePair</a>(<span title="Int(-1)">-</span><span class="int">1</span>, <span title="Int(-1)">-</span><span class="int">1</span>, <a href="#527872" title="Int">roff</a>, <a href="#527873" title="Int">rindent</a>, <a href="#526969" title="scala.collection.mutable.ListBuffer[scala.tools.nsc.ast.parser.BracePair]">bpbuf</a>.<span title="=&gt; List[scala.tools.nsc.ast.parser.BracePair]">toList</span>)
          <a href="#526969" title="scala.collection.mutable.ListBuffer[scala.tools.nsc.ast.parser.BracePair]">bpbuf</a>.<a title="()Unit" id="61582">clear</a>()
          <a href="#526969" title="(x: scala.tools.nsc.ast.parser.BracePair)bpbuf.type">bpbuf</a> += <a href="#527898" title="scala.tools.nsc.ast.parser.BracePair">current</a>
        }
      }

      <span class="keyword">def</span> <a title="(bp: scala.tools.nsc.ast.parser.BracePair,indent: Int)Unit" id="526970">printBP</a>(<a title="scala.tools.nsc.ast.parser.BracePair" id="527962">bp</a>: <a href="BracePair.scala.html#12509" title="scala.tools.nsc.ast.parser.BracePair">BracePair</a>, <a title="Int" id="527963">indent</a>: <span title="Int">Int</span>) {
        <a title="(x: Any)Unit" id="8057">println</a>(<a title="(n: Int)String" id="8101" class="string">&quot; &quot;</a><span title="(x$1: Any)java.lang.String">*</span><a href="#527963" title="Int">indent</a><span title="(x$1: Any)java.lang.String">+</span><a href="#526615" title="(offset: Int)Int">line</a>(<a href="#527962" title="scala.tools.nsc.ast.parser.BracePair">bp</a>.<a href="BracePair.scala.html#41358" title="=&gt; Int">loff</a>)<span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot;:&quot;)" class="string">&quot;:&quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#527962" title="scala.tools.nsc.ast.parser.BracePair">bp</a>.<a href="BracePair.scala.html#41360" title="=&gt; Int">lindent</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot; to &quot;)" class="string">&quot; to &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#526615" title="(offset: Int)Int">line</a>(<a href="#527962" title="scala.tools.nsc.ast.parser.BracePair">bp</a>.<a href="BracePair.scala.html#41362" title="=&gt; Int">roff</a>)<span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot;:&quot;)" class="string">&quot;:&quot;</span>+<a href="#527962" title="scala.tools.nsc.ast.parser.BracePair">bp</a>.<a href="BracePair.scala.html#41364" title="=&gt; Int">rindent</a>)
        <span title="Unit" class="keyword">if</span> (<a href="#527962" title="scala.tools.nsc.ast.parser.BracePair">bp</a>.<a href="BracePair.scala.html#41366" title="=&gt; List[scala.tools.nsc.ast.parser.BracePair]">nested</a>.<a title="=&gt; Boolean" id="25218">nonEmpty</a>) 
          <span class="keyword">for</span> (<a title="scala.tools.nsc.ast.parser.BracePair" id="528019">bp1</a> &lt;- <a href="#527962" title="scala.tools.nsc.ast.parser.BracePair">bp</a>.<a href="BracePair.scala.html#41366" title="(f: (scala.tools.nsc.ast.parser.BracePair) =&gt; Unit)Unit" id="28932">nested</a>) {
            <a href="#526970" title="(bp: scala.tools.nsc.ast.parser.BracePair,indent: Int)Unit">printBP</a>(<a href="#528019" title="scala.tools.nsc.ast.parser.BracePair">bp1</a>, <a href="#527963" title="(x$1: Int)Int">indent</a> + <span title="Int(2)" class="int">2</span>)
          }
      }
//      println(&quot;lineStart = &quot;+lineStart)//DEBUG
//      println(&quot;bracepairs = &quot;)
//      for (bp &lt;- bpbuf.toList) printBP(bp, 0)
      <a href="#526969" title="scala.collection.mutable.ListBuffer[scala.tools.nsc.ast.parser.BracePair]">bpbuf</a>.<span title="=&gt; List[scala.tools.nsc.ast.parser.BracePair]">toList</span>
    }

    <span class="keyword">var</span> <a title="Boolean" id="526613">tabSeen</a> = <span title="Boolean(false)" class="keyword">false</span>

    <span class="keyword">def</span> <a title="(offset: Int)Int" id="526615">line</a>(<a title="Int" id="527981">offset</a>: <span title="Int">Int</span>): <span title="Int">Int</span> = {
      <span class="keyword">def</span> <a title="(lo: Int,hi: Int)Int" id="528047">findLine</a>(<a title="Int" id="528048">lo</a>: <span title="Int">Int</span>, <a title="Int" id="528049">hi</a>: <span title="Int">Int</span>): <span title="Int">Int</span> = {
        <span class="keyword">val</span> <a title="Int" id="528050">mid</a> = <span title="(x$1: Int)Int">(</span><a href="#528048" title="(x$1: Int)Int">lo</a> + <a href="#528049" title="Int">hi</a>) / <span title="Int(2)" class="int">2</span>
        <span title="Int" class="keyword">if</span> (<a href="#527981" title="(x$1: Int)Boolean">offset</a> &lt; <a href="#526608" title="(idx: Int)Int">lineStart</a>(<a href="#528050" title="Int">mid</a>)) <a href="#528047" title="(lo: Int,hi: Int)Int">findLine</a>(<a href="#528048" title="Int">lo</a>, <a href="#528050" title="(x$1: Int)Int">mid</a> - <span title="Int(1)" class="int">1</span>)
        <span class="keyword">else</span> <span title="Int" class="keyword">if</span> (<a href="#528050" title="(x$1: Int)Int">mid</a> <span title="(x$1: Int)Boolean">+</span> <span title="Int(1)" class="int">1</span> <span title="(x$1: Boolean)Boolean">&lt;</span> <a href="#526608" title="=&gt; scala.collection.mutable.ArrayBuffer[Int]">lineStart</a>.<span title="=&gt; Int">length</span> &amp;&amp; <a href="#527981" title="(x$1: Int)Boolean">offset</a> &gt;= <a href="#526608" title="(idx: Int)Int">lineStart</a>(<a href="#528050" title="(x$1: Int)Int">mid</a> + <span title="Int(1)" class="int">1</span>)) <a href="#528047" title="(lo: Int,hi: Int)Int">findLine</a>(<a href="#528050" title="(x$1: Int)Int">mid</a> + <span title="Int(1)" class="int">1</span>, <a href="#528049" title="Int">hi</a>)
        <span class="keyword">else</span> <a href="#528050" title="Int">mid</a>
      }
      <span title="Int" class="keyword">if</span> (<a href="#527981" title="(x$1: Int)Boolean">offset</a> &lt;= <span title="Int(0)" class="int">0</span>) <span title="Int(0)" class="int">0</span>
      <span class="keyword">else</span> <a href="#528047" title="(lo: Int,hi: Int)Int">findLine</a>(<span title="Int(0)" class="int">0</span>, <a href="#526608" title="=&gt; scala.collection.mutable.ArrayBuffer[Int]">lineStart</a>.<span title="(x$1: Int)Int">length</span> - <span title="Int(1)" class="int">1</span>)
    }

    <span class="keyword">def</span> <a title="(offset: Int)Int" id="526616">column</a>(<a title="Int" id="527275">offset</a>: <span title="Int">Int</span>): <span title="Int">Int</span> = {
      <span class="keyword">var</span> <a title="Int" id="528199">col</a> = <span title="Int(0)" class="int">0</span>
      <span class="keyword">var</span> <a title="Int" id="528200">i</a> = <a href="#527275" title="(x$1: Int)Int">offset</a> - <span title="Int(1)" class="int">1</span>
      <span title="Unit" class="keyword">while</span> (<a href="#528200" title="(x$1: Int)Boolean">i</a> <span title="(x$1: Boolean)Boolean">&gt;=</span> <span title="Int(0)" class="int">0</span> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> <a href="#526573" title="(i: Int)Char">buf</a><span title="(x$1: Char)Boolean">(</span><a href="#528200" title="Int">i</a>) != <span title="Char('\015')">CR</span> &amp;&amp; <a href="#526573" title="(i: Int)Char">buf</a><span title="(x$1: Char)Boolean">(</span><a href="#528200" title="Int">i</a>) != <span title="Char('\012')">LF</span>) <a href="#528201" title="()Unit">{</a>
        <span title="Unit" class="keyword">if</span> (<a href="#526573" title="(i: Int)Char">buf</a><span title="(x$1: Char)Boolean">(</span><a href="#528200" title="Int">i</a>) == <span title="Char('\011')" class="char">'\t'</span>) <a href="#526613" title="(x$1: Boolean)Unit">tabSeen</a> = <span title="Boolean(true)" class="keyword">true</span>
        <a href="#528199" title="Int">col</a> += <span title="Int(1)" class="int">1</span>
        <a href="#528200" title="Int">i</a> -= <span title="Int(1)" class="int">1</span>
      }
      <a href="#528199" title="Int">col</a>
    }

    <span class="keyword">def</span> <a title="(patches: List[scala.tools.nsc.ast.parser.BracePatch],patch: scala.tools.nsc.ast.parser.BracePatch)List[scala.tools.nsc.ast.parser.BracePatch]" id="526617">insertPatch</a>(<a title="List[scala.tools.nsc.ast.parser.BracePatch]" id="528334">patches</a>: <span title="List[scala.tools.nsc.ast.parser.BracePatch]">List</span>[BracePatch], <a title="scala.tools.nsc.ast.parser.BracePatch" id="528335">patch</a>: <a href="BracePatch.scala.html#12278" title="scala.tools.nsc.ast.parser.BracePatch">BracePatch</a>): <span title="List[scala.tools.nsc.ast.parser.BracePatch]">List</span>[BracePatch] = <a href="#528334" title="List[scala.tools.nsc.ast.parser.BracePatch]">patches</a> <span title="List[scala.tools.nsc.ast.parser.BracePatch]" class="keyword">match</span> {
      <span title="List[scala.tools.nsc.ast.parser.BracePatch]" class="keyword">case</span> <a href="#528338" title="(x: List[scala.tools.nsc.ast.parser.BracePatch])Some[List[scala.tools.nsc.ast.parser.BracePatch]]">List</a>() =&gt; <a title="(xs: scala.tools.nsc.ast.parser.BracePatch*)List[scala.tools.nsc.ast.parser.BracePatch]" id="24319">List</a>(<a href="#528335" title="scala.tools.nsc.ast.parser.BracePatch">patch</a>)
      <span title="List[scala.tools.nsc.ast.parser.BracePatch]" class="keyword">case</span> <a title="scala.tools.nsc.ast.parser.BracePatch" id="528361">bp</a> :: <a title="List[scala.tools.nsc.ast.parser.BracePatch]" id="528362">bps</a> =&gt; <span title="List[scala.tools.nsc.ast.parser.BracePatch]" class="keyword">if</span> (<a href="#528335" title="scala.tools.nsc.ast.parser.BracePatch">patch</a>.<a href="BracePatch.scala.html#78267" title="(x$1: Int)Boolean">off</a> &lt; <a href="#528361" title="scala.tools.nsc.ast.parser.BracePatch">bp</a>.<a href="BracePatch.scala.html#78267" title="=&gt; Int">off</a>) <a href="#528335" title="scala.tools.nsc.ast.parser.BracePatch">patch</a> <a href="#528371" title="scala.tools.nsc.ast.parser.BracePatch">::</a> <a href="#528334" title="(x: scala.tools.nsc.ast.parser.BracePatch)List[scala.tools.nsc.ast.parser.BracePatch]">patches</a>
                        <span class="keyword">else</span> <a href="#528361" title="scala.tools.nsc.ast.parser.BracePatch">bp</a> <a href="#528379" title="scala.tools.nsc.ast.parser.BracePatch">::</a> <a href="#526617" title="(patches: List[scala.tools.nsc.ast.parser.BracePatch],patch: scala.tools.nsc.ast.parser.BracePatch)List[scala.tools.nsc.ast.parser.BracePatch]">insertPatch</a><span title="(x: scala.tools.nsc.ast.parser.BracePatch)List[scala.tools.nsc.ast.parser.BracePatch]">(</span><a href="#528362" title="List[scala.tools.nsc.ast.parser.BracePatch]">bps</a>, <a href="#528335" title="scala.tools.nsc.ast.parser.BracePatch">patch</a>)
    }    
    
    <span class="keyword">def</span> <a title="(offset: Int)Int" id="526618">leftColumn</a>(<a title="Int" id="528389">offset</a>: <span title="Int">Int</span>) = 
      <span title="Int" class="keyword">if</span> (<a href="#528389" title="(x$1: Int)Boolean">offset</a> == <span title="Int(-1)">-</span><span class="int">1</span>) <span title="Int(-1)">-</span><span class="int">1</span> <span class="keyword">else</span> <a href="#526616" title="(offset: Int)Int">column</a>(<a href="#526608" title="(idx: Int)Int">lineStart</a>(<a href="#526615" title="(offset: Int)Int">line</a>(<a href="#528389" title="Int">offset</a>)))

    <span class="keyword">def</span> <a title="(offset: Int,default: Int)Int" id="526619">rightColumn</a>(<a title="Int" id="528411">offset</a>: <span title="Int">Int</span>, <a title="Int" id="528412">default</a>: <span title="Int">Int</span>) = 
      <span title="Int" class="keyword">if</span> (<a href="#528411" title="(x$1: Int)Boolean">offset</a> == <span title="Int(-1)">-</span><span class="int">1</span>) <span title="Int(-1)">-</span><span class="int">1</span> 
      <span class="keyword">else</span> {
        <span class="keyword">val</span> <a title="Int" id="528421">rlin</a> = <a href="#526615" title="(offset: Int)Int">line</a>(<a href="#528411" title="Int">offset</a>)
        <span title="Int" class="keyword">if</span> (<a href="#526608" title="(idx: Int)Int">lineStart</a><span title="(x$1: Int)Boolean">(</span><a href="#528421" title="Int">rlin</a>) == <a href="#528411" title="Int">offset</a>) <a href="#526616" title="(offset: Int)Int">column</a>(<a href="#528411" title="Int">offset</a>)
        <span class="keyword">else</span> <span title="Int" class="keyword">if</span> (<a href="#528421" title="(x$1: Int)Int">rlin</a> <span title="(x$1: Int)Boolean">+</span> <span title="Int(1)" class="int">1</span> &lt; <a href="#526608" title="=&gt; scala.collection.mutable.ArrayBuffer[Int]">lineStart</a>.<span title="=&gt; Int">length</span>) <a href="#526616" title="(offset: Int)Int">column</a>(<a href="#526608" title="(idx: Int)Int">lineStart</a>(<a href="#528421" title="(x$1: Int)Int">rlin</a> + <span title="Int(1)" class="int">1</span>))
        <span class="keyword">else</span> <a href="#528412" title="Int">default</a>
      }

    <span class="keyword">def</span> <a title="()List[scala.tools.nsc.ast.parser.BracePatch]" id="526620">insertRBrace</a>(): <span title="List[scala.tools.nsc.ast.parser.BracePatch]">List</span>[BracePatch] = {
      <span class="keyword">def</span> <a title="(bps: List[scala.tools.nsc.ast.parser.BracePair])List[scala.tools.nsc.ast.parser.BracePatch]" id="528487">insert</a>(<a title="List[scala.tools.nsc.ast.parser.BracePair]" id="528488">bps</a>: <span title="List[scala.tools.nsc.ast.parser.BracePair]">List</span>[BracePair]): <span title="List[scala.tools.nsc.ast.parser.BracePatch]">List</span>[BracePatch] = <a href="#528488" title="List[scala.tools.nsc.ast.parser.BracePair]">bps</a> <span title="List[scala.tools.nsc.ast.parser.BracePatch]" class="keyword">match</span> {
        <span title="List[scala.tools.nsc.ast.parser.BracePatch]" class="keyword">case</span> <a href="#528490" title="(x: List[scala.tools.nsc.ast.parser.BracePair])Some[List[scala.tools.nsc.ast.parser.BracePair]]">List</a>() =&gt; <a href="#526626" title="List[scala.tools.nsc.ast.parser.BracePatch]">patches</a>
        <span title="List[scala.tools.nsc.ast.parser.BracePatch]" class="keyword">case</span> (<a title="scala.tools.nsc.ast.parser.BracePair" id="528504">bp</a> @ BracePair(<a title="Int" id="528505">loff</a>, <a title="Int" id="528506">lindent</a>, <a title="Int" id="528507">roff</a>, <a title="Int" id="528508">rindent</a>, <a title="List[scala.tools.nsc.ast.parser.BracePair]" id="528509">nested</a>)) :: <a title="List[scala.tools.nsc.ast.parser.BracePair]" id="528512">bps1</a> =&gt;
          <span title="List[scala.tools.nsc.ast.parser.BracePatch]" class="keyword">if</span> (<a href="#528506" title="(x$1: Int)Boolean">lindent</a> &lt;= <a href="#528508" title="Int">rindent</a>) <a href="#528487" title="(bps: List[scala.tools.nsc.ast.parser.BracePair])List[scala.tools.nsc.ast.parser.BracePatch]">insert</a>(<a href="#528512" title="List[scala.tools.nsc.ast.parser.BracePair]">bps1</a>)
          <span class="keyword">else</span> {
//           println(&quot;patch inside &quot;+bp+&quot;/&quot;+line(loff)+&quot;/&quot;+lineStart(line(loff))+&quot;/&quot;+lindent&quot;/&quot;+rindent)//DEBUG
            <span class="keyword">val</span> <a title="List[scala.tools.nsc.ast.parser.BracePatch]" id="528523">patches1</a> = <a href="#528487" title="(bps: List[scala.tools.nsc.ast.parser.BracePair])List[scala.tools.nsc.ast.parser.BracePatch]">insert</a>(<a href="#528509" title="List[scala.tools.nsc.ast.parser.BracePair]">nested</a>)
            <span title="List[scala.tools.nsc.ast.parser.BracePatch]" class="keyword">if</span> (<a href="#528523" title="(x$1: AnyRef)Boolean">patches1</a> ne <a href="#526626" title="List[scala.tools.nsc.ast.parser.BracePatch]">patches</a>) <a href="#528523" title="List[scala.tools.nsc.ast.parser.BracePatch]">patches1</a>
            <span class="keyword">else</span> {
              <span class="keyword">var</span> <a title="Int" id="528528">lin</a> = <a href="#526615" title="(offset: Int)Int">line</a><span title="(x$1: Int)Int">(</span><a href="#528505" title="Int">loff</a>) + <span title="Int(1)" class="int">1</span>
              <span title="Unit" class="keyword">while</span> (<a href="#528528" title="(x$1: Int)Boolean">lin</a> <span title="(x$1: Boolean)Boolean">&lt;</span> <a href="#526608" title="=&gt; scala.collection.mutable.ArrayBuffer[Int]">lineStart</a>.<span title="=&gt; Int">length</span> &amp;&amp; <a href="#526616" title="(offset: Int)Int">column</a><span title="(x$1: Int)Boolean">(</span><a href="#526608" title="(idx: Int)Int">lineStart</a>(<a href="#528528" title="Int">lin</a>)) &gt; <a href="#528506" title="Int">lindent</a>)
                <a href="#528528" title="Int">lin</a> <a href="#528529" title="()Unit">+=</a> <span title="Int(1)" class="int">1</span>
              <span title="List[scala.tools.nsc.ast.parser.BracePatch]" class="keyword">if</span> (<a href="#528528" title="(x$1: Int)Boolean">lin</a> &lt; <a href="#526608" title="=&gt; scala.collection.mutable.ArrayBuffer[Int]">lineStart</a>.<span title="=&gt; Int">length</span>) {
                <span class="keyword">val</span> <a title="List[scala.tools.nsc.ast.parser.BracePatch]" id="528605">patches1</a> = <a href="#526617" title="(patches: List[scala.tools.nsc.ast.parser.BracePatch],patch: scala.tools.nsc.ast.parser.BracePatch)List[scala.tools.nsc.ast.parser.BracePatch]">insertPatch</a>(<a href="#526626" title="List[scala.tools.nsc.ast.parser.BracePatch]">patches</a>, <a href="BracePatch.scala.html#78304" title="(off: Int,inserted: Boolean)scala.tools.nsc.ast.parser.BracePatch">BracePatch</a>(<a href="#526608" title="(idx: Int)Int">lineStart</a>(<a href="#528528" title="Int">lin</a>), <span title="Boolean(true)" class="keyword">true</span>))
                //println(&quot;patch for &quot;+bp+&quot;/&quot;+imbalanceMeasure+&quot;/&quot;+new ParensAnalyzer(unit, patches1).imbalanceMeasure)
                /*if (improves(patches1))*/ 
                <a href="#528605" title="List[scala.tools.nsc.ast.parser.BracePatch]">patches1</a> 
                /*else insert(bps1)*/
                // (this test did not seem to work very well in practice)
              } <span class="keyword">else</span> <a href="#526626" title="List[scala.tools.nsc.ast.parser.BracePatch]">patches</a>
            }
          }
      }
      <a href="#528487" title="(bps: List[scala.tools.nsc.ast.parser.BracePair])List[scala.tools.nsc.ast.parser.BracePatch]">insert</a>(<a href="#526610" title="=&gt; List[scala.tools.nsc.ast.parser.BracePair]">bracePairs</a>)
    }
      
    <span class="keyword">def</span> <a title="()List[scala.tools.nsc.ast.parser.BracePatch]" id="526621">deleteRBrace</a>(): <span title="List[scala.tools.nsc.ast.parser.BracePatch]">List</span>[BracePatch] = {
      <span class="keyword">def</span> <a title="(bps: List[scala.tools.nsc.ast.parser.BracePair])List[scala.tools.nsc.ast.parser.BracePatch]" id="528629">delete</a>(<a title="List[scala.tools.nsc.ast.parser.BracePair]" id="528630">bps</a>: <span title="List[scala.tools.nsc.ast.parser.BracePair]">List</span>[BracePair]): <span title="List[scala.tools.nsc.ast.parser.BracePatch]">List</span>[BracePatch] = <a href="#528630" title="List[scala.tools.nsc.ast.parser.BracePair]">bps</a> <span title="List[scala.tools.nsc.ast.parser.BracePatch]" class="keyword">match</span> {
        <span title="List[scala.tools.nsc.ast.parser.BracePatch]" class="keyword">case</span> <a href="#528632" title="(x: List[scala.tools.nsc.ast.parser.BracePair])Some[List[scala.tools.nsc.ast.parser.BracePair]]">List</a>() =&gt; <a href="#526626" title="List[scala.tools.nsc.ast.parser.BracePatch]">patches</a>
        <span title="List[scala.tools.nsc.ast.parser.BracePatch]" class="keyword">case</span> BracePair(<a title="Int" id="528646">loff</a>, <a title="Int" id="528647">lindent</a>, <a title="Int" id="528648">roff</a>, <a title="Int" id="528649">rindent</a>, <a title="List[scala.tools.nsc.ast.parser.BracePair]" id="528650">nested</a>) :: <a title="List[scala.tools.nsc.ast.parser.BracePair]" id="528653">bps1</a> =&gt;
          <span title="List[scala.tools.nsc.ast.parser.BracePatch]" class="keyword">if</span> (<a href="#528647" title="(x$1: Int)Boolean">lindent</a> &gt;= <a href="#528649" title="Int">rindent</a>) <a href="#528629" title="(bps: List[scala.tools.nsc.ast.parser.BracePair])List[scala.tools.nsc.ast.parser.BracePatch]">delete</a>(<a href="#528653" title="List[scala.tools.nsc.ast.parser.BracePair]">bps1</a>)
          <span class="keyword">else</span> {
            <span class="keyword">val</span> <a title="List[scala.tools.nsc.ast.parser.BracePatch]" id="528664">patches1</a> = <a href="#528629" title="(bps: List[scala.tools.nsc.ast.parser.BracePair])List[scala.tools.nsc.ast.parser.BracePatch]">delete</a>(<a href="#528650" title="List[scala.tools.nsc.ast.parser.BracePair]">nested</a>)
            <span title="List[scala.tools.nsc.ast.parser.BracePatch]" class="keyword">if</span> (<a href="#528664" title="(x$1: AnyRef)Boolean">patches1</a> ne <a href="#526626" title="List[scala.tools.nsc.ast.parser.BracePatch]">patches</a>) <a href="#528664" title="List[scala.tools.nsc.ast.parser.BracePatch]">patches1</a>
            <span class="keyword">else</span> <a href="#526617" title="(patches: List[scala.tools.nsc.ast.parser.BracePatch],patch: scala.tools.nsc.ast.parser.BracePatch)List[scala.tools.nsc.ast.parser.BracePatch]">insertPatch</a>(<a href="#526626" title="List[scala.tools.nsc.ast.parser.BracePatch]">patches</a>, <a href="BracePatch.scala.html#78304" title="(off: Int,inserted: Boolean)scala.tools.nsc.ast.parser.BracePatch">BracePatch</a>(<a href="#528648" title="Int">roff</a>, <span title="Boolean(false)" class="keyword">false</span>))
          }
      }
      <a href="#528629" title="(bps: List[scala.tools.nsc.ast.parser.BracePair])List[scala.tools.nsc.ast.parser.BracePatch]">delete</a>(<a href="#526610" title="=&gt; List[scala.tools.nsc.ast.parser.BracePair]">bracePairs</a>)
    }    

    <span class="keyword">def</span> <a title="=&gt; Int" id="526622">imbalanceMeasure</a>: <span title="Int">Int</span> = {
      <span class="keyword">def</span> <a title="(bps: List[scala.tools.nsc.ast.parser.BracePair])Int" id="528685">measureList</a>(<a title="List[scala.tools.nsc.ast.parser.BracePair]" id="528687">bps</a>: <span title="List[scala.tools.nsc.ast.parser.BracePair]">List</span>[BracePair]): <span title="Int">Int</span> =
        (<a href="#528687" title="(f: (scala.tools.nsc.ast.parser.BracePair) =&gt; Int)(implicit bf: scala.collection.generic.BuilderFactory[Int,List[Int],List[scala.tools.nsc.ast.parser.BracePair]])List[Int]" id="25243">bps</a> <a title="scala.collection.generic.BuilderFactory[Int,List[Int],List#Coll]" id="24313">map</a> <a href="#528686" title="(bp: scala.tools.nsc.ast.parser.BracePair)Int">measure</a>).<a title="(implicit num: Numeric[Int])Int" id="165">sum</a>
      <span class="keyword">def</span> <a title="(bp: scala.tools.nsc.ast.parser.BracePair)Int" id="528686">measure</a>(<a title="scala.tools.nsc.ast.parser.BracePair" id="528695">bp</a>: <a href="BracePair.scala.html#12509" title="scala.tools.nsc.ast.parser.BracePair">BracePair</a>): <span title="Int">Int</span> = 
        <span title="(x$1: Int)Int">(</span><span title="Int" class="keyword">if</span> (<a href="#528695" title="scala.tools.nsc.ast.parser.BracePair">bp</a>.<a href="BracePair.scala.html#41360" title="(x$1: Int)Boolean">lindent</a> != <a href="#528695" title="scala.tools.nsc.ast.parser.BracePair">bp</a>.<a href="BracePair.scala.html#41364" title="=&gt; Int">rindent</a>) <span title="Int(1)" class="int">1</span> <span class="keyword">else</span> <span title="Int(0)" class="int">0</span>) + <a href="#528685" title="(bps: List[scala.tools.nsc.ast.parser.BracePair])Int">measureList</a>(<a href="#528695" title="scala.tools.nsc.ast.parser.BracePair">bp</a>.<a href="BracePair.scala.html#41366" title="=&gt; List[scala.tools.nsc.ast.parser.BracePair]">nested</a>)
      <a href="#528685" title="(bps: List[scala.tools.nsc.ast.parser.BracePair])Int">measureList</a>(<a href="#526610" title="=&gt; List[scala.tools.nsc.ast.parser.BracePair]">bracePairs</a>)
    }

    <span class="keyword">def</span> <a title="(patches1: List[scala.tools.nsc.ast.parser.BracePatch])Boolean" id="526623">improves</a>(<a title="List[scala.tools.nsc.ast.parser.BracePatch]" id="529212">patches1</a>: <span title="List[scala.tools.nsc.ast.parser.BracePatch]">List</span>[BracePatch]): <span title="Boolean">Boolean</span> =
      <a href="#526622" title="(x$1: Int)Boolean">imbalanceMeasure</a> &gt; <span title="Scanners.this.ParensAnalyzer" class="keyword">new</span> <a href="#39699" title="Scanners.this.ParensAnalyzer">ParensAnalyzer</a>(<a href="#526625" title="Scanners.this.global.CompilationUnit">unit</a>, <a href="#529212" title="List[scala.tools.nsc.ast.parser.BracePatch]">patches1</a>).<a href="#526622" title="=&gt; Int">imbalanceMeasure</a>

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(offset: Int,msg: String)Unit" id="526624">error</a>(<a title="Int" id="529222">offset</a>: <span title="Int">Int</span>, <a title="String" id="529223">msg</a>: <span title="String">String</span>) <span title="Unit">{</span>}
  }
}

        </pre>
    </body>
</html>