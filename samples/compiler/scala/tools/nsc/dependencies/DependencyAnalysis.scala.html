<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/dependencies/DependencyAnalysis.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style">
    </head>
    <body>
        <pre>
<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> dependencies;
<span class="keyword">import</span> util.SourceFile;
<span class="keyword">import</span> io.AbstractFile
<span class="keyword">import</span> collection._
<span class="keyword">import</span> symtab.Flags

<span class="keyword">trait</span> <a title="trait DependencyAnalysis extends scala.tools.nsc.SubComponent with scala.tools.nsc.dependencies.Files with ScalaObject" id="21346">DependencyAnalysis</a> <span title="ScalaObject" class="keyword">extends</span> <a href="../SubComponent.scala.html#8328" title="scala.tools.nsc.SubComponent">SubComponent</a> <span class="keyword">with</span> <a href="Files.scala.html#21301" title="scala.tools.nsc.dependencies.Files">Files</a> {
  <span class="keyword">import</span> global._

  <span class="keyword">val</span> <a title="java.lang.String" id="167020">phaseName</a> = <span title="java.lang.String(&quot;dependencyAnalysis&quot;)" class="string">&quot;dependencyAnalysis&quot;</span>;

  <span class="keyword">def</span> <a title="=&gt; Boolean" id="167022">off</a> = <a href="../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../Settings.scala.html#37249" title="=&gt; scala.tools.nsc.Settings.ChoiceSetting">make</a>.<a href="../Settings.scala.html#37988" title="(x$1: AnyRef)Boolean">value</a> == <span title="java.lang.String(&quot;all&quot;)" class="string">&quot;all&quot;</span>

  <span class="keyword">def</span> <a title="(prev: scala.tools.nsc.Phase)DependencyAnalysis.this.AnalysisPhase" id="167023">newPhase</a>(<a title="scala.tools.nsc.Phase" id="327803">prev</a> : <a href="../Phase.scala.html#8931" title="scala.tools.nsc.Phase">Phase</a>) = <span title="DependencyAnalysis.this.AnalysisPhase" class="keyword">new</span> <a href="#167045" title="DependencyAnalysis.this.AnalysisPhase">AnalysisPhase</a>(<a href="#327803" title="scala.tools.nsc.Phase">prev</a>) 

  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Int" id="167025">maxDepth</a> = <a href="../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../Settings.scala.html#37249" title="=&gt; scala.tools.nsc.Settings.ChoiceSetting">make</a>.<a href="../Settings.scala.html#37988" title="=&gt; java.lang.String">value</a> <span title="Int" class="keyword">match</span> {
    <span title="Int(0)" class="keyword">case</span> <span title="java.lang.String(&quot;changed&quot;)" class="string">&quot;changed&quot;</span> =&gt; <span title="Int(0)" class="int">0</span> 
    <span title="Int(2147483647)" class="keyword">case</span> <span title="java.lang.String(&quot;transitive&quot;)" class="string">&quot;transitive&quot;</span> =&gt; Int.<span title="Int(2147483647)">MaxValue</span>
    <span title="Int(1)" class="keyword">case</span> <span title="java.lang.String(&quot;immediate&quot;)" class="string">&quot;immediate&quot;</span> =&gt; <span title="Int(1)" class="int">1</span> 
  }

  <span class="keyword">def</span> <a title="(src: scala.tools.nsc.io.AbstractFile,name: String)scala.tools.nsc.io.AbstractFile" id="167026">nameToFile</a>(<a title="scala.tools.nsc.io.AbstractFile" id="327813">src</a>: <a href="../io/AbstractFile.scala.html#20689" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a>, <a title="String" id="327814">name</a> : <span title="String">String</span>) = 
    <a href="../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../Settings.scala.html#37410" title="=&gt; scala.tools.nsc.Settings.OutputDirs">outputDirs</a>.<a href="../Settings.scala.html#38014" title="(src: scala.tools.nsc.io.AbstractFile)scala.tools.nsc.io.AbstractFile">outputDirFor</a>(<a href="#327813" title="scala.tools.nsc.io.AbstractFile">src</a>)
      .<a href="../io/AbstractFile.scala.html#51656" title="(path: String,directory: Boolean)scala.tools.nsc.io.AbstractFile">lookupPathUnchecked</a>(<a href="#327814" title="String">name</a>.<a title="()java.lang.String" id="7121">toString</a>.<a title="(x$1: java.lang.CharSequence,x$2: java.lang.CharSequence)java.lang.String" id="7106">replace</a><span title="(x$1: Any)java.lang.String">(</span><span title="java.lang.String(&quot;.&quot;)" class="string">&quot;.&quot;</span>, java.io.<a title="object java.io.File" id="3829">File</a>.<a title="java.lang.String" id="35353">separator</a>) + <span title="java.lang.String(&quot;.class&quot;)" class="string">&quot;.class&quot;</span>, <span title="Boolean(false)" class="keyword">false</span>)

  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Option[scala.tools.nsc.io.AbstractFile]" id="167028">depFile</a>: <span title="Option[scala.tools.nsc.io.AbstractFile]">Option</span>[AbstractFile] = <span title="object None">None</span>

  <span class="keyword">def</span> <a title="(file: scala.tools.nsc.io.AbstractFile)Unit" id="167030">dependenciesFile_=</a>(<a title="scala.tools.nsc.io.AbstractFile" id="168506">file</a>: <a href="../io/AbstractFile.scala.html#20689" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a>) {
    <a title="(assertion: Boolean)Unit" id="7943">assert</a>(<a href="#168506" title="(x$1: AnyRef)Boolean">file</a> ne <span title="Null(null)" class="keyword">null</span>)
    <a href="#167028" title="(x$1: Option[scala.tools.nsc.io.AbstractFile])Unit">depFile</a> = <a title="(x: scala.tools.nsc.io.AbstractFile)Some[scala.tools.nsc.io.AbstractFile]" id="267">Some</a>(<a href="#168506" title="scala.tools.nsc.io.AbstractFile">file</a>)
  }

  <span class="keyword">def</span> <a title="=&gt; Option[scala.tools.nsc.io.AbstractFile]" id="167031">dependenciesFile</a>: <span title="Option[scala.tools.nsc.io.AbstractFile]">Option</span>[AbstractFile] = <a href="#167028" title="=&gt; Option[scala.tools.nsc.io.AbstractFile]">depFile</a>

  <span class="keyword">def</span> <a title="=&gt; java.lang.String" id="167032">classpath</a> = <a href="../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../Settings.scala.html#37231" title="=&gt; scala.tools.nsc.Settings.StringSetting">classpath</a>.<a href="../Settings.scala.html#37988" title="=&gt; java.lang.String">value</a>
  <span class="keyword">def</span> <a title="=&gt; DependencyAnalysis.this.FileDependencies" id="167033">newDeps</a> = <span title="DependencyAnalysis.this.FileDependencies" class="keyword">new</span> <a href="Files.scala.html#167070" title="DependencyAnalysis.this.FileDependencies">FileDependencies</a>(<a href="#167032" title="=&gt; java.lang.String">classpath</a>);

  <span class="keyword">var</span> <a title="DependencyAnalysis.this.FileDependencies" id="167035">dependencies</a> = <a href="#167033" title="=&gt; DependencyAnalysis.this.FileDependencies">newDeps</a>

  <span class="keyword">def</span> <a title="=&gt; scala.collection.Set[scala.tools.nsc.io.AbstractFile]" id="167037">managedFiles</a> = <a href="#167035" title="=&gt; DependencyAnalysis.this.FileDependencies">dependencies</a>.<a href="Files.scala.html#167665" title="=&gt; DependencyAnalysis.this.FileDependencies#Tracker">dependencies</a>.<a title="=&gt; scala.collection.Set[scala.tools.nsc.io.AbstractFile]" id="44682">keySet</a>
  
  /** Top level definitions per source file. */
  <span class="keyword">val</span> <a title="scala.collection.mutable.Map[scala.tools.nsc.io.AbstractFile,List[DependencyAnalysis.this.global.Symbol]]" id="167038">definitions</a>: mutable.<span title="scala.collection.mutable.Map[scala.tools.nsc.io.AbstractFile,List[DependencyAnalysis.this.global.Symbol]]">Map</span>[AbstractFile, List[Symbol]] =
    <a href="#327847" title="scala.collection.mutable.HashMap[scala.tools.nsc.io.AbstractFile,List[DependencyAnalysis.this.global.Symbol]]{ ... }" class="keyword">new</a> <a title="anonymous class $anon extends scala.collection.mutable.HashMap[scala.tools.nsc.io.AbstractFile,List[DependencyAnalysis.this.global.Symbol]]" id="327847">mutable</a>.<span title="scala.collection.mutable.HashMap[scala.tools.nsc.io.AbstractFile,List[DependencyAnalysis.this.global.Symbol]]">HashMap</span>[AbstractFile, List[Symbol]] {
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="(f: scala.tools.nsc.io.AbstractFile)object Nil" id="327849">default</a>(<a title="scala.tools.nsc.io.AbstractFile" id="327853">f</a> : <a href="../io/AbstractFile.scala.html#20689" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a>) = <span title="object Nil">Nil</span>
  }
  
  /** External references used by source file. */
  <span class="keyword">val</span> <a title="scala.collection.mutable.Map[scala.tools.nsc.io.AbstractFile,scala.collection.immutable.Set[String]]" id="167040">references</a>: mutable.<span title="scala.collection.mutable.Map[scala.tools.nsc.io.AbstractFile,scala.collection.immutable.Set[String]]">Map</span>[AbstractFile, immutable.Set[String]] = 
    <a href="#327859" title="scala.collection.mutable.HashMap[scala.tools.nsc.io.AbstractFile,scala.collection.immutable.Set[String]]{ ... }" class="keyword">new</a> <a title="anonymous class $anon extends scala.collection.mutable.HashMap[scala.tools.nsc.io.AbstractFile,scala.collection.immutable.Set[String]]" id="327859">mutable</a>.<span title="scala.collection.mutable.HashMap[scala.tools.nsc.io.AbstractFile,scala.collection.immutable.Set[String]]">HashMap</span>[AbstractFile, immutable.Set[String]] {
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="(f: scala.tools.nsc.io.AbstractFile)scala.collection.immutable.Set[String]" id="327861">default</a>(<a title="scala.tools.nsc.io.AbstractFile" id="327865">f</a> : <a href="../io/AbstractFile.scala.html#20689" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a>) = immutable.<a title="(args: String*)scala.collection.immutable.Set[String]" id="24664">Set</a>()
    }

  /** Write dependencies to the current file. */
  <span class="keyword">def</span> <a title="(fromFile: (scala.tools.nsc.io.AbstractFile) =&gt; String)Unit" id="167042">saveDependencies</a>(<a title="(scala.tools.nsc.io.AbstractFile) =&gt; String" id="168510">fromFile</a>: AbstractFile =&gt; String) = 
    <span title="Unit" class="keyword">if</span>(<a href="#167031" title="=&gt; Option[scala.tools.nsc.io.AbstractFile]">dependenciesFile</a>.<a title="=&gt; Boolean" id="35231">isDefined</a>)
      <a href="#167035" title="=&gt; DependencyAnalysis.this.FileDependencies">dependencies</a>.<a href="Files.scala.html#167677" title="(file: scala.tools.nsc.io.AbstractFile,fromFile: (scala.tools.nsc.io.AbstractFile) =&gt; String)Unit">writeTo</a>(<a href="#167031" title="=&gt; Option[scala.tools.nsc.io.AbstractFile]">dependenciesFile</a>.<a title="=&gt; scala.tools.nsc.io.AbstractFile" id="35232">get</a>, <a href="#168510" title="(scala.tools.nsc.io.AbstractFile) =&gt; String">fromFile</a>)

  /** Load dependencies from the given file and save the file reference for
   *  future saves.
   */
  <span class="keyword">def</span> <a title="(f: scala.tools.nsc.io.AbstractFile,toFile: (String) =&gt; scala.tools.nsc.io.AbstractFile)Boolean" id="167043">loadFrom</a>(<a title="scala.tools.nsc.io.AbstractFile" id="168357">f</a>: <a href="../io/AbstractFile.scala.html#20689" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a>, <a title="(String) =&gt; scala.tools.nsc.io.AbstractFile" id="168358">toFile</a>: String =&gt; AbstractFile) : <a title="Boolean" id="1972">Boolean</a> = {
    <a href="#167030" title="(file: scala.tools.nsc.io.AbstractFile)Unit">dependenciesFile</a> = <a href="#168357" title="scala.tools.nsc.io.AbstractFile">f</a>
    <a href="Files.scala.html#167071" title="object DependencyAnalysis.this.FileDependencies">FileDependencies</a>.<a href="Files.scala.html#174262" title="(file: scala.tools.nsc.io.AbstractFile,toFile: (String) =&gt; scala.tools.nsc.io.AbstractFile)Option[DependencyAnalysis.this.FileDependencies]">readFrom</a>(<a href="#168357" title="scala.tools.nsc.io.AbstractFile">f</a>, <a href="#168358" title="(String) =&gt; scala.tools.nsc.io.AbstractFile">toFile</a>) <span title="Boolean" class="keyword">match</span> {
      <span title="Boolean" class="keyword">case</span> <a id="1">Some</a>(<a title="DependencyAnalysis.this.FileDependencies" id="327881">fd</a>) =&gt;      
        <span class="keyword">val</span> <a title="Boolean" id="327884">success</a> = <a href="#327881" title="DependencyAnalysis.this.FileDependencies">fd</a>.<a href="Files.scala.html#167661" title="(x$1: AnyRef)Boolean">classpath</a> == <a href="#167032" title="=&gt; java.lang.String">classpath</a>
        <a href="#167035" title="(x$1: DependencyAnalysis.this.FileDependencies)Unit">dependencies</a> = <span title="DependencyAnalysis.this.FileDependencies" class="keyword">if</span> (<a href="#327884" title="Boolean">success</a>) <a href="#327881" title="DependencyAnalysis.this.FileDependencies">fd</a> <span class="keyword">else</span> {
          <span title="Unit" class="keyword">if</span>(<a href="../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../Settings.scala.html#37988" title="=&gt; Boolean">value</a>){
            <span title="(x: Any)Unit">println</span>(<span title="java.lang.String(&quot;Classpath has changed. Nuking dependencies&quot;)" class="string">&quot;Classpath has changed. Nuking dependencies&quot;</span>);
          }
          <a href="#167033" title="=&gt; DependencyAnalysis.this.FileDependencies">newDeps</a>
        }
        
        <a href="#327884" title="Boolean">success</a>
      <span title="Boolean(false)" class="keyword">case</span> <span title="object None">None</span> =&gt; <span title="Boolean(false)" class="keyword">false</span>
    }
  }

  <span class="keyword">def</span> <a title="(files: List[scala.tools.nsc.util.SourceFile])List[scala.tools.nsc.util.SourceFile]" id="167044">filter</a>(<a title="List[scala.tools.nsc.util.SourceFile]" id="327899">files</a> : <span title="List[scala.tools.nsc.util.SourceFile]">List</span>[SourceFile]) : <span title="List[scala.tools.nsc.util.SourceFile]">List</span>[SourceFile] = 
    <span title="List[scala.tools.nsc.util.SourceFile]" class="keyword">if</span> (<a href="#167022" title="=&gt; Boolean">off</a>) <a href="#327899" title="List[scala.tools.nsc.util.SourceFile]">files</a>
    <span class="keyword">else</span> <span title="List[scala.tools.nsc.util.SourceFile]" class="keyword">if</span> (<a href="#167035" title="=&gt; DependencyAnalysis.this.FileDependencies">dependencies</a>.<a href="Files.scala.html#167669" title="=&gt; Boolean">isEmpty</a>){
      <span title="Unit" class="keyword">if</span>(<a href="../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../Settings.scala.html#37988" title="=&gt; Boolean">value</a>){
        <span title="(x: Any)Unit">println</span>(<span title="java.lang.String(&quot;No known dependencies. Compiling everything&quot;)" class="string">&quot;No known dependencies. Compiling everything&quot;</span>);
      }
      <a href="#327899" title="List[scala.tools.nsc.util.SourceFile]">files</a>
    }
    <span class="keyword">else</span> {
      <span class="keyword">val</span> <a href="#36621" title="(scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile], scala.collection.Set[scala.tools.nsc.io.AbstractFile])" id="1176">(</a><a href="#327907" title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]" id="36621">direct</a>, <a href="#327907" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]" id="36623">indirect</a>) = <a href="#167035" title="=&gt; DependencyAnalysis.this.FileDependencies">dependencies</a>.<a href="Files.scala.html#167675" title="(maxDepth: Int)(scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile], scala.collection.Set[scala.tools.nsc.io.AbstractFile])">invalidatedFiles</a><a title="(scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile], scala.collection.Set[scala.tools.nsc.io.AbstractFile]) @unchecked" id="1175">(</a><a href="#167024" title="=&gt; Int">maxDepth</a>);  
      <span class="keyword">val</span> <a title="List[scala.tools.nsc.util.SourceFile]" id="327910">filtered</a> = <a href="#327899" title="List[scala.tools.nsc.util.SourceFile]">files</a>.<span title="(p: (scala.tools.nsc.util.SourceFile) =&gt; Boolean)List[scala.tools.nsc.util.SourceFile]">filter</span>(<a title="scala.tools.nsc.util.SourceFile" id="327931">x</a> =&gt; {
        <span class="keyword">val</span> <a title="scala.tools.nsc.io.AbstractFile" id="327932">f</a> = <a href="#327931" title="scala.tools.nsc.util.SourceFile">x</a>.<a href="../util/SourceFile.scala.html#68479" title="=&gt; scala.tools.nsc.io.AbstractFile">file</a>.<a href="../io/AbstractFile.scala.html#51638" title="=&gt; scala.tools.nsc.io.AbstractFile">absolute</a>
        <a href="#36621" title="(elem: scala.tools.nsc.io.AbstractFile)Boolean">direct</a><span title="(x$1: Boolean)Boolean">(</span><a href="#327932" title="scala.tools.nsc.io.AbstractFile">f</a>) <span title="(x$1: Boolean)Boolean">||</span> <a href="#36623" title="(elem: scala.tools.nsc.io.AbstractFile)Boolean">indirect</a>(<a href="#327932" title="scala.tools.nsc.io.AbstractFile">f</a>) || <span title="=&gt; Boolean">!</span><a href="#167035" title="=&gt; DependencyAnalysis.this.FileDependencies">dependencies</a>.<a href="Files.scala.html#167674" title="(f: scala.tools.nsc.io.AbstractFile)Boolean">containsFile</a>(<a href="#327932" title="scala.tools.nsc.io.AbstractFile">f</a>);
      })
      <a href="#327910" title="List[scala.tools.nsc.util.SourceFile]">filtered</a> <span title="Unit" class="keyword">match</span> {
        <span title="Unit" class="keyword">case</span> <span title="object Nil">Nil</span> =&gt; <span title="(x: Any)Unit">println</span>(<span title="java.lang.String(&quot;No changes to recompile&quot;)" class="string">&quot;No changes to recompile&quot;</span>);
        <span title="Unit" class="keyword">case</span> <a title="List[scala.tools.nsc.util.SourceFile]" id="327973">x</a> =&gt; <span title="(x: Any)Unit">println</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Recompiling &quot;</span> + (
          <span title="Any" class="keyword">if</span>(<a href="../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../Settings.scala.html#37988" title="=&gt; Boolean">value</a>) <a href="#327973" title="List[scala.tools.nsc.util.SourceFile]">x</a>.<a title="(sep: String)String" id="25523">mkString</a>(<span title="java.lang.String(&quot;, &quot;)" class="string">&quot;, &quot;</span>)
          <span class="keyword">else</span> <a href="#327973" title="List[scala.tools.nsc.util.SourceFile]">x</a>.<a title="(x$1: java.lang.String)java.lang.String" id="29114">length</a> + <span title="java.lang.String(&quot; files&quot;)" class="string">&quot; files&quot;</span>)
        )
      }
      <a href="#327910" title="List[scala.tools.nsc.util.SourceFile]">filtered</a>
    }

  <span class="keyword">class</span> <a title="class AnalysisPhase extends DependencyAnalysis.this.StdPhase with ScalaObject" id="167045">AnalysisPhase</a><span title="ScalaObject">(</span><a title="scala.tools.nsc.Phase" id="327810">prev</a> : <a href="../Phase.scala.html#8931" title="scala.tools.nsc.Phase">Phase</a>) <span class="keyword">extends</span> <a href="../SubComponent.scala.html#39872" title="DependencyAnalysis.this.StdPhase">StdPhase</a>(<a href="#327810" title="scala.tools.nsc.Phase">prev</a>){
    <span class="keyword">def</span> <a title="(unit: DependencyAnalysis.this.global.CompilationUnit)Unit" id="327809">apply</a>(<a title="DependencyAnalysis.this.global.CompilationUnit" id="327996">unit</a> : global.<a href="../CompilationUnits.scala.html#39428" title="DependencyAnalysis.this.global.CompilationUnit">CompilationUnit</a>) { 
      <span class="keyword">val</span> <a title="java.io.File" id="327999">f</a> = <a href="#327996" title="DependencyAnalysis.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#45663" title="=&gt; scala.tools.nsc.util.SourceFile">source</a>.<a href="../util/SourceFile.scala.html#68479" title="=&gt; scala.tools.nsc.io.AbstractFile">file</a>.<a href="../io/AbstractFile.scala.html#51640" title="=&gt; java.io.File">file</a>;
      // When we're passed strings by the interpreter 
      // they  have no source file. We simply ignore this case
      // as irrelevant to dependency analysis.
      <span title="Unit" class="keyword">if</span> (<a href="#327999" title="(x$1: AnyRef)Boolean">f</a> != <span title="Null(null)" class="keyword">null</span>){
        <span class="keyword">val</span> <a title="scala.tools.nsc.io.AbstractFile" id="328008">source</a>: <a href="../io/AbstractFile.scala.html#20689" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a> = <a href="#327996" title="DependencyAnalysis.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#45663" title="=&gt; scala.tools.nsc.util.SourceFile">source</a>.<a href="../util/SourceFile.scala.html#68479" title="=&gt; scala.tools.nsc.io.AbstractFile">file</a>;
        <span class="keyword">for</span> (<a title="DependencyAnalysis.this.global.icodes.IClass" id="328025">d</a> &lt;- <a href="#327996" title="DependencyAnalysis.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#45685" title="(f: (DependencyAnalysis.this.global.icodes.IClass) =&gt; scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile])Unit">icode</a>){
          <span class="keyword">val</span> <a title="java.lang.String" id="328026">name</a> = <a href="#328025" title="DependencyAnalysis.this.global.icodes.IClass">d</a>.<a href="../backend/icode/Members.scala.html#66941" title="=&gt; DependencyAnalysis.this.global.icodes.global.Symbol">symbol</a> <span title="java.lang.String" class="keyword">match</span> {
            <span title="java.lang.String" class="keyword">case</span> _ : <a href="../symtab/Symbols.scala.html#26292" title="DependencyAnalysis.this.global.ModuleClassSymbol">ModuleClassSymbol</a> =&gt; <a href="#328025" title="DependencyAnalysis.this.global.icodes.IClass">d</a>.<a href="../backend/icode/Members.scala.html#66959" title="(x$1: Any)java.lang.String">toString</a>+<span title="java.lang.String(&quot;$&quot;)" class="string">&quot;$&quot;</span>
            <span title="String" class="keyword">case</span> _ =&gt; <a href="#328025" title="DependencyAnalysis.this.global.icodes.IClass">d</a>.<a href="../backend/icode/Members.scala.html#66959" title="()String">toString</a>
          }
          <a href="#167035" title="=&gt; DependencyAnalysis.this.FileDependencies">dependencies</a>.<a href="Files.scala.html#167670" title="(source: scala.tools.nsc.io.AbstractFile,result: scala.tools.nsc.io.AbstractFile)scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]">emits</a>(<a href="#328008" title="scala.tools.nsc.io.AbstractFile">source</a>, <a href="#167026" title="(src: scala.tools.nsc.io.AbstractFile,name: String)scala.tools.nsc.io.AbstractFile">nameToFile</a>(<a href="#327996" title="DependencyAnalysis.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#45663" title="=&gt; scala.tools.nsc.util.SourceFile">source</a>.<a href="../util/SourceFile.scala.html#68479" title="=&gt; scala.tools.nsc.io.AbstractFile">file</a>, <a href="#328026" title="java.lang.String">name</a>))
        }
       
        <span class="keyword">for</span> (<a title="DependencyAnalysis.this.global.Symbol" id="328073">d</a> &lt;- <a href="#327996" title="DependencyAnalysis.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#45672" title="(f: (DependencyAnalysis.this.global.Symbol) =&gt; scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile])Unit">depends</a>; <span class="keyword">if</span> (<a href="#328073" title="DependencyAnalysis.this.global.Symbol">d</a>.<a href="../symtab/Symbols.scala.html#27236" title="(x$1: AnyRef)Boolean">sourceFile</a> != <span title="Null(null)" class="keyword">null</span>)){
          <a href="#167035" title="=&gt; DependencyAnalysis.this.FileDependencies">dependencies</a>.<a href="Files.scala.html#167671" title="(from: scala.tools.nsc.io.AbstractFile,on: scala.tools.nsc.io.AbstractFile)scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]">depends</a>(<a href="#328008" title="scala.tools.nsc.io.AbstractFile">source</a>, <a href="#328073" title="DependencyAnalysis.this.global.Symbol">d</a>.<a href="../symtab/Symbols.scala.html#27236" title="=&gt; scala.tools.nsc.io.AbstractFile">sourceFile</a>);
        }
      }

      // find all external references in this compilation unit
      <span class="keyword">val</span> <a title="scala.tools.nsc.io.AbstractFile" id="328000">file</a> = <a href="#327996" title="DependencyAnalysis.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#45663" title="=&gt; scala.tools.nsc.util.SourceFile">source</a>.<a href="../util/SourceFile.scala.html#68479" title="=&gt; scala.tools.nsc.io.AbstractFile">file</a>
      <a href="#167040" title="(kv: (scala.tools.nsc.io.AbstractFile, scala.collection.immutable.Set[String]))DependencyAnalysis.this.references.type">references</a> += <a href="#328000" title="(y: scala.collection.immutable.Set[String])(scala.tools.nsc.io.AbstractFile, scala.collection.immutable.Set[String])">file</a> -&gt; immutable.<span title="object scala.collection.immutable.Set">Set</span>.<a title="[A]scala.collection.immutable.Set[A]" id="54601">empty</a><span title="scala.collection.immutable.Set[String]">[</span><span title="String">String</span>]

      <span class="keyword">val</span> <a title="scala.collection.mutable.ListBuffer[DependencyAnalysis.this.global.Symbol]" id="328001">buf</a> = <span title="scala.collection.mutable.ListBuffer[DependencyAnalysis.this.global.Symbol]" class="keyword">new</span> mutable.<a title="scala.collection.mutable.ListBuffer[DependencyAnalysis.this.global.Symbol]" id="24978">ListBuffer</a>[Symbol]

      (<a href="#328127" title="DependencyAnalysis.this.global.Traverser{ ... }" class="keyword">new</a> <a href="../ast/Trees.scala.html#26933" title="anonymous class $anon extends DependencyAnalysis.this.global.Traverser" id="328127">Traverser</a> {
        <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: DependencyAnalysis.this.global.Tree)Unit" id="328129">traverse</a>(<a title="DependencyAnalysis.this.global.Tree" id="328133">tree</a>: <a href="../ast/Trees.scala.html#26752" title="DependencyAnalysis.this.global.Tree">Tree</a>) {
          <span title="Any" class="keyword">if</span> (<span title="(x$1: Boolean)Boolean">(</span><a href="#328133" title="DependencyAnalysis.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="(x$1: AnyRef)Boolean">symbol</a> ne <span title="Null(null)" class="keyword">null</span>)
              <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> (<a href="#328133" title="DependencyAnalysis.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="(x$1: AnyRef)Boolean">symbol</a> != <a href="../symtab/Symbols.scala.html#26293" title="object DependencyAnalysis.this.global.NoSymbol">NoSymbol</a>)
              <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> (<span title="=&gt; Boolean">!</span><a href="#328133" title="DependencyAnalysis.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; DependencyAnalysis.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27078" title="=&gt; Boolean">isPackage</a>)
              <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> (<span title="=&gt; Boolean">!</span><a href="#328133" title="DependencyAnalysis.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; DependencyAnalysis.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27155" title="(mask: Long)Boolean">hasFlag</a>(Flags.<span title="Long(1048576L)">JAVA</span>))
              &amp;&amp; (<span title="(x$1: Boolean)Boolean">(</span><a href="#328133" title="DependencyAnalysis.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; DependencyAnalysis.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27236" title="(x$1: AnyRef)Boolean" id="6611">sourceFile</a> eq <span title="Null(null)" class="keyword">null</span>)
                  || (<a href="#328133" title="DependencyAnalysis.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; DependencyAnalysis.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27236" title="=&gt; scala.tools.nsc.io.AbstractFile">sourceFile</a>.<a href="../io/AbstractFile.scala.html#51637" title="(x$1: AnyRef)Boolean">path</a> != <a href="#328000" title="scala.tools.nsc.io.AbstractFile">file</a>.<a href="../io/AbstractFile.scala.html#51637" title="=&gt; String">path</a>))) {
            <a href="#167040" title="(kv: (scala.tools.nsc.io.AbstractFile, scala.collection.immutable.Set[String]))DependencyAnalysis.this.references.type">references</a> += <a href="#328000" title="(y: scala.collection.immutable.Set[String])(scala.tools.nsc.io.AbstractFile, scala.collection.immutable.Set[String])">file</a> -&gt; (<a href="#167040" title="(key: scala.tools.nsc.io.AbstractFile)scala.collection.immutable.Set[String]" id="44676">references</a><a title="(elem: String)scala.collection.immutable.Set[String]" id="39566">(</a><a href="#328000" title="scala.tools.nsc.io.AbstractFile">file</a>) + <a href="#328133" title="DependencyAnalysis.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; DependencyAnalysis.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27248" title="=&gt; String">fullNameString</a>)
          }
          <a href="#328133" title="DependencyAnalysis.this.global.Tree">tree</a> <span title="Unit" class="keyword">match</span> {
            <span title="Unit" class="keyword">case</span> <a title="DependencyAnalysis.this.global.ClassDef" id="328250">cdef</a>: <a href="../ast/Trees.scala.html#26768" title="DependencyAnalysis.this.global.ClassDef">ClassDef</a> <span class="keyword">if</span> <span title="(x$1: Boolean)Boolean">!</span><a href="#328250" title="DependencyAnalysis.this.global.ClassDef">cdef</a>.<a href="../ast/Trees.scala.html#48738" title="=&gt; DependencyAnalysis.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27093" title="=&gt; Boolean">isModuleClass</a> &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#328250" title="DependencyAnalysis.this.global.ClassDef">cdef</a>.<a href="../ast/Trees.scala.html#48738" title="=&gt; DependencyAnalysis.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27155" title="(mask: Long)Boolean">hasFlag</a>(Flags.<span title="Long(16384L)">PACKAGE</span>) =&gt;
              <a href="#328001" title="(x: DependencyAnalysis.this.global.Symbol)buf.type" id="61852">buf</a> += <a href="#328250" title="DependencyAnalysis.this.global.ClassDef">cdef</a>.<a href="../ast/Trees.scala.html#48738" title="=&gt; DependencyAnalysis.this.global.Symbol">symbol</a>
              <span class="keyword">super</span>.<a href="../ast/Trees.scala.html#71109" title="(tree: DependencyAnalysis.this.global.Tree)Unit">traverse</a>(<a href="#328133" title="DependencyAnalysis.this.global.Tree">tree</a>)

            <span title="Unit" class="keyword">case</span> _ =&gt;
              <span class="keyword">super</span>.<a href="../ast/Trees.scala.html#71109" title="(tree: DependencyAnalysis.this.global.Tree)Unit">traverse</a>(<a href="#328133" title="DependencyAnalysis.this.global.Tree">tree</a>)
          }
        }
      }).<a href="../ast/Trees.scala.html#71113" title="(tree: DependencyAnalysis.this.global.Tree)DependencyAnalysis.this.global.Tree">apply</a>(<a href="#327996" title="DependencyAnalysis.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#45669" title="=&gt; DependencyAnalysis.this.global.Tree">body</a>)

      <a href="#167038" title="(key: scala.tools.nsc.io.AbstractFile,value: List[DependencyAnalysis.this.global.Symbol])Unit" id="44752">definitions</a>(<a href="#327996" title="DependencyAnalysis.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#45663" title="=&gt; scala.tools.nsc.util.SourceFile">source</a>.<a href="../util/SourceFile.scala.html#68479" title="=&gt; scala.tools.nsc.io.AbstractFile">file</a>) = <a href="#328001" title="scala.collection.mutable.ListBuffer[DependencyAnalysis.this.global.Symbol]">buf</a>.<a title="=&gt; List[DependencyAnalysis.this.global.Symbol]" id="61864">toList</a>
    }
  }
}

        </pre>
    </body>
</html>