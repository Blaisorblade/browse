<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/dependencies/DependencyAnalysis.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style">
    </head>
    <body>
        <pre>
<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> dependencies;
<span class="keyword">import</span> util.SourceFile;
<span class="keyword">import</span> io.AbstractFile
<span class="keyword">import</span> collection._
<span class="keyword">import</span> symtab.Flags

<span class="keyword">trait</span> <a title="trait DependencyAnalysis extends scala.tools.nsc.SubComponent with scala.tools.nsc.dependencies.Files with ScalaObject" id="21204">DependencyAnalysis</a> <span title="ScalaObject" class="keyword">extends</span> <a href="../SubComponent.scala.html#8259" title="scala.tools.nsc.SubComponent">SubComponent</a> <span class="keyword">with</span> <a href="Files.scala.html#21159" title="scala.tools.nsc.dependencies.Files">Files</a> {
  <span class="keyword">import</span> global._

  <span class="keyword">val</span> <a title="java.lang.String" id="166384">phaseName</a> = <span title="java.lang.String(&quot;dependencyAnalysis&quot;)" class="string">&quot;dependencyAnalysis&quot;</span>;

  <span class="keyword">def</span> <a title="=&gt; Boolean" id="166386">off</a> = <a href="../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../Settings.scala.html#37054" title="=&gt; scala.tools.nsc.Settings.ChoiceSetting">make</a>.<a href="../Settings.scala.html#37759" title="(x$1: AnyRef)Boolean">value</a> == <span title="java.lang.String(&quot;all&quot;)" class="string">&quot;all&quot;</span>

  <span class="keyword">def</span> <a title="(prev: scala.tools.nsc.Phase)DependencyAnalysis.this.AnalysisPhase" id="166387">newPhase</a>(<a title="scala.tools.nsc.Phase" id="326843">prev</a> : <a href="../Phase.scala.html#8862" title="scala.tools.nsc.Phase">Phase</a>) = <span title="DependencyAnalysis.this.AnalysisPhase" class="keyword">new</span> <a href="#166409" title="DependencyAnalysis.this.AnalysisPhase">AnalysisPhase</a>(<a href="#326843" title="scala.tools.nsc.Phase">prev</a>) 

  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Int" id="166389">maxDepth</a> = <a href="../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../Settings.scala.html#37054" title="=&gt; scala.tools.nsc.Settings.ChoiceSetting">make</a>.<a href="../Settings.scala.html#37759" title="=&gt; java.lang.String">value</a> <span title="Int" class="keyword">match</span> {
    <span title="Int(0)" class="keyword">case</span> <span title="java.lang.String(&quot;changed&quot;)" class="string">&quot;changed&quot;</span> =&gt; <span title="Int(0)" class="int">0</span> 
    <span title="Int(2147483647)" class="keyword">case</span> <span title="java.lang.String(&quot;transitive&quot;)" class="string">&quot;transitive&quot;</span> =&gt; Int.<span title="Int(2147483647)">MaxValue</span>
    <span title="Int(1)" class="keyword">case</span> <span title="java.lang.String(&quot;immediate&quot;)" class="string">&quot;immediate&quot;</span> =&gt; <span title="Int(1)" class="int">1</span> 
  }

  <span class="keyword">def</span> <a title="(src: scala.tools.nsc.io.AbstractFile,name: String)scala.tools.nsc.io.AbstractFile" id="166390">nameToFile</a>(<a title="scala.tools.nsc.io.AbstractFile" id="326853">src</a>: <a href="../io/AbstractFile.scala.html#20548" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a>, <a title="String" id="326854">name</a> : <span title="String">String</span>) = 
    <a href="../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../Settings.scala.html#37215" title="=&gt; scala.tools.nsc.Settings.OutputDirs">outputDirs</a>.<a href="../Settings.scala.html#37785" title="(src: scala.tools.nsc.io.AbstractFile)scala.tools.nsc.io.AbstractFile">outputDirFor</a>(<a href="#326853" title="scala.tools.nsc.io.AbstractFile">src</a>)
      .<a href="../io/AbstractFile.scala.html#51402" title="(path: String,directory: Boolean)scala.tools.nsc.io.AbstractFile">lookupPathUnchecked</a>(<a href="#326854" title="String">name</a>.<a title="()java.lang.String" id="7052">toString</a>.<a title="(x$1: java.lang.CharSequence,x$2: java.lang.CharSequence)java.lang.String" id="7037">replace</a><span title="(x$1: Any)java.lang.String">(</span><span title="java.lang.String(&quot;.&quot;)" class="string">&quot;.&quot;</span>, java.io.<a title="object java.io.File" id="3808">File</a>.<a title="java.lang.String" id="35164">separator</a>) + <span title="java.lang.String(&quot;.class&quot;)" class="string">&quot;.class&quot;</span>, <span title="Boolean(false)" class="keyword">false</span>)

  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Option[scala.tools.nsc.io.AbstractFile]" id="166392">depFile</a>: <span title="Option[scala.tools.nsc.io.AbstractFile]">Option</span>[AbstractFile] = <span title="object None">None</span>

  <span class="keyword">def</span> <a title="(file: scala.tools.nsc.io.AbstractFile)Unit" id="166394">dependenciesFile_=</a>(<a title="scala.tools.nsc.io.AbstractFile" id="167870">file</a>: <a href="../io/AbstractFile.scala.html#20548" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a>) {
    <a title="(assertion: Boolean)Unit" id="7874">assert</a>(<a href="#167870" title="(x$1: AnyRef)Boolean">file</a> ne <span title="Null(null)" class="keyword">null</span>)
    <a href="#166392" title="(x$1: Option[scala.tools.nsc.io.AbstractFile])Unit">depFile</a> = <a title="(x: scala.tools.nsc.io.AbstractFile)Some[scala.tools.nsc.io.AbstractFile]" id="258">Some</a>(<a href="#167870" title="scala.tools.nsc.io.AbstractFile">file</a>)
  }

  <span class="keyword">def</span> <a title="=&gt; Option[scala.tools.nsc.io.AbstractFile]" id="166395">dependenciesFile</a>: <span title="Option[scala.tools.nsc.io.AbstractFile]">Option</span>[AbstractFile] = <a href="#166392" title="=&gt; Option[scala.tools.nsc.io.AbstractFile]">depFile</a>

  <span class="keyword">def</span> <a title="=&gt; java.lang.String" id="166396">classpath</a> = <a href="../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../Settings.scala.html#37036" title="=&gt; scala.tools.nsc.Settings.StringSetting">classpath</a>.<a href="../Settings.scala.html#37759" title="=&gt; java.lang.String">value</a>
  <span class="keyword">def</span> <a title="=&gt; DependencyAnalysis.this.FileDependencies" id="166397">newDeps</a> = <span title="DependencyAnalysis.this.FileDependencies" class="keyword">new</span> <a href="Files.scala.html#166434" title="DependencyAnalysis.this.FileDependencies">FileDependencies</a>(<a href="#166396" title="=&gt; java.lang.String">classpath</a>);

  <span class="keyword">var</span> <a title="DependencyAnalysis.this.FileDependencies" id="166399">dependencies</a> = <a href="#166397" title="=&gt; DependencyAnalysis.this.FileDependencies">newDeps</a>

  <span class="keyword">def</span> <a title="=&gt; scala.collection.Set[scala.tools.nsc.io.AbstractFile]" id="166401">managedFiles</a> = <a href="#166399" title="=&gt; DependencyAnalysis.this.FileDependencies">dependencies</a>.<a href="Files.scala.html#167029" title="=&gt; DependencyAnalysis.this.FileDependencies#Tracker">dependencies</a>.<a title="=&gt; scala.collection.Set[scala.tools.nsc.io.AbstractFile]" id="44450">keySet</a>
  
  /** Top level definitions per source file. */
  <span class="keyword">val</span> <a title="scala.collection.mutable.Map[scala.tools.nsc.io.AbstractFile,List[DependencyAnalysis.this.global.Symbol]]" id="166402">definitions</a>: mutable.<span title="scala.collection.mutable.Map[scala.tools.nsc.io.AbstractFile,List[DependencyAnalysis.this.global.Symbol]]">Map</span>[AbstractFile, List[Symbol]] =
    <a href="#326887" title="scala.collection.mutable.HashMap[scala.tools.nsc.io.AbstractFile,List[DependencyAnalysis.this.global.Symbol]]{ ... }" class="keyword">new</a> <a title="anonymous class $anon extends scala.collection.mutable.HashMap[scala.tools.nsc.io.AbstractFile,List[DependencyAnalysis.this.global.Symbol]]" id="326887">mutable</a>.<span title="scala.collection.mutable.HashMap[scala.tools.nsc.io.AbstractFile,List[DependencyAnalysis.this.global.Symbol]]">HashMap</span>[AbstractFile, List[Symbol]] {
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="(f: scala.tools.nsc.io.AbstractFile)object Nil" id="326889">default</a>(<a title="scala.tools.nsc.io.AbstractFile" id="326893">f</a> : <a href="../io/AbstractFile.scala.html#20548" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a>) = <span title="object Nil">Nil</span>
  }
  
  /** External references used by source file. */
  <span class="keyword">val</span> <a title="scala.collection.mutable.Map[scala.tools.nsc.io.AbstractFile,scala.collection.immutable.Set[String]]" id="166404">references</a>: mutable.<span title="scala.collection.mutable.Map[scala.tools.nsc.io.AbstractFile,scala.collection.immutable.Set[String]]">Map</span>[AbstractFile, immutable.Set[String]] = 
    <a href="#326899" title="scala.collection.mutable.HashMap[scala.tools.nsc.io.AbstractFile,scala.collection.immutable.Set[String]]{ ... }" class="keyword">new</a> <a title="anonymous class $anon extends scala.collection.mutable.HashMap[scala.tools.nsc.io.AbstractFile,scala.collection.immutable.Set[String]]" id="326899">mutable</a>.<span title="scala.collection.mutable.HashMap[scala.tools.nsc.io.AbstractFile,scala.collection.immutable.Set[String]]">HashMap</span>[AbstractFile, immutable.Set[String]] {
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="(f: scala.tools.nsc.io.AbstractFile)scala.collection.immutable.Set[String]" id="326901">default</a>(<a title="scala.tools.nsc.io.AbstractFile" id="326905">f</a> : <a href="../io/AbstractFile.scala.html#20548" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a>) = immutable.<a title="(args: String*)scala.collection.immutable.Set[String]" id="24505">Set</a>()
    }

  /** Write dependencies to the current file. */
  <span class="keyword">def</span> <a title="(fromFile: (scala.tools.nsc.io.AbstractFile) =&gt; String)Unit" id="166406">saveDependencies</a>(<a title="(scala.tools.nsc.io.AbstractFile) =&gt; String" id="167874">fromFile</a>: AbstractFile =&gt; String) = 
    <span title="Unit" class="keyword">if</span>(<a href="#166395" title="=&gt; Option[scala.tools.nsc.io.AbstractFile]">dependenciesFile</a>.<a title="=&gt; Boolean" id="35042">isDefined</a>)
      <a href="#166399" title="=&gt; DependencyAnalysis.this.FileDependencies">dependencies</a>.<a href="Files.scala.html#167041" title="(file: scala.tools.nsc.io.AbstractFile,fromFile: (scala.tools.nsc.io.AbstractFile) =&gt; String)Unit">writeTo</a>(<a href="#166395" title="=&gt; Option[scala.tools.nsc.io.AbstractFile]">dependenciesFile</a>.<a title="=&gt; scala.tools.nsc.io.AbstractFile" id="35043">get</a>, <a href="#167874" title="(scala.tools.nsc.io.AbstractFile) =&gt; String">fromFile</a>)

  /** Load dependencies from the given file and save the file reference for
   *  future saves.
   */
  <span class="keyword">def</span> <a title="(f: scala.tools.nsc.io.AbstractFile,toFile: (String) =&gt; scala.tools.nsc.io.AbstractFile)Boolean" id="166407">loadFrom</a>(<a title="scala.tools.nsc.io.AbstractFile" id="167721">f</a>: <a href="../io/AbstractFile.scala.html#20548" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a>, <a title="(String) =&gt; scala.tools.nsc.io.AbstractFile" id="167722">toFile</a>: String =&gt; AbstractFile) : <a title="Boolean" id="1951">Boolean</a> = {
    <a href="#166394" title="(file: scala.tools.nsc.io.AbstractFile)Unit">dependenciesFile</a> = <a href="#167721" title="scala.tools.nsc.io.AbstractFile">f</a>
    <a href="Files.scala.html#166435" title="object DependencyAnalysis.this.FileDependencies">FileDependencies</a>.<a href="Files.scala.html#173514" title="(file: scala.tools.nsc.io.AbstractFile,toFile: (String) =&gt; scala.tools.nsc.io.AbstractFile)Option[DependencyAnalysis.this.FileDependencies]">readFrom</a>(<a href="#167721" title="scala.tools.nsc.io.AbstractFile">f</a>, <a href="#167722" title="(String) =&gt; scala.tools.nsc.io.AbstractFile">toFile</a>) <span title="Boolean" class="keyword">match</span> {
      <span title="Boolean" class="keyword">case</span> <a id="1">Some</a>(<a title="DependencyAnalysis.this.FileDependencies" id="326921">fd</a>) =&gt;      
        <span class="keyword">val</span> <a title="Boolean" id="326924">success</a> = <a href="#326921" title="DependencyAnalysis.this.FileDependencies">fd</a>.<a href="Files.scala.html#167025" title="(x$1: AnyRef)Boolean">classpath</a> == <a href="#166396" title="=&gt; java.lang.String">classpath</a>
        <a href="#166399" title="(x$1: DependencyAnalysis.this.FileDependencies)Unit">dependencies</a> = <span title="DependencyAnalysis.this.FileDependencies" class="keyword">if</span> (<a href="#326924" title="Boolean">success</a>) <a href="#326921" title="DependencyAnalysis.this.FileDependencies">fd</a> <span class="keyword">else</span> {
          <span title="Unit" class="keyword">if</span>(<a href="../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../Settings.scala.html#37759" title="=&gt; Boolean">value</a>){
            <span title="(x: Any)Unit">println</span>(<span title="java.lang.String(&quot;Classpath has changed. Nuking dependencies&quot;)" class="string">&quot;Classpath has changed. Nuking dependencies&quot;</span>);
          }
          <a href="#166397" title="=&gt; DependencyAnalysis.this.FileDependencies">newDeps</a>
        }
        
        <a href="#326924" title="Boolean">success</a>
      <span title="Boolean(false)" class="keyword">case</span> <span title="object None">None</span> =&gt; <span title="Boolean(false)" class="keyword">false</span>
    }
  }

  <span class="keyword">def</span> <a title="(files: List[scala.tools.nsc.util.SourceFile])List[scala.tools.nsc.util.SourceFile]" id="166408">filter</a>(<a title="List[scala.tools.nsc.util.SourceFile]" id="326939">files</a> : <span title="List[scala.tools.nsc.util.SourceFile]">List</span>[SourceFile]) : <span title="List[scala.tools.nsc.util.SourceFile]">List</span>[SourceFile] = 
    <span title="List[scala.tools.nsc.util.SourceFile]" class="keyword">if</span> (<a href="#166386" title="=&gt; Boolean">off</a>) <a href="#326939" title="List[scala.tools.nsc.util.SourceFile]">files</a>
    <span class="keyword">else</span> <span title="List[scala.tools.nsc.util.SourceFile]" class="keyword">if</span> (<a href="#166399" title="=&gt; DependencyAnalysis.this.FileDependencies">dependencies</a>.<a href="Files.scala.html#167033" title="=&gt; Boolean">isEmpty</a>){
      <span title="Unit" class="keyword">if</span>(<a href="../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../Settings.scala.html#37759" title="=&gt; Boolean">value</a>){
        <span title="(x: Any)Unit">println</span>(<span title="java.lang.String(&quot;No known dependencies. Compiling everything&quot;)" class="string">&quot;No known dependencies. Compiling everything&quot;</span>);
      }
      <a href="#326939" title="List[scala.tools.nsc.util.SourceFile]">files</a>
    }
    <span class="keyword">else</span> {
      <span class="keyword">val</span> <a href="#36432" title="(scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile], scala.collection.Set[scala.tools.nsc.io.AbstractFile])" id="1155">(</a><a href="#326947" title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]" id="36432">direct</a>, <a href="#326947" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]" id="36434">indirect</a>) = <a href="#166399" title="=&gt; DependencyAnalysis.this.FileDependencies">dependencies</a>.<a href="Files.scala.html#167039" title="(maxDepth: Int)(scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile], scala.collection.Set[scala.tools.nsc.io.AbstractFile])">invalidatedFiles</a><a title="(scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile], scala.collection.Set[scala.tools.nsc.io.AbstractFile]) @unchecked" id="1154">(</a><a href="#166388" title="=&gt; Int">maxDepth</a>);  
      <span class="keyword">val</span> <a title="List[scala.tools.nsc.util.SourceFile]" id="326950">filtered</a> = <a href="#326939" title="List[scala.tools.nsc.util.SourceFile]">files</a>.<span title="(p: (scala.tools.nsc.util.SourceFile) =&gt; Boolean)List[scala.tools.nsc.util.SourceFile]">filter</span>(<a title="scala.tools.nsc.util.SourceFile" id="326971">x</a> =&gt; {
        <span class="keyword">val</span> <a title="scala.tools.nsc.io.AbstractFile" id="326972">f</a> = <a href="#326971" title="scala.tools.nsc.util.SourceFile">x</a>.<a href="../util/SourceFile.scala.html#68207" title="=&gt; scala.tools.nsc.io.AbstractFile">file</a>.<a href="../io/AbstractFile.scala.html#51385" title="=&gt; scala.tools.nsc.io.AbstractFile">absolute</a>
        <a href="#36432" title="(elem: scala.tools.nsc.io.AbstractFile)Boolean">direct</a><span title="(x$1: Boolean)Boolean">(</span><a href="#326972" title="scala.tools.nsc.io.AbstractFile">f</a>) <span title="(x$1: Boolean)Boolean">||</span> <a href="#36434" title="(elem: scala.tools.nsc.io.AbstractFile)Boolean">indirect</a>(<a href="#326972" title="scala.tools.nsc.io.AbstractFile">f</a>) || <span title="=&gt; Boolean">!</span><a href="#166399" title="=&gt; DependencyAnalysis.this.FileDependencies">dependencies</a>.<a href="Files.scala.html#167038" title="(f: scala.tools.nsc.io.AbstractFile)Boolean">containsFile</a>(<a href="#326972" title="scala.tools.nsc.io.AbstractFile">f</a>);
      })
      <a href="#326950" title="List[scala.tools.nsc.util.SourceFile]">filtered</a> <span title="Unit" class="keyword">match</span> {
        <span title="Unit" class="keyword">case</span> <span title="object Nil">Nil</span> =&gt; <span title="(x: Any)Unit">println</span>(<span title="java.lang.String(&quot;No changes to recompile&quot;)" class="string">&quot;No changes to recompile&quot;</span>);
        <span title="Unit" class="keyword">case</span> <a title="List[scala.tools.nsc.util.SourceFile]" id="327013">x</a> =&gt; <span title="(x: Any)Unit">println</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Recompiling &quot;</span> + (
          <span title="Any" class="keyword">if</span>(<a href="../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../Settings.scala.html#37759" title="=&gt; Boolean">value</a>) <a href="#327013" title="List[scala.tools.nsc.util.SourceFile]">x</a>.<a title="(sep: String)String" id="25364">mkString</a>(<span title="java.lang.String(&quot;, &quot;)" class="string">&quot;, &quot;</span>)
          <span class="keyword">else</span> <a href="#327013" title="List[scala.tools.nsc.util.SourceFile]">x</a>.<a title="(x$1: java.lang.String)java.lang.String" id="28928">length</a> + <span title="java.lang.String(&quot; files&quot;)" class="string">&quot; files&quot;</span>)
        )
      }
      <a href="#326950" title="List[scala.tools.nsc.util.SourceFile]">filtered</a>
    }

  <span class="keyword">class</span> <a title="class AnalysisPhase extends DependencyAnalysis.this.StdPhase with ScalaObject" id="166409">AnalysisPhase</a><span title="ScalaObject">(</span><a title="scala.tools.nsc.Phase" id="326850">prev</a> : <a href="../Phase.scala.html#8862" title="scala.tools.nsc.Phase">Phase</a>) <span class="keyword">extends</span> <a href="../SubComponent.scala.html#39640" title="DependencyAnalysis.this.StdPhase">StdPhase</a>(<a href="#326850" title="scala.tools.nsc.Phase">prev</a>){
    <span class="keyword">def</span> <a title="(unit: DependencyAnalysis.this.global.CompilationUnit)Unit" id="326849">apply</a>(<a title="DependencyAnalysis.this.global.CompilationUnit" id="327036">unit</a> : global.<a href="../CompilationUnits.scala.html#39196" title="DependencyAnalysis.this.global.CompilationUnit">CompilationUnit</a>) { 
      <span class="keyword">val</span> <a title="java.io.File" id="327039">f</a> = <a href="#327036" title="DependencyAnalysis.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#45431" title="=&gt; scala.tools.nsc.util.SourceFile">source</a>.<a href="../util/SourceFile.scala.html#68207" title="=&gt; scala.tools.nsc.io.AbstractFile">file</a>.<a href="../io/AbstractFile.scala.html#51387" title="=&gt; java.io.File">file</a>;
      // When we're passed strings by the interpreter 
      // they  have no source file. We simply ignore this case
      // as irrelevant to dependency analysis.
      <span title="Unit" class="keyword">if</span> (<a href="#327039" title="(x$1: AnyRef)Boolean">f</a> != <span title="Null(null)" class="keyword">null</span>){
        <span class="keyword">val</span> <a title="scala.tools.nsc.io.AbstractFile" id="327048">source</a>: <a href="../io/AbstractFile.scala.html#20548" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a> = <a href="#327036" title="DependencyAnalysis.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#45431" title="=&gt; scala.tools.nsc.util.SourceFile">source</a>.<a href="../util/SourceFile.scala.html#68207" title="=&gt; scala.tools.nsc.io.AbstractFile">file</a>;
        <span class="keyword">for</span> (<a title="DependencyAnalysis.this.global.icodes.IClass" id="327065">d</a> &lt;- <a href="#327036" title="DependencyAnalysis.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#45453" title="(f: (DependencyAnalysis.this.global.icodes.IClass) =&gt; scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile])Unit">icode</a>){
          <span class="keyword">val</span> <a title="java.lang.String" id="327066">name</a> = <a href="#327065" title="DependencyAnalysis.this.global.icodes.IClass">d</a>.<a href="../backend/icode/Members.scala.html#66669" title="=&gt; DependencyAnalysis.this.global.icodes.global.Symbol">symbol</a> <span title="java.lang.String" class="keyword">match</span> {
            <span title="java.lang.String" class="keyword">case</span> _ : <a href="../symtab/Symbols.scala.html#26133" title="DependencyAnalysis.this.global.ModuleClassSymbol">ModuleClassSymbol</a> =&gt; <a href="#327065" title="DependencyAnalysis.this.global.icodes.IClass">d</a>.<a href="../backend/icode/Members.scala.html#66687" title="(x$1: Any)java.lang.String">toString</a>+<span title="java.lang.String(&quot;$&quot;)" class="string">&quot;$&quot;</span>
            <span title="String" class="keyword">case</span> _ =&gt; <a href="#327065" title="DependencyAnalysis.this.global.icodes.IClass">d</a>.<a href="../backend/icode/Members.scala.html#66687" title="()String">toString</a>
          }
          <a href="#166399" title="=&gt; DependencyAnalysis.this.FileDependencies">dependencies</a>.<a href="Files.scala.html#167034" title="(source: scala.tools.nsc.io.AbstractFile,result: scala.tools.nsc.io.AbstractFile)scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]">emits</a>(<a href="#327048" title="scala.tools.nsc.io.AbstractFile">source</a>, <a href="#166390" title="(src: scala.tools.nsc.io.AbstractFile,name: String)scala.tools.nsc.io.AbstractFile">nameToFile</a>(<a href="#327036" title="DependencyAnalysis.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#45431" title="=&gt; scala.tools.nsc.util.SourceFile">source</a>.<a href="../util/SourceFile.scala.html#68207" title="=&gt; scala.tools.nsc.io.AbstractFile">file</a>, <a href="#327066" title="java.lang.String">name</a>))
        }
       
        <span class="keyword">for</span> (<a title="DependencyAnalysis.this.global.Symbol" id="327113">d</a> &lt;- <a href="#327036" title="DependencyAnalysis.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#45440" title="(f: (DependencyAnalysis.this.global.Symbol) =&gt; scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile])Unit">depends</a>; <span class="keyword">if</span> (<a href="#327113" title="DependencyAnalysis.this.global.Symbol">d</a>.<a href="../symtab/Symbols.scala.html#27077" title="(x$1: AnyRef)Boolean">sourceFile</a> != <span title="Null(null)" class="keyword">null</span>)){
          <a href="#166399" title="=&gt; DependencyAnalysis.this.FileDependencies">dependencies</a>.<a href="Files.scala.html#167035" title="(from: scala.tools.nsc.io.AbstractFile,on: scala.tools.nsc.io.AbstractFile)scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]">depends</a>(<a href="#327048" title="scala.tools.nsc.io.AbstractFile">source</a>, <a href="#327113" title="DependencyAnalysis.this.global.Symbol">d</a>.<a href="../symtab/Symbols.scala.html#27077" title="=&gt; scala.tools.nsc.io.AbstractFile">sourceFile</a>);
        }
      }

      // find all external references in this compilation unit
      <span class="keyword">val</span> <a title="scala.tools.nsc.io.AbstractFile" id="327040">file</a> = <a href="#327036" title="DependencyAnalysis.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#45431" title="=&gt; scala.tools.nsc.util.SourceFile">source</a>.<a href="../util/SourceFile.scala.html#68207" title="=&gt; scala.tools.nsc.io.AbstractFile">file</a>
      <a href="#166404" title="(kv: (scala.tools.nsc.io.AbstractFile, scala.collection.immutable.Set[String]))DependencyAnalysis.this.references.type">references</a> += <a href="#327040" title="(y: scala.collection.immutable.Set[String])(scala.tools.nsc.io.AbstractFile, scala.collection.immutable.Set[String])">file</a> -&gt; immutable.<span title="object scala.collection.immutable.Set">Set</span>.<a title="[A]scala.collection.immutable.Set[A]" id="54344">empty</a><span title="scala.collection.immutable.Set[String]">[</span><span title="String">String</span>]

      <span class="keyword">val</span> <a title="scala.collection.mutable.ListBuffer[DependencyAnalysis.this.global.Symbol]" id="327041">buf</a> = <span title="scala.collection.mutable.ListBuffer[DependencyAnalysis.this.global.Symbol]" class="keyword">new</span> mutable.<a title="scala.collection.mutable.ListBuffer[DependencyAnalysis.this.global.Symbol]" id="24819">ListBuffer</a>[Symbol]

      (<a href="#327167" title="DependencyAnalysis.this.global.Traverser{ ... }" class="keyword">new</a> <a href="../ast/Trees.scala.html#26774" title="anonymous class $anon extends DependencyAnalysis.this.global.Traverser" id="327167">Traverser</a> {
        <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: DependencyAnalysis.this.global.Tree)Unit" id="327169">traverse</a>(<a title="DependencyAnalysis.this.global.Tree" id="327173">tree</a>: <a href="../ast/Trees.scala.html#26593" title="DependencyAnalysis.this.global.Tree">Tree</a>) {
          <span title="Any" class="keyword">if</span> (<span title="(x$1: Boolean)Boolean">(</span><a href="#327173" title="DependencyAnalysis.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="(x$1: AnyRef)Boolean">symbol</a> ne <span title="Null(null)" class="keyword">null</span>)
              <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> (<a href="#327173" title="DependencyAnalysis.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="(x$1: AnyRef)Boolean">symbol</a> != <a href="../symtab/Symbols.scala.html#26134" title="object DependencyAnalysis.this.global.NoSymbol">NoSymbol</a>)
              <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> (<span title="=&gt; Boolean">!</span><a href="#327173" title="DependencyAnalysis.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; DependencyAnalysis.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#26919" title="=&gt; Boolean">isPackage</a>)
              <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> (<span title="=&gt; Boolean">!</span><a href="#327173" title="DependencyAnalysis.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; DependencyAnalysis.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#26996" title="(mask: Long)Boolean">hasFlag</a>(Flags.<span title="Long(1048576L)">JAVA</span>))
              &amp;&amp; (<span title="(x$1: Boolean)Boolean">(</span><a href="#327173" title="DependencyAnalysis.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; DependencyAnalysis.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27077" title="(x$1: AnyRef)Boolean" id="6542">sourceFile</a> eq <span title="Null(null)" class="keyword">null</span>)
                  || (<a href="#327173" title="DependencyAnalysis.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; DependencyAnalysis.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27077" title="=&gt; scala.tools.nsc.io.AbstractFile">sourceFile</a>.<a href="../io/AbstractFile.scala.html#51384" title="(x$1: AnyRef)Boolean">path</a> != <a href="#327040" title="scala.tools.nsc.io.AbstractFile">file</a>.<a href="../io/AbstractFile.scala.html#51384" title="=&gt; String">path</a>))) {
            <a href="#166404" title="(kv: (scala.tools.nsc.io.AbstractFile, scala.collection.immutable.Set[String]))DependencyAnalysis.this.references.type">references</a> += <a href="#327040" title="(y: scala.collection.immutable.Set[String])(scala.tools.nsc.io.AbstractFile, scala.collection.immutable.Set[String])">file</a> -&gt; (<a href="#166404" title="(key: scala.tools.nsc.io.AbstractFile)scala.collection.immutable.Set[String]" id="44444">references</a><a title="(elem: String)scala.collection.immutable.Set[String]" id="39334">(</a><a href="#327040" title="scala.tools.nsc.io.AbstractFile">file</a>) + <a href="#327173" title="DependencyAnalysis.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; DependencyAnalysis.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27089" title="=&gt; String">fullNameString</a>)
          }
          <a href="#327173" title="DependencyAnalysis.this.global.Tree">tree</a> <span title="Unit" class="keyword">match</span> {
            <span title="Unit" class="keyword">case</span> <a title="DependencyAnalysis.this.global.ClassDef" id="327290">cdef</a>: <a href="../ast/Trees.scala.html#26609" title="DependencyAnalysis.this.global.ClassDef">ClassDef</a> <span class="keyword">if</span> <span title="(x$1: Boolean)Boolean">!</span><a href="#327290" title="DependencyAnalysis.this.global.ClassDef">cdef</a>.<a href="../ast/Trees.scala.html#48485" title="=&gt; DependencyAnalysis.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#26934" title="=&gt; Boolean">isModuleClass</a> &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#327290" title="DependencyAnalysis.this.global.ClassDef">cdef</a>.<a href="../ast/Trees.scala.html#48485" title="=&gt; DependencyAnalysis.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#26996" title="(mask: Long)Boolean">hasFlag</a>(Flags.<span title="Long(16384L)">PACKAGE</span>) =&gt;
              <a href="#327041" title="(x: DependencyAnalysis.this.global.Symbol)buf.type" id="61580">buf</a> += <a href="#327290" title="DependencyAnalysis.this.global.ClassDef">cdef</a>.<a href="../ast/Trees.scala.html#48485" title="=&gt; DependencyAnalysis.this.global.Symbol">symbol</a>
              <span class="keyword">super</span>.<a href="../ast/Trees.scala.html#70825" title="(tree: DependencyAnalysis.this.global.Tree)Unit">traverse</a>(<a href="#327173" title="DependencyAnalysis.this.global.Tree">tree</a>)

            <span title="Unit" class="keyword">case</span> _ =&gt;
              <span class="keyword">super</span>.<a href="../ast/Trees.scala.html#70825" title="(tree: DependencyAnalysis.this.global.Tree)Unit">traverse</a>(<a href="#327173" title="DependencyAnalysis.this.global.Tree">tree</a>)
          }
        }
      }).<a href="../ast/Trees.scala.html#70829" title="(tree: DependencyAnalysis.this.global.Tree)DependencyAnalysis.this.global.Tree">apply</a>(<a href="#327036" title="DependencyAnalysis.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#45437" title="=&gt; DependencyAnalysis.this.global.Tree">body</a>)

      <a href="#166402" title="(key: scala.tools.nsc.io.AbstractFile,value: List[DependencyAnalysis.this.global.Symbol])Unit" id="44520">definitions</a>(<a href="#327036" title="DependencyAnalysis.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#45431" title="=&gt; scala.tools.nsc.util.SourceFile">source</a>.<a href="../util/SourceFile.scala.html#68207" title="=&gt; scala.tools.nsc.io.AbstractFile">file</a>) = <a href="#327041" title="scala.collection.mutable.ListBuffer[DependencyAnalysis.this.global.Symbol]">buf</a>.<a title="=&gt; List[DependencyAnalysis.this.global.Symbol]" id="61592">toList</a>
    }
  }
}

        </pre>
    </body>
</html>