<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/dependencies/Files.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style">
    </head>
    <body>
        <pre>
<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> dependencies; 

<span class="keyword">import</span> java.io.{InputStream, OutputStream, PrintStream, InputStreamReader, BufferedReader}
<span class="keyword">import</span> io.{AbstractFile, PlainFile}

<span class="keyword">import</span> scala.collection._;

<span class="keyword">trait</span> <a title="trait Files extends java.lang.Object with ScalaObject" id="21159">Files</a> <span title="ScalaObject">{</span> self : SubComponent =&gt;

  <span class="keyword">class</span> <a title="class FileDependencies extends java.lang.Object with ScalaObject" id="166434">FileDependencies</a><span title="ScalaObject">(</span><span class="keyword">val</span> <a title="String" id="167043">classpath</a> : <span title="String">String</span>) {

    <span class="keyword">class</span> <a title="class Tracker extends scala.collection.mutable.OpenHashMap[scala.tools.nsc.io.AbstractFile,scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]] with ScalaObject" id="167028">Tracker</a> <a title="ScalaObject" id="167742" class="keyword">extends</a> mutable.<a title="scala.collection.mutable.OpenHashMap[scala.tools.nsc.io.AbstractFile,scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]]" id="24897">OpenHashMap</a>[AbstractFile, mutable.Set[AbstractFile]]{
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="(key: scala.tools.nsc.io.AbstractFile)scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]" id="167837">default</a>(<a title="scala.tools.nsc.io.AbstractFile" id="172741">key</a>: <a href="../io/AbstractFile.scala.html#20548" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a>) = {
        <a href="#167028" title="(key: scala.tools.nsc.io.AbstractFile,value: scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile])Unit" id="167790" class="keyword">this</a>(<a href="#172741" title="scala.tools.nsc.io.AbstractFile">key</a>) = <span title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]" class="keyword">new</span> mutable.<span title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]">HashSet</span>[AbstractFile];
        <a href="#167028" title="(key: scala.tools.nsc.io.AbstractFile)scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]" class="keyword">this</a>(<a href="#172741" title="scala.tools.nsc.io.AbstractFile">key</a>);
      }
    }

    <span class="keyword">val</span> <a title="FileDependencies.this.Tracker" id="167029">dependencies</a> = <span title="FileDependencies.this.Tracker" class="keyword">new</span> <a href="#167028" title="FileDependencies.this.Tracker">Tracker</a>
    <span class="keyword">val</span> <a title="FileDependencies.this.Tracker" id="167031">targets</a> =  <span title="FileDependencies.this.Tracker" class="keyword">new</span> <a href="#167028" title="FileDependencies.this.Tracker">Tracker</a>;

    <span class="keyword">def</span> <a title="=&gt; Boolean" id="167033">isEmpty</a> = <a href="#167029" title="=&gt; FileDependencies.this.Tracker">dependencies</a>.<span title="(x$1: Boolean)Boolean">isEmpty</span> &amp;&amp; <a href="#167031" title="=&gt; FileDependencies.this.Tracker">targets</a>.<span title="=&gt; Boolean">isEmpty</span>

    <span class="keyword">def</span> <a title="(source: scala.tools.nsc.io.AbstractFile,result: scala.tools.nsc.io.AbstractFile)scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]" id="167034">emits</a>(<a title="scala.tools.nsc.io.AbstractFile" id="172777">source</a>: <a href="../io/AbstractFile.scala.html#20548" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a>, <a title="scala.tools.nsc.io.AbstractFile" id="172778">result</a>: <a href="../io/AbstractFile.scala.html#20548" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a>) = 
      <a href="#167031" title="(key: scala.tools.nsc.io.AbstractFile)scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]">targets</a><span title="(elem: scala.tools.nsc.io.AbstractFile)scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]">(</span><a href="#172777" title="scala.tools.nsc.io.AbstractFile">source</a>) += <a href="#172778" title="scala.tools.nsc.io.AbstractFile">result</a>;
    <span class="keyword">def</span> <a title="(from: scala.tools.nsc.io.AbstractFile,on: scala.tools.nsc.io.AbstractFile)scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]" id="167035">depends</a>(<a title="scala.tools.nsc.io.AbstractFile" id="172827">from</a>: <a href="../io/AbstractFile.scala.html#20548" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a>, <a title="scala.tools.nsc.io.AbstractFile" id="172828">on</a>: <a href="../io/AbstractFile.scala.html#20548" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a>) = 
      <a href="#167029" title="(key: scala.tools.nsc.io.AbstractFile)scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]">dependencies</a><span title="(elem: scala.tools.nsc.io.AbstractFile)scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]">(</span><a href="#172827" title="scala.tools.nsc.io.AbstractFile">from</a>) += <a href="#172828" title="scala.tools.nsc.io.AbstractFile">on</a>;

    <span class="keyword">def</span> <a title="(file: scala.tools.nsc.io.AbstractFile)FileDependencies.this.Tracker" id="167036">reset</a>(<a title="scala.tools.nsc.io.AbstractFile" id="172873">file</a>: <a href="../io/AbstractFile.scala.html#20548" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a>) = <a href="#167029" title="(key: scala.tools.nsc.io.AbstractFile)FileDependencies.this.dependencies.type" id="167795">dependencies</a> -= <a href="#172873" title="scala.tools.nsc.io.AbstractFile">file</a>;
    
    <span class="keyword">def</span> <a title="()FileDependencies.this.Tracker" id="167037">cleanEmpty</a>() = {
      <a href="#167029" title="=&gt; FileDependencies.this.Tracker">dependencies</a>.<a title="(f: ((scala.tools.nsc.io.AbstractFile, scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile])) =&gt; Unit)Unit" id="167816">foreach</a>(<a href="#172919" title="Unit">{</a><span title="Unit" class="keyword">case</span> (<a title="scala.tools.nsc.io.AbstractFile" id="172922">key</a>, <a title="scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]" id="172923">value</a>) =&gt; <a href="#172923" title="scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]">value</a>.<a title="(p: (scala.tools.nsc.io.AbstractFile) =&gt; Boolean)Unit" id="39467">retain</a>(<a href="#172928" title="scala.tools.nsc.io.AbstractFile">_</a>.<a href="../io/AbstractFile.scala.html#51388" title="=&gt; Boolean">exists</a>)})        
      <a href="#167029" title="=&gt; FileDependencies.this.Tracker">dependencies</a>.<a title="(f: (scala.tools.nsc.io.AbstractFile, scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]) =&gt; Boolean)FileDependencies.this.dependencies.type" id="167823">retain</a>((<a title="scala.tools.nsc.io.AbstractFile" id="172942">key</a>, <a title="scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]" id="172943">value</a>) =&gt; <a href="#172942" title="scala.tools.nsc.io.AbstractFile">key</a>.<a href="../io/AbstractFile.scala.html#51388" title="(x$1: Boolean)Boolean">exists</a> &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#172943" title="scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]">value</a>.<span title="=&gt; Boolean">isEmpty</span>)
    }

    <span class="keyword">def</span> <a title="(f: scala.tools.nsc.io.AbstractFile)Boolean" id="167038">containsFile</a>(<a title="scala.tools.nsc.io.AbstractFile" id="172954">f</a>: <a href="../io/AbstractFile.scala.html#20548" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a>) = <a href="#167031" title="=&gt; FileDependencies.this.Tracker">targets</a>.<a title="(key: scala.tools.nsc.io.AbstractFile)Boolean" id="44446">contains</a>(<a href="#172954" title="scala.tools.nsc.io.AbstractFile">f</a>.<a href="../io/AbstractFile.scala.html#51385" title="=&gt; scala.tools.nsc.io.AbstractFile">absolute</a>)        

    <span class="keyword">def</span> <a title="(maxDepth: Int)(scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile], scala.collection.Set[scala.tools.nsc.io.AbstractFile])" id="167039">invalidatedFiles</a>(<a title="Int" id="172960">maxDepth</a> : <span title="Int">Int</span>) = {
      <span class="keyword">val</span> <a title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]" id="172963">direct</a> = <span title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]" class="keyword">new</span> mutable.<span title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]">HashSet</span>[AbstractFile];

      <span class="keyword">for</span> ((<a title="scala.tools.nsc.io.AbstractFile" id="172996">file</a>, <a title="scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]" id="172997">products</a>) &lt;- <a href="#167031" title="(f: ((scala.tools.nsc.io.AbstractFile, scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile])) =&gt; Unit)Unit">targets</a>) {
        // This looks a bit odd. It may seem like one should invalidate a file
        // if *any* of its dependencies are older than it. The forall is there
        // to deal with the fact that a) Some results might have been orphaned
        // and b) Some files might not need changing. 
        <a href="#172963" title="(elem: scala.tools.nsc.io.AbstractFile,included: Boolean)Unit">direct</a><span title="(x$1: Boolean)Boolean">(</span><a href="#172996" title="scala.tools.nsc.io.AbstractFile">file</a>) ||= <a href="#172997" title="scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]">products</a>.<a title="(p: (scala.tools.nsc.io.AbstractFile) =&gt; Boolean)Boolean" id="25280">forall</a>(<a title="scala.tools.nsc.io.AbstractFile" id="173054">d</a> =&gt; <a href="#173054" title="scala.tools.nsc.io.AbstractFile">d</a>.<a href="../io/AbstractFile.scala.html#51392" title="(x$1: Long)Boolean" id="3192">lastModified</a> &lt; <a href="#172996" title="scala.tools.nsc.io.AbstractFile">file</a>.<a href="../io/AbstractFile.scala.html#51392" title="=&gt; Long">lastModified</a>)
      }

      <span class="keyword">val</span> <a title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]" id="172964">indirect</a> = <a href="#167040" title="(depth: Int,changed: scala.collection.Set[scala.tools.nsc.io.AbstractFile])scala.collection.Set[scala.tools.nsc.io.AbstractFile]">dependentFiles</a>(<a href="#172960" title="Int">maxDepth</a>, <a href="#172963" title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]">direct</a>)

      <span class="keyword">for</span> ((<a title="scala.tools.nsc.io.AbstractFile" id="173144">source</a>, <a title="scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]" id="173145">targets</a>) &lt;- <a href="#167031" title="(f: ((scala.tools.nsc.io.AbstractFile, scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile])) =&gt; scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile])Unit">targets</a>; 
           <span class="keyword">if</span> <a href="#172963" title="(elem: scala.tools.nsc.io.AbstractFile)Boolean">direct</a><span title="(x$1: Boolean)Boolean">(</span><a href="#173144" title="scala.tools.nsc.io.AbstractFile">source</a>) || <a href="#172964" title="(elem: scala.tools.nsc.io.AbstractFile)Boolean">indirect</a>(<a href="#173144" title="scala.tools.nsc.io.AbstractFile">source</a>)){
        <a href="#173145" title="scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]">targets</a>.<span title="(f: (scala.tools.nsc.io.AbstractFile) =&gt; Unit)Unit">foreach</span>(<a href="#173158" title="scala.tools.nsc.io.AbstractFile">_</a>.<a href="../io/AbstractFile.scala.html#51390" title="=&gt; Unit">delete</a>);
        <a href="#173145" title="(elem: scala.tools.nsc.io.AbstractFile)targets.type" id="39465">targets</a> -= <a href="#173144" title="scala.tools.nsc.io.AbstractFile">source</a>;
      }

      <a title="(_1: scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile],_2: scala.collection.Set[scala.tools.nsc.io.AbstractFile])(scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile], scala.collection.Set[scala.tools.nsc.io.AbstractFile])" id="1155">(</a><a href="#172963" title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]">direct</a>, <a href="#172964" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">indirect</a>);
    }

    /** Return the set of files that depend on the given changed files.
     *  It computes the transitive closure up to the given depth.
     */
    <span class="keyword">def</span> <a title="(depth: Int,changed: scala.collection.Set[scala.tools.nsc.io.AbstractFile])scala.collection.Set[scala.tools.nsc.io.AbstractFile]" id="167040">dependentFiles</a>(<a title="Int" id="167052">depth</a>: <span title="Int">Int</span>, <a title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]" id="167053">changed</a>: <span title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">Set</span>[AbstractFile]): <span title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">Set</span>[AbstractFile] = {
      <span class="keyword">val</span> <a title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]" id="173195">indirect</a> = <span title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]" class="keyword">new</span> mutable.<span title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]">HashSet</span>[AbstractFile];
      <span class="keyword">val</span> <a title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]" id="173196">newInvalidations</a> = <span title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]" class="keyword">new</span> mutable.<span title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]">HashSet</span>[AbstractFile];

      <span class="keyword">def</span> <a title="(file: scala.tools.nsc.io.AbstractFile)Boolean" id="173197">invalid</a>(<a title="scala.tools.nsc.io.AbstractFile" id="173203">file</a>: <a href="../io/AbstractFile.scala.html#20548" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a>) = <a href="#173195" title="(elem: scala.tools.nsc.io.AbstractFile)Boolean">indirect</a><span title="(x$1: Boolean)Boolean">(</span><a href="#173203" title="scala.tools.nsc.io.AbstractFile">file</a>) || <a href="#167053" title="(elem: scala.tools.nsc.io.AbstractFile)Boolean">changed</a>(<a href="#173203" title="scala.tools.nsc.io.AbstractFile">file</a>);

      <span class="keyword">def</span> <a title="(i: Int)Unit" id="173198">go</a>(<a title="Int" id="173234">i</a> : <span title="Int">Int</span>) : <span title="Unit">Unit</span> = <span title="Unit" class="keyword">if</span>(<a href="#173234" title="(x$1: Int)Boolean" id="2960">i</a> &gt; <span title="Int(0)" class="int">0</span>){
        <a href="#173196" title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]">newInvalidations</a>.<a title="()Unit" id="39296">clear</a>;
        <span class="keyword">for</span>((<a title="scala.tools.nsc.io.AbstractFile" id="173287">target</a>, <a title="scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]" id="173288">depends</a>) &lt;- <a href="#167029" title="(f: ((scala.tools.nsc.io.AbstractFile, scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile])) =&gt; Unit)Unit">dependencies</a>;
            <span class="keyword">if</span> <span title="=&gt; Boolean">!</span><a href="#173197" title="(file: scala.tools.nsc.io.AbstractFile)Boolean">invalid</a>(<a href="#173287" title="scala.tools.nsc.io.AbstractFile">target</a>);
            <a title="scala.tools.nsc.io.AbstractFile" id="173301">d</a> &lt;- <a href="#173288" title="(f: (scala.tools.nsc.io.AbstractFile) =&gt; Unit)Unit">depends</a>){
          <a href="#173196" title="(elem: scala.tools.nsc.io.AbstractFile,included: Boolean)Unit">newInvalidations</a><span title="(x$1: Boolean)Boolean">(</span><a href="#173287" title="scala.tools.nsc.io.AbstractFile">target</a>) ||= <a href="#173197" title="(file: scala.tools.nsc.io.AbstractFile)Boolean">invalid</a>(<a href="#173301" title="scala.tools.nsc.io.AbstractFile">d</a>)
        }
        <a href="#173195" title="(iter: Traversable[scala.tools.nsc.io.AbstractFile])indirect.type" id="39507">indirect</a> ++= <a href="#173196" title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]">newInvalidations</a>;
        <span title="Unit" class="keyword">if</span>(<span title="=&gt; Boolean">!</span><a href="#173196" title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]">newInvalidations</a>.<span title="=&gt; Boolean">isEmpty</span>) <a href="#173198" title="(i: Int)Unit">go</a>(<a href="#173234" title="(x$1: Int)Int" id="2966">i</a> - <span title="Int(1)" class="int">1</span>);
        <span class="keyword">else</span> <span title="Unit">(</span>)
      }        

      <a href="#173198" title="(i: Int)Unit">go</a>(<a href="#167052" title="Int">depth</a>)

      <a href="#173195" title="(iter: Traversable[scala.tools.nsc.io.AbstractFile])indirect.type" id="39520">indirect</a> --= <a href="#167053" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">changed</a>
    }

    <span class="keyword">def</span> <a title="(file: scala.tools.nsc.io.AbstractFile,fromFile: (scala.tools.nsc.io.AbstractFile) =&gt; String)Unit" id="167041">writeTo</a>(<a title="scala.tools.nsc.io.AbstractFile" id="167882">file</a>: <a href="../io/AbstractFile.scala.html#20548" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a>, <a title="(scala.tools.nsc.io.AbstractFile) =&gt; String" id="167883">fromFile</a> : AbstractFile =&gt; String) {
      <a href="#166437" title="(file: scala.tools.nsc.io.AbstractFile)(f: (java.io.OutputStream) =&gt; Unit)Unit">writeToFile</a>(<a href="#167882" title="scala.tools.nsc.io.AbstractFile">file</a>)(<a title="java.io.OutputStream" id="173413">out</a> =&gt; <a href="#167042" title="(print: java.io.PrintStream,fromFile: (scala.tools.nsc.io.AbstractFile) =&gt; String)Unit">writeTo</a>(<span title="java.io.PrintStream" class="keyword">new</span> <span title="java.io.PrintStream">PrintStream</span>(<a href="#173413" title="java.io.OutputStream">out</a>), <a href="#167883" title="(scala.tools.nsc.io.AbstractFile) =&gt; String">fromFile</a>))
    }
    
    <span class="keyword">def</span> <a title="(print: java.io.PrintStream,fromFile: (scala.tools.nsc.io.AbstractFile) =&gt; String)Unit" id="167042">writeTo</a>(<a title="java.io.PrintStream" id="167879">print</a> : <span title="java.io.PrintStream">PrintStream</span>, <a title="(scala.tools.nsc.io.AbstractFile) =&gt; String" id="167880">fromFile</a> : AbstractFile =&gt; String) : <span title="Unit">Unit</span> = {
      <a href="#167037" title="()FileDependencies.this.Tracker">cleanEmpty</a>();
      <span class="keyword">def</span> <a title="(tracker: FileDependencies.this.Tracker)Unit" id="173431">emit</a>(<a title="FileDependencies.this.Tracker" id="173434">tracker</a> : <a href="#167028" title="FileDependencies.this.Tracker">Tracker</a>){
        <span class="keyword">for</span> ((<a title="scala.tools.nsc.io.AbstractFile" id="173464">f</a>, <a title="scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]" id="173465">ds</a>) &lt;- <a href="#173434" title="(f: ((scala.tools.nsc.io.AbstractFile, scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile])) =&gt; Unit)Unit">tracker</a>;
              <a title="scala.tools.nsc.io.AbstractFile" id="173478">d</a> &lt;- <a href="#173465" title="(f: (scala.tools.nsc.io.AbstractFile) =&gt; Unit)Unit">ds</a>){
          <a href="#167879" title="java.io.PrintStream">print</a>.<span title="(x$1: java.lang.String)Unit">println</span>(<a href="#167880" title="(v1: scala.tools.nsc.io.AbstractFile)String">fromFile</a><span title="(x$1: Any)java.lang.String">(</span><a href="#173464" title="scala.tools.nsc.io.AbstractFile">f</a>) <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; -&gt; &quot;)" class="string">&quot; -&gt; &quot;</span> + <a href="#167880" title="(v1: scala.tools.nsc.io.AbstractFile)String">fromFile</a>(<a href="#173478" title="scala.tools.nsc.io.AbstractFile">d</a>));
        }
      }

      <a href="#167879" title="java.io.PrintStream">print</a>.<span title="(x$1: java.lang.String)Unit">println</span>(<a href="#167043" title="=&gt; String">classpath</a>);
      <a href="#167879" title="java.io.PrintStream">print</a>.<span title="(x$1: java.lang.String)Unit">println</span>(<a href="#166435" title="object Files.this.FileDependencies">FileDependencies</a>.<a href="#173512" title="=&gt; java.lang.String">Separator</a>)
      <a href="#173431" title="(tracker: FileDependencies.this.Tracker)Unit">emit</a>(<a href="#167029" title="=&gt; FileDependencies.this.Tracker">dependencies</a>);
      <a href="#167879" title="java.io.PrintStream">print</a>.<span title="(x$1: java.lang.String)Unit">println</span>(<a href="#166435" title="object Files.this.FileDependencies">FileDependencies</a>.<a href="#173512" title="=&gt; java.lang.String">Separator</a>)
      <a href="#173431" title="(tracker: FileDependencies.this.Tracker)Unit">emit</a>(<a href="#167031" title="=&gt; FileDependencies.this.Tracker">targets</a>);

    }
  }

  <span class="keyword">object</span> <a title="object Files.this.FileDependencies" id="166435">FileDependencies</a><span title="ScalaObject">{</span>
    <span class="keyword">val</span> <a title="java.lang.String" id="173512">Separator</a> = <span title="java.lang.String(&quot;-------&quot;)" class="string">&quot;-------&quot;</span>;

    <span class="keyword">def</span> <a title="(file: scala.tools.nsc.io.AbstractFile,toFile: (String) =&gt; scala.tools.nsc.io.AbstractFile)Option[Files.this.FileDependencies]" id="173514">readFrom</a>(<a title="scala.tools.nsc.io.AbstractFile" id="173530">file</a>: <a href="../io/AbstractFile.scala.html#20548" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a>, <a title="(String) =&gt; scala.tools.nsc.io.AbstractFile" id="173531">toFile</a> : String =&gt; AbstractFile): <a title="Option[Files.this.FileDependencies]" id="782">Option</a>[FileDependencies] = <a href="#166440" title="(file: scala.tools.nsc.io.AbstractFile)(f: (java.io.InputStream) =&gt; Some[Files.this.FileDependencies])Some[Files.this.FileDependencies]">readFromFile</a>(<a href="#173530" title="scala.tools.nsc.io.AbstractFile">file</a>) { <a title="java.io.InputStream" id="173544">in</a> =&gt; 
      <span class="keyword">val</span> <a title="java.io.BufferedReader" id="173545">reader</a> = <a title="(x$1: java.io.Reader)java.io.BufferedReader" id="38840" class="keyword">new</a> <a title="java.io.BufferedReader" id="3669">BufferedReader</a>(<span title="java.io.InputStreamReader" class="keyword">new</span> <a title="java.io.InputStreamReader" id="3888">InputStreamReader</a>(<a href="#173544" title="java.io.InputStream">in</a>))
      <span class="keyword">val</span> <a title="Files.this.FileDependencies" id="173546">it</a> = <span title="Files.this.FileDependencies" class="keyword">new</span> <a href="#166434" title="Files.this.FileDependencies">FileDependencies</a>(<a href="#173545" title="java.io.BufferedReader">reader</a>.<span title="()java.lang.String">readLine</span>)
      <a href="#173545" title="java.io.BufferedReader">reader</a>.<span title="()java.lang.String">readLine</span>
      <span class="keyword">var</span> <a title="String" id="173547">line</a> : <span title="String">String</span> = <span title="Null(null)" class="keyword">null</span>
      <span title="Unit" class="keyword">while</span> ({<a href="#173547" title="String">line</a> = <a href="#173545" title="java.io.BufferedReader">reader</a>.<span title="()java.lang.String">readLine</span>; <span title="(x$1: Boolean)Boolean">(</span><a href="#173547" title="(x$1: AnyRef)Boolean">line</a> != <span title="Null(null)" class="keyword">null</span>) &amp;&amp; (<a href="#173547" title="(x$1: AnyRef)Boolean">line</a> != <a href="#173512" title="=&gt; java.lang.String">Separator</a>)}){
        <a href="#173547" title="String">line</a>.<span title="(x$1: java.lang.String)Array[java.lang.String]">split</span>(<span title="java.lang.String(&quot; -&gt; &quot;)" class="string">&quot; -&gt; &quot;</span>) <a href="#173548" title="scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]" class="keyword">match</a> {
          <span title="scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]" class="keyword">case</span> <a href="#173589" title="(x: Array[java.lang.String])Some[Array[java.lang.String]]">Array</a>(<a title="java.lang.String" id="173597">from</a>, <a title="java.lang.String" id="173598">on</a>) =&gt; <a href="#173546" title="Files.this.FileDependencies">it</a>.<a href="#167035" title="(from: scala.tools.nsc.io.AbstractFile,on: scala.tools.nsc.io.AbstractFile)scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]">depends</a>(<a href="#173531" title="(v1: String)scala.tools.nsc.io.AbstractFile">toFile</a>(<a href="#173597" title="java.lang.String">from</a>), <a href="#173531" title="(v1: String)scala.tools.nsc.io.AbstractFile">toFile</a>(<a href="#173598" title="java.lang.String">on</a>));
          <span title="Nothing" class="keyword">case</span> <a title="Array[java.lang.String]" id="173608">x</a> =&gt; <a href="../SubComponent.scala.html#39621" title="=&gt; scala.tools.nsc.Global">global</a>.<a href="../Global.scala.html#39062" title="(msg: String)Unit">inform</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Parse error: Unrecognised string &quot;</span> + <a href="#173547" title="String">line</a>); <span title="Nothing" class="keyword">return</span> <span title="object None">None</span>
        }
      }

      <span title="Unit" class="keyword">while</span> ({<a href="#173547" title="String">line</a> = <a href="#173545" title="java.io.BufferedReader">reader</a>.<span title="()java.lang.String">readLine</span>; <span title="(x$1: Boolean)Boolean">(</span><a href="#173547" title="(x$1: AnyRef)Boolean">line</a> != <span title="Null(null)" class="keyword">null</span>) &amp;&amp; (<a href="#173547" title="(x$1: AnyRef)Boolean">line</a> != <a href="#173512" title="=&gt; java.lang.String">Separator</a>)}){
        <a href="#173547" title="String">line</a>.<span title="(x$1: java.lang.String)Array[java.lang.String]">split</span>(<span title="java.lang.String(&quot; -&gt; &quot;)" class="string">&quot; -&gt; &quot;</span>) <a href="#173549" title="scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]" class="keyword">match</a> {
          <span title="scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]" class="keyword">case</span> <a href="#173643" title="(x: Array[java.lang.String])Some[Array[java.lang.String]]">Array</a>(<a title="java.lang.String" id="173651">source</a>, <a title="java.lang.String" id="173652">target</a>) =&gt; <a href="#173546" title="Files.this.FileDependencies">it</a>.<a href="#167034" title="(source: scala.tools.nsc.io.AbstractFile,result: scala.tools.nsc.io.AbstractFile)scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]">emits</a>(<a href="#173531" title="(v1: String)scala.tools.nsc.io.AbstractFile">toFile</a>(<a href="#173651" title="java.lang.String">source</a>), <a href="#173531" title="(v1: String)scala.tools.nsc.io.AbstractFile">toFile</a>(<a href="#173652" title="java.lang.String">target</a>));
          <span title="Nothing" class="keyword">case</span> <a title="Array[java.lang.String]" id="173662">x</a> =&gt; <a href="../SubComponent.scala.html#39621" title="=&gt; scala.tools.nsc.Global">global</a>.<a href="../Global.scala.html#39062" title="(msg: String)Unit">inform</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Parse error: Unrecognised string &quot;</span> + <a href="#173547" title="String">line</a>); <span title="Nothing" class="keyword">return</span> <span title="object None">None</span>
        }
      }

      <a title="(x: Files.this.FileDependencies)Some[Files.this.FileDependencies]" id="258">Some</a>(<a href="#173546" title="Files.this.FileDependencies">it</a>)
    }
  }

  <span class="keyword">def</span> <a title="[T](file: scala.tools.nsc.io.AbstractFile)(f: (java.io.OutputStream) =&gt; T)T" id="166437">writeToFile</a>[<a title="&gt;: Nothing &lt;: Any" id="166439">T</a>](<a title="scala.tools.nsc.io.AbstractFile" id="173402">file</a>: <a href="../io/AbstractFile.scala.html#20548" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a>)(<a title="(java.io.OutputStream) =&gt; T" id="173403">f</a>: OutputStream =&gt; T) : <a href="#166439" title="T">T</a> = {
    <span class="keyword">val</span> <a title="java.io.OutputStream" id="173683">out</a> = <a href="#173402" title="scala.tools.nsc.io.AbstractFile">file</a>.<a href="../io/AbstractFile.scala.html#51394" title="=&gt; java.io.OutputStream">output</a>
    <span class="keyword">try</span> {
      <a href="#173403" title="(v1: java.io.OutputStream)T">f</a>(<a href="#173683" title="java.io.OutputStream">out</a>) 
    } <span class="keyword">finally</span> {
      <a href="#173683" title="java.io.OutputStream">out</a>.<a title="()Unit" id="41318">close</a>
    }
  }

  <span class="keyword">def</span> <a title="[T](file: scala.tools.nsc.io.AbstractFile)(f: (java.io.InputStream) =&gt; T)T" id="166440">readFromFile</a>[<a title="&gt;: Nothing &lt;: Any" id="166442">T</a>](<a title="scala.tools.nsc.io.AbstractFile" id="173533">file</a>: <a href="../io/AbstractFile.scala.html#20548" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a>)(<a title="(java.io.InputStream) =&gt; T" id="173534">f</a>: InputStream =&gt; T) : <a href="#166442" title="T">T</a> = {
    <span class="keyword">val</span> <a title="java.io.InputStream" id="173689">in</a> = <a href="#173533" title="scala.tools.nsc.io.AbstractFile">file</a>.<a href="../io/AbstractFile.scala.html#51393" title="=&gt; java.io.InputStream">input</a>
    <span class="keyword">try</span>{
      <a href="#173534" title="(v1: java.io.InputStream)T">f</a>(<a href="#173689" title="java.io.InputStream">in</a>)
    } <span class="keyword">finally</span> {
      <a href="#173689" title="java.io.InputStream">in</a>.<a title="()Unit" id="83991">close</a>
    }
  }
}

        </pre>
    </body>
</html>