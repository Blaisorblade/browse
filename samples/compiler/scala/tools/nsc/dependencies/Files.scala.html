<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/dependencies/Files.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style">
    </head>
    <body>
        <pre>
<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> dependencies; 

<span class="keyword">import</span> java.io.{InputStream, OutputStream, PrintStream, InputStreamReader, BufferedReader}
<span class="keyword">import</span> io.{AbstractFile, PlainFile}

<span class="keyword">import</span> scala.collection._;

<span class="keyword">trait</span> <a title="trait Files extends java.lang.Object with ScalaObject" id="21301">Files</a> <span title="ScalaObject">{</span> self : SubComponent =&gt;

  <span class="keyword">class</span> <a title="class FileDependencies extends java.lang.Object with ScalaObject" id="167070">FileDependencies</a><span title="ScalaObject">(</span><span class="keyword">val</span> <a title="String" id="167679">classpath</a> : <span title="String">String</span>) {

    <span class="keyword">class</span> <a title="class Tracker extends scala.collection.mutable.OpenHashMap[scala.tools.nsc.io.AbstractFile,scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]] with ScalaObject" id="167664">Tracker</a> <a title="ScalaObject" id="168378" class="keyword">extends</a> mutable.<a title="scala.collection.mutable.OpenHashMap[scala.tools.nsc.io.AbstractFile,scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]]" id="25056">OpenHashMap</a>[AbstractFile, mutable.Set[AbstractFile]]{
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="(key: scala.tools.nsc.io.AbstractFile)scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]" id="168473">default</a>(<a title="scala.tools.nsc.io.AbstractFile" id="173489">key</a>: <a href="../io/AbstractFile.scala.html#20689" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a>) = {
        <a href="#167664" title="(key: scala.tools.nsc.io.AbstractFile,value: scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile])Unit" id="168426" class="keyword">this</a>(<a href="#173489" title="scala.tools.nsc.io.AbstractFile">key</a>) = <span title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]" class="keyword">new</span> mutable.<span title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]">HashSet</span>[AbstractFile];
        <a href="#167664" title="(key: scala.tools.nsc.io.AbstractFile)scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]" class="keyword">this</a>(<a href="#173489" title="scala.tools.nsc.io.AbstractFile">key</a>);
      }
    }

    <span class="keyword">val</span> <a title="FileDependencies.this.Tracker" id="167665">dependencies</a> = <span title="FileDependencies.this.Tracker" class="keyword">new</span> <a href="#167664" title="FileDependencies.this.Tracker">Tracker</a>
    <span class="keyword">val</span> <a title="FileDependencies.this.Tracker" id="167667">targets</a> =  <span title="FileDependencies.this.Tracker" class="keyword">new</span> <a href="#167664" title="FileDependencies.this.Tracker">Tracker</a>;

    <span class="keyword">def</span> <a title="=&gt; Boolean" id="167669">isEmpty</a> = <a href="#167665" title="=&gt; FileDependencies.this.Tracker">dependencies</a>.<span title="(x$1: Boolean)Boolean">isEmpty</span> &amp;&amp; <a href="#167667" title="=&gt; FileDependencies.this.Tracker">targets</a>.<span title="=&gt; Boolean">isEmpty</span>

    <span class="keyword">def</span> <a title="(source: scala.tools.nsc.io.AbstractFile,result: scala.tools.nsc.io.AbstractFile)scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]" id="167670">emits</a>(<a title="scala.tools.nsc.io.AbstractFile" id="173525">source</a>: <a href="../io/AbstractFile.scala.html#20689" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a>, <a title="scala.tools.nsc.io.AbstractFile" id="173526">result</a>: <a href="../io/AbstractFile.scala.html#20689" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a>) = 
      <a href="#167667" title="(key: scala.tools.nsc.io.AbstractFile)scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]">targets</a><span title="(elem: scala.tools.nsc.io.AbstractFile)scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]">(</span><a href="#173525" title="scala.tools.nsc.io.AbstractFile">source</a>) += <a href="#173526" title="scala.tools.nsc.io.AbstractFile">result</a>;
    <span class="keyword">def</span> <a title="(from: scala.tools.nsc.io.AbstractFile,on: scala.tools.nsc.io.AbstractFile)scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]" id="167671">depends</a>(<a title="scala.tools.nsc.io.AbstractFile" id="173575">from</a>: <a href="../io/AbstractFile.scala.html#20689" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a>, <a title="scala.tools.nsc.io.AbstractFile" id="173576">on</a>: <a href="../io/AbstractFile.scala.html#20689" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a>) = 
      <a href="#167665" title="(key: scala.tools.nsc.io.AbstractFile)scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]">dependencies</a><span title="(elem: scala.tools.nsc.io.AbstractFile)scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]">(</span><a href="#173575" title="scala.tools.nsc.io.AbstractFile">from</a>) += <a href="#173576" title="scala.tools.nsc.io.AbstractFile">on</a>;

    <span class="keyword">def</span> <a title="(file: scala.tools.nsc.io.AbstractFile)FileDependencies.this.Tracker" id="167672">reset</a>(<a title="scala.tools.nsc.io.AbstractFile" id="173621">file</a>: <a href="../io/AbstractFile.scala.html#20689" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a>) = <a href="#167665" title="(key: scala.tools.nsc.io.AbstractFile)FileDependencies.this.dependencies.type" id="168431">dependencies</a> -= <a href="#173621" title="scala.tools.nsc.io.AbstractFile">file</a>;
    
    <span class="keyword">def</span> <a title="()FileDependencies.this.Tracker" id="167673">cleanEmpty</a>() = {
      <a href="#167665" title="=&gt; FileDependencies.this.Tracker">dependencies</a>.<a title="(f: ((scala.tools.nsc.io.AbstractFile, scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile])) =&gt; Unit)Unit" id="168452">foreach</a>(<a href="#173667" title="Unit">{</a><span title="Unit" class="keyword">case</span> (<a title="scala.tools.nsc.io.AbstractFile" id="173670">key</a>, <a title="scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]" id="173671">value</a>) =&gt; <a href="#173671" title="scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]">value</a>.<a title="(p: (scala.tools.nsc.io.AbstractFile) =&gt; Boolean)Unit" id="39699">retain</a>(<a href="#173676" title="scala.tools.nsc.io.AbstractFile">_</a>.<a href="../io/AbstractFile.scala.html#51642" title="=&gt; Boolean">exists</a>)})        
      <a href="#167665" title="=&gt; FileDependencies.this.Tracker">dependencies</a>.<a title="(f: (scala.tools.nsc.io.AbstractFile, scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]) =&gt; Boolean)FileDependencies.this.dependencies.type" id="168459">retain</a>((<a title="scala.tools.nsc.io.AbstractFile" id="173690">key</a>, <a title="scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]" id="173691">value</a>) =&gt; <a href="#173690" title="scala.tools.nsc.io.AbstractFile">key</a>.<a href="../io/AbstractFile.scala.html#51642" title="(x$1: Boolean)Boolean">exists</a> &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#173691" title="scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]">value</a>.<span title="=&gt; Boolean">isEmpty</span>)
    }

    <span class="keyword">def</span> <a title="(f: scala.tools.nsc.io.AbstractFile)Boolean" id="167674">containsFile</a>(<a title="scala.tools.nsc.io.AbstractFile" id="173702">f</a>: <a href="../io/AbstractFile.scala.html#20689" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a>) = <a href="#167667" title="=&gt; FileDependencies.this.Tracker">targets</a>.<a title="(key: scala.tools.nsc.io.AbstractFile)Boolean" id="44678">contains</a>(<a href="#173702" title="scala.tools.nsc.io.AbstractFile">f</a>.<a href="../io/AbstractFile.scala.html#51638" title="=&gt; scala.tools.nsc.io.AbstractFile">absolute</a>)        

    <span class="keyword">def</span> <a title="(maxDepth: Int)(scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile], scala.collection.Set[scala.tools.nsc.io.AbstractFile])" id="167675">invalidatedFiles</a>(<a title="Int" id="173708">maxDepth</a> : <span title="Int">Int</span>) = {
      <span class="keyword">val</span> <a title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]" id="173711">direct</a> = <span title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]" class="keyword">new</span> mutable.<span title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]">HashSet</span>[AbstractFile];

      <span class="keyword">for</span> ((<a title="scala.tools.nsc.io.AbstractFile" id="173744">file</a>, <a title="scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]" id="173745">products</a>) &lt;- <a href="#167667" title="(f: ((scala.tools.nsc.io.AbstractFile, scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile])) =&gt; Unit)Unit">targets</a>) {
        // This looks a bit odd. It may seem like one should invalidate a file
        // if *any* of its dependencies are older than it. The forall is there
        // to deal with the fact that a) Some results might have been orphaned
        // and b) Some files might not need changing. 
        <a href="#173711" title="(elem: scala.tools.nsc.io.AbstractFile,included: Boolean)Unit">direct</a><span title="(x$1: Boolean)Boolean">(</span><a href="#173744" title="scala.tools.nsc.io.AbstractFile">file</a>) ||= <a href="#173745" title="scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]">products</a>.<a title="(p: (scala.tools.nsc.io.AbstractFile) =&gt; Boolean)Boolean" id="25439">forall</a>(<a title="scala.tools.nsc.io.AbstractFile" id="173802">d</a> =&gt; <a href="#173802" title="scala.tools.nsc.io.AbstractFile">d</a>.<a href="../io/AbstractFile.scala.html#51646" title="(x$1: Long)Boolean" id="3213">lastModified</a> &lt; <a href="#173744" title="scala.tools.nsc.io.AbstractFile">file</a>.<a href="../io/AbstractFile.scala.html#51646" title="=&gt; Long">lastModified</a>)
      }

      <span class="keyword">val</span> <a title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]" id="173712">indirect</a> = <a href="#167676" title="(depth: Int,changed: scala.collection.Set[scala.tools.nsc.io.AbstractFile])scala.collection.Set[scala.tools.nsc.io.AbstractFile]">dependentFiles</a>(<a href="#173708" title="Int">maxDepth</a>, <a href="#173711" title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]">direct</a>)

      <span class="keyword">for</span> ((<a title="scala.tools.nsc.io.AbstractFile" id="173892">source</a>, <a title="scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]" id="173893">targets</a>) &lt;- <a href="#167667" title="(f: ((scala.tools.nsc.io.AbstractFile, scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile])) =&gt; scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile])Unit">targets</a>; 
           <span class="keyword">if</span> <a href="#173711" title="(elem: scala.tools.nsc.io.AbstractFile)Boolean">direct</a><span title="(x$1: Boolean)Boolean">(</span><a href="#173892" title="scala.tools.nsc.io.AbstractFile">source</a>) || <a href="#173712" title="(elem: scala.tools.nsc.io.AbstractFile)Boolean">indirect</a>(<a href="#173892" title="scala.tools.nsc.io.AbstractFile">source</a>)){
        <a href="#173893" title="scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]">targets</a>.<span title="(f: (scala.tools.nsc.io.AbstractFile) =&gt; Unit)Unit">foreach</span>(<a href="#173906" title="scala.tools.nsc.io.AbstractFile">_</a>.<a href="../io/AbstractFile.scala.html#51644" title="=&gt; Unit">delete</a>);
        <a href="#173893" title="(elem: scala.tools.nsc.io.AbstractFile)targets.type" id="39697">targets</a> -= <a href="#173892" title="scala.tools.nsc.io.AbstractFile">source</a>;
      }

      <a title="(_1: scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile],_2: scala.collection.Set[scala.tools.nsc.io.AbstractFile])(scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile], scala.collection.Set[scala.tools.nsc.io.AbstractFile])" id="1176">(</a><a href="#173711" title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]">direct</a>, <a href="#173712" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">indirect</a>);
    }

    /** Return the set of files that depend on the given changed files.
     *  It computes the transitive closure up to the given depth.
     */
    <span class="keyword">def</span> <a title="(depth: Int,changed: scala.collection.Set[scala.tools.nsc.io.AbstractFile])scala.collection.Set[scala.tools.nsc.io.AbstractFile]" id="167676">dependentFiles</a>(<a title="Int" id="167688">depth</a>: <span title="Int">Int</span>, <a title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]" id="167689">changed</a>: <span title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">Set</span>[AbstractFile]): <span title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">Set</span>[AbstractFile] = {
      <span class="keyword">val</span> <a title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]" id="173943">indirect</a> = <span title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]" class="keyword">new</span> mutable.<span title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]">HashSet</span>[AbstractFile];
      <span class="keyword">val</span> <a title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]" id="173944">newInvalidations</a> = <span title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]" class="keyword">new</span> mutable.<span title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]">HashSet</span>[AbstractFile];

      <span class="keyword">def</span> <a title="(file: scala.tools.nsc.io.AbstractFile)Boolean" id="173945">invalid</a>(<a title="scala.tools.nsc.io.AbstractFile" id="173951">file</a>: <a href="../io/AbstractFile.scala.html#20689" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a>) = <a href="#173943" title="(elem: scala.tools.nsc.io.AbstractFile)Boolean">indirect</a><span title="(x$1: Boolean)Boolean">(</span><a href="#173951" title="scala.tools.nsc.io.AbstractFile">file</a>) || <a href="#167689" title="(elem: scala.tools.nsc.io.AbstractFile)Boolean">changed</a>(<a href="#173951" title="scala.tools.nsc.io.AbstractFile">file</a>);

      <span class="keyword">def</span> <a title="(i: Int)Unit" id="173946">go</a>(<a title="Int" id="173982">i</a> : <span title="Int">Int</span>) : <span title="Unit">Unit</span> = <span title="Unit" class="keyword">if</span>(<a href="#173982" title="(x$1: Int)Boolean" id="2981">i</a> &gt; <span title="Int(0)" class="int">0</span>){
        <a href="#173944" title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]">newInvalidations</a>.<a title="()Unit" id="39528">clear</a>;
        <span class="keyword">for</span>((<a title="scala.tools.nsc.io.AbstractFile" id="174035">target</a>, <a title="scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]" id="174036">depends</a>) &lt;- <a href="#167665" title="(f: ((scala.tools.nsc.io.AbstractFile, scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile])) =&gt; Unit)Unit">dependencies</a>;
            <span class="keyword">if</span> <span title="=&gt; Boolean">!</span><a href="#173945" title="(file: scala.tools.nsc.io.AbstractFile)Boolean">invalid</a>(<a href="#174035" title="scala.tools.nsc.io.AbstractFile">target</a>);
            <a title="scala.tools.nsc.io.AbstractFile" id="174049">d</a> &lt;- <a href="#174036" title="(f: (scala.tools.nsc.io.AbstractFile) =&gt; Unit)Unit">depends</a>){
          <a href="#173944" title="(elem: scala.tools.nsc.io.AbstractFile,included: Boolean)Unit">newInvalidations</a><span title="(x$1: Boolean)Boolean">(</span><a href="#174035" title="scala.tools.nsc.io.AbstractFile">target</a>) ||= <a href="#173945" title="(file: scala.tools.nsc.io.AbstractFile)Boolean">invalid</a>(<a href="#174049" title="scala.tools.nsc.io.AbstractFile">d</a>)
        }
        <a href="#173943" title="(iter: Traversable[scala.tools.nsc.io.AbstractFile])indirect.type" id="39739">indirect</a> ++= <a href="#173944" title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]">newInvalidations</a>;
        <span title="Unit" class="keyword">if</span>(<span title="=&gt; Boolean">!</span><a href="#173944" title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]">newInvalidations</a>.<span title="=&gt; Boolean">isEmpty</span>) <a href="#173946" title="(i: Int)Unit">go</a>(<a href="#173982" title="(x$1: Int)Int" id="2987">i</a> - <span title="Int(1)" class="int">1</span>);
        <span class="keyword">else</span> <span title="Unit">(</span>)
      }        

      <a href="#173946" title="(i: Int)Unit">go</a>(<a href="#167688" title="Int">depth</a>)

      <a href="#173943" title="(iter: Traversable[scala.tools.nsc.io.AbstractFile])indirect.type" id="39752">indirect</a> --= <a href="#167689" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">changed</a>
    }

    <span class="keyword">def</span> <a title="(file: scala.tools.nsc.io.AbstractFile,fromFile: (scala.tools.nsc.io.AbstractFile) =&gt; String)Unit" id="167677">writeTo</a>(<a title="scala.tools.nsc.io.AbstractFile" id="168518">file</a>: <a href="../io/AbstractFile.scala.html#20689" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a>, <a title="(scala.tools.nsc.io.AbstractFile) =&gt; String" id="168519">fromFile</a> : AbstractFile =&gt; String) {
      <a href="#167073" title="(file: scala.tools.nsc.io.AbstractFile)(f: (java.io.OutputStream) =&gt; Unit)Unit">writeToFile</a>(<a href="#168518" title="scala.tools.nsc.io.AbstractFile">file</a>)(<a title="java.io.OutputStream" id="174161">out</a> =&gt; <a href="#167678" title="(print: java.io.PrintStream,fromFile: (scala.tools.nsc.io.AbstractFile) =&gt; String)Unit">writeTo</a>(<span title="java.io.PrintStream" class="keyword">new</span> <span title="java.io.PrintStream">PrintStream</span>(<a href="#174161" title="java.io.OutputStream">out</a>), <a href="#168519" title="(scala.tools.nsc.io.AbstractFile) =&gt; String">fromFile</a>))
    }
    
    <span class="keyword">def</span> <a title="(print: java.io.PrintStream,fromFile: (scala.tools.nsc.io.AbstractFile) =&gt; String)Unit" id="167678">writeTo</a>(<a title="java.io.PrintStream" id="168515">print</a> : <span title="java.io.PrintStream">PrintStream</span>, <a title="(scala.tools.nsc.io.AbstractFile) =&gt; String" id="168516">fromFile</a> : AbstractFile =&gt; String) : <span title="Unit">Unit</span> = {
      <a href="#167673" title="()FileDependencies.this.Tracker">cleanEmpty</a>();
      <span class="keyword">def</span> <a title="(tracker: FileDependencies.this.Tracker)Unit" id="174179">emit</a>(<a title="FileDependencies.this.Tracker" id="174182">tracker</a> : <a href="#167664" title="FileDependencies.this.Tracker">Tracker</a>){
        <span class="keyword">for</span> ((<a title="scala.tools.nsc.io.AbstractFile" id="174212">f</a>, <a title="scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]" id="174213">ds</a>) &lt;- <a href="#174182" title="(f: ((scala.tools.nsc.io.AbstractFile, scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile])) =&gt; Unit)Unit">tracker</a>;
              <a title="scala.tools.nsc.io.AbstractFile" id="174226">d</a> &lt;- <a href="#174213" title="(f: (scala.tools.nsc.io.AbstractFile) =&gt; Unit)Unit">ds</a>){
          <a href="#168515" title="java.io.PrintStream">print</a>.<span title="(x$1: java.lang.String)Unit">println</span>(<a href="#168516" title="(v1: scala.tools.nsc.io.AbstractFile)String">fromFile</a><span title="(x$1: Any)java.lang.String">(</span><a href="#174212" title="scala.tools.nsc.io.AbstractFile">f</a>) <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; -&gt; &quot;)" class="string">&quot; -&gt; &quot;</span> + <a href="#168516" title="(v1: scala.tools.nsc.io.AbstractFile)String">fromFile</a>(<a href="#174226" title="scala.tools.nsc.io.AbstractFile">d</a>));
        }
      }

      <a href="#168515" title="java.io.PrintStream">print</a>.<span title="(x$1: java.lang.String)Unit">println</span>(<a href="#167679" title="=&gt; String">classpath</a>);
      <a href="#168515" title="java.io.PrintStream">print</a>.<span title="(x$1: java.lang.String)Unit">println</span>(<a href="#167071" title="object Files.this.FileDependencies">FileDependencies</a>.<a href="#174260" title="=&gt; java.lang.String">Separator</a>)
      <a href="#174179" title="(tracker: FileDependencies.this.Tracker)Unit">emit</a>(<a href="#167665" title="=&gt; FileDependencies.this.Tracker">dependencies</a>);
      <a href="#168515" title="java.io.PrintStream">print</a>.<span title="(x$1: java.lang.String)Unit">println</span>(<a href="#167071" title="object Files.this.FileDependencies">FileDependencies</a>.<a href="#174260" title="=&gt; java.lang.String">Separator</a>)
      <a href="#174179" title="(tracker: FileDependencies.this.Tracker)Unit">emit</a>(<a href="#167667" title="=&gt; FileDependencies.this.Tracker">targets</a>);

    }
  }

  <span class="keyword">object</span> <a title="object Files.this.FileDependencies" id="167071">FileDependencies</a><span title="ScalaObject">{</span>
    <span class="keyword">val</span> <a title="java.lang.String" id="174260">Separator</a> = <span title="java.lang.String(&quot;-------&quot;)" class="string">&quot;-------&quot;</span>;

    <span class="keyword">def</span> <a title="(file: scala.tools.nsc.io.AbstractFile,toFile: (String) =&gt; scala.tools.nsc.io.AbstractFile)Option[Files.this.FileDependencies]" id="174262">readFrom</a>(<a title="scala.tools.nsc.io.AbstractFile" id="174278">file</a>: <a href="../io/AbstractFile.scala.html#20689" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a>, <a title="(String) =&gt; scala.tools.nsc.io.AbstractFile" id="174279">toFile</a> : String =&gt; AbstractFile): <a title="Option[Files.this.FileDependencies]" id="794">Option</a>[FileDependencies] = <a href="#167076" title="(file: scala.tools.nsc.io.AbstractFile)(f: (java.io.InputStream) =&gt; Some[Files.this.FileDependencies])Some[Files.this.FileDependencies]">readFromFile</a>(<a href="#174278" title="scala.tools.nsc.io.AbstractFile">file</a>) { <a title="java.io.InputStream" id="174292">in</a> =&gt; 
      <span class="keyword">val</span> <a title="java.io.BufferedReader" id="174293">reader</a> = <a title="(x$1: java.io.Reader)java.io.BufferedReader" id="39072" class="keyword">new</a> <a title="java.io.BufferedReader" id="3690">BufferedReader</a>(<span title="java.io.InputStreamReader" class="keyword">new</span> <a title="java.io.InputStreamReader" id="3909">InputStreamReader</a>(<a href="#174292" title="java.io.InputStream">in</a>))
      <span class="keyword">val</span> <a title="Files.this.FileDependencies" id="174294">it</a> = <span title="Files.this.FileDependencies" class="keyword">new</span> <a href="#167070" title="Files.this.FileDependencies">FileDependencies</a>(<a href="#174293" title="java.io.BufferedReader">reader</a>.<span title="()java.lang.String">readLine</span>)
      <a href="#174293" title="java.io.BufferedReader">reader</a>.<span title="()java.lang.String">readLine</span>
      <span class="keyword">var</span> <a title="String" id="174295">line</a> : <span title="String">String</span> = <span title="Null(null)" class="keyword">null</span>
      <span title="Unit" class="keyword">while</span> ({<a href="#174295" title="String">line</a> = <a href="#174293" title="java.io.BufferedReader">reader</a>.<span title="()java.lang.String">readLine</span>; <span title="(x$1: Boolean)Boolean">(</span><a href="#174295" title="(x$1: AnyRef)Boolean">line</a> != <span title="Null(null)" class="keyword">null</span>) &amp;&amp; (<a href="#174295" title="(x$1: AnyRef)Boolean">line</a> != <a href="#174260" title="=&gt; java.lang.String">Separator</a>)}){
        <a href="#174295" title="String">line</a>.<span title="(x$1: java.lang.String)Array[java.lang.String]">split</span>(<span title="java.lang.String(&quot; -&gt; &quot;)" class="string">&quot; -&gt; &quot;</span>) <a href="#174296" title="scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]" class="keyword">match</a> {
          <span title="scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]" class="keyword">case</span> <a href="#174337" title="(x: Array[java.lang.String])Some[Array[java.lang.String]]">Array</a>(<a title="java.lang.String" id="174345">from</a>, <a title="java.lang.String" id="174346">on</a>) =&gt; <a href="#174294" title="Files.this.FileDependencies">it</a>.<a href="#167671" title="(from: scala.tools.nsc.io.AbstractFile,on: scala.tools.nsc.io.AbstractFile)scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]">depends</a>(<a href="#174279" title="(v1: String)scala.tools.nsc.io.AbstractFile">toFile</a>(<a href="#174345" title="java.lang.String">from</a>), <a href="#174279" title="(v1: String)scala.tools.nsc.io.AbstractFile">toFile</a>(<a href="#174346" title="java.lang.String">on</a>));
          <span title="Nothing" class="keyword">case</span> <a title="Array[java.lang.String]" id="174356">x</a> =&gt; <a href="../SubComponent.scala.html#39853" title="=&gt; scala.tools.nsc.Global">global</a>.<a href="../Global.scala.html#39294" title="(msg: String)Unit">inform</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Parse error: Unrecognised string &quot;</span> + <a href="#174295" title="String">line</a>); <span title="Nothing" class="keyword">return</span> <span title="object None">None</span>
        }
      }

      <span title="Unit" class="keyword">while</span> ({<a href="#174295" title="String">line</a> = <a href="#174293" title="java.io.BufferedReader">reader</a>.<span title="()java.lang.String">readLine</span>; <span title="(x$1: Boolean)Boolean">(</span><a href="#174295" title="(x$1: AnyRef)Boolean">line</a> != <span title="Null(null)" class="keyword">null</span>) &amp;&amp; (<a href="#174295" title="(x$1: AnyRef)Boolean">line</a> != <a href="#174260" title="=&gt; java.lang.String">Separator</a>)}){
        <a href="#174295" title="String">line</a>.<span title="(x$1: java.lang.String)Array[java.lang.String]">split</span>(<span title="java.lang.String(&quot; -&gt; &quot;)" class="string">&quot; -&gt; &quot;</span>) <a href="#174297" title="scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]" class="keyword">match</a> {
          <span title="scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]" class="keyword">case</span> <a href="#174391" title="(x: Array[java.lang.String])Some[Array[java.lang.String]]">Array</a>(<a title="java.lang.String" id="174399">source</a>, <a title="java.lang.String" id="174400">target</a>) =&gt; <a href="#174294" title="Files.this.FileDependencies">it</a>.<a href="#167670" title="(source: scala.tools.nsc.io.AbstractFile,result: scala.tools.nsc.io.AbstractFile)scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]">emits</a>(<a href="#174279" title="(v1: String)scala.tools.nsc.io.AbstractFile">toFile</a>(<a href="#174399" title="java.lang.String">source</a>), <a href="#174279" title="(v1: String)scala.tools.nsc.io.AbstractFile">toFile</a>(<a href="#174400" title="java.lang.String">target</a>));
          <span title="Nothing" class="keyword">case</span> <a title="Array[java.lang.String]" id="174410">x</a> =&gt; <a href="../SubComponent.scala.html#39853" title="=&gt; scala.tools.nsc.Global">global</a>.<a href="../Global.scala.html#39294" title="(msg: String)Unit">inform</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Parse error: Unrecognised string &quot;</span> + <a href="#174295" title="String">line</a>); <span title="Nothing" class="keyword">return</span> <span title="object None">None</span>
        }
      }

      <a title="(x: Files.this.FileDependencies)Some[Files.this.FileDependencies]" id="267">Some</a>(<a href="#174294" title="Files.this.FileDependencies">it</a>)
    }
  }

  <span class="keyword">def</span> <a title="[T](file: scala.tools.nsc.io.AbstractFile)(f: (java.io.OutputStream) =&gt; T)T" id="167073">writeToFile</a>[<a title="&gt;: Nothing &lt;: Any" id="167075">T</a>](<a title="scala.tools.nsc.io.AbstractFile" id="174150">file</a>: <a href="../io/AbstractFile.scala.html#20689" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a>)(<a title="(java.io.OutputStream) =&gt; T" id="174151">f</a>: OutputStream =&gt; T) : <a href="#167075" title="T">T</a> = {
    <span class="keyword">val</span> <a title="java.io.OutputStream" id="174431">out</a> = <a href="#174150" title="scala.tools.nsc.io.AbstractFile">file</a>.<a href="../io/AbstractFile.scala.html#51648" title="=&gt; java.io.OutputStream">output</a>
    <span class="keyword">try</span> {
      <a href="#174151" title="(v1: java.io.OutputStream)T">f</a>(<a href="#174431" title="java.io.OutputStream">out</a>) 
    } <span class="keyword">finally</span> {
      <a href="#174431" title="java.io.OutputStream">out</a>.<a title="()Unit" id="41550">close</a>
    }
  }

  <span class="keyword">def</span> <a title="[T](file: scala.tools.nsc.io.AbstractFile)(f: (java.io.InputStream) =&gt; T)T" id="167076">readFromFile</a>[<a title="&gt;: Nothing &lt;: Any" id="167078">T</a>](<a title="scala.tools.nsc.io.AbstractFile" id="174281">file</a>: <a href="../io/AbstractFile.scala.html#20689" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a>)(<a title="(java.io.InputStream) =&gt; T" id="174282">f</a>: InputStream =&gt; T) : <a href="#167078" title="T">T</a> = {
    <span class="keyword">val</span> <a title="java.io.InputStream" id="174437">in</a> = <a href="#174281" title="scala.tools.nsc.io.AbstractFile">file</a>.<a href="../io/AbstractFile.scala.html#51647" title="=&gt; java.io.InputStream">input</a>
    <span class="keyword">try</span>{
      <a href="#174282" title="(v1: java.io.InputStream)T">f</a>(<a href="#174437" title="java.io.InputStream">in</a>)
    } <span class="keyword">finally</span> {
      <a href="#174437" title="java.io.InputStream">in</a>.<a title="()Unit" id="84352">close</a>
    }
  }
}

        </pre>
    </body>
</html>