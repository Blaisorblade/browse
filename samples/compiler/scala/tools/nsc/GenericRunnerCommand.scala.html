<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/GenericRunnerCommand.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style">
    </head>
    <body>
        <pre>
/* NSC -- new Scala compiler
 * Copyright 2007 LAMP/EPFL
 * @author  Lex Spoon
 */

// $Id: GenericRunnerCommand.scala 17288 2009-03-12 18:15:25Z extempore $

<span class="keyword">package</span> scala.tools.nsc

/** A command for ScriptRunner */
<span class="keyword">class</span> <a title="class GenericRunnerCommand extends scala.tools.nsc.CompilerCommand with ScalaObject" id="9453">GenericRunnerCommand</a><a title="ScalaObject" id="959">(</a>
  <a title="List[String]" id="505946">allargs</a>: <span title="List[String]">List</span>[String], 
  <span class="keyword">override</span> <span class="keyword">val</span> <a href="CompilerCommand.scala.html#141974" title="scala.tools.nsc.GenericRunnerSettings" id="505947">settings</a>: <a href="GenericRunnerSettings.scala.html#9339" title="scala.tools.nsc.GenericRunnerSettings">GenericRunnerSettings</a>,
  <a title="(String) =&gt; Unit" id="505948">error</a>: String =&gt; Unit)
<span class="keyword">extends</span> <a href="CompilerCommand.scala.html#8898" title="scala.tools.nsc.CompilerCommand">CompilerCommand</a>(<a href="#505946" title="List[String]">allargs</a>, <a href="#505947" title="scala.tools.nsc.GenericRunnerSettings">settings</a>, <a href="#505948" title="(String) =&gt; Unit">error</a>, <span title="Boolean(false)" class="keyword">false</span>, <span title="Boolean(false)" class="keyword">false</span>)
{
  <span class="keyword">def</span> <a title="(allargs: List[String],error: (String) =&gt; Unit)scala.tools.nsc.GenericRunnerCommand" id="505928" class="keyword">this</a>(<a title="List[String]" id="505956">allargs</a>: <span title="List[String]">List</span>[String], <a title="(String) =&gt; Unit" id="505957">error</a>: String=&gt;Unit) =
    <a href="#9453" title="GenericRunnerCommand.this.type" class="keyword">this</a>(<a href="#505956" title="List[String]">allargs</a>, <span title="scala.tools.nsc.GenericRunnerSettings" class="keyword">new</span> <a href="GenericRunnerSettings.scala.html#9339" title="scala.tools.nsc.GenericRunnerSettings">GenericRunnerSettings</a>(<a href="#505957" title="(String) =&gt; Unit">error</a>), <a href="#505957" title="(String) =&gt; Unit">error</a>)

  <span class="keyword">def</span> <a title="(allargs: List[String])scala.tools.nsc.GenericRunnerCommand" id="505929" class="keyword">this</a>(<a title="List[String]" id="505962">allargs</a>: <span title="List[String]">List</span>[String]) = 
    <a href="#505928" title="(allargs: List[String],error: (String) =&gt; Unit)scala.tools.nsc.GenericRunnerCommand" class="keyword">this</a>(<a href="#505962" title="List[String]">allargs</a>, <a title="String" id="506048">str</a> =&gt; <a title="object Console" id="390">Console</a>.<a title="(x: Any)Unit" id="51323">println</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Error: &quot;</span> + <a href="#506048" title="String">str</a>))

  /** name of the associated compiler command */
  <span class="keyword">val</span> <a title="java.lang.String" id="505930">compCmdName</a> = <span title="java.lang.String(&quot;scalac&quot;)" class="string">&quot;scalac&quot;</span>

  /** What to run.  If it is None, then the interpreter should be started */
  <span class="keyword">var</span> <a title="Option[String]" id="505933">thingToRun</a>: <a title="Option[String]" id="782">Option</a>[String] = <a title="object None" id="465">None</a>

  /** Arguments to pass to the object or script to run */
  <span class="keyword">var</span> <a title="List[String]" id="505936">arguments</a>: <span title="List[String]">List</span>[String] = <a title="object Nil" id="7634">Nil</a>

  <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="()Unit" id="505938">processArguments</a>() {
    <span class="keyword">var</span> <a title="List[String]" id="506059">args</a> = <a href="#505946" title="List[String]">allargs</a>

    <span title="Unit" class="keyword">while</span> (<span title="(x$1: Boolean)Boolean">!</span><a href="#506059" title="List[String]">args</a>.<span title="=&gt; Boolean">isEmpty</span> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> <a href="CompilerCommand.scala.html#142000" title="=&gt; Boolean">ok</a> &amp;&amp; <a href="#506059" title="List[String]">args</a>.<span title="=&gt; String">head</span>.<a title="(x$1: java.lang.String)Boolean" id="6973">startsWith</a>(<span title="java.lang.String(&quot;-&quot;)" class="string">&quot;-&quot;</span>)) <a href="#506060" title="()Unit">{</a>
      <span class="keyword">val</span> <a title="List[String]" id="506071">args0</a> = <a href="#506059" title="List[String]">args</a>
      <a href="#506059" title="List[String]">args</a> = <a href="Settings.scala.html#37218" title="(args: List[String])List[String]">settings</a> parseParams <a href="#506059" title="List[String]">args</a>
      <span title="Unit" class="keyword">if</span> (<a href="#506059" title="(x$1: AnyRef)Boolean" id="6542">args</a> eq <a href="#506071" title="List[String]">args0</a>) {
        <a href="#505948" title="(v1: String)Unit" id="25529">error</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;bad option: '&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#506059" title="List[String]">args</a>.<span title="=&gt; String">head</span> + <span title="java.lang.String(&quot;'&quot;)" class="string">&quot;'&quot;</span>)
        <a href="CompilerCommand.scala.html#142001" title="(x$1: Boolean)Unit">ok</a> = <span title="Boolean(false)" class="keyword">false</span>
      }
    }

    <span title="Unit" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="#506059" title="List[String]">args</a>.<span title="=&gt; Boolean">isEmpty</span>) {
      <a href="#505933" title="(x$1: Option[String])Unit">thingToRun</a> = <a title="(x: String)Some[String]" id="258">Some</a>(<a href="#506059" title="List[String]">args</a>.<span title="=&gt; String">head</span>)
      <a href="#505936" title="(x$1: List[String])Unit">arguments</a> = <a href="#506059" title="List[String]">args</a>.<a title="=&gt; List[String]" id="25318">tail</a>
    }
  }

  // we can safely call processArguments since we passed the superclass shouldProcessArguments=false
  <a href="#505938" title="()Unit">processArguments</a>()

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; java.lang.String" id="505939">usageMsg</a> = {
    <a href="CompilerCommand.scala.html#141987" title="(x$1: Any)java.lang.String">cmdName</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; [ &lt;option&gt; ]... [&lt;torun&gt; &lt;arguments&gt;]\012&quot;)" class="string">&quot; [ &lt;option&gt; ]... [&lt;torun&gt; &lt;arguments&gt;]\n&quot;</span> <span title="(x$1: Any)java.lang.String">+</span>
    <span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span> <span title="(x$1: Any)java.lang.String">+</span>
    <span title="java.lang.String(&quot;All options to &quot;)" class="string">&quot;All options to &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#505930" title="=&gt; java.lang.String">compCmdName</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot; are allowed.  See &quot;)" class="string">&quot; are allowed.  See &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#505930" title="=&gt; java.lang.String">compCmdName</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot; -help.\012&quot;)" class="string">&quot; -help.\n&quot;</span> <span title="(x$1: Any)java.lang.String">+</span>
    <span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span> <span title="(x$1: Any)java.lang.String">+</span>
    <span title="java.lang.String(&quot;&lt;torun&gt;, if present, is an object or script file to run.\012&quot;)" class="string">&quot;&lt;torun&gt;, if present, is an object or script file to run.\n&quot;</span> <span title="(x$1: Any)java.lang.String">+</span>
    <span title="java.lang.String(&quot;If no &lt;torun&gt; is present, run an interactive shell.\012&quot;)" class="string">&quot;If no &lt;torun&gt; is present, run an interactive shell.\n&quot;</span> <span title="(x$1: Any)java.lang.String">+</span>
    <span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span> <span title="(x$1: Any)java.lang.String">+</span>
    <span title="java.lang.String(&quot;Option -howtorun allows explicitly specifying how to run &lt;torun&gt;:\012&quot;)" class="string">&quot;Option -howtorun allows explicitly specifying how to run &lt;torun&gt;:\n&quot;</span> <span title="(x$1: Any)java.lang.String">+</span>
    <span title="java.lang.String(&quot;    script: it is a script file\012&quot;)" class="string">&quot;    script: it is a script file\n&quot;</span> <span title="(x$1: Any)java.lang.String">+</span>
    <span title="java.lang.String(&quot;    object: it is an object name\012&quot;)" class="string">&quot;    object: it is an object name\n&quot;</span> <span title="(x$1: Any)java.lang.String">+</span>
    <span title="java.lang.String(&quot;    guess: (the default) try to guess\012&quot;)" class="string">&quot;    guess: (the default) try to guess\n&quot;</span> <span title="(x$1: Any)java.lang.String">+</span>
    <span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span> <span title="(x$1: Any)java.lang.String">+</span>
    <span title="java.lang.String(&quot;Option -i requests that a file be pre-loaded.  It is only\012&quot;)" class="string">&quot;Option -i requests that a file be pre-loaded.  It is only\n&quot;</span> <span title="(x$1: Any)java.lang.String">+</span>
    <span title="java.lang.String(&quot;meaningful for interactive shells.\012&quot;)" class="string">&quot;meaningful for interactive shells.\n&quot;</span> <span title="(x$1: Any)java.lang.String">+</span>
    <span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span> <span title="(x$1: Any)java.lang.String">+</span>
    <span title="java.lang.String(&quot;Option -e requests that its argument be executed as Scala code.\012&quot;)" class="string">&quot;Option -e requests that its argument be executed as Scala code.\n&quot;</span> <span title="(x$1: Any)java.lang.String">+</span>
    <span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span> <span title="(x$1: Any)java.lang.String">+</span>
    <span title="java.lang.String(&quot;Option -savecompiled requests that the compiled script be saved\012&quot;)" class="string">&quot;Option -savecompiled requests that the compiled script be saved\n&quot;</span> <span title="(x$1: Any)java.lang.String">+</span>
    <span title="java.lang.String(&quot;for future use.\012&quot;)" class="string">&quot;for future use.\n&quot;</span> <span title="(x$1: Any)java.lang.String">+</span>
    <span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span> <span title="(x$1: Any)java.lang.String">+</span>
    <span title="java.lang.String(&quot;Option -nocompdaemon requests that the fsc offline compiler not be used.\012&quot;)" class="string">&quot;Option -nocompdaemon requests that the fsc offline compiler not be used.\n&quot;</span> <span title="(x$1: Any)java.lang.String">+</span>
    <span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span> +
    <span title="java.lang.String(&quot;Option -Dproperty=value sets a Java system property.\012&quot;)" class="string">&quot;Option -Dproperty=value sets a Java system property.\n&quot;</span>
  }
}

        </pre>
    </body>
</html>