<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/IdeSupport.scala</title>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style">
    </head>
    <body onload="initializeLinked()">
        <pre>
<span class="comment">/* NSC -- new Scala compiler
 * Copyright 2005-2009 LAMP/EPFL
 * @author  Martin Odersky
 */</span>
<span class="comment">// $Id: IdeSupport.scala 17274 2009-03-10 11:39:04Z michelou $</span>

<span class="keyword">package</span> scala.tools.nsc

<span class="keyword">import</span> scala.tools.nsc.io._

<span class="keyword">trait</span> <span class="typed"><span class="type">trait IdeSupport extends scala.tools.nsc.Global with scala.tools.nsc.symtab.IdeSupport with ScalaObject</span><a id="6888">IdeSupport</a></span> <span class="keyword">extends</span> <span class="typed"><span class="type">scala.tools.nsc.Global</span><a href="Global.scala.html#6489">Global</a></span> <span class="keyword">with</span> symtab.<span class="typed"><span class="type">scala.tools.nsc.symtab.IdeSupport</span><a href="symtab/IdeSupport.scala.html#9591">IdeSupport</a></span> {
  <span class="comment">/** to do no dependency tracking */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <span class="typed"><span class="type">[T](=&gt; T)T</span><a id="133154">normalCompile</a></span>[<span class="typed"><span class="type">&gt;: Nothing &lt;: Any</span><a id="133156">T</a></span>](<span class="typed"><span class="type">=&gt; T</span><a id="133168">f</a></span>: =&gt; T): <span class="typed"><span class="type">T</span><a href="#133156">T</a></span> = <span class="typed"><span class="type">=&gt; T</span><a href="#133168">f</a></span>
  <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; (=&gt; IdeSupport.this.Type) =&gt; IdeSupport.this.Type</span><a id="133157">unpickleIDEHook</a></span>: (( =&gt; Type) =&gt; Type) = <span class="typed"><span class="type">=&gt; IdeSupport.this.Type</span><a id="133171">f</a></span> =&gt; <span class="typed"><span class="type">(=&gt; IdeSupport.this.Type)IdeSupport.this.Type</span><a href="#133154">normalCompile</a></span>(<span class="typed"><span class="type">=&gt; IdeSupport.this.Type</span><a href="#133171">f</a></span>)

  <span class="keyword">class</span> <span class="typed"><span class="type">class IdeRun extends IdeSupport.this.Run with ScalaObject</span><a id="133158">IdeRun</a></span> <span class="keyword">extends</span> <span class="typed"><span class="type">IdeSupport.this.Run</span><a href="Global.scala.html#21313">Run</a></span> {
    <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">(IdeSupport.this.Symbol)Boolean</span><a id="133174">compiles</a></span>(<span class="typed"><span class="type">IdeSupport.this.Symbol</span><a id="133178">sym</a></span>: <span class="typed"><span class="type">IdeSupport.this.Symbol</span><a href="symtab/Symbols.scala.html#21866">Symbol</a></span>): <span class="typed"><span class="type">Boolean</span><a id="2170">Boolean</a></span> = <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span> <span class="comment">// throw new Error</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">(scala.tools.nsc.io.AbstractFile)Unit</span><a id="133175">compileLate</a></span>(<span class="typed"><span class="type">scala.tools.nsc.io.AbstractFile</span><a id="133179">file</a></span>: <span class="typed"><span class="type">scala.tools.nsc.io.AbstractFile</span><a href="io/AbstractFile.scala.html#12693">AbstractFile</a></span>) = {
      <span class="typed"><span class="type">(scala.tools.nsc.io.AbstractFile)Unit</span><a href="symtab/IdeSupport.scala.html#87441">reloadSource</a></span>(<span class="typed"><span class="type">scala.tools.nsc.io.AbstractFile</span><a href="#133179">file</a></span>)
      <span class="typed"><span class="type">(=&gt; Unit)Unit</span><a href="#133154">normalCompile</a></span>(<span class="typed"><span class="type">(scala.tools.nsc.io.AbstractFile)Unit</span><a href="#171344" class="keyword">super</a></span>.<span class="typed"><span class="type">(scala.tools.nsc.io.AbstractFile)Unit</span><span id="171344"><a id="171345">compileLate</a></span></span>(<span class="typed"><span class="type">scala.tools.nsc.io.AbstractFile</span><a href="#133179">file</a></span>))
    }
    <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">(String)Boolean</span><a id="133176">stopPhase</a></span>(<span class="typed"><span class="type">String</span><a id="133183">name</a></span> : <span class="typed"><span class="type">String</span><a id="1861">String</a></span>) = 
      <span class="typed"><span class="type">String</span><a href="#133183">name</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">java.lang.String(&quot;superaccessors&quot;)</span><span class="string">&quot;superaccessors&quot;</span></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2750">||</a></span> <span class="keyword">super</span>.<span class="typed"><span class="type">(String)Boolean</span><a href="Global.scala.html#36543">stopPhase</a></span>(<span class="typed"><span class="type">String</span><a href="#133183">name</a></span>)
  }

  <span class="comment">// load a source file without us caring about adapt.</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">(scala.tools.nsc.io.AbstractFile)Option[IdeSupport.this.CompilationUnit]</span><a id="133159">loadSource</a></span>(<span class="typed"><span class="type">scala.tools.nsc.io.AbstractFile</span><a id="133187">file</a></span>: <span class="typed"><span class="type">scala.tools.nsc.io.AbstractFile</span><a href="io/AbstractFile.scala.html#12693">AbstractFile</a></span>): <span class="typed"><span class="type">Option[IdeSupport.this.CompilationUnit]</span><a id="934">Option</a></span>[CompilationUnit] = {
    <span class="keyword">val</span> <span class="typed"><span class="type">IdeSupport.this.IdeRun</span><a id="133188">run</a></span> = <span class="typed"><span class="type">IdeSupport.this.IdeRun</span><span class="keyword">new</span></span> <span class="typed"><span class="type">IdeSupport.this.IdeRun</span><a href="#133158">IdeRun</a></span>
    <span class="typed"><span class="type">(scala.tools.nsc.io.AbstractFile)Unit</span><a href="symtab/IdeSupport.scala.html#87441">reloadSource</a></span>(<span class="typed"><span class="type">scala.tools.nsc.io.AbstractFile</span><a href="#133187">file</a></span>) 
    <span class="keyword">val</span> <span class="typed"><span class="type">scala.tools.nsc.util.SourceFile</span><a id="133189">source</a></span> = <span class="typed"><span class="type">(scala.tools.nsc.io.AbstractFile)scala.tools.nsc.util.SourceFile</span><a href="Global.scala.html#21223">getSourceFile</a></span>(<span class="typed"><span class="type">scala.tools.nsc.io.AbstractFile</span><a href="#133187">file</a></span>)
    <span class="keyword">try</span> {
      <span class="typed"><span class="type">(=&gt; Unit)Unit</span><a href="#133154">normalCompile</a></span>(<span class="typed"><span class="type">IdeSupport.this.IdeRun</span><a href="#133188">run</a></span>.<span class="typed"><span class="type">(List[scala.tools.nsc.util.SourceFile])Unit</span><a href="Global.scala.html#36587">compileSources</a></span>(<span class="typed"><span class="type">scala.tools.nsc.util.SourceFile</span><a href="#133189">source</a></span> <span class="typed"><span class="type">(scala.tools.nsc.util.SourceFile)List[scala.tools.nsc.util.SourceFile]</span><a href="#133192" id="21335">::</a></span> <span class="typed"><span class="type">object Nil</span><a id="335">Nil</a></span>))
      <span class="typed"><span class="type">IdeSupport.this.IdeRun</span><a href="#133188">run</a></span>.<span class="typed"><span class="type">=&gt; Iterator[IdeSupport.this.CompilationUnit]</span><a href="Global.scala.html#36581">units</a></span>.<span class="typed"><span class="type">((IdeSupport.this.CompilationUnit) =&gt; Boolean)Option[IdeSupport.this.CompilationUnit]</span><a id="32206">find</a></span>(<span class="typed"><span class="type">IdeSupport.this.CompilationUnit</span><a href="#133196">_</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.util.SourceFile</span><a href="CompilationUnits.scala.html#24127">source</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">scala.tools.nsc.util.SourceFile</span><a href="#133189">source</a></span>)
    } <span class="keyword">catch</span> {
      <span class="typed"><span class="type">None.type</span><span class="keyword">case</span></span> <span class="typed"><span class="type">java.lang.Throwable</span><a id="133198">e</a></span> =&gt; 
        <span class="typed"><span class="type">(String,Throwable)Unit</span><a href="Global.scala.html#21213">logError</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;error in presentation normal compile &quot;)</span><span class="string">&quot;error in presentation normal compile &quot;</span></span>, <span class="typed"><span class="type">java.lang.Throwable</span><a href="#133198">e</a></span>)
        <span class="typed"><span class="type">object None</span><a id="536">None</a></span>
    }
  }

  <span class="keyword">object</span> <span class="typed"><span class="type">object IdeSupport.this.loaders1</span><a id="133160">loaders1</a></span> <span class="keyword">extends</span> {
    <span class="keyword">val</span> <span class="typed"><span class="type">IdeSupport.this.type</span><span id="133202"><span id="133201"><a id="133210">global</a></span></span></span>: IdeSupport.<span class="keyword">this</span>.<span class="keyword">type</span> = <span class="typed"><span class="type">IdeSupport.this.type</span><a href="#6888">IdeSupport</a></span>.<span class="keyword">this</span>
  } <span class="keyword">with</span> scala.tools.nsc.symtab.<span class="typed"><span class="type">scala.tools.nsc.symtab.SymbolLoaders</span><a href="symtab/SymbolLoaders.scala.html#9354">SymbolLoaders</a></span> {
    <span class="keyword">import</span> global._
    <span class="keyword">protected</span> <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">(scala.tools.nsc.IdeSupport.loaders1.global.Symbol,scala.tools.nsc.IdeSupport.loaders1.ClassfileLoader)(=&gt; Unit)Unit</span><a id="133205">completeClassfile</a></span>(<span class="typed"><span class="type">scala.tools.nsc.IdeSupport.loaders1.global.Symbol</span><a id="133211">root</a></span>: global.<span class="typed"><span class="type">scala.tools.nsc.IdeSupport.loaders1.global.Symbol</span><a href="symtab/Symbols.scala.html#21866">Symbol</a></span>, <span class="typed"><span class="type">scala.tools.nsc.IdeSupport.loaders1.ClassfileLoader</span><a id="133212">loader</a></span>: <span class="typed"><span class="type">scala.tools.nsc.IdeSupport.loaders1.ClassfileLoader</span><a href="symtab/SymbolLoaders.scala.html#34361">ClassfileLoader</a></span>)(<span class="typed"><span class="type">=&gt; Unit</span><a id="133213">f</a></span>: =&gt; Unit) {
      <span class="typed"><span class="type">=&gt; IdeSupport.this.type</span><a href="#133201">global</a></span>.<span class="typed"><span class="type">(=&gt; Unit)Unit</span><a href="#133154">normalCompile</a></span>(<span class="typed"><span class="type">=&gt; Unit</span><a href="#133213">f</a></span>)
    }
    <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">(scala.tools.nsc.IdeSupport.loaders1.PackageLoader)scala.tools.nsc.IdeSupport.loaders1.global.PackageScopeDependMap</span><a id="133206">computeDepends</a></span>(<span class="typed"><span class="type">scala.tools.nsc.IdeSupport.loaders1.PackageLoader</span><a id="133215">from</a></span>: <span class="typed"><span class="type">scala.tools.nsc.IdeSupport.loaders1.PackageLoader</span><a href="symtab/SymbolLoaders.scala.html#34354">PackageLoader</a></span>): global.<span class="typed"><span class="type">scala.tools.nsc.IdeSupport.loaders1.global.PackageScopeDependMap</span><a href="symtab/Scopes.scala.html#22208">PackageScopeDependMap</a></span> =
      <span class="typed"><span class="type">IdeSupport.this.type</span><a href="#6888">IdeSupport</a></span>.<span class="keyword">this</span>.<span class="typed"><span class="type">(IdeSupport.this.loaders.PackageLoader)IdeSupport.this.PackageScopeDependMap</span><a href="#133162">computeDepends</a></span>(<span class="typed"><span class="type">scala.tools.nsc.IdeSupport.loaders1.PackageLoader</span><a href="#133215">from</a></span>.<span class="typed"><span class="type">IdeSupport.this.loaders.PackageLoader</span><a id="3503">asInstanceOf</a></span>[IdeSupport.<span class="keyword">this</span>.loaders.<span class="typed"><span class="type">IdeSupport.this.loaders.PackageLoader</span><a href="symtab/SymbolLoaders.scala.html#34354">PackageLoader</a></span>])
  }

  <span class="keyword">def</span> <span class="typed"><span class="type">(IdeSupport.this.loaders.PackageLoader)IdeSupport.this.PackageScopeDependMap</span><a id="133162">computeDepends</a></span>(<span class="typed"><span class="type">IdeSupport.this.loaders.PackageLoader</span><a id="133216">from</a></span>: loaders.<span class="typed"><span class="type">IdeSupport.this.loaders.PackageLoader</span><a href="symtab/SymbolLoaders.scala.html#34354">PackageLoader</a></span>): <span class="typed"><span class="type">IdeSupport.this.PackageScopeDependMap</span><a href="symtab/Scopes.scala.html#22208">PackageScopeDependMap</a></span> = <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>
  <span class="keyword">override</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <span class="typed"><span class="type">object IdeSupport.this.loaders1</span><a id="133164">loaders</a></span> = <span class="typed"><span class="type">object IdeSupport.this.loaders1</span><a href="#133160">loaders1</a></span>
}

        </pre>
    </body>
</html>