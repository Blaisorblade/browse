<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/MainTokenMetric.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style">
    </head>
    <body>
        <pre>
/* NSC -- new Scala compiler
 * Copyright 2005-2009 LAMP/EPFL
 * @author  Martin Odersky
 */
// $Id: MainTokenMetric.scala 17856 2009-05-27 19:35:02Z dubochet $

<span class="keyword">package</span> scala.tools.nsc

<span class="keyword">import</span> scala.tools.nsc.reporters.ConsoleReporter

/** The main class for NSC, a compiler for the programming
 *  language Scala.
 */
<span class="keyword">object</span> <a title="object scala.tools.nsc.MainTokenMetric" id="9394">MainTokenMetric</a> <a title="ScalaObject" id="959">{</a>

  <span class="keyword">private</span> <span class="keyword">var</span> <a title="scala.tools.nsc.reporters.ConsoleReporter" id="701798">reporter</a>: <a href="reporters/ConsoleReporter.scala.html#13099" title="scala.tools.nsc.reporters.ConsoleReporter">ConsoleReporter</a> = _
  
  <span class="keyword">def</span> <a title="(compiler: scala.tools.nsc.Global,fnames: List[String])Unit" id="701800">tokenMetric</a>(<a title="scala.tools.nsc.Global" id="701807">compiler</a>: <a href="Global.scala.html#8460" title="scala.tools.nsc.Global">Global</a>, <a title="List[String]" id="701808">fnames</a>: <a title="List[String]" id="7345">List</a>[String]) {
    <span class="keyword">import</span> compiler.CompilationUnit
    <span class="keyword">import</span> compiler.syntaxAnalyzer.UnitScanner
    <span class="keyword">import</span> ast.parser.Tokens.EOF
    <span class="keyword">var</span> <a title="Int" id="701813">totale</a> = <span title="Int(0)" class="int">0</span>
    <span class="keyword">for</span> (<a title="String" id="701830">source</a> &lt;- <a href="#701808" title="(f: (String) =&gt; Unit)Unit" id="28932">fnames</a>) {
      <span class="keyword">val</span> <a title="compiler.syntaxAnalyzer.UnitScanner" id="701831">s</a> = <a href="ast/parser/Scanners.scala.html#526572" title="(unit: compiler.syntaxAnalyzer.global.CompilationUnit)compiler.syntaxAnalyzer.UnitScanner" class="keyword">new</a> <a href="ast/parser/Scanners.scala.html#39698" title="compiler.syntaxAnalyzer.UnitScanner">UnitScanner</a>(<span title="compiler.CompilationUnit" class="keyword">new</span> <a href="CompilationUnits.scala.html#39196" title="compiler.CompilationUnit">CompilationUnit</a>(<a href="#701807" title="scala.tools.nsc.Global">compiler</a>.<a href="Global.scala.html#39087" title="(name: String)scala.tools.nsc.util.SourceFile">getSourceFile</a>(<a href="#701830" title="String">source</a>)))
      <a href="#701831" title="compiler.syntaxAnalyzer.UnitScanner">s</a>.<a href="ast/parser/Scanners.scala.html#121728" title="()Unit">nextToken</a>
      <span class="keyword">var</span> <a title="Int" id="701832">i</a> = <span title="Int(0)" class="int">0</span>
      <span title="Unit" class="keyword">while</span> (<a href="#701831" title="compiler.syntaxAnalyzer.UnitScanner">s</a>.<a href="ast/parser/Scanners.scala.html#121759" title="(x$1: Int)Boolean" id="2954">token</a> != <span title="Int(0)">EOF</span>) <a href="#701833" title="()Unit">{</a>
        <a href="#701832" title="Int">i</a> += <span title="Int(1)" class="int">1</span>
        <a href="#701831" title="compiler.syntaxAnalyzer.UnitScanner">s</a>.<a href="ast/parser/Scanners.scala.html#121728" title="()Unit">nextToken</a>
      }
      <span title="object Console">Console</span>.<span title="(x: Any)Unit">println</span>(<a href="#701832" title="Int">i</a>.<span title="(x$1: Any)java.lang.String">toString</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; &quot;)" class="string">&quot; &quot;</span> + <a href="#701830" title="String">source</a>.<a title="()java.lang.String" id="7052">toString</a>())
      <a href="#701813" title="Int">totale</a> += <a href="#701832" title="Int">i</a>
    }
    <span title="object Console">Console</span>.<span title="(x: Any)Unit">println</span>(<a href="#701813" title="Int">totale</a>.<span title="()java.lang.String">toString</span><span title="(x$1: Any)java.lang.String">(</span>)+<span title="java.lang.String(&quot; total&quot;)" class="string">&quot; total&quot;</span>)
  }

  <span class="keyword">def</span> <a title="(args: Array[String])Unit" id="701801">process</a>(<a title="Array[String]" id="701959">args</a>: <span title="Array[String]">Array</span>[String]) {
    <span class="keyword">val</span> <a title="scala.tools.nsc.Settings" id="701961">settings</a> = <span title="scala.tools.nsc.Settings" class="keyword">new</span> <a href="Settings.scala.html#8706" title="scala.tools.nsc.Settings">Settings</a>(<a href="#701967" title="(message: String)Nothing">error</a>)
    <a href="#701798" title="(x$1: scala.tools.nsc.reporters.ConsoleReporter)Unit">reporter</a> = <a href="reporters/ConsoleReporter.scala.html#38820" title="(settings: scala.tools.nsc.Settings)scala.tools.nsc.reporters.ConsoleReporter" class="keyword">new</a> <a href="reporters/ConsoleReporter.scala.html#13099" title="scala.tools.nsc.reporters.ConsoleReporter">ConsoleReporter</a>(<a href="#701961" title="scala.tools.nsc.Settings">settings</a>)
    <span class="keyword">val</span> <a title="scala.tools.nsc.CompilerCommand" id="701962">command</a> = <a href="CompilerCommand.scala.html#141980" title="(arguments: List[String],settings: scala.tools.nsc.Settings,error: (String) =&gt; Unit,interactive: Boolean)scala.tools.nsc.CompilerCommand" class="keyword">new</a> <a href="CompilerCommand.scala.html#8898" title="scala.tools.nsc.CompilerCommand">CompilerCommand</a>(<a href="#701959" title="Array[String]">args</a>.<a title="=&gt; List[String]" id="25352">toList</a>, <a href="#701961" title="scala.tools.nsc.Settings">settings</a>, <a href="#701983" title="(message: String)Nothing">error</a>, <span title="Boolean(false)" class="keyword">false</span>)
    <span class="keyword">try</span> {
      <span class="keyword">val</span> <a title="scala.tools.nsc.Global" id="701989">compiler</a> = <span title="scala.tools.nsc.Global" class="keyword">new</span> <a href="Global.scala.html#8460" title="scala.tools.nsc.Global">Global</a>(<a href="#701962" title="scala.tools.nsc.CompilerCommand">command</a>.<a href="CompilerCommand.scala.html#141974" title="=&gt; scala.tools.nsc.Settings">settings</a>, <a href="#701798" title="=&gt; scala.tools.nsc.reporters.ConsoleReporter">reporter</a>)
      <a href="#701800" title="(compiler: scala.tools.nsc.Global,fnames: List[String])Unit">tokenMetric</a>(<a href="#701989" title="scala.tools.nsc.Global">compiler</a>, <a href="#701962" title="scala.tools.nsc.CompilerCommand">command</a>.<a href="CompilerCommand.scala.html#141986" title="=&gt; List[String]">files</a>)
    } <span class="keyword">catch</span> {
      <span title="Unit" class="keyword">case</span> <a title="scala.tools.nsc.FatalError" id="702004">ex</a> @ <a id="1">FatalError</a>(<a title="String" id="702005">msg</a>) =&gt;
        <span title="Unit" class="keyword">if</span> (<a href="#701962" title="scala.tools.nsc.CompilerCommand">command</a>.<a href="CompilerCommand.scala.html#141974" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="Settings.scala.html#37759" title="=&gt; command.settings.debug.T">value</a>)
          <a href="#702004" title="scala.tools.nsc.FatalError">ex</a>.<a title="()Unit" id="25932">printStackTrace</a>();
      <a href="#701798" title="=&gt; scala.tools.nsc.reporters.ConsoleReporter">reporter</a>.<a href="reporters/Reporter.scala.html#38784" title="(pos: scala.tools.nsc.util.Position,msg: String)Unit">error</a>(<span title="Null(null)" class="keyword">null</span>, <span title="(x$1: Any)java.lang.String" class="string">&quot;fatal error: &quot;</span> + <a href="#702005" title="String">msg</a>)
    }
  }

  <span class="keyword">def</span> <a title="(args: Array[String])Unit" id="701802">main</a>(<a title="Array[String]" id="702024">args</a>: <span title="Array[String]">Array</span>[String]) {
    <a href="#701801" title="(args: Array[String])Unit">process</a>(<a href="#702024" title="Array[String]">args</a>)
    <a title="(status: Int)Nothing" id="7872">exit</a>(<span title="Int" class="keyword">if</span> (<a href="#701798" title="=&gt; scala.tools.nsc.reporters.ConsoleReporter">reporter</a>.<a href="reporters/Reporter.scala.html#38774" title="=&gt; Boolean">hasErrors</a>) <span title="Int(1)" class="int">1</span> <span class="keyword">else</span> <span title="Int(0)" class="int">0</span>)
  }

}

        </pre>
    </body>
</html>