<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/MainTokenMetric.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style">
    </head>
    <body>
        <pre>
/* NSC -- new Scala compiler
 * Copyright 2005-2009 LAMP/EPFL
 * @author  Martin Odersky
 */
// $Id: MainTokenMetric.scala 17856 2009-05-27 19:35:02Z dubochet $

<span class="keyword">package</span> scala.tools.nsc

<span class="keyword">import</span> scala.tools.nsc.reporters.ConsoleReporter

/** The main class for NSC, a compiler for the programming
 *  language Scala.
 */
<span class="keyword">object</span> <a title="object scala.tools.nsc.MainTokenMetric" id="9463">MainTokenMetric</a> <a title="ScalaObject" id="977">{</a>

  <span class="keyword">private</span> <span class="keyword">var</span> <a title="scala.tools.nsc.reporters.ConsoleReporter" id="703559">reporter</a>: <a href="reporters/ConsoleReporter.scala.html#13171" title="scala.tools.nsc.reporters.ConsoleReporter">ConsoleReporter</a> = _
  
  <span class="keyword">def</span> <a title="(compiler: scala.tools.nsc.Global,fnames: List[String])Unit" id="703561">tokenMetric</a>(<a title="scala.tools.nsc.Global" id="703568">compiler</a>: <a href="Global.scala.html#8529" title="scala.tools.nsc.Global">Global</a>, <a title="List[String]" id="703569">fnames</a>: <a title="List[String]" id="7414">List</a>[String]) {
    <span class="keyword">import</span> compiler.CompilationUnit
    <span class="keyword">import</span> compiler.syntaxAnalyzer.UnitScanner
    <span class="keyword">import</span> ast.parser.Tokens.EOF
    <span class="keyword">var</span> <a title="Int" id="703574">totale</a> = <span title="Int(0)" class="int">0</span>
    <span class="keyword">for</span> (<a title="String" id="703591">source</a> &lt;- <a href="#703569" title="(f: (String) =&gt; Unit)Unit" id="29118">fnames</a>) {
      <span class="keyword">val</span> <a title="compiler.syntaxAnalyzer.UnitScanner" id="703592">s</a> = <a href="ast/parser/Scanners.scala.html#527760" title="(unit: compiler.syntaxAnalyzer.global.CompilationUnit)compiler.syntaxAnalyzer.UnitScanner" class="keyword">new</a> <a href="ast/parser/Scanners.scala.html#39930" title="compiler.syntaxAnalyzer.UnitScanner">UnitScanner</a>(<span title="compiler.CompilationUnit" class="keyword">new</span> <a href="CompilationUnits.scala.html#39428" title="compiler.CompilationUnit">CompilationUnit</a>(<a href="#703568" title="scala.tools.nsc.Global">compiler</a>.<a href="Global.scala.html#39319" title="(name: String)scala.tools.nsc.util.SourceFile">getSourceFile</a>(<a href="#703591" title="String">source</a>)))
      <a href="#703592" title="compiler.syntaxAnalyzer.UnitScanner">s</a>.<a href="ast/parser/Scanners.scala.html#122238" title="()Unit">nextToken</a>
      <span class="keyword">var</span> <a title="Int" id="703593">i</a> = <span title="Int(0)" class="int">0</span>
      <span title="Unit" class="keyword">while</span> (<a href="#703592" title="compiler.syntaxAnalyzer.UnitScanner">s</a>.<a href="ast/parser/Scanners.scala.html#122269" title="(x$1: Int)Boolean" id="2975">token</a> != <span title="Int(0)">EOF</span>) <a href="#703594" title="()Unit">{</a>
        <a href="#703593" title="Int">i</a> += <span title="Int(1)" class="int">1</span>
        <a href="#703592" title="compiler.syntaxAnalyzer.UnitScanner">s</a>.<a href="ast/parser/Scanners.scala.html#122238" title="()Unit">nextToken</a>
      }
      <span title="object Console">Console</span>.<span title="(x: Any)Unit">println</span>(<a href="#703593" title="Int">i</a>.<span title="(x$1: Any)java.lang.String">toString</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; &quot;)" class="string">&quot; &quot;</span> + <a href="#703591" title="String">source</a>.<a title="()java.lang.String" id="7121">toString</a>())
      <a href="#703574" title="Int">totale</a> += <a href="#703593" title="Int">i</a>
    }
    <span title="object Console">Console</span>.<span title="(x: Any)Unit">println</span>(<a href="#703574" title="Int">totale</a>.<span title="()java.lang.String">toString</span><span title="(x$1: Any)java.lang.String">(</span>)+<span title="java.lang.String(&quot; total&quot;)" class="string">&quot; total&quot;</span>)
  }

  <span class="keyword">def</span> <a title="(args: Array[String])Unit" id="703562">process</a>(<a title="Array[String]" id="703720">args</a>: <span title="Array[String]">Array</span>[String]) {
    <span class="keyword">val</span> <a title="scala.tools.nsc.Settings" id="703722">settings</a> = <span title="scala.tools.nsc.Settings" class="keyword">new</span> <a href="Settings.scala.html#8775" title="scala.tools.nsc.Settings">Settings</a>(<a href="#703728" title="(message: String)Nothing">error</a>)
    <a href="#703559" title="(x$1: scala.tools.nsc.reporters.ConsoleReporter)Unit">reporter</a> = <a href="reporters/ConsoleReporter.scala.html#39052" title="(settings: scala.tools.nsc.Settings)scala.tools.nsc.reporters.ConsoleReporter" class="keyword">new</a> <a href="reporters/ConsoleReporter.scala.html#13171" title="scala.tools.nsc.reporters.ConsoleReporter">ConsoleReporter</a>(<a href="#703722" title="scala.tools.nsc.Settings">settings</a>)
    <span class="keyword">val</span> <a title="scala.tools.nsc.CompilerCommand" id="703723">command</a> = <a href="CompilerCommand.scala.html#142575" title="(arguments: List[String],settings: scala.tools.nsc.Settings,error: (String) =&gt; Unit,interactive: Boolean)scala.tools.nsc.CompilerCommand" class="keyword">new</a> <a href="CompilerCommand.scala.html#8967" title="scala.tools.nsc.CompilerCommand">CompilerCommand</a>(<a href="#703720" title="Array[String]">args</a>.<a title="=&gt; List[String]" id="25511">toList</a>, <a href="#703722" title="scala.tools.nsc.Settings">settings</a>, <a href="#703744" title="(message: String)Nothing">error</a>, <span title="Boolean(false)" class="keyword">false</span>)
    <span class="keyword">try</span> {
      <span class="keyword">val</span> <a title="scala.tools.nsc.Global" id="703750">compiler</a> = <span title="scala.tools.nsc.Global" class="keyword">new</span> <a href="Global.scala.html#8529" title="scala.tools.nsc.Global">Global</a>(<a href="#703723" title="scala.tools.nsc.CompilerCommand">command</a>.<a href="CompilerCommand.scala.html#142569" title="=&gt; scala.tools.nsc.Settings">settings</a>, <a href="#703559" title="=&gt; scala.tools.nsc.reporters.ConsoleReporter">reporter</a>)
      <a href="#703561" title="(compiler: scala.tools.nsc.Global,fnames: List[String])Unit">tokenMetric</a>(<a href="#703750" title="scala.tools.nsc.Global">compiler</a>, <a href="#703723" title="scala.tools.nsc.CompilerCommand">command</a>.<a href="CompilerCommand.scala.html#142581" title="=&gt; List[String]">files</a>)
    } <span class="keyword">catch</span> {
      <span title="Unit" class="keyword">case</span> <a title="scala.tools.nsc.FatalError" id="703765">ex</a> @ <a id="1">FatalError</a>(<a title="String" id="703766">msg</a>) =&gt;
        <span title="Unit" class="keyword">if</span> (<a href="#703723" title="scala.tools.nsc.CompilerCommand">command</a>.<a href="CompilerCommand.scala.html#142569" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="Settings.scala.html#37988" title="=&gt; command.settings.debug.T">value</a>)
          <a href="#703765" title="scala.tools.nsc.FatalError">ex</a>.<a title="()Unit" id="26091">printStackTrace</a>();
      <a href="#703559" title="=&gt; scala.tools.nsc.reporters.ConsoleReporter">reporter</a>.<a href="reporters/Reporter.scala.html#39016" title="(pos: scala.tools.nsc.util.Position,msg: String)Unit">error</a>(<span title="Null(null)" class="keyword">null</span>, <span title="(x$1: Any)java.lang.String" class="string">&quot;fatal error: &quot;</span> + <a href="#703766" title="String">msg</a>)
    }
  }

  <span class="keyword">def</span> <a title="(args: Array[String])Unit" id="703563">main</a>(<a title="Array[String]" id="703785">args</a>: <span title="Array[String]">Array</span>[String]) {
    <a href="#703562" title="(args: Array[String])Unit">process</a>(<a href="#703785" title="Array[String]">args</a>)
    <a title="(status: Int)Nothing" id="7941">exit</a>(<span title="Int" class="keyword">if</span> (<a href="#703559" title="=&gt; scala.tools.nsc.reporters.ConsoleReporter">reporter</a>.<a href="reporters/Reporter.scala.html#39006" title="=&gt; Boolean">hasErrors</a>) <span title="Int(1)" class="int">1</span> <span class="keyword">else</span> <span title="Int(0)" class="int">0</span>)
  }

}

        </pre>
    </body>
</html>