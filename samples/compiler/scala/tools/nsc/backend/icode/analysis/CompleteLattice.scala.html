<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/backend/icode/analysis/CompleteLattice.scala</title>
        <script type="text/javascript" src="../../../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../../../style.css" title="Style">
    </head>
    <body>
        <pre>
/* NSC -- new Scala compiler
 * Copyright 2005-2009 LAMP/EPFL
 * @author  Martin Odersky
 */

// $Id: CompleteLattice.scala 18387 2009-07-24 15:28:37Z odersky $

<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> backend.icode.analysis

/** A complete lattice.
 */
<span class="keyword">trait</span> <a title="trait CompleteLattice extends java.lang.Object with ScalaObject" id="16031">CompleteLattice</a> <span title="ScalaObject">{</span>
  <span class="keyword">type</span> <a title="&gt;: Nothing &lt;: AnyRef" id="60413">Elem</a> &lt;: AnyRef
  
  /** Hold together local variable and stack state. The
   *  equals method uses reference equality for top and bottom,
   *  and structural equality for other values.
   */
  case <span class="keyword">class</span> <a title="class IState[V, S] extends java.lang.Object with ScalaObject with Product" id="60903">IState</a>[<a title="&gt;: Nothing &lt;: Any" id="60906">V</a>, <a title="&gt;: Nothing &lt;: Any" id="60907">S</a>]<span title="ScalaObject">(</span><span class="keyword">val</span> <a title="V" id="61129">vars</a>: <a href="#60906" title="V">V</a>, <span class="keyword">val</span> <a title="S" id="61130">stack</a>: <a href="#60907" title="S">S</a>) {
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(other: Any)Boolean" id="60849">equals</a>(<a title="Any" id="142120">other</a>: <a title="Any" id="49">Any</a>): <a title="Boolean" id="1951">Boolean</a> = <a href="#142120" title="Any">other</a> <span title="Boolean" class="keyword">match</span> {
      <span title="Boolean" class="keyword">case</span> <a title="CompleteLattice.this.IState[_,_]" id="142122">that</a>: <a href="#60903" title="CompleteLattice.this.IState[_,_]">IState</a>[_, _] =&gt;
        <span title="Boolean" class="keyword">if</span> (<span title="(x$1: Boolean)Boolean">(</span><a href="#60903" title="(x$1: AnyRef)Boolean" class="keyword">this</a> eq <a href="#60421" title="=&gt; CompleteLattice.this.Elem">bottom</a>) || (<a href="#142122" title="(x$1: AnyRef)Boolean">that</a> eq <a href="#60421" title="=&gt; CompleteLattice.this.Elem">bottom</a>)) <a href="#60903" title="(x$1: AnyRef)Boolean" class="keyword">this</a> eq <a href="#142122" title="CompleteLattice.this.IState[_,_]">that</a>
        <span class="keyword">else</span> <span title="Boolean" class="keyword">if</span> (<span title="(x$1: Boolean)Boolean">(</span><a href="#60903" title="(x$1: AnyRef)Boolean" class="keyword">this</a> eq <a href="#60420" title="=&gt; CompleteLattice.this.Elem">top</a>) || (<a href="#142122" title="(x$1: AnyRef)Boolean">that</a> eq <a href="#60420" title="=&gt; CompleteLattice.this.Elem">top</a>)) <a href="#60903" title="(x$1: AnyRef)Boolean" class="keyword">this</a> eq <a href="#142122" title="CompleteLattice.this.IState[_,_]">that</a>
        <span class="keyword">else</span> (<a href="#61130" title="(x$1: Any)Boolean">stack</a> <a title="(x$1: Boolean)Boolean" id="2212">==</a> <a href="#142122" title="CompleteLattice.this.IState[_,_]">that</a>.<a href="#61130" title="=&gt; _">stack</a> &amp;&amp; <a href="#61129" title="(x$1: Any)Boolean">vars</a> == <a href="#142122" title="CompleteLattice.this.IState[_,_]">that</a>.<a href="#61129" title="=&gt; _">vars</a>)
      <span title="Boolean(false)" class="keyword">case</span> _ =&gt; <span title="Boolean(false)" class="keyword">false</span>
    }
  }

  /** Return the least upper bound of &lt;code&gt;a&lt;/code&gt; and &lt;code&gt;b&lt;/code&gt; */
  <span class="keyword">def</span> <a title="(a: CompleteLattice.this.Elem,b: CompleteLattice.this.Elem)CompleteLattice.this.Elem" id="60419">lub2</a>(<a title="CompleteLattice.this.Elem" id="60499">a</a>: <a href="#60413" title="CompleteLattice.this.Elem">Elem</a>, <a title="CompleteLattice.this.Elem" id="60500">b</a>: <a href="#60413" title="CompleteLattice.this.Elem">Elem</a>): <a href="#60413" title="CompleteLattice.this.Elem">Elem</a>

  /** Return the top element. */
  <span class="keyword">def</span> <a title="=&gt; CompleteLattice.this.Elem" id="60420">top</a>: <a href="#60413" title="CompleteLattice.this.Elem">Elem</a>

  /** Return the bottom element. */
  <span class="keyword">def</span> <a title="=&gt; CompleteLattice.this.Elem" id="60421">bottom</a>: <a href="#60413" title="CompleteLattice.this.Elem">Elem</a>

  /** Compute the least upper bound of a list of elements. */
  <span class="keyword">def</span> <a title="(xs: List[CompleteLattice.this.Elem])CompleteLattice.this.Elem" id="60422">lub</a>(<a title="List[CompleteLattice.this.Elem]" id="142192">xs</a>: <a title="List[CompleteLattice.this.Elem]" id="7345">List</a>[Elem]): <a href="#60413" title="CompleteLattice.this.Elem">Elem</a> = <span class="keyword">try</span> {
    <span title="CompleteLattice.this.Elem" class="keyword">if</span> (<a href="#142192" title="(x$1: AnyRef)Boolean" id="3626">xs</a> == <a title="object Nil" id="7634">Nil</a>) <a href="#60421" title="=&gt; CompleteLattice.this.Elem">bottom</a> <span class="keyword">else</span> <a href="#142192" title="(f: (CompleteLattice.this.Elem, CompleteLattice.this.Elem) =&gt; CompleteLattice.this.Elem)CompleteLattice.this.Elem" id="28951">xs</a> reduceLeft <a href="#60419" title="(a: CompleteLattice.this.Elem,b: CompleteLattice.this.Elem)CompleteLattice.this.Elem">lub2</a>
  } <span class="keyword">catch</span> {
      <span title="Nothing" class="keyword">case</span> <a title="scala.tools.nsc.backend.icode.analysis.LubError" id="142220">e</a>: <a href="LubError.scala.html#16235" title="scala.tools.nsc.backend.icode.analysis.LubError">LubError</a> =&gt;
        <a title="object Console" id="390">Console</a>.<a title="(x: Any)Unit" id="51323">println</a>(<a title="(x$1: Any)java.lang.String" id="6553" class="string">&quot;Lub on blocks: &quot;</a> + <a href="#142192" title="List[CompleteLattice.this.Elem]">xs</a>)
        <span title="Nothing" class="keyword">throw</span> <a href="#142220" title="scala.tools.nsc.backend.icode.analysis.LubError">e</a>
  }
}

        </pre>
    </body>
</html>