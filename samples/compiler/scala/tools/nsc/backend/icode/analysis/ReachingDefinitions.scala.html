<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/backend/icode/analysis/ReachingDefinitions.scala</title>
        <script type="text/javascript" src="../../../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../../../style.css" title="Style">
    </head>
    <body onload="initializeLinked()">
        <pre>
<span class="comment">/* NSC -- new Scala compiler
 * Copyright 2005-2009 LAMP/EPFL
 * @author  Martin Odersky
 */</span>

<span class="comment">// $Id: ReachingDefinitions.scala 17188 2009-02-24 11:54:40Z michelou $</span>

<span class="keyword">package</span> scala.tools.nsc.backend.icode.analysis

<span class="keyword">import</span> scala.collection.immutable.{Set, ListSet, HashSet}
<span class="keyword">import</span> scala.collection.jcl.{HashMap, Map}

<span class="comment">/** Compute reaching definitions. We are only interested in reaching
 *  definitions for local variables, since values on the stack
 *  behave as-if in SSA form: the closest instruction which produces a value
 *  on the stack is a reaching definition.
 */</span>
<span class="keyword">abstract</span> <span class="keyword">class</span> <span class="typed"><span class="type">class ReachingDefinitions extends java.lang.Object with ScalaObject</span><a id="16567">ReachingDefinitions</a></span> {
  <span class="keyword">val</span> <span class="typed"><span class="type">=&gt; scala.tools.nsc.Global</span><a id="32709">global</a></span>: <span class="typed"><span class="type">scala.tools.nsc.Global</span><a href="../../../Global.scala.html#6489">Global</a></span>
  <span class="keyword">import</span> global._
  <span class="keyword">import</span> icodes._

  <span class="comment">/** The lattice for reaching definitions. Elements are
   *  a triple (local variable, basic block, index of instruction of that basic block)
   */</span>
  <span class="keyword">object</span> <span class="typed"><span class="type">object ReachingDefinitions.this.rdefLattice</span><a id="32712">rdefLattice</a></span> <span class="keyword">extends</span> <span class="typed"><span class="type">scala.tools.nsc.backend.icode.analysis.CompleteLattice</span><a href="CompleteLattice.scala.html#16768">CompleteLattice</a></span> {
    <span class="keyword">type</span> <span class="typed"><span class="type">(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)</span><a id="32730">Definition</a></span> = <span class="typed"><span class="type">(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)</span><a id="448">(</a></span>Local, BasicBlock, Int)
    <span class="keyword">type</span> <span class="typed"><span class="type">scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.IState[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)],scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Stack]</span><a id="32731">Elem</a></span> = <span class="typed"><span class="type">scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.IState[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)],scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Stack]</span><a href="CompleteLattice.scala.html#32720">IState</a></span>[Set[Definition], Stack]
    <span class="keyword">type</span> <span class="typed"><span class="type">scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><a id="32732">StackPos</a></span> = <span class="typed"><span class="type">scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><a id="26500">Set</a></span>[(BasicBlock, Int)]
    <span class="keyword">type</span> <span class="typed"><span class="type">List[scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.StackPos]</span><a id="32733">Stack</a></span> = <span class="typed"><span class="type">List[scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.StackPos]</span><a id="526">List</a></span>[StackPos]

    <span class="keyword">val</span> <span class="typed"><span class="type">scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Elem</span><span id="32735"><a id="32734">top</a></span></span>: <span class="typed"><span class="type">scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Elem</span><a href="CompleteLattice.scala.html#32720">Elem</a></span> = <span class="typed"><span class="type">(scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)],scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Stack)scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.IState[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)],scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Stack]</span><a href="CompleteLattice.scala.html#61342">IState</a></span>(<span class="typed"><span class="type">scala.collection.immutable.ListSet[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><span class="keyword">new</span></span> <span class="typed"><span class="type">scala.collection.immutable.ListSet[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><a id="26287">ListSet</a></span>[Definition](), <span class="typed"><span class="type">object Nil</span><a id="335">Nil</a></span>)

    <span class="keyword">val</span> <span class="typed"><span class="type">scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Elem</span><span id="32737"><a id="32736">bottom</a></span></span>: <span class="typed"><span class="type">scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Elem</span><a href="CompleteLattice.scala.html#32720">Elem</a></span> = <span class="typed"><span class="type">(scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)],scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Stack)scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.IState[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)],scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Stack]</span><a href="CompleteLattice.scala.html#61342">IState</a></span>(<span class="typed"><span class="type">template $anon extends scala.collection.immutable.ListSet[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><a id="156725" class="keyword">new</a></span> <span class="typed"><span class="type">scala.collection.immutable.ListSet[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><a id="26287">ListSet</a></span>[Definition]() {
      <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">(Any)Boolean</span><a id="156727">equals</a></span>(<span class="typed"><span class="type">Any</span><a id="156730">that</a></span>: <span class="typed"><span class="type">Any</span><a id="51">Any</a></span>): <span class="typed"><span class="type">Boolean</span><a id="2170">Boolean</a></span> = <span class="typed"><span class="type">this.type</span><a href="#156725" class="keyword">this</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5794">eq</a></span> <span class="typed"><span class="type">Any</span><a href="#156730">that</a></span>.<span class="typed"><span class="type">AnyRef</span><a id="3503">asInstanceOf</a></span>[<span class="typed"><span class="type">AnyRef</span><a id="2017">AnyRef</a></span>]
      <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">()java.lang.String</span><a id="156728">toString</a></span> = <span class="typed"><span class="type">java.lang.String(&quot;&lt;bottom&gt;&quot;)</span><span class="string">&quot;&lt;bottom&gt;&quot;</span></span>
    }, <span class="typed"><span class="type">object Nil</span><a id="335">Nil</a></span>)

    <span class="comment">/** The least upper bound is set inclusion for locals, and pairwise set inclusion for stacks. */</span>
    <span class="keyword">def</span> <span class="typed"><span class="type">(scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Elem,scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Elem)scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Elem</span><a id="32738">lub2</a></span>(<span class="typed"><span class="type">scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Elem</span><a id="156733">a</a></span>: <span class="typed"><span class="type">scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Elem</span><a href="CompleteLattice.scala.html#32720">Elem</a></span>, <span class="typed"><span class="type">scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Elem</span><a id="156734">b</a></span>: <span class="typed"><span class="type">scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Elem</span><a href="CompleteLattice.scala.html#32720">Elem</a></span>): <span class="typed"><span class="type">scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Elem</span><a href="CompleteLattice.scala.html#32720">Elem</a></span> = 
      <span class="typed"><span class="type">scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Elem</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Elem</span><a href="#32736">bottom</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Elem</span><a href="#156733">a</a></span>) <span class="typed"><span class="type">scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Elem</span><a href="#156734">b</a></span>
      <span class="keyword">else</span> <span class="typed"><span class="type">scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Elem</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Elem</span><a href="#32736">bottom</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Elem</span><a href="#156734">b</a></span>) <span class="typed"><span class="type">scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Elem</span><a href="#156733">a</a></span>
      <span class="keyword">else</span> {
        <span class="keyword">val</span> <span class="typed"><span class="type">scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><a id="156737">locals</a></span> = <span class="typed"><span class="type">scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Elem</span><a href="#156733">a</a></span>.<span class="typed"><span class="type">=&gt; scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><a href="CompleteLattice.scala.html#33360">vars</a></span> <span class="typed"><span class="type">(Iterable[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)])scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><a id="31140">++</a></span> <span class="typed"><span class="type">scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Elem</span><a href="#156734">b</a></span>.<span class="typed"><span class="type">=&gt; scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><a href="CompleteLattice.scala.html#33360">vars</a></span>
        <span class="keyword">val</span> <span class="typed"><span class="type">scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Stack</span><a id="156738">stack</a></span> = <span class="typed"><span class="type">scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Stack</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Elem</span><a href="#156733">a</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Stack</span><a href="CompleteLattice.scala.html#33362">stack</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">object Nil</span><a id="335">Nil</a></span>) 
          <span class="typed"><span class="type">scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Elem</span><a href="#156734">b</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Stack</span><a href="CompleteLattice.scala.html#33362">stack</a></span>
        <span class="keyword">else</span> <span class="typed"><span class="type">scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Stack</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Elem</span><a href="#156734">b</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Stack</span><a href="CompleteLattice.scala.html#33362">stack</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">object Nil</span><a id="335">Nil</a></span>) <span class="typed"><span class="type">scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Elem</span><a href="#156733">a</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Stack</span><a href="CompleteLattice.scala.html#33362">stack</a></span> 
        <span class="keyword">else</span> <span class="typed"><span class="type">object List</span><a id="527">List</a></span>.<span class="typed"><span class="type">(List[scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.StackPos],List[scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.StackPos])((scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.StackPos, scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.StackPos) =&gt; scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)])List[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]]</span><a id="21449">map2</a></span>(<span class="typed"><span class="type">scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Elem</span><a href="#156733">a</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Stack</span><a href="CompleteLattice.scala.html#33362">stack</a></span>, <span class="typed"><span class="type">scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Elem</span><a href="#156734">b</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Stack</span><a href="CompleteLattice.scala.html#33362">stack</a></span>) (<span class="typed"><span class="type">scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.StackPos</span><a href="#156757">_</a></span> <span class="typed"><span class="type">(Iterable[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)])scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><a id="31140">++</a></span> <span class="typed"><span class="type">scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.StackPos</span><a href="#156758">_</a></span>)
        
        <span class="keyword">val</span> <span class="typed"><span class="type">scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.IState[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)],scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Stack]</span><a id="156739">res</a></span> = <span class="typed"><span class="type">(scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)],scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Stack)scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.IState[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)],scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Stack]</span><a href="CompleteLattice.scala.html#61342">IState</a></span>(<span class="typed"><span class="type">scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><a href="#156737">locals</a></span>, <span class="typed"><span class="type">scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Stack</span><a href="#156738">stack</a></span>)
      
<span class="comment">//        Console.println(&quot;\tlub2: &quot; + a + &quot;, &quot; + b)</span>
<span class="comment">//        Console.println(&quot;\tis: &quot; + res)</span>
      
<span class="comment">//        if (res._1 eq bottom._1) (new ListSet[Definition], Nil)</span>
<span class="comment">//        else res</span>
        <span class="typed"><span class="type">scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.IState[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)],scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Stack]</span><a href="#156739">res</a></span>
      }
  }

  <span class="keyword">class</span> <span class="typed"><span class="type">class ReachingDefinitionsAnalysis extends java.lang.Object with scala.tools.nsc.backend.icode.analysis.DataFlowAnalysis[ReachingDefinitions.this.rdefLattice.type] with ScalaObject</span><a id="32714">ReachingDefinitionsAnalysis</a></span> <span class="keyword">extends</span> <span class="typed"><span class="type">scala.tools.nsc.backend.icode.analysis.DataFlowAnalysis[ReachingDefinitions.this.rdefLattice.type]</span><a href="DataFlowAnalysis.scala.html#16657">DataFlowAnalysis</a></span>[rdefLattice.<span class="keyword">type</span>] {
    <span class="keyword">type</span> <span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.BasicBlock</span><a id="32762">P</a></span> = <span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.BasicBlock</span><a href="../BasicBlocks.scala.html#32337">BasicBlock</a></span>
    <span class="keyword">val</span> <span class="typed"><span class="type">ReachingDefinitions.this.rdefLattice.type</span><span id="32764"><a id="32763">lattice</a></span></span> = <span class="typed"><span class="type">object ReachingDefinitions.this.rdefLattice</span><a href="#32712">rdefLattice</a></span>
    <span class="keyword">import</span> lattice.Definition
    <span class="keyword">import</span> lattice.Stack
    <span class="keyword">import</span> lattice.Elem

    <span class="keyword">var</span> <span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.IMethod</span><span id="32770"><span id="32768"><span id="32769"><a id="156773">method</a></span></span></span></span>: <span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.IMethod</span><a href="../Members.scala.html#32332">IMethod</a></span> = _

    <span class="keyword">val</span> <span class="typed"><span class="type">scala.collection.jcl.Map[ReachingDefinitions.this.global.icodes.BasicBlock,scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]]</span><span id="32772"><a id="32771">gen</a></span></span>: <span class="typed"><span class="type">scala.collection.jcl.Map[ReachingDefinitions.this.global.icodes.BasicBlock,scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]]</span><a id="24347">Map</a></span>[BasicBlock, Set[Definition]] = <span class="typed"><span class="type">()scala.collection.jcl.HashMap[ReachingDefinitions.this.global.icodes.BasicBlock,scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]]</span><a id="133339" class="keyword">new</a></span> <span class="typed"><span class="type">scala.collection.jcl.HashMap[ReachingDefinitions.this.global.icodes.BasicBlock,scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]]</span><a id="24527">HashMap</a></span>()
    <span class="keyword">val</span> <span class="typed"><span class="type">scala.collection.jcl.Map[ReachingDefinitions.this.global.icodes.BasicBlock,scala.collection.immutable.Set[ReachingDefinitions.this.global.icodes.Local]]</span><span id="32774"><a id="32773">kill</a></span></span>:<span class="typed"><span class="type">scala.collection.jcl.Map[ReachingDefinitions.this.global.icodes.BasicBlock,scala.collection.immutable.Set[ReachingDefinitions.this.global.icodes.Local]]</span><a id="24347">Map</a></span>[BasicBlock, Set[Local]]      = <span class="typed"><span class="type">()scala.collection.jcl.HashMap[ReachingDefinitions.this.global.icodes.BasicBlock,scala.collection.immutable.Set[ReachingDefinitions.this.global.icodes.Local]]</span><a id="133339" class="keyword">new</a></span> <span class="typed"><span class="type">scala.collection.jcl.HashMap[ReachingDefinitions.this.global.icodes.BasicBlock,scala.collection.immutable.Set[ReachingDefinitions.this.global.icodes.Local]]</span><a id="24527">HashMap</a></span>()
    <span class="keyword">val</span> <span class="typed"><span class="type">scala.collection.jcl.Map[ReachingDefinitions.this.global.icodes.BasicBlock,Int]</span><span id="32776"><a id="32775">drops</a></span></span>: <span class="typed"><span class="type">scala.collection.jcl.Map[ReachingDefinitions.this.global.icodes.BasicBlock,Int]</span><a id="24347">Map</a></span>[BasicBlock, Int]           = <span class="typed"><span class="type">()scala.collection.jcl.HashMap[ReachingDefinitions.this.global.icodes.BasicBlock,Int]</span><a id="133339" class="keyword">new</a></span> <span class="typed"><span class="type">scala.collection.jcl.HashMap[ReachingDefinitions.this.global.icodes.BasicBlock,Int]</span><a id="24527">HashMap</a></span>()
    <span class="keyword">val</span> <span class="typed"><span class="type">scala.collection.jcl.Map[ReachingDefinitions.this.global.icodes.BasicBlock,ReachingDefinitionsAnalysis.this.lattice.Stack]</span><span id="32778"><a id="32777">outStack</a></span></span>: <span class="typed"><span class="type">scala.collection.jcl.Map[ReachingDefinitions.this.global.icodes.BasicBlock,ReachingDefinitionsAnalysis.this.lattice.Stack]</span><a id="24347">Map</a></span>[BasicBlock, Stack]      = <span class="typed"><span class="type">()scala.collection.jcl.HashMap[ReachingDefinitions.this.global.icodes.BasicBlock,ReachingDefinitionsAnalysis.this.lattice.Stack]</span><a id="133339" class="keyword">new</a></span> <span class="typed"><span class="type">scala.collection.jcl.HashMap[ReachingDefinitions.this.global.icodes.BasicBlock,ReachingDefinitionsAnalysis.this.lattice.Stack]</span><a id="24527">HashMap</a></span>()

    <span class="keyword">def</span> <span class="typed"><span class="type">(ReachingDefinitions.this.global.icodes.IMethod)Unit</span><a id="32779">init</a></span>(<span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.IMethod</span><a id="33347">m</a></span>: <span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.IMethod</span><a href="../Members.scala.html#32332">IMethod</a></span>) {
      <span class="typed"><span class="type">ReachingDefinitionsAnalysis.this.type</span><a href="#32714" class="keyword">this</a></span>.<span class="typed"><span class="type">(ReachingDefinitions.this.global.icodes.IMethod)Unit</span><a href="#32769">method</a></span> = <span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.IMethod</span><a href="#33347">m</a></span>
      <span class="typed"><span class="type">=&gt; scala.collection.jcl.Map[ReachingDefinitions.this.global.icodes.BasicBlock,scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]]</span><a href="#32771">gen</a></span>.<span class="typed"><span class="type">()Unit</span><a id="24784">clear</a></span>;   <span class="typed"><span class="type">=&gt; scala.collection.jcl.Map[ReachingDefinitions.this.global.icodes.BasicBlock,scala.collection.immutable.Set[ReachingDefinitions.this.global.icodes.Local]]</span><a href="#32773">kill</a></span>.<span class="typed"><span class="type">()Unit</span><a id="24784">clear</a></span>
      <span class="typed"><span class="type">=&gt; scala.collection.jcl.Map[ReachingDefinitions.this.global.icodes.BasicBlock,Int]</span><a href="#32775">drops</a></span>.<span class="typed"><span class="type">()Unit</span><a id="24784">clear</a></span>; <span class="typed"><span class="type">=&gt; scala.collection.jcl.Map[ReachingDefinitions.this.global.icodes.BasicBlock,ReachingDefinitionsAnalysis.this.lattice.Stack]</span><a href="#32777">outStack</a></span>.<span class="typed"><span class="type">()Unit</span><a id="24784">clear</a></span>

      <span class="keyword">for</span> (<span class="typed"><span class="type">(((ReachingDefinitions.this.global.icodes.BasicBlock, (scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)], scala.collection.immutable.Set[ReachingDefinitions.this.global.icodes.Local]), (Int, List[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]]))) =&gt; Unit)Unit</span><span id="156832"><span id="21366"><span id="23590"><span id="21362"><span id="156815"><span id="156825"><span id="156844"><span id="23578"><span id="156821"><span id="449"><a id="156817">b</a></span></span></span></span></span></span></span></span></span></span></span> &lt;- <span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.IMethod</span><a href="#33347">m</a></span>.<span class="typed"><span class="type">=&gt; ReachingDefinitions.this.global.icodes.Code</span><a href="../Members.scala.html#32867">code</a></span>.<span class="typed"><span class="type">=&gt; scala.collection.mutable.ListBuffer[ReachingDefinitions.this.global.icodes.BasicBlock]</span><a href="../Members.scala.html#33274">blocks</a></span>.<span class="typed"><span class="type">=&gt; List[ReachingDefinitions.this.global.icodes.BasicBlock]</span><a id="33309">toList</a></span>;
           <a id="1">(</a><span class="typed"><span class="type">scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><span id="156826"><span id="156818"><span id="23580"><a href="#156816" id="156845">g</a></span></span></span></span>, <span class="typed"><span class="type">scala.collection.immutable.Set[ReachingDefinitions.this.global.icodes.Local]</span><span id="156827"><span id="156819"><span id="23582"><a href="#156816" id="156846">k</a></span></span></span></span>) = <span class="typed"><span class="type">(ReachingDefinitions.this.global.icodes.BasicBlock)(scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)], scala.collection.immutable.Set[ReachingDefinitions.this.global.icodes.Local])</span><a href="#32781">genAndKill</a></span>(<span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.BasicBlock</span><a href="#156815">b</a></span>);
           <a id="1">(</a><span class="typed"><span class="type">Int</span><span id="156833"><span id="156822"><span id="23580"><a href="#156820" id="156847">d</a></span></span></span></span>, <span class="typed"><span class="type">List[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]]</span><span id="156834"><span id="156823"><span id="23582"><a href="#156820" id="156848">st</a></span></span></span></span>) = <span class="typed"><span class="type">(ReachingDefinitions.this.global.icodes.BasicBlock)(Int, List[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]])</span><a href="#32782">dropsAndGen</a></span>(<span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.BasicBlock</span><a href="#156815">b</a></span>)) {
        <span class="typed"><span class="type">=&gt; scala.collection.jcl.Map[ReachingDefinitions.this.global.icodes.BasicBlock,scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]]</span><a href="#32771">gen</a></span>  <span class="typed"><span class="type">((ReachingDefinitions.this.global.icodes.BasicBlock, scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]))Unit</span><a id="24796">+=</a></span> (<span class="typed"><span class="type">(ReachingDefinitions.this.global.icodes.BasicBlock)ArrowAssoc[ReachingDefinitions.this.global.icodes.BasicBlock]</span><span id="6054"><a href="#156844" id="821">b</a></span></span> <span class="typed"><span class="type">(scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)])(ReachingDefinitions.this.global.icodes.BasicBlock, scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)])</span><a id="6050">-&gt;</a></span> <span class="typed"><span class="type">scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><a href="#156845">g</a></span>)
        <span class="typed"><span class="type">=&gt; scala.collection.jcl.Map[ReachingDefinitions.this.global.icodes.BasicBlock,scala.collection.immutable.Set[ReachingDefinitions.this.global.icodes.Local]]</span><a href="#32773">kill</a></span> <span class="typed"><span class="type">((ReachingDefinitions.this.global.icodes.BasicBlock, scala.collection.immutable.Set[ReachingDefinitions.this.global.icodes.Local]))Unit</span><a id="24796">+=</a></span> (<span class="typed"><span class="type">(ReachingDefinitions.this.global.icodes.BasicBlock)ArrowAssoc[ReachingDefinitions.this.global.icodes.BasicBlock]</span><span id="6054"><a href="#156844" id="821">b</a></span></span> <span class="typed"><span class="type">(scala.collection.immutable.Set[ReachingDefinitions.this.global.icodes.Local])(ReachingDefinitions.this.global.icodes.BasicBlock, scala.collection.immutable.Set[ReachingDefinitions.this.global.icodes.Local])</span><a id="6050">-&gt;</a></span> <span class="typed"><span class="type">scala.collection.immutable.Set[ReachingDefinitions.this.global.icodes.Local]</span><a href="#156846">k</a></span>)
        <span class="typed"><span class="type">=&gt; scala.collection.jcl.Map[ReachingDefinitions.this.global.icodes.BasicBlock,Int]</span><a href="#32775">drops</a></span> <span class="typed"><span class="type">((ReachingDefinitions.this.global.icodes.BasicBlock, Int))Unit</span><a id="24796">+=</a></span> (<span class="typed"><span class="type">(ReachingDefinitions.this.global.icodes.BasicBlock)ArrowAssoc[ReachingDefinitions.this.global.icodes.BasicBlock]</span><span id="6054"><a href="#156844" id="821">b</a></span></span> <span class="typed"><span class="type">(Int)(ReachingDefinitions.this.global.icodes.BasicBlock, Int)</span><a id="6050">-&gt;</a></span> <span class="typed"><span class="type">Int</span><a href="#156847">d</a></span>)
        <span class="typed"><span class="type">=&gt; scala.collection.jcl.Map[ReachingDefinitions.this.global.icodes.BasicBlock,ReachingDefinitionsAnalysis.this.lattice.Stack]</span><a href="#32777">outStack</a></span> <span class="typed"><span class="type">((ReachingDefinitions.this.global.icodes.BasicBlock, ReachingDefinitionsAnalysis.this.lattice.Stack))Unit</span><a id="24796">+=</a></span> (<span class="typed"><span class="type">(ReachingDefinitions.this.global.icodes.BasicBlock)ArrowAssoc[ReachingDefinitions.this.global.icodes.BasicBlock]</span><span id="6054"><a href="#156844" id="821">b</a></span></span> <span class="typed"><span class="type">(List[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]])(ReachingDefinitions.this.global.icodes.BasicBlock, List[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]])</span><a id="6050">-&gt;</a></span> <span class="typed"><span class="type">List[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]]</span><a href="#156848">st</a></span>)
      }

      <span class="typed"><span class="type">(=&gt; Unit)Unit</span><a href="DataFlowAnalysis.scala.html#32756">init</a></span> {
        <span class="typed"><span class="type">=&gt; scala.collection.jcl.Set[ReachingDefinitionsAnalysis.this.P]</span><a href="DataFlowAnalysis.scala.html#32742">worklist</a></span> <span class="typed"><span class="type">(Iterable[ReachingDefinitionsAnalysis.this.P])Unit</span><a id="25513">++=</a></span> <span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.IMethod</span><a href="#33347">m</a></span>.<span class="typed"><span class="type">=&gt; ReachingDefinitions.this.global.icodes.Code</span><a href="../Members.scala.html#32867">code</a></span>.<span class="typed"><span class="type">=&gt; scala.collection.mutable.ListBuffer[ReachingDefinitions.this.global.icodes.BasicBlock]</span><a href="../Members.scala.html#33274">blocks</a></span>.<span class="typed"><span class="type">=&gt; List[ReachingDefinitions.this.global.icodes.BasicBlock]</span><a id="33309">toList</a></span>
        <span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.IMethod</span><a href="#33347">m</a></span>.<span class="typed"><span class="type">=&gt; ReachingDefinitions.this.global.icodes.Code</span><a href="../Members.scala.html#32867">code</a></span>.<span class="typed"><span class="type">=&gt; scala.collection.mutable.ListBuffer[ReachingDefinitions.this.global.icodes.BasicBlock]</span><a href="../Members.scala.html#33274">blocks</a></span>.<span class="typed"><span class="type">((ReachingDefinitions.this.global.icodes.BasicBlock) =&gt; Unit)Unit</span><a id="21792">foreach</a></span> { <span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.BasicBlock</span><a id="156893">b</a></span> =&gt;
          <span class="typed"><span class="type">=&gt; scala.collection.mutable.Map[ReachingDefinitionsAnalysis.this.P,ReachingDefinitionsAnalysis.this.lattice.Elem]</span><a href="DataFlowAnalysis.scala.html#32744">in</a></span>(<span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.BasicBlock</span><a href="#156893">b</a></span>)  = <span class="typed"><span class="type">=&gt; ReachingDefinitions.this.rdefLattice.type</span><a href="#32763">lattice</a></span>.<span class="typed"><span class="type">=&gt; ReachingDefinitionsAnalysis.this.lattice.Elem</span><a href="#32736">bottom</a></span>
          <span class="typed"><span class="type">=&gt; scala.collection.mutable.Map[ReachingDefinitionsAnalysis.this.P,ReachingDefinitionsAnalysis.this.lattice.Elem]</span><a href="DataFlowAnalysis.scala.html#32746">out</a></span>(<span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.BasicBlock</span><a href="#156893">b</a></span>) = <span class="typed"><span class="type">=&gt; ReachingDefinitions.this.rdefLattice.type</span><a href="#32763">lattice</a></span>.<span class="typed"><span class="type">=&gt; ReachingDefinitionsAnalysis.this.lattice.Elem</span><a href="#32736">bottom</a></span>
        } 
        <span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.IMethod</span><a href="#33347">m</a></span>.<span class="typed"><span class="type">=&gt; List[ReachingDefinitions.this.global.icodes.ExceptionHandler]</span><a href="../Members.scala.html#32873">exh</a></span> <span class="typed"><span class="type">((ReachingDefinitions.this.global.icodes.ExceptionHandler) =&gt; Unit)Unit</span><a id="21366">foreach</a></span> { <span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.ExceptionHandler</span><a id="156896">e</a></span> =&gt;
          <span class="typed"><span class="type">=&gt; scala.collection.mutable.Map[ReachingDefinitionsAnalysis.this.P,ReachingDefinitionsAnalysis.this.lattice.Elem]</span><a href="DataFlowAnalysis.scala.html#32744">in</a></span>(<span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.ExceptionHandler</span><a href="#156896">e</a></span>.<span class="typed"><span class="type">=&gt; ReachingDefinitions.this.global.icodes.BasicBlock</span><a href="../ExceptionHandlers.scala.html#51919">startBlock</a></span>) = <span class="typed"><span class="type">=&gt; ReachingDefinitions.this.rdefLattice.type</span><a href="#32763">lattice</a></span>.<span class="typed"><span class="type">(scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)],ReachingDefinitionsAnalysis.this.lattice.Stack)ReachingDefinitionsAnalysis.this.lattice.IState[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)],ReachingDefinitionsAnalysis.this.lattice.Stack]</span><a href="CompleteLattice.scala.html#61342">IState</a></span>(<span class="typed"><span class="type">scala.collection.immutable.ListSet[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><span class="keyword">new</span></span> <span class="typed"><span class="type">scala.collection.immutable.ListSet[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><a id="26287">ListSet</a></span>[Definition], <span class="typed"><span class="type">(scala.collection.immutable.ListSet[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]*)List[scala.collection.immutable.ListSet[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]]</span><span id="21328"><a id="527">List</a></span></span>(<span class="typed"><span class="type">scala.collection.immutable.ListSet[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><span class="keyword">new</span></span> <span class="typed"><span class="type">scala.collection.immutable.ListSet[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><a id="26287">ListSet</a></span>[(BasicBlock, Int)]))
        }
        
      }
    }
    
    <span class="keyword">import</span> opcodes._
    
    <span class="keyword">def</span> <span class="typed"><span class="type">(ReachingDefinitions.this.global.icodes.BasicBlock)(scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)], scala.collection.immutable.Set[ReachingDefinitions.this.global.icodes.Local])</span><a id="32781">genAndKill</a></span>(<span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.BasicBlock</span><a id="156824">b</a></span>: <span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.BasicBlock</span><a href="../BasicBlocks.scala.html#32337">BasicBlock</a></span>): <span class="typed"><span class="type">(scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)], scala.collection.immutable.Set[ReachingDefinitions.this.global.icodes.Local])</span><a id="1378">(</a></span>Set[Definition], Set[Local]) = {
      <span class="keyword">var</span> <span class="typed"><span class="type">scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><a id="156900">genSet</a></span>: <span class="typed"><span class="type">scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><a id="26500">Set</a></span>[Definition] = <span class="typed"><span class="type">scala.collection.immutable.HashSet[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><span class="keyword">new</span></span> <span class="typed"><span class="type">scala.collection.immutable.HashSet[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><a id="26212">HashSet</a></span>
      <span class="keyword">var</span> <span class="typed"><span class="type">scala.collection.immutable.Set[ReachingDefinitions.this.global.icodes.Local]</span><a id="156901">killSet</a></span>: <span class="typed"><span class="type">scala.collection.immutable.Set[ReachingDefinitions.this.global.icodes.Local]</span><a id="26500">Set</a></span>[Local] = <span class="typed"><span class="type">scala.collection.immutable.HashSet[ReachingDefinitions.this.global.icodes.Local]</span><span class="keyword">new</span></span> <span class="typed"><span class="type">scala.collection.immutable.HashSet[ReachingDefinitions.this.global.icodes.Local]</span><a id="26212">HashSet</a></span>
      <span class="keyword">for</span> (<span class="typed"><span class="type">(((ReachingDefinitions.this.global.icodes.Instruction, Int)) =&gt; Unit)Unit</span><span id="21366"><a href="#156906" id="21367">(</a></span></span><span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.Instruction</span><span id="156907"><a id="156912">i</a></span></span>, <span class="typed"><span class="type">Int</span><span id="156908"><a id="156913">idx</a></span></span>) &lt;- <span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.BasicBlock</span><a href="#156824">b</a></span>.<span class="typed"><span class="type">=&gt; List[ReachingDefinitions.this.global.icodes.Instruction]</span><a href="../BasicBlocks.scala.html#33188">toList</a></span>.<span class="typed"><span class="type">=&gt; List[(ReachingDefinitions.this.global.icodes.Instruction, Int)]</span><a id="21388">zipWithIndex</a></span>) <span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.Instruction</span><a href="#156912">i</a></span> <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
        <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">STORE_LOCAL</a>(<span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.Local</span><a id="156914">local</a></span>) =&gt; 
          <span class="typed"><span class="type">scala.collection.immutable.Set[ReachingDefinitions.this.global.icodes.Local]</span><a href="#156901">killSet</a></span> = <span class="typed"><span class="type">scala.collection.immutable.Set[ReachingDefinitions.this.global.icodes.Local]</span><a href="#156901">killSet</a></span> <span class="typed"><span class="type">(ReachingDefinitions.this.global.icodes.Local)scala.collection.immutable.Set[ReachingDefinitions.this.global.icodes.Local]</span><a id="31138">+</a></span> <span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.Local</span><a href="#156914">local</a></span>
          <span class="typed"><span class="type">scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><a href="#156900">genSet</a></span>  = <span class="typed"><span class="type">(ReachingDefinitions.this.global.icodes.BasicBlock,Int,scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)])scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><a href="#32786">updateReachingDefinition</a></span>(<span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.BasicBlock</span><a href="#156824">b</a></span>, <span class="typed"><span class="type">Int</span><a href="#156913">idx</a></span>, <span class="typed"><span class="type">scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><a href="#156900">genSet</a></span>)
        <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> _ =&gt; <span class="typed"><span class="type">Unit</span><span >(</span></span>)
      }
      <span class="typed"><span class="type">(scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)],scala.collection.immutable.Set[ReachingDefinitions.this.global.icodes.Local])(scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)], scala.collection.immutable.Set[ReachingDefinitions.this.global.icodes.Local])</span><span id="23625"><a id="1379">(</a></span></span><span class="typed"><span class="type">scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><a href="#156900">genSet</a></span>, <span class="typed"><span class="type">scala.collection.immutable.Set[ReachingDefinitions.this.global.icodes.Local]</span><a href="#156901">killSet</a></span>)
    }
    
    <span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(ReachingDefinitions.this.global.icodes.BasicBlock)(Int, List[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]])</span><a id="32782">dropsAndGen</a></span>(<span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.BasicBlock</span><a id="156831">b</a></span>: <span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.BasicBlock</span><a href="../BasicBlocks.scala.html#32337">BasicBlock</a></span>): <span class="typed"><span class="type">(Int, List[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]])</span><a id="1378">(</a></span>Int, List[Set[(BasicBlock, Int)]]) = {
      <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="156921">depth</a></span> = <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>
      <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="156922">drops</a></span> = <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>
      <span class="keyword">var</span> <span class="typed"><span class="type">List[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]]</span><a id="156923">stackOut</a></span>: <span class="typed"><span class="type">List[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]]</span><a id="526">List</a></span>[Set[(BasicBlock, Int)]] = <span class="typed"><span class="type">object Nil</span><a id="335">Nil</a></span>
      
      <span class="keyword">for</span> (<span class="typed"><span class="type">(((ReachingDefinitions.this.global.icodes.Instruction, Int)) =&gt; Unit)Unit</span><span id="21366"><a href="#156926" id="21367">(</a></span></span><span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.Instruction</span><span id="156927"><a id="156932">instr</a></span></span>, <span class="typed"><span class="type">Int</span><span id="156928"><a id="156933">idx</a></span></span>) &lt;- <span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.BasicBlock</span><a href="#156831">b</a></span>.<span class="typed"><span class="type">=&gt; List[ReachingDefinitions.this.global.icodes.Instruction]</span><a href="../BasicBlocks.scala.html#33188">toList</a></span>.<span class="typed"><span class="type">=&gt; List[(ReachingDefinitions.this.global.icodes.Instruction, Int)]</span><a id="21388">zipWithIndex</a></span>) {
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.Instruction</span><a href="#156932">instr</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">()ReachingDefinitions.this.global.icodes.opcodes.LOAD_EXCEPTION</span><a href="../Opcodes.scala.html#33656">LOAD_EXCEPTION</a></span>()) 
          <span class="typed"><span class="type">Unit</span><span >(</span></span>)
        <span class="keyword">else</span> <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.Instruction</span><a href="#156932">instr</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a href="../Opcodes.scala.html#33388">consumed</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3145">&gt;</a></span> <span class="typed"><span class="type">Int</span><a href="#156921">depth</a></span>) {
          <span class="typed"><span class="type">Int</span><a href="#156922">drops</a></span> = <span class="typed"><span class="type">Int</span><a href="#156922">drops</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">+</a></span> (<span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.Instruction</span><a href="#156932">instr</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a href="../Opcodes.scala.html#33388">consumed</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3148">-</a></span> <span class="typed"><span class="type">Int</span><a href="#156921">depth</a></span>)
          <span class="typed"><span class="type">Int</span><a href="#156921">depth</a></span> = <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>
          <span class="typed"><span class="type">List[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]]</span><a href="#156923">stackOut</a></span> = <span class="typed"><span class="type">object Nil</span><a id="335">Nil</a></span>
        } <span class="keyword">else</span> {
          <span class="typed"><span class="type">List[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]]</span><a href="#156923">stackOut</a></span> = <span class="typed"><span class="type">List[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]]</span><a href="#156923">stackOut</a></span>.<span class="typed"><span class="type">(Int)List[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]]</span><a id="21353">drop</a></span>(<span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.Instruction</span><a href="#156932">instr</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a href="../Opcodes.scala.html#33388">consumed</a></span>)
          <span class="typed"><span class="type">Int</span><a href="#156921">depth</a></span> = <span class="typed"><span class="type">Int</span><a href="#156921">depth</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3148">-</a></span> <span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.Instruction</span><a href="#156932">instr</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a href="../Opcodes.scala.html#33388">consumed</a></span>
        }
        <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="156934">prod</a></span> = <span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.Instruction</span><a href="#156932">instr</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a href="../Opcodes.scala.html#33389">produced</a></span>
        <span class="typed"><span class="type">Int</span><a href="#156921">depth</a></span> = <span class="typed"><span class="type">Int</span><a href="#156921">depth</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">+</a></span> <span class="typed"><span class="type">Int</span><a href="#156934">prod</a></span>
        <span class="typed"><span class="type">Unit</span><a href="#156989" class="keyword">while</a></span> (<span class="typed"><span class="type">Int</span><a href="#156934">prod</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3145">&gt;</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>) {
          <span class="typed"><span class="type">List[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]]</span><a href="#156923">stackOut</a></span> = (<span class="typed"><span class="type">scala.collection.immutable.Set1[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><span class="keyword">new</span></span> collection.immutable.<span class="typed"><span class="type">scala.collection.immutable.Set1[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><a id="26626">Set1</a></span>(<span class="typed"><span class="type">(ReachingDefinitions.this.global.icodes.BasicBlock,Int)(ReachingDefinitions.this.global.icodes.BasicBlock, Int)</span><span id="23625"><a id="1379">(</a></span></span><span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.BasicBlock</span><a href="#156831">b</a></span>, <span class="typed"><span class="type">Int</span><a href="#156933">idx</a></span>))) <span class="typed"><span class="type">(scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)])List[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]]</span><a href="#156991" id="21335">::</a></span> <span class="typed"><span class="type">List[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]]</span><a href="#156923">stackOut</a></span>
          <span class="typed"><span class="type">Int</span><a href="#156934">prod</a></span> = <span class="typed"><span class="type">Int</span><a href="#156934">prod</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3148">-</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
        }
      }
<span class="comment">//      Console.println(&quot;drops(&quot; + b + &quot;) = &quot; + drops)</span>
<span class="comment">//      Console.println(&quot;stackout(&quot; + b + &quot;) = &quot; + stackOut)</span>
      <span class="typed"><span class="type">(Int,List[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]])(Int, List[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]])</span><span id="23625"><a id="1379">(</a></span></span><span class="typed"><span class="type">Int</span><a href="#156922">drops</a></span>, <span class="typed"><span class="type">List[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]]</span><a href="#156923">stackOut</a></span>)
    }
    
    <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Unit</span><a id="32783">run</a></span> {
      <span class="typed"><span class="type">((ReachingDefinitionsAnalysis.this.P, ReachingDefinitionsAnalysis.this.lattice.Elem) =&gt; ReachingDefinitionsAnalysis.this.lattice.Elem)Unit</span><a href="DataFlowAnalysis.scala.html#32759">forwardAnalysis</a></span>(<span class="typed"><span class="type">(ReachingDefinitions.this.global.icodes.BasicBlock,ReachingDefinitionsAnalysis.this.lattice.Elem)ReachingDefinitionsAnalysis.this.lattice.Elem</span><a href="#32787">blockTransfer</a></span>)
      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="../../../Global.scala.html#21157">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting</span><a href="../../../Settings.scala.html#30066">debug</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting#T</span><a href="../../../Settings.scala.html#30301">value</a></span>) {
        <span class="typed"><span class="type">=&gt; ReachingDefinitions.this.global.icodes.Linearizer</span><a href="../ICodes.scala.html#32308">linearizer</a></span>.<span class="typed"><span class="type">(ReachingDefinitions.this.global.icodes.IMethod)List[ReachingDefinitions.this.global.icodes.BasicBlock]</span><a href="../Linearizers.scala.html#33332">linearize</a></span>(<span class="typed"><span class="type">=&gt; ReachingDefinitions.this.global.icodes.IMethod</span><a href="#32768">method</a></span>).<span class="typed"><span class="type">((ReachingDefinitions.this.global.icodes.BasicBlock) =&gt; Unit)Unit</span><a id="21366">foreach</a></span>(<span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.BasicBlock</span><a id="157032">b</a></span> =&gt; <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.BasicBlock</span><a href="#157032">b</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5793">!=</a></span> <span class="typed"><span class="type">=&gt; ReachingDefinitions.this.global.icodes.IMethod</span><a href="#32768">method</a></span>.<span class="typed"><span class="type">=&gt; ReachingDefinitions.this.global.icodes.Code</span><a href="../Members.scala.html#32867">code</a></span>.<span class="typed"><span class="type">=&gt; ReachingDefinitions.this.global.icodes.BasicBlock</span><a href="../Members.scala.html#33276">startBlock</a></span>)
          <span class="typed"><span class="type">(Boolean,=&gt; Any)Unit</span><span id="6004"><a id="821">assert</a></span></span>(<span class="typed"><span class="type">=&gt; ReachingDefinitions.this.rdefLattice.type</span><a href="#32763">lattice</a></span>.<span class="typed"><span class="type">=&gt; ReachingDefinitionsAnalysis.this.lattice.Elem</span><a href="#32736">bottom</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5793">!=</a></span> <span class="typed"><span class="type">(ReachingDefinitionsAnalysis.this.P)ReachingDefinitionsAnalysis.this.lattice.Elem</span><a href="DataFlowAnalysis.scala.html#32744" id="24239">in</a></span>(<span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.BasicBlock</span><a href="#157032">b</a></span>),
            <span class="typed"><span class="type">java.lang.String(&quot;Block &quot;)</span><span class="string">&quot;Block &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.BasicBlock</span><a href="#157032">b</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot; in &quot;)</span><span class="string">&quot; in &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">ReachingDefinitionsAnalysis.this.type</span><a href="#32714" class="keyword">this</a></span>.<span class="typed"><span class="type">=&gt; ReachingDefinitions.this.global.icodes.IMethod</span><a href="#32768">method</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot; has input equal to bottom -- not visited? &quot;)</span><span class="string">&quot; has input equal to bottom -- not visited? &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">(ReachingDefinitionsAnalysis.this.P)ReachingDefinitionsAnalysis.this.lattice.Elem</span><a href="DataFlowAnalysis.scala.html#32744" id="24239">in</a></span>(<span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.BasicBlock</span><a href="#157032">b</a></span>)
                 <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;: bot: &quot;)</span><span class="string">&quot;: bot: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">=&gt; ReachingDefinitions.this.rdefLattice.type</span><a href="#32763">lattice</a></span>.<span class="typed"><span class="type">=&gt; ReachingDefinitionsAnalysis.this.lattice.Elem</span><a href="#32736">bottom</a></span>
                 <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;\012in(b) == bottom: &quot;)</span><span class="string">&quot;\nin(b) == bottom: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> (<span class="typed"><span class="type">(ReachingDefinitionsAnalysis.this.P)ReachingDefinitionsAnalysis.this.lattice.Elem</span><a href="DataFlowAnalysis.scala.html#32744" id="24239">in</a></span>(<span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.BasicBlock</span><a href="#157032">b</a></span>) <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">=&gt; ReachingDefinitions.this.rdefLattice.type</span><a href="#32763">lattice</a></span>.<span class="typed"><span class="type">=&gt; ReachingDefinitionsAnalysis.this.lattice.Elem</span><a href="#32736">bottom</a></span>)
                 <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;\012bottom == in(b): &quot;)</span><span class="string">&quot;\nbottom == in(b): &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> (<span class="typed"><span class="type">=&gt; ReachingDefinitions.this.rdefLattice.type</span><a href="#32763">lattice</a></span>.<span class="typed"><span class="type">=&gt; ReachingDefinitionsAnalysis.this.lattice.Elem</span><a href="#32736">bottom</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">(ReachingDefinitionsAnalysis.this.P)ReachingDefinitionsAnalysis.this.lattice.Elem</span><a href="DataFlowAnalysis.scala.html#32744" id="24239">in</a></span>(<span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.BasicBlock</span><a href="#157032">b</a></span>))));
      }
    }

    <span class="keyword">import</span> opcodes._
    <span class="keyword">import</span> lattice.IState
    <span class="keyword">def</span> <span class="typed"><span class="type">(ReachingDefinitions.this.global.icodes.BasicBlock,Int,scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)])scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><a id="32786">updateReachingDefinition</a></span>(<span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.BasicBlock</span><a id="156916">b</a></span>: <span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.BasicBlock</span><a href="../BasicBlocks.scala.html#32337">BasicBlock</a></span>, <span class="typed"><span class="type">Int</span><a id="156917">idx</a></span>: <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span>, <span class="typed"><span class="type">scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><a id="156918">rd</a></span>: <span class="typed"><span class="type">scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><a id="26500">Set</a></span>[Definition]): <span class="typed"><span class="type">scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><a id="26500">Set</a></span>[Definition] = {
      <span class="keyword">val</span> <span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.Local</span><a href="#157062">STORE_LOCAL</a></span>(<span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.Local</span><span id="157057"><a id="157062">local</a></span></span>) = <span class="typed"><span class="type">(Int)ReachingDefinitions.this.global.icodes.Instruction</span><a href="../BasicBlocks.scala.html#33196">b</a></span>(<span class="typed"><span class="type">Int</span><a href="#156917">idx</a></span>)
      <span class="keyword">var</span> <span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.Local</span><a id="157058">tmp</a></span> = <span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.Local</span><a href="#157057">local</a></span>
      (<span class="typed"><span class="type">scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><a href="#156918">rd</a></span> <span class="typed"><span class="type">(((ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)) =&gt; Boolean)scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><a id="31156">filter</a></span> <span class="typed"><span class="type">Boolean</span><a href="#157064">{</a></span> <span class="typed"><span class="type">Boolean</span><span class="keyword">case</span></span> <a id="1">(</a><span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.Local</span><a id="157065">l</a></span>, _, _) =&gt; <span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.Local</span><a href="#157065">l</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5793">!=</a></span> <span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.Local</span><a href="#157058">tmp</a></span> }) <span class="typed"><span class="type">((ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int))scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><a id="31138">+</a></span> (<span class="typed"><span class="type">(ReachingDefinitions.this.global.icodes.Local,ReachingDefinitions.this.global.icodes.BasicBlock,Int)(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)</span><span id="23590"><a id="449">(</a></span></span><span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.Local</span><a href="#157058">tmp</a></span>, <span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.BasicBlock</span><a href="#156916">b</a></span>, <span class="typed"><span class="type">Int</span><a href="#156917">idx</a></span>))
    }
    
    <span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(ReachingDefinitions.this.global.icodes.BasicBlock,ReachingDefinitionsAnalysis.this.lattice.Elem)ReachingDefinitionsAnalysis.this.lattice.Elem</span><a id="32787">blockTransfer</a></span>(<span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.BasicBlock</span><a id="157023">b</a></span>: <span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.BasicBlock</span><a href="../BasicBlocks.scala.html#32337">BasicBlock</a></span>, <span class="typed"><span class="type">ReachingDefinitionsAnalysis.this.lattice.Elem</span><a id="157024">in</a></span>: lattice.<span class="typed"><span class="type">ReachingDefinitionsAnalysis.this.lattice.Elem</span><a href="CompleteLattice.scala.html#32720">Elem</a></span>): lattice.<span class="typed"><span class="type">ReachingDefinitionsAnalysis.this.lattice.Elem</span><a href="CompleteLattice.scala.html#32720">Elem</a></span> = {
      <span class="keyword">var</span> <span class="typed"><span class="type">scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><a id="157071">locals</a></span>: <span class="typed"><span class="type">scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><a id="26500">Set</a></span>[Definition] = (<span class="typed"><span class="type">ReachingDefinitionsAnalysis.this.lattice.Elem</span><a href="#157024">in</a></span>.<span class="typed"><span class="type">=&gt; scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><a href="CompleteLattice.scala.html#33360">vars</a></span> <span class="typed"><span class="type">(((ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)) =&gt; Boolean)scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><a id="31156">filter</a></span> <span class="typed"><span class="type">Boolean</span><a href="#157073">{</a></span> <span class="typed"><span class="type">Boolean</span><span class="keyword">case</span></span> <a id="1">(</a><span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.Local</span><a id="157074">l</a></span>, _, _) =&gt; <span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">(ReachingDefinitions.this.global.icodes.Local)Boolean</span><span id="25543"><a href="#32773" id="24239">kill</a></span></span>(<span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.BasicBlock</span><a href="#157023">b</a></span>)(<span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.Local</span><a href="#157074">l</a></span>) }) <span class="typed"><span class="type">(Iterable[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)])scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><a id="31140">++</a></span> <span class="typed"><span class="type">(ReachingDefinitions.this.global.icodes.BasicBlock)scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><a href="#32771" id="24239">gen</a></span>(<span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.BasicBlock</span><a href="#157023">b</a></span>)
      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><a href="#157071">locals</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5794">eq</a></span> <span class="typed"><span class="type">=&gt; ReachingDefinitions.this.rdefLattice.type</span><a href="#32763">lattice</a></span>.<span class="typed"><span class="type">=&gt; ReachingDefinitionsAnalysis.this.lattice.Elem</span><a href="#32736">bottom</a></span>.<span class="typed"><span class="type">=&gt; scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><a href="CompleteLattice.scala.html#33360">vars</a></span>) <span class="typed"><span class="type">scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><a href="#157071">locals</a></span> = <span class="typed"><span class="type">scala.collection.immutable.ListSet[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><span class="keyword">new</span></span> <span class="typed"><span class="type">scala.collection.immutable.ListSet[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><a id="26287">ListSet</a></span>[Definition]
      <span class="typed"><span class="type">(scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)],List[ReachingDefinitionsAnalysis.this.lattice.StackPos])ReachingDefinitionsAnalysis.this.lattice.IState[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)],List[ReachingDefinitionsAnalysis.this.lattice.StackPos]]</span><a href="CompleteLattice.scala.html#61342">IState</a></span>(<span class="typed"><span class="type">scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><a href="#157071">locals</a></span>, <span class="typed"><span class="type">(ReachingDefinitions.this.global.icodes.BasicBlock)ReachingDefinitionsAnalysis.this.lattice.Stack</span><a href="#32777" id="24239">outStack</a></span>(<span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.BasicBlock</span><a href="#157023">b</a></span>) <span class="typed"><span class="type">(List[ReachingDefinitionsAnalysis.this.lattice.StackPos])List[ReachingDefinitionsAnalysis.this.lattice.StackPos]</span><a href="#157104" id="21339">:::</a></span> <span class="typed"><span class="type">ReachingDefinitionsAnalysis.this.lattice.Elem</span><a href="#157024">in</a></span>.<span class="typed"><span class="type">=&gt; ReachingDefinitionsAnalysis.this.lattice.Stack</span><a href="CompleteLattice.scala.html#33362">stack</a></span>.<span class="typed"><span class="type">(Int)List[ReachingDefinitionsAnalysis.this.lattice.StackPos]</span><a id="21353">drop</a></span>(<span class="typed"><span class="type">(ReachingDefinitions.this.global.icodes.BasicBlock)Int</span><a href="#32775" id="24239">drops</a></span>(<span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.BasicBlock</span><a href="#157023">b</a></span>)))
    }
    
    <span class="comment">/** Return the reaching definitions corresponding to the point after idx. */</span>
    <span class="keyword">def</span> <span class="typed"><span class="type">(ReachingDefinitions.this.global.icodes.BasicBlock,Int,ReachingDefinitionsAnalysis.this.lattice.Elem)ReachingDefinitionsAnalysis.this.lattice.Elem</span><a id="32788">interpret</a></span>(<span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.BasicBlock</span><a id="33832">b</a></span>: <span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.BasicBlock</span><a href="../BasicBlocks.scala.html#32337">BasicBlock</a></span>, <span class="typed"><span class="type">Int</span><a id="33833">idx</a></span>: <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span>, <span class="typed"><span class="type">ReachingDefinitionsAnalysis.this.lattice.Elem</span><a id="33834">in</a></span>: lattice.<span class="typed"><span class="type">ReachingDefinitionsAnalysis.this.lattice.Elem</span><a href="CompleteLattice.scala.html#32720">Elem</a></span>): <span class="typed"><span class="type">ReachingDefinitionsAnalysis.this.lattice.Elem</span><a href="CompleteLattice.scala.html#32720">Elem</a></span> = {
      <span class="keyword">var</span> <span class="typed"><span class="type">scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><a id="157113">locals</a></span> = <span class="typed"><span class="type">ReachingDefinitionsAnalysis.this.lattice.Elem</span><a href="#33834">in</a></span>.<span class="typed"><span class="type">=&gt; scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><a href="CompleteLattice.scala.html#33360">vars</a></span>
      <span class="keyword">var</span> <span class="typed"><span class="type">ReachingDefinitionsAnalysis.this.lattice.Stack</span><a id="157114">stack</a></span>  = <span class="typed"><span class="type">ReachingDefinitionsAnalysis.this.lattice.Elem</span><a href="#33834">in</a></span>.<span class="typed"><span class="type">=&gt; ReachingDefinitionsAnalysis.this.lattice.Stack</span><a href="CompleteLattice.scala.html#33362">stack</a></span>
      <span class="keyword">val</span> <span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.Instruction</span><a id="157115">instr</a></span> = <span class="typed"><span class="type">(Int)ReachingDefinitions.this.global.icodes.Instruction</span><a href="../BasicBlocks.scala.html#33196">b</a></span>(<span class="typed"><span class="type">Int</span><a href="#33833">idx</a></span>)
      <span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.Instruction</span><a href="#157115">instr</a></span> <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
        <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">STORE_LOCAL</a>(<span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.Local</span><a id="157121">l1</a></span>) =&gt;
          <span class="typed"><span class="type">scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><a href="#157113">locals</a></span> = <span class="typed"><span class="type">(ReachingDefinitions.this.global.icodes.BasicBlock,Int,scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)])scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><a href="#32786">updateReachingDefinition</a></span>(<span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.BasicBlock</span><a href="#33832">b</a></span>, <span class="typed"><span class="type">Int</span><a href="#33833">idx</a></span>, <span class="typed"><span class="type">scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><a href="#157113">locals</a></span>)
          <span class="typed"><span class="type">ReachingDefinitionsAnalysis.this.lattice.Stack</span><a href="#157114">stack</a></span> = <span class="typed"><span class="type">ReachingDefinitionsAnalysis.this.lattice.Stack</span><a href="#157114">stack</a></span>.<span class="typed"><span class="type">(Int)List[ReachingDefinitionsAnalysis.this.lattice.StackPos]</span><a id="21353">drop</a></span>(<span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.Instruction</span><a href="#157115">instr</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a href="../Opcodes.scala.html#33388">consumed</a></span>)
        <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">LOAD_EXCEPTION</a>() =&gt;
          <span class="typed"><span class="type">ReachingDefinitionsAnalysis.this.lattice.Stack</span><a href="#157114">stack</a></span> = <span class="typed"><span class="type">object Nil</span><a id="335">Nil</a></span>
        <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> _ =&gt;
          <span class="typed"><span class="type">ReachingDefinitionsAnalysis.this.lattice.Stack</span><a href="#157114">stack</a></span> = <span class="typed"><span class="type">ReachingDefinitionsAnalysis.this.lattice.Stack</span><a href="#157114">stack</a></span>.<span class="typed"><span class="type">(Int)List[ReachingDefinitionsAnalysis.this.lattice.StackPos]</span><a id="21353">drop</a></span>(<span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.Instruction</span><a href="#157115">instr</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a href="../Opcodes.scala.html#33388">consumed</a></span>)
      }

      <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="157116">prod</a></span> = <span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.Instruction</span><a href="#157115">instr</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a href="../Opcodes.scala.html#33389">produced</a></span>
      <span class="typed"><span class="type">Unit</span><a href="#157117" class="keyword">while</a></span> (<span class="typed"><span class="type">Int</span><a href="#157116">prod</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3145">&gt;</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>) {
        <span class="typed"><span class="type">ReachingDefinitionsAnalysis.this.lattice.Stack</span><a href="#157114">stack</a></span> = (<span class="typed"><span class="type">scala.collection.immutable.Set1[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><span class="keyword">new</span></span> collection.immutable.<span class="typed"><span class="type">scala.collection.immutable.Set1[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><a id="26626">Set1</a></span>(<span class="typed"><span class="type">(ReachingDefinitions.this.global.icodes.BasicBlock,Int)(ReachingDefinitions.this.global.icodes.BasicBlock, Int)</span><span id="23625"><a id="1379">(</a></span></span><span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.BasicBlock</span><a href="#33832">b</a></span>, <span class="typed"><span class="type">Int</span><a href="#33833">idx</a></span>))) <span class="typed"><span class="type">(ReachingDefinitionsAnalysis.this.lattice.StackPos)List[ReachingDefinitionsAnalysis.this.lattice.StackPos]</span><a href="#157125" id="21335">::</a></span> <span class="typed"><span class="type">ReachingDefinitionsAnalysis.this.lattice.Stack</span><a href="#157114">stack</a></span>
        <span class="typed"><span class="type">Int</span><a href="#157116">prod</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3148">-=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
      }

      <span class="typed"><span class="type">(scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)],ReachingDefinitionsAnalysis.this.lattice.Stack)ReachingDefinitionsAnalysis.this.lattice.IState[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)],ReachingDefinitionsAnalysis.this.lattice.Stack]</span><a href="CompleteLattice.scala.html#61342">IState</a></span>(<span class="typed"><span class="type">scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><a href="#157113">locals</a></span>, <span class="typed"><span class="type">ReachingDefinitionsAnalysis.this.lattice.Stack</span><a href="#157114">stack</a></span>)
    }

    <span class="comment">/** Return the instructions that produced the 'm' elements on the stack, below given 'depth'.
     *  for instance, findefs(bb, idx, 1, 1) returns the instructions that might have produced the
     *  value found below the topmost element of the stack. 
     */</span>
    <span class="keyword">def</span> <span class="typed"><span class="type">(ReachingDefinitions.this.global.icodes.BasicBlock,Int,Int,Int)List[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><a id="32789">findDefs</a></span>(<span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.BasicBlock</span><a id="33777">bb</a></span>: <span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.BasicBlock</span><a href="../BasicBlocks.scala.html#32337">BasicBlock</a></span>, <span class="typed"><span class="type">Int</span><a id="33778">idx</a></span>: <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span>, <span class="typed"><span class="type">Int</span><a id="33779">m</a></span>: <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span>, <span class="typed"><span class="type">Int</span><a id="33780">depth</a></span>: <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span>): <span class="typed"><span class="type">List[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><a id="526">List</a></span>[(BasicBlock, Int)] = <span class="typed"><span class="type">List[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#33778">idx</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3145">&gt;</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>) {
      <span class="typed"><span class="type">(Boolean)Unit</span><span id="6003"><a id="821">assert</a></span></span>(<span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.BasicBlock</span><a href="#33777">bb</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../BasicBlocks.scala.html#33163">closed</a></span>)
      <span class="keyword">var</span> <span class="typed"><span class="type">Array[ReachingDefinitions.this.global.icodes.Instruction]</span><a id="157152">instrs</a></span> = <span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.BasicBlock</span><a href="#33777">bb</a></span>.<span class="typed"><span class="type">=&gt; Array[ReachingDefinitions.this.global.icodes.Instruction]</span><a href="../BasicBlocks.scala.html#33190">getArray</a></span>
      <span class="keyword">var</span> <span class="typed"><span class="type">List[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><a id="157153">res</a></span>: <span class="typed"><span class="type">List[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><a id="526">List</a></span>[(BasicBlock, Int)] = <span class="typed"><span class="type">object Nil</span><a id="335">Nil</a></span>
      <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="157154">i</a></span> = <span class="typed"><span class="type">Int</span><a href="#33778">idx</a></span>
      <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="157155">n</a></span> = <span class="typed"><span class="type">Int</span><a href="#33779">m</a></span>
      <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="157156">d</a></span> = <span class="typed"><span class="type">Int</span><a href="#33780">depth</a></span>
      <span class="comment">// &quot;I look for who produced the 'n' elements below the 'd' topmost slots of the stack&quot;</span>
      <span class="typed"><span class="type">Unit</span><a href="#157157" class="keyword">while</a></span> (<span class="typed"><span class="type">Int</span><a href="#157155">n</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3145">&gt;</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">Int</span><a href="#157154">i</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3145">&gt;</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>) {
        <span class="typed"><span class="type">Int</span><a href="#157154">i</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3148">-=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
        <span class="keyword">val</span> <span class="typed"><span class="type">Int</span><a id="157161">prod</a></span> = <span class="typed"><span class="type">(Int)ReachingDefinitions.this.global.icodes.Instruction</span><a href="#157152" id="21509">instrs</a></span>(<span class="typed"><span class="type">Int</span><a href="#157154">i</a></span>).<span class="typed"><span class="type">=&gt; Int</span><a href="../Opcodes.scala.html#33389">produced</a></span>
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#157161">prod</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3145">&gt;</a></span> <span class="typed"><span class="type">Int</span><a href="#157156">d</a></span>) {
          <span class="typed"><span class="type">List[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><a href="#157153">res</a></span> = <span class="typed"><span class="type">(ReachingDefinitions.this.global.icodes.BasicBlock,Int)(ReachingDefinitions.this.global.icodes.BasicBlock, Int)</span><span id="23625"><a id="1379">(</a></span></span><span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.BasicBlock</span><a href="#33777">bb</a></span>, <span class="typed"><span class="type">Int</span><a href="#157154">i</a></span>) <span class="typed"><span class="type">((ReachingDefinitions.this.global.icodes.BasicBlock, Int))List[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><a href="#157185" id="21335">::</a></span> <span class="typed"><span class="type">List[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><a href="#157153">res</a></span>
          <span class="typed"><span class="type">Int</span><a href="#157155">n</a></span>   = <span class="typed"><span class="type">Int</span><a href="#157155">n</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3148">-</a></span> (<span class="typed"><span class="type">Int</span><a href="#157161">prod</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3148">-</a></span> <span class="typed"><span class="type">Int</span><a href="#157156">d</a></span>)
          <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">(Int)ReachingDefinitions.this.global.icodes.Instruction</span><a href="#157152" id="21509">instrs</a></span>(<span class="typed"><span class="type">Int</span><a href="#157154">i</a></span>) <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5793">!=</a></span> <span class="typed"><span class="type">()ReachingDefinitions.this.global.icodes.opcodes.LOAD_EXCEPTION</span><a href="../Opcodes.scala.html#33656">LOAD_EXCEPTION</a></span>()) {
            <span class="typed"><span class="type">Int</span><a href="#157156">d</a></span> = <span class="typed"><span class="type">(Int)ReachingDefinitions.this.global.icodes.Instruction</span><a href="#157152" id="21509">instrs</a></span>(<span class="typed"><span class="type">Int</span><a href="#157154">i</a></span>).<span class="typed"><span class="type">=&gt; Int</span><a href="../Opcodes.scala.html#33388">consumed</a></span>
          }
        } <span class="keyword">else</span> {
          <span class="typed"><span class="type">Int</span><a href="#157156">d</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3148">-=</a></span> <span class="typed"><span class="type">Int</span><a href="#157161">prod</a></span>
          <span class="typed"><span class="type">Int</span><a href="#157156">d</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">+=</a></span> <span class="typed"><span class="type">(Int)ReachingDefinitions.this.global.icodes.Instruction</span><a href="#157152" id="21509">instrs</a></span>(<span class="typed"><span class="type">Int</span><a href="#157154">i</a></span>).<span class="typed"><span class="type">=&gt; Int</span><a href="../Opcodes.scala.html#33388">consumed</a></span>
        }
      }
      
      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#157155">n</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3145">&gt;</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>) { 
        <span class="keyword">val</span> <span class="typed"><span class="type">ReachingDefinitionsAnalysis.this.lattice.Stack</span><a id="157260">stack</a></span> = <span class="typed"><span class="type">ReachingDefinitionsAnalysis.this.type</span><a href="#32714" class="keyword">this</a></span>.<span class="typed"><span class="type">(ReachingDefinitionsAnalysis.this.P)ReachingDefinitionsAnalysis.this.lattice.Elem</span><a href="DataFlowAnalysis.scala.html#32744" id="24239">in</a></span>(<span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.BasicBlock</span><a href="#33777">bb</a></span>).<span class="typed"><span class="type">=&gt; ReachingDefinitionsAnalysis.this.lattice.Stack</span><a href="CompleteLattice.scala.html#33362">stack</a></span>
        <span class="typed"><span class="type">(Boolean,=&gt; Any)Unit</span><span id="6004"><a id="821">assert</a></span></span>(<span class="typed"><span class="type">ReachingDefinitionsAnalysis.this.lattice.Stack</span><a href="#157260">stack</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21345">length</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3146">&gt;=</a></span> <span class="typed"><span class="type">Int</span><a href="#157155">n</a></span>, <span class="typed"><span class="type">java.lang.String(&quot;entry stack is too small, expected: &quot;)</span><span class="string">&quot;entry stack is too small, expected: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">Int</span><a href="#157155">n</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot; found: &quot;)</span><span class="string">&quot; found: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">ReachingDefinitionsAnalysis.this.lattice.Stack</span><a href="#157260">stack</a></span>)
        <span class="typed"><span class="type">ReachingDefinitionsAnalysis.this.lattice.Stack</span><a href="#157260">stack</a></span>.<span class="typed"><span class="type">(Int)List[ReachingDefinitionsAnalysis.this.lattice.StackPos]</span><a id="21353">drop</a></span>(<span class="typed"><span class="type">Int</span><a href="#157156">d</a></span>).<span class="typed"><span class="type">(Int)List[ReachingDefinitionsAnalysis.this.lattice.StackPos]</span><a id="21351">take</a></span>(<span class="typed"><span class="type">Int</span><a href="#157155">n</a></span>) <span class="typed"><span class="type">((ReachingDefinitionsAnalysis.this.lattice.StackPos) =&gt; Unit)Unit</span><a id="21366">foreach</a></span> { <span class="typed"><span class="type">ReachingDefinitionsAnalysis.this.lattice.StackPos</span><a id="157275">defs</a></span> =&gt;
          <span class="typed"><span class="type">List[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><a href="#157153">res</a></span> = <span class="typed"><span class="type">ReachingDefinitionsAnalysis.this.lattice.StackPos</span><a href="#157275">defs</a></span>.<span class="typed"><span class="type">=&gt; List[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><a id="21815">toList</a></span> <span class="typed"><span class="type">(List[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)])List[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><a href="#157276" id="21339">:::</a></span> <span class="typed"><span class="type">List[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><a href="#157153">res</a></span>
        }
      }
      <span class="typed"><span class="type">List[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><a href="#157153">res</a></span>
    } <span class="keyword">else</span> {
      <span class="keyword">val</span> <span class="typed"><span class="type">ReachingDefinitionsAnalysis.this.lattice.Stack</span><a id="157279">stack</a></span> = <span class="typed"><span class="type">ReachingDefinitionsAnalysis.this.type</span><a href="#32714" class="keyword">this</a></span>.<span class="typed"><span class="type">(ReachingDefinitionsAnalysis.this.P)ReachingDefinitionsAnalysis.this.lattice.Elem</span><a href="DataFlowAnalysis.scala.html#32744" id="24239">in</a></span>(<span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.BasicBlock</span><a href="#33777">bb</a></span>).<span class="typed"><span class="type">=&gt; ReachingDefinitionsAnalysis.this.lattice.Stack</span><a href="CompleteLattice.scala.html#33362">stack</a></span>
      <span class="typed"><span class="type">(Boolean,=&gt; Any)Unit</span><span id="6004"><a id="821">assert</a></span></span>(<span class="typed"><span class="type">ReachingDefinitionsAnalysis.this.lattice.Stack</span><a href="#157279">stack</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21345">length</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3146">&gt;=</a></span> <span class="typed"><span class="type">Int</span><a href="#33779">m</a></span>, <span class="typed"><span class="type">java.lang.String(&quot;entry stack is too small, expected: &quot;)</span><span class="string">&quot;entry stack is too small, expected: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">Int</span><a href="#33779">m</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot; found: &quot;)</span><span class="string">&quot; found: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">ReachingDefinitionsAnalysis.this.lattice.Stack</span><a href="#157279">stack</a></span>)
      <span class="typed"><span class="type">ReachingDefinitionsAnalysis.this.lattice.Stack</span><a href="#157279">stack</a></span>.<span class="typed"><span class="type">(Int)List[ReachingDefinitionsAnalysis.this.lattice.StackPos]</span><a id="21351">take</a></span>(<span class="typed"><span class="type">Int</span><a href="#33779">m</a></span>) <span class="typed"><span class="type">((ReachingDefinitionsAnalysis.this.lattice.StackPos) =&gt; Iterable[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)])List[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><a id="21383">flatMap</a></span> (<span class="typed"><span class="type">ReachingDefinitionsAnalysis.this.lattice.StackPos</span><a href="#157294">_</a></span>.<span class="typed"><span class="type">=&gt; List[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><a id="21815">toList</a></span>)
    }

    <span class="comment">/** Return the definitions that produced the topmost 'm' elements on the stack,
     *  and that reach the instruction at index 'idx' in basic block 'bb'.
     */</span>
    <span class="keyword">def</span> <span class="typed"><span class="type">(ReachingDefinitions.this.global.icodes.BasicBlock,Int,Int)List[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><a id="32790">findDefs</a></span>(<span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.BasicBlock</span><a id="33774">bb</a></span>: <span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.BasicBlock</span><a href="../BasicBlocks.scala.html#32337">BasicBlock</a></span>, <span class="typed"><span class="type">Int</span><a id="33775">idx</a></span>: <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span>, <span class="typed"><span class="type">Int</span><a id="33776">m</a></span>: <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span>): <span class="typed"><span class="type">List[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><a id="526">List</a></span>[(BasicBlock, Int)] = 
      <span class="typed"><span class="type">(ReachingDefinitions.this.global.icodes.BasicBlock,Int,Int,Int)List[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]</span><a href="#32789">findDefs</a></span>(<span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.BasicBlock</span><a href="#33774">bb</a></span>, <span class="typed"><span class="type">Int</span><a href="#33775">idx</a></span>, <span class="typed"><span class="type">Int</span><a href="#33776">m</a></span>, <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>)

    <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">()String</span><a id="32791">toString</a></span>: <span class="typed"><span class="type">String</span><a id="1861">String</a></span> = {
      <span class="keyword">val</span> <span class="typed"><span class="type">StringBuilder</span><a id="157297">sb</a></span> = <span class="typed"><span class="type">()StringBuilder</span><a id="23671" class="keyword">new</a></span> <span class="typed"><span class="type">StringBuilder</span><a id="1435">StringBuilder</a></span>
      <span class="typed"><span class="type">StringBuilder</span><a href="#157297">sb</a></span>.<span class="typed"><span class="type">(String)StringBuilder</span><a id="23690">append</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;rdef: \012&quot;)</span><span class="string">&quot;rdef: \n&quot;</span></span>)
      <span class="keyword">for</span> (<span class="typed"><span class="type">((ReachingDefinitions.this.global.icodes.BasicBlock) =&gt; Unit)Unit</span><span id="21792"><a id="157304">b</a></span></span> &lt;- <span class="typed"><span class="type">=&gt; ReachingDefinitions.this.global.icodes.IMethod</span><a href="#32768">method</a></span>.<span class="typed"><span class="type">=&gt; ReachingDefinitions.this.global.icodes.Code</span><a href="../Members.scala.html#32867">code</a></span>.<span class="typed"><span class="type">=&gt; scala.collection.mutable.ListBuffer[ReachingDefinitions.this.global.icodes.BasicBlock]</span><a href="../Members.scala.html#33274">blocks</a></span>)
        <span class="typed"><span class="type">StringBuilder</span><a href="#157297">sb</a></span>.<span class="typed"><span class="type">(String)StringBuilder</span><a id="23690">append</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;rdef_entry(&quot;)</span><span class="string">&quot;rdef_entry(&quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.BasicBlock</span><a href="#157304">b</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;)= &quot;)</span><span class="string">&quot;)= &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">(ReachingDefinitionsAnalysis.this.P)ReachingDefinitionsAnalysis.this.lattice.Elem</span><a href="DataFlowAnalysis.scala.html#32744" id="24239">in</a></span>(<span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.BasicBlock</span><a href="#157304">b</a></span>)).<span class="typed"><span class="type">(String)StringBuilder</span><a id="23690">append</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;\012rdef_exit(&quot;)</span><span class="string">&quot;\nrdef_exit(&quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.BasicBlock</span><a href="#157304">b</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;)= &quot;)</span><span class="string">&quot;)= &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">(ReachingDefinitionsAnalysis.this.P)ReachingDefinitionsAnalysis.this.lattice.Elem</span><a href="DataFlowAnalysis.scala.html#32746" id="24239">out</a></span>(<span class="typed"><span class="type">ReachingDefinitions.this.global.icodes.BasicBlock</span><a href="#157304">b</a></span>))
      <span class="typed"><span class="type">StringBuilder</span><a href="#157297">sb</a></span>.<span class="typed"><span class="type">()String</span><a id="23723">toString</a></span>()
    }

  }
}

        </pre>
    </body>
</html>