<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/backend/icode/analysis/ReachingDefinitions.scala</title>
        <script type="text/javascript" src="../../../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../../../style.css" title="Style">
    </head>
    <body>
        <pre>
/* NSC -- new Scala compiler
 * Copyright 2005-2009 LAMP/EPFL
 * @author  Martin Odersky
 */

// $Id: ReachingDefinitions.scala 18387 2009-07-24 15:28:37Z odersky $

<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> backend.icode.analysis

<span class="keyword">import</span> scala.collection.immutable.{Set, ListSet, HashSet}
<span class="keyword">import</span> scala.collection.mutable.{HashMap, Map}

/** Compute reaching definitions. We are only interested in reaching
 *  definitions for local variables, since values on the stack
 *  behave as-if in SSA form: the closest instruction which produces a value
 *  on the stack is a reaching definition.
 */
<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class ReachingDefinitions extends java.lang.Object with ScalaObject" id="15827">ReachingDefinitions</a> <span title="ScalaObject">{</span>
  <span class="keyword">val</span> <a title="=&gt; scala.tools.nsc.Global" id="163865">global</a>: <a href="../../../Global.scala.html#8460" title="scala.tools.nsc.Global">Global</a>
  <span class="keyword">import</span> global._
  <span class="keyword">import</span> icodes._

  /** The lattice for reaching definitions. Elements are
   *  a triple (local variable, basic block, index of instruction of that basic block)
   */
  <span class="keyword">object</span> <a title="object ReachingDefinitions.this.rdefLattice" id="163868">rdefLattice</a> <span title="ScalaObject" class="keyword">extends</span> <a href="CompleteLattice.scala.html#16031" title="scala.tools.nsc.backend.icode.analysis.CompleteLattice">CompleteLattice</a> {
    <span class="keyword">type</span> <a title="(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)" id="163875">Definition</a> = <a title="(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)" id="395">(</a>Local, BasicBlock, Int)
    <span class="keyword">type</span> <a title="scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.IState[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)],scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Stack]" id="163876">Elem</a> = <a href="CompleteLattice.scala.html#60414" title="scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.IState[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)],scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Stack]">IState</a>[Set[Definition], Stack]
    <span class="keyword">type</span> <a title="scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]" id="163877">StackPos</a> = <span title="scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]">Set</span>[(BasicBlock, Int)]
    <span class="keyword">type</span> <a title="List[scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.StackPos]" id="163878">Stack</a> = <span title="List[scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.StackPos]">List</span>[StackPos]

    <span class="keyword">val</span> <a title="scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Elem" id="163879">top</a>: <a href="CompleteLattice.scala.html#60414" title="scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Elem">Elem</a> = <a href="CompleteLattice.scala.html#60903" title="(vars: scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)],stack: scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Stack)scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.IState[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)],scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Stack]">IState</a>(<span title="scala.collection.immutable.ListSet[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]" class="keyword">new</span> <span title="scala.collection.immutable.ListSet[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]">ListSet</span>[Definition](), <span title="object Nil">Nil</span>)

    <span class="keyword">val</span> <a title="scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Elem" id="163881">bottom</a>: <a href="CompleteLattice.scala.html#60414" title="scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Elem">Elem</a> = <a href="CompleteLattice.scala.html#60903" title="(vars: scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)],stack: scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Stack)scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.IState[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)],scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Stack]">IState</a>(<a href="#163906" title="scala.collection.immutable.ListSet[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]{ ... }" class="keyword">new</a> <a title="anonymous class $anon extends scala.collection.immutable.ListSet[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]" id="163906">ListSet</a>[Definition]() {
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="(that: Any)Boolean" id="163908">equals</a>(<a title="Any" id="163918">that</a>: <a title="Any" id="49">Any</a>): <a title="Boolean" id="1951">Boolean</a> = <a href="#163906" title="(x$1: AnyRef)Boolean" class="keyword">this</a> eq <a href="#163918" title="Any">that</a>.<a title="[T0]T0" id="3623">asInstanceOf</a><span title="AnyRef">[</span><a title="AnyRef" id="1758">AnyRef</a>]
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="()java.lang.String" id="163909">toString</a> = <span title="java.lang.String(&quot;&lt;bottom&gt;&quot;)" class="string">&quot;&lt;bottom&gt;&quot;</span>
    }, <span title="object Nil">Nil</span>)

    /** The least upper bound is set inclusion for locals, and pairwise set inclusion for stacks. */
    <span class="keyword">def</span> <a title="(a: scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Elem,b: scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Elem)scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Elem" id="163883">lub2</a>(<a title="scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Elem" id="163931">a</a>: <a href="CompleteLattice.scala.html#60414" title="scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Elem">Elem</a>, <a title="scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Elem" id="163932">b</a>: <a href="CompleteLattice.scala.html#60414" title="scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Elem">Elem</a>): <a href="CompleteLattice.scala.html#60414" title="scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Elem">Elem</a> = 
      <span title="scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Elem" class="keyword">if</span> (<a href="#163881" title="(x$1: AnyRef)Boolean">bottom</a> == <a href="#163931" title="scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Elem">a</a>) <a href="#163932" title="scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Elem">b</a>
      <span class="keyword">else</span> <span title="scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Elem" class="keyword">if</span> (<a href="#163881" title="(x$1: AnyRef)Boolean">bottom</a> == <a href="#163932" title="scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Elem">b</a>) <a href="#163931" title="scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Elem">a</a>
      <span class="keyword">else</span> {
        <span class="keyword">val</span> <a title="scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]" id="163948">locals</a> = <a href="#163931" title="scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Elem">a</a>.<a href="CompleteLattice.scala.html#60844" title="(elems: Traversable[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)])scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]">vars</a> ++ <a href="#163932" title="scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Elem">b</a>.<a href="CompleteLattice.scala.html#60844" title="=&gt; scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]">vars</a>
        <span class="keyword">val</span> <a title="scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Stack" id="163949">stack</a> = <span title="scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Stack" class="keyword">if</span> (<a href="#163931" title="scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Elem">a</a>.<a href="CompleteLattice.scala.html#60846" title="(x$1: AnyRef)Boolean">stack</a> == <span title="object Nil">Nil</span>) 
          <a href="#163932" title="scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Elem">b</a>.<a href="CompleteLattice.scala.html#60846" title="=&gt; scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Stack">stack</a>
        <span class="keyword">else</span> <span title="scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Stack" class="keyword">if</span> (<a href="#163932" title="scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Elem">b</a>.<a href="CompleteLattice.scala.html#60846" title="(x$1: AnyRef)Boolean">stack</a> == <span title="object Nil">Nil</span>) <a href="#163931" title="scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Elem">a</a>.<a href="CompleteLattice.scala.html#60846" title="=&gt; scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Stack">stack</a> 
        <span class="keyword">else</span> <span title="object List">List</span>.<a title="(xs: List[scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.StackPos],ys: List[scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.StackPos])(f: (scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.StackPos, scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.StackPos) =&gt; scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)])List[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]]" id="24375">map2</a>(<a href="#163931" title="scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Elem">a</a>.<a href="CompleteLattice.scala.html#60846" title="=&gt; scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Stack">stack</a>, <a href="#163932" title="scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Elem">b</a>.<a href="CompleteLattice.scala.html#60846" title="=&gt; scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Stack">stack</a>) (<a href="#164084" title="(elems: Traversable[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)])scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]">_</a> ++ <a href="#164085" title="scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.StackPos">_</a>)
        
        <span class="keyword">val</span> <a title="scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.IState[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)],scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Stack]" id="163950">res</a> = <a href="CompleteLattice.scala.html#60903" title="(vars: scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)],stack: scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Stack)scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.IState[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)],scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Stack]">IState</a>(<a href="#163948" title="scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]">locals</a>, <a href="#163949" title="scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Stack">stack</a>)
      
//        Console.println(&quot;\tlub2: &quot; + a + &quot;, &quot; + b)
//        Console.println(&quot;\tis: &quot; + res)
      
//        if (res._1 eq bottom._1) (new ListSet[Definition], Nil)
//        else res
        <a href="#163950" title="scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.IState[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)],scala.tools.nsc.backend.icode.analysis.ReachingDefinitions.rdefLattice.Stack]">res</a>
      }
  }

  <span class="keyword">class</span> <a title="class ReachingDefinitionsAnalysis extends java.lang.Object with scala.tools.nsc.backend.icode.analysis.DataFlowAnalysis[ReachingDefinitions.this.rdefLattice.type] with ScalaObject" id="163870">ReachingDefinitionsAnalysis</a> <span title="ScalaObject" class="keyword">extends</span> <a href="DataFlowAnalysis.scala.html#15920" title="scala.tools.nsc.backend.icode.analysis.DataFlowAnalysis[ReachingDefinitions.this.rdefLattice.type]">DataFlowAnalysis</a>[rdefLattice.<span class="keyword">type</span>] {
    <span class="keyword">type</span> <a title="ReachingDefinitions.this.global.icodes.BasicBlock" id="164206">P</a> = <a href="../BasicBlocks.scala.html#46178" title="ReachingDefinitions.this.global.icodes.BasicBlock">BasicBlock</a>
    <span class="keyword">val</span> <a title="ReachingDefinitions.this.rdefLattice.type" id="164207">lattice</a> = <a href="#163868" title="object ReachingDefinitions.this.rdefLattice">rdefLattice</a>
    <span class="keyword">import</span> lattice.Definition
    <span class="keyword">import</span> lattice.Stack
    <span class="keyword">import</span> lattice.Elem

    <span class="keyword">var</span> <a title="ReachingDefinitions.this.global.icodes.IMethod" id="164213">method</a>: <a href="../Members.scala.html#46173" title="ReachingDefinitions.this.global.icodes.IMethod">IMethod</a> = _

    <span class="keyword">val</span> <a title="scala.collection.mutable.Map[ReachingDefinitions.this.global.icodes.BasicBlock,scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]]" id="164215">gen</a>: <span title="scala.collection.mutable.Map[ReachingDefinitions.this.global.icodes.BasicBlock,scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]]">Map</span>[BasicBlock, Set[Definition]] = <span title="scala.collection.mutable.HashMap[ReachingDefinitions.this.global.icodes.BasicBlock,scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]]" class="keyword">new</span> <span title="scala.collection.mutable.HashMap[ReachingDefinitions.this.global.icodes.BasicBlock,scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]]">HashMap</span>()
    <span class="keyword">val</span> <a title="scala.collection.mutable.Map[ReachingDefinitions.this.global.icodes.BasicBlock,scala.collection.immutable.Set[ReachingDefinitions.this.global.icodes.Local]]" id="164217">kill</a>:<span title="scala.collection.mutable.Map[ReachingDefinitions.this.global.icodes.BasicBlock,scala.collection.immutable.Set[ReachingDefinitions.this.global.icodes.Local]]">Map</span>[BasicBlock, Set[Local]]      = <span title="scala.collection.mutable.HashMap[ReachingDefinitions.this.global.icodes.BasicBlock,scala.collection.immutable.Set[ReachingDefinitions.this.global.icodes.Local]]" class="keyword">new</span> <span title="scala.collection.mutable.HashMap[ReachingDefinitions.this.global.icodes.BasicBlock,scala.collection.immutable.Set[ReachingDefinitions.this.global.icodes.Local]]">HashMap</span>()
    <span class="keyword">val</span> <a title="scala.collection.mutable.Map[ReachingDefinitions.this.global.icodes.BasicBlock,Int]" id="164219">drops</a>: <span title="scala.collection.mutable.Map[ReachingDefinitions.this.global.icodes.BasicBlock,Int]">Map</span>[BasicBlock, Int]           = <span title="scala.collection.mutable.HashMap[ReachingDefinitions.this.global.icodes.BasicBlock,Int]" class="keyword">new</span> <span title="scala.collection.mutable.HashMap[ReachingDefinitions.this.global.icodes.BasicBlock,Int]">HashMap</span>()
    <span class="keyword">val</span> <a title="scala.collection.mutable.Map[ReachingDefinitions.this.global.icodes.BasicBlock,ReachingDefinitionsAnalysis.this.lattice.Stack]" id="164221">outStack</a>: <span title="scala.collection.mutable.Map[ReachingDefinitions.this.global.icodes.BasicBlock,ReachingDefinitionsAnalysis.this.lattice.Stack]">Map</span>[BasicBlock, Stack]      = <span title="scala.collection.mutable.HashMap[ReachingDefinitions.this.global.icodes.BasicBlock,ReachingDefinitionsAnalysis.this.lattice.Stack]" class="keyword">new</span> <span title="scala.collection.mutable.HashMap[ReachingDefinitions.this.global.icodes.BasicBlock,ReachingDefinitionsAnalysis.this.lattice.Stack]">HashMap</span>()

    <span class="keyword">def</span> <a title="(m: ReachingDefinitions.this.global.icodes.IMethod)Unit" id="164223">init</a>(<a title="ReachingDefinitions.this.global.icodes.IMethod" id="164256">m</a>: <a href="../Members.scala.html#46173" title="ReachingDefinitions.this.global.icodes.IMethod">IMethod</a>) {
      <a href="#163870" title="ReachingDefinitionsAnalysis.this.type" class="keyword">this</a>.<a href="#164213" title="(x$1: ReachingDefinitions.this.global.icodes.IMethod)Unit">method</a> = <a href="#164256" title="ReachingDefinitions.this.global.icodes.IMethod">m</a>
      <a href="#164215" title="=&gt; scala.collection.mutable.Map[ReachingDefinitions.this.global.icodes.BasicBlock,scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]]">gen</a>.<span title="()Unit">clear</span>;   <a href="#164217" title="=&gt; scala.collection.mutable.Map[ReachingDefinitions.this.global.icodes.BasicBlock,scala.collection.immutable.Set[ReachingDefinitions.this.global.icodes.Local]]">kill</a>.<span title="()Unit">clear</span>
      <a href="#164219" title="=&gt; scala.collection.mutable.Map[ReachingDefinitions.this.global.icodes.BasicBlock,Int]">drops</a>.<span title="()Unit">clear</span>; <a href="#164221" title="=&gt; scala.collection.mutable.Map[ReachingDefinitions.this.global.icodes.BasicBlock,ReachingDefinitionsAnalysis.this.lattice.Stack]">outStack</a>.<span title="()Unit">clear</span>

      <span class="keyword">for</span> (<a title="ReachingDefinitions.this.global.icodes.BasicBlock" id="164462">b</a> &lt;- <a href="#164256" title="ReachingDefinitions.this.global.icodes.IMethod">m</a>.<a href="../Members.scala.html#61228" title="=&gt; ReachingDefinitions.this.global.icodes.Code">code</a>.<a href="../Members.scala.html#61390" title="=&gt; scala.collection.mutable.ListBuffer[ReachingDefinitions.this.global.icodes.BasicBlock]">blocks</a>.<a title="(f: (ReachingDefinitions.this.global.icodes.BasicBlock) =&gt; (ReachingDefinitions.this.global.icodes.BasicBlock, (scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)], scala.collection.immutable.Set[ReachingDefinitions.this.global.icodes.Local]), (Int, List[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]])))(implicit bf: scala.collection.generic.BuilderFactory[(ReachingDefinitions.this.global.icodes.BasicBlock, (scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)], scala.collection.immutable.Set[ReachingDefinitions.this.global.icodes.Local]), (Int, List[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]])),List[(ReachingDefinitions.this.global.icodes.BasicBlock, (scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)], scala.collection.immutable.Set[ReachingDefinitions.this.global.icodes.Local]), (Int, List[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]]))],List[ReachingDefinitions.this.global.icodes.BasicBlock]])List[(ReachingDefinitions.this.global.icodes.BasicBlock, (scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)], scala.collection.immutable.Set[ReachingDefinitions.this.global.icodes.Local]), (Int, List[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]]))]" id="25243">toList</a>;
           <a title="((scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)], scala.collection.immutable.Set[ReachingDefinitions.this.global.icodes.Local]), scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)], scala.collection.immutable.Set[ReachingDefinitions.this.global.icodes.Local])" id="164285">(</a><a href="#164284" title="scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]" id="164465">g</a>, <a href="#164284" title="scala.collection.immutable.Set[ReachingDefinitions.this.global.icodes.Local]" id="164466">k</a>) = <a href="#164225" title="(b: ReachingDefinitions.this.global.icodes.BasicBlock)(scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)], scala.collection.immutable.Set[ReachingDefinitions.this.global.icodes.Local])">genAndKill</a><span title="(scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)], scala.collection.immutable.Set[ReachingDefinitions.this.global.icodes.Local]) @unchecked">(</span><a href="#164462" title="ReachingDefinitions.this.global.icodes.BasicBlock">b</a>);
           <a title="((Int, List[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]]), Int, List[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]])" id="164289">(</a><a href="#164288" title="Int" id="164471">d</a>, <a href="#164288" title="List[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]]" id="164472">st</a>) = <a href="#164226" title="(b: ReachingDefinitions.this.global.icodes.BasicBlock)(Int, List[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]])">dropsAndGen</a><span title="(Int, List[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]]) @unchecked">(</span><a href="#164462" title="ReachingDefinitions.this.global.icodes.BasicBlock">b</a>)) {
        <a href="#164215" title="(kv: (ReachingDefinitions.this.global.icodes.BasicBlock, scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]))ReachingDefinitionsAnalysis.this.gen.type">gen</a>  += (<a href="#164462" title="(y: scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)])(ReachingDefinitions.this.global.icodes.BasicBlock, scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)])">b</a> -&gt; <a href="#164465" title="scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]">g</a>)
        <a href="#164217" title="(kv: (ReachingDefinitions.this.global.icodes.BasicBlock, scala.collection.immutable.Set[ReachingDefinitions.this.global.icodes.Local]))ReachingDefinitionsAnalysis.this.kill.type">kill</a> += (<a href="#164462" title="(y: scala.collection.immutable.Set[ReachingDefinitions.this.global.icodes.Local])(ReachingDefinitions.this.global.icodes.BasicBlock, scala.collection.immutable.Set[ReachingDefinitions.this.global.icodes.Local])">b</a> -&gt; <a href="#164466" title="scala.collection.immutable.Set[ReachingDefinitions.this.global.icodes.Local]">k</a>)
        <a href="#164219" title="(kv: (ReachingDefinitions.this.global.icodes.BasicBlock, Int))ReachingDefinitionsAnalysis.this.drops.type">drops</a> += (<a href="#164462" title="(y: Int)(ReachingDefinitions.this.global.icodes.BasicBlock, Int)">b</a> -&gt; <a href="#164471" title="Int">d</a>)
        <a href="#164221" title="(kv: (ReachingDefinitions.this.global.icodes.BasicBlock, ReachingDefinitionsAnalysis.this.lattice.Stack))ReachingDefinitionsAnalysis.this.outStack.type">outStack</a> += (<a href="#164462" title="(y: List[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]])(ReachingDefinitions.this.global.icodes.BasicBlock, List[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]])">b</a> -&gt; <a href="#164472" title="List[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]]">st</a>)
      }

      <a href="DataFlowAnalysis.scala.html#61163" title="(f: =&gt; Unit)Unit">init</a> {
        <a href="DataFlowAnalysis.scala.html#61149" title="(iter: Traversable[ReachingDefinitionsAnalysis.this.P])ReachingDefinitionsAnalysis.this.worklist.type" id="39507">worklist</a> ++= <a href="#164256" title="ReachingDefinitions.this.global.icodes.IMethod">m</a>.<a href="../Members.scala.html#61228" title="=&gt; ReachingDefinitions.this.global.icodes.Code">code</a>.<a href="../Members.scala.html#61390" title="=&gt; scala.collection.mutable.ListBuffer[ReachingDefinitions.this.global.icodes.BasicBlock]">blocks</a>.<span title="=&gt; List[ReachingDefinitions.this.global.icodes.BasicBlock]">toList</span>
        <a href="#164256" title="ReachingDefinitions.this.global.icodes.IMethod">m</a>.<a href="../Members.scala.html#61228" title="=&gt; ReachingDefinitions.this.global.icodes.Code">code</a>.<a href="../Members.scala.html#61390" title="=&gt; scala.collection.mutable.ListBuffer[ReachingDefinitions.this.global.icodes.BasicBlock]">blocks</a>.<span title="(f: (ReachingDefinitions.this.global.icodes.BasicBlock) =&gt; Unit)Unit">foreach</span> { <a title="ReachingDefinitions.this.global.icodes.BasicBlock" id="164686">b</a> =&gt;
          <a href="DataFlowAnalysis.scala.html#61151" title="(key: ReachingDefinitionsAnalysis.this.P,value: ReachingDefinitionsAnalysis.this.lattice.Elem)Unit">in</a>(<a href="#164686" title="ReachingDefinitions.this.global.icodes.BasicBlock">b</a>)  = <a href="#164207" title="=&gt; ReachingDefinitions.this.rdefLattice.type">lattice</a>.<a href="#163881" title="=&gt; ReachingDefinitionsAnalysis.this.lattice.Elem">bottom</a>
          <a href="DataFlowAnalysis.scala.html#61153" title="(key: ReachingDefinitionsAnalysis.this.P,value: ReachingDefinitionsAnalysis.this.lattice.Elem)Unit">out</a>(<a href="#164686" title="ReachingDefinitions.this.global.icodes.BasicBlock">b</a>) = <a href="#164207" title="=&gt; ReachingDefinitions.this.rdefLattice.type">lattice</a>.<a href="#163881" title="=&gt; ReachingDefinitionsAnalysis.this.lattice.Elem">bottom</a>
        } 
        <a href="#164256" title="ReachingDefinitions.this.global.icodes.IMethod">m</a>.<a href="../Members.scala.html#61234" title="(f: (ReachingDefinitions.this.global.icodes.ExceptionHandler) =&gt; Unit)Unit">exh</a> foreach { <a title="ReachingDefinitions.this.global.icodes.ExceptionHandler" id="164715">e</a> =&gt;
          <a href="DataFlowAnalysis.scala.html#61151" title="(key: ReachingDefinitionsAnalysis.this.P,value: ReachingDefinitionsAnalysis.this.lattice.Elem)Unit">in</a>(<a href="#164715" title="ReachingDefinitions.this.global.icodes.ExceptionHandler">e</a>.<a href="../ExceptionHandlers.scala.html#61445" title="=&gt; ReachingDefinitions.this.global.icodes.BasicBlock">startBlock</a>) = <a href="#164207" title="=&gt; ReachingDefinitions.this.rdefLattice.type">lattice</a>.<a href="CompleteLattice.scala.html#60903" title="(vars: scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)],stack: ReachingDefinitionsAnalysis.this.lattice.Stack)ReachingDefinitionsAnalysis.this.lattice.IState[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)],ReachingDefinitionsAnalysis.this.lattice.Stack]">IState</a>(<span title="scala.collection.immutable.ListSet[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]" class="keyword">new</span> <span title="scala.collection.immutable.ListSet[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]">ListSet</span>[Definition], <a title="(xs: scala.collection.immutable.ListSet[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]*)List[scala.collection.immutable.ListSet[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]]" id="24319">List</a>(<span title="scala.collection.immutable.ListSet[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]" class="keyword">new</span> <span title="scala.collection.immutable.ListSet[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]">ListSet</span>[(BasicBlock, Int)]))
        }
        
      }
    }
    
    <span class="keyword">import</span> opcodes._
    
    <span class="keyword">def</span> <a title="(b: ReachingDefinitions.this.global.icodes.BasicBlock)(scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)], scala.collection.immutable.Set[ReachingDefinitions.this.global.icodes.Local])" id="164225">genAndKill</a>(<a title="ReachingDefinitions.this.global.icodes.BasicBlock" id="164292">b</a>: <a href="../BasicBlocks.scala.html#46178" title="ReachingDefinitions.this.global.icodes.BasicBlock">BasicBlock</a>): <span title="(scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)], scala.collection.immutable.Set[ReachingDefinitions.this.global.icodes.Local])">(</span>Set[Definition], Set[Local]) = {
      <span class="keyword">var</span> <a title="scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]" id="164756">genSet</a>: <span title="scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]">Set</span>[Definition] = <span title="scala.collection.immutable.HashSet[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]" class="keyword">new</span> <span title="scala.collection.immutable.HashSet[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]">HashSet</span>
      <span class="keyword">var</span> <a title="scala.collection.immutable.Set[ReachingDefinitions.this.global.icodes.Local]" id="164757">killSet</a>: <span title="scala.collection.immutable.Set[ReachingDefinitions.this.global.icodes.Local]">Set</span>[Local] = <span title="scala.collection.immutable.HashSet[ReachingDefinitions.this.global.icodes.Local]" class="keyword">new</span> <span title="scala.collection.immutable.HashSet[ReachingDefinitions.this.global.icodes.Local]">HashSet</span>
      <span class="keyword">for</span> ((<a title="ReachingDefinitions.this.global.icodes.Instruction" id="164922">i</a>, <a title="Int" id="164923">idx</a>) &lt;- <a href="#164292" title="ReachingDefinitions.this.global.icodes.BasicBlock">b</a>.<a href="../BasicBlocks.scala.html#61313" title="=&gt; List[ReachingDefinitions.this.global.icodes.Instruction]">toList</a>.<a href="#164889" title="(f: ((ReachingDefinitions.this.global.icodes.Instruction, Int)) =&gt; Unit)Unit">zipWithIndex</a>) <a href="#164922" title="ReachingDefinitions.this.global.icodes.Instruction">i</a> <span title="Unit" class="keyword">match</span> {
        <span title="Unit" class="keyword">case</span> STORE_LOCAL(<a title="ReachingDefinitions.this.global.icodes.Local" id="164927">local</a>) =&gt; 
          <a href="#164757" title="scala.collection.immutable.Set[ReachingDefinitions.this.global.icodes.Local]">killSet</a> = <a href="#164757" title="(elem: ReachingDefinitions.this.global.icodes.Local)scala.collection.immutable.Set[ReachingDefinitions.this.global.icodes.Local]">killSet</a> + <a href="#164927" title="ReachingDefinitions.this.global.icodes.Local">local</a>
          <a href="#164756" title="scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]">genSet</a>  = <a href="#164230" title="(b: ReachingDefinitions.this.global.icodes.BasicBlock,idx: Int,rd: scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)])scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]">updateReachingDefinition</a>(<a href="#164292" title="ReachingDefinitions.this.global.icodes.BasicBlock">b</a>, <a href="#164923" title="Int">idx</a>, <a href="#164756" title="scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]">genSet</a>)
        <span title="Unit" class="keyword">case</span> _ =&gt; <span title="Unit">(</span>)
      }
      <span title="(_1: scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)],_2: scala.collection.immutable.Set[ReachingDefinitions.this.global.icodes.Local])(scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)], scala.collection.immutable.Set[ReachingDefinitions.this.global.icodes.Local])">(</span><a href="#164756" title="scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]">genSet</a>, <a href="#164757" title="scala.collection.immutable.Set[ReachingDefinitions.this.global.icodes.Local]">killSet</a>)
    }
    
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(b: ReachingDefinitions.this.global.icodes.BasicBlock)(Int, List[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]])" id="164226">dropsAndGen</a>(<a title="ReachingDefinitions.this.global.icodes.BasicBlock" id="164316">b</a>: <a href="../BasicBlocks.scala.html#46178" title="ReachingDefinitions.this.global.icodes.BasicBlock">BasicBlock</a>): <span title="(Int, List[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]])">(</span>Int, List[Set[(BasicBlock, Int)]]) = {
      <span class="keyword">var</span> <a title="Int" id="164967">depth</a> = <span title="Int(0)" class="int">0</span>
      <span class="keyword">var</span> <a title="Int" id="164968">drops</a> = <span title="Int(0)" class="int">0</span>
      <span class="keyword">var</span> <a title="List[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]]" id="164969">stackOut</a>: <span title="List[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]]">List</span>[Set[(BasicBlock, Int)]] = <span title="object Nil">Nil</span>
      
      <span class="keyword">for</span> ((<a title="ReachingDefinitions.this.global.icodes.Instruction" id="165086">instr</a>, <a title="Int" id="165087">idx</a>) &lt;- <a href="#164316" title="ReachingDefinitions.this.global.icodes.BasicBlock">b</a>.<a href="../BasicBlocks.scala.html#61313" title="=&gt; List[ReachingDefinitions.this.global.icodes.Instruction]">toList</a>.<a href="#165053" title="(f: ((ReachingDefinitions.this.global.icodes.Instruction, Int)) =&gt; Unit)Unit">zipWithIndex</a>) {
        <span title="Unit" class="keyword">if</span> (<a href="#165086" title="(x$1: AnyRef)Boolean">instr</a> == <a href="../Opcodes.scala.html#64125" title="()ReachingDefinitions.this.global.icodes.opcodes.LOAD_EXCEPTION">LOAD_EXCEPTION</a>()) 
          <span title="Unit">(</span>)
        <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<a href="#165086" title="ReachingDefinitions.this.global.icodes.Instruction">instr</a>.<a href="../Opcodes.scala.html#61468" title="(x$1: Int)Boolean">consumed</a> &gt; <a href="#164967" title="Int">depth</a>) {
          <a href="#164968" title="Int">drops</a> = <a href="#164968" title="(x$1: Int)Int">drops</a> + (<a href="#165086" title="ReachingDefinitions.this.global.icodes.Instruction">instr</a>.<a href="../Opcodes.scala.html#61468" title="(x$1: Int)Int">consumed</a> - <a href="#164967" title="Int">depth</a>)
          <a href="#164967" title="Int">depth</a> = <span title="Int(0)" class="int">0</span>
          <a href="#164969" title="List[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]]">stackOut</a> = <span title="object Nil">Nil</span>
        } <span class="keyword">else</span> {
          <a href="#164969" title="List[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]]">stackOut</a> = <a href="#164969" title="List[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]]">stackOut</a>.<span title="(n: Int)List[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]]">drop</span>(<a href="#165086" title="ReachingDefinitions.this.global.icodes.Instruction">instr</a>.<a href="../Opcodes.scala.html#61468" title="=&gt; Int">consumed</a>)
          <a href="#164967" title="Int">depth</a> = <a href="#164967" title="(x$1: Int)Int">depth</a> - <a href="#165086" title="ReachingDefinitions.this.global.icodes.Instruction">instr</a>.<a href="../Opcodes.scala.html#61468" title="=&gt; Int">consumed</a>
        }
        <span class="keyword">var</span> <a title="Int" id="165090">prod</a> = <a href="#165086" title="ReachingDefinitions.this.global.icodes.Instruction">instr</a>.<a href="../Opcodes.scala.html#61469" title="=&gt; Int">produced</a>
        <a href="#164967" title="Int">depth</a> = <a href="#164967" title="(x$1: Int)Int">depth</a> + <a href="#165090" title="Int">prod</a>
        <span title="Unit" class="keyword">while</span> (<a href="#165090" title="(x$1: Int)Boolean">prod</a> &gt; <span title="Int(0)" class="int">0</span>) <a href="#165179" title="()Unit">{</a>
          <a href="#164969" title="List[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]]">stackOut</a> = collection.immutable.<span title="(args: (ReachingDefinitions.this.global.icodes.BasicBlock, Int)*)scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]">Set</span>(<span title="(_1: ReachingDefinitions.this.global.icodes.BasicBlock,_2: Int)(ReachingDefinitions.this.global.icodes.BasicBlock, Int)">(</span><a href="#164316" title="ReachingDefinitions.this.global.icodes.BasicBlock">b</a>, <a href="#165087" title="Int">idx</a>)) <a href="#165186" title="scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]">::</a> <a href="#164969" title="(x: scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)])List[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]]">stackOut</a>
          <a href="#165090" title="Int">prod</a> = <a href="#165090" title="(x$1: Int)Int">prod</a> - <span title="Int(1)" class="int">1</span>
        }
      }
//      Console.println(&quot;drops(&quot; + b + &quot;) = &quot; + drops)
//      Console.println(&quot;stackout(&quot; + b + &quot;) = &quot; + stackOut)
      <span title="(_1: Int,_2: List[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]])(Int, List[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]])">(</span><a href="#164968" title="Int">drops</a>, <a href="#164969" title="List[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]]">stackOut</a>)
    }
    
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Unit" id="164227">run</a> {
      <a href="DataFlowAnalysis.scala.html#61166" title="(f: (ReachingDefinitionsAnalysis.this.P, ReachingDefinitionsAnalysis.this.lattice.Elem) =&gt; ReachingDefinitionsAnalysis.this.lattice.Elem)Unit">forwardAnalysis</a>(<a href="#164231" title="(b: ReachingDefinitions.this.global.icodes.BasicBlock,in: ReachingDefinitionsAnalysis.this.lattice.Elem)ReachingDefinitionsAnalysis.this.lattice.Elem">blockTransfer</a>)
      <span title="Unit" class="keyword">if</span> (<a href="../../../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../../Settings.scala.html#37759" title="=&gt; Boolean">value</a>) {
        <a href="../ICodes.scala.html#46149" title="=&gt; ReachingDefinitions.this.global.icodes.Linearizer">linearizer</a>.<a href="../Linearizers.scala.html#62209" title="(c: ReachingDefinitions.this.global.icodes.IMethod)List[ReachingDefinitions.this.global.icodes.BasicBlock]">linearize</a>(<a href="#164213" title="=&gt; ReachingDefinitions.this.global.icodes.IMethod">method</a>).<span title="(f: (ReachingDefinitions.this.global.icodes.BasicBlock) =&gt; Unit)Unit">foreach</span>(<a title="ReachingDefinitions.this.global.icodes.BasicBlock" id="165273">b</a> =&gt; <span title="Unit" class="keyword">if</span> (<a href="#165273" title="(x$1: AnyRef)Boolean">b</a> != <a href="#164213" title="=&gt; ReachingDefinitions.this.global.icodes.IMethod">method</a>.<a href="../Members.scala.html#61228" title="=&gt; ReachingDefinitions.this.global.icodes.Code">code</a>.<a href="../Members.scala.html#61392" title="=&gt; ReachingDefinitions.this.global.icodes.BasicBlock">startBlock</a>)
          <span title="(assertion: Boolean,message: =&gt; Any)Unit">assert</span>(<a href="#164207" title="=&gt; ReachingDefinitions.this.rdefLattice.type">lattice</a>.<a href="#163881" title="(x$1: AnyRef)Boolean">bottom</a> != <a href="DataFlowAnalysis.scala.html#61151" title="(key: ReachingDefinitionsAnalysis.this.P)ReachingDefinitionsAnalysis.this.lattice.Elem">in</a>(<a href="#165273" title="ReachingDefinitions.this.global.icodes.BasicBlock">b</a>),
            <span title="(x$1: Any)java.lang.String" class="string">&quot;Block &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#165273" title="ReachingDefinitions.this.global.icodes.BasicBlock">b</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; in &quot;)" class="string">&quot; in &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#163870" title="ReachingDefinitionsAnalysis.this.type" class="keyword">this</a>.<a href="#164213" title="=&gt; ReachingDefinitions.this.global.icodes.IMethod">method</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; has input equal to bottom -- not visited? &quot;)" class="string">&quot; has input equal to bottom -- not visited? &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="DataFlowAnalysis.scala.html#61151" title="(key: ReachingDefinitionsAnalysis.this.P)ReachingDefinitionsAnalysis.this.lattice.Elem">in</a>(<a href="#165273" title="ReachingDefinitions.this.global.icodes.BasicBlock">b</a>)
                 <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;: bot: &quot;)" class="string">&quot;: bot: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#164207" title="=&gt; ReachingDefinitions.this.rdefLattice.type">lattice</a>.<a href="#163881" title="=&gt; ReachingDefinitionsAnalysis.this.lattice.Elem">bottom</a>
                 <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;\012in(b) == bottom: &quot;)" class="string">&quot;\nin(b) == bottom: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> (<a href="DataFlowAnalysis.scala.html#61151" title="(key: ReachingDefinitionsAnalysis.this.P)ReachingDefinitionsAnalysis.this.lattice.Elem">in</a><span title="(x$1: AnyRef)Boolean">(</span><a href="#165273" title="ReachingDefinitions.this.global.icodes.BasicBlock">b</a>) == <a href="#164207" title="=&gt; ReachingDefinitions.this.rdefLattice.type">lattice</a>.<a href="#163881" title="=&gt; ReachingDefinitionsAnalysis.this.lattice.Elem">bottom</a>)
                 <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;\012bottom == in(b): &quot;)" class="string">&quot;\nbottom == in(b): &quot;</span> + (<a href="#164207" title="=&gt; ReachingDefinitions.this.rdefLattice.type">lattice</a>.<a href="#163881" title="(x$1: AnyRef)Boolean">bottom</a> == <a href="DataFlowAnalysis.scala.html#61151" title="(key: ReachingDefinitionsAnalysis.this.P)ReachingDefinitionsAnalysis.this.lattice.Elem">in</a>(<a href="#165273" title="ReachingDefinitions.this.global.icodes.BasicBlock">b</a>))));
      }
    }

    <span class="keyword">import</span> opcodes._
    <span class="keyword">import</span> lattice.IState
    <span class="keyword">def</span> <a title="(b: ReachingDefinitions.this.global.icodes.BasicBlock,idx: Int,rd: scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)])scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]" id="164230">updateReachingDefinition</a>(<a title="ReachingDefinitions.this.global.icodes.BasicBlock" id="164950">b</a>: <a href="../BasicBlocks.scala.html#46178" title="ReachingDefinitions.this.global.icodes.BasicBlock">BasicBlock</a>, <a title="Int" id="164951">idx</a>: <span title="Int">Int</span>, <a title="scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]" id="164952">rd</a>: <span title="scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]">Set</span>[Definition]): <span title="scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]">Set</span>[Definition] = {
      <span class="keyword">val</span> STORE_LOCAL<a href="#165405" title="ReachingDefinitions.this.global.icodes.Local" id="165388">(</a><a title="ReachingDefinitions.this.global.icodes.Local" id="165405">local</a>) = <a href="../BasicBlocks.scala.html#61323" title="(n: Int)ReachingDefinitions.this.global.icodes.Instruction">b</a><a href="../Opcodes.scala.html#46182" title="ReachingDefinitions.this.global.icodes.Instruction @unchecked">(</a><a href="#164951" title="Int">idx</a>)
      <span class="keyword">var</span> <a title="ReachingDefinitions.this.global.icodes.Local" id="165389">tmp</a> = <a href="#165388" title="ReachingDefinitions.this.global.icodes.Local">local</a>
      <span title="(elem: (ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int))scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]">(</span><a href="#164952" title="(p: ((ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)) =&gt; Boolean)scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]">rd</a> filter <a href="#165410" title="Boolean">{</a> <span title="Boolean" class="keyword">case</span> (<a title="ReachingDefinitions.this.global.icodes.Local" id="165414">l</a>, _, _) =&gt; <a href="#165414" title="(x$1: AnyRef)Boolean">l</a> != <a href="#165389" title="ReachingDefinitions.this.global.icodes.Local">tmp</a> }) + (<span title="(_1: ReachingDefinitions.this.global.icodes.Local,_2: ReachingDefinitions.this.global.icodes.BasicBlock,_3: Int)(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)">(</span><a href="#165389" title="ReachingDefinitions.this.global.icodes.Local">tmp</a>, <a href="#164950" title="ReachingDefinitions.this.global.icodes.BasicBlock">b</a>, <a href="#164951" title="Int">idx</a>))
    }
    
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(b: ReachingDefinitions.this.global.icodes.BasicBlock,in: ReachingDefinitionsAnalysis.this.lattice.Elem)ReachingDefinitionsAnalysis.this.lattice.Elem" id="164231">blockTransfer</a>(<a title="ReachingDefinitions.this.global.icodes.BasicBlock" id="165241">b</a>: <a href="../BasicBlocks.scala.html#46178" title="ReachingDefinitions.this.global.icodes.BasicBlock">BasicBlock</a>, <a title="ReachingDefinitionsAnalysis.this.lattice.Elem" id="165242">in</a>: lattice.<a href="CompleteLattice.scala.html#60414" title="ReachingDefinitionsAnalysis.this.lattice.Elem">Elem</a>): lattice.<a href="CompleteLattice.scala.html#60414" title="ReachingDefinitionsAnalysis.this.lattice.Elem">Elem</a> = {
      <span class="keyword">var</span> <a title="scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]" id="165456">locals</a>: <span title="scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]">Set</span>[Definition] = <span title="(elems: Traversable[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)])scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]">(</span><a href="#165242" title="ReachingDefinitionsAnalysis.this.lattice.Elem">in</a>.<a href="CompleteLattice.scala.html#60844" title="(p: ((ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)) =&gt; Boolean)scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]">vars</a> filter <a href="#165459" title="Boolean">{</a> <span title="Boolean" class="keyword">case</span> (<a title="ReachingDefinitions.this.global.icodes.Local" id="165463">l</a>, _, _) =&gt; <a title="=&gt; Boolean" id="2205">!</a><a href="#164217" title="(key: ReachingDefinitions.this.global.icodes.BasicBlock)scala.collection.immutable.Set[ReachingDefinitions.this.global.icodes.Local]">kill</a><a title="(elem: ReachingDefinitions.this.global.icodes.Local)Boolean" id="39339">(</a><a href="#165241" title="ReachingDefinitions.this.global.icodes.BasicBlock">b</a>)(<a href="#165463" title="ReachingDefinitions.this.global.icodes.Local">l</a>) }) ++ <a href="#164215" title="(key: ReachingDefinitions.this.global.icodes.BasicBlock)scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]">gen</a>(<a href="#165241" title="ReachingDefinitions.this.global.icodes.BasicBlock">b</a>)
      <span title="Unit" class="keyword">if</span> (<a href="#165456" title="(x$1: AnyRef)Boolean">locals</a> eq <a href="#164207" title="=&gt; ReachingDefinitions.this.rdefLattice.type">lattice</a>.<a href="#163881" title="=&gt; ReachingDefinitionsAnalysis.this.lattice.Elem">bottom</a>.<a href="CompleteLattice.scala.html#60844" title="=&gt; scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]">vars</a>) <a href="#165456" title="scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]">locals</a> = <span title="scala.collection.immutable.ListSet[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]" class="keyword">new</span> <span title="scala.collection.immutable.ListSet[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]">ListSet</span>[Definition]
      <a href="CompleteLattice.scala.html#60903" title="(vars: scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)],stack: List[ReachingDefinitionsAnalysis.this.lattice.StackPos])ReachingDefinitionsAnalysis.this.lattice.IState[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)],List[ReachingDefinitionsAnalysis.this.lattice.StackPos]]">IState</a>(<a href="#165456" title="scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]">locals</a>, <a href="#164221" title="(key: ReachingDefinitions.this.global.icodes.BasicBlock)ReachingDefinitionsAnalysis.this.lattice.Stack">outStack</a>(<a href="#165241" title="ReachingDefinitions.this.global.icodes.BasicBlock">b</a>) <a href="#165627" title="ReachingDefinitionsAnalysis.this.lattice.Stack">:::</a> <a href="#165242" title="ReachingDefinitionsAnalysis.this.lattice.Elem">in</a>.<a href="CompleteLattice.scala.html#60846" title="=&gt; ReachingDefinitionsAnalysis.this.lattice.Stack">stack</a>.<span title="(n: Int)List[ReachingDefinitionsAnalysis.this.lattice.StackPos]">drop</span><span title="(prefix: List[ReachingDefinitionsAnalysis.this.lattice.StackPos])List[ReachingDefinitionsAnalysis.this.lattice.StackPos]">(</span><a href="#164219" title="(key: ReachingDefinitions.this.global.icodes.BasicBlock)Int">drops</a>(<a href="#165241" title="ReachingDefinitions.this.global.icodes.BasicBlock">b</a>)))
    }
    
    /** Return the reaching definitions corresponding to the point after idx. */
    <span class="keyword">def</span> <a title="(b: ReachingDefinitions.this.global.icodes.BasicBlock,idx: Int,in: ReachingDefinitionsAnalysis.this.lattice.Elem)ReachingDefinitionsAnalysis.this.lattice.Elem" id="164232">interpret</a>(<a title="ReachingDefinitions.this.global.icodes.BasicBlock" id="165669">b</a>: <a href="../BasicBlocks.scala.html#46178" title="ReachingDefinitions.this.global.icodes.BasicBlock">BasicBlock</a>, <a title="Int" id="165670">idx</a>: <span title="Int">Int</span>, <a title="ReachingDefinitionsAnalysis.this.lattice.Elem" id="165671">in</a>: lattice.<a href="CompleteLattice.scala.html#60414" title="ReachingDefinitionsAnalysis.this.lattice.Elem">Elem</a>): <a href="CompleteLattice.scala.html#60414" title="ReachingDefinitionsAnalysis.this.lattice.Elem">Elem</a> = {
      <span class="keyword">var</span> <a title="scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]" id="165673">locals</a> = <a href="#165671" title="ReachingDefinitionsAnalysis.this.lattice.Elem">in</a>.<a href="CompleteLattice.scala.html#60844" title="=&gt; scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]">vars</a>
      <span class="keyword">var</span> <a title="ReachingDefinitionsAnalysis.this.lattice.Stack" id="165674">stack</a>  = <a href="#165671" title="ReachingDefinitionsAnalysis.this.lattice.Elem">in</a>.<a href="CompleteLattice.scala.html#60846" title="=&gt; ReachingDefinitionsAnalysis.this.lattice.Stack">stack</a>
      <span class="keyword">val</span> <a title="ReachingDefinitions.this.global.icodes.Instruction" id="165675">instr</a> = <a href="../BasicBlocks.scala.html#61323" title="(n: Int)ReachingDefinitions.this.global.icodes.Instruction">b</a>(<a href="#165670" title="Int">idx</a>)
      <a href="#165675" title="ReachingDefinitions.this.global.icodes.Instruction">instr</a> <span title="Unit" class="keyword">match</span> {
        <span title="Unit" class="keyword">case</span> STORE_LOCAL(<a title="ReachingDefinitions.this.global.icodes.Local" id="165688">l1</a>) =&gt;
          <a href="#165673" title="scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]">locals</a> = <a href="#164230" title="(b: ReachingDefinitions.this.global.icodes.BasicBlock,idx: Int,rd: scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)])scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]">updateReachingDefinition</a>(<a href="#165669" title="ReachingDefinitions.this.global.icodes.BasicBlock">b</a>, <a href="#165670" title="Int">idx</a>, <a href="#165673" title="scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]">locals</a>)
          <a href="#165674" title="ReachingDefinitionsAnalysis.this.lattice.Stack">stack</a> = <a href="#165674" title="ReachingDefinitionsAnalysis.this.lattice.Stack">stack</a>.<span title="(n: Int)List[ReachingDefinitionsAnalysis.this.lattice.StackPos]">drop</span>(<a href="#165675" title="ReachingDefinitions.this.global.icodes.Instruction">instr</a>.<a href="../Opcodes.scala.html#61468" title="=&gt; Int">consumed</a>)
        <span title="Unit" class="keyword">case</span> LOAD_EXCEPTION() =&gt;
          <a href="#165674" title="ReachingDefinitionsAnalysis.this.lattice.Stack">stack</a> = <span title="object Nil">Nil</span>
        <span title="Unit" class="keyword">case</span> _ =&gt;
          <a href="#165674" title="ReachingDefinitionsAnalysis.this.lattice.Stack">stack</a> = <a href="#165674" title="ReachingDefinitionsAnalysis.this.lattice.Stack">stack</a>.<span title="(n: Int)List[ReachingDefinitionsAnalysis.this.lattice.StackPos]">drop</span>(<a href="#165675" title="ReachingDefinitions.this.global.icodes.Instruction">instr</a>.<a href="../Opcodes.scala.html#61468" title="=&gt; Int">consumed</a>)
      }

      <span class="keyword">var</span> <a title="Int" id="165676">prod</a> = <a href="#165675" title="ReachingDefinitions.this.global.icodes.Instruction">instr</a>.<a href="../Opcodes.scala.html#61469" title="=&gt; Int">produced</a>
      <span title="Unit" class="keyword">while</span> (<a href="#165676" title="(x$1: Int)Boolean">prod</a> &gt; <span title="Int(0)" class="int">0</span>) <a href="#165677" title="()Unit">{</a>
        <a href="#165674" title="ReachingDefinitionsAnalysis.this.lattice.Stack">stack</a> = collection.immutable.<span title="(args: (ReachingDefinitions.this.global.icodes.BasicBlock, Int)*)scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]">Set</span>(<span title="(_1: ReachingDefinitions.this.global.icodes.BasicBlock,_2: Int)(ReachingDefinitions.this.global.icodes.BasicBlock, Int)">(</span><a href="#165669" title="ReachingDefinitions.this.global.icodes.BasicBlock">b</a>, <a href="#165670" title="Int">idx</a>)) <a href="#165707" title="scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]">::</a> <a href="#165674" title="(x: ReachingDefinitionsAnalysis.this.lattice.StackPos)List[ReachingDefinitionsAnalysis.this.lattice.StackPos]">stack</a>
        <a href="#165676" title="Int">prod</a> -= <span title="Int(1)" class="int">1</span>
      }

      <a href="CompleteLattice.scala.html#60903" title="(vars: scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)],stack: ReachingDefinitionsAnalysis.this.lattice.Stack)ReachingDefinitionsAnalysis.this.lattice.IState[scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)],ReachingDefinitionsAnalysis.this.lattice.Stack]">IState</a>(<a href="#165673" title="scala.collection.immutable.Set[(ReachingDefinitions.this.global.icodes.Local, ReachingDefinitions.this.global.icodes.BasicBlock, Int)]">locals</a>, <a href="#165674" title="ReachingDefinitionsAnalysis.this.lattice.Stack">stack</a>)
    }

    /** Return the instructions that produced the 'm' elements on the stack, below given 'depth'.
     *  for instance, findefs(bb, idx, 1, 1) returns the instructions that might have produced the
     *  value found below the topmost element of the stack. 
     */
    <span class="keyword">def</span> <a title="(bb: ReachingDefinitions.this.global.icodes.BasicBlock,idx: Int,m: Int,depth: Int)List[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]" id="164233">findDefs</a>(<a title="ReachingDefinitions.this.global.icodes.BasicBlock" id="165768">bb</a>: <a href="../BasicBlocks.scala.html#46178" title="ReachingDefinitions.this.global.icodes.BasicBlock">BasicBlock</a>, <a title="Int" id="165769">idx</a>: <span title="Int">Int</span>, <a title="Int" id="165770">m</a>: <span title="Int">Int</span>, <a title="Int" id="165771">depth</a>: <span title="Int">Int</span>): <span title="List[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]">List</span>[(BasicBlock, Int)] = <span title="List[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]" class="keyword">if</span> (<a href="#165769" title="(x$1: Int)Boolean">idx</a> &gt; <span title="Int(0)" class="int">0</span>) {
      <a title="(assertion: Boolean)Unit" id="7874">assert</a>(<a href="#165768" title="ReachingDefinitions.this.global.icodes.BasicBlock">bb</a>.<a href="../BasicBlocks.scala.html#61288" title="=&gt; Boolean">closed</a>)
      <span class="keyword">var</span> <a title="Array[ReachingDefinitions.this.global.icodes.Instruction]" id="165779">instrs</a> = <a href="#165768" title="ReachingDefinitions.this.global.icodes.BasicBlock">bb</a>.<a href="../BasicBlocks.scala.html#61315" title="=&gt; Array[ReachingDefinitions.this.global.icodes.Instruction]">getArray</a>
      <span class="keyword">var</span> <a title="List[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]" id="165780">res</a>: <span title="List[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]">List</span>[(BasicBlock, Int)] = <span title="object Nil">Nil</span>
      <span class="keyword">var</span> <a title="Int" id="165781">i</a> = <a href="#165769" title="Int">idx</a>
      <span class="keyword">var</span> <a title="Int" id="165782">n</a> = <a href="#165770" title="Int">m</a>
      <span class="keyword">var</span> <a title="Int" id="165783">d</a> = <a href="#165771" title="Int">depth</a>
      // &quot;I look for who produced the 'n' elements below the 'd' topmost slots of the stack&quot;
      <span title="Unit" class="keyword">while</span> (<a href="#165782" title="(x$1: Int)Boolean">n</a> <a title="(x$1: Boolean)Boolean" id="2212">&gt;</a> <span title="Int(0)" class="int">0</span> &amp;&amp; <a href="#165781" title="(x$1: Int)Boolean">i</a> &gt; <span title="Int(0)" class="int">0</span>) <a href="#165784" title="()Unit">{</a>
        <a href="#165781" title="Int">i</a> -= <span title="Int(1)" class="int">1</span>
        <span class="keyword">val</span> <a title="Int" id="165805">prod</a> = <a href="#165779" title="(i: Int)ReachingDefinitions.this.global.icodes.Instruction">instrs</a>(<a href="#165781" title="Int">i</a>).<a href="../Opcodes.scala.html#61469" title="=&gt; Int">produced</a>
        <span title="Unit" class="keyword">if</span> (<a href="#165805" title="(x$1: Int)Boolean">prod</a> &gt; <a href="#165783" title="Int">d</a>) {
          <a href="#165780" title="List[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]">res</a> = <span title="(_1: ReachingDefinitions.this.global.icodes.BasicBlock,_2: Int)(ReachingDefinitions.this.global.icodes.BasicBlock, Int)">(</span><a href="#165768" title="ReachingDefinitions.this.global.icodes.BasicBlock">bb</a>, <a href="#165781" title="Int">i</a>) <a href="#165852" title="(ReachingDefinitions.this.global.icodes.BasicBlock, Int)">::</a> <a href="#165780" title="(x: (ReachingDefinitions.this.global.icodes.BasicBlock, Int))List[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]">res</a>
          <a href="#165782" title="Int">n</a>   = <a href="#165782" title="(x$1: Int)Int">n</a> - (<a href="#165805" title="(x$1: Int)Int">prod</a> - <a href="#165783" title="Int">d</a>)
          <span title="Unit" class="keyword">if</span> (<a href="#165779" title="(i: Int)ReachingDefinitions.this.global.icodes.Instruction">instrs</a><span title="(x$1: AnyRef)Boolean">(</span><a href="#165781" title="Int">i</a>) != <a href="../Opcodes.scala.html#64125" title="()ReachingDefinitions.this.global.icodes.opcodes.LOAD_EXCEPTION">LOAD_EXCEPTION</a>()) {
            <a href="#165783" title="Int">d</a> = <a href="#165779" title="(i: Int)ReachingDefinitions.this.global.icodes.Instruction">instrs</a>(<a href="#165781" title="Int">i</a>).<a href="../Opcodes.scala.html#61468" title="=&gt; Int">consumed</a>
          }
        } <span class="keyword">else</span> {
          <a href="#165783" title="Int">d</a> -= <a href="#165805" title="Int">prod</a>
          <a href="#165783" title="Int">d</a> += <a href="#165779" title="(i: Int)ReachingDefinitions.this.global.icodes.Instruction">instrs</a>(<a href="#165781" title="Int">i</a>).<a href="../Opcodes.scala.html#61468" title="=&gt; Int">consumed</a>
        }
      }
      
      <span title="Unit" class="keyword">if</span> (<a href="#165782" title="(x$1: Int)Boolean">n</a> &gt; <span title="Int(0)" class="int">0</span>) { 
        <span class="keyword">val</span> <a title="ReachingDefinitionsAnalysis.this.lattice.Stack" id="166003">stack</a> = <a href="#163870" title="ReachingDefinitionsAnalysis.this.type" class="keyword">this</a>.<a href="DataFlowAnalysis.scala.html#61151" title="(key: ReachingDefinitionsAnalysis.this.P)ReachingDefinitionsAnalysis.this.lattice.Elem">in</a>(<a href="#165768" title="ReachingDefinitions.this.global.icodes.BasicBlock">bb</a>).<a href="CompleteLattice.scala.html#60846" title="=&gt; ReachingDefinitionsAnalysis.this.lattice.Stack">stack</a>
        <span title="(assertion: Boolean,message: =&gt; Any)Unit">assert</span>(<a href="#166003" title="ReachingDefinitionsAnalysis.this.lattice.Stack">stack</a>.<span title="(x$1: Int)Boolean">length</span> &gt;= <a href="#165782" title="Int">n</a>, <span title="(x$1: Any)java.lang.String" class="string">&quot;entry stack is too small, expected: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#165782" title="Int">n</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; found: &quot;)" class="string">&quot; found: &quot;</span> + <a href="#166003" title="ReachingDefinitionsAnalysis.this.lattice.Stack">stack</a>)
        <a href="#166003" title="ReachingDefinitionsAnalysis.this.lattice.Stack">stack</a>.<span title="(n: Int)List[ReachingDefinitionsAnalysis.this.lattice.StackPos]">drop</span>(<a href="#165783" title="Int">d</a>).<span title="(n: Int)List[ReachingDefinitionsAnalysis.this.lattice.StackPos]">take</span><span title="(f: (ReachingDefinitionsAnalysis.this.lattice.StackPos) =&gt; Unit)Unit">(</span><a href="#165782" title="Int">n</a>) foreach { <a title="ReachingDefinitionsAnalysis.this.lattice.StackPos" id="166060">defs</a> =&gt;
          <a href="#165780" title="List[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]">res</a> = <a href="#166060" title="ReachingDefinitionsAnalysis.this.lattice.StackPos">defs</a>.<span title="=&gt; List[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]">toList</span> <a href="#166061" title="List[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]">:::</a> <a href="#165780" title="(prefix: List[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)])List[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]">res</a>
        }
      }
      <a href="#165780" title="List[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]">res</a>
    } <span class="keyword">else</span> {
      <span class="keyword">val</span> <a title="ReachingDefinitionsAnalysis.this.lattice.Stack" id="166072">stack</a> = <a href="#163870" title="ReachingDefinitionsAnalysis.this.type" class="keyword">this</a>.<a href="DataFlowAnalysis.scala.html#61151" title="(key: ReachingDefinitionsAnalysis.this.P)ReachingDefinitionsAnalysis.this.lattice.Elem">in</a>(<a href="#165768" title="ReachingDefinitions.this.global.icodes.BasicBlock">bb</a>).<a href="CompleteLattice.scala.html#60846" title="=&gt; ReachingDefinitionsAnalysis.this.lattice.Stack">stack</a>
      <span title="(assertion: Boolean,message: =&gt; Any)Unit">assert</span>(<a href="#166072" title="ReachingDefinitionsAnalysis.this.lattice.Stack">stack</a>.<span title="(x$1: Int)Boolean">length</span> &gt;= <a href="#165770" title="Int">m</a>, <span title="(x$1: Any)java.lang.String" class="string">&quot;entry stack is too small, expected: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#165770" title="Int">m</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; found: &quot;)" class="string">&quot; found: &quot;</span> + <a href="#166072" title="ReachingDefinitionsAnalysis.this.lattice.Stack">stack</a>)
      <a href="#166072" title="ReachingDefinitionsAnalysis.this.lattice.Stack">stack</a>.<span title="(n: Int)List[ReachingDefinitionsAnalysis.this.lattice.StackPos]">drop</span>(<a href="#165771" title="Int">depth</a>).<span title="(n: Int)List[ReachingDefinitionsAnalysis.this.lattice.StackPos]">take</span><a title="(f: (ReachingDefinitionsAnalysis.this.lattice.StackPos) =&gt; Traversable[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)])(implicit bf: scala.collection.generic.BuilderFactory[(ReachingDefinitions.this.global.icodes.BasicBlock, Int),List[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)],List[ReachingDefinitionsAnalysis.this.lattice.StackPos]])List[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]" id="25248">(</a><a href="#165770" title="Int">m</a>) <span title="scala.collection.generic.BuilderFactory[(ReachingDefinitions.this.global.icodes.BasicBlock, Int),List[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)],List#Coll]">flatMap</span> (<a href="#166120" title="ReachingDefinitionsAnalysis.this.lattice.StackPos">_</a>.<span title="=&gt; List[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]">toList</span>)
    }

    /** Return the definitions that produced the topmost 'm' elements on the stack,
     *  and that reach the instruction at index 'idx' in basic block 'bb'.
     */
    <span class="keyword">def</span> <a title="(bb: ReachingDefinitions.this.global.icodes.BasicBlock,idx: Int,m: Int)List[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]" id="164234">findDefs</a>(<a title="ReachingDefinitions.this.global.icodes.BasicBlock" id="166150">bb</a>: <a href="../BasicBlocks.scala.html#46178" title="ReachingDefinitions.this.global.icodes.BasicBlock">BasicBlock</a>, <a title="Int" id="166151">idx</a>: <span title="Int">Int</span>, <a title="Int" id="166152">m</a>: <span title="Int">Int</span>): <span title="List[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]">List</span>[(BasicBlock, Int)] = 
      <a href="#164233" title="(bb: ReachingDefinitions.this.global.icodes.BasicBlock,idx: Int,m: Int,depth: Int)List[(ReachingDefinitions.this.global.icodes.BasicBlock, Int)]">findDefs</a>(<a href="#166150" title="ReachingDefinitions.this.global.icodes.BasicBlock">bb</a>, <a href="#166151" title="Int">idx</a>, <a href="#166152" title="Int">m</a>, <span title="Int(0)" class="int">0</span>)

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="164235">toString</a>: <a title="String" id="1605">String</a> = {
      <span class="keyword">val</span> <a title="StringBuilder" id="166161">sb</a> = <a title="()StringBuilder" id="57398" class="keyword">new</a> <a title="StringBuilder" id="366">StringBuilder</a>
      <a href="#166161" title="StringBuilder">sb</a>.<span title="(s: String)StringBuilder">append</span>(<span title="java.lang.String(&quot;rdef: \012&quot;)" class="string">&quot;rdef: \n&quot;</span>)
      <span class="keyword">for</span> (<a title="ReachingDefinitions.this.global.icodes.BasicBlock" id="166197">b</a> &lt;- <a href="#164213" title="=&gt; ReachingDefinitions.this.global.icodes.IMethod">method</a>.<a href="../Members.scala.html#61228" title="=&gt; ReachingDefinitions.this.global.icodes.Code">code</a>.<a href="../Members.scala.html#61390" title="(f: (ReachingDefinitions.this.global.icodes.BasicBlock) =&gt; StringBuilder)Unit">blocks</a>)
        <a href="#166161" title="StringBuilder">sb</a>.<span title="(s: String)StringBuilder">append</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;rdef_entry(&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#166197" title="ReachingDefinitions.this.global.icodes.BasicBlock">b</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;)= &quot;)" class="string">&quot;)= &quot;</span> + <a href="DataFlowAnalysis.scala.html#61151" title="(key: ReachingDefinitionsAnalysis.this.P)ReachingDefinitionsAnalysis.this.lattice.Elem">in</a>(<a href="#166197" title="ReachingDefinitions.this.global.icodes.BasicBlock">b</a>)).<span title="(s: String)StringBuilder">append</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;\nrdef_exit(&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#166197" title="ReachingDefinitions.this.global.icodes.BasicBlock">b</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;)= &quot;)" class="string">&quot;)= &quot;</span> + <a href="DataFlowAnalysis.scala.html#61153" title="(key: ReachingDefinitionsAnalysis.this.P)ReachingDefinitionsAnalysis.this.lattice.Elem">out</a>(<a href="#166197" title="ReachingDefinitions.this.global.icodes.BasicBlock">b</a>))
      <a href="#166161" title="StringBuilder">sb</a>.<a title="()String" id="57547">toString</a>()
    }

  }
}

        </pre>
    </body>
</html>