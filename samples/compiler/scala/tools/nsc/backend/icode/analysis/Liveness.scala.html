<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/backend/icode/analysis/Liveness.scala</title>
        <script type="text/javascript" src="../../../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../../../style.css" title="Style">
    </head>
    <body>
        <pre>
/* NSC -- new Scala compiler
 * Copyright 2005-2009 LAMP/EPFL
 * @author  Martin Odersky
 */

// $Id: Liveness.scala 18387 2009-07-24 15:28:37Z odersky $

<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> backend.icode.analysis

<span class="keyword">import</span> scala.collection.mutable.{HashMap, Map}
<span class="keyword">import</span> scala.collection.immutable.{Set, ListSet}

/**
 * Compute liveness information for local variables.
 *
 * @author Iulian Dragos
 */
<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class Liveness extends java.lang.Object with ScalaObject" id="15839">Liveness</a> <span title="ScalaObject">{</span>
  <span class="keyword">val</span> <a title="=&gt; scala.tools.nsc.Global" id="554683">global</a>: <a href="../../../Global.scala.html#8460" title="scala.tools.nsc.Global">Global</a>
  <span class="keyword">import</span> global._
  <span class="keyword">import</span> icodes._

  /** The lattice for this analysis.   */
  <span class="keyword">object</span> <a title="object Liveness.this.livenessLattice" id="554686">livenessLattice</a> <span title="ScalaObject" class="keyword">extends</span> <a href="CompleteLattice.scala.html#16031" title="scala.tools.nsc.backend.icode.analysis.CompleteLattice">CompleteLattice</a> {
    <span class="keyword">type</span> <a title="scala.collection.immutable.Set[Liveness.this.global.icodes.Local]" id="554693">Elem</a> = <span title="scala.collection.immutable.Set[Liveness.this.global.icodes.Local]">Set</span>[Local]

    <span class="keyword">val</span> <a title="scala.tools.nsc.backend.icode.analysis.Liveness.livenessLattice.Elem" id="554694">top</a>: <span title="scala.tools.nsc.backend.icode.analysis.Liveness.livenessLattice.Elem">Elem</span> = <a href="#554702" title="scala.collection.immutable.ListSet[Liveness.this.global.icodes.Local]{ ... }" class="keyword">new</a> <a title="anonymous class $anon extends scala.collection.immutable.ListSet[Liveness.this.global.icodes.Local]" id="554702">ListSet</a>[Local]() {
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="(that: Any)Boolean" id="554704">equals</a>(<a title="Any" id="554718">that</a>: <span title="Any">Any</span>): <span title="Boolean">Boolean</span> = <a href="#554702" title="(x$1: AnyRef)Boolean" class="keyword">this</a> eq <a href="#554718" title="Any">that</a>.<span title="[T0]T0">asInstanceOf</span><span title="AnyRef">[</span><span title="AnyRef">AnyRef</span>]
    }

    <span class="keyword">val</span> <a title="scala.tools.nsc.backend.icode.analysis.Liveness.livenessLattice.Elem" id="554696">bottom</a>: <span title="scala.tools.nsc.backend.icode.analysis.Liveness.livenessLattice.Elem">Elem</span> = <a href="#554724" title="scala.collection.immutable.ListSet[Liveness.this.global.icodes.Local]{ ... }" class="keyword">new</a> <a title="anonymous class $anon extends scala.collection.immutable.ListSet[Liveness.this.global.icodes.Local]" id="554724">ListSet</a>[Local]() {
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="(that: Any)Boolean" id="554726">equals</a>(<a title="Any" id="554730">that</a>: <span title="Any">Any</span>): <span title="Boolean">Boolean</span> = <a href="#554724" title="(x$1: AnyRef)Boolean" class="keyword">this</a> eq <a href="#554730" title="Any">that</a>.<span title="[T0]T0">asInstanceOf</span><span title="AnyRef">[</span><span title="AnyRef">AnyRef</span>]
    }

    <span class="keyword">def</span> <a title="(a: scala.tools.nsc.backend.icode.analysis.Liveness.livenessLattice.Elem,b: scala.tools.nsc.backend.icode.analysis.Liveness.livenessLattice.Elem)scala.tools.nsc.backend.icode.analysis.Liveness.livenessLattice.Elem" id="554698">lub2</a>(<a title="scala.tools.nsc.backend.icode.analysis.Liveness.livenessLattice.Elem" id="554736">a</a>: <span title="scala.tools.nsc.backend.icode.analysis.Liveness.livenessLattice.Elem">Elem</span>, <a title="scala.tools.nsc.backend.icode.analysis.Liveness.livenessLattice.Elem" id="554737">b</a>: <span title="scala.tools.nsc.backend.icode.analysis.Liveness.livenessLattice.Elem">Elem</span>): <span title="scala.tools.nsc.backend.icode.analysis.Liveness.livenessLattice.Elem">Elem</span> = <a href="#554736" title="(elems: Traversable[Liveness.this.global.icodes.Local])scala.collection.immutable.Set[Liveness.this.global.icodes.Local]">a</a> ++ <a href="#554737" title="scala.tools.nsc.backend.icode.analysis.Liveness.livenessLattice.Elem">b</a>
  }

  <span class="keyword">final</span> <span class="keyword">class</span> <a title="class LivenessAnalysis extends java.lang.Object with scala.tools.nsc.backend.icode.analysis.DataFlowAnalysis[Liveness.this.livenessLattice.type] with ScalaObject" id="554688">LivenessAnalysis</a> <span title="ScalaObject" class="keyword">extends</span> <a href="DataFlowAnalysis.scala.html#15920" title="scala.tools.nsc.backend.icode.analysis.DataFlowAnalysis[Liveness.this.livenessLattice.type]">DataFlowAnalysis</a>[livenessLattice.<span class="keyword">type</span>] {
    <span class="keyword">type</span> <a title="Liveness.this.global.icodes.BasicBlock" id="554849">P</a> = <a href="../BasicBlocks.scala.html#46178" title="Liveness.this.global.icodes.BasicBlock">BasicBlock</a>
    <span class="keyword">val</span> <a title="Liveness.this.livenessLattice.type" id="554850">lattice</a> = <a href="#554686" title="object Liveness.this.livenessLattice">livenessLattice</a>

    <span class="keyword">var</span> <a title="Liveness.this.global.icodes.IMethod" id="554853">method</a>: <a href="../Members.scala.html#46173" title="Liveness.this.global.icodes.IMethod">IMethod</a> = _

    <span class="keyword">val</span> <a title="scala.collection.mutable.Map[Liveness.this.global.icodes.BasicBlock,scala.collection.immutable.Set[Liveness.this.global.icodes.Local]]" id="554855">gen</a>: <span title="scala.collection.mutable.Map[Liveness.this.global.icodes.BasicBlock,scala.collection.immutable.Set[Liveness.this.global.icodes.Local]]">Map</span>[BasicBlock, Set[Local]] = <span title="scala.collection.mutable.HashMap[Liveness.this.global.icodes.BasicBlock,scala.collection.immutable.Set[Liveness.this.global.icodes.Local]]" class="keyword">new</span> <span title="scala.collection.mutable.HashMap[Liveness.this.global.icodes.BasicBlock,scala.collection.immutable.Set[Liveness.this.global.icodes.Local]]">HashMap</span>()
    <span class="keyword">val</span> <a title="scala.collection.mutable.Map[Liveness.this.global.icodes.BasicBlock,scala.collection.immutable.Set[Liveness.this.global.icodes.Local]]" id="554857">kill</a>:<span title="scala.collection.mutable.Map[Liveness.this.global.icodes.BasicBlock,scala.collection.immutable.Set[Liveness.this.global.icodes.Local]]">Map</span>[BasicBlock, Set[Local]] = <span title="scala.collection.mutable.HashMap[Liveness.this.global.icodes.BasicBlock,scala.collection.immutable.Set[Liveness.this.global.icodes.Local]]" class="keyword">new</span> <span title="scala.collection.mutable.HashMap[Liveness.this.global.icodes.BasicBlock,scala.collection.immutable.Set[Liveness.this.global.icodes.Local]]">HashMap</span>()

    <span class="keyword">def</span> <a title="(m: Liveness.this.global.icodes.IMethod)Unit" id="554859">init</a>(<a title="Liveness.this.global.icodes.IMethod" id="554878">m</a>: <a href="../Members.scala.html#46173" title="Liveness.this.global.icodes.IMethod">IMethod</a>) {
      <a href="#554688" title="LivenessAnalysis.this.type" class="keyword">this</a>.<a href="#554853" title="(x$1: Liveness.this.global.icodes.IMethod)Unit">method</a> = <a href="#554878" title="Liveness.this.global.icodes.IMethod">m</a>
      <a href="#554855" title="=&gt; scala.collection.mutable.Map[Liveness.this.global.icodes.BasicBlock,scala.collection.immutable.Set[Liveness.this.global.icodes.Local]]">gen</a>.<span title="()Unit">clear</span>
      <a href="#554857" title="=&gt; scala.collection.mutable.Map[Liveness.this.global.icodes.BasicBlock,scala.collection.immutable.Set[Liveness.this.global.icodes.Local]]">kill</a>.<span title="()Unit">clear</span>

      <span class="keyword">for</span> (<a title="Liveness.this.global.icodes.BasicBlock" id="555046">b</a> &lt;- <a href="#554878" title="Liveness.this.global.icodes.IMethod">m</a>.<a href="../Members.scala.html#61228" title="=&gt; Liveness.this.global.icodes.Code">code</a>.<a href="../Members.scala.html#61390" title="=&gt; scala.collection.mutable.ListBuffer[Liveness.this.global.icodes.BasicBlock]">blocks</a>.<a title="(f: (Liveness.this.global.icodes.BasicBlock) =&gt; (Liveness.this.global.icodes.BasicBlock, (scala.collection.immutable.Set[Liveness.this.global.icodes.Local], scala.collection.immutable.Set[Liveness.this.global.icodes.Local])))(implicit bf: scala.collection.generic.BuilderFactory[(Liveness.this.global.icodes.BasicBlock, (scala.collection.immutable.Set[Liveness.this.global.icodes.Local], scala.collection.immutable.Set[Liveness.this.global.icodes.Local])),List[(Liveness.this.global.icodes.BasicBlock, (scala.collection.immutable.Set[Liveness.this.global.icodes.Local], scala.collection.immutable.Set[Liveness.this.global.icodes.Local]))],List[Liveness.this.global.icodes.BasicBlock]])List[(Liveness.this.global.icodes.BasicBlock, (scala.collection.immutable.Set[Liveness.this.global.icodes.Local], scala.collection.immutable.Set[Liveness.this.global.icodes.Local]))]" id="25243">toList</a>;
           <a title="((scala.collection.immutable.Set[Liveness.this.global.icodes.Local], scala.collection.immutable.Set[Liveness.this.global.icodes.Local]), scala.collection.immutable.Set[Liveness.this.global.icodes.Local], scala.collection.immutable.Set[Liveness.this.global.icodes.Local])" id="32686">(</a><a href="#554902" title="scala.collection.immutable.Set[Liveness.this.global.icodes.Local]" id="555049">g</a>, <a href="#554902" title="scala.collection.immutable.Set[Liveness.this.global.icodes.Local]" id="555050">k</a>) = <a href="#554861" title="(b: Liveness.this.global.icodes.BasicBlock)(scala.collection.immutable.Set[Liveness.this.global.icodes.Local], scala.collection.immutable.Set[Liveness.this.global.icodes.Local])">genAndKill</a><span title="(scala.collection.immutable.Set[Liveness.this.global.icodes.Local], scala.collection.immutable.Set[Liveness.this.global.icodes.Local]) @unchecked">(</span><a href="#555046" title="Liveness.this.global.icodes.BasicBlock">b</a>)) {
        <a href="#554855" title="(kv: (Liveness.this.global.icodes.BasicBlock, scala.collection.immutable.Set[Liveness.this.global.icodes.Local]))LivenessAnalysis.this.gen.type">gen</a>  += (<a href="#555046" title="(y: scala.collection.immutable.Set[Liveness.this.global.icodes.Local])(Liveness.this.global.icodes.BasicBlock, scala.collection.immutable.Set[Liveness.this.global.icodes.Local])">b</a> -&gt; <a href="#555049" title="scala.collection.immutable.Set[Liveness.this.global.icodes.Local]">g</a>)
        <a href="#554857" title="(kv: (Liveness.this.global.icodes.BasicBlock, scala.collection.immutable.Set[Liveness.this.global.icodes.Local]))LivenessAnalysis.this.kill.type">kill</a> += (<a href="#555046" title="(y: scala.collection.immutable.Set[Liveness.this.global.icodes.Local])(Liveness.this.global.icodes.BasicBlock, scala.collection.immutable.Set[Liveness.this.global.icodes.Local])">b</a> -&gt; <a href="#555050" title="scala.collection.immutable.Set[Liveness.this.global.icodes.Local]">k</a>)
      }

      <a href="DataFlowAnalysis.scala.html#61163" title="(f: =&gt; Unit)Unit">init</a> {
        <a href="DataFlowAnalysis.scala.html#61149" title="(iter: Traversable[LivenessAnalysis.this.P])LivenessAnalysis.this.worklist.type" id="39507">worklist</a> ++= <a href="#554878" title="Liveness.this.global.icodes.IMethod">m</a>.<a href="../Members.scala.html#61228" title="=&gt; Liveness.this.global.icodes.Code">code</a>.<a href="../Members.scala.html#61390" title="=&gt; scala.collection.mutable.ListBuffer[Liveness.this.global.icodes.BasicBlock]">blocks</a>.<span title="=&gt; List[Liveness.this.global.icodes.BasicBlock]">toList</span>
        <a href="#554878" title="Liveness.this.global.icodes.IMethod">m</a>.<a href="../Members.scala.html#61228" title="=&gt; Liveness.this.global.icodes.Code">code</a>.<a href="../Members.scala.html#61390" title="=&gt; scala.collection.mutable.ListBuffer[Liveness.this.global.icodes.BasicBlock]">blocks</a>.<a title="(f: (Liveness.this.global.icodes.BasicBlock) =&gt; Unit)Unit" id="61746">foreach</a> { <a title="Liveness.this.global.icodes.BasicBlock" id="555178">b</a> =&gt;
          <a href="DataFlowAnalysis.scala.html#61151" title="(key: LivenessAnalysis.this.P,value: LivenessAnalysis.this.lattice.Elem)Unit">in</a>(<a href="#555178" title="Liveness.this.global.icodes.BasicBlock">b</a>)  = <a href="#554850" title="=&gt; Liveness.this.livenessLattice.type">lattice</a>.<a href="#554696" title="=&gt; LivenessAnalysis.this.lattice.Elem">bottom</a>
          <a href="DataFlowAnalysis.scala.html#61153" title="(key: LivenessAnalysis.this.P,value: LivenessAnalysis.this.lattice.Elem)Unit">out</a>(<a href="#555178" title="Liveness.this.global.icodes.BasicBlock">b</a>) = <a href="#554850" title="=&gt; Liveness.this.livenessLattice.type">lattice</a>.<a href="#554696" title="=&gt; LivenessAnalysis.this.lattice.Elem">bottom</a>
        }
      }
    }

    <span class="keyword">import</span> opcodes._

    /** Return the gen and kill sets for this block. */
    <span class="keyword">def</span> <a title="(b: Liveness.this.global.icodes.BasicBlock)(scala.collection.immutable.Set[Liveness.this.global.icodes.Local], scala.collection.immutable.Set[Liveness.this.global.icodes.Local])" id="554861">genAndKill</a>(<a title="Liveness.this.global.icodes.BasicBlock" id="554906">b</a>: <a href="../BasicBlocks.scala.html#46178" title="Liveness.this.global.icodes.BasicBlock">BasicBlock</a>): <span title="(scala.collection.immutable.Set[Liveness.this.global.icodes.Local], scala.collection.immutable.Set[Liveness.this.global.icodes.Local])">(</span>Set[Local], Set[Local]) = {
      <span class="keyword">var</span> <a title="scala.collection.immutable.ListSet[Liveness.this.global.icodes.Local]" id="555192">genSet</a> = <span title="scala.collection.immutable.ListSet[Liveness.this.global.icodes.Local]" class="keyword">new</span> <span title="scala.collection.immutable.ListSet[Liveness.this.global.icodes.Local]">ListSet</span>[Local]
      <span class="keyword">var</span> <a title="scala.collection.immutable.ListSet[Liveness.this.global.icodes.Local]" id="555193">killSet</a> = <span title="scala.collection.immutable.ListSet[Liveness.this.global.icodes.Local]" class="keyword">new</span> <span title="scala.collection.immutable.ListSet[Liveness.this.global.icodes.Local]">ListSet</span>[Local]
      <span class="keyword">for</span> (<a title="Liveness.this.global.icodes.Instruction" id="555215">i</a> &lt;- <a href="#554906" title="Liveness.this.global.icodes.BasicBlock">b</a>.<a href="../BasicBlocks.scala.html#61313" title="(f: (Liveness.this.global.icodes.Instruction) =&gt; Unit)Unit">toList</a>) <a href="#555215" title="Liveness.this.global.icodes.Instruction">i</a> <span title="Unit" class="keyword">match</span> {
        <span title="Unit" class="keyword">case</span> LOAD_LOCAL(<a title="Liveness.this.global.icodes.Local" id="555217">local</a>)  <span class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="#555193" title="(elem: Liveness.this.global.icodes.Local)Boolean">killSet</a>(<a href="#555217" title="Liveness.this.global.icodes.Local">local</a>)) =&gt; <a href="#555192" title="scala.collection.immutable.ListSet[Liveness.this.global.icodes.Local]">genSet</a> = <a href="#555192" title="(elem: Liveness.this.global.icodes.Local)scala.collection.immutable.ListSet[Liveness.this.global.icodes.Local]">genSet</a> + <a href="#555217" title="Liveness.this.global.icodes.Local">local</a>
        <span title="Unit" class="keyword">case</span> STORE_LOCAL(<a title="Liveness.this.global.icodes.Local" id="555262">local</a>) <span class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="#555192" title="(elem: Liveness.this.global.icodes.Local)Boolean">genSet</a>(<a href="#555262" title="Liveness.this.global.icodes.Local">local</a>))  =&gt; <a href="#555193" title="scala.collection.immutable.ListSet[Liveness.this.global.icodes.Local]">killSet</a> = <a href="#555193" title="(elem: Liveness.this.global.icodes.Local)scala.collection.immutable.ListSet[Liveness.this.global.icodes.Local]">killSet</a> + <a href="#555262" title="Liveness.this.global.icodes.Local">local</a>
        <span title="Unit" class="keyword">case</span> _ =&gt; <span title="Unit">(</span>)
      }
      <a title="(x: scala.collection.immutable.ListSet[Liveness.this.global.icodes.Local],y: scala.collection.immutable.ListSet[Liveness.this.global.icodes.Local])(scala.collection.immutable.ListSet[Liveness.this.global.icodes.Local], scala.collection.immutable.ListSet[Liveness.this.global.icodes.Local])" id="7893">Pair</a>(<a href="#555192" title="scala.collection.immutable.ListSet[Liveness.this.global.icodes.Local]">genSet</a>, <a href="#555193" title="scala.collection.immutable.ListSet[Liveness.this.global.icodes.Local]">killSet</a>)
    }

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Unit" id="554862">run</a> {
      <a href="DataFlowAnalysis.scala.html#61167" title="(f: (LivenessAnalysis.this.P, LivenessAnalysis.this.lattice.Elem) =&gt; LivenessAnalysis.this.lattice.Elem)Unit">backwardAnalysis</a>(<a href="#554863" title="(b: Liveness.this.global.icodes.BasicBlock,out: LivenessAnalysis.this.lattice.Elem)LivenessAnalysis.this.lattice.Elem">blockTransfer</a>)
      <span title="Unit" class="keyword">if</span> (<a href="../../../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../../Settings.scala.html#37759" title="=&gt; Boolean">value</a>) {
        <a href="../ICodes.scala.html#46149" title="=&gt; Liveness.this.global.icodes.Linearizer">linearizer</a>.<a href="../Linearizers.scala.html#62209" title="(c: Liveness.this.global.icodes.IMethod)List[Liveness.this.global.icodes.BasicBlock]">linearize</a>(<a href="#554853" title="=&gt; Liveness.this.global.icodes.IMethod">method</a>).<span title="(f: (Liveness.this.global.icodes.BasicBlock) =&gt; Unit)Unit">foreach</span>(<a title="Liveness.this.global.icodes.BasicBlock" id="555354">b</a> =&gt; <span title="Unit" class="keyword">if</span> (<a href="#555354" title="(x$1: AnyRef)Boolean">b</a> != <a href="#554853" title="=&gt; Liveness.this.global.icodes.IMethod">method</a>.<a href="../Members.scala.html#61228" title="=&gt; Liveness.this.global.icodes.Code">code</a>.<a href="../Members.scala.html#61392" title="=&gt; Liveness.this.global.icodes.BasicBlock">startBlock</a>)
          <a title="(assertion: Boolean,message: =&gt; Any)Unit" id="7876">assert</a>(<a href="#554850" title="=&gt; Liveness.this.livenessLattice.type">lattice</a>.<a href="#554696" title="(x$1: AnyRef)Boolean">bottom</a> != <a href="DataFlowAnalysis.scala.html#61151" title="(key: LivenessAnalysis.this.P)LivenessAnalysis.this.lattice.Elem">in</a>(<a href="#555354" title="Liveness.this.global.icodes.BasicBlock">b</a>),
            <span title="(x$1: Any)java.lang.String" class="string">&quot;Block &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#555354" title="Liveness.this.global.icodes.BasicBlock">b</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; in &quot;)" class="string">&quot; in &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#554688" title="LivenessAnalysis.this.type" class="keyword">this</a>.<a href="#554853" title="=&gt; Liveness.this.global.icodes.IMethod">method</a> + <span title="java.lang.String(&quot; has input equal to bottom -- not visited?&quot;)" class="string">&quot; has input equal to bottom -- not visited?&quot;</span>));
      }
    }

    <span class="keyword">def</span> <a title="(b: Liveness.this.global.icodes.BasicBlock,out: LivenessAnalysis.this.lattice.Elem)LivenessAnalysis.this.lattice.Elem" id="554863">blockTransfer</a>(<a title="Liveness.this.global.icodes.BasicBlock" id="555322">b</a>: <a href="../BasicBlocks.scala.html#46178" title="Liveness.this.global.icodes.BasicBlock">BasicBlock</a>, <a title="LivenessAnalysis.this.lattice.Elem" id="555323">out</a>: lattice.<span title="LivenessAnalysis.this.lattice.Elem">Elem</span>): lattice.<span title="LivenessAnalysis.this.lattice.Elem">Elem</span> =
      <a href="#554855" title="(key: Liveness.this.global.icodes.BasicBlock)scala.collection.immutable.Set[Liveness.this.global.icodes.Local]">gen</a><span title="(elems: Traversable[Liveness.this.global.icodes.Local])scala.collection.immutable.Set[Liveness.this.global.icodes.Local]">(</span><a href="#555322" title="Liveness.this.global.icodes.BasicBlock">b</a>) ++ (<a href="#555323" title="(elems: Traversable[Liveness.this.global.icodes.Local])scala.collection.immutable.Set[Liveness.this.global.icodes.Local]" id="39385">out</a> -- <a href="#554857" title="(key: Liveness.this.global.icodes.BasicBlock)scala.collection.immutable.Set[Liveness.this.global.icodes.Local]">kill</a>(<a href="#555322" title="Liveness.this.global.icodes.BasicBlock">b</a>))

    /** Abstract interpretation for one instruction. Very important:
     *  liveness is a backward DFA, so this method should be used to compute
     *  liveness *before* the given instruction `i'.
     */
    <span class="keyword">def</span> <a title="(out: LivenessAnalysis.this.lattice.Elem,i: Liveness.this.global.icodes.Instruction)LivenessAnalysis.this.lattice.Elem" id="554864">interpret</a>(<a title="LivenessAnalysis.this.lattice.Elem" id="555547">out</a>: lattice.<span title="LivenessAnalysis.this.lattice.Elem">Elem</span>, <a title="Liveness.this.global.icodes.Instruction" id="555548">i</a>: <a href="../Opcodes.scala.html#46182" title="Liveness.this.global.icodes.Instruction">Instruction</a>): lattice.<span title="LivenessAnalysis.this.lattice.Elem">Elem</span> = {
      <span class="keyword">var</span> <a title="LivenessAnalysis.this.lattice.Elem" id="555550">in</a> = <a href="#555547" title="LivenessAnalysis.this.lattice.Elem">out</a>

      <span title="Unit" class="keyword">if</span> (<a href="../../../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../../Settings.scala.html#37759" title="=&gt; Boolean">value</a>) {
        <a href="../../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;- &quot;</span> + <a href="#555548" title="Liveness.this.global.icodes.Instruction">i</a>)
        <a href="../../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;out: &quot;</span> + <a href="#555547" title="LivenessAnalysis.this.lattice.Elem">out</a>)
        <a href="../../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span>)
      }

      <a href="#555548" title="Liveness.this.global.icodes.Instruction">i</a> <span title="Unit" class="keyword">match</span> {
        <span title="Unit" class="keyword">case</span> LOAD_LOCAL(<a title="Liveness.this.global.icodes.Local" id="555564">l</a>) =&gt; <a href="#555550" title="LivenessAnalysis.this.lattice.Elem" id="39334">in</a> += <a href="#555564" title="Liveness.this.global.icodes.Local">l</a>
        <span title="Unit" class="keyword">case</span> STORE_LOCAL(<a title="Liveness.this.global.icodes.Local" id="555612">l</a>) =&gt; <a href="#555550" title="LivenessAnalysis.this.lattice.Elem" id="39336">in</a> -= <a href="#555612" title="Liveness.this.global.icodes.Local">l</a>
        <span title="Unit" class="keyword">case</span> _ =&gt;
          <span title="Unit">(</span>)
      }
      <a href="#555550" title="LivenessAnalysis.this.lattice.Elem">in</a>
    } /* def interpret */

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="554865">toString</a>(): <a title="String" id="1605">String</a> = {
      <span class="keyword">val</span> <a title="StringBuilder" id="555660">buf</a> = <a title="()StringBuilder" id="57398" class="keyword">new</a> <a title="StringBuilder" id="366">StringBuilder</a>()
      <span class="keyword">for</span> (<a title="Liveness.this.global.icodes.BasicBlock" id="555691">b</a> &lt;- <a href="#554853" title="=&gt; Liveness.this.global.icodes.IMethod">method</a>.<a href="../Members.scala.html#61228" title="=&gt; Liveness.this.global.icodes.Code">code</a>.<a href="../Members.scala.html#61390" title="=&gt; scala.collection.mutable.ListBuffer[Liveness.this.global.icodes.BasicBlock]">blocks</a>.<span title="(f: (Liveness.this.global.icodes.BasicBlock) =&gt; StringBuilder)Unit">toList</span>) {
        <a href="#555660" title="StringBuilder">buf</a>.<a title="(s: String)StringBuilder" id="57441">append</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;\nlive-in(&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#555691" title="Liveness.this.global.icodes.BasicBlock">b</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;)=&quot;)" class="string">&quot;)=&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="DataFlowAnalysis.scala.html#61151" title="(key: LivenessAnalysis.this.P)LivenessAnalysis.this.lattice.Elem">in</a>(<a href="#555691" title="Liveness.this.global.icodes.BasicBlock">b</a>) <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;\012live-out(&quot;)" class="string">&quot;\nlive-out(&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#555691" title="Liveness.this.global.icodes.BasicBlock">b</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;)=&quot;)" class="string">&quot;)=&quot;</span> + <a href="DataFlowAnalysis.scala.html#61153" title="(key: LivenessAnalysis.this.P)LivenessAnalysis.this.lattice.Elem">out</a>(<a href="#555691" title="Liveness.this.global.icodes.BasicBlock">b</a>));
      }
      <a href="#555660" title="StringBuilder">buf</a>.<a title="()String" id="57547">toString</a>()
    }
  } /* Liveness analysis */
}

        </pre>
    </body>
</html>