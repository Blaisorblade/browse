<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/backend/icode/analysis/Liveness.scala</title>
        <script type="text/javascript" src="../../../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../../../style.css" title="Style">
    </head>
    <body>
        <pre>
/* NSC -- new Scala compiler
 * Copyright 2005-2009 LAMP/EPFL
 * @author  Martin Odersky
 */

// $Id: Liveness.scala 18387 2009-07-24 15:28:37Z odersky $

<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> backend.icode.analysis

<span class="keyword">import</span> scala.collection.mutable.{HashMap, Map}
<span class="keyword">import</span> scala.collection.immutable.{Set, ListSet}

/**
 * Compute liveness information for local variables.
 *
 * @author Iulian Dragos
 */
<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class Liveness extends java.lang.Object with ScalaObject" id="15914">Liveness</a> <span title="ScalaObject">{</span>
  <span class="keyword">val</span> <a title="=&gt; scala.tools.nsc.Global" id="556060">global</a>: <a href="../../../Global.scala.html#8529" title="scala.tools.nsc.Global">Global</a>
  <span class="keyword">import</span> global._
  <span class="keyword">import</span> icodes._

  /** The lattice for this analysis.   */
  <span class="keyword">object</span> <a title="object Liveness.this.livenessLattice" id="556063">livenessLattice</a> <span title="ScalaObject" class="keyword">extends</span> <a href="CompleteLattice.scala.html#16106" title="scala.tools.nsc.backend.icode.analysis.CompleteLattice">CompleteLattice</a> {
    <span class="keyword">type</span> <a title="scala.collection.immutable.Set[Liveness.this.global.icodes.Local]" id="556070">Elem</a> = <span title="scala.collection.immutable.Set[Liveness.this.global.icodes.Local]">Set</span>[Local]

    <span class="keyword">val</span> <a title="scala.tools.nsc.backend.icode.analysis.Liveness.livenessLattice.Elem" id="556071">top</a>: <span title="scala.tools.nsc.backend.icode.analysis.Liveness.livenessLattice.Elem">Elem</span> = <a href="#556079" title="scala.collection.immutable.ListSet[Liveness.this.global.icodes.Local]{ ... }" class="keyword">new</a> <a title="anonymous class $anon extends scala.collection.immutable.ListSet[Liveness.this.global.icodes.Local]" id="556079">ListSet</a>[Local]() {
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="(that: Any)Boolean" id="556081">equals</a>(<a title="Any" id="556095">that</a>: <span title="Any">Any</span>): <span title="Boolean">Boolean</span> = <a href="#556079" title="(x$1: AnyRef)Boolean" class="keyword">this</a> eq <a href="#556095" title="Any">that</a>.<span title="[T0]T0">asInstanceOf</span><span title="AnyRef">[</span><span title="AnyRef">AnyRef</span>]
    }

    <span class="keyword">val</span> <a title="scala.tools.nsc.backend.icode.analysis.Liveness.livenessLattice.Elem" id="556073">bottom</a>: <span title="scala.tools.nsc.backend.icode.analysis.Liveness.livenessLattice.Elem">Elem</span> = <a href="#556101" title="scala.collection.immutable.ListSet[Liveness.this.global.icodes.Local]{ ... }" class="keyword">new</a> <a title="anonymous class $anon extends scala.collection.immutable.ListSet[Liveness.this.global.icodes.Local]" id="556101">ListSet</a>[Local]() {
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="(that: Any)Boolean" id="556103">equals</a>(<a title="Any" id="556107">that</a>: <span title="Any">Any</span>): <span title="Boolean">Boolean</span> = <a href="#556101" title="(x$1: AnyRef)Boolean" class="keyword">this</a> eq <a href="#556107" title="Any">that</a>.<span title="[T0]T0">asInstanceOf</span><span title="AnyRef">[</span><span title="AnyRef">AnyRef</span>]
    }

    <span class="keyword">def</span> <a title="(a: scala.tools.nsc.backend.icode.analysis.Liveness.livenessLattice.Elem,b: scala.tools.nsc.backend.icode.analysis.Liveness.livenessLattice.Elem)scala.tools.nsc.backend.icode.analysis.Liveness.livenessLattice.Elem" id="556075">lub2</a>(<a title="scala.tools.nsc.backend.icode.analysis.Liveness.livenessLattice.Elem" id="556113">a</a>: <span title="scala.tools.nsc.backend.icode.analysis.Liveness.livenessLattice.Elem">Elem</span>, <a title="scala.tools.nsc.backend.icode.analysis.Liveness.livenessLattice.Elem" id="556114">b</a>: <span title="scala.tools.nsc.backend.icode.analysis.Liveness.livenessLattice.Elem">Elem</span>): <span title="scala.tools.nsc.backend.icode.analysis.Liveness.livenessLattice.Elem">Elem</span> = <a href="#556113" title="(elems: Traversable[Liveness.this.global.icodes.Local])scala.collection.immutable.Set[Liveness.this.global.icodes.Local]">a</a> ++ <a href="#556114" title="scala.tools.nsc.backend.icode.analysis.Liveness.livenessLattice.Elem">b</a>
  }

  <span class="keyword">final</span> <span class="keyword">class</span> <a title="class LivenessAnalysis extends java.lang.Object with scala.tools.nsc.backend.icode.analysis.DataFlowAnalysis[Liveness.this.livenessLattice.type] with ScalaObject" id="556065">LivenessAnalysis</a> <span title="ScalaObject" class="keyword">extends</span> <a href="DataFlowAnalysis.scala.html#15995" title="scala.tools.nsc.backend.icode.analysis.DataFlowAnalysis[Liveness.this.livenessLattice.type]">DataFlowAnalysis</a>[livenessLattice.<span class="keyword">type</span>] {
    <span class="keyword">type</span> <a title="Liveness.this.global.icodes.BasicBlock" id="556226">P</a> = <a href="../BasicBlocks.scala.html#46410" title="Liveness.this.global.icodes.BasicBlock">BasicBlock</a>
    <span class="keyword">val</span> <a title="Liveness.this.livenessLattice.type" id="556227">lattice</a> = <a href="#556063" title="object Liveness.this.livenessLattice">livenessLattice</a>

    <span class="keyword">var</span> <a title="Liveness.this.global.icodes.IMethod" id="556230">method</a>: <a href="../Members.scala.html#46405" title="Liveness.this.global.icodes.IMethod">IMethod</a> = _

    <span class="keyword">val</span> <a title="scala.collection.mutable.Map[Liveness.this.global.icodes.BasicBlock,scala.collection.immutable.Set[Liveness.this.global.icodes.Local]]" id="556232">gen</a>: <span title="scala.collection.mutable.Map[Liveness.this.global.icodes.BasicBlock,scala.collection.immutable.Set[Liveness.this.global.icodes.Local]]">Map</span>[BasicBlock, Set[Local]] = <span title="scala.collection.mutable.HashMap[Liveness.this.global.icodes.BasicBlock,scala.collection.immutable.Set[Liveness.this.global.icodes.Local]]" class="keyword">new</span> <span title="scala.collection.mutable.HashMap[Liveness.this.global.icodes.BasicBlock,scala.collection.immutable.Set[Liveness.this.global.icodes.Local]]">HashMap</span>()
    <span class="keyword">val</span> <a title="scala.collection.mutable.Map[Liveness.this.global.icodes.BasicBlock,scala.collection.immutable.Set[Liveness.this.global.icodes.Local]]" id="556234">kill</a>:<span title="scala.collection.mutable.Map[Liveness.this.global.icodes.BasicBlock,scala.collection.immutable.Set[Liveness.this.global.icodes.Local]]">Map</span>[BasicBlock, Set[Local]] = <span title="scala.collection.mutable.HashMap[Liveness.this.global.icodes.BasicBlock,scala.collection.immutable.Set[Liveness.this.global.icodes.Local]]" class="keyword">new</span> <span title="scala.collection.mutable.HashMap[Liveness.this.global.icodes.BasicBlock,scala.collection.immutable.Set[Liveness.this.global.icodes.Local]]">HashMap</span>()

    <span class="keyword">def</span> <a title="(m: Liveness.this.global.icodes.IMethod)Unit" id="556236">init</a>(<a title="Liveness.this.global.icodes.IMethod" id="556255">m</a>: <a href="../Members.scala.html#46405" title="Liveness.this.global.icodes.IMethod">IMethod</a>) {
      <a href="#556065" title="LivenessAnalysis.this.type" class="keyword">this</a>.<a href="#556230" title="(x$1: Liveness.this.global.icodes.IMethod)Unit">method</a> = <a href="#556255" title="Liveness.this.global.icodes.IMethod">m</a>
      <a href="#556232" title="=&gt; scala.collection.mutable.Map[Liveness.this.global.icodes.BasicBlock,scala.collection.immutable.Set[Liveness.this.global.icodes.Local]]">gen</a>.<span title="()Unit">clear</span>
      <a href="#556234" title="=&gt; scala.collection.mutable.Map[Liveness.this.global.icodes.BasicBlock,scala.collection.immutable.Set[Liveness.this.global.icodes.Local]]">kill</a>.<span title="()Unit">clear</span>

      <span class="keyword">for</span> (<a title="Liveness.this.global.icodes.BasicBlock" id="556425">b</a> &lt;- <a href="#556255" title="Liveness.this.global.icodes.IMethod">m</a>.<a href="../Members.scala.html#61497" title="=&gt; Liveness.this.global.icodes.Code">code</a>.<a href="../Members.scala.html#61659" title="=&gt; scala.collection.mutable.ListBuffer[Liveness.this.global.icodes.BasicBlock]">blocks</a>.<a title="(f: (Liveness.this.global.icodes.BasicBlock) =&gt; (Liveness.this.global.icodes.BasicBlock, (scala.collection.immutable.Set[Liveness.this.global.icodes.Local], scala.collection.immutable.Set[Liveness.this.global.icodes.Local])))(implicit bf: scala.collection.generic.BuilderFactory[(Liveness.this.global.icodes.BasicBlock, (scala.collection.immutable.Set[Liveness.this.global.icodes.Local], scala.collection.immutable.Set[Liveness.this.global.icodes.Local])),List[(Liveness.this.global.icodes.BasicBlock, (scala.collection.immutable.Set[Liveness.this.global.icodes.Local], scala.collection.immutable.Set[Liveness.this.global.icodes.Local]))],List[Liveness.this.global.icodes.BasicBlock]])List[(Liveness.this.global.icodes.BasicBlock, (scala.collection.immutable.Set[Liveness.this.global.icodes.Local], scala.collection.immutable.Set[Liveness.this.global.icodes.Local]))]" id="25402">toList</a>;
           <a title="((scala.collection.immutable.Set[Liveness.this.global.icodes.Local], scala.collection.immutable.Set[Liveness.this.global.icodes.Local]), scala.collection.immutable.Set[Liveness.this.global.icodes.Local], scala.collection.immutable.Set[Liveness.this.global.icodes.Local])" id="32875">(</a><a href="#556279" title="scala.collection.immutable.Set[Liveness.this.global.icodes.Local]" id="556428">g</a>, <a href="#556279" title="scala.collection.immutable.Set[Liveness.this.global.icodes.Local]" id="556429">k</a>) = <a href="#556238" title="(b: Liveness.this.global.icodes.BasicBlock)(scala.collection.immutable.Set[Liveness.this.global.icodes.Local], scala.collection.immutable.Set[Liveness.this.global.icodes.Local])">genAndKill</a><span title="(scala.collection.immutable.Set[Liveness.this.global.icodes.Local], scala.collection.immutable.Set[Liveness.this.global.icodes.Local]) @unchecked">(</span><a href="#556425" title="Liveness.this.global.icodes.BasicBlock">b</a>)) {
        <a href="#556232" title="(kv: (Liveness.this.global.icodes.BasicBlock, scala.collection.immutable.Set[Liveness.this.global.icodes.Local]))LivenessAnalysis.this.gen.type">gen</a>  += (<a href="#556425" title="(y: scala.collection.immutable.Set[Liveness.this.global.icodes.Local])(Liveness.this.global.icodes.BasicBlock, scala.collection.immutable.Set[Liveness.this.global.icodes.Local])">b</a> -&gt; <a href="#556428" title="scala.collection.immutable.Set[Liveness.this.global.icodes.Local]">g</a>)
        <a href="#556234" title="(kv: (Liveness.this.global.icodes.BasicBlock, scala.collection.immutable.Set[Liveness.this.global.icodes.Local]))LivenessAnalysis.this.kill.type">kill</a> += (<a href="#556425" title="(y: scala.collection.immutable.Set[Liveness.this.global.icodes.Local])(Liveness.this.global.icodes.BasicBlock, scala.collection.immutable.Set[Liveness.this.global.icodes.Local])">b</a> -&gt; <a href="#556429" title="scala.collection.immutable.Set[Liveness.this.global.icodes.Local]">k</a>)
      }

      <a href="DataFlowAnalysis.scala.html#61432" title="(f: =&gt; Unit)Unit">init</a> {
        <a href="DataFlowAnalysis.scala.html#61418" title="(iter: Traversable[LivenessAnalysis.this.P])LivenessAnalysis.this.worklist.type" id="39739">worklist</a> ++= <a href="#556255" title="Liveness.this.global.icodes.IMethod">m</a>.<a href="../Members.scala.html#61497" title="=&gt; Liveness.this.global.icodes.Code">code</a>.<a href="../Members.scala.html#61659" title="=&gt; scala.collection.mutable.ListBuffer[Liveness.this.global.icodes.BasicBlock]">blocks</a>.<span title="=&gt; List[Liveness.this.global.icodes.BasicBlock]">toList</span>
        <a href="#556255" title="Liveness.this.global.icodes.IMethod">m</a>.<a href="../Members.scala.html#61497" title="=&gt; Liveness.this.global.icodes.Code">code</a>.<a href="../Members.scala.html#61659" title="=&gt; scala.collection.mutable.ListBuffer[Liveness.this.global.icodes.BasicBlock]">blocks</a>.<a title="(f: (Liveness.this.global.icodes.BasicBlock) =&gt; Unit)Unit" id="62018">foreach</a> { <a title="Liveness.this.global.icodes.BasicBlock" id="556557">b</a> =&gt;
          <a href="DataFlowAnalysis.scala.html#61420" title="(key: LivenessAnalysis.this.P,value: LivenessAnalysis.this.lattice.Elem)Unit">in</a>(<a href="#556557" title="Liveness.this.global.icodes.BasicBlock">b</a>)  = <a href="#556227" title="=&gt; Liveness.this.livenessLattice.type">lattice</a>.<a href="#556073" title="=&gt; LivenessAnalysis.this.lattice.Elem">bottom</a>
          <a href="DataFlowAnalysis.scala.html#61422" title="(key: LivenessAnalysis.this.P,value: LivenessAnalysis.this.lattice.Elem)Unit">out</a>(<a href="#556557" title="Liveness.this.global.icodes.BasicBlock">b</a>) = <a href="#556227" title="=&gt; Liveness.this.livenessLattice.type">lattice</a>.<a href="#556073" title="=&gt; LivenessAnalysis.this.lattice.Elem">bottom</a>
        }
      }
    }

    <span class="keyword">import</span> opcodes._

    /** Return the gen and kill sets for this block. */
    <span class="keyword">def</span> <a title="(b: Liveness.this.global.icodes.BasicBlock)(scala.collection.immutable.Set[Liveness.this.global.icodes.Local], scala.collection.immutable.Set[Liveness.this.global.icodes.Local])" id="556238">genAndKill</a>(<a title="Liveness.this.global.icodes.BasicBlock" id="556283">b</a>: <a href="../BasicBlocks.scala.html#46410" title="Liveness.this.global.icodes.BasicBlock">BasicBlock</a>): <span title="(scala.collection.immutable.Set[Liveness.this.global.icodes.Local], scala.collection.immutable.Set[Liveness.this.global.icodes.Local])">(</span>Set[Local], Set[Local]) = {
      <span class="keyword">var</span> <a title="scala.collection.immutable.ListSet[Liveness.this.global.icodes.Local]" id="556571">genSet</a> = <span title="scala.collection.immutable.ListSet[Liveness.this.global.icodes.Local]" class="keyword">new</span> <span title="scala.collection.immutable.ListSet[Liveness.this.global.icodes.Local]">ListSet</span>[Local]
      <span class="keyword">var</span> <a title="scala.collection.immutable.ListSet[Liveness.this.global.icodes.Local]" id="556572">killSet</a> = <span title="scala.collection.immutable.ListSet[Liveness.this.global.icodes.Local]" class="keyword">new</span> <span title="scala.collection.immutable.ListSet[Liveness.this.global.icodes.Local]">ListSet</span>[Local]
      <span class="keyword">for</span> (<a title="Liveness.this.global.icodes.Instruction" id="556594">i</a> &lt;- <a href="#556283" title="Liveness.this.global.icodes.BasicBlock">b</a>.<a href="../BasicBlocks.scala.html#61582" title="(f: (Liveness.this.global.icodes.Instruction) =&gt; Unit)Unit">toList</a>) <a href="#556594" title="Liveness.this.global.icodes.Instruction">i</a> <span title="Unit" class="keyword">match</span> {
        <span title="Unit" class="keyword">case</span> LOAD_LOCAL(<a title="Liveness.this.global.icodes.Local" id="556596">local</a>)  <span class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="#556572" title="(elem: Liveness.this.global.icodes.Local)Boolean">killSet</a>(<a href="#556596" title="Liveness.this.global.icodes.Local">local</a>)) =&gt; <a href="#556571" title="scala.collection.immutable.ListSet[Liveness.this.global.icodes.Local]">genSet</a> = <a href="#556571" title="(elem: Liveness.this.global.icodes.Local)scala.collection.immutable.ListSet[Liveness.this.global.icodes.Local]">genSet</a> + <a href="#556596" title="Liveness.this.global.icodes.Local">local</a>
        <span title="Unit" class="keyword">case</span> STORE_LOCAL(<a title="Liveness.this.global.icodes.Local" id="556641">local</a>) <span class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="#556571" title="(elem: Liveness.this.global.icodes.Local)Boolean">genSet</a>(<a href="#556641" title="Liveness.this.global.icodes.Local">local</a>))  =&gt; <a href="#556572" title="scala.collection.immutable.ListSet[Liveness.this.global.icodes.Local]">killSet</a> = <a href="#556572" title="(elem: Liveness.this.global.icodes.Local)scala.collection.immutable.ListSet[Liveness.this.global.icodes.Local]">killSet</a> + <a href="#556641" title="Liveness.this.global.icodes.Local">local</a>
        <span title="Unit" class="keyword">case</span> _ =&gt; <span title="Unit">(</span>)
      }
      <a title="(x: scala.collection.immutable.ListSet[Liveness.this.global.icodes.Local],y: scala.collection.immutable.ListSet[Liveness.this.global.icodes.Local])(scala.collection.immutable.ListSet[Liveness.this.global.icodes.Local], scala.collection.immutable.ListSet[Liveness.this.global.icodes.Local])" id="7962">Pair</a>(<a href="#556571" title="scala.collection.immutable.ListSet[Liveness.this.global.icodes.Local]">genSet</a>, <a href="#556572" title="scala.collection.immutable.ListSet[Liveness.this.global.icodes.Local]">killSet</a>)
    }

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Unit" id="556239">run</a> {
      <a href="DataFlowAnalysis.scala.html#61436" title="(f: (LivenessAnalysis.this.P, LivenessAnalysis.this.lattice.Elem) =&gt; LivenessAnalysis.this.lattice.Elem)Unit">backwardAnalysis</a>(<a href="#556240" title="(b: Liveness.this.global.icodes.BasicBlock,out: LivenessAnalysis.this.lattice.Elem)LivenessAnalysis.this.lattice.Elem">blockTransfer</a>)
      <span title="Unit" class="keyword">if</span> (<a href="../../../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../../Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../../Settings.scala.html#37988" title="=&gt; Boolean">value</a>) {
        <a href="../ICodes.scala.html#46381" title="=&gt; Liveness.this.global.icodes.Linearizer">linearizer</a>.<a href="../Linearizers.scala.html#62481" title="(c: Liveness.this.global.icodes.IMethod)List[Liveness.this.global.icodes.BasicBlock]">linearize</a>(<a href="#556230" title="=&gt; Liveness.this.global.icodes.IMethod">method</a>).<span title="(f: (Liveness.this.global.icodes.BasicBlock) =&gt; Unit)Unit">foreach</span>(<a title="Liveness.this.global.icodes.BasicBlock" id="556733">b</a> =&gt; <span title="Unit" class="keyword">if</span> (<a href="#556733" title="(x$1: AnyRef)Boolean">b</a> != <a href="#556230" title="=&gt; Liveness.this.global.icodes.IMethod">method</a>.<a href="../Members.scala.html#61497" title="=&gt; Liveness.this.global.icodes.Code">code</a>.<a href="../Members.scala.html#61661" title="=&gt; Liveness.this.global.icodes.BasicBlock">startBlock</a>)
          <a title="(assertion: Boolean,message: =&gt; Any)Unit" id="7945">assert</a>(<a href="#556227" title="=&gt; Liveness.this.livenessLattice.type">lattice</a>.<a href="#556073" title="(x$1: AnyRef)Boolean">bottom</a> != <a href="DataFlowAnalysis.scala.html#61420" title="(key: LivenessAnalysis.this.P)LivenessAnalysis.this.lattice.Elem">in</a>(<a href="#556733" title="Liveness.this.global.icodes.BasicBlock">b</a>),
            <span title="(x$1: Any)java.lang.String" class="string">&quot;Block &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#556733" title="Liveness.this.global.icodes.BasicBlock">b</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; in &quot;)" class="string">&quot; in &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#556065" title="LivenessAnalysis.this.type" class="keyword">this</a>.<a href="#556230" title="=&gt; Liveness.this.global.icodes.IMethod">method</a> + <span title="java.lang.String(&quot; has input equal to bottom -- not visited?&quot;)" class="string">&quot; has input equal to bottom -- not visited?&quot;</span>));
      }
    }

    <span class="keyword">def</span> <a title="(b: Liveness.this.global.icodes.BasicBlock,out: LivenessAnalysis.this.lattice.Elem)LivenessAnalysis.this.lattice.Elem" id="556240">blockTransfer</a>(<a title="Liveness.this.global.icodes.BasicBlock" id="556701">b</a>: <a href="../BasicBlocks.scala.html#46410" title="Liveness.this.global.icodes.BasicBlock">BasicBlock</a>, <a title="LivenessAnalysis.this.lattice.Elem" id="556702">out</a>: lattice.<span title="LivenessAnalysis.this.lattice.Elem">Elem</span>): lattice.<span title="LivenessAnalysis.this.lattice.Elem">Elem</span> =
      <a href="#556232" title="(key: Liveness.this.global.icodes.BasicBlock)scala.collection.immutable.Set[Liveness.this.global.icodes.Local]">gen</a><span title="(elems: Traversable[Liveness.this.global.icodes.Local])scala.collection.immutable.Set[Liveness.this.global.icodes.Local]">(</span><a href="#556701" title="Liveness.this.global.icodes.BasicBlock">b</a>) ++ (<a href="#556702" title="(elems: Traversable[Liveness.this.global.icodes.Local])scala.collection.immutable.Set[Liveness.this.global.icodes.Local]" id="39617">out</a> -- <a href="#556234" title="(key: Liveness.this.global.icodes.BasicBlock)scala.collection.immutable.Set[Liveness.this.global.icodes.Local]">kill</a>(<a href="#556701" title="Liveness.this.global.icodes.BasicBlock">b</a>))

    /** Abstract interpretation for one instruction. Very important:
     *  liveness is a backward DFA, so this method should be used to compute
     *  liveness *before* the given instruction `i'.
     */
    <span class="keyword">def</span> <a title="(out: LivenessAnalysis.this.lattice.Elem,i: Liveness.this.global.icodes.Instruction)LivenessAnalysis.this.lattice.Elem" id="556241">interpret</a>(<a title="LivenessAnalysis.this.lattice.Elem" id="556926">out</a>: lattice.<span title="LivenessAnalysis.this.lattice.Elem">Elem</span>, <a title="Liveness.this.global.icodes.Instruction" id="556927">i</a>: <a href="../Opcodes.scala.html#46414" title="Liveness.this.global.icodes.Instruction">Instruction</a>): lattice.<span title="LivenessAnalysis.this.lattice.Elem">Elem</span> = {
      <span class="keyword">var</span> <a title="LivenessAnalysis.this.lattice.Elem" id="556929">in</a> = <a href="#556926" title="LivenessAnalysis.this.lattice.Elem">out</a>

      <span title="Unit" class="keyword">if</span> (<a href="../../../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../../Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../../Settings.scala.html#37988" title="=&gt; Boolean">value</a>) {
        <a href="../../../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;- &quot;</span> + <a href="#556927" title="Liveness.this.global.icodes.Instruction">i</a>)
        <a href="../../../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;out: &quot;</span> + <a href="#556926" title="LivenessAnalysis.this.lattice.Elem">out</a>)
        <a href="../../../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span>)
      }

      <a href="#556927" title="Liveness.this.global.icodes.Instruction">i</a> <span title="Unit" class="keyword">match</span> {
        <span title="Unit" class="keyword">case</span> LOAD_LOCAL(<a title="Liveness.this.global.icodes.Local" id="556943">l</a>) =&gt; <a href="#556929" title="LivenessAnalysis.this.lattice.Elem" id="39566">in</a> += <a href="#556943" title="Liveness.this.global.icodes.Local">l</a>
        <span title="Unit" class="keyword">case</span> STORE_LOCAL(<a title="Liveness.this.global.icodes.Local" id="556991">l</a>) =&gt; <a href="#556929" title="LivenessAnalysis.this.lattice.Elem" id="39568">in</a> -= <a href="#556991" title="Liveness.this.global.icodes.Local">l</a>
        <span title="Unit" class="keyword">case</span> _ =&gt;
          <span title="Unit">(</span>)
      }
      <a href="#556929" title="LivenessAnalysis.this.lattice.Elem">in</a>
    } /* def interpret */

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="556242">toString</a>(): <a title="String" id="1626">String</a> = {
      <span class="keyword">val</span> <a title="StringBuilder" id="557039">buf</a> = <a title="()StringBuilder" id="57658" class="keyword">new</a> <a title="StringBuilder" id="375">StringBuilder</a>()
      <span class="keyword">for</span> (<a title="Liveness.this.global.icodes.BasicBlock" id="557070">b</a> &lt;- <a href="#556230" title="=&gt; Liveness.this.global.icodes.IMethod">method</a>.<a href="../Members.scala.html#61497" title="=&gt; Liveness.this.global.icodes.Code">code</a>.<a href="../Members.scala.html#61659" title="=&gt; scala.collection.mutable.ListBuffer[Liveness.this.global.icodes.BasicBlock]">blocks</a>.<span title="(f: (Liveness.this.global.icodes.BasicBlock) =&gt; StringBuilder)Unit">toList</span>) {
        <a href="#557039" title="StringBuilder">buf</a>.<a title="(s: String)StringBuilder" id="57701">append</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;\nlive-in(&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#557070" title="Liveness.this.global.icodes.BasicBlock">b</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;)=&quot;)" class="string">&quot;)=&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="DataFlowAnalysis.scala.html#61420" title="(key: LivenessAnalysis.this.P)LivenessAnalysis.this.lattice.Elem">in</a>(<a href="#557070" title="Liveness.this.global.icodes.BasicBlock">b</a>) <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;\012live-out(&quot;)" class="string">&quot;\nlive-out(&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#557070" title="Liveness.this.global.icodes.BasicBlock">b</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;)=&quot;)" class="string">&quot;)=&quot;</span> + <a href="DataFlowAnalysis.scala.html#61422" title="(key: LivenessAnalysis.this.P)LivenessAnalysis.this.lattice.Elem">out</a>(<a href="#557070" title="Liveness.this.global.icodes.BasicBlock">b</a>));
      }
      <a href="#557039" title="StringBuilder">buf</a>.<a title="()String" id="57807">toString</a>()
    }
  } /* Liveness analysis */
}

        </pre>
    </body>
</html>