<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/backend/icode/BasicBlocks.scala</title>
        <script type="text/javascript" src="../../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../../style.css" title="Style">
    </head>
    <body onload="initializeLinked()">
        <pre>
<span class="comment">/* NSC -- new Scala compiler
 * Copyright 2005-2009 LAMP/EPFL
 * @author  Martin Odersky
 */</span>

<span class="comment">// $Id: BasicBlocks.scala 17188 2009-02-24 11:54:40Z michelou $</span>

<span class="keyword">package</span> scala.tools.nsc.backend.icode

<span class="comment">//import scala.tools.nsc.ast._</span>
<span class="keyword">import</span> scala.collection.mutable.{Map, Set}
<span class="keyword">import</span> scala.collection.jcl.LinkedHashSet
<span class="keyword">import</span> scala.tools.nsc.util.{Position,NoPosition}
<span class="keyword">import</span> scala.tools.nsc.backend.icode.analysis.ProgramPoint

<span class="keyword">trait</span> <span class="typed"><span class="type">trait BasicBlocks extends java.lang.Object with ScalaObject</span><a id="10578">BasicBlocks</a></span> {
  self: ICodes =&gt;
  <span class="keyword">import</span> opcodes._

  <span class="comment">/** This class represents a basic block. Each
   *  basic block contains a list of instructions that are
   *  either executed all, or none. No jumps
   *  to/from the &quot;middle&quot; of the basic block are allowed (modulo exceptions).
   */</span>
  <span class="keyword">class</span> <span class="typed"><span class="type">class BasicBlock extends java.lang.Object with scala.tools.nsc.backend.icode.analysis.ProgramPoint[BasicBlocks.this.BasicBlock] with Seq[BasicBlocks.this.Instruction] with ScalaObject</span><a id="32337">BasicBlock</a></span>(<span class="keyword">val</span> <span class="typed"><span class="type">Int</span><span id="33151"><span id="33150"><a id="141412">label</a></span></span></span>: <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span>, <span class="keyword">val</span> <span class="typed"><span class="type">BasicBlocks.this.IMethod</span><span id="33153"><span id="33152"><a id="141413">method</a></span></span></span>: <span class="typed"><span class="type">BasicBlocks.this.IMethod</span><a href="Members.scala.html#32332">IMethod</a></span>)
        <span class="keyword">extends</span> <span class="typed"><span class="type">java.lang.Object</span><a id="2165">AnyRef</a></span>
        <span class="keyword">with</span> <span class="typed"><span class="type">scala.tools.nsc.backend.icode.analysis.ProgramPoint[BasicBlocks.this.BasicBlock]</span><a href="analysis/ProgramPoint.scala.html#16756">ProgramPoint</a></span>[BasicBlock]
        <span class="keyword">with</span> <span class="typed"><span class="type">Seq[BasicBlocks.this.Instruction]</span><a id="763">Seq</a></span>[Instruction] {

    <span class="keyword">import</span> BBFlags._
    
    <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; BasicBlocks.this.Code</span><a id="33156">code</a></span> = <span class="typed"><span class="type">=&gt; BasicBlocks.this.IMethod</span><a href="#33152">method</a></span>.<span class="typed"><span class="type">=&gt; BasicBlocks.this.Code</span><a href="Members.scala.html#32867">code</a></span>
    
    <span class="comment">/** Flags of this basic block. */</span>
    <span class="keyword">private</span> <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><span id="33159"><span id="33157"><span id="33158"><a id="153842">flags</a></span></span></span></span>: <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span> = <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>

    <span class="comment">/** Does this block have the given flag? */</span>
    <span class="keyword">def</span> <span class="typed"><span class="type">(Int)Boolean</span><a id="33160">hasFlag</a></span>(<span class="typed"><span class="type">Int</span><a id="51957">flag</a></span>: <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span>): <span class="typed"><span class="type">Boolean</span><a id="2170">Boolean</a></span> = (<span class="typed"><span class="type">=&gt; Int</span><a href="#33157">flags</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3153">&amp;</a></span> <span class="typed"><span class="type">Int</span><a href="#51957">flag</a></span>) <span class="typed"><span class="type">(Int)Boolean</span><a id="3142">!=</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>
    
    <span class="comment">/** Set the given flag. */</span>
    <span class="keyword">def</span> <span class="typed"><span class="type">(Int)Unit</span><a id="33161">setFlag</a></span>(<span class="typed"><span class="type">Int</span><a id="51960">flag</a></span>: <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span>): <span class="typed"><span class="type">Unit</span><a id="2169">Unit</a></span> = <span class="typed"><span class="type">(Int)Unit</span><a href="#33158">flags</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3152">|=</a></span> <span class="typed"><span class="type">Int</span><a href="#51960">flag</a></span>
    <span class="keyword">def</span> <span class="typed"><span class="type">(Int)Unit</span><a id="33162">resetFlag</a></span>(<span class="typed"><span class="type">Int</span><a id="51961">flag</a></span>: <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span>) {
      <span class="typed"><span class="type">(Int)Unit</span><a href="#33158">flags</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3153">&amp;=</a></span> <span class="typed"><span class="type">=&gt; Int</span><a id="3098">~</a></span><span class="typed"><span class="type">Int</span><a href="#51961">flag</a></span>
    }
    
    <span class="comment">/** Is this block closed? */</span>
    <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Boolean</span><a id="33163">closed</a></span>: <span class="typed"><span class="type">Boolean</span><a id="2170">Boolean</a></span> = <span class="typed"><span class="type">(Int)Boolean</span><a href="#33160">hasFlag</a></span>(<span class="typed"><span class="type">Int(8)</span><span >CLOSED</span></span>)
    <span class="keyword">def</span> <span class="typed"><span class="type">(Boolean)Unit</span><a id="33164">closed_=</a></span>(<span class="typed"><span class="type">Boolean</span><a id="153874">b</a></span>: <span class="typed"><span class="type">Boolean</span><a id="2170">Boolean</a></span>) = <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Boolean</span><a href="#153874">b</a></span>) <span class="typed"><span class="type">(Int)Unit</span><a href="#33161">setFlag</a></span>(<span class="typed"><span class="type">Int(8)</span><span >CLOSED</span></span>) <span class="keyword">else</span> <span class="typed"><span class="type">(Int)Unit</span><a href="#33162">resetFlag</a></span>(<span class="typed"><span class="type">Int(8)</span><span >CLOSED</span></span>)
    
    <span class="comment">/** When set, the &lt;code&gt;emit&lt;/code&gt; methods will be ignored. */</span>
    <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Boolean</span><a id="33165">ignore</a></span>: <span class="typed"><span class="type">Boolean</span><a id="2170">Boolean</a></span> = <span class="typed"><span class="type">(Int)Boolean</span><a href="#33160">hasFlag</a></span>(<span class="typed"><span class="type">Int(2)</span><span >IGNORING</span></span>)
    <span class="keyword">def</span> <span class="typed"><span class="type">(Boolean)Unit</span><a id="33166">ignore_=</a></span>(<span class="typed"><span class="type">Boolean</span><a id="110559">b</a></span>: <span class="typed"><span class="type">Boolean</span><a id="2170">Boolean</a></span>) = <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Boolean</span><a href="#110559">b</a></span>) <span class="typed"><span class="type">(Int)Unit</span><a href="#33161">setFlag</a></span>(<span class="typed"><span class="type">Int(2)</span><span >IGNORING</span></span>) <span class="keyword">else</span> <span class="typed"><span class="type">(Int)Unit</span><a href="#33162">resetFlag</a></span>(<span class="typed"><span class="type">Int(2)</span><span >IGNORING</span></span>)

    <span class="comment">/** Is this block the head of a while? */</span>
    <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Boolean</span><a id="33167">loopHeader</a></span> = <span class="typed"><span class="type">(Int)Boolean</span><a href="#33160">hasFlag</a></span>(<span class="typed"><span class="type">Int(1)</span><span >LOOP_HEADER</span></span>)
    <span class="keyword">def</span> <span class="typed"><span class="type">(Boolean)Unit</span><a id="33168">loopHeader_=</a></span>(<span class="typed"><span class="type">Boolean</span><a id="110321">b</a></span>: <span class="typed"><span class="type">Boolean</span><a id="2170">Boolean</a></span>) = 
      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Boolean</span><a href="#110321">b</a></span>) <span class="typed"><span class="type">(Int)Unit</span><a href="#33161">setFlag</a></span>(<span class="typed"><span class="type">Int(1)</span><span >LOOP_HEADER</span></span>) <span class="keyword">else</span> <span class="typed"><span class="type">(Int)Unit</span><a href="#33162">resetFlag</a></span>(<span class="typed"><span class="type">Int(1)</span><span >LOOP_HEADER</span></span>)
    
    <span class="comment">/** Is this block the start block of an exception handler? */</span>
    <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Boolean</span><a id="33169">exceptionHandlerHeader</a></span> = <span class="typed"><span class="type">(Int)Boolean</span><a href="#33160">hasFlag</a></span>(<span class="typed"><span class="type">Int(4)</span><span >EX_HEADER</span></span>)
    <span class="keyword">def</span> <span class="typed"><span class="type">(Boolean)Unit</span><a id="33170">exceptionHandlerHeader_=</a></span>(<span class="typed"><span class="type">Boolean</span><a id="51958">b</a></span>: <span class="typed"><span class="type">Boolean</span><a id="2170">Boolean</a></span>) = 
      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Boolean</span><a href="#51958">b</a></span>) <span class="typed"><span class="type">(Int)Unit</span><a href="#33161">setFlag</a></span>(<span class="typed"><span class="type">Int(4)</span><span >EX_HEADER</span></span>) <span class="keyword">else</span> <span class="typed"><span class="type">(Int)Unit</span><a href="#33162">resetFlag</a></span>(<span class="typed"><span class="type">Int(4)</span><span >EX_HEADER</span></span>)

    <span class="comment">/** Has this basic block been modified since the last call to 'toList'? */</span> 
    <span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Boolean</span><a id="33171">touched</a></span> = <span class="typed"><span class="type">(Int)Boolean</span><a href="#33160">hasFlag</a></span>(<span class="typed"><span class="type">Int(16)</span><span >TOUCHED</span></span>)
    <span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(Boolean)Unit</span><a id="33172">touched_=</a></span>(<span class="typed"><span class="type">Boolean</span><a id="153878">b</a></span>: <span class="typed"><span class="type">Boolean</span><a id="2170">Boolean</a></span>) = <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Boolean</span><a href="#153878">b</a></span>) <span class="typed"><span class="type">(Int)Unit</span><a href="#33161">setFlag</a></span>(<span class="typed"><span class="type">Int(16)</span><span >TOUCHED</span></span>) <span class="keyword">else</span> <span class="typed"><span class="type">(Int)Unit</span><a href="#33162">resetFlag</a></span>(<span class="typed"><span class="type">Int(16)</span><span >TOUCHED</span></span>)

    <span class="comment">/** Cached predecessors. */</span>
    <span class="keyword">var</span> <span class="typed"><span class="type">List[BasicBlocks.this.BasicBlock]</span><span id="33175"><span id="33173"><span id="33174"><a id="153843">preds</a></span></span></span></span>: <span class="typed"><span class="type">List[BasicBlocks.this.BasicBlock]</span><a id="526">List</a></span>[BasicBlock] = <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>
    
    <span class="comment">/** Local variables that are in scope at entry of this basic block. Used
     *  for debugging information.
     */</span>
    <span class="keyword">var</span> <span class="typed"><span class="type">scala.collection.mutable.Set[BasicBlocks.this.Local]</span><span id="33178"><span id="33176"><span id="33177"><a id="153844">varsInScope</a></span></span></span></span>: <span class="typed"><span class="type">scala.collection.mutable.Set[BasicBlocks.this.Local]</span><a id="20147">Set</a></span>[Local] = <span class="typed"><span class="type">()scala.collection.jcl.LinkedHashSet[BasicBlocks.this.Local]</span><a id="32949" class="keyword">new</a></span> <span class="typed"><span class="type">scala.collection.jcl.LinkedHashSet[BasicBlocks.this.Local]</span><a id="24644">LinkedHashSet</a></span>()
    
    <span class="comment">/** ICode instructions, used as temporary storage while emitting code.
     * Once closed is called, only the `instrs' array should be used.
     */</span>
    <span class="keyword">private</span> <span class="keyword">var</span> <span class="typed"><span class="type">List[BasicBlocks.this.Instruction]</span><span id="33181"><span id="33179"><span id="33180"><a id="153845">instructionList</a></span></span></span></span>: <span class="typed"><span class="type">List[BasicBlocks.this.Instruction]</span><a id="526">List</a></span>[Instruction] = <span class="typed"><span class="type">object Nil</span><a id="335">Nil</a></span>

    <span class="keyword">private</span> <span class="keyword">var</span> <span class="typed"><span class="type">BasicBlocks.this.Instruction</span><span id="33184"><span id="33182"><span id="33183"><a id="153846">_lastInstruction</a></span></span></span></span>: <span class="typed"><span class="type">BasicBlocks.this.Instruction</span><a href="Opcodes.scala.html#32341">Instruction</a></span> = <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>

    <span class="keyword">private</span> <span class="keyword">var</span> <span class="typed"><span class="type">Array[BasicBlocks.this.Instruction]</span><span id="33187"><span id="33185"><span id="33186"><a id="153847">instrs</a></span></span></span></span>: <span class="typed"><span class="type">Array[BasicBlocks.this.Instruction]</span><a id="1072">Array</a></span>[Instruction] = _

    <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; List[BasicBlocks.this.Instruction]</span><a id="33188">toList</a></span>: <span class="typed"><span class="type">List[BasicBlocks.this.Instruction]</span><a id="526">List</a></span>[Instruction] = {
      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a href="#33163">closed</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">=&gt; Boolean</span><a href="#33171">touched</a></span>)
        <span class="typed"><span class="type">(List[BasicBlocks.this.Instruction])Unit</span><a href="#33180">instructionList</a></span> = <span class="typed"><span class="type">object List</span><a id="527">List</a></span>.<span class="typed"><span class="type">(Array[BasicBlocks.this.Instruction])List[BasicBlocks.this.Instruction]</span><a id="21440">fromArray</a></span>(<span class="typed"><span class="type">=&gt; Array[BasicBlocks.this.Instruction]</span><a href="#33185">instrs</a></span>)
      <span class="typed"><span class="type">=&gt; List[BasicBlocks.this.Instruction]</span><a href="#33179">instructionList</a></span>
    }
    
    <span class="comment">/** Return an iterator over the instructions in this basic block. */</span>
    <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Iterator[BasicBlocks.this.Instruction]</span><a id="33189">elements</a></span>: <span class="typed"><span class="type">Iterator[BasicBlocks.this.Instruction]</span><a id="1339">Iterator</a></span>[Instruction] =
      <span class="typed"><span class="type">Iterator[BasicBlocks.this.Instruction]</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a href="#33163">closed</a></span>) <span class="typed"><span class="type">=&gt; Array[BasicBlocks.this.Instruction]</span><a href="#33185">instrs</a></span>.<span class="typed"><span class="type">=&gt; Iterator[BasicBlocks.this.Instruction]</span><a id="21511">elements</a></span> <span class="keyword">else</span> <span class="typed"><span class="type">=&gt; List[BasicBlocks.this.Instruction]</span><a href="#33179">instructionList</a></span>.<span class="typed"><span class="type">=&gt; List[BasicBlocks.this.Instruction]</span><a id="21385">reverse</a></span>.<span class="typed"><span class="type">=&gt; Iterator[BasicBlocks.this.Instruction]</span><a id="21347">elements</a></span>
    
    <span class="comment">/** return the underlying array of instructions */</span>
    <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Array[BasicBlocks.this.Instruction]</span><a id="33190">getArray</a></span>: <span class="typed"><span class="type">Array[BasicBlocks.this.Instruction]</span><a id="1072">Array</a></span>[Instruction] = {
      <span class="typed"><span class="type">(Boolean)Unit</span><span id="6003"><a id="821">assert</a></span></span>(<span class="typed"><span class="type">=&gt; Boolean</span><a href="#33163">closed</a></span>)
      <span class="typed"><span class="type">=&gt; Array[BasicBlocks.this.Instruction]</span><a href="#33185">instrs</a></span>
    }

    <span class="keyword">def</span> <span class="typed"><span class="type">(List[BasicBlocks.this.Instruction])Unit</span><a id="33191">fromList</a></span>(<span class="typed"><span class="type">List[BasicBlocks.this.Instruction]</span><a id="80969">is</a></span>: <span class="typed"><span class="type">List[BasicBlocks.this.Instruction]</span><a id="526">List</a></span>[Instruction]) {
      <span class="typed"><span class="type">(Array[BasicBlocks.this.Instruction])Unit</span><a href="#33186">instrs</a></span> = <span class="typed"><span class="type">(List[BasicBlocks.this.Instruction])Array[BasicBlocks.this.Instruction]</span><a href="#33216">toInstructionArray</a></span>(<span class="typed"><span class="type">List[BasicBlocks.this.Instruction]</span><a href="#80969">is</a></span>)
      <span class="typed"><span class="type">(Boolean)Unit</span><a href="#33164">closed</a></span> = <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>
    }

    <span class="comment">// public:</span>

    <span class="comment">/** Return the index of inst. Uses reference equality.
     *  Returns -1 if not found.
     */</span>
    <span class="keyword">def</span> <span class="typed"><span class="type">(BasicBlocks.this.Instruction)Int</span><a id="33192">indexOf</a></span>(<span class="typed"><span class="type">BasicBlocks.this.Instruction</span><a id="153895">inst</a></span>: <span class="typed"><span class="type">BasicBlocks.this.Instruction</span><a href="Opcodes.scala.html#32341">Instruction</a></span>): <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span> = {
      <span class="typed"><span class="type">(Boolean)Unit</span><span id="6003"><a id="821">assert</a></span></span>(<span class="typed"><span class="type">=&gt; Boolean</span><a href="#33163">closed</a></span>)
      <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="153896">i</a></span> = <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>
      <span class="typed"><span class="type">Unit</span><a href="#153897" class="keyword">while</a></span> (<span class="typed"><span class="type">Int</span><a href="#153896">i</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&lt;</a></span> <span class="typed"><span class="type">=&gt; Array[BasicBlocks.this.Instruction]</span><a href="#33185">instrs</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21508">length</a></span>) {
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">(Int)BasicBlocks.this.Instruction</span><a href="#33185" id="21509">instrs</a></span>(<span class="typed"><span class="type">Int</span><a href="#153896">i</a></span>) <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5794">eq</a></span> <span class="typed"><span class="type">BasicBlocks.this.Instruction</span><a href="#153895">inst</a></span>) <span class="typed"><span class="type">Nothing</span><span class="keyword">return</span></span> <span class="typed"><span class="type">Int</span><a href="#153896">i</a></span>
        <span class="typed"><span class="type">Int</span><a href="#153896">i</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">+=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
      }
      -<span class="typed"><span class="type">Int(-1)</span><span class="int">1</span></span>
    }

    <span class="comment">/** Compute an hashCode for the block */</span>
<span class="comment">//    override def hashCode() = label;</span>

    <span class="comment">/** Apply a function to all the instructions of the block. */</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">((BasicBlocks.this.Instruction) =&gt; Unit)Unit</span><a id="33193">foreach</a></span>(<span class="typed"><span class="type">(BasicBlocks.this.Instruction) =&gt; Unit</span><a id="37442">f</a></span>: Instruction =&gt; Unit) = {
      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">=&gt; Boolean</span><a href="#33163">closed</a></span>) {
        <span class="typed"><span class="type">=&gt; Unit</span><a href="ICodes.scala.html#32310">dump</a></span>
        <span class="typed"><span class="type">=&gt; scala.tools.nsc.Global</span><a href="ICodes.scala.html#32304">global</a></span>.<span class="typed"><span class="type">(String)Nothing</span><a href="../../Global.scala.html#21214">abort</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;Traversing an open block!: &quot;)</span><span class="string">&quot;Traversing an open block!: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">=&gt; Int</span><a href="#33150">label</a></span>)
      }
      <span class="typed"><span class="type">=&gt; Array[BasicBlocks.this.Instruction]</span><a href="#33185">instrs</a></span> <span class="typed"><span class="type">((BasicBlocks.this.Instruction) =&gt; Unit)Unit</span><a id="21792">foreach</a></span> <span class="typed"><span class="type">(BasicBlocks.this.Instruction) =&gt; Unit</span><a href="#37442">f</a></span>
    }

    <span class="comment">/** The number of instructions in this basic block so far. */</span>
    <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Int</span><a id="33194">length</a></span>: <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span> =
      <span class="typed"><span class="type">Int</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a href="#33163">closed</a></span>) <span class="typed"><span class="type">=&gt; Array[BasicBlocks.this.Instruction]</span><a href="#33185">instrs</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21508">length</a></span> <span class="keyword">else</span> <span class="typed"><span class="type">=&gt; List[BasicBlocks.this.Instruction]</span><a href="#33179">instructionList</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21345">length</a></span>

    <span class="comment">/** Return the index of the instruction which produced the value 
     *  consumed by the given instruction. 
     */</span>
    <span class="keyword">def</span> <span class="typed"><span class="type">(Int)Option[Int]</span><a id="33195">findDef</a></span>(<span class="typed"><span class="type">Int</span><a id="153930">pos</a></span>: <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span>): <span class="typed"><span class="type">Option[Int]</span><a id="934">Option</a></span>[Int] = {
      <span class="typed"><span class="type">(Boolean)Unit</span><span id="6003"><a id="821">assert</a></span></span>(<span class="typed"><span class="type">=&gt; Boolean</span><a href="#33163">closed</a></span>)
      <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="153931">i</a></span> = <span class="typed"><span class="type">Int</span><a href="#153930">pos</a></span>
      <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="153932">d</a></span> = <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>
      <span class="typed"><span class="type">Unit</span><a href="#153933" class="keyword">while</a></span> (<span class="typed"><span class="type">Int</span><a href="#153931">i</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3145">&gt;</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>) {
        <span class="typed"><span class="type">Int</span><a href="#153931">i</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3148">-=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
        <span class="keyword">val</span> <span class="typed"><span class="type">Int</span><a id="153936">prod</a></span> = <span class="typed"><span class="type">(Int)BasicBlocks.this.Instruction</span><a href="#33185" id="21509">instrs</a></span>(<span class="typed"><span class="type">Int</span><a href="#153931">i</a></span>).<span class="typed"><span class="type">=&gt; Int</span><a href="Opcodes.scala.html#33389">produced</a></span>
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#153936">prod</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3145">&gt;</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">Int</span><a href="#153932">d</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3141">==</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>)
          <span class="typed"><span class="type">Nothing</span><span class="keyword">return</span></span> <span class="typed"><span class="type">(Int)Some[Int]</span><span id="29737"><a id="308">Some</a></span></span>(<span class="typed"><span class="type">Int</span><a href="#153931">i</a></span>)
        <span class="typed"><span class="type">Int</span><a href="#153932">d</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">+=</a></span> (<span class="typed"><span class="type">(Int)BasicBlocks.this.Instruction</span><a href="#33185" id="21509">instrs</a></span>(<span class="typed"><span class="type">Int</span><a href="#153931">i</a></span>).<span class="typed"><span class="type">=&gt; Int</span><a href="Opcodes.scala.html#33388">consumed</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3148">-</a></span> <span class="typed"><span class="type">(Int)BasicBlocks.this.Instruction</span><a href="#33185" id="21509">instrs</a></span>(<span class="typed"><span class="type">Int</span><a href="#153931">i</a></span>).<span class="typed"><span class="type">=&gt; Int</span><a href="Opcodes.scala.html#33389">produced</a></span>)
      }
      <span class="typed"><span class="type">object None</span><a id="536">None</a></span>
    }
    

    <span class="comment">/** Return the n-th instruction. */</span>
    <span class="keyword">def</span> <span class="typed"><span class="type">(Int)BasicBlocks.this.Instruction</span><a id="33196">apply</a></span>(<span class="typed"><span class="type">Int</span><a id="33792">n</a></span>: <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span>): <span class="typed"><span class="type">BasicBlocks.this.Instruction</span><a href="Opcodes.scala.html#32341">Instruction</a></span> =
      <span class="typed"><span class="type">BasicBlocks.this.Instruction</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a href="#33163">closed</a></span>) <span class="typed"><span class="type">(Int)BasicBlocks.this.Instruction</span><a href="#33185" id="21509">instrs</a></span>(<span class="typed"><span class="type">Int</span><a href="#33792">n</a></span>) <span class="keyword">else</span> <span class="typed"><span class="type">=&gt; List[BasicBlocks.this.Instruction]</span><a href="#33179">instructionList</a></span>.<span class="typed"><span class="type">(Int)BasicBlocks.this.Instruction</span><span id="21361"><a id="21385">reverse</a></span></span>(<span class="typed"><span class="type">Int</span><a href="#33792">n</a></span>)

    <span class="comment">///////////////////// Substitutions ///////////////////////</span>

    <span class="comment">/**
     * Replace the instruction at the given position. Used by labels when
     * they are anchored. It retains the position of the previous instruction.
     */</span>
    <span class="keyword">def</span> <span class="typed"><span class="type">(Int,BasicBlocks.this.Instruction)Boolean</span><a id="33197">replaceInstruction</a></span>(<span class="typed"><span class="type">Int</span><a id="80802">pos</a></span>: <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span>, <span class="typed"><span class="type">BasicBlocks.this.Instruction</span><a id="80803">instr</a></span>: <span class="typed"><span class="type">BasicBlocks.this.Instruction</span><a href="Opcodes.scala.html#32341">Instruction</a></span>): <span class="typed"><span class="type">Boolean</span><a id="2170">Boolean</a></span> = {
      <span class="typed"><span class="type">(Boolean,=&gt; Any)Unit</span><span id="6004"><a id="821">assert</a></span></span>(<span class="typed"><span class="type">=&gt; Boolean</span><a href="#33163">closed</a></span>, <span class="typed"><span class="type">java.lang.String(&quot;Instructions can be replaced only after the basic block is closed&quot;)</span><span class="string">&quot;Instructions can be replaced only after the basic block is closed&quot;</span></span>)

      <span class="typed"><span class="type">BasicBlocks.this.Instruction</span><a href="#80803">instr</a></span>.<span class="typed"><span class="type">(scala.tools.nsc.util.Position)Unit</span><a href="Opcodes.scala.html#33394">pos</a></span> = <span class="typed"><span class="type">(Int)BasicBlocks.this.Instruction</span><a href="#33185" id="21509">instrs</a></span>(<span class="typed"><span class="type">Int</span><a href="#80802">pos</a></span>).<span class="typed"><span class="type">=&gt; scala.tools.nsc.util.Position</span><a href="Opcodes.scala.html#33393">pos</a></span>
      <span class="typed"><span class="type">=&gt; Array[BasicBlocks.this.Instruction]</span><a href="#33185">instrs</a></span>(<span class="typed"><span class="type">Int</span><a href="#80802">pos</a></span>) = <span class="typed"><span class="type">BasicBlocks.this.Instruction</span><a href="#80803">instr</a></span>
      <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>
    }

    <span class="comment">/**
     * Replace the given instruction with the new one. 
     * Returns `true' if it actually changed something. 
     * It retains the position of the previous instruction.
     */</span>
    <span class="keyword">def</span> <span class="typed"><span class="type">(BasicBlocks.this.Instruction,BasicBlocks.this.Instruction)Boolean</span><a id="33198">replaceInstruction</a></span>(<span class="typed"><span class="type">BasicBlocks.this.Instruction</span><a id="80800">oldInstr</a></span>: <span class="typed"><span class="type">BasicBlocks.this.Instruction</span><a href="Opcodes.scala.html#32341">Instruction</a></span>, <span class="typed"><span class="type">BasicBlocks.this.Instruction</span><a id="80801">newInstr</a></span>: <span class="typed"><span class="type">BasicBlocks.this.Instruction</span><a href="Opcodes.scala.html#32341">Instruction</a></span>): <span class="typed"><span class="type">Boolean</span><a id="2170">Boolean</a></span> = {
      <span class="typed"><span class="type">(Boolean,=&gt; Any)Unit</span><span id="6004"><a id="821">assert</a></span></span>(<span class="typed"><span class="type">=&gt; Boolean</span><a href="#33163">closed</a></span>, <span class="typed"><span class="type">java.lang.String(&quot;Instructions can be replaced only after the basic block is closed&quot;)</span><span class="string">&quot;Instructions can be replaced only after the basic block is closed&quot;</span></span>)

      <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="154015">i</a></span> = <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>
      <span class="keyword">var</span> <span class="typed"><span class="type">Boolean</span><a id="154016">changed</a></span> = <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>
      <span class="typed"><span class="type">Unit</span><a href="#154017" class="keyword">while</a></span> (<span class="typed"><span class="type">Int</span><a href="#154015">i</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&lt;</a></span> <span class="typed"><span class="type">=&gt; Array[BasicBlocks.this.Instruction]</span><a href="#33185">instrs</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21508">length</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">Boolean</span><a href="#154016">changed</a></span>) {
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">(Int)BasicBlocks.this.Instruction</span><a href="#33185" id="21509">instrs</a></span>(<span class="typed"><span class="type">Int</span><a href="#154015">i</a></span>) <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">BasicBlocks.this.Instruction</span><a href="#80800">oldInstr</a></span>) {
          <span class="typed"><span class="type">BasicBlocks.this.Instruction</span><a href="#80801">newInstr</a></span>.<span class="typed"><span class="type">(scala.tools.nsc.util.Position)Unit</span><a href="Opcodes.scala.html#33394">pos</a></span> = <span class="typed"><span class="type">BasicBlocks.this.Instruction</span><a href="#80800">oldInstr</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.util.Position</span><a href="Opcodes.scala.html#33393">pos</a></span>
          <span class="typed"><span class="type">=&gt; Array[BasicBlocks.this.Instruction]</span><a href="#33185">instrs</a></span>(<span class="typed"><span class="type">Int</span><a href="#154015">i</a></span>) = <span class="typed"><span class="type">BasicBlocks.this.Instruction</span><a href="#80801">newInstr</a></span>
          <span class="typed"><span class="type">Boolean</span><a href="#154016">changed</a></span> = <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>
        }
        <span class="typed"><span class="type">Int</span><a href="#154015">i</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">+=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
      }
      <span class="typed"><span class="type">Boolean</span><a href="#154016">changed</a></span>
    }

    <span class="comment">/** Replaces &lt;code&gt;iold&lt;/code&gt; with &lt;code&gt;is&lt;/code&gt;. It does not update
     *  the position field in the newly inserted instrucitons, so it behaves
     *  differently than the one-instruction versions of this function.
     *
     *  @param iold ..
     *  @param is   ..
     *  @return     ..
     */</span>
    <span class="keyword">def</span> <span class="typed"><span class="type">(BasicBlocks.this.Instruction,List[BasicBlocks.this.Instruction])Boolean</span><a id="33199">replaceInstruction</a></span>(<span class="typed"><span class="type">BasicBlocks.this.Instruction</span><a id="80798">iold</a></span>: <span class="typed"><span class="type">BasicBlocks.this.Instruction</span><a href="Opcodes.scala.html#32341">Instruction</a></span>, <span class="typed"><span class="type">List[BasicBlocks.this.Instruction]</span><a id="80799">is</a></span>: <span class="typed"><span class="type">List[BasicBlocks.this.Instruction]</span><a id="526">List</a></span>[Instruction]): <span class="typed"><span class="type">Boolean</span><a id="2170">Boolean</a></span> = {
      <span class="typed"><span class="type">(Boolean,=&gt; Any)Unit</span><span id="6004"><a id="821">assert</a></span></span>(<span class="typed"><span class="type">=&gt; Boolean</span><a href="#33163">closed</a></span>, <span class="typed"><span class="type">java.lang.String(&quot;Instructions can be replaced only after the basic block is closed&quot;)</span><span class="string">&quot;Instructions can be replaced only after the basic block is closed&quot;</span></span>)

      <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="154056">i</a></span> = <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>
      <span class="keyword">var</span> <span class="typed"><span class="type">Boolean</span><a id="154057">changed</a></span> = <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>

      <span class="typed"><span class="type">Unit</span><a href="#154058" class="keyword">while</a></span> (<span class="typed"><span class="type">Int</span><a href="#154056">i</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&lt;</a></span> <span class="typed"><span class="type">=&gt; Array[BasicBlocks.this.Instruction]</span><a href="#33185">instrs</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21508">length</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> (<span class="typed"><span class="type">(Int)BasicBlocks.this.Instruction</span><a href="#33185" id="21509">instrs</a></span>(<span class="typed"><span class="type">Int</span><a href="#154056">i</a></span>) <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5795">ne</a></span> <span class="typed"><span class="type">BasicBlocks.this.Instruction</span><a href="#80798">iold</a></span>))
        <span class="typed"><span class="type">Int</span><a href="#154056">i</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">+=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>

      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#154056">i</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&lt;</a></span> <span class="typed"><span class="type">=&gt; Array[BasicBlocks.this.Instruction]</span><a href="#33185">instrs</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21508">length</a></span>) {
        <span class="keyword">val</span> <span class="typed"><span class="type">Array[BasicBlocks.this.Instruction]</span><a id="154096">newInstrs</a></span> = <span class="typed"><span class="type">Array[BasicBlocks.this.Instruction]</span><span class="keyword">new</span></span> <span class="typed"><span class="type">Array[BasicBlocks.this.Instruction]</span><a id="1072">Array</a></span>[Instruction](<span class="typed"><span class="type">=&gt; Array[BasicBlocks.this.Instruction]</span><a href="#33185">instrs</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21508">length</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">+</a></span> <span class="typed"><span class="type">List[BasicBlocks.this.Instruction]</span><a href="#80799">is</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21345">length</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3148">-</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>);
        <span class="typed"><span class="type">Boolean</span><a href="#154057">changed</a></span> = <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>
        <span class="typed"><span class="type">object Array</span><a id="1073">Array</a></span>.<span class="typed"><span class="type">(AnyRef,Int,AnyRef,Int,Int)Unit</span><a id="21467">copy</a></span>(<span class="typed"><span class="type">=&gt; Array[BasicBlocks.this.Instruction]</span><a href="#33185">instrs</a></span>, <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>, <span class="typed"><span class="type">Array[BasicBlocks.this.Instruction]</span><a href="#154096">newInstrs</a></span>, <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>, <span class="typed"><span class="type">Int</span><a href="#154056">i</a></span>)
        <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="154097">j</a></span> = <span class="typed"><span class="type">Int</span><a href="#154056">i</a></span>
        <span class="keyword">for</span> (<span class="typed"><span class="type">((BasicBlocks.this.Instruction) =&gt; Unit)Unit</span><span id="21366"><a id="154116">x</a></span></span> &lt;- <span class="typed"><span class="type">List[BasicBlocks.this.Instruction]</span><a href="#80799">is</a></span>) {
          <span class="typed"><span class="type">Array[BasicBlocks.this.Instruction]</span><a href="#154096">newInstrs</a></span>(<span class="typed"><span class="type">Int</span><a href="#154097">j</a></span>) = <span class="typed"><span class="type">BasicBlocks.this.Instruction</span><a href="#154116">x</a></span>
          <span class="typed"><span class="type">Int</span><a href="#154097">j</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">+=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
        }
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#154056">i</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">+</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&lt;</a></span> <span class="typed"><span class="type">=&gt; Array[BasicBlocks.this.Instruction]</span><a href="#33185">instrs</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21508">length</a></span>)
          <span class="typed"><span class="type">object Array</span><a id="1073">Array</a></span>.<span class="typed"><span class="type">(AnyRef,Int,AnyRef,Int,Int)Unit</span><a id="21467">copy</a></span>(<span class="typed"><span class="type">=&gt; Array[BasicBlocks.this.Instruction]</span><a href="#33185">instrs</a></span>, <span class="typed"><span class="type">Int</span><a href="#154056">i</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">+</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>, <span class="typed"><span class="type">Array[BasicBlocks.this.Instruction]</span><a href="#154096">newInstrs</a></span>, <span class="typed"><span class="type">Int</span><a href="#154097">j</a></span>, <span class="typed"><span class="type">=&gt; Array[BasicBlocks.this.Instruction]</span><a href="#33185">instrs</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21508">length</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3148">-</a></span> <span class="typed"><span class="type">Int</span><a href="#154056">i</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3148">-</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>)
        <span class="typed"><span class="type">(Array[BasicBlocks.this.Instruction])Unit</span><a href="#33186">instrs</a></span> = <span class="typed"><span class="type">Array[BasicBlocks.this.Instruction]</span><a href="#154096">newInstrs</a></span>;
      }

      <span class="typed"><span class="type">Boolean</span><a href="#154057">changed</a></span>
    }
    
    <span class="comment">/** Insert instructions in 'is' immediately after index 'idx'. */</span>
    <span class="keyword">def</span> <span class="typed"><span class="type">(Int,List[BasicBlocks.this.Instruction])Unit</span><a id="33200">insertAfter</a></span>(<span class="typed"><span class="type">Int</span><a id="154176">idx</a></span>: <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span>, <span class="typed"><span class="type">List[BasicBlocks.this.Instruction]</span><a id="154177">is</a></span>: <span class="typed"><span class="type">List[BasicBlocks.this.Instruction]</span><a id="526">List</a></span>[Instruction]) {
      <span class="typed"><span class="type">(Boolean,=&gt; Any)Unit</span><span id="6004"><a id="821">assert</a></span></span>(<span class="typed"><span class="type">=&gt; Boolean</span><a href="#33163">closed</a></span>, <span class="typed"><span class="type">java.lang.String(&quot;Instructions can be replaced only after the basic block is closed&quot;)</span><span class="string">&quot;Instructions can be replaced only after the basic block is closed&quot;</span></span>)

      <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="154178">i</a></span> = <span class="typed"><span class="type">Int</span><a href="#154176">idx</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">+</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#154178">i</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&lt;</a></span> <span class="typed"><span class="type">=&gt; Array[BasicBlocks.this.Instruction]</span><a href="#33185">instrs</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21508">length</a></span>) {
        <span class="keyword">val</span> <span class="typed"><span class="type">Array[BasicBlocks.this.Instruction]</span><a id="154189">newInstrs</a></span> = <span class="typed"><span class="type">Array[BasicBlocks.this.Instruction]</span><span class="keyword">new</span></span> <span class="typed"><span class="type">Array[BasicBlocks.this.Instruction]</span><a id="1072">Array</a></span>[Instruction](<span class="typed"><span class="type">=&gt; Array[BasicBlocks.this.Instruction]</span><a href="#33185">instrs</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21508">length</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">+</a></span> <span class="typed"><span class="type">List[BasicBlocks.this.Instruction]</span><a href="#154177">is</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21345">length</a></span>);
        <span class="typed"><span class="type">object Array</span><a id="1073">Array</a></span>.<span class="typed"><span class="type">(AnyRef,Int,AnyRef,Int,Int)Unit</span><a id="21467">copy</a></span>(<span class="typed"><span class="type">=&gt; Array[BasicBlocks.this.Instruction]</span><a href="#33185">instrs</a></span>, <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>, <span class="typed"><span class="type">Array[BasicBlocks.this.Instruction]</span><a href="#154189">newInstrs</a></span>, <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>, <span class="typed"><span class="type">Int</span><a href="#154178">i</a></span>)
        <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="154190">j</a></span> = <span class="typed"><span class="type">Int</span><a href="#154178">i</a></span>
        <span class="keyword">for</span> (<span class="typed"><span class="type">((BasicBlocks.this.Instruction) =&gt; Unit)Unit</span><span id="21366"><a id="154212">x</a></span></span> &lt;- <span class="typed"><span class="type">List[BasicBlocks.this.Instruction]</span><a href="#154177">is</a></span>) {
          <span class="typed"><span class="type">Array[BasicBlocks.this.Instruction]</span><a href="#154189">newInstrs</a></span>(<span class="typed"><span class="type">Int</span><a href="#154190">j</a></span>) = <span class="typed"><span class="type">BasicBlocks.this.Instruction</span><a href="#154212">x</a></span>
          <span class="typed"><span class="type">Int</span><a href="#154190">j</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">+=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
        }
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#154178">i</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">+</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&lt;</a></span> <span class="typed"><span class="type">=&gt; Array[BasicBlocks.this.Instruction]</span><a href="#33185">instrs</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21508">length</a></span>)
          <span class="typed"><span class="type">object Array</span><a id="1073">Array</a></span>.<span class="typed"><span class="type">(AnyRef,Int,AnyRef,Int,Int)Unit</span><a id="21467">copy</a></span>(<span class="typed"><span class="type">=&gt; Array[BasicBlocks.this.Instruction]</span><a href="#33185">instrs</a></span>, <span class="typed"><span class="type">Int</span><a href="#154178">i</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">+</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>, <span class="typed"><span class="type">Array[BasicBlocks.this.Instruction]</span><a href="#154189">newInstrs</a></span>, <span class="typed"><span class="type">Int</span><a href="#154190">j</a></span>, <span class="typed"><span class="type">=&gt; Array[BasicBlocks.this.Instruction]</span><a href="#33185">instrs</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21508">length</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3148">-</a></span> <span class="typed"><span class="type">Int</span><a href="#154178">i</a></span>)
        <span class="typed"><span class="type">(Array[BasicBlocks.this.Instruction])Unit</span><a href="#33186">instrs</a></span> = <span class="typed"><span class="type">Array[BasicBlocks.this.Instruction]</span><a href="#154189">newInstrs</a></span>;
      }
    }

    <span class="comment">/** Removes instructions found at the given positions.
     *
     *  @param positions ...
     */</span>
    <span class="keyword">def</span> <span class="typed"><span class="type">(Int*)Unit</span><a id="33201">removeInstructionsAt</a></span>(<span class="typed"><span class="type">Int*</span><a id="154271">positions</a></span>: <span class="typed"><span class="type">Int*</span><a id="2741">Int</a></span>*) {
      <span class="typed"><span class="type">(Boolean)Unit</span><span id="6003"><a id="821">assert</a></span></span>(<span class="typed"><span class="type">=&gt; Boolean</span><a href="#33163">closed</a></span>)
      <span class="keyword">val</span> <span class="typed"><span class="type">List[Int]</span><a id="154272">removed</a></span> = <span class="typed"><span class="type">Int*</span><a href="#154271">positions</a></span>.<span class="typed"><span class="type">=&gt; List[Int]</span><a id="21815">toList</a></span>
      <span class="keyword">val</span> <span class="typed"><span class="type">Array[BasicBlocks.this.Instruction]</span><a id="154273">newInstrs</a></span> = <span class="typed"><span class="type">Array[BasicBlocks.this.Instruction]</span><span class="keyword">new</span></span> <span class="typed"><span class="type">Array[BasicBlocks.this.Instruction]</span><a id="1072">Array</a></span>[Instruction](<span class="typed"><span class="type">=&gt; Array[BasicBlocks.this.Instruction]</span><a href="#33185">instrs</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21508">length</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3148">-</a></span> <span class="typed"><span class="type">Int*</span><a href="#154271">positions</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21642">length</a></span>)
      <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="154274">i</a></span> = <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>
      <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="154275">j</a></span> = <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>
      <span class="typed"><span class="type">Unit</span><a href="#154276" class="keyword">while</a></span> (<span class="typed"><span class="type">Int</span><a href="#154274">i</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&lt;</a></span> <span class="typed"><span class="type">=&gt; Array[BasicBlocks.this.Instruction]</span><a href="#33185">instrs</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21508">length</a></span>) {
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">List[Int]</span><a href="#154272">removed</a></span>.<span class="typed"><span class="type">(Any)Boolean</span><a id="21673">contains</a></span>(<span class="typed"><span class="type">Int</span><a href="#154274">i</a></span>)) {
          <span class="typed"><span class="type">Array[BasicBlocks.this.Instruction]</span><a href="#154273">newInstrs</a></span>(<span class="typed"><span class="type">Int</span><a href="#154275">j</a></span>) = <span class="typed"><span class="type">(Int)BasicBlocks.this.Instruction</span><a href="#33185" id="21509">instrs</a></span>(<span class="typed"><span class="type">Int</span><a href="#154274">i</a></span>)
          <span class="typed"><span class="type">Int</span><a href="#154275">j</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">+=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
        }
        <span class="typed"><span class="type">Int</span><a href="#154274">i</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">+=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
      }
      <span class="typed"><span class="type">(Array[BasicBlocks.this.Instruction])Unit</span><a href="#33186">instrs</a></span> = <span class="typed"><span class="type">Array[BasicBlocks.this.Instruction]</span><a href="#154273">newInstrs</a></span>
    }
    
    <span class="comment">/** Remove the last instruction of this basic block. It is
     *  fast for an open block, but slower when the block is closed.
     */</span>
    <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Unit</span><a id="33202">removeLastInstruction</a></span> {
      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a href="#33163">closed</a></span>) 
        <span class="typed"><span class="type">(Int*)Unit</span><a href="#33201">removeInstructionsAt</a></span>(<span class="typed"><span class="type">=&gt; Int</span><a href="#32337" id="21644">size</a></span>)
      <span class="keyword">else</span> {
        <span class="typed"><span class="type">(List[BasicBlocks.this.Instruction])Unit</span><a href="#33180">instructionList</a></span> = <span class="typed"><span class="type">=&gt; List[BasicBlocks.this.Instruction]</span><a href="#33179">instructionList</a></span>.<span class="typed"><span class="type">=&gt; List[BasicBlocks.this.Instruction]</span><a id="21334">tail</a></span>
        <span class="typed"><span class="type">(Boolean)Unit</span><a href="#33172">touched</a></span> = <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>
      }
    }

    <span class="comment">/** Replaces all instructions found in the map.
     *
     *  @param map ...
     */</span>
    <span class="keyword">def</span> <span class="typed"><span class="type">(scala.collection.mutable.Map[BasicBlocks.this.Instruction,BasicBlocks.this.Instruction])Unit</span><a id="33203">subst</a></span>(<span class="typed"><span class="type">scala.collection.mutable.Map[BasicBlocks.this.Instruction,BasicBlocks.this.Instruction]</span><a id="113210">map</a></span>: <span class="typed"><span class="type">scala.collection.mutable.Map[BasicBlocks.this.Instruction,BasicBlocks.this.Instruction]</span><a id="19880">Map</a></span>[Instruction, Instruction]) {
      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">=&gt; Boolean</span><a href="#33163">closed</a></span>) <span class="typed"><span class="type">(scala.collection.mutable.Map[BasicBlocks.this.Instruction,BasicBlocks.this.Instruction])Unit</span><a href="#33204">substOnList</a></span>(<span class="typed"><span class="type">scala.collection.mutable.Map[BasicBlocks.this.Instruction,BasicBlocks.this.Instruction]</span><a href="#113210">map</a></span>) <span class="keyword">else</span> {
        <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="154345">i</a></span> = <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>
        <span class="typed"><span class="type">Unit</span><a href="#154346" class="keyword">while</a></span> (<span class="typed"><span class="type">Int</span><a href="#154345">i</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&lt;</a></span> <span class="typed"><span class="type">=&gt; Array[BasicBlocks.this.Instruction]</span><a href="#33185">instrs</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21508">length</a></span>) {
          <span class="typed"><span class="type">scala.collection.mutable.Map[BasicBlocks.this.Instruction,BasicBlocks.this.Instruction]</span><a href="#113210">map</a></span> <span class="typed"><span class="type">(BasicBlocks.this.Instruction)Option[BasicBlocks.this.Instruction]</span><a id="24235">get</a></span> <span class="typed"><span class="type">(Int)BasicBlocks.this.Instruction</span><a href="#33185" id="21509">instrs</a></span>(<span class="typed"><span class="type">Int</span><a href="#154345">i</a></span>) <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
            <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">Some</a>(<span class="typed"><span class="type">BasicBlocks.this.Instruction</span><a id="154353">instr</a></span>) =&gt; <span class="typed"><span class="type">(Boolean)Unit</span><a href="#33172">touched</a></span> = <span class="typed"><span class="type">(Int,BasicBlocks.this.Instruction)Boolean</span><a href="#33197">replaceInstruction</a></span>(<span class="typed"><span class="type">Int</span><a href="#154345">i</a></span>, <span class="typed"><span class="type">BasicBlocks.this.Instruction</span><a href="#154353">instr</a></span>)
            <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object None</span><a id="536">None</a></span> =&gt; <span class="typed"><span class="type">Unit</span><span >(</span></span>)
          }
          <span class="typed"><span class="type">Int</span><a href="#154345">i</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">+=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
        }
      }
    }

    <span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(scala.collection.mutable.Map[BasicBlocks.this.Instruction,BasicBlocks.this.Instruction])Unit</span><a id="33204">substOnList</a></span>(<span class="typed"><span class="type">scala.collection.mutable.Map[BasicBlocks.this.Instruction,BasicBlocks.this.Instruction]</span><a id="154344">map</a></span>: <span class="typed"><span class="type">scala.collection.mutable.Map[BasicBlocks.this.Instruction,BasicBlocks.this.Instruction]</span><a id="19880">Map</a></span>[Instruction, Instruction]) {
      <span class="keyword">def</span> <span class="typed"><span class="type">(List[BasicBlocks.this.Instruction])List[BasicBlocks.this.Instruction]</span><a id="154377">subst</a></span>(<span class="typed"><span class="type">List[BasicBlocks.this.Instruction]</span><a id="154378">l</a></span>: <span class="typed"><span class="type">List[BasicBlocks.this.Instruction]</span><a id="526">List</a></span>[Instruction]): <span class="typed"><span class="type">List[BasicBlocks.this.Instruction]</span><a id="526">List</a></span>[Instruction] = <span class="typed"><span class="type">List[BasicBlocks.this.Instruction]</span><a href="#154378">l</a></span> <span class="typed"><span class="type">List[BasicBlocks.this.Instruction]</span><span class="keyword">match</span></span> {
        <span class="typed"><span class="type">Nil.type</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object Nil</span><a id="335">Nil</a></span> =&gt; <span class="typed"><span class="type">object Nil</span><a id="335">Nil</a></span>
        <span class="typed"><span class="type">List[BasicBlocks.this.Instruction]</span><span class="keyword">case</span></span> <span class="typed"><span class="type">BasicBlocks.this.Instruction</span><a id="154379">x</a></span> <a id="1">::</a> <span class="typed"><span class="type">List[BasicBlocks.this.Instruction]</span><a id="154380">xs</a></span> =&gt;
          <span class="typed"><span class="type">scala.collection.mutable.Map[BasicBlocks.this.Instruction,BasicBlocks.this.Instruction]</span><a href="#154344">map</a></span>.<span class="typed"><span class="type">(BasicBlocks.this.Instruction)Option[BasicBlocks.this.Instruction]</span><a id="24235">get</a></span>(<span class="typed"><span class="type">BasicBlocks.this.Instruction</span><a href="#154379">x</a></span>) <span class="typed"><span class="type">List[BasicBlocks.this.Instruction]</span><span class="keyword">match</span></span> {
            <span class="typed"><span class="type">List[BasicBlocks.this.Instruction]</span><span class="keyword">case</span></span> <a id="1">Some</a>(<span class="typed"><span class="type">BasicBlocks.this.Instruction</span><a id="154381">newInstr</a></span>) =&gt; <span class="typed"><span class="type">BasicBlocks.this.Instruction</span><a href="#154381">newInstr</a></span> <span class="typed"><span class="type">(BasicBlocks.this.Instruction)List[BasicBlocks.this.Instruction]</span><a href="#154382" id="21335">::</a></span> <span class="typed"><span class="type">(List[BasicBlocks.this.Instruction])List[BasicBlocks.this.Instruction]</span><a href="#154377">subst</a></span>(<span class="typed"><span class="type">List[BasicBlocks.this.Instruction]</span><a href="#154380">xs</a></span>)
            <span class="typed"><span class="type">List[BasicBlocks.this.Instruction]</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object None</span><a id="536">None</a></span> =&gt; <span class="typed"><span class="type">BasicBlocks.this.Instruction</span><a href="#154379">x</a></span> <span class="typed"><span class="type">(BasicBlocks.this.Instruction)List[BasicBlocks.this.Instruction]</span><a href="#154385" id="21335">::</a></span> <span class="typed"><span class="type">(List[BasicBlocks.this.Instruction])List[BasicBlocks.this.Instruction]</span><a href="#154377">subst</a></span>(<span class="typed"><span class="type">List[BasicBlocks.this.Instruction]</span><a href="#154380">xs</a></span>)
          }
      }

      <span class="typed"><span class="type">(List[BasicBlocks.this.Instruction])Unit</span><a href="#33180">instructionList</a></span> = <span class="typed"><span class="type">(List[BasicBlocks.this.Instruction])List[BasicBlocks.this.Instruction]</span><a href="#154377">subst</a></span>(<span class="typed"><span class="type">=&gt; List[BasicBlocks.this.Instruction]</span><a href="#33179">instructionList</a></span>)
    }

    <span class="comment">////////////////////// Emit //////////////////////</span>


    <span class="comment">/** Add a new instruction at the end of the block,
     *  using the same source position as the last emitted instruction
     */</span>
    <span class="keyword">def</span> <span class="typed"><span class="type">(BasicBlocks.this.Instruction)Unit</span><a id="33205">emit</a></span>(<span class="typed"><span class="type">BasicBlocks.this.Instruction</span><a id="34070">instr</a></span>: <span class="typed"><span class="type">BasicBlocks.this.Instruction</span><a href="Opcodes.scala.html#32341">Instruction</a></span>) {
      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">=&gt; List[BasicBlocks.this.Instruction]</span><a href="#33179">instructionList</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a id="21645">isEmpty</a></span>)
        <span class="typed"><span class="type">(BasicBlocks.this.Instruction,scala.tools.nsc.util.Position)Unit</span><a href="#33206">emit</a></span>(<span class="typed"><span class="type">BasicBlocks.this.Instruction</span><a href="#34070">instr</a></span>, <span class="typed"><span class="type">=&gt; List[BasicBlocks.this.Instruction]</span><a href="#33179">instructionList</a></span>.<span class="typed"><span class="type">=&gt; BasicBlocks.this.Instruction</span><a id="21332">head</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.util.Position</span><a href="Opcodes.scala.html#33393">pos</a></span>)
      <span class="keyword">else</span>
        <span class="typed"><span class="type">(BasicBlocks.this.Instruction,scala.tools.nsc.util.Position)Unit</span><a href="#33206">emit</a></span>(<span class="typed"><span class="type">BasicBlocks.this.Instruction</span><a href="#34070">instr</a></span>, <span class="typed"><span class="type">object scala.tools.nsc.util.NoPosition</span><a href="../../util/Position.scala.html#8304">NoPosition</a></span>)
    }

    <span class="keyword">def</span> <span class="typed"><span class="type">(BasicBlocks.this.Instruction,scala.tools.nsc.util.Position)Unit</span><a id="33206">emit</a></span>(<span class="typed"><span class="type">BasicBlocks.this.Instruction</span><a id="34068">instr</a></span>: <span class="typed"><span class="type">BasicBlocks.this.Instruction</span><a href="Opcodes.scala.html#32341">Instruction</a></span>, <span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a id="34069">pos</a></span>: <span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a href="../../util/Position.scala.html#8480">Position</a></span>) {
      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a href="#33163">closed</a></span>) {
        <span class="typed"><span class="type">()Unit</span><a href="#33222">print</a></span>()
        <span class="typed"><span class="type">object Console</span><a id="440">Console</a></span>.<span class="typed"><span class="type">(Any)Unit</span><a id="27062">println</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;trying to emit: &quot;)</span><span class="string">&quot;trying to emit: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">BasicBlocks.this.Instruction</span><a href="#34068">instr</a></span>)
      }
      <span class="typed"><span class="type">(Boolean,=&gt; Any)Unit</span><span id="6004"><a id="821">assert</a></span></span>(<span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">=&gt; Boolean</span><a href="#33163">closed</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2750">||</a></span> <span class="typed"><span class="type">=&gt; Boolean</span><a href="#33165">ignore</a></span>, <span class="typed"><span class="type">java.lang.String(&quot;BasicBlock closed&quot;)</span><span class="string">&quot;BasicBlock closed&quot;</span></span>)

      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">=&gt; Boolean</span><a href="#33165">ignore</a></span>) {
        <span class="typed"><span class="type">(Boolean)Unit</span><a href="#33172">touched</a></span> = <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>
        <span class="typed"><span class="type">BasicBlocks.this.Instruction</span><a href="#34068">instr</a></span>.<span class="typed"><span class="type">(scala.tools.nsc.util.Position)Unit</span><a href="Opcodes.scala.html#33394">pos</a></span> = <span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a href="#34069">pos</a></span>
        <span class="typed"><span class="type">(List[BasicBlocks.this.Instruction])Unit</span><a href="#33180">instructionList</a></span> = <span class="typed"><span class="type">BasicBlocks.this.Instruction</span><a href="#34068">instr</a></span> <span class="typed"><span class="type">(BasicBlocks.this.Instruction)List[BasicBlocks.this.Instruction]</span><a href="#154425" id="21335">::</a></span> <span class="typed"><span class="type">=&gt; List[BasicBlocks.this.Instruction]</span><a href="#33179">instructionList</a></span>
        <span class="typed"><span class="type">(BasicBlocks.this.Instruction)Unit</span><a href="#33183">_lastInstruction</a></span> = <span class="typed"><span class="type">BasicBlocks.this.Instruction</span><a href="#34068">instr</a></span>
      }
    }
    
    <span class="keyword">def</span> <span class="typed"><span class="type">(Seq[BasicBlocks.this.Instruction])Unit</span><a id="33207">emit</a></span>(<span class="typed"><span class="type">Seq[BasicBlocks.this.Instruction]</span><a id="34059">instrs</a></span>: <span class="typed"><span class="type">Seq[BasicBlocks.this.Instruction]</span><a id="763">Seq</a></span>[Instruction]) {
      <span class="typed"><span class="type">Seq[BasicBlocks.this.Instruction]</span><a href="#34059">instrs</a></span> <span class="typed"><span class="type">((BasicBlocks.this.Instruction) =&gt; Unit)Unit</span><a id="21792">foreach</a></span> (<span class="typed"><span class="type">BasicBlocks.this.Instruction</span><a id="154429">i</a></span> =&gt; <span class="typed"><span class="type">(BasicBlocks.this.Instruction,scala.tools.nsc.util.Position)Unit</span><a href="#33206">emit</a></span>(<span class="typed"><span class="type">BasicBlocks.this.Instruction</span><a href="#154429">i</a></span>, <span class="typed"><span class="type">BasicBlocks.this.Instruction</span><a href="#154429">i</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.util.Position</span><a href="Opcodes.scala.html#33393">pos</a></span>))
    }

    <span class="comment">/** Close the block */</span>
    <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Unit</span><a id="33208">close</a></span> {
      <span class="typed"><span class="type">(Boolean,=&gt; Any)Unit</span><span id="6004"><a id="821">assert</a></span></span>(<span class="typed"><span class="type">=&gt; List[BasicBlocks.this.Instruction]</span><a href="#33179">instructionList</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21345">length</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3145">&gt;</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>, <span class="typed"><span class="type">java.lang.String(&quot;Empty block.&quot;)</span><span class="string">&quot;Empty block.&quot;</span></span>)
      <span class="typed"><span class="type">(Boolean)Unit</span><a href="#33164">closed</a></span> = <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>
      <span class="typed"><span class="type">(List[BasicBlocks.this.Instruction])Unit</span><a href="#33180">instructionList</a></span> = <span class="typed"><span class="type">=&gt; List[BasicBlocks.this.Instruction]</span><a href="#33179">instructionList</a></span>.<span class="typed"><span class="type">=&gt; List[BasicBlocks.this.Instruction]</span><a id="21385">reverse</a></span>
      <span class="typed"><span class="type">(Array[BasicBlocks.this.Instruction])Unit</span><a href="#33186">instrs</a></span> = <span class="typed"><span class="type">(List[BasicBlocks.this.Instruction])Array[BasicBlocks.this.Instruction]</span><a href="#33216">toInstructionArray</a></span>(<span class="typed"><span class="type">=&gt; List[BasicBlocks.this.Instruction]</span><a href="#33179">instructionList</a></span>)
    }

    <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Unit</span><a id="33209">open</a></span> {
      <span class="typed"><span class="type">(Boolean)Unit</span><span id="6003"><a id="821">assert</a></span></span>(<span class="typed"><span class="type">=&gt; Boolean</span><a href="#33163">closed</a></span>)
      <span class="typed"><span class="type">(Boolean)Unit</span><a href="#33164">closed</a></span> = <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>
      <span class="typed"><span class="type">(Boolean)Unit</span><a href="#33166">ignore</a></span> = <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>
      <span class="typed"><span class="type">(List[BasicBlocks.this.Instruction])Unit</span><a href="#33180">instructionList</a></span> = <span class="typed"><span class="type">=&gt; List[BasicBlocks.this.Instruction]</span><a href="#33179">instructionList</a></span>.<span class="typed"><span class="type">=&gt; List[BasicBlocks.this.Instruction]</span><a id="21385">reverse</a></span>  <span class="comment">// prepare for appending to the head</span>
    }

    <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Unit</span><a id="33210">clear</a></span> {
      <span class="typed"><span class="type">(List[BasicBlocks.this.Instruction])Unit</span><a href="#33180">instructionList</a></span> = <span class="typed"><span class="type">object Nil</span><a id="335">Nil</a></span>
      <span class="typed"><span class="type">(Array[BasicBlocks.this.Instruction])Unit</span><a href="#33186">instrs</a></span> = <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>
      <span class="typed"><span class="type">(List[BasicBlocks.this.BasicBlock])Unit</span><a href="#33174">preds</a></span>  = <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>
    }

    <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Boolean</span><a id="33211">isEmpty</a></span>: <span class="typed"><span class="type">Boolean</span><a id="2170">Boolean</a></span> = <span class="typed"><span class="type">=&gt; List[BasicBlocks.this.Instruction]</span><a href="#33179">instructionList</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a id="21645">isEmpty</a></span>

    <span class="comment">/** Enter ignore mode: new 'emit'ted instructions will not be
     *  added to this basic block. It makes the generation of THROW
     *  and RETURNs easier.
     */</span>
    <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Unit</span><a id="33212">enterIgnoreMode</a></span> = <span class="typed"><span class="type">(Boolean)Unit</span><a href="#33166">ignore</a></span> = <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>

    <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Unit</span><a id="33213">exitIgnoreMode</a></span> {
      <span class="typed"><span class="type">(Boolean,=&gt; Any)Unit</span><span id="6004"><a id="821">assert</a></span></span>(<span class="typed"><span class="type">=&gt; Boolean</span><a href="#33165">ignore</a></span>, <span class="typed"><span class="type">java.lang.String(&quot;Exit ignore mode when not in ignore mode.&quot;)</span><span class="string">&quot;Exit ignore mode when not in ignore mode.&quot;</span></span>)
      <span class="typed"><span class="type">(Boolean)Unit</span><a href="#33166">ignore</a></span> = <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>
    }

    <span class="comment">/** Return the last instruction of this basic block. */</span>
    <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; BasicBlocks.this.Instruction</span><a id="33214">lastInstruction</a></span> =
      <span class="typed"><span class="type">BasicBlocks.this.Instruction</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a href="#33163">closed</a></span>)
        <span class="typed"><span class="type">(Int)BasicBlocks.this.Instruction</span><a href="#33185" id="21509">instrs</a></span>(<span class="typed"><span class="type">=&gt; Array[BasicBlocks.this.Instruction]</span><a href="#33185">instrs</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21508">length</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3148">-</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>)
      <span class="keyword">else</span>
        <span class="typed"><span class="type">=&gt; List[BasicBlocks.this.Instruction]</span><a href="#33179">instructionList</a></span>.<span class="typed"><span class="type">=&gt; BasicBlocks.this.Instruction</span><a id="21332">head</a></span>

    <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; BasicBlocks.this.Instruction</span><a id="33215">firstInstruction</a></span> =
      <span class="typed"><span class="type">BasicBlocks.this.Instruction</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a href="#33163">closed</a></span>)
        <span class="typed"><span class="type">(Int)BasicBlocks.this.Instruction</span><a href="#33185" id="21509">instrs</a></span>(<span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>)
      <span class="keyword">else</span>
        <span class="typed"><span class="type">=&gt; List[BasicBlocks.this.Instruction]</span><a href="#33179">instructionList</a></span>.<span class="typed"><span class="type">=&gt; BasicBlocks.this.Instruction</span><a id="21350">last</a></span>

    <span class="comment">/** Convert the list to an array */</span>
    <span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(List[BasicBlocks.this.Instruction])Array[BasicBlocks.this.Instruction]</span><a id="33216">toInstructionArray</a></span>(<span class="typed"><span class="type">List[BasicBlocks.this.Instruction]</span><a id="153894">l</a></span>: <span class="typed"><span class="type">List[BasicBlocks.this.Instruction]</span><a id="526">List</a></span>[Instruction]): <span class="typed"><span class="type">Array[BasicBlocks.this.Instruction]</span><a id="1072">Array</a></span>[Instruction] = {
      <span class="keyword">var</span> <span class="typed"><span class="type">Array[BasicBlocks.this.Instruction]</span><a id="154471">array</a></span> = <span class="typed"><span class="type">Array[BasicBlocks.this.Instruction]</span><span class="keyword">new</span></span> <span class="typed"><span class="type">Array[BasicBlocks.this.Instruction]</span><a id="1072">Array</a></span>[Instruction](<span class="typed"><span class="type">List[BasicBlocks.this.Instruction]</span><a href="#153894">l</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21345">length</a></span>)
      <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="154472">i</a></span>: <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span> = <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>

      <span class="typed"><span class="type">List[BasicBlocks.this.Instruction]</span><a href="#153894">l</a></span> <span class="typed"><span class="type">((BasicBlocks.this.Instruction) =&gt; Unit)Unit</span><a id="21366">foreach</a></span> (<span class="typed"><span class="type">BasicBlocks.this.Instruction</span><a id="154475">x</a></span> =&gt; { <span class="typed"><span class="type">Array[BasicBlocks.this.Instruction]</span><a href="#154471">array</a></span>(<span class="typed"><span class="type">Int</span><a href="#154472">i</a></span>) = <span class="typed"><span class="type">BasicBlocks.this.Instruction</span><a href="#154475">x</a></span>; <span class="typed"><span class="type">Int</span><a href="#154472">i</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">+=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span> })
      <span class="typed"><span class="type">Array[BasicBlocks.this.Instruction]</span><a href="#154471">array</a></span>
    }

    <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; List[BasicBlocks.this.BasicBlock]</span><a id="33217">successors</a></span> : <span class="typed"><span class="type">List[BasicBlocks.this.BasicBlock]</span><a id="526">List</a></span>[BasicBlock] = <span class="typed"><span class="type">List[BasicBlocks.this.BasicBlock]</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a href="#33211">isEmpty</a></span>) <span class="typed"><span class="type">object Nil</span><a id="335">Nil</a></span> <span class="keyword">else</span> {
      <span class="keyword">var</span> <span class="typed"><span class="type">List[BasicBlocks.this.BasicBlock]</span><a id="154499">res</a></span> = <span class="typed"><span class="type">=&gt; BasicBlocks.this.Instruction</span><a href="#33214">lastInstruction</a></span> <span class="typed"><span class="type">List[BasicBlocks.this.BasicBlock]</span><span class="keyword">match</span></span> {
        <span class="typed"><span class="type">List[BasicBlocks.this.BasicBlock]</span><span class="keyword">case</span></span> <a id="1">JUMP</a> (<span class="typed"><span class="type">BasicBlocks.this.BasicBlock</span><a id="154500">whereto</a></span>) =&gt; <span class="typed"><span class="type">(BasicBlocks.this.BasicBlock*)List[BasicBlocks.this.BasicBlock]</span><span id="21328"><a id="527">List</a></span></span>(<span class="typed"><span class="type">BasicBlocks.this.BasicBlock</span><a href="#154500">whereto</a></span>)
        <span class="typed"><span class="type">List[BasicBlocks.this.BasicBlock]</span><span class="keyword">case</span></span> <a id="1">CJUMP</a>(<span class="typed"><span class="type">BasicBlocks.this.BasicBlock</span><a id="154502">success</a></span>, <span class="typed"><span class="type">BasicBlocks.this.BasicBlock</span><a id="154503">failure</a></span>, _, _) =&gt; <span class="typed"><span class="type">BasicBlocks.this.BasicBlock</span><a href="#154503">failure</a></span> <span class="typed"><span class="type">(BasicBlocks.this.BasicBlock)List[BasicBlocks.this.BasicBlock]</span><a href="#154504" id="21335">::</a></span> <span class="typed"><span class="type">BasicBlocks.this.BasicBlock</span><a href="#154502">success</a></span> <span class="typed"><span class="type">(BasicBlocks.this.BasicBlock)List[BasicBlocks.this.BasicBlock]</span><a href="#154505" id="21335">::</a></span> <span class="typed"><span class="type">object Nil</span><a id="335">Nil</a></span>
        <span class="typed"><span class="type">List[BasicBlocks.this.BasicBlock]</span><span class="keyword">case</span></span> <a id="1">CZJUMP</a>(<span class="typed"><span class="type">BasicBlocks.this.BasicBlock</span><a id="154510">success</a></span>, <span class="typed"><span class="type">BasicBlocks.this.BasicBlock</span><a id="154511">failure</a></span>, _, _) =&gt; <span class="typed"><span class="type">BasicBlocks.this.BasicBlock</span><a href="#154511">failure</a></span> <span class="typed"><span class="type">(BasicBlocks.this.BasicBlock)List[BasicBlocks.this.BasicBlock]</span><a href="#154512" id="21335">::</a></span> <span class="typed"><span class="type">BasicBlocks.this.BasicBlock</span><a href="#154510">success</a></span> <span class="typed"><span class="type">(BasicBlocks.this.BasicBlock)List[BasicBlocks.this.BasicBlock]</span><a href="#154513" id="21335">::</a></span> <span class="typed"><span class="type">object Nil</span><a id="335">Nil</a></span>
        <span class="typed"><span class="type">List[BasicBlocks.this.BasicBlock]</span><span class="keyword">case</span></span> <a id="1">SWITCH</a>(_,<span class="typed"><span class="type">List[BasicBlocks.this.BasicBlock]</span><a id="154518">labels</a></span>) =&gt; <span class="typed"><span class="type">List[BasicBlocks.this.BasicBlock]</span><a href="#154518">labels</a></span>
        <span class="typed"><span class="type">Nil.type</span><span class="keyword">case</span></span> <a id="1">RETURN</a>(_) =&gt; <span class="typed"><span class="type">object Nil</span><a id="335">Nil</a></span>
        <span class="typed"><span class="type">Nil.type</span><span class="keyword">case</span></span> <a id="1">THROW</a>() =&gt; <span class="typed"><span class="type">object Nil</span><a id="335">Nil</a></span>
        <span class="typed"><span class="type">Nil.type</span><span class="keyword">case</span></span> _ =&gt;
          <span class="typed"><span class="type">Nil.type</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a href="#33163">closed</a></span>) {
            <span class="typed"><span class="type">=&gt; Unit</span><a href="ICodes.scala.html#32310">dump</a></span>
            <span class="typed"><span class="type">=&gt; scala.tools.nsc.Global</span><a href="ICodes.scala.html#32304">global</a></span>.<span class="typed"><span class="type">(String)Nothing</span><a href="../../Global.scala.html#21214">abort</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;The last instruction is not a control flow instruction: &quot;)</span><span class="string">&quot;The last instruction is not a control flow instruction: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">=&gt; BasicBlocks.this.Instruction</span><a href="#33214">lastInstruction</a></span>)
          }
          <span class="keyword">else</span> <span class="typed"><span class="type">object Nil</span><a id="335">Nil</a></span>
      }
      <span class="typed"><span class="type">=&gt; BasicBlocks.this.IMethod</span><a href="#33152">method</a></span>.<span class="typed"><span class="type">=&gt; List[BasicBlocks.this.ExceptionHandler]</span><a href="Members.scala.html#32873">exh</a></span>.<span class="typed"><span class="type">((BasicBlocks.this.ExceptionHandler) =&gt; Unit)Unit</span><a id="21366">foreach</a></span> { <span class="typed"><span class="type">BasicBlocks.this.ExceptionHandler</span><a id="154521">e</a></span>: <span class="typed"><span class="type">BasicBlocks.this.ExceptionHandler</span><a href="ExceptionHandlers.scala.html#32394">ExceptionHandler</a></span> =&gt;
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">BasicBlocks.this.ExceptionHandler</span><a href="#154521">e</a></span>.<span class="typed"><span class="type">(BasicBlocks.this.BasicBlock)Boolean</span><a href="ExceptionHandlers.scala.html#51924">covers</a></span>(<span class="typed"><span class="type">BasicBlocks.this.BasicBlock</span><a href="#32337" class="keyword">this</a></span>)) <span class="typed"><span class="type">List[BasicBlocks.this.BasicBlock]</span><a href="#154499">res</a></span> = <span class="typed"><span class="type">BasicBlocks.this.ExceptionHandler</span><a href="#154521">e</a></span>.<span class="typed"><span class="type">=&gt; BasicBlocks.this.BasicBlock</span><a href="ExceptionHandlers.scala.html#51919">startBlock</a></span> <span class="typed"><span class="type">(BasicBlocks.this.BasicBlock)List[BasicBlocks.this.BasicBlock]</span><a href="#154522" id="21335">::</a></span> <span class="typed"><span class="type">List[BasicBlocks.this.BasicBlock]</span><a href="#154499">res</a></span>
      }
      <span class="typed"><span class="type">List[BasicBlocks.this.BasicBlock]</span><a href="#154499">res</a></span> <span class="typed"><span class="type">(Iterable[BasicBlocks.this.BasicBlock])List[BasicBlocks.this.BasicBlock]</span><a id="21341">++</a></span> <span class="typed"><span class="type">(BasicBlocks.this.BasicBlock,List[BasicBlocks.this.BasicBlock])List[BasicBlocks.this.BasicBlock]</span><a href="#33218">exceptionalSucc</a></span>(<span class="typed"><span class="type">BasicBlocks.this.BasicBlock</span><a href="#32337" class="keyword">this</a></span>, <span class="typed"><span class="type">List[BasicBlocks.this.BasicBlock]</span><a href="#154499">res</a></span>)
    }
    
    <span class="comment">/** Return a list of successors for 'b' that come from exception handlers
     *  covering b's (non-exceptional) successors. These exception handlers 
     *  might not cover 'b' itself. This situation corresponds to an 
     *  exception being thrown as the first thing of one of b's successors.
     */</span>
    <span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(BasicBlocks.this.BasicBlock,List[BasicBlocks.this.BasicBlock])List[BasicBlocks.this.BasicBlock]</span><a id="33218">exceptionalSucc</a></span>(<span class="typed"><span class="type">BasicBlocks.this.BasicBlock</span><a id="154532">b</a></span>: <span class="typed"><span class="type">BasicBlocks.this.BasicBlock</span><a href="#32337">BasicBlock</a></span>, <span class="typed"><span class="type">List[BasicBlocks.this.BasicBlock]</span><a id="154533">succs</a></span>: <span class="typed"><span class="type">List[BasicBlocks.this.BasicBlock]</span><a id="526">List</a></span>[BasicBlock]): <span class="typed"><span class="type">List[BasicBlocks.this.BasicBlock]</span><a id="526">List</a></span>[BasicBlock] = {
      <span class="keyword">def</span> <span class="typed"><span class="type">(BasicBlocks.this.BasicBlock)List[BasicBlocks.this.BasicBlock]</span><a id="154534">findSucc</a></span>(<span class="typed"><span class="type">BasicBlocks.this.BasicBlock</span><a id="154535">s</a></span>: <span class="typed"><span class="type">BasicBlocks.this.BasicBlock</span><a href="#32337">BasicBlock</a></span>): <span class="typed"><span class="type">List[BasicBlocks.this.BasicBlock]</span><a id="526">List</a></span>[BasicBlock] = { 
        <span class="keyword">val</span> <span class="typed"><span class="type">List[BasicBlocks.this.BasicBlock]</span><a id="154536">ss</a></span> = <span class="typed"><span class="type">=&gt; BasicBlocks.this.IMethod</span><a href="#33152">method</a></span>.<span class="typed"><span class="type">=&gt; List[BasicBlocks.this.ExceptionHandler]</span><a href="Members.scala.html#32873">exh</a></span> <span class="typed"><span class="type">((BasicBlocks.this.ExceptionHandler) =&gt; Iterable[BasicBlocks.this.BasicBlock])List[BasicBlocks.this.BasicBlock]</span><a id="21383">flatMap</a></span> { <span class="typed"><span class="type">BasicBlocks.this.ExceptionHandler</span><a id="154540">h</a></span> =&gt; 
          <span class="typed"><span class="type">List[BasicBlocks.this.BasicBlock]</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">BasicBlocks.this.ExceptionHandler</span><a href="#154540">h</a></span>.<span class="typed"><span class="type">(BasicBlocks.this.BasicBlock)Boolean</span><a href="ExceptionHandlers.scala.html#51924">covers</a></span>(<span class="typed"><span class="type">BasicBlocks.this.BasicBlock</span><a href="#154535">s</a></span>)) <span class="typed"><span class="type">(BasicBlocks.this.BasicBlock*)List[BasicBlocks.this.BasicBlock]</span><span id="21328"><a id="527">List</a></span></span>(<span class="typed"><span class="type">BasicBlocks.this.ExceptionHandler</span><a href="#154540">h</a></span>.<span class="typed"><span class="type">=&gt; BasicBlocks.this.BasicBlock</span><a href="ExceptionHandlers.scala.html#51919">startBlock</a></span>) <span class="keyword">else</span> <span class="typed"><span class="type">object Nil</span><a id="335">Nil</a></span>
        }
        <span class="typed"><span class="type">List[BasicBlocks.this.BasicBlock]</span><a href="#154536">ss</a></span> <span class="typed"><span class="type">(Iterable[BasicBlocks.this.BasicBlock])List[BasicBlocks.this.BasicBlock]</span><a id="21341">++</a></span> (<span class="typed"><span class="type">List[BasicBlocks.this.BasicBlock]</span><a href="#154536">ss</a></span> <span class="typed"><span class="type">((BasicBlocks.this.BasicBlock) =&gt; Iterable[BasicBlocks.this.BasicBlock])List[BasicBlocks.this.BasicBlock]</span><a id="21383">flatMap</a></span> <span class="typed"><span class="type">(BasicBlocks.this.BasicBlock)List[BasicBlocks.this.BasicBlock]</span><a href="#154534">findSucc</a></span>)
      }
      
      <span class="typed"><span class="type">List[BasicBlocks.this.BasicBlock]</span><a href="#154533">succs</a></span>.<span class="typed"><span class="type">((BasicBlocks.this.BasicBlock) =&gt; Iterable[BasicBlocks.this.BasicBlock])List[BasicBlocks.this.BasicBlock]</span><a id="21383">flatMap</a></span>(<span class="typed"><span class="type">(BasicBlocks.this.BasicBlock)List[BasicBlocks.this.BasicBlock]</span><a href="#154534">findSucc</a></span>).<span class="typed"><span class="type">=&gt; List[BasicBlocks.this.BasicBlock]</span><a id="21405">removeDuplicates</a></span>
    }

    <span class="comment">/** Returns the precessors of this block, in the current 'code' chunk.
     *  This is signifficant only if there are exception handlers, which live
     *  in different code 'chunks' than the rest of the method.
     */</span>
    <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; List[BasicBlocks.this.BasicBlock]</span><a id="33219">predecessors</a></span>: <span class="typed"><span class="type">List[BasicBlocks.this.BasicBlock]</span><a id="526">List</a></span>[BasicBlock] = {
      <span class="typed"><span class="type">(List[BasicBlocks.this.BasicBlock])Unit</span><a href="#33174">preds</a></span> = <span class="typed"><span class="type">=&gt; BasicBlocks.this.Code</span><a href="#33156">code</a></span>.<span class="typed"><span class="type">=&gt; scala.collection.mutable.ListBuffer[BasicBlocks.this.BasicBlock]</span><a href="Members.scala.html#33274">blocks</a></span>.<span class="typed"><span class="type">=&gt; &lt;refinement&gt; extends java.lang.Object with Iterator[BasicBlocks.this.BasicBlock]</span><a id="33320">elements</a></span>.<span class="typed"><span class="type">((BasicBlocks.this.BasicBlock) =&gt; Boolean)Iterator[BasicBlocks.this.BasicBlock]</span><a id="32193">filter</a></span> (<span class="typed"><span class="type">BasicBlocks.this.BasicBlock</span><a href="#154566">_</a></span>.<span class="typed"><span class="type">=&gt; List[BasicBlocks.this.BasicBlock]</span><a href="#33217">successors</a></span>.<span class="typed"><span class="type">(Any)Boolean</span><a id="21673">contains</a></span>(<span class="typed"><span class="type">BasicBlocks.this.BasicBlock</span><a href="#32337" class="keyword">this</a></span>)).<span class="typed"><span class="type">=&gt; List[BasicBlocks.this.BasicBlock]</span><a id="32235">toList</a></span>
      <span class="typed"><span class="type">=&gt; List[BasicBlocks.this.BasicBlock]</span><a href="#33173">preds</a></span>
    }

    <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">(Any)Boolean</span><a id="33220">equals</a></span>(<span class="typed"><span class="type">Any</span><a id="154567">other</a></span>: <span class="typed"><span class="type">Any</span><a id="51">Any</a></span>): <span class="typed"><span class="type">Boolean</span><a id="2170">Boolean</a></span> = <span class="typed"><span class="type">Any</span><a href="#154567">other</a></span> <span class="typed"><span class="type">Boolean</span><span class="keyword">match</span></span> {
      <span class="typed"><span class="type">Boolean</span><span class="keyword">case</span></span> <span class="typed"><span class="type">BasicBlocks.this.BasicBlock</span><a id="154568">that</a></span>: <span class="typed"><span class="type">BasicBlocks.this.BasicBlock</span><a href="#32337">BasicBlock</a></span> =&gt; (<span class="typed"><span class="type">BasicBlocks.this.BasicBlock</span><a href="#154568">that</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a href="#33150">label</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3141">==</a></span> <span class="typed"><span class="type">=&gt; Int</span><a href="#33150">label</a></span>) <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> (<span class="typed"><span class="type">BasicBlocks.this.BasicBlock</span><a href="#154568">that</a></span>.<span class="typed"><span class="type">=&gt; BasicBlocks.this.Code</span><a href="#33156">code</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">=&gt; BasicBlocks.this.Code</span><a href="#33156">code</a></span>)
      <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">case</span></span> _ =&gt; <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>
    }

    <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">()Int</span><a id="33221">hashCode</a></span> = <span class="typed"><span class="type">=&gt; Int</span><a href="#33150">label</a></span>
    
    <span class="comment">// Instead of it, rather use a printer</span>
    <span class="keyword">def</span> <span class="typed"><span class="type">()Unit</span><a id="33222">print</a></span>() { <span class="typed"><span class="type">(java.io.PrintStream)Unit</span><a href="#33223">print</a></span>(java.lang.<span class="typed"><span class="type">object java.lang.System</span><a id="1886">System</a></span>.<span class="typed"><span class="type">java.io.PrintStream</span><a id="47436">out</a></span>) }

    <span class="keyword">def</span> <span class="typed"><span class="type">(java.io.PrintStream)Unit</span><a id="33223">print</a></span>(<span class="typed"><span class="type">java.io.PrintStream</span><a id="154416">out</a></span>: java.io.<span class="typed"><span class="type">java.io.PrintStream</span><a id="3852">PrintStream</a></span>) {
      <span class="typed"><span class="type">java.io.PrintStream</span><a href="#154416">out</a></span>.<span class="typed"><span class="type">(java.lang.String)Unit</span><a id="27111">println</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;block #&quot;)</span><span class="string">&quot;block #&quot;</span></span><span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span><span class="typed"><span class="type">=&gt; Int</span><a href="#33150">label</a></span><span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span><span class="typed"><span class="type">java.lang.String(&quot; :&quot;)</span><span class="string">&quot; :&quot;</span></span>)
      <span class="typed"><span class="type">=&gt; List[BasicBlocks.this.Instruction]</span><a href="#33188">toList</a></span>.<span class="typed"><span class="type">((BasicBlocks.this.Instruction) =&gt; Unit)Unit</span><a id="21366">foreach</a></span>(<span class="typed"><span class="type">BasicBlocks.this.Instruction</span><a id="154579">i</a></span> =&gt; <span class="typed"><span class="type">java.io.PrintStream</span><a href="#154416">out</a></span>.<span class="typed"><span class="type">(java.lang.String)Unit</span><a id="27111">println</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;  &quot;)</span><span class="string">&quot;  &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">BasicBlocks.this.Instruction</span><a href="#154579">i</a></span>))
      <span class="typed"><span class="type">java.io.PrintStream</span><a href="#154416">out</a></span>.<span class="typed"><span class="type">(java.lang.String)Unit</span><a id="27101">print</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;Successors: &quot;)</span><span class="string">&quot;Successors: &quot;</span></span>)
      <span class="typed"><span class="type">=&gt; List[BasicBlocks.this.BasicBlock]</span><a href="#33217">successors</a></span>.<span class="typed"><span class="type">((BasicBlocks.this.BasicBlock) =&gt; Unit)Unit</span><a id="21366">foreach</a></span>((<span class="typed"><span class="type">BasicBlocks.this.BasicBlock</span><a id="154585">x</a></span>: <span class="typed"><span class="type">BasicBlocks.this.BasicBlock</span><a href="#32337">BasicBlock</a></span>) =&gt; <span class="typed"><span class="type">java.io.PrintStream</span><a href="#154416">out</a></span>.<span class="typed"><span class="type">(java.lang.String)Unit</span><a id="27101">print</a></span>(<span class="typed"><span class="type">java.lang.String(&quot; &quot;)</span><span class="string">&quot; &quot;</span></span><span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span><span class="typed"><span class="type">BasicBlocks.this.BasicBlock</span><a href="#154585">x</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a href="#33150">label</a></span>.<span class="typed"><span class="type">()java.lang.String</span><a id="3500">toString</a></span>()))
      <span class="typed"><span class="type">java.io.PrintStream</span><a href="#154416">out</a></span>.<span class="typed"><span class="type">()Unit</span><a id="27103">println</a></span>()
    }

    <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; String</span><a id="33224">fullString</a></span>: <span class="typed"><span class="type">String</span><a id="1861">String</a></span> = {
      <span class="keyword">val</span> <span class="typed"><span class="type">StringBuilder</span><a id="154613">buf</a></span> = <span class="typed"><span class="type">()StringBuilder</span><a id="23671" class="keyword">new</a></span> <span class="typed"><span class="type">StringBuilder</span><a id="1435">StringBuilder</a></span>()
      <span class="typed"><span class="type">StringBuilder</span><a href="#154613">buf</a></span>.<span class="typed"><span class="type">(String)StringBuilder</span><a id="23690">append</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;Block &quot;)</span><span class="string">&quot;Block &quot;</span></span>).<span class="typed"><span class="type">(String)StringBuilder</span><a id="23690">append</a></span>(<span class="typed"><span class="type">=&gt; Int</span><a href="#33150">label</a></span>.<span class="typed"><span class="type">()java.lang.String</span><a id="3500">toString</a></span>())
      <span class="typed"><span class="type">StringBuilder</span><a href="#154613">buf</a></span>.<span class="typed"><span class="type">(String)StringBuilder</span><a id="23690">append</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;\012Successors: &quot;)</span><span class="string">&quot;\nSuccessors: &quot;</span></span>).<span class="typed"><span class="type">(Any)StringBuilder</span><a id="23689">append</a></span>(<span class="typed"><span class="type">=&gt; List[BasicBlocks.this.BasicBlock]</span><a href="#33217">successors</a></span>)
      <span class="typed"><span class="type">StringBuilder</span><a href="#154613">buf</a></span>.<span class="typed"><span class="type">(String)StringBuilder</span><a id="23690">append</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;\012Predecessors: &quot;)</span><span class="string">&quot;\nPredecessors: &quot;</span></span>).<span class="typed"><span class="type">(Any)StringBuilder</span><a id="23689">append</a></span>(<span class="typed"><span class="type">=&gt; List[BasicBlocks.this.BasicBlock]</span><a href="#33219">predecessors</a></span>)
      <span class="typed"><span class="type">StringBuilder</span><a href="#154613">buf</a></span>.<span class="typed"><span class="type">()String</span><a id="23723">toString</a></span>()
    }

    <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">()String</span><a id="33225">toString</a></span>(): <span class="typed"><span class="type">String</span><a id="1861">String</a></span> = <span class="typed"><span class="type">java.lang.String(&quot;&quot;)</span><span class="string">&quot;&quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">=&gt; Int</span><a href="#33150">label</a></span>
  }

}

<span class="keyword">object</span> <span class="typed"><span class="type">object scala.tools.nsc.backend.icode.BBFlags</span><a id="10498">BBFlags</a></span> {
  <span class="comment">/** This block is a loop header (was translated from a while). */</span>
  <span class="keyword">final</span> <span class="keyword">val</span> <span class="typed"><span class="type">Int(1)</span><span id="33371"><a id="33370">LOOP_HEADER</a></span></span> = <span class="typed"><span class="type">Int(1)</span><span class="int">0x00000001</span></span>
  
  <span class="comment">/** Ignoring mode: emit instructions are dropped. */</span>
  <span class="keyword">final</span> <span class="keyword">val</span> <span class="typed"><span class="type">Int(2)</span><span id="33373"><a id="33372">IGNORING</a></span></span>    = <span class="typed"><span class="type">Int(2)</span><span class="int">0x00000002</span></span>
  
  <span class="comment">/** This block is the header of an exception handler. */</span>
  <span class="keyword">final</span> <span class="keyword">val</span> <span class="typed"><span class="type">Int(4)</span><span id="33375"><a id="33374">EX_HEADER</a></span></span>   = <span class="typed"><span class="type">Int(4)</span><span class="int">0x00000004</span></span>
  
  <span class="comment">/** This block is closed. No new instructions can be added. */</span>
  <span class="keyword">final</span> <span class="keyword">val</span> <span class="typed"><span class="type">Int(8)</span><span id="33377"><a id="33376">CLOSED</a></span></span>      = <span class="typed"><span class="type">Int(8)</span><span class="int">0x00000008</span></span>

  <span class="comment">/** This block has been changed, cached results are recomputed. */</span>
  <span class="keyword">final</span> <span class="keyword">val</span> <span class="typed"><span class="type">Int(16)</span><span id="33379"><a id="33378">TOUCHED</a></span></span>     = <span class="typed"><span class="type">Int(16)</span><span class="int">0x00000010</span></span>
}

        </pre>
    </body>
</html>