<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/backend/msil/GenMSIL.scala</title>
        <script type="text/javascript" src="../../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../../style.css" title="Style">
    </head>
    <body>
        <pre>
/* NSC -- new scala compiler
 * Copyright 2005-2009 LAMP/EPFL
 * @author Nikolay Mihaylov
 */

// $Id: GenMSIL.scala 18547 2009-08-22 19:52:46Z extempore $

<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> backend.msil

<span class="keyword">import</span> java.io.{File, IOException}
<span class="keyword">import</span> java.nio.{ByteBuffer, ByteOrder}

<span class="keyword">import</span> scala.collection.mutable.{Map, HashMap, HashSet, Stack}
<span class="keyword">import</span> scala.tools.nsc.symtab._
<span class="keyword">import</span> scala.tools.nsc.util.Position

<span class="keyword">import</span> ch.epfl.lamp.compiler.msil.{Type =&gt; MsilType, _}
<span class="keyword">import</span> ch.epfl.lamp.compiler.msil.emit._

/**
 */
<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class GenMSIL extends scala.tools.nsc.SubComponent with ScalaObject" id="21755">GenMSIL</a> <span title="ScalaObject" class="keyword">extends</span> <a href="../../SubComponent.scala.html#8328" title="scala.tools.nsc.SubComponent">SubComponent</a> {
  <span class="keyword">import</span> global._
  <span class="keyword">import</span> loaders.clrTypes
  <span class="keyword">import</span> clrTypes.{types, constructors, methods, fields}
  <span class="keyword">import</span> icodes._
  <span class="keyword">import</span> icodes.opcodes._

  /** Create a new phase */
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(p: scala.tools.nsc.Phase)GenMSIL.this.MsilPhase" id="288255">newPhase</a>(<a title="scala.tools.nsc.Phase" id="288373">p</a>: <a href="../../Phase.scala.html#8931" title="scala.tools.nsc.Phase">Phase</a>) = <span title="GenMSIL.this.MsilPhase" class="keyword">new</span> <a href="#288258" title="GenMSIL.this.MsilPhase">MsilPhase</a>(<a href="#288373" title="scala.tools.nsc.Phase">p</a>)

  <span class="keyword">val</span> <a title="java.lang.String" id="288256">phaseName</a> = <span title="java.lang.String(&quot;msil&quot;)" class="string">&quot;msil&quot;</span>
  /** MSIL code generation phase
   */
  <span class="keyword">class</span> <a title="class MsilPhase extends GenMSIL.this.global.GlobalPhase with ScalaObject" id="288258">MsilPhase</a><span title="ScalaObject">(</span><a title="scala.tools.nsc.Phase" id="288384">prev</a>: <a href="../../Phase.scala.html#8931" title="scala.tools.nsc.Phase">Phase</a>) <span class="keyword">extends</span> <a href="../../Global.scala.html#39331" title="GenMSIL.this.global.GlobalPhase">GlobalPhase</a>(<a href="#288384" title="scala.tools.nsc.Phase">prev</a>) {
    <span class="keyword">def</span> <a title="=&gt; java.lang.String" id="288379">name</a> = <a href="#288256" title="=&gt; java.lang.String">phaseName</a>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Long" id="288380">newFlags</a> = <a href="../../SubComponent.scala.html#39862" title="=&gt; Long">phaseNewFlags</a>

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Boolean" id="288381">erasedTypes</a> = <span title="Boolean(true)" class="keyword">true</span>

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Unit" id="288382">run</a> {
      <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37988" title="=&gt; Boolean">value</a>) <a href="../../Global.scala.html#39294" title="(msg: String)Unit">inform</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;[running phase &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#288379" title="=&gt; java.lang.String">name</a> + <span title="java.lang.String(&quot; on icode]&quot;)" class="string">&quot; on icode]&quot;</span>)

      <span class="keyword">val</span> <a title="GenMSIL.this.BytecodeGenerator" id="288405">codeGenerator</a> = <span title="GenMSIL.this.BytecodeGenerator" class="keyword">new</span> <a href="#288259" title="GenMSIL.this.BytecodeGenerator">BytecodeGenerator</a>

      //classes is ICodes.classes, a HashMap[Symbol, IClass]
      <a href="../icode/ICodes.scala.html#46378" title="=&gt; scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.global.Symbol,GenMSIL.this.global.icodes.IClass]">classes</a>.<span title="(f: (GenMSIL.this.global.icodes.IClass) =&gt; Unit)Unit">valuesIterator</span> foreach <a href="#288405" title="GenMSIL.this.BytecodeGenerator">codeGenerator</a>.<a href="#288601" title="(cls: GenMSIL.this.global.icodes.IClass)Unit">findEntryPoint</a>

      <a href="#288405" title="GenMSIL.this.BytecodeGenerator">codeGenerator</a>.<a href="#288516" title="()Unit">initAssembly</a>

      <a href="../icode/ICodes.scala.html#46378" title="=&gt; scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.global.Symbol,GenMSIL.this.global.icodes.IClass]">classes</a>.<span title="(f: (GenMSIL.this.global.icodes.IClass) =&gt; Unit)Unit">valuesIterator</span> foreach <a href="#288405" title="GenMSIL.this.BytecodeGenerator">codeGenerator</a>.<a href="#288607" title="(iclass: GenMSIL.this.global.icodes.IClass)Unit">createTypeBuilder</a>
      <a href="../icode/ICodes.scala.html#46378" title="=&gt; scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.global.Symbol,GenMSIL.this.global.icodes.IClass]">classes</a>.<span title="(f: (GenMSIL.this.global.icodes.IClass) =&gt; Unit)Unit">valuesIterator</span> foreach <a href="#288405" title="GenMSIL.this.BytecodeGenerator">codeGenerator</a>.<a href="#288608" title="(iclass: GenMSIL.this.global.icodes.IClass)Unit">createClassMembers</a>

      <span class="keyword">try</span> {
        <a href="../icode/ICodes.scala.html#46378" title="=&gt; scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.global.Symbol,GenMSIL.this.global.icodes.IClass]">classes</a>.<span title="(f: (GenMSIL.this.global.icodes.IClass) =&gt; Unit)Unit">valuesIterator</span> foreach <a href="#288405" title="GenMSIL.this.BytecodeGenerator">codeGenerator</a>.<a href="#288521" title="(iclass: GenMSIL.this.global.icodes.IClass)Unit">genClass</a>
      } <span class="keyword">finally</span> {
        <a href="#288405" title="GenMSIL.this.BytecodeGenerator">codeGenerator</a>.<a href="#288519" title="()Unit">writeAssembly</a>
      }
    }

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(unit: GenMSIL.this.global.CompilationUnit)Unit" id="288383">apply</a>(<a title="GenMSIL.this.global.CompilationUnit" id="288694">unit</a>: <a href="../../CompilationUnits.scala.html#39428" title="GenMSIL.this.global.CompilationUnit">CompilationUnit</a>) {
      <a href="../../Global.scala.html#39309" title="(msg: String)Nothing">abort</a>(<span title="java.lang.String(&quot;MSIL works on icode classes, not on compilation units!&quot;)" class="string">&quot;MSIL works on icode classes, not on compilation units!&quot;</span>)
    }
  }

  /**
   * MSIL bytecode generator.
   *
   */
  <span class="keyword">class</span> <a title="class BytecodeGenerator extends java.lang.Object with ScalaObject" id="288259">BytecodeGenerator</a> <span title="ScalaObject">{</span>

    <span class="keyword">val</span> <a title="java.lang.String" id="288420">MODULE_INSTANCE_NAME</a> = <span title="java.lang.String(&quot;MODULE$&quot;)" class="string">&quot;MODULE$&quot;</span>

    <span class="keyword">import</span> clrTypes.{VOID =&gt; MVOID, BOOLEAN =&gt; MBOOL, UBYTE =&gt; MBYTE, SHORT =&gt; MSHORT,
                   CHAR =&gt; MCHAR, INT =&gt; MINT, LONG =&gt; MLONG, FLOAT =&gt; MFLOAT,
                   DOUBLE =&gt; MDOUBLE, OBJECT =&gt; MOBJECT, STRING =&gt; MSTRING,
                   STRING_ARRAY =&gt; MSTRING_ARRAY, SCALA_SYMTAB_ATTR =&gt; SYMTAB_ATTRIBUTE,
                   SYMTAB_CONSTR =&gt; SYMTAB_ATTRIBUTE_CONSTRUCTOR,
                   SYMTAB_DEFAULT_CONSTR =&gt; SYMTAB_ATTRIBUTE_EMPTY_CONSTRUCTOR}

    <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.Type" id="288423">EXCEPTION</a> = <a href="../../symtab/SymbolLoaders.scala.html#109564" title="object GenMSIL.this.global.loaders.clrTypes">clrTypes</a>.<a href="../../symtab/clr/CLRTypes.scala.html#288359" title="(name: String)ch.epfl.lamp.compiler.msil.Type">getType</a>(<span title="java.lang.String(&quot;System.Exception&quot;)" class="string">&quot;System.Exception&quot;</span>)
    <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.Type" id="288425">MBYTE_ARRAY</a> = <a href="../../symtab/SymbolLoaders.scala.html#109564" title="object GenMSIL.this.global.loaders.clrTypes">clrTypes</a>.<a href="../../symtab/clr/CLRTypes.scala.html#288361" title="(elemType: ch.epfl.lamp.compiler.msil.Type)ch.epfl.lamp.compiler.msil.Type">mkArrayType</a>(<a href="../../symtab/clr/CLRTypes.scala.html#288276" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MBYTE</a>)

    <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.Type" id="288427">ICLONEABLE</a> = <a href="../../symtab/SymbolLoaders.scala.html#109564" title="object GenMSIL.this.global.loaders.clrTypes">clrTypes</a>.<a href="../../symtab/clr/CLRTypes.scala.html#288359" title="(name: String)ch.epfl.lamp.compiler.msil.Type">getType</a>(<span title="java.lang.String(&quot;System.ICloneable&quot;)" class="string">&quot;System.ICloneable&quot;</span>)
    <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.MethodInfo" id="288429">MEMBERWISE_CLONE</a> = <a href="../../symtab/clr/CLRTypes.scala.html#288318" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MOBJECT</a>.<span title="(x$1: java.lang.String,x$2: Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.MethodInfo">GetMethod</span>(<span title="java.lang.String(&quot;MemberwiseClone&quot;)" class="string">&quot;MemberwiseClone&quot;</span>, <span title="object ch.epfl.lamp.compiler.msil.Type">MsilType</span>.<span title="Array[ch.epfl.lamp.compiler.msil.Type]">EmptyTypes</span>)

    <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.Type" id="288431">MMONITOR</a>       = <a href="../../symtab/SymbolLoaders.scala.html#109564" title="object GenMSIL.this.global.loaders.clrTypes">clrTypes</a>.<a href="../../symtab/clr/CLRTypes.scala.html#288359" title="(name: String)ch.epfl.lamp.compiler.msil.Type">getType</a>(<span title="java.lang.String(&quot;System.Threading.Monitor&quot;)" class="string">&quot;System.Threading.Monitor&quot;</span>)
    <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.MethodInfo" id="288433">MMONITOR_ENTER</a> = <a href="#288431" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MMONITOR</a>.<span title="(x$1: java.lang.String,x$2: Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.MethodInfo">GetMethod</span>(<span title="java.lang.String(&quot;Enter&quot;)" class="string">&quot;Enter&quot;</span>, <span title="(xs: ch.epfl.lamp.compiler.msil.Type*)(implicit evidence$2: scala.reflect.ClassManifest[ch.epfl.lamp.compiler.msil.Type])Array[ch.epfl.lamp.compiler.msil.Type]">Array</span><span title="(clazz: Class[_])scala.reflect.ClassManifest[ch.epfl.lamp.compiler.msil.Type]">(</span><a href="../../symtab/clr/CLRTypes.scala.html#288318" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MOBJECT</a>))
    <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.MethodInfo" id="288435">MMONITOR_EXIT</a>  = <a href="#288431" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MMONITOR</a>.<span title="(x$1: java.lang.String,x$2: Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.MethodInfo">GetMethod</span>(<span title="java.lang.String(&quot;Exit&quot;)" class="string">&quot;Exit&quot;</span>, <span title="(xs: ch.epfl.lamp.compiler.msil.Type*)(implicit evidence$2: scala.reflect.ClassManifest[ch.epfl.lamp.compiler.msil.Type])Array[ch.epfl.lamp.compiler.msil.Type]">Array</span><span title="(clazz: Class[_])scala.reflect.ClassManifest[ch.epfl.lamp.compiler.msil.Type]">(</span><a href="../../symtab/clr/CLRTypes.scala.html#288318" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MOBJECT</a>))

    <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.Type" id="288437">MSTRING_BUILDER</a> = <a href="../../symtab/SymbolLoaders.scala.html#109564" title="object GenMSIL.this.global.loaders.clrTypes">clrTypes</a>.<a href="../../symtab/clr/CLRTypes.scala.html#288359" title="(name: String)ch.epfl.lamp.compiler.msil.Type">getType</a>(<span title="java.lang.String(&quot;System.Text.StringBuilder&quot;)" class="string">&quot;System.Text.StringBuilder&quot;</span>)
    <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.ConstructorInfo" id="288439">MSTRING_BUILDER_CONSTR</a> = <a href="#288437" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MSTRING_BUILDER</a>.<span title="(x$1: Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.ConstructorInfo">GetConstructor</span>(<span title="object ch.epfl.lamp.compiler.msil.Type">MsilType</span>.<span title="Array[ch.epfl.lamp.compiler.msil.Type]">EmptyTypes</span>)
    <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.MethodInfo" id="288441">MSTRING_BUILDER_TOSTRING</a> = <a href="#288437" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MSTRING_BUILDER</a>.<span title="(x$1: java.lang.String,x$2: Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.MethodInfo">GetMethod</span>(<span title="java.lang.String(&quot;ToString&quot;)" class="string">&quot;ToString&quot;</span>,
                                                             <span title="object ch.epfl.lamp.compiler.msil.Type">MsilType</span>.<span title="Array[ch.epfl.lamp.compiler.msil.Type]">EmptyTypes</span>)

    <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.MethodInfo" id="288443">TYPE_FROM_HANDLE</a> =
      <a href="../../symtab/SymbolLoaders.scala.html#109564" title="object GenMSIL.this.global.loaders.clrTypes">clrTypes</a>.<a href="../../symtab/clr/CLRTypes.scala.html#288359" title="(name: String)ch.epfl.lamp.compiler.msil.Type">getType</a>(<span title="java.lang.String(&quot;System.Type&quot;)" class="string">&quot;System.Type&quot;</span>).<span title="(x$1: java.lang.String,x$2: Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.MethodInfo">GetMethod</span>(<span title="java.lang.String(&quot;GetTypeFromHandle&quot;)" class="string">&quot;GetTypeFromHandle&quot;</span>, <span title="(xs: ch.epfl.lamp.compiler.msil.Type*)(implicit evidence$2: scala.reflect.ClassManifest[ch.epfl.lamp.compiler.msil.Type])Array[ch.epfl.lamp.compiler.msil.Type]">Array</span><span title="(clazz: Class[_])scala.reflect.ClassManifest[ch.epfl.lamp.compiler.msil.Type]">(</span><a href="../../symtab/SymbolLoaders.scala.html#109564" title="object GenMSIL.this.global.loaders.clrTypes">clrTypes</a>.<a href="../../symtab/clr/CLRTypes.scala.html#288359" title="(name: String)ch.epfl.lamp.compiler.msil.Type">getType</a>(<span title="java.lang.String(&quot;System.RuntimeTypeHandle&quot;)" class="string">&quot;System.RuntimeTypeHandle&quot;</span>)))

    <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.Type" id="288445">INT_PTR</a> = <a href="../../symtab/SymbolLoaders.scala.html#109564" title="object GenMSIL.this.global.loaders.clrTypes">clrTypes</a>.<a href="../../symtab/clr/CLRTypes.scala.html#288359" title="(name: String)ch.epfl.lamp.compiler.msil.Type">getType</a>(<span title="java.lang.String(&quot;System.IntPtr&quot;)" class="string">&quot;System.IntPtr&quot;</span>)

    <span class="keyword">val</span> <a title="GenMSIL.this.global.Symbol" id="288447">JOBJECT</a> = <a href="../../symtab/Definitions.scala.html#26638" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28453" title="=&gt; GenMSIL.this.global.Symbol">ObjectClass</a>
    <span class="keyword">val</span> <a title="GenMSIL.this.global.Symbol" id="288449">JSTRING</a> = <a href="../../symtab/Definitions.scala.html#26638" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28519" title="=&gt; GenMSIL.this.global.Symbol">StringClass</a>

    <span class="keyword">var</span> <a title="GenMSIL.this.global.Symbol" id="288452">JSTRING_SUBSTRING_INT_INT</a>: <a href="../../symtab/Symbols.scala.html#26286" title="GenMSIL.this.global.Symbol">Symbol</a> = _

    <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.Type" id="288454">SystemConvert</a> = <a href="../../symtab/SymbolLoaders.scala.html#109564" title="object GenMSIL.this.global.loaders.clrTypes">clrTypes</a>.<a href="../../symtab/clr/CLRTypes.scala.html#288359" title="(name: String)ch.epfl.lamp.compiler.msil.Type">getType</a>(<span title="java.lang.String(&quot;System.Convert&quot;)" class="string">&quot;System.Convert&quot;</span>)

    <span class="keyword">val</span> <a title="Array[ch.epfl.lamp.compiler.msil.Type]" id="288456">objParam</a> = <span title="(xs: ch.epfl.lamp.compiler.msil.Type*)(implicit evidence$2: scala.reflect.ClassManifest[ch.epfl.lamp.compiler.msil.Type])Array[ch.epfl.lamp.compiler.msil.Type]">Array</span><span title="(clazz: Class[_])scala.reflect.ClassManifest[ch.epfl.lamp.compiler.msil.Type]">(</span><a href="../../symtab/clr/CLRTypes.scala.html#288318" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MOBJECT</a>)

//     val toBool:   MethodInfo = SystemConvert.GetMethod(&quot;ToBoolean&quot;, objParam)
    <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.MethodInfo" id="288458">toByte</a>:   <span title="ch.epfl.lamp.compiler.msil.MethodInfo">MethodInfo</span> = <a href="#288454" title="=&gt; ch.epfl.lamp.compiler.msil.Type">SystemConvert</a>.<span title="(x$1: java.lang.String,x$2: Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.MethodInfo">GetMethod</span>(<span title="java.lang.String(&quot;ToByte&quot;)" class="string">&quot;ToByte&quot;</span>, <a href="#288456" title="=&gt; Array[ch.epfl.lamp.compiler.msil.Type]">objParam</a>)
    <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.MethodInfo" id="288460">toShort</a>:  <span title="ch.epfl.lamp.compiler.msil.MethodInfo">MethodInfo</span> = <a href="#288454" title="=&gt; ch.epfl.lamp.compiler.msil.Type">SystemConvert</a>.<span title="(x$1: java.lang.String,x$2: Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.MethodInfo">GetMethod</span>(<span title="java.lang.String(&quot;ToInt16&quot;)" class="string">&quot;ToInt16&quot;</span>, <a href="#288456" title="=&gt; Array[ch.epfl.lamp.compiler.msil.Type]">objParam</a>)
    <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.MethodInfo" id="288462">toChar</a>:   <span title="ch.epfl.lamp.compiler.msil.MethodInfo">MethodInfo</span> = <a href="#288454" title="=&gt; ch.epfl.lamp.compiler.msil.Type">SystemConvert</a>.<span title="(x$1: java.lang.String,x$2: Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.MethodInfo">GetMethod</span>(<span title="java.lang.String(&quot;ToChar&quot;)" class="string">&quot;ToChar&quot;</span>, <a href="#288456" title="=&gt; Array[ch.epfl.lamp.compiler.msil.Type]">objParam</a>)
    <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.MethodInfo" id="288464">toInt</a>:    <span title="ch.epfl.lamp.compiler.msil.MethodInfo">MethodInfo</span> = <a href="#288454" title="=&gt; ch.epfl.lamp.compiler.msil.Type">SystemConvert</a>.<span title="(x$1: java.lang.String,x$2: Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.MethodInfo">GetMethod</span>(<span title="java.lang.String(&quot;ToInt32&quot;)" class="string">&quot;ToInt32&quot;</span>, <a href="#288456" title="=&gt; Array[ch.epfl.lamp.compiler.msil.Type]">objParam</a>)
    <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.MethodInfo" id="288466">toLong</a>:   <span title="ch.epfl.lamp.compiler.msil.MethodInfo">MethodInfo</span> = <a href="#288454" title="=&gt; ch.epfl.lamp.compiler.msil.Type">SystemConvert</a>.<span title="(x$1: java.lang.String,x$2: Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.MethodInfo">GetMethod</span>(<span title="java.lang.String(&quot;ToInt64&quot;)" class="string">&quot;ToInt64&quot;</span>, <a href="#288456" title="=&gt; Array[ch.epfl.lamp.compiler.msil.Type]">objParam</a>)
    <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.MethodInfo" id="288468">toFloat</a>:  <span title="ch.epfl.lamp.compiler.msil.MethodInfo">MethodInfo</span> = <a href="#288454" title="=&gt; ch.epfl.lamp.compiler.msil.Type">SystemConvert</a>.<span title="(x$1: java.lang.String,x$2: Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.MethodInfo">GetMethod</span>(<span title="java.lang.String(&quot;ToSingle&quot;)" class="string">&quot;ToSingle&quot;</span>, <a href="#288456" title="=&gt; Array[ch.epfl.lamp.compiler.msil.Type]">objParam</a>)
    <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.MethodInfo" id="288470">toDouble</a>: <span title="ch.epfl.lamp.compiler.msil.MethodInfo">MethodInfo</span> = <a href="#288454" title="=&gt; ch.epfl.lamp.compiler.msil.Type">SystemConvert</a>.<span title="(x$1: java.lang.String,x$2: Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.MethodInfo">GetMethod</span>(<span title="java.lang.String(&quot;ToDouble&quot;)" class="string">&quot;ToDouble&quot;</span>, <a href="#288456" title="=&gt; Array[ch.epfl.lamp.compiler.msil.Type]">objParam</a>)

    //val boxedUnit: FieldInfo = msilType(definitions.BoxedUnitModule.info).GetField(&quot;UNIT&quot;)
    <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.FieldInfo" id="288472">boxedUnit</a>: <span title="ch.epfl.lamp.compiler.msil.FieldInfo">FieldInfo</span> = <a href="../../symtab/clr/CLRTypes.scala.html#288351" title="(key: GenMSIL.this.global.loaders.clrTypes.global.Symbol)ch.epfl.lamp.compiler.msil.FieldInfo">fields</a>(<a href="../../symtab/Definitions.scala.html#26638" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28745" title="=&gt; GenMSIL.this.global.Symbol">BoxedUnit_UNIT</a>.<span title="[T0]T0">asInstanceOf</span><span title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">[</span>clrTypes.global.<a href="../../symtab/Symbols.scala.html#26286" title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">Symbol</a>])

    // Scala attributes
    // symtab.Definitions -&gt; object (singleton..)
    <span class="keyword">val</span> <a title="GenMSIL.this.global.Type" id="288474">SerializableAttr</a> = <a href="../../symtab/Definitions.scala.html#26638" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28746" title="=&gt; GenMSIL.this.global.Symbol">SerializableAttr</a>.<a href="../../symtab/Symbols.scala.html#27162" title="=&gt; GenMSIL.this.global.Type">tpe</a>
    <span class="keyword">val</span> <a title="GenMSIL.this.global.Type" id="288476">CloneableAttr</a>    = <a href="../../symtab/Definitions.scala.html#26638" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28762" title="(fullname: GenMSIL.this.global.Name)GenMSIL.this.global.Symbol">getClass</a>(<a href="../../symtab/Names.scala.html#26213" title="implicit scala.tools.nsc.symtab.Names.view : (s: String)GenMSIL.this.global.Name" class="string">&quot;scala.cloneable&quot;</a>).<a href="../../symtab/Symbols.scala.html#27162" title="=&gt; GenMSIL.this.global.Type">tpe</a>
    <span class="keyword">val</span> <a title="GenMSIL.this.global.Type" id="288478">TransientAtt</a>     = <a href="../../symtab/Definitions.scala.html#26638" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28762" title="(fullname: GenMSIL.this.global.Name)GenMSIL.this.global.Symbol">getClass</a>(<a href="../../symtab/Names.scala.html#26213" title="implicit scala.tools.nsc.symtab.Names.view : (s: String)GenMSIL.this.global.Name" class="string">&quot;scala.transient&quot;</a>).<a href="../../symtab/Symbols.scala.html#27162" title="=&gt; GenMSIL.this.global.Type">tpe</a>
    // remoting: the architectures are too different, no mapping (no portable code
    // possible)

    // java instance methods that are mapped to static methods in .net
    // these will need to be called with OpCodes.Call (not Callvirt)
    <span class="keyword">val</span> <a title="scala.collection.mutable.HashSet[GenMSIL.this.global.Symbol]" id="288480">dynToStatMapped</a>: <span title="scala.collection.mutable.HashSet[GenMSIL.this.global.Symbol]">HashSet</span>[Symbol] = <span title="scala.collection.mutable.HashSet[GenMSIL.this.global.Symbol]" class="keyword">new</span> <span title="scala.collection.mutable.HashSet[GenMSIL.this.global.Symbol]">HashSet</span>()

    <a href="#288482" title="()Unit">initMappings</a>()
    // ********************************************************************
    // Create the mappings
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="()Unit" id="288482">initMappings</a>() {
      <a href="#288606" title="(sym: GenMSIL.this.global.Symbol,mType: ch.epfl.lamp.compiler.msil.Type)Unit">mapType</a>(<a href="../../symtab/Definitions.scala.html#26638" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28447" title="=&gt; GenMSIL.this.global.Symbol">AnyClass</a>, <a href="../../symtab/clr/CLRTypes.scala.html#288318" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MOBJECT</a>)
      <a href="#288606" title="(sym: GenMSIL.this.global.Symbol,mType: ch.epfl.lamp.compiler.msil.Type)Unit">mapType</a>(<a href="../../symtab/Definitions.scala.html#26638" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28451" title="=&gt; GenMSIL.this.global.Symbol">AnyRefClass</a>, <a href="../../symtab/clr/CLRTypes.scala.html#288318" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MOBJECT</a>)
      //mapType(definitions.NullClass, clrTypes.getType(&quot;scala.AllRef$&quot;))
      //mapType(definitions.NothingClass, clrTypes.getType(&quot;scala.All$&quot;))
      // FIXME: for some reason the upper two lines map to null
      <a href="#288606" title="(sym: GenMSIL.this.global.Symbol,mType: ch.epfl.lamp.compiler.msil.Type)Unit">mapType</a>(<a href="../../symtab/Definitions.scala.html#26638" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28455" title="=&gt; GenMSIL.this.global.Symbol">NullClass</a>, <a href="#288423" title="=&gt; ch.epfl.lamp.compiler.msil.Type">EXCEPTION</a>)
      <a href="#288606" title="(sym: GenMSIL.this.global.Symbol,mType: ch.epfl.lamp.compiler.msil.Type)Unit">mapType</a>(<a href="../../symtab/Definitions.scala.html#26638" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28457" title="=&gt; GenMSIL.this.global.Symbol">NothingClass</a>, <a href="#288423" title="=&gt; ch.epfl.lamp.compiler.msil.Type">EXCEPTION</a>)

      <span class="keyword">val</span> <a title="Array[GenMSIL.this.global.Type]" id="290067">jEmpty</a> = <span title="Array[GenMSIL.this.global.Type]" class="keyword">new</span> <span title="Array[GenMSIL.this.global.Type]">Array</span>[Type](<span title="Int(0)" class="int">0</span>)
      <span class="keyword">val</span> <a title="Array[GenMSIL.this.global.Type]" id="290068">jString1</a> = <span title="(xs: GenMSIL.this.global.Type*)(implicit evidence$2: scala.reflect.ClassManifest[GenMSIL.this.global.Type])Array[GenMSIL.this.global.Type]">Array</span><a href="../../SubComponent.scala.html#39853" title="(prefix: scala.reflect.OptManifest[_],clazz: Class[_],args: scala.reflect.OptManifest[_]*)scala.reflect.ClassManifest[GenMSIL.this.global.Type]">(</a><a href="#288449" title="=&gt; GenMSIL.this.global.Symbol">JSTRING</a>.<a href="../../symtab/Symbols.scala.html#27162" title="=&gt; GenMSIL.this.global.Type">tpe</a>)
      <span class="keyword">val</span> <a title="Array[GenMSIL.this.global.Type]" id="290069">jInt1</a> = <span title="(xs: GenMSIL.this.global.Type*)(implicit evidence$2: scala.reflect.ClassManifest[GenMSIL.this.global.Type])Array[GenMSIL.this.global.Type]">Array</span><a href="../../SubComponent.scala.html#39853" title="(prefix: scala.reflect.OptManifest[_],clazz: Class[_],args: scala.reflect.OptManifest[_]*)scala.reflect.ClassManifest[GenMSIL.this.global.Type]">(</a><a href="../../symtab/Definitions.scala.html#26638" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28471" title="=&gt; GenMSIL.this.global.Symbol">IntClass</a>.<a href="../../symtab/Symbols.scala.html#27162" title="=&gt; GenMSIL.this.global.Type">tpe</a>)
      <span class="keyword">val</span> <a title="Array[GenMSIL.this.global.Type]" id="290070">jInt2</a> = <span title="(xs: GenMSIL.this.global.Type*)(implicit evidence$2: scala.reflect.ClassManifest[GenMSIL.this.global.Type])Array[GenMSIL.this.global.Type]">Array</span><a href="../../SubComponent.scala.html#39853" title="(prefix: scala.reflect.OptManifest[_],clazz: Class[_],args: scala.reflect.OptManifest[_]*)scala.reflect.ClassManifest[GenMSIL.this.global.Type]">(</a><a href="../../symtab/Definitions.scala.html#26638" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28471" title="=&gt; GenMSIL.this.global.Symbol">IntClass</a>.<a href="../../symtab/Symbols.scala.html#27162" title="=&gt; GenMSIL.this.global.Type">tpe</a>, <a href="../../symtab/Definitions.scala.html#26638" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28471" title="=&gt; GenMSIL.this.global.Symbol">IntClass</a>.<a href="../../symtab/Symbols.scala.html#27162" title="=&gt; GenMSIL.this.global.Type">tpe</a>)
      <span class="keyword">val</span> <a title="Array[GenMSIL.this.global.Type]" id="290071">jLong1</a> = <span title="(xs: GenMSIL.this.global.Type*)(implicit evidence$2: scala.reflect.ClassManifest[GenMSIL.this.global.Type])Array[GenMSIL.this.global.Type]">Array</span><a href="../../SubComponent.scala.html#39853" title="(prefix: scala.reflect.OptManifest[_],clazz: Class[_],args: scala.reflect.OptManifest[_]*)scala.reflect.ClassManifest[GenMSIL.this.global.Type]">(</a><a href="../../symtab/Definitions.scala.html#26638" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28473" title="=&gt; GenMSIL.this.global.Symbol">LongClass</a>.<a href="../../symtab/Symbols.scala.html#27162" title="=&gt; GenMSIL.this.global.Type">tpe</a>)
      <span class="keyword">val</span> <a title="Array[GenMSIL.this.global.Type]" id="290072">jStringInt</a> = <span title="(xs: GenMSIL.this.global.Type*)(implicit evidence$2: scala.reflect.ClassManifest[GenMSIL.this.global.Type])Array[GenMSIL.this.global.Type]">Array</span><a href="../../SubComponent.scala.html#39853" title="(prefix: scala.reflect.OptManifest[_],clazz: Class[_],args: scala.reflect.OptManifest[_]*)scala.reflect.ClassManifest[GenMSIL.this.global.Type]">(</a><a href="#288449" title="=&gt; GenMSIL.this.global.Symbol">JSTRING</a>.<a href="../../symtab/Symbols.scala.html#27162" title="=&gt; GenMSIL.this.global.Type">tpe</a>, <a href="../../symtab/Definitions.scala.html#26638" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28471" title="=&gt; GenMSIL.this.global.Symbol">IntClass</a>.<a href="../../symtab/Symbols.scala.html#27162" title="=&gt; GenMSIL.this.global.Type">tpe</a>)
      <span class="keyword">val</span> <a title="Array[GenMSIL.this.global.Type]" id="290073">jChar2</a> = <span title="(xs: GenMSIL.this.global.Type*)(implicit evidence$2: scala.reflect.ClassManifest[GenMSIL.this.global.Type])Array[GenMSIL.this.global.Type]">Array</span><a href="../../SubComponent.scala.html#39853" title="(prefix: scala.reflect.OptManifest[_],clazz: Class[_],args: scala.reflect.OptManifest[_]*)scala.reflect.ClassManifest[GenMSIL.this.global.Type]">(</a><a href="../../symtab/Definitions.scala.html#26638" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28469" title="=&gt; GenMSIL.this.global.Symbol">CharClass</a>.<a href="../../symtab/Symbols.scala.html#27162" title="=&gt; GenMSIL.this.global.Type">tpe</a>, <a href="../../symtab/Definitions.scala.html#26638" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28469" title="=&gt; GenMSIL.this.global.Symbol">CharClass</a>.<a href="../../symtab/Symbols.scala.html#27162" title="=&gt; GenMSIL.this.global.Type">tpe</a>)

      <span class="keyword">val</span> <a title="Array[ch.epfl.lamp.compiler.msil.Type]" id="290074">mObject1</a> = <span title="(xs: ch.epfl.lamp.compiler.msil.Type*)(implicit evidence$2: scala.reflect.ClassManifest[ch.epfl.lamp.compiler.msil.Type])Array[ch.epfl.lamp.compiler.msil.Type]">Array</span><span title="(clazz: Class[_])scala.reflect.ClassManifest[ch.epfl.lamp.compiler.msil.Type]">(</span><a href="../../symtab/clr/CLRTypes.scala.html#288318" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MOBJECT</a>)
      <span class="keyword">val</span> <a title="Array[ch.epfl.lamp.compiler.msil.Type]" id="290075">mString1</a> = <span title="(xs: ch.epfl.lamp.compiler.msil.Type*)(implicit evidence$2: scala.reflect.ClassManifest[ch.epfl.lamp.compiler.msil.Type])Array[ch.epfl.lamp.compiler.msil.Type]">Array</span><span title="(clazz: Class[_])scala.reflect.ClassManifest[ch.epfl.lamp.compiler.msil.Type]">(</span><a href="../../symtab/clr/CLRTypes.scala.html#288321" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MSTRING</a>)
      <span class="keyword">val</span> <a title="Array[ch.epfl.lamp.compiler.msil.Type]" id="290076">mString2</a> = <span title="(xs: ch.epfl.lamp.compiler.msil.Type*)(implicit evidence$2: scala.reflect.ClassManifest[ch.epfl.lamp.compiler.msil.Type])Array[ch.epfl.lamp.compiler.msil.Type]">Array</span><span title="(clazz: Class[_])scala.reflect.ClassManifest[ch.epfl.lamp.compiler.msil.Type]">(</span><a href="../../symtab/clr/CLRTypes.scala.html#288321" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MSTRING</a>, <a href="../../symtab/clr/CLRTypes.scala.html#288321" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MSTRING</a>)
      <span class="keyword">val</span> <a title="Array[ch.epfl.lamp.compiler.msil.Type]" id="290077">mChar1</a> = <span title="(xs: ch.epfl.lamp.compiler.msil.Type*)(implicit evidence$2: scala.reflect.ClassManifest[ch.epfl.lamp.compiler.msil.Type])Array[ch.epfl.lamp.compiler.msil.Type]">Array</span><span title="(clazz: Class[_])scala.reflect.ClassManifest[ch.epfl.lamp.compiler.msil.Type]">(</span><a href="../../symtab/clr/CLRTypes.scala.html#288285" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MCHAR</a>)
      <span class="keyword">val</span> <a title="Array[ch.epfl.lamp.compiler.msil.Type]" id="290078">mCharInt</a> = <span title="(xs: ch.epfl.lamp.compiler.msil.Type*)(implicit evidence$2: scala.reflect.ClassManifest[ch.epfl.lamp.compiler.msil.Type])Array[ch.epfl.lamp.compiler.msil.Type]">Array</span><span title="(clazz: Class[_])scala.reflect.ClassManifest[ch.epfl.lamp.compiler.msil.Type]">(</span><a href="../../symtab/clr/CLRTypes.scala.html#288285" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MCHAR</a>, <a href="../../symtab/clr/CLRTypes.scala.html#288288" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MINT</a>)

      <a href="#288452" title="(x$1: GenMSIL.this.global.Symbol)Unit">JSTRING_SUBSTRING_INT_INT</a> = <a href="#288635" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,paramTypes: Array[GenMSIL.this.global.Type])GenMSIL.this.global.Symbol">lookupMethod</a>(<a href="#288449" title="=&gt; GenMSIL.this.global.Symbol">JSTRING</a>, <a href="../../symtab/Names.scala.html#26213" title="implicit scala.tools.nsc.symtab.Names.view : (s: String)GenMSIL.this.global.Name" class="string">&quot;substring&quot;</a>, <a href="#290070" title="Array[GenMSIL.this.global.Type]">jInt2</a>)

      <a href="#288634" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,newClass: ch.epfl.lamp.compiler.msil.Type,newName: String)Unit">mapMethod</a>(<a href="#288447" title="=&gt; GenMSIL.this.global.Symbol">JOBJECT</a>, <a href="../../symtab/Names.scala.html#26213" title="implicit scala.tools.nsc.symtab.Names.view : (s: String)GenMSIL.this.global.Name" class="string">&quot;clone&quot;</a>, <a href="../../symtab/clr/CLRTypes.scala.html#288318" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MOBJECT</a>, <span title="java.lang.String(&quot;MemberwiseClone&quot;)" class="string">&quot;MemberwiseClone&quot;</span>)
      <a href="#288634" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,newClass: ch.epfl.lamp.compiler.msil.Type,newName: String)Unit">mapMethod</a>(<a href="#288447" title="=&gt; GenMSIL.this.global.Symbol">JOBJECT</a>, <a href="../../symtab/StdNames.scala.html#26690" title="object GenMSIL.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#30052" title="=&gt; GenMSIL.this.global.Name">equals_</a>, <a href="../../symtab/clr/CLRTypes.scala.html#288318" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MOBJECT</a>, <span title="java.lang.String(&quot;Equals&quot;)" class="string">&quot;Equals&quot;</span>)
      <a href="#288634" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,newClass: ch.epfl.lamp.compiler.msil.Type,newName: String)Unit">mapMethod</a>(<a href="#288447" title="=&gt; GenMSIL.this.global.Symbol">JOBJECT</a>, <a href="../../symtab/StdNames.scala.html#26690" title="object GenMSIL.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#30086" title="=&gt; GenMSIL.this.global.Name">hashCode_</a>, <a href="../../symtab/clr/CLRTypes.scala.html#288318" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MOBJECT</a>, <span title="java.lang.String(&quot;GetHashCode&quot;)" class="string">&quot;GetHashCode&quot;</span>)
      <a href="#288634" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,newClass: ch.epfl.lamp.compiler.msil.Type,newName: String)Unit">mapMethod</a>(<a href="#288447" title="=&gt; GenMSIL.this.global.Symbol">JOBJECT</a>, <a href="../../symtab/StdNames.scala.html#26690" title="object GenMSIL.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#30154" title="=&gt; GenMSIL.this.global.Name">toString_</a>, <a href="../../symtab/clr/CLRTypes.scala.html#288318" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MOBJECT</a>, <span title="java.lang.String(&quot;ToString&quot;)" class="string">&quot;ToString&quot;</span>)
      <a href="#288634" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,newClass: ch.epfl.lamp.compiler.msil.Type,newName: String)Unit">mapMethod</a>(<a href="#288447" title="=&gt; GenMSIL.this.global.Symbol">JOBJECT</a>, <a href="../../symtab/StdNames.scala.html#26690" title="object GenMSIL.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#30068" title="=&gt; GenMSIL.this.global.Name">finalize_</a>, <a href="../../symtab/clr/CLRTypes.scala.html#288318" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MOBJECT</a>, <span title="java.lang.String(&quot;Finalize&quot;)" class="string">&quot;Finalize&quot;</span>)
      <a href="#288632" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,paramTypes: Array[GenMSIL.this.global.Type],newClass: ch.epfl.lamp.compiler.msil.Type,newName: String,newParamTypes: Array[ch.epfl.lamp.compiler.msil.Type])Unit">mapMethod</a>(<a href="#288447" title="=&gt; GenMSIL.this.global.Symbol">JOBJECT</a>, <a href="../../symtab/StdNames.scala.html#26690" title="object GenMSIL.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#30176" title="=&gt; GenMSIL.this.global.Name">wait_</a>, <a href="#290067" title="Array[GenMSIL.this.global.Type]">jEmpty</a>, <a href="#288431" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MMONITOR</a>, <span title="java.lang.String(&quot;Wait&quot;)" class="string">&quot;Wait&quot;</span>, <a href="#290074" title="Array[ch.epfl.lamp.compiler.msil.Type]">mObject1</a>)
      <a href="#288632" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,paramTypes: Array[GenMSIL.this.global.Type],newClass: ch.epfl.lamp.compiler.msil.Type,newName: String,newParamTypes: Array[ch.epfl.lamp.compiler.msil.Type])Unit">mapMethod</a>(<a href="#288447" title="=&gt; GenMSIL.this.global.Symbol">JOBJECT</a>, <a href="../../symtab/StdNames.scala.html#26690" title="object GenMSIL.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#30176" title="=&gt; GenMSIL.this.global.Name">wait_</a>, <a href="#290071" title="Array[GenMSIL.this.global.Type]">jLong1</a>, <a href="#288431" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MMONITOR</a>, <span title="java.lang.String(&quot;Wait&quot;)" class="string">&quot;Wait&quot;</span>, <span title="(xs: ch.epfl.lamp.compiler.msil.Type*)(implicit evidence$2: scala.reflect.ClassManifest[ch.epfl.lamp.compiler.msil.Type])Array[ch.epfl.lamp.compiler.msil.Type]">Array</span><span title="(clazz: Class[_])scala.reflect.ClassManifest[ch.epfl.lamp.compiler.msil.Type]">(</span><a href="../../symtab/clr/CLRTypes.scala.html#288318" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MOBJECT</a>, <a href="../../symtab/clr/CLRTypes.scala.html#288288" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MINT</a>))
      <a href="#288632" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,paramTypes: Array[GenMSIL.this.global.Type],newClass: ch.epfl.lamp.compiler.msil.Type,newName: String,newParamTypes: Array[ch.epfl.lamp.compiler.msil.Type])Unit">mapMethod</a>(<a href="#288447" title="=&gt; GenMSIL.this.global.Symbol">JOBJECT</a>, <a href="../../symtab/StdNames.scala.html#26690" title="object GenMSIL.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#30120" title="=&gt; GenMSIL.this.global.Name">notify_</a>, <a href="#290067" title="Array[GenMSIL.this.global.Type]">jEmpty</a>, <a href="#288431" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MMONITOR</a>, <span title="java.lang.String(&quot;Pulse&quot;)" class="string">&quot;Pulse&quot;</span>, <a href="#290074" title="Array[ch.epfl.lamp.compiler.msil.Type]">mObject1</a>)
      <a href="#288632" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,paramTypes: Array[GenMSIL.this.global.Type],newClass: ch.epfl.lamp.compiler.msil.Type,newName: String,newParamTypes: Array[ch.epfl.lamp.compiler.msil.Type])Unit">mapMethod</a>(<a href="#288447" title="=&gt; GenMSIL.this.global.Symbol">JOBJECT</a>, <a href="../../symtab/StdNames.scala.html#26690" title="object GenMSIL.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#30122" title="=&gt; GenMSIL.this.global.Name">notifyAll_</a>, <a href="#290067" title="Array[GenMSIL.this.global.Type]">jEmpty</a>, <a href="#288431" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MMONITOR</a>, <span title="java.lang.String(&quot;PulseAll&quot;)" class="string">&quot;PulseAll&quot;</span>, <a href="#290074" title="Array[ch.epfl.lamp.compiler.msil.Type]">mObject1</a>)

      <a href="#288634" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,newClass: ch.epfl.lamp.compiler.msil.Type,newName: String)Unit">mapMethod</a>(<a href="#288449" title="=&gt; GenMSIL.this.global.Symbol">JSTRING</a>, <a href="../../symtab/Names.scala.html#26213" title="implicit scala.tools.nsc.symtab.Names.view : (s: String)GenMSIL.this.global.Name" class="string">&quot;compareTo&quot;</a>,<a href="../../symtab/clr/CLRTypes.scala.html#288321" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MSTRING</a>, <span title="java.lang.String(&quot;CompareTo&quot;)" class="string">&quot;CompareTo&quot;</span>)
      <a href="#288634" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,newClass: ch.epfl.lamp.compiler.msil.Type,newName: String)Unit">mapMethod</a>(<a href="#288449" title="=&gt; GenMSIL.this.global.Symbol">JSTRING</a>, <a href="../../symtab/Names.scala.html#26213" title="implicit scala.tools.nsc.symtab.Names.view : (s: String)GenMSIL.this.global.Name" class="string">&quot;length&quot;</a>, <a href="../../symtab/clr/CLRTypes.scala.html#288321" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MSTRING</a>, <span title="java.lang.String(&quot;get_Length&quot;)" class="string">&quot;get_Length&quot;</span>)
      <a href="#288634" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,newClass: ch.epfl.lamp.compiler.msil.Type,newName: String)Unit">mapMethod</a>(<a href="#288449" title="=&gt; GenMSIL.this.global.Symbol">JSTRING</a>, <a href="../../symtab/Names.scala.html#26213" title="implicit scala.tools.nsc.symtab.Names.view : (s: String)GenMSIL.this.global.Name" class="string">&quot;charAt&quot;</a>, <a href="../../symtab/clr/CLRTypes.scala.html#288321" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MSTRING</a>, <span title="java.lang.String(&quot;get_Chars&quot;)" class="string">&quot;get_Chars&quot;</span>)

      <a href="#288632" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,paramTypes: Array[GenMSIL.this.global.Type],newClass: ch.epfl.lamp.compiler.msil.Type,newName: String,newParamTypes: Array[ch.epfl.lamp.compiler.msil.Type])Unit">mapMethod</a>(<a href="#288449" title="=&gt; GenMSIL.this.global.Symbol">JSTRING</a>, <a href="../../symtab/Names.scala.html#26213" title="implicit scala.tools.nsc.symtab.Names.view : (s: String)GenMSIL.this.global.Name" class="string">&quot;concat&quot;</a>, <a href="#290068" title="Array[GenMSIL.this.global.Type]">jString1</a>, <a href="../../symtab/clr/CLRTypes.scala.html#288321" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MSTRING</a>, <span title="java.lang.String(&quot;Concat&quot;)" class="string">&quot;Concat&quot;</span>, <a href="#290076" title="Array[ch.epfl.lamp.compiler.msil.Type]">mString2</a>)
      <a href="#288632" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,paramTypes: Array[GenMSIL.this.global.Type],newClass: ch.epfl.lamp.compiler.msil.Type,newName: String,newParamTypes: Array[ch.epfl.lamp.compiler.msil.Type])Unit">mapMethod</a>(<a href="#288449" title="=&gt; GenMSIL.this.global.Symbol">JSTRING</a>, <a href="../../symtab/Names.scala.html#26213" title="implicit scala.tools.nsc.symtab.Names.view : (s: String)GenMSIL.this.global.Name" class="string">&quot;indexOf&quot;</a>, <a href="#290069" title="Array[GenMSIL.this.global.Type]">jInt1</a>, <a href="../../symtab/clr/CLRTypes.scala.html#288321" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MSTRING</a>, <span title="java.lang.String(&quot;IndexOf&quot;)" class="string">&quot;IndexOf&quot;</span>, <a href="#290077" title="Array[ch.epfl.lamp.compiler.msil.Type]">mChar1</a>)
      <a href="#288632" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,paramTypes: Array[GenMSIL.this.global.Type],newClass: ch.epfl.lamp.compiler.msil.Type,newName: String,newParamTypes: Array[ch.epfl.lamp.compiler.msil.Type])Unit">mapMethod</a>(<a href="#288449" title="=&gt; GenMSIL.this.global.Symbol">JSTRING</a>, <a href="../../symtab/Names.scala.html#26213" title="implicit scala.tools.nsc.symtab.Names.view : (s: String)GenMSIL.this.global.Name" class="string">&quot;indexOf&quot;</a>, <a href="#290070" title="Array[GenMSIL.this.global.Type]">jInt2</a>, <a href="../../symtab/clr/CLRTypes.scala.html#288321" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MSTRING</a>, <span title="java.lang.String(&quot;IndexOf&quot;)" class="string">&quot;IndexOf&quot;</span>, <a href="#290078" title="Array[ch.epfl.lamp.compiler.msil.Type]">mCharInt</a>)

      <a href="#288633" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,paramTypes: Array[GenMSIL.this.global.Type],newClass: ch.epfl.lamp.compiler.msil.Type,newName: String)Unit">mapMethod</a>(<a href="#288449" title="=&gt; GenMSIL.this.global.Symbol">JSTRING</a>, <a href="../../symtab/Names.scala.html#26213" title="implicit scala.tools.nsc.symtab.Names.view : (s: String)GenMSIL.this.global.Name" class="string">&quot;indexOf&quot;</a>, <a href="#290068" title="Array[GenMSIL.this.global.Type]">jString1</a>, <a href="../../symtab/clr/CLRTypes.scala.html#288321" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MSTRING</a>, <span title="java.lang.String(&quot;IndexOf&quot;)" class="string">&quot;IndexOf&quot;</span>)
      <a href="#288633" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,paramTypes: Array[GenMSIL.this.global.Type],newClass: ch.epfl.lamp.compiler.msil.Type,newName: String)Unit">mapMethod</a>(<a href="#288449" title="=&gt; GenMSIL.this.global.Symbol">JSTRING</a>, <a href="../../symtab/Names.scala.html#26213" title="implicit scala.tools.nsc.symtab.Names.view : (s: String)GenMSIL.this.global.Name" class="string">&quot;indexOf&quot;</a>, <a href="#290072" title="Array[GenMSIL.this.global.Type]">jStringInt</a>, <a href="../../symtab/clr/CLRTypes.scala.html#288321" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MSTRING</a>, <span title="java.lang.String(&quot;IndexOf&quot;)" class="string">&quot;IndexOf&quot;</span>)
      <a href="#288632" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,paramTypes: Array[GenMSIL.this.global.Type],newClass: ch.epfl.lamp.compiler.msil.Type,newName: String,newParamTypes: Array[ch.epfl.lamp.compiler.msil.Type])Unit">mapMethod</a>(<a href="#288449" title="=&gt; GenMSIL.this.global.Symbol">JSTRING</a>, <a href="../../symtab/Names.scala.html#26213" title="implicit scala.tools.nsc.symtab.Names.view : (s: String)GenMSIL.this.global.Name" class="string">&quot;lastIndexOf&quot;</a>, <a href="#290069" title="Array[GenMSIL.this.global.Type]">jInt1</a>, <a href="../../symtab/clr/CLRTypes.scala.html#288321" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MSTRING</a>, <span title="java.lang.String(&quot;LastIndexOf&quot;)" class="string">&quot;LastIndexOf&quot;</span>, <a href="#290077" title="Array[ch.epfl.lamp.compiler.msil.Type]">mChar1</a>)
      <a href="#288632" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,paramTypes: Array[GenMSIL.this.global.Type],newClass: ch.epfl.lamp.compiler.msil.Type,newName: String,newParamTypes: Array[ch.epfl.lamp.compiler.msil.Type])Unit">mapMethod</a>(<a href="#288449" title="=&gt; GenMSIL.this.global.Symbol">JSTRING</a>, <a href="../../symtab/Names.scala.html#26213" title="implicit scala.tools.nsc.symtab.Names.view : (s: String)GenMSIL.this.global.Name" class="string">&quot;lastIndexOf&quot;</a>, <a href="#290070" title="Array[GenMSIL.this.global.Type]">jInt2</a>, <a href="../../symtab/clr/CLRTypes.scala.html#288321" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MSTRING</a>, <span title="java.lang.String(&quot;LastIndexOf&quot;)" class="string">&quot;LastIndexOf&quot;</span>, <a href="#290078" title="Array[ch.epfl.lamp.compiler.msil.Type]">mCharInt</a>)
      <a href="#288633" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,paramTypes: Array[GenMSIL.this.global.Type],newClass: ch.epfl.lamp.compiler.msil.Type,newName: String)Unit">mapMethod</a>(<a href="#288449" title="=&gt; GenMSIL.this.global.Symbol">JSTRING</a>, <a href="../../symtab/Names.scala.html#26213" title="implicit scala.tools.nsc.symtab.Names.view : (s: String)GenMSIL.this.global.Name" class="string">&quot;lastIndexOf&quot;</a>, <a href="#290068" title="Array[GenMSIL.this.global.Type]">jString1</a>, <a href="../../symtab/clr/CLRTypes.scala.html#288321" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MSTRING</a>, <span title="java.lang.String(&quot;LastIndexOf&quot;)" class="string">&quot;LastIndexOf&quot;</span>)
      <a href="#288633" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,paramTypes: Array[GenMSIL.this.global.Type],newClass: ch.epfl.lamp.compiler.msil.Type,newName: String)Unit">mapMethod</a>(<a href="#288449" title="=&gt; GenMSIL.this.global.Symbol">JSTRING</a>, <a href="../../symtab/Names.scala.html#26213" title="implicit scala.tools.nsc.symtab.Names.view : (s: String)GenMSIL.this.global.Name" class="string">&quot;lastIndexOf&quot;</a>, <a href="#290072" title="Array[GenMSIL.this.global.Type]">jStringInt</a>, <a href="../../symtab/clr/CLRTypes.scala.html#288321" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MSTRING</a>, <span title="java.lang.String(&quot;LastIndexOf&quot;)" class="string">&quot;LastIndexOf&quot;</span>)

      <a href="#288633" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,paramTypes: Array[GenMSIL.this.global.Type],newClass: ch.epfl.lamp.compiler.msil.Type,newName: String)Unit">mapMethod</a>(<a href="#288449" title="=&gt; GenMSIL.this.global.Symbol">JSTRING</a>, <a href="../../symtab/Names.scala.html#26213" title="implicit scala.tools.nsc.symtab.Names.view : (s: String)GenMSIL.this.global.Name" class="string">&quot;toLowerCase&quot;</a>, <a href="#290067" title="Array[GenMSIL.this.global.Type]">jEmpty</a>, <a href="../../symtab/clr/CLRTypes.scala.html#288321" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MSTRING</a>, <span title="java.lang.String(&quot;ToLower&quot;)" class="string">&quot;ToLower&quot;</span>)
      <a href="#288633" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,paramTypes: Array[GenMSIL.this.global.Type],newClass: ch.epfl.lamp.compiler.msil.Type,newName: String)Unit">mapMethod</a>(<a href="#288449" title="=&gt; GenMSIL.this.global.Symbol">JSTRING</a>, <a href="../../symtab/Names.scala.html#26213" title="implicit scala.tools.nsc.symtab.Names.view : (s: String)GenMSIL.this.global.Name" class="string">&quot;toUpperCase&quot;</a>, <a href="#290067" title="Array[GenMSIL.this.global.Type]">jEmpty</a>, <a href="../../symtab/clr/CLRTypes.scala.html#288321" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MSTRING</a>, <span title="java.lang.String(&quot;ToUpper&quot;)" class="string">&quot;ToUpper&quot;</span>)
      <a href="#288633" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,paramTypes: Array[GenMSIL.this.global.Type],newClass: ch.epfl.lamp.compiler.msil.Type,newName: String)Unit">mapMethod</a>(<a href="#288449" title="=&gt; GenMSIL.this.global.Symbol">JSTRING</a>, <a href="../../symtab/Names.scala.html#26213" title="implicit scala.tools.nsc.symtab.Names.view : (s: String)GenMSIL.this.global.Name" class="string">&quot;startsWith&quot;</a>, <a href="#290068" title="Array[GenMSIL.this.global.Type]">jString1</a>, <a href="../../symtab/clr/CLRTypes.scala.html#288321" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MSTRING</a>, <span title="java.lang.String(&quot;StartsWith&quot;)" class="string">&quot;StartsWith&quot;</span>)
      <a href="#288633" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,paramTypes: Array[GenMSIL.this.global.Type],newClass: ch.epfl.lamp.compiler.msil.Type,newName: String)Unit">mapMethod</a>(<a href="#288449" title="=&gt; GenMSIL.this.global.Symbol">JSTRING</a>, <a href="../../symtab/Names.scala.html#26213" title="implicit scala.tools.nsc.symtab.Names.view : (s: String)GenMSIL.this.global.Name" class="string">&quot;endsWith&quot;</a>, <a href="#290068" title="Array[GenMSIL.this.global.Type]">jString1</a>, <a href="../../symtab/clr/CLRTypes.scala.html#288321" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MSTRING</a>, <span title="java.lang.String(&quot;EndsWith&quot;)" class="string">&quot;EndsWith&quot;</span>)
      <a href="#288633" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,paramTypes: Array[GenMSIL.this.global.Type],newClass: ch.epfl.lamp.compiler.msil.Type,newName: String)Unit">mapMethod</a>(<a href="#288449" title="=&gt; GenMSIL.this.global.Symbol">JSTRING</a>, <a href="../../symtab/Names.scala.html#26213" title="implicit scala.tools.nsc.symtab.Names.view : (s: String)GenMSIL.this.global.Name" class="string">&quot;substring&quot;</a>, <a href="#290069" title="Array[GenMSIL.this.global.Type]">jInt1</a>, <a href="../../symtab/clr/CLRTypes.scala.html#288321" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MSTRING</a>, <span title="java.lang.String(&quot;Substring&quot;)" class="string">&quot;Substring&quot;</span>)
      <a href="#288633" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,paramTypes: Array[GenMSIL.this.global.Type],newClass: ch.epfl.lamp.compiler.msil.Type,newName: String)Unit">mapMethod</a>(<a href="#288449" title="=&gt; GenMSIL.this.global.Symbol">JSTRING</a>, <a href="../../symtab/Names.scala.html#26213" title="implicit scala.tools.nsc.symtab.Names.view : (s: String)GenMSIL.this.global.Name" class="string">&quot;substring&quot;</a>, <a href="#290070" title="Array[GenMSIL.this.global.Type]">jInt2</a>, <a href="../../symtab/clr/CLRTypes.scala.html#288321" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MSTRING</a>, <span title="java.lang.String(&quot;Substring&quot;)" class="string">&quot;Substring&quot;</span>)
      <a href="#288633" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,paramTypes: Array[GenMSIL.this.global.Type],newClass: ch.epfl.lamp.compiler.msil.Type,newName: String)Unit">mapMethod</a>(<a href="#288449" title="=&gt; GenMSIL.this.global.Symbol">JSTRING</a>, <a href="../../symtab/Names.scala.html#26213" title="implicit scala.tools.nsc.symtab.Names.view : (s: String)GenMSIL.this.global.Name" class="string">&quot;trim&quot;</a>, <a href="#290067" title="Array[GenMSIL.this.global.Type]">jEmpty</a>, <a href="../../symtab/clr/CLRTypes.scala.html#288321" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MSTRING</a>, <span title="java.lang.String(&quot;Trim&quot;)" class="string">&quot;Trim&quot;</span>)
      <a href="#288632" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,paramTypes: Array[GenMSIL.this.global.Type],newClass: ch.epfl.lamp.compiler.msil.Type,newName: String,newParamTypes: Array[ch.epfl.lamp.compiler.msil.Type])Unit">mapMethod</a>(<a href="#288449" title="=&gt; GenMSIL.this.global.Symbol">JSTRING</a>, <a href="../../symtab/Names.scala.html#26213" title="implicit scala.tools.nsc.symtab.Names.view : (s: String)GenMSIL.this.global.Name" class="string">&quot;intern&quot;</a>, <a href="#290067" title="Array[GenMSIL.this.global.Type]">jEmpty</a>, <a href="../../symtab/clr/CLRTypes.scala.html#288321" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MSTRING</a>, <span title="java.lang.String(&quot;Intern&quot;)" class="string">&quot;Intern&quot;</span>, <a href="#290075" title="Array[ch.epfl.lamp.compiler.msil.Type]">mString1</a>)
      <a href="#288633" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,paramTypes: Array[GenMSIL.this.global.Type],newClass: ch.epfl.lamp.compiler.msil.Type,newName: String)Unit">mapMethod</a>(<a href="#288449" title="=&gt; GenMSIL.this.global.Symbol">JSTRING</a>, <a href="../../symtab/Names.scala.html#26213" title="implicit scala.tools.nsc.symtab.Names.view : (s: String)GenMSIL.this.global.Name" class="string">&quot;replace&quot;</a>, <a href="#290073" title="Array[GenMSIL.this.global.Type]">jChar2</a>, <a href="../../symtab/clr/CLRTypes.scala.html#288321" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MSTRING</a>, <span title="java.lang.String(&quot;Replace&quot;)" class="string">&quot;Replace&quot;</span>)
      <a href="#288634" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,newClass: ch.epfl.lamp.compiler.msil.Type,newName: String)Unit">mapMethod</a>(<a href="#288449" title="=&gt; GenMSIL.this.global.Symbol">JSTRING</a>, <a href="../../symtab/Names.scala.html#26213" title="implicit scala.tools.nsc.symtab.Names.view : (s: String)GenMSIL.this.global.Name" class="string">&quot;toCharArray&quot;</a>, <a href="../../symtab/clr/CLRTypes.scala.html#288321" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MSTRING</a>, <span title="java.lang.String(&quot;ToCharArray&quot;)" class="string">&quot;ToCharArray&quot;</span>)

      <a href="#288606" title="(sym: GenMSIL.this.global.Symbol,mType: ch.epfl.lamp.compiler.msil.Type)Unit">mapType</a>(<a href="../../symtab/Definitions.scala.html#26638" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28479" title="=&gt; GenMSIL.this.global.Symbol">BooleanClass</a>, <a href="../../symtab/clr/CLRTypes.scala.html#288306" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MBOOL</a>)
      <a href="#288606" title="(sym: GenMSIL.this.global.Symbol,mType: ch.epfl.lamp.compiler.msil.Type)Unit">mapType</a>(<a href="../../symtab/Definitions.scala.html#26638" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28465" title="=&gt; GenMSIL.this.global.Symbol">ByteClass</a>, <a href="../../symtab/clr/CLRTypes.scala.html#288276" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MBYTE</a>)
      <a href="#288606" title="(sym: GenMSIL.this.global.Symbol,mType: ch.epfl.lamp.compiler.msil.Type)Unit">mapType</a>(<a href="../../symtab/Definitions.scala.html#26638" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28467" title="=&gt; GenMSIL.this.global.Symbol">ShortClass</a>, <a href="../../symtab/clr/CLRTypes.scala.html#288279" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MSHORT</a>)
      <a href="#288606" title="(sym: GenMSIL.this.global.Symbol,mType: ch.epfl.lamp.compiler.msil.Type)Unit">mapType</a>(<a href="../../symtab/Definitions.scala.html#26638" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28469" title="=&gt; GenMSIL.this.global.Symbol">CharClass</a>, <a href="../../symtab/clr/CLRTypes.scala.html#288285" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MCHAR</a>)
      <a href="#288606" title="(sym: GenMSIL.this.global.Symbol,mType: ch.epfl.lamp.compiler.msil.Type)Unit">mapType</a>(<a href="../../symtab/Definitions.scala.html#26638" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28471" title="=&gt; GenMSIL.this.global.Symbol">IntClass</a>, <a href="../../symtab/clr/CLRTypes.scala.html#288288" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MINT</a>)
      <a href="#288606" title="(sym: GenMSIL.this.global.Symbol,mType: ch.epfl.lamp.compiler.msil.Type)Unit">mapType</a>(<a href="../../symtab/Definitions.scala.html#26638" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28473" title="=&gt; GenMSIL.this.global.Symbol">LongClass</a>, <a href="../../symtab/clr/CLRTypes.scala.html#288294" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MLONG</a>)
      <a href="#288606" title="(sym: GenMSIL.this.global.Symbol,mType: ch.epfl.lamp.compiler.msil.Type)Unit">mapType</a>(<a href="../../symtab/Definitions.scala.html#26638" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28475" title="=&gt; GenMSIL.this.global.Symbol">FloatClass</a>, <a href="../../symtab/clr/CLRTypes.scala.html#288300" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MFLOAT</a>)
      <a href="#288606" title="(sym: GenMSIL.this.global.Symbol,mType: ch.epfl.lamp.compiler.msil.Type)Unit">mapType</a>(<a href="../../symtab/Definitions.scala.html#26638" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28477" title="=&gt; GenMSIL.this.global.Symbol">DoubleClass</a>, <a href="../../symtab/clr/CLRTypes.scala.html#288303" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MDOUBLE</a>)
    }

    <span class="keyword">var</span> <a title="GenMSIL.this.global.icodes.IClass" id="288484">clasz</a>: <a href="../icode/Members.scala.html#46403" title="GenMSIL.this.global.icodes.IClass">IClass</a> = _
    <span class="keyword">var</span> <a title="GenMSIL.this.global.icodes.IMethod" id="288487">method</a>: <a href="../icode/Members.scala.html#46405" title="GenMSIL.this.global.icodes.IMethod">IMethod</a> = _
    <span class="keyword">var</span> <a title="GenMSIL.this.global.icodes.Code" id="288490">code</a>: <a href="../icode/Members.scala.html#46402" title="GenMSIL.this.global.icodes.Code">Code</a> = _

    <span class="keyword">var</span> <a title="ch.epfl.lamp.compiler.msil.emit.AssemblyBuilder" id="288493">massembly</a>: <a title="ch.epfl.lamp.compiler.msil.emit.AssemblyBuilder" id="288162">AssemblyBuilder</a> = _
    <span class="keyword">var</span> <a title="ch.epfl.lamp.compiler.msil.emit.ModuleBuilder" id="288496">mmodule</a>: <a title="ch.epfl.lamp.compiler.msil.emit.ModuleBuilder" id="288198">ModuleBuilder</a> = _
    <span class="keyword">var</span> <a title="ch.epfl.lamp.compiler.msil.emit.ILGenerator" id="288499">mcode</a>: <span title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">ILGenerator</span> = _

    <span class="keyword">var</span> <a title="String" id="288502">assemName</a>: <span title="String">String</span> = _
    <span class="keyword">var</span> <a title="java.lang.String" id="288505">firstSourceName</a> = <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>
    <span class="keyword">var</span> <a title="java.io.File" id="288508">outDir</a>: <span title="java.io.File">File</span> = _
    <span class="keyword">var</span> <a title="java.io.File" id="288511">srcPath</a>: <span title="java.io.File">File</span> = _
    <span class="keyword">var</span> <a title="String" id="288514">moduleName</a>: <span title="String">String</span> = _

    <span class="keyword">def</span> <a title="()Unit" id="288516">initAssembly</a>() {

      <a href="#288502" title="(x$1: String)Unit">assemName</a> = <a href="../../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37271" title="=&gt; scala.tools.nsc.Settings.StringSetting">assemname</a>.<a href="../../Settings.scala.html#37988" title="=&gt; java.lang.String">value</a>

      <span title="Unit" class="keyword">if</span> (<a href="#288502" title="(x$1: AnyRef)Boolean">assemName</a> == <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>) {
        <span title="Unit" class="keyword">if</span> (<a href="#288595" title="(x$1: AnyRef)Boolean">entryPoint</a> != <span title="Null(null)" class="keyword">null</span>) {
          <a href="#288502" title="(x$1: String)Unit">assemName</a> = <a href="#288590" title="(sym: GenMSIL.this.global.Symbol)String">msilName</a>(<a href="#288595" title="=&gt; GenMSIL.this.global.Symbol">entryPoint</a>.<a href="../../symtab/Symbols.scala.html#27190" title="=&gt; GenMSIL.this.global.Symbol">enclClass</a>)
          // remove the $ at the end (from module-name)
          <a href="#288502" title="(x$1: String)Unit">assemName</a> = <a href="#288502" title="=&gt; String">assemName</a>.<span title="(x$1: Int,x$2: Int)java.lang.String">substring</span>(<span title="Int(0)" class="int">0</span>, <a href="#288502" title="=&gt; String">assemName</a>.<span title="()Int">length</span><span title="(x$1: Int)Int">(</span>) - <span title="Int(1)" class="int">1</span>)
        } <span class="keyword">else</span> {
          // assuming filename of first source file
          <span title="(assertion: Boolean,message: =&gt; Any)Unit">assert</span>(<a href="#288505" title="=&gt; java.lang.String">firstSourceName</a>.<span title="(x$1: java.lang.String)Boolean">endsWith</span>(<span title="java.lang.String(&quot;.scala&quot;)" class="string">&quot;.scala&quot;</span>), <span title="java.lang.String(&quot;Source file doesn't end with .scala&quot;)" class="string">&quot;Source file doesn't end with .scala&quot;</span>)
          <a href="#288502" title="(x$1: String)Unit">assemName</a> = <a href="#288505" title="=&gt; java.lang.String">firstSourceName</a>.<span title="(x$1: Int,x$2: Int)java.lang.String">substring</span>(<span title="Int(0)" class="int">0</span>, <a href="#288505" title="=&gt; java.lang.String">firstSourceName</a>.<span title="()Int">length</span><span title="(x$1: Int)Int">(</span>) - <span title="Int(6)" class="int">6</span>)
        }
      } <span class="keyword">else</span> {
        <span title="Unit" class="keyword">if</span> (<a href="#288502" title="=&gt; String">assemName</a>.<span title="(x$1: java.lang.String)Boolean">endsWith</span>(<span title="java.lang.String(&quot;.msil&quot;)" class="string">&quot;.msil&quot;</span>))
          <a href="#288502" title="(x$1: String)Unit">assemName</a> = <a href="#288502" title="=&gt; String">assemName</a>.<span title="(x$1: Int,x$2: Int)java.lang.String">substring</span>(<span title="Int(0)" class="int">0</span>, <a href="#288502" title="=&gt; String">assemName</a>.<span title="()Int">length</span><span title="(x$1: Int)Int">(</span>)-<span title="Int(5)" class="int">5</span>)
        <span title="Unit" class="keyword">if</span> (<a href="#288502" title="=&gt; String">assemName</a>.<span title="(x$1: java.lang.String)Boolean">endsWith</span>(<span title="java.lang.String(&quot;.il&quot;)" class="string">&quot;.il&quot;</span>))
          <a href="#288502" title="(x$1: String)Unit">assemName</a> = <a href="#288502" title="=&gt; String">assemName</a>.<span title="(x$1: Int,x$2: Int)java.lang.String">substring</span>(<span title="Int(0)" class="int">0</span>, <a href="#288502" title="=&gt; String">assemName</a>.<span title="()Int">length</span><span title="(x$1: Int)Int">(</span>)-<span title="Int(3)" class="int">3</span>)
        <span class="keyword">val</span> <a title="java.io.File" id="291208">f</a>: <span title="java.io.File">File</span> = <span title="java.io.File" class="keyword">new</span> <span title="java.io.File">File</span>(<a href="#288502" title="=&gt; String">assemName</a>)
        <a href="#288502" title="(x$1: String)Unit">assemName</a> = <a href="#291208" title="java.io.File">f</a>.<a title="()java.lang.String" id="35368">getName</a>()
      }
      
      <a href="#288508" title="(x$1: java.io.File)Unit">outDir</a> = <span title="java.io.File" class="keyword">new</span> <span title="java.io.File">File</span>(<a href="../../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37233" title="=&gt; scala.tools.nsc.Settings.OutputSetting">outdir</a>.<a href="../../Settings.scala.html#37988" title="=&gt; java.lang.String">value</a>)

      <a href="#288511" title="(x$1: java.io.File)Unit">srcPath</a> = <span title="java.io.File" class="keyword">new</span> <span title="java.io.File">File</span>(<a href="../../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37257" title="=&gt; scala.tools.nsc.Settings.StringSetting">sourcepath</a>.<a href="../../Settings.scala.html#37988" title="=&gt; java.lang.String">value</a>)

      <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.AssemblyName" id="291082">assemblyName</a> = <span title="ch.epfl.lamp.compiler.msil.AssemblyName" class="keyword">new</span> <a title="ch.epfl.lamp.compiler.msil.AssemblyName" id="109667">AssemblyName</a>()
      <a href="#291082" title="ch.epfl.lamp.compiler.msil.AssemblyName">assemblyName</a>.<a title="java.lang.String" id="291305">Name</a> = <a href="#288502" title="=&gt; String">assemName</a>
      <a href="#288493" title="(x$1: ch.epfl.lamp.compiler.msil.emit.AssemblyBuilder)Unit">massembly</a> = <a title="object ch.epfl.lamp.compiler.msil.emit.AssemblyBuilderFactory" id="288229">AssemblyBuilderFactory</a>.<a title="(name: ch.epfl.lamp.compiler.msil.AssemblyName)ch.epfl.lamp.compiler.msil.emit.AssemblyBuilder" id="291319">DefineDynamicAssembly</a>(<a href="#291082" title="ch.epfl.lamp.compiler.msil.AssemblyName">assemblyName</a>)

      <a href="#288514" title="(x$1: String)Unit">moduleName</a> = <a href="#288502" title="(x$1: Any)java.lang.String">assemName</a> + (<span title="Any" class="keyword">if</span> (<a href="#288595" title="(x$1: AnyRef)Boolean">entryPoint</a> == <span title="Null(null)" class="keyword">null</span>) <span title="java.lang.String(&quot;.dll&quot;)" class="string">&quot;.dll&quot;</span> <span class="keyword">else</span> <span title="java.lang.String(&quot;.exe&quot;)" class="string">&quot;.exe&quot;</span>)
      // filename here: .dll or .exe (in both parameters), second: give absolute-path
      <a href="#288496" title="(x$1: ch.epfl.lamp.compiler.msil.emit.ModuleBuilder)Unit">mmodule</a> = <a href="#288493" title="=&gt; ch.epfl.lamp.compiler.msil.emit.AssemblyBuilder">massembly</a>.<a title="(name: String,fileName: String)ch.epfl.lamp.compiler.msil.emit.ModuleBuilder" id="289554">DefineDynamicModule</a>(<a href="#288514" title="=&gt; String">moduleName</a>,
                                              <a title="(x$1: java.io.File,x$2: java.lang.String)java.io.File" id="35363" class="keyword">new</a> <span title="java.io.File">File</span>(<a href="#288508" title="=&gt; java.io.File">outDir</a>, <a href="#288514" title="=&gt; String">moduleName</a>).<a title="()java.lang.String" id="35373">getAbsolutePath</a>())
      <span title="(assertion: Boolean)Unit">assert</span> (<a href="#288496" title="(x$1: AnyRef)Boolean">mmodule</a> != <span title="Null(null)" class="keyword">null</span>)
    }


    /**
     * Form of the custom Attribute parameter (Ecma-335.pdf)
     *      - p. 163 for CustomAttrib Form,
     *      - p. 164 for FixedArg Form (Array and Element) (if array or not is known!)
     *  !! least significant *byte* first if values longer than one byte !!
     *
     * 1: Prolog (unsigned int16, value 0x0001) -&gt; symtab[0] = 0x01, symtab[1] = 0x00
     * 2: FixedArgs (directly the data, get number and types from related constructor)
     *  2.1: length of the array (unsigned int32, take care on order of the 4 bytes)
     *  2.2: the byte array data
     * 3: NumNamed (unsigned int16, number of named fields and properties, 0x0000)
     *
     **/
    <span class="keyword">def</span> <a title="(sym: GenMSIL.this.global.Symbol,tBuilder: ch.epfl.lamp.compiler.msil.emit.TypeBuilder)Unit" id="288517">addSymtabAttribute</a>(<a title="GenMSIL.this.global.Symbol" id="291445">sym</a>: <a href="../../symtab/Symbols.scala.html#26286" title="GenMSIL.this.global.Symbol">Symbol</a>, <a title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder" id="291446">tBuilder</a>: <span title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">TypeBuilder</span>) {
      <a href="../../Global.scala.html#39408" title="=&gt; GenMSIL.this.global.Run">currentRun</a>.<a href="../../Global.scala.html#40447" title="=&gt; scala.collection.mutable.HashMap[GenMSIL.this.global.Symbol,scala.tools.nsc.symtab.classfile.PickleBuffer]">symData</a>.<a title="(key: GenMSIL.this.global.Symbol)Option[scala.tools.nsc.symtab.classfile.PickleBuffer]" id="44613">get</a>(<a href="#291445" title="GenMSIL.this.global.Symbol">sym</a>) <span title="Unit" class="keyword">match</span> {
        <span title="Unit" class="keyword">case</span> Some(<a title="scala.tools.nsc.symtab.classfile.PickleBuffer" id="291455">pickle</a>) =&gt;
          <span class="keyword">val</span> <a title="Array[Byte]" id="291458">symtab</a>: <span title="Array[Byte]">Array</span>[Byte] = <span title="Array[Byte]" class="keyword">new</span> <span title="Array[Byte]">Array</span>[Byte](<a href="#291455" title="scala.tools.nsc.symtab.classfile.PickleBuffer">pickle</a>.<a href="../../symtab/classfile/PickleBuffer.scala.html#83639" title="(x$1: Int)Int">writeIndex</a> + <span title="Int(8)" class="int">8</span>)
          <a href="#291458" title="(i: Int,x: Byte)Unit">symtab</a>(<span title="Int(0)" class="int">0</span>) = <span title="Int(1)" class="int">1</span>.<span title="=&gt; Byte">toByte</span>
          <span class="keyword">var</span> <a title="Int" id="291459">size</a>:<span title="Int">Int</span> = <a href="#291455" title="scala.tools.nsc.symtab.classfile.PickleBuffer">pickle</a>.<a href="../../symtab/classfile/PickleBuffer.scala.html#83639" title="=&gt; Int">writeIndex</a>
          <span class="keyword">for</span> (<a title="Int" id="291532">i</a> &lt;- <span title="(end: Int)Range" class="int">2</span> <span title="(f: (Int) =&gt; Unit)Unit">until</span> <span title="Int(6)" class="int">6</span>) {
            <a href="#291458" title="(i: Int,x: Byte)Unit">symtab</a>(<a href="#291532" title="Int">i</a>) = (<a href="#291459" title="(x$1: Int)Int" id="2997">size</a> &amp; <span title="Int(255)" class="int">0xff</span>).<span title="=&gt; Byte">toByte</span>
            <a href="#291459" title="Int">size</a> = <a href="#291459" title="(x$1: Int)Int" id="2882">size</a> &gt;&gt; <span title="Int(8)" class="int">8</span>
          }

          <span title="object java.lang.System">System</span>.<a title="(x$1: Any,x$2: Int,x$3: Any,x$4: Int,x$5: Int)Unit" id="65316">arraycopy</a>(<a href="#291455" title="scala.tools.nsc.symtab.classfile.PickleBuffer">pickle</a>.<a href="../../symtab/classfile/PickleBuffer.scala.html#83633" title="=&gt; Array[Byte]">bytes</a>, <span title="Int(0)" class="int">0</span>, <a href="#291458" title="Array[Byte]">symtab</a>, <span title="Int(6)" class="int">6</span>, <a href="#291455" title="scala.tools.nsc.symtab.classfile.PickleBuffer">pickle</a>.<a href="../../symtab/classfile/PickleBuffer.scala.html#83639" title="=&gt; Int">writeIndex</a>)

          <a href="#291446" title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">tBuilder</a>.<a title="(constr: ch.epfl.lamp.compiler.msil.ConstructorInfo,value: Array[byte])Unit" id="289965">SetCustomAttribute</a>(<a href="../../symtab/clr/CLRTypes.scala.html#288333" title="=&gt; ch.epfl.lamp.compiler.msil.ConstructorInfo">SYMTAB_ATTRIBUTE_CONSTRUCTOR</a>, <a href="#291458" title="Array[Byte]">symtab</a>)

          <a href="../../Global.scala.html#39408" title="=&gt; GenMSIL.this.global.Run">currentRun</a>.<a href="../../Global.scala.html#40447" title="(key: GenMSIL.this.global.Symbol)scala.collection.mutable.HashMap[GenMSIL.this.global.Symbol,scala.tools.nsc.symtab.classfile.PickleBuffer]">symData</a> -= <a href="#291445" title="GenMSIL.this.global.Symbol">sym</a>
          <a href="../../Global.scala.html#39408" title="=&gt; GenMSIL.this.global.Run">currentRun</a>.<a href="../../Global.scala.html#40447" title="(key: GenMSIL.this.global.Symbol)scala.collection.mutable.HashMap[GenMSIL.this.global.Symbol,scala.tools.nsc.symtab.classfile.PickleBuffer]">symData</a> <span title="Unit">-=</span> <a href="#291445" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27214" title="=&gt; GenMSIL.this.global.Symbol">linkedSym</a>
          //log(&quot;Generated ScalaSig Attr for &quot; + sym)//debug
        <span title="Unit" class="keyword">case</span> _ =&gt;
          <a href="../../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Could not find pickle information for &quot;</span> + <a href="#291445" title="GenMSIL.this.global.Symbol">sym</a>)
      }
    }

    <span class="keyword">def</span> <a title="(member: ch.epfl.lamp.compiler.msil.emit.ICustomAttributeSetter,annotations: List[GenMSIL.this.global.AnnotationInfo])Unit" id="288518">addAttributes</a>(<a title="ch.epfl.lamp.compiler.msil.emit.ICustomAttributeSetter" id="291632">member</a>: <a title="ch.epfl.lamp.compiler.msil.emit.ICustomAttributeSetter" id="288150">ICustomAttributeSetter</a>, <a title="List[GenMSIL.this.global.AnnotationInfo]" id="291633">annotations</a>: <span title="List[GenMSIL.this.global.AnnotationInfo]">List</span>[AnnotationInfo]) {
      <span title="Nothing" class="keyword">return</span> // TODO: implement at some point
    }
/*
      if (settings.debug.value)
        log(&quot;creating annotations: &quot; + annotations + &quot; for member : &quot; + member)
      for (annot@ AnnotationInfo(typ, annArgs, nvPairs) &lt;- annotations ;
           if annot.isConstant)
           //!typ.typeSymbol.hasFlag(Flags.JAVA)
      {
//        assert(consts.length &lt;= 1,
//               &quot;too many constant arguments for annotations; &quot;+consts.toString())

        // Problem / TODO having the symbol of the annotations type would be nicer
        // (i hope that type.typeSymbol is the same as the one in types2create)
        // AND: this will crash if the annotations Type is already compiled (-&gt; not a typeBuilder)
        // when this is solved, types2create will be the same as icodes.classes, thus superfluous
        val annType: TypeBuilder = getType(typ.typeSymbol).asInstanceOf[TypeBuilder]
//        val annType: MsilType = getType(typ.typeSymbol)

        // Problem / TODO: i have no idea which constructor is used. This
        // information should be available in AnnotationInfo.
        annType.CreateType() // else, GetConstructors can't be used
        val constr: ConstructorInfo = annType.GetConstructors()(0)
        // prevent a second call of CreateType, only needed because there's no
        // otehr way than GetConstructors()(0) to get the constructor, if there's
        // no constructor symbol available.

        val args: Array[Byte] =
          getAttributeArgs(
            annArgs map (_.constant.get),
            (for((n,v) &lt;- nvPairs) yield (n, v.constant.get)))
        member.SetCustomAttribute(constr, args)
      }
    } */

/*    def getAttributeArgs(consts: List[Constant], nvPairs: List[(Name, Constant)]): Array[Byte] = {
      val buf = ByteBuffer.allocate(2048) // FIXME: this may be not enough!
      buf.order(ByteOrder.LITTLE_ENDIAN)
      buf.putShort(1.toShort) // signature

      def emitSerString(str: String) = {
          // this is wrong, it has to be the length of the UTF-8 byte array, which
          // may be longer (see clr-book on page 302)
//          val length: Int = str.length
            val strBytes: Array[Byte] = try {
              str.getBytes(&quot;UTF-8&quot;)
            } catch {
              case _: Error =&gt; abort(&quot;could not get byte-array for string: &quot; + str)
            }
            val length: Int = strBytes.length //this length is stored big-endian
            if (length &lt; 128)
              buf.put(length.toByte)
            else if (length &lt; (1&lt;&lt;14)) {
              buf.put(((length &gt;&gt; 8) | 0x80).toByte) // the bits 14 and 15 of length are '0'
              buf.put((length | 0xff).toByte)
            } else if (length &lt; (1 &lt;&lt; 29)) {
              buf.put(((length &gt;&gt; 24) | 0xc0).toByte)
              buf.put(((length &gt;&gt; 16) &amp; 0xff).toByte)
              buf.put(((length &gt;&gt;  8) &amp; 0xff).toByte)
              buf.put(((length      ) &amp; 0xff).toByte)
            } else
              abort(&quot;string too long for attribute parameter: &quot; + length)
            buf.put(strBytes)
      }

      def emitConst(const: Constant): Unit = const.tag match {
        case BooleanTag =&gt; buf.put((if (const.booleanValue) 1 else 0).toByte)
        case ByteTag =&gt; buf.put(const.byteValue)
        case ShortTag =&gt; buf.putShort(const.shortValue)
        case CharTag =&gt; buf.putChar(const.charValue)
        case IntTag =&gt; buf.putInt(const.intValue)
        case LongTag =&gt; buf.putLong(const.longValue)
        case FloatTag =&gt; buf.putFloat(const.floatValue)
        case DoubleTag =&gt; buf.putDouble(const.doubleValue)
        case StringTag =&gt;
          val str: String = const.stringValue
          if (str == null) {
            buf.put(0xff.toByte)
          } else {
            emitSerString(str)
          }
        case ArrayTag =&gt;
          val arr: Array[Constant] = const.arrayValue
          if (arr == null) {
            buf.putInt(0xffffffff)
          } else {
            buf.putInt(arr.length)
            arr.foreach(emitConst)
          }

        // TODO: other Tags: NoTag, UnitTag, ClassTag, EnumTag, ArrayTag ???

        case _ =&gt; abort(&quot;could not handle attribute argument: &quot; + const)
      }

      consts foreach emitConst
      buf.putShort(nvPairs.length.toShort)
      def emitNamedArg(nvPair: (Name, Constant)) {
        // the named argument is a property of the attribute (it can't be a field, since
        //  all fields in scala are private)
        buf.put(0x54.toByte)

        def emitType(c: Constant) = c.tag match { // type of the constant, Ecma-335.pdf, page 151
          case BooleanTag =&gt; buf.put(0x02.toByte)
          case ByteTag =&gt;    buf.put(0x05.toByte)
          case ShortTag =&gt;   buf.put(0x06.toByte)
          case CharTag =&gt;    buf.put(0x07.toByte)
          case IntTag =&gt;     buf.put(0x08.toByte)
          case LongTag =&gt;    buf.put(0x0a.toByte)
          case FloatTag =&gt;   buf.put(0x0c.toByte)
          case DoubleTag =&gt;  buf.put(0x0d.toByte)
          case StringTag =&gt;  buf.put(0x0e.toByte)

          // TODO: other Tags: NoTag, UnitTag, ClassTag, EnumTag ???

          // ArrayTag falls in here
          case _ =&gt; abort(&quot;could not handle attribute argument: &quot; + c)
        }

        val cnst: Constant = nvPair._2
        if (cnst.tag == ArrayTag) {
          buf.put(0x1d.toByte)
          emitType(cnst.arrayValue(0)) // FIXME: will crash if array length = 0
        } else if (cnst.tag == EnumTag) {
          buf.put(0x55.toByte)
          // TODO: put a SerString (don't know what exactly, names of the enums somehow..)
              } else {
          buf.put(0x51.toByte)
          emitType(cnst)
        }

        emitSerString(nvPair._1.toString)
        emitConst(nvPair._2)
      }

      val length = buf.position()
      buf.array().slice(0, length)
    } */

    <span class="keyword">def</span> <a title="()Unit" id="288519">writeAssembly</a>() {
      <span title="Unit" class="keyword">if</span> (<a href="#288595" title="(x$1: AnyRef)Boolean">entryPoint</a> != <span title="Null(null)" class="keyword">null</span>) {
        <span title="(assertion: Boolean,message: =&gt; Any)Unit">assert</span>(<a href="#288595" title="=&gt; GenMSIL.this.global.Symbol">entryPoint</a>.<a href="../../symtab/Symbols.scala.html#27190" title="=&gt; GenMSIL.this.global.Symbol">enclClass</a>.<a href="../../symtab/Symbols.scala.html#27093" title="=&gt; Boolean">isModuleClass</a>, <span title="java.lang.String(&quot;main-method not defined in a module&quot;)" class="string">&quot;main-method not defined in a module&quot;</span>)
        <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.MethodInfo" id="291643">mainMethod</a> = <a href="../../symtab/clr/CLRTypes.scala.html#288349" title="(key: GenMSIL.this.global.loaders.clrTypes.global.Symbol)ch.epfl.lamp.compiler.msil.MethodInfo">methods</a>(<a href="#288595" title="=&gt; GenMSIL.this.global.Symbol">entryPoint</a>.<span title="[T0]T0">asInstanceOf</span><span title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">[</span>clrTypes.global.<a href="../../symtab/Symbols.scala.html#26286" title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">Symbol</a>])
        <span class="keyword">val</span> <a title="Array[ch.epfl.lamp.compiler.msil.Type]" id="291644">stringArrayTypes</a>: <span title="Array[ch.epfl.lamp.compiler.msil.Type]">Array</span>[MsilType] = <span title="(xs: ch.epfl.lamp.compiler.msil.Type*)(implicit evidence$2: scala.reflect.ClassManifest[ch.epfl.lamp.compiler.msil.Type])Array[ch.epfl.lamp.compiler.msil.Type]">Array</span><span title="(clazz: Class[_])scala.reflect.ClassManifest[ch.epfl.lamp.compiler.msil.Type]">(</span><a href="../../symtab/clr/CLRTypes.scala.html#288324" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MSTRING_ARRAY</a>)
        <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.MethodBuilder" id="291645">globalMain</a> = <a href="#288496" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ModuleBuilder">mmodule</a>.<a title="(name: String,attributes: Int,returnType: ch.epfl.lamp.compiler.msil.Type,paramTypes: Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.emit.MethodBuilder" id="289613">DefineGlobalMethod</a>(
          <span title="java.lang.String(&quot;Main&quot;)" class="string">&quot;Main&quot;</span>, MethodAttributes.Public <span title="Int(22)">|</span> MethodAttributes.Static,
          <a href="../../symtab/clr/CLRTypes.scala.html#288309" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MVOID</a>, <a href="#291644" title="Array[ch.epfl.lamp.compiler.msil.Type]">stringArrayTypes</a>)
        <a href="#291645" title="ch.epfl.lamp.compiler.msil.emit.MethodBuilder">globalMain</a>.<span title="(pos: Int,attr: Int,name: String)ch.epfl.lamp.compiler.msil.emit.ParameterBuilder">DefineParameter</span>(<span title="Int(0)" class="int">0</span>, ParameterAttributes.<span title="Int(0)">None</span>, <span title="java.lang.String(&quot;args&quot;)" class="string">&quot;args&quot;</span>)
        <a href="#288493" title="=&gt; ch.epfl.lamp.compiler.msil.emit.AssemblyBuilder">massembly</a>.<a title="(entryMethod: ch.epfl.lamp.compiler.msil.MethodInfo)Unit" id="289565">SetEntryPoint</a>(<a href="#291645" title="ch.epfl.lamp.compiler.msil.emit.MethodBuilder">globalMain</a>)
        <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.ILGenerator" id="291646">code</a> = <a href="#291645" title="ch.epfl.lamp.compiler.msil.emit.MethodBuilder">globalMain</a>.<span title="()ch.epfl.lamp.compiler.msil.emit.ILGenerator">GetILGenerator</span>()
        <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.FieldInfo" id="291647">moduleField</a> = <a href="#288614" title="(sym: GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.FieldInfo">getModuleInstanceField</a>(<a href="#288595" title="=&gt; GenMSIL.this.global.Symbol">entryPoint</a>.<a href="../../symtab/Symbols.scala.html#27190" title="=&gt; GenMSIL.this.global.Symbol">enclClass</a>)
        <a href="#291646" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.FieldInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ldsfld</span>, <a href="#291647" title="ch.epfl.lamp.compiler.msil.FieldInfo">moduleField</a>)
        <a href="#291646" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ldarg_0</span>)
        <a href="#291646" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.MethodInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Callvirt</span>, <a href="#291643" title="ch.epfl.lamp.compiler.msil.MethodInfo">mainMethod</a>)
        <a href="#291646" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ret</span>)
      }
      <a href="#288520" title="()Unit">createTypes</a>()
      <span class="keyword">val</span> <a title="java.lang.String" id="291635">filename</a> = <a href="#288508" title="=&gt; java.io.File">outDir</a>.<span title="()java.lang.String">getPath</span>() 
      <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37988" title="=&gt; Boolean">value</a>)
        <a href="../../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Output path: &quot;</span> + <a href="#291635" title="java.lang.String">filename</a>)
      <span class="keyword">try</span> {
        <a href="#288493" title="=&gt; ch.epfl.lamp.compiler.msil.emit.AssemblyBuilder">massembly</a>.<a title="(destPath: String,sourceFilesPath: String)Unit" id="289561">Save</a>(<a href="#291635" title="java.lang.String">filename</a>, <a href="#288511" title="=&gt; java.io.File">srcPath</a>.<span title="()java.lang.String">getPath</span>())
      } <span class="keyword">catch</span> {
        <span title="Nothing" class="keyword">case</span> <a title="java.io.IOException" id="293554">e</a>:<a title="java.io.IOException" id="3657">IOException</a> =&gt; <a href="../../Global.scala.html#39309" title="(msg: String)Nothing">abort</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Could not write to &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#291635" title="java.lang.String">filename</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;: &quot;)" class="string">&quot;: &quot;</span> + <a href="#293554" title="java.io.IOException">e</a>.<a title="()java.lang.String" id="26085">getMessage</a>())
      }
    }

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="()Unit" id="288520">createTypes</a>() {
      <span class="keyword">for</span> (<a title="GenMSIL.this.global.icodes.global.Symbol" id="293569">sym</a> &lt;- <a href="../icode/ICodes.scala.html#46378" title="=&gt; scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.global.Symbol,GenMSIL.this.global.icodes.IClass]">classes</a>.<span title="(f: (GenMSIL.this.global.icodes.global.Symbol) =&gt; Unit)Unit">keysIterator</span>) {
        <span class="keyword">val</span> <a title="GenMSIL.this.global.icodes.IClass" id="293570">iclass</a>   = <a href="../icode/ICodes.scala.html#46378" title="(key: GenMSIL.this.global.icodes.global.Symbol)GenMSIL.this.global.icodes.IClass">classes</a>(<a href="#293569" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>)
        <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder" id="293571">tBuilder</a> = <a href="../../symtab/clr/CLRTypes.scala.html#288345" title="(key: GenMSIL.this.global.loaders.clrTypes.global.Symbol)ch.epfl.lamp.compiler.msil.Type">types</a>(<a href="#293569" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>.<span title="[T0]T0">asInstanceOf</span><span title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">[</span>clrTypes.global.<a href="../../symtab/Symbols.scala.html#26286" title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">Symbol</a>]).<span title="[T0]T0">asInstanceOf</span><span title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">[</span><span title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">TypeBuilder</span>]
          
        <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37988" title="=&gt; Boolean">value</a>)
          <a href="../../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Calling CreatType for &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#293569" title="GenMSIL.this.global.icodes.global.Symbol">sym</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;, &quot;)" class="string">&quot;, &quot;</span> + <a href="#293571" title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">tBuilder</a>.<a title="()java.lang.String" id="288853">toString</a>)

        <a href="#293571" title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">tBuilder</a>.<span title="()ch.epfl.lamp.compiler.msil.Type">CreateType</span>()
        <a href="#293571" title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">tBuilder</a>.<span title="(sourceFilepath: String)Unit">setSourceFilepath</span>(<a href="#293570" title="GenMSIL.this.global.icodes.IClass">iclass</a>.<a href="../icode/Members.scala.html#66950" title="=&gt; GenMSIL.this.global.icodes.global.CompilationUnit">cunit</a>.<a href="../../CompilationUnits.scala.html#45663" title="=&gt; scala.tools.nsc.util.SourceFile">source</a>.<a href="../../util/SourceFile.scala.html#68479" title="=&gt; scala.tools.nsc.io.AbstractFile">file</a>.<a href="../../io/AbstractFile.scala.html#51637" title="=&gt; String">path</a>)
      }
    }

    <span class="keyword">private</span>[GenMSIL] <span class="keyword">def</span> <a title="(iclass: GenMSIL.this.global.icodes.IClass)Unit" id="288521">genClass</a>(<a title="GenMSIL.this.global.icodes.IClass" id="288682">iclass</a>: <a href="../icode/Members.scala.html#46403" title="GenMSIL.this.global.icodes.IClass">IClass</a>) {
      <span class="keyword">val</span> <a title="GenMSIL.this.global.icodes.global.Symbol" id="293621">sym</a> = <a href="#288682" title="GenMSIL.this.global.icodes.IClass">iclass</a>.<a href="../icode/Members.scala.html#66941" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>
      <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37988" title="=&gt; Boolean">value</a>)
        <a href="../../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Generating class &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#293621" title="GenMSIL.this.global.icodes.global.Symbol">sym</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; flags: &quot;)" class="string">&quot; flags: &quot;</span> + <a href="../../symtab/Flags.scala.html#10482" title="object scala.tools.nsc.symtab.Flags">Flags</a>.<a href="../../symtab/Flags.scala.html#29000" title="(flags: Long)String">flagsToString</a>(<a href="#293621" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27150" title="=&gt; Long">flags</a>))
      <a href="#288484" title="(x$1: GenMSIL.this.global.icodes.IClass)Unit">clasz</a> = <a href="#288682" title="GenMSIL.this.global.icodes.IClass">iclass</a>

      <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder" id="293622">tBuilder</a> = <a href="#288605" title="(sym: GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.Type">getType</a>(<a href="#293621" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>).<span title="[T0]T0">asInstanceOf</span><span title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">[</span><span title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">TypeBuilder</span>]
      <span title="Unit" class="keyword">if</span> (<a href="#288612" title="(sym: GenMSIL.this.global.Symbol)Boolean">isCloneable</a>(<a href="#293621" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>)){
        // FIXME: why there's no nme.clone_ ?
        // &quot;Clone&quot;: if the code is non-portable, &quot;Clone&quot; is defined, not &quot;clone&quot;
        // TODO: improve condition (should override AnyRef.clone)
        <span title="Unit" class="keyword">if</span> (<a href="#288682" title="GenMSIL.this.global.icodes.IClass">iclass</a>.<a href="../icode/Members.scala.html#66947" title="=&gt; List[GenMSIL.this.global.icodes.IMethod]">methods</a>.<span title="(p: (GenMSIL.this.global.icodes.IMethod) =&gt; Boolean)Boolean">forall</span>(<a title="GenMSIL.this.global.icodes.IMethod" id="293653">m</a> =&gt; {
          <span title="=&gt; Boolean">!</span>(<span title="(x$1: Boolean)Boolean">(</span><a href="#293653" title="GenMSIL.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61494" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>.<a href="../../symtab/Symbols.scala.html#27147" title="=&gt; GenMSIL.this.global.icodes.global.Name">name</a>.<a href="../../symtab/Names.scala.html#28391" title="()String">toString</a><span title="(x$1: AnyRef)Boolean">(</span>) <span title="(x$1: Boolean)Boolean">!=</span> <span title="java.lang.String(&quot;clone&quot;)" class="string">&quot;clone&quot;</span> || <a href="#293653" title="GenMSIL.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61494" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>.<a href="../../symtab/Symbols.scala.html#27147" title="=&gt; GenMSIL.this.global.icodes.global.Name">name</a>.<a href="../../symtab/Names.scala.html#28391" title="()String">toString</a><span title="(x$1: AnyRef)Boolean">(</span>) != <span title="java.lang.String(&quot;Clone&quot;)" class="string">&quot;Clone&quot;</span>) &amp;&amp;
            <a href="#293653" title="GenMSIL.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61494" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>.<a href="../../symtab/Symbols.scala.html#27162" title="=&gt; GenMSIL.this.global.icodes.global.Type">tpe</a>.<a href="../../symtab/Types.scala.html#30386" title="=&gt; List[GenMSIL.this.global.icodes.global.Type]">paramTypes</a>.<span title="(x$1: Int)Boolean">length</span> != <span title="Int(0)" class="int">0</span>)
        })) {
          <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37988" title="=&gt; Boolean">value</a>)
            <a href="../../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;auto-generating cloneable method for &quot;</span> + <a href="#293621" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>)
          <span class="keyword">val</span> <a title="Short" id="293688">attrs</a>: <span title="Short">Short</span> = (MethodAttributes.Public | MethodAttributes.Virtual <span title="Short(198)">|</span>
                              MethodAttributes.HideBySig)
          <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.MethodBuilder" id="293689">cloneMethod</a> = <a href="#293622" title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">tBuilder</a>.<span title="(name: String,attrs: short,returnType: ch.epfl.lamp.compiler.msil.Type,paramTypes: Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.emit.MethodBuilder">DefineMethod</span>(<span title="java.lang.String(&quot;Clone&quot;)" class="string">&quot;Clone&quot;</span>, <a href="#293688" title="Short">attrs</a>, <a href="../../symtab/clr/CLRTypes.scala.html#288318" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MOBJECT</a>,
                                                  <span title="object ch.epfl.lamp.compiler.msil.Type">MsilType</span>.<span title="Array[ch.epfl.lamp.compiler.msil.Type]">EmptyTypes</span>)
          <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.ILGenerator" id="293690">clCode</a> = <a href="#293689" title="ch.epfl.lamp.compiler.msil.emit.MethodBuilder">cloneMethod</a>.<span title="()ch.epfl.lamp.compiler.msil.emit.ILGenerator">GetILGenerator</span>()
          <a href="#293690" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">clCode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ldarg_0</span>)
          <a href="#293690" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">clCode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.MethodInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Call</span>, <a href="#288429" title="=&gt; ch.epfl.lamp.compiler.msil.MethodInfo">MEMBERWISE_CLONE</a>)
          <a href="#293690" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">clCode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ret</span>)
        }
      }

      <span class="keyword">val</span> <a title="Int" id="293623">line</a> = <a href="#293621" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27006" title="=&gt; scala.tools.nsc.util.Position">pos</a>.<a href="../../util/Position.scala.html#30490" title="=&gt; Int">line</a>
      <a href="#293622" title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">tBuilder</a>.<a title="(sourceLine: int,sourceFilename: String)Unit" id="289968">setPosition</a>(<a href="#293623" title="Int">line</a>, <a href="#288682" title="GenMSIL.this.global.icodes.IClass">iclass</a>.<a href="../icode/Members.scala.html#66950" title="=&gt; GenMSIL.this.global.icodes.global.CompilationUnit">cunit</a>.<a href="../../CompilationUnits.scala.html#45663" title="=&gt; scala.tools.nsc.util.SourceFile">source</a>.<a href="../../util/SourceFile.scala.html#68479" title="=&gt; scala.tools.nsc.io.AbstractFile">file</a>.<a href="../../io/AbstractFile.scala.html#51636" title="=&gt; String">name</a>)

      <span title="Unit" class="keyword">if</span> (<a href="#288610" title="(sym: GenMSIL.this.global.Symbol)Boolean">isTopLevelModule</a>(<a href="#293621" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>)) {
        <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37988" title="=&gt; Boolean">value</a>)
          <a href="../../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;TopLevelModule: &quot;</span> + <a href="#293621" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>)
        <span title="Unit" class="keyword">if</span> (<a href="#293621" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27212" title="(x$1: AnyRef)Boolean">linkedClassOfModule</a> == <a href="../../symtab/Symbols.scala.html#26293" title="object GenMSIL.this.global.NoSymbol">NoSymbol</a>) {
          <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37988" title="=&gt; Boolean">value</a>)
            <a href="../../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot; no linked class: &quot;</span> + <a href="#293621" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>)
          <a href="#288616" title="(sym: GenMSIL.this.global.Symbol)Unit">dumpMirrorClass</a>(<a href="#293621" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>)
        } <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="../../Global.scala.html#39408" title="=&gt; GenMSIL.this.global.Run">currentRun</a>.<a href="../../Global.scala.html#40449" title="(sym: GenMSIL.this.global.Symbol)Boolean">compiles</a>(<a href="#293621" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27212" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">linkedClassOfModule</a>)) {
          <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37988" title="=&gt; Boolean">value</a>)
            <a href="../../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot; not compiling linked class: &quot;</span> + <a href="#293621" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>)
          <a href="#288616" title="(sym: GenMSIL.this.global.Symbol)Unit">dumpMirrorClass</a>(<a href="#293621" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>)
        }
      }

      // the pickling info is not written to the module class, but to it's
      // linked class (the mirror class eventually dumped)
      <span title="Unit" class="keyword">if</span> (<span title="=&gt; Boolean">!</span>(<a href="#293622" title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">tBuilder</a>.<a title="java.lang.String" id="288886">Name</a>.<span title="(x$1: java.lang.String)Boolean">endsWith</span><span title="(x$1: Boolean)Boolean">(</span><span title="java.lang.String(&quot;$&quot;)" class="string">&quot;$&quot;</span>) &amp;&amp; <a href="#293621" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27093" title="=&gt; Boolean">isModuleClass</a>)){
        // think the if inside could be removed, because in this case, addSymtabAttribute is
        // called in the dumpMirrorClass method
        <a href="#288517" title="(sym: GenMSIL.this.global.Symbol,tBuilder: ch.epfl.lamp.compiler.msil.emit.TypeBuilder)Unit">addSymtabAttribute</a>(<span title="GenMSIL.this.global.Symbol" class="keyword">if</span> (<a href="#288610" title="(sym: GenMSIL.this.global.Symbol)Boolean">isTopLevelModule</a>(<a href="#293621" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>)) <a href="#293621" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27217" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">sourceModule</a> <span class="keyword">else</span> <a href="#293621" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>, <a href="#293622" title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">tBuilder</a>)

        // TODO: remove; check the above think:
        <span title="(assertion: Boolean,message: =&gt; Any)Unit">assert</span>(<span title="=&gt; Boolean">!</span><a href="#288610" title="(sym: GenMSIL.this.global.Symbol)Boolean">isTopLevelModule</a>(<a href="#293621" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>), <span title="java.lang.String(&quot;can't remove the 'if'&quot;)" class="string">&quot;can't remove the 'if'&quot;</span>)
      }

      <a href="#288518" title="(member: ch.epfl.lamp.compiler.msil.emit.ICustomAttributeSetter,annotations: List[GenMSIL.this.global.AnnotationInfo])Unit">addAttributes</a>(<a href="#293622" title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">tBuilder</a>, <a href="#293621" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27013" title="=&gt; List[GenMSIL.this.global.icodes.global.AnnotationInfo]">annotations</a>)

      <span title="Unit" class="keyword">if</span> (<a href="#288682" title="GenMSIL.this.global.icodes.IClass">iclass</a>.<a href="../icode/Members.scala.html#66941" title="(x$1: AnyRef)Boolean">symbol</a> != <a href="../../symtab/Definitions.scala.html#26638" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28579" title="=&gt; GenMSIL.this.global.Symbol">ArrayClass</a>)
        <a href="#288682" title="GenMSIL.this.global.icodes.IClass">iclass</a>.<a href="../icode/Members.scala.html#66947" title="(f: (GenMSIL.this.global.icodes.IMethod) =&gt; Unit)Unit">methods</a> foreach <a href="#288522" title="(m: GenMSIL.this.global.icodes.IMethod)Unit">genMethod</a>

    } //genClass


    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(m: GenMSIL.this.global.icodes.IMethod)Unit" id="288522">genMethod</a>(<a title="GenMSIL.this.global.icodes.IMethod" id="293840">m</a>: <a href="../icode/Members.scala.html#46405" title="GenMSIL.this.global.icodes.IMethod">IMethod</a>) {
      <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37988" title="=&gt; Boolean">value</a>)
        <a href="../../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Generating method &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#293840" title="GenMSIL.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61494" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; flags: &quot;)" class="string">&quot; flags: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="../../symtab/Flags.scala.html#10482" title="object scala.tools.nsc.symtab.Flags">Flags</a>.<a href="../../symtab/Flags.scala.html#29000" title="(flags: Long)String">flagsToString</a>(<a href="#293840" title="GenMSIL.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61494" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>.<a href="../../symtab/Symbols.scala.html#27150" title="=&gt; Long">flags</a>) <span title="(x$1: Any)java.lang.String">+</span>
            <span title="java.lang.String(&quot; owner: &quot;)" class="string">&quot; owner: &quot;</span> + <a href="#293840" title="GenMSIL.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61494" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>.<a href="../../symtab/Symbols.scala.html#27142" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">owner</a>)
      <a href="#288487" title="(x$1: GenMSIL.this.global.icodes.IMethod)Unit">method</a> = <a href="#293840" title="GenMSIL.this.global.icodes.IMethod">m</a>
      <a href="#288599" title="=&gt; scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.Local,ch.epfl.lamp.compiler.msil.emit.LocalBuilder]">localBuilders</a>.<span title="()Unit">clear</span>
      <a href="#288589" title="(m: GenMSIL.this.global.icodes.IMethod)Unit">computeLocalVarsIndex</a>(<a href="#293840" title="GenMSIL.this.global.icodes.IMethod">m</a>)

      <span title="Unit" class="keyword">if</span> (<a href="#293840" title="GenMSIL.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61494" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>.<a href="../../symtab/Symbols.scala.html#27073" title="=&gt; Boolean">isClassConstructor</a>){
        <a href="#288499" title="(x$1: ch.epfl.lamp.compiler.msil.emit.ILGenerator)Unit">mcode</a> = <a href="../../symtab/clr/CLRTypes.scala.html#288347" title="(key: GenMSIL.this.global.loaders.clrTypes.global.Symbol)ch.epfl.lamp.compiler.msil.ConstructorInfo">constructors</a>(<a href="#293840" title="GenMSIL.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61494" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>.<span title="[T0]T0">asInstanceOf</span><span title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">[</span>clrTypes.global.<a href="../../symtab/Symbols.scala.html#26286" title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">Symbol</a>]).<span title="[T0]T0">asInstanceOf</span><span title="ch.epfl.lamp.compiler.msil.emit.ConstructorBuilder">[</span><a title="ch.epfl.lamp.compiler.msil.emit.ConstructorBuilder" id="288126">ConstructorBuilder</a>].<span title="()ch.epfl.lamp.compiler.msil.emit.ILGenerator">GetILGenerator</span>()
      } <span class="keyword">else</span> {
        <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.MethodBuilder" id="293914">mBuilder</a> = <a href="../../symtab/clr/CLRTypes.scala.html#288349" title="(key: GenMSIL.this.global.loaders.clrTypes.global.Symbol)ch.epfl.lamp.compiler.msil.MethodInfo">methods</a>(<a href="#293840" title="GenMSIL.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61494" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>.<span title="[T0]T0">asInstanceOf</span><span title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">[</span>clrTypes.global.<a href="../../symtab/Symbols.scala.html#26286" title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">Symbol</a>]).<span title="[T0]T0">asInstanceOf</span><span title="ch.epfl.lamp.compiler.msil.emit.MethodBuilder">[</span><span title="ch.epfl.lamp.compiler.msil.emit.MethodBuilder">MethodBuilder</span>]
        <span title="Unit" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="#293914" title="ch.epfl.lamp.compiler.msil.emit.MethodBuilder">mBuilder</a>.<a title="()Boolean" id="291802">IsAbstract</a>())
          <span class="keyword">try</span> {
            <a href="#288499" title="(x$1: ch.epfl.lamp.compiler.msil.emit.ILGenerator)Unit">mcode</a> = <a href="#293914" title="ch.epfl.lamp.compiler.msil.emit.MethodBuilder">mBuilder</a>.<span title="()ch.epfl.lamp.compiler.msil.emit.ILGenerator">GetILGenerator</span>()
          } <span class="keyword">catch</span> {
            <span title="Nothing" class="keyword">case</span> <a title="Exception" id="293935">e</a>: <span title="Exception">Exception</span> =&gt;
              <span title="object java.lang.System">System</span>.<span title="java.io.PrintStream">out</span>.<span title="(x$1: java.lang.String)Unit">println</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;m.symbol       = &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="../../symtab/Flags.scala.html#10482" title="object scala.tools.nsc.symtab.Flags">Flags</a>.<a href="../../symtab/Flags.scala.html#29000" title="(flags: Long)String">flagsToString</a>(<a href="#293840" title="GenMSIL.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61494" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>.<a href="../../symtab/Symbols.scala.html#27150" title="=&gt; Long">flags</a>) <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; &quot;)" class="string">&quot; &quot;</span> + <a href="#293840" title="GenMSIL.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61494" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>)
              <span title="object java.lang.System">System</span>.<span title="java.io.PrintStream">out</span>.<span title="(x$1: java.lang.String)Unit">println</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;m.symbol.owner = &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="../../symtab/Flags.scala.html#10482" title="object scala.tools.nsc.symtab.Flags">Flags</a>.<a href="../../symtab/Flags.scala.html#29000" title="(flags: Long)String">flagsToString</a>(<a href="#293840" title="GenMSIL.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61494" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>.<a href="../../symtab/Symbols.scala.html#27142" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">owner</a>.<a href="../../symtab/Symbols.scala.html#27150" title="=&gt; Long">flags</a>) <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; &quot;)" class="string">&quot; &quot;</span> + <a href="#293840" title="GenMSIL.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61494" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>.<a href="../../symtab/Symbols.scala.html#27142" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">owner</a>)
              <span title="object java.lang.System">System</span>.<span title="java.io.PrintStream">out</span>.<span title="(x$1: java.lang.String)Unit">println</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;mBuilder       = &quot;</span> + <a href="#293914" title="ch.epfl.lamp.compiler.msil.emit.MethodBuilder">mBuilder</a>)
              <span title="object java.lang.System">System</span>.<span title="java.io.PrintStream">out</span>.<span title="(x$1: java.lang.String)Unit">println</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;mBuilder.DeclaringType = &quot;</span> <span title="(x$1: Any)java.lang.String">+</span>
                                 <a title="object ch.epfl.lamp.compiler.msil.TypeAttributes" id="109632">TypeAttributes</a>.<a title="(x$1: Int)java.lang.String" id="294010">toString</a>(<a href="#293914" title="ch.epfl.lamp.compiler.msil.emit.MethodBuilder">mBuilder</a>.<span title="ch.epfl.lamp.compiler.msil.Type">DeclaringType</span>.<a title="Int" id="288712">Attributes</a>) <span title="(x$1: Any)java.lang.String">+</span>
                                 <span title="java.lang.String(&quot;::&quot;)" class="string">&quot;::&quot;</span> + <a href="#293914" title="ch.epfl.lamp.compiler.msil.emit.MethodBuilder">mBuilder</a>.<span title="ch.epfl.lamp.compiler.msil.Type">DeclaringType</span>)
              <span title="Nothing" class="keyword">throw</span> <a href="#293935" title="Exception">e</a>
          }
          <span class="keyword">else</span>
            <a href="#288499" title="(x$1: ch.epfl.lamp.compiler.msil.emit.ILGenerator)Unit">mcode</a> = <span title="Null(null)" class="keyword">null</span>
      }

      <span title="Unit" class="keyword">if</span> (<a href="#288499" title="(x$1: AnyRef)Boolean">mcode</a> != <span title="Null(null)" class="keyword">null</span>) {
        <span class="keyword">for</span> (<a title="GenMSIL.this.global.icodes.Local" id="294057">local</a> &lt;- <a href="#293840" title="GenMSIL.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61515" title="(that: List[GenMSIL.this.global.icodes.Local])List[GenMSIL.this.global.icodes.Local]">locals</a> <span title="(f: (GenMSIL.this.global.icodes.Local) =&gt; Unit)Unit">--</span> <a href="#293840" title="GenMSIL.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61518" title="=&gt; List[GenMSIL.this.global.icodes.Local]">params</a>) {
          <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37988" title="=&gt; Boolean">value</a>)
            <a href="../../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;add local var: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#294057" title="GenMSIL.this.global.icodes.Local">local</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;, of kind &quot;)" class="string">&quot;, of kind &quot;</span> + <a href="#294057" title="GenMSIL.this.global.icodes.Local">local</a>.<a href="../icode/Members.scala.html#61022" title="=&gt; GenMSIL.this.global.icodes.TypeKind">kind</a>)
          <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.Type" id="294058">t</a>: <span title="ch.epfl.lamp.compiler.msil.Type">MsilType</span> = <a href="#288602" title="(t: GenMSIL.this.global.icodes.TypeKind)ch.epfl.lamp.compiler.msil.Type">msilType</a>(<a href="#294057" title="GenMSIL.this.global.icodes.Local">local</a>.<a href="../icode/Members.scala.html#61022" title="=&gt; GenMSIL.this.global.icodes.TypeKind">kind</a>)
          <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.LocalBuilder" id="294059">localBuilder</a> = <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(localType: ch.epfl.lamp.compiler.msil.Type)ch.epfl.lamp.compiler.msil.emit.LocalBuilder">DeclareLocal</span>(<a href="#294058" title="ch.epfl.lamp.compiler.msil.Type">t</a>)
          <a href="#294059" title="ch.epfl.lamp.compiler.msil.emit.LocalBuilder">localBuilder</a>.<span title="(name: String)Unit">SetLocalSymInfo</span>(<a href="#288590" title="(sym: GenMSIL.this.global.Symbol)String">msilName</a>(<a href="#294057" title="GenMSIL.this.global.icodes.Local">local</a>.<a href="../icode/Members.scala.html#61020" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">sym</a>))
          <a href="#288599" title="(key: GenMSIL.this.global.icodes.Local,value: ch.epfl.lamp.compiler.msil.emit.LocalBuilder)Unit">localBuilders</a>(<a href="#294057" title="GenMSIL.this.global.icodes.Local">local</a>) = <a href="#294059" title="ch.epfl.lamp.compiler.msil.emit.LocalBuilder">localBuilder</a>
        }
        <a href="#288529" title="(m: GenMSIL.this.global.icodes.IMethod)Unit">genCode</a>(<a href="#293840" title="GenMSIL.this.global.icodes.IMethod">m</a>)
      }

    }

    <span class="keyword">var</span> <a title="List[GenMSIL.this.global.icodes.BasicBlock]" id="288524">linearization</a>: <span title="List[GenMSIL.this.global.icodes.BasicBlock]">List</span>[BasicBlock] = <span title="object Nil">Nil</span>
    // a &quot;ret&quot; instruction is needed (which is not present in
    //  icode) if there's no code after a try-catch block
    <span class="keyword">var</span> <a title="Boolean" id="288527">needAdditionalRet</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span>

    <span class="keyword">def</span> <a title="(m: GenMSIL.this.global.icodes.IMethod)Unit" id="288529">genCode</a>(<a title="GenMSIL.this.global.icodes.IMethod" id="294098">m</a>: <a href="../icode/Members.scala.html#46405" title="GenMSIL.this.global.icodes.IMethod">IMethod</a>) {
      <a href="#288490" title="(x$1: GenMSIL.this.global.icodes.Code)Unit">code</a> = <a href="#294098" title="GenMSIL.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61497" title="=&gt; GenMSIL.this.global.icodes.Code">code</a>

      <a href="#288584" title="=&gt; scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.BasicBlock,ch.epfl.lamp.compiler.msil.emit.Label]">labels</a>.<span title="()Unit">clear</span>
      <a href="#288524" title="(x$1: List[GenMSIL.this.global.icodes.BasicBlock])Unit">linearization</a> = <a href="../icode/ICodes.scala.html#46381" title="=&gt; GenMSIL.this.global.icodes.Linearizer">linearizer</a>.<a href="../icode/Linearizers.scala.html#62481" title="(c: GenMSIL.this.global.icodes.IMethod)List[GenMSIL.this.global.icodes.BasicBlock]">linearize</a>(<a href="#294098" title="GenMSIL.this.global.icodes.IMethod">m</a>)
      <span class="keyword">val</span> <a title="List[GenMSIL.this.global.icodes.BasicBlock]" id="294102">orderedBlocks</a> = (<span title="List[GenMSIL.this.global.icodes.BasicBlock]" class="keyword">if</span> (<a href="#294098" title="GenMSIL.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61503" title="(x$1: AnyRef)Boolean">exh</a> != <span title="object Nil">Nil</span>) <a href="#288563" title="(blocks: List[GenMSIL.this.global.icodes.BasicBlock],exH: List[GenMSIL.this.global.icodes.ExceptionHandler])List[GenMSIL.this.global.icodes.BasicBlock]">orderBlocksForExh</a>(<a href="#288524" title="=&gt; List[GenMSIL.this.global.icodes.BasicBlock]">linearization</a>, <a href="#294098" title="GenMSIL.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61503" title="=&gt; List[GenMSIL.this.global.icodes.ExceptionHandler]">exh</a>)
                           <span class="keyword">else</span> <a href="#288524" title="=&gt; List[GenMSIL.this.global.icodes.BasicBlock]">linearization</a>)

      <a href="#288588" title="(bs: List[GenMSIL.this.global.icodes.BasicBlock])Unit">makeLabels</a>(<a href="#294102" title="List[GenMSIL.this.global.icodes.BasicBlock]">orderedBlocks</a>) // orderBlocksForExh may create new Blocks -&gt; new Labels
      <a href="#288573" title="(l: List[GenMSIL.this.global.icodes.BasicBlock])Unit">genBlocks</a>(<a href="#294102" title="List[GenMSIL.this.global.icodes.BasicBlock]">orderedBlocks</a>)
      <span title="Unit" class="keyword">if</span> (<a href="#288527" title="=&gt; Boolean">needAdditionalRet</a>) {
        <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ret</span>)
        <a href="#288527" title="(x$1: Boolean)Unit">needAdditionalRet</a> = <span title="Boolean(false)" class="keyword">false</span>
      }
    }

    <span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class ExHInstruction extends java.lang.Object with ScalaObject" id="288530">ExHInstruction</a><span title="ScalaObject">(</span><a title="GenMSIL.this.global.icodes.ExceptionHandler" id="294143">handler</a>: <a href="../icode/ExceptionHandlers.scala.html#46468" title="GenMSIL.this.global.icodes.ExceptionHandler">ExceptionHandler</a>) { }
    case <span class="keyword">class</span> <a title="class BeginExceptionBlock extends BytecodeGenerator.this.ExHInstruction with ScalaObject with Product" id="294175">BeginExceptionBlock</a><span title="ScalaObject">(</span><a title="GenMSIL.this.global.icodes.ExceptionHandler" id="303831">handler</a>: <a href="../icode/ExceptionHandlers.scala.html#46468" title="GenMSIL.this.global.icodes.ExceptionHandler">ExceptionHandler</a>) <span class="keyword">extends</span> <a href="#288530" title="BytecodeGenerator.this.ExHInstruction">ExHInstruction</a>(<a href="#303831" title="GenMSIL.this.global.icodes.ExceptionHandler">handler</a>)
    case <span class="keyword">class</span> <a title="class BeginCatchBlock extends BytecodeGenerator.this.ExHInstruction with ScalaObject with Product" id="294251">BeginCatchBlock</a><span title="ScalaObject">(</span><a title="GenMSIL.this.global.icodes.ExceptionHandler" id="303821">handler</a>: <a href="../icode/ExceptionHandlers.scala.html#46468" title="GenMSIL.this.global.icodes.ExceptionHandler">ExceptionHandler</a>, <a title="ch.epfl.lamp.compiler.msil.Type" id="303822">exceptionType</a>: <span title="ch.epfl.lamp.compiler.msil.Type">MsilType</span>) <span class="keyword">extends</span> <a href="#288530" title="BytecodeGenerator.this.ExHInstruction">ExHInstruction</a>(<a href="#303821" title="GenMSIL.this.global.icodes.ExceptionHandler">handler</a>)
    case <span class="keyword">class</span> <a title="class BeginFinallyBlock extends BytecodeGenerator.this.ExHInstruction with ScalaObject with Product" id="294334">BeginFinallyBlock</a><span title="ScalaObject">(</span><a title="GenMSIL.this.global.icodes.ExceptionHandler" id="303813">handler</a>: <a href="../icode/ExceptionHandlers.scala.html#46468" title="GenMSIL.this.global.icodes.ExceptionHandler">ExceptionHandler</a>) <span class="keyword">extends</span> <a href="#288530" title="BytecodeGenerator.this.ExHInstruction">ExHInstruction</a>(<a href="#303813" title="GenMSIL.this.global.icodes.ExceptionHandler">handler</a>)
    case <span class="keyword">class</span> <a title="class EndExceptionBlock extends BytecodeGenerator.this.ExHInstruction with ScalaObject with Product" id="294400">EndExceptionBlock</a><span title="ScalaObject">(</span><a title="GenMSIL.this.global.icodes.ExceptionHandler" id="303805">handler</a>: <a href="../icode/ExceptionHandlers.scala.html#46468" title="GenMSIL.this.global.icodes.ExceptionHandler">ExceptionHandler</a>) <span class="keyword">extends</span> <a href="#288530" title="BytecodeGenerator.this.ExHInstruction">ExHInstruction</a>(<a href="#303805" title="GenMSIL.this.global.icodes.ExceptionHandler">handler</a>)


    <span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class Block extends java.lang.Object with ScalaObject" id="288543">Block</a> <span title="ScalaObject">{</span>
      <span class="keyword">var</span> <a title="Boolean" id="294439">closed</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span>
      <span class="keyword">def</span> <a title="=&gt; Option[BytecodeGenerator.this.BlockList0]" id="294441">parentBlockList</a>: <span title="Option[BytecodeGenerator.this.BlockList0]">Option</span>[BlockList0]
      <span class="keyword">def</span> <a title="=&gt; GenMSIL.this.global.icodes.BasicBlock" id="294442">firstBasicBlock</a>: <a href="../icode/BasicBlocks.scala.html#46410" title="GenMSIL.this.global.icodes.BasicBlock">BasicBlock</a>
      <span class="keyword">def</span> <a title="=&gt; GenMSIL.this.global.icodes.BasicBlock" id="294443">lastBasicBlock</a>: <a href="../icode/BasicBlocks.scala.html#46410" title="GenMSIL.this.global.icodes.BasicBlock">BasicBlock</a>
//      def getExceptionBlock(exh: ExceptionHandler): Option[ExceptionBlock]
      <span class="keyword">def</span> <a title="()Unit" id="294444">close</a>(): <span title="Unit">Unit</span>
/*      protected def findExceptionBlock(list: List[Block], exh: ExceptionHandler): Option[ExceptionBlock] = {
        var res: Option[ExceptionBlock] = None
        var i: Int = 0
        while (i &lt; list.length &amp;&amp; res == None) {
          val b = list(i)
          val exB = b.getExceptionBlock(exh)
          exB match {
            case some: Some[ExceptionBlock] =&gt; res = some
            case None =&gt; ()
          }
          i = i + 1
        }
        res
      } */
    }
    case <span class="keyword">class</span> <a title="class CodeBlock extends BytecodeGenerator.this.Block with ScalaObject with Product" id="294545">CodeBlock</a><span title="ScalaObject">(</span><a title="BytecodeGenerator.this.BlockList0" id="303797">parent</a>: <a href="#288547" title="BytecodeGenerator.this.BlockList0">BlockList0</a>) <span class="keyword">extends</span> <a href="#288543" title="BytecodeGenerator.this.Block">Block</a> {
      <span class="keyword">var</span> <a title="List[GenMSIL.this.global.icodes.BasicBlock]" id="294461">basicBlocks</a>: <span title="List[GenMSIL.this.global.icodes.BasicBlock]">List</span>[BasicBlock] = <span title="object Nil">Nil</span>
      <span class="keyword">def</span> <a title="=&gt; Boolean" id="294463">isEmpty</a> = <a href="#294461" title="=&gt; List[GenMSIL.this.global.icodes.BasicBlock]">basicBlocks</a>.<span title="=&gt; Boolean">isEmpty</span>
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; GenMSIL.this.global.icodes.BasicBlock" id="294464">firstBasicBlock</a>: <a href="../icode/BasicBlocks.scala.html#46410" title="GenMSIL.this.global.icodes.BasicBlock">BasicBlock</a> = {
        <span title="GenMSIL.this.global.icodes.BasicBlock" class="keyword">if</span>(<a href="#294463" title="=&gt; Boolean">isEmpty</a>) <span title="Null(null)" class="keyword">null</span>
        <span class="keyword">else</span> {
          <span title="GenMSIL.this.global.icodes.BasicBlock" class="keyword">if</span> (<a href="#294439" title="=&gt; Boolean">closed</a>) <a href="#294461" title="=&gt; List[GenMSIL.this.global.icodes.BasicBlock]">basicBlocks</a>.<span title="=&gt; GenMSIL.this.global.icodes.BasicBlock">head</span>
          <span class="keyword">else</span> <a href="#294461" title="=&gt; List[GenMSIL.this.global.icodes.BasicBlock]">basicBlocks</a>.<span title="=&gt; GenMSIL.this.global.icodes.BasicBlock">last</span>
        }
      }
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; GenMSIL.this.global.icodes.BasicBlock" id="294465">lastBasicBlock</a>: <a href="../icode/BasicBlocks.scala.html#46410" title="GenMSIL.this.global.icodes.BasicBlock">BasicBlock</a> = {
        <span title="GenMSIL.this.global.icodes.BasicBlock" class="keyword">if</span>(<a href="#294463" title="=&gt; Boolean">isEmpty</a>) <span title="Null(null)" class="keyword">null</span>
        <span class="keyword">else</span> {
          <span title="GenMSIL.this.global.icodes.BasicBlock" class="keyword">if</span> (<a href="#294439" title="=&gt; Boolean">closed</a>) <a href="#294461" title="=&gt; List[GenMSIL.this.global.icodes.BasicBlock]">basicBlocks</a>.<span title="=&gt; GenMSIL.this.global.icodes.BasicBlock">last</span>
          <span class="keyword">else</span> <a href="#294461" title="=&gt; List[GenMSIL.this.global.icodes.BasicBlock]">basicBlocks</a>.<span title="=&gt; GenMSIL.this.global.icodes.BasicBlock">head</span>
        }
      }
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Some[BytecodeGenerator.this.BlockList0]" id="294466">parentBlockList</a> = <span title="(x: BytecodeGenerator.this.BlockList0)Some[BytecodeGenerator.this.BlockList0]">Some</span>(<a href="#303797" title="=&gt; BytecodeGenerator.this.BlockList0">parent</a>)
//      override def getExceptionBlock(exh: ExceptionHandler): Option[ExceptionBlock] = None
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="294467">close</a>() {
        <a href="#294461" title="(x$1: List[GenMSIL.this.global.icodes.BasicBlock])Unit">basicBlocks</a> = <a href="#294461" title="=&gt; List[GenMSIL.this.global.icodes.BasicBlock]">basicBlocks</a>.<span title="=&gt; List[GenMSIL.this.global.icodes.BasicBlock]">reverse</span>
        <a href="#294439" title="(x$1: Boolean)Unit">closed</a> = <span title="Boolean(true)" class="keyword">true</span>
      }
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="()java.lang.String" id="294468">toString</a>() = {
        <span class="keyword">var</span> <a title="java.lang.String" id="294514">res</a> = <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>
        <a href="#294514" title="java.lang.String">res</a> = <a href="#294514" title="(x$1: Any)java.lang.String">res</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="#295384" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>.<a href="#294517" title="=&gt; java.lang.String">indent</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;CodeBlock(&quot;)" class="string">&quot;CodeBlock(&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#294461" title="=&gt; List[GenMSIL.this.global.icodes.BasicBlock]">basicBlocks</a> + <span title="java.lang.String(&quot;)\012&quot;)" class="string">&quot;)\n&quot;</span>
        <a href="#294514" title="java.lang.String">res</a>
      }
    }
    <span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class BlockList0 extends BytecodeGenerator.this.Block with ScalaObject" id="288547">BlockList0</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#288543" title="BytecodeGenerator.this.Block">Block</a> {
      <span class="keyword">var</span> <a title="List[BytecodeGenerator.this.Block]" id="294474">blocks</a>: <span title="List[BytecodeGenerator.this.Block]">List</span>[Block] = <span title="object Nil">Nil</span>
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; GenMSIL.this.global.icodes.BasicBlock" id="294476">firstBasicBlock</a>: <a href="../icode/BasicBlocks.scala.html#46410" title="GenMSIL.this.global.icodes.BasicBlock">BasicBlock</a> = {
        <span title="GenMSIL.this.global.icodes.BasicBlock" class="keyword">if</span>(<a href="#294474" title="=&gt; List[BytecodeGenerator.this.Block]">blocks</a>.<span title="=&gt; Boolean">isEmpty</span>) <span title="Null(null)" class="keyword">null</span>
        <span class="keyword">else</span> {
          <span title="GenMSIL.this.global.icodes.BasicBlock" class="keyword">if</span> (<a href="#294439" title="=&gt; Boolean">closed</a>) <a href="#294474" title="=&gt; List[BytecodeGenerator.this.Block]">blocks</a>.<span title="=&gt; BytecodeGenerator.this.Block">head</span>.<a href="#294442" title="=&gt; GenMSIL.this.global.icodes.BasicBlock">firstBasicBlock</a>
          <span class="keyword">else</span> <a href="#294474" title="=&gt; List[BytecodeGenerator.this.Block]">blocks</a>.<span title="=&gt; BytecodeGenerator.this.Block">last</span>.<a href="#294442" title="=&gt; GenMSIL.this.global.icodes.BasicBlock">firstBasicBlock</a>
        }
      }
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; GenMSIL.this.global.icodes.BasicBlock" id="294477">lastBasicBlock</a>: <a href="../icode/BasicBlocks.scala.html#46410" title="GenMSIL.this.global.icodes.BasicBlock">BasicBlock</a> = {
        <span title="GenMSIL.this.global.icodes.BasicBlock" class="keyword">if</span>(<a href="#294474" title="=&gt; List[BytecodeGenerator.this.Block]">blocks</a>.<span title="=&gt; Boolean">isEmpty</span>) <span title="Null(null)" class="keyword">null</span>
        <span class="keyword">else</span> {
          <span title="GenMSIL.this.global.icodes.BasicBlock" class="keyword">if</span> (<a href="#294439" title="=&gt; Boolean">closed</a>) <a href="#294474" title="=&gt; List[BytecodeGenerator.this.Block]">blocks</a>.<span title="=&gt; BytecodeGenerator.this.Block">last</span>.<a href="#294443" title="=&gt; GenMSIL.this.global.icodes.BasicBlock">lastBasicBlock</a>
          <span class="keyword">else</span> <a href="#294474" title="=&gt; List[BytecodeGenerator.this.Block]">blocks</a>.<span title="=&gt; BytecodeGenerator.this.Block">head</span>.<a href="#294443" title="=&gt; GenMSIL.this.global.icodes.BasicBlock">lastBasicBlock</a>
        }
      }
/*      override def getExceptionBlock(exh: ExceptionHandler): Option[ExceptionBlock] = {
        findExceptionBlock(blocks, exh)
      } */
      <span class="keyword">def</span> <a title="(exh: GenMSIL.this.global.icodes.ExceptionHandler)BytecodeGenerator.this.ExceptionBlock" id="294478">addExceptionBlock</a>(<a title="GenMSIL.this.global.icodes.ExceptionHandler" id="294596">exh</a>: <a href="../icode/ExceptionHandlers.scala.html#46468" title="GenMSIL.this.global.icodes.ExceptionHandler">ExceptionHandler</a>) = {
        <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37988" title="=&gt; Boolean">value</a>)
          <a href="../../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;new exc block with &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#294596" title="GenMSIL.this.global.icodes.ExceptionHandler">exh</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; to &quot;)" class="string">&quot; to &quot;</span> + <a href="#288547" title="BytecodeGenerator.this.BlockList0" class="keyword">this</a>)
        <span class="keyword">val</span> <a title="BytecodeGenerator.this.ExceptionBlock" id="294599">e</a> = <span title="BytecodeGenerator.this.ExceptionBlock" class="keyword">new</span> <a href="#295204" title="BytecodeGenerator.this.ExceptionBlock">ExceptionBlock</a>(<a href="#288547" title="BytecodeGenerator.this.BlockList0" class="keyword">this</a>, <a href="#294596" title="GenMSIL.this.global.icodes.ExceptionHandler">exh</a>)
        <a href="#294474" title="(x$1: List[BytecodeGenerator.this.Block])Unit">blocks</a> = <a href="#294599" title="BytecodeGenerator.this.ExceptionBlock">e</a> <a href="#294637" title="BytecodeGenerator.this.ExceptionBlock">::</a> <a href="#294474" title="(x: BytecodeGenerator.this.Block)List[BytecodeGenerator.this.Block]">blocks</a>
        <a href="#294599" title="BytecodeGenerator.this.ExceptionBlock">e</a>
      }
      <span class="keyword">def</span> <a title="(bb: GenMSIL.this.global.icodes.BasicBlock)Unit" id="294479">addBasicBlock</a>(<a title="GenMSIL.this.global.icodes.BasicBlock" id="294647">bb</a>: <a href="../icode/BasicBlocks.scala.html#46410" title="GenMSIL.this.global.icodes.BasicBlock">BasicBlock</a>) = {
        <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37988" title="=&gt; Boolean">value</a>)
          <a href="../../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;adding bb &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#294647" title="GenMSIL.this.global.icodes.BasicBlock">bb</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; to &quot;)" class="string">&quot; to &quot;</span> + <a href="#288547" title="BytecodeGenerator.this.BlockList0" class="keyword">this</a>)
        <span class="keyword">var</span> <a title="BytecodeGenerator.this.CodeBlock" id="294650">cb</a>: <a href="#294545" title="BytecodeGenerator.this.CodeBlock">CodeBlock</a> = <span title="BytecodeGenerator.this.CodeBlock" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="#294474" title="=&gt; List[BytecodeGenerator.this.Block]">blocks</a>.<span title="=&gt; Boolean">isEmpty</span>) {
          <a href="#294474" title="=&gt; List[BytecodeGenerator.this.Block]">blocks</a>.<span title="=&gt; BytecodeGenerator.this.Block">head</span> <span title="BytecodeGenerator.this.CodeBlock" class="keyword">match</span> {
            <span title="BytecodeGenerator.this.CodeBlock" class="keyword">case</span> <a title="BytecodeGenerator.this.CodeBlock" id="294663">blk</a>: <a href="#294545" title="BytecodeGenerator.this.CodeBlock">CodeBlock</a> =&gt; <a href="#294663" title="BytecodeGenerator.this.CodeBlock">blk</a>
            <span title="Null(null)" class="keyword">case</span> _ =&gt; <span title="Null(null)" class="keyword">null</span>
          }
        } <span class="keyword">else</span> <span title="Null(null)" class="keyword">null</span>
        <span title="Unit" class="keyword">if</span> (<a href="#294650" title="(x$1: AnyRef)Boolean">cb</a> == <span title="Null(null)" class="keyword">null</span>) {
          <a href="#294650" title="BytecodeGenerator.this.CodeBlock">cb</a> = <span title="BytecodeGenerator.this.CodeBlock" class="keyword">new</span> <a href="#294545" title="BytecodeGenerator.this.CodeBlock">CodeBlock</a>(<a href="#288547" title="BytecodeGenerator.this.BlockList0" class="keyword">this</a>)
          <a href="#294474" title="(x$1: List[BytecodeGenerator.this.Block])Unit">blocks</a> = <a href="#294650" title="BytecodeGenerator.this.CodeBlock">cb</a> <a href="#294673" title="BytecodeGenerator.this.CodeBlock">::</a> <a href="#294474" title="(x: BytecodeGenerator.this.Block)List[BytecodeGenerator.this.Block]">blocks</a>
        }
        <a href="#294650" title="BytecodeGenerator.this.CodeBlock">cb</a>.<a href="#294461" title="(x$1: List[GenMSIL.this.global.icodes.BasicBlock])Unit">basicBlocks</a> = <a href="#294647" title="GenMSIL.this.global.icodes.BasicBlock">bb</a> <a href="#294683" title="GenMSIL.this.global.icodes.BasicBlock">::</a> <a href="#294650" title="BytecodeGenerator.this.CodeBlock">cb</a>.<a href="#294461" title="(x: GenMSIL.this.global.icodes.BasicBlock)List[GenMSIL.this.global.icodes.BasicBlock]">basicBlocks</a>
      }
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="294480">close</a>() {
        <a href="#294474" title="=&gt; List[BytecodeGenerator.this.Block]">blocks</a>.<span title="(f: (BytecodeGenerator.this.Block) =&gt; Unit)Unit">foreach</span>(<a href="#294711" title="BytecodeGenerator.this.Block">_</a>.<a href="#294444" title="()Unit">close</a>)
        <a href="#294474" title="(x$1: List[BytecodeGenerator.this.Block])Unit">blocks</a> = <a href="#294474" title="=&gt; List[BytecodeGenerator.this.Block]">blocks</a>.<span title="=&gt; List[BytecodeGenerator.this.Block]">reverse</span>
        <a href="#294439" title="(x$1: Boolean)Unit">closed</a> = <span title="Boolean(true)" class="keyword">true</span>
      }
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="()java.lang.String" id="294481">toString</a>() = {
        <span class="keyword">var</span> <a title="java.lang.String" id="294724">res</a> = <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>
        <a href="#294724" title="java.lang.String">res</a> = <a href="#294724" title="(x$1: Any)java.lang.String">res</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="#295384" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>.<a href="#294517" title="=&gt; java.lang.String">indent</a> + <span title="java.lang.String(&quot;BlockList0:\012&quot;)" class="string">&quot;BlockList0:\n&quot;</span>
        <a href="#295384" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>.<a href="#294517" title="(x$1: java.lang.String)Unit">indent</a> = <a href="#295384" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>.<a href="#294517" title="(x$1: Any)java.lang.String">indent</a> + <span title="java.lang.String(&quot;  &quot;)" class="string">&quot;  &quot;</span>
        <span class="keyword">for</span> (<a title="BytecodeGenerator.this.Block" id="294751">b</a> &lt;- <a href="#294474" title="(f: (BytecodeGenerator.this.Block) =&gt; Unit)Unit">blocks</a>)
          <a href="#294724" title="java.lang.String">res</a> = <a href="#294724" title="(x$1: Any)java.lang.String">res</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="#294751" title="BytecodeGenerator.this.Block">b</a> + <span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span>
        <a href="#295384" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>.<a href="#294517" title="(x$1: java.lang.String)Unit">indent</a> = <a href="#295384" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>.<a href="#294517" title="=&gt; java.lang.String">indent</a>.<span title="(x$1: Int,x$2: Int)java.lang.String">substring</span>(<span title="Int(0)" class="int">0</span>,<a href="#295384" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>.<a href="#294517" title="=&gt; java.lang.String">indent</a>.<span title="(x$1: Int)Int">length</span>-<span title="Int(2)" class="int">2</span>)
        <a href="#294724" title="java.lang.String">res</a>
      }
    }
    case <span class="keyword">class</span> <a title="class BlockList extends BytecodeGenerator.this.BlockList0 with ScalaObject with Product" id="294865">BlockList</a><span title="ScalaObject">(</span><a title="BytecodeGenerator.this.Block" id="303789">parent</a>: <a href="#288543" title="BytecodeGenerator.this.Block">Block</a>) <span class="keyword">extends</span> <a href="#288547" title="BytecodeGenerator.this.BlockList0">BlockList0</a> {
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Option[BytecodeGenerator.this.BlockList0]" id="294794">parentBlockList</a>: <span title="Option[BytecodeGenerator.this.BlockList0]">Option</span>[BlockList0] = {
        <span title="Option[BytecodeGenerator.this.BlockList0]" class="keyword">if</span> (<a href="#303789" title="(x$1: AnyRef)Boolean">parent</a> == <a href="#295384" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>)
          <span title="(x: object BytecodeGenerator.this.TopBlock)Some[object BytecodeGenerator.this.TopBlock]">Some</span>(<a href="#295384" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>)
        <span class="keyword">else</span> <a href="#303789" title="=&gt; BytecodeGenerator.this.Block">parent</a> <span title="Option[BytecodeGenerator.this.BlockList0]" class="keyword">match</span> {
          <span title="Some[BytecodeGenerator.this.BlockList]" class="keyword">case</span> <a title="BytecodeGenerator.this.BlockList" id="294815">bl</a>: <a href="#294865" title="BytecodeGenerator.this.BlockList">BlockList</a> =&gt; <span title="(x: BytecodeGenerator.this.BlockList)Some[BytecodeGenerator.this.BlockList]">Some</span>(<a href="#294815" title="BytecodeGenerator.this.BlockList">bl</a>)
          <span title="Some[BytecodeGenerator.this.CatchBlock]" class="keyword">case</span> <a title="BytecodeGenerator.this.CatchBlock" id="294821">cb</a>: <a href="#295298" title="BytecodeGenerator.this.CatchBlock">CatchBlock</a> =&gt; <span title="(x: BytecodeGenerator.this.CatchBlock)Some[BytecodeGenerator.this.CatchBlock]">Some</span>(<a href="#294821" title="BytecodeGenerator.this.CatchBlock">cb</a>)
          <span title="Option[BytecodeGenerator.this.BlockList0]" class="keyword">case</span> _ =&gt; <a href="#303789" title="=&gt; BytecodeGenerator.this.Block">parent</a>.<a href="#294441" title="=&gt; Option[BytecodeGenerator.this.BlockList0]">parentBlockList</a>
        }
      }
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="()java.lang.String" id="294795">toString</a>() = {
        <span class="keyword">var</span> <a title="java.lang.String" id="294839">res</a> = <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>
        <a href="#294839" title="java.lang.String">res</a> = <a href="#294839" title="(x$1: Any)java.lang.String">res</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="#295384" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>.<a href="#294517" title="=&gt; java.lang.String">indent</a> + <span title="java.lang.String(&quot;BlockList:\012&quot;)" class="string">&quot;BlockList:\n&quot;</span>
        <a href="#294839" title="java.lang.String">res</a> = <a href="#294839" title="(x$1: Any)java.lang.String">res</a> + <span class="keyword">super</span>.<a href="#294481" title="()java.lang.String">toString</a>()
        <a href="#294839" title="java.lang.String">res</a>
      }
    }
    case <span class="keyword">class</span> <a title="class ExceptionBlock extends BytecodeGenerator.this.Block with ScalaObject with Product" id="295204">ExceptionBlock</a><span title="ScalaObject">(</span><a title="BytecodeGenerator.this.Block" id="303779">parent</a>: <a href="#288543" title="BytecodeGenerator.this.Block">Block</a>, <a title="GenMSIL.this.global.icodes.ExceptionHandler" id="303780">handler</a>: <a href="../icode/ExceptionHandlers.scala.html#46468" title="GenMSIL.this.global.icodes.ExceptionHandler">ExceptionHandler</a>) <span class="keyword">extends</span> <a href="#288543" title="BytecodeGenerator.this.Block">Block</a> {
      <span class="keyword">var</span> <a title="BytecodeGenerator.this.BlockList" id="294618">tryBlock</a>: <a href="#294865" title="BytecodeGenerator.this.BlockList">BlockList</a> = <span title="BytecodeGenerator.this.BlockList" class="keyword">new</span> <a href="#294865" title="BytecodeGenerator.this.BlockList">BlockList</a>(<a href="#295204" title="BytecodeGenerator.this.ExceptionBlock" class="keyword">this</a>)
      <span class="keyword">var</span> <a title="List[BytecodeGenerator.this.CatchBlock]" id="294621">catchBlocks</a>: <span title="List[BytecodeGenerator.this.CatchBlock]">List</span>[CatchBlock] = <span title="object Nil">Nil</span>
      <span class="keyword">var</span> <a title="BytecodeGenerator.this.BlockList" id="294624">finallyBlock</a>: <a href="#294865" title="BytecodeGenerator.this.BlockList">BlockList</a> = <span title="BytecodeGenerator.this.BlockList" class="keyword">new</span> <a href="#294865" title="BytecodeGenerator.this.BlockList">BlockList</a>(<a href="#295204" title="BytecodeGenerator.this.ExceptionBlock" class="keyword">this</a>)
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; GenMSIL.this.global.icodes.BasicBlock" id="294626">firstBasicBlock</a> = {
        <a href="#294618" title="=&gt; BytecodeGenerator.this.BlockList">tryBlock</a>.<a href="#294476" title="=&gt; GenMSIL.this.global.icodes.BasicBlock">firstBasicBlock</a>
      }
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; GenMSIL.this.global.icodes.BasicBlock" id="294627">lastBasicBlock</a> = {
        <span title="GenMSIL.this.global.icodes.BasicBlock" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="#294624" title="=&gt; BytecodeGenerator.this.BlockList">finallyBlock</a>.<a href="#294474" title="=&gt; List[BytecodeGenerator.this.Block]">blocks</a>.<span title="=&gt; Boolean">isEmpty</span>)
          <a href="#294624" title="=&gt; BytecodeGenerator.this.BlockList">finallyBlock</a>.<a href="#294477" title="=&gt; GenMSIL.this.global.icodes.BasicBlock">lastBasicBlock</a>
        <span class="keyword">else</span> <span title="GenMSIL.this.global.icodes.BasicBlock" class="keyword">if</span>(<span title="=&gt; Boolean">!</span><a href="#294621" title="=&gt; List[BytecodeGenerator.this.CatchBlock]">catchBlocks</a>.<span title="=&gt; Boolean">isEmpty</span>) {
          <span title="GenMSIL.this.global.icodes.BasicBlock" class="keyword">if</span> (<a href="#294439" title="=&gt; Boolean">closed</a>) <a href="#294621" title="=&gt; List[BytecodeGenerator.this.CatchBlock]">catchBlocks</a>.<span title="=&gt; BytecodeGenerator.this.CatchBlock">last</span>.<a href="#294477" title="=&gt; GenMSIL.this.global.icodes.BasicBlock">lastBasicBlock</a>
          <span class="keyword">else</span> <a href="#294621" title="=&gt; List[BytecodeGenerator.this.CatchBlock]">catchBlocks</a>.<span title="=&gt; BytecodeGenerator.this.CatchBlock">head</span>.<a href="#294477" title="=&gt; GenMSIL.this.global.icodes.BasicBlock">lastBasicBlock</a>
        } <span class="keyword">else</span> {
          <a href="#294618" title="=&gt; BytecodeGenerator.this.BlockList">tryBlock</a>.<a href="#294477" title="=&gt; GenMSIL.this.global.icodes.BasicBlock">lastBasicBlock</a>
        }
      }
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Option[BytecodeGenerator.this.BlockList0]" id="294628">parentBlockList</a>: <span title="Option[BytecodeGenerator.this.BlockList0]">Option</span>[BlockList0] = {
        <span title="Option[BytecodeGenerator.this.BlockList0]" class="keyword">if</span> (<a href="#303779" title="(x$1: AnyRef)Boolean">parent</a> == <a href="#295384" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>)
          <span title="(x: object BytecodeGenerator.this.TopBlock)Some[object BytecodeGenerator.this.TopBlock]">Some</span>(<a href="#295384" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>)
        <span class="keyword">else</span> <a href="#303779" title="=&gt; BytecodeGenerator.this.Block">parent</a> <span title="Option[BytecodeGenerator.this.BlockList0]" class="keyword">match</span> {
          <span title="Some[BytecodeGenerator.this.BlockList]" class="keyword">case</span> <a title="BytecodeGenerator.this.BlockList" id="294942">bl</a>: <a href="#294865" title="BytecodeGenerator.this.BlockList">BlockList</a> =&gt; <span title="(x: BytecodeGenerator.this.BlockList)Some[BytecodeGenerator.this.BlockList]">Some</span>(<a href="#294942" title="BytecodeGenerator.this.BlockList">bl</a>)
          <span title="Some[BytecodeGenerator.this.CatchBlock]" class="keyword">case</span> <a title="BytecodeGenerator.this.CatchBlock" id="294948">cb</a>: <a href="#295298" title="BytecodeGenerator.this.CatchBlock">CatchBlock</a> =&gt; <span title="(x: BytecodeGenerator.this.CatchBlock)Some[BytecodeGenerator.this.CatchBlock]">Some</span>(<a href="#294948" title="BytecodeGenerator.this.CatchBlock">cb</a>)
          <span title="Option[BytecodeGenerator.this.BlockList0]" class="keyword">case</span> _ =&gt; <a href="#303779" title="=&gt; BytecodeGenerator.this.Block">parent</a>.<a href="#294441" title="=&gt; Option[BytecodeGenerator.this.BlockList0]">parentBlockList</a>
        }
      }
/*      override def getExceptionBlock(exh: ExceptionHandler): Option[ExceptionBlock] = {
        if (exh == handler) Some(this)
        else {
          val t = if (tryBlock == null) Nil else List(tryBlock)
          val f = if (finallyBlock == null) Nil else List(finallyBlock)
          findExceptionBlock(t ::: catchBlocks ::: f, exh)
        }
      }
*/
      <span class="keyword">def</span> <a title="(exSym: GenMSIL.this.global.Symbol)BytecodeGenerator.this.CatchBlock" id="294629">addCatchBlock</a>(<a title="GenMSIL.this.global.Symbol" id="294954">exSym</a>: <a href="../../symtab/Symbols.scala.html#26286" title="GenMSIL.this.global.Symbol">Symbol</a>): <a href="#295298" title="BytecodeGenerator.this.CatchBlock">CatchBlock</a> = {
        <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37988" title="=&gt; Boolean">value</a>)
          <a href="../../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;new catch block with &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#294954" title="GenMSIL.this.global.Symbol">exSym</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; to &quot;)" class="string">&quot; to &quot;</span> + <a href="#295204" title="BytecodeGenerator.this.ExceptionBlock" class="keyword">this</a>)
        <span class="keyword">val</span> <a title="BytecodeGenerator.this.CatchBlock" id="294956">c</a> = <span title="BytecodeGenerator.this.CatchBlock" class="keyword">new</span> <a href="#295298" title="BytecodeGenerator.this.CatchBlock">CatchBlock</a>(<a href="#295204" title="BytecodeGenerator.this.ExceptionBlock" class="keyword">this</a>, <a href="#294954" title="GenMSIL.this.global.Symbol">exSym</a>)
        <a href="#294621" title="(x$1: List[BytecodeGenerator.this.CatchBlock])Unit">catchBlocks</a> = <a href="#294956" title="BytecodeGenerator.this.CatchBlock">c</a> <a href="#294971" title="BytecodeGenerator.this.CatchBlock">::</a> <a href="#294621" title="(x: BytecodeGenerator.this.CatchBlock)List[BytecodeGenerator.this.CatchBlock]">catchBlocks</a>
        <a href="#294956" title="BytecodeGenerator.this.CatchBlock">c</a>
      }
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="294630">close</a>() {
        <a href="#294618" title="=&gt; BytecodeGenerator.this.BlockList">tryBlock</a>.<a href="#294480" title="()Unit">close</a>
        <a href="#294621" title="=&gt; List[BytecodeGenerator.this.CatchBlock]">catchBlocks</a>.<span title="(f: (BytecodeGenerator.this.CatchBlock) =&gt; Unit)Unit">foreach</span>(<a href="#295002" title="BytecodeGenerator.this.CatchBlock">_</a>.<a href="#294480" title="()Unit">close</a>)
        <a href="#294621" title="(x$1: List[BytecodeGenerator.this.CatchBlock])Unit">catchBlocks</a> = <a href="#294621" title="=&gt; List[BytecodeGenerator.this.CatchBlock]">catchBlocks</a>.<span title="=&gt; List[BytecodeGenerator.this.CatchBlock]">reverse</span>
        <a href="#294624" title="=&gt; BytecodeGenerator.this.BlockList">finallyBlock</a>.<a href="#294480" title="()Unit">close</a>
        <a href="#294439" title="(x$1: Boolean)Unit">closed</a> = <span title="Boolean(true)" class="keyword">true</span>
      }
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="()java.lang.String" id="294631">toString</a>() = {
        <span class="keyword">var</span> <a title="java.lang.String" id="295018">res</a> = <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>
        <a href="#295018" title="java.lang.String">res</a> = <a href="#295018" title="(x$1: Any)java.lang.String">res</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="#295384" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>.<a href="#294517" title="=&gt; java.lang.String">indent</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;ExceptionBlock, handler: &quot;)" class="string">&quot;ExceptionBlock, handler: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#303780" title="=&gt; GenMSIL.this.global.icodes.ExceptionHandler">handler</a> + <span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span>
        <a href="#295018" title="java.lang.String">res</a> = <a href="#295018" title="(x$1: Any)java.lang.String">res</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="#295384" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>.<a href="#294517" title="=&gt; java.lang.String">indent</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;  &quot;)" class="string">&quot;  &quot;</span> + <span title="java.lang.String(&quot;try:\012&quot;)" class="string">&quot;try:\n&quot;</span>
        <a href="#295384" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>.<a href="#294517" title="(x$1: java.lang.String)Unit">indent</a> = <a href="#295384" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>.<a href="#294517" title="(x$1: Any)java.lang.String">indent</a> + <span title="java.lang.String(&quot;    &quot;)" class="string">&quot;    &quot;</span>
        <a href="#295018" title="java.lang.String">res</a> = <a href="#295018" title="(x$1: Any)java.lang.String">res</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="#294618" title="=&gt; BytecodeGenerator.this.BlockList">tryBlock</a> + <span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span>
        <a href="#295384" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>.<a href="#294517" title="(x$1: java.lang.String)Unit">indent</a> = <a href="#295384" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>.<a href="#294517" title="=&gt; java.lang.String">indent</a>.<span title="(x$1: Int,x$2: Int)java.lang.String">substring</span>(<span title="Int(0)" class="int">0</span>,<a href="#295384" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>.<a href="#294517" title="=&gt; java.lang.String">indent</a>.<span title="(x$1: Int)Int">length</span>-<span title="Int(4)" class="int">4</span>)
        <a href="#295018" title="java.lang.String">res</a> = <a href="#295018" title="(x$1: Any)java.lang.String">res</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="#295384" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>.<a href="#294517" title="=&gt; java.lang.String">indent</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;  &quot;)" class="string">&quot;  &quot;</span> + <span title="java.lang.String(&quot;catch:\012&quot;)" class="string">&quot;catch:\n&quot;</span>
        <a href="#295384" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>.<a href="#294517" title="(x$1: java.lang.String)Unit">indent</a> = <a href="#295384" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>.<a href="#294517" title="(x$1: Any)java.lang.String">indent</a> + <span title="java.lang.String(&quot;    &quot;)" class="string">&quot;    &quot;</span>
        <span class="keyword">for</span> (<a title="BytecodeGenerator.this.CatchBlock" id="295099">b</a> &lt;- <a href="#294621" title="(f: (BytecodeGenerator.this.CatchBlock) =&gt; Unit)Unit">catchBlocks</a>)
          <a href="#295018" title="java.lang.String">res</a> = <a href="#295018" title="(x$1: Any)java.lang.String">res</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="#295099" title="BytecodeGenerator.this.CatchBlock">b</a> + <span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span>
        <a href="#295384" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>.<a href="#294517" title="(x$1: java.lang.String)Unit">indent</a> = <a href="#295384" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>.<a href="#294517" title="=&gt; java.lang.String">indent</a>.<span title="(x$1: Int,x$2: Int)java.lang.String">substring</span>(<span title="Int(0)" class="int">0</span>,<a href="#295384" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>.<a href="#294517" title="=&gt; java.lang.String">indent</a>.<span title="(x$1: Int)Int">length</span>-<span title="Int(4)" class="int">4</span>)
        <a href="#295018" title="java.lang.String">res</a> = <a href="#295018" title="(x$1: Any)java.lang.String">res</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="#295384" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>.<a href="#294517" title="=&gt; java.lang.String">indent</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;  &quot;)" class="string">&quot;  &quot;</span> + <span title="java.lang.String(&quot;finally:\012&quot;)" class="string">&quot;finally:\n&quot;</span>
        <a href="#295384" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>.<a href="#294517" title="(x$1: java.lang.String)Unit">indent</a> = <a href="#295384" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>.<a href="#294517" title="(x$1: Any)java.lang.String">indent</a> + <span title="java.lang.String(&quot;    &quot;)" class="string">&quot;    &quot;</span>
        <a href="#295018" title="java.lang.String">res</a> = <a href="#295018" title="(x$1: Any)java.lang.String">res</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="#294624" title="=&gt; BytecodeGenerator.this.BlockList">finallyBlock</a> + <span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span>
        <a href="#295384" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>.<a href="#294517" title="(x$1: java.lang.String)Unit">indent</a> = <a href="#295384" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>.<a href="#294517" title="=&gt; java.lang.String">indent</a>.<span title="(x$1: Int,x$2: Int)java.lang.String">substring</span>(<span title="Int(0)" class="int">0</span>,<a href="#295384" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>.<a href="#294517" title="=&gt; java.lang.String">indent</a>.<span title="(x$1: Int)Int">length</span>-<span title="Int(4)" class="int">4</span>)
        <a href="#295018" title="java.lang.String">res</a>
      }
    }
    case <span class="keyword">class</span> <a title="class CatchBlock extends BytecodeGenerator.this.BlockList0 with ScalaObject with Product" id="295298">CatchBlock</a><span title="ScalaObject">(</span><a title="BytecodeGenerator.this.ExceptionBlock" id="303769">parent</a>: <a href="#295204" title="BytecodeGenerator.this.ExceptionBlock">ExceptionBlock</a>, <a title="GenMSIL.this.global.Symbol" id="303770">exSym</a>: <a href="../../symtab/Symbols.scala.html#26286" title="GenMSIL.this.global.Symbol">Symbol</a>) <span class="keyword">extends</span> <a href="#288547" title="BytecodeGenerator.this.BlockList0">BlockList0</a> {
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Option[BytecodeGenerator.this.BlockList0]" id="294829">parentBlockList</a>: <span title="Option[BytecodeGenerator.this.BlockList0]">Option</span>[BlockList0] = {
        <a href="#303769" title="=&gt; BytecodeGenerator.this.ExceptionBlock">parent</a>.<a href="#294628" title="=&gt; Option[BytecodeGenerator.this.BlockList0]">parentBlockList</a>
      }
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="()java.lang.String" id="294830">toString</a>() = {
        <span class="keyword">var</span> <a title="java.lang.String" id="295267">res</a> = <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>
        <a href="#295267" title="java.lang.String">res</a> = <a href="#295267" title="(x$1: Any)java.lang.String">res</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="#295384" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>.<a href="#294517" title="=&gt; java.lang.String">indent</a> + <span title="java.lang.String(&quot;CatchBlock:\012&quot;)" class="string">&quot;CatchBlock:\n&quot;</span>
        <a href="#295267" title="java.lang.String">res</a> = <a href="#295267" title="(x$1: Any)java.lang.String">res</a> + <span class="keyword">super</span>.<a href="#294481" title="()java.lang.String">toString</a>()
        <a href="#295267" title="java.lang.String">res</a>
      }
    }
    case <span class="keyword">object</span> <a href="#295373" title="object BytecodeGenerator.this.TopBlock" id="295384">TopBlock</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#288547" title="BytecodeGenerator.this.BlockList0">BlockList0</a> {
      <span class="keyword">var</span> <a title="java.lang.String" id="294517">indent</a> = <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; object None" id="294519">parentBlockList</a> = <span title="object None">None</span>
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="()java.lang.String" id="294520">toString</a>() = {
        <span class="keyword">var</span> <a title="java.lang.String" id="295360">res</a> = <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>
        <a href="#295360" title="java.lang.String">res</a> = <a href="#295360" title="(x$1: Any)java.lang.String">res</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="#295384" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>.<a href="#294517" title="=&gt; java.lang.String">indent</a> + <span title="java.lang.String(&quot;TopBlock:\012&quot;)" class="string">&quot;TopBlock:\n&quot;</span>
        <a href="#295360" title="java.lang.String">res</a> = <a href="#295360" title="(x$1: Any)java.lang.String">res</a> + <span class="keyword">super</span>.<a href="#294481" title="()java.lang.String">toString</a>()
        <a href="#295360" title="java.lang.String">res</a>
      }
    }

    // for every basic block, a list of ExHInstructions to be executed:
    //   - Begin_ are executed before the block
    //   - EndExceptionBlock is executed after the block
    <span class="keyword">val</span> <a title="scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.BasicBlock,List[BytecodeGenerator.this.ExHInstruction]]" id="288559">bb2exHInstructions</a>: <span title="scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.BasicBlock,List[BytecodeGenerator.this.ExHInstruction]]">HashMap</span>[BasicBlock, List[ExHInstruction]] = <span title="scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.BasicBlock,List[BytecodeGenerator.this.ExHInstruction]]" class="keyword">new</span> <span title="scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.BasicBlock,List[BytecodeGenerator.this.ExHInstruction]]">HashMap</span>()
    // at the end of a try, catch or finally block, the jumps must not be emitted,
    // the automatically generated leave (or endfinally) will do the job.
    <span class="keyword">val</span> <a title="scala.collection.mutable.HashSet[GenMSIL.this.global.icodes.BasicBlock]" id="288561">omitJumpBlocks</a>: <span title="scala.collection.mutable.HashSet[GenMSIL.this.global.icodes.BasicBlock]">HashSet</span>[BasicBlock] = <span title="scala.collection.mutable.HashSet[GenMSIL.this.global.icodes.BasicBlock]" class="keyword">new</span> <span title="scala.collection.mutable.HashSet[GenMSIL.this.global.icodes.BasicBlock]">HashSet</span>()

    // suposes that finalizers are the same for different handlers
    // covering the same blocks
    <span class="keyword">def</span> <a title="(blocks: List[GenMSIL.this.global.icodes.BasicBlock],exH: List[GenMSIL.this.global.icodes.ExceptionHandler])List[GenMSIL.this.global.icodes.BasicBlock]" id="288563">orderBlocksForExh</a>(<a title="List[GenMSIL.this.global.icodes.BasicBlock]" id="294119">blocks</a>: <span title="List[GenMSIL.this.global.icodes.BasicBlock]">List</span>[BasicBlock], <a title="List[GenMSIL.this.global.icodes.ExceptionHandler]" id="294120">exH</a>: <span title="List[GenMSIL.this.global.icodes.ExceptionHandler]">List</span>[ExceptionHandler]): <span title="List[GenMSIL.this.global.icodes.BasicBlock]">List</span>[BasicBlock] = {

      <span class="keyword">var</span> <a title="List[GenMSIL.this.global.icodes.BasicBlock]" id="295392">blocksToPut</a>: <span title="List[GenMSIL.this.global.icodes.BasicBlock]">List</span>[BasicBlock] = <a href="#294119" title="List[GenMSIL.this.global.icodes.BasicBlock]">blocks</a>
      <span class="keyword">var</span> <a title="GenMSIL.this.global.icodes.BasicBlock" id="295393">nextBlock</a>: <a href="../icode/BasicBlocks.scala.html#46410" title="GenMSIL.this.global.icodes.BasicBlock">BasicBlock</a> = <span title="Null(null)" class="keyword">null</span>
      <span class="keyword">var</span> <a title="List[GenMSIL.this.global.icodes.ExceptionHandler]" id="295394">untreatedHandlers</a>: <span title="List[GenMSIL.this.global.icodes.ExceptionHandler]">List</span>[ExceptionHandler] = <a href="#294120" title="List[GenMSIL.this.global.icodes.ExceptionHandler]">exH</a>
      <a href="#295384" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>.<a href="#294474" title="(x$1: List[BytecodeGenerator.this.Block])Unit">blocks</a> = <span title="object Nil">Nil</span>
      <span class="keyword">var</span> <a title="BytecodeGenerator.this.BlockList0" id="295395">currentBlock</a>: <a href="#288547" title="BytecodeGenerator.this.BlockList0">BlockList0</a> = <a href="#295384" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>
      <span class="keyword">def</span> <a title="(b: List[GenMSIL.this.global.icodes.BasicBlock])Unit" id="295396">addBlocks</a>(<a title="List[GenMSIL.this.global.icodes.BasicBlock]" id="295403">b</a>: <span title="List[GenMSIL.this.global.icodes.BasicBlock]">List</span>[BasicBlock]):<span title="Unit">Unit</span> = <a href="#295403" title="List[GenMSIL.this.global.icodes.BasicBlock]">b</a> <span title="Unit" class="keyword">match</span> {
        <span title="Unit" class="keyword">case</span> <span title="object Nil">Nil</span> =&gt; <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37988" title="=&gt; Boolean">value</a>) <a href="../../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;adding &quot;</span> + <a href="#295403" title="List[GenMSIL.this.global.icodes.BasicBlock]">b</a>)

        <span title="Unit" class="keyword">case</span> <a title="GenMSIL.this.global.icodes.BasicBlock" id="295414">x</a> :: <a title="List[GenMSIL.this.global.icodes.BasicBlock]" id="295415">xs</a> =&gt;
          <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37988" title="=&gt; Boolean">value</a>) <a href="../../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;adding &quot;</span> + <a href="#295403" title="List[GenMSIL.this.global.icodes.BasicBlock]">b</a>)
          // problem: block may already be added, and and needs to be moved.
          // if nextblock NOT in b: check if nextblock in blocksToPut, if NOT, check if movable, else don't put
          <span title="Unit" class="keyword">if</span> (<a href="#295393" title="(x$1: AnyRef)Boolean">nextBlock</a> <span title="(x$1: Boolean)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span> &amp;&amp; <a href="#295403" title="List[GenMSIL.this.global.icodes.BasicBlock]">b</a>.<span title="(elem: Any)Boolean">contains</span>(<a href="#295393" title="GenMSIL.this.global.icodes.BasicBlock">nextBlock</a>)) {
            <span class="keyword">val</span> <a title="List[GenMSIL.this.global.icodes.BasicBlock]" id="295435">blocksToAdd</a> = <a href="#295393" title="GenMSIL.this.global.icodes.BasicBlock">nextBlock</a> <a href="#295436" title="GenMSIL.this.global.icodes.BasicBlock">::</a> <span title="(x: GenMSIL.this.global.icodes.BasicBlock)List[GenMSIL.this.global.icodes.BasicBlock]">(</span><a href="#295403" title="(x: GenMSIL.this.global.icodes.BasicBlock)List[GenMSIL.this.global.icodes.BasicBlock]">b</a> - <a href="#295393" title="GenMSIL.this.global.icodes.BasicBlock">nextBlock</a>)
            <a href="#295393" title="GenMSIL.this.global.icodes.BasicBlock">nextBlock</a> = <span title="Null(null)" class="keyword">null</span>
            <a href="#295396" title="(b: List[GenMSIL.this.global.icodes.BasicBlock])Unit">addBlocks</a>(<a href="#295435" title="List[GenMSIL.this.global.icodes.BasicBlock]">blocksToAdd</a>)
          }
          <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<a href="#295394" title="List[GenMSIL.this.global.icodes.ExceptionHandler]">untreatedHandlers</a>.<span title="(p: (GenMSIL.this.global.icodes.ExceptionHandler) =&gt; Boolean)Boolean">forall</span>(<a title="GenMSIL.this.global.icodes.ExceptionHandler" id="295458">h</a> =&gt; <span title="=&gt; Boolean">!</span>(<a href="#295458" title="GenMSIL.this.global.icodes.ExceptionHandler">h</a>.<a href="../icode/ExceptionHandlers.scala.html#61719" title="(b: GenMSIL.this.global.icodes.BasicBlock)Boolean">covers</a>(<a href="#295414" title="GenMSIL.this.global.icodes.BasicBlock">x</a>)))) {

            <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37988" title="=&gt; Boolean">value</a>) <a href="../../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot; no new handler for &quot;</span> + <a href="#295414" title="GenMSIL.this.global.icodes.BasicBlock">x</a>)
            <span title="Unit" class="keyword">if</span> (<a href="#295394" title="List[GenMSIL.this.global.icodes.ExceptionHandler]">untreatedHandlers</a>.<span title="(p: (GenMSIL.this.global.icodes.ExceptionHandler) =&gt; Boolean)Boolean">forall</span>(<a title="GenMSIL.this.global.icodes.ExceptionHandler" id="295477">h</a> =&gt; <span title="=&gt; Boolean">!</span>(<a href="#295477" title="GenMSIL.this.global.icodes.ExceptionHandler">h</a>.<a href="../icode/ExceptionHandlers.scala.html#61720" title="=&gt; List[GenMSIL.this.global.icodes.BasicBlock]">blocks</a>.<span title="(elem: Any)Boolean">contains</span><span title="(x$1: Boolean)Boolean">(</span><a href="#295414" title="GenMSIL.this.global.icodes.BasicBlock">x</a>) ||
                                                (<a href="#295477" title="GenMSIL.this.global.icodes.ExceptionHandler">h</a>.<a href="../icode/ExceptionHandlers.scala.html#61707" title="(x$1: AnyRef)Boolean">finalizer</a> <span title="(x$1: Boolean)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span> &amp;&amp;
                                                 <a href="#295477" title="GenMSIL.this.global.icodes.ExceptionHandler">h</a>.<a href="../icode/ExceptionHandlers.scala.html#61707" title="=&gt; GenMSIL.this.global.icodes.Finalizer">finalizer</a>.<a href="../icode/ExceptionHandlers.scala.html#61719" title="(b: GenMSIL.this.global.icodes.BasicBlock)Boolean">covers</a>(<a href="#295414" title="GenMSIL.this.global.icodes.BasicBlock">x</a>)))))
              {
                // the block is not part of some catch or finally code
                <a href="#295395" title="BytecodeGenerator.this.BlockList0">currentBlock</a>.<a href="#294479" title="(bb: GenMSIL.this.global.icodes.BasicBlock)Unit">addBasicBlock</a>(<a href="#295414" title="GenMSIL.this.global.icodes.BasicBlock">x</a>)
                <a href="#295392" title="List[GenMSIL.this.global.icodes.BasicBlock]">blocksToPut</a> = <a href="#295392" title="(x: GenMSIL.this.global.icodes.BasicBlock)List[GenMSIL.this.global.icodes.BasicBlock]">blocksToPut</a> - <a href="#295414" title="GenMSIL.this.global.icodes.BasicBlock">x</a>
                <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37988" title="=&gt; Boolean">value</a>) <a href="../../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot; -&gt; addBlocks(&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#295415" title="List[GenMSIL.this.global.icodes.BasicBlock]">xs</a> + <span title="java.lang.String(&quot;)&quot;)" class="string">&quot;)&quot;</span>)
                <a href="#295396" title="(b: List[GenMSIL.this.global.icodes.BasicBlock])Unit">addBlocks</a>(<a href="#295415" title="List[GenMSIL.this.global.icodes.BasicBlock]">xs</a>)
              } <span class="keyword">else</span> {
                <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37988" title="=&gt; Boolean">value</a>) <a href="../../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="java.lang.String(&quot;x is part of catch or finally block&quot;)" class="string">&quot;x is part of catch or finally block&quot;</span>)

                // check if the covered code of the handler x belongs to is empty
                // this check is not needed for finalizers: empty try with finalizer
                // is optimized by compiler (no try left)
                <span title="Unit" class="keyword">if</span>(<a href="#295394" title="List[GenMSIL.this.global.icodes.ExceptionHandler]">untreatedHandlers</a>.<span title="(p: (GenMSIL.this.global.icodes.ExceptionHandler) =&gt; Boolean)Boolean">forall</span>(<a title="GenMSIL.this.global.icodes.ExceptionHandler" id="295524">h</a> =&gt;
                  (<span title="(x$1: Boolean)Boolean">!</span><a href="#295524" title="GenMSIL.this.global.icodes.ExceptionHandler">h</a>.<a href="../icode/ExceptionHandlers.scala.html#61720" title="=&gt; List[GenMSIL.this.global.icodes.BasicBlock]">blocks</a>.<span title="(elem: Any)Boolean">contains</span>(<a href="#295414" title="GenMSIL.this.global.icodes.BasicBlock">x</a>) || <a href="#295524" title="GenMSIL.this.global.icodes.ExceptionHandler">h</a>.<a href="../icode/ExceptionHandlers.scala.html#61715" title="=&gt; scala.collection.immutable.Set[GenMSIL.this.global.icodes.BasicBlock]">covered</a>.<span title="=&gt; Boolean">isEmpty</span>))) {
                    <a href="#295392" title="List[GenMSIL.this.global.icodes.BasicBlock]">blocksToPut</a> = <a href="#295392" title="(x: GenMSIL.this.global.icodes.BasicBlock)List[GenMSIL.this.global.icodes.BasicBlock]">blocksToPut</a> - <a href="#295414" title="GenMSIL.this.global.icodes.BasicBlock">x</a>
                    <a href="#295396" title="(b: List[GenMSIL.this.global.icodes.BasicBlock])Unit">addBlocks</a>(<a href="#295415" title="List[GenMSIL.this.global.icodes.BasicBlock]">xs</a>)
                  } <span class="keyword">else</span>
                    <a href="#295396" title="(b: List[GenMSIL.this.global.icodes.BasicBlock])Unit">addBlocks</a>(<a href="#295415" title="List[GenMSIL.this.global.icodes.BasicBlock]">xs</a> <a href="#295541" title="List[GenMSIL.this.global.icodes.BasicBlock]">:::</a> <span title="(xs: GenMSIL.this.global.icodes.BasicBlock*)List[GenMSIL.this.global.icodes.BasicBlock]">List</span><span title="(prefix: List[GenMSIL.this.global.icodes.BasicBlock])List[GenMSIL.this.global.icodes.BasicBlock]">(</span><a href="#295414" title="GenMSIL.this.global.icodes.BasicBlock">x</a>))
              }
          } <span class="keyword">else</span> { // there are new handlers for this block

            <span class="keyword">var</span> <a title="scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.ExceptionHandler,GenMSIL.this.global.icodes.BasicBlock]" id="295560">firstBlockAfter</a>: <span title="scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.ExceptionHandler,GenMSIL.this.global.icodes.BasicBlock]">HashMap</span>[ExceptionHandler,BasicBlock] = <span title="scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.ExceptionHandler,GenMSIL.this.global.icodes.BasicBlock]" class="keyword">new</span> <span title="scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.ExceptionHandler,GenMSIL.this.global.icodes.BasicBlock]">HashMap</span>()
            <span class="keyword">val</span> <a title="BytecodeGenerator.this.BlockList0" id="295561">savedCurrentBlock</a> = <a href="#295395" title="BytecodeGenerator.this.BlockList0">currentBlock</a>
            /**
             * the output blocks of this method are changed so that:
             *  - only one block has a successor outside the set of blocks
             *  - this block is the last of the reusulting list
             *
             * side-effect: it stores the successor in the hashMap
             *  firstBlockAfter, which has to be emitted first after try/catch/finally,
             *  because the target of the Leave-instruction will always be the first
             *  instruction after EndExceptionBlock
             *
             * returns: the output blocks plus an Option containing the possibly created
             * new block
             **/
            <span class="keyword">def</span> <a title="(blocks: List[GenMSIL.this.global.icodes.BasicBlock],exh: GenMSIL.this.global.icodes.ExceptionHandler)(List[GenMSIL.this.global.icodes.BasicBlock], Option[GenMSIL.this.global.icodes.BasicBlock])" id="295562">adaptBlocks</a>(<a title="List[GenMSIL.this.global.icodes.BasicBlock]" id="295570">blocks</a>: <span title="List[GenMSIL.this.global.icodes.BasicBlock]">List</span>[BasicBlock], <a title="GenMSIL.this.global.icodes.ExceptionHandler" id="295571">exh</a>: <a href="../icode/ExceptionHandlers.scala.html#46468" title="GenMSIL.this.global.icodes.ExceptionHandler">ExceptionHandler</a>): <span title="(List[GenMSIL.this.global.icodes.BasicBlock], Option[GenMSIL.this.global.icodes.BasicBlock])">(</span>List[BasicBlock], Option[BasicBlock]) = {
              <span class="keyword">def</span> <a title="(block: GenMSIL.this.global.icodes.BasicBlock,blocks: List[GenMSIL.this.global.icodes.BasicBlock])List[GenMSIL.this.global.icodes.BasicBlock]" id="295572">outsideTargets</a>(<a title="GenMSIL.this.global.icodes.BasicBlock" id="295576">block</a>: <a href="../icode/BasicBlocks.scala.html#46410" title="GenMSIL.this.global.icodes.BasicBlock">BasicBlock</a>, <a title="List[GenMSIL.this.global.icodes.BasicBlock]" id="295577">blocks</a>: <span title="List[GenMSIL.this.global.icodes.BasicBlock]">List</span>[BasicBlock]) = {
                /* The catch block of the ExceptionHandler is always a successor of any block inside the try
                 * (see successors method in BasicBlocks.scala)
                 * Thus, this successor does not correspond to a jump outside the exception handler
                 * and has to be ignored when computing the list of blocks leaving the exception handler.  */
                <span class="keyword">val</span> <a title="List[GenMSIL.this.global.icodes.BasicBlock]" id="295578">res</a> = <a href="#295576" title="GenMSIL.this.global.icodes.BasicBlock">block</a>.<a href="../icode/BasicBlocks.scala.html#61613" title="=&gt; List[GenMSIL.this.global.icodes.BasicBlock]">successors</a>.<span title="(p: (GenMSIL.this.global.icodes.BasicBlock) =&gt; Boolean)List[GenMSIL.this.global.icodes.BasicBlock]">filter</span>(<a title="GenMSIL.this.global.icodes.BasicBlock" id="295581">scc</a> =&gt; <span title="(x$1: Boolean)Boolean">!</span><a href="#295577" title="List[GenMSIL.this.global.icodes.BasicBlock]">blocks</a>.<span title="(elem: Any)Boolean">contains</span>(<a href="#295581" title="GenMSIL.this.global.icodes.BasicBlock">scc</a>) &amp;&amp; <a href="#295581" title="(x$1: AnyRef)Boolean">scc</a> != <a href="#295571" title="GenMSIL.this.global.icodes.ExceptionHandler">exh</a>.<a href="../icode/ExceptionHandlers.scala.html#61714" title="=&gt; GenMSIL.this.global.icodes.BasicBlock">startBlock</a>)
                <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37988" title="=&gt; Boolean">value</a>) <a href="../../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;outside of &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#295576" title="GenMSIL.this.global.icodes.BasicBlock">block</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; = &quot;)" class="string">&quot; = &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#295578" title="List[GenMSIL.this.global.icodes.BasicBlock]">res</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; succ &quot;)" class="string">&quot; succ &quot;</span> + <a href="#295576" title="GenMSIL.this.global.icodes.BasicBlock">block</a>.<a href="../icode/BasicBlocks.scala.html#61613" title="=&gt; List[GenMSIL.this.global.icodes.BasicBlock]">successors</a>)
                <a href="#295578" title="List[GenMSIL.this.global.icodes.BasicBlock]">res</a>
              }
              // get leaving blocks and their outside targets
              <span class="keyword">def</span> <a title="(blocks: List[GenMSIL.this.global.icodes.BasicBlock])List[(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])]" id="295573">leavingBlocks</a>(<a title="List[GenMSIL.this.global.icodes.BasicBlock]" id="295608">blocks</a>: <span title="List[GenMSIL.this.global.icodes.BasicBlock]">List</span>[BasicBlock]): <span title="List[(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])]">List</span>[(BasicBlock, List[BasicBlock])] = {
                <span class="keyword">for</span> {<a title="GenMSIL.this.global.icodes.BasicBlock" id="295744">b</a> &lt;- <a href="#295608" title="(f: (GenMSIL.this.global.icodes.BasicBlock) =&gt; (GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock]))(implicit bf: scala.collection.generic.BuilderFactory[(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock]),List[(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])],List[GenMSIL.this.global.icodes.BasicBlock]])List[(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])]">blocks</a>
                     <span class="keyword">val</span> <a title="List[GenMSIL.this.global.icodes.BasicBlock]" id="295745">t</a> = <a href="#295572" title="(block: GenMSIL.this.global.icodes.BasicBlock,blocks: List[GenMSIL.this.global.icodes.BasicBlock])List[GenMSIL.this.global.icodes.BasicBlock]">outsideTargets</a>(<a href="#295744" title="GenMSIL.this.global.icodes.BasicBlock">b</a>, <a href="#295608" title="List[GenMSIL.this.global.icodes.BasicBlock]">blocks</a>)
                     <span class="keyword">if</span> <a href="#295745" title="List[GenMSIL.this.global.icodes.BasicBlock]">t</a>.<span title="(x$1: Int)Boolean">length</span> != <span title="Int(0)" class="int">0</span> } <span class="keyword">yield</span> <span title="(_1: GenMSIL.this.global.icodes.BasicBlock,_2: List[GenMSIL.this.global.icodes.BasicBlock])(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])">(</span><a href="#295744" title="GenMSIL.this.global.icodes.BasicBlock">b</a>, <a href="#295745" title="List[GenMSIL.this.global.icodes.BasicBlock]">t</a>)
              }

              <span class="keyword">def</span> <a title="(blocks: List[GenMSIL.this.global.icodes.BasicBlock],leaving: List[(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])],exh: GenMSIL.this.global.icodes.ExceptionHandler)(List[GenMSIL.this.global.icodes.BasicBlock], Option[GenMSIL.this.global.icodes.BasicBlock])" id="295574">replaceOutJumps</a>(<a title="List[GenMSIL.this.global.icodes.BasicBlock]" id="295782">blocks</a>: <span title="List[GenMSIL.this.global.icodes.BasicBlock]">List</span>[BasicBlock], <a title="List[(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])]" id="295783">leaving</a>: <span title="List[(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])]">List</span>[(BasicBlock, List[BasicBlock])], <a title="GenMSIL.this.global.icodes.ExceptionHandler" id="295784">exh</a>: <a href="../icode/ExceptionHandlers.scala.html#46468" title="GenMSIL.this.global.icodes.ExceptionHandler">ExceptionHandler</a>): <span title="(List[GenMSIL.this.global.icodes.BasicBlock], Option[GenMSIL.this.global.icodes.BasicBlock])">(</span>List[BasicBlock], Option[BasicBlock]) = {
                <span class="keyword">def</span> <a title="(block: GenMSIL.this.global.icodes.BasicBlock,from: GenMSIL.this.global.icodes.BasicBlock,to: GenMSIL.this.global.icodes.BasicBlock)AnyVal" id="295785">replaceJump</a>(<a title="GenMSIL.this.global.icodes.BasicBlock" id="295787">block</a>: <a href="../icode/BasicBlocks.scala.html#46410" title="GenMSIL.this.global.icodes.BasicBlock">BasicBlock</a>, <a title="GenMSIL.this.global.icodes.BasicBlock" id="295788">from</a>: <a href="../icode/BasicBlocks.scala.html#46410" title="GenMSIL.this.global.icodes.BasicBlock">BasicBlock</a>, <a title="GenMSIL.this.global.icodes.BasicBlock" id="295789">to</a>: <a href="../icode/BasicBlocks.scala.html#46410" title="GenMSIL.this.global.icodes.BasicBlock">BasicBlock</a>) = <a href="#295787" title="GenMSIL.this.global.icodes.BasicBlock">block</a>.<a href="../icode/BasicBlocks.scala.html#61610" title="=&gt; GenMSIL.this.global.icodes.Instruction">lastInstruction</a> <span title="AnyVal" class="keyword">match</span> {
                  <span title="Boolean" class="keyword">case</span> JUMP(<a title="GenMSIL.this.global.icodes.BasicBlock" id="295791">whereto</a>) =&gt;
                    //assert(from == whereto)
                    <a href="#295787" title="GenMSIL.this.global.icodes.BasicBlock">block</a>.<a href="../icode/BasicBlocks.scala.html#61594" title="(oldInstr: GenMSIL.this.global.icodes.Instruction,newInstr: GenMSIL.this.global.icodes.Instruction)Boolean">replaceInstruction</a>(<a href="#295787" title="GenMSIL.this.global.icodes.BasicBlock">block</a>.<a href="../icode/BasicBlocks.scala.html#61610" title="=&gt; GenMSIL.this.global.icodes.Instruction">lastInstruction</a>, <a href="../icode/Opcodes.scala.html#64078" title="(whereto: GenMSIL.this.global.icodes.BasicBlock)GenMSIL.this.global.icodes.opcodes.JUMP">JUMP</a>(<a href="#295789" title="GenMSIL.this.global.icodes.BasicBlock">to</a>))
                  <span title="AnyVal" class="keyword">case</span> CJUMP(<a title="GenMSIL.this.global.icodes.BasicBlock" id="295829">success</a>, <a title="GenMSIL.this.global.icodes.BasicBlock" id="295830">failure</a>, <a title="GenMSIL.this.global.icodes.TestOp" id="295831">cond</a>, <a title="GenMSIL.this.global.icodes.TypeKind" id="295832">kind</a>) =&gt;
                    <span title="AnyVal" class="keyword">if</span> (<a href="#295788" title="(x$1: AnyRef)Boolean">from</a> == <a href="#295829" title="GenMSIL.this.global.icodes.BasicBlock">success</a>)
                      <a href="#295787" title="GenMSIL.this.global.icodes.BasicBlock">block</a>.<a href="../icode/BasicBlocks.scala.html#61594" title="(oldInstr: GenMSIL.this.global.icodes.Instruction,newInstr: GenMSIL.this.global.icodes.Instruction)Boolean">replaceInstruction</a>(<a href="#295787" title="GenMSIL.this.global.icodes.BasicBlock">block</a>.<a href="../icode/BasicBlocks.scala.html#61610" title="=&gt; GenMSIL.this.global.icodes.Instruction">lastInstruction</a>, <a href="../icode/Opcodes.scala.html#64102" title="(successBlock: GenMSIL.this.global.icodes.BasicBlock,failureBlock: GenMSIL.this.global.icodes.BasicBlock,cond: GenMSIL.this.global.icodes.TestOp,kind: GenMSIL.this.global.icodes.TypeKind)GenMSIL.this.global.icodes.opcodes.CJUMP">CJUMP</a>(<a href="#295789" title="GenMSIL.this.global.icodes.BasicBlock">to</a>, <a href="#295830" title="GenMSIL.this.global.icodes.BasicBlock">failure</a>, <a href="#295831" title="GenMSIL.this.global.icodes.TestOp">cond</a>, <a href="#295832" title="GenMSIL.this.global.icodes.TypeKind">kind</a>))
                    <span class="keyword">else</span>
                      //assert(from == failure)
                    <span title="AnyVal with NotNull" class="keyword">if</span> (<a href="#295788" title="(x$1: AnyRef)Boolean">from</a> == <a href="#295830" title="GenMSIL.this.global.icodes.BasicBlock">failure</a>)
                      <a href="#295787" title="GenMSIL.this.global.icodes.BasicBlock">block</a>.<a href="../icode/BasicBlocks.scala.html#61594" title="(oldInstr: GenMSIL.this.global.icodes.Instruction,newInstr: GenMSIL.this.global.icodes.Instruction)Boolean">replaceInstruction</a>(<a href="#295787" title="GenMSIL.this.global.icodes.BasicBlock">block</a>.<a href="../icode/BasicBlocks.scala.html#61610" title="=&gt; GenMSIL.this.global.icodes.Instruction">lastInstruction</a>, <a href="../icode/Opcodes.scala.html#64102" title="(successBlock: GenMSIL.this.global.icodes.BasicBlock,failureBlock: GenMSIL.this.global.icodes.BasicBlock,cond: GenMSIL.this.global.icodes.TestOp,kind: GenMSIL.this.global.icodes.TypeKind)GenMSIL.this.global.icodes.opcodes.CJUMP">CJUMP</a>(<a href="#295829" title="GenMSIL.this.global.icodes.BasicBlock">success</a>, <a href="#295789" title="GenMSIL.this.global.icodes.BasicBlock">to</a>, <a href="#295831" title="GenMSIL.this.global.icodes.TestOp">cond</a>, <a href="#295832" title="GenMSIL.this.global.icodes.TypeKind">kind</a>))
                  <span title="AnyVal" class="keyword">case</span> CZJUMP(<a title="GenMSIL.this.global.icodes.BasicBlock" id="295973">success</a>, <a title="GenMSIL.this.global.icodes.BasicBlock" id="295974">failure</a>, <a title="GenMSIL.this.global.icodes.TestOp" id="295975">cond</a>, <a title="GenMSIL.this.global.icodes.TypeKind" id="295976">kind</a>) =&gt;
                    <span title="AnyVal" class="keyword">if</span> (<a href="#295788" title="(x$1: AnyRef)Boolean">from</a> == <a href="#295973" title="GenMSIL.this.global.icodes.BasicBlock">success</a>)
                      <a href="#295787" title="GenMSIL.this.global.icodes.BasicBlock">block</a>.<a href="../icode/BasicBlocks.scala.html#61594" title="(oldInstr: GenMSIL.this.global.icodes.Instruction,newInstr: GenMSIL.this.global.icodes.Instruction)Boolean">replaceInstruction</a>(<a href="#295787" title="GenMSIL.this.global.icodes.BasicBlock">block</a>.<a href="../icode/BasicBlocks.scala.html#61610" title="=&gt; GenMSIL.this.global.icodes.Instruction">lastInstruction</a>, <a href="../icode/Opcodes.scala.html#64158" title="(successBlock: GenMSIL.this.global.icodes.BasicBlock,failureBlock: GenMSIL.this.global.icodes.BasicBlock,cond: GenMSIL.this.global.icodes.TestOp,kind: GenMSIL.this.global.icodes.TypeKind)GenMSIL.this.global.icodes.opcodes.CZJUMP">CZJUMP</a>(<a href="#295789" title="GenMSIL.this.global.icodes.BasicBlock">to</a>, <a href="#295974" title="GenMSIL.this.global.icodes.BasicBlock">failure</a>, <a href="#295975" title="GenMSIL.this.global.icodes.TestOp">cond</a>, <a href="#295976" title="GenMSIL.this.global.icodes.TypeKind">kind</a>))
                    <span class="keyword">else</span>
                      //assert(from == failure)
                    <span title="AnyVal with NotNull" class="keyword">if</span> (<a href="#295788" title="(x$1: AnyRef)Boolean">from</a> == <a href="#295974" title="GenMSIL.this.global.icodes.BasicBlock">failure</a>)
                      <a href="#295787" title="GenMSIL.this.global.icodes.BasicBlock">block</a>.<a href="../icode/BasicBlocks.scala.html#61594" title="(oldInstr: GenMSIL.this.global.icodes.Instruction,newInstr: GenMSIL.this.global.icodes.Instruction)Boolean">replaceInstruction</a>(<a href="#295787" title="GenMSIL.this.global.icodes.BasicBlock">block</a>.<a href="../icode/BasicBlocks.scala.html#61610" title="=&gt; GenMSIL.this.global.icodes.Instruction">lastInstruction</a>, <a href="../icode/Opcodes.scala.html#64158" title="(successBlock: GenMSIL.this.global.icodes.BasicBlock,failureBlock: GenMSIL.this.global.icodes.BasicBlock,cond: GenMSIL.this.global.icodes.TestOp,kind: GenMSIL.this.global.icodes.TypeKind)GenMSIL.this.global.icodes.opcodes.CZJUMP">CZJUMP</a>(<a href="#295973" title="GenMSIL.this.global.icodes.BasicBlock">success</a>, <a href="#295789" title="GenMSIL.this.global.icodes.BasicBlock">to</a>, <a href="#295975" title="GenMSIL.this.global.icodes.TestOp">cond</a>, <a href="#295976" title="GenMSIL.this.global.icodes.TypeKind">kind</a>))
                  <span title="Boolean" class="keyword">case</span> SWITCH(<a title="List[List[Int]]" id="296115">tags</a>, <a title="List[GenMSIL.this.global.icodes.BasicBlock]" id="296116">labels</a>) =&gt; // labels: List[BasicBlock]
                    <span class="keyword">val</span> <a title="List[GenMSIL.this.global.icodes.BasicBlock]" id="296119">newLabels</a> = <a href="#296116" title="List[GenMSIL.this.global.icodes.BasicBlock]">labels</a>.<span title="(f: (GenMSIL.this.global.icodes.BasicBlock) =&gt; GenMSIL.this.global.icodes.BasicBlock)(implicit bf: scala.collection.generic.BuilderFactory[GenMSIL.this.global.icodes.BasicBlock,List[GenMSIL.this.global.icodes.BasicBlock],List[GenMSIL.this.global.icodes.BasicBlock]])List[GenMSIL.this.global.icodes.BasicBlock]">map</span><span title="scala.collection.generic.BuilderFactory[GenMSIL.this.global.icodes.BasicBlock,List[GenMSIL.this.global.icodes.BasicBlock],List#Coll]">(</span><a title="GenMSIL.this.global.icodes.BasicBlock" id="296128">b</a> =&gt; <span title="GenMSIL.this.global.icodes.BasicBlock" class="keyword">if</span> (<a href="#296128" title="(x$1: AnyRef)Boolean">b</a> == <a href="#295788" title="GenMSIL.this.global.icodes.BasicBlock">from</a>) <a href="#295789" title="GenMSIL.this.global.icodes.BasicBlock">to</a> <span class="keyword">else</span> <a href="#296128" title="GenMSIL.this.global.icodes.BasicBlock">b</a>)
                    <span title="(assertion: Boolean)Unit">assert</span>(<a href="#296119" title="List[GenMSIL.this.global.icodes.BasicBlock]">newLabels</a>.<span title="(elem: Any)Boolean">contains</span>(<a href="#295789" title="GenMSIL.this.global.icodes.BasicBlock">to</a>))
                    <a href="#295787" title="GenMSIL.this.global.icodes.BasicBlock">block</a>.<a href="../icode/BasicBlocks.scala.html#61594" title="(oldInstr: GenMSIL.this.global.icodes.Instruction,newInstr: GenMSIL.this.global.icodes.Instruction)Boolean">replaceInstruction</a>(<a href="#295787" title="GenMSIL.this.global.icodes.BasicBlock">block</a>.<a href="../icode/BasicBlocks.scala.html#61610" title="=&gt; GenMSIL.this.global.icodes.Instruction">lastInstruction</a>, <a href="../icode/Opcodes.scala.html#64038" title="(tags: List[List[Int]],labels: List[GenMSIL.this.global.icodes.BasicBlock])GenMSIL.this.global.icodes.opcodes.SWITCH">SWITCH</a>(<a href="#296115" title="List[List[Int]]">tags</a>, <a href="#296119" title="List[GenMSIL.this.global.icodes.BasicBlock]">newLabels</a>))
                  /*
                  case RETURN(kind) =&gt;
                    if (kind != UNIT) {
                        returnVal
                    }
                    block.replaceInstruction(block.lastInstructionm JUMP(to))
                  */
                  <span title="Unit" class="keyword">case</span> _ =&gt; <span title="Unit">(</span>) //abort(&quot;expected branch at the end of block &quot; + block)
                }

                <span class="keyword">val</span> <a title="GenMSIL.this.global.icodes.BasicBlock" id="295786">jumpOutBlock</a> = <a href="#295782" title="List[GenMSIL.this.global.icodes.BasicBlock]">blocks</a>.<span title="=&gt; GenMSIL.this.global.icodes.BasicBlock">last</span>.<a href="../icode/BasicBlocks.scala.html#61550" title="=&gt; GenMSIL.this.global.icodes.Code">code</a>.<a href="../icode/Members.scala.html#61676" title="=&gt; GenMSIL.this.global.icodes.BasicBlock">newBlock</a>
                <a href="#295786" title="GenMSIL.this.global.icodes.BasicBlock">jumpOutBlock</a>.<a href="../icode/BasicBlocks.scala.html#61601" title="(instr: GenMSIL.this.global.icodes.Instruction)Unit">emit</a>(<a href="../icode/Opcodes.scala.html#64078" title="(whereto: GenMSIL.this.global.icodes.BasicBlock)GenMSIL.this.global.icodes.opcodes.JUMP">JUMP</a>(<a href="#295560" title="(key: GenMSIL.this.global.icodes.ExceptionHandler)GenMSIL.this.global.icodes.BasicBlock">firstBlockAfter</a>(<a href="#295784" title="GenMSIL.this.global.icodes.ExceptionHandler">exh</a>)))
                <a href="#295786" title="GenMSIL.this.global.icodes.BasicBlock">jumpOutBlock</a>.<a href="../icode/BasicBlocks.scala.html#61604" title="=&gt; Unit">close</a>
                <a href="#295783" title="List[(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])]">leaving</a>.<span title="(f: ((GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])) =&gt; Unit)Unit">foreach</span>(<a title="(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])" id="296330">p</a> =&gt; {
                  <span class="keyword">val</span> <a title="GenMSIL.this.global.icodes.BasicBlock" id="296331">lBlock</a> = <a href="#296330" title="(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])">p</a>.<span title="=&gt; GenMSIL.this.global.icodes.BasicBlock">_1</span>
                  <span class="keyword">val</span> <a title="GenMSIL.this.global.icodes.BasicBlock" id="296332">target</a> = <a href="#296330" title="(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])">p</a>.<span title="(n: Int)GenMSIL.this.global.icodes.BasicBlock">_2</span>(<span title="Int(0)" class="int">0</span>) // the elemets of p._2 are all the same, checked before
                  <a href="#295785" title="(block: GenMSIL.this.global.icodes.BasicBlock,from: GenMSIL.this.global.icodes.BasicBlock,to: GenMSIL.this.global.icodes.BasicBlock)AnyVal">replaceJump</a>(<a href="#296331" title="GenMSIL.this.global.icodes.BasicBlock">lBlock</a>, <a href="#296332" title="GenMSIL.this.global.icodes.BasicBlock">target</a>, <a href="#295786" title="GenMSIL.this.global.icodes.BasicBlock">jumpOutBlock</a>)
                  <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37988" title="=&gt; Boolean">value</a>) <a href="../../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;replacing &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#296331" title="GenMSIL.this.global.icodes.BasicBlock">lBlock</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; target &quot;)" class="string">&quot; target &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#296332" title="GenMSIL.this.global.icodes.BasicBlock">target</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; jump out &quot;)" class="string">&quot; jump out &quot;</span> + <a href="#295786" title="GenMSIL.this.global.icodes.BasicBlock">jumpOutBlock</a>)
                })
                <span title="(_1: List[GenMSIL.this.global.icodes.BasicBlock],_2: Some[GenMSIL.this.global.icodes.BasicBlock])(List[GenMSIL.this.global.icodes.BasicBlock], Some[GenMSIL.this.global.icodes.BasicBlock])">(</span><a href="#295782" title="List[GenMSIL.this.global.icodes.BasicBlock]">blocks</a> <a href="#296365" title="List[GenMSIL.this.global.icodes.BasicBlock]">:::</a> <span title="(xs: GenMSIL.this.global.icodes.BasicBlock*)List[GenMSIL.this.global.icodes.BasicBlock]">List</span><span title="(prefix: List[GenMSIL.this.global.icodes.BasicBlock])List[GenMSIL.this.global.icodes.BasicBlock]">(</span><a href="#295786" title="GenMSIL.this.global.icodes.BasicBlock">jumpOutBlock</a>), <span title="(x: GenMSIL.this.global.icodes.BasicBlock)Some[GenMSIL.this.global.icodes.BasicBlock]">Some</span>(<a href="#295786" title="GenMSIL.this.global.icodes.BasicBlock">jumpOutBlock</a>))
              }

              <span class="keyword">val</span> <a title="List[(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])]" id="295575">leaving</a> = <a href="#295573" title="(blocks: List[GenMSIL.this.global.icodes.BasicBlock])List[(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])]">leavingBlocks</a>(<a href="#295570" title="List[GenMSIL.this.global.icodes.BasicBlock]">blocks</a>)
              <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37988" title="=&gt; Boolean">value</a>) <a href="../../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;leaving &quot;</span> + <a href="#295575" title="List[(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])]">leaving</a>)
              <span title="(List[GenMSIL.this.global.icodes.BasicBlock], Option[GenMSIL.this.global.icodes.BasicBlock])" class="keyword">if</span> (<a href="#295575" title="List[(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])]">leaving</a>.<span title="(x$1: Int)Boolean">length</span> == <span title="Int(0)" class="int">0</span>)
                <span title="(_1: List[GenMSIL.this.global.icodes.BasicBlock],_2: object None)(List[GenMSIL.this.global.icodes.BasicBlock], object None)">(</span><a href="#295570" title="List[GenMSIL.this.global.icodes.BasicBlock]">blocks</a>, <span title="object None">None</span>)
              <span class="keyword">else</span> <span title="(List[GenMSIL.this.global.icodes.BasicBlock], Option[GenMSIL.this.global.icodes.BasicBlock])" class="keyword">if</span> (<a href="#295575" title="List[(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])]">leaving</a>.<span title="(x$1: Int)Boolean">length</span> == <span title="Int(1)" class="int">1</span>) {
                <span class="keyword">val</span> <a title="List[GenMSIL.this.global.icodes.BasicBlock]" id="296421">outside</a> = <a href="#295575" title="(n: Int)(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])">leaving</a>(<span title="Int(0)" class="int">0</span>).<span title="=&gt; List[GenMSIL.this.global.icodes.BasicBlock]">_2</span>
                //assert(outside.forall(b =&gt; b == outside(0)), &quot;exception-block leaving to multiple targets&quot;)
                <span title="Unit" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="#295560" title="scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.ExceptionHandler,GenMSIL.this.global.icodes.BasicBlock]">firstBlockAfter</a>.<span title="(key: GenMSIL.this.global.icodes.ExceptionHandler)Boolean">isDefinedAt</span>(<a href="#295571" title="GenMSIL.this.global.icodes.ExceptionHandler">exh</a>))
                  <a href="#295560" title="(key: GenMSIL.this.global.icodes.ExceptionHandler,value: GenMSIL.this.global.icodes.BasicBlock)Unit">firstBlockAfter</a>(<a href="#295571" title="GenMSIL.this.global.icodes.ExceptionHandler">exh</a>) = <a href="#296421" title="(n: Int)GenMSIL.this.global.icodes.BasicBlock">outside</a>(<span title="Int(0)" class="int">0</span>)
                //else ()
                  //assert(firstBlockAfter(exh) == outside(0), &quot;try/catch leaving to multiple targets: &quot; + firstBlockAfter(exh) + &quot;, new: &quot; + outside(0))
                <span class="keyword">val</span> <a title="GenMSIL.this.global.icodes.BasicBlock" id="296422">last</a> = <a href="#295575" title="(n: Int)(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])">leaving</a>(<span title="Int(0)" class="int">0</span>).<span title="=&gt; GenMSIL.this.global.icodes.BasicBlock">_1</span>
                <span title="(_1: List[GenMSIL.this.global.icodes.BasicBlock],_2: object None)(List[GenMSIL.this.global.icodes.BasicBlock], object None)">(</span>(<a href="#295570" title="(x: GenMSIL.this.global.icodes.BasicBlock)List[GenMSIL.this.global.icodes.BasicBlock]">blocks</a> - <a href="#296422" title="GenMSIL.this.global.icodes.BasicBlock">last</a>) <a href="#296471" title="List[GenMSIL.this.global.icodes.BasicBlock]">:::</a> <span title="(xs: GenMSIL.this.global.icodes.BasicBlock*)List[GenMSIL.this.global.icodes.BasicBlock]">List</span><span title="(prefix: List[GenMSIL.this.global.icodes.BasicBlock])List[GenMSIL.this.global.icodes.BasicBlock]">(</span><a href="#296422" title="GenMSIL.this.global.icodes.BasicBlock">last</a>), <span title="object None">None</span>)
              } <span class="keyword">else</span> {
                <span class="keyword">val</span> <a title="List[GenMSIL.this.global.icodes.BasicBlock]" id="296499">outside</a> = <a href="#295575" title="List[(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])]">leaving</a>.<a title="(f: ((GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])) =&gt; Traversable[GenMSIL.this.global.icodes.BasicBlock])(implicit bf: scala.collection.generic.BuilderFactory[GenMSIL.this.global.icodes.BasicBlock,List[GenMSIL.this.global.icodes.BasicBlock],List[(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])]])List[GenMSIL.this.global.icodes.BasicBlock]" id="25407">flatMap</a><span title="scala.collection.generic.BuilderFactory[GenMSIL.this.global.icodes.BasicBlock,List[GenMSIL.this.global.icodes.BasicBlock],List#Coll]">(</span><a title="(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])" id="296508">p</a> =&gt; <a href="#296508" title="(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])">p</a>.<span title="=&gt; List[GenMSIL.this.global.icodes.BasicBlock]">_2</span>)
                //assert(outside.forall(b =&gt; b == outside(0)), &quot;exception-block leaving to multiple targets&quot;)
                <span title="Unit" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="#295560" title="scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.ExceptionHandler,GenMSIL.this.global.icodes.BasicBlock]">firstBlockAfter</a>.<span title="(key: GenMSIL.this.global.icodes.ExceptionHandler)Boolean">isDefinedAt</span>(<a href="#295571" title="GenMSIL.this.global.icodes.ExceptionHandler">exh</a>))
                  <a href="#295560" title="(key: GenMSIL.this.global.icodes.ExceptionHandler,value: GenMSIL.this.global.icodes.BasicBlock)Unit">firstBlockAfter</a>(<a href="#295571" title="GenMSIL.this.global.icodes.ExceptionHandler">exh</a>) = <a href="#296499" title="(n: Int)GenMSIL.this.global.icodes.BasicBlock">outside</a>(<span title="Int(0)" class="int">0</span>)
                //else
                  //assert(firstBlockAfter(exh) == outside(0), &quot;try/catch leaving to multiple targets&quot;)
                <a href="#295574" title="(blocks: List[GenMSIL.this.global.icodes.BasicBlock],leaving: List[(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])],exh: GenMSIL.this.global.icodes.ExceptionHandler)(List[GenMSIL.this.global.icodes.BasicBlock], Option[GenMSIL.this.global.icodes.BasicBlock])">replaceOutJumps</a>(<a href="#295570" title="List[GenMSIL.this.global.icodes.BasicBlock]">blocks</a>, <a href="#295575" title="List[(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])]">leaving</a>, <a href="#295571" title="GenMSIL.this.global.icodes.ExceptionHandler">exh</a>)
              }
            }

            <span class="keyword">var</span> <a title="List[GenMSIL.this.global.icodes.ExceptionHandler]" id="295563">affectedHandlers</a>: <span title="List[GenMSIL.this.global.icodes.ExceptionHandler]">List</span>[ExceptionHandler] = <span title="object Nil">Nil</span>
            <a href="#295394" title="List[GenMSIL.this.global.icodes.ExceptionHandler]">untreatedHandlers</a>.<span title="(f: (GenMSIL.this.global.icodes.ExceptionHandler) =&gt; Unit)Unit">foreach</span>( (<a title="GenMSIL.this.global.icodes.ExceptionHandler" id="296634">h</a>) =&gt; {
              <span title="Unit" class="keyword">if</span> (<a href="#296634" title="GenMSIL.this.global.icodes.ExceptionHandler">h</a>.<a href="../icode/ExceptionHandlers.scala.html#61719" title="(b: GenMSIL.this.global.icodes.BasicBlock)Boolean">covers</a>(<a href="#295414" title="GenMSIL.this.global.icodes.BasicBlock">x</a>)){
                <a href="#295563" title="List[GenMSIL.this.global.icodes.ExceptionHandler]">affectedHandlers</a> = <a href="#296634" title="GenMSIL.this.global.icodes.ExceptionHandler">h</a> <a href="#296638" title="GenMSIL.this.global.icodes.ExceptionHandler">::</a> <a href="#295563" title="(x: GenMSIL.this.global.icodes.ExceptionHandler)List[GenMSIL.this.global.icodes.ExceptionHandler]">affectedHandlers</a>
              }
            })

            // shorter try-catch-finally last (the ones contained in another)
            <a href="#295563" title="List[GenMSIL.this.global.icodes.ExceptionHandler]">affectedHandlers</a> = <a href="#295563" title="List[GenMSIL.this.global.icodes.ExceptionHandler]">affectedHandlers</a>.<span title="(lt: (GenMSIL.this.global.icodes.ExceptionHandler, GenMSIL.this.global.icodes.ExceptionHandler) =&gt; Boolean)List[GenMSIL.this.global.icodes.ExceptionHandler]">sort</span>({(<a title="GenMSIL.this.global.icodes.ExceptionHandler" id="296651">h1</a>, <a title="GenMSIL.this.global.icodes.ExceptionHandler" id="296652">h2</a>) =&gt; <a href="#296651" title="GenMSIL.this.global.icodes.ExceptionHandler">h1</a>.<a href="../icode/ExceptionHandlers.scala.html#61715" title="=&gt; scala.collection.immutable.Set[GenMSIL.this.global.icodes.BasicBlock]">covered</a>.<span title="(x$1: Int)Boolean">size</span> &gt; <a href="#296652" title="GenMSIL.this.global.icodes.ExceptionHandler">h2</a>.<a href="../icode/ExceptionHandlers.scala.html#61715" title="=&gt; scala.collection.immutable.Set[GenMSIL.this.global.icodes.BasicBlock]">covered</a>.<span title="=&gt; Int">size</span>})
            <a href="#295563" title="List[GenMSIL.this.global.icodes.ExceptionHandler]">affectedHandlers</a> = <a href="#295563" title="List[GenMSIL.this.global.icodes.ExceptionHandler]">affectedHandlers</a>.<span title="(p: (GenMSIL.this.global.icodes.ExceptionHandler) =&gt; Boolean)List[GenMSIL.this.global.icodes.ExceptionHandler]">filter</span>(<a title="GenMSIL.this.global.icodes.ExceptionHandler" id="296663">h</a> =&gt; {<a href="#296663" title="GenMSIL.this.global.icodes.ExceptionHandler">h</a>.<a href="../icode/ExceptionHandlers.scala.html#61715" title="=&gt; scala.collection.immutable.Set[GenMSIL.this.global.icodes.BasicBlock]">covered</a>.<span title="(x$1: Int)Boolean">size</span> == <a href="#295563" title="(n: Int)GenMSIL.this.global.icodes.ExceptionHandler">affectedHandlers</a>(<span title="Int(0)" class="int">0</span>).<a href="../icode/ExceptionHandlers.scala.html#61715" title="=&gt; scala.collection.immutable.Set[GenMSIL.this.global.icodes.BasicBlock]">covered</a>.<span title="=&gt; Int">size</span>})
            <a href="#295394" title="List[GenMSIL.this.global.icodes.ExceptionHandler]">untreatedHandlers</a> = <a href="#295394" title="(that: List[GenMSIL.this.global.icodes.ExceptionHandler])List[GenMSIL.this.global.icodes.ExceptionHandler]">untreatedHandlers</a> -- <a href="#295563" title="List[GenMSIL.this.global.icodes.ExceptionHandler]">affectedHandlers</a>

            // more than one catch produces more than one exh, but we only need one
            <span class="keyword">var</span> <a title="GenMSIL.this.global.icodes.ExceptionHandler" id="295564">singleAffectedHandler</a>: <a href="../icode/ExceptionHandlers.scala.html#46468" title="GenMSIL.this.global.icodes.ExceptionHandler">ExceptionHandler</a> = <a href="#295563" title="(n: Int)GenMSIL.this.global.icodes.ExceptionHandler">affectedHandlers</a>(<span title="Int(0)" class="int">0</span>) // List[ExceptionHandler] = Nil
            <span class="keyword">var</span> <a title="Option[BytecodeGenerator.this.ExceptionBlock]" id="295565">exceptionBlock</a>: <span title="Option[BytecodeGenerator.this.ExceptionBlock]">Option</span>[ExceptionBlock] = <span title="object None">None</span>
            <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37988" title="=&gt; Boolean">value</a>) <a href="../../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;affected handlers &quot;</span> + <a href="#295563" title="List[GenMSIL.this.global.icodes.ExceptionHandler]">affectedHandlers</a>)
            <a href="#295563" title="List[GenMSIL.this.global.icodes.ExceptionHandler]">affectedHandlers</a>.<span title="(f: (GenMSIL.this.global.icodes.ExceptionHandler) =&gt; Unit)Unit">foreach</span>(<a title="GenMSIL.this.global.icodes.ExceptionHandler" id="296723">h1</a> =&gt; {
              <span class="keyword">val</span> <a href="#296725" title="(List[GenMSIL.this.global.icodes.BasicBlock], Option[GenMSIL.this.global.icodes.BasicBlock])">(</a><a href="#296724" title="List[GenMSIL.this.global.icodes.BasicBlock]" id="296725">adaptedBlocks</a>, <a href="#296724" title="Option[GenMSIL.this.global.icodes.BasicBlock]" id="296726">newBlock</a>) = <a href="#295562" title="(blocks: List[GenMSIL.this.global.icodes.BasicBlock],exh: GenMSIL.this.global.icodes.ExceptionHandler)(List[GenMSIL.this.global.icodes.BasicBlock], Option[GenMSIL.this.global.icodes.BasicBlock])">adaptBlocks</a><span title="(List[GenMSIL.this.global.icodes.BasicBlock], Option[GenMSIL.this.global.icodes.BasicBlock]) @unchecked">(</span><a href="#295392" title="List[GenMSIL.this.global.icodes.BasicBlock]">blocksToPut</a>.<span title="(that: Sequence[GenMSIL.this.global.icodes.BasicBlock])List[GenMSIL.this.global.icodes.BasicBlock]">intersect</span>(<a href="#296723" title="GenMSIL.this.global.icodes.ExceptionHandler">h1</a>.<a href="../icode/ExceptionHandlers.scala.html#61720" title="=&gt; List[GenMSIL.this.global.icodes.BasicBlock]">blocks</a>), <a href="#295564" title="GenMSIL.this.global.icodes.ExceptionHandler">singleAffectedHandler</a>)
              <a href="#296726" title="Option[GenMSIL.this.global.icodes.BasicBlock]">newBlock</a> <span title="Unit" class="keyword">match</span> {
                <span title="Unit" class="keyword">case</span> Some(<a title="GenMSIL.this.global.icodes.BasicBlock" id="296756">block</a>) =&gt;
                  <a href="#295392" title="List[GenMSIL.this.global.icodes.BasicBlock]">blocksToPut</a> = <a href="#295392" title="List[GenMSIL.this.global.icodes.BasicBlock]">blocksToPut</a> <a href="#296759" title="List[GenMSIL.this.global.icodes.BasicBlock]">:::</a> <span title="(xs: GenMSIL.this.global.icodes.BasicBlock*)List[GenMSIL.this.global.icodes.BasicBlock]">List</span><span title="(prefix: List[GenMSIL.this.global.icodes.BasicBlock])List[GenMSIL.this.global.icodes.BasicBlock]">(</span><a href="#296756" title="GenMSIL.this.global.icodes.BasicBlock">block</a>)
                  <a href="#296723" title="GenMSIL.this.global.icodes.ExceptionHandler">h1</a>.<a href="../icode/ExceptionHandlers.scala.html#61723" title="(b: GenMSIL.this.global.icodes.BasicBlock)Unit">addBlock</a>(<a href="#296756" title="GenMSIL.this.global.icodes.BasicBlock">block</a>)
                <span title="Unit" class="keyword">case</span> <span title="object None">None</span> =&gt; <span title="Unit">(</span>)
              }
              <span class="keyword">val</span> <a title="List[GenMSIL.this.global.icodes.BasicBlock]" id="296727">orderedCatchBlocks</a> = <a href="#296723" title="GenMSIL.this.global.icodes.ExceptionHandler">h1</a>.<a href="../icode/ExceptionHandlers.scala.html#61714" title="=&gt; GenMSIL.this.global.icodes.BasicBlock">startBlock</a> <a href="#296781" title="GenMSIL.this.global.icodes.BasicBlock">::</a> <span title="(x: GenMSIL.this.global.icodes.BasicBlock)List[GenMSIL.this.global.icodes.BasicBlock]">(</span><a href="#296725" title="(x: GenMSIL.this.global.icodes.BasicBlock)List[GenMSIL.this.global.icodes.BasicBlock]">adaptedBlocks</a> - <a href="#296723" title="GenMSIL.this.global.icodes.ExceptionHandler">h1</a>.<a href="../icode/ExceptionHandlers.scala.html#61714" title="=&gt; GenMSIL.this.global.icodes.BasicBlock">startBlock</a>)

              <a href="#295565" title="Option[BytecodeGenerator.this.ExceptionBlock]">exceptionBlock</a> <span title="Unit" class="keyword">match</span> {
                <span title="Unit" class="keyword">case</span> Some(<a title="BytecodeGenerator.this.ExceptionBlock" id="296797">excBlock</a>) =&gt;
                  <span class="keyword">val</span> <a title="BytecodeGenerator.this.CatchBlock" id="296800">catchBlock</a> = <a href="#296797" title="BytecodeGenerator.this.ExceptionBlock">excBlock</a>.<a href="#294629" title="(exSym: GenMSIL.this.global.Symbol)BytecodeGenerator.this.CatchBlock">addCatchBlock</a>(<a href="#296723" title="GenMSIL.this.global.icodes.ExceptionHandler">h1</a>.<a href="../icode/ExceptionHandlers.scala.html#61701" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">cls</a>)
                  <a href="#295395" title="BytecodeGenerator.this.BlockList0">currentBlock</a> = <a href="#296800" title="BytecodeGenerator.this.CatchBlock">catchBlock</a>
                  <a href="#295396" title="(b: List[GenMSIL.this.global.icodes.BasicBlock])Unit">addBlocks</a>(<a href="#296727" title="List[GenMSIL.this.global.icodes.BasicBlock]">orderedCatchBlocks</a>)
                <span title="Unit" class="keyword">case</span> <span title="object None">None</span> =&gt;
                  <span class="keyword">val</span> <a title="BytecodeGenerator.this.ExceptionBlock" id="296805">excBlock</a> = <a href="#295395" title="BytecodeGenerator.this.BlockList0">currentBlock</a>.<a href="#294478" title="(exh: GenMSIL.this.global.icodes.ExceptionHandler)BytecodeGenerator.this.ExceptionBlock">addExceptionBlock</a>(<a href="#295564" title="GenMSIL.this.global.icodes.ExceptionHandler">singleAffectedHandler</a>)
                  <a href="#295565" title="Option[BytecodeGenerator.this.ExceptionBlock]">exceptionBlock</a> = <span title="(x: BytecodeGenerator.this.ExceptionBlock)Some[BytecodeGenerator.this.ExceptionBlock]">Some</span>(<a href="#296805" title="BytecodeGenerator.this.ExceptionBlock">excBlock</a>)

                  <span class="keyword">val</span> <a href="#296807" title="(List[GenMSIL.this.global.icodes.BasicBlock], Option[GenMSIL.this.global.icodes.BasicBlock])">(</a><a href="#296806" title="List[GenMSIL.this.global.icodes.BasicBlock]" id="296807">tryBlocks</a>, <a href="#296806" title="Option[GenMSIL.this.global.icodes.BasicBlock]" id="296808">newBlock</a>) = <a href="#295562" title="(blocks: List[GenMSIL.this.global.icodes.BasicBlock],exh: GenMSIL.this.global.icodes.ExceptionHandler)(List[GenMSIL.this.global.icodes.BasicBlock], Option[GenMSIL.this.global.icodes.BasicBlock])">adaptBlocks</a><span title="(List[GenMSIL.this.global.icodes.BasicBlock], Option[GenMSIL.this.global.icodes.BasicBlock]) @unchecked">(</span><a href="#295392" title="List[GenMSIL.this.global.icodes.BasicBlock]">blocksToPut</a>.<span title="(that: Sequence[GenMSIL.this.global.icodes.BasicBlock])List[GenMSIL.this.global.icodes.BasicBlock]">intersect</span>(<a href="#295564" title="GenMSIL.this.global.icodes.ExceptionHandler">singleAffectedHandler</a>.<a href="../icode/ExceptionHandlers.scala.html#61715" title="=&gt; scala.collection.immutable.Set[GenMSIL.this.global.icodes.BasicBlock]">covered</a>.<a title="=&gt; List[GenMSIL.this.global.icodes.BasicBlock]" id="25511">toList</a>), <a href="#295564" title="GenMSIL.this.global.icodes.ExceptionHandler">singleAffectedHandler</a>)

                  <a href="#296808" title="Option[GenMSIL.this.global.icodes.BasicBlock]">newBlock</a> <span title="Any" class="keyword">match</span> {
                    <span title="GenMSIL.this.global.icodes.ExceptionHandler" class="keyword">case</span> Some(<a title="GenMSIL.this.global.icodes.BasicBlock" id="296845">block</a>) =&gt;
                      <a href="#295392" title="List[GenMSIL.this.global.icodes.BasicBlock]">blocksToPut</a> = <a href="#295392" title="List[GenMSIL.this.global.icodes.BasicBlock]">blocksToPut</a> <a href="#296848" title="List[GenMSIL.this.global.icodes.BasicBlock]">:::</a> <span title="(xs: GenMSIL.this.global.icodes.BasicBlock*)List[GenMSIL.this.global.icodes.BasicBlock]">List</span><span title="(prefix: List[GenMSIL.this.global.icodes.BasicBlock])List[GenMSIL.this.global.icodes.BasicBlock]">(</span><a href="#296845" title="GenMSIL.this.global.icodes.BasicBlock">block</a>)
                      <a href="#295564" title="GenMSIL.this.global.icodes.ExceptionHandler">singleAffectedHandler</a>.<a href="../icode/ExceptionHandlers.scala.html#61718" title="(b: GenMSIL.this.global.icodes.BasicBlock)GenMSIL.this.global.icodes.ExceptionHandler">addCoveredBlock</a>(<a href="#296845" title="GenMSIL.this.global.icodes.BasicBlock">block</a>)
                    <span title="Unit" class="keyword">case</span> <span title="object None">None</span> =&gt; <span title="Unit">(</span>)
                  }
                  <a href="#295395" title="BytecodeGenerator.this.BlockList0">currentBlock</a> = <a href="#296805" title="BytecodeGenerator.this.ExceptionBlock">excBlock</a>.<a href="#294618" title="=&gt; BytecodeGenerator.this.BlockList">tryBlock</a>
                  <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37988" title="=&gt; Boolean">value</a>) <a href="../../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;adding try blocks &quot;</span> + <a href="#296807" title="List[GenMSIL.this.global.icodes.BasicBlock]">tryBlocks</a>)
                  <a href="#295396" title="(b: List[GenMSIL.this.global.icodes.BasicBlock])Unit">addBlocks</a>(<a href="#296807" title="List[GenMSIL.this.global.icodes.BasicBlock]">tryBlocks</a>)

                  <span title="Unit" class="keyword">if</span> (<a href="#295564" title="GenMSIL.this.global.icodes.ExceptionHandler">singleAffectedHandler</a>.<a href="../icode/ExceptionHandlers.scala.html#61707" title="(x$1: AnyRef)Boolean">finalizer</a> <span title="(x$1: Boolean)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span> &amp;&amp; <a href="#295564" title="GenMSIL.this.global.icodes.ExceptionHandler">singleAffectedHandler</a>.<a href="../icode/ExceptionHandlers.scala.html#61707" title="(x$1: AnyRef)Boolean">finalizer</a> != <a href="../icode/ExceptionHandlers.scala.html#46470" title="object GenMSIL.this.global.icodes.NoFinalizer">NoFinalizer</a>) {
                    <span class="keyword">val</span> <a href="#296914" title="(List[GenMSIL.this.global.icodes.BasicBlock], Option[GenMSIL.this.global.icodes.BasicBlock])">(</a><a href="#296913" title="List[GenMSIL.this.global.icodes.BasicBlock]" id="296914">blocks0</a>, <a href="#296913" title="Option[GenMSIL.this.global.icodes.BasicBlock]" id="296915">newBlock</a>) = <a href="#295562" title="(blocks: List[GenMSIL.this.global.icodes.BasicBlock],exh: GenMSIL.this.global.icodes.ExceptionHandler)(List[GenMSIL.this.global.icodes.BasicBlock], Option[GenMSIL.this.global.icodes.BasicBlock])">adaptBlocks</a><span title="(List[GenMSIL.this.global.icodes.BasicBlock], Option[GenMSIL.this.global.icodes.BasicBlock]) @unchecked">(</span><a href="#295392" title="List[GenMSIL.this.global.icodes.BasicBlock]">blocksToPut</a>.<span title="(that: Sequence[GenMSIL.this.global.icodes.BasicBlock])List[GenMSIL.this.global.icodes.BasicBlock]">intersect</span>(<a href="#295564" title="GenMSIL.this.global.icodes.ExceptionHandler">singleAffectedHandler</a>.<a href="../icode/ExceptionHandlers.scala.html#61707" title="=&gt; GenMSIL.this.global.icodes.Finalizer">finalizer</a>.<a href="../icode/ExceptionHandlers.scala.html#61720" title="=&gt; List[GenMSIL.this.global.icodes.BasicBlock]">blocks</a>), <a href="#295564" title="GenMSIL.this.global.icodes.ExceptionHandler">singleAffectedHandler</a>)
                    <a href="#296915" title="Option[GenMSIL.this.global.icodes.BasicBlock]">newBlock</a> <span title="Unit" class="keyword">match</span> {
                      <span title="Unit" class="keyword">case</span> Some(<a title="GenMSIL.this.global.icodes.BasicBlock" id="296945">block</a>) =&gt;
                        <a href="#295392" title="List[GenMSIL.this.global.icodes.BasicBlock]">blocksToPut</a> = <a href="#295392" title="List[GenMSIL.this.global.icodes.BasicBlock]">blocksToPut</a> <a href="#296948" title="List[GenMSIL.this.global.icodes.BasicBlock]">:::</a> <span title="(xs: GenMSIL.this.global.icodes.BasicBlock*)List[GenMSIL.this.global.icodes.BasicBlock]">List</span><span title="(prefix: List[GenMSIL.this.global.icodes.BasicBlock])List[GenMSIL.this.global.icodes.BasicBlock]">(</span><a href="#296945" title="GenMSIL.this.global.icodes.BasicBlock">block</a>)
                        <a href="#295564" title="GenMSIL.this.global.icodes.ExceptionHandler">singleAffectedHandler</a>.<a href="../icode/ExceptionHandlers.scala.html#61707" title="=&gt; GenMSIL.this.global.icodes.Finalizer">finalizer</a>.<a href="../icode/ExceptionHandlers.scala.html#61723" title="(b: GenMSIL.this.global.icodes.BasicBlock)Unit">addBlock</a>(<a href="#296945" title="GenMSIL.this.global.icodes.BasicBlock">block</a>)
                      <span title="Unit" class="keyword">case</span> <span title="object None">None</span> =&gt; <span title="Unit">(</span>)
                    }
                    <span class="keyword">val</span> <a title="List[GenMSIL.this.global.icodes.BasicBlock]" id="296916">blocks</a> = <a href="#295564" title="GenMSIL.this.global.icodes.ExceptionHandler">singleAffectedHandler</a>.<a href="../icode/ExceptionHandlers.scala.html#61707" title="=&gt; GenMSIL.this.global.icodes.Finalizer">finalizer</a>.<a href="../icode/ExceptionHandlers.scala.html#61714" title="=&gt; GenMSIL.this.global.icodes.BasicBlock">startBlock</a> <a href="#296968" title="GenMSIL.this.global.icodes.BasicBlock">::</a> <span title="(x: GenMSIL.this.global.icodes.BasicBlock)List[GenMSIL.this.global.icodes.BasicBlock]">(</span><a href="#296914" title="(x: GenMSIL.this.global.icodes.BasicBlock)List[GenMSIL.this.global.icodes.BasicBlock]">blocks0</a> - <a href="#295564" title="GenMSIL.this.global.icodes.ExceptionHandler">singleAffectedHandler</a>.<a href="../icode/ExceptionHandlers.scala.html#61707" title="=&gt; GenMSIL.this.global.icodes.Finalizer">finalizer</a>.<a href="../icode/ExceptionHandlers.scala.html#61714" title="=&gt; GenMSIL.this.global.icodes.BasicBlock">startBlock</a>)
                    <a href="#295395" title="BytecodeGenerator.this.BlockList0">currentBlock</a> = <a href="#296805" title="BytecodeGenerator.this.ExceptionBlock">excBlock</a>.<a href="#294624" title="=&gt; BytecodeGenerator.this.BlockList">finallyBlock</a>
                    <a href="#295396" title="(b: List[GenMSIL.this.global.icodes.BasicBlock])Unit">addBlocks</a>(<a href="#296916" title="List[GenMSIL.this.global.icodes.BasicBlock]">blocks</a>)
                  }

                  <span class="keyword">val</span> <a title="BytecodeGenerator.this.CatchBlock" id="296809">catchBlock</a> = <a href="#296805" title="BytecodeGenerator.this.ExceptionBlock">excBlock</a>.<a href="#294629" title="(exSym: GenMSIL.this.global.Symbol)BytecodeGenerator.this.CatchBlock">addCatchBlock</a>(<a href="#295564" title="GenMSIL.this.global.icodes.ExceptionHandler">singleAffectedHandler</a>.<a href="../icode/ExceptionHandlers.scala.html#61701" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">cls</a>)
                  <a href="#295395" title="BytecodeGenerator.this.BlockList0">currentBlock</a> = <a href="#296809" title="BytecodeGenerator.this.CatchBlock">catchBlock</a>
                  <a href="#295396" title="(b: List[GenMSIL.this.global.icodes.BasicBlock])Unit">addBlocks</a>(<a href="#296727" title="List[GenMSIL.this.global.icodes.BasicBlock]">orderedCatchBlocks</a>)
              }
              <span title="Unit" class="keyword">if</span> (<a href="#295560" title="scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.ExceptionHandler,GenMSIL.this.global.icodes.BasicBlock]">firstBlockAfter</a>.<span title="(key: GenMSIL.this.global.icodes.ExceptionHandler)Boolean">isDefinedAt</span>(<a href="#295564" title="GenMSIL.this.global.icodes.ExceptionHandler">singleAffectedHandler</a>))
                <a href="#295393" title="GenMSIL.this.global.icodes.BasicBlock">nextBlock</a> = <a href="#295560" title="(key: GenMSIL.this.global.icodes.ExceptionHandler)GenMSIL.this.global.icodes.BasicBlock">firstBlockAfter</a>(<a href="#295564" title="GenMSIL.this.global.icodes.ExceptionHandler">singleAffectedHandler</a>)
              <span class="keyword">else</span>
                <a href="#295393" title="GenMSIL.this.global.icodes.BasicBlock">nextBlock</a> = <span title="Null(null)" class="keyword">null</span>
            })

            <a href="#295395" title="BytecodeGenerator.this.BlockList0">currentBlock</a> = <a href="#295561" title="BytecodeGenerator.this.BlockList0">savedCurrentBlock</a>

            <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37988" title="=&gt; Boolean">value</a>)
              <a href="../../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot; -&gt; addBlocks(&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#295415" title="List[GenMSIL.this.global.icodes.BasicBlock]">xs</a>.<span title="(that: Sequence[GenMSIL.this.global.icodes.BasicBlock])List[GenMSIL.this.global.icodes.BasicBlock]">intersect</span>(<a href="#295392" title="List[GenMSIL.this.global.icodes.BasicBlock]">blocksToPut</a>) + <span title="java.lang.String(&quot;)&quot;)" class="string">&quot;)&quot;</span>)
            <a href="#295396" title="(b: List[GenMSIL.this.global.icodes.BasicBlock])Unit">addBlocks</a>(<a href="#295415" title="List[GenMSIL.this.global.icodes.BasicBlock]">xs</a>.<span title="(that: Sequence[GenMSIL.this.global.icodes.BasicBlock])List[GenMSIL.this.global.icodes.BasicBlock]">intersect</span>(<a href="#295392" title="List[GenMSIL.this.global.icodes.BasicBlock]">blocksToPut</a>))
          }
      }

      // begin method orderBlocksForExh

      <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37988" title="=&gt; Boolean">value</a>)
        <a href="../../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;before: &quot;</span> + <a href="#294119" title="List[GenMSIL.this.global.icodes.BasicBlock]">blocks</a>)
      // some blocks may have been removed by linearization
      <a href="#295394" title="List[GenMSIL.this.global.icodes.ExceptionHandler]">untreatedHandlers</a>.<span title="(f: (GenMSIL.this.global.icodes.ExceptionHandler) =&gt; Unit)Unit">foreach</span>(<a title="GenMSIL.this.global.icodes.ExceptionHandler" id="297064">h</a> =&gt; {
        <a href="#297064" title="GenMSIL.this.global.icodes.ExceptionHandler">h</a>.<a href="../icode/ExceptionHandlers.scala.html#61721" title="(x$1: List[GenMSIL.this.global.icodes.BasicBlock])Unit">blocks</a> = <a href="#297064" title="GenMSIL.this.global.icodes.ExceptionHandler">h</a>.<a href="../icode/ExceptionHandlers.scala.html#61720" title="=&gt; List[GenMSIL.this.global.icodes.BasicBlock]">blocks</a>.<span title="(that: Sequence[GenMSIL.this.global.icodes.BasicBlock])List[GenMSIL.this.global.icodes.BasicBlock]">intersect</span>(<a href="#295392" title="List[GenMSIL.this.global.icodes.BasicBlock]">blocksToPut</a>)
        <a href="#297064" title="GenMSIL.this.global.icodes.ExceptionHandler">h</a>.<a href="../icode/ExceptionHandlers.scala.html#61716" title="(x$1: scala.collection.immutable.Set[GenMSIL.this.global.icodes.BasicBlock])Unit">covered</a> = <a href="#297064" title="GenMSIL.this.global.icodes.ExceptionHandler">h</a>.<a href="../icode/ExceptionHandlers.scala.html#61715" title="=&gt; scala.collection.immutable.Set[GenMSIL.this.global.icodes.BasicBlock]">covered</a>.<a title="(that: scala.collection.Set[GenMSIL.this.global.icodes.BasicBlock])scala.collection.immutable.Set[GenMSIL.this.global.icodes.BasicBlock]" id="39573">intersect</a>(collection.immutable.<a title="object scala.collection.immutable.HashSet" id="7331">HashSet</a>.<a title="(elems: Traversable[GenMSIL.this.global.icodes.BasicBlock])scala.collection.immutable.HashSet[GenMSIL.this.global.icodes.BasicBlock]" id="165421">empty</a> ++ <a href="#295392" title="List[GenMSIL.this.global.icodes.BasicBlock]">blocksToPut</a>)
        <span title="Unit" class="keyword">if</span> (<a href="#297064" title="GenMSIL.this.global.icodes.ExceptionHandler">h</a>.<a href="../icode/ExceptionHandlers.scala.html#61707" title="(x$1: AnyRef)Boolean">finalizer</a> <span title="(x$1: Boolean)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span> &amp;&amp; <a href="#297064" title="GenMSIL.this.global.icodes.ExceptionHandler">h</a>.<a href="../icode/ExceptionHandlers.scala.html#61707" title="(x$1: AnyRef)Boolean">finalizer</a> != <a href="../icode/ExceptionHandlers.scala.html#46470" title="object GenMSIL.this.global.icodes.NoFinalizer">NoFinalizer</a>)
          <a href="#297064" title="GenMSIL.this.global.icodes.ExceptionHandler">h</a>.<a href="../icode/ExceptionHandlers.scala.html#61707" title="=&gt; GenMSIL.this.global.icodes.Finalizer">finalizer</a>.<a href="../icode/ExceptionHandlers.scala.html#61721" title="(x$1: List[GenMSIL.this.global.icodes.BasicBlock])Unit">blocks</a> = <a href="#297064" title="GenMSIL.this.global.icodes.ExceptionHandler">h</a>.<a href="../icode/ExceptionHandlers.scala.html#61707" title="=&gt; GenMSIL.this.global.icodes.Finalizer">finalizer</a>.<a href="../icode/ExceptionHandlers.scala.html#61720" title="=&gt; List[GenMSIL.this.global.icodes.BasicBlock]">blocks</a>.<span title="(that: Sequence[GenMSIL.this.global.icodes.BasicBlock])List[GenMSIL.this.global.icodes.BasicBlock]">intersect</span>(<a href="#295392" title="List[GenMSIL.this.global.icodes.BasicBlock]">blocksToPut</a>)
      })
      <a href="#295396" title="(b: List[GenMSIL.this.global.icodes.BasicBlock])Unit">addBlocks</a>(<a href="#294119" title="List[GenMSIL.this.global.icodes.BasicBlock]">blocks</a>)

      <a href="#295384" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>.<a href="#294480" title="()Unit">close</a>()

      <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37988" title="=&gt; Boolean">value</a>) <a href="../../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="java.lang.String(&quot;TopBlock tree is: &quot;)" class="string">&quot;TopBlock tree is: &quot;</span>)
      <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37988" title="=&gt; Boolean">value</a>) <a href="../../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<a href="#295384" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>)

      <a href="#288559" title="=&gt; scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.BasicBlock,List[BytecodeGenerator.this.ExHInstruction]]">bb2exHInstructions</a>.<span title="()Unit">clear</span>
      <span class="keyword">def</span> <a title="(b: GenMSIL.this.global.icodes.BasicBlock,ehi: BytecodeGenerator.this.ExHInstruction)Unit" id="295397">addExHInstruction</a>(<a title="GenMSIL.this.global.icodes.BasicBlock" id="297212">b</a>: <a href="../icode/BasicBlocks.scala.html#46410" title="GenMSIL.this.global.icodes.BasicBlock">BasicBlock</a>, <a title="BytecodeGenerator.this.ExHInstruction" id="297213">ehi</a>: <a href="#288530" title="BytecodeGenerator.this.ExHInstruction">ExHInstruction</a>) = {
        <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37988" title="=&gt; Boolean">value</a>)
          <a href="../../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;adding exhinstr: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#297212" title="GenMSIL.this.global.icodes.BasicBlock">b</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; -&gt; &quot;)" class="string">&quot; -&gt; &quot;</span> + <a href="#297213" title="BytecodeGenerator.this.ExHInstruction">ehi</a>)

        <span title="Unit" class="keyword">if</span> (<a href="#288559" title="=&gt; scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.BasicBlock,List[BytecodeGenerator.this.ExHInstruction]]">bb2exHInstructions</a>.<span title="(key: GenMSIL.this.global.icodes.BasicBlock)Boolean">contains</span>(<a href="#297212" title="GenMSIL.this.global.icodes.BasicBlock">b</a>)){
          <a href="#288559" title="(key: GenMSIL.this.global.icodes.BasicBlock,value: List[BytecodeGenerator.this.ExHInstruction])Unit">bb2exHInstructions</a>(<a href="#297212" title="GenMSIL.this.global.icodes.BasicBlock">b</a>) = <a href="#297213" title="BytecodeGenerator.this.ExHInstruction">ehi</a> <a href="#297233" title="BytecodeGenerator.this.ExHInstruction">::</a> <a href="#288559" title="(key: GenMSIL.this.global.icodes.BasicBlock)List[BytecodeGenerator.this.ExHInstruction]">bb2exHInstructions</a><span title="(x: BytecodeGenerator.this.ExHInstruction)List[BytecodeGenerator.this.ExHInstruction]">(</span><a href="#297212" title="GenMSIL.this.global.icodes.BasicBlock">b</a>)
        } <span class="keyword">else</span> {
          <a href="#288559" title="(key: GenMSIL.this.global.icodes.BasicBlock,value: List[BytecodeGenerator.this.ExHInstruction])Unit">bb2exHInstructions</a>(<a href="#297212" title="GenMSIL.this.global.icodes.BasicBlock">b</a>) = <span title="(xs: BytecodeGenerator.this.ExHInstruction*)List[BytecodeGenerator.this.ExHInstruction]">List</span>(<a href="#297213" title="BytecodeGenerator.this.ExHInstruction">ehi</a>)
        }
      }
      <a href="#288561" title="=&gt; scala.collection.mutable.HashSet[GenMSIL.this.global.icodes.BasicBlock]">omitJumpBlocks</a>.<a title="()Unit" id="39528">clear</a>
      <span class="keyword">def</span> <a title="(blk: GenMSIL.this.global.icodes.BasicBlock)scala.collection.mutable.HashSet[GenMSIL.this.global.icodes.BasicBlock]" id="295398">omitJump</a>(<a title="GenMSIL.this.global.icodes.BasicBlock" id="297276">blk</a>: <a href="../icode/BasicBlocks.scala.html#46410" title="GenMSIL.this.global.icodes.BasicBlock">BasicBlock</a>) = {
        <a href="#288561" title="(elem: GenMSIL.this.global.icodes.BasicBlock)BytecodeGenerator.this.omitJumpBlocks.type">omitJumpBlocks</a> += <a href="#297276" title="GenMSIL.this.global.icodes.BasicBlock">blk</a>
      }
      <span class="keyword">var</span> <a title="List[GenMSIL.this.global.icodes.BasicBlock]" id="295399">orderedBlocks</a>: <span title="List[GenMSIL.this.global.icodes.BasicBlock]">List</span>[BasicBlock] = <span title="object Nil">Nil</span>
      <span class="keyword">def</span> <a title="(block: BytecodeGenerator.this.Block)Unit" id="295400">flatten</a>(<a title="BytecodeGenerator.this.Block" id="297308">block</a>: <a href="#288543" title="BytecodeGenerator.this.Block">Block</a>) {
        <span title="Unit" class="keyword">if</span> (<a href="#297308" title="(x$1: AnyRef)Boolean">block</a> == <a href="#295384" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>) {
          <span class="keyword">for</span> (<a title="BytecodeGenerator.this.Block" id="297332">b</a> &lt;- <a href="#295384" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>.<a href="#294474" title="(f: (BytecodeGenerator.this.Block) =&gt; Unit)Unit">blocks</a>) <a href="#295400" title="(block: BytecodeGenerator.this.Block)Unit">flatten</a>(<a href="#297332" title="BytecodeGenerator.this.Block">b</a>)
        } <span class="keyword">else</span> <a href="#297308" title="BytecodeGenerator.this.Block">block</a> <span title="Unit" class="keyword">match</span> {
          <span title="Unit" class="keyword">case</span> <a title="BytecodeGenerator.this.CodeBlock" id="297338">cb</a>: <a href="#294545" title="BytecodeGenerator.this.CodeBlock">CodeBlock</a> =&gt;
            <a href="#295399" title="List[GenMSIL.this.global.icodes.BasicBlock]">orderedBlocks</a> = <a href="#295399" title="List[GenMSIL.this.global.icodes.BasicBlock]">orderedBlocks</a> <a href="#297339" title="List[GenMSIL.this.global.icodes.BasicBlock]">:::</a> <a href="#297338" title="BytecodeGenerator.this.CodeBlock">cb</a>.<a href="#294461" title="(prefix: List[GenMSIL.this.global.icodes.BasicBlock])List[GenMSIL.this.global.icodes.BasicBlock]">basicBlocks</a>
          <span title="Unit" class="keyword">case</span> <a title="BytecodeGenerator.this.BlockList" id="297347">bl</a>: <a href="#294865" title="BytecodeGenerator.this.BlockList">BlockList</a> =&gt;
            <span class="keyword">for</span> (<a title="BytecodeGenerator.this.Block" id="297365">b</a> &lt;- <a href="#297347" title="BytecodeGenerator.this.BlockList">bl</a>.<a href="#294474" title="(f: (BytecodeGenerator.this.Block) =&gt; Unit)Unit">blocks</a>) <a href="#295400" title="(block: BytecodeGenerator.this.Block)Unit">flatten</a>(<a href="#297365" title="BytecodeGenerator.this.Block">b</a>)
          <span title="Unit" class="keyword">case</span> <a title="BytecodeGenerator.this.CatchBlock" id="297371">cb</a>: <a href="#295298" title="BytecodeGenerator.this.CatchBlock">CatchBlock</a> =&gt;
            <span class="keyword">for</span> (<a title="BytecodeGenerator.this.Block" id="297389">b</a> &lt;- <a href="#297371" title="BytecodeGenerator.this.CatchBlock">cb</a>.<a href="#294474" title="(f: (BytecodeGenerator.this.Block) =&gt; Unit)Unit">blocks</a>) <a href="#295400" title="(block: BytecodeGenerator.this.Block)Unit">flatten</a>(<a href="#297389" title="BytecodeGenerator.this.Block">b</a>)
          <span title="Unit" class="keyword">case</span> <a title="BytecodeGenerator.this.ExceptionBlock" id="297395">eb</a>: <a href="#295204" title="BytecodeGenerator.this.ExceptionBlock">ExceptionBlock</a> =&gt;
            <span class="keyword">val</span> <a title="GenMSIL.this.global.icodes.ExceptionHandler" id="297396">handler</a> = <a href="#297395" title="BytecodeGenerator.this.ExceptionBlock">eb</a>.<a href="#303780" title="=&gt; GenMSIL.this.global.icodes.ExceptionHandler">handler</a>
            <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37988" title="=&gt; Boolean">value</a>) {
              <a href="../../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;new exception block &quot;</span> + <a href="#297395" title="BytecodeGenerator.this.ExceptionBlock">eb</a>)
              <a href="../../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;try: &quot;</span> + <a href="#297395" title="BytecodeGenerator.this.ExceptionBlock">eb</a>.<a href="#294618" title="=&gt; BytecodeGenerator.this.BlockList">tryBlock</a>)
            }
            <a href="#295397" title="(b: GenMSIL.this.global.icodes.BasicBlock,ehi: BytecodeGenerator.this.ExHInstruction)Unit">addExHInstruction</a>(<a href="#297395" title="BytecodeGenerator.this.ExceptionBlock">eb</a>.<a href="#294618" title="=&gt; BytecodeGenerator.this.BlockList">tryBlock</a>.<a href="#294476" title="=&gt; GenMSIL.this.global.icodes.BasicBlock">firstBasicBlock</a>, <span title="BytecodeGenerator.this.BeginExceptionBlock" class="keyword">new</span> <a href="#294175" title="BytecodeGenerator.this.BeginExceptionBlock">BeginExceptionBlock</a>(<a href="#297396" title="GenMSIL.this.global.icodes.ExceptionHandler">handler</a>))
            <a href="#295398" title="(blk: GenMSIL.this.global.icodes.BasicBlock)scala.collection.mutable.HashSet[GenMSIL.this.global.icodes.BasicBlock]">omitJump</a>(<a href="#297395" title="BytecodeGenerator.this.ExceptionBlock">eb</a>.<a href="#294618" title="=&gt; BytecodeGenerator.this.BlockList">tryBlock</a>.<a href="#294477" title="=&gt; GenMSIL.this.global.icodes.BasicBlock">lastBasicBlock</a>)
            <a href="#295400" title="(block: BytecodeGenerator.this.Block)Unit">flatten</a>(<a href="#297395" title="BytecodeGenerator.this.ExceptionBlock">eb</a>.<a href="#294618" title="=&gt; BytecodeGenerator.this.BlockList">tryBlock</a>)
            <span class="keyword">for</span> (<a title="BytecodeGenerator.this.CatchBlock" id="297434">c</a> &lt;- <a href="#297395" title="BytecodeGenerator.this.ExceptionBlock">eb</a>.<a href="#294621" title="(f: (BytecodeGenerator.this.CatchBlock) =&gt; Unit)Unit">catchBlocks</a>) {
              <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.Type" id="297435">t</a>: <span title="ch.epfl.lamp.compiler.msil.Type">MsilType</span> = (<span title="ch.epfl.lamp.compiler.msil.Type" class="keyword">if</span> (<a href="#297434" title="BytecodeGenerator.this.CatchBlock">c</a>.<a href="#303770" title="(x$1: AnyRef)Boolean">exSym</a> == <a href="../../symtab/Symbols.scala.html#26293" title="object GenMSIL.this.global.NoSymbol">NoSymbol</a>) <a href="#288423" title="=&gt; ch.epfl.lamp.compiler.msil.Type">EXCEPTION</a>
                                 <span class="keyword">else</span> <a href="#288605" title="(sym: GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.Type">getType</a>(<a href="#297434" title="BytecodeGenerator.this.CatchBlock">c</a>.<a href="#303770" title="=&gt; GenMSIL.this.global.Symbol">exSym</a>))
              <a href="#295397" title="(b: GenMSIL.this.global.icodes.BasicBlock,ehi: BytecodeGenerator.this.ExHInstruction)Unit">addExHInstruction</a>(<a href="#297434" title="BytecodeGenerator.this.CatchBlock">c</a>.<a href="#294476" title="=&gt; GenMSIL.this.global.icodes.BasicBlock">firstBasicBlock</a>, <span title="BytecodeGenerator.this.BeginCatchBlock" class="keyword">new</span> <a href="#294251" title="BytecodeGenerator.this.BeginCatchBlock">BeginCatchBlock</a>(<a href="#297396" title="GenMSIL.this.global.icodes.ExceptionHandler">handler</a>, <a href="#297435" title="ch.epfl.lamp.compiler.msil.Type">t</a>))
              <a href="#295398" title="(blk: GenMSIL.this.global.icodes.BasicBlock)scala.collection.mutable.HashSet[GenMSIL.this.global.icodes.BasicBlock]">omitJump</a>(<a href="#297434" title="BytecodeGenerator.this.CatchBlock">c</a>.<a href="#294477" title="=&gt; GenMSIL.this.global.icodes.BasicBlock">lastBasicBlock</a>)
              <a href="#295400" title="(block: BytecodeGenerator.this.Block)Unit">flatten</a>(<a href="#297434" title="BytecodeGenerator.this.CatchBlock">c</a>)
            }
            <span title="Unit" class="keyword">if</span> (<a href="#297396" title="GenMSIL.this.global.icodes.ExceptionHandler">handler</a>.<a href="../icode/ExceptionHandlers.scala.html#61707" title="(x$1: AnyRef)Boolean">finalizer</a> <span title="(x$1: Boolean)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span> &amp;&amp; <a href="#297396" title="GenMSIL.this.global.icodes.ExceptionHandler">handler</a>.<a href="../icode/ExceptionHandlers.scala.html#61707" title="(x$1: AnyRef)Boolean">finalizer</a> != <a href="../icode/ExceptionHandlers.scala.html#46470" title="object GenMSIL.this.global.icodes.NoFinalizer">NoFinalizer</a>) {
              <a href="#295397" title="(b: GenMSIL.this.global.icodes.BasicBlock,ehi: BytecodeGenerator.this.ExHInstruction)Unit">addExHInstruction</a>(<a href="#297395" title="BytecodeGenerator.this.ExceptionBlock">eb</a>.<a href="#294624" title="=&gt; BytecodeGenerator.this.BlockList">finallyBlock</a>.<a href="#294476" title="=&gt; GenMSIL.this.global.icodes.BasicBlock">firstBasicBlock</a>, <span title="BytecodeGenerator.this.BeginFinallyBlock" class="keyword">new</span> <a href="#294334" title="BytecodeGenerator.this.BeginFinallyBlock">BeginFinallyBlock</a>(<a href="#297396" title="GenMSIL.this.global.icodes.ExceptionHandler">handler</a>))
              <a href="#295400" title="(block: BytecodeGenerator.this.Block)Unit">flatten</a>(<a href="#297395" title="BytecodeGenerator.this.ExceptionBlock">eb</a>.<a href="#294624" title="=&gt; BytecodeGenerator.this.BlockList">finallyBlock</a>)
              <a href="#295397" title="(b: GenMSIL.this.global.icodes.BasicBlock,ehi: BytecodeGenerator.this.ExHInstruction)Unit">addExHInstruction</a>(<a href="#297395" title="BytecodeGenerator.this.ExceptionBlock">eb</a>.<a href="#294624" title="=&gt; BytecodeGenerator.this.BlockList">finallyBlock</a>.<a href="#294477" title="=&gt; GenMSIL.this.global.icodes.BasicBlock">lastBasicBlock</a>, <span title="BytecodeGenerator.this.EndExceptionBlock" class="keyword">new</span> <a href="#294400" title="BytecodeGenerator.this.EndExceptionBlock">EndExceptionBlock</a>(<a href="#297396" title="GenMSIL.this.global.icodes.ExceptionHandler">handler</a>))
              <a href="#295398" title="(blk: GenMSIL.this.global.icodes.BasicBlock)scala.collection.mutable.HashSet[GenMSIL.this.global.icodes.BasicBlock]">omitJump</a><span title="Unit">(</span><a href="#297395" title="BytecodeGenerator.this.ExceptionBlock">eb</a>.<a href="#294624" title="=&gt; BytecodeGenerator.this.BlockList">finallyBlock</a>.<a href="#294477" title="=&gt; GenMSIL.this.global.icodes.BasicBlock">lastBasicBlock</a>)
            } <span class="keyword">else</span> {
              <a href="#295397" title="(b: GenMSIL.this.global.icodes.BasicBlock,ehi: BytecodeGenerator.this.ExHInstruction)Unit">addExHInstruction</a>(<a href="#297395" title="BytecodeGenerator.this.ExceptionBlock">eb</a>.<a href="#294621" title="=&gt; List[BytecodeGenerator.this.CatchBlock]">catchBlocks</a>.<span title="=&gt; BytecodeGenerator.this.CatchBlock">last</span>.<a href="#294477" title="=&gt; GenMSIL.this.global.icodes.BasicBlock">lastBasicBlock</a>, <span title="BytecodeGenerator.this.EndExceptionBlock" class="keyword">new</span> <a href="#294400" title="BytecodeGenerator.this.EndExceptionBlock">EndExceptionBlock</a>(<a href="#297396" title="GenMSIL.this.global.icodes.ExceptionHandler">handler</a>))
            }
        }
      }

      <a href="#295400" title="(block: BytecodeGenerator.this.Block)Unit">flatten</a>(<a href="#295384" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>)

      <span title="(assertion: Boolean,message: =&gt; Any)Unit">assert</span>(<a href="#295394" title="List[GenMSIL.this.global.icodes.ExceptionHandler]">untreatedHandlers</a>.<span title="(p: (GenMSIL.this.global.icodes.ExceptionHandler) =&gt; Boolean)Boolean">forall</span>((<a title="GenMSIL.this.global.icodes.ExceptionHandler" id="297505">h</a>) =&gt; <a href="#297505" title="GenMSIL.this.global.icodes.ExceptionHandler">h</a>.<a href="../icode/ExceptionHandlers.scala.html#61715" title="=&gt; scala.collection.immutable.Set[GenMSIL.this.global.icodes.BasicBlock]">covered</a>.<span title="=&gt; Boolean">isEmpty</span>),
             <span title="(x$1: Any)java.lang.String" class="string">&quot;untreated exception handlers left: &quot;</span> + <a href="#295394" title="List[GenMSIL.this.global.icodes.ExceptionHandler]">untreatedHandlers</a>)
      // remove catch blocks from empty handlers (finally-blocks remain)
      <a href="#295394" title="List[GenMSIL.this.global.icodes.ExceptionHandler]">untreatedHandlers</a>.<span title="(f: (GenMSIL.this.global.icodes.ExceptionHandler) =&gt; Unit)Unit">foreach</span>((<a title="GenMSIL.this.global.icodes.ExceptionHandler" id="297530">h</a>) =&gt; {
        <a href="#295399" title="List[GenMSIL.this.global.icodes.BasicBlock]">orderedBlocks</a> = <a href="#295399" title="(that: List[GenMSIL.this.global.icodes.BasicBlock])List[GenMSIL.this.global.icodes.BasicBlock]">orderedBlocks</a> -- <a href="#297530" title="GenMSIL.this.global.icodes.ExceptionHandler">h</a>.<a href="../icode/ExceptionHandlers.scala.html#61720" title="=&gt; List[GenMSIL.this.global.icodes.BasicBlock]">blocks</a>
      })

      // take care of order in which exHInstructions are executed (BeginExceptionBlock as last)
      <a href="#288559" title="=&gt; scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.BasicBlock,List[BytecodeGenerator.this.ExHInstruction]]">bb2exHInstructions</a>.<span title="=&gt; Iterator[GenMSIL.this.global.icodes.BasicBlock]">keysIterator</span>.<span title="(f: (GenMSIL.this.global.icodes.BasicBlock) =&gt; List[BytecodeGenerator.this.ExHInstruction])Unit">foreach</span>((<a title="GenMSIL.this.global.icodes.BasicBlock" id="297545">b</a>) =&gt; {
        <a href="#288559" title="(key: GenMSIL.this.global.icodes.BasicBlock)List[BytecodeGenerator.this.ExHInstruction]">bb2exHInstructions</a>(<a href="#297545" title="GenMSIL.this.global.icodes.BasicBlock">b</a>).<span title="(lt: (BytecodeGenerator.this.ExHInstruction, BytecodeGenerator.this.ExHInstruction) =&gt; Boolean)List[BytecodeGenerator.this.ExHInstruction]">sort</span>((<a title="BytecodeGenerator.this.ExHInstruction" id="297562">i1</a>, <a title="BytecodeGenerator.this.ExHInstruction" id="297563">i2</a>) =&gt; (<span title="=&gt; Boolean">!</span><a href="#297562" title="BytecodeGenerator.this.ExHInstruction">i1</a>.<a title="[T0]Boolean" id="3641">isInstanceOf</a><span title="Boolean">[</span><a href="#294175" title="BytecodeGenerator.this.BeginExceptionBlock">BeginExceptionBlock</a>]))
      })


      <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37988" title="=&gt; Boolean">value</a>){
        <a href="../../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;after: &quot;</span> + <a href="#295399" title="List[GenMSIL.this.global.icodes.BasicBlock]">orderedBlocks</a>)
        <a href="../../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot; exhInstr: &quot;</span> + <a href="#288559" title="=&gt; scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.BasicBlock,List[BytecodeGenerator.this.ExHInstruction]]">bb2exHInstructions</a>)
      }

      <a href="#295399" title="List[GenMSIL.this.global.icodes.BasicBlock]">orderedBlocks</a>
    }

    <span class="keyword">var</span> <a title="GenMSIL.this.global.icodes.BasicBlock" id="288565">currentBlock</a>: <a href="../icode/BasicBlocks.scala.html#46410" title="GenMSIL.this.global.icodes.BasicBlock">BasicBlock</a> = _
    <span class="keyword">var</span> <a title="GenMSIL.this.global.icodes.BasicBlock" id="288568">lastBlock</a>: <a href="../icode/BasicBlocks.scala.html#46410" title="GenMSIL.this.global.icodes.BasicBlock">BasicBlock</a> = _
    <span class="keyword">var</span> <a title="GenMSIL.this.global.icodes.BasicBlock" id="288571">nextBlock</a>: <a href="../icode/BasicBlocks.scala.html#46410" title="GenMSIL.this.global.icodes.BasicBlock">BasicBlock</a> = _

    <span class="keyword">def</span> <a title="(l: List[GenMSIL.this.global.icodes.BasicBlock])Unit" id="288573">genBlocks</a>(<a title="List[GenMSIL.this.global.icodes.BasicBlock]" id="294128">l</a>: <span title="List[GenMSIL.this.global.icodes.BasicBlock]">List</span>[BasicBlock]) {
      <a href="#294128" title="List[GenMSIL.this.global.icodes.BasicBlock]">l</a> <span title="Unit" class="keyword">match</span> {
        <span title="Unit" class="keyword">case</span> <span title="object Nil">Nil</span> =&gt; <span title="Unit">(</span>)
        <span title="Unit" class="keyword">case</span> <a title="GenMSIL.this.global.icodes.BasicBlock" id="297583">x</a> :: <span title="object Nil">Nil</span> =&gt; <a href="#288565" title="(x$1: GenMSIL.this.global.icodes.BasicBlock)Unit">currentBlock</a> = <a href="#297583" title="GenMSIL.this.global.icodes.BasicBlock">x</a>; <a href="#288571" title="(x$1: GenMSIL.this.global.icodes.BasicBlock)Unit">nextBlock</a> = <span title="Null(null)" class="keyword">null</span>; <a href="#288579" title="(b: GenMSIL.this.global.icodes.BasicBlock)Unit">genBlock</a>(<a href="#297583" title="GenMSIL.this.global.icodes.BasicBlock">x</a>)
        <span title="Unit" class="keyword">case</span> <a title="GenMSIL.this.global.icodes.BasicBlock" id="297598">x</a> :: <a title="GenMSIL.this.global.icodes.BasicBlock" id="297603">y</a> :: <a title="List[GenMSIL.this.global.icodes.BasicBlock]" id="297604">ys</a> =&gt; <a href="#288565" title="(x$1: GenMSIL.this.global.icodes.BasicBlock)Unit">currentBlock</a> = <a href="#297598" title="GenMSIL.this.global.icodes.BasicBlock">x</a>; <a href="#288571" title="(x$1: GenMSIL.this.global.icodes.BasicBlock)Unit">nextBlock</a> = <a href="#297603" title="GenMSIL.this.global.icodes.BasicBlock">y</a>; <a href="#288579" title="(b: GenMSIL.this.global.icodes.BasicBlock)Unit">genBlock</a>(<a href="#297598" title="GenMSIL.this.global.icodes.BasicBlock">x</a>); <a href="#288573" title="(l: List[GenMSIL.this.global.icodes.BasicBlock])Unit">genBlocks</a>(<a href="#297603" title="GenMSIL.this.global.icodes.BasicBlock">y</a> <a href="#297615" title="GenMSIL.this.global.icodes.BasicBlock">::</a> <a href="#297604" title="(x: GenMSIL.this.global.icodes.BasicBlock)List[GenMSIL.this.global.icodes.BasicBlock]">ys</a>)
      }
    }

    <span class="keyword">var</span> <a title="Boolean" id="288575">ignoreNextDup</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.Stack[ch.epfl.lamp.compiler.msil.emit.LocalBuilder]" id="288577">excResultLocals</a>: <span title="scala.collection.mutable.Stack[ch.epfl.lamp.compiler.msil.emit.LocalBuilder]">Stack</span>[LocalBuilder] = <a title="()scala.collection.mutable.Stack[ch.epfl.lamp.compiler.msil.emit.LocalBuilder]" id="79374" class="keyword">new</a> <span title="scala.collection.mutable.Stack[ch.epfl.lamp.compiler.msil.emit.LocalBuilder]">Stack</span>()

    <span class="keyword">def</span> <a title="(b: GenMSIL.this.global.icodes.BasicBlock)Unit" id="288579">genBlock</a>(<a title="GenMSIL.this.global.icodes.BasicBlock" id="297590">b</a>: <a href="../icode/BasicBlocks.scala.html#46410" title="GenMSIL.this.global.icodes.BasicBlock">BasicBlock</a>) {
      // at begin of the first block, there's nothing to save =&gt;
      //  lastBlock != null is secure
      <span class="keyword">def</span> <a title="(resType: ch.epfl.lamp.compiler.msil.Type)Unit" id="297629">saveResult</a>(<a title="ch.epfl.lamp.compiler.msil.Type" id="297631">resType</a>: <span title="ch.epfl.lamp.compiler.msil.Type">MsilType</span>) = <span title="Unit" class="keyword">if</span> (<a href="#297631" title="(x$1: AnyRef)Boolean">resType</a> <span title="(x$1: Boolean)Boolean">!=</span> <a href="../../symtab/clr/CLRTypes.scala.html#288309" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MVOID</a> &amp;&amp; <a href="#288568" title="(x$1: AnyRef)Boolean">lastBlock</a> != <span title="Null(null)" class="keyword">null</span>) {
        <a href="#288568" title="=&gt; GenMSIL.this.global.icodes.BasicBlock">lastBlock</a>.<a href="../icode/BasicBlocks.scala.html#61610" title="=&gt; GenMSIL.this.global.icodes.Instruction">lastInstruction</a> <span title="Unit" class="keyword">match</span> {
          <span title="Unit" class="keyword">case</span> THROW() =&gt; <span title="Unit">(</span>)
          <span title="Unit" class="keyword">case</span> _ =&gt;
            <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.LocalBuilder" id="297649">lb</a>: <span title="ch.epfl.lamp.compiler.msil.emit.LocalBuilder">LocalBuilder</span> = <a href="#288577" title="=&gt; scala.collection.mutable.Stack[ch.epfl.lamp.compiler.msil.emit.LocalBuilder]">excResultLocals</a>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.LocalBuilder" id="79393">top</a>
            <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.emit.LocalBuilder)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Stloc</span>, <a href="#297649" title="ch.epfl.lamp.compiler.msil.emit.LocalBuilder">lb</a>)
        }
      }

      <span title="Unit" class="keyword">if</span> (<a href="#288559" title="=&gt; scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.BasicBlock,List[BytecodeGenerator.this.ExHInstruction]]">bb2exHInstructions</a>.<span title="(key: GenMSIL.this.global.icodes.BasicBlock)Boolean">contains</span>(<a href="#297590" title="GenMSIL.this.global.icodes.BasicBlock">b</a>)){
        <a href="#288559" title="(key: GenMSIL.this.global.icodes.BasicBlock)List[BytecodeGenerator.this.ExHInstruction]">bb2exHInstructions</a>(<a href="#297590" title="GenMSIL.this.global.icodes.BasicBlock">b</a>).<span title="(f: (BytecodeGenerator.this.ExHInstruction) =&gt; Any)Unit">foreach</span>((<a title="BytecodeGenerator.this.ExHInstruction" id="297694">i</a>) =&gt; <a href="#297694" title="BytecodeGenerator.this.ExHInstruction">i</a> <span title="Any" class="keyword">match</span> {
          <span title="Any" class="keyword">case</span> BeginExceptionBlock(<a title="GenMSIL.this.global.icodes.ExceptionHandler" id="297695">handler</a>) =&gt;
            <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37988" title="=&gt; Boolean">value</a>) <a href="../../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;begin ex blk: &quot;</span> + <a href="#297695" title="GenMSIL.this.global.icodes.ExceptionHandler">handler</a>)
            <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<a title="()Unit" id="289703">BeginExceptionBlock</a>()
            <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.Type" id="297698">resType</a> = <a href="#288602" title="(t: GenMSIL.this.global.icodes.TypeKind)ch.epfl.lamp.compiler.msil.Type">msilType</a>(<a href="#297695" title="GenMSIL.this.global.icodes.ExceptionHandler">handler</a>.<a href="../icode/ExceptionHandlers.scala.html#61710" title="=&gt; GenMSIL.this.global.icodes.TypeKind">resultKind</a>)
            <span title="Any" class="keyword">if</span> (<a href="#297698" title="(x$1: AnyRef)Boolean">resType</a> != <a href="../../symtab/clr/CLRTypes.scala.html#288309" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MVOID</a>) {
              <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.LocalBuilder" id="297720">l</a> = <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(localType: ch.epfl.lamp.compiler.msil.Type)ch.epfl.lamp.compiler.msil.emit.LocalBuilder">DeclareLocal</span>(<a href="#297698" title="ch.epfl.lamp.compiler.msil.Type">resType</a>)
              <a href="#297720" title="ch.epfl.lamp.compiler.msil.emit.LocalBuilder">l</a>.<span title="(name: String)Unit">SetLocalSymInfo</span>(<span title="java.lang.String(&quot;$exhResult&quot;)" class="string">&quot;$exhResult&quot;</span>)
              <a href="#288577" title="=&gt; scala.collection.mutable.Stack[ch.epfl.lamp.compiler.msil.emit.LocalBuilder]">excResultLocals</a>.<a title="(elem: ch.epfl.lamp.compiler.msil.emit.LocalBuilder)BytecodeGenerator.this.excResultLocals.type" id="79379">push</a>(<a href="#297720" title="ch.epfl.lamp.compiler.msil.emit.LocalBuilder">l</a>)
            }
          <span title="Unit" class="keyword">case</span> BeginCatchBlock(<a title="GenMSIL.this.global.icodes.ExceptionHandler" id="297740">handler</a>, <a title="ch.epfl.lamp.compiler.msil.Type" id="297741">exType</a>) =&gt;
            <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37988" title="=&gt; Boolean">value</a>) <a href="../../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;begin catch blk: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#297740" title="GenMSIL.this.global.icodes.ExceptionHandler">handler</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;, tpe: &quot;)" class="string">&quot;, tpe: &quot;</span> + <a href="#297741" title="ch.epfl.lamp.compiler.msil.Type">exType</a>)
            <a href="#297629" title="(resType: ch.epfl.lamp.compiler.msil.Type)Unit">saveResult</a>(<a href="#288602" title="(t: GenMSIL.this.global.icodes.TypeKind)ch.epfl.lamp.compiler.msil.Type">msilType</a>(<a href="#297740" title="GenMSIL.this.global.icodes.ExceptionHandler">handler</a>.<a href="../icode/ExceptionHandlers.scala.html#61710" title="=&gt; GenMSIL.this.global.icodes.TypeKind">resultKind</a>))
            <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<a title="(exceptionType: ch.epfl.lamp.compiler.msil.Type)Unit" id="289704">BeginCatchBlock</a>(<a href="#297741" title="ch.epfl.lamp.compiler.msil.Type">exType</a>)
          <span title="Unit" class="keyword">case</span> BeginFinallyBlock(<a title="GenMSIL.this.global.icodes.ExceptionHandler" id="297765">handler</a>) =&gt;
            <a href="#297629" title="(resType: ch.epfl.lamp.compiler.msil.Type)Unit">saveResult</a>(<a href="#288602" title="(t: GenMSIL.this.global.icodes.TypeKind)ch.epfl.lamp.compiler.msil.Type">msilType</a>(<a href="#297765" title="GenMSIL.this.global.icodes.ExceptionHandler">handler</a>.<a href="../icode/ExceptionHandlers.scala.html#61710" title="=&gt; GenMSIL.this.global.icodes.TypeKind">resultKind</a>))
            <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<a title="()Unit" id="289707">BeginFinallyBlock</a>()
          <span title="Unit" class="keyword">case</span> EndExceptionBlock(<a title="GenMSIL.this.global.icodes.ExceptionHandler" id="297779">handler</a>) =&gt; <span title="Unit">(</span>)
          <span title="Nothing" class="keyword">case</span> _ =&gt; <a href="../../Global.scala.html#39309" title="(msg: String)Nothing">abort</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;unknown case: &quot;</span> + <a href="#297694" title="BytecodeGenerator.this.ExHInstruction">i</a>)
        })
      }

      <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<a title="(label: ch.epfl.lamp.compiler.msil.emit.Label)Unit" id="289699">MarkLabel</a>(<a href="#288584" title="(key: GenMSIL.this.global.icodes.BasicBlock)ch.epfl.lamp.compiler.msil.emit.Label">labels</a>(<a href="#297590" title="GenMSIL.this.global.icodes.BasicBlock">b</a>))
      <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37988" title="=&gt; Boolean">value</a>)
        <a href="../../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Generating code for block: &quot;</span> + <a href="#297590" title="GenMSIL.this.global.icodes.BasicBlock">b</a>)

      <span class="keyword">var</span> <a title="Int" id="297630">lastLineNr</a>: <span title="Int">Int</span> = <span title="Int(0)" class="int">0</span>

      <span class="keyword">for</span> (<a title="GenMSIL.this.global.icodes.Instruction" id="297827">instr</a> &lt;- <a href="../icode/BasicBlocks.scala.html#61587" title="(f: (GenMSIL.this.global.icodes.Instruction) =&gt; Unit)Unit">b</a>) {

        <a href="#288527" title="(x$1: Boolean)Unit">needAdditionalRet</a> = <span title="Boolean(false)" class="keyword">false</span>
        
	<span class="keyword">val</span> <a title="Int" id="297828">currentLineNr</a> = <a href="#297827" title="GenMSIL.this.global.icodes.Instruction">instr</a>.<a href="../icode/Opcodes.scala.html#61742" title="=&gt; scala.tools.nsc.util.Position">pos</a>.<a href="../../util/Position.scala.html#30490" title="=&gt; Int">line</a>

        <span title="Unit" class="keyword">if</span> (<a href="#297828" title="(x$1: Int)Boolean">currentLineNr</a> != <a href="#297630" title="Int">lastLineNr</a>) {
          <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<a title="(line: Int)Unit" id="289710">setPosition</a>(<a href="#297828" title="Int">currentLineNr</a>)
          <a href="#297630" title="Int">lastLineNr</a> = <a href="#297828" title="Int">currentLineNr</a>
        }

        <a href="#297827" title="GenMSIL.this.global.icodes.Instruction">instr</a> <span title="Unit" class="keyword">match</span> {
          <span title="Unit" class="keyword">case</span> THIS(<a title="GenMSIL.this.global.icodes.global.Symbol" id="297842">clasz</a>) =&gt;
            <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ldarg_0</span>)

          <span title="Unit" class="keyword">case</span> CONSTANT(<a title="GenMSIL.this.global.icodes.global.Constant" id="297850">const</a>) =&gt;
            <a href="#297850" title="GenMSIL.this.global.icodes.global.Constant">const</a>.<a href="../../symtab/Constants.scala.html#43041" title="=&gt; Int">tag</a> <span title="Unit" class="keyword">match</span> {
              <span title="Unit" class="keyword">case</span> <span title="Int(1)">UnitTag</span>    =&gt; <span title="Unit">(</span>)
              <span title="Unit" class="keyword">case</span> <span title="Int(2)">BooleanTag</span> =&gt; <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="ch.epfl.lamp.compiler.msil.emit.OpCode" class="keyword">if</span> (<a href="#297850" title="GenMSIL.this.global.icodes.global.Constant">const</a>.<a href="../../symtab/Constants.scala.html#43045" title="=&gt; Boolean">booleanValue</a>) <span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ldc_I4_1</span>
                                            <span class="keyword">else</span> <span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ldc_I4_0</span>)
              <span title="Unit" class="keyword">case</span> <span title="Int(3)">ByteTag</span>    =&gt; <a href="#288581" title="(value: Int,code: ch.epfl.lamp.compiler.msil.emit.ILGenerator)Unit">loadI4</a>(<a href="#297850" title="GenMSIL.this.global.icodes.global.Constant">const</a>.<a href="../../symtab/Constants.scala.html#43046" title="implicit scala.Predef.byte2int : (x: Byte)Int" id="8182">byteValue</a>, <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>)
              <span title="Unit" class="keyword">case</span> <span title="Int(4)">ShortTag</span>   =&gt; <a href="#288581" title="(value: Int,code: ch.epfl.lamp.compiler.msil.emit.ILGenerator)Unit">loadI4</a>(<a href="#297850" title="GenMSIL.this.global.icodes.global.Constant">const</a>.<a href="../../symtab/Constants.scala.html#43047" title="implicit scala.Predef.short2int : (x: Short)Int" id="8190">shortValue</a>, <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>)
              <span title="Unit" class="keyword">case</span> <span title="Int(5)">CharTag</span>    =&gt; <a href="#288581" title="(value: Int,code: ch.epfl.lamp.compiler.msil.emit.ILGenerator)Unit">loadI4</a>(<a href="#297850" title="GenMSIL.this.global.icodes.global.Constant">const</a>.<a href="../../symtab/Constants.scala.html#43048" title="implicit scala.Predef.char2int : (x: Char)Int" id="8198">charValue</a>, <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>)
              <span title="Unit" class="keyword">case</span> <span title="Int(6)">IntTag</span>     =&gt; <a href="#288581" title="(value: Int,code: ch.epfl.lamp.compiler.msil.emit.ILGenerator)Unit">loadI4</a>(<a href="#297850" title="GenMSIL.this.global.icodes.global.Constant">const</a>.<a href="../../symtab/Constants.scala.html#43049" title="=&gt; Int">intValue</a>, <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>)
              <span title="Unit" class="keyword">case</span> <span title="Int(7)">LongTag</span>    =&gt; <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<a title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: Long)Unit" id="289665">Emit</a>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293155">Ldc_I8</a>, <a href="#297850" title="GenMSIL.this.global.icodes.global.Constant">const</a>.<a href="../../symtab/Constants.scala.html#43050" title="=&gt; Long">longValue</a>)
              <span title="Unit" class="keyword">case</span> <span title="Int(8)">FloatTag</span>   =&gt; <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<a title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: Float)Unit" id="289677">Emit</a>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293157">Ldc_R4</a>, <a href="#297850" title="GenMSIL.this.global.icodes.global.Constant">const</a>.<a href="../../symtab/Constants.scala.html#43051" title="=&gt; Float">floatValue</a>)
              <span title="Unit" class="keyword">case</span> <span title="Int(9)">DoubleTag</span>  =&gt; <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<a title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: Double)Unit" id="289653">Emit</a>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293159">Ldc_R8</a>, <a href="#297850" title="GenMSIL.this.global.icodes.global.Constant">const</a>.<a href="../../symtab/Constants.scala.html#43052" title="=&gt; Double">doubleValue</a>)
              <span title="Unit" class="keyword">case</span> <span title="Int(10)">StringTag</span>  =&gt; <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<a title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: String)Unit" id="289680">Emit</a>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293313">Ldstr</a>, <a href="#297850" title="GenMSIL.this.global.icodes.global.Constant">const</a>.<a href="../../symtab/Constants.scala.html#43054" title="=&gt; String">stringValue</a>)
              <span title="Unit" class="keyword">case</span> <span title="Int(11)">NullTag</span>    =&gt; <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ldnull</span>)
              <span title="Unit" class="keyword">case</span> <span title="Int(12)">ClassTag</span>   =&gt;
                <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.Type)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293431">Ldtoken</a>, <a href="#288603" title="(tpe: GenMSIL.this.global.Type)ch.epfl.lamp.compiler.msil.Type">msilType</a>(<a href="#297850" title="GenMSIL.this.global.icodes.global.Constant">const</a>.<a href="../../symtab/Constants.scala.html#43056" title="=&gt; GenMSIL.this.global.icodes.global.Type">typeValue</a>))
                <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.MethodInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Call</span>, <a href="#288443" title="=&gt; ch.epfl.lamp.compiler.msil.MethodInfo">TYPE_FROM_HANDLE</a>)
              <span title="Nothing" class="keyword">case</span> _          =&gt; <a href="../../Global.scala.html#39309" title="(msg: String)Nothing">abort</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Unknown constant value: &quot;</span> + <a href="#297850" title="GenMSIL.this.global.icodes.global.Constant">const</a>)
            }

          <span title="Unit" class="keyword">case</span> LOAD_ARRAY_ITEM(<a title="GenMSIL.this.global.icodes.TypeKind" id="297962">kind</a>) =&gt;
            (<a href="#297962" title="GenMSIL.this.global.icodes.TypeKind">kind</a>: @<a href="../icode/TypeKinds.scala.html#46431" title="GenMSIL.this.global.icodes.TypeKind @unchecked">unchecked</a>) <span title="Unit" class="keyword">match</span> {
              <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46435" title="object GenMSIL.this.global.icodes.BOOL">BOOL</a>           =&gt; <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293371">Ldelem_I1</a>)
              <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46437" title="object GenMSIL.this.global.icodes.BYTE">BYTE</a>           =&gt; <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293385">Ldelem_U1</a>)
              <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46439" title="object GenMSIL.this.global.icodes.SHORT">SHORT</a>          =&gt; <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293373">Ldelem_I2</a>)
              <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46441" title="object GenMSIL.this.global.icodes.CHAR">CHAR</a>           =&gt; <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293387">Ldelem_U2</a>)
              <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46443" title="object GenMSIL.this.global.icodes.INT">INT</a>            =&gt; <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293375">Ldelem_I4</a>)
              <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46445" title="object GenMSIL.this.global.icodes.LONG">LONG</a>           =&gt; <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293377">Ldelem_I8</a>)
              <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46447" title="object GenMSIL.this.global.icodes.FLOAT">FLOAT</a>          =&gt; <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293379">Ldelem_R4</a>)
              <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46449" title="object GenMSIL.this.global.icodes.DOUBLE">DOUBLE</a>         =&gt; <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293381">Ldelem_R8</a>)
              <span title="Unit" class="keyword">case</span> REFERENCE(<a title="GenMSIL.this.global.icodes.global.Symbol" id="298000">cls</a>) =&gt; <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293383">Ldelem_Ref</a>)

              // case ARRAY(elem) is not possible, for Array[Array[Int]], the
              //  load will be case REFERENCE(java.lang.Object)

              // case UNIT is not possible: an Array[Unit] will be an
              //  Array[scala.runtime.BoxedUnit] (-&gt; case REFERENCE)
            }

          <span title="Unit" class="keyword">case</span> LOAD_LOCAL(<a title="GenMSIL.this.global.icodes.Local" id="298008">local</a>) =&gt;
            <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37988" title="=&gt; Boolean">value</a>)
              <a href="../../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;load_local for &quot;</span> + <a href="#298008" title="GenMSIL.this.global.icodes.Local">local</a>)
            <span class="keyword">val</span> <a title="Boolean" id="298011">isArg</a>: <span title="Boolean">Boolean</span> = <a href="#298008" title="GenMSIL.this.global.icodes.Local">local</a>.<a href="../icode/Members.scala.html#61024" title="=&gt; Boolean">arg</a>
            <span class="keyword">val</span> <a title="Int" id="298012">i</a> = <a href="#298008" title="GenMSIL.this.global.icodes.Local">local</a>.<a href="../icode/Members.scala.html#61027" title="=&gt; Int">index</a>
            <span title="Unit" class="keyword">if</span> (<a href="#298011" title="Boolean">isArg</a>) {
              <a href="#288582" title="(code: ch.epfl.lamp.compiler.msil.emit.ILGenerator)(i: Int)Unit">loadArg</a>(<a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>)(<a href="#298012" title="Int">i</a>)
            }
            <span class="keyword">else</span> {
              <a href="#288583" title="(i: Int,local: GenMSIL.this.global.icodes.Local,code: ch.epfl.lamp.compiler.msil.emit.ILGenerator)Unit">loadLocal</a>(<a href="#298012" title="Int">i</a>, <a href="#298008" title="GenMSIL.this.global.icodes.Local">local</a>, <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>)
            }

          <span title="Unit" class="keyword">case</span> LOAD_FIELD(<a title="GenMSIL.this.global.icodes.global.Symbol" id="298164">field</a>, <a title="Boolean" id="298165">isStatic</a>) =&gt;
            <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37988" title="=&gt; Boolean">value</a>)
              <a href="../../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;LOAD_FIELD with owner: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#298164" title="GenMSIL.this.global.icodes.global.Symbol">field</a>.<a href="../../symtab/Symbols.scala.html#27142" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">owner</a> <span title="(x$1: Any)java.lang.String">+</span>
                  <span title="java.lang.String(&quot; flags: &quot;)" class="string">&quot; flags: &quot;</span> + <a href="../../symtab/Flags.scala.html#10482" title="object scala.tools.nsc.symtab.Flags">Flags</a>.<a href="../../symtab/Flags.scala.html#29000" title="(flags: Long)String">flagsToString</a>(<a href="#298164" title="GenMSIL.this.global.icodes.global.Symbol">field</a>.<a href="../../symtab/Symbols.scala.html#27142" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">owner</a>.<a href="../../symtab/Symbols.scala.html#27150" title="=&gt; Long">flags</a>))

            <span class="keyword">var</span> <a title="ch.epfl.lamp.compiler.msil.FieldInfo" id="298168">fieldInfo</a>: <span title="ch.epfl.lamp.compiler.msil.FieldInfo">FieldInfo</span> = <a href="../../symtab/clr/CLRTypes.scala.html#288351" title="=&gt; scala.collection.mutable.Map[GenMSIL.this.global.loaders.clrTypes.global.Symbol,ch.epfl.lamp.compiler.msil.FieldInfo]">fields</a>.<span title="(key: GenMSIL.this.global.loaders.clrTypes.global.Symbol)Option[ch.epfl.lamp.compiler.msil.FieldInfo]">get</span>(<a href="#298164" title="GenMSIL.this.global.icodes.global.Symbol">field</a>.<span title="[T0]T0">asInstanceOf</span><span title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">[</span>clrTypes.global.<a href="../../symtab/Symbols.scala.html#26286" title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">Symbol</a>]) <span title="ch.epfl.lamp.compiler.msil.FieldInfo" class="keyword">match</span> {
              <span title="ch.epfl.lamp.compiler.msil.FieldInfo" class="keyword">case</span> Some(<a title="ch.epfl.lamp.compiler.msil.FieldInfo" id="298187">fInfo</a>) =&gt; <a href="#298187" title="ch.epfl.lamp.compiler.msil.FieldInfo">fInfo</a>
              <span title="ch.epfl.lamp.compiler.msil.FieldInfo" class="keyword">case</span> <span title="object None">None</span> =&gt;
                <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.FieldInfo" id="298190">fInfo</a> = <a href="#288605" title="(sym: GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.Type">getType</a>(<a href="#298164" title="GenMSIL.this.global.icodes.global.Symbol">field</a>.<a href="../../symtab/Symbols.scala.html#27142" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">owner</a>).<span title="(x$1: java.lang.String)ch.epfl.lamp.compiler.msil.FieldInfo">GetField</span>(<a href="#288590" title="(sym: GenMSIL.this.global.Symbol)String">msilName</a>(<a href="#298164" title="GenMSIL.this.global.icodes.global.Symbol">field</a>))
                <a href="../../symtab/clr/CLRTypes.scala.html#288351" title="(key: GenMSIL.this.global.loaders.clrTypes.global.Symbol,value: ch.epfl.lamp.compiler.msil.FieldInfo)Unit">fields</a>(<a href="#298164" title="GenMSIL.this.global.icodes.global.Symbol">field</a>.<span title="[T0]T0">asInstanceOf</span><span title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">[</span>clrTypes.global.<a href="../../symtab/Symbols.scala.html#26286" title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">Symbol</a>]) = <a href="#298190" title="ch.epfl.lamp.compiler.msil.FieldInfo">fInfo</a>
                <a href="#298190" title="ch.epfl.lamp.compiler.msil.FieldInfo">fInfo</a>
            }
            <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.FieldInfo)Unit">Emit</span>(<span title="ch.epfl.lamp.compiler.msil.emit.OpCode" class="keyword">if</span> (<a href="#298165" title="Boolean">isStatic</a>) <span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ldsfld</span> <span class="keyword">else</span> <span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293327">Ldfld</a>, <a href="#298168" title="ch.epfl.lamp.compiler.msil.FieldInfo">fieldInfo</a>)


          <span title="Unit" class="keyword">case</span> LOAD_MODULE(<a title="GenMSIL.this.global.icodes.global.Symbol" id="298214">module</a>) =&gt;
            <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37988" title="=&gt; Boolean">value</a>)
              <a href="../../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Generating LOAD_MODULE for: &quot;</span> + <a href="#288637" title="(sym: GenMSIL.this.global.Symbol)String">showsym</a>(<a href="#298214" title="GenMSIL.this.global.icodes.global.Symbol">module</a>))
            <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.FieldInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ldsfld</span>, <a href="#288614" title="(sym: GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.FieldInfo">getModuleInstanceField</a>(<a href="#298214" title="GenMSIL.this.global.icodes.global.Symbol">module</a>))

          <span title="Unit" class="keyword">case</span> STORE_ARRAY_ITEM(<a title="GenMSIL.this.global.icodes.TypeKind" id="298240">kind</a>) =&gt;
            (<a href="#298240" title="GenMSIL.this.global.icodes.TypeKind">kind</a>: @<a href="../icode/TypeKinds.scala.html#46431" title="GenMSIL.this.global.icodes.TypeKind @unchecked">unchecked</a>) <span title="Unit" class="keyword">match</span> {
              <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46435" title="object GenMSIL.this.global.icodes.BOOL">BOOL</a>           =&gt; <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Stelem_I1</span>)
              <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46437" title="object GenMSIL.this.global.icodes.BYTE">BYTE</a>           =&gt; <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Stelem_I1</span>)
              <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46439" title="object GenMSIL.this.global.icodes.SHORT">SHORT</a>          =&gt; <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Stelem_I2</span>)
              <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46441" title="object GenMSIL.this.global.icodes.CHAR">CHAR</a>           =&gt; <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Stelem_I2</span>)
              <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46443" title="object GenMSIL.this.global.icodes.INT">INT</a>            =&gt; <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293397">Stelem_I4</a>)
              <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46445" title="object GenMSIL.this.global.icodes.LONG">LONG</a>           =&gt; <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293399">Stelem_I8</a>)
              <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46447" title="object GenMSIL.this.global.icodes.FLOAT">FLOAT</a>          =&gt; <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293401">Stelem_R4</a>)
              <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46449" title="object GenMSIL.this.global.icodes.DOUBLE">DOUBLE</a>         =&gt; <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293403">Stelem_R8</a>)
              <span title="Unit" class="keyword">case</span> REFERENCE(<a title="GenMSIL.this.global.icodes.global.Symbol" id="298278">cls</a>) =&gt; <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293405">Stelem_Ref</a>)

              // case UNIT / ARRRAY are not possible (see comment at LOAD_ARRAY_ITEM)
            }

          <span title="Unit" class="keyword">case</span> STORE_LOCAL(<a title="GenMSIL.this.global.icodes.Local" id="298286">local</a>) =&gt;
            <span class="keyword">val</span> <a title="Boolean" id="298289">isArg</a>: <span title="Boolean">Boolean</span> = <a href="#298286" title="GenMSIL.this.global.icodes.Local">local</a>.<a href="../icode/Members.scala.html#61024" title="=&gt; Boolean">arg</a>
            <span class="keyword">val</span> <a title="Int" id="298290">i</a> = <a href="#298286" title="GenMSIL.this.global.icodes.Local">local</a>.<a href="../icode/Members.scala.html#61027" title="=&gt; Int">index</a>
            <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37988" title="=&gt; Boolean">value</a>)
              <a href="../../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;store_local for &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#298286" title="GenMSIL.this.global.icodes.Local">local</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;, index &quot;)" class="string">&quot;, index &quot;</span> + <a href="#298290" title="Int">i</a>)

            // there are some locals defined by the compiler that
            // are isArg and are need to be stored.
            <span title="Unit" class="keyword">if</span> (<a href="#298289" title="Boolean">isArg</a>) {
              <span title="Unit" class="keyword">if</span> (<a href="#298290" title="(x$1: Int)Boolean">i</a> <span title="(x$1: Boolean)Boolean">&gt;=</span> <span title="Int(-128)">-</span><span class="int">128</span> &amp;&amp; <a href="#298290" title="(x$1: Int)Boolean">i</a> &lt;= <span title="Int(127)" class="int">127</span>)
                <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: Int)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Starg_S</span>, <a href="#298290" title="Int">i</a>)
              <span class="keyword">else</span>
                <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: Int)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293489">Starg</a>, <a href="#298290" title="Int">i</a>)
            } <span class="keyword">else</span> {
              <a href="#298290" title="Int">i</a> <span title="Unit" class="keyword">match</span> {
                <span title="Unit" class="keyword">case</span> <span title="Int(0)" class="int">0</span> =&gt; <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293109">Stloc_0</a>)
                <span title="Unit" class="keyword">case</span> <span title="Int(1)" class="int">1</span> =&gt; <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293111">Stloc_1</a>)
                <span title="Unit" class="keyword">case</span> <span title="Int(2)" class="int">2</span> =&gt; <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293113">Stloc_2</a>)
                <span title="Unit" class="keyword">case</span> <span title="Int(3)" class="int">3</span> =&gt; <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293115">Stloc_3</a>)
                <span title="Unit" class="keyword">case</span> _      =&gt;
                  <span title="Unit" class="keyword">if</span> (<a href="#298290" title="(x$1: Int)Boolean">i</a> <span title="(x$1: Boolean)Boolean">&gt;=</span> <span title="Int(-128)">-</span><span class="int">128</span> &amp;&amp; <a href="#298290" title="(x$1: Int)Boolean">i</a> &lt;= <span title="Int(127)" class="int">127</span>)
                    <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.emit.LocalBuilder)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293127">Stloc_S</a>, <a href="#288599" title="(key: GenMSIL.this.global.icodes.Local)ch.epfl.lamp.compiler.msil.emit.LocalBuilder">localBuilders</a>(<a href="#298286" title="GenMSIL.this.global.icodes.Local">local</a>))
                  <span class="keyword">else</span>
                    <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.emit.LocalBuilder)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Stloc</span>, <a href="#288599" title="(key: GenMSIL.this.global.icodes.Local)ch.epfl.lamp.compiler.msil.emit.LocalBuilder">localBuilders</a>(<a href="#298286" title="GenMSIL.this.global.icodes.Local">local</a>))
              }
            }

          <span title="Unit" class="keyword">case</span> STORE_THIS(_) =&gt;
            // this only works for impl classes because the self parameter comes first
            // in the method signature. If that changes, this code has to be revisited.
            <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: Int)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Starg_S</span>, <span title="Int(0)" class="int">0</span>)
            
          <span title="Unit" class="keyword">case</span> STORE_FIELD(<a title="GenMSIL.this.global.icodes.global.Symbol" id="298428">field</a>, <a title="Boolean" id="298429">isStatic</a>) =&gt;
            <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.FieldInfo" id="298432">fieldInfo</a>: <span title="ch.epfl.lamp.compiler.msil.FieldInfo">FieldInfo</span> = <a href="../../symtab/clr/CLRTypes.scala.html#288351" title="=&gt; scala.collection.mutable.Map[GenMSIL.this.global.loaders.clrTypes.global.Symbol,ch.epfl.lamp.compiler.msil.FieldInfo]">fields</a>.<span title="(key: GenMSIL.this.global.loaders.clrTypes.global.Symbol)Option[ch.epfl.lamp.compiler.msil.FieldInfo]">get</span>(<a href="#298428" title="GenMSIL.this.global.icodes.global.Symbol">field</a>.<span title="[T0]T0">asInstanceOf</span><span title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">[</span>clrTypes.global.<a href="../../symtab/Symbols.scala.html#26286" title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">Symbol</a>]) <span title="ch.epfl.lamp.compiler.msil.FieldInfo" class="keyword">match</span> {
              <span title="ch.epfl.lamp.compiler.msil.FieldInfo" class="keyword">case</span> Some(<a title="ch.epfl.lamp.compiler.msil.FieldInfo" id="298437">fInfo</a>) =&gt; <a href="#298437" title="ch.epfl.lamp.compiler.msil.FieldInfo">fInfo</a>
              <span title="ch.epfl.lamp.compiler.msil.FieldInfo" class="keyword">case</span> <span title="object None">None</span> =&gt;
                <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.FieldInfo" id="298440">fInfo</a> = <a href="#288605" title="(sym: GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.Type">getType</a>(<a href="#298428" title="GenMSIL.this.global.icodes.global.Symbol">field</a>.<a href="../../symtab/Symbols.scala.html#27142" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">owner</a>).<span title="(x$1: java.lang.String)ch.epfl.lamp.compiler.msil.FieldInfo">GetField</span>(<a href="#288590" title="(sym: GenMSIL.this.global.Symbol)String">msilName</a>(<a href="#298428" title="GenMSIL.this.global.icodes.global.Symbol">field</a>))
                <a href="../../symtab/clr/CLRTypes.scala.html#288351" title="(key: GenMSIL.this.global.loaders.clrTypes.global.Symbol,value: ch.epfl.lamp.compiler.msil.FieldInfo)Unit">fields</a>(<a href="#298428" title="GenMSIL.this.global.icodes.global.Symbol">field</a>.<span title="[T0]T0">asInstanceOf</span><span title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">[</span>clrTypes.global.<a href="../../symtab/Symbols.scala.html#26286" title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">Symbol</a>]) = <a href="#298440" title="ch.epfl.lamp.compiler.msil.FieldInfo">fInfo</a>
                <a href="#298440" title="ch.epfl.lamp.compiler.msil.FieldInfo">fInfo</a>
            }
            <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.FieldInfo)Unit">Emit</span>(<span title="ch.epfl.lamp.compiler.msil.emit.OpCode" class="keyword">if</span> (<a href="#298429" title="Boolean">isStatic</a>) <span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Stsfld</span> <span class="keyword">else</span> <span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293335">Stfld</a>, <a href="#298432" title="ch.epfl.lamp.compiler.msil.FieldInfo">fieldInfo</a>)


          <span title="Unit" class="keyword">case</span> CALL_PRIMITIVE(<a title="GenMSIL.this.global.icodes.Primitive" id="298464">primitive</a>) =&gt;
            <a href="#288580" title="(primitive: GenMSIL.this.global.icodes.Primitive,pos: scala.tools.nsc.util.Position)Unit">genPrimitive</a>(<a href="#298464" title="GenMSIL.this.global.icodes.Primitive">primitive</a>, <a href="#297827" title="GenMSIL.this.global.icodes.Instruction">instr</a>.<a href="../icode/Opcodes.scala.html#61742" title="=&gt; scala.tools.nsc.util.Position">pos</a>)


          <span title="Unit" class="keyword">case</span> CALL_METHOD(<a title="GenMSIL.this.global.icodes.global.Symbol" id="298474">msym</a>, <a title="GenMSIL.this.global.icodes.opcodes.InvokeStyle" id="298475">style</a>) =&gt;
            <span title="Unit" class="keyword">if</span> (<a href="#298474" title="GenMSIL.this.global.icodes.global.Symbol">msym</a>.<a href="../../symtab/Symbols.scala.html#27073" title="=&gt; Boolean">isClassConstructor</a>) {
              <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.ConstructorInfo" id="298478">constructorInfo</a>: <span title="ch.epfl.lamp.compiler.msil.ConstructorInfo">ConstructorInfo</span> = <a href="#288627" title="(sym: GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.ConstructorInfo">getConstructor</a>(<a href="#298474" title="GenMSIL.this.global.icodes.global.Symbol">msym</a>)
              (<a href="#298475" title="GenMSIL.this.global.icodes.opcodes.InvokeStyle">style</a>: @<a href="../icode/Opcodes.scala.html#46672" title="GenMSIL.this.global.icodes.opcodes.InvokeStyle @unchecked">unchecked</a>) <span title="Unit" class="keyword">match</span> {
                // normal constructor calls are Static..
                <span title="Unit" class="keyword">case</span> Static(_) =&gt;
                  <span title="Unit" class="keyword">if</span> (<a href="#288487" title="=&gt; GenMSIL.this.global.icodes.IMethod">method</a>.<a href="../icode/Members.scala.html#61494" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>.<a href="../../symtab/Symbols.scala.html#27073" title="(x$1: Boolean)Boolean">isClassConstructor</a> &amp;&amp; <a href="#288487" title="=&gt; GenMSIL.this.global.icodes.IMethod">method</a>.<a href="../icode/Members.scala.html#61494" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>.<a href="../../symtab/Symbols.scala.html#27142" title="(x$1: AnyRef)Boolean">owner</a> == <a href="#298474" title="GenMSIL.this.global.icodes.global.Symbol">msym</a>.<a href="../../symtab/Symbols.scala.html#27142" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">owner</a>)
                    <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.ConstructorInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Call</span>, <a href="#298478" title="ch.epfl.lamp.compiler.msil.ConstructorInfo">constructorInfo</a>)
                  <span class="keyword">else</span>
                    <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.ConstructorInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Newobj</span>, <a href="#298478" title="ch.epfl.lamp.compiler.msil.ConstructorInfo">constructorInfo</a>)
                <span title="Unit" class="keyword">case</span> SuperCall(_) =&gt;
                  <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.ConstructorInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Call</span>, <a href="#298478" title="ch.epfl.lamp.compiler.msil.ConstructorInfo">constructorInfo</a>)
                  <span title="Unit" class="keyword">if</span> (<a href="#288611" title="(sym: GenMSIL.this.global.Symbol)Boolean">isStaticModule</a><span title="(x$1: Boolean)Boolean">(</span><a href="#288484" title="=&gt; GenMSIL.this.global.icodes.IClass">clasz</a>.<a href="../icode/Members.scala.html#66941" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>) &amp;&amp;
                     <a href="#288597" title="=&gt; scala.collection.mutable.HashSet[GenMSIL.this.global.Symbol]">notInitializedModules</a>.<span title="(elem: GenMSIL.this.global.Symbol)Boolean">contains</span>(<a href="#288484" title="=&gt; GenMSIL.this.global.icodes.IClass">clasz</a>.<a href="../icode/Members.scala.html#66941" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>))
                    {
                      <a href="#288597" title="(elem: GenMSIL.this.global.Symbol)BytecodeGenerator.this.notInitializedModules.type" id="39522">notInitializedModules</a> -= <a href="#288484" title="=&gt; GenMSIL.this.global.icodes.IClass">clasz</a>.<a href="../icode/Members.scala.html#66941" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>
                      <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ldarg_0</span>)
                      <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.FieldInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Stsfld</span>, <a href="#288614" title="(sym: GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.FieldInfo">getModuleInstanceField</a>(<a href="#288484" title="=&gt; GenMSIL.this.global.icodes.IClass">clasz</a>.<a href="../icode/Members.scala.html#66941" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>))
                    }
              }

            } <span class="keyword">else</span> {
              // java.lang.String.substring(int start_incl, int end_excl)
              // System.String.Substring(int start_incl, int length)
              <span title="Unit" class="keyword">if</span> (<a href="#298474" title="(x$1: AnyRef)Boolean">msym</a> == <a href="#288452" title="=&gt; GenMSIL.this.global.Symbol">JSTRING_SUBSTRING_INT_INT</a>) {
                <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.LocalBuilder" id="298592">endLocal</a> = <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(localType: ch.epfl.lamp.compiler.msil.Type)ch.epfl.lamp.compiler.msil.emit.LocalBuilder">DeclareLocal</span>(<a href="../../symtab/clr/CLRTypes.scala.html#288288" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MINT</a>)
                <a href="#298592" title="ch.epfl.lamp.compiler.msil.emit.LocalBuilder">endLocal</a>.<span title="(name: String)Unit">SetLocalSymInfo</span>(<span title="java.lang.String(&quot;$substring_end&quot;)" class="string">&quot;$substring_end&quot;</span>)
                <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.emit.LocalBuilder)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Stloc</span>, <a href="#298592" title="ch.epfl.lamp.compiler.msil.emit.LocalBuilder">endLocal</a>)
                <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Dup</span>) // duplicate start_incl
                <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Neg</span>)
                <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.emit.LocalBuilder)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ldloc</span>, <a href="#298592" title="ch.epfl.lamp.compiler.msil.emit.LocalBuilder">endLocal</a>) // load end_excl
                <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Add</span>) // compute length (-start + end)
              }

              <span class="keyword">var</span> <a title="Boolean" id="298581">doEmit</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(true)" class="keyword">true</span>
              <a href="../../symtab/clr/CLRTypes.scala.html#288345" title="=&gt; scala.collection.mutable.Map[GenMSIL.this.global.loaders.clrTypes.global.Symbol,ch.epfl.lamp.compiler.msil.Type]">types</a>.<span title="(key: GenMSIL.this.global.loaders.clrTypes.global.Symbol)Option[ch.epfl.lamp.compiler.msil.Type]">get</span>(<a href="#298474" title="GenMSIL.this.global.icodes.global.Symbol">msym</a>.<a href="../../symtab/Symbols.scala.html#27142" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">owner</a>.<span title="[T0]T0">asInstanceOf</span><span title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">[</span>clrTypes.global.<a href="../../symtab/Symbols.scala.html#26286" title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">Symbol</a>]) <span title="Unit" class="keyword">match</span> {
                <span title="Unit" class="keyword">case</span> Some(<a title="ch.epfl.lamp.compiler.msil.Type" id="298633">typ</a>) <span class="keyword">if</span> (<a href="#298633" title="ch.epfl.lamp.compiler.msil.Type">typ</a>.<a title="()Boolean" id="288766">IsEnum</a>) =&gt; {
                  <span class="keyword">def</span> <a title="=&gt; Unit" id="298638">negBool</a> = {
                    <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ldc_I4_0</span>)
                    <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ceq</span>)
                  }
                  <a href="#298581" title="Boolean">doEmit</a> = <span title="Boolean(false)" class="keyword">false</span>
                  <span class="keyword">val</span> <a title="GenMSIL.this.global.icodes.global.Name" id="298639">name</a> = <a href="#298474" title="GenMSIL.this.global.icodes.global.Symbol">msym</a>.<a href="../../symtab/Symbols.scala.html#27147" title="=&gt; GenMSIL.this.global.icodes.global.Name">name</a>
                  <span title="Unit" class="keyword">if</span> (<a href="#298639" title="(x$1: AnyRef)Boolean">name</a> eq <a href="../../symtab/StdNames.scala.html#26690" title="object GenMSIL.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#30194" title="=&gt; GenMSIL.this.global.Name">EQ</a>)       { <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ceq</span>) }
                  <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<a href="#298639" title="(x$1: AnyRef)Boolean">name</a> eq <a href="../../symtab/StdNames.scala.html#26690" title="object GenMSIL.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#30196" title="=&gt; GenMSIL.this.global.Name">NE</a>)  { <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ceq</span>); <a href="#298638" title="=&gt; Unit">negBool</a> }
                  <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<a href="#298639" title="(x$1: AnyRef)Boolean">name</a> eq <a href="../../symtab/StdNames.scala.html#26690" title="object GenMSIL.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#30198" title="=&gt; GenMSIL.this.global.Name">LT</a>)  { <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Clt</span>) }
                  <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<a href="#298639" title="(x$1: AnyRef)Boolean">name</a> eq <a href="../../symtab/StdNames.scala.html#26690" title="object GenMSIL.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#30200" title="=&gt; GenMSIL.this.global.Name">LE</a>)  { <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Cgt</span>); <a href="#298638" title="=&gt; Unit">negBool</a> }
                  <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<a href="#298639" title="(x$1: AnyRef)Boolean">name</a> eq <a href="../../symtab/StdNames.scala.html#26690" title="object GenMSIL.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#30202" title="=&gt; GenMSIL.this.global.Name">GT</a>)  { <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Cgt</span>) }
                  <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<a href="#298639" title="(x$1: AnyRef)Boolean">name</a> eq <a href="../../symtab/StdNames.scala.html#26690" title="object GenMSIL.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#30204" title="=&gt; GenMSIL.this.global.Name">GE</a>)  { <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Clt</span>); <a href="#298638" title="=&gt; Unit">negBool</a> }
                  <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<a href="#298639" title="(x$1: AnyRef)Boolean">name</a> eq <a href="../../symtab/StdNames.scala.html#26690" title="object GenMSIL.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#30206" title="=&gt; GenMSIL.this.global.Name">OR</a>)  { <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Or</span>) }
                  <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<a href="#298639" title="(x$1: AnyRef)Boolean">name</a> eq <a href="../../symtab/StdNames.scala.html#26690" title="object GenMSIL.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#30210" title="=&gt; GenMSIL.this.global.Name">AND</a>) { <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">And</span>) }
                  <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<a href="#298639" title="(x$1: AnyRef)Boolean">name</a> eq <a href="../../symtab/StdNames.scala.html#26690" title="object GenMSIL.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#30208" title="=&gt; GenMSIL.this.global.Name">XOR</a>) { <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Xor</span>) }
                  <span class="keyword">else</span>
                    <a href="#298581" title="Boolean">doEmit</a> = <span title="Boolean(true)" class="keyword">true</span>
                }
                <span title="Unit" class="keyword">case</span> _ =&gt; <span title="Unit">(</span>)
              }

              // method: implicit view(FunctionX[PType0, PType1, ...,PTypeN, ResType]):DelegateType
              <span class="keyword">val</span> <a href="#32875" title="(Boolean, GenMSIL.this.global.Type, GenMSIL.this.global.Type)">(</a><a href="#298582" title="Boolean" id="32875">isDelegateView</a>, <a href="#298582" title="GenMSIL.this.global.Type" id="32877">paramType</a>, <a href="#298582" title="GenMSIL.this.global.Type" id="32879">resType</a>) = <a href="../../symtab/SymbolTable.scala.html#26256" title="(ph: scala.tools.nsc.Phase)(op: =&gt; (Boolean, GenMSIL.this.global.Type, GenMSIL.this.global.Type))(Boolean, GenMSIL.this.global.Type, GenMSIL.this.global.Type)">atPhase</a>(<a href="../../Global.scala.html#39408" title="=&gt; GenMSIL.this.global.Run">currentRun</a>.<a href="../../Global.scala.html#40420" title="=&gt; scala.tools.nsc.Phase">typerPhase</a>)<a title="(Boolean, GenMSIL.this.global.Type, GenMSIL.this.global.Type) @unchecked" id="410">{</a>
                <a href="#298474" title="GenMSIL.this.global.icodes.global.Symbol">msym</a>.<a href="../../symtab/Symbols.scala.html#27162" title="=&gt; GenMSIL.this.global.icodes.global.Type">tpe</a> <span title="(Boolean, GenMSIL.this.global.Type, GenMSIL.this.global.Type)" class="keyword">match</span> {
                  <span title="(Boolean, GenMSIL.this.global.Type, GenMSIL.this.global.Type)" class="keyword">case</span> MethodType(<a title="List[GenMSIL.this.global.Symbol]" id="298710">params</a>, <a title="GenMSIL.this.global.Type" id="298711">resultType</a>)
                  <span class="keyword">if</span> (<a href="#298710" title="List[GenMSIL.this.global.Symbol]">params</a>.<span title="(x$1: Int)Boolean">length</span> <span title="(x$1: Boolean)Boolean">==</span> <span title="Int(1)" class="int">1</span> &amp;&amp; <a href="#298474" title="GenMSIL.this.global.icodes.global.Symbol">msym</a>.<a href="../../symtab/Symbols.scala.html#27147" title="(x$1: AnyRef)Boolean">name</a> == <a href="../../symtab/StdNames.scala.html#26690" title="object GenMSIL.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#30174" title="=&gt; GenMSIL.this.global.Name">view_</a>) =&gt;
                    <span class="keyword">val</span> <a title="GenMSIL.this.global.Type" id="298735">paramType</a> = <a href="#298710" title="(n: Int)GenMSIL.this.global.Symbol">params</a>(<span title="Int(0)" class="int">0</span>).<a href="../../symtab/Symbols.scala.html#27162" title="=&gt; GenMSIL.this.global.Type">tpe</a>
                    <span class="keyword">val</span> <a title="Boolean" id="298736">isDel</a> = <a href="../../symtab/Definitions.scala.html#26638" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28671" title="(delegateType: GenMSIL.this.global.Type,functionType: GenMSIL.this.global.Type)Boolean">isCorrespondingDelegate</a>(<a href="#298711" title="GenMSIL.this.global.Type">resultType</a>, <a href="#298735" title="GenMSIL.this.global.Type">paramType</a>)
                    <span title="(_1: Boolean,_2: GenMSIL.this.global.Type,_3: GenMSIL.this.global.Type)(Boolean, GenMSIL.this.global.Type, GenMSIL.this.global.Type)">(</span><a href="#298736" title="Boolean">isDel</a>, <a href="#298735" title="GenMSIL.this.global.Type">paramType</a>, <a href="#298711" title="GenMSIL.this.global.Type">resultType</a>)
                  <span title="(Boolean, Null, Null)" class="keyword">case</span> _ =&gt; <span title="(_1: Boolean,_2: Null,_3: Null)(Boolean, Null, Null)">(</span><span title="Boolean(false)" class="keyword">false</span>, <span title="Null(null)" class="keyword">null</span>, <span title="Null(null)" class="keyword">null</span>)
                }
              }
              <span title="Unit" class="keyword">if</span> (<a href="#298581" title="(x$1: Boolean)Boolean">doEmit</a> &amp;&amp; <a href="#32875" title="Boolean">isDelegateView</a>) {
                <a href="#298581" title="Boolean">doEmit</a> = <span title="Boolean(false)" class="keyword">false</span>
                <a href="#288624" title="(functionType: GenMSIL.this.global.Type,delegateType: GenMSIL.this.global.Type)Unit">createDelegateCaller</a>(<a href="#32877" title="GenMSIL.this.global.Type">paramType</a>, <a href="#32879" title="GenMSIL.this.global.Type">resType</a>)
              }

              <span title="Unit" class="keyword">if</span> (<a href="#298581" title="(x$1: Boolean)Boolean">doEmit</a> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span>
                  (<a href="#298474" title="GenMSIL.this.global.icodes.global.Symbol">msym</a>.<a href="../../symtab/Symbols.scala.html#27147" title="(x$1: AnyRef)Boolean">name</a> <span title="(x$1: Boolean)Boolean">==</span> <a href="../../symtab/StdNames.scala.html#26690" title="object GenMSIL.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29915" title="=&gt; GenMSIL.this.global.Name">PLUS</a> || <a href="#298474" title="GenMSIL.this.global.icodes.global.Symbol">msym</a>.<a href="../../symtab/Symbols.scala.html#27147" title="(x$1: AnyRef)Boolean">name</a> == <a href="../../symtab/StdNames.scala.html#26690" title="object GenMSIL.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29913" title="=&gt; GenMSIL.this.global.Name">MINUS</a>)
                  &amp;&amp; <a href="../../symtab/SymbolLoaders.scala.html#109564" title="object GenMSIL.this.global.loaders.clrTypes">clrTypes</a>.<a href="../../symtab/clr/CLRTypes.scala.html#288362" title="(t: ch.epfl.lamp.compiler.msil.Type)Boolean">isDelegateType</a>(<a href="#288603" title="(tpe: GenMSIL.this.global.Type)ch.epfl.lamp.compiler.msil.Type">msilType</a>(<a href="#298474" title="GenMSIL.this.global.icodes.global.Symbol">msym</a>.<a href="../../symtab/Symbols.scala.html#27142" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">owner</a>.<a href="../../symtab/Symbols.scala.html#27162" title="=&gt; GenMSIL.this.global.icodes.global.Type">tpe</a>)))
                {
                <a href="#298581" title="Boolean">doEmit</a> = <span title="Boolean(false)" class="keyword">false</span>
                <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.MethodInfo" id="299749">methodInfo</a>: <span title="ch.epfl.lamp.compiler.msil.MethodInfo">MethodInfo</span> = <a href="#288629" title="(sym: GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.MethodInfo">getMethod</a>(<a href="#298474" title="GenMSIL.this.global.icodes.global.Symbol">msym</a>)
                // call it as a static method, even if the compiler (symbol) thinks it's virtual
                <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.MethodInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Call</span>, <a href="#299749" title="ch.epfl.lamp.compiler.msil.MethodInfo">methodInfo</a>)
                <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.Type)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Castclass</span>, <a href="#288603" title="(tpe: GenMSIL.this.global.Type)ch.epfl.lamp.compiler.msil.Type">msilType</a>(<a href="#298474" title="GenMSIL.this.global.icodes.global.Symbol">msym</a>.<a href="../../symtab/Symbols.scala.html#27142" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">owner</a>.<a href="../../symtab/Symbols.scala.html#27162" title="=&gt; GenMSIL.this.global.icodes.global.Type">tpe</a>))
              }

              <span title="Unit" class="keyword">if</span> (<a href="#298581" title="(x$1: Boolean)Boolean">doEmit</a> &amp;&amp; <a href="../../symtab/Definitions.scala.html#26638" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28666" title="=&gt; List[GenMSIL.this.global.Symbol]">Delegate_scalaCallers</a>.<span title="(elem: Any)Boolean">contains</span>(<a href="#298474" title="GenMSIL.this.global.icodes.global.Symbol">msym</a>)) {
                <a href="#298581" title="Boolean">doEmit</a> = <span title="Boolean(false)" class="keyword">false</span>
                <span class="keyword">val</span> <a title="GenMSIL.this.global.Symbol" id="299783">methodSym</a>: <a href="../../symtab/Symbols.scala.html#26286" title="GenMSIL.this.global.Symbol">Symbol</a> = <a href="../../symtab/Definitions.scala.html#26638" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28669" title="(key: GenMSIL.this.global.Symbol)GenMSIL.this.global.Symbol">Delegate_scalaCallerTargets</a>(<a href="#298474" title="GenMSIL.this.global.icodes.global.Symbol">msym</a>)
                <span class="keyword">val</span> <a title="GenMSIL.this.global.Type" id="299784">delegateType</a>: <a href="../../symtab/Types.scala.html#26364" title="GenMSIL.this.global.Type">Type</a> = <a href="#298474" title="GenMSIL.this.global.icodes.global.Symbol">msym</a>.<a href="../../symtab/Symbols.scala.html#27162" title="=&gt; GenMSIL.this.global.icodes.global.Type">tpe</a> <span title="GenMSIL.this.global.Type" class="keyword">match</span> {
                  <span title="GenMSIL.this.global.Type" class="keyword">case</span> MethodType(_, <a title="GenMSIL.this.global.Type" id="299803">retType</a>) =&gt; <a href="#299803" title="GenMSIL.this.global.Type">retType</a>
                  <span title="Nothing" class="keyword">case</span> _ =&gt; <a href="../../Global.scala.html#39309" title="(msg: String)Nothing">abort</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;not a method type: &quot;</span> + <a href="#298474" title="GenMSIL.this.global.icodes.global.Symbol">msym</a>.<a href="../../symtab/Symbols.scala.html#27162" title="=&gt; GenMSIL.this.global.icodes.global.Type">tpe</a>)
                }
                <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.MethodInfo" id="299785">method</a>: <span title="ch.epfl.lamp.compiler.msil.MethodInfo">MethodInfo</span> = <a href="#288629" title="(sym: GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.MethodInfo">getMethod</a>(<a href="#299783" title="GenMSIL.this.global.Symbol">methodSym</a>)
                <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.ConstructorInfo" id="299786">delegCtor</a> = <a href="#288603" title="(tpe: GenMSIL.this.global.Type)ch.epfl.lamp.compiler.msil.Type">msilType</a>(<a href="#299784" title="GenMSIL.this.global.Type">delegateType</a>).<span title="(x$1: Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.ConstructorInfo">GetConstructor</span>(<span title="(xs: ch.epfl.lamp.compiler.msil.Type*)(implicit evidence$2: scala.reflect.ClassManifest[ch.epfl.lamp.compiler.msil.Type])Array[ch.epfl.lamp.compiler.msil.Type]">Array</span><span title="(clazz: Class[_])scala.reflect.ClassManifest[ch.epfl.lamp.compiler.msil.Type]">(</span><a href="../../symtab/clr/CLRTypes.scala.html#288318" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MOBJECT</a>, <a href="#288445" title="=&gt; ch.epfl.lamp.compiler.msil.Type">INT_PTR</a>))
                <span title="Unit" class="keyword">if</span> (<a href="#299783" title="GenMSIL.this.global.Symbol">methodSym</a>.<a href="../../symtab/Symbols.scala.html#27125" title="=&gt; Boolean">isStatic</a>) {
                  <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.MethodInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ldftn</span>, <a href="#299785" title="ch.epfl.lamp.compiler.msil.MethodInfo">method</a>)
                } <span class="keyword">else</span> {
                  <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Dup</span>)
                  <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.MethodInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293479">Ldvirtftn</a>, <a href="#299785" title="ch.epfl.lamp.compiler.msil.MethodInfo">method</a>)
                }
                <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.ConstructorInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Newobj</span>, <a href="#299786" title="ch.epfl.lamp.compiler.msil.ConstructorInfo">delegCtor</a>)
              }

              <span title="Unit" class="keyword">if</span> (<a href="#298581" title="Boolean">doEmit</a>) {
                <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.MethodInfo" id="299919">methodInfo</a>: <span title="ch.epfl.lamp.compiler.msil.MethodInfo">MethodInfo</span> = <a href="#288629" title="(sym: GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.MethodInfo">getMethod</a>(<a href="#298474" title="GenMSIL.this.global.icodes.global.Symbol">msym</a>)
                (<a href="#298475" title="GenMSIL.this.global.icodes.opcodes.InvokeStyle">style</a>: @<a href="../icode/Opcodes.scala.html#46672" title="GenMSIL.this.global.icodes.opcodes.InvokeStyle @unchecked">unchecked</a>) <span title="Unit" class="keyword">match</span> {
                  <span title="Unit" class="keyword">case</span> SuperCall(_) =&gt;
                    <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.MethodInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Call</span>, <a href="#299919" title="ch.epfl.lamp.compiler.msil.MethodInfo">methodInfo</a>)
                  <span title="Unit" class="keyword">case</span> <a href="../icode/Opcodes.scala.html#46673" title="object GenMSIL.this.global.icodes.opcodes.Dynamic">Dynamic</a> =&gt;
                    <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.MethodInfo)Unit">Emit</span>(<span title="ch.epfl.lamp.compiler.msil.emit.OpCode" class="keyword">if</span> (<a href="#288480" title="(elem: GenMSIL.this.global.Symbol)Boolean" id="39571">dynToStatMapped</a>(<a href="#298474" title="GenMSIL.this.global.icodes.global.Symbol">msym</a>)) <span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Call</span> <span class="keyword">else</span> <span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Callvirt</span>,
                               <a href="#299919" title="ch.epfl.lamp.compiler.msil.MethodInfo">methodInfo</a>)
                  <span title="Unit" class="keyword">case</span> Static(_) =&gt;
                    <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.MethodInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Call</span>, <a href="#299919" title="ch.epfl.lamp.compiler.msil.MethodInfo">methodInfo</a>)
                }
              }
            }

          <span title="Unit" class="keyword">case</span> BOX(<a title="GenMSIL.this.global.icodes.TypeKind" id="299974">boxType</a>) =&gt; <a href="#288625" title="(code: ch.epfl.lamp.compiler.msil.emit.ILGenerator,boxType: GenMSIL.this.global.icodes.TypeKind)Unit">emitBox</a>(<a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>, <a href="#299974" title="GenMSIL.this.global.icodes.TypeKind">boxType</a>) //mcode.Emit(OpCodes.Box, msilType(boxType))

          <span title="Unit" class="keyword">case</span> UNBOX(<a title="GenMSIL.this.global.icodes.TypeKind" id="299980">boxType</a>) =&gt; <a href="#288626" title="(code: ch.epfl.lamp.compiler.msil.emit.ILGenerator,boxType: GenMSIL.this.global.icodes.TypeKind)Unit">emitUnbox</a>(<a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>, <a href="#299980" title="GenMSIL.this.global.icodes.TypeKind">boxType</a>)

          <span title="Unit" class="keyword">case</span> NEW(REFERENCE(<a title="GenMSIL.this.global.icodes.global.Symbol" id="299987">cls</a>)) =&gt;
            <a href="#288575" title="(x$1: Boolean)Unit">ignoreNextDup</a> = <span title="Boolean(true)" class="keyword">true</span>

          // works also for arrays and reference-types
          <span title="Unit" class="keyword">case</span> CREATE_ARRAY(<a title="GenMSIL.this.global.icodes.TypeKind" id="299996">elem</a>, <a title="Int" id="299997">dims</a>) =&gt;
            // TODO: handle multi dimensional arrays
            <span title="(assertion: Boolean,message: =&gt; Any)Unit">assert</span>(<a href="#299997" title="(x$1: Int)Boolean">dims</a> == <span title="Int(1)" class="int">1</span>, <span title="java.lang.String(&quot;Can't handle multi dimensional arrays&quot;)" class="string">&quot;Can't handle multi dimensional arrays&quot;</span>)
            <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.Type)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293363">Newarr</a>, <a href="#288602" title="(t: GenMSIL.this.global.icodes.TypeKind)ch.epfl.lamp.compiler.msil.Type">msilType</a>(<a href="#299996" title="GenMSIL.this.global.icodes.TypeKind">elem</a>))

          // works for arrays and reference-types
          <span title="Unit" class="keyword">case</span> IS_INSTANCE(<a title="GenMSIL.this.global.icodes.TypeKind" id="300032">tpe</a>) =&gt;
            <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.Type)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293319">Isinst</a>, <a href="#288602" title="(t: GenMSIL.this.global.icodes.TypeKind)ch.epfl.lamp.compiler.msil.Type">msilType</a>(<a href="#300032" title="GenMSIL.this.global.icodes.TypeKind">tpe</a>))
            <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ldnull</span>)
            <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ceq</span>)
            <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ldc_I4_0</span>)
            <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ceq</span>)


          // works for arrays and reference-types
          // part from the scala reference: &quot;S &lt;: T does not imply
          //  Array[S] &lt;: Array[T] in Scala. However, it is possible
          //  to cast an array of S to an array of T if such a cast
          //  is permitted in the host environment.&quot;
          <span title="Unit" class="keyword">case</span> CHECK_CAST(<a title="GenMSIL.this.global.icodes.TypeKind" id="300069">tpe</a>) =&gt; <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.Type)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Castclass</span>, <a href="#288602" title="(t: GenMSIL.this.global.icodes.TypeKind)ch.epfl.lamp.compiler.msil.Type">msilType</a>(<a href="#300069" title="GenMSIL.this.global.icodes.TypeKind">tpe</a>))


          // no SWITCH is generated when there's
          //  - a default case (&quot;case _ =&gt; ...&quot;) in the matching expr
          //  - OR is used (&quot;case 1 | 2 =&gt; ...&quot;)
          <span title="Unit" class="keyword">case</span> SWITCH(<a title="List[List[Int]]" id="300091">tags</a>, <a title="List[GenMSIL.this.global.icodes.BasicBlock]" id="300092">branches</a>) =&gt;
            // tags is List[List[Int]]; a list of integers for every label.
            //    if the int on stack is 4, and 4 is in the second list =&gt; jump
            //    to second label
            // branches is List[BasicBlock]
            //    the labels to jump to (the last one ist the default one)

            <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.LocalBuilder" id="300095">switchLocal</a> = <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(localType: ch.epfl.lamp.compiler.msil.Type)ch.epfl.lamp.compiler.msil.emit.LocalBuilder">DeclareLocal</span>(<a href="../../symtab/clr/CLRTypes.scala.html#288288" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MINT</a>)
            // several switch variables will appear with the same name in the
            //  assembly code, but this makes no truble
            <a href="#300095" title="ch.epfl.lamp.compiler.msil.emit.LocalBuilder">switchLocal</a>.<span title="(name: String)Unit">SetLocalSymInfo</span>(<span title="java.lang.String(&quot;$switch_var&quot;)" class="string">&quot;$switch_var&quot;</span>)

            <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.emit.LocalBuilder)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Stloc</span>, <a href="#300095" title="ch.epfl.lamp.compiler.msil.emit.LocalBuilder">switchLocal</a>)
            <span class="keyword">var</span> <a title="Int" id="300096">i</a>: <span title="Int">Int</span> = <span title="Int(0)" class="int">0</span>
            <span class="keyword">for</span> (<a title="List[Int]" id="300128">l</a> &lt;- <a href="#300091" title="(f: (List[Int]) =&gt; Unit)Unit">tags</a>) {
              <span class="keyword">var</span> <a title="ch.epfl.lamp.compiler.msil.emit.Label" id="300129">targetLabel</a> = <a href="#288584" title="(key: GenMSIL.this.global.icodes.BasicBlock)ch.epfl.lamp.compiler.msil.emit.Label">labels</a>(<a href="#300092" title="(n: Int)GenMSIL.this.global.icodes.BasicBlock">branches</a>(<a href="#300096" title="Int">i</a>))
              <span class="keyword">for</span> (<a title="Int" id="300169">i</a> &lt;- <a href="#300128" title="(f: (Int) =&gt; Unit)Unit">l</a>) {
                <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.emit.LocalBuilder)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ldloc</span>, <a href="#300095" title="ch.epfl.lamp.compiler.msil.emit.LocalBuilder">switchLocal</a>)
                <a href="#288581" title="(value: Int,code: ch.epfl.lamp.compiler.msil.emit.ILGenerator)Unit">loadI4</a>(<a href="#300169" title="Int">i</a>, <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>)
                <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,label: ch.epfl.lamp.compiler.msil.emit.Label)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Beq</span>, <a href="#300129" title="ch.epfl.lamp.compiler.msil.emit.Label">targetLabel</a>)
              }
              <a href="#300096" title="Int">i</a> += <span title="Int(1)" class="int">1</span>
            }
            <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.Label" id="300097">defaultTarget</a> = <a href="#288584" title="(key: GenMSIL.this.global.icodes.BasicBlock)ch.epfl.lamp.compiler.msil.emit.Label">labels</a>(<a href="#300092" title="(n: Int)GenMSIL.this.global.icodes.BasicBlock">branches</a>(<a href="#300096" title="Int">i</a>))
            <span title="Unit" class="keyword">if</span> (<a href="#288571" title="(x$1: AnyRef)Boolean">nextBlock</a> <span title="(x$1: Boolean)Boolean">!=</span> <a href="#300097" title="ch.epfl.lamp.compiler.msil.emit.Label">defaultTarget</a> &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#288561" title="=&gt; scala.collection.mutable.HashSet[GenMSIL.this.global.icodes.BasicBlock]">omitJumpBlocks</a>.<span title="(elem: GenMSIL.this.global.icodes.BasicBlock)Boolean">contains</span>(<a href="#288565" title="=&gt; GenMSIL.this.global.icodes.BasicBlock">currentBlock</a>))
              <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,label: ch.epfl.lamp.compiler.msil.emit.Label)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Br</span>, <a href="#300097" title="ch.epfl.lamp.compiler.msil.emit.Label">defaultTarget</a>)


          <span title="Unit" class="keyword">case</span> JUMP(<a title="GenMSIL.this.global.icodes.BasicBlock" id="300280">whereto</a>) =&gt;
            <span title="Unit" class="keyword">if</span> (<a href="#288571" title="(x$1: AnyRef)Boolean">nextBlock</a> <span title="(x$1: Boolean)Boolean">!=</span> <a href="#300280" title="GenMSIL.this.global.icodes.BasicBlock">whereto</a> &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#288561" title="=&gt; scala.collection.mutable.HashSet[GenMSIL.this.global.icodes.BasicBlock]">omitJumpBlocks</a>.<span title="(elem: GenMSIL.this.global.icodes.BasicBlock)Boolean">contains</span>(<a href="#288565" title="=&gt; GenMSIL.this.global.icodes.BasicBlock">currentBlock</a>))
              <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,label: ch.epfl.lamp.compiler.msil.emit.Label)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Br</span>, <a href="#288584" title="(key: GenMSIL.this.global.icodes.BasicBlock)ch.epfl.lamp.compiler.msil.emit.Label">labels</a>(<a href="#300280" title="GenMSIL.this.global.icodes.BasicBlock">whereto</a>))


          <span title="Unit" class="keyword">case</span> CJUMP(<a title="GenMSIL.this.global.icodes.BasicBlock" id="300325">success</a>, <a title="GenMSIL.this.global.icodes.BasicBlock" id="300326">failure</a>, <a title="GenMSIL.this.global.icodes.TestOp" id="300327">cond</a>, <a title="GenMSIL.this.global.icodes.TypeKind" id="300328">kind</a>) =&gt;
            // cond is TestOp (see Primitives.scala), and can take
            // values EQ, NE, LT, GE LE, GT
            // kind is TypeKind
            <span class="keyword">val</span> <a title="Boolean" id="300331">isFloat</a> = <a href="#300328" title="(x$1: AnyRef)Boolean">kind</a> <span title="(x$1: Boolean)Boolean">==</span> <a href="../icode/TypeKinds.scala.html#46447" title="object GenMSIL.this.global.icodes.FLOAT">FLOAT</a> || <a href="#300328" title="(x$1: AnyRef)Boolean">kind</a> == <a href="../icode/TypeKinds.scala.html#46449" title="object GenMSIL.this.global.icodes.DOUBLE">DOUBLE</a>
            <span title="Unit" class="keyword">if</span> (<a href="#288571" title="(x$1: AnyRef)Boolean">nextBlock</a> <span title="(x$1: Boolean)Boolean">==</span> <a href="#300325" title="GenMSIL.this.global.icodes.BasicBlock">success</a> || <a href="#288561" title="=&gt; scala.collection.mutable.HashSet[GenMSIL.this.global.icodes.BasicBlock]">omitJumpBlocks</a>.<span title="(elem: GenMSIL.this.global.icodes.BasicBlock)Boolean">contains</span>(<a href="#288565" title="=&gt; GenMSIL.this.global.icodes.BasicBlock">currentBlock</a>)) {
              <a href="#288586" title="(condition: GenMSIL.this.global.icodes.TestOp,dest: ch.epfl.lamp.compiler.msil.emit.Label,isFloat: Boolean)Unit">emitBr</a>(<a href="#300327" title="GenMSIL.this.global.icodes.TestOp">cond</a>.<a href="../icode/Primitives.scala.html#63268" title="()GenMSIL.this.global.icodes.TestOp">negate</a>, <a href="#288584" title="(key: GenMSIL.this.global.icodes.BasicBlock)ch.epfl.lamp.compiler.msil.emit.Label">labels</a>(<a href="#300326" title="GenMSIL.this.global.icodes.BasicBlock">failure</a>), <a href="#300331" title="Boolean">isFloat</a>)
            } <span class="keyword">else</span> {
              <a href="#288586" title="(condition: GenMSIL.this.global.icodes.TestOp,dest: ch.epfl.lamp.compiler.msil.emit.Label,isFloat: Boolean)Unit">emitBr</a>(<a href="#300327" title="GenMSIL.this.global.icodes.TestOp">cond</a>, <a href="#288584" title="(key: GenMSIL.this.global.icodes.BasicBlock)ch.epfl.lamp.compiler.msil.emit.Label">labels</a>(<a href="#300325" title="GenMSIL.this.global.icodes.BasicBlock">success</a>), <a href="#300331" title="Boolean">isFloat</a>)
              <span title="Unit" class="keyword">if</span> (<a href="#288571" title="(x$1: AnyRef)Boolean">nextBlock</a> <span title="(x$1: Boolean)Boolean">!=</span> <a href="#300326" title="GenMSIL.this.global.icodes.BasicBlock">failure</a> &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#288561" title="=&gt; scala.collection.mutable.HashSet[GenMSIL.this.global.icodes.BasicBlock]">omitJumpBlocks</a>.<span title="(elem: GenMSIL.this.global.icodes.BasicBlock)Boolean">contains</span>(<a href="#288565" title="=&gt; GenMSIL.this.global.icodes.BasicBlock">currentBlock</a>)) {
                <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,label: ch.epfl.lamp.compiler.msil.emit.Label)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Br</span>, <a href="#288584" title="(key: GenMSIL.this.global.icodes.BasicBlock)ch.epfl.lamp.compiler.msil.emit.Label">labels</a>(<a href="#300326" title="GenMSIL.this.global.icodes.BasicBlock">failure</a>))
              }
            }

          <span title="Unit" class="keyword">case</span> CZJUMP(<a title="GenMSIL.this.global.icodes.BasicBlock" id="300440">success</a>, <a title="GenMSIL.this.global.icodes.BasicBlock" id="300441">failure</a>, <a title="GenMSIL.this.global.icodes.TestOp" id="300442">cond</a>, <a title="GenMSIL.this.global.icodes.TypeKind" id="300443">kind</a>) =&gt;
            (<a href="#300443" title="GenMSIL.this.global.icodes.TypeKind">kind</a>: @<a href="../icode/TypeKinds.scala.html#46431" title="GenMSIL.this.global.icodes.TypeKind @unchecked">unchecked</a>) <span title="Unit" class="keyword">match</span> {
              <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46435" title="object GenMSIL.this.global.icodes.BOOL">BOOL</a> | REFERENCE(_) =&gt;
                <span title="Unit" class="keyword">if</span> (<a href="#288571" title="(x$1: AnyRef)Boolean">nextBlock</a> <span title="(x$1: Boolean)Boolean">==</span> <a href="#300440" title="GenMSIL.this.global.icodes.BasicBlock">success</a> || <a href="#288561" title="=&gt; scala.collection.mutable.HashSet[GenMSIL.this.global.icodes.BasicBlock]">omitJumpBlocks</a>.<span title="(elem: GenMSIL.this.global.icodes.BasicBlock)Boolean">contains</span>(<a href="#288565" title="=&gt; GenMSIL.this.global.icodes.BasicBlock">currentBlock</a>)) {
                  <a href="#288587" title="(cond: GenMSIL.this.global.icodes.TestOp,dest: ch.epfl.lamp.compiler.msil.emit.Label)Unit">emitBrBool</a>(<a href="#300442" title="GenMSIL.this.global.icodes.TestOp">cond</a>.<a href="../icode/Primitives.scala.html#63268" title="()GenMSIL.this.global.icodes.TestOp">negate</a>, <a href="#288584" title="(key: GenMSIL.this.global.icodes.BasicBlock)ch.epfl.lamp.compiler.msil.emit.Label">labels</a>(<a href="#300441" title="GenMSIL.this.global.icodes.BasicBlock">failure</a>))
                } <span class="keyword">else</span> {
                  <a href="#288587" title="(cond: GenMSIL.this.global.icodes.TestOp,dest: ch.epfl.lamp.compiler.msil.emit.Label)Unit">emitBrBool</a>(<a href="#300442" title="GenMSIL.this.global.icodes.TestOp">cond</a>, <a href="#288584" title="(key: GenMSIL.this.global.icodes.BasicBlock)ch.epfl.lamp.compiler.msil.emit.Label">labels</a>(<a href="#300440" title="GenMSIL.this.global.icodes.BasicBlock">success</a>))
                  <span title="Unit" class="keyword">if</span> (<a href="#288571" title="(x$1: AnyRef)Boolean">nextBlock</a> <span title="(x$1: Boolean)Boolean">!=</span> <a href="#300441" title="GenMSIL.this.global.icodes.BasicBlock">failure</a> &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#288561" title="=&gt; scala.collection.mutable.HashSet[GenMSIL.this.global.icodes.BasicBlock]">omitJumpBlocks</a>.<span title="(elem: GenMSIL.this.global.icodes.BasicBlock)Boolean">contains</span>(<a href="#288565" title="=&gt; GenMSIL.this.global.icodes.BasicBlock">currentBlock</a>)) {
                    <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,label: ch.epfl.lamp.compiler.msil.emit.Label)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Br</span>, <a href="#288584" title="(key: GenMSIL.this.global.icodes.BasicBlock)ch.epfl.lamp.compiler.msil.emit.Label">labels</a>(<a href="#300441" title="GenMSIL.this.global.icodes.BasicBlock">failure</a>))
                  }
                }
            }

          <span title="Unit" class="keyword">case</span> RETURN(<a title="GenMSIL.this.global.icodes.TypeKind" id="300541">kind</a>) =&gt;
            <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ret</span>)

          <span title="Unit" class="keyword">case</span> THROW() =&gt;
            <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293325">Throw</a>)

          <span title="Unit" class="keyword">case</span> DROP(<a title="GenMSIL.this.global.icodes.TypeKind" id="300555">kind</a>) =&gt;
            <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Pop</span>)

          <span title="Unit" class="keyword">case</span> DUP(<a title="GenMSIL.this.global.icodes.TypeKind" id="300563">kind</a>) =&gt;
            // needed to create new instances
            <span title="Unit" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="#288575" title="=&gt; Boolean">ignoreNextDup</a>) {
              <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Dup</span>)
            } <span class="keyword">else</span> {
              <a href="#288575" title="(x$1: Boolean)Unit">ignoreNextDup</a> = <span title="Boolean(false)" class="keyword">false</span>
            }

          <span title="Unit" class="keyword">case</span> MONITOR_ENTER() =&gt;
            <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.MethodInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Call</span>, <a href="#288433" title="=&gt; ch.epfl.lamp.compiler.msil.MethodInfo">MMONITOR_ENTER</a>)

          <span title="Unit" class="keyword">case</span> MONITOR_EXIT() =&gt;
            <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.MethodInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Call</span>, <a href="#288435" title="=&gt; ch.epfl.lamp.compiler.msil.MethodInfo">MMONITOR_EXIT</a>)

          <span title="Unit" class="keyword">case</span> SCOPE_ENTER(_) | SCOPE_EXIT(_) =&gt;
            <span title="Unit">(</span>)
        }

      } // end for (instr &lt;- b) { .. }

      <a href="#288568" title="(x$1: GenMSIL.this.global.icodes.BasicBlock)Unit">lastBlock</a> = <a href="#297590" title="GenMSIL.this.global.icodes.BasicBlock">b</a> // this way, saveResult knows lastBlock

      <span title="Unit" class="keyword">if</span> (<a href="#288559" title="=&gt; scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.BasicBlock,List[BytecodeGenerator.this.ExHInstruction]]">bb2exHInstructions</a>.<span title="(key: GenMSIL.this.global.icodes.BasicBlock)Boolean">contains</span>(<a href="#297590" title="GenMSIL.this.global.icodes.BasicBlock">b</a>)){
        <a href="#288559" title="(key: GenMSIL.this.global.icodes.BasicBlock)List[BytecodeGenerator.this.ExHInstruction]">bb2exHInstructions</a>(<a href="#297590" title="GenMSIL.this.global.icodes.BasicBlock">b</a>).<span title="(f: (BytecodeGenerator.this.ExHInstruction) =&gt; Unit)Unit">foreach</span>((<a title="BytecodeGenerator.this.ExHInstruction" id="300641">i</a>) =&gt; <a href="#300641" title="BytecodeGenerator.this.ExHInstruction">i</a> <span title="Unit" class="keyword">match</span> {
          <span title="Unit" class="keyword">case</span> BeginExceptionBlock(<a title="GenMSIL.this.global.icodes.ExceptionHandler" id="300642">handler</a>) =&gt; <span title="Unit">(</span>)
          <span title="Unit" class="keyword">case</span> BeginCatchBlock(<a title="GenMSIL.this.global.icodes.ExceptionHandler" id="300645">handler</a>, <a title="ch.epfl.lamp.compiler.msil.Type" id="300646">exType</a>) =&gt; <span title="Unit">(</span>)
          <span title="Unit" class="keyword">case</span> BeginFinallyBlock(<a title="GenMSIL.this.global.icodes.ExceptionHandler" id="300649">handler</a>) =&gt; <span title="Unit">(</span>)
          <span title="Unit" class="keyword">case</span> EndExceptionBlock(<a title="GenMSIL.this.global.icodes.ExceptionHandler" id="300652">handler</a>) =&gt;
            <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37988" title="=&gt; Boolean">value</a>) <a href="../../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;end ex blk: &quot;</span> + <a href="#300652" title="GenMSIL.this.global.icodes.ExceptionHandler">handler</a>)
            <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.Type" id="300655">resType</a> = <a href="#288602" title="(t: GenMSIL.this.global.icodes.TypeKind)ch.epfl.lamp.compiler.msil.Type">msilType</a>(<a href="#300652" title="GenMSIL.this.global.icodes.ExceptionHandler">handler</a>.<a href="../icode/ExceptionHandlers.scala.html#61710" title="=&gt; GenMSIL.this.global.icodes.TypeKind">resultKind</a>)
            <span title="Unit" class="keyword">if</span> (<a href="#300652" title="GenMSIL.this.global.icodes.ExceptionHandler">handler</a>.<a href="../icode/ExceptionHandlers.scala.html#61707" title="(x$1: AnyRef)Boolean">finalizer</a> <span title="(x$1: Boolean)Boolean">==</span> <span title="Null(null)" class="keyword">null</span> || <a href="#300652" title="GenMSIL.this.global.icodes.ExceptionHandler">handler</a>.<a href="../icode/ExceptionHandlers.scala.html#61707" title="(x$1: AnyRef)Boolean">finalizer</a> == <a href="../icode/ExceptionHandlers.scala.html#46470" title="object GenMSIL.this.global.icodes.NoFinalizer">NoFinalizer</a>)
              <a href="#297629" title="(resType: ch.epfl.lamp.compiler.msil.Type)Unit">saveResult</a>(<a href="#300655" title="ch.epfl.lamp.compiler.msil.Type">resType</a>)
            <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<a title="()Unit" id="289706">EndExceptionBlock</a>()
            <span title="Unit" class="keyword">if</span> (<a href="#300655" title="(x$1: AnyRef)Boolean">resType</a> != <a href="../../symtab/clr/CLRTypes.scala.html#288309" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MVOID</a>) {
              <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.LocalBuilder" id="300695">lb</a>: <span title="ch.epfl.lamp.compiler.msil.emit.LocalBuilder">LocalBuilder</span> = <a href="#288577" title="=&gt; scala.collection.mutable.Stack[ch.epfl.lamp.compiler.msil.emit.LocalBuilder]">excResultLocals</a>.<a title="()ch.epfl.lamp.compiler.msil.emit.LocalBuilder" id="79394">pop</a>
              <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.emit.LocalBuilder)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ldloc</span>, <a href="#300695" title="ch.epfl.lamp.compiler.msil.emit.LocalBuilder">lb</a>)
            } <span class="keyword">else</span>
              <a href="#288527" title="(x$1: Boolean)Unit">needAdditionalRet</a> = <span title="Boolean(true)" class="keyword">true</span>
          <span title="Nothing" class="keyword">case</span> _ =&gt; <a href="../../Global.scala.html#39309" title="(msg: String)Nothing">abort</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;unknown case: &quot;</span> + <a href="#300641" title="BytecodeGenerator.this.ExHInstruction">i</a>)
        })
      }

    } // end genBlock

    <span class="keyword">def</span> <a title="(primitive: GenMSIL.this.global.icodes.Primitive,pos: scala.tools.nsc.util.Position)Unit" id="288580">genPrimitive</a>(<a title="GenMSIL.this.global.icodes.Primitive" id="298467">primitive</a>: <a href="../icode/Primitives.scala.html#46474" title="GenMSIL.this.global.icodes.Primitive">Primitive</a>, <a title="scala.tools.nsc.util.Position" id="298468">pos</a>: <a href="../../util/Position.scala.html#14785" title="scala.tools.nsc.util.Position">Position</a>) {
      <a href="#298467" title="GenMSIL.this.global.icodes.Primitive">primitive</a> <span title="Unit" class="keyword">match</span> {
        <span title="Unit" class="keyword">case</span> Negation(<a title="GenMSIL.this.global.icodes.TypeKind" id="300718">kind</a>) =&gt;
          <a href="#300718" title="GenMSIL.this.global.icodes.TypeKind">kind</a> <span title="Unit" class="keyword">match</span> {
            // CHECK: is ist possible to get this for BOOL? in this case, verify.
            <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46435" title="object GenMSIL.this.global.icodes.BOOL">BOOL</a> | <a href="../icode/TypeKinds.scala.html#46437" title="object GenMSIL.this.global.icodes.BYTE">BYTE</a> | <a href="../icode/TypeKinds.scala.html#46441" title="object GenMSIL.this.global.icodes.CHAR">CHAR</a> | <a href="../icode/TypeKinds.scala.html#46439" title="object GenMSIL.this.global.icodes.SHORT">SHORT</a> | <a href="../icode/TypeKinds.scala.html#46443" title="object GenMSIL.this.global.icodes.INT">INT</a> | <a href="../icode/TypeKinds.scala.html#46445" title="object GenMSIL.this.global.icodes.LONG">LONG</a> | <a href="../icode/TypeKinds.scala.html#46447" title="object GenMSIL.this.global.icodes.FLOAT">FLOAT</a> | <a href="../icode/TypeKinds.scala.html#46449" title="object GenMSIL.this.global.icodes.DOUBLE">DOUBLE</a> =&gt;
              <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Neg</span>)

            <span title="Nothing" class="keyword">case</span> _ =&gt; <a href="../../Global.scala.html#39309" title="(msg: String)Nothing">abort</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Impossible to negate a &quot;</span> + <a href="#300718" title="GenMSIL.this.global.icodes.TypeKind">kind</a>)
          }

        <span title="Unit" class="keyword">case</span> Arithmetic(<a title="GenMSIL.this.global.icodes.ArithmeticOp" id="300731">op</a>, <a title="GenMSIL.this.global.icodes.TypeKind" id="300732">kind</a>) =&gt;
          <a href="#300731" title="GenMSIL.this.global.icodes.ArithmeticOp">op</a> <span title="Unit" class="keyword">match</span> {
            <span title="Unit" class="keyword">case</span> <a href="../icode/Primitives.scala.html#46528" title="object GenMSIL.this.global.icodes.ADD">ADD</a> =&gt; <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Add</span>)
            <span title="Unit" class="keyword">case</span> <a href="../icode/Primitives.scala.html#46530" title="object GenMSIL.this.global.icodes.SUB">SUB</a> =&gt; <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293263">Sub</a>)
            <span title="Unit" class="keyword">case</span> <a href="../icode/Primitives.scala.html#46532" title="object GenMSIL.this.global.icodes.MUL">MUL</a> =&gt; <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293265">Mul</a>)
            <span title="Unit" class="keyword">case</span> <a href="../icode/Primitives.scala.html#46534" title="object GenMSIL.this.global.icodes.DIV">DIV</a> =&gt; <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293267">Div</a>)
            <span title="Unit" class="keyword">case</span> <a href="../icode/Primitives.scala.html#46536" title="object GenMSIL.this.global.icodes.REM">REM</a> =&gt; <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293271">Rem</a>)
            <span title="Unit" class="keyword">case</span> <a href="../icode/Primitives.scala.html#46538" title="object GenMSIL.this.global.icodes.NOT">NOT</a> =&gt; <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293289">Not</a>) //bitwise complement (one's complement)
            <span title="Nothing" class="keyword">case</span> _ =&gt; <a href="../../Global.scala.html#39309" title="(msg: String)Nothing">abort</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Unknown arithmetic primitive &quot;</span> + <a href="#298467" title="GenMSIL.this.global.icodes.Primitive">primitive</a> )
          }

        <span title="Unit" class="keyword">case</span> Logical(<a title="GenMSIL.this.global.icodes.LogicalOp" id="300765">op</a>, <a title="GenMSIL.this.global.icodes.TypeKind" id="300766">kind</a>) =&gt; <a href="#300765" title="GenMSIL.this.global.icodes.LogicalOp">op</a> <span title="Unit" class="keyword">match</span> {
          <span title="Unit" class="keyword">case</span> <a href="../icode/Primitives.scala.html#46548" title="object GenMSIL.this.global.icodes.AND">AND</a> =&gt; <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">And</span>)
          <span title="Unit" class="keyword">case</span> <a href="../icode/Primitives.scala.html#46550" title="object GenMSIL.this.global.icodes.OR">OR</a> =&gt; <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Or</span>)
          <span title="Unit" class="keyword">case</span> <a href="../icode/Primitives.scala.html#46552" title="object GenMSIL.this.global.icodes.XOR">XOR</a> =&gt; <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Xor</span>)
        }

        <span title="Unit" class="keyword">case</span> Shift(<a title="GenMSIL.this.global.icodes.ShiftOp" id="300783">op</a>, <a title="GenMSIL.this.global.icodes.TypeKind" id="300784">kind</a>) =&gt; <a href="#300783" title="GenMSIL.this.global.icodes.ShiftOp">op</a> <span title="Unit" class="keyword">match</span> {
          <span title="Unit" class="keyword">case</span> <a href="../icode/Primitives.scala.html#46541" title="object GenMSIL.this.global.icodes.LSL">LSL</a> =&gt; <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293281">Shl</a>)
          <span title="Unit" class="keyword">case</span> <a href="../icode/Primitives.scala.html#46543" title="object GenMSIL.this.global.icodes.ASR">ASR</a> =&gt; <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293283">Shr</a>)
          <span title="Unit" class="keyword">case</span> <a href="../icode/Primitives.scala.html#46545" title="object GenMSIL.this.global.icodes.LSR">LSR</a> =&gt; <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293285">Shr_Un</a>)
        }

        <span title="Unit" class="keyword">case</span> Conversion(<a title="GenMSIL.this.global.icodes.TypeKind" id="300801">src</a>, <a title="GenMSIL.this.global.icodes.TypeKind" id="300802">dst</a>) =&gt;
          <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37988" title="=&gt; Boolean">value</a>)
            <a href="../../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Converting from: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#300801" title="GenMSIL.this.global.icodes.TypeKind">src</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; to: &quot;)" class="string">&quot; to: &quot;</span> + <a href="#300802" title="GenMSIL.this.global.icodes.TypeKind">dst</a>)

          <a href="#300802" title="GenMSIL.this.global.icodes.TypeKind">dst</a> <span title="Unit" class="keyword">match</span> {
            <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46437" title="object GenMSIL.this.global.icodes.BYTE">BYTE</a> =&gt;   <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293433">Conv_U1</a>)
            <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46439" title="object GenMSIL.this.global.icodes.SHORT">SHORT</a> =&gt;  <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293293">Conv_I2</a>)
            <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46441" title="object GenMSIL.this.global.icodes.CHAR">CHAR</a> =&gt;   <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293435">Conv_U2</a>)
            <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46443" title="object GenMSIL.this.global.icodes.INT">INT</a> =&gt;    <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293295">Conv_I4</a>)
            <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46445" title="object GenMSIL.this.global.icodes.LONG">LONG</a> =&gt;   <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293297">Conv_I8</a>)
            <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46447" title="object GenMSIL.this.global.icodes.FLOAT">FLOAT</a> =&gt;  <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293299">Conv_R4</a>)
            <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46449" title="object GenMSIL.this.global.icodes.DOUBLE">DOUBLE</a> =&gt; <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293301">Conv_R8</a>)
            <span title="Unit" class="keyword">case</span> _ =&gt;
              <span title="object Console">Console</span>.<span title="(x: Any)Unit">println</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Illegal conversion at: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#288484" title="=&gt; GenMSIL.this.global.icodes.IClass">clasz</a> <span title="(x$1: Any)java.lang.String">+</span>
                              <span title="java.lang.String(&quot; at: &quot;)" class="string">&quot; at: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#298468" title="scala.tools.nsc.util.Position">pos</a>.<a href="../../util/Position.scala.html#30464" title="=&gt; scala.tools.nsc.util.SourceFile">source</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;:&quot;)" class="string">&quot;:&quot;</span> + <a href="#298468" title="scala.tools.nsc.util.Position">pos</a>.<a href="../../util/Position.scala.html#30490" title="=&gt; Int">line</a>)
          }

        <span title="Unit" class="keyword">case</span> ArrayLength(_) =&gt;
          <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293365">Ldlen</a>)

        <span title="Unit" class="keyword">case</span> <a href="../icode/Primitives.scala.html#46502" title="object GenMSIL.this.global.icodes.StartConcat">StartConcat</a> =&gt;
          <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.ConstructorInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Newobj</span>, <a href="#288439" title="=&gt; ch.epfl.lamp.compiler.msil.ConstructorInfo">MSTRING_BUILDER_CONSTR</a>)


        <span title="Unit" class="keyword">case</span> StringConcat(<a title="GenMSIL.this.global.icodes.TypeKind" id="300875">el</a>) =&gt;
          <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.Type" id="300878">elemType</a> : <span title="ch.epfl.lamp.compiler.msil.Type">MsilType</span> = <a href="#300875" title="GenMSIL.this.global.icodes.TypeKind">el</a> <span title="ch.epfl.lamp.compiler.msil.Type" class="keyword">match</span> {
            <span title="ch.epfl.lamp.compiler.msil.Type" class="keyword">case</span> REFERENCE(_) | ARRAY(_) =&gt; <a href="../../symtab/clr/CLRTypes.scala.html#288318" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MOBJECT</a>
            <span title="ch.epfl.lamp.compiler.msil.Type" class="keyword">case</span> _ =&gt; <a href="#288602" title="(t: GenMSIL.this.global.icodes.TypeKind)ch.epfl.lamp.compiler.msil.Type">msilType</a>(<a href="#300875" title="GenMSIL.this.global.icodes.TypeKind">el</a>)
          }

          <span class="keyword">val</span> <a title="Array[ch.epfl.lamp.compiler.msil.Type]" id="300879">argTypes</a>:<span title="Array[ch.epfl.lamp.compiler.msil.Type]">Array</span>[MsilType] = <span title="(xs: ch.epfl.lamp.compiler.msil.Type*)(implicit evidence$2: scala.reflect.ClassManifest[ch.epfl.lamp.compiler.msil.Type])Array[ch.epfl.lamp.compiler.msil.Type]">Array</span><span title="(clazz: Class[_])scala.reflect.ClassManifest[ch.epfl.lamp.compiler.msil.Type]">(</span><a href="#300878" title="ch.epfl.lamp.compiler.msil.Type">elemType</a>)
          <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.MethodInfo" id="300880">stringBuilderAppend</a> = <a href="#288437" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MSTRING_BUILDER</a>.<span title="(x$1: java.lang.String,x$2: Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.MethodInfo">GetMethod</span>(<span title="java.lang.String(&quot;Append&quot;)" class="string">&quot;Append&quot;</span>, <a href="#300879" title="Array[ch.epfl.lamp.compiler.msil.Type]">argTypes</a> )
          <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.MethodInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Callvirt</span>,  <a href="#300880" title="ch.epfl.lamp.compiler.msil.MethodInfo">stringBuilderAppend</a>)

        <span title="Unit" class="keyword">case</span> <a href="../icode/Primitives.scala.html#46504" title="object GenMSIL.this.global.icodes.EndConcat">EndConcat</a> =&gt;
          <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.MethodInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Callvirt</span>, <a href="#288441" title="=&gt; ch.epfl.lamp.compiler.msil.MethodInfo">MSTRING_BUILDER_TOSTRING</a>)

        <span title="Nothing" class="keyword">case</span> _ =&gt;
          <a href="../../Global.scala.html#39309" title="(msg: String)Nothing">abort</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Unimplemented primitive &quot;</span> + <a href="#298467" title="GenMSIL.this.global.icodes.Primitive">primitive</a>)
      }
    }


    ////////////////////// loading ///////////////////////

    <span class="keyword">def</span> <a title="(value: Int,code: ch.epfl.lamp.compiler.msil.emit.ILGenerator)Unit" id="288581">loadI4</a>(<a title="Int" id="297857">value</a>: <span title="Int">Int</span>, <a title="ch.epfl.lamp.compiler.msil.emit.ILGenerator" id="297858">code</a>: <span title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">ILGenerator</span>): <span title="Unit">Unit</span> = <a href="#297857" title="Int">value</a> <span title="Unit" class="keyword">match</span> {
      <span title="Unit" class="keyword">case</span> <span title="Int(-1)">-</span><span class="int">1</span> =&gt; <a href="#297858" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293131">Ldc_I4_M1</a>)
      <span title="Unit" class="keyword">case</span> <span title="Int(0)" class="int">0</span>  =&gt; <a href="#297858" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ldc_I4_0</span>)
      <span title="Unit" class="keyword">case</span> <span title="Int(1)" class="int">1</span>  =&gt; <a href="#297858" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ldc_I4_1</span>)
      <span title="Unit" class="keyword">case</span> <span title="Int(2)" class="int">2</span>  =&gt; <a href="#297858" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293137">Ldc_I4_2</a>)
      <span title="Unit" class="keyword">case</span> <span title="Int(3)" class="int">3</span>  =&gt; <a href="#297858" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293139">Ldc_I4_3</a>)
      <span title="Unit" class="keyword">case</span> <span title="Int(4)" class="int">4</span>  =&gt; <a href="#297858" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293141">Ldc_I4_4</a>)
      <span title="Unit" class="keyword">case</span> <span title="Int(5)" class="int">5</span>  =&gt; <a href="#297858" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293143">Ldc_I4_5</a>)
      <span title="Unit" class="keyword">case</span> <span title="Int(6)" class="int">6</span>  =&gt; <a href="#297858" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293145">Ldc_I4_6</a>)
      <span title="Unit" class="keyword">case</span> <span title="Int(7)" class="int">7</span>  =&gt; <a href="#297858" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293147">Ldc_I4_7</a>)
      <span title="Unit" class="keyword">case</span> <span title="Int(8)" class="int">8</span>  =&gt; <a href="#297858" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293149">Ldc_I4_8</a>)
      <span title="Unit" class="keyword">case</span> _  =&gt;
        <span title="Unit" class="keyword">if</span> (<a href="#297857" title="(x$1: Int)Boolean">value</a> <span title="(x$1: Boolean)Boolean">&gt;=</span> <span title="Int(-128)">-</span><span class="int">128</span> &amp;&amp; <a href="#297857" title="(x$1: Int)Boolean">value</a> &lt;= <span title="Int(127)" class="int">127</span>)
          <a href="#297858" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: Int)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293151">Ldc_I4_S</a>, <a href="#297857" title="Int">value</a>)
        <span class="keyword">else</span>
          <a href="#297858" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: Int)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293153">Ldc_I4</a>, <a href="#297857" title="Int">value</a>)
    }

    <span class="keyword">def</span> <a title="(code: ch.epfl.lamp.compiler.msil.emit.ILGenerator)(i: Int)Unit" id="288582">loadArg</a>(<a title="ch.epfl.lamp.compiler.msil.emit.ILGenerator" id="298019">code</a>: <span title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">ILGenerator</span>)(<a title="Int" id="298020">i</a>: <span title="Int">Int</span>) = <a href="#298020" title="Int">i</a> <span title="Unit" class="keyword">match</span> {
      <span title="Unit" class="keyword">case</span> <span title="Int(0)" class="int">0</span> =&gt; <a href="#298019" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ldarg_0</span>)
      <span title="Unit" class="keyword">case</span> <span title="Int(1)" class="int">1</span> =&gt; <a href="#298019" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293095">Ldarg_1</a>)
      <span title="Unit" class="keyword">case</span> <span title="Int(2)" class="int">2</span> =&gt; <a href="#298019" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293097">Ldarg_2</a>)
      <span title="Unit" class="keyword">case</span> <span title="Int(3)" class="int">3</span> =&gt; <a href="#298019" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293099">Ldarg_3</a>)
      <span title="Unit" class="keyword">case</span> _      =&gt;
        <span title="Unit" class="keyword">if</span> (<a href="#298020" title="(x$1: Int)Boolean">i</a> <span title="(x$1: Boolean)Boolean">&gt;=</span> <span title="Int(-128)">-</span><span class="int">128</span> &amp;&amp; <a href="#298020" title="(x$1: Int)Boolean">i</a> &lt;= <span title="Int(127)" class="int">127</span>)
          <a href="#298019" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: Int)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293117">Ldarg_S</a>, <a href="#298020" title="Int">i</a>)
        <span class="keyword">else</span>
          <a href="#298019" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: Int)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293481">Ldarg</a>, <a href="#298020" title="Int">i</a>)
    }

    <span class="keyword">def</span> <a title="(i: Int,local: GenMSIL.this.global.icodes.Local,code: ch.epfl.lamp.compiler.msil.emit.ILGenerator)Unit" id="288583">loadLocal</a>(<a title="Int" id="298077">i</a>: <span title="Int">Int</span>, <a title="GenMSIL.this.global.icodes.Local" id="298078">local</a>: <a href="../icode/Members.scala.html#46406" title="GenMSIL.this.global.icodes.Local">Local</a>, <a title="ch.epfl.lamp.compiler.msil.emit.ILGenerator" id="298079">code</a>: <span title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">ILGenerator</span>) = <a href="#298077" title="Int">i</a> <span title="Unit" class="keyword">match</span> {
      <span title="Unit" class="keyword">case</span> <span title="Int(0)" class="int">0</span> =&gt; <a href="#298079" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293101">Ldloc_0</a>)
      <span title="Unit" class="keyword">case</span> <span title="Int(1)" class="int">1</span> =&gt; <a href="#298079" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293103">Ldloc_1</a>)
      <span title="Unit" class="keyword">case</span> <span title="Int(2)" class="int">2</span> =&gt; <a href="#298079" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293105">Ldloc_2</a>)
      <span title="Unit" class="keyword">case</span> <span title="Int(3)" class="int">3</span> =&gt; <a href="#298079" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293107">Ldloc_3</a>)
      <span title="Unit" class="keyword">case</span> _      =&gt;
        <span title="Unit" class="keyword">if</span> (<a href="#298077" title="(x$1: Int)Boolean">i</a> <span title="(x$1: Boolean)Boolean">&gt;=</span> <span title="Int(-128)">-</span><span class="int">128</span> &amp;&amp; <a href="#298077" title="(x$1: Int)Boolean">i</a> &lt;= <span title="Int(127)" class="int">127</span>)
          <a href="#298079" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.emit.LocalBuilder)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293121">Ldloc_S</a>, <a href="#288599" title="(key: GenMSIL.this.global.icodes.Local)ch.epfl.lamp.compiler.msil.emit.LocalBuilder">localBuilders</a>(<a href="#298078" title="GenMSIL.this.global.icodes.Local">local</a>))
        <span class="keyword">else</span>
          <a href="#298079" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.emit.LocalBuilder)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ldloc</span>, <a href="#288599" title="(key: GenMSIL.this.global.icodes.Local)ch.epfl.lamp.compiler.msil.emit.LocalBuilder">localBuilders</a>(<a href="#298078" title="GenMSIL.this.global.icodes.Local">local</a>))
    }

    ////////////////////// labels ///////////////////////


    <span class="keyword">val</span> <a title="scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.BasicBlock,ch.epfl.lamp.compiler.msil.emit.Label]" id="288584">labels</a>: <span title="scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.BasicBlock,ch.epfl.lamp.compiler.msil.emit.Label]">HashMap</span>[BasicBlock, Label] = <span title="scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.BasicBlock,ch.epfl.lamp.compiler.msil.emit.Label]" class="keyword">new</span> <span title="scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.BasicBlock,ch.epfl.lamp.compiler.msil.emit.Label]">HashMap</span>() // labels for branches

    <span class="keyword">def</span> <a title="(condition: GenMSIL.this.global.icodes.TestOp,dest: ch.epfl.lamp.compiler.msil.emit.Label,isFloat: Boolean)Unit" id="288586">emitBr</a>(<a title="GenMSIL.this.global.icodes.TestOp" id="300360">condition</a>: <a href="../icode/Primitives.scala.html#46514" title="GenMSIL.this.global.icodes.TestOp">TestOp</a>, <a title="ch.epfl.lamp.compiler.msil.emit.Label" id="300361">dest</a>: <span title="ch.epfl.lamp.compiler.msil.emit.Label">Label</span>, <a title="Boolean" id="300362">isFloat</a>: <span title="Boolean">Boolean</span>) {
      <a href="#300360" title="GenMSIL.this.global.icodes.TestOp">condition</a> <span title="Unit" class="keyword">match</span> {
        <span title="Unit" class="keyword">case</span> <a href="../icode/Primitives.scala.html#46515" title="object GenMSIL.this.global.icodes.EQ">EQ</a> =&gt; <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,label: ch.epfl.lamp.compiler.msil.emit.Label)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Beq</span>, <a href="#300361" title="ch.epfl.lamp.compiler.msil.emit.Label">dest</a>)
        <span title="Unit" class="keyword">case</span> <a href="../icode/Primitives.scala.html#46517" title="object GenMSIL.this.global.icodes.NE">NE</a> =&gt; <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,label: ch.epfl.lamp.compiler.msil.emit.Label)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293215">Bne_Un</a>, <a href="#300361" title="ch.epfl.lamp.compiler.msil.emit.Label">dest</a>)
        <span title="Unit" class="keyword">case</span> <a href="../icode/Primitives.scala.html#46519" title="object GenMSIL.this.global.icodes.LT">LT</a> =&gt; <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,label: ch.epfl.lamp.compiler.msil.emit.Label)Unit">Emit</span>(<span title="ch.epfl.lamp.compiler.msil.emit.OpCode" class="keyword">if</span> (<a href="#300362" title="Boolean">isFloat</a>) <span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293223">Blt_Un</a> <span class="keyword">else</span> <span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293213">Blt</a>, <a href="#300361" title="ch.epfl.lamp.compiler.msil.emit.Label">dest</a>)
        <span title="Unit" class="keyword">case</span> <a href="../icode/Primitives.scala.html#46521" title="object GenMSIL.this.global.icodes.GE">GE</a> =&gt; <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,label: ch.epfl.lamp.compiler.msil.emit.Label)Unit">Emit</span>(<span title="ch.epfl.lamp.compiler.msil.emit.OpCode" class="keyword">if</span> (<a href="#300362" title="Boolean">isFloat</a>) <span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293217">Bge_Un</a> <span class="keyword">else</span> <span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293207">Bge</a>, <a href="#300361" title="ch.epfl.lamp.compiler.msil.emit.Label">dest</a>)
        <span title="Unit" class="keyword">case</span> <a href="../icode/Primitives.scala.html#46523" title="object GenMSIL.this.global.icodes.LE">LE</a> =&gt; <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,label: ch.epfl.lamp.compiler.msil.emit.Label)Unit">Emit</span>(<span title="ch.epfl.lamp.compiler.msil.emit.OpCode" class="keyword">if</span> (<a href="#300362" title="Boolean">isFloat</a>) <span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293221">Ble_Un</a> <span class="keyword">else</span> <span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293211">Ble</a>, <a href="#300361" title="ch.epfl.lamp.compiler.msil.emit.Label">dest</a>)
        <span title="Unit" class="keyword">case</span> <a href="../icode/Primitives.scala.html#46525" title="object GenMSIL.this.global.icodes.GT">GT</a> =&gt; <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,label: ch.epfl.lamp.compiler.msil.emit.Label)Unit">Emit</span>(<span title="ch.epfl.lamp.compiler.msil.emit.OpCode" class="keyword">if</span> (<a href="#300362" title="Boolean">isFloat</a>) <span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293219">Bgt_Un</a> <span class="keyword">else</span> <span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293209">Bgt</a>, <a href="#300361" title="ch.epfl.lamp.compiler.msil.emit.Label">dest</a>)
      }
    }

    <span class="keyword">def</span> <a title="(cond: GenMSIL.this.global.icodes.TestOp,dest: ch.epfl.lamp.compiler.msil.emit.Label)Unit" id="288587">emitBrBool</a>(<a title="GenMSIL.this.global.icodes.TestOp" id="300465">cond</a>: <a href="../icode/Primitives.scala.html#46514" title="GenMSIL.this.global.icodes.TestOp">TestOp</a>, <a title="ch.epfl.lamp.compiler.msil.emit.Label" id="300466">dest</a>: <span title="ch.epfl.lamp.compiler.msil.emit.Label">Label</span>) {
      <a href="#300465" title="GenMSIL.this.global.icodes.TestOp">cond</a> <span title="Unit" class="keyword">match</span> {
        // EQ -&gt; Brfalse, NE -&gt; Brtrue; this is because we come from
        // a CZJUMP. If the value on the stack is 0 (e.g. a boolen
        // method returned false), and we are in the case EQ, then
        // we need to emit Brfalse (EQ Zero means false). vice versa
        <span title="Unit" class="keyword">case</span> <a href="../icode/Primitives.scala.html#46515" title="object GenMSIL.this.global.icodes.EQ">EQ</a> =&gt; <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,label: ch.epfl.lamp.compiler.msil.emit.Label)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293201">Brfalse</a>, <a href="#300466" title="ch.epfl.lamp.compiler.msil.emit.Label">dest</a>)
        <span title="Unit" class="keyword">case</span> <a href="../icode/Primitives.scala.html#46517" title="object GenMSIL.this.global.icodes.NE">NE</a> =&gt; <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,label: ch.epfl.lamp.compiler.msil.emit.Label)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293203">Brtrue</a>, <a href="#300466" title="ch.epfl.lamp.compiler.msil.emit.Label">dest</a>)
      }
    }

    <span class="keyword">def</span> <a title="(bs: List[GenMSIL.this.global.icodes.BasicBlock])Unit" id="288588">makeLabels</a>(<a title="List[GenMSIL.this.global.icodes.BasicBlock]" id="294124">bs</a>: <span title="List[GenMSIL.this.global.icodes.BasicBlock]">List</span>[BasicBlock]) {
      <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37988" title="=&gt; Boolean">value</a>)
        <a href="../../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Making labels for: &quot;</span> + <a href="#288487" title="=&gt; GenMSIL.this.global.icodes.IMethod">method</a>)
      <span class="keyword">for</span> (<a title="GenMSIL.this.global.icodes.BasicBlock" id="301166">bb</a> &lt;- <a href="#294124" title="(f: (GenMSIL.this.global.icodes.BasicBlock) =&gt; Unit)Unit">bs</a>) <a href="#288584" title="(key: GenMSIL.this.global.icodes.BasicBlock,value: ch.epfl.lamp.compiler.msil.emit.Label)Unit">labels</a>(<a href="#301166" title="GenMSIL.this.global.icodes.BasicBlock">bb</a>) = <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<a title="()ch.epfl.lamp.compiler.msil.emit.Label" id="289698">DefineLabel</a>()
    }

    ////////////////////// local vars ///////////////////////

    /**
     * Compute the indexes of each local variable of the given
     * method.
     */
    <span class="keyword">def</span> <a title="(m: GenMSIL.this.global.icodes.IMethod)Unit" id="288589">computeLocalVarsIndex</a>(<a title="GenMSIL.this.global.icodes.IMethod" id="293871">m</a>: <a href="../icode/Members.scala.html#46405" title="GenMSIL.this.global.icodes.IMethod">IMethod</a>) {
      <span class="keyword">val</span> <a title="List[GenMSIL.this.global.icodes.Local]" id="301180">params</a> = <a href="#293871" title="GenMSIL.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61518" title="=&gt; List[GenMSIL.this.global.icodes.Local]">params</a>
      <span class="keyword">var</span> <a title="Int" id="301181">idx</a> = <span title="Int(1)" class="int">1</span>
      <span title="Unit" class="keyword">if</span> (<a href="#293871" title="GenMSIL.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61494" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>.<a href="../../symtab/Symbols.scala.html#27126" title="=&gt; Boolean">isStaticMember</a>)
        <a href="#301181" title="Int">idx</a> = <span title="Int(0)" class="int">0</span>

      <span class="keyword">for</span> (<a title="GenMSIL.this.global.icodes.Local" id="301199">l</a> &lt;- <a href="#301180" title="(f: (GenMSIL.this.global.icodes.Local) =&gt; Unit)Unit">params</a>) {
        <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37988" title="=&gt; Boolean">value</a>)
          <a href="../../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Index value for parameter &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#301199" title="GenMSIL.this.global.icodes.Local">l</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;: &quot;)" class="string">&quot;: &quot;</span> + <a href="#301181" title="Int">idx</a>)
        <a href="#301199" title="GenMSIL.this.global.icodes.Local">l</a>.<a href="../icode/Members.scala.html#61028" title="(x$1: Int)Unit">index</a> = <a href="#301181" title="Int">idx</a>
        <a href="#301181" title="Int">idx</a> += <span title="Int(1)" class="int">1</span> // sizeOf(l.kind)
      }

      <span class="keyword">val</span> <a title="List[GenMSIL.this.global.icodes.Local]" id="301182">locvars</a> = <a href="#293871" title="GenMSIL.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61515" title="(that: List[GenMSIL.this.global.icodes.Local])List[GenMSIL.this.global.icodes.Local]">locals</a> -- <a href="#301180" title="List[GenMSIL.this.global.icodes.Local]">params</a>
      <a href="#301181" title="Int">idx</a> = <span title="Int(0)" class="int">0</span>

      <span class="keyword">for</span> (<a title="GenMSIL.this.global.icodes.Local" id="301272">l</a> &lt;- <a href="#301182" title="(f: (GenMSIL.this.global.icodes.Local) =&gt; Unit)Unit">locvars</a>) {
        <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37988" title="=&gt; Boolean">value</a>)
          <a href="../../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Index value for local variable &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#301272" title="GenMSIL.this.global.icodes.Local">l</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;: &quot;)" class="string">&quot;: &quot;</span> + <a href="#301181" title="Int">idx</a>)
        <a href="#301272" title="GenMSIL.this.global.icodes.Local">l</a>.<a href="../icode/Members.scala.html#61028" title="(x$1: Int)Unit">index</a> = <a href="#301181" title="Int">idx</a>
        <a href="#301181" title="Int">idx</a> += <span title="Int(1)" class="int">1</span> // sizeOf(l.kind)
      }

    }

    ////////////////////// Utilities ////////////////////////

    /** Return the a name of this symbol that can be used on the .NET
     * platform. It removes spaces from names.
     *
     * Special handling: scala.All and scala.AllRef are 'erased' to
     * scala.All$ and scala.AllRef$. This is needed because they are
     * not real classes, and they mean 'abrupt termination upon evaluation
     * of that expression' or 'null' respectively. This handling is
     * done already in GenICode, but here we need to remove references
     * from method signatures to these types, because such classes can
     * not exist in the classpath: the type checker will be very confused.
     */
    <span class="keyword">def</span> <a title="(sym: GenMSIL.this.global.Symbol)String" id="288590">msilName</a>(<a title="GenMSIL.this.global.Symbol" id="291130">sym</a>: <a href="../../symtab/Symbols.scala.html#26286" title="GenMSIL.this.global.Symbol">Symbol</a>): <span title="String">String</span> = {
      <span class="keyword">val</span> <a title="String" id="301322">suffix</a>: <span title="String">String</span> = <span title="String" class="keyword">if</span> (<a href="#291130" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27155" title="(mask: Long)Boolean">hasFlag</a><span title="(x$1: Boolean)Boolean">(</span>Flags.<span title="Long(256L)">MODULE</span>) <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#291130" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27069" title="=&gt; Boolean">isMethod</a> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span>
                               <span title="=&gt; Boolean">!</span><a href="#291130" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27120" title="=&gt; Boolean">isImplClass</a> &amp;&amp;
                               <span title="=&gt; Boolean">!</span><a href="#291130" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27155" title="(mask: Long)Boolean">hasFlag</a>(Flags.<span title="Long(1048576L)">JAVA</span>)) <span title="java.lang.String(&quot;$&quot;)" class="string">&quot;$&quot;</span> <span class="keyword">else</span> <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>
      // Flags.JAVA: &quot;symbol was not defined by a scala-class&quot; (java, or .net-class)

      <span title="Unit" class="keyword">if</span> (<a href="#291130" title="(x$1: AnyRef)Boolean">sym</a> == <a href="../../symtab/Definitions.scala.html#26638" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28457" title="=&gt; GenMSIL.this.global.Symbol">NothingClass</a>)
        <span title="Nothing" class="keyword">return</span> <span title="java.lang.String(&quot;scala.runtime.Nothing$&quot;)" class="string">&quot;scala.runtime.Nothing$&quot;</span>
      <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<a href="#291130" title="(x$1: AnyRef)Boolean">sym</a> == <a href="../../symtab/Definitions.scala.html#26638" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28455" title="=&gt; GenMSIL.this.global.Symbol">NullClass</a>)
        <span title="Nothing" class="keyword">return</span> <span title="java.lang.String(&quot;scala.runtime.Null$&quot;)" class="string">&quot;scala.runtime.Null$&quot;</span>

      <span title="(x$1: Any)java.lang.String">(</span><span title="String" class="keyword">if</span> (<a href="#291130" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27056" title="(x$1: Boolean)Boolean">isClass</a> || (<a href="#291130" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27076" title="(x$1: Boolean)Boolean">isModule</a> &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#291130" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27069" title="=&gt; Boolean">isMethod</a>))
        <a href="#291130" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27248" title="=&gt; String">fullNameString</a>
       <span class="keyword">else</span>
         <a href="#291130" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27242" title="=&gt; GenMSIL.this.global.Name">simpleName</a>.<a href="../../symtab/Names.scala.html#28391" title="()String">toString</a>().<a title="()java.lang.String" id="7120">trim</a>()) + <a href="#301322" title="String">suffix</a>
    }


    ////////////////////// flags ///////////////////////

    <span class="keyword">def</span> <a title="(sym: GenMSIL.this.global.Symbol)Int" id="288591">msilTypeFlags</a>(<a title="GenMSIL.this.global.Symbol" id="301358">sym</a>: <a href="../../symtab/Symbols.scala.html#26286" title="GenMSIL.this.global.Symbol">Symbol</a>): <span title="Int">Int</span> = {
      <span class="keyword">var</span> <a title="Int" id="301360">mf</a>: <span title="Int">Int</span> = TypeAttributes.AutoLayout <span title="Int(0)">|</span> TypeAttributes.AnsiClass

      <span title="Unit" class="keyword">if</span>(<a href="#301358" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27132" title="=&gt; Boolean">isNestedClass</a>) {
        <a href="#301360" title="Int">mf</a> = <a href="#301360" title="(x$1: Int)Int">mf</a> | (<span title="Int" class="keyword">if</span> (<a href="../../symtab/Symbols.scala.html#27155" title="(mask: Long)Boolean">sym</a> hasFlag Flags.<span title="Long(4L)">PRIVATE</span>) TypeAttributes.<span title="Int(3)">NestedPrivate</span> <span class="keyword">else</span> TypeAttributes.<span title="Int(2)">NestedPublic</span>)
      } <span class="keyword">else</span> {
        <a href="#301360" title="Int">mf</a> = <a href="#301360" title="(x$1: Int)Int">mf</a> | (<span title="Int" class="keyword">if</span> (<a href="../../symtab/Symbols.scala.html#27155" title="(mask: Long)Boolean">sym</a> hasFlag Flags.<span title="Long(4L)">PRIVATE</span>) TypeAttributes.<span title="Int(0)">NotPublic</span> <span class="keyword">else</span> TypeAttributes.<span title="Int(1)">Public</span>)
      }
      <a href="#301360" title="Int">mf</a> = <a href="#301360" title="(x$1: Int)Int">mf</a> | (<span title="Int" class="keyword">if</span> (<a href="../../symtab/Symbols.scala.html#27155" title="(mask: Long)Boolean">sym</a> hasFlag Flags.<span title="Long(8L)">ABSTRACT</span>) TypeAttributes.<span title="Int(128)">Abstract</span> <span class="keyword">else</span> <span title="Int(0)" class="int">0</span>)
      <a href="#301360" title="Int">mf</a> = <a href="#301360" title="(x$1: Int)Int">mf</a> | (<span title="Int" class="keyword">if</span> (<a href="#301358" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27082" title="(x$1: Boolean)Boolean">isTrait</a> &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#301358" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27120" title="=&gt; Boolean">isImplClass</a>) TypeAttributes.<span title="Int(32)">Interface</span> <span class="keyword">else</span> TypeAttributes.<span title="Int(0)">Class</span>)
      <a href="#301360" title="Int">mf</a> = <a href="#301360" title="(x$1: Int)Int">mf</a> | (<span title="Int" class="keyword">if</span> (<a href="#301358" title="GenMSIL.this.global.Symbol">sym</a> <a href="../../symtab/Symbols.scala.html#27128" title="=&gt; Boolean">isFinal</a>) TypeAttributes.<span title="Int(256)">Sealed</span> <span class="keyword">else</span> <span title="Int(0)" class="int">0</span>)

      <a href="#301358" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27013" title="(f: (GenMSIL.this.global.AnnotationInfo) =&gt; Unit)Unit">annotations</a> foreach { <a title="GenMSIL.this.global.AnnotationInfo" id="301448">a</a> =&gt; <a href="#301448" title="GenMSIL.this.global.AnnotationInfo">a</a> <span title="Unit" class="keyword">match</span> {
        <span title="Unit" class="keyword">case</span> AnnotationInfo(<a href="#288474" title="=&gt; GenMSIL.this.global.Type">SerializableAttr</a>, _, _) =&gt;
          // TODO: add the Serializable TypeAttribute also if the annotation
          // System.SerializableAttribute is present (.net annotation, not scala)
          //  Best way to do it: compare with
          //  definitions.getClass(&quot;System.SerializableAttribute&quot;).tpe
          //  when frontend available
          <a href="#301360" title="Int">mf</a> = <a href="#301360" title="(x$1: Int)Int">mf</a> | TypeAttributes.<span title="Int(8192)">Serializable</span>
        <span title="Unit" class="keyword">case</span> _ =&gt; <span title="Unit">(</span>)
      }}

      <a href="#301360" title="Int">mf</a>
      // static: not possible (or?)
    }

    <span class="keyword">def</span> <a title="(sym: GenMSIL.this.global.Symbol)Short" id="288592">msilMethodFlags</a>(<a title="GenMSIL.this.global.Symbol" id="301467">sym</a>: <a href="../../symtab/Symbols.scala.html#26286" title="GenMSIL.this.global.Symbol">Symbol</a>): <span title="Short">Short</span> = {
      <span class="keyword">var</span> <a title="Int" id="301469">mf</a>: <span title="Int">Int</span> = MethodAttributes.<a title="(x$1: Short)Int" id="2523">HideBySig</a> |
        (<span title="Short" class="keyword">if</span> (<a href="../../symtab/Symbols.scala.html#27155" title="(mask: Long)Boolean">sym</a> hasFlag Flags.<span title="Long(4L)">PRIVATE</span>) MethodAttributes.<span title="Short(1)">Private</span>
         <span class="keyword">else</span> MethodAttributes.<span title="Short(6)">Public</span>)

      <span title="Unit" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="#301467" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27073" title="=&gt; Boolean">isClassConstructor</a>) {
        <span title="Unit" class="keyword">if</span> (<a href="#301467" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27126" title="=&gt; Boolean">isStaticMember</a>)
          <a href="#301469" title="Int">mf</a> = <a href="#301469" title="(x$1: Short)Int">mf</a> | FieldAttributes.<span title="Short(16)">Static</span>
        <span class="keyword">else</span> {
          <a href="#301469" title="Int">mf</a> = <a href="#301469" title="(x$1: Short)Int">mf</a> | MethodAttributes.<span title="Short(64)">Virtual</span>
          <span title="Unit" class="keyword">if</span> (<a href="#301467" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27128" title="(x$1: Boolean)Boolean">isFinal</a> &amp;&amp; <span title="=&gt; Boolean">!</span><a href="../../symtab/clr/CLRTypes.scala.html#288345" title="(key: GenMSIL.this.global.loaders.clrTypes.global.Symbol)ch.epfl.lamp.compiler.msil.Type">types</a>(<a href="#301467" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27142" title="=&gt; GenMSIL.this.global.Symbol">owner</a>.<span title="[T0]T0">asInstanceOf</span><span title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">[</span>clrTypes.global.<a href="../../symtab/Symbols.scala.html#26286" title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">Symbol</a>]).<span title="()Boolean">IsInterface</span>)
            <a href="#301469" title="Int">mf</a> = <a href="#301469" title="(x$1: Short)Int">mf</a> | MethodAttributes.<span title="Short(32)">Final</span>
          <span title="Unit" class="keyword">if</span> (<a href="#301467" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27155" title="(mask: Long)Boolean">hasFlag</a><span title="(x$1: Boolean)Boolean">(</span>Flags.<span title="Long(16L)">DEFERRED</span>) || <a href="../../symtab/clr/CLRTypes.scala.html#288345" title="(key: GenMSIL.this.global.loaders.clrTypes.global.Symbol)ch.epfl.lamp.compiler.msil.Type">types</a>(<a href="#301467" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27142" title="=&gt; GenMSIL.this.global.Symbol">owner</a>.<span title="[T0]T0">asInstanceOf</span><span title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">[</span>clrTypes.global.<a href="../../symtab/Symbols.scala.html#26286" title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">Symbol</a>]).<span title="()Boolean">IsInterface</span>)
            <a href="#301469" title="Int">mf</a> = <a href="#301469" title="(x$1: Short)Int">mf</a> | MethodAttributes.<span title="Short(1024)">Abstract</span>
        }
      }

      <a href="#301469" title="Int">mf</a>.<span title="=&gt; Short">toShort</span>
    }

    <span class="keyword">def</span> <a title="(sym: GenMSIL.this.global.Symbol)Short" id="288593">msilFieldFlags</a>(<a title="GenMSIL.this.global.Symbol" id="301560">sym</a>: <a href="../../symtab/Symbols.scala.html#26286" title="GenMSIL.this.global.Symbol">Symbol</a>): <span title="Short">Short</span> = {
      <span class="keyword">var</span> <a title="Int" id="301562">mf</a>: <span title="Int">Int</span> =
        <span title="Int" class="keyword">if</span> (<a href="../../symtab/Symbols.scala.html#27155" title="(mask: Long)Boolean">sym</a> hasFlag Flags.<span title="Long(4L)">PRIVATE</span>) FieldAttributes.<span title="Int(1)">Private</span>
        <span class="keyword">else</span> <span title="Int" class="keyword">if</span> (<a href="../../symtab/Symbols.scala.html#27155" title="(mask: Long)Boolean">sym</a> hasFlag Flags.<span title="Long(1L)">PROTECTED</span>) FieldAttributes.<span title="Int(5)">FamORAssem</span>
        <span class="keyword">else</span> FieldAttributes.<span title="Int(6)">Public</span>

      <span title="Unit" class="keyword">if</span> (<a href="../../symtab/Symbols.scala.html#27155" title="(mask: Long)Boolean">sym</a> hasFlag Flags.<span title="Long(32L)">FINAL</span>)
        <a href="#301562" title="Int">mf</a> = <a href="#301562" title="(x$1: Short)Int">mf</a> | FieldAttributes.<span title="Short(32)">InitOnly</span>

      <span title="Unit" class="keyword">if</span> (<a href="#301560" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27126" title="=&gt; Boolean">isStaticMember</a>)
        <a href="#301562" title="Int">mf</a> = <a href="#301562" title="(x$1: Short)Int">mf</a> | FieldAttributes.<span title="Short(16)">Static</span>

      // TRANSIENT: &quot;not nerialized&quot;, VOLATILE: doesn't exist on .net
      // TODO: add this annotation also if the class has the custom attribute
      // System.NotSerializedAttribute
      <a href="#301560" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27013" title="=&gt; List[GenMSIL.this.global.AnnotationInfo]">annotations</a>.<span title="(f: (GenMSIL.this.global.AnnotationInfo) =&gt; Unit)Unit">foreach</span>( <a title="GenMSIL.this.global.AnnotationInfo" id="301606">a</a> =&gt; <a href="#301606" title="GenMSIL.this.global.AnnotationInfo">a</a> <span title="Unit" class="keyword">match</span> {
        <span title="Unit" class="keyword">case</span> AnnotationInfo(<a href="#288478" title="=&gt; GenMSIL.this.global.Type">TransientAtt</a>, _, _) =&gt;
          <a href="#301562" title="Int">mf</a> = <a href="#301562" title="(x$1: Short)Int">mf</a> | FieldAttributes.<span title="Short(128)">NotSerialized</span>
        <span title="Unit" class="keyword">case</span> _ =&gt; <span title="Unit">(</span>)
      })

      <a href="#301562" title="Int">mf</a>.<span title="=&gt; Short">toShort</span>
    }

    ////////////////////// builders, types ///////////////////////

    <span class="keyword">var</span> <a title="GenMSIL.this.global.Symbol" id="288595">entryPoint</a>: <a href="../../symtab/Symbols.scala.html#26286" title="GenMSIL.this.global.Symbol">Symbol</a> = _

    <span class="keyword">val</span> <a title="scala.collection.mutable.HashSet[GenMSIL.this.global.Symbol]" id="288597">notInitializedModules</a>: <span title="scala.collection.mutable.HashSet[GenMSIL.this.global.Symbol]">HashSet</span>[Symbol] = <span title="scala.collection.mutable.HashSet[GenMSIL.this.global.Symbol]" class="keyword">new</span> <span title="scala.collection.mutable.HashSet[GenMSIL.this.global.Symbol]">HashSet</span>()

    // TODO: create fields also in def createType, and not in genClass,
    // add a getField method (it only works as it is because fields never
    // accessed from outside a class)

    <span class="keyword">val</span> <a title="scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.Local,ch.epfl.lamp.compiler.msil.emit.LocalBuilder]" id="288599">localBuilders</a>: <span title="scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.Local,ch.epfl.lamp.compiler.msil.emit.LocalBuilder]">HashMap</span>[Local, LocalBuilder] = <span title="scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.Local,ch.epfl.lamp.compiler.msil.emit.LocalBuilder]" class="keyword">new</span> <span title="scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.Local,ch.epfl.lamp.compiler.msil.emit.LocalBuilder]">HashMap</span>()

    <span class="keyword">private</span>[GenMSIL] <span class="keyword">def</span> <a title="(cls: GenMSIL.this.global.icodes.IClass)Unit" id="288601">findEntryPoint</a>(<a title="GenMSIL.this.global.icodes.IClass" id="288643">cls</a>: <a href="../icode/Members.scala.html#46403" title="GenMSIL.this.global.icodes.IClass">IClass</a>) {
      <span class="keyword">def</span> <a title="(sym: GenMSIL.this.global.Symbol)Boolean" id="301632">isEntryPoint</a>(<a title="GenMSIL.this.global.Symbol" id="301633">sym</a>: <a href="../../symtab/Symbols.scala.html#26286" title="GenMSIL.this.global.Symbol">Symbol</a>):<span title="Boolean">Boolean</span> = {
        <span title="Unit" class="keyword">if</span> (<a href="#288611" title="(sym: GenMSIL.this.global.Symbol)Boolean">isStaticModule</a><span title="(x$1: Boolean)Boolean">(</span><a href="#301633" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27142" title="=&gt; GenMSIL.this.global.Symbol">owner</a>) &amp;&amp; <a href="#288590" title="(sym: GenMSIL.this.global.Symbol)String">msilName</a><span title="(x$1: AnyRef)Boolean">(</span><a href="#301633" title="GenMSIL.this.global.Symbol">sym</a>) == <span title="java.lang.String(&quot;main&quot;)" class="string">&quot;main&quot;</span>)
          <span title="Unit" class="keyword">if</span> (<a href="#301633" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27162" title="=&gt; GenMSIL.this.global.Type">tpe</a>.<a href="../../symtab/Types.scala.html#30386" title="=&gt; List[GenMSIL.this.global.Type]">paramTypes</a>.<span title="(x$1: Int)Boolean">length</span> == <span title="Int(1)" class="int">1</span>) {
            <a href="../icode/TypeKinds.scala.html#46463" title="(t: GenMSIL.this.global.icodes.global.Type)GenMSIL.this.global.icodes.TypeKind">toTypeKind</a>(<a href="#301633" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27162" title="=&gt; GenMSIL.this.global.Type">tpe</a>.<a href="../../symtab/Types.scala.html#30386" title="(n: Int)GenMSIL.this.global.Type">paramTypes</a>(<span title="Int(0)" class="int">0</span>)) <span title="Unit" class="keyword">match</span> {
              <span title="Unit" class="keyword">case</span> ARRAY(<a title="GenMSIL.this.global.icodes.TypeKind" id="301669">elem</a>) =&gt;
                <span title="Unit" class="keyword">if</span> (<a href="#301669" title="GenMSIL.this.global.icodes.TypeKind">elem</a>.<a href="../icode/TypeKinds.scala.html#60705" title="=&gt; GenMSIL.this.global.icodes.global.Type">toType</a>.<a href="../../symtab/Types.scala.html#30366" title="(x$1: AnyRef)Boolean">typeSymbol</a> == <a href="../../symtab/Definitions.scala.html#26638" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28519" title="=&gt; GenMSIL.this.global.Symbol">StringClass</a>){
                  <span title="Nothing" class="keyword">return</span> <span title="Boolean(true)" class="keyword">true</span>
                }
              <span title="Unit" class="keyword">case</span> _ =&gt; <span title="Unit">(</span>)
            }
          }
        <span title="Boolean(false)" class="keyword">false</span>
      }

      <span class="keyword">for</span> (<a title="GenMSIL.this.global.icodes.IMethod" id="301696">m</a> &lt;- <a href="#288643" title="GenMSIL.this.global.icodes.IClass">cls</a>.<a href="../icode/Members.scala.html#66947" title="(f: (GenMSIL.this.global.icodes.IMethod) =&gt; Unit)Unit">methods</a>) {
        <span title="Unit" class="keyword">if</span> (<a href="#301632" title="(sym: GenMSIL.this.global.Symbol)Boolean">isEntryPoint</a>(<a href="#301696" title="GenMSIL.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61494" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>)) {
          <span title="Unit" class="keyword">if</span> (<a href="#288595" title="(x$1: AnyRef)Boolean">entryPoint</a> == <span title="Null(null)" class="keyword">null</span>)
            <a href="#288595" title="(x$1: GenMSIL.this.global.Symbol)Unit">entryPoint</a> = <a href="#301696" title="GenMSIL.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61494" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>
        }
      }
      <span title="Unit" class="keyword">if</span> (<a href="#288505" title="(x$1: AnyRef)Boolean">firstSourceName</a> == <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>)
        <span title="Unit" class="keyword">if</span> (<a href="#288643" title="GenMSIL.this.global.icodes.IClass">cls</a>.<a href="../icode/Members.scala.html#66941" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>.<a href="../../symtab/Symbols.scala.html#27236" title="(x$1: AnyRef)Boolean">sourceFile</a> != <span title="Null(null)" class="keyword">null</span>) // is null for nested classes
          <a href="#288505" title="(x$1: java.lang.String)Unit">firstSourceName</a> = <a href="#288643" title="GenMSIL.this.global.icodes.IClass">cls</a>.<a href="../icode/Members.scala.html#66941" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>.<a href="../../symtab/Symbols.scala.html#27236" title="=&gt; scala.tools.nsc.io.AbstractFile">sourceFile</a>.<a href="../../io/AbstractFile.scala.html#51636" title="=&gt; String">name</a>
    }

    // #####################################################################
    // get and create types

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(t: GenMSIL.this.global.icodes.TypeKind)ch.epfl.lamp.compiler.msil.Type" id="288602">msilType</a>(<a title="GenMSIL.this.global.icodes.TypeKind" id="294075">t</a>: <a href="../icode/TypeKinds.scala.html#46431" title="GenMSIL.this.global.icodes.TypeKind">TypeKind</a>): <span title="ch.epfl.lamp.compiler.msil.Type">MsilType</span> = (<a href="#294075" title="GenMSIL.this.global.icodes.TypeKind">t</a>: @<a href="../icode/TypeKinds.scala.html#46431" title="GenMSIL.this.global.icodes.TypeKind @unchecked">unchecked</a>) <span title="ch.epfl.lamp.compiler.msil.Type" class="keyword">match</span> {
      <span title="ch.epfl.lamp.compiler.msil.Type" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46433" title="object GenMSIL.this.global.icodes.UNIT">UNIT</a>           =&gt; <a href="../../symtab/clr/CLRTypes.scala.html#288309" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MVOID</a>
      <span title="ch.epfl.lamp.compiler.msil.Type" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46435" title="object GenMSIL.this.global.icodes.BOOL">BOOL</a>           =&gt; <a href="../../symtab/clr/CLRTypes.scala.html#288306" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MBOOL</a>
      <span title="ch.epfl.lamp.compiler.msil.Type" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46437" title="object GenMSIL.this.global.icodes.BYTE">BYTE</a>           =&gt; <a href="../../symtab/clr/CLRTypes.scala.html#288276" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MBYTE</a>
      <span title="ch.epfl.lamp.compiler.msil.Type" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46439" title="object GenMSIL.this.global.icodes.SHORT">SHORT</a>          =&gt; <a href="../../symtab/clr/CLRTypes.scala.html#288279" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MSHORT</a>
      <span title="ch.epfl.lamp.compiler.msil.Type" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46441" title="object GenMSIL.this.global.icodes.CHAR">CHAR</a>           =&gt; <a href="../../symtab/clr/CLRTypes.scala.html#288285" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MCHAR</a>
      <span title="ch.epfl.lamp.compiler.msil.Type" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46443" title="object GenMSIL.this.global.icodes.INT">INT</a>            =&gt; <a href="../../symtab/clr/CLRTypes.scala.html#288288" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MINT</a>
      <span title="ch.epfl.lamp.compiler.msil.Type" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46445" title="object GenMSIL.this.global.icodes.LONG">LONG</a>           =&gt; <a href="../../symtab/clr/CLRTypes.scala.html#288294" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MLONG</a>
      <span title="ch.epfl.lamp.compiler.msil.Type" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46447" title="object GenMSIL.this.global.icodes.FLOAT">FLOAT</a>          =&gt; <a href="../../symtab/clr/CLRTypes.scala.html#288300" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MFLOAT</a>
      <span title="ch.epfl.lamp.compiler.msil.Type" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46449" title="object GenMSIL.this.global.icodes.DOUBLE">DOUBLE</a>         =&gt; <a href="../../symtab/clr/CLRTypes.scala.html#288303" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MDOUBLE</a>
      <span title="ch.epfl.lamp.compiler.msil.Type" class="keyword">case</span> REFERENCE(<a title="GenMSIL.this.global.icodes.global.Symbol" id="301730">cls</a>) =&gt; <a href="#288605" title="(sym: GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.Type">getType</a>(<a href="#301730" title="GenMSIL.this.global.icodes.global.Symbol">cls</a>)
      <span title="ch.epfl.lamp.compiler.msil.Type" class="keyword">case</span> ARRAY(<a title="GenMSIL.this.global.icodes.TypeKind" id="301736">elem</a>)    =&gt; <a href="../../symtab/SymbolLoaders.scala.html#109564" title="object GenMSIL.this.global.loaders.clrTypes">clrTypes</a>.<a href="../../symtab/clr/CLRTypes.scala.html#288361" title="(elemType: ch.epfl.lamp.compiler.msil.Type)ch.epfl.lamp.compiler.msil.Type">mkArrayType</a>(<a href="#288602" title="(t: GenMSIL.this.global.icodes.TypeKind)ch.epfl.lamp.compiler.msil.Type">msilType</a>(<a href="#301736" title="GenMSIL.this.global.icodes.TypeKind">elem</a>))
    }

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tpe: GenMSIL.this.global.Type)ch.epfl.lamp.compiler.msil.Type" id="288603">msilType</a>(<a title="GenMSIL.this.global.Type" id="294073">tpe</a>: <a href="../../symtab/Types.scala.html#26364" title="GenMSIL.this.global.Type">Type</a>): <span title="ch.epfl.lamp.compiler.msil.Type">MsilType</span> = <a href="#288602" title="(t: GenMSIL.this.global.icodes.TypeKind)ch.epfl.lamp.compiler.msil.Type">msilType</a>(<a href="../icode/TypeKinds.scala.html#46463" title="(t: GenMSIL.this.global.icodes.global.Type)GenMSIL.this.global.icodes.TypeKind">toTypeKind</a>(<a href="#294073" title="GenMSIL.this.global.Type">tpe</a>))

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: GenMSIL.this.global.Symbol)Array[ch.epfl.lamp.compiler.msil.Type]" id="288604">msilParamTypes</a>(<a title="GenMSIL.this.global.Symbol" id="301758">sym</a>: <a href="../../symtab/Symbols.scala.html#26286" title="GenMSIL.this.global.Symbol">Symbol</a>): <span title="Array[ch.epfl.lamp.compiler.msil.Type]">Array</span>[MsilType] = {
      <a href="#301758" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27162" title="=&gt; GenMSIL.this.global.Type">tpe</a>.<a href="../../symtab/Types.scala.html#30386" title="=&gt; List[GenMSIL.this.global.Type]">paramTypes</a>.<span title="(f: (GenMSIL.this.global.Type) =&gt; ch.epfl.lamp.compiler.msil.Type)(implicit bf: scala.collection.generic.BuilderFactory[ch.epfl.lamp.compiler.msil.Type,List[ch.epfl.lamp.compiler.msil.Type],List[GenMSIL.this.global.Type]])List[ch.epfl.lamp.compiler.msil.Type]">map</span><span title="scala.collection.generic.BuilderFactory[ch.epfl.lamp.compiler.msil.Type,List[ch.epfl.lamp.compiler.msil.Type],List#Coll]">(</span><a href="#288603" title="(tpe: GenMSIL.this.global.Type)ch.epfl.lamp.compiler.msil.Type">msilType</a>).<span title="(implicit evidence$1: scala.reflect.ClassManifest[ch.epfl.lamp.compiler.msil.Type])Array[ch.epfl.lamp.compiler.msil.Type]">toArray</span>
    }

    <span class="keyword">def</span> <a title="(sym: GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.Type" id="288605">getType</a>(<a title="GenMSIL.this.global.Symbol" id="293640">sym</a>: <a href="../../symtab/Symbols.scala.html#26286" title="GenMSIL.this.global.Symbol">Symbol</a>): <span title="ch.epfl.lamp.compiler.msil.Type">MsilType</span> = <a href="../../symtab/clr/CLRTypes.scala.html#288345" title="=&gt; scala.collection.mutable.Map[GenMSIL.this.global.loaders.clrTypes.global.Symbol,ch.epfl.lamp.compiler.msil.Type]">types</a>.<span title="(key: GenMSIL.this.global.loaders.clrTypes.global.Symbol)Option[ch.epfl.lamp.compiler.msil.Type]">get</span>(<a href="#293640" title="GenMSIL.this.global.Symbol">sym</a>.<span title="[T0]T0">asInstanceOf</span><span title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">[</span>clrTypes.global.<a href="../../symtab/Symbols.scala.html#26286" title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">Symbol</a>]) <span title="ch.epfl.lamp.compiler.msil.Type" class="keyword">match</span> {
      <span title="ch.epfl.lamp.compiler.msil.Type" class="keyword">case</span> Some(<a title="ch.epfl.lamp.compiler.msil.Type" id="301879">typ</a>) =&gt; <a href="#301879" title="ch.epfl.lamp.compiler.msil.Type">typ</a>
      <span title="ch.epfl.lamp.compiler.msil.Type" class="keyword">case</span> <span title="object None">None</span> =&gt;
        <span class="keyword">val</span> <a title="java.lang.String" id="301882">name</a> = <span title="java.lang.String" class="keyword">if</span> (<a href="#293640" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27093" title="(x$1: Boolean)Boolean">isModuleClass</a> &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#293640" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27082" title="=&gt; Boolean">isTrait</a>) <a href="#293640" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27248" title="(x$1: Any)java.lang.String">fullNameString</a> + <span title="java.lang.String(&quot;$&quot;)" class="string">&quot;$&quot;</span>
                   <span class="keyword">else</span> <a href="#293640" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27248" title="=&gt; String">fullNameString</a>
        <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.Type" id="301883">typ</a> = <a href="../../symtab/SymbolLoaders.scala.html#109564" title="object GenMSIL.this.global.loaders.clrTypes">clrTypes</a>.<a href="../../symtab/clr/CLRTypes.scala.html#288359" title="(name: String)ch.epfl.lamp.compiler.msil.Type">getType</a>(<a href="#301882" title="java.lang.String">name</a>)
        <span title="ch.epfl.lamp.compiler.msil.Type" class="keyword">if</span> (<a href="#301883" title="(x$1: AnyRef)Boolean">typ</a> == <span title="Null(null)" class="keyword">null</span>)
          <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.Error" class="keyword">new</span> <span title="java.lang.Error">Error</span>(<a href="#288637" title="(sym: GenMSIL.this.global.Symbol)String">showsym</a><span title="(x$1: Any)java.lang.String">(</span><a href="#293640" title="GenMSIL.this.global.Symbol">sym</a>) <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; with name &quot;)" class="string">&quot; with name &quot;</span> + <a href="#301882" title="java.lang.String">name</a>)
        <span class="keyword">else</span> {
          <a href="../../symtab/SymbolLoaders.scala.html#109564" title="object GenMSIL.this.global.loaders.clrTypes">clrTypes</a>.<a href="../../symtab/clr/CLRTypes.scala.html#288345" title="(key: GenMSIL.this.global.loaders.clrTypes.global.Symbol,value: ch.epfl.lamp.compiler.msil.Type)Unit">types</a>(<a href="#293640" title="GenMSIL.this.global.Symbol">sym</a>.<span title="[T0]T0">asInstanceOf</span><span title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">[</span>clrTypes.global.<a href="../../symtab/Symbols.scala.html#26286" title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">Symbol</a>]) = <a href="#301883" title="ch.epfl.lamp.compiler.msil.Type">typ</a>
          <a href="#301883" title="ch.epfl.lamp.compiler.msil.Type">typ</a>
        }
    }

    <span class="keyword">def</span> <a title="(sym: GenMSIL.this.global.Symbol,mType: ch.epfl.lamp.compiler.msil.Type)Unit" id="288606">mapType</a>(<a title="GenMSIL.this.global.Symbol" id="290079">sym</a>: <a href="../../symtab/Symbols.scala.html#26286" title="GenMSIL.this.global.Symbol">Symbol</a>, <a title="ch.epfl.lamp.compiler.msil.Type" id="290080">mType</a>: <span title="ch.epfl.lamp.compiler.msil.Type">MsilType</span>) {
      <span title="(assertion: Boolean,message: =&gt; Any)Unit">assert</span>(<a href="#290080" title="(x$1: AnyRef)Boolean">mType</a> != <span title="Null(null)" class="keyword">null</span>, <a href="#288637" title="(sym: GenMSIL.this.global.Symbol)String">showsym</a>(<a href="#290079" title="GenMSIL.this.global.Symbol">sym</a>))
      <a href="../../symtab/clr/CLRTypes.scala.html#288345" title="(key: GenMSIL.this.global.loaders.clrTypes.global.Symbol,value: ch.epfl.lamp.compiler.msil.Type)Unit">types</a>(<a href="#290079" title="GenMSIL.this.global.Symbol">sym</a>.<span title="[T0]T0">asInstanceOf</span><span title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">[</span>clrTypes.global.<a href="../../symtab/Symbols.scala.html#26286" title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">Symbol</a>]) = <a href="#290080" title="ch.epfl.lamp.compiler.msil.Type">mType</a>
    }

    <span class="keyword">def</span> <a title="(iclass: GenMSIL.this.global.icodes.IClass)Unit" id="288607">createTypeBuilder</a>(<a title="GenMSIL.this.global.icodes.IClass" id="288658">iclass</a>: <a href="../icode/Members.scala.html#46403" title="GenMSIL.this.global.icodes.IClass">IClass</a>) {
      <span class="keyword">def</span> <a title="(sym: GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.Type" id="301936">msilTypeFromSym</a>(<a title="GenMSIL.this.global.Symbol" id="301942">sym</a>: <a href="../../symtab/Symbols.scala.html#26286" title="GenMSIL.this.global.Symbol">Symbol</a>): <span title="ch.epfl.lamp.compiler.msil.Type">MsilType</span> = {
	<a href="../../symtab/clr/CLRTypes.scala.html#288345" title="=&gt; scala.collection.mutable.Map[GenMSIL.this.global.loaders.clrTypes.global.Symbol,ch.epfl.lamp.compiler.msil.Type]">types</a>.<span title="(key: GenMSIL.this.global.loaders.clrTypes.global.Symbol)Option[ch.epfl.lamp.compiler.msil.Type]">get</span>(<a href="#301942" title="GenMSIL.this.global.Symbol">sym</a>.<span title="[T0]T0">asInstanceOf</span><span title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">[</span>clrTypes.global.<a href="../../symtab/Symbols.scala.html#26286" title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">Symbol</a>]) <span title="ch.epfl.lamp.compiler.msil.Type" class="keyword">match</span> {
          <span title="ch.epfl.lamp.compiler.msil.Type" class="keyword">case</span> Some(<a title="ch.epfl.lamp.compiler.msil.Type" id="301947">mtype</a>) =&gt; <a href="#301947" title="ch.epfl.lamp.compiler.msil.Type">mtype</a>
          <span title="ch.epfl.lamp.compiler.msil.Type" class="keyword">case</span> <span title="object None">None</span> =&gt; <a href="#288607" title="(iclass: GenMSIL.this.global.icodes.IClass)Unit">createTypeBuilder</a>(<a href="../icode/ICodes.scala.html#46378" title="(key: GenMSIL.this.global.icodes.global.Symbol)GenMSIL.this.global.icodes.IClass">classes</a>(<a href="#301942" title="GenMSIL.this.global.Symbol">sym</a>)); <a href="../../symtab/clr/CLRTypes.scala.html#288345" title="(key: GenMSIL.this.global.loaders.clrTypes.global.Symbol)ch.epfl.lamp.compiler.msil.Type">types</a>(<a href="#301942" title="GenMSIL.this.global.Symbol">sym</a>.<span title="[T0]T0">asInstanceOf</span><span title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">[</span>clrTypes.global.<a href="../../symtab/Symbols.scala.html#26286" title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">Symbol</a>])
        }
      }

      <span class="keyword">val</span> <a title="GenMSIL.this.global.icodes.global.Symbol" id="301937">sym</a> = <a href="#288658" title="GenMSIL.this.global.icodes.IClass">iclass</a>.<a href="../icode/Members.scala.html#66941" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>
      <span title="Unit" class="keyword">if</span> (<a href="../../symtab/clr/CLRTypes.scala.html#288345" title="(key: GenMSIL.this.global.loaders.clrTypes.global.Symbol)Boolean">types</a> contains <a href="#301937" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>.<span title="[T0]T0">asInstanceOf</span><span title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">[</span>clrTypes.global.<a href="../../symtab/Symbols.scala.html#26286" title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">Symbol</a>]) <span title="Nothing" class="keyword">return</span>

      <span class="keyword">def</span> <a title="(s: GenMSIL.this.global.Symbol)Boolean" id="301938">isInterface</a>(<a title="GenMSIL.this.global.Symbol" id="301984">s</a>: <a href="../../symtab/Symbols.scala.html#26286" title="GenMSIL.this.global.Symbol">Symbol</a>) = <a href="#301984" title="GenMSIL.this.global.Symbol">s</a>.<a href="../../symtab/Symbols.scala.html#27082" title="(x$1: Boolean)Boolean">isTrait</a> &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#301984" title="GenMSIL.this.global.Symbol">s</a>.<a href="../../symtab/Symbols.scala.html#27120" title="=&gt; Boolean">isImplClass</a>
      <span class="keyword">val</span> <a title="List[GenMSIL.this.global.Type]" id="301939">parents</a>: <span title="List[GenMSIL.this.global.Type]">List</span>[Type] =
        <span title="List[GenMSIL.this.global.Type]" class="keyword">if</span> (<a href="#301937" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27163" title="=&gt; GenMSIL.this.global.icodes.global.Type">info</a>.<a href="../../symtab/Types.scala.html#30375" title="=&gt; List[GenMSIL.this.global.icodes.global.Type]">parents</a>.<span title="=&gt; Boolean">isEmpty</span>) <span title="(xs: GenMSIL.this.global.Type*)List[GenMSIL.this.global.Type]">List</span>(<a href="../../symtab/Definitions.scala.html#26638" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28453" title="=&gt; GenMSIL.this.global.Symbol">ObjectClass</a>.<a href="../../symtab/Symbols.scala.html#27162" title="=&gt; GenMSIL.this.global.Type">tpe</a>)
        <span class="keyword">else</span> <a href="#301937" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27163" title="=&gt; GenMSIL.this.global.icodes.global.Type">info</a>.<a href="../../symtab/Types.scala.html#30375" title="=&gt; List[GenMSIL.this.global.icodes.global.Type]">parents</a>.<a title="=&gt; List[GenMSIL.this.global.icodes.global.Type]" id="25786">removeDuplicates</a>

      <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.Type" id="301940">superType</a> = <span title="ch.epfl.lamp.compiler.msil.Type" class="keyword">if</span> (<a href="#301938" title="(s: GenMSIL.this.global.Symbol)Boolean">isInterface</a>(<a href="#301937" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>)) <span title="Null(null)" class="keyword">null</span> <span class="keyword">else</span> <a href="#301936" title="(sym: GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.Type">msilTypeFromSym</a>(<a href="#301939" title="List[GenMSIL.this.global.Type]">parents</a>.<span title="=&gt; GenMSIL.this.global.Type">head</span>.<a href="../../symtab/Types.scala.html#30366" title="=&gt; GenMSIL.this.global.Symbol">typeSymbol</a>)
      <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37988" title="=&gt; Boolean">value</a>)
        <a href="../../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;super type: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#301939" title="(n: Int)GenMSIL.this.global.Type">parents</a>(<span title="Int(0)" class="int">0</span>).<a href="../../symtab/Types.scala.html#30366" title="=&gt; GenMSIL.this.global.Symbol">typeSymbol</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;, msil type: &quot;)" class="string">&quot;, msil type: &quot;</span> + <a href="#301940" title="ch.epfl.lamp.compiler.msil.Type">superType</a>)

      <span class="keyword">val</span> <a title="Array[ch.epfl.lamp.compiler.msil.Type]" id="301941">interfaces</a>: <span title="Array[ch.epfl.lamp.compiler.msil.Type]">Array</span>[MsilType] =
	<a href="#301939" title="List[GenMSIL.this.global.Type]">parents</a>.<a title="=&gt; List[GenMSIL.this.global.Type]" id="25477">tail</a>.<span title="(f: (GenMSIL.this.global.Type) =&gt; ch.epfl.lamp.compiler.msil.Type)(implicit bf: scala.collection.generic.BuilderFactory[ch.epfl.lamp.compiler.msil.Type,List[ch.epfl.lamp.compiler.msil.Type],List[GenMSIL.this.global.Type]])List[ch.epfl.lamp.compiler.msil.Type]">map</span><span title="scala.collection.generic.BuilderFactory[ch.epfl.lamp.compiler.msil.Type,List[ch.epfl.lamp.compiler.msil.Type],List#Coll]">(</span><a title="GenMSIL.this.global.Type" id="302028">p</a> =&gt; <a href="#301936" title="(sym: GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.Type">msilTypeFromSym</a>(<a href="#302028" title="GenMSIL.this.global.Type">p</a>.<a href="../../symtab/Types.scala.html#30366" title="=&gt; GenMSIL.this.global.Symbol">typeSymbol</a>)).<span title="(implicit evidence$1: scala.reflect.ClassManifest[ch.epfl.lamp.compiler.msil.Type])Array[ch.epfl.lamp.compiler.msil.Type]">toArray</span>
      <span title="Unit" class="keyword">if</span> (<a href="#301939" title="List[GenMSIL.this.global.Type]">parents</a>.<span title="(x$1: Int)Boolean">length</span> &gt; <span title="Int(1)" class="int">1</span>) {
        <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37988" title="=&gt; Boolean">value</a>){
          <a href="../../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="java.lang.String(&quot;interfaces:&quot;)" class="string">&quot;interfaces:&quot;</span>)
          <span class="keyword">for</span> (<a title="Int" id="302172">i</a> &lt;- <span title="implicit scala.Predef.intWrapper : (x: Int)scala.runtime.RichInt" class="int">0</span>.<span title="(end: Int)Range">until</span><span title="(f: (Int) =&gt; Unit)Unit">(</span><a href="#301941" title="Array[ch.epfl.lamp.compiler.msil.Type]">interfaces</a>.<span title="=&gt; Int">length</span>)){
            <a href="../../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;  type: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#301939" title="(n: Int)GenMSIL.this.global.Type">parents</a>(<a href="#302172" title="(x$1: Int)Int">i</a> + <span title="Int(1)" class="int">1</span>).<a href="../../symtab/Types.scala.html#30366" title="=&gt; GenMSIL.this.global.Symbol">typeSymbol</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;, msil type: &quot;)" class="string">&quot;, msil type: &quot;</span> + <a href="#301941" title="(i: Int)ch.epfl.lamp.compiler.msil.Type">interfaces</a>(<a href="#302172" title="Int">i</a>))
          }
        }
      }

      <span title="Unit" class="keyword">if</span> (<a href="#301937" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27132" title="=&gt; Boolean">isNestedClass</a>) {
	<span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder" id="302224">ownerT</a> = <a href="#301936" title="(sym: GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.Type">msilTypeFromSym</a>(<a href="#301937" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27142" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">owner</a>).<span title="[T0]T0">asInstanceOf</span><span title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">[</span><span title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">TypeBuilder</span>]
	<span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder" id="302225">tBuilder</a> =
	  <a href="#302224" title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">ownerT</a>.<a title="(name: String,attributes: int,baseType: ch.epfl.lamp.compiler.msil.Type,interfaces: Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.emit.TypeBuilder" id="289947">DefineNestedType</a>(<a href="#288590" title="(sym: GenMSIL.this.global.Symbol)String">msilName</a>(<a href="#301937" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>), <a href="#288591" title="(sym: GenMSIL.this.global.Symbol)Int">msilTypeFlags</a>(<a href="#301937" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>), <a href="#301940" title="ch.epfl.lamp.compiler.msil.Type">superType</a>, <a href="#301941" title="Array[ch.epfl.lamp.compiler.msil.Type]">interfaces</a>)
	<a href="#288606" title="(sym: GenMSIL.this.global.Symbol,mType: ch.epfl.lamp.compiler.msil.Type)Unit">mapType</a>(<a href="#301937" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>, <a href="#302225" title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">tBuilder</a>)
      } <span class="keyword">else</span> {
	<span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder" id="302236">tBuilder</a> =
          <a href="#288496" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ModuleBuilder">mmodule</a>.<span title="(typeName: String,attributes: Int,baseType: ch.epfl.lamp.compiler.msil.Type,interfaces: Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.emit.TypeBuilder">DefineType</span>(<a href="#288590" title="(sym: GenMSIL.this.global.Symbol)String">msilName</a>(<a href="#301937" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>), <a href="#288591" title="(sym: GenMSIL.this.global.Symbol)Int">msilTypeFlags</a>(<a href="#301937" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>), <a href="#301940" title="ch.epfl.lamp.compiler.msil.Type">superType</a>, <a href="#301941" title="Array[ch.epfl.lamp.compiler.msil.Type]">interfaces</a>)
	<a href="#288606" title="(sym: GenMSIL.this.global.Symbol,mType: ch.epfl.lamp.compiler.msil.Type)Unit">mapType</a>(<a href="#301937" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>, <a href="#302236" title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">tBuilder</a>)
      }
    } // createTypeBuilder

    <span class="keyword">def</span> <a title="(iclass: GenMSIL.this.global.icodes.IClass)Unit" id="288608">createClassMembers</a>(<a title="GenMSIL.this.global.icodes.IClass" id="288670">iclass</a>: <a href="../icode/Members.scala.html#46403" title="GenMSIL.this.global.icodes.IClass">IClass</a>) {
      <span class="keyword">try</span> {
        <a href="#288609" title="(iclass: GenMSIL.this.global.icodes.IClass)Unit">createClassMembers0</a>(<a href="#288670" title="GenMSIL.this.global.icodes.IClass">iclass</a>)
      }
      <span class="keyword">catch</span> {
        <span title="Nothing" class="keyword">case</span> <a title="java.lang.Throwable" id="302261">e</a>: <a title="Throwable" id="1908">Throwable</a> =&gt;
          <span title="object java.lang.System">System</span>.<span title="java.io.PrintStream">err</span>.<span title="(x$1: java.lang.String)Unit">println</span>(<a href="#288637" title="(sym: GenMSIL.this.global.Symbol)String">showsym</a>(<a href="#288670" title="GenMSIL.this.global.icodes.IClass">iclass</a>.<a href="../icode/Members.scala.html#66941" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>))
          <span title="object java.lang.System">System</span>.<span title="java.io.PrintStream">err</span>.<span title="(x$1: java.lang.String)Unit">println</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;with methods = &quot;</span> + <a href="#288670" title="GenMSIL.this.global.icodes.IClass">iclass</a>.<a href="../icode/Members.scala.html#66947" title="=&gt; List[GenMSIL.this.global.icodes.IMethod]">methods</a>)
          <span title="Nothing" class="keyword">throw</span> <a href="#302261" title="java.lang.Throwable">e</a>
      }
    }

    <span class="keyword">def</span> <a title="(iclass: GenMSIL.this.global.icodes.IClass)Unit" id="288609">createClassMembers0</a>(<a title="GenMSIL.this.global.icodes.IClass" id="302257">iclass</a>: <a href="../icode/Members.scala.html#46403" title="GenMSIL.this.global.icodes.IClass">IClass</a>) {
      <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder" id="302278">mtype</a> = <a href="#288605" title="(sym: GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.Type">getType</a>(<a href="#302257" title="GenMSIL.this.global.icodes.IClass">iclass</a>.<a href="../icode/Members.scala.html#66941" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>).<span title="[T0]T0">asInstanceOf</span><span title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">[</span><span title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">TypeBuilder</span>]
      <span class="keyword">for</span> (<a title="GenMSIL.this.global.icodes.IField" id="302298">ifield</a> &lt;- <a href="#302257" title="GenMSIL.this.global.icodes.IClass">iclass</a>.<a href="../icode/Members.scala.html#66944" title="(f: (GenMSIL.this.global.icodes.IField) =&gt; Unit)Unit">fields</a>) {
        <span class="keyword">val</span> <a title="GenMSIL.this.global.icodes.global.Symbol" id="302299">sym</a> = <a href="#302298" title="GenMSIL.this.global.icodes.IField">ifield</a>.<a href="../icode/Members.scala.html#67412" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>
        <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37988" title="=&gt; Boolean">value</a>)
          <a href="../../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Adding field: &quot;</span> + <a href="#302299" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27248" title="=&gt; String">fullNameString</a>)

        <span class="keyword">var</span> <a title="Short" id="302300">attributes</a> = <a href="#288593" title="(sym: GenMSIL.this.global.Symbol)Short">msilFieldFlags</a>(<a href="#302299" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>)
        <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.FieldBuilder" id="302301">fBuilder</a> = <a href="#302278" title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">mtype</a>.<span title="(name: String,type: ch.epfl.lamp.compiler.msil.Type,attrs: short)ch.epfl.lamp.compiler.msil.emit.FieldBuilder">DefineField</span>(<a href="#288590" title="(sym: GenMSIL.this.global.Symbol)String">msilName</a>(<a href="#302299" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>), <a href="#288603" title="(tpe: GenMSIL.this.global.Type)ch.epfl.lamp.compiler.msil.Type">msilType</a>(<a href="#302299" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27162" title="=&gt; GenMSIL.this.global.icodes.global.Type">tpe</a>), <a href="#302300" title="Short">attributes</a>)
        <a href="../../symtab/clr/CLRTypes.scala.html#288351" title="(key: GenMSIL.this.global.loaders.clrTypes.global.Symbol,value: ch.epfl.lamp.compiler.msil.FieldInfo)Unit">fields</a>(<a href="#302299" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>.<span title="[T0]T0">asInstanceOf</span><span title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">[</span>clrTypes.global.<a href="../../symtab/Symbols.scala.html#26286" title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">Symbol</a>]) = <a href="#302301" title="ch.epfl.lamp.compiler.msil.emit.FieldBuilder">fBuilder</a>
        <a href="#288518" title="(member: ch.epfl.lamp.compiler.msil.emit.ICustomAttributeSetter,annotations: List[GenMSIL.this.global.AnnotationInfo])Unit">addAttributes</a>(<a href="#302301" title="ch.epfl.lamp.compiler.msil.emit.FieldBuilder">fBuilder</a>, <a href="#302299" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27013" title="=&gt; List[GenMSIL.this.global.icodes.global.AnnotationInfo]">annotations</a>)
      }

      <span title="Unit" class="keyword">if</span> (<a href="#302257" title="GenMSIL.this.global.icodes.IClass">iclass</a>.<a href="../icode/Members.scala.html#66941" title="(x$1: AnyRef)Boolean">symbol</a> != <a href="../../symtab/Definitions.scala.html#26638" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28579" title="=&gt; GenMSIL.this.global.Symbol">ArrayClass</a>)
      <span class="keyword">for</span> (<a title="GenMSIL.this.global.icodes.IMethod" id="302355">m</a>: <a href="../icode/Members.scala.html#46405" title="GenMSIL.this.global.icodes.IMethod">IMethod</a> &lt;- <a href="#302257" title="GenMSIL.this.global.icodes.IClass">iclass</a>.<a href="../icode/Members.scala.html#66947" title="(f: (GenMSIL.this.global.icodes.IMethod) =&gt; Unit)Unit">methods</a>) {
        <span class="keyword">val</span> <a title="GenMSIL.this.global.icodes.global.Symbol" id="302356">sym</a> = <a href="#302355" title="GenMSIL.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61494" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>
        <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37988" title="=&gt; Boolean">value</a>)
          <a href="../../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Creating MethodBuilder for &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="../../symtab/Flags.scala.html#10482" title="object scala.tools.nsc.symtab.Flags">Flags</a>.<a href="../../symtab/Flags.scala.html#29000" title="(flags: Long)String">flagsToString</a>(<a href="#302356" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27150" title="=&gt; Long">flags</a>) <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; &quot;)" class="string">&quot; &quot;</span> <span title="(x$1: Any)java.lang.String">+</span>
              <a href="#302356" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27142" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">owner</a>.<a href="../../symtab/Symbols.scala.html#27248" title="=&gt; String">fullNameString</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;::&quot;)" class="string">&quot;::&quot;</span> + <a href="#302356" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27147" title="=&gt; GenMSIL.this.global.icodes.global.Name">name</a>)

        <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder" id="302357">ownerType</a> = <a href="#288605" title="(sym: GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.Type">getType</a>(<a href="#302356" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27190" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">enclClass</a>).<span title="[T0]T0">asInstanceOf</span><span title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">[</span><span title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">TypeBuilder</span>]
        <span title="(assertion: Boolean,message: =&gt; Any)Unit">assert</span>(<a href="#302278" title="(x$1: AnyRef)Boolean">mtype</a> == <a href="#302357" title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">ownerType</a>, <span title="(x$1: Any)java.lang.String" class="string">&quot;mtype = &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#302278" title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">mtype</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;; ownerType = &quot;)" class="string">&quot;; ownerType = &quot;</span> + <a href="#302357" title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">ownerType</a>)
        <span class="keyword">var</span> <a title="Array[ch.epfl.lamp.compiler.msil.Type]" id="302358">paramTypes</a> = <a href="#288604" title="(sym: GenMSIL.this.global.Symbol)Array[ch.epfl.lamp.compiler.msil.Type]">msilParamTypes</a>(<a href="#302356" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>)
        <span class="keyword">val</span> <a title="Short" id="302359">attr</a> = <a href="#288592" title="(sym: GenMSIL.this.global.Symbol)Short">msilMethodFlags</a>(<a href="#302356" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>)

        <span title="Unit" class="keyword">if</span> (<a href="#302355" title="GenMSIL.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61494" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>.<a href="../../symtab/Symbols.scala.html#27073" title="=&gt; Boolean">isClassConstructor</a>) {
          <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.ConstructorBuilder" id="302406">constr</a> =
            <a href="#302357" title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">ownerType</a>.<span title="(attrs: short,callingConvention: short,paramTypes: Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.emit.ConstructorBuilder">DefineConstructor</span>(<a href="#302359" title="Short">attr</a>, CallingConventions.<span title="Short(1)">Standard</span>, <a href="#302358" title="Array[ch.epfl.lamp.compiler.msil.Type]">paramTypes</a>)
          <span class="keyword">for</span> (<a title="Int" id="302451">i</a> &lt;- <span title="implicit scala.Predef.intWrapper : (x: Int)scala.runtime.RichInt" class="int">0</span>.<span title="(end: Int)Range">until</span><span title="(f: (Int) =&gt; ch.epfl.lamp.compiler.msil.emit.ParameterBuilder)Unit">(</span><a href="#302358" title="Array[ch.epfl.lamp.compiler.msil.Type]">paramTypes</a>.<span title="=&gt; Int">length</span>)) {
            <a href="#302406" title="ch.epfl.lamp.compiler.msil.emit.ConstructorBuilder">constr</a>.<a title="(pos: int,attr: int,name: String)ch.epfl.lamp.compiler.msil.emit.ParameterBuilder" id="293896">DefineParameter</a>(<a href="#302451" title="Int">i</a>, ParameterAttributes.<span title="Int(0)">None</span>, <a href="#288590" title="(sym: GenMSIL.this.global.Symbol)String">msilName</a>(<a href="#302355" title="GenMSIL.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61518" title="(n: Int)GenMSIL.this.global.icodes.Local">params</a>(<a href="#302451" title="Int">i</a>).<a href="../icode/Members.scala.html#61020" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">sym</a>))
          }
          <a href="#288628" title="(sym: GenMSIL.this.global.Symbol,cInfo: ch.epfl.lamp.compiler.msil.ConstructorInfo)Unit">mapConstructor</a>(<a href="#302356" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>, <a href="#302406" title="ch.epfl.lamp.compiler.msil.emit.ConstructorBuilder">constr</a>)
          <a href="#288518" title="(member: ch.epfl.lamp.compiler.msil.emit.ICustomAttributeSetter,annotations: List[GenMSIL.this.global.AnnotationInfo])Unit">addAttributes</a>(<a href="#302406" title="ch.epfl.lamp.compiler.msil.emit.ConstructorBuilder">constr</a>, <a href="#302356" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27013" title="=&gt; List[GenMSIL.this.global.icodes.global.AnnotationInfo]">annotations</a>)
        } <span class="keyword">else</span> {
          <span class="keyword">var</span> <a title="ch.epfl.lamp.compiler.msil.Type" id="302481">resType</a> = <a href="#288602" title="(t: GenMSIL.this.global.icodes.TypeKind)ch.epfl.lamp.compiler.msil.Type">msilType</a>(<a href="#302355" title="GenMSIL.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61509" title="=&gt; GenMSIL.this.global.icodes.TypeKind">returnType</a>)
          <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.MethodBuilder" id="302482">method</a> =
            <a href="#302357" title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">ownerType</a>.<span title="(name: String,attrs: short,returnType: ch.epfl.lamp.compiler.msil.Type,paramTypes: Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.emit.MethodBuilder">DefineMethod</span>(<a href="#288636" title="(methodSym: GenMSIL.this.global.Symbol)String">getMethodName</a>(<a href="#302356" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>), <a href="#302359" title="Short">attr</a>, <a href="#302481" title="ch.epfl.lamp.compiler.msil.Type">resType</a>, <a href="#302358" title="Array[ch.epfl.lamp.compiler.msil.Type]">paramTypes</a>)
          <span class="keyword">for</span> (<a title="Int" id="302531">i</a> &lt;- <span title="implicit scala.Predef.intWrapper : (x: Int)scala.runtime.RichInt" class="int">0</span>.<span title="(end: Int)Range">until</span><span title="(f: (Int) =&gt; ch.epfl.lamp.compiler.msil.emit.ParameterBuilder)Unit">(</span><a href="#302358" title="Array[ch.epfl.lamp.compiler.msil.Type]">paramTypes</a>.<span title="=&gt; Int">length</span>)){
            <a href="#302482" title="ch.epfl.lamp.compiler.msil.emit.MethodBuilder">method</a>.<span title="(pos: Int,attr: Int,name: String)ch.epfl.lamp.compiler.msil.emit.ParameterBuilder">DefineParameter</span>(<a href="#302531" title="Int">i</a>, ParameterAttributes.<span title="Int(0)">None</span>, <a href="#288590" title="(sym: GenMSIL.this.global.Symbol)String">msilName</a>(<a href="#302355" title="GenMSIL.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61518" title="(n: Int)GenMSIL.this.global.icodes.Local">params</a>(<a href="#302531" title="Int">i</a>).<a href="../icode/Members.scala.html#61020" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">sym</a>))
          }
          <span title="Unit" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="../../symtab/clr/CLRTypes.scala.html#288349" title="=&gt; scala.collection.mutable.Map[GenMSIL.this.global.loaders.clrTypes.global.Symbol,ch.epfl.lamp.compiler.msil.MethodInfo]">methods</a>.<span title="(key: GenMSIL.this.global.loaders.clrTypes.global.Symbol)Boolean">contains</span>(<a href="#302356" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>.<span title="[T0]T0">asInstanceOf</span><span title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">[</span>clrTypes.global.<a href="../../symtab/Symbols.scala.html#26286" title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">Symbol</a>]))
            <a href="#288630" title="(sym: GenMSIL.this.global.Symbol,mInfo: ch.epfl.lamp.compiler.msil.MethodInfo)Unit">mapMethod</a>(<a href="#302356" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>, <a href="#302482" title="ch.epfl.lamp.compiler.msil.emit.MethodBuilder">method</a>)
          <a href="#288518" title="(member: ch.epfl.lamp.compiler.msil.emit.ICustomAttributeSetter,annotations: List[GenMSIL.this.global.AnnotationInfo])Unit">addAttributes</a>(<a href="#302482" title="ch.epfl.lamp.compiler.msil.emit.MethodBuilder">method</a>, <a href="#302356" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27013" title="=&gt; List[GenMSIL.this.global.icodes.global.AnnotationInfo]">annotations</a>)
          <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37988" title="=&gt; Boolean">value</a>)
            <a href="../../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;\t created MethodBuilder &quot;</span> + <a href="#302482" title="ch.epfl.lamp.compiler.msil.emit.MethodBuilder">method</a>)
        }
      }

      <span title="Unit" class="keyword">if</span> (<a href="#288611" title="(sym: GenMSIL.this.global.Symbol)Boolean">isStaticModule</a>(<a href="#302257" title="GenMSIL.this.global.icodes.IClass">iclass</a>.<a href="../icode/Members.scala.html#66941" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>)) {
        <a href="#288613" title="(sym: GenMSIL.this.global.Symbol)Unit">addModuleInstanceField</a>(<a href="#302257" title="GenMSIL.this.global.icodes.IClass">iclass</a>.<a href="../icode/Members.scala.html#66941" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>)
        <a href="#288597" title="(elem: GenMSIL.this.global.Symbol)BytecodeGenerator.this.notInitializedModules.type">notInitializedModules</a> += <a href="#302257" title="GenMSIL.this.global.icodes.IClass">iclass</a>.<a href="../icode/Members.scala.html#66941" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>
        <a href="#288615" title="(sym: GenMSIL.this.global.Symbol)Unit">addStaticInit</a>(<a href="#302257" title="GenMSIL.this.global.icodes.IClass">iclass</a>.<a href="../icode/Members.scala.html#66941" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>)
      }

    } // createClassMembers

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: GenMSIL.this.global.Symbol)Boolean" id="288610">isTopLevelModule</a>(<a title="GenMSIL.this.global.Symbol" id="293760">sym</a>: <a href="../../symtab/Symbols.scala.html#26286" title="GenMSIL.this.global.Symbol">Symbol</a>): <span title="Boolean">Boolean</span> =
      <a href="../../symtab/SymbolTable.scala.html#26256" title="(ph: scala.tools.nsc.Phase)(op: =&gt; Boolean)Boolean">atPhase</a> (<a href="../../Global.scala.html#39408" title="=&gt; GenMSIL.this.global.Run">currentRun</a>.<a href="../../Global.scala.html#40424" title="=&gt; scala.tools.nsc.Phase">refchecksPhase</a>) {
        <a href="#293760" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27093" title="(x$1: Boolean)Boolean">isModuleClass</a> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#293760" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27120" title="=&gt; Boolean">isImplClass</a> &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#293760" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27132" title="=&gt; Boolean">isNestedClass</a>
      }

    // if the module is lifted it does not need to be initialized in
    // its static constructor, and the MODULE$ field is not required.
    // the outer class will care about it.
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: GenMSIL.this.global.Symbol)Boolean" id="288611">isStaticModule</a>(<a title="GenMSIL.this.global.Symbol" id="298529">sym</a>: <a href="../../symtab/Symbols.scala.html#26286" title="GenMSIL.this.global.Symbol">Symbol</a>): <span title="Boolean">Boolean</span> = {
      // .net inner classes: removed '!sym.hasFlag(Flags.LIFTED)', added
      // 'sym.isStatic'. -&gt; no longer compatible without skipping flatten!
      <a href="#298529" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27093" title="(x$1: Boolean)Boolean">isModuleClass</a> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> <a href="#298529" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27125" title="=&gt; Boolean">isStatic</a> &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#298529" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27120" title="=&gt; Boolean">isImplClass</a>
    }

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: GenMSIL.this.global.Symbol)Boolean" id="288612">isCloneable</a>(<a title="GenMSIL.this.global.Symbol" id="293644">sym</a>: <a href="../../symtab/Symbols.scala.html#26286" title="GenMSIL.this.global.Symbol">Symbol</a>): <span title="Boolean">Boolean</span> = {
      <span title="=&gt; Boolean">!</span><a href="#293644" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27013" title="=&gt; List[GenMSIL.this.global.AnnotationInfo]">annotations</a>.<span title="(p: (GenMSIL.this.global.AnnotationInfo) =&gt; Boolean)Boolean">forall</span>( <a title="GenMSIL.this.global.AnnotationInfo" id="302632">a</a> =&gt; <a href="#302632" title="GenMSIL.this.global.AnnotationInfo">a</a> <span title="Boolean" class="keyword">match</span> {
        <span title="Boolean(false)" class="keyword">case</span> AnnotationInfo(<a href="#288476" title="=&gt; GenMSIL.this.global.Type">CloneableAttr</a>, _, _) =&gt; <span title="Boolean(false)" class="keyword">false</span>
        <span title="Boolean(true)" class="keyword">case</span> _ =&gt; <span title="Boolean(true)" class="keyword">true</span>
      })
    }

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: GenMSIL.this.global.Symbol)Unit" id="288613">addModuleInstanceField</a>(<a title="GenMSIL.this.global.Symbol" id="302570">sym</a>: <a href="../../symtab/Symbols.scala.html#26286" title="GenMSIL.this.global.Symbol">Symbol</a>) {
      <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37988" title="=&gt; Boolean">value</a>)
        <a href="../../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Adding Module-Instance Field for &quot;</span> + <a href="#288637" title="(sym: GenMSIL.this.global.Symbol)String">showsym</a>(<a href="#302570" title="GenMSIL.this.global.Symbol">sym</a>))
      <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder" id="302640">tBuilder</a> = <a href="#288605" title="(sym: GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.Type">getType</a>(<a href="#302570" title="GenMSIL.this.global.Symbol">sym</a>).<span title="[T0]T0">asInstanceOf</span><span title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">[</span><span title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">TypeBuilder</span>]
      <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.FieldBuilder" id="302641">fb</a> = <a href="#302640" title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">tBuilder</a>.<span title="(name: String,type: ch.epfl.lamp.compiler.msil.Type,attrs: short)ch.epfl.lamp.compiler.msil.emit.FieldBuilder">DefineField</span>(<a href="#288420" title="=&gt; java.lang.String">MODULE_INSTANCE_NAME</a>,
                           <a href="#302640" title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">tBuilder</a>,
                           (FieldAttributes.Public <span title="Int(22)">|</span>
                            //FieldAttributes.InitOnly |
                            FieldAttributes.Static).<span title="=&gt; Short">toShort</span>)
      <a href="../../symtab/clr/CLRTypes.scala.html#288351" title="(key: GenMSIL.this.global.loaders.clrTypes.global.Symbol,value: ch.epfl.lamp.compiler.msil.FieldInfo)Unit">fields</a>(<a href="#302570" title="GenMSIL.this.global.Symbol">sym</a>.<span title="[T0]T0">asInstanceOf</span><span title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">[</span>clrTypes.global.<a href="../../symtab/Symbols.scala.html#26286" title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">Symbol</a>]) = <a href="#302641" title="ch.epfl.lamp.compiler.msil.emit.FieldBuilder">fb</a>
    }


    // the symbol may be a object-symbol (module-symbol), or a module-class-symbol
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.FieldInfo" id="288614">getModuleInstanceField</a>(<a title="GenMSIL.this.global.Symbol" id="291848">sym</a>: <a href="../../symtab/Symbols.scala.html#26286" title="GenMSIL.this.global.Symbol">Symbol</a>): <span title="ch.epfl.lamp.compiler.msil.FieldInfo">FieldInfo</span> = {
      <span title="(assertion: Boolean,message: =&gt; Any)Unit">assert</span>(<a href="#291848" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27076" title="(x$1: Boolean)Boolean">isModule</a> || <a href="#291848" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27093" title="=&gt; Boolean">isModuleClass</a>, <span title="(x$1: Any)java.lang.String" class="string">&quot;Expected module: &quot;</span> + <a href="#288637" title="(sym: GenMSIL.this.global.Symbol)String">showsym</a>(<a href="#291848" title="GenMSIL.this.global.Symbol">sym</a>))

      // when called by LOAD_MODULE, the corresponding type maybe doesn't
      // exist yet -&gt; make a getType
      <span class="keyword">val</span> <a title="GenMSIL.this.global.Symbol" id="302664">moduleClassSym</a> = <span title="GenMSIL.this.global.Symbol" class="keyword">if</span> (<a href="#291848" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27076" title="=&gt; Boolean">isModule</a>) <a href="#291848" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27218" title="=&gt; GenMSIL.this.global.Symbol">moduleClass</a> <span class="keyword">else</span> <a href="#291848" title="GenMSIL.this.global.Symbol">sym</a>

      // TODO: get module field for modules not defined in the
      // source currently compiling (e.g. Console)

      <a href="../../symtab/clr/CLRTypes.scala.html#288351" title="(key: GenMSIL.this.global.loaders.clrTypes.global.Symbol)Option[ch.epfl.lamp.compiler.msil.FieldInfo]">fields</a> get <a href="#302664" title="GenMSIL.this.global.Symbol">moduleClassSym</a>.<span title="[T0]T0">asInstanceOf</span><span title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">[</span>clrTypes.global.<a href="../../symtab/Symbols.scala.html#26286" title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">Symbol</a>] <span title="ch.epfl.lamp.compiler.msil.FieldInfo" class="keyword">match</span> {
        <span title="ch.epfl.lamp.compiler.msil.FieldInfo" class="keyword">case</span> Some(<a title="ch.epfl.lamp.compiler.msil.FieldInfo" id="302683">sym</a>) =&gt; <a href="#302683" title="ch.epfl.lamp.compiler.msil.FieldInfo">sym</a>
        <span title="ch.epfl.lamp.compiler.msil.FieldInfo" class="keyword">case</span> <span title="object None">None</span> =&gt;
          //val mclass = types(moduleClassSym)
          <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.Type" id="302686">mClass</a> = <a href="../../symtab/SymbolLoaders.scala.html#109564" title="object GenMSIL.this.global.loaders.clrTypes">clrTypes</a>.<a href="../../symtab/clr/CLRTypes.scala.html#288359" title="(name: String)ch.epfl.lamp.compiler.msil.Type">getType</a>(<a href="#302664" title="GenMSIL.this.global.Symbol">moduleClassSym</a>.<a href="../../symtab/Symbols.scala.html#27248" title="(x$1: Any)java.lang.String">fullNameString</a> + <span title="java.lang.String(&quot;$&quot;)" class="string">&quot;$&quot;</span>)
          <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.FieldInfo" id="302687">mfield</a> = <a href="#302686" title="ch.epfl.lamp.compiler.msil.Type">mClass</a>.<span title="(x$1: java.lang.String)ch.epfl.lamp.compiler.msil.FieldInfo">GetField</span>(<span title="java.lang.String(&quot;MODULE$&quot;)" class="string">&quot;MODULE$&quot;</span>)
          <span title="(assertion: Boolean,message: =&gt; Any)Unit">assert</span>(<a href="#302687" title="(x$1: AnyRef)Boolean" id="6613">mfield</a> ne <span title="Null(null)" class="keyword">null</span>, <span title="(x$1: Any)java.lang.String" class="string">&quot;module not found &quot;</span> + <a href="#288637" title="(sym: GenMSIL.this.global.Symbol)String">showsym</a>(<a href="#302664" title="GenMSIL.this.global.Symbol">moduleClassSym</a>))
          <a href="../../symtab/clr/CLRTypes.scala.html#288351" title="(key: GenMSIL.this.global.loaders.clrTypes.global.Symbol,value: ch.epfl.lamp.compiler.msil.FieldInfo)Unit">fields</a>(<a href="#302664" title="GenMSIL.this.global.Symbol">moduleClassSym</a>.<span title="[T0]T0">asInstanceOf</span><span title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">[</span>clrTypes.global.<a href="../../symtab/Symbols.scala.html#26286" title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">Symbol</a>]) = <a href="#302687" title="ch.epfl.lamp.compiler.msil.FieldInfo">mfield</a>
          <a href="#302687" title="ch.epfl.lamp.compiler.msil.FieldInfo">mfield</a>
      }

      //fields(moduleClassSym)
    }

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: GenMSIL.this.global.Symbol)Unit" id="288615">addStaticInit</a>(<a title="GenMSIL.this.global.Symbol" id="302605">sym</a>: <a href="../../symtab/Symbols.scala.html#26286" title="GenMSIL.this.global.Symbol">Symbol</a>) {
      <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder" id="302716">tBuilder</a> = <a href="#288605" title="(sym: GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.Type">getType</a>(<a href="#302605" title="GenMSIL.this.global.Symbol">sym</a>).<span title="[T0]T0">asInstanceOf</span><span title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">[</span><span title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">TypeBuilder</span>]

      <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.ConstructorBuilder" id="302717">staticInit</a> = <a href="#302716" title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">tBuilder</a>.<span title="(attrs: short,callingConvention: short,paramTypes: Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.emit.ConstructorBuilder">DefineConstructor</span>(
        (MethodAttributes.Static <span title="Int(22)">|</span> MethodAttributes.Public).<span title="=&gt; Short">toShort</span>,
        CallingConventions.<span title="Short(1)">Standard</span>,
        <span title="object ch.epfl.lamp.compiler.msil.Type">MsilType</span>.<span title="Array[ch.epfl.lamp.compiler.msil.Type]">EmptyTypes</span>)

      <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.ILGenerator" id="302718">sicode</a> = <a href="#302717" title="ch.epfl.lamp.compiler.msil.emit.ConstructorBuilder">staticInit</a>.<span title="()ch.epfl.lamp.compiler.msil.emit.ILGenerator">GetILGenerator</span>()

      <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.ConstructorInfo" id="302719">instanceConstructor</a> = <a href="../../symtab/clr/CLRTypes.scala.html#288347" title="(key: GenMSIL.this.global.loaders.clrTypes.global.Symbol)ch.epfl.lamp.compiler.msil.ConstructorInfo">constructors</a>(<a href="#302605" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27192" title="=&gt; GenMSIL.this.global.Symbol">primaryConstructor</a>.<span title="[T0]T0">asInstanceOf</span><span title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">[</span>clrTypes.global.<a href="../../symtab/Symbols.scala.html#26286" title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">Symbol</a>])

      // there are no constructor parameters. assuming the constructor takes no parameter
      // is fine: we call (in the static constructor) the constructor of the module class,
      // which takes no arguments - an object definition cannot take constructor arguments.
      <a href="#302718" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">sicode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.ConstructorInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Newobj</span>, <a href="#302719" title="ch.epfl.lamp.compiler.msil.ConstructorInfo">instanceConstructor</a>)
      // the stsfld is done in the instance constructor, just after the super call.
      <a href="#302718" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">sicode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Pop</span>)

      <a href="#302718" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">sicode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ret</span>)
    }

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: GenMSIL.this.global.Symbol)Unit" id="288616">dumpMirrorClass</a>(<a title="GenMSIL.this.global.Symbol" id="293783">sym</a>: <a href="../../symtab/Symbols.scala.html#26286" title="GenMSIL.this.global.Symbol">Symbol</a>) {
      <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.Type" id="302764">tBuilder</a> = <a href="#288605" title="(sym: GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.Type">getType</a>(<a href="#293783" title="GenMSIL.this.global.Symbol">sym</a>)
      <span title="(assertion: Boolean,message: =&gt; Any)Unit">assert</span>(<a href="#293783" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27093" title="=&gt; Boolean">isModuleClass</a>, <span title="(x$1: Any)java.lang.String" class="string">&quot;Can't generate Mirror-Class for the Non-Module class &quot;</span> + <a href="#293783" title="GenMSIL.this.global.Symbol">sym</a>)
      <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37988" title="=&gt; Boolean">value</a>)
        <a href="../../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Dumping mirror class for object: &quot;</span> + <a href="#293783" title="GenMSIL.this.global.Symbol">sym</a>)
      <span class="keyword">val</span> <a title="String" id="302765">moduleName</a> = <a href="#288590" title="(sym: GenMSIL.this.global.Symbol)String">msilName</a>(<a href="#293783" title="GenMSIL.this.global.Symbol">sym</a>)
      <span class="keyword">val</span> <a title="java.lang.String" id="302766">mirrorName</a> = <a href="#302765" title="String">moduleName</a>.<span title="(x$1: Int,x$2: Int)java.lang.String">substring</span>(<span title="Int(0)" class="int">0</span>, <a href="#302765" title="String">moduleName</a>.<span title="()Int">length</span><span title="(x$1: Int)Int">(</span>) - <span title="Int(1)" class="int">1</span>)
      <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder" id="302767">mirrorTypeBuilder</a> = <a href="#288496" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ModuleBuilder">mmodule</a>.<span title="(typeName: String,attributes: Int,baseType: ch.epfl.lamp.compiler.msil.Type,interfaces: Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.emit.TypeBuilder">DefineType</span>(<a href="#302766" title="java.lang.String">mirrorName</a>,
                                                 TypeAttributes.Class |
                                                 TypeAttributes.Public <span title="Int(257)">|</span>
                                                 TypeAttributes.Sealed,
                //FIXME: an object may have a super-type (a class, not an object) -&gt; not in mirror class?
                                                 <a href="../../symtab/clr/CLRTypes.scala.html#288318" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MOBJECT</a>,
                                                 <span title="object ch.epfl.lamp.compiler.msil.Type">MsilType</span>.<span title="Array[ch.epfl.lamp.compiler.msil.Type]">EmptyTypes</span>)

      <span class="keyword">val</span> <a title="GenMSIL.this.global.icodes.IClass" id="302768">iclass</a> = <a href="../icode/ICodes.scala.html#46378" title="(key: GenMSIL.this.global.icodes.global.Symbol)GenMSIL.this.global.icodes.IClass">classes</a>(<a href="#293783" title="GenMSIL.this.global.Symbol">sym</a>)

      <span class="keyword">for</span> (<a title="GenMSIL.this.global.Symbol" id="302899">m</a> &lt;- <a href="#293783" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27162" title="=&gt; GenMSIL.this.global.Type">tpe</a>.<a href="../../symtab/Types.scala.html#30400" title="(f: (GenMSIL.this.global.Symbol) =&gt; Unit)Unit">nonPrivateMembers</a>
           <span class="keyword">if</span> <a href="#302899" title="GenMSIL.this.global.Symbol">m</a>.<a href="../../symtab/Symbols.scala.html#27142" title="(x$1: AnyRef)Boolean">owner</a> <span title="(x$1: Boolean)Boolean">!=</span> <a href="../../symtab/Definitions.scala.html#26638" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28453" title="=&gt; GenMSIL.this.global.Symbol">ObjectClass</a> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#302899" title="GenMSIL.this.global.Symbol">m</a>.<a href="../../symtab/Symbols.scala.html#27155" title="(mask: Long)Boolean">hasFlag</a>(Flags.<span title="Long(1L)">PROTECTED</span>) <span title="(x$1: Boolean)Boolean">&amp;&amp;</span>
           <a href="#302899" title="GenMSIL.this.global.Symbol">m</a>.<a href="../../symtab/Symbols.scala.html#27069" title="=&gt; Boolean">isMethod</a> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#302899" title="GenMSIL.this.global.Symbol">m</a>.<a href="../../symtab/Symbols.scala.html#27073" title="=&gt; Boolean">isClassConstructor</a> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#302899" title="GenMSIL.this.global.Symbol">m</a>.<a href="../../symtab/Symbols.scala.html#27126" title="=&gt; Boolean">isStaticMember</a> &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#302899" title="GenMSIL.this.global.Symbol">m</a>.<a href="../../symtab/Symbols.scala.html#27155" title="(mask: Long)Boolean">hasFlag</a>(Flags.<span title="Long(2048L)">CASE</span>))
        {
          <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37988" title="=&gt; Boolean">value</a>)
            <a href="../../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;   Mirroring method: &quot;</span> + <a href="#302899" title="GenMSIL.this.global.Symbol">m</a>)
          <span class="keyword">val</span> <a title="Array[ch.epfl.lamp.compiler.msil.Type]" id="302900">paramTypes</a> = <a href="#288604" title="(sym: GenMSIL.this.global.Symbol)Array[ch.epfl.lamp.compiler.msil.Type]">msilParamTypes</a>(<a href="#302899" title="GenMSIL.this.global.Symbol">m</a>)
          <span class="keyword">val</span> <a title="Array[String]" id="302901">paramNames</a>: <span title="Array[String]">Array</span>[String] = <span title="Array[String]" class="keyword">new</span> <span title="Array[String]">Array</span>[String](<a href="#302900" title="Array[ch.epfl.lamp.compiler.msil.Type]">paramTypes</a>.<span title="=&gt; Int">length</span>)
          <span class="keyword">for</span> (<a title="Int" id="302952">i</a> &lt;- <span title="(end: Int)Range" class="int">0</span> <span title="(f: (Int) =&gt; Unit)Unit">until</span> <a href="#302900" title="Array[ch.epfl.lamp.compiler.msil.Type]">paramTypes</a>.<span title="=&gt; Int">length</span>)
            <a href="#302901" title="(i: Int,x: String)Unit">paramNames</a>(<a href="#302952" title="Int">i</a>) = <span title="(x$1: Any)java.lang.String" class="string">&quot;x_&quot;</span> + <a href="#302952" title="Int">i</a>

          // CHECK: verify if getMethodName is better than msilName
          <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.MethodBuilder" id="302902">mirrorMethod</a> = <a href="#302767" title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">mirrorTypeBuilder</a>.<span title="(name: String,attrs: short,returnType: ch.epfl.lamp.compiler.msil.Type,paramTypes: Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.emit.MethodBuilder">DefineMethod</span>(<a href="#288636" title="(methodSym: GenMSIL.this.global.Symbol)String">getMethodName</a>(<a href="#302899" title="GenMSIL.this.global.Symbol">m</a>),
                                                            MethodAttributes.Public <span title="Short(22)">|</span>
                                                            MethodAttributes.Static,
                                                            <a href="#288603" title="(tpe: GenMSIL.this.global.Type)ch.epfl.lamp.compiler.msil.Type">msilType</a>(<a href="#302899" title="GenMSIL.this.global.Symbol">m</a>.<a href="../../symtab/Symbols.scala.html#27162" title="=&gt; GenMSIL.this.global.Type">tpe</a>.<a href="../../symtab/Types.scala.html#30379" title="=&gt; GenMSIL.this.global.Type">resultType</a>),
                                                            <a href="#302900" title="Array[ch.epfl.lamp.compiler.msil.Type]">paramTypes</a>)

          <span class="keyword">var</span> <a title="Int" id="302903">i</a> = <span title="Int(0)" class="int">0</span>
          <span title="Unit" class="keyword">while</span> (<a href="#302903" title="(x$1: Int)Boolean">i</a> &lt; <a href="#302900" title="Array[ch.epfl.lamp.compiler.msil.Type]">paramTypes</a>.<span title="=&gt; Int">length</span>) <a href="#302905" title="()Unit">{</a>
            <a href="#302902" title="ch.epfl.lamp.compiler.msil.emit.MethodBuilder">mirrorMethod</a>.<span title="(pos: Int,attr: Int,name: String)ch.epfl.lamp.compiler.msil.emit.ParameterBuilder">DefineParameter</span>(<a href="#302903" title="Int">i</a>, ParameterAttributes.<span title="Int(0)">None</span>, <a href="#302901" title="(i: Int)String">paramNames</a>(<a href="#302903" title="Int">i</a>))
            <a href="#302903" title="Int">i</a> += <span title="Int(1)" class="int">1</span>
          }

          <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.ILGenerator" id="302904">mirrorCode</a> = <a href="#302902" title="ch.epfl.lamp.compiler.msil.emit.MethodBuilder">mirrorMethod</a>.<span title="()ch.epfl.lamp.compiler.msil.emit.ILGenerator">GetILGenerator</span>()
          <a href="#302904" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">mirrorCode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.FieldInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ldsfld</span>, <a href="#288614" title="(sym: GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.FieldInfo">getModuleInstanceField</a>(<a href="#293783" title="GenMSIL.this.global.Symbol">sym</a>))
          <span title="implicit scala.Predef.intWrapper : (x: Int)scala.runtime.RichInt" class="int">0</span>.<span title="(end: Int)Range">until</span><span title="(f: (Int) =&gt; Unit)Unit">(</span><a href="#302900" title="Array[ch.epfl.lamp.compiler.msil.Type]">paramTypes</a>.<span title="=&gt; Int">length</span>) foreach <a href="#288582" title="(code: ch.epfl.lamp.compiler.msil.emit.ILGenerator)(i: Int)Unit">loadArg</a><a href="#303113" title="Int">(</a><a href="#302904" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">mirrorCode</a>)

          <a href="#302904" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">mirrorCode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.MethodInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Callvirt</span>, <a href="#288629" title="(sym: GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.MethodInfo">getMethod</a>(<a href="#302899" title="GenMSIL.this.global.Symbol">m</a>))
          <a href="#302904" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">mirrorCode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ret</span>)
        }

      <a href="#288517" title="(sym: GenMSIL.this.global.Symbol,tBuilder: ch.epfl.lamp.compiler.msil.emit.TypeBuilder)Unit">addSymtabAttribute</a>(<a href="#293783" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27217" title="=&gt; GenMSIL.this.global.Symbol">sourceModule</a>, <a href="#302767" title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">mirrorTypeBuilder</a>)

      <a href="#302767" title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">mirrorTypeBuilder</a>.<span title="()ch.epfl.lamp.compiler.msil.Type">CreateType</span>()
      <a href="#302767" title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">mirrorTypeBuilder</a>.<span title="(sourceFilepath: String)Unit">setSourceFilepath</span>(<a href="#302768" title="GenMSIL.this.global.icodes.IClass">iclass</a>.<a href="../icode/Members.scala.html#66950" title="=&gt; GenMSIL.this.global.icodes.global.CompilationUnit">cunit</a>.<a href="../../CompilationUnits.scala.html#45663" title="=&gt; scala.tools.nsc.util.SourceFile">source</a>.<a href="../../util/SourceFile.scala.html#68479" title="=&gt; scala.tools.nsc.io.AbstractFile">file</a>.<a href="../../io/AbstractFile.scala.html#51637" title="=&gt; String">path</a>)
    }


    // #####################################################################
    // delegate callers

    <span class="keyword">var</span> <a title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder" id="288618">delegateCallers</a>: <span title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">TypeBuilder</span> = _
    <span class="keyword">var</span> <a title="Int" id="288621">nbDelegateCallers</a>: <span title="Int">Int</span> = <span title="Int(0)" class="int">0</span>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="()Unit" id="288623">initDelegateCallers</a>() = {
      <a href="#288618" title="(x$1: ch.epfl.lamp.compiler.msil.emit.TypeBuilder)Unit">delegateCallers</a> = <a href="#288496" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ModuleBuilder">mmodule</a>.<a title="(typeName: String,attributes: Int)ch.epfl.lamp.compiler.msil.emit.TypeBuilder" id="289601">DefineType</a>(<span title="java.lang.String(&quot;$DelegateCallers&quot;)" class="string">&quot;$DelegateCallers&quot;</span>, TypeAttributes.Public <span title="Int(257)">|</span>
                                          TypeAttributes.Sealed)
    }

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(functionType: GenMSIL.this.global.Type,delegateType: GenMSIL.this.global.Type)Unit" id="288624">createDelegateCaller</a>(<a title="GenMSIL.this.global.Type" id="298799">functionType</a>: <a href="../../symtab/Types.scala.html#26364" title="GenMSIL.this.global.Type">Type</a>, <a title="GenMSIL.this.global.Type" id="298800">delegateType</a>: <a href="../../symtab/Types.scala.html#26364" title="GenMSIL.this.global.Type">Type</a>) = {
      <span title="Unit" class="keyword">if</span> (<a href="#288618" title="(x$1: AnyRef)Boolean">delegateCallers</a> == <span title="Null(null)" class="keyword">null</span>)
        <a href="#288623" title="()Unit">initDelegateCallers</a>()
      // create a field an store the function-object
      <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.Type" id="298803">mFunctionType</a>: <span title="ch.epfl.lamp.compiler.msil.Type">MsilType</span> = <a href="#288603" title="(tpe: GenMSIL.this.global.Type)ch.epfl.lamp.compiler.msil.Type">msilType</a>(<a href="#298799" title="GenMSIL.this.global.Type">functionType</a>)
      <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.FieldBuilder" id="298804">anonfunField</a>: <a title="ch.epfl.lamp.compiler.msil.emit.FieldBuilder" id="288204">FieldBuilder</a> = <a href="#288618" title="=&gt; ch.epfl.lamp.compiler.msil.emit.TypeBuilder">delegateCallers</a>.<span title="(name: String,type: ch.epfl.lamp.compiler.msil.Type,attrs: short)ch.epfl.lamp.compiler.msil.emit.FieldBuilder">DefineField</span>(
        <span title="(x$1: Any)java.lang.String" class="string">&quot;$anonfunField$$&quot;</span> + <a href="#288621" title="=&gt; Int">nbDelegateCallers</a>, <a href="#298803" title="ch.epfl.lamp.compiler.msil.Type">mFunctionType</a>,
        FieldAttributes.InitOnly | FieldAttributes.Public <span title="Short(54)">|</span> FieldAttributes.Static)
      <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.FieldInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Stsfld</span>, <a href="#298804" title="ch.epfl.lamp.compiler.msil.emit.FieldBuilder">anonfunField</a>)


      // create the static caller method and the delegate object
      <span class="keyword">val</span> <a href="#298806" title="(List[GenMSIL.this.global.Symbol], GenMSIL.this.global.Type)">(</a><a href="#298805" title="List[GenMSIL.this.global.Symbol]" id="298806">params</a>, <a href="#298805" title="GenMSIL.this.global.Type" id="298807">returnType</a>) = <a href="#298800" title="GenMSIL.this.global.Type">delegateType</a>.<a href="../../symtab/Types.scala.html#30403" title="(name: GenMSIL.this.global.Name)GenMSIL.this.global.Symbol">member</a>(<a href="../../symtab/StdNames.scala.html#26690" title="object GenMSIL.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#30014" title="=&gt; GenMSIL.this.global.Name">apply</a>).<a href="../../symtab/Symbols.scala.html#27162" title="=&gt; GenMSIL.this.global.Type">tpe</a> <span title="(List[GenMSIL.this.global.Symbol], GenMSIL.this.global.Type)" class="keyword">match</span> {
        <span title="(List[GenMSIL.this.global.Symbol], GenMSIL.this.global.Type)" class="keyword">case</span> MethodType(<a title="List[GenMSIL.this.global.Symbol]" id="298949">delParams</a>, <a title="GenMSIL.this.global.Type" id="298950">delReturn</a>) =&gt; <span title="(_1: List[GenMSIL.this.global.Symbol],_2: GenMSIL.this.global.Type)(List[GenMSIL.this.global.Symbol], GenMSIL.this.global.Type)">(</span><a href="#298949" title="List[GenMSIL.this.global.Symbol]">delParams</a>, <a href="#298950" title="GenMSIL.this.global.Type">delReturn</a>)
        <span title="Nothing" class="keyword">case</span> _ =&gt; <a href="../../Global.scala.html#39309" title="(msg: String)Nothing">abort</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;not a delegate type: &quot;</span>  + <a href="#298800" title="GenMSIL.this.global.Type">delegateType</a>)
      }
      <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.MethodBuilder" id="298808">caller</a>: <span title="ch.epfl.lamp.compiler.msil.emit.MethodBuilder">MethodBuilder</span> = <a href="#288618" title="=&gt; ch.epfl.lamp.compiler.msil.emit.TypeBuilder">delegateCallers</a>.<span title="(name: String,attrs: short,returnType: ch.epfl.lamp.compiler.msil.Type,paramTypes: Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.emit.MethodBuilder">DefineMethod</span>(
        <span title="(x$1: Any)java.lang.String" class="string">&quot;$delegateCaller$$&quot;</span> + <a href="#288621" title="=&gt; Int">nbDelegateCallers</a>,
        MethodAttributes.Final | MethodAttributes.Public <span title="Short(54)">|</span> MethodAttributes.Static,
        <a href="#288603" title="(tpe: GenMSIL.this.global.Type)ch.epfl.lamp.compiler.msil.Type">msilType</a>(<a href="#298807" title="GenMSIL.this.global.Type">returnType</a>), (<a href="#298806" title="(f: (GenMSIL.this.global.Symbol) =&gt; GenMSIL.this.global.Type)(implicit bf: scala.collection.generic.BuilderFactory[GenMSIL.this.global.Type,List[GenMSIL.this.global.Type],List[GenMSIL.this.global.Symbol]])List[GenMSIL.this.global.Type]">params</a> <span title="scala.collection.generic.BuilderFactory[GenMSIL.this.global.Type,List[GenMSIL.this.global.Type],List#Coll]">map</span> (<a href="#299028" title="GenMSIL.this.global.Symbol">_</a>.<a href="../../symtab/Symbols.scala.html#27162" title="=&gt; GenMSIL.this.global.Type">tpe</a>)).<span title="(f: (GenMSIL.this.global.Type) =&gt; ch.epfl.lamp.compiler.msil.Type)(implicit bf: scala.collection.generic.BuilderFactory[ch.epfl.lamp.compiler.msil.Type,List[ch.epfl.lamp.compiler.msil.Type],List[GenMSIL.this.global.Type]])List[ch.epfl.lamp.compiler.msil.Type]">map</span><span title="scala.collection.generic.BuilderFactory[ch.epfl.lamp.compiler.msil.Type,List[ch.epfl.lamp.compiler.msil.Type],List#Coll]">(</span><a href="#288603" title="(tpe: GenMSIL.this.global.Type)ch.epfl.lamp.compiler.msil.Type">msilType</a>).<span title="(implicit evidence$1: scala.reflect.ClassManifest[ch.epfl.lamp.compiler.msil.Type])Array[ch.epfl.lamp.compiler.msil.Type]">toArray</span>)
      <span class="keyword">for</span> (<a title="Int" id="299260">i</a> &lt;- <span title="(end: Int)Range" class="int">0</span> <span title="(f: (Int) =&gt; ch.epfl.lamp.compiler.msil.emit.ParameterBuilder)Unit">until</span> <a href="#298806" title="List[GenMSIL.this.global.Symbol]">params</a>.<span title="=&gt; Int">length</span>)
        <a href="#298808" title="ch.epfl.lamp.compiler.msil.emit.MethodBuilder">caller</a>.<span title="(pos: Int,attr: Int,name: String)ch.epfl.lamp.compiler.msil.emit.ParameterBuilder">DefineParameter</span>(<a href="#299260" title="Int">i</a>, ParameterAttributes.<span title="Int(0)">None</span>, <span title="(x$1: Any)java.lang.String" class="string">&quot;arg&quot;</span> + <a href="#299260" title="Int">i</a>) // FIXME: use name of parameter symbol 
      <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.ConstructorInfo" id="298809">delegCtor</a> = <a href="#288603" title="(tpe: GenMSIL.this.global.Type)ch.epfl.lamp.compiler.msil.Type">msilType</a>(<a href="#298800" title="GenMSIL.this.global.Type">delegateType</a>).<span title="(x$1: Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.ConstructorInfo">GetConstructor</span>(<span title="(xs: ch.epfl.lamp.compiler.msil.Type*)(implicit evidence$2: scala.reflect.ClassManifest[ch.epfl.lamp.compiler.msil.Type])Array[ch.epfl.lamp.compiler.msil.Type]">Array</span><span title="(clazz: Class[_])scala.reflect.ClassManifest[ch.epfl.lamp.compiler.msil.Type]">(</span><a href="../../symtab/clr/CLRTypes.scala.html#288318" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MOBJECT</a>, <a href="#288445" title="=&gt; ch.epfl.lamp.compiler.msil.Type">INT_PTR</a>))
      <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ldnull</span>)
      <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.MethodInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ldftn</span>, <a href="#298808" title="ch.epfl.lamp.compiler.msil.emit.MethodBuilder">caller</a>)
      <a href="#288499" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.ConstructorInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Newobj</span>, <a href="#298809" title="ch.epfl.lamp.compiler.msil.ConstructorInfo">delegCtor</a>)


      // create the static caller method body
      <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.MethodInfo" id="298810">functionApply</a>: <span title="ch.epfl.lamp.compiler.msil.MethodInfo">MethodInfo</span> = <a href="#288629" title="(sym: GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.MethodInfo">getMethod</a>(<a href="#298799" title="GenMSIL.this.global.Type">functionType</a>.<a href="../../symtab/Types.scala.html#30403" title="(name: GenMSIL.this.global.Name)GenMSIL.this.global.Symbol">member</a>(<a href="../../symtab/StdNames.scala.html#26690" title="object GenMSIL.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#30014" title="=&gt; GenMSIL.this.global.Name">apply</a>))
      <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.ILGenerator" id="298811">dcode</a>: <span title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">ILGenerator</span> = <a href="#298808" title="ch.epfl.lamp.compiler.msil.emit.MethodBuilder">caller</a>.<span title="()ch.epfl.lamp.compiler.msil.emit.ILGenerator">GetILGenerator</span>()
      <a href="#298811" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">dcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.FieldInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ldsfld</span>, <a href="#298804" title="ch.epfl.lamp.compiler.msil.emit.FieldBuilder">anonfunField</a>)
      <span class="keyword">for</span> (<a title="Int" id="299447">i</a> &lt;- <span title="(end: Int)Range" class="int">0</span> <span title="(f: (Int) =&gt; Unit)Unit">until</span> <a href="#298806" title="List[GenMSIL.this.global.Symbol]">params</a>.<span title="=&gt; Int">length</span>) {
        <a href="#288582" title="(code: ch.epfl.lamp.compiler.msil.emit.ILGenerator)(i: Int)Unit">loadArg</a>(<a href="#298811" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">dcode</a>)(<a href="#299447" title="Int">i</a>)
        <a href="#288625" title="(code: ch.epfl.lamp.compiler.msil.emit.ILGenerator,boxType: GenMSIL.this.global.icodes.TypeKind)Unit">emitBox</a>(<a href="#298811" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">dcode</a>, <a href="../icode/TypeKinds.scala.html#46463" title="(t: GenMSIL.this.global.icodes.global.Type)GenMSIL.this.global.icodes.TypeKind">toTypeKind</a>(<a href="#298806" title="(n: Int)GenMSIL.this.global.Symbol">params</a>(<a href="#299447" title="Int">i</a>).<a href="../../symtab/Symbols.scala.html#27162" title="=&gt; GenMSIL.this.global.Type">tpe</a>))
      }
      <a href="#298811" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">dcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.MethodInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Callvirt</span>, <a href="#298810" title="ch.epfl.lamp.compiler.msil.MethodInfo">functionApply</a>)
      <a href="#288626" title="(code: ch.epfl.lamp.compiler.msil.emit.ILGenerator,boxType: GenMSIL.this.global.icodes.TypeKind)Unit">emitUnbox</a>(<a href="#298811" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">dcode</a>, <a href="../icode/TypeKinds.scala.html#46463" title="(t: GenMSIL.this.global.icodes.global.Type)GenMSIL.this.global.icodes.TypeKind">toTypeKind</a>(<a href="#298807" title="GenMSIL.this.global.Type">returnType</a>))
      <a href="#298811" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">dcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ret</span>)

      <a href="#288621" title="(x$1: Int)Unit">nbDelegateCallers</a> = <a href="#288621" title="(x$1: Int)Int">nbDelegateCallers</a> + <span title="Int(1)" class="int">1</span>

    } //def createDelegateCaller

    <span class="keyword">def</span> <a title="(code: ch.epfl.lamp.compiler.msil.emit.ILGenerator,boxType: GenMSIL.this.global.icodes.TypeKind)Unit" id="288625">emitBox</a>(<a title="ch.epfl.lamp.compiler.msil.emit.ILGenerator" id="299452">code</a>: <span title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">ILGenerator</span>, <a title="GenMSIL.this.global.icodes.TypeKind" id="299453">boxType</a>: <a href="../icode/TypeKinds.scala.html#46431" title="GenMSIL.this.global.icodes.TypeKind">TypeKind</a>) = (<a href="#299453" title="GenMSIL.this.global.icodes.TypeKind">boxType</a>: @<a href="../icode/TypeKinds.scala.html#46431" title="GenMSIL.this.global.icodes.TypeKind @unchecked">unchecked</a>) <span title="Unit" class="keyword">match</span> {
      // doesn't make sense, unit as parameter..
      <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46433" title="object GenMSIL.this.global.icodes.UNIT">UNIT</a>   =&gt; <a href="#299452" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.FieldInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ldsfld</span>, <a href="#288472" title="=&gt; ch.epfl.lamp.compiler.msil.FieldInfo">boxedUnit</a>)
      <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46435" title="object GenMSIL.this.global.icodes.BOOL">BOOL</a> | <a href="../icode/TypeKinds.scala.html#46437" title="object GenMSIL.this.global.icodes.BYTE">BYTE</a> | <a href="../icode/TypeKinds.scala.html#46439" title="object GenMSIL.this.global.icodes.SHORT">SHORT</a> | <a href="../icode/TypeKinds.scala.html#46441" title="object GenMSIL.this.global.icodes.CHAR">CHAR</a> | <a href="../icode/TypeKinds.scala.html#46443" title="object GenMSIL.this.global.icodes.INT">INT</a> | <a href="../icode/TypeKinds.scala.html#46445" title="object GenMSIL.this.global.icodes.LONG">LONG</a> | <a href="../icode/TypeKinds.scala.html#46447" title="object GenMSIL.this.global.icodes.FLOAT">FLOAT</a> | <a href="../icode/TypeKinds.scala.html#46449" title="object GenMSIL.this.global.icodes.DOUBLE">DOUBLE</a> =&gt;
        <a href="#299452" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.Type)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Box</span>, <a href="#288602" title="(t: GenMSIL.this.global.icodes.TypeKind)ch.epfl.lamp.compiler.msil.Type">msilType</a>(<a href="#299453" title="GenMSIL.this.global.icodes.TypeKind">boxType</a>))
      <span title="Unit" class="keyword">case</span> REFERENCE(<a title="GenMSIL.this.global.icodes.global.Symbol" id="299486">cls</a>) <span class="keyword">if</span> (<a href="../../symtab/Definitions.scala.html#26638" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28777" title="=&gt; scala.collection.mutable.HashMap[GenMSIL.this.global.Symbol,GenMSIL.this.global.Symbol]">unboxMethod</a>.<span title="(key: GenMSIL.this.global.Symbol)Boolean">contains</span>(<a href="#299486" title="GenMSIL.this.global.icodes.global.Symbol">cls</a>)) =&gt;
        <a href="#299452" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.Type)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Box</span>, (<a href="#288602" title="(t: GenMSIL.this.global.icodes.TypeKind)ch.epfl.lamp.compiler.msil.Type">msilType</a>(<a href="#299453" title="GenMSIL.this.global.icodes.TypeKind">boxType</a>)))
      <span title="Unit" class="keyword">case</span> REFERENCE(_) | ARRAY(_) =&gt; <span title="Unit">(</span>)
    }

    <span class="keyword">def</span> <a title="(code: ch.epfl.lamp.compiler.msil.emit.ILGenerator,boxType: GenMSIL.this.global.icodes.TypeKind)Unit" id="288626">emitUnbox</a>(<a title="ch.epfl.lamp.compiler.msil.emit.ILGenerator" id="299542">code</a>: <span title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">ILGenerator</span>, <a title="GenMSIL.this.global.icodes.TypeKind" id="299543">boxType</a>: <a href="../icode/TypeKinds.scala.html#46431" title="GenMSIL.this.global.icodes.TypeKind">TypeKind</a>) = (<a href="#299543" title="GenMSIL.this.global.icodes.TypeKind">boxType</a>: @<a href="../icode/TypeKinds.scala.html#46431" title="GenMSIL.this.global.icodes.TypeKind @unchecked">unchecked</a>) <span title="Unit" class="keyword">match</span> {
      <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46433" title="object GenMSIL.this.global.icodes.UNIT">UNIT</a>   =&gt; <a href="#299542" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Pop</span>)
      <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46435" title="object GenMSIL.this.global.icodes.BOOL">BOOL</a>   =&gt; <a href="#299542" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.Type)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Unbox</span>, <a href="../../symtab/clr/CLRTypes.scala.html#288306" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MBOOL</a>); <a href="#299542" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293227">Ldind_I1</a>)
      <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46437" title="object GenMSIL.this.global.icodes.BYTE">BYTE</a>   =&gt; <a href="#299542" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.MethodInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Call</span>, <a href="#288458" title="=&gt; ch.epfl.lamp.compiler.msil.MethodInfo">toByte</a>)
      <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46439" title="object GenMSIL.this.global.icodes.SHORT">SHORT</a>  =&gt; <a href="#299542" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.MethodInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Call</span>, <a href="#288460" title="=&gt; ch.epfl.lamp.compiler.msil.MethodInfo">toShort</a>)
      <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46441" title="object GenMSIL.this.global.icodes.CHAR">CHAR</a>   =&gt; <a href="#299542" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.MethodInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Call</span>, <a href="#288462" title="=&gt; ch.epfl.lamp.compiler.msil.MethodInfo">toChar</a>)
      <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46443" title="object GenMSIL.this.global.icodes.INT">INT</a>    =&gt; <a href="#299542" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.MethodInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Call</span>, <a href="#288464" title="=&gt; ch.epfl.lamp.compiler.msil.MethodInfo">toInt</a>)
      <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46445" title="object GenMSIL.this.global.icodes.LONG">LONG</a>   =&gt; <a href="#299542" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.MethodInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Call</span>, <a href="#288466" title="=&gt; ch.epfl.lamp.compiler.msil.MethodInfo">toLong</a>)
      <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46447" title="object GenMSIL.this.global.icodes.FLOAT">FLOAT</a>  =&gt; <a href="#299542" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.MethodInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Call</span>, <a href="#288468" title="=&gt; ch.epfl.lamp.compiler.msil.MethodInfo">toFloat</a>)
      <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46449" title="object GenMSIL.this.global.icodes.DOUBLE">DOUBLE</a> =&gt; <a href="#299542" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.MethodInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Call</span>, <a href="#288470" title="=&gt; ch.epfl.lamp.compiler.msil.MethodInfo">toDouble</a>)
      <span title="Unit" class="keyword">case</span> REFERENCE(<a title="GenMSIL.this.global.icodes.global.Symbol" id="299637">cls</a>) <span class="keyword">if</span> (<a href="../../symtab/Definitions.scala.html#26638" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28777" title="=&gt; scala.collection.mutable.HashMap[GenMSIL.this.global.Symbol,GenMSIL.this.global.Symbol]">unboxMethod</a>.<span title="(key: GenMSIL.this.global.Symbol)Boolean">contains</span>(<a href="#299637" title="GenMSIL.this.global.icodes.global.Symbol">cls</a>)) =&gt;
        <a href="#299542" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.Type)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Unbox</span>, <a href="#288602" title="(t: GenMSIL.this.global.icodes.TypeKind)ch.epfl.lamp.compiler.msil.Type">msilType</a>(<a href="#299543" title="GenMSIL.this.global.icodes.TypeKind">boxType</a>))
        <a href="#299542" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.Type)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="293311">Ldobj</a>, <a href="#288602" title="(t: GenMSIL.this.global.icodes.TypeKind)ch.epfl.lamp.compiler.msil.Type">msilType</a>(<a href="#299543" title="GenMSIL.this.global.icodes.TypeKind">boxType</a>))
      <span title="Unit" class="keyword">case</span> REFERENCE(_) | ARRAY(_) =&gt; <span title="Unit">(</span>)
    }

    // #####################################################################
    // get and create methods / constructors
 
    <span class="keyword">def</span> <a title="(sym: GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.ConstructorInfo" id="288627">getConstructor</a>(<a title="GenMSIL.this.global.Symbol" id="298479">sym</a>: <a href="../../symtab/Symbols.scala.html#26286" title="GenMSIL.this.global.Symbol">Symbol</a>): <span title="ch.epfl.lamp.compiler.msil.ConstructorInfo">ConstructorInfo</span> = <a href="../../symtab/clr/CLRTypes.scala.html#288347" title="=&gt; scala.collection.mutable.Map[GenMSIL.this.global.loaders.clrTypes.global.Symbol,ch.epfl.lamp.compiler.msil.ConstructorInfo]">constructors</a>.<span title="(key: GenMSIL.this.global.loaders.clrTypes.global.Symbol)Option[ch.epfl.lamp.compiler.msil.ConstructorInfo]">get</span>(<a href="#298479" title="GenMSIL.this.global.Symbol">sym</a>.<span title="[T0]T0">asInstanceOf</span><span title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">[</span>clrTypes.global.<a href="../../symtab/Symbols.scala.html#26286" title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">Symbol</a>]) <span title="ch.epfl.lamp.compiler.msil.ConstructorInfo" class="keyword">match</span> {
      <span title="ch.epfl.lamp.compiler.msil.ConstructorInfo" class="keyword">case</span> Some(<a title="ch.epfl.lamp.compiler.msil.ConstructorInfo" id="303151">constr</a>) =&gt; <a href="#303151" title="ch.epfl.lamp.compiler.msil.ConstructorInfo">constr</a>
      <span title="ch.epfl.lamp.compiler.msil.ConstructorInfo" class="keyword">case</span> <span title="object None">None</span> =&gt;
        <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.Type" id="303154">mClass</a> = <a href="#288605" title="(sym: GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.Type">getType</a>(<a href="#298479" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27142" title="=&gt; GenMSIL.this.global.Symbol">owner</a>)
        <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.ConstructorInfo" id="303155">constr</a> = <a href="#303154" title="ch.epfl.lamp.compiler.msil.Type">mClass</a>.<span title="(x$1: Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.ConstructorInfo">GetConstructor</span>(<a href="#288604" title="(sym: GenMSIL.this.global.Symbol)Array[ch.epfl.lamp.compiler.msil.Type]">msilParamTypes</a>(<a href="#298479" title="GenMSIL.this.global.Symbol">sym</a>))
        <span title="ch.epfl.lamp.compiler.msil.ConstructorInfo" class="keyword">if</span> (<a href="#303155" title="(x$1: AnyRef)Boolean">constr</a> eq <span title="Null(null)" class="keyword">null</span>) {
          <span title="object java.lang.System">System</span>.<span title="java.io.PrintStream">out</span>.<span title="(x$1: java.lang.String)Unit">println</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Cannot find constructor &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#298479" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27142" title="=&gt; GenMSIL.this.global.Symbol">owner</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;::&quot;)" class="string">&quot;::&quot;</span> + <a href="#298479" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27147" title="=&gt; GenMSIL.this.global.Name">name</a>)
          <span title="object java.lang.System">System</span>.<span title="java.io.PrintStream">out</span>.<span title="(x$1: java.lang.String)Unit">println</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;scope = &quot;</span> + <a href="#298479" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27142" title="=&gt; GenMSIL.this.global.Symbol">owner</a>.<a href="../../symtab/Symbols.scala.html#27162" title="=&gt; GenMSIL.this.global.Type">tpe</a>.<a href="../../symtab/Types.scala.html#30396" title="=&gt; GenMSIL.this.global.Scope">decls</a>)
          <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.Error" class="keyword">new</span> <span title="java.lang.Error">Error</span>(<a href="#298479" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27248" title="=&gt; String">fullNameString</a>)
        }
        <span class="keyword">else</span> {
          <a href="#288628" title="(sym: GenMSIL.this.global.Symbol,cInfo: ch.epfl.lamp.compiler.msil.ConstructorInfo)Unit">mapConstructor</a>(<a href="#298479" title="GenMSIL.this.global.Symbol">sym</a>, <a href="#303155" title="ch.epfl.lamp.compiler.msil.ConstructorInfo">constr</a>)
          <a href="#303155" title="ch.epfl.lamp.compiler.msil.ConstructorInfo">constr</a>
        }
    }

    <span class="keyword">def</span> <a title="(sym: GenMSIL.this.global.Symbol,cInfo: ch.epfl.lamp.compiler.msil.ConstructorInfo)Unit" id="288628">mapConstructor</a>(<a title="GenMSIL.this.global.Symbol" id="302469">sym</a>: <a href="../../symtab/Symbols.scala.html#26286" title="GenMSIL.this.global.Symbol">Symbol</a>, <a title="ch.epfl.lamp.compiler.msil.ConstructorInfo" id="302470">cInfo</a>: <span title="ch.epfl.lamp.compiler.msil.ConstructorInfo">ConstructorInfo</span>) = {
      <a href="../../symtab/clr/CLRTypes.scala.html#288347" title="(key: GenMSIL.this.global.loaders.clrTypes.global.Symbol,value: ch.epfl.lamp.compiler.msil.ConstructorInfo)Unit">constructors</a>(<a href="#302469" title="GenMSIL.this.global.Symbol">sym</a>.<span title="[T0]T0">asInstanceOf</span><span title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">[</span>clrTypes.global.<a href="../../symtab/Symbols.scala.html#26286" title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">Symbol</a>]) = <a href="#302470" title="ch.epfl.lamp.compiler.msil.ConstructorInfo">cInfo</a>
    }

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.MethodInfo" id="288629">getMethod</a>(<a title="GenMSIL.this.global.Symbol" id="299394">sym</a>: <a href="../../symtab/Symbols.scala.html#26286" title="GenMSIL.this.global.Symbol">Symbol</a>): <span title="ch.epfl.lamp.compiler.msil.MethodInfo">MethodInfo</span> = {
    //private def getMethod(sym: Symbol): MethodInfo = sym match {
//       case SRToInt =&gt; toInt
//       case SRToDouble =&gt; toDouble
//       case SRToLong =&gt; toLong
//       case SRToChar =&gt; toChar
//       case SRToFloat =&gt; toFloat
//       case SRToBool =&gt; toBool
//       case SRToByte =&gt; toByte
//       case SRToShort =&gt; toShort
//       case _ =&gt;

        <a href="../../symtab/clr/CLRTypes.scala.html#288349" title="=&gt; scala.collection.mutable.Map[GenMSIL.this.global.loaders.clrTypes.global.Symbol,ch.epfl.lamp.compiler.msil.MethodInfo]">methods</a>.<span title="(key: GenMSIL.this.global.loaders.clrTypes.global.Symbol)Option[ch.epfl.lamp.compiler.msil.MethodInfo]">get</span>(<a href="#299394" title="GenMSIL.this.global.Symbol">sym</a>.<span title="[T0]T0">asInstanceOf</span><span title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">[</span>clrTypes.global.<a href="../../symtab/Symbols.scala.html#26286" title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">Symbol</a>]) <span title="ch.epfl.lamp.compiler.msil.MethodInfo" class="keyword">match</span> {
        <span title="ch.epfl.lamp.compiler.msil.MethodInfo" class="keyword">case</span> Some(<a title="ch.epfl.lamp.compiler.msil.MethodInfo" id="303198">method</a>) =&gt; <a href="#303198" title="ch.epfl.lamp.compiler.msil.MethodInfo">method</a>
        <span title="ch.epfl.lamp.compiler.msil.MethodInfo" class="keyword">case</span> <span title="object None">None</span> =&gt;
          <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.Type" id="303201">mClass</a> = <a href="#288605" title="(sym: GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.Type">getType</a>(<a href="#299394" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27142" title="=&gt; GenMSIL.this.global.Symbol">owner</a>)
          <span class="keyword">try</span> {
            <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.MethodInfo" id="303204">method</a> = <a href="#303201" title="ch.epfl.lamp.compiler.msil.Type">mClass</a>.<a title="(x$1: java.lang.String,x$2: Array[ch.epfl.lamp.compiler.msil.Type],x$3: ch.epfl.lamp.compiler.msil.Type)ch.epfl.lamp.compiler.msil.MethodInfo" id="288803">GetMethod</a>(<a href="#288636" title="(methodSym: GenMSIL.this.global.Symbol)String">getMethodName</a>(<a href="#299394" title="GenMSIL.this.global.Symbol">sym</a>), <a href="#288604" title="(sym: GenMSIL.this.global.Symbol)Array[ch.epfl.lamp.compiler.msil.Type]">msilParamTypes</a>(<a href="#299394" title="GenMSIL.this.global.Symbol">sym</a>),
                                          <a href="#288603" title="(tpe: GenMSIL.this.global.Type)ch.epfl.lamp.compiler.msil.Type">msilType</a>(<a href="#299394" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27162" title="=&gt; GenMSIL.this.global.Type">tpe</a>.<a href="../../symtab/Types.scala.html#30379" title="=&gt; GenMSIL.this.global.Type">resultType</a>))
            <span title="ch.epfl.lamp.compiler.msil.MethodInfo" class="keyword">if</span> (<a href="#303204" title="(x$1: AnyRef)Boolean">method</a> eq <span title="Null(null)" class="keyword">null</span>) {
              <span title="object java.lang.System">System</span>.<span title="java.io.PrintStream">out</span>.<span title="(x$1: java.lang.String)Unit">println</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Cannot find method &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#299394" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27142" title="=&gt; GenMSIL.this.global.Symbol">owner</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;::&quot;)" class="string">&quot;::&quot;</span> + <a href="#288590" title="(sym: GenMSIL.this.global.Symbol)String">msilName</a>(<a href="#299394" title="GenMSIL.this.global.Symbol">sym</a>))
              <span title="object java.lang.System">System</span>.<span title="java.io.PrintStream">out</span>.<span title="(x$1: java.lang.String)Unit">println</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;scope = &quot;</span> + <a href="#299394" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27142" title="=&gt; GenMSIL.this.global.Symbol">owner</a>.<a href="../../symtab/Symbols.scala.html#27162" title="=&gt; GenMSIL.this.global.Type">tpe</a>.<a href="../../symtab/Types.scala.html#30396" title="=&gt; GenMSIL.this.global.Scope">decls</a>)
              <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.Error" class="keyword">new</span> <span title="java.lang.Error">Error</span>(<a href="#299394" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27248" title="=&gt; String">fullNameString</a>)
            }
            <span class="keyword">else</span> {
              <a href="#288630" title="(sym: GenMSIL.this.global.Symbol,mInfo: ch.epfl.lamp.compiler.msil.MethodInfo)Unit">mapMethod</a>(<a href="#299394" title="GenMSIL.this.global.Symbol">sym</a>, <a href="#303204" title="ch.epfl.lamp.compiler.msil.MethodInfo">method</a>)
              <a href="#303204" title="ch.epfl.lamp.compiler.msil.MethodInfo">method</a>
            }
          }
          <span class="keyword">catch</span> {
            <span title="Nothing" class="keyword">case</span> <a title="Exception" id="303264">e</a>: <span title="Exception">Exception</span> =&gt;
              <span title="object Console">Console</span>.<span title="(x: Any)Unit">println</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;While looking up &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#303201" title="ch.epfl.lamp.compiler.msil.Type">mClass</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;::&quot;)" class="string">&quot;::&quot;</span> + <a href="#299394" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27245" title="=&gt; String">nameString</a>)
            <span title="object Console">Console</span>.<span title="(x: Any)Unit">println</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;\t&quot;</span> + <a href="#288637" title="(sym: GenMSIL.this.global.Symbol)String">showsym</a>(<a href="#299394" title="GenMSIL.this.global.Symbol">sym</a>))
            <span title="Nothing" class="keyword">throw</span> <a href="#303264" title="Exception">e</a>
          }
      }
    }

    /*
     * add a mapping between sym and mInfo
     */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: GenMSIL.this.global.Symbol,mInfo: ch.epfl.lamp.compiler.msil.MethodInfo)Unit" id="288630">mapMethod</a>(<a title="GenMSIL.this.global.Symbol" id="290535">sym</a>: <a href="../../symtab/Symbols.scala.html#26286" title="GenMSIL.this.global.Symbol">Symbol</a>, <a title="ch.epfl.lamp.compiler.msil.MethodInfo" id="290536">mInfo</a>: <span title="ch.epfl.lamp.compiler.msil.MethodInfo">MethodInfo</span>) {
      <span title="(assertion: Boolean,message: =&gt; Any)Unit">assert</span> (<a href="#290536" title="(x$1: AnyRef)Boolean">mInfo</a> != <span title="Null(null)" class="keyword">null</span>, <a href="#290536" title="ch.epfl.lamp.compiler.msil.MethodInfo">mInfo</a>)
      <a href="../../symtab/clr/CLRTypes.scala.html#288349" title="(key: GenMSIL.this.global.loaders.clrTypes.global.Symbol,value: ch.epfl.lamp.compiler.msil.MethodInfo)Unit">methods</a>(<a href="#290535" title="GenMSIL.this.global.Symbol">sym</a>.<span title="[T0]T0">asInstanceOf</span><span title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">[</span>clrTypes.global.<a href="../../symtab/Symbols.scala.html#26286" title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">Symbol</a>]) = <a href="#290536" title="ch.epfl.lamp.compiler.msil.MethodInfo">mInfo</a>
    }

    /*
     * add mapping between sym and method with newName, paramTypes of newClass
     */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: GenMSIL.this.global.Symbol,newClass: ch.epfl.lamp.compiler.msil.Type,newName: String,paramTypes: Array[ch.epfl.lamp.compiler.msil.Type])Unit" id="288631">mapMethod</a>(<a title="GenMSIL.this.global.Symbol" id="290530">sym</a>: <a href="../../symtab/Symbols.scala.html#26286" title="GenMSIL.this.global.Symbol">Symbol</a>, <a title="ch.epfl.lamp.compiler.msil.Type" id="290531">newClass</a>: <span title="ch.epfl.lamp.compiler.msil.Type">MsilType</span>, <a title="String" id="290532">newName</a>: <span title="String">String</span>, <a title="Array[ch.epfl.lamp.compiler.msil.Type]" id="290533">paramTypes</a>: <span title="Array[ch.epfl.lamp.compiler.msil.Type]">Array</span>[MsilType]) {
      <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.MethodInfo" id="303301">methodInfo</a> = <a href="#290531" title="ch.epfl.lamp.compiler.msil.Type">newClass</a>.<span title="(x$1: java.lang.String,x$2: Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.MethodInfo">GetMethod</span>(<a href="#290532" title="String">newName</a>, <a href="#290533" title="Array[ch.epfl.lamp.compiler.msil.Type]">paramTypes</a>)
      <span title="(assertion: Boolean,message: =&gt; Any)Unit">assert</span>(<a href="#303301" title="(x$1: AnyRef)Boolean">methodInfo</a> != <span title="Null(null)" class="keyword">null</span>, <span title="(x$1: Any)java.lang.String" class="string">&quot;Can't find mapping for &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#290530" title="GenMSIL.this.global.Symbol">sym</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; -&gt; &quot;)" class="string">&quot; -&gt; &quot;</span> <span title="(x$1: Any)java.lang.String">+</span>
             <a href="#290532" title="String">newName</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;(&quot;)" class="string">&quot;(&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#290533" title="Array[ch.epfl.lamp.compiler.msil.Type]">paramTypes</a> + <span title="java.lang.String(&quot;)&quot;)" class="string">&quot;)&quot;</span>)
      <a href="#288630" title="(sym: GenMSIL.this.global.Symbol,mInfo: ch.epfl.lamp.compiler.msil.MethodInfo)Unit">mapMethod</a>(<a href="#290530" title="GenMSIL.this.global.Symbol">sym</a>, <a href="#303301" title="ch.epfl.lamp.compiler.msil.MethodInfo">methodInfo</a>)
      <span title="Unit" class="keyword">if</span> (<a href="#303301" title="ch.epfl.lamp.compiler.msil.MethodInfo">methodInfo</a>.<a title="()Boolean" id="291805">IsStatic</a>) 
        <a href="#288480" title="(elem: GenMSIL.this.global.Symbol)BytecodeGenerator.this.dynToStatMapped.type">dynToStatMapped</a> <span title="Unit">+=</span> <a href="#290530" title="GenMSIL.this.global.Symbol">sym</a>
    }

    /*
     * add mapping between method with name and paramTypes of clazz to
     * method with newName and newParamTypes of newClass (used for instance
     * for &quot;wait&quot;)
     */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,paramTypes: Array[GenMSIL.this.global.Type],newClass: ch.epfl.lamp.compiler.msil.Type,newName: String,newParamTypes: Array[ch.epfl.lamp.compiler.msil.Type])Unit" id="288632">mapMethod</a>(
      <a title="GenMSIL.this.global.Symbol" id="290523">clazz</a>: <a href="../../symtab/Symbols.scala.html#26286" title="GenMSIL.this.global.Symbol">Symbol</a>, <a title="GenMSIL.this.global.Name" id="290524">name</a>: <a href="../../symtab/Names.scala.html#26214" title="GenMSIL.this.global.Name">Name</a>, <a title="Array[GenMSIL.this.global.Type]" id="290525">paramTypes</a>: <span title="Array[GenMSIL.this.global.Type]">Array</span>[Type],
      <a title="ch.epfl.lamp.compiler.msil.Type" id="290526">newClass</a>: <span title="ch.epfl.lamp.compiler.msil.Type">MsilType</span>, <a title="String" id="290527">newName</a>: <span title="String">String</span>, <a title="Array[ch.epfl.lamp.compiler.msil.Type]" id="290528">newParamTypes</a>: <span title="Array[ch.epfl.lamp.compiler.msil.Type]">Array</span>[MsilType]) {
        <span class="keyword">val</span> <a title="GenMSIL.this.global.Symbol" id="303370">methodSym</a> = <a href="#288635" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,paramTypes: Array[GenMSIL.this.global.Type])GenMSIL.this.global.Symbol">lookupMethod</a>(<a href="#290523" title="GenMSIL.this.global.Symbol">clazz</a>, <a href="#290524" title="GenMSIL.this.global.Name">name</a>, <a href="#290525" title="Array[GenMSIL.this.global.Type]">paramTypes</a>)
        <span title="(assertion: Boolean,message: =&gt; Any)Unit">assert</span>(<a href="#303370" title="(x$1: AnyRef)Boolean">methodSym</a> != <span title="Null(null)" class="keyword">null</span>, <span title="(x$1: Any)java.lang.String" class="string">&quot;cannot find method &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#290524" title="GenMSIL.this.global.Name">name</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;(&quot;)" class="string">&quot;(&quot;</span> <span title="(x$1: Any)java.lang.String">+</span>
               <a href="#290525" title="Array[GenMSIL.this.global.Type]">paramTypes</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;)&quot;)" class="string">&quot;)&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; in class &quot;)" class="string">&quot; in class &quot;</span> + <a href="#290523" title="GenMSIL.this.global.Symbol">clazz</a>)
        <a href="#288631" title="(sym: GenMSIL.this.global.Symbol,newClass: ch.epfl.lamp.compiler.msil.Type,newName: String,paramTypes: Array[ch.epfl.lamp.compiler.msil.Type])Unit">mapMethod</a>(<a href="#303370" title="GenMSIL.this.global.Symbol">methodSym</a>, <a href="#290526" title="ch.epfl.lamp.compiler.msil.Type">newClass</a>, <a href="#290527" title="String">newName</a>, <a href="#290528" title="Array[ch.epfl.lamp.compiler.msil.Type]">newParamTypes</a>)
      }

    /*
     * add maping for member with name and paramTypes to member
     * newName of newClass (same parameters)
     */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,paramTypes: Array[GenMSIL.this.global.Type],newClass: ch.epfl.lamp.compiler.msil.Type,newName: String)Unit" id="288633">mapMethod</a>(
      <a title="GenMSIL.this.global.Symbol" id="290517">clazz</a>: <a href="../../symtab/Symbols.scala.html#26286" title="GenMSIL.this.global.Symbol">Symbol</a>, <a title="GenMSIL.this.global.Name" id="290518">name</a>: <a href="../../symtab/Names.scala.html#26214" title="GenMSIL.this.global.Name">Name</a>, <a title="Array[GenMSIL.this.global.Type]" id="290519">paramTypes</a>: <span title="Array[GenMSIL.this.global.Type]">Array</span>[Type],
      <a title="ch.epfl.lamp.compiler.msil.Type" id="290520">newClass</a>: <span title="ch.epfl.lamp.compiler.msil.Type">MsilType</span>, <a title="String" id="290521">newName</a>: <span title="String">String</span>) {
        <a href="#288632" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,paramTypes: Array[GenMSIL.this.global.Type],newClass: ch.epfl.lamp.compiler.msil.Type,newName: String,newParamTypes: Array[ch.epfl.lamp.compiler.msil.Type])Unit">mapMethod</a>(<a href="#290517" title="GenMSIL.this.global.Symbol">clazz</a>, <a href="#290518" title="GenMSIL.this.global.Name">name</a>, <a href="#290519" title="Array[GenMSIL.this.global.Type]">paramTypes</a>, <a href="#290520" title="ch.epfl.lamp.compiler.msil.Type">newClass</a>, <a href="#290521" title="String">newName</a>, <a href="#290519" title="(f: (GenMSIL.this.global.Type) =&gt; ch.epfl.lamp.compiler.msil.Type)(implicit bf: scala.collection.generic.BuilderFactory[ch.epfl.lamp.compiler.msil.Type,Array[ch.epfl.lamp.compiler.msil.Type],Array[GenMSIL.this.global.Type]])Array[ch.epfl.lamp.compiler.msil.Type]">paramTypes</a> <a title="scala.collection.generic.BuilderFactory[ch.epfl.lamp.compiler.msil.Type,Array[ch.epfl.lamp.compiler.msil.Type],Array[_]]" id="24669">map</a> <a href="#288603" title="(tpe: GenMSIL.this.global.Type)ch.epfl.lamp.compiler.msil.Type">msilType</a>)
      }

    /*
     * add mapping for all methods with name of clazz to the corresponding
     * method (same parameters) with newName of newClass
     */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,newClass: ch.epfl.lamp.compiler.msil.Type,newName: String)Unit" id="288634">mapMethod</a>(
      <a title="GenMSIL.this.global.Symbol" id="290512">clazz</a>: <a href="../../symtab/Symbols.scala.html#26286" title="GenMSIL.this.global.Symbol">Symbol</a>, <a title="GenMSIL.this.global.Name" id="290513">name</a>: <a href="../../symtab/Names.scala.html#26214" title="GenMSIL.this.global.Name">Name</a>,
      <a title="ch.epfl.lamp.compiler.msil.Type" id="290514">newClass</a>: <span title="ch.epfl.lamp.compiler.msil.Type">MsilType</span>, <a title="String" id="290515">newName</a>: <span title="String">String</span>) {
        <span class="keyword">val</span> <a title="GenMSIL.this.global.Symbol" id="303454">memberSym</a>: <a href="../../symtab/Symbols.scala.html#26286" title="GenMSIL.this.global.Symbol">Symbol</a> = <a href="#290512" title="GenMSIL.this.global.Symbol">clazz</a>.<a href="../../symtab/Symbols.scala.html#27162" title="=&gt; GenMSIL.this.global.Type">tpe</a>.<a href="../../symtab/Types.scala.html#30403" title="(name: GenMSIL.this.global.Name)GenMSIL.this.global.Symbol">member</a>(<a href="#290513" title="GenMSIL.this.global.Name">name</a>)
        <a href="#303454" title="GenMSIL.this.global.Symbol">memberSym</a>.<a href="../../symtab/Symbols.scala.html#27162" title="=&gt; GenMSIL.this.global.Type">tpe</a> <span title="Unit" class="keyword">match</span> {
          // alternatives: List[Symbol]
          <span title="Unit" class="keyword">case</span> OverloadedType(_, <a title="List[GenMSIL.this.global.Symbol]" id="303460">alternatives</a>) =&gt;
            <a href="#303460" title="List[GenMSIL.this.global.Symbol]">alternatives</a>.<span title="(f: (GenMSIL.this.global.Symbol) =&gt; Unit)Unit">foreach</span>(<a title="GenMSIL.this.global.Symbol" id="303479">s</a> =&gt; <a href="#288631" title="(sym: GenMSIL.this.global.Symbol,newClass: ch.epfl.lamp.compiler.msil.Type,newName: String,paramTypes: Array[ch.epfl.lamp.compiler.msil.Type])Unit">mapMethod</a>(<a href="#303479" title="GenMSIL.this.global.Symbol">s</a>, <a href="#290514" title="ch.epfl.lamp.compiler.msil.Type">newClass</a>, <a href="#290515" title="String">newName</a>, <a href="#288604" title="(sym: GenMSIL.this.global.Symbol)Array[ch.epfl.lamp.compiler.msil.Type]">msilParamTypes</a>(<a href="#303479" title="GenMSIL.this.global.Symbol">s</a>)))

          // paramTypes: List[Type], resType: Type
          <span title="Unit" class="keyword">case</span> MethodType(<a title="List[GenMSIL.this.global.Symbol]" id="303494">params</a>, <a title="GenMSIL.this.global.Type" id="303495">resType</a>) =&gt;
            <a href="#288631" title="(sym: GenMSIL.this.global.Symbol,newClass: ch.epfl.lamp.compiler.msil.Type,newName: String,paramTypes: Array[ch.epfl.lamp.compiler.msil.Type])Unit">mapMethod</a>(<a href="#303454" title="GenMSIL.this.global.Symbol">memberSym</a>, <a href="#290514" title="ch.epfl.lamp.compiler.msil.Type">newClass</a>, <a href="#290515" title="String">newName</a>, <a href="#288604" title="(sym: GenMSIL.this.global.Symbol)Array[ch.epfl.lamp.compiler.msil.Type]">msilParamTypes</a>(<a href="#303454" title="GenMSIL.this.global.Symbol">memberSym</a>))

          <span title="Nothing" class="keyword">case</span> _ =&gt;
            <a href="../../Global.scala.html#39309" title="(msg: String)Nothing">abort</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;member not found: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#290512" title="GenMSIL.this.global.Symbol">clazz</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;, &quot;)" class="string">&quot;, &quot;</span> + <a href="#290513" title="GenMSIL.this.global.Name">name</a>)
        }
      }


    /*
     * find the method in clazz with name and paramTypes
     */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,paramTypes: Array[GenMSIL.this.global.Type])GenMSIL.this.global.Symbol" id="288635">lookupMethod</a>(<a title="GenMSIL.this.global.Symbol" id="290495">clazz</a>: <a href="../../symtab/Symbols.scala.html#26286" title="GenMSIL.this.global.Symbol">Symbol</a>, <a title="GenMSIL.this.global.Name" id="290496">name</a>: <a href="../../symtab/Names.scala.html#26214" title="GenMSIL.this.global.Name">Name</a>, <a title="Array[GenMSIL.this.global.Type]" id="290497">paramTypes</a>: <span title="Array[GenMSIL.this.global.Type]">Array</span>[Type]): <a href="../../symtab/Symbols.scala.html#26286" title="GenMSIL.this.global.Symbol">Symbol</a> = {
      <span class="keyword">val</span> <a title="GenMSIL.this.global.Symbol" id="303515">memberSym</a> = <a href="#290495" title="GenMSIL.this.global.Symbol">clazz</a>.<a href="../../symtab/Symbols.scala.html#27162" title="=&gt; GenMSIL.this.global.Type">tpe</a>.<a href="../../symtab/Types.scala.html#30403" title="(name: GenMSIL.this.global.Name)GenMSIL.this.global.Symbol">member</a>(<a href="#290496" title="GenMSIL.this.global.Name">name</a>)
      <a href="#303515" title="GenMSIL.this.global.Symbol">memberSym</a>.<a href="../../symtab/Symbols.scala.html#27162" title="=&gt; GenMSIL.this.global.Type">tpe</a> <span title="GenMSIL.this.global.Symbol" class="keyword">match</span> {
        <span title="GenMSIL.this.global.Symbol" class="keyword">case</span> OverloadedType(_, <a title="List[GenMSIL.this.global.Symbol]" id="303521">alternatives</a>) =&gt;
          <a href="#303521" title="List[GenMSIL.this.global.Symbol]">alternatives</a>.<a title="(p: (GenMSIL.this.global.Symbol) =&gt; Boolean)Option[GenMSIL.this.global.Symbol]" id="29127">find</a>(<a title="GenMSIL.this.global.Symbol" id="303528">s</a> =&gt; {
            <span class="keyword">var</span> <a title="Int" id="303529">i</a>: <span title="Int">Int</span> = <span title="Int(0)" class="int">0</span>
            <span class="keyword">var</span> <a title="Boolean" id="303530">typesOK</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(true)" class="keyword">true</span>
            <span title="Unit" class="keyword">if</span> (<a href="#290497" title="Array[GenMSIL.this.global.Type]">paramTypes</a>.<span title="(x$1: Int)Boolean">length</span> == <a href="#303528" title="GenMSIL.this.global.Symbol">s</a>.<a href="../../symtab/Symbols.scala.html#27162" title="=&gt; GenMSIL.this.global.Type">tpe</a>.<a href="../../symtab/Types.scala.html#30386" title="=&gt; List[GenMSIL.this.global.Type]">paramTypes</a>.<span title="=&gt; Int">length</span>){
              <span title="Unit" class="keyword">while</span>(<a href="#303529" title="(x$1: Int)Boolean">i</a> &lt; <a href="#290497" title="Array[GenMSIL.this.global.Type]">paramTypes</a>.<span title="=&gt; Int">length</span>)<a href="#303539" title="()Unit">{</a>
                <span title="Unit" class="keyword">if</span> (<a href="#290497" title="(i: Int)GenMSIL.this.global.Type">paramTypes</a><span title="(x$1: AnyRef)Boolean">(</span><a href="#303529" title="Int">i</a>) != <a href="#303528" title="GenMSIL.this.global.Symbol">s</a>.<a href="../../symtab/Symbols.scala.html#27162" title="=&gt; GenMSIL.this.global.Type">tpe</a>.<a href="../../symtab/Types.scala.html#30386" title="(n: Int)GenMSIL.this.global.Type">paramTypes</a>(<a href="#303529" title="Int">i</a>))
                  <a href="#303530" title="Boolean">typesOK</a> = <span title="Boolean(false)" class="keyword">false</span>
                <a href="#303529" title="Int">i</a> += <span title="Int(1)" class="int">1</span>
              } 
            } <span class="keyword">else</span> {
              <a href="#303530" title="Boolean">typesOK</a> = <span title="Boolean(false)" class="keyword">false</span>
            }
            <a href="#303530" title="Boolean">typesOK</a>
          }) <span title="GenMSIL.this.global.Symbol" class="keyword">match</span> {
            <span title="GenMSIL.this.global.Symbol" class="keyword">case</span> Some(<a title="GenMSIL.this.global.Symbol" id="303611">sym</a>) =&gt; <a href="#303611" title="GenMSIL.this.global.Symbol">sym</a>
            <span title="Nothing" class="keyword">case</span> <span title="object None">None</span> =&gt; <a href="../../Global.scala.html#39309" title="(msg: String)Nothing">abort</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;member of &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#290495" title="GenMSIL.this.global.Symbol">clazz</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;, &quot;)" class="string">&quot;, &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#290496" title="GenMSIL.this.global.Name">name</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;(&quot;)" class="string">&quot;(&quot;</span> <span title="(x$1: Any)java.lang.String">+</span>
                               <a href="#290497" title="Array[GenMSIL.this.global.Type]">paramTypes</a> + <span title="java.lang.String(&quot;) not found&quot;)" class="string">&quot;) not found&quot;</span>)
          }

        <span title="GenMSIL.this.global.Symbol" class="keyword">case</span> MethodType(_, _) =&gt; <a href="#303515" title="GenMSIL.this.global.Symbol">memberSym</a>

        <span title="Nothing" class="keyword">case</span> _ =&gt; <a href="../../Global.scala.html#39309" title="(msg: String)Nothing">abort</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;member not found: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#290496" title="GenMSIL.this.global.Name">name</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; of &quot;)" class="string">&quot; of &quot;</span> + <a href="#290495" title="GenMSIL.this.global.Symbol">clazz</a>)
      }
    }

    <span class="keyword">def</span> <a title="(methodSym: GenMSIL.this.global.Symbol)String" id="288636">getMethodName</a>(<a title="GenMSIL.this.global.Symbol" id="302490">methodSym</a>: <a href="../../symtab/Symbols.scala.html#26286" title="GenMSIL.this.global.Symbol">Symbol</a>): <span title="String">String</span> = {
      <span class="keyword">val</span> <a title="GenMSIL.this.global.Name" id="303640">name</a> = <a href="#302490" title="GenMSIL.this.global.Symbol">methodSym</a>.<a href="../../symtab/Symbols.scala.html#27147" title="=&gt; GenMSIL.this.global.Name">name</a>
      <span class="keyword">val</span> <a title="List[GenMSIL.this.global.Type]" id="303641">params</a> = <a href="#302490" title="GenMSIL.this.global.Symbol">methodSym</a>.<a href="../../symtab/Symbols.scala.html#27162" title="=&gt; GenMSIL.this.global.Type">tpe</a>.<a href="../../symtab/Types.scala.html#30386" title="=&gt; List[GenMSIL.this.global.Type]">paramTypes</a>
      <span title="String" class="keyword">if</span> (<a href="#303640" title="(x$1: AnyRef)Boolean">name</a> <span title="(x$1: Boolean)Boolean">==</span> <a href="../../symtab/StdNames.scala.html#26690" title="object GenMSIL.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#30068" title="=&gt; GenMSIL.this.global.Name">finalize_</a> &amp;&amp; <a href="#303641" title="List[GenMSIL.this.global.Type]">params</a>.<span title="(x$1: Int)Boolean">length</span> == <span title="Int(0)" class="int">0</span>)
        <span title="java.lang.String(&quot;Finalize&quot;)" class="string">&quot;Finalize&quot;</span>
      <span class="keyword">else</span> <span title="String" class="keyword">if</span> (<a href="#303640" title="(x$1: AnyRef)Boolean">name</a> <span title="(x$1: Boolean)Boolean">==</span> <a href="../../symtab/StdNames.scala.html#26690" title="object GenMSIL.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#30154" title="=&gt; GenMSIL.this.global.Name">toString_</a> &amp;&amp; <a href="#303641" title="List[GenMSIL.this.global.Type]">params</a>.<span title="(x$1: Int)Boolean">length</span> == <span title="Int(0)" class="int">0</span>)
        <span title="java.lang.String(&quot;ToString&quot;)" class="string">&quot;ToString&quot;</span>
      <span class="keyword">else</span> <span title="String" class="keyword">if</span> (<a href="#303640" title="(x$1: AnyRef)Boolean">name</a> <span title="(x$1: Boolean)Boolean">==</span> <a href="../../symtab/StdNames.scala.html#26690" title="object GenMSIL.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#30086" title="=&gt; GenMSIL.this.global.Name">hashCode_</a> &amp;&amp; <a href="#303641" title="List[GenMSIL.this.global.Type]">params</a>.<span title="(x$1: Int)Boolean">length</span> == <span title="Int(0)" class="int">0</span>)
        <span title="java.lang.String(&quot;GetHashCode&quot;)" class="string">&quot;GetHashCode&quot;</span>
      <span class="keyword">else</span> <span title="String" class="keyword">if</span> (<a href="#303640" title="(x$1: AnyRef)Boolean">name</a> <span title="(x$1: Boolean)Boolean">==</span> <a href="../../symtab/StdNames.scala.html#26690" title="object GenMSIL.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#30052" title="=&gt; GenMSIL.this.global.Name">equals_</a> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> <a href="#303641" title="List[GenMSIL.this.global.Type]">params</a>.<span title="(x$1: Int)Boolean">length</span> == <span title="Int(1)" class="int">1</span> &amp;&amp;
              <a href="#303641" title="(n: Int)GenMSIL.this.global.Type">params</a><span title="(x$1: AnyRef)Boolean">(</span><span title="Int(0)" class="int">0</span>) == <a href="../../symtab/Definitions.scala.html#26638" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28453" title="=&gt; GenMSIL.this.global.Symbol">ObjectClass</a>.<a href="../../symtab/Symbols.scala.html#27162" title="=&gt; GenMSIL.this.global.Type">tpe</a>)
        <span title="java.lang.String(&quot;Equals&quot;)" class="string">&quot;Equals&quot;</span>
      // FIXME: why is there no nme.clone_ ?
      <span class="keyword">else</span> <span title="String" class="keyword">if</span> (<a href="#303640" title="GenMSIL.this.global.Name">name</a>.<a href="../../symtab/Names.scala.html#28391" title="()String">toString</a><span title="(x$1: AnyRef)Boolean">(</span>) <span title="(x$1: Boolean)Boolean">==</span> <span title="java.lang.String(&quot;clone&quot;)" class="string">&quot;clone&quot;</span> &amp;&amp; <a href="#303641" title="List[GenMSIL.this.global.Type]">params</a>.<span title="(x$1: Int)Boolean">length</span> == <span title="Int(0)" class="int">0</span>)
        <span title="java.lang.String(&quot;Clone&quot;)" class="string">&quot;Clone&quot;</span>
      <span class="keyword">else</span>
        <a href="#288590" title="(sym: GenMSIL.this.global.Symbol)String">msilName</a>(<a href="#302490" title="GenMSIL.this.global.Symbol">methodSym</a>)
    }

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: GenMSIL.this.global.Symbol)String" id="288637">showsym</a>(<a title="GenMSIL.this.global.Symbol" id="298219">sym</a>: <a href="../../symtab/Symbols.scala.html#26286" title="GenMSIL.this.global.Symbol">Symbol</a>): <span title="String">String</span> = (<a href="#298219" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27250" title="(x$1: Any)java.lang.String">toString</a> <span title="(x$1: Any)java.lang.String">+</span>
      <span title="java.lang.String(&quot;\012  symbol = &quot;)" class="string">&quot;\n  symbol = &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="../../symtab/Flags.scala.html#10482" title="object scala.tools.nsc.symtab.Flags">Flags</a>.<a href="../../symtab/Flags.scala.html#29000" title="(flags: Long)String">flagsToString</a>(<a href="#298219" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27150" title="=&gt; Long">flags</a>) <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; &quot;)" class="string">&quot; &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#298219" title="GenMSIL.this.global.Symbol">sym</a> <span title="(x$1: Any)java.lang.String">+</span>
      <span title="java.lang.String(&quot;\012  owner  = &quot;)" class="string">&quot;\n  owner  = &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="../../symtab/Flags.scala.html#10482" title="object scala.tools.nsc.symtab.Flags">Flags</a>.<a href="../../symtab/Flags.scala.html#29000" title="(flags: Long)String">flagsToString</a>(<a href="#298219" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27142" title="=&gt; GenMSIL.this.global.Symbol">owner</a>.<a href="../../symtab/Symbols.scala.html#27150" title="=&gt; Long">flags</a>) <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; &quot;)" class="string">&quot; &quot;</span> + <a href="#298219" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27142" title="=&gt; GenMSIL.this.global.Symbol">owner</a>
    )

  } // class BytecodeGenerator

} // class GenMSIL

        </pre>
    </body>
</html>