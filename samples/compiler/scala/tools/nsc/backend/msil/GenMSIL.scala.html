<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/backend/msil/GenMSIL.scala</title>
        <script type="text/javascript" src="../../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../../style.css" title="Style">
    </head>
    <body onload="initializeLinked()">
        <pre>
<span class="comment">/* NSC -- new scala compiler
 * Copyright 2005-2009 LAMP/EPFL
 * @author Nikolay Mihaylov
 */</span>

<span class="comment">// $Id: GenMSIL.scala 16884 2009-01-09 16:52:09Z cunei $</span>

<span class="keyword">package</span> scala.tools.nsc.backend.msil

<span class="keyword">import</span> java.io.{File, IOException}
<span class="keyword">import</span> java.nio.{ByteBuffer, ByteOrder}

<span class="keyword">import</span> scala.collection.mutable.{Map, HashMap, HashSet, Stack}
<span class="keyword">import</span> scala.tools.nsc.symtab._
<span class="keyword">import</span> scala.tools.nsc.util.Position

<span class="keyword">import</span> ch.epfl.lamp.compiler.msil.{Type =&gt; MsilType, _}
<span class="keyword">import</span> ch.epfl.lamp.compiler.msil.emit._

<span class="comment">/**
 */</span>
<span class="keyword">abstract</span> <span class="keyword">class</span> <span class="typed"><span class="type">class GenMSIL extends scala.tools.nsc.SubComponent with ScalaObject</span><a id="19448">GenMSIL</a></span> <span class="keyword">extends</span> <span class="typed"><span class="type">scala.tools.nsc.SubComponent</span><a href="../../SubComponent.scala.html#6300">SubComponent</a></span> {
  <span class="keyword">import</span> global._
  <span class="keyword">import</span> loaders.clrTypes
  <span class="keyword">import</span> clrTypes.{types, constructors, methods, fields}
  <span class="keyword">import</span> icodes._
  <span class="keyword">import</span> icodes.opcodes._

  <span class="comment">/** Create a new phase */</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">(scala.tools.nsc.Phase)GenMSIL.this.MsilPhase</span><a id="83573">newPhase</a></span>(<span class="typed"><span class="type">scala.tools.nsc.Phase</span><a id="161540">p</a></span>: <span class="typed"><span class="type">scala.tools.nsc.Phase</span><a href="../../Phase.scala.html#6873">Phase</a></span>) = <span class="typed"><span class="type">GenMSIL.this.MsilPhase</span><span class="keyword">new</span></span> <span class="typed"><span class="type">GenMSIL.this.MsilPhase</span><a href="#83576">MsilPhase</a></span>(<span class="typed"><span class="type">scala.tools.nsc.Phase</span><a href="#161540">p</a></span>)

  <span class="keyword">val</span> <span class="typed"><span class="type">java.lang.String</span><span id="83575"><a id="83574">phaseName</a></span></span> = <span class="typed"><span class="type">java.lang.String(&quot;msil&quot;)</span><span class="string">&quot;msil&quot;</span></span>
  <span class="comment">/** MSIL code generation phase
   */</span>
  <span class="keyword">class</span> <span class="typed"><span class="type">class MsilPhase extends GenMSIL.this.global.GlobalPhase with ScalaObject</span><a id="83576">MsilPhase</a></span>(<span class="typed"><span class="type">scala.tools.nsc.Phase</span><span id="161543"><a id="161550">prev</a></span></span>: <span class="typed"><span class="type">scala.tools.nsc.Phase</span><a href="../../Phase.scala.html#6873">Phase</a></span>) <span class="keyword">extends</span> <span class="typed"><span class="type">GenMSIL.this.global.GlobalPhase</span><a href="../../Global.scala.html#21236">GlobalPhase</a></span>(<span class="typed"><span class="type">scala.tools.nsc.Phase</span><a href="#161550">prev</a></span>) {
    <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; java.lang.String</span><a id="161545">name</a></span> = <span class="typed"><span class="type">=&gt; java.lang.String</span><a href="#83574">phaseName</a></span>
    <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Long</span><a id="161546">newFlags</a></span> = <span class="typed"><span class="type">=&gt; Long</span><a href="../../SubComponent.scala.html#29458">phaseNewFlags</a></span>

    <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Boolean</span><a id="161547">erasedTypes</a></span> = <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>

    <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Unit</span><a id="161548">run</a></span> {
      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="../../Global.scala.html#21157">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting</span><a href="../../Settings.scala.html#30066">debug</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting#T</span><a href="../../Settings.scala.html#30301">value</a></span>) <span class="typed"><span class="type">(String)Unit</span><a href="../../Global.scala.html#21199">inform</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;[running phase &quot;)</span><span class="string">&quot;[running phase &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">=&gt; java.lang.String</span><a href="#161545">name</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot; on icode]&quot;)</span><span class="string">&quot; on icode]&quot;</span></span>)

      <span class="keyword">val</span> <span class="typed"><span class="type">GenMSIL.this.BytecodeGenerator</span><a id="161560">codeGenerator</a></span> = <span class="typed"><span class="type">GenMSIL.this.BytecodeGenerator</span><span class="keyword">new</span></span> <span class="typed"><span class="type">GenMSIL.this.BytecodeGenerator</span><a href="#83577">BytecodeGenerator</a></span>

      <span class="comment">//classes is ICodes.classes, a HashMap[Symbol, IClass]</span>
      <span class="typed"><span class="type">=&gt; scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.global.Symbol,GenMSIL.this.global.icodes.IClass]</span><a href="../icode/ICodes.scala.html#32305">classes</a></span>.<span class="typed"><span class="type">=&gt; Iterator[GenMSIL.this.global.icodes.IClass]</span><a id="24244">values</a></span> <span class="typed"><span class="type">((GenMSIL.this.global.icodes.IClass) =&gt; Unit)Unit</span><a id="32202">foreach</a></span> <span class="typed"><span class="type">GenMSIL.this.BytecodeGenerator</span><a href="#161560">codeGenerator</a></span>.<span class="typed"><span class="type">(GenMSIL.this.global.icodes.IClass)Unit</span><a href="#161748">findEntryPoint</a></span>

      <span class="typed"><span class="type">GenMSIL.this.BytecodeGenerator</span><a href="#161560">codeGenerator</a></span>.<span class="typed"><span class="type">()Unit</span><a href="#161662">initAssembly</a></span>

      <span class="typed"><span class="type">=&gt; scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.global.Symbol,GenMSIL.this.global.icodes.IClass]</span><a href="../icode/ICodes.scala.html#32305">classes</a></span>.<span class="typed"><span class="type">=&gt; Iterator[GenMSIL.this.global.icodes.IClass]</span><a id="24244">values</a></span> <span class="typed"><span class="type">((GenMSIL.this.global.icodes.IClass) =&gt; Unit)Unit</span><a id="32202">foreach</a></span> <span class="typed"><span class="type">GenMSIL.this.BytecodeGenerator</span><a href="#161560">codeGenerator</a></span>.<span class="typed"><span class="type">(GenMSIL.this.global.icodes.IClass)Unit</span><a href="#161754">createTypeBuilder</a></span>
      <span class="typed"><span class="type">=&gt; scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.global.Symbol,GenMSIL.this.global.icodes.IClass]</span><a href="../icode/ICodes.scala.html#32305">classes</a></span>.<span class="typed"><span class="type">=&gt; Iterator[GenMSIL.this.global.icodes.IClass]</span><a id="24244">values</a></span> <span class="typed"><span class="type">((GenMSIL.this.global.icodes.IClass) =&gt; Unit)Unit</span><a id="32202">foreach</a></span> <span class="typed"><span class="type">GenMSIL.this.BytecodeGenerator</span><a href="#161560">codeGenerator</a></span>.<span class="typed"><span class="type">(GenMSIL.this.global.icodes.IClass)Unit</span><a href="#161755">createClassMembers</a></span>

      <span class="keyword">try</span> {
        <span class="typed"><span class="type">=&gt; scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.global.Symbol,GenMSIL.this.global.icodes.IClass]</span><a href="../icode/ICodes.scala.html#32305">classes</a></span>.<span class="typed"><span class="type">=&gt; Iterator[GenMSIL.this.global.icodes.IClass]</span><a id="24244">values</a></span> <span class="typed"><span class="type">((GenMSIL.this.global.icodes.IClass) =&gt; Unit)Unit</span><a id="32202">foreach</a></span> <span class="typed"><span class="type">GenMSIL.this.BytecodeGenerator</span><a href="#161560">codeGenerator</a></span>.<span class="typed"><span class="type">(GenMSIL.this.global.icodes.IClass)Unit</span><a href="#161668">genClass</a></span>
      } <span class="keyword">finally</span> {
        <span class="typed"><span class="type">GenMSIL.this.BytecodeGenerator</span><a href="#161560">codeGenerator</a></span>.<span class="typed"><span class="type">()Unit</span><a href="#161666">writeAssembly</a></span>
      }
    }

    <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">(GenMSIL.this.global.CompilationUnit)Unit</span><a id="161549">apply</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.CompilationUnit</span><a id="161797">unit</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.CompilationUnit</span><a href="../../CompilationUnits.scala.html#22571">CompilationUnit</a></span>) {
      <span class="typed"><span class="type">(String)Nothing</span><a href="../../Global.scala.html#21214">abort</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;MSIL works on icode classes, not on compilation units!&quot;)</span><span class="string">&quot;MSIL works on icode classes, not on compilation units!&quot;</span></span>)
    }
  }

  <span class="comment">/**
   * MSIL bytecode generator.
   *
   */</span>
  <span class="keyword">class</span> <span class="typed"><span class="type">class BytecodeGenerator extends java.lang.Object with ScalaObject</span><a id="83577">BytecodeGenerator</a></span> {

    <span class="keyword">val</span> <span class="typed"><span class="type">java.lang.String</span><span id="161567"><a id="161566">MODULE_INSTANCE_NAME</a></span></span> = <span class="typed"><span class="type">java.lang.String(&quot;MODULE$&quot;)</span><span class="string">&quot;MODULE$&quot;</span></span>

    <span class="keyword">import</span> clrTypes.{VOID =&gt; MVOID, BOOLEAN =&gt; MBOOL, UBYTE =&gt; MBYTE, SHORT =&gt; MSHORT,
                   CHAR =&gt; MCHAR, INT =&gt; MINT, LONG =&gt; MLONG, FLOAT =&gt; MFLOAT,
                   DOUBLE =&gt; MDOUBLE, OBJECT =&gt; MOBJECT, STRING =&gt; MSTRING,
                   STRING_ARRAY =&gt; MSTRING_ARRAY, SCALA_SYMTAB_ATTR =&gt; SYMTAB_ATTRIBUTE,
                   SYMTAB_CONSTR =&gt; SYMTAB_ATTRIBUTE_CONSTRUCTOR,
                   SYMTAB_DEFAULT_CONSTR =&gt; SYMTAB_ATTRIBUTE_EMPTY_CONSTRUCTOR}

    <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><span id="161570"><a id="161569">EXCEPTION</a></span></span> = <span class="typed"><span class="type">object GenMSIL.this.global.loaders.clrTypes</span><a href="../../symtab/SymbolLoaders.scala.html#34365">clrTypes</a></span>.<span class="typed"><span class="type">(String)ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35401">getType</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;System.Exception&quot;)</span><span class="string">&quot;System.Exception&quot;</span></span>)
    <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><span id="161572"><a id="161571">MBYTE_ARRAY</a></span></span> = <span class="typed"><span class="type">object GenMSIL.this.global.loaders.clrTypes</span><a href="../../symtab/SymbolLoaders.scala.html#34365">clrTypes</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.Type)ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35403">mkArrayType</a></span>(<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35318">MBYTE</a></span>)

    <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><span id="161574"><a id="161573">ICLONEABLE</a></span></span> = <span class="typed"><span class="type">object GenMSIL.this.global.loaders.clrTypes</span><a href="../../symtab/SymbolLoaders.scala.html#34365">clrTypes</a></span>.<span class="typed"><span class="type">(String)ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35401">getType</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;System.ICloneable&quot;)</span><span class="string">&quot;System.ICloneable&quot;</span></span>)
    <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.MethodInfo</span><span id="161576"><a id="161575">MEMBERWISE_CLONE</a></span></span> = <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35360">MOBJECT</a></span>.<span class="typed"><span class="type">(java.lang.String,Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.MethodInfo</span><a id="35245">GetMethod</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;MemberwiseClone&quot;)</span><span class="string">&quot;MemberwiseClone&quot;</span></span>, <span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.Type</span><a id="34227">MsilType</a></span>.<span class="typed"><span class="type">Array[ch.epfl.lamp.compiler.msil.Type]</span><a id="35178">EmptyTypes</a></span>)

    <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><span id="161578"><a id="161577">MMONITOR</a></span></span>       = <span class="typed"><span class="type">object GenMSIL.this.global.loaders.clrTypes</span><a href="../../symtab/SymbolLoaders.scala.html#34365">clrTypes</a></span>.<span class="typed"><span class="type">(String)ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35401">getType</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;System.Threading.Monitor&quot;)</span><span class="string">&quot;System.Threading.Monitor&quot;</span></span>)
    <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.MethodInfo</span><span id="161580"><a id="161579">MMONITOR_ENTER</a></span></span> = <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="#161577">MMONITOR</a></span>.<span class="typed"><span class="type">(java.lang.String,Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.MethodInfo</span><a id="35245">GetMethod</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;Enter&quot;)</span><span class="string">&quot;Enter&quot;</span></span>, <span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.Type*)Array[ch.epfl.lamp.compiler.msil.Type]</span><span id="21530"><a id="1073">Array</a></span></span>(<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35360">MOBJECT</a></span>))
    <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.MethodInfo</span><span id="161582"><a id="161581">MMONITOR_EXIT</a></span></span>  = <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="#161577">MMONITOR</a></span>.<span class="typed"><span class="type">(java.lang.String,Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.MethodInfo</span><a id="35245">GetMethod</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;Exit&quot;)</span><span class="string">&quot;Exit&quot;</span></span>, <span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.Type*)Array[ch.epfl.lamp.compiler.msil.Type]</span><span id="21530"><a id="1073">Array</a></span></span>(<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35360">MOBJECT</a></span>))

    <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><span id="161584"><a id="161583">MSTRING_BUILDER</a></span></span> = <span class="typed"><span class="type">object GenMSIL.this.global.loaders.clrTypes</span><a href="../../symtab/SymbolLoaders.scala.html#34365">clrTypes</a></span>.<span class="typed"><span class="type">(String)ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35401">getType</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;System.Text.StringBuilder&quot;)</span><span class="string">&quot;System.Text.StringBuilder&quot;</span></span>)
    <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.ConstructorInfo</span><span id="161586"><a id="161585">MSTRING_BUILDER_CONSTR</a></span></span> = <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="#161583">MSTRING_BUILDER</a></span>.<span class="typed"><span class="type">(Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.ConstructorInfo</span><a id="35242">GetConstructor</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.Type</span><a id="34227">MsilType</a></span>.<span class="typed"><span class="type">Array[ch.epfl.lamp.compiler.msil.Type]</span><a id="35178">EmptyTypes</a></span>)
    <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.MethodInfo</span><span id="161588"><a id="161587">MSTRING_BUILDER_TOSTRING</a></span></span> = <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="#161583">MSTRING_BUILDER</a></span>.<span class="typed"><span class="type">(java.lang.String,Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.MethodInfo</span><a id="35245">GetMethod</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;ToString&quot;)</span><span class="string">&quot;ToString&quot;</span></span>,
                                                             <span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.Type</span><a id="34227">MsilType</a></span>.<span class="typed"><span class="type">Array[ch.epfl.lamp.compiler.msil.Type]</span><a id="35178">EmptyTypes</a></span>)

    <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.MethodInfo</span><span id="161590"><a id="161589">TYPE_FROM_HANDLE</a></span></span> =
      <span class="typed"><span class="type">object GenMSIL.this.global.loaders.clrTypes</span><a href="../../symtab/SymbolLoaders.scala.html#34365">clrTypes</a></span>.<span class="typed"><span class="type">(String)ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35401">getType</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;System.Type&quot;)</span><span class="string">&quot;System.Type&quot;</span></span>).<span class="typed"><span class="type">(java.lang.String,Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.MethodInfo</span><a id="35245">GetMethod</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;GetTypeFromHandle&quot;)</span><span class="string">&quot;GetTypeFromHandle&quot;</span></span>, <span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.Type*)Array[ch.epfl.lamp.compiler.msil.Type]</span><span id="21530"><a id="1073">Array</a></span></span>(<span class="typed"><span class="type">object GenMSIL.this.global.loaders.clrTypes</span><a href="../../symtab/SymbolLoaders.scala.html#34365">clrTypes</a></span>.<span class="typed"><span class="type">(String)ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35401">getType</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;System.RuntimeTypeHandle&quot;)</span><span class="string">&quot;System.RuntimeTypeHandle&quot;</span></span>)))

    <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><span id="161592"><a id="161591">INT_PTR</a></span></span> = <span class="typed"><span class="type">object GenMSIL.this.global.loaders.clrTypes</span><a href="../../symtab/SymbolLoaders.scala.html#34365">clrTypes</a></span>.<span class="typed"><span class="type">(String)ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35401">getType</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;System.IntPtr&quot;)</span><span class="string">&quot;System.IntPtr&quot;</span></span>)

    <span class="keyword">val</span> <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><span id="161594"><a id="161593">JOBJECT</a></span></span> = <span class="typed"><span class="type">object GenMSIL.this.global.definitions</span><a href="../../symtab/Definitions.scala.html#22259">definitions</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="../../symtab/Definitions.scala.html#25778">ObjectClass</a></span>
    <span class="keyword">val</span> <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><span id="161596"><a id="161595">JSTRING</a></span></span> = <span class="typed"><span class="type">object GenMSIL.this.global.definitions</span><a href="../../symtab/Definitions.scala.html#22259">definitions</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="../../symtab/Definitions.scala.html#25802">StringClass</a></span>

    <span class="keyword">var</span> <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><span id="161599"><span id="161597"><span id="161598"><a id="162465">JSTRING_SUBSTRING_INT_INT</a></span></span></span></span>: <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="../../symtab/Symbols.scala.html#21866">Symbol</a></span> = _

    <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><span id="161601"><a id="161600">SystemConvert</a></span></span> = <span class="typed"><span class="type">object GenMSIL.this.global.loaders.clrTypes</span><a href="../../symtab/SymbolLoaders.scala.html#34365">clrTypes</a></span>.<span class="typed"><span class="type">(String)ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35401">getType</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;System.Convert&quot;)</span><span class="string">&quot;System.Convert&quot;</span></span>)

    <span class="keyword">val</span> <span class="typed"><span class="type">Array[ch.epfl.lamp.compiler.msil.Type]</span><span id="161603"><a id="161602">objParam</a></span></span> = <span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.Type*)Array[ch.epfl.lamp.compiler.msil.Type]</span><span id="21530"><a id="1073">Array</a></span></span>(<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35360">MOBJECT</a></span>)

<span class="comment">//     val toBool:   MethodInfo = SystemConvert.GetMethod(&quot;ToBoolean&quot;, objParam)</span>
    <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.MethodInfo</span><span id="161605"><a id="161604">toByte</a></span></span>:   <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.MethodInfo</span><a id="34319">MethodInfo</a></span> = <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="#161600">SystemConvert</a></span>.<span class="typed"><span class="type">(java.lang.String,Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.MethodInfo</span><a id="35245">GetMethod</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;ToByte&quot;)</span><span class="string">&quot;ToByte&quot;</span></span>, <span class="typed"><span class="type">=&gt; Array[ch.epfl.lamp.compiler.msil.Type]</span><a href="#161602">objParam</a></span>)
    <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.MethodInfo</span><span id="161607"><a id="161606">toShort</a></span></span>:  <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.MethodInfo</span><a id="34319">MethodInfo</a></span> = <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="#161600">SystemConvert</a></span>.<span class="typed"><span class="type">(java.lang.String,Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.MethodInfo</span><a id="35245">GetMethod</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;ToInt16&quot;)</span><span class="string">&quot;ToInt16&quot;</span></span>, <span class="typed"><span class="type">=&gt; Array[ch.epfl.lamp.compiler.msil.Type]</span><a href="#161602">objParam</a></span>)
    <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.MethodInfo</span><span id="161609"><a id="161608">toChar</a></span></span>:   <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.MethodInfo</span><a id="34319">MethodInfo</a></span> = <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="#161600">SystemConvert</a></span>.<span class="typed"><span class="type">(java.lang.String,Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.MethodInfo</span><a id="35245">GetMethod</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;ToChar&quot;)</span><span class="string">&quot;ToChar&quot;</span></span>, <span class="typed"><span class="type">=&gt; Array[ch.epfl.lamp.compiler.msil.Type]</span><a href="#161602">objParam</a></span>)
    <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.MethodInfo</span><span id="161611"><a id="161610">toInt</a></span></span>:    <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.MethodInfo</span><a id="34319">MethodInfo</a></span> = <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="#161600">SystemConvert</a></span>.<span class="typed"><span class="type">(java.lang.String,Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.MethodInfo</span><a id="35245">GetMethod</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;ToInt32&quot;)</span><span class="string">&quot;ToInt32&quot;</span></span>, <span class="typed"><span class="type">=&gt; Array[ch.epfl.lamp.compiler.msil.Type]</span><a href="#161602">objParam</a></span>)
    <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.MethodInfo</span><span id="161613"><a id="161612">toLong</a></span></span>:   <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.MethodInfo</span><a id="34319">MethodInfo</a></span> = <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="#161600">SystemConvert</a></span>.<span class="typed"><span class="type">(java.lang.String,Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.MethodInfo</span><a id="35245">GetMethod</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;ToInt64&quot;)</span><span class="string">&quot;ToInt64&quot;</span></span>, <span class="typed"><span class="type">=&gt; Array[ch.epfl.lamp.compiler.msil.Type]</span><a href="#161602">objParam</a></span>)
    <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.MethodInfo</span><span id="161615"><a id="161614">toFloat</a></span></span>:  <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.MethodInfo</span><a id="34319">MethodInfo</a></span> = <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="#161600">SystemConvert</a></span>.<span class="typed"><span class="type">(java.lang.String,Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.MethodInfo</span><a id="35245">GetMethod</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;ToSingle&quot;)</span><span class="string">&quot;ToSingle&quot;</span></span>, <span class="typed"><span class="type">=&gt; Array[ch.epfl.lamp.compiler.msil.Type]</span><a href="#161602">objParam</a></span>)
    <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.MethodInfo</span><span id="161617"><a id="161616">toDouble</a></span></span>: <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.MethodInfo</span><a id="34319">MethodInfo</a></span> = <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="#161600">SystemConvert</a></span>.<span class="typed"><span class="type">(java.lang.String,Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.MethodInfo</span><a id="35245">GetMethod</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;ToDouble&quot;)</span><span class="string">&quot;ToDouble&quot;</span></span>, <span class="typed"><span class="type">=&gt; Array[ch.epfl.lamp.compiler.msil.Type]</span><a href="#161602">objParam</a></span>)

    <span class="comment">//val boxedUnit: FieldInfo = msilType(definitions.BoxedUnitModule.info).GetField(&quot;UNIT&quot;)</span>
    <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.FieldInfo</span><span id="161619"><a id="161618">boxedUnit</a></span></span>: <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.FieldInfo</span><a id="34343">FieldInfo</a></span> = <span class="typed"><span class="type">(GenMSIL.this.global.loaders.clrTypes.global.Symbol)ch.epfl.lamp.compiler.msil.FieldInfo</span><a href="../../symtab/clr/CLRTypes.scala.html#35393" id="24239">fields</a></span>(<span class="typed"><span class="type">object GenMSIL.this.global.definitions</span><a href="../../symtab/Definitions.scala.html#22259">definitions</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="../../symtab/Definitions.scala.html#26092">BoxedUnit_UNIT</a></span>.<span class="typed"><span class="type">GenMSIL.this.global.loaders.clrTypes.global.Symbol</span><a id="3503">asInstanceOf</a></span>[clrTypes.global.<span class="typed"><span class="type">GenMSIL.this.global.loaders.clrTypes.global.Symbol</span><a href="../../symtab/Symbols.scala.html#21866">Symbol</a></span>])

    <span class="comment">// Scala attributes</span>
    <span class="comment">// symtab.Definitions -&gt; object (singleton..)</span>
    <span class="keyword">val</span> <span class="typed"><span class="type">GenMSIL.this.global.Type</span><span id="161621"><a id="161620">SerializableAttr</a></span></span> = <span class="typed"><span class="type">object GenMSIL.this.global.definitions</span><a href="../../symtab/Definitions.scala.html#22259">definitions</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="../../symtab/Definitions.scala.html#26095">SerializableAttr</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Type</span><a href="../../symtab/Symbols.scala.html#25230">tpe</a></span>
    <span class="keyword">val</span> <span class="typed"><span class="type">GenMSIL.this.global.Type</span><span id="161623"><a id="161622">CloneableAttr</a></span></span>    = <span class="typed"><span class="type">object GenMSIL.this.global.definitions</span><a href="../../symtab/Definitions.scala.html#22259">definitions</a></span>.<span class="typed"><span class="type">(GenMSIL.this.global.Name)GenMSIL.this.global.Symbol</span><a href="../../symtab/Definitions.scala.html#26110">getClass</a></span>(<span class="typed"><span class="type">implicit scala.tools.nsc.symtab.Names.view : (String)GenMSIL.this.global.Name</span><a href="../../symtab/Names.scala.html#21102" class="string">&quot;scala.cloneable&quot;</a></span>).<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Type</span><a href="../../symtab/Symbols.scala.html#25230">tpe</a></span>
    <span class="keyword">val</span> <span class="typed"><span class="type">GenMSIL.this.global.Type</span><span id="161625"><a id="161624">TransientAtt</a></span></span>     = <span class="typed"><span class="type">object GenMSIL.this.global.definitions</span><a href="../../symtab/Definitions.scala.html#22259">definitions</a></span>.<span class="typed"><span class="type">(GenMSIL.this.global.Name)GenMSIL.this.global.Symbol</span><a href="../../symtab/Definitions.scala.html#26110">getClass</a></span>(<span class="typed"><span class="type">implicit scala.tools.nsc.symtab.Names.view : (String)GenMSIL.this.global.Name</span><a href="../../symtab/Names.scala.html#21102" class="string">&quot;scala.transient&quot;</a></span>).<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Type</span><a href="../../symtab/Symbols.scala.html#25230">tpe</a></span>
    <span class="comment">// remoting: the architectures are too different, no mapping (no portable code</span>
    <span class="comment">// possible)</span>

    <span class="comment">// java instance methods that are mapped to static methods in .net</span>
    <span class="comment">// these will need to be called with OpCodes.Call (not Callvirt)</span>
    <span class="keyword">val</span> <span class="typed"><span class="type">scala.collection.mutable.HashSet[GenMSIL.this.global.Symbol]</span><span id="161627"><a id="161626">dynToStatMapped</a></span></span>: <span class="typed"><span class="type">scala.collection.mutable.HashSet[GenMSIL.this.global.Symbol]</span><a id="19895">HashSet</a></span>[Symbol] = <span class="typed"><span class="type">scala.collection.mutable.HashSet[GenMSIL.this.global.Symbol]</span><span class="keyword">new</span></span> <span class="typed"><span class="type">scala.collection.mutable.HashSet[GenMSIL.this.global.Symbol]</span><a id="19895">HashSet</a></span>()

    <span class="typed"><span class="type">()Unit</span><a href="#161628">initMappings</a></span>()
    <span class="comment">// ********************************************************************</span>
    <span class="comment">// Create the mappings</span>
    <span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">()Unit</span><a id="161628">initMappings</a></span>() {
      <span class="typed"><span class="type">(GenMSIL.this.global.Symbol,ch.epfl.lamp.compiler.msil.Type)Unit</span><a href="#161753">mapType</a></span>(<span class="typed"><span class="type">object GenMSIL.this.global.definitions</span><a href="../../symtab/Definitions.scala.html#22259">definitions</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="../../symtab/Definitions.scala.html#25769">AnyClass</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35360">MOBJECT</a></span>)
      <span class="typed"><span class="type">(GenMSIL.this.global.Symbol,ch.epfl.lamp.compiler.msil.Type)Unit</span><a href="#161753">mapType</a></span>(<span class="typed"><span class="type">object GenMSIL.this.global.definitions</span><a href="../../symtab/Definitions.scala.html#22259">definitions</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="../../symtab/Definitions.scala.html#25775">AnyRefClass</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35360">MOBJECT</a></span>)
      <span class="comment">//mapType(definitions.NullClass, clrTypes.getType(&quot;scala.AllRef$&quot;))</span>
      <span class="comment">//mapType(definitions.NothingClass, clrTypes.getType(&quot;scala.All$&quot;))</span>
      <span class="comment">// FIXME: for some reason the upper two lines map to null</span>
      <span class="typed"><span class="type">(GenMSIL.this.global.Symbol,ch.epfl.lamp.compiler.msil.Type)Unit</span><a href="#161753">mapType</a></span>(<span class="typed"><span class="type">object GenMSIL.this.global.definitions</span><a href="../../symtab/Definitions.scala.html#22259">definitions</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="../../symtab/Definitions.scala.html#25782">NullClass</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="#161569">EXCEPTION</a></span>)
      <span class="typed"><span class="type">(GenMSIL.this.global.Symbol,ch.epfl.lamp.compiler.msil.Type)Unit</span><a href="#161753">mapType</a></span>(<span class="typed"><span class="type">object GenMSIL.this.global.definitions</span><a href="../../symtab/Definitions.scala.html#22259">definitions</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="../../symtab/Definitions.scala.html#25785">NothingClass</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="#161569">EXCEPTION</a></span>)

      <span class="keyword">val</span> <span class="typed"><span class="type">Array[GenMSIL.this.global.Type]</span><a id="162792">jEmpty</a></span> = <span class="typed"><span class="type">Array[GenMSIL.this.global.Type]</span><span class="keyword">new</span></span> <span class="typed"><span class="type">Array[GenMSIL.this.global.Type]</span><a id="1072">Array</a></span>[Type](<span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>)
      <span class="keyword">val</span> <span class="typed"><span class="type">Array[GenMSIL.this.global.Type]</span><a id="162793">jString1</a></span> = <span class="typed"><span class="type">(GenMSIL.this.global.Type*)Array[GenMSIL.this.global.Type]</span><span id="21530"><a id="1073">Array</a></span></span>(<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="#161595">JSTRING</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Type</span><a href="../../symtab/Symbols.scala.html#25230">tpe</a></span>)
      <span class="keyword">val</span> <span class="typed"><span class="type">Array[GenMSIL.this.global.Type]</span><a id="162794">jInt1</a></span> = <span class="typed"><span class="type">(GenMSIL.this.global.Type*)Array[GenMSIL.this.global.Type]</span><span id="21530"><a id="1073">Array</a></span></span>(<span class="typed"><span class="type">object GenMSIL.this.global.definitions</span><a href="../../symtab/Definitions.scala.html#22259">definitions</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="../../symtab/Definitions.scala.html#25839">IntClass</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Type</span><a href="../../symtab/Symbols.scala.html#25230">tpe</a></span>)
      <span class="keyword">val</span> <span class="typed"><span class="type">Array[GenMSIL.this.global.Type]</span><a id="162795">jInt2</a></span> = <span class="typed"><span class="type">(GenMSIL.this.global.Type*)Array[GenMSIL.this.global.Type]</span><span id="21530"><a id="1073">Array</a></span></span>(<span class="typed"><span class="type">object GenMSIL.this.global.definitions</span><a href="../../symtab/Definitions.scala.html#22259">definitions</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="../../symtab/Definitions.scala.html#25839">IntClass</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Type</span><a href="../../symtab/Symbols.scala.html#25230">tpe</a></span>, <span class="typed"><span class="type">object GenMSIL.this.global.definitions</span><a href="../../symtab/Definitions.scala.html#22259">definitions</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="../../symtab/Definitions.scala.html#25839">IntClass</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Type</span><a href="../../symtab/Symbols.scala.html#25230">tpe</a></span>)
      <span class="keyword">val</span> <span class="typed"><span class="type">Array[GenMSIL.this.global.Type]</span><a id="162796">jLong1</a></span> = <span class="typed"><span class="type">(GenMSIL.this.global.Type*)Array[GenMSIL.this.global.Type]</span><span id="21530"><a id="1073">Array</a></span></span>(<span class="typed"><span class="type">object GenMSIL.this.global.definitions</span><a href="../../symtab/Definitions.scala.html#22259">definitions</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="../../symtab/Definitions.scala.html#25846">LongClass</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Type</span><a href="../../symtab/Symbols.scala.html#25230">tpe</a></span>)
      <span class="keyword">val</span> <span class="typed"><span class="type">Array[GenMSIL.this.global.Type]</span><a id="162797">jStringInt</a></span> = <span class="typed"><span class="type">(GenMSIL.this.global.Type*)Array[GenMSIL.this.global.Type]</span><span id="21530"><a id="1073">Array</a></span></span>(<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="#161595">JSTRING</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Type</span><a href="../../symtab/Symbols.scala.html#25230">tpe</a></span>, <span class="typed"><span class="type">object GenMSIL.this.global.definitions</span><a href="../../symtab/Definitions.scala.html#22259">definitions</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="../../symtab/Definitions.scala.html#25839">IntClass</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Type</span><a href="../../symtab/Symbols.scala.html#25230">tpe</a></span>)
      <span class="keyword">val</span> <span class="typed"><span class="type">Array[GenMSIL.this.global.Type]</span><a id="162798">jChar2</a></span> = <span class="typed"><span class="type">(GenMSIL.this.global.Type*)Array[GenMSIL.this.global.Type]</span><span id="21530"><a id="1073">Array</a></span></span>(<span class="typed"><span class="type">object GenMSIL.this.global.definitions</span><a href="../../symtab/Definitions.scala.html#22259">definitions</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="../../symtab/Definitions.scala.html#25836">CharClass</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Type</span><a href="../../symtab/Symbols.scala.html#25230">tpe</a></span>, <span class="typed"><span class="type">object GenMSIL.this.global.definitions</span><a href="../../symtab/Definitions.scala.html#22259">definitions</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="../../symtab/Definitions.scala.html#25836">CharClass</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Type</span><a href="../../symtab/Symbols.scala.html#25230">tpe</a></span>)

      <span class="keyword">val</span> <span class="typed"><span class="type">Array[ch.epfl.lamp.compiler.msil.Type]</span><a id="162799">mObject1</a></span> = <span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.Type*)Array[ch.epfl.lamp.compiler.msil.Type]</span><span id="21530"><a id="1073">Array</a></span></span>(<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35360">MOBJECT</a></span>)
      <span class="keyword">val</span> <span class="typed"><span class="type">Array[ch.epfl.lamp.compiler.msil.Type]</span><a id="162800">mString1</a></span> = <span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.Type*)Array[ch.epfl.lamp.compiler.msil.Type]</span><span id="21530"><a id="1073">Array</a></span></span>(<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35363">MSTRING</a></span>)
      <span class="keyword">val</span> <span class="typed"><span class="type">Array[ch.epfl.lamp.compiler.msil.Type]</span><a id="162801">mString2</a></span> = <span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.Type*)Array[ch.epfl.lamp.compiler.msil.Type]</span><span id="21530"><a id="1073">Array</a></span></span>(<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35363">MSTRING</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35363">MSTRING</a></span>)
      <span class="keyword">val</span> <span class="typed"><span class="type">Array[ch.epfl.lamp.compiler.msil.Type]</span><a id="162802">mChar1</a></span> = <span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.Type*)Array[ch.epfl.lamp.compiler.msil.Type]</span><span id="21530"><a id="1073">Array</a></span></span>(<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35327">MCHAR</a></span>)
      <span class="keyword">val</span> <span class="typed"><span class="type">Array[ch.epfl.lamp.compiler.msil.Type]</span><a id="162803">mCharInt</a></span> = <span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.Type*)Array[ch.epfl.lamp.compiler.msil.Type]</span><span id="21530"><a id="1073">Array</a></span></span>(<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35327">MCHAR</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35330">MINT</a></span>)

      <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)Unit</span><a href="#161598">JSTRING_SUBSTRING_INT_INT</a></span> = <span class="typed"><span class="type">(GenMSIL.this.global.Symbol,GenMSIL.this.global.Name,Array[GenMSIL.this.global.Type])GenMSIL.this.global.Symbol</span><a href="#161782">lookupMethod</a></span>(<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="#161595">JSTRING</a></span>, <span class="typed"><span class="type">implicit scala.tools.nsc.symtab.Names.view : (String)GenMSIL.this.global.Name</span><a href="../../symtab/Names.scala.html#21102" class="string">&quot;substring&quot;</a></span>, <span class="typed"><span class="type">Array[GenMSIL.this.global.Type]</span><a href="#162795">jInt2</a></span>)

      <span class="typed"><span class="type">(GenMSIL.this.global.Symbol,GenMSIL.this.global.Name,ch.epfl.lamp.compiler.msil.Type,String)Unit</span><a href="#161781">mapMethod</a></span>(<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="#161593">JOBJECT</a></span>, <span class="typed"><span class="type">implicit scala.tools.nsc.symtab.Names.view : (String)GenMSIL.this.global.Name</span><a href="../../symtab/Names.scala.html#21102" class="string">&quot;clone&quot;</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35360">MOBJECT</a></span>, <span class="typed"><span class="type">java.lang.String(&quot;MemberwiseClone&quot;)</span><span class="string">&quot;MemberwiseClone&quot;</span></span>)
      <span class="typed"><span class="type">(GenMSIL.this.global.Symbol,GenMSIL.this.global.Name,ch.epfl.lamp.compiler.msil.Type,String)Unit</span><a href="#161781">mapMethod</a></span>(<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="#161593">JOBJECT</a></span>, <span class="typed"><span class="type">object GenMSIL.this.global.nme</span><a href="../../symtab/StdNames.scala.html#22317">nme</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Name</span><a href="../../symtab/StdNames.scala.html#30810">equals_</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35360">MOBJECT</a></span>, <span class="typed"><span class="type">java.lang.String(&quot;Equals&quot;)</span><span class="string">&quot;Equals&quot;</span></span>)
      <span class="typed"><span class="type">(GenMSIL.this.global.Symbol,GenMSIL.this.global.Name,ch.epfl.lamp.compiler.msil.Type,String)Unit</span><a href="#161781">mapMethod</a></span>(<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="#161593">JOBJECT</a></span>, <span class="typed"><span class="type">object GenMSIL.this.global.nme</span><a href="../../symtab/StdNames.scala.html#22317">nme</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Name</span><a href="../../symtab/StdNames.scala.html#30848">hashCode_</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35360">MOBJECT</a></span>, <span class="typed"><span class="type">java.lang.String(&quot;GetHashCode&quot;)</span><span class="string">&quot;GetHashCode&quot;</span></span>)
      <span class="typed"><span class="type">(GenMSIL.this.global.Symbol,GenMSIL.this.global.Name,ch.epfl.lamp.compiler.msil.Type,String)Unit</span><a href="#161781">mapMethod</a></span>(<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="#161593">JOBJECT</a></span>, <span class="typed"><span class="type">object GenMSIL.this.global.nme</span><a href="../../symtab/StdNames.scala.html#22317">nme</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Name</span><a href="../../symtab/StdNames.scala.html#30936">toString_</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35360">MOBJECT</a></span>, <span class="typed"><span class="type">java.lang.String(&quot;ToString&quot;)</span><span class="string">&quot;ToString&quot;</span></span>)
      <span class="typed"><span class="type">(GenMSIL.this.global.Symbol,GenMSIL.this.global.Name,ch.epfl.lamp.compiler.msil.Type,String)Unit</span><a href="#161781">mapMethod</a></span>(<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="#161593">JOBJECT</a></span>, <span class="typed"><span class="type">object GenMSIL.this.global.nme</span><a href="../../symtab/StdNames.scala.html#22317">nme</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Name</span><a href="../../symtab/StdNames.scala.html#30828">finalize_</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35360">MOBJECT</a></span>, <span class="typed"><span class="type">java.lang.String(&quot;Finalize&quot;)</span><span class="string">&quot;Finalize&quot;</span></span>)
      <span class="typed"><span class="type">(GenMSIL.this.global.Symbol,GenMSIL.this.global.Name,Array[GenMSIL.this.global.Type],ch.epfl.lamp.compiler.msil.Type,String,Array[ch.epfl.lamp.compiler.msil.Type])Unit</span><a href="#161779">mapMethod</a></span>(<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="#161593">JOBJECT</a></span>, <span class="typed"><span class="type">object GenMSIL.this.global.nme</span><a href="../../symtab/StdNames.scala.html#22317">nme</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Name</span><a href="../../symtab/StdNames.scala.html#30966">wait_</a></span>, <span class="typed"><span class="type">Array[GenMSIL.this.global.Type]</span><a href="#162792">jEmpty</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="#161577">MMONITOR</a></span>, <span class="typed"><span class="type">java.lang.String(&quot;Wait&quot;)</span><span class="string">&quot;Wait&quot;</span></span>, <span class="typed"><span class="type">Array[ch.epfl.lamp.compiler.msil.Type]</span><a href="#162799">mObject1</a></span>)
      <span class="typed"><span class="type">(GenMSIL.this.global.Symbol,GenMSIL.this.global.Name,Array[GenMSIL.this.global.Type],ch.epfl.lamp.compiler.msil.Type,String,Array[ch.epfl.lamp.compiler.msil.Type])Unit</span><a href="#161779">mapMethod</a></span>(<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="#161593">JOBJECT</a></span>, <span class="typed"><span class="type">object GenMSIL.this.global.nme</span><a href="../../symtab/StdNames.scala.html#22317">nme</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Name</span><a href="../../symtab/StdNames.scala.html#30966">wait_</a></span>, <span class="typed"><span class="type">Array[GenMSIL.this.global.Type]</span><a href="#162796">jLong1</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="#161577">MMONITOR</a></span>, <span class="typed"><span class="type">java.lang.String(&quot;Wait&quot;)</span><span class="string">&quot;Wait&quot;</span></span>, <span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.Type*)Array[ch.epfl.lamp.compiler.msil.Type]</span><span id="21530"><a id="1073">Array</a></span></span>(<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35360">MOBJECT</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35330">MINT</a></span>))
      <span class="typed"><span class="type">(GenMSIL.this.global.Symbol,GenMSIL.this.global.Name,Array[GenMSIL.this.global.Type],ch.epfl.lamp.compiler.msil.Type,String,Array[ch.epfl.lamp.compiler.msil.Type])Unit</span><a href="#161779">mapMethod</a></span>(<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="#161593">JOBJECT</a></span>, <span class="typed"><span class="type">object GenMSIL.this.global.nme</span><a href="../../symtab/StdNames.scala.html#22317">nme</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Name</span><a href="../../symtab/StdNames.scala.html#30894">notify_</a></span>, <span class="typed"><span class="type">Array[GenMSIL.this.global.Type]</span><a href="#162792">jEmpty</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="#161577">MMONITOR</a></span>, <span class="typed"><span class="type">java.lang.String(&quot;Pulse&quot;)</span><span class="string">&quot;Pulse&quot;</span></span>, <span class="typed"><span class="type">Array[ch.epfl.lamp.compiler.msil.Type]</span><a href="#162799">mObject1</a></span>)
      <span class="typed"><span class="type">(GenMSIL.this.global.Symbol,GenMSIL.this.global.Name,Array[GenMSIL.this.global.Type],ch.epfl.lamp.compiler.msil.Type,String,Array[ch.epfl.lamp.compiler.msil.Type])Unit</span><a href="#161779">mapMethod</a></span>(<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="#161593">JOBJECT</a></span>, <span class="typed"><span class="type">object GenMSIL.this.global.nme</span><a href="../../symtab/StdNames.scala.html#22317">nme</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Name</span><a href="../../symtab/StdNames.scala.html#30896">notifyAll_</a></span>, <span class="typed"><span class="type">Array[GenMSIL.this.global.Type]</span><a href="#162792">jEmpty</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="#161577">MMONITOR</a></span>, <span class="typed"><span class="type">java.lang.String(&quot;PulseAll&quot;)</span><span class="string">&quot;PulseAll&quot;</span></span>, <span class="typed"><span class="type">Array[ch.epfl.lamp.compiler.msil.Type]</span><a href="#162799">mObject1</a></span>)

      <span class="typed"><span class="type">(GenMSIL.this.global.Symbol,GenMSIL.this.global.Name,ch.epfl.lamp.compiler.msil.Type,String)Unit</span><a href="#161781">mapMethod</a></span>(<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="#161595">JSTRING</a></span>, <span class="typed"><span class="type">implicit scala.tools.nsc.symtab.Names.view : (String)GenMSIL.this.global.Name</span><a href="../../symtab/Names.scala.html#21102" class="string">&quot;compareTo&quot;</a></span>,<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35363">MSTRING</a></span>, <span class="typed"><span class="type">java.lang.String(&quot;CompareTo&quot;)</span><span class="string">&quot;CompareTo&quot;</span></span>)
      <span class="typed"><span class="type">(GenMSIL.this.global.Symbol,GenMSIL.this.global.Name,ch.epfl.lamp.compiler.msil.Type,String)Unit</span><a href="#161781">mapMethod</a></span>(<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="#161595">JSTRING</a></span>, <span class="typed"><span class="type">implicit scala.tools.nsc.symtab.Names.view : (String)GenMSIL.this.global.Name</span><a href="../../symtab/Names.scala.html#21102" class="string">&quot;length&quot;</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35363">MSTRING</a></span>, <span class="typed"><span class="type">java.lang.String(&quot;get_Length&quot;)</span><span class="string">&quot;get_Length&quot;</span></span>)
      <span class="typed"><span class="type">(GenMSIL.this.global.Symbol,GenMSIL.this.global.Name,ch.epfl.lamp.compiler.msil.Type,String)Unit</span><a href="#161781">mapMethod</a></span>(<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="#161595">JSTRING</a></span>, <span class="typed"><span class="type">implicit scala.tools.nsc.symtab.Names.view : (String)GenMSIL.this.global.Name</span><a href="../../symtab/Names.scala.html#21102" class="string">&quot;charAt&quot;</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35363">MSTRING</a></span>, <span class="typed"><span class="type">java.lang.String(&quot;get_Chars&quot;)</span><span class="string">&quot;get_Chars&quot;</span></span>)

      <span class="typed"><span class="type">(GenMSIL.this.global.Symbol,GenMSIL.this.global.Name,Array[GenMSIL.this.global.Type],ch.epfl.lamp.compiler.msil.Type,String,Array[ch.epfl.lamp.compiler.msil.Type])Unit</span><a href="#161779">mapMethod</a></span>(<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="#161595">JSTRING</a></span>, <span class="typed"><span class="type">implicit scala.tools.nsc.symtab.Names.view : (String)GenMSIL.this.global.Name</span><a href="../../symtab/Names.scala.html#21102" class="string">&quot;concat&quot;</a></span>, <span class="typed"><span class="type">Array[GenMSIL.this.global.Type]</span><a href="#162793">jString1</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35363">MSTRING</a></span>, <span class="typed"><span class="type">java.lang.String(&quot;Concat&quot;)</span><span class="string">&quot;Concat&quot;</span></span>, <span class="typed"><span class="type">Array[ch.epfl.lamp.compiler.msil.Type]</span><a href="#162801">mString2</a></span>)
      <span class="typed"><span class="type">(GenMSIL.this.global.Symbol,GenMSIL.this.global.Name,Array[GenMSIL.this.global.Type],ch.epfl.lamp.compiler.msil.Type,String,Array[ch.epfl.lamp.compiler.msil.Type])Unit</span><a href="#161779">mapMethod</a></span>(<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="#161595">JSTRING</a></span>, <span class="typed"><span class="type">implicit scala.tools.nsc.symtab.Names.view : (String)GenMSIL.this.global.Name</span><a href="../../symtab/Names.scala.html#21102" class="string">&quot;indexOf&quot;</a></span>, <span class="typed"><span class="type">Array[GenMSIL.this.global.Type]</span><a href="#162794">jInt1</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35363">MSTRING</a></span>, <span class="typed"><span class="type">java.lang.String(&quot;IndexOf&quot;)</span><span class="string">&quot;IndexOf&quot;</span></span>, <span class="typed"><span class="type">Array[ch.epfl.lamp.compiler.msil.Type]</span><a href="#162802">mChar1</a></span>)
      <span class="typed"><span class="type">(GenMSIL.this.global.Symbol,GenMSIL.this.global.Name,Array[GenMSIL.this.global.Type],ch.epfl.lamp.compiler.msil.Type,String,Array[ch.epfl.lamp.compiler.msil.Type])Unit</span><a href="#161779">mapMethod</a></span>(<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="#161595">JSTRING</a></span>, <span class="typed"><span class="type">implicit scala.tools.nsc.symtab.Names.view : (String)GenMSIL.this.global.Name</span><a href="../../symtab/Names.scala.html#21102" class="string">&quot;indexOf&quot;</a></span>, <span class="typed"><span class="type">Array[GenMSIL.this.global.Type]</span><a href="#162795">jInt2</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35363">MSTRING</a></span>, <span class="typed"><span class="type">java.lang.String(&quot;IndexOf&quot;)</span><span class="string">&quot;IndexOf&quot;</span></span>, <span class="typed"><span class="type">Array[ch.epfl.lamp.compiler.msil.Type]</span><a href="#162803">mCharInt</a></span>)

      <span class="typed"><span class="type">(GenMSIL.this.global.Symbol,GenMSIL.this.global.Name,Array[GenMSIL.this.global.Type],ch.epfl.lamp.compiler.msil.Type,String)Unit</span><a href="#161780">mapMethod</a></span>(<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="#161595">JSTRING</a></span>, <span class="typed"><span class="type">implicit scala.tools.nsc.symtab.Names.view : (String)GenMSIL.this.global.Name</span><a href="../../symtab/Names.scala.html#21102" class="string">&quot;indexOf&quot;</a></span>, <span class="typed"><span class="type">Array[GenMSIL.this.global.Type]</span><a href="#162793">jString1</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35363">MSTRING</a></span>, <span class="typed"><span class="type">java.lang.String(&quot;IndexOf&quot;)</span><span class="string">&quot;IndexOf&quot;</span></span>)
      <span class="typed"><span class="type">(GenMSIL.this.global.Symbol,GenMSIL.this.global.Name,Array[GenMSIL.this.global.Type],ch.epfl.lamp.compiler.msil.Type,String)Unit</span><a href="#161780">mapMethod</a></span>(<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="#161595">JSTRING</a></span>, <span class="typed"><span class="type">implicit scala.tools.nsc.symtab.Names.view : (String)GenMSIL.this.global.Name</span><a href="../../symtab/Names.scala.html#21102" class="string">&quot;indexOf&quot;</a></span>, <span class="typed"><span class="type">Array[GenMSIL.this.global.Type]</span><a href="#162797">jStringInt</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35363">MSTRING</a></span>, <span class="typed"><span class="type">java.lang.String(&quot;IndexOf&quot;)</span><span class="string">&quot;IndexOf&quot;</span></span>)
      <span class="typed"><span class="type">(GenMSIL.this.global.Symbol,GenMSIL.this.global.Name,Array[GenMSIL.this.global.Type],ch.epfl.lamp.compiler.msil.Type,String,Array[ch.epfl.lamp.compiler.msil.Type])Unit</span><a href="#161779">mapMethod</a></span>(<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="#161595">JSTRING</a></span>, <span class="typed"><span class="type">implicit scala.tools.nsc.symtab.Names.view : (String)GenMSIL.this.global.Name</span><a href="../../symtab/Names.scala.html#21102" class="string">&quot;lastIndexOf&quot;</a></span>, <span class="typed"><span class="type">Array[GenMSIL.this.global.Type]</span><a href="#162794">jInt1</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35363">MSTRING</a></span>, <span class="typed"><span class="type">java.lang.String(&quot;LastIndexOf&quot;)</span><span class="string">&quot;LastIndexOf&quot;</span></span>, <span class="typed"><span class="type">Array[ch.epfl.lamp.compiler.msil.Type]</span><a href="#162802">mChar1</a></span>)
      <span class="typed"><span class="type">(GenMSIL.this.global.Symbol,GenMSIL.this.global.Name,Array[GenMSIL.this.global.Type],ch.epfl.lamp.compiler.msil.Type,String,Array[ch.epfl.lamp.compiler.msil.Type])Unit</span><a href="#161779">mapMethod</a></span>(<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="#161595">JSTRING</a></span>, <span class="typed"><span class="type">implicit scala.tools.nsc.symtab.Names.view : (String)GenMSIL.this.global.Name</span><a href="../../symtab/Names.scala.html#21102" class="string">&quot;lastIndexOf&quot;</a></span>, <span class="typed"><span class="type">Array[GenMSIL.this.global.Type]</span><a href="#162795">jInt2</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35363">MSTRING</a></span>, <span class="typed"><span class="type">java.lang.String(&quot;LastIndexOf&quot;)</span><span class="string">&quot;LastIndexOf&quot;</span></span>, <span class="typed"><span class="type">Array[ch.epfl.lamp.compiler.msil.Type]</span><a href="#162803">mCharInt</a></span>)
      <span class="typed"><span class="type">(GenMSIL.this.global.Symbol,GenMSIL.this.global.Name,Array[GenMSIL.this.global.Type],ch.epfl.lamp.compiler.msil.Type,String)Unit</span><a href="#161780">mapMethod</a></span>(<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="#161595">JSTRING</a></span>, <span class="typed"><span class="type">implicit scala.tools.nsc.symtab.Names.view : (String)GenMSIL.this.global.Name</span><a href="../../symtab/Names.scala.html#21102" class="string">&quot;lastIndexOf&quot;</a></span>, <span class="typed"><span class="type">Array[GenMSIL.this.global.Type]</span><a href="#162793">jString1</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35363">MSTRING</a></span>, <span class="typed"><span class="type">java.lang.String(&quot;LastIndexOf&quot;)</span><span class="string">&quot;LastIndexOf&quot;</span></span>)
      <span class="typed"><span class="type">(GenMSIL.this.global.Symbol,GenMSIL.this.global.Name,Array[GenMSIL.this.global.Type],ch.epfl.lamp.compiler.msil.Type,String)Unit</span><a href="#161780">mapMethod</a></span>(<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="#161595">JSTRING</a></span>, <span class="typed"><span class="type">implicit scala.tools.nsc.symtab.Names.view : (String)GenMSIL.this.global.Name</span><a href="../../symtab/Names.scala.html#21102" class="string">&quot;lastIndexOf&quot;</a></span>, <span class="typed"><span class="type">Array[GenMSIL.this.global.Type]</span><a href="#162797">jStringInt</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35363">MSTRING</a></span>, <span class="typed"><span class="type">java.lang.String(&quot;LastIndexOf&quot;)</span><span class="string">&quot;LastIndexOf&quot;</span></span>)

      <span class="typed"><span class="type">(GenMSIL.this.global.Symbol,GenMSIL.this.global.Name,Array[GenMSIL.this.global.Type],ch.epfl.lamp.compiler.msil.Type,String)Unit</span><a href="#161780">mapMethod</a></span>(<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="#161595">JSTRING</a></span>, <span class="typed"><span class="type">implicit scala.tools.nsc.symtab.Names.view : (String)GenMSIL.this.global.Name</span><a href="../../symtab/Names.scala.html#21102" class="string">&quot;toLowerCase&quot;</a></span>, <span class="typed"><span class="type">Array[GenMSIL.this.global.Type]</span><a href="#162792">jEmpty</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35363">MSTRING</a></span>, <span class="typed"><span class="type">java.lang.String(&quot;ToLower&quot;)</span><span class="string">&quot;ToLower&quot;</span></span>)
      <span class="typed"><span class="type">(GenMSIL.this.global.Symbol,GenMSIL.this.global.Name,Array[GenMSIL.this.global.Type],ch.epfl.lamp.compiler.msil.Type,String)Unit</span><a href="#161780">mapMethod</a></span>(<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="#161595">JSTRING</a></span>, <span class="typed"><span class="type">implicit scala.tools.nsc.symtab.Names.view : (String)GenMSIL.this.global.Name</span><a href="../../symtab/Names.scala.html#21102" class="string">&quot;toUpperCase&quot;</a></span>, <span class="typed"><span class="type">Array[GenMSIL.this.global.Type]</span><a href="#162792">jEmpty</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35363">MSTRING</a></span>, <span class="typed"><span class="type">java.lang.String(&quot;ToUpper&quot;)</span><span class="string">&quot;ToUpper&quot;</span></span>)
      <span class="typed"><span class="type">(GenMSIL.this.global.Symbol,GenMSIL.this.global.Name,Array[GenMSIL.this.global.Type],ch.epfl.lamp.compiler.msil.Type,String)Unit</span><a href="#161780">mapMethod</a></span>(<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="#161595">JSTRING</a></span>, <span class="typed"><span class="type">implicit scala.tools.nsc.symtab.Names.view : (String)GenMSIL.this.global.Name</span><a href="../../symtab/Names.scala.html#21102" class="string">&quot;startsWith&quot;</a></span>, <span class="typed"><span class="type">Array[GenMSIL.this.global.Type]</span><a href="#162793">jString1</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35363">MSTRING</a></span>, <span class="typed"><span class="type">java.lang.String(&quot;StartsWith&quot;)</span><span class="string">&quot;StartsWith&quot;</span></span>)
      <span class="typed"><span class="type">(GenMSIL.this.global.Symbol,GenMSIL.this.global.Name,Array[GenMSIL.this.global.Type],ch.epfl.lamp.compiler.msil.Type,String)Unit</span><a href="#161780">mapMethod</a></span>(<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="#161595">JSTRING</a></span>, <span class="typed"><span class="type">implicit scala.tools.nsc.symtab.Names.view : (String)GenMSIL.this.global.Name</span><a href="../../symtab/Names.scala.html#21102" class="string">&quot;endsWith&quot;</a></span>, <span class="typed"><span class="type">Array[GenMSIL.this.global.Type]</span><a href="#162793">jString1</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35363">MSTRING</a></span>, <span class="typed"><span class="type">java.lang.String(&quot;EndsWith&quot;)</span><span class="string">&quot;EndsWith&quot;</span></span>)
      <span class="typed"><span class="type">(GenMSIL.this.global.Symbol,GenMSIL.this.global.Name,Array[GenMSIL.this.global.Type],ch.epfl.lamp.compiler.msil.Type,String)Unit</span><a href="#161780">mapMethod</a></span>(<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="#161595">JSTRING</a></span>, <span class="typed"><span class="type">implicit scala.tools.nsc.symtab.Names.view : (String)GenMSIL.this.global.Name</span><a href="../../symtab/Names.scala.html#21102" class="string">&quot;substring&quot;</a></span>, <span class="typed"><span class="type">Array[GenMSIL.this.global.Type]</span><a href="#162794">jInt1</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35363">MSTRING</a></span>, <span class="typed"><span class="type">java.lang.String(&quot;Substring&quot;)</span><span class="string">&quot;Substring&quot;</span></span>)
      <span class="typed"><span class="type">(GenMSIL.this.global.Symbol,GenMSIL.this.global.Name,Array[GenMSIL.this.global.Type],ch.epfl.lamp.compiler.msil.Type,String)Unit</span><a href="#161780">mapMethod</a></span>(<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="#161595">JSTRING</a></span>, <span class="typed"><span class="type">implicit scala.tools.nsc.symtab.Names.view : (String)GenMSIL.this.global.Name</span><a href="../../symtab/Names.scala.html#21102" class="string">&quot;substring&quot;</a></span>, <span class="typed"><span class="type">Array[GenMSIL.this.global.Type]</span><a href="#162795">jInt2</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35363">MSTRING</a></span>, <span class="typed"><span class="type">java.lang.String(&quot;Substring&quot;)</span><span class="string">&quot;Substring&quot;</span></span>)
      <span class="typed"><span class="type">(GenMSIL.this.global.Symbol,GenMSIL.this.global.Name,Array[GenMSIL.this.global.Type],ch.epfl.lamp.compiler.msil.Type,String)Unit</span><a href="#161780">mapMethod</a></span>(<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="#161595">JSTRING</a></span>, <span class="typed"><span class="type">implicit scala.tools.nsc.symtab.Names.view : (String)GenMSIL.this.global.Name</span><a href="../../symtab/Names.scala.html#21102" class="string">&quot;trim&quot;</a></span>, <span class="typed"><span class="type">Array[GenMSIL.this.global.Type]</span><a href="#162792">jEmpty</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35363">MSTRING</a></span>, <span class="typed"><span class="type">java.lang.String(&quot;Trim&quot;)</span><span class="string">&quot;Trim&quot;</span></span>)
      <span class="typed"><span class="type">(GenMSIL.this.global.Symbol,GenMSIL.this.global.Name,Array[GenMSIL.this.global.Type],ch.epfl.lamp.compiler.msil.Type,String,Array[ch.epfl.lamp.compiler.msil.Type])Unit</span><a href="#161779">mapMethod</a></span>(<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="#161595">JSTRING</a></span>, <span class="typed"><span class="type">implicit scala.tools.nsc.symtab.Names.view : (String)GenMSIL.this.global.Name</span><a href="../../symtab/Names.scala.html#21102" class="string">&quot;intern&quot;</a></span>, <span class="typed"><span class="type">Array[GenMSIL.this.global.Type]</span><a href="#162792">jEmpty</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35363">MSTRING</a></span>, <span class="typed"><span class="type">java.lang.String(&quot;Intern&quot;)</span><span class="string">&quot;Intern&quot;</span></span>, <span class="typed"><span class="type">Array[ch.epfl.lamp.compiler.msil.Type]</span><a href="#162800">mString1</a></span>)
      <span class="typed"><span class="type">(GenMSIL.this.global.Symbol,GenMSIL.this.global.Name,Array[GenMSIL.this.global.Type],ch.epfl.lamp.compiler.msil.Type,String)Unit</span><a href="#161780">mapMethod</a></span>(<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="#161595">JSTRING</a></span>, <span class="typed"><span class="type">implicit scala.tools.nsc.symtab.Names.view : (String)GenMSIL.this.global.Name</span><a href="../../symtab/Names.scala.html#21102" class="string">&quot;replace&quot;</a></span>, <span class="typed"><span class="type">Array[GenMSIL.this.global.Type]</span><a href="#162798">jChar2</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35363">MSTRING</a></span>, <span class="typed"><span class="type">java.lang.String(&quot;Replace&quot;)</span><span class="string">&quot;Replace&quot;</span></span>)
      <span class="typed"><span class="type">(GenMSIL.this.global.Symbol,GenMSIL.this.global.Name,ch.epfl.lamp.compiler.msil.Type,String)Unit</span><a href="#161781">mapMethod</a></span>(<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="#161595">JSTRING</a></span>, <span class="typed"><span class="type">implicit scala.tools.nsc.symtab.Names.view : (String)GenMSIL.this.global.Name</span><a href="../../symtab/Names.scala.html#21102" class="string">&quot;toCharArray&quot;</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35363">MSTRING</a></span>, <span class="typed"><span class="type">java.lang.String(&quot;ToCharArray&quot;)</span><span class="string">&quot;ToCharArray&quot;</span></span>)

      <span class="typed"><span class="type">(GenMSIL.this.global.Symbol,ch.epfl.lamp.compiler.msil.Type)Unit</span><a href="#161753">mapType</a></span>(<span class="typed"><span class="type">object GenMSIL.this.global.definitions</span><a href="../../symtab/Definitions.scala.html#22259">definitions</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="../../symtab/Definitions.scala.html#25824">BooleanClass</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35348">MBOOL</a></span>)
      <span class="typed"><span class="type">(GenMSIL.this.global.Symbol,ch.epfl.lamp.compiler.msil.Type)Unit</span><a href="#161753">mapType</a></span>(<span class="typed"><span class="type">object GenMSIL.this.global.definitions</span><a href="../../symtab/Definitions.scala.html#22259">definitions</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="../../symtab/Definitions.scala.html#25830">ByteClass</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35318">MBYTE</a></span>)
      <span class="typed"><span class="type">(GenMSIL.this.global.Symbol,ch.epfl.lamp.compiler.msil.Type)Unit</span><a href="#161753">mapType</a></span>(<span class="typed"><span class="type">object GenMSIL.this.global.definitions</span><a href="../../symtab/Definitions.scala.html#22259">definitions</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="../../symtab/Definitions.scala.html#25833">ShortClass</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35321">MSHORT</a></span>)
      <span class="typed"><span class="type">(GenMSIL.this.global.Symbol,ch.epfl.lamp.compiler.msil.Type)Unit</span><a href="#161753">mapType</a></span>(<span class="typed"><span class="type">object GenMSIL.this.global.definitions</span><a href="../../symtab/Definitions.scala.html#22259">definitions</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="../../symtab/Definitions.scala.html#25836">CharClass</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35327">MCHAR</a></span>)
      <span class="typed"><span class="type">(GenMSIL.this.global.Symbol,ch.epfl.lamp.compiler.msil.Type)Unit</span><a href="#161753">mapType</a></span>(<span class="typed"><span class="type">object GenMSIL.this.global.definitions</span><a href="../../symtab/Definitions.scala.html#22259">definitions</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="../../symtab/Definitions.scala.html#25839">IntClass</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35330">MINT</a></span>)
      <span class="typed"><span class="type">(GenMSIL.this.global.Symbol,ch.epfl.lamp.compiler.msil.Type)Unit</span><a href="#161753">mapType</a></span>(<span class="typed"><span class="type">object GenMSIL.this.global.definitions</span><a href="../../symtab/Definitions.scala.html#22259">definitions</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="../../symtab/Definitions.scala.html#25846">LongClass</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35336">MLONG</a></span>)
      <span class="typed"><span class="type">(GenMSIL.this.global.Symbol,ch.epfl.lamp.compiler.msil.Type)Unit</span><a href="#161753">mapType</a></span>(<span class="typed"><span class="type">object GenMSIL.this.global.definitions</span><a href="../../symtab/Definitions.scala.html#22259">definitions</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="../../symtab/Definitions.scala.html#25849">FloatClass</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35342">MFLOAT</a></span>)
      <span class="typed"><span class="type">(GenMSIL.this.global.Symbol,ch.epfl.lamp.compiler.msil.Type)Unit</span><a href="#161753">mapType</a></span>(<span class="typed"><span class="type">object GenMSIL.this.global.definitions</span><a href="../../symtab/Definitions.scala.html#22259">definitions</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="../../symtab/Definitions.scala.html#25852">DoubleClass</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35345">MDOUBLE</a></span>)
    }

    <span class="keyword">var</span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.IClass</span><span id="161631"><span id="161629"><span id="161630"><a id="162475">clasz</a></span></span></span></span>: <span class="typed"><span class="type">GenMSIL.this.global.icodes.IClass</span><a href="../icode/Members.scala.html#32330">IClass</a></span> = _
    <span class="keyword">var</span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.IMethod</span><span id="161634"><span id="161632"><span id="161633"><a id="162476">method</a></span></span></span></span>: <span class="typed"><span class="type">GenMSIL.this.global.icodes.IMethod</span><a href="../icode/Members.scala.html#32332">IMethod</a></span> = _
    <span class="keyword">var</span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.Code</span><span id="161637"><span id="161635"><span id="161636"><a id="162477">code</a></span></span></span></span>: <span class="typed"><span class="type">GenMSIL.this.global.icodes.Code</span><a href="../icode/Members.scala.html#32329">Code</a></span> = _

    <span class="keyword">var</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.AssemblyBuilder</span><span id="161640"><span id="161638"><span id="161639"><a id="162500">massembly</a></span></span></span></span>: <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.AssemblyBuilder</span><a id="83480">AssemblyBuilder</a></span> = _
    <span class="keyword">var</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ModuleBuilder</span><span id="161643"><span id="161641"><span id="161642"><a id="162525">mmodule</a></span></span></span></span>: <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ModuleBuilder</span><a id="83516">ModuleBuilder</a></span> = _
    <span class="keyword">var</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><span id="161646"><span id="161644"><span id="161645"><a id="162614">mcode</a></span></span></span></span>: <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a id="83453">ILGenerator</a></span> = _

    <span class="keyword">var</span> <span class="typed"><span class="type">String</span><span id="161649"><span id="161647"><span id="161648"><a id="162615">assemName</a></span></span></span></span>: <span class="typed"><span class="type">String</span><a id="1861">String</a></span> = _
    <span class="keyword">var</span> <span class="typed"><span class="type">java.lang.String</span><span id="161652"><span id="161650"><span id="161651"><a id="162616">firstSourceName</a></span></span></span></span> = <span class="typed"><span class="type">java.lang.String(&quot;&quot;)</span><span class="string">&quot;&quot;</span></span>
    <span class="keyword">var</span> <span class="typed"><span class="type">java.io.File</span><span id="161655"><span id="161653"><span id="161654"><a id="162617">outDir</a></span></span></span></span>: <span class="typed"><span class="type">java.io.File</span><a id="3669">File</a></span> = _
    <span class="keyword">var</span> <span class="typed"><span class="type">java.io.File</span><span id="161658"><span id="161656"><span id="161657"><a id="162618">srcPath</a></span></span></span></span>: <span class="typed"><span class="type">java.io.File</span><a id="3669">File</a></span> = _
    <span class="keyword">var</span> <span class="typed"><span class="type">String</span><span id="161661"><span id="161659"><span id="161660"><a id="162619">moduleName</a></span></span></span></span>: <span class="typed"><span class="type">String</span><a id="1861">String</a></span> = _

    <span class="keyword">def</span> <span class="typed"><span class="type">()Unit</span><a id="161662">initAssembly</a></span>() {

      <span class="typed"><span class="type">(String)Unit</span><a href="#161648">assemName</a></span> = <span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="../../Global.scala.html#21157">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.StringSetting</span><a href="../../Settings.scala.html#29992">assemname</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.StringSetting#T</span><a href="../../Settings.scala.html#30301">value</a></span>

      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; String</span><a href="#161647">assemName</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">java.lang.String(&quot;&quot;)</span><span class="string">&quot;&quot;</span></span>) {
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="#161741">entryPoint</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5793">!=</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>) {
          <span class="typed"><span class="type">(String)Unit</span><a href="#161648">assemName</a></span> = <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)String</span><a href="#161737">msilName</a></span>(<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="#161741">entryPoint</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="../../symtab/Symbols.scala.html#25257">enclClass</a></span>)
          <span class="comment">// remove the $ at the end (from module-name)</span>
          <span class="typed"><span class="type">(String)Unit</span><a href="#161648">assemName</a></span> = <span class="typed"><span class="type">=&gt; String</span><a href="#161647">assemName</a></span>.<span class="typed"><span class="type">(Int,Int)java.lang.String</span><a id="5855">substring</a></span>(<span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>, <span class="typed"><span class="type">=&gt; String</span><a href="#161647">assemName</a></span>.<span class="typed"><span class="type">()Int</span><a id="5821">length</a></span>() <span class="typed"><span class="type">(Int)Int</span><a id="3148">-</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>)
        } <span class="keyword">else</span> {
          <span class="comment">// assuming filename of first source file</span>
          <span class="typed"><span class="type">(Boolean,=&gt; Any)Unit</span><span id="6004"><a id="821">assert</a></span></span>(<span class="typed"><span class="type">=&gt; java.lang.String</span><a href="#161650">firstSourceName</a></span>.<span class="typed"><span class="type">(java.lang.String)Boolean</span><a id="5842">endsWith</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;.scala&quot;)</span><span class="string">&quot;.scala&quot;</span></span>), <span class="typed"><span class="type">java.lang.String(&quot;Source file doesn't end with .scala&quot;)</span><span class="string">&quot;Source file doesn't end with .scala&quot;</span></span>)
          <span class="typed"><span class="type">(String)Unit</span><a href="#161648">assemName</a></span> = <span class="typed"><span class="type">=&gt; java.lang.String</span><a href="#161650">firstSourceName</a></span>.<span class="typed"><span class="type">(Int,Int)java.lang.String</span><a id="5855">substring</a></span>(<span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>, <span class="typed"><span class="type">=&gt; java.lang.String</span><a href="#161650">firstSourceName</a></span>.<span class="typed"><span class="type">()Int</span><a id="5821">length</a></span>() <span class="typed"><span class="type">(Int)Int</span><a id="3148">-</a></span> <span class="typed"><span class="type">Int(6)</span><span class="int">6</span></span>)
        }
      } <span class="keyword">else</span> {
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; String</span><a href="#161647">assemName</a></span>.<span class="typed"><span class="type">(java.lang.String)Boolean</span><a id="5842">endsWith</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;.msil&quot;)</span><span class="string">&quot;.msil&quot;</span></span>))
          <span class="typed"><span class="type">(String)Unit</span><a href="#161648">assemName</a></span> = <span class="typed"><span class="type">=&gt; String</span><a href="#161647">assemName</a></span>.<span class="typed"><span class="type">(Int,Int)java.lang.String</span><a id="5855">substring</a></span>(<span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>, <span class="typed"><span class="type">=&gt; String</span><a href="#161647">assemName</a></span>.<span class="typed"><span class="type">()Int</span><a id="5821">length</a></span>()<span class="typed"><span class="type">(Int)Int</span><a id="3148">-</a></span><span class="typed"><span class="type">Int(5)</span><span class="int">5</span></span>)
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; String</span><a href="#161647">assemName</a></span>.<span class="typed"><span class="type">(java.lang.String)Boolean</span><a id="5842">endsWith</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;.il&quot;)</span><span class="string">&quot;.il&quot;</span></span>))
          <span class="typed"><span class="type">(String)Unit</span><a href="#161648">assemName</a></span> = <span class="typed"><span class="type">=&gt; String</span><a href="#161647">assemName</a></span>.<span class="typed"><span class="type">(Int,Int)java.lang.String</span><a id="5855">substring</a></span>(<span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>, <span class="typed"><span class="type">=&gt; String</span><a href="#161647">assemName</a></span>.<span class="typed"><span class="type">()Int</span><a id="5821">length</a></span>()<span class="typed"><span class="type">(Int)Int</span><a id="3148">-</a></span><span class="typed"><span class="type">Int(3)</span><span class="int">3</span></span>)
        <span class="keyword">val</span> <span class="typed"><span class="type">java.io.File</span><a id="163378">f</a></span>: <span class="typed"><span class="type">java.io.File</span><a id="3669">File</a></span> = <span class="typed"><span class="type">java.io.File</span><span class="keyword">new</span></span> <span class="typed"><span class="type">java.io.File</span><a id="3669">File</a></span>(<span class="typed"><span class="type">=&gt; String</span><a href="#161647">assemName</a></span>)
        <span class="typed"><span class="type">(String)Unit</span><a href="#161648">assemName</a></span> = <span class="typed"><span class="type">java.io.File</span><a href="#163378">f</a></span>.<span class="typed"><span class="type">()java.lang.String</span><a id="40684">getName</a></span>()
      }
      
      <span class="typed"><span class="type">(java.io.File)Unit</span><a href="#161654">outDir</a></span> = <span class="typed"><span class="type">java.io.File</span><span class="keyword">new</span></span> <span class="typed"><span class="type">java.io.File</span><a id="3669">File</a></span>(<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="../../Global.scala.html#21157">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.StringSetting</span><a href="../../Settings.scala.html#29954">outdir</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.StringSetting#T</span><a href="../../Settings.scala.html#30301">value</a></span>)

      <span class="typed"><span class="type">(java.io.File)Unit</span><a href="#161657">srcPath</a></span> = <span class="typed"><span class="type">java.io.File</span><span class="keyword">new</span></span> <span class="typed"><span class="type">java.io.File</span><a id="3669">File</a></span>(<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="../../Global.scala.html#21157">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.StringSetting</span><a href="../../Settings.scala.html#29978">sourcepath</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.StringSetting#T</span><a href="../../Settings.scala.html#30301">value</a></span>)

      <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.AssemblyName</span><a id="163319">assemblyName</a></span> = <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.AssemblyName</span><span class="keyword">new</span></span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.AssemblyName</span><a id="34322">AssemblyName</a></span>()
      <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.AssemblyName</span><a href="#163319">assemblyName</a></span>.<span class="typed"><span class="type">java.lang.String</span><a id="163433">Name</a></span> = <span class="typed"><span class="type">=&gt; String</span><a href="#161647">assemName</a></span>
      <span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.AssemblyBuilder)Unit</span><a href="#161639">massembly</a></span> = <span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.AssemblyBuilderFactory</span><a id="83547">AssemblyBuilderFactory</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.AssemblyName)ch.epfl.lamp.compiler.msil.emit.AssemblyBuilder</span><a id="163443">DefineDynamicAssembly</a></span>(<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.AssemblyName</span><a href="#163319">assemblyName</a></span>)

      <span class="typed"><span class="type">(String)Unit</span><a href="#161660">moduleName</a></span> = <span class="typed"><span class="type">=&gt; String</span><a href="#161647">assemName</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> (<span class="typed"><span class="type">Any</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="#161741">entryPoint</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>) <span class="typed"><span class="type">java.lang.String(&quot;.dll&quot;)</span><span class="string">&quot;.dll&quot;</span></span> <span class="keyword">else</span> <span class="typed"><span class="type">java.lang.String(&quot;.exe&quot;)</span><span class="string">&quot;.exe&quot;</span></span>)
      <span class="comment">// filename here: .dll or .exe (in both parameters), second: give absolute-path</span>
      <span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.ModuleBuilder)Unit</span><a href="#161642">mmodule</a></span> = <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.AssemblyBuilder</span><a href="#161638">massembly</a></span>.<span class="typed"><span class="type">(String,String)ch.epfl.lamp.compiler.msil.emit.ModuleBuilder</span><a id="162480">DefineDynamicModule</a></span>(<span class="typed"><span class="type">=&gt; String</span><a href="#161659">moduleName</a></span>,
                                              <span class="typed"><span class="type">(java.io.File,java.lang.String)java.io.File</span><a id="40682" class="keyword">new</a></span> <span class="typed"><span class="type">java.io.File</span><a id="3669">File</a></span>(<span class="typed"><span class="type">=&gt; java.io.File</span><a href="#161653">outDir</a></span>, <span class="typed"><span class="type">=&gt; String</span><a href="#161659">moduleName</a></span>).<span class="typed"><span class="type">()java.lang.String</span><a id="40689">getAbsolutePath</a></span>())
      <span class="typed"><span class="type">(Boolean)Unit</span><span id="6003"><a id="821">assert</a></span></span> (<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ModuleBuilder</span><a href="#161641">mmodule</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5793">!=</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>)
    }


    <span class="comment">/**
     * Form of the custom Attribute parameter (Ecma-335.pdf)
     *      - p. 163 for CustomAttrib Form,
     *      - p. 164 for FixedArg Form (Array and Element) (if array or not is known!)
     *  !! least significant *byte* first if values longer than one byte !!
     *
     * 1: Prolog (unsigned int16, value 0x0001) -&gt; symtab[0] = 0x01, symtab[1] = 0x00
     * 2: FixedArgs (directly the data, get number and types from related constructor)
     *  2.1: length of the array (unsigned int32, take care on order of the 4 bytes)
     *  2.2: the byte array data
     * 3: NumNamed (unsigned int16, number of named fields and properties, 0x0000)
     *
     **/</span>
    <span class="keyword">def</span> <span class="typed"><span class="type">(GenMSIL.this.global.Symbol,ch.epfl.lamp.compiler.msil.emit.TypeBuilder)Unit</span><a id="161663">addSymtabAttribute</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a id="163495">sym</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="../../symtab/Symbols.scala.html#21866">Symbol</a></span>, <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a id="163496">tBuilder</a></span>: <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a id="83405">TypeBuilder</a></span>) {
      <span class="typed"><span class="type">=&gt; GenMSIL.this.global.Run</span><a href="../../Global.scala.html#21305">currentRun</a></span>.<span class="typed"><span class="type">=&gt; scala.collection.mutable.HashMap[GenMSIL.this.global.Symbol,scala.tools.nsc.symtab.classfile.PickleBuffer]</span><a href="../../Global.scala.html#36584">symData</a></span>.<span class="typed"><span class="type">(GenMSIL.this.global.Symbol)Option[scala.tools.nsc.symtab.classfile.PickleBuffer]</span><a id="24295">get</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#163495">sym</a></span>) <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
        <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">Some</a>(<span class="typed"><span class="type">scala.tools.nsc.symtab.classfile.PickleBuffer</span><a id="163498">pickle</a></span>) =&gt;
          <span class="keyword">val</span> <span class="typed"><span class="type">Array[Byte]</span><a id="163499">symtab</a></span>: <span class="typed"><span class="type">Array[Byte]</span><a id="1072">Array</a></span>[Byte] = <span class="typed"><span class="type">Array[Byte]</span><span class="keyword">new</span></span> <span class="typed"><span class="type">Array[Byte]</span><a id="1072">Array</a></span>[Byte](<span class="typed"><span class="type">scala.tools.nsc.symtab.classfile.PickleBuffer</span><a href="#163498">pickle</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a href="../../symtab/classfile/PickleBuffer.scala.html#68900">writeIndex</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">+</a></span> <span class="typed"><span class="type">Int(8)</span><span class="int">8</span></span>)
          <span class="typed"><span class="type">Array[Byte]</span><a href="#163499">symtab</a></span>(<span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>) = <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>.<span class="typed"><span class="type">=&gt; Byte</span><a id="3082">toByte</a></span>
          <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="163500">size</a></span>:<span class="typed"><span class="type">Int</span><a id="2394">Int</a></span> = <span class="typed"><span class="type">scala.tools.nsc.symtab.classfile.PickleBuffer</span><a href="#163498">pickle</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a href="../../symtab/classfile/PickleBuffer.scala.html#68900">writeIndex</a></span>
          <span class="keyword">for</span> (<span class="typed"><span class="type">((Int) =&gt; Unit)Unit</span><span id="40475"><a id="163529">i</a></span></span> &lt;- <span class="typed"><span class="type">implicit scala.Predef.intWrapper : (Int)scala.runtime.RichInt</span><span id="6133"><a id="821" class="int">2</a></span></span> <span class="typed"><span class="type">(Int)Range</span><a id="26778">until</a></span> <span class="typed"><span class="type">Int(6)</span><span class="int">6</span></span>) {
            <span class="typed"><span class="type">Array[Byte]</span><a href="#163499">symtab</a></span>(<span class="typed"><span class="type">Int</span><a href="#163529">i</a></span>) = (<span class="typed"><span class="type">Int</span><a href="#163500">size</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3153">&amp;</a></span> <span class="typed"><span class="type">Int(255)</span><span class="int">0xff</span></span>).<span class="typed"><span class="type">=&gt; Byte</span><a id="3082">toByte</a></span>
            <span class="typed"><span class="type">Int</span><a href="#163500">size</a></span> = <span class="typed"><span class="type">Int</span><a href="#163500">size</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3094">&gt;&gt;</a></span> <span class="typed"><span class="type">Int(8)</span><span class="int">8</span></span>
          }

          <span class="typed"><span class="type">object java.lang.System</span><a id="1886">System</a></span>.<span class="typed"><span class="type">(Any,Int,Any,Int,Int)Unit</span><a id="47446">arraycopy</a></span>(<span class="typed"><span class="type">scala.tools.nsc.symtab.classfile.PickleBuffer</span><a href="#163498">pickle</a></span>.<span class="typed"><span class="type">=&gt; Array[Byte]</span><a href="../../symtab/classfile/PickleBuffer.scala.html#68894">bytes</a></span>, <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>, <span class="typed"><span class="type">Array[Byte]</span><a href="#163499">symtab</a></span>, <span class="typed"><span class="type">Int(6)</span><span class="int">6</span></span>, <span class="typed"><span class="type">scala.tools.nsc.symtab.classfile.PickleBuffer</span><a href="#163498">pickle</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a href="../../symtab/classfile/PickleBuffer.scala.html#68900">writeIndex</a></span>)

          <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a href="#163496">tBuilder</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.ConstructorInfo,Array[byte])Unit</span><a id="162747">SetCustomAttribute</a></span>(<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.ConstructorInfo</span><a href="../../symtab/clr/CLRTypes.scala.html#35375">SYMTAB_ATTRIBUTE_CONSTRUCTOR</a></span>, <span class="typed"><span class="type">Array[Byte]</span><a href="#163499">symtab</a></span>)

          <span class="typed"><span class="type">=&gt; GenMSIL.this.global.Run</span><a href="../../Global.scala.html#21305">currentRun</a></span>.<span class="typed"><span class="type">=&gt; scala.collection.mutable.HashMap[GenMSIL.this.global.Symbol,scala.tools.nsc.symtab.classfile.PickleBuffer]</span><a href="../../Global.scala.html#36584">symData</a></span> <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)Unit</span><a id="24167">-=</a></span> <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#163495">sym</a></span>
          <span class="typed"><span class="type">=&gt; GenMSIL.this.global.Run</span><a href="../../Global.scala.html#21305">currentRun</a></span>.<span class="typed"><span class="type">=&gt; scala.collection.mutable.HashMap[GenMSIL.this.global.Symbol,scala.tools.nsc.symtab.classfile.PickleBuffer]</span><a href="../../Global.scala.html#36584">symData</a></span> <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)Unit</span><a id="24167">-=</a></span> <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#163495">sym</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="../../symtab/Symbols.scala.html#25279">linkedSym</a></span>
          <span class="comment">//log(&quot;Generated ScalaSig Attr for &quot; + sym)//debug</span>
        <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> _ =&gt;
          <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;Could not find pickle information for &quot;)</span><span class="string">&quot;Could not find pickle information for &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#163495">sym</a></span>)
      }
    }

    <span class="keyword">def</span> <span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.ICustomAttributeSetter,List[GenMSIL.this.global.AnnotationInfo])Unit</span><a id="161664">addAttributes</a></span>(<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ICustomAttributeSetter</span><a id="163536">member</a></span>: <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ICustomAttributeSetter</span><a id="83468">ICustomAttributeSetter</a></span>, <span class="typed"><span class="type">List[GenMSIL.this.global.AnnotationInfo]</span><a id="163537">attributes</a></span>: <span class="typed"><span class="type">List[GenMSIL.this.global.AnnotationInfo]</span><a id="526">List</a></span>[AnnotationInfo]) {
      <span class="typed"><span class="type">Nothing</span><span class="keyword">return</span></span> <span class="comment">// FIXME</span>

      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="../../Global.scala.html#21157">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting</span><a href="../../Settings.scala.html#30066">debug</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting#T</span><a href="../../Settings.scala.html#30301">value</a></span>)
        <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;creating attributes: &quot;)</span><span class="string">&quot;creating attributes: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">List[GenMSIL.this.global.AnnotationInfo]</span><a href="#163537">attributes</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot; for member : &quot;)</span><span class="string">&quot; for member : &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ICustomAttributeSetter</span><a href="#163536">member</a></span>)
      <span class="keyword">for</span> (<span class="typed"><span class="type">((GenMSIL.this.global.AnnotationInfo) =&gt; Unit)Unit</span><span id="21366"><span id="163542"><span id="21367"><span id="163556"><a href="#163541" id="163549">attr</a></span></span></span></span></span>@ <a id="1">AnnotationInfo</a>(<span class="typed"><span class="type">GenMSIL.this.global.Type</span><span id="163543"><span id="163550"><a id="163557">typ</a></span></span></span>, <span class="typed"><span class="type">List[GenMSIL.this.global.AnnotationArgument]</span><span id="163544"><span id="163551"><a id="163558">annArgs</a></span></span></span>, <span class="typed"><span class="type">List[(GenMSIL.this.global.Name, GenMSIL.this.global.AnnotationArgument)]</span><span id="163545"><span id="163552"><a id="163559">nvPairs</a></span></span></span>) &lt;- <span class="typed"><span class="type">List[GenMSIL.this.global.AnnotationInfo]</span><a href="#163537">attributes</a></span> ;
           <span class="keyword">if</span> <span class="typed"><span class="type">GenMSIL.this.global.AnnotationInfo</span><a href="#163549">attr</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../../symtab/AnnotationInfos.scala.html#47892">isConstant</a></span>)
           <span class="comment">/* !typ.typeSymbol.hasFlag(Flags.JAVA) */</span>
      {
<span class="comment">//        assert(consts.length &lt;= 1,</span>
<span class="comment">//               &quot;too many constant arguments for attribute; &quot;+consts.toString())</span>

        <span class="comment">// Problem / TODO having the symbol of the attribute type would be nicer</span>
        <span class="comment">// (i hope that type.typeSymbol is the same as the one in types2create)</span>
        <span class="comment">// AND: this will crash if the attribute Type is already compiled (-&gt; not a typeBuilder)</span>
        <span class="comment">// when this is solved, types2create will be the same as icodes.classes, thus superfluous</span>
        <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a id="163560">attrType</a></span>: <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a id="83405">TypeBuilder</a></span> = <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.Type</span><a href="#161752">getType</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Type</span><a href="#163557">typ</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="../../symtab/Types.scala.html#25650">typeSymbol</a></span>).<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a id="3503">asInstanceOf</a></span>[<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a id="83405">TypeBuilder</a></span>]
<span class="comment">//        val attrType: MsilType = getType(typ.typeSymbol)</span>

        <span class="comment">// Problem / TODO: i have no idea which constructor is used. This</span>
        <span class="comment">// information should be available in AnnotationInfo.</span>
        <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a href="#163560">attrType</a></span>.<span class="typed"><span class="type">()ch.epfl.lamp.compiler.msil.Type</span><a id="162734">CreateType</a></span>() <span class="comment">// else, GetConstructors can't be used</span>
        <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.ConstructorInfo</span><a id="163561">constr</a></span>: <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.ConstructorInfo</span><a id="34250">ConstructorInfo</a></span> = <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a href="#163560">attrType</a></span>.<span class="typed"><span class="type">(Int)ch.epfl.lamp.compiler.msil.ConstructorInfo</span><span id="21509"><a id="162742">GetConstructors</a></span></span>()(<span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>)
        <span class="comment">// prevent a second call of CreateType, only needed because there's no</span>
        <span class="comment">// otehr way than GetConstructors()(0) to get the constructor, if there's</span>
        <span class="comment">// no constructor symbol available.</span>

        <span class="keyword">val</span> <span class="typed"><span class="type">Array[Byte]</span><a id="163562">args</a></span>: <span class="typed"><span class="type">Array[Byte]</span><a id="1072">Array</a></span>[Byte] =
          <span class="typed"><span class="type">(List[GenMSIL.this.global.Constant],List[(GenMSIL.this.global.Name, GenMSIL.this.global.Constant)])Array[Byte]</span><a href="#161665">getAttributeArgs</a></span>(
            <span class="typed"><span class="type">List[GenMSIL.this.global.AnnotationArgument]</span><a href="#163558">annArgs</a></span> <span class="typed"><span class="type">((GenMSIL.this.global.AnnotationArgument) =&gt; GenMSIL.this.global.Constant)List[GenMSIL.this.global.Constant]</span><a id="21362">map</a></span> (<span class="typed"><span class="type">GenMSIL.this.global.AnnotationArgument</span><a href="#163575">_</a></span>.<span class="typed"><span class="type">=&gt; Option[GenMSIL.this.global.Constant]</span><a href="../../symtab/AnnotationInfos.scala.html#47876">constant</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Constant</span><a id="25408">get</a></span>),
            (<span class="keyword">for</span>(<span class="typed"><span class="type">(((GenMSIL.this.global.Name, GenMSIL.this.global.AnnotationArgument)) =&gt; (GenMSIL.this.global.Name, GenMSIL.this.global.Constant))List[(GenMSIL.this.global.Name, GenMSIL.this.global.Constant)]</span><span id="21362"><a href="#163579" id="21367">(</a></span></span><span class="typed"><span class="type">GenMSIL.this.global.Name</span><span id="163580"><a id="163586">n</a></span></span>,<span class="typed"><span class="type">GenMSIL.this.global.AnnotationArgument</span><span id="163581"><a id="163587">v</a></span></span>) &lt;- <span class="typed"><span class="type">List[(GenMSIL.this.global.Name, GenMSIL.this.global.AnnotationArgument)]</span><a href="#163559">nvPairs</a></span>) <span class="keyword">yield</span> <span class="typed"><span class="type">(GenMSIL.this.global.Name,GenMSIL.this.global.Constant)(GenMSIL.this.global.Name, GenMSIL.this.global.Constant)</span><span id="23625"><a id="1379">(</a></span></span><span class="typed"><span class="type">GenMSIL.this.global.Name</span><a href="#163586">n</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.AnnotationArgument</span><a href="#163587">v</a></span>.<span class="typed"><span class="type">=&gt; Option[GenMSIL.this.global.Constant]</span><a href="../../symtab/AnnotationInfos.scala.html#47876">constant</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Constant</span><a id="25408">get</a></span>)))
        <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ICustomAttributeSetter</span><a href="#163536">member</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.ConstructorInfo,Array[byte])Unit</span><a id="163446">SetCustomAttribute</a></span>(<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.ConstructorInfo</span><a href="#163561">constr</a></span>, <span class="typed"><span class="type">Array[Byte]</span><a href="#163562">args</a></span>)
      }
    }

    <span class="keyword">def</span> <span class="typed"><span class="type">(List[GenMSIL.this.global.Constant],List[(GenMSIL.this.global.Name, GenMSIL.this.global.Constant)])Array[Byte]</span><a id="161665">getAttributeArgs</a></span>(<span class="typed"><span class="type">List[GenMSIL.this.global.Constant]</span><a id="163571">consts</a></span>: <span class="typed"><span class="type">List[GenMSIL.this.global.Constant]</span><a id="526">List</a></span>[Constant], <span class="typed"><span class="type">List[(GenMSIL.this.global.Name, GenMSIL.this.global.Constant)]</span><a id="163572">nvPairs</a></span>: <span class="typed"><span class="type">List[(GenMSIL.this.global.Name, GenMSIL.this.global.Constant)]</span><a id="526">List</a></span>[(Name, Constant)]): <span class="typed"><span class="type">Array[Byte]</span><a id="1072">Array</a></span>[Byte] = {
      <span class="keyword">val</span> <span class="typed"><span class="type">java.nio.ByteBuffer</span><a id="163592">buf</a></span> = <span class="typed"><span class="type">object java.nio.ByteBuffer</span><a id="20896">ByteBuffer</a></span>.<span class="typed"><span class="type">(Int)java.nio.ByteBuffer</span><a id="70027">allocate</a></span>(<span class="typed"><span class="type">Int(2048)</span><span class="int">2048</span></span>) <span class="comment">// FIXME: this may be not enough!</span>
      <span class="typed"><span class="type">java.nio.ByteBuffer</span><a href="#163592">buf</a></span>.<span class="typed"><span class="type">(java.nio.ByteOrder)java.nio.ByteBuffer</span><a id="70052">order</a></span>(<span class="typed"><span class="type">object java.nio.ByteOrder</span><a id="20863">ByteOrder</a></span>.<span class="typed"><span class="type">java.nio.ByteOrder</span><a id="163599">LITTLE_ENDIAN</a></span>)
      <span class="typed"><span class="type">java.nio.ByteBuffer</span><a href="#163592">buf</a></span>.<span class="typed"><span class="type">(Short)java.nio.ByteBuffer</span><a id="70061">putShort</a></span>(<span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>.<span class="typed"><span class="type">=&gt; Short</span><a id="3083">toShort</a></span>) <span class="comment">// signature</span>

      <span class="keyword">def</span> <span class="typed"><span class="type">(String)java.nio.ByteBuffer</span><a id="163593">emitSerString</a></span>(<span class="typed"><span class="type">String</span><a id="163604">str</a></span>: <span class="typed"><span class="type">String</span><a id="1861">String</a></span>) = {
          <span class="comment">// this is wrong, it has to be the length of the UTF-8 byte array, which</span>
          <span class="comment">// may be longer (see clr-book on page 302)</span>
<span class="comment">//          val length: Int = str.length</span>
            <span class="keyword">val</span> <span class="typed"><span class="type">Array[Byte]</span><a id="163605">strBytes</a></span>: <span class="typed"><span class="type">Array[Byte]</span><a id="1072">Array</a></span>[Byte] = <span class="keyword">try</span> {
              <span class="typed"><span class="type">String</span><a href="#163604">str</a></span>.<span class="typed"><span class="type">(java.lang.String)Array[Byte]</span><a id="5830">getBytes</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;UTF-8&quot;)</span><span class="string">&quot;UTF-8&quot;</span></span>)
            } <span class="keyword">catch</span> {
              <span class="typed"><span class="type">Nothing</span><span class="keyword">case</span></span> _: <span class="typed"><span class="type">Error</span><a id="1801">Error</a></span> =&gt; <span class="typed"><span class="type">(String)Nothing</span><a href="../../Global.scala.html#21214">abort</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;could not get byte-array for string: &quot;)</span><span class="string">&quot;could not get byte-array for string: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">String</span><a href="#163604">str</a></span>)
            }
            <span class="keyword">val</span> <span class="typed"><span class="type">Int</span><a id="163606">length</a></span>: <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span> = <span class="typed"><span class="type">Array[Byte]</span><a href="#163605">strBytes</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21508">length</a></span> <span class="comment">//this length is stored big-endian</span>
            <span class="typed"><span class="type">java.nio.ByteBuffer</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#163606">length</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&lt;</a></span> <span class="typed"><span class="type">Int(128)</span><span class="int">128</span></span>)
              <span class="typed"><span class="type">java.nio.ByteBuffer</span><a href="#163592">buf</a></span>.<span class="typed"><span class="type">(Byte)java.nio.ByteBuffer</span><a id="70034">put</a></span>(<span class="typed"><span class="type">Int</span><a href="#163606">length</a></span>.<span class="typed"><span class="type">=&gt; Byte</span><a id="3082">toByte</a></span>)
            <span class="keyword">else</span> <span class="typed"><span class="type">java.nio.ByteBuffer</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#163606">length</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&lt;</a></span> (<span class="int">1</span><span class="typed"><span class="type">Int(16384)</span><span >&lt;&lt;</span></span><span class="int">14</span>)) {
              <span class="typed"><span class="type">java.nio.ByteBuffer</span><a href="#163592">buf</a></span>.<span class="typed"><span class="type">(Byte)java.nio.ByteBuffer</span><a id="70034">put</a></span>(((<span class="typed"><span class="type">Int</span><a href="#163606">length</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3094">&gt;&gt;</a></span> <span class="typed"><span class="type">Int(8)</span><span class="int">8</span></span>) <span class="typed"><span class="type">(Int)Int</span><a id="3152">|</a></span> <span class="typed"><span class="type">Int(128)</span><span class="int">0x80</span></span>).<span class="typed"><span class="type">=&gt; Byte</span><a id="3082">toByte</a></span>) <span class="comment">// the bits 14 and 15 of length are '0'</span>
              <span class="typed"><span class="type">java.nio.ByteBuffer</span><a href="#163592">buf</a></span>.<span class="typed"><span class="type">(Byte)java.nio.ByteBuffer</span><a id="70034">put</a></span>((<span class="typed"><span class="type">Int</span><a href="#163606">length</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3152">|</a></span> <span class="typed"><span class="type">Int(255)</span><span class="int">0xff</span></span>).<span class="typed"><span class="type">=&gt; Byte</span><a id="3082">toByte</a></span>)
            } <span class="keyword">else</span> <span class="typed"><span class="type">java.nio.ByteBuffer</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#163606">length</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&lt;</a></span> (<span class="int">1</span> <span class="typed"><span class="type">Int(536870912)</span><span >&lt;&lt;</span></span> <span class="int">29</span>)) {
              <span class="typed"><span class="type">java.nio.ByteBuffer</span><a href="#163592">buf</a></span>.<span class="typed"><span class="type">(Byte)java.nio.ByteBuffer</span><a id="70034">put</a></span>(((<span class="typed"><span class="type">Int</span><a href="#163606">length</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3094">&gt;&gt;</a></span> <span class="typed"><span class="type">Int(24)</span><span class="int">24</span></span>) <span class="typed"><span class="type">(Int)Int</span><a id="3152">|</a></span> <span class="typed"><span class="type">Int(192)</span><span class="int">0xc0</span></span>).<span class="typed"><span class="type">=&gt; Byte</span><a id="3082">toByte</a></span>)
              <span class="typed"><span class="type">java.nio.ByteBuffer</span><a href="#163592">buf</a></span>.<span class="typed"><span class="type">(Byte)java.nio.ByteBuffer</span><a id="70034">put</a></span>(((<span class="typed"><span class="type">Int</span><a href="#163606">length</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3094">&gt;&gt;</a></span> <span class="typed"><span class="type">Int(16)</span><span class="int">16</span></span>) <span class="typed"><span class="type">(Int)Int</span><a id="3153">&amp;</a></span> <span class="typed"><span class="type">Int(255)</span><span class="int">0xff</span></span>).<span class="typed"><span class="type">=&gt; Byte</span><a id="3082">toByte</a></span>)
              <span class="typed"><span class="type">java.nio.ByteBuffer</span><a href="#163592">buf</a></span>.<span class="typed"><span class="type">(Byte)java.nio.ByteBuffer</span><a id="70034">put</a></span>(((<span class="typed"><span class="type">Int</span><a href="#163606">length</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3094">&gt;&gt;</a></span>  <span class="typed"><span class="type">Int(8)</span><span class="int">8</span></span>) <span class="typed"><span class="type">(Int)Int</span><a id="3153">&amp;</a></span> <span class="typed"><span class="type">Int(255)</span><span class="int">0xff</span></span>).<span class="typed"><span class="type">=&gt; Byte</span><a id="3082">toByte</a></span>)
              <span class="typed"><span class="type">java.nio.ByteBuffer</span><a href="#163592">buf</a></span>.<span class="typed"><span class="type">(Byte)java.nio.ByteBuffer</span><a id="70034">put</a></span>(((<span class="typed"><span class="type">Int</span><a href="#163606">length</a></span>      ) <span class="typed"><span class="type">(Int)Int</span><a id="3153">&amp;</a></span> <span class="typed"><span class="type">Int(255)</span><span class="int">0xff</span></span>).<span class="typed"><span class="type">=&gt; Byte</span><a id="3082">toByte</a></span>)
            } <span class="keyword">else</span>
              <span class="typed"><span class="type">(String)Nothing</span><a href="../../Global.scala.html#21214">abort</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;string too long for attribute parameter: &quot;)</span><span class="string">&quot;string too long for attribute parameter: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">Int</span><a href="#163606">length</a></span>)
            <span class="typed"><span class="type">java.nio.ByteBuffer</span><a href="#163592">buf</a></span>.<span class="typed"><span class="type">(Array[Byte])java.nio.ByteBuffer</span><a id="70041">put</a></span>(<span class="typed"><span class="type">Array[Byte]</span><a href="#163605">strBytes</a></span>)
      }

      <span class="keyword">def</span> <span class="typed"><span class="type">(GenMSIL.this.global.Constant)Unit</span><a id="163594">emitConst</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Constant</span><a id="163639">const</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.Constant</span><a href="../../symtab/Constants.scala.html#22297">Constant</a></span>): <span class="typed"><span class="type">Unit</span><a id="2169">Unit</a></span> = <span class="typed"><span class="type">GenMSIL.this.global.Constant</span><a href="#163639">const</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a href="../../symtab/Constants.scala.html#37590">tag</a></span> <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
        <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Int(2)</span><span >BooleanTag</span></span> =&gt; <span class="typed"><span class="type">java.nio.ByteBuffer</span><a href="#163592">buf</a></span>.<span class="typed"><span class="type">(Byte)java.nio.ByteBuffer</span><a id="70034">put</a></span>((<span class="typed"><span class="type">Int</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">GenMSIL.this.global.Constant</span><a href="#163639">const</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../../symtab/Constants.scala.html#37594">booleanValue</a></span>) <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span> <span class="keyword">else</span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>).<span class="typed"><span class="type">=&gt; Byte</span><a id="3082">toByte</a></span>)
        <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Int(3)</span><span >ByteTag</span></span> =&gt; <span class="typed"><span class="type">java.nio.ByteBuffer</span><a href="#163592">buf</a></span>.<span class="typed"><span class="type">(Byte)java.nio.ByteBuffer</span><a id="70034">put</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Constant</span><a href="#163639">const</a></span>.<span class="typed"><span class="type">=&gt; Byte</span><a href="../../symtab/Constants.scala.html#37595">byteValue</a></span>)
        <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Int(4)</span><span >ShortTag</span></span> =&gt; <span class="typed"><span class="type">java.nio.ByteBuffer</span><a href="#163592">buf</a></span>.<span class="typed"><span class="type">(Short)java.nio.ByteBuffer</span><a id="70061">putShort</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Constant</span><a href="#163639">const</a></span>.<span class="typed"><span class="type">=&gt; Short</span><a href="../../symtab/Constants.scala.html#37596">shortValue</a></span>)
        <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Int(5)</span><span >CharTag</span></span> =&gt; <span class="typed"><span class="type">java.nio.ByteBuffer</span><a href="#163592">buf</a></span>.<span class="typed"><span class="type">(Char)java.nio.ByteBuffer</span><a id="70056">putChar</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Constant</span><a href="#163639">const</a></span>.<span class="typed"><span class="type">=&gt; Char</span><a href="../../symtab/Constants.scala.html#37597">charValue</a></span>)
        <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Int(6)</span><span >IntTag</span></span> =&gt; <span class="typed"><span class="type">java.nio.ByteBuffer</span><a href="#163592">buf</a></span>.<span class="typed"><span class="type">(Int)java.nio.ByteBuffer</span><a id="70066">putInt</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Constant</span><a href="#163639">const</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a href="../../symtab/Constants.scala.html#37598">intValue</a></span>)
        <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Int(7)</span><span >LongTag</span></span> =&gt; <span class="typed"><span class="type">java.nio.ByteBuffer</span><a href="#163592">buf</a></span>.<span class="typed"><span class="type">(Long)java.nio.ByteBuffer</span><a id="70071">putLong</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Constant</span><a href="#163639">const</a></span>.<span class="typed"><span class="type">=&gt; Long</span><a href="../../symtab/Constants.scala.html#37599">longValue</a></span>)
        <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Int(8)</span><span >FloatTag</span></span> =&gt; <span class="typed"><span class="type">java.nio.ByteBuffer</span><a href="#163592">buf</a></span>.<span class="typed"><span class="type">(Float)java.nio.ByteBuffer</span><a id="70076">putFloat</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Constant</span><a href="#163639">const</a></span>.<span class="typed"><span class="type">=&gt; Float</span><a href="../../symtab/Constants.scala.html#37600">floatValue</a></span>)
        <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Int(9)</span><span >DoubleTag</span></span> =&gt; <span class="typed"><span class="type">java.nio.ByteBuffer</span><a href="#163592">buf</a></span>.<span class="typed"><span class="type">(Double)java.nio.ByteBuffer</span><a id="70081">putDouble</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Constant</span><a href="#163639">const</a></span>.<span class="typed"><span class="type">=&gt; Double</span><a href="../../symtab/Constants.scala.html#37601">doubleValue</a></span>)
        <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Int(10)</span><span >StringTag</span></span> =&gt;
          <span class="keyword">val</span> <span class="typed"><span class="type">String</span><a id="163650">str</a></span>: <span class="typed"><span class="type">String</span><a id="1861">String</a></span> = <span class="typed"><span class="type">GenMSIL.this.global.Constant</span><a href="#163639">const</a></span>.<span class="typed"><span class="type">=&gt; String</span><a href="../../symtab/Constants.scala.html#37603">stringValue</a></span>
          <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">String</span><a href="#163650">str</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>) {
            <span class="typed"><span class="type">java.nio.ByteBuffer</span><a href="#163592">buf</a></span>.<span class="typed"><span class="type">(Byte)java.nio.ByteBuffer</span><a id="70034">put</a></span>(<span class="typed"><span class="type">Int(255)</span><span class="int">0xff</span></span>.<span class="typed"><span class="type">=&gt; Byte</span><a id="3082">toByte</a></span>)
          } <span class="keyword">else</span> {
            <span class="typed"><span class="type">(String)java.nio.ByteBuffer</span><a href="#163593">emitSerString</a></span>(<span class="typed"><span class="type">String</span><a href="#163650">str</a></span>)
          }
        <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Int(14)</span><span >ArrayTag</span></span> =&gt;
          <span class="keyword">val</span> <span class="typed"><span class="type">Array[GenMSIL.this.global.Constant]</span><a id="163654">arr</a></span>: <span class="typed"><span class="type">Array[GenMSIL.this.global.Constant]</span><a id="1072">Array</a></span>[Constant] = <span class="typed"><span class="type">GenMSIL.this.global.Constant</span><a href="#163639">const</a></span>.<span class="typed"><span class="type">=&gt; Array[GenMSIL.this.global.Constant]</span><a href="../../symtab/Constants.scala.html#37607">arrayValue</a></span>
          <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Array[GenMSIL.this.global.Constant]</span><a href="#163654">arr</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>) {
            <span class="typed"><span class="type">java.nio.ByteBuffer</span><a href="#163592">buf</a></span>.<span class="typed"><span class="type">(Int)java.nio.ByteBuffer</span><a id="70066">putInt</a></span>(<span class="typed"><span class="type">Int(-1)</span><span class="int">0xffffffff</span></span>)
          } <span class="keyword">else</span> {
            <span class="typed"><span class="type">java.nio.ByteBuffer</span><a href="#163592">buf</a></span>.<span class="typed"><span class="type">(Int)java.nio.ByteBuffer</span><a id="70066">putInt</a></span>(<span class="typed"><span class="type">Array[GenMSIL.this.global.Constant]</span><a href="#163654">arr</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21508">length</a></span>)
            <span class="typed"><span class="type">Array[GenMSIL.this.global.Constant]</span><a href="#163654">arr</a></span>.<span class="typed"><span class="type">((GenMSIL.this.global.Constant) =&gt; Unit)Unit</span><a id="21792">foreach</a></span>(<span class="typed"><span class="type">(GenMSIL.this.global.Constant)Unit</span><a href="#163594">emitConst</a></span>)
          }

        <span class="comment">// TODO: other Tags: NoTag, UnitTag, ClassTag, EnumTag, ArrayTag ???</span>

        <span class="typed"><span class="type">Nothing</span><span class="keyword">case</span></span> _ =&gt; <span class="typed"><span class="type">(String)Nothing</span><a href="../../Global.scala.html#21214">abort</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;could not handle attribute argument: &quot;)</span><span class="string">&quot;could not handle attribute argument: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">GenMSIL.this.global.Constant</span><a href="#163639">const</a></span>)
      }

      <span class="typed"><span class="type">List[GenMSIL.this.global.Constant]</span><a href="#163571">consts</a></span> <span class="typed"><span class="type">((GenMSIL.this.global.Constant) =&gt; Unit)Unit</span><a id="21366">foreach</a></span> <span class="typed"><span class="type">(GenMSIL.this.global.Constant)Unit</span><a href="#163594">emitConst</a></span>
      <span class="typed"><span class="type">java.nio.ByteBuffer</span><a href="#163592">buf</a></span>.<span class="typed"><span class="type">(Short)java.nio.ByteBuffer</span><a id="70061">putShort</a></span>(<span class="typed"><span class="type">List[(GenMSIL.this.global.Name, GenMSIL.this.global.Constant)]</span><a href="#163572">nvPairs</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21345">length</a></span>.<span class="typed"><span class="type">=&gt; Short</span><a id="3083">toShort</a></span>)
      <span class="keyword">def</span> <span class="typed"><span class="type">((GenMSIL.this.global.Name, GenMSIL.this.global.Constant))Unit</span><a id="163595">emitNamedArg</a></span>(<span class="typed"><span class="type">(GenMSIL.this.global.Name, GenMSIL.this.global.Constant)</span><a id="163663">nvPair</a></span>: <span class="typed"><span class="type">(GenMSIL.this.global.Name, GenMSIL.this.global.Constant)</span><a id="1378">(</a></span>Name, Constant)) {
        <span class="comment">// the named argument is a property of the attribute (it can't be a field, since</span>
        <span class="comment">//  all fields in scala are private)</span>
        <span class="typed"><span class="type">java.nio.ByteBuffer</span><a href="#163592">buf</a></span>.<span class="typed"><span class="type">(Byte)java.nio.ByteBuffer</span><a id="70034">put</a></span>(<span class="typed"><span class="type">Int(84)</span><span class="int">0x54</span></span>.<span class="typed"><span class="type">=&gt; Byte</span><a id="3082">toByte</a></span>)

        <span class="keyword">def</span> <span class="typed"><span class="type">(GenMSIL.this.global.Constant)java.nio.ByteBuffer</span><a id="163664">emitType</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Constant</span><a id="163668">c</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.Constant</span><a href="../../symtab/Constants.scala.html#22297">Constant</a></span>) = <span class="typed"><span class="type">GenMSIL.this.global.Constant</span><a href="#163668">c</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a href="../../symtab/Constants.scala.html#37590">tag</a></span> <span class="typed"><span class="type">java.nio.ByteBuffer</span><span class="keyword">match</span></span> { <span class="comment">// type of the constant, Ecma-335.pdf, page 151</span>
          <span class="typed"><span class="type">java.nio.ByteBuffer</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Int(2)</span><span >BooleanTag</span></span> =&gt; <span class="typed"><span class="type">java.nio.ByteBuffer</span><a href="#163592">buf</a></span>.<span class="typed"><span class="type">(Byte)java.nio.ByteBuffer</span><a id="70034">put</a></span>(<span class="typed"><span class="type">Int(2)</span><span class="int">0x02</span></span>.<span class="typed"><span class="type">=&gt; Byte</span><a id="3082">toByte</a></span>)
          <span class="typed"><span class="type">java.nio.ByteBuffer</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Int(3)</span><span >ByteTag</span></span> =&gt;    <span class="typed"><span class="type">java.nio.ByteBuffer</span><a href="#163592">buf</a></span>.<span class="typed"><span class="type">(Byte)java.nio.ByteBuffer</span><a id="70034">put</a></span>(<span class="typed"><span class="type">Int(5)</span><span class="int">0x05</span></span>.<span class="typed"><span class="type">=&gt; Byte</span><a id="3082">toByte</a></span>)
          <span class="typed"><span class="type">java.nio.ByteBuffer</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Int(4)</span><span >ShortTag</span></span> =&gt;   <span class="typed"><span class="type">java.nio.ByteBuffer</span><a href="#163592">buf</a></span>.<span class="typed"><span class="type">(Byte)java.nio.ByteBuffer</span><a id="70034">put</a></span>(<span class="typed"><span class="type">Int(6)</span><span class="int">0x06</span></span>.<span class="typed"><span class="type">=&gt; Byte</span><a id="3082">toByte</a></span>)
          <span class="typed"><span class="type">java.nio.ByteBuffer</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Int(5)</span><span >CharTag</span></span> =&gt;    <span class="typed"><span class="type">java.nio.ByteBuffer</span><a href="#163592">buf</a></span>.<span class="typed"><span class="type">(Byte)java.nio.ByteBuffer</span><a id="70034">put</a></span>(<span class="typed"><span class="type">Int(7)</span><span class="int">0x07</span></span>.<span class="typed"><span class="type">=&gt; Byte</span><a id="3082">toByte</a></span>)
          <span class="typed"><span class="type">java.nio.ByteBuffer</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Int(6)</span><span >IntTag</span></span> =&gt;     <span class="typed"><span class="type">java.nio.ByteBuffer</span><a href="#163592">buf</a></span>.<span class="typed"><span class="type">(Byte)java.nio.ByteBuffer</span><a id="70034">put</a></span>(<span class="typed"><span class="type">Int(8)</span><span class="int">0x08</span></span>.<span class="typed"><span class="type">=&gt; Byte</span><a id="3082">toByte</a></span>)
          <span class="typed"><span class="type">java.nio.ByteBuffer</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Int(7)</span><span >LongTag</span></span> =&gt;    <span class="typed"><span class="type">java.nio.ByteBuffer</span><a href="#163592">buf</a></span>.<span class="typed"><span class="type">(Byte)java.nio.ByteBuffer</span><a id="70034">put</a></span>(<span class="typed"><span class="type">Int(10)</span><span class="int">0x0a</span></span>.<span class="typed"><span class="type">=&gt; Byte</span><a id="3082">toByte</a></span>)
          <span class="typed"><span class="type">java.nio.ByteBuffer</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Int(8)</span><span >FloatTag</span></span> =&gt;   <span class="typed"><span class="type">java.nio.ByteBuffer</span><a href="#163592">buf</a></span>.<span class="typed"><span class="type">(Byte)java.nio.ByteBuffer</span><a id="70034">put</a></span>(<span class="typed"><span class="type">Int(12)</span><span class="int">0x0c</span></span>.<span class="typed"><span class="type">=&gt; Byte</span><a id="3082">toByte</a></span>)
          <span class="typed"><span class="type">java.nio.ByteBuffer</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Int(9)</span><span >DoubleTag</span></span> =&gt;  <span class="typed"><span class="type">java.nio.ByteBuffer</span><a href="#163592">buf</a></span>.<span class="typed"><span class="type">(Byte)java.nio.ByteBuffer</span><a id="70034">put</a></span>(<span class="typed"><span class="type">Int(13)</span><span class="int">0x0d</span></span>.<span class="typed"><span class="type">=&gt; Byte</span><a id="3082">toByte</a></span>)
          <span class="typed"><span class="type">java.nio.ByteBuffer</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Int(10)</span><span >StringTag</span></span> =&gt;  <span class="typed"><span class="type">java.nio.ByteBuffer</span><a href="#163592">buf</a></span>.<span class="typed"><span class="type">(Byte)java.nio.ByteBuffer</span><a id="70034">put</a></span>(<span class="typed"><span class="type">Int(14)</span><span class="int">0x0e</span></span>.<span class="typed"><span class="type">=&gt; Byte</span><a id="3082">toByte</a></span>)

          <span class="comment">// TODO: other Tags: NoTag, UnitTag, ClassTag, EnumTag ???</span>

          <span class="comment">// ArrayTag falls in here</span>
          <span class="typed"><span class="type">Nothing</span><span class="keyword">case</span></span> _ =&gt; <span class="typed"><span class="type">(String)Nothing</span><a href="../../Global.scala.html#21214">abort</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;could not handle attribute argument: &quot;)</span><span class="string">&quot;could not handle attribute argument: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">GenMSIL.this.global.Constant</span><a href="#163668">c</a></span>)
        }

        <span class="keyword">val</span> <span class="typed"><span class="type">GenMSIL.this.global.Constant</span><a id="163665">cnst</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.Constant</span><a href="../../symtab/Constants.scala.html#22297">Constant</a></span> = <span class="typed"><span class="type">(GenMSIL.this.global.Name, GenMSIL.this.global.Constant)</span><a href="#163663">nvPair</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Constant</span><a id="23616">_2</a></span>
        <span class="typed"><span class="type">java.nio.ByteBuffer</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">GenMSIL.this.global.Constant</span><a href="#163665">cnst</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a href="../../symtab/Constants.scala.html#37590">tag</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3141">==</a></span> <span class="typed"><span class="type">Int(14)</span><span >ArrayTag</span></span>) {
          <span class="typed"><span class="type">java.nio.ByteBuffer</span><a href="#163592">buf</a></span>.<span class="typed"><span class="type">(Byte)java.nio.ByteBuffer</span><a id="70034">put</a></span>(<span class="typed"><span class="type">Int(29)</span><span class="int">0x1d</span></span>.<span class="typed"><span class="type">=&gt; Byte</span><a id="3082">toByte</a></span>)
          <span class="typed"><span class="type">(GenMSIL.this.global.Constant)java.nio.ByteBuffer</span><a href="#163664">emitType</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Constant</span><a href="#163665">cnst</a></span>.<span class="typed"><span class="type">(Int)GenMSIL.this.global.Constant</span><a href="../../symtab/Constants.scala.html#37607" id="21509">arrayValue</a></span>(<span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>)) <span class="comment">// FIXME: will crash if array length = 0</span>
        } <span class="keyword">else</span> <span class="typed"><span class="type">java.nio.ByteBuffer</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">GenMSIL.this.global.Constant</span><a href="#163665">cnst</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a href="../../symtab/Constants.scala.html#37590">tag</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3141">==</a></span> <span class="typed"><span class="type">Int(13)</span><span >EnumTag</span></span>) {
          <span class="typed"><span class="type">java.nio.ByteBuffer</span><a href="#163592">buf</a></span>.<span class="typed"><span class="type">(Byte)java.nio.ByteBuffer</span><a id="70034">put</a></span>(<span class="typed"><span class="type">Int(85)</span><span class="int">0x55</span></span>.<span class="typed"><span class="type">=&gt; Byte</span><a id="3082">toByte</a></span>)
          <span class="comment">// TODO: put a SerString (don't know what exactly, names of the enums somehow..)</span>
              } <span class="keyword">else</span> {
          <span class="typed"><span class="type">java.nio.ByteBuffer</span><a href="#163592">buf</a></span>.<span class="typed"><span class="type">(Byte)java.nio.ByteBuffer</span><a id="70034">put</a></span>(<span class="typed"><span class="type">Int(81)</span><span class="int">0x51</span></span>.<span class="typed"><span class="type">=&gt; Byte</span><a id="3082">toByte</a></span>)
          <span class="typed"><span class="type">(GenMSIL.this.global.Constant)java.nio.ByteBuffer</span><a href="#163664">emitType</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Constant</span><a href="#163665">cnst</a></span>)
        }

        <span class="typed"><span class="type">(String)java.nio.ByteBuffer</span><a href="#163593">emitSerString</a></span>(<span class="typed"><span class="type">(GenMSIL.this.global.Name, GenMSIL.this.global.Constant)</span><a href="#163663">nvPair</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Name</span><a id="23614">_1</a></span>.<span class="typed"><span class="type">()String</span><a href="../../symtab/Names.scala.html#23898">toString</a></span>)
        <span class="typed"><span class="type">(GenMSIL.this.global.Constant)Unit</span><a href="#163594">emitConst</a></span>(<span class="typed"><span class="type">(GenMSIL.this.global.Name, GenMSIL.this.global.Constant)</span><a href="#163663">nvPair</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Constant</span><a id="23616">_2</a></span>)
      }

      <span class="keyword">val</span> <span class="typed"><span class="type">Int</span><a id="163596">length</a></span> = <span class="typed"><span class="type">java.nio.ByteBuffer</span><a href="#163592">buf</a></span>.<span class="typed"><span class="type">()Int</span><a id="70089">position</a></span>()
      <span class="typed"><span class="type">java.nio.ByteBuffer</span><a href="#163592">buf</a></span>.<span class="typed"><span class="type">()Array[Byte]</span><a id="70043">array</a></span>().<span class="typed"><span class="type">(Int,Int)Array[Byte]</span><a id="21512">subArray</a></span>(<span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>, <span class="typed"><span class="type">Int</span><a href="#163596">length</a></span>)
    }

    <span class="keyword">def</span> <span class="typed"><span class="type">()Unit</span><a id="161666">writeAssembly</a></span>() {
      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="#161741">entryPoint</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5793">!=</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>) {
        <span class="typed"><span class="type">(Boolean,=&gt; Any)Unit</span><span id="6004"><a id="821">assert</a></span></span>(<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="#161741">entryPoint</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="../../symtab/Symbols.scala.html#25257">enclClass</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../../symtab/Symbols.scala.html#25166">isModuleClass</a></span>, <span class="typed"><span class="type">java.lang.String(&quot;main-method not defined in a module&quot;)</span><span class="string">&quot;main-method not defined in a module&quot;</span></span>)
        <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.MethodInfo</span><a id="163705">mainMethod</a></span> = <span class="typed"><span class="type">(GenMSIL.this.global.loaders.clrTypes.global.Symbol)ch.epfl.lamp.compiler.msil.MethodInfo</span><a href="../../symtab/clr/CLRTypes.scala.html#35391" id="24239">methods</a></span>(<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="#161741">entryPoint</a></span>.<span class="typed"><span class="type">GenMSIL.this.global.loaders.clrTypes.global.Symbol</span><a id="3503">asInstanceOf</a></span>[clrTypes.global.<span class="typed"><span class="type">GenMSIL.this.global.loaders.clrTypes.global.Symbol</span><a href="../../symtab/Symbols.scala.html#21866">Symbol</a></span>])
        <span class="keyword">val</span> <span class="typed"><span class="type">Array[ch.epfl.lamp.compiler.msil.Type]</span><a id="163706">stringArrayTypes</a></span>: <span class="typed"><span class="type">Array[ch.epfl.lamp.compiler.msil.Type]</span><a id="1072">Array</a></span>[MsilType] = <span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.Type*)Array[ch.epfl.lamp.compiler.msil.Type]</span><span id="21530"><a id="1073">Array</a></span></span>(<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35366">MSTRING_ARRAY</a></span>)
        <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.MethodBuilder</span><a id="163707">globalMain</a></span> = <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ModuleBuilder</span><a href="#161641">mmodule</a></span>.<span class="typed"><span class="type">(String,Int,ch.epfl.lamp.compiler.msil.Type,Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.emit.MethodBuilder</span><a id="162511">DefineGlobalMethod</a></span>(
          <span class="typed"><span class="type">java.lang.String(&quot;Main&quot;)</span><span class="string">&quot;Main&quot;</span></span>, MethodAttributes.Public <span class="typed"><span class="type">Int(22)</span><span >|</span></span> MethodAttributes.Static,
          <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35351">MVOID</a></span>, <span class="typed"><span class="type">Array[ch.epfl.lamp.compiler.msil.Type]</span><a href="#163706">stringArrayTypes</a></span>)
        <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.MethodBuilder</span><a href="#163707">globalMain</a></span>.<span class="typed"><span class="type">(Int,Int,String)ch.epfl.lamp.compiler.msil.emit.ParameterBuilder</span><a id="163977">DefineParameter</a></span>(<span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>, ParameterAttributes.<span class="typed"><span class="type">Int(0)</span><span >None</span></span>, <span class="typed"><span class="type">java.lang.String(&quot;args&quot;)</span><span class="string">&quot;args&quot;</span></span>)
        <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.AssemblyBuilder</span><a href="#161638">massembly</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.MethodInfo)Unit</span><a id="162485">SetEntryPoint</a></span>(<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.MethodBuilder</span><a href="#163707">globalMain</a></span>)
        <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a id="163708">code</a></span> = <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.MethodBuilder</span><a href="#163707">globalMain</a></span>.<span class="typed"><span class="type">()ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a id="163978">GetILGenerator</a></span>()
        <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.FieldInfo</span><a id="163709">moduleField</a></span> = <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.FieldInfo</span><a href="#161761">getModuleInstanceField</a></span>(<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="#161741">entryPoint</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="../../symtab/Symbols.scala.html#25257">enclClass</a></span>)
        <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#163708">code</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.FieldInfo)Unit</span><a id="162533">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165451">Ldsfld</a></span>, <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.FieldInfo</span><a href="#163709">moduleField</a></span>)
        <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#163708">code</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165213">Ldarg_0</a></span>)
        <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#163708">code</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.MethodInfo)Unit</span><a id="162539">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165427">Callvirt</a></span>, <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.MethodInfo</span><a href="#163705">mainMethod</a></span>)
        <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#163708">code</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165291">Ret</a></span>)
      }
      <span class="typed"><span class="type">()Unit</span><a href="#161667">createTypes</a></span>()
      <span class="keyword">val</span> <span class="typed"><span class="type">java.lang.String</span><a id="163702">filename</a></span> = <span class="typed"><span class="type">=&gt; java.io.File</span><a href="#161653">outDir</a></span>.<span class="typed"><span class="type">()java.lang.String</span><a id="40687">getPath</a></span>() 
      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="../../Global.scala.html#21157">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting</span><a href="../../Settings.scala.html#30066">debug</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting#T</span><a href="../../Settings.scala.html#30301">value</a></span>)
        <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;Output path: &quot;)</span><span class="string">&quot;Output path: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String</span><a href="#163702">filename</a></span>)
      <span class="keyword">try</span> {
        <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.AssemblyBuilder</span><a href="#161638">massembly</a></span>.<span class="typed"><span class="type">(String,String)Unit</span><a id="162483">Save</a></span>(<span class="typed"><span class="type">java.lang.String</span><a href="#163702">filename</a></span>, <span class="typed"><span class="type">=&gt; java.io.File</span><a href="#161656">srcPath</a></span>.<span class="typed"><span class="type">()java.lang.String</span><a id="40687">getPath</a></span>())
      } <span class="keyword">catch</span> {
        <span class="typed"><span class="type">Nothing</span><span class="keyword">case</span></span> <span class="typed"><span class="type">java.io.IOException</span><a id="165650">e</a></span>:<span class="typed"><span class="type">java.io.IOException</span><a id="3519">IOException</a></span> =&gt; <span class="typed"><span class="type">(String)Nothing</span><a href="../../Global.scala.html#21214">abort</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;Could not write to &quot;)</span><span class="string">&quot;Could not write to &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String</span><a href="#163702">filename</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;: &quot;)</span><span class="string">&quot;: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.io.IOException</span><a href="#165650">e</a></span>.<span class="typed"><span class="type">()java.lang.String</span><a id="23646">getMessage</a></span>())
      }
    }

    <span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">()Unit</span><a id="161667">createTypes</a></span>() {
      <span class="keyword">for</span> (<span class="typed"><span class="type">((GenMSIL.this.global.icodes.global.Symbol) =&gt; Unit)Unit</span><span id="32202"><a id="165652">sym</a></span></span> &lt;- <span class="typed"><span class="type">=&gt; scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.global.Symbol,GenMSIL.this.global.icodes.IClass]</span><a href="../icode/ICodes.scala.html#32305">classes</a></span>.<span class="typed"><span class="type">=&gt; Iterator[GenMSIL.this.global.icodes.global.Symbol]</span><a id="24242">keys</a></span>) {
        <span class="keyword">val</span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.IClass</span><a id="165653">iclass</a></span>   = <span class="typed"><span class="type">(GenMSIL.this.global.icodes.global.Symbol)GenMSIL.this.global.icodes.IClass</span><a href="../icode/ICodes.scala.html#32305" id="24239">classes</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#165652">sym</a></span>)
        <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a id="165654">tBuilder</a></span> = <span class="typed"><span class="type">(GenMSIL.this.global.loaders.clrTypes.global.Symbol)ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35387" id="24239">types</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#165652">sym</a></span>.<span class="typed"><span class="type">GenMSIL.this.global.loaders.clrTypes.global.Symbol</span><a id="3503">asInstanceOf</a></span>[clrTypes.global.<span class="typed"><span class="type">GenMSIL.this.global.loaders.clrTypes.global.Symbol</span><a href="../../symtab/Symbols.scala.html#21866">Symbol</a></span>]).<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a id="3503">asInstanceOf</a></span>[<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a id="83405">TypeBuilder</a></span>]
          
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="../../Global.scala.html#21157">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting</span><a href="../../Settings.scala.html#30066">debug</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting#T</span><a href="../../Settings.scala.html#30301">value</a></span>)
          <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;Calling CreatType for &quot;)</span><span class="string">&quot;Calling CreatType for &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#165652">sym</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;, &quot;)</span><span class="string">&quot;, &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a href="#165654">tBuilder</a></span>.<span class="typed"><span class="type">()java.lang.String</span><a id="35272">toString</a></span>)

        <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a href="#165654">tBuilder</a></span>.<span class="typed"><span class="type">()ch.epfl.lamp.compiler.msil.Type</span><a id="162734">CreateType</a></span>()
        <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a href="#165654">tBuilder</a></span>.<span class="typed"><span class="type">(String)Unit</span><a id="162749">setSourceFilepath</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.IClass</span><a href="#165653">iclass</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.CompilationUnit</span><a href="../icode/Members.scala.html#32690">cunit</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.util.SourceFile</span><a href="../../CompilationUnits.scala.html#24127">source</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.io.AbstractFile</span><a href="../../util/SourceFile.scala.html#22650">file</a></span>.<span class="typed"><span class="type">=&gt; String</span><a href="../../io/AbstractFile.scala.html#25440">path</a></span>)
      }
    }

    <span class="keyword">private</span>[GenMSIL] <span class="keyword">def</span> <span class="typed"><span class="type">(GenMSIL.this.global.icodes.IClass)Unit</span><a id="161668">genClass</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.IClass</span><a id="161794">iclass</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.icodes.IClass</span><a href="../icode/Members.scala.html#32330">IClass</a></span>) {
      <span class="keyword">val</span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a id="165665">sym</a></span> = <span class="typed"><span class="type">GenMSIL.this.global.icodes.IClass</span><a href="#161794">iclass</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Symbol</span><a href="../icode/Members.scala.html#32681">symbol</a></span>
      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="../../Global.scala.html#21157">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting</span><a href="../../Settings.scala.html#30066">debug</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting#T</span><a href="../../Settings.scala.html#30301">value</a></span>)
        <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;Generating class &quot;)</span><span class="string">&quot;Generating class &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#165665">sym</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot; flags: &quot;)</span><span class="string">&quot; flags: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">object scala.tools.nsc.symtab.Flags</span><a href="../../symtab/Flags.scala.html#9658">Flags</a></span>.<span class="typed"><span class="type">(Long)String</span><a href="../../symtab/Flags.scala.html#20637">flagsToString</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#165665">sym</a></span>.<span class="typed"><span class="type">=&gt; Long</span><a href="../../symtab/Symbols.scala.html#25218">flags</a></span>))
      <span class="typed"><span class="type">(GenMSIL.this.global.icodes.IClass)Unit</span><a href="#161630">clasz</a></span> = <span class="typed"><span class="type">GenMSIL.this.global.icodes.IClass</span><a href="#161794">iclass</a></span>

      <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a id="165666">tBuilder</a></span> = <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.Type</span><a href="#161752">getType</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#165665">sym</a></span>).<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a id="3503">asInstanceOf</a></span>[<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a id="83405">TypeBuilder</a></span>]
      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">(GenMSIL.this.global.Symbol)Boolean</span><a href="#161759">isCloneable</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#165665">sym</a></span>)){
        <span class="comment">// FIXME: why there's no nme.clone_ ?</span>
        <span class="comment">// &quot;Clone&quot;: if the code is non-portable, &quot;Clone&quot; is defined, not &quot;clone&quot;</span>
        <span class="comment">// TODO: improve condition (should override AnyRef.clone)</span>
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">GenMSIL.this.global.icodes.IClass</span><a href="#161794">iclass</a></span>.<span class="typed"><span class="type">=&gt; List[GenMSIL.this.global.icodes.IMethod]</span><a href="../icode/Members.scala.html#32687">methods</a></span>.<span class="typed"><span class="type">((GenMSIL.this.global.icodes.IMethod) =&gt; Boolean)Boolean</span><a id="21372">forall</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.IMethod</span><a id="165674">m</a></span> =&gt; {
          <span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span>((<span class="typed"><span class="type">GenMSIL.this.global.icodes.IMethod</span><a href="#165674">m</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Symbol</span><a href="../icode/Members.scala.html#32864">symbol</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Name</span><a href="../../symtab/Symbols.scala.html#25215">name</a></span>.<span class="typed"><span class="type">()String</span><a href="../../symtab/Names.scala.html#23898">toString</a></span>() <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5793">!=</a></span> <span class="typed"><span class="type">java.lang.String(&quot;clone&quot;)</span><span class="string">&quot;clone&quot;</span></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2750">||</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.IMethod</span><a href="#165674">m</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Symbol</span><a href="../icode/Members.scala.html#32864">symbol</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Name</span><a href="../../symtab/Symbols.scala.html#25215">name</a></span>.<span class="typed"><span class="type">()String</span><a href="../../symtab/Names.scala.html#23898">toString</a></span>() <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5793">!=</a></span> <span class="typed"><span class="type">java.lang.String(&quot;Clone&quot;)</span><span class="string">&quot;Clone&quot;</span></span>) <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span>
            <span class="typed"><span class="type">GenMSIL.this.global.icodes.IMethod</span><a href="#165674">m</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Symbol</span><a href="../icode/Members.scala.html#32864">symbol</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Type</span><a href="../../symtab/Symbols.scala.html#25230">tpe</a></span>.<span class="typed"><span class="type">=&gt; List[GenMSIL.this.global.icodes.global.Type]</span><a href="../../symtab/Types.scala.html#25668">paramTypes</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21345">length</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3142">!=</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>)
        })) {
          <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="../../Global.scala.html#21157">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting</span><a href="../../Settings.scala.html#30066">debug</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting#T</span><a href="../../Settings.scala.html#30301">value</a></span>)
            <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;auto-generating cloneable method for &quot;)</span><span class="string">&quot;auto-generating cloneable method for &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#165665">sym</a></span>)
          <span class="keyword">val</span> <span class="typed"><span class="type">Short</span><a id="165684">attrs</a></span>: <span class="typed"><span class="type">Short</span><a id="2384">Short</a></span> = (MethodAttributes.Public | MethodAttributes.Virtual <span class="typed"><span class="type">Short(198)</span><span >|</span></span>
                              MethodAttributes.HideBySig)
          <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.MethodBuilder</span><a id="165685">cloneMethod</a></span> = <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a href="#165666">tBuilder</a></span>.<span class="typed"><span class="type">(String,short,ch.epfl.lamp.compiler.msil.Type,Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.emit.MethodBuilder</span><a id="162736">DefineMethod</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;Clone&quot;)</span><span class="string">&quot;Clone&quot;</span></span>, <span class="typed"><span class="type">Short</span><a href="#165684">attrs</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35360">MOBJECT</a></span>,
                                                  <span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.Type</span><a id="34227">MsilType</a></span>.<span class="typed"><span class="type">Array[ch.epfl.lamp.compiler.msil.Type]</span><a id="35178">EmptyTypes</a></span>)
          <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a id="165686">clCode</a></span> = <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.MethodBuilder</span><a href="#165685">cloneMethod</a></span>.<span class="typed"><span class="type">()ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a id="163978">GetILGenerator</a></span>()
          <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#165686">clCode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165213">Ldarg_0</a></span>)
          <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#165686">clCode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.MethodInfo)Unit</span><a id="162539">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165287">Call</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.MethodInfo</span><a href="#161575">MEMBERWISE_CLONE</a></span>)
          <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#165686">clCode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165291">Ret</a></span>)
        }
      }

      <span class="keyword">val</span> <span class="typed"><span class="type">Int</span><a id="165667">line</a></span> = (<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#165665">sym</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.util.Position</span><a href="../../symtab/Symbols.scala.html#25087">pos</a></span>).<span class="typed"><span class="type">=&gt; Option[Int]</span><a href="../../util/Position.scala.html#25343">line</a></span> <span class="typed"><span class="type">Int</span><span class="keyword">match</span></span> {
        <span class="typed"><span class="type">Int</span><span class="keyword">case</span></span> <a id="1">Some</a>(<span class="typed"><span class="type">Int</span><a id="165721">l</a></span>) =&gt; <span class="typed"><span class="type">Int</span><a href="#165721">l</a></span>
        <span class="typed"><span class="type">Int(0)</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object None</span><a id="536">None</a></span> =&gt; <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>
      }
      <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a href="#165666">tBuilder</a></span>.<span class="typed"><span class="type">(int,String)Unit</span><a id="162748">setPosition</a></span>(<span class="typed"><span class="type">Int</span><a href="#165667">line</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.icodes.IClass</span><a href="#161794">iclass</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.CompilationUnit</span><a href="../icode/Members.scala.html#32690">cunit</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.util.SourceFile</span><a href="../../CompilationUnits.scala.html#24127">source</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.io.AbstractFile</span><a href="../../util/SourceFile.scala.html#22650">file</a></span>.<span class="typed"><span class="type">=&gt; String</span><a href="../../io/AbstractFile.scala.html#25439">name</a></span>)

      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">(GenMSIL.this.global.Symbol)Boolean</span><a href="#161757">isTopLevelModule</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#165665">sym</a></span>)) {
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="../../Global.scala.html#21157">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting</span><a href="../../Settings.scala.html#30066">debug</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting#T</span><a href="../../Settings.scala.html#30301">value</a></span>)
          <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;TopLevelModule: &quot;)</span><span class="string">&quot;TopLevelModule: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#165665">sym</a></span>)
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#165665">sym</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Symbol</span><a href="../../symtab/Symbols.scala.html#25277">linkedClassOfModule</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">object GenMSIL.this.global.NoSymbol</span><a href="../../symtab/Symbols.scala.html#21873">NoSymbol</a></span>) {
          <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="../../Global.scala.html#21157">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting</span><a href="../../Settings.scala.html#30066">debug</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting#T</span><a href="../../Settings.scala.html#30301">value</a></span>)
            <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot; no linked class: &quot;)</span><span class="string">&quot; no linked class: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#165665">sym</a></span>)
          <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)Unit</span><a href="#161763">dumpMirrorClass</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#165665">sym</a></span>)
        } <span class="keyword">else</span> <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">=&gt; GenMSIL.this.global.Run</span><a href="../../Global.scala.html#21305">currentRun</a></span>.<span class="typed"><span class="type">(GenMSIL.this.global.Symbol)Boolean</span><a href="../../Global.scala.html#36586">compiles</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#165665">sym</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Symbol</span><a href="../../symtab/Symbols.scala.html#25277">linkedClassOfModule</a></span>)) {
          <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="../../Global.scala.html#21157">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting</span><a href="../../Settings.scala.html#30066">debug</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting#T</span><a href="../../Settings.scala.html#30301">value</a></span>)
            <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot; not compiling linked class: &quot;)</span><span class="string">&quot; not compiling linked class: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#165665">sym</a></span>)
          <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)Unit</span><a href="#161763">dumpMirrorClass</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#165665">sym</a></span>)
        }
      }

      <span class="comment">// the pickling info is not written to the module class, but to it's</span>
      <span class="comment">// linked class (the mirror class eventually dumped)</span>
      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span>(<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a href="#165666">tBuilder</a></span>.<span class="typed"><span class="type">java.lang.String</span><a id="35505">Name</a></span>.<span class="typed"><span class="type">(java.lang.String)Boolean</span><a id="5842">endsWith</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;$&quot;)</span><span class="string">&quot;$&quot;</span></span>) <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#165665">sym</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../../symtab/Symbols.scala.html#25166">isModuleClass</a></span>)){
        <span class="comment">// think the if inside could be removed, because in this case, addSymtabAttribute is</span>
        <span class="comment">// called in the dumpMirrorClass method</span>
        <span class="typed"><span class="type">(GenMSIL.this.global.Symbol,ch.epfl.lamp.compiler.msil.emit.TypeBuilder)Unit</span><a href="#161663">addSymtabAttribute</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">(GenMSIL.this.global.Symbol)Boolean</span><a href="#161757">isTopLevelModule</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#165665">sym</a></span>)) <span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#165665">sym</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Symbol</span><a href="../../symtab/Symbols.scala.html#25282">sourceModule</a></span> <span class="keyword">else</span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#165665">sym</a></span>, <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a href="#165666">tBuilder</a></span>)

        <span class="comment">// TODO: remove; check the above think:</span>
        <span class="typed"><span class="type">(Boolean,=&gt; Any)Unit</span><span id="6004"><a id="821">assert</a></span></span>(<span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">(GenMSIL.this.global.Symbol)Boolean</span><a href="#161757">isTopLevelModule</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#165665">sym</a></span>), <span class="typed"><span class="type">java.lang.String(&quot;can't remove the 'if'&quot;)</span><span class="string">&quot;can't remove the 'if'&quot;</span></span>)
      }

      <span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.ICustomAttributeSetter,List[GenMSIL.this.global.AnnotationInfo])Unit</span><a href="#161664">addAttributes</a></span>(<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a href="#165666">tBuilder</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#165665">sym</a></span>.<span class="typed"><span class="type">=&gt; List[GenMSIL.this.global.icodes.global.AnnotationInfo]</span><a href="../../symtab/Symbols.scala.html#25090">attributes</a></span>)

      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">GenMSIL.this.global.icodes.IClass</span><a href="#161794">iclass</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Symbol</span><a href="../icode/Members.scala.html#32681">symbol</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5793">!=</a></span> <span class="typed"><span class="type">object GenMSIL.this.global.definitions</span><a href="../../symtab/Definitions.scala.html#22259">definitions</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="../../symtab/Definitions.scala.html#25901">ArrayClass</a></span>)
        <span class="typed"><span class="type">GenMSIL.this.global.icodes.IClass</span><a href="#161794">iclass</a></span>.<span class="typed"><span class="type">=&gt; List[GenMSIL.this.global.icodes.IMethod]</span><a href="../icode/Members.scala.html#32687">methods</a></span> <span class="typed"><span class="type">((GenMSIL.this.global.icodes.IMethod) =&gt; Unit)Unit</span><a id="21366">foreach</a></span> <span class="typed"><span class="type">(GenMSIL.this.global.icodes.IMethod)Unit</span><a href="#161669">genMethod</a></span>

    } <span class="comment">//genClass</span>


    <span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(GenMSIL.this.global.icodes.IMethod)Unit</span><a id="161669">genMethod</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.IMethod</span><a id="165742">m</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.icodes.IMethod</span><a href="../icode/Members.scala.html#32332">IMethod</a></span>) {
      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="../../Global.scala.html#21157">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting</span><a href="../../Settings.scala.html#30066">debug</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting#T</span><a href="../../Settings.scala.html#30301">value</a></span>)
        <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;Generating method &quot;)</span><span class="string">&quot;Generating method &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.IMethod</span><a href="#165742">m</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Symbol</span><a href="../icode/Members.scala.html#32864">symbol</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot; flags: &quot;)</span><span class="string">&quot; flags: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">object scala.tools.nsc.symtab.Flags</span><a href="../../symtab/Flags.scala.html#9658">Flags</a></span>.<span class="typed"><span class="type">(Long)String</span><a href="../../symtab/Flags.scala.html#20637">flagsToString</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.IMethod</span><a href="#165742">m</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Symbol</span><a href="../icode/Members.scala.html#32864">symbol</a></span>.<span class="typed"><span class="type">=&gt; Long</span><a href="../../symtab/Symbols.scala.html#25218">flags</a></span>) <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span>
            <span class="typed"><span class="type">java.lang.String(&quot; owner: &quot;)</span><span class="string">&quot; owner: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.IMethod</span><a href="#165742">m</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Symbol</span><a href="../icode/Members.scala.html#32864">symbol</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Symbol</span><a href="../../symtab/Symbols.scala.html#25211">owner</a></span>)
      <span class="typed"><span class="type">(GenMSIL.this.global.icodes.IMethod)Unit</span><a href="#161633">method</a></span> = <span class="typed"><span class="type">GenMSIL.this.global.icodes.IMethod</span><a href="#165742">m</a></span>
      <span class="typed"><span class="type">=&gt; scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.Local,ch.epfl.lamp.compiler.msil.emit.LocalBuilder]</span><a href="#161746">localBuilders</a></span>.<span class="typed"><span class="type">()Unit</span><a id="24168">clear</a></span>
      <span class="typed"><span class="type">(GenMSIL.this.global.icodes.IMethod)Unit</span><a href="#161736">computeLocalVarsIndex</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.IMethod</span><a href="#165742">m</a></span>)

      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">GenMSIL.this.global.icodes.IMethod</span><a href="#165742">m</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Symbol</span><a href="../icode/Members.scala.html#32864">symbol</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../../symtab/Symbols.scala.html#25146">isClassConstructor</a></span>){
        <span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.ILGenerator)Unit</span><a href="#161645">mcode</a></span> = <span class="typed"><span class="type">(GenMSIL.this.global.loaders.clrTypes.global.Symbol)ch.epfl.lamp.compiler.msil.ConstructorInfo</span><a href="../../symtab/clr/CLRTypes.scala.html#35389" id="24239">constructors</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.IMethod</span><a href="#165742">m</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Symbol</span><a href="../icode/Members.scala.html#32864">symbol</a></span>.<span class="typed"><span class="type">GenMSIL.this.global.loaders.clrTypes.global.Symbol</span><a id="3503">asInstanceOf</a></span>[clrTypes.global.<span class="typed"><span class="type">GenMSIL.this.global.loaders.clrTypes.global.Symbol</span><a href="../../symtab/Symbols.scala.html#21866">Symbol</a></span>]).<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ConstructorBuilder</span><a id="3503">asInstanceOf</a></span>[<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ConstructorBuilder</span><a id="83444">ConstructorBuilder</a></span>].<span class="typed"><span class="type">()ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a id="165757">GetILGenerator</a></span>()
      } <span class="keyword">else</span> {
        <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.MethodBuilder</span><a id="165763">mBuilder</a></span> = <span class="typed"><span class="type">(GenMSIL.this.global.loaders.clrTypes.global.Symbol)ch.epfl.lamp.compiler.msil.MethodInfo</span><a href="../../symtab/clr/CLRTypes.scala.html#35391" id="24239">methods</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.IMethod</span><a href="#165742">m</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Symbol</span><a href="../icode/Members.scala.html#32864">symbol</a></span>.<span class="typed"><span class="type">GenMSIL.this.global.loaders.clrTypes.global.Symbol</span><a id="3503">asInstanceOf</a></span>[clrTypes.global.<span class="typed"><span class="type">GenMSIL.this.global.loaders.clrTypes.global.Symbol</span><a href="../../symtab/Symbols.scala.html#21866">Symbol</a></span>]).<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.MethodBuilder</span><a id="3503">asInstanceOf</a></span>[<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.MethodBuilder</span><a id="83438">MethodBuilder</a></span>]
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.MethodBuilder</span><a href="#165763">mBuilder</a></span>.<span class="typed"><span class="type">()Boolean</span><a id="35698">IsAbstract</a></span>())
          <span class="keyword">try</span> {
            <span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.ILGenerator)Unit</span><a href="#161645">mcode</a></span> = <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.MethodBuilder</span><a href="#165763">mBuilder</a></span>.<span class="typed"><span class="type">()ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a id="163978">GetILGenerator</a></span>()
          } <span class="keyword">catch</span> {
            <span class="typed"><span class="type">Nothing</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Exception</span><a id="165767">e</a></span>: <span class="typed"><span class="type">Exception</span><a id="2131">Exception</a></span> =&gt;
              <span class="typed"><span class="type">object java.lang.System</span><a id="1886">System</a></span>.<span class="typed"><span class="type">java.io.PrintStream</span><a id="47436">out</a></span>.<span class="typed"><span class="type">(java.lang.String)Unit</span><a id="27111">println</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;m.symbol       = &quot;)</span><span class="string">&quot;m.symbol       = &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">object scala.tools.nsc.symtab.Flags</span><a href="../../symtab/Flags.scala.html#9658">Flags</a></span>.<span class="typed"><span class="type">(Long)String</span><a href="../../symtab/Flags.scala.html#20637">flagsToString</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.IMethod</span><a href="#165742">m</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Symbol</span><a href="../icode/Members.scala.html#32864">symbol</a></span>.<span class="typed"><span class="type">=&gt; Long</span><a href="../../symtab/Symbols.scala.html#25218">flags</a></span>) <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot; &quot;)</span><span class="string">&quot; &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.IMethod</span><a href="#165742">m</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Symbol</span><a href="../icode/Members.scala.html#32864">symbol</a></span>)
              <span class="typed"><span class="type">object java.lang.System</span><a id="1886">System</a></span>.<span class="typed"><span class="type">java.io.PrintStream</span><a id="47436">out</a></span>.<span class="typed"><span class="type">(java.lang.String)Unit</span><a id="27111">println</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;m.symbol.owner = &quot;)</span><span class="string">&quot;m.symbol.owner = &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">object scala.tools.nsc.symtab.Flags</span><a href="../../symtab/Flags.scala.html#9658">Flags</a></span>.<span class="typed"><span class="type">(Long)String</span><a href="../../symtab/Flags.scala.html#20637">flagsToString</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.IMethod</span><a href="#165742">m</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Symbol</span><a href="../icode/Members.scala.html#32864">symbol</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Symbol</span><a href="../../symtab/Symbols.scala.html#25211">owner</a></span>.<span class="typed"><span class="type">=&gt; Long</span><a href="../../symtab/Symbols.scala.html#25218">flags</a></span>) <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot; &quot;)</span><span class="string">&quot; &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.IMethod</span><a href="#165742">m</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Symbol</span><a href="../icode/Members.scala.html#32864">symbol</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Symbol</span><a href="../../symtab/Symbols.scala.html#25211">owner</a></span>)
              <span class="typed"><span class="type">object java.lang.System</span><a id="1886">System</a></span>.<span class="typed"><span class="type">java.io.PrintStream</span><a id="47436">out</a></span>.<span class="typed"><span class="type">(java.lang.String)Unit</span><a id="27111">println</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;mBuilder       = &quot;)</span><span class="string">&quot;mBuilder       = &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.MethodBuilder</span><a href="#165763">mBuilder</a></span>)
              <span class="typed"><span class="type">object java.lang.System</span><a id="1886">System</a></span>.<span class="typed"><span class="type">java.io.PrintStream</span><a id="47436">out</a></span>.<span class="typed"><span class="type">(java.lang.String)Unit</span><a id="27111">println</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;mBuilder.DeclaringType = &quot;)</span><span class="string">&quot;mBuilder.DeclaringType = &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span>
                                 <span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.TypeAttributes</span><a id="34287">TypeAttributes</a></span>.<span class="typed"><span class="type">(Int)java.lang.String</span><a id="165807">toString</a></span>(<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.MethodBuilder</span><a href="#165763">mBuilder</a></span>.<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a id="35506">DeclaringType</a></span>.<span class="typed"><span class="type">Int</span><a id="35183">Attributes</a></span>) <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span>
                                 <span class="typed"><span class="type">java.lang.String(&quot;::&quot;)</span><span class="string">&quot;::&quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.MethodBuilder</span><a href="#165763">mBuilder</a></span>.<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a id="35506">DeclaringType</a></span>)
              <span class="typed"><span class="type">Nothing</span><span class="keyword">throw</span></span> <span class="typed"><span class="type">Exception</span><a href="#165767">e</a></span>
          }
          <span class="keyword">else</span>
            <span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.ILGenerator)Unit</span><a href="#161645">mcode</a></span> = <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>
      }

      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5793">!=</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>) {
        <span class="keyword">for</span> (<span class="typed"><span class="type">((GenMSIL.this.global.icodes.Local) =&gt; Unit)Unit</span><span id="21366"><a id="165815">local</a></span></span> &lt;- <span class="typed"><span class="type">GenMSIL.this.global.icodes.IMethod</span><a href="#165742">m</a></span>.<span class="typed"><span class="type">=&gt; List[GenMSIL.this.global.icodes.Local]</span><a href="../icode/Members.scala.html#32885">locals</a></span> <span class="typed"><span class="type">(List[GenMSIL.this.global.icodes.Local])List[GenMSIL.this.global.icodes.Local]</span><a id="21399">--</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.IMethod</span><a href="#165742">m</a></span>.<span class="typed"><span class="type">=&gt; List[GenMSIL.this.global.icodes.Local]</span><a href="../icode/Members.scala.html#32888">params</a></span>) {
          <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="../../Global.scala.html#21157">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting</span><a href="../../Settings.scala.html#30066">debug</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting#T</span><a href="../../Settings.scala.html#30301">value</a></span>)
            <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;add local var: &quot;)</span><span class="string">&quot;add local var: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.Local</span><a href="#165815">local</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;, of kind &quot;)</span><span class="string">&quot;, of kind &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.Local</span><a href="#165815">local</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.TypeKind</span><a href="../icode/Members.scala.html#33248">kind</a></span>)
          <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a id="165816">t</a></span>: <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a id="34226">MsilType</a></span> = <span class="typed"><span class="type">(GenMSIL.this.global.icodes.TypeKind)ch.epfl.lamp.compiler.msil.Type</span><a href="#161749">msilType</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.Local</span><a href="#165815">local</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.TypeKind</span><a href="../icode/Members.scala.html#33248">kind</a></span>)
          <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.LocalBuilder</span><a id="165817">localBuilder</a></span> = <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.Type)ch.epfl.lamp.compiler.msil.emit.LocalBuilder</span><a id="162547">DeclareLocal</a></span>(<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a href="#165816">t</a></span>)
          <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.LocalBuilder</span><a href="#165817">localBuilder</a></span>.<span class="typed"><span class="type">(String)Unit</span><a id="162638">SetLocalSymInfo</a></span>(<span class="typed"><span class="type">(GenMSIL.this.global.Symbol)String</span><a href="#161737">msilName</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.Local</span><a href="#165815">local</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Symbol</span><a href="../icode/Members.scala.html#33246">sym</a></span>))
          <span class="typed"><span class="type">=&gt; scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.Local,ch.epfl.lamp.compiler.msil.emit.LocalBuilder]</span><a href="#161746">localBuilders</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.Local</span><a href="#165815">local</a></span>) = <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.LocalBuilder</span><a href="#165817">localBuilder</a></span>
        }
        <span class="typed"><span class="type">(GenMSIL.this.global.icodes.IMethod)Unit</span><a href="#161676">genCode</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.IMethod</span><a href="#165742">m</a></span>)
      }

    }

    <span class="keyword">var</span> <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><span id="161672"><span id="161670"><span id="161671"><a id="162620">linearization</a></span></span></span></span>: <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a id="526">List</a></span>[BasicBlock] = <span class="typed"><span class="type">object Nil</span><a id="335">Nil</a></span>
    <span class="comment">// a &quot;ret&quot; instruction is needed (which is not present in</span>
    <span class="comment">//  icode) if there's no code after a try-catch block</span>
    <span class="keyword">var</span> <span class="typed"><span class="type">Boolean</span><span id="161675"><span id="161673"><span id="161674"><a id="162621">needAdditionalRet</a></span></span></span></span>: <span class="typed"><span class="type">Boolean</span><a id="2170">Boolean</a></span> = <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>

    <span class="keyword">def</span> <span class="typed"><span class="type">(GenMSIL.this.global.icodes.IMethod)Unit</span><a id="161676">genCode</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.IMethod</span><a id="165823">m</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.icodes.IMethod</span><a href="../icode/Members.scala.html#32332">IMethod</a></span>) {
      <span class="typed"><span class="type">(GenMSIL.this.global.icodes.Code)Unit</span><a href="#161636">code</a></span> = <span class="typed"><span class="type">GenMSIL.this.global.icodes.IMethod</span><a href="#165823">m</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.Code</span><a href="../icode/Members.scala.html#32867">code</a></span>

      <span class="typed"><span class="type">=&gt; scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.BasicBlock,ch.epfl.lamp.compiler.msil.emit.Label]</span><a href="#161731">labels</a></span>.<span class="typed"><span class="type">()Unit</span><a id="24168">clear</a></span>
      <span class="typed"><span class="type">(List[GenMSIL.this.global.icodes.BasicBlock])Unit</span><a href="#161671">linearization</a></span> = <span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.Linearizer</span><a href="../icode/ICodes.scala.html#32308">linearizer</a></span>.<span class="typed"><span class="type">(GenMSIL.this.global.icodes.IMethod)List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="../icode/Linearizers.scala.html#33332">linearize</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.IMethod</span><a href="#165823">m</a></span>)
      <span class="keyword">val</span> <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a id="165824">orderedBlocks</a></span> = (<span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">GenMSIL.this.global.icodes.IMethod</span><a href="#165823">m</a></span>.<span class="typed"><span class="type">=&gt; List[GenMSIL.this.global.icodes.ExceptionHandler]</span><a href="../icode/Members.scala.html#32873">exh</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5793">!=</a></span> <span class="typed"><span class="type">object Nil</span><a id="335">Nil</a></span>) <span class="typed"><span class="type">(List[GenMSIL.this.global.icodes.BasicBlock],List[GenMSIL.this.global.icodes.ExceptionHandler])List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#161710">orderBlocksForExh</a></span>(<span class="typed"><span class="type">=&gt; List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#161670">linearization</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.icodes.IMethod</span><a href="#165823">m</a></span>.<span class="typed"><span class="type">=&gt; List[GenMSIL.this.global.icodes.ExceptionHandler]</span><a href="../icode/Members.scala.html#32873">exh</a></span>)
                           <span class="keyword">else</span> <span class="typed"><span class="type">=&gt; List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#161670">linearization</a></span>)

      <span class="typed"><span class="type">(List[GenMSIL.this.global.icodes.BasicBlock])Unit</span><a href="#161735">makeLabels</a></span>(<span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#165824">orderedBlocks</a></span>) <span class="comment">// orderBlocksForExh may create new Blocks -&gt; new Labels</span>
      <span class="typed"><span class="type">(List[GenMSIL.this.global.icodes.BasicBlock])Unit</span><a href="#161720">genBlocks</a></span>(<span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#165824">orderedBlocks</a></span>)
      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a href="#161673">needAdditionalRet</a></span>) {
        <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165291">Ret</a></span>)
        <span class="typed"><span class="type">(Boolean)Unit</span><a href="#161674">needAdditionalRet</a></span> = <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>
      }
    }

    <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="typed"><span class="type">class ExHInstruction extends java.lang.Object with ScalaObject</span><a id="161677">ExHInstruction</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><span id="165833"><a id="165837">handler</a></span></span>: <span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="../icode/ExceptionHandlers.scala.html#32394">ExceptionHandler</a></span>) { }
    <span class="keyword">case</span> <span class="keyword">class</span> <span class="typed"><span class="type">class BeginExceptionBlock extends BytecodeGenerator.this.ExHInstruction with ScalaObject with Product</span><span id="2751"><span id="165847"><span id="29737"><span id="161679"><span id="29814"><span id="165855"><span id="165846"><span id="3500"><span id="29815"><span id="165845"><span id="2750"><span id="29856"><span id="165848"><span id="308"><span id="165858"><span id="165857"><span id="165860"><span id="165850"><span id="3501"><span id="165851"><span id="161678"><span id="5794"><span id="165859"><span id="165852"><a id="3509">BeginExceptionBlock</a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><span id="165840"><span id="165839"><span id="165844"><a id="169385">handler</a></span></span></span></span>: <span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="../icode/ExceptionHandlers.scala.html#32394">ExceptionHandler</a></span>) <span class="keyword">extends</span> <span class="typed"><span class="type">BytecodeGenerator.this.ExHInstruction</span><a href="#161677">ExHInstruction</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#165844">handler</a></span>)
    <span class="keyword">case</span> <span class="keyword">class</span> <span class="typed"><span class="type">class BeginCatchBlock extends BytecodeGenerator.this.ExHInstruction with ScalaObject with Product</span><span id="165886"><span id="2751"><span id="165876"><span id="165890"><span id="165880"><span id="165879"><span id="165892"><span id="165891"><span id="165875"><span id="3509"><span id="161681"><span id="29737"><span id="29814"><span id="161682"><span id="3500"><span id="29815"><span id="23625"><span id="165877"><span id="2750"><span id="29856"><span id="1379"><span id="165893"><span id="308"><span id="3501"><span id="165874"><span id="165887"><span id="165881"><a id="5794">BeginCatchBlock</a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><span id="165865"><span id="165864"><span id="165872"><a id="169382">handler</a></span></span></span></span>: <span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="../icode/ExceptionHandlers.scala.html#32394">ExceptionHandler</a></span>, <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><span id="165867"><span id="165866"><span id="165873"><a id="169383">exceptionType</a></span></span></span></span>: <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a id="34226">MsilType</a></span>) <span class="keyword">extends</span> <span class="typed"><span class="type">BytecodeGenerator.this.ExHInstruction</span><a href="#161677">ExHInstruction</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#165872">handler</a></span>)
    <span class="keyword">case</span> <span class="keyword">class</span> <span class="typed"><span class="type">class BeginFinallyBlock extends BytecodeGenerator.this.ExHInstruction with ScalaObject with Product</span><span id="165914"><span id="2751"><span id="29737"><span id="29814"><span id="165905"><span id="3500"><span id="29815"><span id="165916"><span id="165909"><span id="165908"><span id="2750"><span id="29856"><span id="165917"><span id="308"><span id="3501"><span id="165904"><span id="165915"><span id="165903"><span id="5794"><span id="161684"><span id="161685"><span id="165902"><span id="165912"><span id="165907"><a id="3509">BeginFinallyBlock</a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><span id="165897"><span id="165896"><span id="165901"><a id="169380">handler</a></span></span></span></span>: <span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="../icode/ExceptionHandlers.scala.html#32394">ExceptionHandler</a></span>) <span class="keyword">extends</span> <span class="typed"><span class="type">BytecodeGenerator.this.ExHInstruction</span><a href="#161677">ExHInstruction</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#165901">handler</a></span>)
    <span class="keyword">case</span> <span class="keyword">class</span> <span class="typed"><span class="type">class EndExceptionBlock extends BytecodeGenerator.this.ExHInstruction with ScalaObject with Product</span><span id="2751"><span id="165938"><span id="29737"><span id="29814"><span id="165932"><span id="165927"><span id="3500"><span id="29815"><span id="165933"><span id="165941"><span id="165926"><span id="2750"><span id="29856"><span id="308"><span id="161688"><span id="165931"><span id="165928"><span id="3501"><span id="165936"><span id="165929"><span id="161687"><span id="5794"><span id="165940"><span id="3509"><a id="165939">EndExceptionBlock</a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><span id="165921"><span id="165920"><span id="165925"><a id="169378">handler</a></span></span></span></span>: <span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="../icode/ExceptionHandlers.scala.html#32394">ExceptionHandler</a></span>) <span class="keyword">extends</span> <span class="typed"><span class="type">BytecodeGenerator.this.ExHInstruction</span><a href="#161677">ExHInstruction</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#165925">handler</a></span>)


    <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="typed"><span class="type">class Block extends java.lang.Object with ScalaObject</span><a id="161690">Block</a></span> {
      <span class="keyword">var</span> <span class="typed"><span class="type">Boolean</span><span id="165946"><span id="165944"><span id="165945"><a id="165952">closed</a></span></span></span></span>: <span class="typed"><span class="type">Boolean</span><a id="2170">Boolean</a></span> = <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>
      <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Option[BytecodeGenerator.this.BlockList0]</span><a id="165947">parentBlockList</a></span>: <span class="typed"><span class="type">Option[BytecodeGenerator.this.BlockList0]</span><a id="934">Option</a></span>[BlockList0]
      <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.BasicBlock</span><a id="165948">firstBasicBlock</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="../icode/BasicBlocks.scala.html#32337">BasicBlock</a></span>
      <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.BasicBlock</span><a id="165949">lastBasicBlock</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="../icode/BasicBlocks.scala.html#32337">BasicBlock</a></span>
<span class="comment">//      def getExceptionBlock(exh: ExceptionHandler): Option[ExceptionBlock]</span>
      <span class="keyword">def</span> <span class="typed"><span class="type">()Unit</span><a id="165950">close</a></span>(): <span class="typed"><span class="type">Unit</span><a id="2169">Unit</a></span>
<span class="comment">/*      protected def findExceptionBlock(list: List[Block], exh: ExceptionHandler): Option[ExceptionBlock] = {
        var res: Option[ExceptionBlock] = None
        var i: Int = 0
        while (i &lt; list.length &amp;&amp; res == None) {
          val b = list(i)
          val exB = b.getExceptionBlock(exh)
          exB match {
            case some: Some[ExceptionBlock] =&gt; res = some
            case None =&gt; ()
          }
          i = i + 1
        }
        res
      } */</span>
    }
    <span class="keyword">case</span> <span class="keyword">class</span> <span class="typed"><span class="type">class CodeBlock extends BytecodeGenerator.this.Block with ScalaObject with Product</span><span id="2751"><span id="166011"><span id="29737"><span id="166002"><span id="3500"><span id="29815"><span id="166016"><span id="166013"><span id="166008"><span id="2750"><span id="166015"><span id="29856"><span id="161691"><span id="308"><span id="166006"><span id="3501"><span id="166014"><span id="166007"><span id="166003"><span id="5794"><span id="166004"><span id="161692"><a id="3509">CodeBlock</a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>(<span class="typed"><span class="type">BytecodeGenerator.this.BlockList0</span><span id="165958"><span id="165957"><span id="165982"><a id="169376">parent</a></span></span></span></span>: <span class="typed"><span class="type">BytecodeGenerator.this.BlockList0</span><a href="#161694">BlockList0</a></span>) <span class="keyword">extends</span> <span class="typed"><span class="type">BytecodeGenerator.this.Block</span><a href="#161690">Block</a></span> {
      <span class="keyword">var</span> <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><span id="165962"><span id="165960"><span id="165961"><a id="165971">basicBlocks</a></span></span></span></span>: <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a id="526">List</a></span>[BasicBlock] = <span class="typed"><span class="type">object Nil</span><a id="335">Nil</a></span>
      <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Boolean</span><a id="165963">isEmpty</a></span> = <span class="typed"><span class="type">=&gt; List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#165960">basicBlocks</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a id="21645">isEmpty</a></span>
      <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.BasicBlock</span><a id="165964">firstBasicBlock</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="../icode/BasicBlocks.scala.html#32337">BasicBlock</a></span> = {
        <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><span class="keyword">if</span></span>(<span class="typed"><span class="type">=&gt; Boolean</span><a href="#165963">isEmpty</a></span>) <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>
        <span class="keyword">else</span> {
          <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a href="#165944">closed</a></span>) <span class="typed"><span class="type">=&gt; List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#165960">basicBlocks</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.BasicBlock</span><a id="21332">head</a></span>
          <span class="keyword">else</span> <span class="typed"><span class="type">=&gt; List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#165960">basicBlocks</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.BasicBlock</span><a id="21350">last</a></span>
        }
      }
      <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.BasicBlock</span><a id="165965">lastBasicBlock</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="../icode/BasicBlocks.scala.html#32337">BasicBlock</a></span> = {
        <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><span class="keyword">if</span></span>(<span class="typed"><span class="type">=&gt; Boolean</span><a href="#165963">isEmpty</a></span>) <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>
        <span class="keyword">else</span> {
          <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a href="#165944">closed</a></span>) <span class="typed"><span class="type">=&gt; List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#165960">basicBlocks</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.BasicBlock</span><a id="21350">last</a></span>
          <span class="keyword">else</span> <span class="typed"><span class="type">=&gt; List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#165960">basicBlocks</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.BasicBlock</span><a id="21332">head</a></span>
        }
      }
      <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Some[BytecodeGenerator.this.BlockList0]</span><a id="165966">parentBlockList</a></span> = <span class="typed"><span class="type">(BytecodeGenerator.this.BlockList0)Some[BytecodeGenerator.this.BlockList0]</span><span id="29737"><a id="308">Some</a></span></span>(<span class="typed"><span class="type">=&gt; BytecodeGenerator.this.BlockList0</span><a href="#165957">parent</a></span>)
<span class="comment">//      override def getExceptionBlock(exh: ExceptionHandler): Option[ExceptionBlock] = None</span>
      <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">()Unit</span><a id="165967">close</a></span>() {
        <span class="typed"><span class="type">(List[GenMSIL.this.global.icodes.BasicBlock])Unit</span><a href="#165961">basicBlocks</a></span> = <span class="typed"><span class="type">=&gt; List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#165960">basicBlocks</a></span>.<span class="typed"><span class="type">=&gt; List[GenMSIL.this.global.icodes.BasicBlock]</span><a id="21385">reverse</a></span>
        <span class="typed"><span class="type">(Boolean)Unit</span><a href="#165945">closed</a></span> = <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>
      }
      <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">()java.lang.String</span><a id="165968">toString</a></span>() = {
        <span class="keyword">var</span> <span class="typed"><span class="type">java.lang.String</span><a id="165995">res</a></span> = <span class="typed"><span class="type">java.lang.String(&quot;&quot;)</span><span class="string">&quot;&quot;</span></span>
        <span class="typed"><span class="type">java.lang.String</span><a href="#165995">res</a></span> = <span class="typed"><span class="type">java.lang.String</span><a href="#165995">res</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">object BytecodeGenerator.this.TopBlock</span><a href="#161704">TopBlock</a></span>.<span class="typed"><span class="type">=&gt; java.lang.String</span><a href="#165997">indent</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;CodeBlock(&quot;)</span><span class="string">&quot;CodeBlock(&quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">=&gt; List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#165960">basicBlocks</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;)\012&quot;)</span><span class="string">&quot;)\n&quot;</span></span>
        <span class="typed"><span class="type">java.lang.String</span><a href="#165995">res</a></span>
      }
    }
    <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="typed"><span class="type">class BlockList0 extends BytecodeGenerator.this.Block with ScalaObject</span><a id="161694">BlockList0</a></span> <span class="keyword">extends</span> <span class="typed"><span class="type">BytecodeGenerator.this.Block</span><a href="#161690">Block</a></span> {
      <span class="keyword">var</span> <span class="typed"><span class="type">List[BytecodeGenerator.this.Block]</span><span id="165975"><span id="165973"><span id="165974"><a id="166019">blocks</a></span></span></span></span>: <span class="typed"><span class="type">List[BytecodeGenerator.this.Block]</span><a id="526">List</a></span>[Block] = <span class="typed"><span class="type">object Nil</span><a id="335">Nil</a></span>
      <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.BasicBlock</span><a id="165976">firstBasicBlock</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="../icode/BasicBlocks.scala.html#32337">BasicBlock</a></span> = {
        <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><span class="keyword">if</span></span>(<span class="typed"><span class="type">=&gt; List[BytecodeGenerator.this.Block]</span><a href="#165973">blocks</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a id="21645">isEmpty</a></span>) <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>
        <span class="keyword">else</span> {
          <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a href="#165944">closed</a></span>) <span class="typed"><span class="type">=&gt; List[BytecodeGenerator.this.Block]</span><a href="#165973">blocks</a></span>.<span class="typed"><span class="type">=&gt; BytecodeGenerator.this.Block</span><a id="21332">head</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.BasicBlock</span><a href="#165948">firstBasicBlock</a></span>
          <span class="keyword">else</span> <span class="typed"><span class="type">=&gt; List[BytecodeGenerator.this.Block]</span><a href="#165973">blocks</a></span>.<span class="typed"><span class="type">=&gt; BytecodeGenerator.this.Block</span><a id="21350">last</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.BasicBlock</span><a href="#165948">firstBasicBlock</a></span>
        }
      }
      <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.BasicBlock</span><a id="165977">lastBasicBlock</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="../icode/BasicBlocks.scala.html#32337">BasicBlock</a></span> = {
        <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><span class="keyword">if</span></span>(<span class="typed"><span class="type">=&gt; List[BytecodeGenerator.this.Block]</span><a href="#165973">blocks</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a id="21645">isEmpty</a></span>) <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>
        <span class="keyword">else</span> {
          <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a href="#165944">closed</a></span>) <span class="typed"><span class="type">=&gt; List[BytecodeGenerator.this.Block]</span><a href="#165973">blocks</a></span>.<span class="typed"><span class="type">=&gt; BytecodeGenerator.this.Block</span><a id="21350">last</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.BasicBlock</span><a href="#165949">lastBasicBlock</a></span>
          <span class="keyword">else</span> <span class="typed"><span class="type">=&gt; List[BytecodeGenerator.this.Block]</span><a href="#165973">blocks</a></span>.<span class="typed"><span class="type">=&gt; BytecodeGenerator.this.Block</span><a id="21332">head</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.BasicBlock</span><a href="#165949">lastBasicBlock</a></span>
        }
      }
<span class="comment">/*      override def getExceptionBlock(exh: ExceptionHandler): Option[ExceptionBlock] = {
        findExceptionBlock(blocks, exh)
      } */</span>
      <span class="keyword">def</span> <span class="typed"><span class="type">(GenMSIL.this.global.icodes.ExceptionHandler)BytecodeGenerator.this.ExceptionBlock</span><a id="165978">addExceptionBlock</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a id="166026">exh</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="../icode/ExceptionHandlers.scala.html#32394">ExceptionHandler</a></span>) = {
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="../../Global.scala.html#21157">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting</span><a href="../../Settings.scala.html#30066">debug</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting#T</span><a href="../../Settings.scala.html#30301">value</a></span>)
          <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;new exc block with &quot;)</span><span class="string">&quot;new exc block with &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166026">exh</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot; to &quot;)</span><span class="string">&quot; to &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">BytecodeGenerator.this.BlockList0</span><a href="#161694" class="keyword">this</a></span>)
        <span class="keyword">val</span> <span class="typed"><span class="type">BytecodeGenerator.this.ExceptionBlock</span><a id="166028">e</a></span> = <span class="typed"><span class="type">BytecodeGenerator.this.ExceptionBlock</span><span class="keyword">new</span></span> <span class="typed"><span class="type">BytecodeGenerator.this.ExceptionBlock</span><a href="#161698">ExceptionBlock</a></span>(<span class="typed"><span class="type">BytecodeGenerator.this.BlockList0</span><a href="#161694" class="keyword">this</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166026">exh</a></span>)
        <span class="typed"><span class="type">(List[BytecodeGenerator.this.Block])Unit</span><a href="#165974">blocks</a></span> = <span class="typed"><span class="type">BytecodeGenerator.this.ExceptionBlock</span><a href="#166028">e</a></span> <span class="typed"><span class="type">(BytecodeGenerator.this.Block)List[BytecodeGenerator.this.Block]</span><a href="#166055" id="21335">::</a></span> <span class="typed"><span class="type">=&gt; List[BytecodeGenerator.this.Block]</span><a href="#165973">blocks</a></span>
        <span class="typed"><span class="type">BytecodeGenerator.this.ExceptionBlock</span><a href="#166028">e</a></span>
      }
      <span class="keyword">def</span> <span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock)Unit</span><a id="165979">addBasicBlock</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a id="166058">bb</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="../icode/BasicBlocks.scala.html#32337">BasicBlock</a></span>) = {
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="../../Global.scala.html#21157">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting</span><a href="../../Settings.scala.html#30066">debug</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting#T</span><a href="../../Settings.scala.html#30301">value</a></span>)
          <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;adding bb &quot;)</span><span class="string">&quot;adding bb &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166058">bb</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot; to &quot;)</span><span class="string">&quot; to &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">BytecodeGenerator.this.BlockList0</span><a href="#161694" class="keyword">this</a></span>)
        <span class="keyword">var</span> <span class="typed"><span class="type">BytecodeGenerator.this.CodeBlock</span><a id="166060">cb</a></span>: <span class="typed"><span class="type">BytecodeGenerator.this.CodeBlock</span><a href="#161691">CodeBlock</a></span> = <span class="typed"><span class="type">BytecodeGenerator.this.CodeBlock</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">=&gt; List[BytecodeGenerator.this.Block]</span><a href="#165973">blocks</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a id="21645">isEmpty</a></span>) {
          <span class="typed"><span class="type">=&gt; List[BytecodeGenerator.this.Block]</span><a href="#165973">blocks</a></span>.<span class="typed"><span class="type">=&gt; BytecodeGenerator.this.Block</span><a id="21332">head</a></span> <span class="typed"><span class="type">BytecodeGenerator.this.CodeBlock</span><span class="keyword">match</span></span> {
            <span class="typed"><span class="type">BytecodeGenerator.this.CodeBlock</span><span class="keyword">case</span></span> <span class="typed"><span class="type">BytecodeGenerator.this.CodeBlock</span><a id="166064">blk</a></span>: <span class="typed"><span class="type">BytecodeGenerator.this.CodeBlock</span><a href="#161691">CodeBlock</a></span> =&gt; <span class="typed"><span class="type">BytecodeGenerator.this.CodeBlock</span><a href="#166064">blk</a></span>
            <span class="typed"><span class="type">Null(null)</span><span class="keyword">case</span></span> _ =&gt; <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>
          }
        } <span class="keyword">else</span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">BytecodeGenerator.this.CodeBlock</span><a href="#166060">cb</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>) {
          <span class="typed"><span class="type">BytecodeGenerator.this.CodeBlock</span><a href="#166060">cb</a></span> = <span class="typed"><span class="type">BytecodeGenerator.this.CodeBlock</span><span class="keyword">new</span></span> <span class="typed"><span class="type">BytecodeGenerator.this.CodeBlock</span><a href="#161691">CodeBlock</a></span>(<span class="typed"><span class="type">BytecodeGenerator.this.BlockList0</span><a href="#161694" class="keyword">this</a></span>)
          <span class="typed"><span class="type">(List[BytecodeGenerator.this.Block])Unit</span><a href="#165974">blocks</a></span> = <span class="typed"><span class="type">BytecodeGenerator.this.CodeBlock</span><a href="#166060">cb</a></span> <span class="typed"><span class="type">(BytecodeGenerator.this.Block)List[BytecodeGenerator.this.Block]</span><a href="#166067" id="21335">::</a></span> <span class="typed"><span class="type">=&gt; List[BytecodeGenerator.this.Block]</span><a href="#165973">blocks</a></span>
        }
        <span class="typed"><span class="type">BytecodeGenerator.this.CodeBlock</span><a href="#166060">cb</a></span>.<span class="typed"><span class="type">(List[GenMSIL.this.global.icodes.BasicBlock])Unit</span><a href="#165961">basicBlocks</a></span> = <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166058">bb</a></span> <span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock)List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166070" id="21335">::</a></span> <span class="typed"><span class="type">BytecodeGenerator.this.CodeBlock</span><a href="#166060">cb</a></span>.<span class="typed"><span class="type">=&gt; List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#165960">basicBlocks</a></span>
      }
      <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">()Unit</span><a id="165980">close</a></span>() {
        <span class="typed"><span class="type">=&gt; List[BytecodeGenerator.this.Block]</span><a href="#165973">blocks</a></span>.<span class="typed"><span class="type">((BytecodeGenerator.this.Block) =&gt; Unit)Unit</span><a id="21366">foreach</a></span>(<span class="typed"><span class="type">BytecodeGenerator.this.Block</span><a href="#166075">_</a></span>.<span class="typed"><span class="type">()Unit</span><a href="#165950">close</a></span>)
        <span class="typed"><span class="type">(List[BytecodeGenerator.this.Block])Unit</span><a href="#165974">blocks</a></span> = <span class="typed"><span class="type">=&gt; List[BytecodeGenerator.this.Block]</span><a href="#165973">blocks</a></span>.<span class="typed"><span class="type">=&gt; List[BytecodeGenerator.this.Block]</span><a id="21385">reverse</a></span>
        <span class="typed"><span class="type">(Boolean)Unit</span><a href="#165945">closed</a></span> = <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>
      }
      <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">()java.lang.String</span><a id="165981">toString</a></span>() = {
        <span class="keyword">var</span> <span class="typed"><span class="type">java.lang.String</span><a id="166078">res</a></span> = <span class="typed"><span class="type">java.lang.String(&quot;&quot;)</span><span class="string">&quot;&quot;</span></span>
        <span class="typed"><span class="type">java.lang.String</span><a href="#166078">res</a></span> = <span class="typed"><span class="type">java.lang.String</span><a href="#166078">res</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">object BytecodeGenerator.this.TopBlock</span><a href="#161704">TopBlock</a></span>.<span class="typed"><span class="type">=&gt; java.lang.String</span><a href="#165997">indent</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;BlockList0:\012&quot;)</span><span class="string">&quot;BlockList0:\n&quot;</span></span>
        <span class="typed"><span class="type">object BytecodeGenerator.this.TopBlock</span><a href="#161704">TopBlock</a></span>.<span class="typed"><span class="type">(java.lang.String)Unit</span><a href="#165998">indent</a></span> = <span class="typed"><span class="type">object BytecodeGenerator.this.TopBlock</span><a href="#161704">TopBlock</a></span>.<span class="typed"><span class="type">=&gt; java.lang.String</span><a href="#165997">indent</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;  &quot;)</span><span class="string">&quot;  &quot;</span></span>
        <span class="keyword">for</span> (<span class="typed"><span class="type">((BytecodeGenerator.this.Block) =&gt; Unit)Unit</span><span id="21366"><a id="166081">b</a></span></span> &lt;- <span class="typed"><span class="type">=&gt; List[BytecodeGenerator.this.Block]</span><a href="#165973">blocks</a></span>)
          <span class="typed"><span class="type">java.lang.String</span><a href="#166078">res</a></span> = <span class="typed"><span class="type">java.lang.String</span><a href="#166078">res</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">BytecodeGenerator.this.Block</span><a href="#166081">b</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;\012&quot;)</span><span class="string">&quot;\n&quot;</span></span>
        <span class="typed"><span class="type">object BytecodeGenerator.this.TopBlock</span><a href="#161704">TopBlock</a></span>.<span class="typed"><span class="type">(java.lang.String)Unit</span><a href="#165998">indent</a></span> = <span class="typed"><span class="type">object BytecodeGenerator.this.TopBlock</span><a href="#161704">TopBlock</a></span>.<span class="typed"><span class="type">=&gt; java.lang.String</span><a href="#165997">indent</a></span>.<span class="typed"><span class="type">(Int,Int)java.lang.String</span><a id="5855">substring</a></span>(<span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>,<span class="typed"><span class="type">object BytecodeGenerator.this.TopBlock</span><a href="#161704">TopBlock</a></span>.<span class="typed"><span class="type">=&gt; java.lang.String</span><a href="#165997">indent</a></span>.<span class="typed"><span class="type">()Int</span><a id="5821">length</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3148">-</a></span><span class="typed"><span class="type">Int(2)</span><span class="int">2</span></span>)
        <span class="typed"><span class="type">java.lang.String</span><a href="#166078">res</a></span>
      }
    }
    <span class="keyword">case</span> <span class="keyword">class</span> <span class="typed"><span class="type">class BlockList extends BytecodeGenerator.this.BlockList0 with ScalaObject with Product</span><span id="161695"><span id="166132"><span id="2751"><span id="29737"><span id="166138"><span id="3500"><span id="166141"><span id="29815"><span id="166145"><span id="166136"><span id="2750"><span id="166144"><span id="166146"><span id="29856"><span id="161696"><span id="166133"><span id="166143"><span id="308"><span id="166134"><span id="3501"><span id="166137"><span id="5794"><a id="3509">BlockList</a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>(<span class="typed"><span class="type">BytecodeGenerator.this.Block</span><span id="166106"><span id="166105"><span id="166112"><a id="169374">parent</a></span></span></span></span>: <span class="typed"><span class="type">BytecodeGenerator.this.Block</span><a href="#161690">Block</a></span>) <span class="keyword">extends</span> <span class="typed"><span class="type">BytecodeGenerator.this.BlockList0</span><a href="#161694">BlockList0</a></span> {
      <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Option[BytecodeGenerator.this.BlockList0]</span><a id="166108">parentBlockList</a></span>: <span class="typed"><span class="type">Option[BytecodeGenerator.this.BlockList0]</span><a id="934">Option</a></span>[BlockList0] = {
        <span class="typed"><span class="type">Option[BytecodeGenerator.this.BlockList0]</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; BytecodeGenerator.this.Block</span><a href="#166105">parent</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">object BytecodeGenerator.this.TopBlock</span><a href="#161704">TopBlock</a></span>)
          <span class="typed"><span class="type">(object BytecodeGenerator.this.TopBlock)Some[object BytecodeGenerator.this.TopBlock]</span><span id="29737"><a id="308">Some</a></span></span>(<span class="typed"><span class="type">object BytecodeGenerator.this.TopBlock</span><a href="#161704">TopBlock</a></span>)
        <span class="keyword">else</span> <span class="typed"><span class="type">=&gt; BytecodeGenerator.this.Block</span><a href="#166105">parent</a></span> <span class="typed"><span class="type">Option[BytecodeGenerator.this.BlockList0]</span><span class="keyword">match</span></span> {
          <span class="typed"><span class="type">Some[BytecodeGenerator.this.BlockList]</span><span class="keyword">case</span></span> <span class="typed"><span class="type">BytecodeGenerator.this.BlockList</span><a id="166116">bl</a></span>: <span class="typed"><span class="type">BytecodeGenerator.this.BlockList</span><a href="#161695">BlockList</a></span> =&gt; <span class="typed"><span class="type">(BytecodeGenerator.this.BlockList)Some[BytecodeGenerator.this.BlockList]</span><span id="29737"><a id="308">Some</a></span></span>(<span class="typed"><span class="type">BytecodeGenerator.this.BlockList</span><a href="#166116">bl</a></span>)
          <span class="typed"><span class="type">Some[BytecodeGenerator.this.CatchBlock]</span><span class="keyword">case</span></span> <span class="typed"><span class="type">BytecodeGenerator.this.CatchBlock</span><a id="166118">cb</a></span>: <span class="typed"><span class="type">BytecodeGenerator.this.CatchBlock</span><a href="#161701">CatchBlock</a></span> =&gt; <span class="typed"><span class="type">(BytecodeGenerator.this.CatchBlock)Some[BytecodeGenerator.this.CatchBlock]</span><span id="29737"><a id="308">Some</a></span></span>(<span class="typed"><span class="type">BytecodeGenerator.this.CatchBlock</span><a href="#166118">cb</a></span>)
          <span class="typed"><span class="type">Option[BytecodeGenerator.this.BlockList0]</span><span class="keyword">case</span></span> _ =&gt; <span class="typed"><span class="type">=&gt; BytecodeGenerator.this.Block</span><a href="#166105">parent</a></span>.<span class="typed"><span class="type">=&gt; Option[BytecodeGenerator.this.BlockList0]</span><a href="#165947">parentBlockList</a></span>
        }
      }
      <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">()java.lang.String</span><a id="166109">toString</a></span>() = {
        <span class="keyword">var</span> <span class="typed"><span class="type">java.lang.String</span><a id="166130">res</a></span> = <span class="typed"><span class="type">java.lang.String(&quot;&quot;)</span><span class="string">&quot;&quot;</span></span>
        <span class="typed"><span class="type">java.lang.String</span><a href="#166130">res</a></span> = <span class="typed"><span class="type">java.lang.String</span><a href="#166130">res</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">object BytecodeGenerator.this.TopBlock</span><a href="#161704">TopBlock</a></span>.<span class="typed"><span class="type">=&gt; java.lang.String</span><a href="#165997">indent</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;BlockList:\012&quot;)</span><span class="string">&quot;BlockList:\n&quot;</span></span>
        <span class="typed"><span class="type">java.lang.String</span><a href="#166130">res</a></span> = <span class="typed"><span class="type">java.lang.String</span><a href="#166130">res</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="keyword">super</span>.<span class="typed"><span class="type">()java.lang.String</span><a href="#165981">toString</a></span>()
        <span class="typed"><span class="type">java.lang.String</span><a href="#166130">res</a></span>
      }
    }
    <span class="keyword">case</span> <span class="keyword">class</span> <span class="typed"><span class="type">class ExceptionBlock extends BytecodeGenerator.this.Block with ScalaObject with Product</span><span id="166264"><span id="2751"><span id="166277"><span id="166274"><span id="166259"><span id="29737"><span id="166265"><span id="3500"><span id="29815"><span id="23625"><span id="2750"><span id="29856"><span id="1379"><span id="161699"><span id="308"><span id="166260"><span id="166261"><span id="166271"><span id="3501"><span id="166263"><span id="166276"><span id="161698"><span id="5794"><span id="166270"><span id="166275"><a id="3509">ExceptionBlock</a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>(<span class="typed"><span class="type">BytecodeGenerator.this.Block</span><span id="166034"><span id="166033"><span id="166053"><a id="169371">parent</a></span></span></span></span>: <span class="typed"><span class="type">BytecodeGenerator.this.Block</span><a href="#161690">Block</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><span id="166036"><span id="166035"><span id="166054"><a id="169372">handler</a></span></span></span></span>: <span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="../icode/ExceptionHandlers.scala.html#32394">ExceptionHandler</a></span>) <span class="keyword">extends</span> <span class="typed"><span class="type">BytecodeGenerator.this.Block</span><a href="#161690">Block</a></span> {
      <span class="keyword">var</span> <span class="typed"><span class="type">BytecodeGenerator.this.BlockList</span><span id="166040"><span id="166038"><span id="166039"><a id="166151">tryBlock</a></span></span></span></span>: <span class="typed"><span class="type">BytecodeGenerator.this.BlockList</span><a href="#161695">BlockList</a></span> = <span class="typed"><span class="type">BytecodeGenerator.this.BlockList</span><span class="keyword">new</span></span> <span class="typed"><span class="type">BytecodeGenerator.this.BlockList</span><a href="#161695">BlockList</a></span>(<span class="typed"><span class="type">BytecodeGenerator.this.ExceptionBlock</span><a href="#161698" class="keyword">this</a></span>)
      <span class="keyword">var</span> <span class="typed"><span class="type">List[BytecodeGenerator.this.CatchBlock]</span><span id="166043"><span id="166041"><span id="166042"><a id="166152">catchBlocks</a></span></span></span></span>: <span class="typed"><span class="type">List[BytecodeGenerator.this.CatchBlock]</span><a id="526">List</a></span>[CatchBlock] = <span class="typed"><span class="type">object Nil</span><a id="335">Nil</a></span>
      <span class="keyword">var</span> <span class="typed"><span class="type">BytecodeGenerator.this.BlockList</span><span id="166046"><span id="166044"><span id="166045"><a id="166153">finallyBlock</a></span></span></span></span>: <span class="typed"><span class="type">BytecodeGenerator.this.BlockList</span><a href="#161695">BlockList</a></span> = <span class="typed"><span class="type">BytecodeGenerator.this.BlockList</span><span class="keyword">new</span></span> <span class="typed"><span class="type">BytecodeGenerator.this.BlockList</span><a href="#161695">BlockList</a></span>(<span class="typed"><span class="type">BytecodeGenerator.this.ExceptionBlock</span><a href="#161698" class="keyword">this</a></span>)
      <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.BasicBlock</span><a id="166047">firstBasicBlock</a></span> = {
        <span class="typed"><span class="type">=&gt; BytecodeGenerator.this.BlockList</span><a href="#166038">tryBlock</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.BasicBlock</span><a href="#165976">firstBasicBlock</a></span>
      }
      <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.BasicBlock</span><a id="166048">lastBasicBlock</a></span> = {
        <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">=&gt; BytecodeGenerator.this.BlockList</span><a href="#166044">finallyBlock</a></span>.<span class="typed"><span class="type">=&gt; List[BytecodeGenerator.this.Block]</span><a href="#165973">blocks</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a id="21645">isEmpty</a></span>)
          <span class="typed"><span class="type">=&gt; BytecodeGenerator.this.BlockList</span><a href="#166044">finallyBlock</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.BasicBlock</span><a href="#165977">lastBasicBlock</a></span>
        <span class="keyword">else</span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><span class="keyword">if</span></span>(<span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">=&gt; List[BytecodeGenerator.this.CatchBlock]</span><a href="#166041">catchBlocks</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a id="21645">isEmpty</a></span>) {
          <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a href="#165944">closed</a></span>) <span class="typed"><span class="type">=&gt; List[BytecodeGenerator.this.CatchBlock]</span><a href="#166041">catchBlocks</a></span>.<span class="typed"><span class="type">=&gt; BytecodeGenerator.this.CatchBlock</span><a id="21350">last</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.BasicBlock</span><a href="#165977">lastBasicBlock</a></span>
          <span class="keyword">else</span> <span class="typed"><span class="type">=&gt; List[BytecodeGenerator.this.CatchBlock]</span><a href="#166041">catchBlocks</a></span>.<span class="typed"><span class="type">=&gt; BytecodeGenerator.this.CatchBlock</span><a id="21332">head</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.BasicBlock</span><a href="#165977">lastBasicBlock</a></span>
        } <span class="keyword">else</span> {
          <span class="typed"><span class="type">=&gt; BytecodeGenerator.this.BlockList</span><a href="#166038">tryBlock</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.BasicBlock</span><a href="#165977">lastBasicBlock</a></span>
        }
      }
      <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Option[BytecodeGenerator.this.BlockList0]</span><a id="166049">parentBlockList</a></span>: <span class="typed"><span class="type">Option[BytecodeGenerator.this.BlockList0]</span><a id="934">Option</a></span>[BlockList0] = {
        <span class="typed"><span class="type">Option[BytecodeGenerator.this.BlockList0]</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; BytecodeGenerator.this.Block</span><a href="#166033">parent</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">object BytecodeGenerator.this.TopBlock</span><a href="#161704">TopBlock</a></span>)
          <span class="typed"><span class="type">(object BytecodeGenerator.this.TopBlock)Some[object BytecodeGenerator.this.TopBlock]</span><span id="29737"><a id="308">Some</a></span></span>(<span class="typed"><span class="type">object BytecodeGenerator.this.TopBlock</span><a href="#161704">TopBlock</a></span>)
        <span class="keyword">else</span> <span class="typed"><span class="type">=&gt; BytecodeGenerator.this.Block</span><a href="#166033">parent</a></span> <span class="typed"><span class="type">Option[BytecodeGenerator.this.BlockList0]</span><span class="keyword">match</span></span> {
          <span class="typed"><span class="type">Some[BytecodeGenerator.this.BlockList]</span><span class="keyword">case</span></span> <span class="typed"><span class="type">BytecodeGenerator.this.BlockList</span><a id="166169">bl</a></span>: <span class="typed"><span class="type">BytecodeGenerator.this.BlockList</span><a href="#161695">BlockList</a></span> =&gt; <span class="typed"><span class="type">(BytecodeGenerator.this.BlockList)Some[BytecodeGenerator.this.BlockList]</span><span id="29737"><a id="308">Some</a></span></span>(<span class="typed"><span class="type">BytecodeGenerator.this.BlockList</span><a href="#166169">bl</a></span>)
          <span class="typed"><span class="type">Some[BytecodeGenerator.this.CatchBlock]</span><span class="keyword">case</span></span> <span class="typed"><span class="type">BytecodeGenerator.this.CatchBlock</span><a id="166171">cb</a></span>: <span class="typed"><span class="type">BytecodeGenerator.this.CatchBlock</span><a href="#161701">CatchBlock</a></span> =&gt; <span class="typed"><span class="type">(BytecodeGenerator.this.CatchBlock)Some[BytecodeGenerator.this.CatchBlock]</span><span id="29737"><a id="308">Some</a></span></span>(<span class="typed"><span class="type">BytecodeGenerator.this.CatchBlock</span><a href="#166171">cb</a></span>)
          <span class="typed"><span class="type">Option[BytecodeGenerator.this.BlockList0]</span><span class="keyword">case</span></span> _ =&gt; <span class="typed"><span class="type">=&gt; BytecodeGenerator.this.Block</span><a href="#166033">parent</a></span>.<span class="typed"><span class="type">=&gt; Option[BytecodeGenerator.this.BlockList0]</span><a href="#165947">parentBlockList</a></span>
        }
      }
<span class="comment">/*      override def getExceptionBlock(exh: ExceptionHandler): Option[ExceptionBlock] = {
        if (exh == handler) Some(this)
        else {
          val t = if (tryBlock == null) Nil else List(tryBlock)
          val f = if (finallyBlock == null) Nil else List(finallyBlock)
          findExceptionBlock(t ::: catchBlocks ::: f, exh)
        }
      }
*/</span>
      <span class="keyword">def</span> <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)BytecodeGenerator.this.CatchBlock</span><a id="166050">addCatchBlock</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a id="166173">exSym</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="../../symtab/Symbols.scala.html#21866">Symbol</a></span>): <span class="typed"><span class="type">BytecodeGenerator.this.CatchBlock</span><a href="#161701">CatchBlock</a></span> = {
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="../../Global.scala.html#21157">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting</span><a href="../../Settings.scala.html#30066">debug</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting#T</span><a href="../../Settings.scala.html#30301">value</a></span>)
          <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;new catch block with &quot;)</span><span class="string">&quot;new catch block with &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#166173">exSym</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot; to &quot;)</span><span class="string">&quot; to &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">BytecodeGenerator.this.ExceptionBlock</span><a href="#161698" class="keyword">this</a></span>)
        <span class="keyword">val</span> <span class="typed"><span class="type">BytecodeGenerator.this.CatchBlock</span><a id="166174">c</a></span> = <span class="typed"><span class="type">BytecodeGenerator.this.CatchBlock</span><span class="keyword">new</span></span> <span class="typed"><span class="type">BytecodeGenerator.this.CatchBlock</span><a href="#161701">CatchBlock</a></span>(<span class="typed"><span class="type">BytecodeGenerator.this.ExceptionBlock</span><a href="#161698" class="keyword">this</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#166173">exSym</a></span>)
        <span class="typed"><span class="type">(List[BytecodeGenerator.this.CatchBlock])Unit</span><a href="#166042">catchBlocks</a></span> = <span class="typed"><span class="type">BytecodeGenerator.this.CatchBlock</span><a href="#166174">c</a></span> <span class="typed"><span class="type">(BytecodeGenerator.this.CatchBlock)List[BytecodeGenerator.this.CatchBlock]</span><a href="#166179" id="21335">::</a></span> <span class="typed"><span class="type">=&gt; List[BytecodeGenerator.this.CatchBlock]</span><a href="#166041">catchBlocks</a></span>
        <span class="typed"><span class="type">BytecodeGenerator.this.CatchBlock</span><a href="#166174">c</a></span>
      }
      <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">()Unit</span><a id="166051">close</a></span>() {
        <span class="typed"><span class="type">=&gt; BytecodeGenerator.this.BlockList</span><a href="#166038">tryBlock</a></span>.<span class="typed"><span class="type">()Unit</span><a href="#165980">close</a></span>
        <span class="typed"><span class="type">=&gt; List[BytecodeGenerator.this.CatchBlock]</span><a href="#166041">catchBlocks</a></span>.<span class="typed"><span class="type">((BytecodeGenerator.this.CatchBlock) =&gt; Unit)Unit</span><a id="21366">foreach</a></span>(<span class="typed"><span class="type">BytecodeGenerator.this.CatchBlock</span><a href="#166185">_</a></span>.<span class="typed"><span class="type">()Unit</span><a href="#165980">close</a></span>)
        <span class="typed"><span class="type">(List[BytecodeGenerator.this.CatchBlock])Unit</span><a href="#166042">catchBlocks</a></span> = <span class="typed"><span class="type">=&gt; List[BytecodeGenerator.this.CatchBlock]</span><a href="#166041">catchBlocks</a></span>.<span class="typed"><span class="type">=&gt; List[BytecodeGenerator.this.CatchBlock]</span><a id="21385">reverse</a></span>
        <span class="typed"><span class="type">=&gt; BytecodeGenerator.this.BlockList</span><a href="#166044">finallyBlock</a></span>.<span class="typed"><span class="type">()Unit</span><a href="#165980">close</a></span>
        <span class="typed"><span class="type">(Boolean)Unit</span><a href="#165945">closed</a></span> = <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>
      }
      <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">()java.lang.String</span><a id="166052">toString</a></span>() = {
        <span class="keyword">var</span> <span class="typed"><span class="type">java.lang.String</span><a id="166189">res</a></span> = <span class="typed"><span class="type">java.lang.String(&quot;&quot;)</span><span class="string">&quot;&quot;</span></span>
        <span class="typed"><span class="type">java.lang.String</span><a href="#166189">res</a></span> = <span class="typed"><span class="type">java.lang.String</span><a href="#166189">res</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">object BytecodeGenerator.this.TopBlock</span><a href="#161704">TopBlock</a></span>.<span class="typed"><span class="type">=&gt; java.lang.String</span><a href="#165997">indent</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;ExceptionBlock, handler: &quot;)</span><span class="string">&quot;ExceptionBlock, handler: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166035">handler</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;\012&quot;)</span><span class="string">&quot;\n&quot;</span></span>
        <span class="typed"><span class="type">java.lang.String</span><a href="#166189">res</a></span> = <span class="typed"><span class="type">java.lang.String</span><a href="#166189">res</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">object BytecodeGenerator.this.TopBlock</span><a href="#161704">TopBlock</a></span>.<span class="typed"><span class="type">=&gt; java.lang.String</span><a href="#165997">indent</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;  &quot;)</span><span class="string">&quot;  &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;try:\012&quot;)</span><span class="string">&quot;try:\n&quot;</span></span>
        <span class="typed"><span class="type">object BytecodeGenerator.this.TopBlock</span><a href="#161704">TopBlock</a></span>.<span class="typed"><span class="type">(java.lang.String)Unit</span><a href="#165998">indent</a></span> = <span class="typed"><span class="type">object BytecodeGenerator.this.TopBlock</span><a href="#161704">TopBlock</a></span>.<span class="typed"><span class="type">=&gt; java.lang.String</span><a href="#165997">indent</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;    &quot;)</span><span class="string">&quot;    &quot;</span></span>
        <span class="typed"><span class="type">java.lang.String</span><a href="#166189">res</a></span> = <span class="typed"><span class="type">java.lang.String</span><a href="#166189">res</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">=&gt; BytecodeGenerator.this.BlockList</span><a href="#166038">tryBlock</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;\012&quot;)</span><span class="string">&quot;\n&quot;</span></span>
        <span class="typed"><span class="type">object BytecodeGenerator.this.TopBlock</span><a href="#161704">TopBlock</a></span>.<span class="typed"><span class="type">(java.lang.String)Unit</span><a href="#165998">indent</a></span> = <span class="typed"><span class="type">object BytecodeGenerator.this.TopBlock</span><a href="#161704">TopBlock</a></span>.<span class="typed"><span class="type">=&gt; java.lang.String</span><a href="#165997">indent</a></span>.<span class="typed"><span class="type">(Int,Int)java.lang.String</span><a id="5855">substring</a></span>(<span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>,<span class="typed"><span class="type">object BytecodeGenerator.this.TopBlock</span><a href="#161704">TopBlock</a></span>.<span class="typed"><span class="type">=&gt; java.lang.String</span><a href="#165997">indent</a></span>.<span class="typed"><span class="type">()Int</span><a id="5821">length</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3148">-</a></span><span class="typed"><span class="type">Int(4)</span><span class="int">4</span></span>)
        <span class="typed"><span class="type">java.lang.String</span><a href="#166189">res</a></span> = <span class="typed"><span class="type">java.lang.String</span><a href="#166189">res</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">object BytecodeGenerator.this.TopBlock</span><a href="#161704">TopBlock</a></span>.<span class="typed"><span class="type">=&gt; java.lang.String</span><a href="#165997">indent</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;  &quot;)</span><span class="string">&quot;  &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;catch:\012&quot;)</span><span class="string">&quot;catch:\n&quot;</span></span>
        <span class="typed"><span class="type">object BytecodeGenerator.this.TopBlock</span><a href="#161704">TopBlock</a></span>.<span class="typed"><span class="type">(java.lang.String)Unit</span><a href="#165998">indent</a></span> = <span class="typed"><span class="type">object BytecodeGenerator.this.TopBlock</span><a href="#161704">TopBlock</a></span>.<span class="typed"><span class="type">=&gt; java.lang.String</span><a href="#165997">indent</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;    &quot;)</span><span class="string">&quot;    &quot;</span></span>
        <span class="keyword">for</span> (<span class="typed"><span class="type">((BytecodeGenerator.this.CatchBlock) =&gt; Unit)Unit</span><span id="21366"><a id="166214">b</a></span></span> &lt;- <span class="typed"><span class="type">=&gt; List[BytecodeGenerator.this.CatchBlock]</span><a href="#166041">catchBlocks</a></span>)
          <span class="typed"><span class="type">java.lang.String</span><a href="#166189">res</a></span> = <span class="typed"><span class="type">java.lang.String</span><a href="#166189">res</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">BytecodeGenerator.this.CatchBlock</span><a href="#166214">b</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;\012&quot;)</span><span class="string">&quot;\n&quot;</span></span>
        <span class="typed"><span class="type">object BytecodeGenerator.this.TopBlock</span><a href="#161704">TopBlock</a></span>.<span class="typed"><span class="type">(java.lang.String)Unit</span><a href="#165998">indent</a></span> = <span class="typed"><span class="type">object BytecodeGenerator.this.TopBlock</span><a href="#161704">TopBlock</a></span>.<span class="typed"><span class="type">=&gt; java.lang.String</span><a href="#165997">indent</a></span>.<span class="typed"><span class="type">(Int,Int)java.lang.String</span><a id="5855">substring</a></span>(<span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>,<span class="typed"><span class="type">object BytecodeGenerator.this.TopBlock</span><a href="#161704">TopBlock</a></span>.<span class="typed"><span class="type">=&gt; java.lang.String</span><a href="#165997">indent</a></span>.<span class="typed"><span class="type">()Int</span><a id="5821">length</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3148">-</a></span><span class="typed"><span class="type">Int(4)</span><span class="int">4</span></span>)
        <span class="typed"><span class="type">java.lang.String</span><a href="#166189">res</a></span> = <span class="typed"><span class="type">java.lang.String</span><a href="#166189">res</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">object BytecodeGenerator.this.TopBlock</span><a href="#161704">TopBlock</a></span>.<span class="typed"><span class="type">=&gt; java.lang.String</span><a href="#165997">indent</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;  &quot;)</span><span class="string">&quot;  &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;finally:\012&quot;)</span><span class="string">&quot;finally:\n&quot;</span></span>
        <span class="typed"><span class="type">object BytecodeGenerator.this.TopBlock</span><a href="#161704">TopBlock</a></span>.<span class="typed"><span class="type">(java.lang.String)Unit</span><a href="#165998">indent</a></span> = <span class="typed"><span class="type">object BytecodeGenerator.this.TopBlock</span><a href="#161704">TopBlock</a></span>.<span class="typed"><span class="type">=&gt; java.lang.String</span><a href="#165997">indent</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;    &quot;)</span><span class="string">&quot;    &quot;</span></span>
        <span class="typed"><span class="type">java.lang.String</span><a href="#166189">res</a></span> = <span class="typed"><span class="type">java.lang.String</span><a href="#166189">res</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">=&gt; BytecodeGenerator.this.BlockList</span><a href="#166044">finallyBlock</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;\012&quot;)</span><span class="string">&quot;\n&quot;</span></span>
        <span class="typed"><span class="type">object BytecodeGenerator.this.TopBlock</span><a href="#161704">TopBlock</a></span>.<span class="typed"><span class="type">(java.lang.String)Unit</span><a href="#165998">indent</a></span> = <span class="typed"><span class="type">object BytecodeGenerator.this.TopBlock</span><a href="#161704">TopBlock</a></span>.<span class="typed"><span class="type">=&gt; java.lang.String</span><a href="#165997">indent</a></span>.<span class="typed"><span class="type">(Int,Int)java.lang.String</span><a id="5855">substring</a></span>(<span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>,<span class="typed"><span class="type">object BytecodeGenerator.this.TopBlock</span><a href="#161704">TopBlock</a></span>.<span class="typed"><span class="type">=&gt; java.lang.String</span><a href="#165997">indent</a></span>.<span class="typed"><span class="type">()Int</span><a id="5821">length</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3148">-</a></span><span class="typed"><span class="type">Int(4)</span><span class="int">4</span></span>)
        <span class="typed"><span class="type">java.lang.String</span><a href="#166189">res</a></span>
      }
    }
    <span class="keyword">case</span> <span class="keyword">class</span> <span class="typed"><span class="type">class CatchBlock extends BytecodeGenerator.this.BlockList0 with ScalaObject with Product</span><span id="2751"><span id="166288"><span id="166303"><span id="29737"><span id="166304"><span id="3500"><span id="166290"><span id="29815"><span id="23625"><span id="166297"><span id="161702"><span id="2750"><span id="29856"><span id="1379"><span id="166302"><span id="308"><span id="166291"><span id="3501"><span id="161701"><span id="166298"><span id="166286"><span id="5794"><span id="166301"><span id="166292"><span id="166287"><a id="3509">CatchBlock</a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>(<span class="typed"><span class="type">BytecodeGenerator.this.ExceptionBlock</span><span id="166122"><span id="166121"><span id="166177"><a id="169368">parent</a></span></span></span></span>: <span class="typed"><span class="type">BytecodeGenerator.this.ExceptionBlock</span><a href="#161698">ExceptionBlock</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><span id="166124"><span id="166123"><span id="166178"><a id="169369">exSym</a></span></span></span></span>: <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="../../symtab/Symbols.scala.html#21866">Symbol</a></span>) <span class="keyword">extends</span> <span class="typed"><span class="type">BytecodeGenerator.this.BlockList0</span><a href="#161694">BlockList0</a></span> {
      <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Option[BytecodeGenerator.this.BlockList0]</span><a id="166126">parentBlockList</a></span>: <span class="typed"><span class="type">Option[BytecodeGenerator.this.BlockList0]</span><a id="934">Option</a></span>[BlockList0] = {
        <span class="typed"><span class="type">=&gt; BytecodeGenerator.this.ExceptionBlock</span><a href="#166121">parent</a></span>.<span class="typed"><span class="type">=&gt; Option[BytecodeGenerator.this.BlockList0]</span><a href="#166049">parentBlockList</a></span>
      }
      <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">()java.lang.String</span><a id="166127">toString</a></span>() = {
        <span class="keyword">var</span> <span class="typed"><span class="type">java.lang.String</span><a id="166284">res</a></span> = <span class="typed"><span class="type">java.lang.String(&quot;&quot;)</span><span class="string">&quot;&quot;</span></span>
        <span class="typed"><span class="type">java.lang.String</span><a href="#166284">res</a></span> = <span class="typed"><span class="type">java.lang.String</span><a href="#166284">res</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">object BytecodeGenerator.this.TopBlock</span><a href="#161704">TopBlock</a></span>.<span class="typed"><span class="type">=&gt; java.lang.String</span><a href="#165997">indent</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;CatchBlock:\012&quot;)</span><span class="string">&quot;CatchBlock:\n&quot;</span></span>
        <span class="typed"><span class="type">java.lang.String</span><a href="#166284">res</a></span> = <span class="typed"><span class="type">java.lang.String</span><a href="#166284">res</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="keyword">super</span>.<span class="typed"><span class="type">()java.lang.String</span><a href="#165981">toString</a></span>()
        <span class="typed"><span class="type">java.lang.String</span><a href="#166284">res</a></span>
      }
    }
    <span class="keyword">case</span> <span class="keyword">object</span> <span class="typed"><span class="type">object BytecodeGenerator.this.TopBlock</span><span id="161704"><span id="166316"><span id="166313"><span id="3500"><span id="166314"><span id="166318"><span id="29856"><a id="166315">TopBlock</a></span></span></span></span></span></span></span></span> <span class="keyword">extends</span> <span class="typed"><span class="type">BytecodeGenerator.this.BlockList0</span><a href="#161694">BlockList0</a></span> {
      <span class="keyword">var</span> <span class="typed"><span class="type">java.lang.String</span><span id="165999"><span id="165997"><span id="165998"><a id="166307">indent</a></span></span></span></span> = <span class="typed"><span class="type">java.lang.String(&quot;&quot;)</span><span class="string">&quot;&quot;</span></span>
      <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; object None</span><a id="166000">parentBlockList</a></span> = <span class="typed"><span class="type">object None</span><a id="536">None</a></span>
      <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">()java.lang.String</span><a id="166001">toString</a></span>() = {
        <span class="keyword">var</span> <span class="typed"><span class="type">java.lang.String</span><a id="166311">res</a></span> = <span class="typed"><span class="type">java.lang.String(&quot;&quot;)</span><span class="string">&quot;&quot;</span></span>
        <span class="typed"><span class="type">java.lang.String</span><a href="#166311">res</a></span> = <span class="typed"><span class="type">java.lang.String</span><a href="#166311">res</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">object BytecodeGenerator.this.TopBlock</span><a href="#161704">TopBlock</a></span>.<span class="typed"><span class="type">=&gt; java.lang.String</span><a href="#165997">indent</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;TopBlock:\012&quot;)</span><span class="string">&quot;TopBlock:\n&quot;</span></span>
        <span class="typed"><span class="type">java.lang.String</span><a href="#166311">res</a></span> = <span class="typed"><span class="type">java.lang.String</span><a href="#166311">res</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="keyword">super</span>.<span class="typed"><span class="type">()java.lang.String</span><a href="#165981">toString</a></span>()
        <span class="typed"><span class="type">java.lang.String</span><a href="#166311">res</a></span>
      }
    }

    <span class="comment">// for every basic block, a list of ExHInstructions to be executed:</span>
    <span class="comment">//   - Begin_ are executed before the block</span>
    <span class="comment">//   - EndExceptionBlock is executed after the block</span>
    <span class="keyword">val</span> <span class="typed"><span class="type">scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.BasicBlock,List[BytecodeGenerator.this.ExHInstruction]]</span><span id="161707"><a id="161706">bb2exHInstructions</a></span></span>: <span class="typed"><span class="type">scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.BasicBlock,List[BytecodeGenerator.this.ExHInstruction]]</span><a id="20081">HashMap</a></span>[BasicBlock, List[ExHInstruction]] = <span class="typed"><span class="type">scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.BasicBlock,List[BytecodeGenerator.this.ExHInstruction]]</span><span class="keyword">new</span></span> <span class="typed"><span class="type">scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.BasicBlock,List[BytecodeGenerator.this.ExHInstruction]]</span><a id="20081">HashMap</a></span>()
    <span class="comment">// at the end of a try, catch or finally block, the jumps must not be emitted,</span>
    <span class="comment">// the automatically generated leave (or endfinally) will do the job.</span>
    <span class="keyword">val</span> <span class="typed"><span class="type">scala.collection.mutable.HashSet[GenMSIL.this.global.icodes.BasicBlock]</span><span id="161709"><a id="161708">omitJumpBlocks</a></span></span>: <span class="typed"><span class="type">scala.collection.mutable.HashSet[GenMSIL.this.global.icodes.BasicBlock]</span><a id="19895">HashSet</a></span>[BasicBlock] = <span class="typed"><span class="type">scala.collection.mutable.HashSet[GenMSIL.this.global.icodes.BasicBlock]</span><span class="keyword">new</span></span> <span class="typed"><span class="type">scala.collection.mutable.HashSet[GenMSIL.this.global.icodes.BasicBlock]</span><a id="19895">HashSet</a></span>()

    <span class="comment">// suposes that finalizers are the same for different handlers</span>
    <span class="comment">// covering the same blocks</span>
    <span class="keyword">def</span> <span class="typed"><span class="type">(List[GenMSIL.this.global.icodes.BasicBlock],List[GenMSIL.this.global.icodes.ExceptionHandler])List[GenMSIL.this.global.icodes.BasicBlock]</span><a id="161710">orderBlocksForExh</a></span>(<span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a id="165827">blocks</a></span>: <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a id="526">List</a></span>[BasicBlock], <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.ExceptionHandler]</span><a id="165828">exH</a></span>: <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.ExceptionHandler]</span><a id="526">List</a></span>[ExceptionHandler]): <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a id="526">List</a></span>[BasicBlock] = {

      <span class="keyword">var</span> <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a id="166322">blocksToPut</a></span>: <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a id="526">List</a></span>[BasicBlock] = <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#165827">blocks</a></span>
      <span class="keyword">var</span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a id="166323">nextBlock</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="../icode/BasicBlocks.scala.html#32337">BasicBlock</a></span> = <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>
      <span class="keyword">var</span> <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.ExceptionHandler]</span><a id="166324">untreatedHandlers</a></span>: <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.ExceptionHandler]</span><a id="526">List</a></span>[ExceptionHandler] = <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.ExceptionHandler]</span><a href="#165828">exH</a></span>
      <span class="typed"><span class="type">object BytecodeGenerator.this.TopBlock</span><a href="#161704">TopBlock</a></span>.<span class="typed"><span class="type">(List[BytecodeGenerator.this.Block])Unit</span><a href="#165974">blocks</a></span> = <span class="typed"><span class="type">object Nil</span><a id="335">Nil</a></span>
      <span class="keyword">var</span> <span class="typed"><span class="type">BytecodeGenerator.this.BlockList0</span><a id="166325">currentBlock</a></span>: <span class="typed"><span class="type">BytecodeGenerator.this.BlockList0</span><a href="#161694">BlockList0</a></span> = <span class="typed"><span class="type">object BytecodeGenerator.this.TopBlock</span><a href="#161704">TopBlock</a></span>
      <span class="keyword">def</span> <span class="typed"><span class="type">(List[GenMSIL.this.global.icodes.BasicBlock])Unit</span><a id="166326">addBlocks</a></span>(<span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a id="166331">b</a></span>: <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a id="526">List</a></span>[BasicBlock]):<span class="typed"><span class="type">Unit</span><a id="2169">Unit</a></span> = <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166331">b</a></span> <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
        <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object Nil</span><a id="335">Nil</a></span> =&gt; <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="../../Global.scala.html#21157">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting</span><a href="../../Settings.scala.html#30066">debug</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting#T</span><a href="../../Settings.scala.html#30301">value</a></span>) <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;adding &quot;)</span><span class="string">&quot;adding &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166331">b</a></span>)

        <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a id="166334">x</a></span> <a id="1">::</a> <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a id="166335">xs</a></span> =&gt;
          <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="../../Global.scala.html#21157">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting</span><a href="../../Settings.scala.html#30066">debug</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting#T</span><a href="../../Settings.scala.html#30301">value</a></span>) <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;adding &quot;)</span><span class="string">&quot;adding &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166331">b</a></span>)
          <span class="comment">// problem: block may already be added, and and needs to be moved.</span>
          <span class="comment">// if nextblock NOT in b: check if nextblock in blocksToPut, if NOT, check if movable, else don't put</span>
          <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166323">nextBlock</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5793">!=</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166331">b</a></span>.<span class="typed"><span class="type">(Any)Boolean</span><a id="21673">contains</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166323">nextBlock</a></span>)) {
            <span class="keyword">val</span> <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a id="166340">blocksToAdd</a></span> = <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166323">nextBlock</a></span> <span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock)List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166341" id="21335">::</a></span> (<span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166331">b</a></span> <span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock)List[GenMSIL.this.global.icodes.BasicBlock]</span><a id="21401">-</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166323">nextBlock</a></span>)
            <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166323">nextBlock</a></span> = <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>
            <span class="typed"><span class="type">(List[GenMSIL.this.global.icodes.BasicBlock])Unit</span><a href="#166326">addBlocks</a></span>(<span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166340">blocksToAdd</a></span>)
          }
          <span class="keyword">else</span> <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">List[GenMSIL.this.global.icodes.ExceptionHandler]</span><a href="#166324">untreatedHandlers</a></span>.<span class="typed"><span class="type">((GenMSIL.this.global.icodes.ExceptionHandler) =&gt; Boolean)Boolean</span><a id="21372">forall</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a id="166348">h</a></span> =&gt; <span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166348">h</a></span>.<span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock)Boolean</span><a href="../icode/ExceptionHandlers.scala.html#51924">covers</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166334">x</a></span>)))) {

            <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="../../Global.scala.html#21157">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting</span><a href="../../Settings.scala.html#30066">debug</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting#T</span><a href="../../Settings.scala.html#30301">value</a></span>) <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot; no new handler for &quot;)</span><span class="string">&quot; no new handler for &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166334">x</a></span>)
            <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">List[GenMSIL.this.global.icodes.ExceptionHandler]</span><a href="#166324">untreatedHandlers</a></span>.<span class="typed"><span class="type">((GenMSIL.this.global.icodes.ExceptionHandler) =&gt; Boolean)Boolean</span><a id="21372">forall</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a id="166353">h</a></span> =&gt; <span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166353">h</a></span>.<span class="typed"><span class="type">=&gt; List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="../icode/ExceptionHandlers.scala.html#51925">blocks</a></span>.<span class="typed"><span class="type">(Any)Boolean</span><a id="21673">contains</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166334">x</a></span>) <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2750">||</a></span>
                                                (<span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166353">h</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.Finalizer</span><a href="../icode/ExceptionHandlers.scala.html#51912">finalizer</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5793">!=</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span>
                                                 <span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166353">h</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.Finalizer</span><a href="../icode/ExceptionHandlers.scala.html#51912">finalizer</a></span>.<span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock)Boolean</span><a href="../icode/ExceptionHandlers.scala.html#51924">covers</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166334">x</a></span>)))))
              {
                <span class="comment">// the block is not part of some catch or finally code</span>
                <span class="typed"><span class="type">BytecodeGenerator.this.BlockList0</span><a href="#166325">currentBlock</a></span>.<span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock)Unit</span><a href="#165979">addBasicBlock</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166334">x</a></span>)
                <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166322">blocksToPut</a></span> = <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166322">blocksToPut</a></span> <span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock)List[GenMSIL.this.global.icodes.BasicBlock]</span><a id="21401">-</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166334">x</a></span>
                <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="../../Global.scala.html#21157">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting</span><a href="../../Settings.scala.html#30066">debug</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting#T</span><a href="../../Settings.scala.html#30301">value</a></span>) <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot; -&gt; addBlocks(&quot;)</span><span class="string">&quot; -&gt; addBlocks(&quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166335">xs</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;)&quot;)</span><span class="string">&quot;)&quot;</span></span>)
                <span class="typed"><span class="type">(List[GenMSIL.this.global.icodes.BasicBlock])Unit</span><a href="#166326">addBlocks</a></span>(<span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166335">xs</a></span>)
              } <span class="keyword">else</span> {
                <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="../../Global.scala.html#21157">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting</span><a href="../../Settings.scala.html#30066">debug</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting#T</span><a href="../../Settings.scala.html#30301">value</a></span>) <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;x is part of catch or finally block&quot;)</span><span class="string">&quot;x is part of catch or finally block&quot;</span></span>)

                <span class="comment">// check if the covered code of the handler x belongs to is empty</span>
                <span class="comment">// this check is not needed for finalizers: empty try with finalizer</span>
                <span class="comment">// is optimized by compiler (no try left)</span>
                <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span>(<span class="typed"><span class="type">List[GenMSIL.this.global.icodes.ExceptionHandler]</span><a href="#166324">untreatedHandlers</a></span>.<span class="typed"><span class="type">((GenMSIL.this.global.icodes.ExceptionHandler) =&gt; Boolean)Boolean</span><a id="21372">forall</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a id="166364">h</a></span> =&gt;
                  (<span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166364">h</a></span>.<span class="typed"><span class="type">=&gt; List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="../icode/ExceptionHandlers.scala.html#51925">blocks</a></span>.<span class="typed"><span class="type">(Any)Boolean</span><a id="21673">contains</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166334">x</a></span>) <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2750">||</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166364">h</a></span>.<span class="typed"><span class="type">=&gt; scala.collection.immutable.Set[GenMSIL.this.global.icodes.BasicBlock]</span><a href="../icode/ExceptionHandlers.scala.html#51920">covered</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a id="25544">isEmpty</a></span>))) {
                    <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166322">blocksToPut</a></span> = <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166322">blocksToPut</a></span> <span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock)List[GenMSIL.this.global.icodes.BasicBlock]</span><a id="21401">-</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166334">x</a></span>
                    <span class="typed"><span class="type">(List[GenMSIL.this.global.icodes.BasicBlock])Unit</span><a href="#166326">addBlocks</a></span>(<span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166335">xs</a></span>)
                  } <span class="keyword">else</span>
                    <span class="typed"><span class="type">(List[GenMSIL.this.global.icodes.BasicBlock])Unit</span><a href="#166326">addBlocks</a></span>(<span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166335">xs</a></span> <span class="typed"><span class="type">(List[GenMSIL.this.global.icodes.BasicBlock])List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166368" id="21339">:::</a></span> <span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock*)List[GenMSIL.this.global.icodes.BasicBlock]</span><span id="21328"><a id="527">List</a></span></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166334">x</a></span>))
              }
          } <span class="keyword">else</span> { <span class="comment">// there are new handlers for this block</span>

            <span class="keyword">var</span> <span class="typed"><span class="type">scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.ExceptionHandler,GenMSIL.this.global.icodes.BasicBlock]</span><a id="166372">firstBlockAfter</a></span>: <span class="typed"><span class="type">scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.ExceptionHandler,GenMSIL.this.global.icodes.BasicBlock]</span><a id="20081">HashMap</a></span>[ExceptionHandler,BasicBlock] = <span class="typed"><span class="type">scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.ExceptionHandler,GenMSIL.this.global.icodes.BasicBlock]</span><span class="keyword">new</span></span> <span class="typed"><span class="type">scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.ExceptionHandler,GenMSIL.this.global.icodes.BasicBlock]</span><a id="20081">HashMap</a></span>()
            <span class="keyword">val</span> <span class="typed"><span class="type">BytecodeGenerator.this.BlockList0</span><a id="166373">savedCurrentBlock</a></span> = <span class="typed"><span class="type">BytecodeGenerator.this.BlockList0</span><a href="#166325">currentBlock</a></span>
            <span class="comment">/**
             * the output blocks of this method are changed so that:
             *  - only one block has a successor outside the set of blocks
             *  - this block is the last of the reusulting list
             *
             * side-effect: it stores the successor in the hashMap
             *  firstBlockAfter, which has to be emitted first after try/catch/finally,
             *  because the target of the Leave-instruction will always be the first
             *  instruction after EndExceptionBlock
             *
             * returns: the output blocks plus an Option containing the possibly created
             * new block
             **/</span>
            <span class="keyword">def</span> <span class="typed"><span class="type">(List[GenMSIL.this.global.icodes.BasicBlock],GenMSIL.this.global.icodes.ExceptionHandler)(List[GenMSIL.this.global.icodes.BasicBlock], Option[GenMSIL.this.global.icodes.BasicBlock])</span><a id="166374">adaptBlocks</a></span>(<span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a id="166380">blocks</a></span>: <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a id="526">List</a></span>[BasicBlock], <span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a id="166381">exh</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="../icode/ExceptionHandlers.scala.html#32394">ExceptionHandler</a></span>): <span class="typed"><span class="type">(List[GenMSIL.this.global.icodes.BasicBlock], Option[GenMSIL.this.global.icodes.BasicBlock])</span><a id="1378">(</a></span>List[BasicBlock], Option[BasicBlock]) = {
              <span class="keyword">def</span> <span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock,List[GenMSIL.this.global.icodes.BasicBlock])List[GenMSIL.this.global.icodes.BasicBlock]</span><a id="166382">outsideTargets</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a id="166386">block</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="../icode/BasicBlocks.scala.html#32337">BasicBlock</a></span>, <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a id="166387">blocks</a></span>: <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a id="526">List</a></span>[BasicBlock]) = {
                <span class="comment">/* The catch block of the ExceptionHandler is always a successor of any block inside the try
                 * (see successors method in BasicBlocks.scala)
                 * Thus, this successor does not correspond to a jump outside the exception handler
                 * and has to be ignored when computing the list of blocks leaving the exception handler.  */</span>
                <span class="keyword">val</span> <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a id="166388">res</a></span> = <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166386">block</a></span>.<span class="typed"><span class="type">=&gt; List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="../icode/BasicBlocks.scala.html#33217">successors</a></span>.<span class="typed"><span class="type">((GenMSIL.this.global.icodes.BasicBlock) =&gt; Boolean)List[GenMSIL.this.global.icodes.BasicBlock]</span><a id="21367">filter</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a id="166391">scc</a></span> =&gt; <span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166387">blocks</a></span>.<span class="typed"><span class="type">(Any)Boolean</span><a id="21673">contains</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166391">scc</a></span>) <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166391">scc</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5793">!=</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166381">exh</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.BasicBlock</span><a href="../icode/ExceptionHandlers.scala.html#51919">startBlock</a></span>)
                <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="../../Global.scala.html#21157">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting</span><a href="../../Settings.scala.html#30066">debug</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting#T</span><a href="../../Settings.scala.html#30301">value</a></span>) <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;outside of &quot;)</span><span class="string">&quot;outside of &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166386">block</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot; = &quot;)</span><span class="string">&quot; = &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166388">res</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot; succ &quot;)</span><span class="string">&quot; succ &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166386">block</a></span>.<span class="typed"><span class="type">=&gt; List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="../icode/BasicBlocks.scala.html#33217">successors</a></span>)
                <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166388">res</a></span>
              }
              <span class="comment">// get leaving blocks and their outside targets</span>
              <span class="keyword">def</span> <span class="typed"><span class="type">(List[GenMSIL.this.global.icodes.BasicBlock])List[(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])]</span><a id="166383">leavingBlocks</a></span>(<span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a id="166395">blocks</a></span>: <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a id="526">List</a></span>[BasicBlock]): <span class="typed"><span class="type">List[(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])]</span><a id="526">List</a></span>[(BasicBlock, List[BasicBlock])] = {
                <span class="keyword">for</span> {<span class="typed"><span class="type">(((GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])) =&gt; (GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock]))List[(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])]</span><span id="21362"><span id="166405"><span id="166413"><span id="23625"><span id="21367"><span id="166398"><a id="1379">b</a></span></span></span></span></span></span></span> &lt;- <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166395">blocks</a></span>
                     <span class="keyword">val</span> <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><span id="166399"><span id="166406"><a id="166414">t</a></span></span></span> = <span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock,List[GenMSIL.this.global.icodes.BasicBlock])List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166382">outsideTargets</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166398">b</a></span>, <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166395">blocks</a></span>)
                     <span class="keyword">if</span> <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166406">t</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21345">length</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3142">!=</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span> } <span class="keyword">yield</span> <span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock,List[GenMSIL.this.global.icodes.BasicBlock])(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])</span><span id="23625"><a id="1379">(</a></span></span><span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166413">b</a></span>, <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166414">t</a></span>)
              }

              <span class="keyword">def</span> <span class="typed"><span class="type">(List[GenMSIL.this.global.icodes.BasicBlock],List[(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])],GenMSIL.this.global.icodes.ExceptionHandler)(List[GenMSIL.this.global.icodes.BasicBlock], Option[GenMSIL.this.global.icodes.BasicBlock])</span><a id="166384">replaceOutJumps</a></span>(<span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a id="166417">blocks</a></span>: <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a id="526">List</a></span>[BasicBlock], <span class="typed"><span class="type">List[(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])]</span><a id="166418">leaving</a></span>: <span class="typed"><span class="type">List[(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])]</span><a id="526">List</a></span>[(BasicBlock, List[BasicBlock])], <span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a id="166419">exh</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="../icode/ExceptionHandlers.scala.html#32394">ExceptionHandler</a></span>): <span class="typed"><span class="type">(List[GenMSIL.this.global.icodes.BasicBlock], Option[GenMSIL.this.global.icodes.BasicBlock])</span><a id="1378">(</a></span>List[BasicBlock], Option[BasicBlock]) = {
                <span class="keyword">def</span> <span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock,GenMSIL.this.global.icodes.BasicBlock,GenMSIL.this.global.icodes.BasicBlock)AnyVal</span><a id="166420">replaceJump</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a id="166422">block</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="../icode/BasicBlocks.scala.html#32337">BasicBlock</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a id="166423">from</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="../icode/BasicBlocks.scala.html#32337">BasicBlock</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a id="166424">to</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="../icode/BasicBlocks.scala.html#32337">BasicBlock</a></span>) = <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166422">block</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.Instruction</span><a href="../icode/BasicBlocks.scala.html#33214">lastInstruction</a></span> <span class="typed"><span class="type">AnyVal</span><span class="keyword">match</span></span> {
                  <span class="typed"><span class="type">Boolean</span><span class="keyword">case</span></span> <a id="1">JUMP</a>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a id="166425">whereto</a></span>) =&gt;
                    <span class="comment">//assert(from == whereto)</span>
                    <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166422">block</a></span>.<span class="typed"><span class="type">(GenMSIL.this.global.icodes.Instruction,GenMSIL.this.global.icodes.Instruction)Boolean</span><a href="../icode/BasicBlocks.scala.html#33198">replaceInstruction</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166422">block</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.Instruction</span><a href="../icode/BasicBlocks.scala.html#33214">lastInstruction</a></span>, <span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock)GenMSIL.this.global.icodes.opcodes.JUMP</span><a href="../icode/Opcodes.scala.html#33491">JUMP</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166424">to</a></span>))
                  <span class="typed"><span class="type">AnyVal</span><span class="keyword">case</span></span> <a id="1">CJUMP</a>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a id="166427">success</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a id="166428">failure</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.icodes.TestOp</span><a id="166429">cond</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.icodes.TypeKind</span><a id="166430">kind</a></span>) =&gt;
                    <span class="typed"><span class="type">AnyVal</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166423">from</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166427">success</a></span>)
                      <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166422">block</a></span>.<span class="typed"><span class="type">(GenMSIL.this.global.icodes.Instruction,GenMSIL.this.global.icodes.Instruction)Boolean</span><a href="../icode/BasicBlocks.scala.html#33198">replaceInstruction</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166422">block</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.Instruction</span><a href="../icode/BasicBlocks.scala.html#33214">lastInstruction</a></span>, <span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock,GenMSIL.this.global.icodes.BasicBlock,GenMSIL.this.global.icodes.TestOp,GenMSIL.this.global.icodes.TypeKind)GenMSIL.this.global.icodes.opcodes.CJUMP</span><a href="../icode/Opcodes.scala.html#33505">CJUMP</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166424">to</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166428">failure</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.icodes.TestOp</span><a href="#166429">cond</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.icodes.TypeKind</span><a href="#166430">kind</a></span>))
                    <span class="keyword">else</span>
                      <span class="comment">//assert(from == failure)</span>
                    <span class="typed"><span class="type">AnyVal with NotNull</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166423">from</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166428">failure</a></span>)
                      <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166422">block</a></span>.<span class="typed"><span class="type">(GenMSIL.this.global.icodes.Instruction,GenMSIL.this.global.icodes.Instruction)Boolean</span><a href="../icode/BasicBlocks.scala.html#33198">replaceInstruction</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166422">block</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.Instruction</span><a href="../icode/BasicBlocks.scala.html#33214">lastInstruction</a></span>, <span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock,GenMSIL.this.global.icodes.BasicBlock,GenMSIL.this.global.icodes.TestOp,GenMSIL.this.global.icodes.TypeKind)GenMSIL.this.global.icodes.opcodes.CJUMP</span><a href="../icode/Opcodes.scala.html#33505">CJUMP</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166427">success</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166424">to</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.icodes.TestOp</span><a href="#166429">cond</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.icodes.TypeKind</span><a href="#166430">kind</a></span>))
                  <span class="typed"><span class="type">AnyVal</span><span class="keyword">case</span></span> <a id="1">CZJUMP</a>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a id="166441">success</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a id="166442">failure</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.icodes.TestOp</span><a id="166443">cond</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.icodes.TypeKind</span><a id="166444">kind</a></span>) =&gt;
                    <span class="typed"><span class="type">AnyVal</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166423">from</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166441">success</a></span>)
                      <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166422">block</a></span>.<span class="typed"><span class="type">(GenMSIL.this.global.icodes.Instruction,GenMSIL.this.global.icodes.Instruction)Boolean</span><a href="../icode/BasicBlocks.scala.html#33198">replaceInstruction</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166422">block</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.Instruction</span><a href="../icode/BasicBlocks.scala.html#33214">lastInstruction</a></span>, <span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock,GenMSIL.this.global.icodes.BasicBlock,GenMSIL.this.global.icodes.TestOp,GenMSIL.this.global.icodes.TypeKind)GenMSIL.this.global.icodes.opcodes.CZJUMP</span><a href="../icode/Opcodes.scala.html#33538">CZJUMP</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166424">to</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166442">failure</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.icodes.TestOp</span><a href="#166443">cond</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.icodes.TypeKind</span><a href="#166444">kind</a></span>))
                    <span class="keyword">else</span>
                      <span class="comment">//assert(from == failure)</span>
                    <span class="typed"><span class="type">AnyVal with NotNull</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166423">from</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166442">failure</a></span>)
                      <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166422">block</a></span>.<span class="typed"><span class="type">(GenMSIL.this.global.icodes.Instruction,GenMSIL.this.global.icodes.Instruction)Boolean</span><a href="../icode/BasicBlocks.scala.html#33198">replaceInstruction</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166422">block</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.Instruction</span><a href="../icode/BasicBlocks.scala.html#33214">lastInstruction</a></span>, <span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock,GenMSIL.this.global.icodes.BasicBlock,GenMSIL.this.global.icodes.TestOp,GenMSIL.this.global.icodes.TypeKind)GenMSIL.this.global.icodes.opcodes.CZJUMP</span><a href="../icode/Opcodes.scala.html#33538">CZJUMP</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166441">success</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166424">to</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.icodes.TestOp</span><a href="#166443">cond</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.icodes.TypeKind</span><a href="#166444">kind</a></span>))
                  <span class="typed"><span class="type">Boolean</span><span class="keyword">case</span></span> <a id="1">SWITCH</a>(<span class="typed"><span class="type">List[List[Int]]</span><a id="166455">tags</a></span>, <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a id="166456">labels</a></span>) =&gt; <span class="comment">// labels: List[BasicBlock]</span>
                    <span class="keyword">val</span> <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a id="166457">newLabels</a></span> = <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166456">labels</a></span>.<span class="typed"><span class="type">((GenMSIL.this.global.icodes.BasicBlock) =&gt; GenMSIL.this.global.icodes.BasicBlock)List[GenMSIL.this.global.icodes.BasicBlock]</span><a id="21362">map</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a id="166460">b</a></span> =&gt; <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166460">b</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166423">from</a></span>) <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166424">to</a></span> <span class="keyword">else</span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166460">b</a></span>)
                    <span class="typed"><span class="type">(Boolean)Unit</span><span id="6003"><a id="821">assert</a></span></span>(<span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166457">newLabels</a></span>.<span class="typed"><span class="type">(Any)Boolean</span><a id="21673">contains</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166424">to</a></span>))
                    <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166422">block</a></span>.<span class="typed"><span class="type">(GenMSIL.this.global.icodes.Instruction,GenMSIL.this.global.icodes.Instruction)Boolean</span><a href="../icode/BasicBlocks.scala.html#33198">replaceInstruction</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166422">block</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.Instruction</span><a href="../icode/BasicBlocks.scala.html#33214">lastInstruction</a></span>, <span class="typed"><span class="type">(List[List[Int]],List[GenMSIL.this.global.icodes.BasicBlock])GenMSIL.this.global.icodes.opcodes.SWITCH</span><a href="../icode/Opcodes.scala.html#33666">SWITCH</a></span>(<span class="typed"><span class="type">List[List[Int]]</span><a href="#166455">tags</a></span>, <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166457">newLabels</a></span>))
                  <span class="comment">/*
                  case RETURN(kind) =&gt;
                    if (kind != UNIT) {
                        returnVal
                    }
                    block.replaceInstruction(block.lastInstructionm JUMP(to))
                  */</span>
                  <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> _ =&gt; <span class="typed"><span class="type">Unit</span><span >(</span></span>) <span class="comment">//abort(&quot;expected branch at the end of block &quot; + block)</span>
                }

                <span class="keyword">val</span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a id="166421">jumpOutBlock</a></span> = <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166417">blocks</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.BasicBlock</span><a id="21350">last</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.Code</span><a href="../icode/BasicBlocks.scala.html#33156">code</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.BasicBlock</span><a href="../icode/Members.scala.html#33291">newBlock</a></span>
                <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166421">jumpOutBlock</a></span>.<span class="typed"><span class="type">(GenMSIL.this.global.icodes.Instruction)Unit</span><a href="../icode/BasicBlocks.scala.html#33205">emit</a></span>(<span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock)GenMSIL.this.global.icodes.opcodes.JUMP</span><a href="../icode/Opcodes.scala.html#33491">JUMP</a></span>(<span class="typed"><span class="type">(GenMSIL.this.global.icodes.ExceptionHandler)GenMSIL.this.global.icodes.BasicBlock</span><a href="#166372" id="24239">firstBlockAfter</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166419">exh</a></span>)))
                <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166421">jumpOutBlock</a></span>.<span class="typed"><span class="type">=&gt; Unit</span><a href="../icode/BasicBlocks.scala.html#33208">close</a></span>
                <span class="typed"><span class="type">List[(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])]</span><a href="#166418">leaving</a></span>.<span class="typed"><span class="type">(((GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])) =&gt; Unit)Unit</span><a id="21366">foreach</a></span>(<span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])</span><a id="166471">p</a></span> =&gt; {
                  <span class="keyword">val</span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a id="166472">lBlock</a></span> = <span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])</span><a href="#166471">p</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.BasicBlock</span><a id="23614">_1</a></span>
                  <span class="keyword">val</span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a id="166473">target</a></span> = <span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])</span><a href="#166471">p</a></span>.<span class="typed"><span class="type">(Int)GenMSIL.this.global.icodes.BasicBlock</span><span id="21361"><a id="23616">_2</a></span></span>(<span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>) <span class="comment">// the elemets of p._2 are all the same, checked before</span>
                  <span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock,GenMSIL.this.global.icodes.BasicBlock,GenMSIL.this.global.icodes.BasicBlock)AnyVal</span><a href="#166420">replaceJump</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166472">lBlock</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166473">target</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166421">jumpOutBlock</a></span>)
                  <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="../../Global.scala.html#21157">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting</span><a href="../../Settings.scala.html#30066">debug</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting#T</span><a href="../../Settings.scala.html#30301">value</a></span>) <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;replacing &quot;)</span><span class="string">&quot;replacing &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166472">lBlock</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot; target &quot;)</span><span class="string">&quot; target &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166473">target</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot; jump out &quot;)</span><span class="string">&quot; jump out &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166421">jumpOutBlock</a></span>)
                })
                <span class="typed"><span class="type">(List[GenMSIL.this.global.icodes.BasicBlock],Some[GenMSIL.this.global.icodes.BasicBlock])(List[GenMSIL.this.global.icodes.BasicBlock], Some[GenMSIL.this.global.icodes.BasicBlock])</span><span id="23625"><a id="1379">(</a></span></span><span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166417">blocks</a></span> <span class="typed"><span class="type">(List[GenMSIL.this.global.icodes.BasicBlock])List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166481" id="21339">:::</a></span> <span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock*)List[GenMSIL.this.global.icodes.BasicBlock]</span><span id="21328"><a id="527">List</a></span></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166421">jumpOutBlock</a></span>), <span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock)Some[GenMSIL.this.global.icodes.BasicBlock]</span><span id="29737"><a id="308">Some</a></span></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166421">jumpOutBlock</a></span>))
              }

              <span class="keyword">val</span> <span class="typed"><span class="type">List[(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])]</span><a id="166385">leaving</a></span> = <span class="typed"><span class="type">(List[GenMSIL.this.global.icodes.BasicBlock])List[(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])]</span><a href="#166383">leavingBlocks</a></span>(<span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166380">blocks</a></span>)
              <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="../../Global.scala.html#21157">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting</span><a href="../../Settings.scala.html#30066">debug</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting#T</span><a href="../../Settings.scala.html#30301">value</a></span>) <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;leaving &quot;)</span><span class="string">&quot;leaving &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">List[(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])]</span><a href="#166385">leaving</a></span>)
              <span class="typed"><span class="type">(List[GenMSIL.this.global.icodes.BasicBlock], Option[GenMSIL.this.global.icodes.BasicBlock])</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">List[(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])]</span><a href="#166385">leaving</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21345">length</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3141">==</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>)
                <span class="typed"><span class="type">(List[GenMSIL.this.global.icodes.BasicBlock],object None)(List[GenMSIL.this.global.icodes.BasicBlock], object None)</span><span id="23625"><a id="1379">(</a></span></span><span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166380">blocks</a></span>, <span class="typed"><span class="type">object None</span><a id="536">None</a></span>)
              <span class="keyword">else</span> <span class="typed"><span class="type">(List[GenMSIL.this.global.icodes.BasicBlock], Option[GenMSIL.this.global.icodes.BasicBlock])</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">List[(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])]</span><a href="#166385">leaving</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21345">length</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3141">==</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>) {
                <span class="keyword">val</span> <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a id="166494">outside</a></span> = <span class="typed"><span class="type">(Int)(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])</span><a href="#166385" id="21361">leaving</a></span>(<span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>).<span class="typed"><span class="type">=&gt; List[GenMSIL.this.global.icodes.BasicBlock]</span><a id="23616">_2</a></span>
                <span class="comment">//assert(outside.forall(b =&gt; b == outside(0)), &quot;exception-block leaving to multiple targets&quot;)</span>
                <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.ExceptionHandler,GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166372">firstBlockAfter</a></span>.<span class="typed"><span class="type">(GenMSIL.this.global.icodes.ExceptionHandler)Boolean</span><a id="24241">isDefinedAt</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166381">exh</a></span>))
                  <span class="typed"><span class="type">scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.ExceptionHandler,GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166372">firstBlockAfter</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166381">exh</a></span>) = <span class="typed"><span class="type">(Int)GenMSIL.this.global.icodes.BasicBlock</span><a href="#166494" id="21361">outside</a></span>(<span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>)
                <span class="comment">//else ()</span>
                  <span class="comment">//assert(firstBlockAfter(exh) == outside(0), &quot;try/catch leaving to multiple targets: &quot; + firstBlockAfter(exh) + &quot;, new: &quot; + outside(0))</span>
                <span class="keyword">val</span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a id="166495">last</a></span> = <span class="typed"><span class="type">(Int)(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])</span><a href="#166385" id="21361">leaving</a></span>(<span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>).<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.BasicBlock</span><a id="23614">_1</a></span>
                <span class="typed"><span class="type">(List[GenMSIL.this.global.icodes.BasicBlock],object None)(List[GenMSIL.this.global.icodes.BasicBlock], object None)</span><span id="23625"><a id="1379">(</a></span></span>(<span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166380">blocks</a></span> <span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock)List[GenMSIL.this.global.icodes.BasicBlock]</span><a id="21401">-</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166495">last</a></span>) <span class="typed"><span class="type">(List[GenMSIL.this.global.icodes.BasicBlock])List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166511" id="21339">:::</a></span> <span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock*)List[GenMSIL.this.global.icodes.BasicBlock]</span><span id="21328"><a id="527">List</a></span></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166495">last</a></span>), <span class="typed"><span class="type">object None</span><a id="536">None</a></span>)
              } <span class="keyword">else</span> {
                <span class="keyword">val</span> <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a id="166517">outside</a></span> = <span class="typed"><span class="type">List[(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])]</span><a href="#166385">leaving</a></span>.<span class="typed"><span class="type">(((GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])) =&gt; Iterable[GenMSIL.this.global.icodes.BasicBlock])List[GenMSIL.this.global.icodes.BasicBlock]</span><a id="21383">flatMap</a></span>(<span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])</span><a id="166520">p</a></span> =&gt; <span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])</span><a href="#166520">p</a></span>.<span class="typed"><span class="type">=&gt; List[GenMSIL.this.global.icodes.BasicBlock]</span><a id="23616">_2</a></span>)
                <span class="comment">//assert(outside.forall(b =&gt; b == outside(0)), &quot;exception-block leaving to multiple targets&quot;)</span>
                <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.ExceptionHandler,GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166372">firstBlockAfter</a></span>.<span class="typed"><span class="type">(GenMSIL.this.global.icodes.ExceptionHandler)Boolean</span><a id="24241">isDefinedAt</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166381">exh</a></span>))
                  <span class="typed"><span class="type">scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.ExceptionHandler,GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166372">firstBlockAfter</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166381">exh</a></span>) = <span class="typed"><span class="type">(Int)GenMSIL.this.global.icodes.BasicBlock</span><a href="#166517" id="21361">outside</a></span>(<span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>)
                <span class="comment">//else</span>
                  <span class="comment">//assert(firstBlockAfter(exh) == outside(0), &quot;try/catch leaving to multiple targets&quot;)</span>
                <span class="typed"><span class="type">(List[GenMSIL.this.global.icodes.BasicBlock],List[(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])],GenMSIL.this.global.icodes.ExceptionHandler)(List[GenMSIL.this.global.icodes.BasicBlock], Option[GenMSIL.this.global.icodes.BasicBlock])</span><a href="#166384">replaceOutJumps</a></span>(<span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166380">blocks</a></span>, <span class="typed"><span class="type">List[(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])]</span><a href="#166385">leaving</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166381">exh</a></span>)
              }
            }

            <span class="keyword">var</span> <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.ExceptionHandler]</span><a id="166375">affectedHandlers</a></span>: <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.ExceptionHandler]</span><a id="526">List</a></span>[ExceptionHandler] = <span class="typed"><span class="type">object Nil</span><a id="335">Nil</a></span>
            <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.ExceptionHandler]</span><a href="#166324">untreatedHandlers</a></span>.<span class="typed"><span class="type">((GenMSIL.this.global.icodes.ExceptionHandler) =&gt; Unit)Unit</span><a id="21366">foreach</a></span>( (<span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a id="166528">h</a></span>) =&gt; {
              <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166528">h</a></span>.<span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock)Boolean</span><a href="../icode/ExceptionHandlers.scala.html#51924">covers</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166334">x</a></span>)){
                <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.ExceptionHandler]</span><a href="#166375">affectedHandlers</a></span> = <span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166528">h</a></span> <span class="typed"><span class="type">(GenMSIL.this.global.icodes.ExceptionHandler)List[GenMSIL.this.global.icodes.ExceptionHandler]</span><a href="#166529" id="21335">::</a></span> <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.ExceptionHandler]</span><a href="#166375">affectedHandlers</a></span>
              }
            })

            <span class="comment">// shorter try-catch-finally last (the ones contained in another)</span>
            <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.ExceptionHandler]</span><a href="#166375">affectedHandlers</a></span> = <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.ExceptionHandler]</span><a href="#166375">affectedHandlers</a></span>.<span class="typed"><span class="type">((GenMSIL.this.global.icodes.ExceptionHandler, GenMSIL.this.global.icodes.ExceptionHandler) =&gt; Boolean)List[GenMSIL.this.global.icodes.ExceptionHandler]</span><a id="21370">sort</a></span>({(<span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a id="166533">h1</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a id="166534">h2</a></span>) =&gt; <span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166533">h1</a></span>.<span class="typed"><span class="type">=&gt; scala.collection.immutable.Set[GenMSIL.this.global.icodes.BasicBlock]</span><a href="../icode/ExceptionHandlers.scala.html#51920">covered</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="25541">size</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3145">&gt;</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166534">h2</a></span>.<span class="typed"><span class="type">=&gt; scala.collection.immutable.Set[GenMSIL.this.global.icodes.BasicBlock]</span><a href="../icode/ExceptionHandlers.scala.html#51920">covered</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="25541">size</a></span>})
            <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.ExceptionHandler]</span><a href="#166375">affectedHandlers</a></span> = <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.ExceptionHandler]</span><a href="#166375">affectedHandlers</a></span>.<span class="typed"><span class="type">((GenMSIL.this.global.icodes.ExceptionHandler) =&gt; Boolean)List[GenMSIL.this.global.icodes.ExceptionHandler]</span><a id="21367">filter</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a id="166540">h</a></span> =&gt; {<span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166540">h</a></span>.<span class="typed"><span class="type">=&gt; scala.collection.immutable.Set[GenMSIL.this.global.icodes.BasicBlock]</span><a href="../icode/ExceptionHandlers.scala.html#51920">covered</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="25541">size</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3141">==</a></span> <span class="typed"><span class="type">(Int)GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166375" id="21361">affectedHandlers</a></span>(<span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>).<span class="typed"><span class="type">=&gt; scala.collection.immutable.Set[GenMSIL.this.global.icodes.BasicBlock]</span><a href="../icode/ExceptionHandlers.scala.html#51920">covered</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="25541">size</a></span>})
            <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.ExceptionHandler]</span><a href="#166324">untreatedHandlers</a></span> = <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.ExceptionHandler]</span><a href="#166324">untreatedHandlers</a></span> <span class="typed"><span class="type">(List[GenMSIL.this.global.icodes.ExceptionHandler])List[GenMSIL.this.global.icodes.ExceptionHandler]</span><a id="21399">--</a></span> <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.ExceptionHandler]</span><a href="#166375">affectedHandlers</a></span>

            <span class="comment">// more than one catch produces more than one exh, but we only need one</span>
            <span class="keyword">var</span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a id="166376">singleAffectedHandler</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="../icode/ExceptionHandlers.scala.html#32394">ExceptionHandler</a></span> = <span class="typed"><span class="type">(Int)GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166375" id="21361">affectedHandlers</a></span>(<span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>) <span class="comment">// List[ExceptionHandler] = Nil</span>
            <span class="keyword">var</span> <span class="typed"><span class="type">Option[BytecodeGenerator.this.ExceptionBlock]</span><a id="166377">exceptionBlock</a></span>: <span class="typed"><span class="type">Option[BytecodeGenerator.this.ExceptionBlock]</span><a id="934">Option</a></span>[ExceptionBlock] = <span class="typed"><span class="type">object None</span><a id="536">None</a></span>
            <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="../../Global.scala.html#21157">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting</span><a href="../../Settings.scala.html#30066">debug</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting#T</span><a href="../../Settings.scala.html#30301">value</a></span>) <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;affected handlers &quot;)</span><span class="string">&quot;affected handlers &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.ExceptionHandler]</span><a href="#166375">affectedHandlers</a></span>)
            <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.ExceptionHandler]</span><a href="#166375">affectedHandlers</a></span>.<span class="typed"><span class="type">((GenMSIL.this.global.icodes.ExceptionHandler) =&gt; Unit)Unit</span><a id="21366">foreach</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a id="166559">h1</a></span> =&gt; {
              <span class="keyword">val</span> <span class="typed"><span class="type">(List[GenMSIL.this.global.icodes.BasicBlock], Option[GenMSIL.this.global.icodes.BasicBlock])</span><span id="23625"><a href="#166566" id="1379">(</a></span></span><span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><span id="166566"><span id="166561"><a href="#166560" id="23614">adaptedBlocks</a></span></span></span>, <span class="typed"><span class="type">Option[GenMSIL.this.global.icodes.BasicBlock]</span><span id="166567"><span id="166562"><a href="#166560" id="23616">newBlock</a></span></span></span>) = <span class="typed"><span class="type">(List[GenMSIL.this.global.icodes.BasicBlock],GenMSIL.this.global.icodes.ExceptionHandler)(List[GenMSIL.this.global.icodes.BasicBlock], Option[GenMSIL.this.global.icodes.BasicBlock])</span><a href="#166374">adaptBlocks</a></span>(<span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166322">blocksToPut</a></span>.<span class="typed"><span class="type">(List[GenMSIL.this.global.icodes.BasicBlock])List[GenMSIL.this.global.icodes.BasicBlock]</span><a id="21395">intersect</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166559">h1</a></span>.<span class="typed"><span class="type">=&gt; List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="../icode/ExceptionHandlers.scala.html#51925">blocks</a></span>), <span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166376">singleAffectedHandler</a></span>)
              <span class="typed"><span class="type">Option[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166562">newBlock</a></span> <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
                <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">Some</a>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a id="166570">block</a></span>) =&gt;
                  <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166322">blocksToPut</a></span> = <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166322">blocksToPut</a></span> <span class="typed"><span class="type">(List[GenMSIL.this.global.icodes.BasicBlock])List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166571" id="21339">:::</a></span> <span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock*)List[GenMSIL.this.global.icodes.BasicBlock]</span><span id="21328"><a id="527">List</a></span></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166570">block</a></span>)
                  <span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166559">h1</a></span>.<span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock)Unit</span><a href="../icode/ExceptionHandlers.scala.html#51928">addBlock</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166570">block</a></span>)
                <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object None</span><a id="536">None</a></span> =&gt; <span class="typed"><span class="type">Unit</span><span >(</span></span>)
              }
              <span class="keyword">val</span> <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a id="166563">orderedCatchBlocks</a></span> = <span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166559">h1</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.BasicBlock</span><a href="../icode/ExceptionHandlers.scala.html#51919">startBlock</a></span> <span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock)List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166575" id="21335">::</a></span> (<span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166561">adaptedBlocks</a></span> <span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock)List[GenMSIL.this.global.icodes.BasicBlock]</span><a id="21401">-</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166559">h1</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.BasicBlock</span><a href="../icode/ExceptionHandlers.scala.html#51919">startBlock</a></span>)

              <span class="typed"><span class="type">Option[BytecodeGenerator.this.ExceptionBlock]</span><a href="#166377">exceptionBlock</a></span> <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
                <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">Some</a>(<span class="typed"><span class="type">BytecodeGenerator.this.ExceptionBlock</span><a id="166580">excBlock</a></span>) =&gt;
                  <span class="keyword">val</span> <span class="typed"><span class="type">BytecodeGenerator.this.CatchBlock</span><a id="166581">catchBlock</a></span> = <span class="typed"><span class="type">BytecodeGenerator.this.ExceptionBlock</span><a href="#166580">excBlock</a></span>.<span class="typed"><span class="type">(GenMSIL.this.global.Symbol)BytecodeGenerator.this.CatchBlock</span><a href="#166050">addCatchBlock</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166559">h1</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Symbol</span><a href="../icode/ExceptionHandlers.scala.html#51906">cls</a></span>)
                  <span class="typed"><span class="type">BytecodeGenerator.this.BlockList0</span><a href="#166325">currentBlock</a></span> = <span class="typed"><span class="type">BytecodeGenerator.this.CatchBlock</span><a href="#166581">catchBlock</a></span>
                  <span class="typed"><span class="type">(List[GenMSIL.this.global.icodes.BasicBlock])Unit</span><a href="#166326">addBlocks</a></span>(<span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166563">orderedCatchBlocks</a></span>)
                <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object None</span><a id="536">None</a></span> =&gt;
                  <span class="keyword">val</span> <span class="typed"><span class="type">BytecodeGenerator.this.ExceptionBlock</span><a id="166582">excBlock</a></span> = <span class="typed"><span class="type">BytecodeGenerator.this.BlockList0</span><a href="#166325">currentBlock</a></span>.<span class="typed"><span class="type">(GenMSIL.this.global.icodes.ExceptionHandler)BytecodeGenerator.this.ExceptionBlock</span><a href="#165978">addExceptionBlock</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166376">singleAffectedHandler</a></span>)
                  <span class="typed"><span class="type">Option[BytecodeGenerator.this.ExceptionBlock]</span><a href="#166377">exceptionBlock</a></span> = <span class="typed"><span class="type">(BytecodeGenerator.this.ExceptionBlock)Some[BytecodeGenerator.this.ExceptionBlock]</span><span id="29737"><a id="308">Some</a></span></span>(<span class="typed"><span class="type">BytecodeGenerator.this.ExceptionBlock</span><a href="#166582">excBlock</a></span>)

                  <span class="keyword">val</span> <span class="typed"><span class="type">(List[GenMSIL.this.global.icodes.BasicBlock], Option[GenMSIL.this.global.icodes.BasicBlock])</span><span id="23625"><a href="#166590" id="1379">(</a></span></span><span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><span id="166590"><span id="166584"><a href="#166583" id="23614">tryBlocks</a></span></span></span>, <span class="typed"><span class="type">Option[GenMSIL.this.global.icodes.BasicBlock]</span><span id="166591"><span id="166585"><a href="#166583" id="23616">newBlock</a></span></span></span>) = <span class="typed"><span class="type">(List[GenMSIL.this.global.icodes.BasicBlock],GenMSIL.this.global.icodes.ExceptionHandler)(List[GenMSIL.this.global.icodes.BasicBlock], Option[GenMSIL.this.global.icodes.BasicBlock])</span><a href="#166374">adaptBlocks</a></span>(<span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166322">blocksToPut</a></span>.<span class="typed"><span class="type">(List[GenMSIL.this.global.icodes.BasicBlock])List[GenMSIL.this.global.icodes.BasicBlock]</span><a id="21395">intersect</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166376">singleAffectedHandler</a></span>.<span class="typed"><span class="type">=&gt; scala.collection.immutable.Set[GenMSIL.this.global.icodes.BasicBlock]</span><a href="../icode/ExceptionHandlers.scala.html#51920">covered</a></span>.<span class="typed"><span class="type">=&gt; List[GenMSIL.this.global.icodes.BasicBlock]</span><a id="21815">toList</a></span>), <span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166376">singleAffectedHandler</a></span>)

                  <span class="typed"><span class="type">Option[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166585">newBlock</a></span> <span class="typed"><span class="type">Any</span><span class="keyword">match</span></span> {
                    <span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><span class="keyword">case</span></span> <a id="1">Some</a>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a id="166594">block</a></span>) =&gt;
                      <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166322">blocksToPut</a></span> = <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166322">blocksToPut</a></span> <span class="typed"><span class="type">(List[GenMSIL.this.global.icodes.BasicBlock])List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166595" id="21339">:::</a></span> <span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock*)List[GenMSIL.this.global.icodes.BasicBlock]</span><span id="21328"><a id="527">List</a></span></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166594">block</a></span>)
                      <span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166376">singleAffectedHandler</a></span>.<span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock)GenMSIL.this.global.icodes.ExceptionHandler</span><a href="../icode/ExceptionHandlers.scala.html#51923">addCoveredBlock</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166594">block</a></span>)
                    <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object None</span><a id="536">None</a></span> =&gt; <span class="typed"><span class="type">Unit</span><span >(</span></span>)
                  }
                  <span class="typed"><span class="type">BytecodeGenerator.this.BlockList0</span><a href="#166325">currentBlock</a></span> = <span class="typed"><span class="type">BytecodeGenerator.this.ExceptionBlock</span><a href="#166582">excBlock</a></span>.<span class="typed"><span class="type">=&gt; BytecodeGenerator.this.BlockList</span><a href="#166038">tryBlock</a></span>
                  <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="../../Global.scala.html#21157">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting</span><a href="../../Settings.scala.html#30066">debug</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting#T</span><a href="../../Settings.scala.html#30301">value</a></span>) <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;adding try blocks &quot;)</span><span class="string">&quot;adding try blocks &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166584">tryBlocks</a></span>)
                  <span class="typed"><span class="type">(List[GenMSIL.this.global.icodes.BasicBlock])Unit</span><a href="#166326">addBlocks</a></span>(<span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166584">tryBlocks</a></span>)

                  <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166376">singleAffectedHandler</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.Finalizer</span><a href="../icode/ExceptionHandlers.scala.html#51912">finalizer</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5793">!=</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166376">singleAffectedHandler</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.Finalizer</span><a href="../icode/ExceptionHandlers.scala.html#51912">finalizer</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5793">!=</a></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.NoFinalizer</span><a href="../icode/ExceptionHandlers.scala.html#32396">NoFinalizer</a></span>) {
                    <span class="keyword">val</span> <span class="typed"><span class="type">(List[GenMSIL.this.global.icodes.BasicBlock], Option[GenMSIL.this.global.icodes.BasicBlock])</span><span id="23625"><a href="#166617" id="1379">(</a></span></span><span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><span id="166617"><span id="166612"><a href="#166611" id="23614">blocks0</a></span></span></span>, <span class="typed"><span class="type">Option[GenMSIL.this.global.icodes.BasicBlock]</span><span id="166618"><span id="166613"><a href="#166611" id="23616">newBlock</a></span></span></span>) = <span class="typed"><span class="type">(List[GenMSIL.this.global.icodes.BasicBlock],GenMSIL.this.global.icodes.ExceptionHandler)(List[GenMSIL.this.global.icodes.BasicBlock], Option[GenMSIL.this.global.icodes.BasicBlock])</span><a href="#166374">adaptBlocks</a></span>(<span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166322">blocksToPut</a></span>.<span class="typed"><span class="type">(List[GenMSIL.this.global.icodes.BasicBlock])List[GenMSIL.this.global.icodes.BasicBlock]</span><a id="21395">intersect</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166376">singleAffectedHandler</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.Finalizer</span><a href="../icode/ExceptionHandlers.scala.html#51912">finalizer</a></span>.<span class="typed"><span class="type">=&gt; List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="../icode/ExceptionHandlers.scala.html#51925">blocks</a></span>), <span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166376">singleAffectedHandler</a></span>)
                    <span class="typed"><span class="type">Option[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166613">newBlock</a></span> <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
                      <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">Some</a>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a id="166621">block</a></span>) =&gt;
                        <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166322">blocksToPut</a></span> = <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166322">blocksToPut</a></span> <span class="typed"><span class="type">(List[GenMSIL.this.global.icodes.BasicBlock])List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166622" id="21339">:::</a></span> <span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock*)List[GenMSIL.this.global.icodes.BasicBlock]</span><span id="21328"><a id="527">List</a></span></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166621">block</a></span>)
                        <span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166376">singleAffectedHandler</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.Finalizer</span><a href="../icode/ExceptionHandlers.scala.html#51912">finalizer</a></span>.<span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock)Unit</span><a href="../icode/ExceptionHandlers.scala.html#51928">addBlock</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166621">block</a></span>)
                      <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object None</span><a id="536">None</a></span> =&gt; <span class="typed"><span class="type">Unit</span><span >(</span></span>)
                    }
                    <span class="keyword">val</span> <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a id="166614">blocks</a></span> = <span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166376">singleAffectedHandler</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.Finalizer</span><a href="../icode/ExceptionHandlers.scala.html#51912">finalizer</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.BasicBlock</span><a href="../icode/ExceptionHandlers.scala.html#51919">startBlock</a></span> <span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock)List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166626" id="21335">::</a></span> (<span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166612">blocks0</a></span> <span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock)List[GenMSIL.this.global.icodes.BasicBlock]</span><a id="21401">-</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166376">singleAffectedHandler</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.Finalizer</span><a href="../icode/ExceptionHandlers.scala.html#51912">finalizer</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.BasicBlock</span><a href="../icode/ExceptionHandlers.scala.html#51919">startBlock</a></span>)
                    <span class="typed"><span class="type">BytecodeGenerator.this.BlockList0</span><a href="#166325">currentBlock</a></span> = <span class="typed"><span class="type">BytecodeGenerator.this.ExceptionBlock</span><a href="#166582">excBlock</a></span>.<span class="typed"><span class="type">=&gt; BytecodeGenerator.this.BlockList</span><a href="#166044">finallyBlock</a></span>
                    <span class="typed"><span class="type">(List[GenMSIL.this.global.icodes.BasicBlock])Unit</span><a href="#166326">addBlocks</a></span>(<span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166614">blocks</a></span>)
                  }

                  <span class="keyword">val</span> <span class="typed"><span class="type">BytecodeGenerator.this.CatchBlock</span><a id="166586">catchBlock</a></span> = <span class="typed"><span class="type">BytecodeGenerator.this.ExceptionBlock</span><a href="#166582">excBlock</a></span>.<span class="typed"><span class="type">(GenMSIL.this.global.Symbol)BytecodeGenerator.this.CatchBlock</span><a href="#166050">addCatchBlock</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166376">singleAffectedHandler</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Symbol</span><a href="../icode/ExceptionHandlers.scala.html#51906">cls</a></span>)
                  <span class="typed"><span class="type">BytecodeGenerator.this.BlockList0</span><a href="#166325">currentBlock</a></span> = <span class="typed"><span class="type">BytecodeGenerator.this.CatchBlock</span><a href="#166586">catchBlock</a></span>
                  <span class="typed"><span class="type">(List[GenMSIL.this.global.icodes.BasicBlock])Unit</span><a href="#166326">addBlocks</a></span>(<span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166563">orderedCatchBlocks</a></span>)
              }
              <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.ExceptionHandler,GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166372">firstBlockAfter</a></span>.<span class="typed"><span class="type">(GenMSIL.this.global.icodes.ExceptionHandler)Boolean</span><a id="24241">isDefinedAt</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166376">singleAffectedHandler</a></span>))
                <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166323">nextBlock</a></span> = <span class="typed"><span class="type">(GenMSIL.this.global.icodes.ExceptionHandler)GenMSIL.this.global.icodes.BasicBlock</span><a href="#166372" id="24239">firstBlockAfter</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166376">singleAffectedHandler</a></span>)
              <span class="keyword">else</span>
                <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166323">nextBlock</a></span> = <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>
            })

            <span class="typed"><span class="type">BytecodeGenerator.this.BlockList0</span><a href="#166325">currentBlock</a></span> = <span class="typed"><span class="type">BytecodeGenerator.this.BlockList0</span><a href="#166373">savedCurrentBlock</a></span>

            <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="../../Global.scala.html#21157">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting</span><a href="../../Settings.scala.html#30066">debug</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting#T</span><a href="../../Settings.scala.html#30301">value</a></span>)
              <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot; -&gt; addBlocks(&quot;)</span><span class="string">&quot; -&gt; addBlocks(&quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166335">xs</a></span>.<span class="typed"><span class="type">(List[GenMSIL.this.global.icodes.BasicBlock])List[GenMSIL.this.global.icodes.BasicBlock]</span><a id="21395">intersect</a></span>(<span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166322">blocksToPut</a></span>) <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;)&quot;)</span><span class="string">&quot;)&quot;</span></span>)
            <span class="typed"><span class="type">(List[GenMSIL.this.global.icodes.BasicBlock])Unit</span><a href="#166326">addBlocks</a></span>(<span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166335">xs</a></span>.<span class="typed"><span class="type">(List[GenMSIL.this.global.icodes.BasicBlock])List[GenMSIL.this.global.icodes.BasicBlock]</span><a id="21395">intersect</a></span>(<span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166322">blocksToPut</a></span>))
          }
      }

      <span class="comment">// begin method orderBlocksForExh</span>

      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="../../Global.scala.html#21157">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting</span><a href="../../Settings.scala.html#30066">debug</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting#T</span><a href="../../Settings.scala.html#30301">value</a></span>)
        <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;before: &quot;)</span><span class="string">&quot;before: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#165827">blocks</a></span>)
      <span class="comment">// some blocks may have been removed by linearization</span>
      <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.ExceptionHandler]</span><a href="#166324">untreatedHandlers</a></span>.<span class="typed"><span class="type">((GenMSIL.this.global.icodes.ExceptionHandler) =&gt; Unit)Unit</span><a id="21366">foreach</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a id="166646">h</a></span> =&gt; {
        <span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166646">h</a></span>.<span class="typed"><span class="type">(List[GenMSIL.this.global.icodes.BasicBlock])Unit</span><a href="../icode/ExceptionHandlers.scala.html#51926">blocks</a></span> = <span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166646">h</a></span>.<span class="typed"><span class="type">=&gt; List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="../icode/ExceptionHandlers.scala.html#51925">blocks</a></span>.<span class="typed"><span class="type">(List[GenMSIL.this.global.icodes.BasicBlock])List[GenMSIL.this.global.icodes.BasicBlock]</span><a id="21395">intersect</a></span>(<span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166322">blocksToPut</a></span>)
        <span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166646">h</a></span>.<span class="typed"><span class="type">(scala.collection.immutable.Set[GenMSIL.this.global.icodes.BasicBlock])Unit</span><a href="../icode/ExceptionHandlers.scala.html#51921">covered</a></span> = <span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166646">h</a></span>.<span class="typed"><span class="type">=&gt; scala.collection.immutable.Set[GenMSIL.this.global.icodes.BasicBlock]</span><a href="../icode/ExceptionHandlers.scala.html#51920">covered</a></span>.<span class="typed"><span class="type">(scala.collection.Set[GenMSIL.this.global.icodes.BasicBlock])scala.collection.immutable.Set[GenMSIL.this.global.icodes.BasicBlock]</span><a id="31150">intersect</a></span>(collection.immutable.<span class="typed"><span class="type">object scala.collection.immutable.HashSet</span><a id="26213">HashSet</a></span>.<span class="typed"><span class="type">scala.collection.immutable.HashSet[GenMSIL.this.global.icodes.BasicBlock]</span><a id="51965">empty</a></span> <span class="typed"><span class="type">(Iterable[GenMSIL.this.global.icodes.BasicBlock])scala.collection.immutable.Set[GenMSIL.this.global.icodes.BasicBlock]</span><a id="31140">++</a></span> <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166322">blocksToPut</a></span>)
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166646">h</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.Finalizer</span><a href="../icode/ExceptionHandlers.scala.html#51912">finalizer</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5793">!=</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166646">h</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.Finalizer</span><a href="../icode/ExceptionHandlers.scala.html#51912">finalizer</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5793">!=</a></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.NoFinalizer</span><a href="../icode/ExceptionHandlers.scala.html#32396">NoFinalizer</a></span>)
          <span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166646">h</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.Finalizer</span><a href="../icode/ExceptionHandlers.scala.html#51912">finalizer</a></span>.<span class="typed"><span class="type">(List[GenMSIL.this.global.icodes.BasicBlock])Unit</span><a href="../icode/ExceptionHandlers.scala.html#51926">blocks</a></span> = <span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166646">h</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.Finalizer</span><a href="../icode/ExceptionHandlers.scala.html#51912">finalizer</a></span>.<span class="typed"><span class="type">=&gt; List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="../icode/ExceptionHandlers.scala.html#51925">blocks</a></span>.<span class="typed"><span class="type">(List[GenMSIL.this.global.icodes.BasicBlock])List[GenMSIL.this.global.icodes.BasicBlock]</span><a id="21395">intersect</a></span>(<span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166322">blocksToPut</a></span>)
      })
      <span class="typed"><span class="type">(List[GenMSIL.this.global.icodes.BasicBlock])Unit</span><a href="#166326">addBlocks</a></span>(<span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#165827">blocks</a></span>)

      <span class="typed"><span class="type">object BytecodeGenerator.this.TopBlock</span><a href="#161704">TopBlock</a></span>.<span class="typed"><span class="type">()Unit</span><a href="#165980">close</a></span>()

      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="../../Global.scala.html#21157">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting</span><a href="../../Settings.scala.html#30066">debug</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting#T</span><a href="../../Settings.scala.html#30301">value</a></span>) <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;TopBlock tree is: &quot;)</span><span class="string">&quot;TopBlock tree is: &quot;</span></span>)
      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="../../Global.scala.html#21157">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting</span><a href="../../Settings.scala.html#30066">debug</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting#T</span><a href="../../Settings.scala.html#30301">value</a></span>) <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">object BytecodeGenerator.this.TopBlock</span><a href="#161704">TopBlock</a></span>)

      <span class="typed"><span class="type">=&gt; scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.BasicBlock,List[BytecodeGenerator.this.ExHInstruction]]</span><a href="#161706">bb2exHInstructions</a></span>.<span class="typed"><span class="type">()Unit</span><a id="24168">clear</a></span>
      <span class="keyword">def</span> <span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock,BytecodeGenerator.this.ExHInstruction)Unit</span><a id="166327">addExHInstruction</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a id="166683">b</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="../icode/BasicBlocks.scala.html#32337">BasicBlock</a></span>, <span class="typed"><span class="type">BytecodeGenerator.this.ExHInstruction</span><a id="166684">ehi</a></span>: <span class="typed"><span class="type">BytecodeGenerator.this.ExHInstruction</span><a href="#161677">ExHInstruction</a></span>) = {
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="../../Global.scala.html#21157">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting</span><a href="../../Settings.scala.html#30066">debug</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting#T</span><a href="../../Settings.scala.html#30301">value</a></span>)
          <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;adding exhinstr: &quot;)</span><span class="string">&quot;adding exhinstr: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166683">b</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot; -&gt; &quot;)</span><span class="string">&quot; -&gt; &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">BytecodeGenerator.this.ExHInstruction</span><a href="#166684">ehi</a></span>)

        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.BasicBlock,List[BytecodeGenerator.this.ExHInstruction]]</span><a href="#161706">bb2exHInstructions</a></span>.<span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock)Boolean</span><a id="24240">contains</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166683">b</a></span>)){
          <span class="typed"><span class="type">=&gt; scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.BasicBlock,List[BytecodeGenerator.this.ExHInstruction]]</span><a href="#161706">bb2exHInstructions</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166683">b</a></span>) = <span class="typed"><span class="type">BytecodeGenerator.this.ExHInstruction</span><a href="#166684">ehi</a></span> <span class="typed"><span class="type">(BytecodeGenerator.this.ExHInstruction)List[BytecodeGenerator.this.ExHInstruction]</span><a href="#166687" id="21335">::</a></span> <span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock)List[BytecodeGenerator.this.ExHInstruction]</span><a href="#161706" id="24239">bb2exHInstructions</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166683">b</a></span>)
        } <span class="keyword">else</span> {
          <span class="typed"><span class="type">=&gt; scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.BasicBlock,List[BytecodeGenerator.this.ExHInstruction]]</span><a href="#161706">bb2exHInstructions</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166683">b</a></span>) = <span class="typed"><span class="type">(BytecodeGenerator.this.ExHInstruction*)List[BytecodeGenerator.this.ExHInstruction]</span><span id="21328"><a id="527">List</a></span></span>(<span class="typed"><span class="type">BytecodeGenerator.this.ExHInstruction</span><a href="#166684">ehi</a></span>)
        }
      }
      <span class="typed"><span class="type">=&gt; scala.collection.mutable.HashSet[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#161708">omitJumpBlocks</a></span>.<span class="typed"><span class="type">()Unit</span><a id="25501">clear</a></span>
      <span class="keyword">def</span> <span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock)Unit</span><a id="166328">omitJump</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a id="166694">blk</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="../icode/BasicBlocks.scala.html#32337">BasicBlock</a></span>) = {
        <span class="typed"><span class="type">=&gt; scala.collection.mutable.HashSet[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#161708">omitJumpBlocks</a></span> <span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock)Unit</span><a id="25499">+=</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166694">blk</a></span>
      }
      <span class="keyword">var</span> <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a id="166329">orderedBlocks</a></span>: <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a id="526">List</a></span>[BasicBlock] = <span class="typed"><span class="type">object Nil</span><a id="335">Nil</a></span>
      <span class="keyword">def</span> <span class="typed"><span class="type">(BytecodeGenerator.this.Block)Unit</span><a id="166330">flatten</a></span>(<span class="typed"><span class="type">BytecodeGenerator.this.Block</span><a id="166696">block</a></span>: <span class="typed"><span class="type">BytecodeGenerator.this.Block</span><a href="#161690">Block</a></span>) {
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">BytecodeGenerator.this.Block</span><a href="#166696">block</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">object BytecodeGenerator.this.TopBlock</span><a href="#161704">TopBlock</a></span>) {
          <span class="keyword">for</span> (<span class="typed"><span class="type">((BytecodeGenerator.this.Block) =&gt; Unit)Unit</span><span id="21366"><a id="166700">b</a></span></span> &lt;- <span class="typed"><span class="type">object BytecodeGenerator.this.TopBlock</span><a href="#161704">TopBlock</a></span>.<span class="typed"><span class="type">=&gt; List[BytecodeGenerator.this.Block]</span><a href="#165973">blocks</a></span>) <span class="typed"><span class="type">(BytecodeGenerator.this.Block)Unit</span><a href="#166330">flatten</a></span>(<span class="typed"><span class="type">BytecodeGenerator.this.Block</span><a href="#166700">b</a></span>)
        } <span class="keyword">else</span> <span class="typed"><span class="type">BytecodeGenerator.this.Block</span><a href="#166696">block</a></span> <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
          <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">BytecodeGenerator.this.CodeBlock</span><a id="166701">cb</a></span>: <span class="typed"><span class="type">BytecodeGenerator.this.CodeBlock</span><a href="#161691">CodeBlock</a></span> =&gt;
            <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166329">orderedBlocks</a></span> = <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166329">orderedBlocks</a></span> <span class="typed"><span class="type">(List[GenMSIL.this.global.icodes.BasicBlock])List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166702" id="21339">:::</a></span> <span class="typed"><span class="type">BytecodeGenerator.this.CodeBlock</span><a href="#166701">cb</a></span>.<span class="typed"><span class="type">=&gt; List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#165960">basicBlocks</a></span>
          <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">BytecodeGenerator.this.BlockList</span><a id="166705">bl</a></span>: <span class="typed"><span class="type">BytecodeGenerator.this.BlockList</span><a href="#161695">BlockList</a></span> =&gt;
            <span class="keyword">for</span> (<span class="typed"><span class="type">((BytecodeGenerator.this.Block) =&gt; Unit)Unit</span><span id="21366"><a id="166708">b</a></span></span> &lt;- <span class="typed"><span class="type">BytecodeGenerator.this.BlockList</span><a href="#166705">bl</a></span>.<span class="typed"><span class="type">=&gt; List[BytecodeGenerator.this.Block]</span><a href="#165973">blocks</a></span>) <span class="typed"><span class="type">(BytecodeGenerator.this.Block)Unit</span><a href="#166330">flatten</a></span>(<span class="typed"><span class="type">BytecodeGenerator.this.Block</span><a href="#166708">b</a></span>)
          <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">BytecodeGenerator.this.CatchBlock</span><a id="166709">cb</a></span>: <span class="typed"><span class="type">BytecodeGenerator.this.CatchBlock</span><a href="#161701">CatchBlock</a></span> =&gt;
            <span class="keyword">for</span> (<span class="typed"><span class="type">((BytecodeGenerator.this.Block) =&gt; Unit)Unit</span><span id="21366"><a id="166712">b</a></span></span> &lt;- <span class="typed"><span class="type">BytecodeGenerator.this.CatchBlock</span><a href="#166709">cb</a></span>.<span class="typed"><span class="type">=&gt; List[BytecodeGenerator.this.Block]</span><a href="#165973">blocks</a></span>) <span class="typed"><span class="type">(BytecodeGenerator.this.Block)Unit</span><a href="#166330">flatten</a></span>(<span class="typed"><span class="type">BytecodeGenerator.this.Block</span><a href="#166712">b</a></span>)
          <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">BytecodeGenerator.this.ExceptionBlock</span><a id="166713">eb</a></span>: <span class="typed"><span class="type">BytecodeGenerator.this.ExceptionBlock</span><a href="#161698">ExceptionBlock</a></span> =&gt;
            <span class="keyword">val</span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a id="166714">handler</a></span> = <span class="typed"><span class="type">BytecodeGenerator.this.ExceptionBlock</span><a href="#166713">eb</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166035">handler</a></span>
            <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="../../Global.scala.html#21157">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting</span><a href="../../Settings.scala.html#30066">debug</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting#T</span><a href="../../Settings.scala.html#30301">value</a></span>) {
              <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;new exception block &quot;)</span><span class="string">&quot;new exception block &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">BytecodeGenerator.this.ExceptionBlock</span><a href="#166713">eb</a></span>)
              <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;try: &quot;)</span><span class="string">&quot;try: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">BytecodeGenerator.this.ExceptionBlock</span><a href="#166713">eb</a></span>.<span class="typed"><span class="type">=&gt; BytecodeGenerator.this.BlockList</span><a href="#166038">tryBlock</a></span>)
            }
            <span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock,BytecodeGenerator.this.ExHInstruction)Unit</span><a href="#166327">addExHInstruction</a></span>(<span class="typed"><span class="type">BytecodeGenerator.this.ExceptionBlock</span><a href="#166713">eb</a></span>.<span class="typed"><span class="type">=&gt; BytecodeGenerator.this.BlockList</span><a href="#166038">tryBlock</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.BasicBlock</span><a href="#165976">firstBasicBlock</a></span>, <span class="typed"><span class="type">BytecodeGenerator.this.BeginExceptionBlock</span><span class="keyword">new</span></span> <span class="typed"><span class="type">BytecodeGenerator.this.BeginExceptionBlock</span><a href="#161678">BeginExceptionBlock</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166714">handler</a></span>))
            <span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock)Unit</span><a href="#166328">omitJump</a></span>(<span class="typed"><span class="type">BytecodeGenerator.this.ExceptionBlock</span><a href="#166713">eb</a></span>.<span class="typed"><span class="type">=&gt; BytecodeGenerator.this.BlockList</span><a href="#166038">tryBlock</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.BasicBlock</span><a href="#165977">lastBasicBlock</a></span>)
            <span class="typed"><span class="type">(BytecodeGenerator.this.Block)Unit</span><a href="#166330">flatten</a></span>(<span class="typed"><span class="type">BytecodeGenerator.this.ExceptionBlock</span><a href="#166713">eb</a></span>.<span class="typed"><span class="type">=&gt; BytecodeGenerator.this.BlockList</span><a href="#166038">tryBlock</a></span>)
            <span class="keyword">for</span> (<span class="typed"><span class="type">((BytecodeGenerator.this.CatchBlock) =&gt; Unit)Unit</span><span id="21366"><a id="166721">c</a></span></span> &lt;- <span class="typed"><span class="type">BytecodeGenerator.this.ExceptionBlock</span><a href="#166713">eb</a></span>.<span class="typed"><span class="type">=&gt; List[BytecodeGenerator.this.CatchBlock]</span><a href="#166041">catchBlocks</a></span>) {
              <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a id="166722">t</a></span>: <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a id="34226">MsilType</a></span> = (<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">BytecodeGenerator.this.CatchBlock</span><a href="#166721">c</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="#166123">exSym</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">object GenMSIL.this.global.NoSymbol</span><a href="../../symtab/Symbols.scala.html#21873">NoSymbol</a></span>) <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="#161569">EXCEPTION</a></span>
                                 <span class="keyword">else</span> <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.Type</span><a href="#161752">getType</a></span>(<span class="typed"><span class="type">BytecodeGenerator.this.CatchBlock</span><a href="#166721">c</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="#166123">exSym</a></span>))
              <span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock,BytecodeGenerator.this.ExHInstruction)Unit</span><a href="#166327">addExHInstruction</a></span>(<span class="typed"><span class="type">BytecodeGenerator.this.CatchBlock</span><a href="#166721">c</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.BasicBlock</span><a href="#165976">firstBasicBlock</a></span>, <span class="typed"><span class="type">BytecodeGenerator.this.BeginCatchBlock</span><span class="keyword">new</span></span> <span class="typed"><span class="type">BytecodeGenerator.this.BeginCatchBlock</span><a href="#161681">BeginCatchBlock</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166714">handler</a></span>, <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a href="#166722">t</a></span>))
              <span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock)Unit</span><a href="#166328">omitJump</a></span>(<span class="typed"><span class="type">BytecodeGenerator.this.CatchBlock</span><a href="#166721">c</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.BasicBlock</span><a href="#165977">lastBasicBlock</a></span>)
              <span class="typed"><span class="type">(BytecodeGenerator.this.Block)Unit</span><a href="#166330">flatten</a></span>(<span class="typed"><span class="type">BytecodeGenerator.this.CatchBlock</span><a href="#166721">c</a></span>)
            }
            <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166714">handler</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.Finalizer</span><a href="../icode/ExceptionHandlers.scala.html#51912">finalizer</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5793">!=</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166714">handler</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.Finalizer</span><a href="../icode/ExceptionHandlers.scala.html#51912">finalizer</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5793">!=</a></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.NoFinalizer</span><a href="../icode/ExceptionHandlers.scala.html#32396">NoFinalizer</a></span>) {
              <span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock,BytecodeGenerator.this.ExHInstruction)Unit</span><a href="#166327">addExHInstruction</a></span>(<span class="typed"><span class="type">BytecodeGenerator.this.ExceptionBlock</span><a href="#166713">eb</a></span>.<span class="typed"><span class="type">=&gt; BytecodeGenerator.this.BlockList</span><a href="#166044">finallyBlock</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.BasicBlock</span><a href="#165976">firstBasicBlock</a></span>, <span class="typed"><span class="type">BytecodeGenerator.this.BeginFinallyBlock</span><span class="keyword">new</span></span> <span class="typed"><span class="type">BytecodeGenerator.this.BeginFinallyBlock</span><a href="#161684">BeginFinallyBlock</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166714">handler</a></span>))
              <span class="typed"><span class="type">(BytecodeGenerator.this.Block)Unit</span><a href="#166330">flatten</a></span>(<span class="typed"><span class="type">BytecodeGenerator.this.ExceptionBlock</span><a href="#166713">eb</a></span>.<span class="typed"><span class="type">=&gt; BytecodeGenerator.this.BlockList</span><a href="#166044">finallyBlock</a></span>)
              <span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock,BytecodeGenerator.this.ExHInstruction)Unit</span><a href="#166327">addExHInstruction</a></span>(<span class="typed"><span class="type">BytecodeGenerator.this.ExceptionBlock</span><a href="#166713">eb</a></span>.<span class="typed"><span class="type">=&gt; BytecodeGenerator.this.BlockList</span><a href="#166044">finallyBlock</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.BasicBlock</span><a href="#165977">lastBasicBlock</a></span>, <span class="typed"><span class="type">BytecodeGenerator.this.EndExceptionBlock</span><span class="keyword">new</span></span> <span class="typed"><span class="type">BytecodeGenerator.this.EndExceptionBlock</span><a href="#161687">EndExceptionBlock</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166714">handler</a></span>))
              <span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock)Unit</span><a href="#166328">omitJump</a></span>(<span class="typed"><span class="type">BytecodeGenerator.this.ExceptionBlock</span><a href="#166713">eb</a></span>.<span class="typed"><span class="type">=&gt; BytecodeGenerator.this.BlockList</span><a href="#166044">finallyBlock</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.BasicBlock</span><a href="#165977">lastBasicBlock</a></span>)
            } <span class="keyword">else</span> {
              <span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock,BytecodeGenerator.this.ExHInstruction)Unit</span><a href="#166327">addExHInstruction</a></span>(<span class="typed"><span class="type">BytecodeGenerator.this.ExceptionBlock</span><a href="#166713">eb</a></span>.<span class="typed"><span class="type">=&gt; List[BytecodeGenerator.this.CatchBlock]</span><a href="#166041">catchBlocks</a></span>.<span class="typed"><span class="type">=&gt; BytecodeGenerator.this.CatchBlock</span><a id="21350">last</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.BasicBlock</span><a href="#165977">lastBasicBlock</a></span>, <span class="typed"><span class="type">BytecodeGenerator.this.EndExceptionBlock</span><span class="keyword">new</span></span> <span class="typed"><span class="type">BytecodeGenerator.this.EndExceptionBlock</span><a href="#161687">EndExceptionBlock</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166714">handler</a></span>))
            }
        }
      }

      <span class="typed"><span class="type">(BytecodeGenerator.this.Block)Unit</span><a href="#166330">flatten</a></span>(<span class="typed"><span class="type">object BytecodeGenerator.this.TopBlock</span><a href="#161704">TopBlock</a></span>)

      <span class="typed"><span class="type">(Boolean,=&gt; Any)Unit</span><span id="6004"><a id="821">assert</a></span></span>(<span class="typed"><span class="type">List[GenMSIL.this.global.icodes.ExceptionHandler]</span><a href="#166324">untreatedHandlers</a></span>.<span class="typed"><span class="type">((GenMSIL.this.global.icodes.ExceptionHandler) =&gt; Boolean)Boolean</span><a id="21372">forall</a></span>((<span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a id="166742">h</a></span>) =&gt; <span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166742">h</a></span>.<span class="typed"><span class="type">=&gt; scala.collection.immutable.Set[GenMSIL.this.global.icodes.BasicBlock]</span><a href="../icode/ExceptionHandlers.scala.html#51920">covered</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a id="25544">isEmpty</a></span>),
             <span class="typed"><span class="type">java.lang.String(&quot;untreated exception handlers left: &quot;)</span><span class="string">&quot;untreated exception handlers left: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.ExceptionHandler]</span><a href="#166324">untreatedHandlers</a></span>)
      <span class="comment">// remove catch blocks from empty handlers (finally-blocks remain)</span>
      <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.ExceptionHandler]</span><a href="#166324">untreatedHandlers</a></span>.<span class="typed"><span class="type">((GenMSIL.this.global.icodes.ExceptionHandler) =&gt; Unit)Unit</span><a id="21366">foreach</a></span>((<span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a id="166746">h</a></span>) =&gt; {
        <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166329">orderedBlocks</a></span> = <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166329">orderedBlocks</a></span> <span class="typed"><span class="type">(List[GenMSIL.this.global.icodes.BasicBlock])List[GenMSIL.this.global.icodes.BasicBlock]</span><a id="21399">--</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166746">h</a></span>.<span class="typed"><span class="type">=&gt; List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="../icode/ExceptionHandlers.scala.html#51925">blocks</a></span>
      })

      <span class="comment">// take care of order in which exHInstructions are executed (BeginExceptionBlock as last)</span>
      <span class="typed"><span class="type">=&gt; scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.BasicBlock,List[BytecodeGenerator.this.ExHInstruction]]</span><a href="#161706">bb2exHInstructions</a></span>.<span class="typed"><span class="type">=&gt; Iterator[GenMSIL.this.global.icodes.BasicBlock]</span><a id="24242">keys</a></span>.<span class="typed"><span class="type">((GenMSIL.this.global.icodes.BasicBlock) =&gt; Unit)Unit</span><a id="32202">foreach</a></span>((<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a id="166750">b</a></span>) =&gt; {
        <span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock)List[BytecodeGenerator.this.ExHInstruction]</span><a href="#161706" id="24239">bb2exHInstructions</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166750">b</a></span>).<span class="typed"><span class="type">((BytecodeGenerator.this.ExHInstruction, BytecodeGenerator.this.ExHInstruction) =&gt; Boolean)List[BytecodeGenerator.this.ExHInstruction]</span><a id="21370">sort</a></span>((<span class="typed"><span class="type">BytecodeGenerator.this.ExHInstruction</span><a id="166755">i1</a></span>, <span class="typed"><span class="type">BytecodeGenerator.this.ExHInstruction</span><a id="166756">i2</a></span>) =&gt; (<span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">BytecodeGenerator.this.ExHInstruction</span><a href="#166755">i1</a></span>.<span class="typed"><span class="type">Boolean</span><a id="3501">isInstanceOf</a></span>[<span class="typed"><span class="type">BytecodeGenerator.this.BeginExceptionBlock</span><a href="#161678">BeginExceptionBlock</a></span>]))
      })


      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="../../Global.scala.html#21157">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting</span><a href="../../Settings.scala.html#30066">debug</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting#T</span><a href="../../Settings.scala.html#30301">value</a></span>){
        <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;after: &quot;)</span><span class="string">&quot;after: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166329">orderedBlocks</a></span>)
        <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot; exhInstr: &quot;)</span><span class="string">&quot; exhInstr: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">=&gt; scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.BasicBlock,List[BytecodeGenerator.this.ExHInstruction]]</span><a href="#161706">bb2exHInstructions</a></span>)
      }

      <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166329">orderedBlocks</a></span>
    }

    <span class="keyword">var</span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><span id="161713"><span id="161711"><span id="161712"><a id="162622">currentBlock</a></span></span></span></span>: <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="../icode/BasicBlocks.scala.html#32337">BasicBlock</a></span> = _
    <span class="keyword">var</span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><span id="161716"><span id="161714"><span id="161715"><a id="162623">lastBlock</a></span></span></span></span>: <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="../icode/BasicBlocks.scala.html#32337">BasicBlock</a></span> = _
    <span class="keyword">var</span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><span id="161719"><span id="161717"><span id="161718"><a id="162624">nextBlock</a></span></span></span></span>: <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="../icode/BasicBlocks.scala.html#32337">BasicBlock</a></span> = _

    <span class="keyword">def</span> <span class="typed"><span class="type">(List[GenMSIL.this.global.icodes.BasicBlock])Unit</span><a id="161720">genBlocks</a></span>(<span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a id="165830">l</a></span>: <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a id="526">List</a></span>[BasicBlock]) {
      <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#165830">l</a></span> <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
        <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object Nil</span><a id="335">Nil</a></span> =&gt; <span class="typed"><span class="type">Unit</span><span >(</span></span>)
        <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a id="166759">x</a></span> <a id="1">::</a> <span class="typed"><span class="type">object Nil</span><a id="335">Nil</a></span> =&gt; <span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock)Unit</span><a href="#161712">currentBlock</a></span> = <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166759">x</a></span>; <span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock)Unit</span><a href="#161718">nextBlock</a></span> = <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>; <span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock)Unit</span><a href="#161726">genBlock</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166759">x</a></span>)
        <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a id="166761">x</a></span> <a id="1">::</a> <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a id="166762">y</a></span> <a id="1">::</a> <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a id="166763">ys</a></span> =&gt; <span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock)Unit</span><a href="#161712">currentBlock</a></span> = <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166761">x</a></span>; <span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock)Unit</span><a href="#161718">nextBlock</a></span> = <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166762">y</a></span>; <span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock)Unit</span><a href="#161726">genBlock</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166761">x</a></span>); <span class="typed"><span class="type">(List[GenMSIL.this.global.icodes.BasicBlock])Unit</span><a href="#161720">genBlocks</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166762">y</a></span> <span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock)List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166764" id="21335">::</a></span> <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#166763">ys</a></span>)
      }
    }

    <span class="keyword">var</span> <span class="typed"><span class="type">Boolean</span><span id="161723"><span id="161721"><span id="161722"><a id="162625">ignoreNextDup</a></span></span></span></span>: <span class="typed"><span class="type">Boolean</span><a id="2170">Boolean</a></span> = <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>
    <span class="keyword">val</span> <span class="typed"><span class="type">scala.collection.mutable.Stack[ch.epfl.lamp.compiler.msil.emit.LocalBuilder]</span><span id="161725"><a id="161724">excResultLocals</a></span></span>: <span class="typed"><span class="type">scala.collection.mutable.Stack[ch.epfl.lamp.compiler.msil.emit.LocalBuilder]</span><a id="20063">Stack</a></span>[LocalBuilder] = <span class="typed"><span class="type">scala.collection.mutable.Stack[ch.epfl.lamp.compiler.msil.emit.LocalBuilder]</span><span class="keyword">new</span></span> <span class="typed"><span class="type">scala.collection.mutable.Stack[ch.epfl.lamp.compiler.msil.emit.LocalBuilder]</span><a id="20063">Stack</a></span>()

    <span class="keyword">def</span> <span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock)Unit</span><a id="161726">genBlock</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a id="166760">b</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="../icode/BasicBlocks.scala.html#32337">BasicBlock</a></span>) {
      <span class="comment">// at begin of the first block, there's nothing to save =&gt;</span>
      <span class="comment">//  lastBlock != null is secure</span>
      <span class="keyword">def</span> <span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.Type)Unit</span><a id="166768">saveResult</a></span>(<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a id="166770">resType</a></span>: <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a id="34226">MsilType</a></span>) = <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a href="#166770">resType</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5793">!=</a></span> <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35351">MVOID</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.BasicBlock</span><a href="#161714">lastBlock</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5793">!=</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>) {
        <span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.BasicBlock</span><a href="#161714">lastBlock</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.Instruction</span><a href="../icode/BasicBlocks.scala.html#33214">lastInstruction</a></span> <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
          <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">THROW</a>() =&gt; <span class="typed"><span class="type">Unit</span><span >(</span></span>)
          <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> _ =&gt;
            <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.LocalBuilder</span><a id="166774">lb</a></span>: <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.LocalBuilder</span><a id="83534">LocalBuilder</a></span> = <span class="typed"><span class="type">=&gt; scala.collection.mutable.Stack[ch.epfl.lamp.compiler.msil.emit.LocalBuilder]</span><a href="#161724">excResultLocals</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.LocalBuilder</span><a id="108639">top</a></span>
            <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.emit.LocalBuilder)Unit</span><a id="162531">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165611">Stloc</a></span>, <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.LocalBuilder</span><a href="#166774">lb</a></span>)
        }
      }

      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.BasicBlock,List[BytecodeGenerator.this.ExHInstruction]]</span><a href="#161706">bb2exHInstructions</a></span>.<span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock)Boolean</span><a id="24240">contains</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166760">b</a></span>)){
        <span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock)List[BytecodeGenerator.this.ExHInstruction]</span><a href="#161706" id="24239">bb2exHInstructions</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166760">b</a></span>).<span class="typed"><span class="type">((BytecodeGenerator.this.ExHInstruction) =&gt; Unit)Unit</span><a id="21366">foreach</a></span>((<span class="typed"><span class="type">BytecodeGenerator.this.ExHInstruction</span><a id="166788">i</a></span>) =&gt; <span class="typed"><span class="type">BytecodeGenerator.this.ExHInstruction</span><a href="#166788">i</a></span> <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
          <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">BeginExceptionBlock</a>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a id="166789">handler</a></span>) =&gt;
            <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="../../Global.scala.html#21157">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting</span><a href="../../Settings.scala.html#30066">debug</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting#T</span><a href="../../Settings.scala.html#30301">value</a></span>) <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;begin ex blk: &quot;)</span><span class="string">&quot;begin ex blk: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166789">handler</a></span>)
            <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">()Unit</span><a id="162552">BeginExceptionBlock</a></span>()
            <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a id="166790">resType</a></span> = <span class="typed"><span class="type">(GenMSIL.this.global.icodes.TypeKind)ch.epfl.lamp.compiler.msil.Type</span><a href="#161749">msilType</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166789">handler</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.TypeKind</span><a href="../icode/ExceptionHandlers.scala.html#51915">resultKind</a></span>)
            <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a href="#166790">resType</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5793">!=</a></span> <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35351">MVOID</a></span>) {
              <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.LocalBuilder</span><a id="166795">l</a></span> = <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.Type)ch.epfl.lamp.compiler.msil.emit.LocalBuilder</span><a id="162547">DeclareLocal</a></span>(<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a href="#166790">resType</a></span>)
              <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.LocalBuilder</span><a href="#166795">l</a></span>.<span class="typed"><span class="type">(String)Unit</span><a id="162638">SetLocalSymInfo</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;$exhResult&quot;)</span><span class="string">&quot;$exhResult&quot;</span></span>)
              <span class="typed"><span class="type">=&gt; scala.collection.mutable.Stack[ch.epfl.lamp.compiler.msil.emit.LocalBuilder]</span><a href="#161724">excResultLocals</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.LocalBuilder*)Unit</span><a id="108638">push</a></span>(<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.LocalBuilder</span><a href="#166795">l</a></span>)
            }
          <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">BeginCatchBlock</a>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a id="166796">handler</a></span>, <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a id="166797">exType</a></span>) =&gt;
            <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="../../Global.scala.html#21157">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting</span><a href="../../Settings.scala.html#30066">debug</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting#T</span><a href="../../Settings.scala.html#30301">value</a></span>) <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;begin catch blk: &quot;)</span><span class="string">&quot;begin catch blk: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166796">handler</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;, tpe: &quot;)</span><span class="string">&quot;, tpe: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a href="#166797">exType</a></span>)
            <span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.Type)Unit</span><a href="#166768">saveResult</a></span>(<span class="typed"><span class="type">(GenMSIL.this.global.icodes.TypeKind)ch.epfl.lamp.compiler.msil.Type</span><a href="#161749">msilType</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166796">handler</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.TypeKind</span><a href="../icode/ExceptionHandlers.scala.html#51915">resultKind</a></span>))
            <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.Type)Unit</span><a id="162553">BeginCatchBlock</a></span>(<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a href="#166797">exType</a></span>)
          <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">BeginFinallyBlock</a>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a id="166801">handler</a></span>) =&gt;
            <span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.Type)Unit</span><a href="#166768">saveResult</a></span>(<span class="typed"><span class="type">(GenMSIL.this.global.icodes.TypeKind)ch.epfl.lamp.compiler.msil.Type</span><a href="#161749">msilType</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#166801">handler</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.TypeKind</span><a href="../icode/ExceptionHandlers.scala.html#51915">resultKind</a></span>))
            <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">()Unit</span><a id="162555">BeginFinallyBlock</a></span>()
          <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">EndExceptionBlock</a>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a id="166803">handler</a></span>) =&gt; <span class="typed"><span class="type">Unit</span><span >(</span></span>)
          <span class="typed"><span class="type">Nothing</span><span class="keyword">case</span></span> _ =&gt; <span class="typed"><span class="type">(String)Nothing</span><a href="../../Global.scala.html#21214">abort</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;unknown case: &quot;)</span><span class="string">&quot;unknown case: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">BytecodeGenerator.this.ExHInstruction</span><a href="#166788">i</a></span>)
        })
      }

      <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.Label)Unit</span><a id="162549">MarkLabel</a></span>(<span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock)ch.epfl.lamp.compiler.msil.emit.Label</span><a href="#161731" id="24239">labels</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166760">b</a></span>))
      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="../../Global.scala.html#21157">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting</span><a href="../../Settings.scala.html#30066">debug</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting#T</span><a href="../../Settings.scala.html#30301">value</a></span>)
        <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;Generating code for block: &quot;)</span><span class="string">&quot;Generating code for block: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166760">b</a></span>)

      <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="166769">lastLineNr</a></span>: <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span> = <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>

      <span class="keyword">for</span> (<span class="typed"><span class="type">((GenMSIL.this.global.icodes.Instruction) =&gt; Unit)Unit</span><a href="../icode/BasicBlocks.scala.html#33193" id="166810">instr</a></span> &lt;- <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166760">b</a></span>) {

        <span class="typed"><span class="type">(Boolean)Unit</span><a href="#161674">needAdditionalRet</a></span> = <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>

	    <span class="keyword">val</span> <span class="typed"><span class="type">Int</span><a id="166811">currentLineNr</a></span> = (<span class="typed"><span class="type">GenMSIL.this.global.icodes.Instruction</span><a href="#166810">instr</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.util.Position</span><a href="../icode/Opcodes.scala.html#33393">pos</a></span>).<span class="typed"><span class="type">=&gt; Option[Int]</span><a href="../../util/Position.scala.html#25343">line</a></span> <span class="typed"><span class="type">Int</span><span class="keyword">match</span></span> {
          <span class="typed"><span class="type">Int</span><span class="keyword">case</span></span> <a id="1">Some</a>(<span class="typed"><span class="type">Int</span><a id="166812">line</a></span>) =&gt; <span class="typed"><span class="type">Int</span><a href="#166812">line</a></span>
          <span class="typed"><span class="type">Int</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object None</span><a id="536">None</a></span> =&gt;
            <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;Warning: wrong position in: &quot;)</span><span class="string">&quot;Warning: wrong position in: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.IMethod</span><a href="#161632">method</a></span>)
          <span class="typed"><span class="type">Int</span><a href="#166769">lastLineNr</a></span>
        } <span class="comment">// if getting line number fails</span>

        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#166811">currentLineNr</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3142">!=</a></span> <span class="typed"><span class="type">Int</span><a href="#166769">lastLineNr</a></span>) {
          <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(Int)Unit</span><a id="162557">setPosition</a></span>(<span class="typed"><span class="type">Int</span><a href="#166811">currentLineNr</a></span>)
          <span class="typed"><span class="type">Int</span><a href="#166769">lastLineNr</a></span> = <span class="typed"><span class="type">Int</span><a href="#166811">currentLineNr</a></span>
        }

        <span class="typed"><span class="type">GenMSIL.this.global.icodes.Instruction</span><a href="#166810">instr</a></span> <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
          <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">THIS</a>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a id="166815">clasz</a></span>) =&gt;
            <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165213">Ldarg_0</a></span>)

          <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">CONSTANT</a>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Constant</span><a id="166817">const</a></span>) =&gt;
            <span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Constant</span><a href="#166817">const</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a href="../../symtab/Constants.scala.html#37590">tag</a></span> <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
              <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Int(1)</span><span >UnitTag</span></span>    =&gt; <span class="typed"><span class="type">Unit</span><span >(</span></span>)
              <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Int(2)</span><span >BooleanTag</span></span> =&gt; <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.OpCode</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Constant</span><a href="#166817">const</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../../symtab/Constants.scala.html#37594">booleanValue</a></span>) <span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165255">Ldc_I4_1</a></span>
                                            <span class="keyword">else</span> <span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165253">Ldc_I4_0</a></span>)
              <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Int(3)</span><span >ByteTag</span></span>    =&gt; <span class="typed"><span class="type">(Int,ch.epfl.lamp.compiler.msil.emit.ILGenerator)Unit</span><a href="#161728">loadI4</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Constant</span><a href="#166817">const</a></span>.<span class="typed"><span class="type">implicit scala.Predef.byte2int : (Byte)Int</span><span id="6200"><a href="../../symtab/Constants.scala.html#37595" id="821">byteValue</a></span></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>)
              <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Int(4)</span><span >ShortTag</span></span>   =&gt; <span class="typed"><span class="type">(Int,ch.epfl.lamp.compiler.msil.emit.ILGenerator)Unit</span><a href="#161728">loadI4</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Constant</span><a href="#166817">const</a></span>.<span class="typed"><span class="type">implicit scala.Predef.short2int : (Short)Int</span><span id="6204"><a href="../../symtab/Constants.scala.html#37596" id="821">shortValue</a></span></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>)
              <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Int(5)</span><span >CharTag</span></span>    =&gt; <span class="typed"><span class="type">(Int,ch.epfl.lamp.compiler.msil.emit.ILGenerator)Unit</span><a href="#161728">loadI4</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Constant</span><a href="#166817">const</a></span>.<span class="typed"><span class="type">implicit scala.Predef.char2int : (Char)Int</span><span id="6208"><a href="../../symtab/Constants.scala.html#37597" id="821">charValue</a></span></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>)
              <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Int(6)</span><span >IntTag</span></span>     =&gt; <span class="typed"><span class="type">(Int,ch.epfl.lamp.compiler.msil.emit.ILGenerator)Unit</span><a href="#161728">loadI4</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Constant</span><a href="#166817">const</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a href="../../symtab/Constants.scala.html#37598">intValue</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>)
              <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Int(7)</span><span >LongTag</span></span>    =&gt; <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,Long)Unit</span><a id="162536">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165275">Ldc_I8</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Constant</span><a href="#166817">const</a></span>.<span class="typed"><span class="type">=&gt; Long</span><a href="../../symtab/Constants.scala.html#37599">longValue</a></span>)
              <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Int(8)</span><span >FloatTag</span></span>   =&gt; <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,Float)Unit</span><a id="162540">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165277">Ldc_R4</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Constant</span><a href="#166817">const</a></span>.<span class="typed"><span class="type">=&gt; Float</span><a href="../../symtab/Constants.scala.html#37600">floatValue</a></span>)
              <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Int(9)</span><span >DoubleTag</span></span>  =&gt; <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,Double)Unit</span><a id="162532">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165279">Ldc_R8</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Constant</span><a href="#166817">const</a></span>.<span class="typed"><span class="type">=&gt; Double</span><a href="../../symtab/Constants.scala.html#37601">doubleValue</a></span>)
              <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Int(10)</span><span >StringTag</span></span>  =&gt; <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,String)Unit</span><a id="162541">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165433">Ldstr</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Constant</span><a href="#166817">const</a></span>.<span class="typed"><span class="type">=&gt; String</span><a href="../../symtab/Constants.scala.html#37603">stringValue</a></span>)
              <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Int(11)</span><span >NullTag</span></span>    =&gt; <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165249">Ldnull</a></span>)
              <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Int(12)</span><span >ClassTag</span></span>   =&gt;
                <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.Type)Unit</span><a id="162542">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165551">Ldtoken</a></span>, <span class="typed"><span class="type">(GenMSIL.this.global.Type)ch.epfl.lamp.compiler.msil.Type</span><a href="#161750">msilType</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Constant</span><a href="#166817">const</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Type</span><a href="../../symtab/Constants.scala.html#37605">typeValue</a></span>))
                <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.MethodInfo)Unit</span><a id="162539">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165287">Call</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.MethodInfo</span><a href="#161589">TYPE_FROM_HANDLE</a></span>)
              <span class="typed"><span class="type">Nothing</span><span class="keyword">case</span></span> _          =&gt; <span class="typed"><span class="type">(String)Nothing</span><a href="../../Global.scala.html#21214">abort</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;Unknown constant value: &quot;)</span><span class="string">&quot;Unknown constant value: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Constant</span><a href="#166817">const</a></span>)
            }

          <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">LOAD_ARRAY_ITEM</a>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.TypeKind</span><a id="166871">kind</a></span>) =&gt;
            (<span class="typed"><span class="type">GenMSIL.this.global.icodes.TypeKind</span><a href="#166871">kind</a></span>: @<span class="typed"><span class="type">GenMSIL.this.global.icodes.TypeKind @unchecked</span><a href="../icode/TypeKinds.scala.html#32353">unchecked</a></span>) <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
              <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.BOOL</span><a href="../icode/TypeKinds.scala.html#32357">BOOL</a></span>           =&gt; <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165491">Ldelem_I1</a></span>)
              <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.BYTE</span><a href="../icode/TypeKinds.scala.html#32359">BYTE</a></span>           =&gt; <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165505">Ldelem_U1</a></span>)
              <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.SHORT</span><a href="../icode/TypeKinds.scala.html#32361">SHORT</a></span>          =&gt; <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165493">Ldelem_I2</a></span>)
              <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.CHAR</span><a href="../icode/TypeKinds.scala.html#32363">CHAR</a></span>           =&gt; <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165507">Ldelem_U2</a></span>)
              <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.INT</span><a href="../icode/TypeKinds.scala.html#32365">INT</a></span>            =&gt; <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165495">Ldelem_I4</a></span>)
              <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.LONG</span><a href="../icode/TypeKinds.scala.html#32367">LONG</a></span>           =&gt; <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165497">Ldelem_I8</a></span>)
              <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.FLOAT</span><a href="../icode/TypeKinds.scala.html#32369">FLOAT</a></span>          =&gt; <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165499">Ldelem_R4</a></span>)
              <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.DOUBLE</span><a href="../icode/TypeKinds.scala.html#32371">DOUBLE</a></span>         =&gt; <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165501">Ldelem_R8</a></span>)
              <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">REFERENCE</a>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a id="166880">cls</a></span>) =&gt; <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165503">Ldelem_Ref</a></span>)

              <span class="comment">// case ARRAY(elem) is not possible, for Array[Array[Int]], the</span>
              <span class="comment">//  load will be case REFERENCE(java.lang.Object)</span>

              <span class="comment">// case UNIT is not possible: an Array[Unit] will be an</span>
              <span class="comment">//  Array[scala.runtime.BoxedUnit] (-&gt; case REFERENCE)</span>
            }

          <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">LOAD_LOCAL</a>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.Local</span><a id="166882">local</a></span>) =&gt;
            <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="../../Global.scala.html#21157">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting</span><a href="../../Settings.scala.html#30066">debug</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting#T</span><a href="../../Settings.scala.html#30301">value</a></span>)
              <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;load_local for &quot;)</span><span class="string">&quot;load_local for &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.Local</span><a href="#166882">local</a></span>)
            <span class="keyword">val</span> <span class="typed"><span class="type">Boolean</span><a id="166883">isArg</a></span>: <span class="typed"><span class="type">Boolean</span><a id="2170">Boolean</a></span> = <span class="typed"><span class="type">GenMSIL.this.global.icodes.Local</span><a href="#166882">local</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../icode/Members.scala.html#33250">arg</a></span>
            <span class="keyword">val</span> <span class="typed"><span class="type">Int</span><a id="166884">i</a></span> = <span class="typed"><span class="type">GenMSIL.this.global.icodes.Local</span><a href="#166882">local</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a href="../icode/Members.scala.html#33253">index</a></span>
            <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Boolean</span><a href="#166883">isArg</a></span>) {
              <span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.ILGenerator)(Int)Unit</span><a href="#161729">loadArg</a></span>(<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>)(<span class="typed"><span class="type">Int</span><a href="#166884">i</a></span>)
            }
            <span class="keyword">else</span> {
              <span class="typed"><span class="type">(Int,GenMSIL.this.global.icodes.Local,ch.epfl.lamp.compiler.msil.emit.ILGenerator)Unit</span><a href="#161730">loadLocal</a></span>(<span class="typed"><span class="type">Int</span><a href="#166884">i</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.icodes.Local</span><a href="#166882">local</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>)
            }

          <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">LOAD_FIELD</a>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a id="166944">field</a></span>, <span class="typed"><span class="type">Boolean</span><a id="166945">isStatic</a></span>) =&gt;
            <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="../../Global.scala.html#21157">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting</span><a href="../../Settings.scala.html#30066">debug</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting#T</span><a href="../../Settings.scala.html#30301">value</a></span>)
              <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;LOAD_FIELD with owner: &quot;)</span><span class="string">&quot;LOAD_FIELD with owner: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#166944">field</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Symbol</span><a href="../../symtab/Symbols.scala.html#25211">owner</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span>
                  <span class="typed"><span class="type">java.lang.String(&quot; flags: &quot;)</span><span class="string">&quot; flags: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">object scala.tools.nsc.symtab.Flags</span><a href="../../symtab/Flags.scala.html#9658">Flags</a></span>.<span class="typed"><span class="type">(Long)String</span><a href="../../symtab/Flags.scala.html#20637">flagsToString</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#166944">field</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Symbol</span><a href="../../symtab/Symbols.scala.html#25211">owner</a></span>.<span class="typed"><span class="type">=&gt; Long</span><a href="../../symtab/Symbols.scala.html#25218">flags</a></span>))

            <span class="keyword">var</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.FieldInfo</span><a id="166946">fieldInfo</a></span>: <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.FieldInfo</span><a id="34343">FieldInfo</a></span> = <span class="typed"><span class="type">=&gt; scala.collection.mutable.Map[GenMSIL.this.global.loaders.clrTypes.global.Symbol,ch.epfl.lamp.compiler.msil.FieldInfo]</span><a href="../../symtab/clr/CLRTypes.scala.html#35393">fields</a></span>.<span class="typed"><span class="type">(GenMSIL.this.global.loaders.clrTypes.global.Symbol)Option[ch.epfl.lamp.compiler.msil.FieldInfo]</span><a id="24235">get</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#166944">field</a></span>.<span class="typed"><span class="type">GenMSIL.this.global.loaders.clrTypes.global.Symbol</span><a id="3503">asInstanceOf</a></span>[clrTypes.global.<span class="typed"><span class="type">GenMSIL.this.global.loaders.clrTypes.global.Symbol</span><a href="../../symtab/Symbols.scala.html#21866">Symbol</a></span>]) <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.FieldInfo</span><span class="keyword">match</span></span> {
              <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.FieldInfo</span><span class="keyword">case</span></span> <a id="1">Some</a>(<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.FieldInfo</span><a id="166950">fInfo</a></span>) =&gt; <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.FieldInfo</span><a href="#166950">fInfo</a></span>
              <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.FieldInfo</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object None</span><a id="536">None</a></span> =&gt;
                <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.FieldInfo</span><a id="166951">fInfo</a></span> = <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.Type</span><a href="#161752">getType</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#166944">field</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Symbol</span><a href="../../symtab/Symbols.scala.html#25211">owner</a></span>).<span class="typed"><span class="type">(java.lang.String)ch.epfl.lamp.compiler.msil.FieldInfo</span><a id="35237">GetField</a></span>(<span class="typed"><span class="type">(GenMSIL.this.global.Symbol)String</span><a href="#161737">msilName</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#166944">field</a></span>))
                <span class="typed"><span class="type">=&gt; scala.collection.mutable.Map[GenMSIL.this.global.loaders.clrTypes.global.Symbol,ch.epfl.lamp.compiler.msil.FieldInfo]</span><a href="../../symtab/clr/CLRTypes.scala.html#35393">fields</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#166944">field</a></span>.<span class="typed"><span class="type">GenMSIL.this.global.loaders.clrTypes.global.Symbol</span><a id="3503">asInstanceOf</a></span>[clrTypes.global.<span class="typed"><span class="type">GenMSIL.this.global.loaders.clrTypes.global.Symbol</span><a href="../../symtab/Symbols.scala.html#21866">Symbol</a></span>]) = <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.FieldInfo</span><a href="#166951">fInfo</a></span>
                <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.FieldInfo</span><a href="#166951">fInfo</a></span>
            }
            <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.FieldInfo)Unit</span><a id="162533">Emit</a></span>(<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.OpCode</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Boolean</span><a href="#166945">isStatic</a></span>) <span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165451">Ldsfld</a></span> <span class="keyword">else</span> <span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165447">Ldfld</a></span>, <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.FieldInfo</span><a href="#166946">fieldInfo</a></span>)


          <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">LOAD_MODULE</a>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a id="166961">module</a></span>) =&gt;
            <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="../../Global.scala.html#21157">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting</span><a href="../../Settings.scala.html#30066">debug</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting#T</span><a href="../../Settings.scala.html#30301">value</a></span>)
              <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;Generating LOAD_MODULE for: &quot;)</span><span class="string">&quot;Generating LOAD_MODULE for: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)String</span><a href="#161784">showsym</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#166961">module</a></span>))
            <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.FieldInfo)Unit</span><a id="162533">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165451">Ldsfld</a></span>, <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.FieldInfo</span><a href="#161761">getModuleInstanceField</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#166961">module</a></span>))

          <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">STORE_ARRAY_ITEM</a>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.TypeKind</span><a id="166973">kind</a></span>) =&gt;
            (<span class="typed"><span class="type">GenMSIL.this.global.icodes.TypeKind</span><a href="#166973">kind</a></span>: @<span class="typed"><span class="type">GenMSIL.this.global.icodes.TypeKind @unchecked</span><a href="../icode/TypeKinds.scala.html#32353">unchecked</a></span>) <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
              <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.BOOL</span><a href="../icode/TypeKinds.scala.html#32357">BOOL</a></span>           =&gt; <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165513">Stelem_I1</a></span>)
              <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.BYTE</span><a href="../icode/TypeKinds.scala.html#32359">BYTE</a></span>           =&gt; <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165513">Stelem_I1</a></span>)
              <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.SHORT</span><a href="../icode/TypeKinds.scala.html#32361">SHORT</a></span>          =&gt; <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165515">Stelem_I2</a></span>)
              <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.CHAR</span><a href="../icode/TypeKinds.scala.html#32363">CHAR</a></span>           =&gt; <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165515">Stelem_I2</a></span>)
              <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.INT</span><a href="../icode/TypeKinds.scala.html#32365">INT</a></span>            =&gt; <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165517">Stelem_I4</a></span>)
              <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.LONG</span><a href="../icode/TypeKinds.scala.html#32367">LONG</a></span>           =&gt; <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165519">Stelem_I8</a></span>)
              <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.FLOAT</span><a href="../icode/TypeKinds.scala.html#32369">FLOAT</a></span>          =&gt; <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165521">Stelem_R4</a></span>)
              <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.DOUBLE</span><a href="../icode/TypeKinds.scala.html#32371">DOUBLE</a></span>         =&gt; <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165523">Stelem_R8</a></span>)
              <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">REFERENCE</a>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a id="166982">cls</a></span>) =&gt; <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165525">Stelem_Ref</a></span>)

              <span class="comment">// case UNIT / ARRRAY are not possible (see comment at LOAD_ARRAY_ITEM)</span>
            }

          <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">STORE_LOCAL</a>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.Local</span><a id="166984">local</a></span>) =&gt;
            <span class="keyword">val</span> <span class="typed"><span class="type">Boolean</span><a id="166985">isArg</a></span>: <span class="typed"><span class="type">Boolean</span><a id="2170">Boolean</a></span> = <span class="typed"><span class="type">GenMSIL.this.global.icodes.Local</span><a href="#166984">local</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../icode/Members.scala.html#33250">arg</a></span>
            <span class="keyword">val</span> <span class="typed"><span class="type">Int</span><a id="166986">i</a></span> = <span class="typed"><span class="type">GenMSIL.this.global.icodes.Local</span><a href="#166984">local</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a href="../icode/Members.scala.html#33253">index</a></span>
            <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="../../Global.scala.html#21157">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting</span><a href="../../Settings.scala.html#30066">debug</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting#T</span><a href="../../Settings.scala.html#30301">value</a></span>)
              <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;store_local for &quot;)</span><span class="string">&quot;store_local for &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.Local</span><a href="#166984">local</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;, index &quot;)</span><span class="string">&quot;, index &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">Int</span><a href="#166986">i</a></span>)

            <span class="comment">// there are some locals defined by the compiler that</span>
            <span class="comment">// are isArg and are need to be stored.</span>
            <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Boolean</span><a href="#166985">isArg</a></span>) {
              <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#166986">i</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3146">&gt;=</a></span> -<span class="typed"><span class="type">Int(-128)</span><span class="int">128</span></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">Int</span><a href="#166986">i</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3144">&lt;=</a></span> <span class="typed"><span class="type">Int(127)</span><span class="int">127</span></span>)
                <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,Int)Unit</span><a id="162535">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165245">Starg_S</a></span>, <span class="typed"><span class="type">Int</span><a href="#166986">i</a></span>)
              <span class="keyword">else</span>
                <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,Int)Unit</span><a id="162535">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165609">Starg</a></span>, <span class="typed"><span class="type">Int</span><a href="#166986">i</a></span>)
            } <span class="keyword">else</span> {
              <span class="typed"><span class="type">Int</span><a href="#166986">i</a></span> <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
                <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span> =&gt; <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165229">Stloc_0</a></span>)
                <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span> =&gt; <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165231">Stloc_1</a></span>)
                <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Int(2)</span><span class="int">2</span></span> =&gt; <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165233">Stloc_2</a></span>)
                <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Int(3)</span><span class="int">3</span></span> =&gt; <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165235">Stloc_3</a></span>)
                <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> _      =&gt;
                  <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#166986">i</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3146">&gt;=</a></span> -<span class="typed"><span class="type">Int(-128)</span><span class="int">128</span></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">Int</span><a href="#166986">i</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3144">&lt;=</a></span> <span class="typed"><span class="type">Int(127)</span><span class="int">127</span></span>)
                    <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.emit.LocalBuilder)Unit</span><a id="162531">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165247">Stloc_S</a></span>, <span class="typed"><span class="type">(GenMSIL.this.global.icodes.Local)ch.epfl.lamp.compiler.msil.emit.LocalBuilder</span><a href="#161746" id="24239">localBuilders</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.Local</span><a href="#166984">local</a></span>))
                  <span class="keyword">else</span>
                    <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.emit.LocalBuilder)Unit</span><a id="162531">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165611">Stloc</a></span>, <span class="typed"><span class="type">(GenMSIL.this.global.icodes.Local)ch.epfl.lamp.compiler.msil.emit.LocalBuilder</span><a href="#161746" id="24239">localBuilders</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.Local</span><a href="#166984">local</a></span>))
              }
            }

          <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">STORE_THIS</a>(_) =&gt;
            <span class="comment">// this only works for impl classes because the self parameter comes first</span>
            <span class="comment">// in the method signature. If that changes, this code has to be revisited.</span>
            <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,Int)Unit</span><a id="162535">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165245">Starg_S</a></span>, <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>)
            
          <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">STORE_FIELD</a>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a id="167043">field</a></span>, <span class="typed"><span class="type">Boolean</span><a id="167044">isStatic</a></span>) =&gt;
            <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.FieldInfo</span><a id="167045">fieldInfo</a></span>: <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.FieldInfo</span><a id="34343">FieldInfo</a></span> = <span class="typed"><span class="type">=&gt; scala.collection.mutable.Map[GenMSIL.this.global.loaders.clrTypes.global.Symbol,ch.epfl.lamp.compiler.msil.FieldInfo]</span><a href="../../symtab/clr/CLRTypes.scala.html#35393">fields</a></span>.<span class="typed"><span class="type">(GenMSIL.this.global.loaders.clrTypes.global.Symbol)Option[ch.epfl.lamp.compiler.msil.FieldInfo]</span><a id="24235">get</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#167043">field</a></span>.<span class="typed"><span class="type">GenMSIL.this.global.loaders.clrTypes.global.Symbol</span><a id="3503">asInstanceOf</a></span>[clrTypes.global.<span class="typed"><span class="type">GenMSIL.this.global.loaders.clrTypes.global.Symbol</span><a href="../../symtab/Symbols.scala.html#21866">Symbol</a></span>]) <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.FieldInfo</span><span class="keyword">match</span></span> {
              <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.FieldInfo</span><span class="keyword">case</span></span> <a id="1">Some</a>(<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.FieldInfo</span><a id="167046">fInfo</a></span>) =&gt; <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.FieldInfo</span><a href="#167046">fInfo</a></span>
              <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.FieldInfo</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object None</span><a id="536">None</a></span> =&gt;
                <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.FieldInfo</span><a id="167047">fInfo</a></span> = <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.Type</span><a href="#161752">getType</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#167043">field</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Symbol</span><a href="../../symtab/Symbols.scala.html#25211">owner</a></span>).<span class="typed"><span class="type">(java.lang.String)ch.epfl.lamp.compiler.msil.FieldInfo</span><a id="35237">GetField</a></span>(<span class="typed"><span class="type">(GenMSIL.this.global.Symbol)String</span><a href="#161737">msilName</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#167043">field</a></span>))
                <span class="typed"><span class="type">=&gt; scala.collection.mutable.Map[GenMSIL.this.global.loaders.clrTypes.global.Symbol,ch.epfl.lamp.compiler.msil.FieldInfo]</span><a href="../../symtab/clr/CLRTypes.scala.html#35393">fields</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#167043">field</a></span>.<span class="typed"><span class="type">GenMSIL.this.global.loaders.clrTypes.global.Symbol</span><a id="3503">asInstanceOf</a></span>[clrTypes.global.<span class="typed"><span class="type">GenMSIL.this.global.loaders.clrTypes.global.Symbol</span><a href="../../symtab/Symbols.scala.html#21866">Symbol</a></span>]) = <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.FieldInfo</span><a href="#167047">fInfo</a></span>
                <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.FieldInfo</span><a href="#167047">fInfo</a></span>
            }
            <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.FieldInfo)Unit</span><a id="162533">Emit</a></span>(<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.OpCode</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Boolean</span><a href="#167044">isStatic</a></span>) <span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165457">Stsfld</a></span> <span class="keyword">else</span> <span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165455">Stfld</a></span>, <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.FieldInfo</span><a href="#167045">fieldInfo</a></span>)


          <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">CALL_PRIMITIVE</a>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.Primitive</span><a id="167057">primitive</a></span>) =&gt;
            <span class="typed"><span class="type">(GenMSIL.this.global.icodes.Primitive,scala.tools.nsc.util.Position)Unit</span><a href="#161727">genPrimitive</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.Primitive</span><a href="#167057">primitive</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.icodes.Instruction</span><a href="#166810">instr</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.util.Position</span><a href="../icode/Opcodes.scala.html#33393">pos</a></span>)


          <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">CALL_METHOD</a>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a id="167060">msym</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.icodes.opcodes.InvokeStyle</span><a id="167061">style</a></span>) =&gt;
            <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#167060">msym</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../../symtab/Symbols.scala.html#25146">isClassConstructor</a></span>) {
              <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.ConstructorInfo</span><a id="167062">constructorInfo</a></span>: <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.ConstructorInfo</span><a id="34250">ConstructorInfo</a></span> = <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.ConstructorInfo</span><a href="#161774">getConstructor</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#167060">msym</a></span>)
              (<span class="typed"><span class="type">GenMSIL.this.global.icodes.opcodes.InvokeStyle</span><a href="#167061">style</a></span>: @<span class="typed"><span class="type">GenMSIL.this.global.icodes.opcodes.InvokeStyle @unchecked</span><a href="../icode/Opcodes.scala.html#32598">unchecked</a></span>) <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
                <span class="comment">// normal constructor calls are Static..</span>
                <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">Static</a>(_) =&gt;
                  <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.IMethod</span><a href="#161632">method</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Symbol</span><a href="../icode/Members.scala.html#32864">symbol</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../../symtab/Symbols.scala.html#25146">isClassConstructor</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.IMethod</span><a href="#161632">method</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Symbol</span><a href="../icode/Members.scala.html#32864">symbol</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Symbol</span><a href="../../symtab/Symbols.scala.html#25211">owner</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#167060">msym</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Symbol</span><a href="../../symtab/Symbols.scala.html#25211">owner</a></span>)
                    <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.ConstructorInfo)Unit</span><a id="162530">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165287">Call</a></span>, <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.ConstructorInfo</span><a href="#167062">constructorInfo</a></span>)
                  <span class="keyword">else</span>
                    <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.ConstructorInfo)Unit</span><a id="162530">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165435">Newobj</a></span>, <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.ConstructorInfo</span><a href="#167062">constructorInfo</a></span>)
                <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">SuperCall</a>(_) =&gt;
                  <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.ConstructorInfo)Unit</span><a id="162530">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165287">Call</a></span>, <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.ConstructorInfo</span><a href="#167062">constructorInfo</a></span>)
                  <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">(GenMSIL.this.global.Symbol)Boolean</span><a href="#161758">isStaticModule</a></span>(<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.IClass</span><a href="#161629">clasz</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Symbol</span><a href="../icode/Members.scala.html#32681">symbol</a></span>) <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span>
                     <span class="typed"><span class="type">=&gt; scala.collection.mutable.HashSet[GenMSIL.this.global.Symbol]</span><a href="#161744">notInitializedModules</a></span>.<span class="typed"><span class="type">(GenMSIL.this.global.Symbol)Boolean</span><a id="25498">contains</a></span>(<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.IClass</span><a href="#161629">clasz</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Symbol</span><a href="../icode/Members.scala.html#32681">symbol</a></span>))
                    {
                      <span class="typed"><span class="type">=&gt; scala.collection.mutable.HashSet[GenMSIL.this.global.Symbol]</span><a href="#161744">notInitializedModules</a></span> <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)Unit</span><a id="25500">-=</a></span> <span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.IClass</span><a href="#161629">clasz</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Symbol</span><a href="../icode/Members.scala.html#32681">symbol</a></span>
                      <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165213">Ldarg_0</a></span>)
                      <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.FieldInfo)Unit</span><a id="162533">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165457">Stsfld</a></span>, <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.FieldInfo</span><a href="#161761">getModuleInstanceField</a></span>(<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.IClass</span><a href="#161629">clasz</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Symbol</span><a href="../icode/Members.scala.html#32681">symbol</a></span>))
                    }
              }

            } <span class="keyword">else</span> {
              <span class="comment">// java.lang.String.substring(int start_incl, int end_excl)</span>
              <span class="comment">// System.String.Substring(int start_incl, int length)</span>
              <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#167060">msym</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="#161597">JSTRING_SUBSTRING_INT_INT</a></span>) {
                <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.LocalBuilder</span><a id="167107">endLocal</a></span> = <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.Type)ch.epfl.lamp.compiler.msil.emit.LocalBuilder</span><a id="162547">DeclareLocal</a></span>(<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35330">MINT</a></span>)
                <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.LocalBuilder</span><a href="#167107">endLocal</a></span>.<span class="typed"><span class="type">(String)Unit</span><a id="162638">SetLocalSymInfo</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;$substring_end&quot;)</span><span class="string">&quot;$substring_end&quot;</span></span>)
                <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.emit.LocalBuilder)Unit</span><a id="162531">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165611">Stloc</a></span>, <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.LocalBuilder</span><a href="#167107">endLocal</a></span>)
                <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165281">Dup</a></span>) <span class="comment">// duplicate start_incl</span>
                <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165407">Neg</a></span>)
                <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.emit.LocalBuilder)Unit</span><a id="162531">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165605">Ldloc</a></span>, <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.LocalBuilder</span><a href="#167107">endLocal</a></span>) <span class="comment">// load end_excl</span>
                <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165207">Add</a></span>) <span class="comment">// compute length (-start + end)</span>
              }

              <span class="keyword">var</span> <span class="typed"><span class="type">Boolean</span><a id="167101">doEmit</a></span>: <span class="typed"><span class="type">Boolean</span><a id="2170">Boolean</a></span> = <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>
              <span class="typed"><span class="type">=&gt; scala.collection.mutable.Map[GenMSIL.this.global.loaders.clrTypes.global.Symbol,ch.epfl.lamp.compiler.msil.Type]</span><a href="../../symtab/clr/CLRTypes.scala.html#35387">types</a></span>.<span class="typed"><span class="type">(GenMSIL.this.global.loaders.clrTypes.global.Symbol)Option[ch.epfl.lamp.compiler.msil.Type]</span><a id="24235">get</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#167060">msym</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Symbol</span><a href="../../symtab/Symbols.scala.html#25211">owner</a></span>.<span class="typed"><span class="type">GenMSIL.this.global.loaders.clrTypes.global.Symbol</span><a id="3503">asInstanceOf</a></span>[clrTypes.global.<span class="typed"><span class="type">GenMSIL.this.global.loaders.clrTypes.global.Symbol</span><a href="../../symtab/Symbols.scala.html#21866">Symbol</a></span>]) <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
                <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">Some</a>(<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a id="167127">typ</a></span>) <span class="keyword">if</span> (<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a href="#167127">typ</a></span>.<span class="typed"><span class="type">()Boolean</span><a id="35229">IsEnum</a></span>) =&gt; {
                  <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Unit</span><a id="167128">negBool</a></span> = {
                    <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165253">Ldc_I4_0</a></span>)
                    <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165587">Ceq</a></span>)
                  }
                  <span class="typed"><span class="type">Boolean</span><a href="#167101">doEmit</a></span> = <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>
                  <span class="keyword">val</span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Name</span><a id="167129">name</a></span> = <span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#167060">msym</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Name</span><a href="../../symtab/Symbols.scala.html#25215">name</a></span>
                  <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Name</span><a href="#167129">name</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5794">eq</a></span> <span class="typed"><span class="type">object GenMSIL.this.global.nme</span><a href="../../symtab/StdNames.scala.html#22317">nme</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Name</span><a href="../../symtab/StdNames.scala.html#30988">EQ</a></span>)       { <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165587">Ceq</a></span>) }
                  <span class="keyword">else</span> <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Name</span><a href="#167129">name</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5794">eq</a></span> <span class="typed"><span class="type">object GenMSIL.this.global.nme</span><a href="../../symtab/StdNames.scala.html#22317">nme</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Name</span><a href="../../symtab/StdNames.scala.html#30990">NE</a></span>)  { <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165587">Ceq</a></span>); <span class="typed"><span class="type">=&gt; Unit</span><a href="#167128">negBool</a></span> }
                  <span class="keyword">else</span> <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Name</span><a href="#167129">name</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5794">eq</a></span> <span class="typed"><span class="type">object GenMSIL.this.global.nme</span><a href="../../symtab/StdNames.scala.html#22317">nme</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Name</span><a href="../../symtab/StdNames.scala.html#30992">LT</a></span>)  { <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165593">Clt</a></span>) }
                  <span class="keyword">else</span> <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Name</span><a href="#167129">name</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5794">eq</a></span> <span class="typed"><span class="type">object GenMSIL.this.global.nme</span><a href="../../symtab/StdNames.scala.html#22317">nme</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Name</span><a href="../../symtab/StdNames.scala.html#30994">LE</a></span>)  { <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165589">Cgt</a></span>); <span class="typed"><span class="type">=&gt; Unit</span><a href="#167128">negBool</a></span> }
                  <span class="keyword">else</span> <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Name</span><a href="#167129">name</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5794">eq</a></span> <span class="typed"><span class="type">object GenMSIL.this.global.nme</span><a href="../../symtab/StdNames.scala.html#22317">nme</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Name</span><a href="../../symtab/StdNames.scala.html#30996">GT</a></span>)  { <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165589">Cgt</a></span>) }
                  <span class="keyword">else</span> <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Name</span><a href="#167129">name</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5794">eq</a></span> <span class="typed"><span class="type">object GenMSIL.this.global.nme</span><a href="../../symtab/StdNames.scala.html#22317">nme</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Name</span><a href="../../symtab/StdNames.scala.html#30998">GE</a></span>)  { <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165593">Clt</a></span>); <span class="typed"><span class="type">=&gt; Unit</span><a href="#167128">negBool</a></span> }
                  <span class="keyword">else</span> <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Name</span><a href="#167129">name</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5794">eq</a></span> <span class="typed"><span class="type">object GenMSIL.this.global.nme</span><a href="../../symtab/StdNames.scala.html#22317">nme</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Name</span><a href="../../symtab/StdNames.scala.html#31000">OR</a></span>)  { <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165397">Or</a></span>) }
                  <span class="keyword">else</span> <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Name</span><a href="#167129">name</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5794">eq</a></span> <span class="typed"><span class="type">object GenMSIL.this.global.nme</span><a href="../../symtab/StdNames.scala.html#22317">nme</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Name</span><a href="../../symtab/StdNames.scala.html#31004">AND</a></span>) { <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165395">And</a></span>) }
                  <span class="keyword">else</span> <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Name</span><a href="#167129">name</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5794">eq</a></span> <span class="typed"><span class="type">object GenMSIL.this.global.nme</span><a href="../../symtab/StdNames.scala.html#22317">nme</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Name</span><a href="../../symtab/StdNames.scala.html#31002">XOR</a></span>) { <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165399">Xor</a></span>) }
                  <span class="keyword">else</span>
                    <span class="typed"><span class="type">Boolean</span><a href="#167101">doEmit</a></span> = <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>
                }
                <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> _ =&gt; <span class="typed"><span class="type">Unit</span><span >(</span></span>)
              }

              <span class="comment">// method: implicit view(FunctionX[PType0, PType1, ...,PTypeN, ResType]):DelegateType</span>
              <span class="keyword">val</span> <span class="typed"><span class="type">(Boolean, GenMSIL.this.global.Type, GenMSIL.this.global.Type)</span><span id="23590"><a href="#167161" id="449">(</a></span></span><span class="typed"><span class="type">Boolean</span><span id="167161"><span id="167103"><a href="#167102" id="23578">isDelegateView</a></span></span></span>, <span class="typed"><span class="type">GenMSIL.this.global.Type</span><span id="167162"><span id="167104"><a href="#167102" id="23580">paramType</a></span></span></span>, <span class="typed"><span class="type">GenMSIL.this.global.Type</span><span id="167163"><span id="167105"><a href="#167102" id="23582">resType</a></span></span></span>) = <span class="typed"><span class="type">(scala.tools.nsc.Phase)(=&gt; (Boolean, GenMSIL.this.global.Type, GenMSIL.this.global.Type))(Boolean, GenMSIL.this.global.Type, GenMSIL.this.global.Type)</span><a href="../../symtab/SymbolTable.scala.html#21147">atPhase</a></span>(<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Run</span><a href="../../Global.scala.html#21305">currentRun</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Phase</span><a href="../../Global.scala.html#36558">typerPhase</a></span>){
                <span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#167060">msym</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Type</span><a href="../../symtab/Symbols.scala.html#25230">tpe</a></span> <span class="typed"><span class="type">(Boolean, GenMSIL.this.global.Type, GenMSIL.this.global.Type)</span><span class="keyword">match</span></span> {
                  <span class="typed"><span class="type">(Boolean, GenMSIL.this.global.Type, GenMSIL.this.global.Type)</span><span class="keyword">case</span></span> <a id="1">MethodType</a>(<span class="typed"><span class="type">List[GenMSIL.this.global.Type]</span><a id="167142">parameterTypes</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.Type</span><a id="167143">resultType</a></span>)
                  <span class="keyword">if</span> (<span class="typed"><span class="type">List[GenMSIL.this.global.Type]</span><a href="#167142">parameterTypes</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21345">length</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3141">==</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#167060">msym</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Name</span><a href="../../symtab/Symbols.scala.html#25215">name</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">object GenMSIL.this.global.nme</span><a href="../../symtab/StdNames.scala.html#22317">nme</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Name</span><a href="../../symtab/StdNames.scala.html#30964">view_</a></span>) =&gt;
                    <span class="keyword">val</span> <span class="typed"><span class="type">Boolean</span><a id="167148">isDel</a></span> = <span class="typed"><span class="type">object GenMSIL.this.global.definitions</span><a href="../../symtab/Definitions.scala.html#22259">definitions</a></span>.<span class="typed"><span class="type">(GenMSIL.this.global.Type,GenMSIL.this.global.Type)Boolean</span><a href="../../symtab/Definitions.scala.html#26002">isCorrespondingDelegate</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Type</span><a href="#167143">resultType</a></span>, <span class="typed"><span class="type">(Int)GenMSIL.this.global.Type</span><a href="#167142" id="21361">parameterTypes</a></span>(<span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>))
                    <span class="typed"><span class="type">(Boolean,GenMSIL.this.global.Type,GenMSIL.this.global.Type)(Boolean, GenMSIL.this.global.Type, GenMSIL.this.global.Type)</span><span id="23590"><a id="449">(</a></span></span><span class="typed"><span class="type">Boolean</span><a href="#167148">isDel</a></span>, <span class="typed"><span class="type">(Int)GenMSIL.this.global.Type</span><a href="#167142" id="21361">parameterTypes</a></span>(<span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>), <span class="typed"><span class="type">GenMSIL.this.global.Type</span><a href="#167143">resultType</a></span>)
                  <span class="typed"><span class="type">(Boolean, Null, Null)</span><span class="keyword">case</span></span> _ =&gt; <span class="typed"><span class="type">(Boolean,Null,Null)(Boolean, Null, Null)</span><span id="23590"><a id="449">(</a></span></span><span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>, <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>, <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>)
                }
              }
              <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Boolean</span><a href="#167101">doEmit</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">Boolean</span><a href="#167103">isDelegateView</a></span>) {
                <span class="typed"><span class="type">Boolean</span><a href="#167101">doEmit</a></span> = <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>
                <span class="typed"><span class="type">(GenMSIL.this.global.Type,GenMSIL.this.global.Type)Unit</span><a href="#161771">createDelegateCaller</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Type</span><a href="#167104">paramType</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.Type</span><a href="#167105">resType</a></span>)
              }

              <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Boolean</span><a href="#167101">doEmit</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span>
                  (<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#167060">msym</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Name</span><a href="../../symtab/Symbols.scala.html#25215">name</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">object GenMSIL.this.global.nme</span><a href="../../symtab/StdNames.scala.html#22317">nme</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Name</span><a href="../../symtab/StdNames.scala.html#30649">PLUS</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2750">||</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#167060">msym</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Name</span><a href="../../symtab/Symbols.scala.html#25215">name</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">object GenMSIL.this.global.nme</span><a href="../../symtab/StdNames.scala.html#22317">nme</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Name</span><a href="../../symtab/StdNames.scala.html#30647">MINUS</a></span>)
                  <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">object GenMSIL.this.global.loaders.clrTypes</span><a href="../../symtab/SymbolLoaders.scala.html#34365">clrTypes</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.Type)Boolean</span><a href="../../symtab/clr/CLRTypes.scala.html#35404">isDelegateType</a></span>(<span class="typed"><span class="type">(GenMSIL.this.global.Type)ch.epfl.lamp.compiler.msil.Type</span><a href="#161750">msilType</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#167060">msym</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Symbol</span><a href="../../symtab/Symbols.scala.html#25211">owner</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Type</span><a href="../../symtab/Symbols.scala.html#25230">tpe</a></span>)))
                {
                <span class="typed"><span class="type">Boolean</span><a href="#167101">doEmit</a></span> = <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>
                <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.MethodInfo</span><a id="167703">methodInfo</a></span>: <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.MethodInfo</span><a id="34319">MethodInfo</a></span> = <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.MethodInfo</span><a href="#161776">getMethod</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#167060">msym</a></span>)
                <span class="comment">// call it as a static method, even if the compiler (symbol) thinks it's virtual</span>
                <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.MethodInfo)Unit</span><a id="162539">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165287">Call</a></span>, <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.MethodInfo</span><a href="#167703">methodInfo</a></span>)
                <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.Type)Unit</span><a id="162542">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165437">Castclass</a></span>, <span class="typed"><span class="type">(GenMSIL.this.global.Type)ch.epfl.lamp.compiler.msil.Type</span><a href="#161750">msilType</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#167060">msym</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Symbol</span><a href="../../symtab/Symbols.scala.html#25211">owner</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Type</span><a href="../../symtab/Symbols.scala.html#25230">tpe</a></span>))
              }

              <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Boolean</span><a href="#167101">doEmit</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">object GenMSIL.this.global.definitions</span><a href="../../symtab/Definitions.scala.html#22259">definitions</a></span>.<span class="typed"><span class="type">=&gt; List[GenMSIL.this.global.Symbol]</span><a href="../../symtab/Definitions.scala.html#25816">Delegate_scalaCallers</a></span>.<span class="typed"><span class="type">(Any)Boolean</span><a id="21673">contains</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#167060">msym</a></span>)) {
                <span class="typed"><span class="type">Boolean</span><a href="#167101">doEmit</a></span> = <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>
                <span class="keyword">val</span> <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a id="167721">methodSym</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="../../symtab/Symbols.scala.html#21866">Symbol</a></span> = <span class="typed"><span class="type">object GenMSIL.this.global.definitions</span><a href="../../symtab/Definitions.scala.html#22259">definitions</a></span>.<span class="typed"><span class="type">(GenMSIL.this.global.Symbol)GenMSIL.this.global.Symbol</span><a href="../../symtab/Definitions.scala.html#25819" id="24239">Delegate_scalaCallerTargets</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#167060">msym</a></span>)
                <span class="keyword">val</span> <span class="typed"><span class="type">GenMSIL.this.global.Type</span><a id="167722">delegateType</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.Type</span><a href="../../symtab/Types.scala.html#21944">Type</a></span> = <span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#167060">msym</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Type</span><a href="../../symtab/Symbols.scala.html#25230">tpe</a></span> <span class="typed"><span class="type">GenMSIL.this.global.Type</span><span class="keyword">match</span></span> {
                  <span class="typed"><span class="type">GenMSIL.this.global.Type</span><span class="keyword">case</span></span> <a id="1">MethodType</a>(_, <span class="typed"><span class="type">GenMSIL.this.global.Type</span><a id="167728">retType</a></span>) =&gt; <span class="typed"><span class="type">GenMSIL.this.global.Type</span><a href="#167728">retType</a></span>
                  <span class="typed"><span class="type">Nothing</span><span class="keyword">case</span></span> _ =&gt; <span class="typed"><span class="type">(String)Nothing</span><a href="../../Global.scala.html#21214">abort</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;not a method type: &quot;)</span><span class="string">&quot;not a method type: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#167060">msym</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Type</span><a href="../../symtab/Symbols.scala.html#25230">tpe</a></span>)
                }
                <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.MethodInfo</span><a id="167723">method</a></span>: <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.MethodInfo</span><a id="34319">MethodInfo</a></span> = <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.MethodInfo</span><a href="#161776">getMethod</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#167721">methodSym</a></span>)
                <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.ConstructorInfo</span><a id="167724">delegCtor</a></span> = <span class="typed"><span class="type">(GenMSIL.this.global.Type)ch.epfl.lamp.compiler.msil.Type</span><a href="#161750">msilType</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Type</span><a href="#167722">delegateType</a></span>).<span class="typed"><span class="type">(Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.ConstructorInfo</span><a id="35242">GetConstructor</a></span>(<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.Type*)Array[ch.epfl.lamp.compiler.msil.Type]</span><span id="21530"><a id="1073">Array</a></span></span>(<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35360">MOBJECT</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="#161591">INT_PTR</a></span>))
                <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#167721">methodSym</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../../symtab/Symbols.scala.html#25194">isStatic</a></span>) {
                  <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.MethodInfo)Unit</span><a id="162539">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165597">Ldftn</a></span>, <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.MethodInfo</span><a href="#167723">method</a></span>)
                } <span class="keyword">else</span> {
                  <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165281">Dup</a></span>)
                  <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.MethodInfo)Unit</span><a id="162539">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165599">Ldvirtftn</a></span>, <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.MethodInfo</span><a href="#167723">method</a></span>)
                }
                <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.ConstructorInfo)Unit</span><a id="162530">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165435">Newobj</a></span>, <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.ConstructorInfo</span><a href="#167724">delegCtor</a></span>)
              }

              <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Boolean</span><a href="#167101">doEmit</a></span>) {
                <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.MethodInfo</span><a id="167975">methodInfo</a></span>: <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.MethodInfo</span><a id="34319">MethodInfo</a></span> = <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.MethodInfo</span><a href="#161776">getMethod</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#167060">msym</a></span>)
                (<span class="typed"><span class="type">GenMSIL.this.global.icodes.opcodes.InvokeStyle</span><a href="#167061">style</a></span>: @<span class="typed"><span class="type">GenMSIL.this.global.icodes.opcodes.InvokeStyle @unchecked</span><a href="../icode/Opcodes.scala.html#32598">unchecked</a></span>) <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
                  <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">SuperCall</a>(_) =&gt;
                    <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.MethodInfo)Unit</span><a id="162539">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165287">Call</a></span>, <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.MethodInfo</span><a href="#167975">methodInfo</a></span>)
                  <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.opcodes.Dynamic</span><a href="../icode/Opcodes.scala.html#32599">Dynamic</a></span> =&gt;
                    <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.MethodInfo)Unit</span><a id="162539">Emit</a></span>(<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.OpCode</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">(GenMSIL.this.global.Symbol)Boolean</span><a href="#161626" id="25543">dynToStatMapped</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#167060">msym</a></span>)) <span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165287">Call</a></span> <span class="keyword">else</span> <span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165427">Callvirt</a></span>,
                               <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.MethodInfo</span><a href="#167975">methodInfo</a></span>)
                  <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">Static</a>(_) =&gt;
                    <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.MethodInfo)Unit</span><a id="162539">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165287">Call</a></span>, <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.MethodInfo</span><a href="#167975">methodInfo</a></span>)
                }
              }
            }

          <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">BOX</a>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.TypeKind</span><a id="168003">boxType</a></span>) =&gt; <span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.ILGenerator,GenMSIL.this.global.icodes.TypeKind)Unit</span><a href="#161772">emitBox</a></span>(<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.icodes.TypeKind</span><a href="#168003">boxType</a></span>) <span class="comment">//mcode.Emit(OpCodes.Box, msilType(boxType))</span>

          <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">UNBOX</a>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.TypeKind</span><a id="168004">boxType</a></span>) =&gt; <span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.ILGenerator,GenMSIL.this.global.icodes.TypeKind)Unit</span><a href="#161773">emitUnbox</a></span>(<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.icodes.TypeKind</span><a href="#168004">boxType</a></span>)

          <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">NEW</a>(<a id="1">REFERENCE</a>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a id="168005">cls</a></span>)) =&gt;
            <span class="typed"><span class="type">(Boolean)Unit</span><a href="#161722">ignoreNextDup</a></span> = <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>

          <span class="comment">// works also for arrays and reference-types</span>
          <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">CREATE_ARRAY</a>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.TypeKind</span><a id="168006">elem</a></span>, <span class="typed"><span class="type">Int</span><a id="168007">dims</a></span>) =&gt;
            <span class="comment">// TODO: handle multi dimensional arrays</span>
            <span class="typed"><span class="type">(Boolean,=&gt; Any)Unit</span><span id="6004"><a id="821">assert</a></span></span>(<span class="typed"><span class="type">Int</span><a href="#168007">dims</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3141">==</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>, <span class="typed"><span class="type">java.lang.String(&quot;Can't handle multi dimensional arrays&quot;)</span><span class="string">&quot;Can't handle multi dimensional arrays&quot;</span></span>)
            <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.Type)Unit</span><a id="162542">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165483">Newarr</a></span>, <span class="typed"><span class="type">(GenMSIL.this.global.icodes.TypeKind)ch.epfl.lamp.compiler.msil.Type</span><a href="#161749">msilType</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.TypeKind</span><a href="#168006">elem</a></span>))

          <span class="comment">// works for arrays and reference-types</span>
          <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">IS_INSTANCE</a>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.TypeKind</span><a id="168025">tpe</a></span>) =&gt;
            <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.Type)Unit</span><a id="162542">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165439">Isinst</a></span>, <span class="typed"><span class="type">(GenMSIL.this.global.icodes.TypeKind)ch.epfl.lamp.compiler.msil.Type</span><a href="#161749">msilType</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.TypeKind</span><a href="#168025">tpe</a></span>))
            <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165249">Ldnull</a></span>)
            <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165587">Ceq</a></span>)
            <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165253">Ldc_I4_0</a></span>)
            <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165587">Ceq</a></span>)


          <span class="comment">// works for arrays and reference-types</span>
          <span class="comment">// part from the scala reference: &quot;S &lt;: T does not imply</span>
          <span class="comment">//  Array[S] &lt;: Array[T] in Scala. However, it is possible</span>
          <span class="comment">//  to cast an array of S to an array of T if such a cast</span>
          <span class="comment">//  is permitted in the host environment.&quot;</span>
          <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">CHECK_CAST</a>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.TypeKind</span><a id="168039">tpe</a></span>) =&gt; <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.Type)Unit</span><a id="162542">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165437">Castclass</a></span>, <span class="typed"><span class="type">(GenMSIL.this.global.icodes.TypeKind)ch.epfl.lamp.compiler.msil.Type</span><a href="#161749">msilType</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.TypeKind</span><a href="#168039">tpe</a></span>))


          <span class="comment">// no SWITCH is generated when there's</span>
          <span class="comment">//  - a default case (&quot;case _ =&gt; ...&quot;) in the matching expr</span>
          <span class="comment">//  - OR is used (&quot;case 1 | 2 =&gt; ...&quot;)</span>
          <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">SWITCH</a>(<span class="typed"><span class="type">List[List[Int]]</span><a id="168049">tags</a></span>, <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a id="168050">branches</a></span>) =&gt;
            <span class="comment">// tags is List[List[Int]]; a list of integers for every label.</span>
            <span class="comment">//    if the int on stack is 4, and 4 is in the second list =&gt; jump</span>
            <span class="comment">//    to second label</span>
            <span class="comment">// branches is List[BasicBlock]</span>
            <span class="comment">//    the labels to jump to (the last one ist the default one)</span>

            <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.LocalBuilder</span><a id="168051">switchLocal</a></span> = <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.Type)ch.epfl.lamp.compiler.msil.emit.LocalBuilder</span><a id="162547">DeclareLocal</a></span>(<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35330">MINT</a></span>)
            <span class="comment">// several switch variables will appear with the same name in the</span>
            <span class="comment">//  assembly code, but this makes no truble</span>
            <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.LocalBuilder</span><a href="#168051">switchLocal</a></span>.<span class="typed"><span class="type">(String)Unit</span><a id="162638">SetLocalSymInfo</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;$switch_var&quot;)</span><span class="string">&quot;$switch_var&quot;</span></span>)

            <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.emit.LocalBuilder)Unit</span><a id="162531">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165611">Stloc</a></span>, <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.LocalBuilder</span><a href="#168051">switchLocal</a></span>)
            <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="168052">i</a></span>: <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span> = <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>
            <span class="keyword">for</span> (<span class="typed"><span class="type">((List[Int]) =&gt; Unit)Unit</span><span id="21366"><a id="168063">l</a></span></span> &lt;- <span class="typed"><span class="type">List[List[Int]]</span><a href="#168049">tags</a></span>) {
              <span class="keyword">var</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.Label</span><a id="168064">targetLabel</a></span> = <span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock)ch.epfl.lamp.compiler.msil.emit.Label</span><a href="#161731" id="24239">labels</a></span>(<span class="typed"><span class="type">(Int)GenMSIL.this.global.icodes.BasicBlock</span><a href="#168050" id="21361">branches</a></span>(<span class="typed"><span class="type">Int</span><a href="#168052">i</a></span>))
              <span class="keyword">for</span> (<span class="typed"><span class="type">((Int) =&gt; Unit)Unit</span><span id="21366"><a id="168072">i</a></span></span> &lt;- <span class="typed"><span class="type">List[Int]</span><a href="#168063">l</a></span>) {
                <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.emit.LocalBuilder)Unit</span><a id="162531">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165605">Ldloc</a></span>, <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.LocalBuilder</span><a href="#168051">switchLocal</a></span>)
                <span class="typed"><span class="type">(Int,ch.epfl.lamp.compiler.msil.emit.ILGenerator)Unit</span><a href="#161728">loadI4</a></span>(<span class="typed"><span class="type">Int</span><a href="#168072">i</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>)
                <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.emit.Label)Unit</span><a id="162537">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165325">Beq</a></span>, <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.Label</span><a href="#168064">targetLabel</a></span>)
              }
              <span class="typed"><span class="type">Int</span><a href="#168052">i</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">+=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
            }
            <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.Label</span><a id="168053">defaultTarget</a></span> = <span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock)ch.epfl.lamp.compiler.msil.emit.Label</span><a href="#161731" id="24239">labels</a></span>(<span class="typed"><span class="type">(Int)GenMSIL.this.global.icodes.BasicBlock</span><a href="#168050" id="21361">branches</a></span>(<span class="typed"><span class="type">Int</span><a href="#168052">i</a></span>))
            <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.BasicBlock</span><a href="#161717">nextBlock</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5793">!=</a></span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.Label</span><a href="#168053">defaultTarget</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">=&gt; scala.collection.mutable.HashSet[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#161708">omitJumpBlocks</a></span>.<span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock)Boolean</span><a id="25498">contains</a></span>(<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.BasicBlock</span><a href="#161711">currentBlock</a></span>))
              <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.emit.Label)Unit</span><a id="162537">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165319">Br</a></span>, <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.Label</span><a href="#168053">defaultTarget</a></span>)


          <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">JUMP</a>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a id="168127">whereto</a></span>) =&gt;
            <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.BasicBlock</span><a href="#161717">nextBlock</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5793">!=</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#168127">whereto</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">=&gt; scala.collection.mutable.HashSet[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#161708">omitJumpBlocks</a></span>.<span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock)Boolean</span><a id="25498">contains</a></span>(<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.BasicBlock</span><a href="#161711">currentBlock</a></span>))
              <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.emit.Label)Unit</span><a id="162537">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165319">Br</a></span>, <span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock)ch.epfl.lamp.compiler.msil.emit.Label</span><a href="#161731" id="24239">labels</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#168127">whereto</a></span>))


          <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">CJUMP</a>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a id="168141">success</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a id="168142">failure</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.icodes.TestOp</span><a id="168143">cond</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.icodes.TypeKind</span><a id="168144">kind</a></span>) =&gt;
            <span class="comment">// cond is TestOp (see Primitives.scala), and can take</span>
            <span class="comment">// values EQ, NE, LT, GE LE, GT</span>
            <span class="comment">// kind is TypeKind</span>
            <span class="keyword">val</span> <span class="typed"><span class="type">Boolean</span><a id="168145">isFloat</a></span> = <span class="typed"><span class="type">GenMSIL.this.global.icodes.TypeKind</span><a href="#168144">kind</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.FLOAT</span><a href="../icode/TypeKinds.scala.html#32369">FLOAT</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2750">||</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.TypeKind</span><a href="#168144">kind</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.DOUBLE</span><a href="../icode/TypeKinds.scala.html#32371">DOUBLE</a></span>
            <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.BasicBlock</span><a href="#161717">nextBlock</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#168141">success</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2750">||</a></span> <span class="typed"><span class="type">=&gt; scala.collection.mutable.HashSet[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#161708">omitJumpBlocks</a></span>.<span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock)Boolean</span><a id="25498">contains</a></span>(<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.BasicBlock</span><a href="#161711">currentBlock</a></span>)) {
              <span class="typed"><span class="type">(GenMSIL.this.global.icodes.TestOp,ch.epfl.lamp.compiler.msil.emit.Label,Boolean)Unit</span><a href="#161733">emitBr</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.TestOp</span><a href="#168143">cond</a></span>.<span class="typed"><span class="type">()GenMSIL.this.global.icodes.TestOp</span><a href="../icode/Primitives.scala.html#33531">negate</a></span>, <span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock)ch.epfl.lamp.compiler.msil.emit.Label</span><a href="#161731" id="24239">labels</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#168142">failure</a></span>), <span class="typed"><span class="type">Boolean</span><a href="#168145">isFloat</a></span>)
            } <span class="keyword">else</span> {
              <span class="typed"><span class="type">(GenMSIL.this.global.icodes.TestOp,ch.epfl.lamp.compiler.msil.emit.Label,Boolean)Unit</span><a href="#161733">emitBr</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.TestOp</span><a href="#168143">cond</a></span>, <span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock)ch.epfl.lamp.compiler.msil.emit.Label</span><a href="#161731" id="24239">labels</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#168141">success</a></span>), <span class="typed"><span class="type">Boolean</span><a href="#168145">isFloat</a></span>)
              <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.BasicBlock</span><a href="#161717">nextBlock</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5793">!=</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#168142">failure</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">=&gt; scala.collection.mutable.HashSet[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#161708">omitJumpBlocks</a></span>.<span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock)Boolean</span><a id="25498">contains</a></span>(<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.BasicBlock</span><a href="#161711">currentBlock</a></span>)) {
                <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.emit.Label)Unit</span><a id="162537">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165319">Br</a></span>, <span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock)ch.epfl.lamp.compiler.msil.emit.Label</span><a href="#161731" id="24239">labels</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#168142">failure</a></span>))
              }
            }

          <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">CZJUMP</a>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a id="168172">success</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a id="168173">failure</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.icodes.TestOp</span><a id="168174">cond</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.icodes.TypeKind</span><a id="168175">kind</a></span>) =&gt;
            (<span class="typed"><span class="type">GenMSIL.this.global.icodes.TypeKind</span><a href="#168175">kind</a></span>: @<span class="typed"><span class="type">GenMSIL.this.global.icodes.TypeKind @unchecked</span><a href="../icode/TypeKinds.scala.html#32353">unchecked</a></span>) <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
              <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.BOOL</span><a href="../icode/TypeKinds.scala.html#32357">BOOL</a></span> | <a id="1">REFERENCE</a>(_) =&gt;
                <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.BasicBlock</span><a href="#161717">nextBlock</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#168172">success</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2750">||</a></span> <span class="typed"><span class="type">=&gt; scala.collection.mutable.HashSet[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#161708">omitJumpBlocks</a></span>.<span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock)Boolean</span><a id="25498">contains</a></span>(<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.BasicBlock</span><a href="#161711">currentBlock</a></span>)) {
                  <span class="typed"><span class="type">(GenMSIL.this.global.icodes.TestOp,ch.epfl.lamp.compiler.msil.emit.Label)Unit</span><a href="#161734">emitBrBool</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.TestOp</span><a href="#168174">cond</a></span>.<span class="typed"><span class="type">()GenMSIL.this.global.icodes.TestOp</span><a href="../icode/Primitives.scala.html#33531">negate</a></span>, <span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock)ch.epfl.lamp.compiler.msil.emit.Label</span><a href="#161731" id="24239">labels</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#168173">failure</a></span>))
                } <span class="keyword">else</span> {
                  <span class="typed"><span class="type">(GenMSIL.this.global.icodes.TestOp,ch.epfl.lamp.compiler.msil.emit.Label)Unit</span><a href="#161734">emitBrBool</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.TestOp</span><a href="#168174">cond</a></span>, <span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock)ch.epfl.lamp.compiler.msil.emit.Label</span><a href="#161731" id="24239">labels</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#168172">success</a></span>))
                  <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.BasicBlock</span><a href="#161717">nextBlock</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5793">!=</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#168173">failure</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">=&gt; scala.collection.mutable.HashSet[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#161708">omitJumpBlocks</a></span>.<span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock)Boolean</span><a id="25498">contains</a></span>(<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.BasicBlock</span><a href="#161711">currentBlock</a></span>)) {
                    <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.emit.Label)Unit</span><a id="162537">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165319">Br</a></span>, <span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock)ch.epfl.lamp.compiler.msil.emit.Label</span><a href="#161731" id="24239">labels</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#168173">failure</a></span>))
                  }
                }
            }

          <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">RETURN</a>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.TypeKind</span><a id="168199">kind</a></span>) =&gt;
            <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165291">Ret</a></span>)

          <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">THROW</a>() =&gt;
            <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165445">Throw</a></span>)

          <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">DROP</a>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.TypeKind</span><a id="168202">kind</a></span>) =&gt;
            <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165283">Pop</a></span>)

          <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">DUP</a>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.TypeKind</span><a id="168204">kind</a></span>) =&gt;
            <span class="comment">// needed to create new instances</span>
            <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">=&gt; Boolean</span><a href="#161721">ignoreNextDup</a></span>) {
              <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165281">Dup</a></span>)
            } <span class="keyword">else</span> {
              <span class="typed"><span class="type">(Boolean)Unit</span><a href="#161722">ignoreNextDup</a></span> = <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>
            }

          <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">MONITOR_ENTER</a>() =&gt;
            <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.MethodInfo)Unit</span><a id="162539">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165287">Call</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.MethodInfo</span><a href="#161579">MMONITOR_ENTER</a></span>)

          <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">MONITOR_EXIT</a>() =&gt;
            <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.MethodInfo)Unit</span><a id="162539">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165287">Call</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.MethodInfo</span><a href="#161581">MMONITOR_EXIT</a></span>)

          <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">SCOPE_ENTER</a>(_) | <a id="1">SCOPE_EXIT</a>(_) =&gt;
            <span class="typed"><span class="type">Unit</span><span >(</span></span>)
        }

      } <span class="comment">// end for (instr &lt;- b) { .. }</span>

      <span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock)Unit</span><a href="#161715">lastBlock</a></span> = <span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166760">b</a></span> <span class="comment">// this way, saveResult knows lastBlock</span>

      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.BasicBlock,List[BytecodeGenerator.this.ExHInstruction]]</span><a href="#161706">bb2exHInstructions</a></span>.<span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock)Boolean</span><a id="24240">contains</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166760">b</a></span>)){
        <span class="typed"><span class="type">(GenMSIL.this.global.icodes.BasicBlock)List[BytecodeGenerator.this.ExHInstruction]</span><a href="#161706" id="24239">bb2exHInstructions</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#166760">b</a></span>).<span class="typed"><span class="type">((BytecodeGenerator.this.ExHInstruction) =&gt; Unit)Unit</span><a id="21366">foreach</a></span>((<span class="typed"><span class="type">BytecodeGenerator.this.ExHInstruction</span><a id="168227">i</a></span>) =&gt; <span class="typed"><span class="type">BytecodeGenerator.this.ExHInstruction</span><a href="#168227">i</a></span> <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
          <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">BeginExceptionBlock</a>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a id="168228">handler</a></span>) =&gt; <span class="typed"><span class="type">Unit</span><span >(</span></span>)
          <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">BeginCatchBlock</a>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a id="168229">handler</a></span>, <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a id="168230">exType</a></span>) =&gt; <span class="typed"><span class="type">Unit</span><span >(</span></span>)
          <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">BeginFinallyBlock</a>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a id="168231">handler</a></span>) =&gt; <span class="typed"><span class="type">Unit</span><span >(</span></span>)
          <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">EndExceptionBlock</a>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a id="168232">handler</a></span>) =&gt;
            <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="../../Global.scala.html#21157">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting</span><a href="../../Settings.scala.html#30066">debug</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting#T</span><a href="../../Settings.scala.html#30301">value</a></span>) <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;end ex blk: &quot;)</span><span class="string">&quot;end ex blk: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#168232">handler</a></span>)
            <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a id="168233">resType</a></span> = <span class="typed"><span class="type">(GenMSIL.this.global.icodes.TypeKind)ch.epfl.lamp.compiler.msil.Type</span><a href="#161749">msilType</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#168232">handler</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.TypeKind</span><a href="../icode/ExceptionHandlers.scala.html#51915">resultKind</a></span>)
            <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#168232">handler</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.Finalizer</span><a href="../icode/ExceptionHandlers.scala.html#51912">finalizer</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2750">||</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.ExceptionHandler</span><a href="#168232">handler</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.Finalizer</span><a href="../icode/ExceptionHandlers.scala.html#51912">finalizer</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.NoFinalizer</span><a href="../icode/ExceptionHandlers.scala.html#32396">NoFinalizer</a></span>)
              <span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.Type)Unit</span><a href="#166768">saveResult</a></span>(<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a href="#168233">resType</a></span>)
            <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">()Unit</span><a id="162554">EndExceptionBlock</a></span>()
            <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a href="#168233">resType</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5793">!=</a></span> <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35351">MVOID</a></span>) {
              <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.LocalBuilder</span><a id="168242">lb</a></span>: <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.LocalBuilder</span><a id="83534">LocalBuilder</a></span> = <span class="typed"><span class="type">=&gt; scala.collection.mutable.Stack[ch.epfl.lamp.compiler.msil.emit.LocalBuilder]</span><a href="#161724">excResultLocals</a></span>.<span class="typed"><span class="type">()ch.epfl.lamp.compiler.msil.emit.LocalBuilder</span><a id="108640">pop</a></span>
              <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.emit.LocalBuilder)Unit</span><a id="162531">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165605">Ldloc</a></span>, <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.LocalBuilder</span><a href="#168242">lb</a></span>)
            } <span class="keyword">else</span>
              <span class="typed"><span class="type">(Boolean)Unit</span><a href="#161674">needAdditionalRet</a></span> = <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>
          <span class="typed"><span class="type">Nothing</span><span class="keyword">case</span></span> _ =&gt; <span class="typed"><span class="type">(String)Nothing</span><a href="../../Global.scala.html#21214">abort</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;unknown case: &quot;)</span><span class="string">&quot;unknown case: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">BytecodeGenerator.this.ExHInstruction</span><a href="#168227">i</a></span>)
        })
      }

    } <span class="comment">// end genBlock</span>

    <span class="keyword">def</span> <span class="typed"><span class="type">(GenMSIL.this.global.icodes.Primitive,scala.tools.nsc.util.Position)Unit</span><a id="161727">genPrimitive</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.Primitive</span><a id="167058">primitive</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.icodes.Primitive</span><a href="../icode/Primitives.scala.html#32400">Primitive</a></span>, <span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a id="167059">pos</a></span>: <span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a href="../../util/Position.scala.html#8480">Position</a></span>) {
      <span class="typed"><span class="type">GenMSIL.this.global.icodes.Primitive</span><a href="#167058">primitive</a></span> <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
        <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">Negation</a>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.TypeKind</span><a id="168251">kind</a></span>) =&gt;
          <span class="typed"><span class="type">GenMSIL.this.global.icodes.TypeKind</span><a href="#168251">kind</a></span> <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
            <span class="comment">// CHECK: is ist possible to get this for BOOL? in this case, verify.</span>
            <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.BOOL</span><a href="../icode/TypeKinds.scala.html#32357">BOOL</a></span> | <span class="typed"><span class="type">object GenMSIL.this.global.icodes.BYTE</span><a href="../icode/TypeKinds.scala.html#32359">BYTE</a></span> | <span class="typed"><span class="type">object GenMSIL.this.global.icodes.CHAR</span><a href="../icode/TypeKinds.scala.html#32363">CHAR</a></span> | <span class="typed"><span class="type">object GenMSIL.this.global.icodes.SHORT</span><a href="../icode/TypeKinds.scala.html#32361">SHORT</a></span> | <span class="typed"><span class="type">object GenMSIL.this.global.icodes.INT</span><a href="../icode/TypeKinds.scala.html#32365">INT</a></span> | <span class="typed"><span class="type">object GenMSIL.this.global.icodes.LONG</span><a href="../icode/TypeKinds.scala.html#32367">LONG</a></span> | <span class="typed"><span class="type">object GenMSIL.this.global.icodes.FLOAT</span><a href="../icode/TypeKinds.scala.html#32369">FLOAT</a></span> | <span class="typed"><span class="type">object GenMSIL.this.global.icodes.DOUBLE</span><a href="../icode/TypeKinds.scala.html#32371">DOUBLE</a></span> =&gt;
              <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165407">Neg</a></span>)

            <span class="typed"><span class="type">Nothing</span><span class="keyword">case</span></span> _ =&gt; <span class="typed"><span class="type">(String)Nothing</span><a href="../../Global.scala.html#21214">abort</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;Impossible to negate a &quot;)</span><span class="string">&quot;Impossible to negate a &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.TypeKind</span><a href="#168251">kind</a></span>)
          }

        <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">Arithmetic</a>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.ArithmeticOp</span><a id="168253">op</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.icodes.TypeKind</span><a id="168254">kind</a></span>) =&gt;
          <span class="typed"><span class="type">GenMSIL.this.global.icodes.ArithmeticOp</span><a href="#168253">op</a></span> <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
            <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.ADD</span><a href="../icode/Primitives.scala.html#32454">ADD</a></span> =&gt; <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165207">Add</a></span>)
            <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.SUB</span><a href="../icode/Primitives.scala.html#32456">SUB</a></span> =&gt; <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165383">Sub</a></span>)
            <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.MUL</span><a href="../icode/Primitives.scala.html#32458">MUL</a></span> =&gt; <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165385">Mul</a></span>)
            <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.DIV</span><a href="../icode/Primitives.scala.html#32460">DIV</a></span> =&gt; <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165387">Div</a></span>)
            <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.REM</span><a href="../icode/Primitives.scala.html#32462">REM</a></span> =&gt; <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165391">Rem</a></span>)
            <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.NOT</span><a href="../icode/Primitives.scala.html#32464">NOT</a></span> =&gt; <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165409">Not</a></span>) <span class="comment">//bitwise complement (one's complement)</span>
            <span class="typed"><span class="type">Nothing</span><span class="keyword">case</span></span> _ =&gt; <span class="typed"><span class="type">(String)Nothing</span><a href="../../Global.scala.html#21214">abort</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;Unknown arithmetic primitive &quot;)</span><span class="string">&quot;Unknown arithmetic primitive &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.Primitive</span><a href="#167058">primitive</a></span> )
          }

        <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">Logical</a>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.LogicalOp</span><a id="168261">op</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.icodes.TypeKind</span><a id="168262">kind</a></span>) =&gt; <span class="typed"><span class="type">GenMSIL.this.global.icodes.LogicalOp</span><a href="#168261">op</a></span> <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
          <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.AND</span><a href="../icode/Primitives.scala.html#32474">AND</a></span> =&gt; <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165395">And</a></span>)
          <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.OR</span><a href="../icode/Primitives.scala.html#32476">OR</a></span> =&gt; <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165397">Or</a></span>)
          <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.XOR</span><a href="../icode/Primitives.scala.html#32478">XOR</a></span> =&gt; <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165399">Xor</a></span>)
        }

        <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">Shift</a>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.ShiftOp</span><a id="168266">op</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.icodes.TypeKind</span><a id="168267">kind</a></span>) =&gt; <span class="typed"><span class="type">GenMSIL.this.global.icodes.ShiftOp</span><a href="#168266">op</a></span> <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
          <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.LSL</span><a href="../icode/Primitives.scala.html#32467">LSL</a></span> =&gt; <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165401">Shl</a></span>)
          <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.ASR</span><a href="../icode/Primitives.scala.html#32469">ASR</a></span> =&gt; <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165403">Shr</a></span>)
          <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.LSR</span><a href="../icode/Primitives.scala.html#32471">LSR</a></span> =&gt; <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165405">Shr_Un</a></span>)
        }

        <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">Conversion</a>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.TypeKind</span><a id="168271">src</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.icodes.TypeKind</span><a id="168272">dst</a></span>) =&gt;
          <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="../../Global.scala.html#21157">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting</span><a href="../../Settings.scala.html#30066">debug</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting#T</span><a href="../../Settings.scala.html#30301">value</a></span>)
            <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;Converting from: &quot;)</span><span class="string">&quot;Converting from: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.TypeKind</span><a href="#168271">src</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot; to: &quot;)</span><span class="string">&quot; to: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.TypeKind</span><a href="#168272">dst</a></span>)

          <span class="typed"><span class="type">GenMSIL.this.global.icodes.TypeKind</span><a href="#168272">dst</a></span> <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
            <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.BYTE</span><a href="../icode/TypeKinds.scala.html#32359">BYTE</a></span> =&gt;   <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165553">Conv_U1</a></span>)
            <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.SHORT</span><a href="../icode/TypeKinds.scala.html#32361">SHORT</a></span> =&gt;  <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165413">Conv_I2</a></span>)
            <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.CHAR</span><a href="../icode/TypeKinds.scala.html#32363">CHAR</a></span> =&gt;   <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165555">Conv_U2</a></span>)
            <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.INT</span><a href="../icode/TypeKinds.scala.html#32365">INT</a></span> =&gt;    <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165415">Conv_I4</a></span>)
            <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.LONG</span><a href="../icode/TypeKinds.scala.html#32367">LONG</a></span> =&gt;   <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165417">Conv_I8</a></span>)
            <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.FLOAT</span><a href="../icode/TypeKinds.scala.html#32369">FLOAT</a></span> =&gt;  <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165419">Conv_R4</a></span>)
            <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.DOUBLE</span><a href="../icode/TypeKinds.scala.html#32371">DOUBLE</a></span> =&gt; <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165421">Conv_R8</a></span>)
            <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> _ =&gt;
              <span class="typed"><span class="type">object Console</span><a id="440">Console</a></span>.<span class="typed"><span class="type">(Any)Unit</span><a id="27062">println</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;Illegal conversion at: &quot;)</span><span class="string">&quot;Illegal conversion at: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.IClass</span><a href="#161629">clasz</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span>
                              <span class="typed"><span class="type">java.lang.String(&quot; at: &quot;)</span><span class="string">&quot; at: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a href="#167059">pos</a></span>.<span class="typed"><span class="type">=&gt; Option[scala.tools.nsc.util.SourceFile]</span><a href="../../util/Position.scala.html#25342">source</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.util.SourceFile</span><a id="25408">get</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;:&quot;)</span><span class="string">&quot;:&quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span>
			    <span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a href="#167059">pos</a></span>.<span class="typed"><span class="type">=&gt; Option[Int]</span><a href="../../util/Position.scala.html#25343">line</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="25408">get</a></span>)
          }

        <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">ArrayLength</a>(_) =&gt;
          <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165485">Ldlen</a></span>)

        <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.StartConcat</span><a href="../icode/Primitives.scala.html#32428">StartConcat</a></span> =&gt;
          <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.ConstructorInfo)Unit</span><a id="162530">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165435">Newobj</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.ConstructorInfo</span><a href="#161585">MSTRING_BUILDER_CONSTR</a></span>)


        <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">StringConcat</a>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.TypeKind</span><a id="168300">el</a></span>) =&gt;
          <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a id="168301">elemType</a></span> : <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a id="34226">MsilType</a></span> = <span class="typed"><span class="type">GenMSIL.this.global.icodes.TypeKind</span><a href="#168300">el</a></span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><span class="keyword">match</span></span> {
            <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><span class="keyword">case</span></span> <a id="1">REFERENCE</a>(_) | <a id="1">ARRAY</a>(_) =&gt; <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35360">MOBJECT</a></span>
            <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><span class="keyword">case</span></span> _ =&gt; <span class="typed"><span class="type">(GenMSIL.this.global.icodes.TypeKind)ch.epfl.lamp.compiler.msil.Type</span><a href="#161749">msilType</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.TypeKind</span><a href="#168300">el</a></span>)
          }

          <span class="keyword">val</span> <span class="typed"><span class="type">Array[ch.epfl.lamp.compiler.msil.Type]</span><a id="168302">argTypes</a></span>:<span class="typed"><span class="type">Array[ch.epfl.lamp.compiler.msil.Type]</span><a id="1072">Array</a></span>[MsilType] = <span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.Type*)Array[ch.epfl.lamp.compiler.msil.Type]</span><span id="21530"><a id="1073">Array</a></span></span>(<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a href="#168301">elemType</a></span>)
          <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.MethodInfo</span><a id="168303">stringBuilderAppend</a></span> = <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="#161583">MSTRING_BUILDER</a></span>.<span class="typed"><span class="type">(java.lang.String,Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.MethodInfo</span><a id="35245">GetMethod</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;Append&quot;)</span><span class="string">&quot;Append&quot;</span></span>, <span class="typed"><span class="type">Array[ch.epfl.lamp.compiler.msil.Type]</span><a href="#168302">argTypes</a></span> )
          <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.MethodInfo)Unit</span><a id="162539">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165427">Callvirt</a></span>,  <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.MethodInfo</span><a href="#168303">stringBuilderAppend</a></span>)

        <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.EndConcat</span><a href="../icode/Primitives.scala.html#32430">EndConcat</a></span> =&gt;
          <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.MethodInfo)Unit</span><a id="162539">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165427">Callvirt</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.MethodInfo</span><a href="#161587">MSTRING_BUILDER_TOSTRING</a></span>)

        <span class="typed"><span class="type">Nothing</span><span class="keyword">case</span></span> _ =&gt;
          <span class="typed"><span class="type">(String)Nothing</span><a href="../../Global.scala.html#21214">abort</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;Unimplemented primitive &quot;)</span><span class="string">&quot;Unimplemented primitive &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.Primitive</span><a href="#167058">primitive</a></span>)
      }
    }


    <span class="comment">////////////////////// loading ///////////////////////</span>

    <span class="keyword">def</span> <span class="typed"><span class="type">(Int,ch.epfl.lamp.compiler.msil.emit.ILGenerator)Unit</span><a id="161728">loadI4</a></span>(<span class="typed"><span class="type">Int</span><a id="166819">value</a></span>: <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span>, <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a id="166820">code</a></span>: <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a id="83453">ILGenerator</a></span>): <span class="typed"><span class="type">Unit</span><a id="2169">Unit</a></span> = <span class="typed"><span class="type">Int</span><a href="#166819">value</a></span> <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
      <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> -<span class="typed"><span class="type">Int(-1)</span><span class="int">1</span></span> =&gt; <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#166820">code</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165251">Ldc_I4_M1</a></span>)
      <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>  =&gt; <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#166820">code</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165253">Ldc_I4_0</a></span>)
      <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>  =&gt; <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#166820">code</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165255">Ldc_I4_1</a></span>)
      <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Int(2)</span><span class="int">2</span></span>  =&gt; <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#166820">code</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165257">Ldc_I4_2</a></span>)
      <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Int(3)</span><span class="int">3</span></span>  =&gt; <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#166820">code</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165259">Ldc_I4_3</a></span>)
      <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Int(4)</span><span class="int">4</span></span>  =&gt; <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#166820">code</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165261">Ldc_I4_4</a></span>)
      <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Int(5)</span><span class="int">5</span></span>  =&gt; <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#166820">code</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165263">Ldc_I4_5</a></span>)
      <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Int(6)</span><span class="int">6</span></span>  =&gt; <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#166820">code</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165265">Ldc_I4_6</a></span>)
      <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Int(7)</span><span class="int">7</span></span>  =&gt; <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#166820">code</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165267">Ldc_I4_7</a></span>)
      <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Int(8)</span><span class="int">8</span></span>  =&gt; <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#166820">code</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165269">Ldc_I4_8</a></span>)
      <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> _  =&gt;
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#166819">value</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3146">&gt;=</a></span> -<span class="typed"><span class="type">Int(-128)</span><span class="int">128</span></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">Int</span><a href="#166819">value</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3144">&lt;=</a></span> <span class="typed"><span class="type">Int(127)</span><span class="int">127</span></span>)
          <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#166820">code</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,Int)Unit</span><a id="162535">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165271">Ldc_I4_S</a></span>, <span class="typed"><span class="type">Int</span><a href="#166819">value</a></span>)
        <span class="keyword">else</span>
          <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#166820">code</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,Int)Unit</span><a id="162535">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165273">Ldc_I4</a></span>, <span class="typed"><span class="type">Int</span><a href="#166819">value</a></span>)
    }

    <span class="keyword">def</span> <span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.ILGenerator)(Int)Unit</span><a id="161729">loadArg</a></span>(<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a id="166887">code</a></span>: <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a id="83453">ILGenerator</a></span>)(<span class="typed"><span class="type">Int</span><a id="166888">i</a></span>: <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span>) = <span class="typed"><span class="type">Int</span><a href="#166888">i</a></span> <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
      <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span> =&gt; <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#166887">code</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165213">Ldarg_0</a></span>)
      <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span> =&gt; <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#166887">code</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165215">Ldarg_1</a></span>)
      <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Int(2)</span><span class="int">2</span></span> =&gt; <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#166887">code</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165217">Ldarg_2</a></span>)
      <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Int(3)</span><span class="int">3</span></span> =&gt; <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#166887">code</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165219">Ldarg_3</a></span>)
      <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> _      =&gt;
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#166888">i</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3146">&gt;=</a></span> -<span class="typed"><span class="type">Int(-128)</span><span class="int">128</span></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">Int</span><a href="#166888">i</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3144">&lt;=</a></span> <span class="typed"><span class="type">Int(127)</span><span class="int">127</span></span>)
          <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#166887">code</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,Int)Unit</span><a id="162535">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165237">Ldarg_S</a></span>, <span class="typed"><span class="type">Int</span><a href="#166888">i</a></span>)
        <span class="keyword">else</span>
          <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#166887">code</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,Int)Unit</span><a id="162535">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165601">Ldarg</a></span>, <span class="typed"><span class="type">Int</span><a href="#166888">i</a></span>)
    }

    <span class="keyword">def</span> <span class="typed"><span class="type">(Int,GenMSIL.this.global.icodes.Local,ch.epfl.lamp.compiler.msil.emit.ILGenerator)Unit</span><a id="161730">loadLocal</a></span>(<span class="typed"><span class="type">Int</span><a id="166912">i</a></span>: <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.icodes.Local</span><a id="166913">local</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.icodes.Local</span><a href="../icode/Members.scala.html#32333">Local</a></span>, <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a id="166914">code</a></span>: <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a id="83453">ILGenerator</a></span>) = <span class="typed"><span class="type">Int</span><a href="#166912">i</a></span> <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
      <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span> =&gt; <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#166914">code</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165221">Ldloc_0</a></span>)
      <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span> =&gt; <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#166914">code</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165223">Ldloc_1</a></span>)
      <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Int(2)</span><span class="int">2</span></span> =&gt; <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#166914">code</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165225">Ldloc_2</a></span>)
      <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Int(3)</span><span class="int">3</span></span> =&gt; <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#166914">code</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165227">Ldloc_3</a></span>)
      <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> _      =&gt;
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#166912">i</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3146">&gt;=</a></span> -<span class="typed"><span class="type">Int(-128)</span><span class="int">128</span></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">Int</span><a href="#166912">i</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3144">&lt;=</a></span> <span class="typed"><span class="type">Int(127)</span><span class="int">127</span></span>)
          <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#166914">code</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.emit.LocalBuilder)Unit</span><a id="162531">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165241">Ldloc_S</a></span>, <span class="typed"><span class="type">(GenMSIL.this.global.icodes.Local)ch.epfl.lamp.compiler.msil.emit.LocalBuilder</span><a href="#161746" id="24239">localBuilders</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.Local</span><a href="#166913">local</a></span>))
        <span class="keyword">else</span>
          <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#166914">code</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.emit.LocalBuilder)Unit</span><a id="162531">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165605">Ldloc</a></span>, <span class="typed"><span class="type">(GenMSIL.this.global.icodes.Local)ch.epfl.lamp.compiler.msil.emit.LocalBuilder</span><a href="#161746" id="24239">localBuilders</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.Local</span><a href="#166913">local</a></span>))
    }

    <span class="comment">////////////////////// labels ///////////////////////</span>


    <span class="keyword">val</span> <span class="typed"><span class="type">scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.BasicBlock,ch.epfl.lamp.compiler.msil.emit.Label]</span><span id="161732"><a id="161731">labels</a></span></span>: <span class="typed"><span class="type">scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.BasicBlock,ch.epfl.lamp.compiler.msil.emit.Label]</span><a id="20081">HashMap</a></span>[BasicBlock, Label] = <span class="typed"><span class="type">scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.BasicBlock,ch.epfl.lamp.compiler.msil.emit.Label]</span><span class="keyword">new</span></span> <span class="typed"><span class="type">scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.BasicBlock,ch.epfl.lamp.compiler.msil.emit.Label]</span><a id="20081">HashMap</a></span>() <span class="comment">// labels for branches</span>

    <span class="keyword">def</span> <span class="typed"><span class="type">(GenMSIL.this.global.icodes.TestOp,ch.epfl.lamp.compiler.msil.emit.Label,Boolean)Unit</span><a id="161733">emitBr</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.TestOp</span><a id="168150">condition</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.icodes.TestOp</span><a href="../icode/Primitives.scala.html#32440">TestOp</a></span>, <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.Label</span><a id="168151">dest</a></span>: <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.Label</span><a id="83507">Label</a></span>, <span class="typed"><span class="type">Boolean</span><a id="168152">isFloat</a></span>: <span class="typed"><span class="type">Boolean</span><a id="2170">Boolean</a></span>) {
      <span class="typed"><span class="type">GenMSIL.this.global.icodes.TestOp</span><a href="#168150">condition</a></span> <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
        <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.EQ</span><a href="../icode/Primitives.scala.html#32441">EQ</a></span> =&gt; <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.emit.Label)Unit</span><a id="162537">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165325">Beq</a></span>, <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.Label</span><a href="#168151">dest</a></span>)
        <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.NE</span><a href="../icode/Primitives.scala.html#32443">NE</a></span> =&gt; <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.emit.Label)Unit</span><a id="162537">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165335">Bne_Un</a></span>, <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.Label</span><a href="#168151">dest</a></span>)
        <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.LT</span><a href="../icode/Primitives.scala.html#32445">LT</a></span> =&gt; <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.emit.Label)Unit</span><a id="162537">Emit</a></span>(<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.OpCode</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Boolean</span><a href="#168152">isFloat</a></span>) <span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165343">Blt_Un</a></span> <span class="keyword">else</span> <span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165333">Blt</a></span>, <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.Label</span><a href="#168151">dest</a></span>)
        <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.GE</span><a href="../icode/Primitives.scala.html#32447">GE</a></span> =&gt; <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.emit.Label)Unit</span><a id="162537">Emit</a></span>(<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.OpCode</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Boolean</span><a href="#168152">isFloat</a></span>) <span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165337">Bge_Un</a></span> <span class="keyword">else</span> <span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165327">Bge</a></span>, <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.Label</span><a href="#168151">dest</a></span>)
        <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.LE</span><a href="../icode/Primitives.scala.html#32449">LE</a></span> =&gt; <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.emit.Label)Unit</span><a id="162537">Emit</a></span>(<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.OpCode</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Boolean</span><a href="#168152">isFloat</a></span>) <span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165341">Ble_Un</a></span> <span class="keyword">else</span> <span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165331">Ble</a></span>, <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.Label</span><a href="#168151">dest</a></span>)
        <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.GT</span><a href="../icode/Primitives.scala.html#32451">GT</a></span> =&gt; <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.emit.Label)Unit</span><a id="162537">Emit</a></span>(<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.OpCode</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Boolean</span><a href="#168152">isFloat</a></span>) <span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165339">Bgt_Un</a></span> <span class="keyword">else</span> <span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165329">Bgt</a></span>, <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.Label</span><a href="#168151">dest</a></span>)
      }
    }

    <span class="keyword">def</span> <span class="typed"><span class="type">(GenMSIL.this.global.icodes.TestOp,ch.epfl.lamp.compiler.msil.emit.Label)Unit</span><a id="161734">emitBrBool</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.TestOp</span><a id="168178">cond</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.icodes.TestOp</span><a href="../icode/Primitives.scala.html#32440">TestOp</a></span>, <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.Label</span><a id="168179">dest</a></span>: <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.Label</span><a id="83507">Label</a></span>) {
      <span class="typed"><span class="type">GenMSIL.this.global.icodes.TestOp</span><a href="#168178">cond</a></span> <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
        <span class="comment">// EQ -&gt; Brfalse, NE -&gt; Brtrue; this is because we come from</span>
        <span class="comment">// a CZJUMP. If the value on the stack is 0 (e.g. a boolen</span>
        <span class="comment">// method returned false), and we are in the case EQ, then</span>
        <span class="comment">// we need to emit Brfalse (EQ Zero means false). vice versa</span>
        <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.EQ</span><a href="../icode/Primitives.scala.html#32441">EQ</a></span> =&gt; <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.emit.Label)Unit</span><a id="162537">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165321">Brfalse</a></span>, <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.Label</span><a href="#168179">dest</a></span>)
        <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.NE</span><a href="../icode/Primitives.scala.html#32443">NE</a></span> =&gt; <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.emit.Label)Unit</span><a id="162537">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165323">Brtrue</a></span>, <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.Label</span><a href="#168179">dest</a></span>)
      }
    }

    <span class="keyword">def</span> <span class="typed"><span class="type">(List[GenMSIL.this.global.icodes.BasicBlock])Unit</span><a id="161735">makeLabels</a></span>(<span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a id="165829">bs</a></span>: <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a id="526">List</a></span>[BasicBlock]) {
      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="../../Global.scala.html#21157">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting</span><a href="../../Settings.scala.html#30066">debug</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting#T</span><a href="../../Settings.scala.html#30301">value</a></span>)
        <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;Making labels for: &quot;)</span><span class="string">&quot;Making labels for: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.IMethod</span><a href="#161632">method</a></span>)
      <span class="keyword">for</span> (<span class="typed"><span class="type">((GenMSIL.this.global.icodes.BasicBlock) =&gt; Unit)Unit</span><span id="21366"><a id="168639">bb</a></span></span> &lt;- <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.BasicBlock]</span><a href="#165829">bs</a></span>) <span class="typed"><span class="type">=&gt; scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.BasicBlock,ch.epfl.lamp.compiler.msil.emit.Label]</span><a href="#161731">labels</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.BasicBlock</span><a href="#168639">bb</a></span>) = <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">()ch.epfl.lamp.compiler.msil.emit.Label</span><a id="162548">DefineLabel</a></span>()
    }

    <span class="comment">////////////////////// local vars ///////////////////////</span>

    <span class="comment">/**
     * Compute the indexes of each local variable of the given
     * method.
     */</span>
    <span class="keyword">def</span> <span class="typed"><span class="type">(GenMSIL.this.global.icodes.IMethod)Unit</span><a id="161736">computeLocalVarsIndex</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.IMethod</span><a id="165748">m</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.icodes.IMethod</span><a href="../icode/Members.scala.html#32332">IMethod</a></span>) {
      <span class="keyword">val</span> <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.Local]</span><a id="168640">params</a></span> = <span class="typed"><span class="type">GenMSIL.this.global.icodes.IMethod</span><a href="#165748">m</a></span>.<span class="typed"><span class="type">=&gt; List[GenMSIL.this.global.icodes.Local]</span><a href="../icode/Members.scala.html#32888">params</a></span>
      <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="168641">idx</a></span> = <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">GenMSIL.this.global.icodes.IMethod</span><a href="#165748">m</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Symbol</span><a href="../icode/Members.scala.html#32864">symbol</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../../symtab/Symbols.scala.html#25195">isStaticMember</a></span>)
        <span class="typed"><span class="type">Int</span><a href="#168641">idx</a></span> = <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>

      <span class="keyword">for</span> (<span class="typed"><span class="type">((GenMSIL.this.global.icodes.Local) =&gt; Unit)Unit</span><span id="21366"><a id="168644">l</a></span></span> &lt;- <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.Local]</span><a href="#168640">params</a></span>) {
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="../../Global.scala.html#21157">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting</span><a href="../../Settings.scala.html#30066">debug</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting#T</span><a href="../../Settings.scala.html#30301">value</a></span>)
          <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;Index value for parameter &quot;)</span><span class="string">&quot;Index value for parameter &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.Local</span><a href="#168644">l</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;: &quot;)</span><span class="string">&quot;: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">Int</span><a href="#168641">idx</a></span>)
        <span class="typed"><span class="type">GenMSIL.this.global.icodes.Local</span><a href="#168644">l</a></span>.<span class="typed"><span class="type">(Int)Unit</span><a href="../icode/Members.scala.html#33254">index</a></span> = <span class="typed"><span class="type">Int</span><a href="#168641">idx</a></span>
        <span class="typed"><span class="type">Int</span><a href="#168641">idx</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">+=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span> <span class="comment">// sizeOf(l.kind)</span>
      }

      <span class="keyword">val</span> <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.Local]</span><a id="168642">locvars</a></span> = <span class="typed"><span class="type">GenMSIL.this.global.icodes.IMethod</span><a href="#165748">m</a></span>.<span class="typed"><span class="type">=&gt; List[GenMSIL.this.global.icodes.Local]</span><a href="../icode/Members.scala.html#32885">locals</a></span> <span class="typed"><span class="type">(List[GenMSIL.this.global.icodes.Local])List[GenMSIL.this.global.icodes.Local]</span><a id="21399">--</a></span> <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.Local]</span><a href="#168640">params</a></span>
      <span class="typed"><span class="type">Int</span><a href="#168641">idx</a></span> = <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>

      <span class="keyword">for</span> (<span class="typed"><span class="type">((GenMSIL.this.global.icodes.Local) =&gt; Unit)Unit</span><span id="21366"><a id="168672">l</a></span></span> &lt;- <span class="typed"><span class="type">List[GenMSIL.this.global.icodes.Local]</span><a href="#168642">locvars</a></span>) {
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="../../Global.scala.html#21157">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting</span><a href="../../Settings.scala.html#30066">debug</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting#T</span><a href="../../Settings.scala.html#30301">value</a></span>)
          <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;Index value for local variable &quot;)</span><span class="string">&quot;Index value for local variable &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.Local</span><a href="#168672">l</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;: &quot;)</span><span class="string">&quot;: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">Int</span><a href="#168641">idx</a></span>)
        <span class="typed"><span class="type">GenMSIL.this.global.icodes.Local</span><a href="#168672">l</a></span>.<span class="typed"><span class="type">(Int)Unit</span><a href="../icode/Members.scala.html#33254">index</a></span> = <span class="typed"><span class="type">Int</span><a href="#168641">idx</a></span>
        <span class="typed"><span class="type">Int</span><a href="#168641">idx</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">+=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span> <span class="comment">// sizeOf(l.kind)</span>
      }

    }

    <span class="comment">////////////////////// Utilities ////////////////////////</span>

    <span class="comment">/** Return the a name of this symbol that can be used on the .NET
     * platform. It removes spaces from names.
     *
     * Special handling: scala.All and scala.AllRef are 'erased' to
     * scala.All$ and scala.AllRef$. This is needed because they are
     * not real classes, and they mean 'abrupt termination upon evaluation
     * of that expression' or 'null' respectively. This handling is
     * done already in GenICode, but here we need to remove references
     * from method signatures to these types, because such classes can
     * not exist in the classpath: the type checker will be very confused.
     */</span>
    <span class="keyword">def</span> <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)String</span><a id="161737">msilName</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a id="163326">sym</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="../../symtab/Symbols.scala.html#21866">Symbol</a></span>): <span class="typed"><span class="type">String</span><a id="1861">String</a></span> = {
      <span class="keyword">val</span> <span class="typed"><span class="type">String</span><a id="168697">suffix</a></span>: <span class="typed"><span class="type">String</span><a id="1861">String</a></span> = <span class="typed"><span class="type">String</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#163326">sym</a></span>.<span class="typed"><span class="type">(Long)Boolean</span><a href="../../symtab/Symbols.scala.html#25223">hasFlag</a></span>(Flags.<span class="typed"><span class="type">Long(256L)</span><span >MODULE</span></span>) <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#163326">sym</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../../symtab/Symbols.scala.html#25142">isMethod</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span>
                               <span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#163326">sym</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../../symtab/Symbols.scala.html#25189">isImplClass</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span>
                               <span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#163326">sym</a></span>.<span class="typed"><span class="type">(Long)Boolean</span><a href="../../symtab/Symbols.scala.html#25223">hasFlag</a></span>(Flags.<span class="typed"><span class="type">Long(1048576L)</span><span >JAVA</span></span>)) <span class="typed"><span class="type">java.lang.String(&quot;$&quot;)</span><span class="string">&quot;$&quot;</span></span> <span class="keyword">else</span> <span class="typed"><span class="type">java.lang.String(&quot;&quot;)</span><span class="string">&quot;&quot;</span></span>
      <span class="comment">// Flags.JAVA: &quot;symbol was not defined by a scala-class&quot; (java, or .net-class)</span>

      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#163326">sym</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">object GenMSIL.this.global.definitions</span><a href="../../symtab/Definitions.scala.html#22259">definitions</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="../../symtab/Definitions.scala.html#25785">NothingClass</a></span>)
        <span class="typed"><span class="type">Nothing</span><span class="keyword">return</span></span> <span class="typed"><span class="type">java.lang.String(&quot;scala.runtime.Nothing$&quot;)</span><span class="string">&quot;scala.runtime.Nothing$&quot;</span></span>
      <span class="keyword">else</span> <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#163326">sym</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">object GenMSIL.this.global.definitions</span><a href="../../symtab/Definitions.scala.html#22259">definitions</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="../../symtab/Definitions.scala.html#25782">NullClass</a></span>)
        <span class="typed"><span class="type">Nothing</span><span class="keyword">return</span></span> <span class="typed"><span class="type">java.lang.String(&quot;scala.runtime.Null$&quot;)</span><span class="string">&quot;scala.runtime.Null$&quot;</span></span>

      (<span class="typed"><span class="type">String</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#163326">sym</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../../symtab/Symbols.scala.html#25129">isClass</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2750">||</a></span> (<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#163326">sym</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../../symtab/Symbols.scala.html#25149">isModule</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#163326">sym</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../../symtab/Symbols.scala.html#25142">isMethod</a></span>))
        <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#163326">sym</a></span>.<span class="typed"><span class="type">=&gt; String</span><a href="../../symtab/Symbols.scala.html#25313">fullNameString</a></span>
       <span class="keyword">else</span>
         <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#163326">sym</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Name</span><a href="../../symtab/Symbols.scala.html#25307">simpleName</a></span>.<span class="typed"><span class="type">()String</span><a href="../../symtab/Names.scala.html#23898">toString</a></span>().<span class="typed"><span class="type">()java.lang.String</span><a id="5870">trim</a></span>()) <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">String</span><a href="#168697">suffix</a></span>
    }


    <span class="comment">////////////////////// flags ///////////////////////</span>

    <span class="keyword">def</span> <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)Int</span><a id="161738">msilTypeFlags</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a id="168702">sym</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="../../symtab/Symbols.scala.html#21866">Symbol</a></span>): <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span> = {
      <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="168703">mf</a></span>: <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span> = TypeAttributes.AutoLayout <span class="typed"><span class="type">Int(0)</span><span >|</span></span> TypeAttributes.AnsiClass

      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#168702">sym</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../../symtab/Symbols.scala.html#25201">isNestedClass</a></span>) {
        <span class="typed"><span class="type">Int</span><a href="#168703">mf</a></span> = <span class="typed"><span class="type">Int</span><a href="#168703">mf</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3152">|</a></span> (<span class="typed"><span class="type">Int</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#168702">sym</a></span> <span class="typed"><span class="type">(Long)Boolean</span><a href="../../symtab/Symbols.scala.html#25223">hasFlag</a></span> Flags.<span class="typed"><span class="type">Long(4L)</span><span >PRIVATE</span></span>) TypeAttributes.<span class="typed"><span class="type">Int(3)</span><span >NestedPrivate</span></span> <span class="keyword">else</span> TypeAttributes.<span class="typed"><span class="type">Int(2)</span><span >NestedPublic</span></span>)
      } <span class="keyword">else</span> {
        <span class="typed"><span class="type">Int</span><a href="#168703">mf</a></span> = <span class="typed"><span class="type">Int</span><a href="#168703">mf</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3152">|</a></span> (<span class="typed"><span class="type">Int</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#168702">sym</a></span> <span class="typed"><span class="type">(Long)Boolean</span><a href="../../symtab/Symbols.scala.html#25223">hasFlag</a></span> Flags.<span class="typed"><span class="type">Long(4L)</span><span >PRIVATE</span></span>) TypeAttributes.<span class="typed"><span class="type">Int(0)</span><span >NotPublic</span></span> <span class="keyword">else</span> TypeAttributes.<span class="typed"><span class="type">Int(1)</span><span >Public</span></span>)
      }
      <span class="typed"><span class="type">Int</span><a href="#168703">mf</a></span> = <span class="typed"><span class="type">Int</span><a href="#168703">mf</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3152">|</a></span> (<span class="typed"><span class="type">Int</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#168702">sym</a></span> <span class="typed"><span class="type">(Long)Boolean</span><a href="../../symtab/Symbols.scala.html#25223">hasFlag</a></span> Flags.<span class="typed"><span class="type">Long(8L)</span><span >ABSTRACT</span></span>) TypeAttributes.<span class="typed"><span class="type">Int(128)</span><span >Abstract</span></span> <span class="keyword">else</span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>)
      <span class="typed"><span class="type">Int</span><a href="#168703">mf</a></span> = <span class="typed"><span class="type">Int</span><a href="#168703">mf</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3152">|</a></span> (<span class="typed"><span class="type">Int</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#168702">sym</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../../symtab/Symbols.scala.html#25155">isTrait</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#168702">sym</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../../symtab/Symbols.scala.html#25189">isImplClass</a></span>) TypeAttributes.<span class="typed"><span class="type">Int(32)</span><span >Interface</span></span> <span class="keyword">else</span> TypeAttributes.<span class="typed"><span class="type">Int(0)</span><span >Class</span></span>)
      <span class="typed"><span class="type">Int</span><a href="#168703">mf</a></span> = <span class="typed"><span class="type">Int</span><a href="#168703">mf</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3152">|</a></span> (<span class="typed"><span class="type">Int</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#168702">sym</a></span> <span class="typed"><span class="type">=&gt; Boolean</span><a href="../../symtab/Symbols.scala.html#25197">isFinal</a></span>) TypeAttributes.<span class="typed"><span class="type">Int(256)</span><span >Sealed</span></span> <span class="keyword">else</span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>)

      <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#168702">sym</a></span>.<span class="typed"><span class="type">=&gt; List[GenMSIL.this.global.AnnotationInfo]</span><a href="../../symtab/Symbols.scala.html#25090">attributes</a></span> <span class="typed"><span class="type">((GenMSIL.this.global.AnnotationInfo) =&gt; Unit)Unit</span><a id="21366">foreach</a></span> { <span class="typed"><span class="type">GenMSIL.this.global.AnnotationInfo</span><a id="168742">a</a></span> =&gt; <span class="typed"><span class="type">GenMSIL.this.global.AnnotationInfo</span><a href="#168742">a</a></span> <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
        <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">AnnotationInfo</a>(<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Type</span><a href="#161620">SerializableAttr</a></span>, _, _) =&gt;
          <span class="comment">// TODO: add the Serializable TypeAttribute also if the attribute</span>
          <span class="comment">// System.SerializableAttribute is present (.net attribute, not scala)</span>
          <span class="comment">//  Best way to do it: compare with</span>
          <span class="comment">//  definitions.getClass(&quot;System.SerializableAttribute&quot;).tpe</span>
          <span class="comment">//  when frontend available</span>
          <span class="typed"><span class="type">Int</span><a href="#168703">mf</a></span> = <span class="typed"><span class="type">Int</span><a href="#168703">mf</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3152">|</a></span> TypeAttributes.<span class="typed"><span class="type">Int(8192)</span><span >Serializable</span></span>
        <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> _ =&gt; <span class="typed"><span class="type">Unit</span><span >(</span></span>)
      }}

      <span class="typed"><span class="type">Int</span><a href="#168703">mf</a></span>
      <span class="comment">// static: not possible (or?)</span>
    }

    <span class="keyword">def</span> <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)Short</span><a id="161739">msilMethodFlags</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a id="168749">sym</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="../../symtab/Symbols.scala.html#21866">Symbol</a></span>): <span class="typed"><span class="type">Short</span><a id="2384">Short</a></span> = {
      <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="168750">mf</a></span>: <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span> = MethodAttributes.<span class="typed"><span class="type">Short(128)</span><span >HideBySig</span></span> <span class="typed"><span class="type">(Short)Int</span><a id="2906">|</a></span>
        (<span class="typed"><span class="type">Short</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#168749">sym</a></span> <span class="typed"><span class="type">(Long)Boolean</span><a href="../../symtab/Symbols.scala.html#25223">hasFlag</a></span> Flags.<span class="typed"><span class="type">Long(4L)</span><span >PRIVATE</span></span>) MethodAttributes.<span class="typed"><span class="type">Short(1)</span><span >Private</span></span>
         <span class="keyword">else</span> MethodAttributes.<span class="typed"><span class="type">Short(6)</span><span >Public</span></span>)

      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#168749">sym</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../../symtab/Symbols.scala.html#25146">isClassConstructor</a></span>) {
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#168749">sym</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../../symtab/Symbols.scala.html#25195">isStaticMember</a></span>)
          <span class="typed"><span class="type">Int</span><a href="#168750">mf</a></span> = <span class="typed"><span class="type">Int</span><a href="#168750">mf</a></span> <span class="typed"><span class="type">(Short)Int</span><a id="3124">|</a></span> FieldAttributes.<span class="typed"><span class="type">Short(16)</span><span >Static</span></span>
        <span class="keyword">else</span> {
          <span class="typed"><span class="type">Int</span><a href="#168750">mf</a></span> = <span class="typed"><span class="type">Int</span><a href="#168750">mf</a></span> <span class="typed"><span class="type">(Short)Int</span><a id="3124">|</a></span> MethodAttributes.<span class="typed"><span class="type">Short(64)</span><span >Virtual</span></span>
          <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#168749">sym</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../../symtab/Symbols.scala.html#25197">isFinal</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">(GenMSIL.this.global.loaders.clrTypes.global.Symbol)ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35387" id="24239">types</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#168749">sym</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="../../symtab/Symbols.scala.html#25211">owner</a></span>.<span class="typed"><span class="type">GenMSIL.this.global.loaders.clrTypes.global.Symbol</span><a id="3503">asInstanceOf</a></span>[clrTypes.global.<span class="typed"><span class="type">GenMSIL.this.global.loaders.clrTypes.global.Symbol</span><a href="../../symtab/Symbols.scala.html#21866">Symbol</a></span>]).<span class="typed"><span class="type">()Boolean</span><a id="35215">IsInterface</a></span>)
            <span class="typed"><span class="type">Int</span><a href="#168750">mf</a></span> = <span class="typed"><span class="type">Int</span><a href="#168750">mf</a></span> <span class="typed"><span class="type">(Short)Int</span><a id="3124">|</a></span> MethodAttributes.<span class="typed"><span class="type">Short(32)</span><span >Final</span></span>
          <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#168749">sym</a></span>.<span class="typed"><span class="type">(Long)Boolean</span><a href="../../symtab/Symbols.scala.html#25223">hasFlag</a></span>(Flags.<span class="typed"><span class="type">Long(16L)</span><span >DEFERRED</span></span>) <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2750">||</a></span> <span class="typed"><span class="type">(GenMSIL.this.global.loaders.clrTypes.global.Symbol)ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35387" id="24239">types</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#168749">sym</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="../../symtab/Symbols.scala.html#25211">owner</a></span>.<span class="typed"><span class="type">GenMSIL.this.global.loaders.clrTypes.global.Symbol</span><a id="3503">asInstanceOf</a></span>[clrTypes.global.<span class="typed"><span class="type">GenMSIL.this.global.loaders.clrTypes.global.Symbol</span><a href="../../symtab/Symbols.scala.html#21866">Symbol</a></span>]).<span class="typed"><span class="type">()Boolean</span><a id="35215">IsInterface</a></span>)
            <span class="typed"><span class="type">Int</span><a href="#168750">mf</a></span> = <span class="typed"><span class="type">Int</span><a href="#168750">mf</a></span> <span class="typed"><span class="type">(Short)Int</span><a id="3124">|</a></span> MethodAttributes.<span class="typed"><span class="type">Short(1024)</span><span >Abstract</span></span>
        }
      }

      <span class="typed"><span class="type">Int</span><a href="#168750">mf</a></span>.<span class="typed"><span class="type">=&gt; Short</span><a id="3083">toShort</a></span>
    }

    <span class="keyword">def</span> <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)Short</span><a id="161740">msilFieldFlags</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a id="168787">sym</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="../../symtab/Symbols.scala.html#21866">Symbol</a></span>): <span class="typed"><span class="type">Short</span><a id="2384">Short</a></span> = {
      <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="168788">mf</a></span>: <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span> =
        <span class="typed"><span class="type">Int</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#168787">sym</a></span> <span class="typed"><span class="type">(Long)Boolean</span><a href="../../symtab/Symbols.scala.html#25223">hasFlag</a></span> Flags.<span class="typed"><span class="type">Long(4L)</span><span >PRIVATE</span></span>) FieldAttributes.<span class="typed"><span class="type">Int(1)</span><span >Private</span></span>
        <span class="keyword">else</span> <span class="typed"><span class="type">Int</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#168787">sym</a></span> <span class="typed"><span class="type">(Long)Boolean</span><a href="../../symtab/Symbols.scala.html#25223">hasFlag</a></span> Flags.<span class="typed"><span class="type">Long(1L)</span><span >PROTECTED</span></span>) FieldAttributes.<span class="typed"><span class="type">Int(5)</span><span >FamORAssem</span></span>
        <span class="keyword">else</span> FieldAttributes.<span class="typed"><span class="type">Int(6)</span><span >Public</span></span>

      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#168787">sym</a></span> <span class="typed"><span class="type">(Long)Boolean</span><a href="../../symtab/Symbols.scala.html#25223">hasFlag</a></span> Flags.<span class="typed"><span class="type">Long(32L)</span><span >FINAL</span></span>)
        <span class="typed"><span class="type">Int</span><a href="#168788">mf</a></span> = <span class="typed"><span class="type">Int</span><a href="#168788">mf</a></span> <span class="typed"><span class="type">(Short)Int</span><a id="3124">|</a></span> FieldAttributes.<span class="typed"><span class="type">Short(32)</span><span >InitOnly</span></span>

      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#168787">sym</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../../symtab/Symbols.scala.html#25195">isStaticMember</a></span>)
        <span class="typed"><span class="type">Int</span><a href="#168788">mf</a></span> = <span class="typed"><span class="type">Int</span><a href="#168788">mf</a></span> <span class="typed"><span class="type">(Short)Int</span><a id="3124">|</a></span> FieldAttributes.<span class="typed"><span class="type">Short(16)</span><span >Static</span></span>

      <span class="comment">// TRANSIENT: &quot;not nerialized&quot;, VOLATILE: doesn't exist on .net</span>
      <span class="comment">// TODO: add this attribute also if the class has the custom attribute</span>
      <span class="comment">// System.NotSerializedAttribute</span>
      <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#168787">sym</a></span>.<span class="typed"><span class="type">=&gt; List[GenMSIL.this.global.AnnotationInfo]</span><a href="../../symtab/Symbols.scala.html#25090">attributes</a></span>.<span class="typed"><span class="type">((GenMSIL.this.global.AnnotationInfo) =&gt; Unit)Unit</span><a id="21366">foreach</a></span>( <span class="typed"><span class="type">GenMSIL.this.global.AnnotationInfo</span><a id="168803">a</a></span> =&gt; <span class="typed"><span class="type">GenMSIL.this.global.AnnotationInfo</span><a href="#168803">a</a></span> <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
        <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">AnnotationInfo</a>(<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Type</span><a href="#161624">TransientAtt</a></span>, _, _) =&gt;
          <span class="typed"><span class="type">Int</span><a href="#168788">mf</a></span> = <span class="typed"><span class="type">Int</span><a href="#168788">mf</a></span> <span class="typed"><span class="type">(Short)Int</span><a id="3124">|</a></span> FieldAttributes.<span class="typed"><span class="type">Short(128)</span><span >NotSerialized</span></span>
        <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> _ =&gt; <span class="typed"><span class="type">Unit</span><span >(</span></span>)
      })

      <span class="typed"><span class="type">Int</span><a href="#168788">mf</a></span>.<span class="typed"><span class="type">=&gt; Short</span><a id="3083">toShort</a></span>
    }

    <span class="comment">////////////////////// builders, types ///////////////////////</span>

    <span class="keyword">var</span> <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><span id="161743"><span id="161741"><span id="161742"><a id="162726">entryPoint</a></span></span></span></span>: <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="../../symtab/Symbols.scala.html#21866">Symbol</a></span> = _

    <span class="keyword">val</span> <span class="typed"><span class="type">scala.collection.mutable.HashSet[GenMSIL.this.global.Symbol]</span><span id="161745"><a id="161744">notInitializedModules</a></span></span>: <span class="typed"><span class="type">scala.collection.mutable.HashSet[GenMSIL.this.global.Symbol]</span><a id="19895">HashSet</a></span>[Symbol] = <span class="typed"><span class="type">scala.collection.mutable.HashSet[GenMSIL.this.global.Symbol]</span><span class="keyword">new</span></span> <span class="typed"><span class="type">scala.collection.mutable.HashSet[GenMSIL.this.global.Symbol]</span><a id="19895">HashSet</a></span>()

    <span class="comment">// TODO: create fields also in def createType, and not in genClass,</span>
    <span class="comment">// add a getField method (it only works as it is because fields never</span>
    <span class="comment">// accessed from outside a class)</span>

    <span class="keyword">val</span> <span class="typed"><span class="type">scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.Local,ch.epfl.lamp.compiler.msil.emit.LocalBuilder]</span><span id="161747"><a id="161746">localBuilders</a></span></span>: <span class="typed"><span class="type">scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.Local,ch.epfl.lamp.compiler.msil.emit.LocalBuilder]</span><a id="20081">HashMap</a></span>[Local, LocalBuilder] = <span class="typed"><span class="type">scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.Local,ch.epfl.lamp.compiler.msil.emit.LocalBuilder]</span><span class="keyword">new</span></span> <span class="typed"><span class="type">scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.Local,ch.epfl.lamp.compiler.msil.emit.LocalBuilder]</span><a id="20081">HashMap</a></span>()

    <span class="keyword">private</span>[GenMSIL] <span class="keyword">def</span> <span class="typed"><span class="type">(GenMSIL.this.global.icodes.IClass)Unit</span><a id="161748">findEntryPoint</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.IClass</span><a id="161785">cls</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.icodes.IClass</span><a href="../icode/Members.scala.html#32330">IClass</a></span>) {
      <span class="keyword">def</span> <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)Boolean</span><a id="168813">isEntryPoint</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a id="168814">sym</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="../../symtab/Symbols.scala.html#21866">Symbol</a></span>):<span class="typed"><span class="type">Boolean</span><a id="2170">Boolean</a></span> = {
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">(GenMSIL.this.global.Symbol)Boolean</span><a href="#161758">isStaticModule</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#168814">sym</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="../../symtab/Symbols.scala.html#25211">owner</a></span>) <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)String</span><a href="#161737">msilName</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#168814">sym</a></span>) <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">java.lang.String(&quot;main&quot;)</span><span class="string">&quot;main&quot;</span></span>)
          <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#168814">sym</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Type</span><a href="../../symtab/Symbols.scala.html#25230">tpe</a></span>.<span class="typed"><span class="type">=&gt; List[GenMSIL.this.global.Type]</span><a href="../../symtab/Types.scala.html#25668">paramTypes</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21345">length</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3141">==</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>) {
            <span class="typed"><span class="type">(GenMSIL.this.global.icodes.global.Type)GenMSIL.this.global.icodes.TypeKind</span><a href="../icode/TypeKinds.scala.html#32385">toTypeKind</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#168814">sym</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Type</span><a href="../../symtab/Symbols.scala.html#25230">tpe</a></span>.<span class="typed"><span class="type">(Int)GenMSIL.this.global.Type</span><a href="../../symtab/Types.scala.html#25668" id="21361">paramTypes</a></span>(<span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>)) <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
              <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">ARRAY</a>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.TypeKind</span><a id="168824">elem</a></span>) =&gt;
                <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">GenMSIL.this.global.icodes.TypeKind</span><a href="#168824">elem</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Type</span><a href="../icode/TypeKinds.scala.html#33477">toType</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Symbol</span><a href="../../symtab/Types.scala.html#25650">typeSymbol</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">object GenMSIL.this.global.definitions</span><a href="../../symtab/Definitions.scala.html#22259">definitions</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="../../symtab/Definitions.scala.html#25802">StringClass</a></span>){
                  <span class="typed"><span class="type">Nothing</span><span class="keyword">return</span></span> <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>
                }
              <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> _ =&gt; <span class="typed"><span class="type">Unit</span><span >(</span></span>)
            }
          }
        <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>
      }

      <span class="keyword">for</span> (<span class="typed"><span class="type">((GenMSIL.this.global.icodes.IMethod) =&gt; Unit)Unit</span><span id="21366"><a id="168829">m</a></span></span> &lt;- <span class="typed"><span class="type">GenMSIL.this.global.icodes.IClass</span><a href="#161785">cls</a></span>.<span class="typed"><span class="type">=&gt; List[GenMSIL.this.global.icodes.IMethod]</span><a href="../icode/Members.scala.html#32687">methods</a></span>) {
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">(GenMSIL.this.global.Symbol)Boolean</span><a href="#168813">isEntryPoint</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.IMethod</span><a href="#168829">m</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Symbol</span><a href="../icode/Members.scala.html#32864">symbol</a></span>)) {
          <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="#161741">entryPoint</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>)
            <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)Unit</span><a href="#161742">entryPoint</a></span> = <span class="typed"><span class="type">GenMSIL.this.global.icodes.IMethod</span><a href="#168829">m</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Symbol</span><a href="../icode/Members.scala.html#32864">symbol</a></span>
        }
      }
      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; java.lang.String</span><a href="#161650">firstSourceName</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">java.lang.String(&quot;&quot;)</span><span class="string">&quot;&quot;</span></span>)
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">GenMSIL.this.global.icodes.IClass</span><a href="#161785">cls</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Symbol</span><a href="../icode/Members.scala.html#32681">symbol</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.io.AbstractFile</span><a href="../../symtab/Symbols.scala.html#25301">sourceFile</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5793">!=</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>) <span class="comment">// is null for nested classes</span>
          <span class="typed"><span class="type">(java.lang.String)Unit</span><a href="#161651">firstSourceName</a></span> = <span class="typed"><span class="type">GenMSIL.this.global.icodes.IClass</span><a href="#161785">cls</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Symbol</span><a href="../icode/Members.scala.html#32681">symbol</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.io.AbstractFile</span><a href="../../symtab/Symbols.scala.html#25301">sourceFile</a></span>.<span class="typed"><span class="type">=&gt; String</span><a href="../../io/AbstractFile.scala.html#25439">name</a></span>
    }

    <span class="comment">// #####################################################################</span>
    <span class="comment">// get and create types</span>

    <span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(GenMSIL.this.global.icodes.TypeKind)ch.epfl.lamp.compiler.msil.Type</span><a id="161749">msilType</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.TypeKind</span><a id="165822">t</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.icodes.TypeKind</span><a href="../icode/TypeKinds.scala.html#32353">TypeKind</a></span>): <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a id="34226">MsilType</a></span> = (<span class="typed"><span class="type">GenMSIL.this.global.icodes.TypeKind</span><a href="#165822">t</a></span>: @<span class="typed"><span class="type">GenMSIL.this.global.icodes.TypeKind @unchecked</span><a href="../icode/TypeKinds.scala.html#32353">unchecked</a></span>) <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><span class="keyword">match</span></span> {
      <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.UNIT</span><a href="../icode/TypeKinds.scala.html#32355">UNIT</a></span>           =&gt; <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35351">MVOID</a></span>
      <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.BOOL</span><a href="../icode/TypeKinds.scala.html#32357">BOOL</a></span>           =&gt; <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35348">MBOOL</a></span>
      <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.BYTE</span><a href="../icode/TypeKinds.scala.html#32359">BYTE</a></span>           =&gt; <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35318">MBYTE</a></span>
      <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.SHORT</span><a href="../icode/TypeKinds.scala.html#32361">SHORT</a></span>          =&gt; <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35321">MSHORT</a></span>
      <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.CHAR</span><a href="../icode/TypeKinds.scala.html#32363">CHAR</a></span>           =&gt; <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35327">MCHAR</a></span>
      <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.INT</span><a href="../icode/TypeKinds.scala.html#32365">INT</a></span>            =&gt; <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35330">MINT</a></span>
      <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.LONG</span><a href="../icode/TypeKinds.scala.html#32367">LONG</a></span>           =&gt; <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35336">MLONG</a></span>
      <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.FLOAT</span><a href="../icode/TypeKinds.scala.html#32369">FLOAT</a></span>          =&gt; <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35342">MFLOAT</a></span>
      <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.DOUBLE</span><a href="../icode/TypeKinds.scala.html#32371">DOUBLE</a></span>         =&gt; <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35345">MDOUBLE</a></span>
      <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><span class="keyword">case</span></span> <a id="1">REFERENCE</a>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a id="168836">cls</a></span>) =&gt; <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.Type</span><a href="#161752">getType</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#168836">cls</a></span>)
      <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><span class="keyword">case</span></span> <a id="1">ARRAY</a>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.TypeKind</span><a id="168837">elem</a></span>)    =&gt; <span class="typed"><span class="type">object GenMSIL.this.global.loaders.clrTypes</span><a href="../../symtab/SymbolLoaders.scala.html#34365">clrTypes</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.Type)ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35403">mkArrayType</a></span>(<span class="typed"><span class="type">(GenMSIL.this.global.icodes.TypeKind)ch.epfl.lamp.compiler.msil.Type</span><a href="#161749">msilType</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.TypeKind</span><a href="#168837">elem</a></span>))
    }

    <span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(GenMSIL.this.global.Type)ch.epfl.lamp.compiler.msil.Type</span><a id="161750">msilType</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Type</span><a id="165821">tpe</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.Type</span><a href="../../symtab/Types.scala.html#21944">Type</a></span>): <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a id="34226">MsilType</a></span> = <span class="typed"><span class="type">(GenMSIL.this.global.icodes.TypeKind)ch.epfl.lamp.compiler.msil.Type</span><a href="#161749">msilType</a></span>(<span class="typed"><span class="type">(GenMSIL.this.global.icodes.global.Type)GenMSIL.this.global.icodes.TypeKind</span><a href="../icode/TypeKinds.scala.html#32385">toTypeKind</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Type</span><a href="#165821">tpe</a></span>))

    <span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)Array[ch.epfl.lamp.compiler.msil.Type]</span><a id="161751">msilParamTypes</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a id="168840">sym</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="../../symtab/Symbols.scala.html#21866">Symbol</a></span>): <span class="typed"><span class="type">Array[ch.epfl.lamp.compiler.msil.Type]</span><a id="1072">Array</a></span>[MsilType] = {
      <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#168840">sym</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Type</span><a href="../../symtab/Symbols.scala.html#25230">tpe</a></span>.<span class="typed"><span class="type">=&gt; List[GenMSIL.this.global.Type]</span><a href="../../symtab/Types.scala.html#25668">paramTypes</a></span>.<span class="typed"><span class="type">((GenMSIL.this.global.Type) =&gt; ch.epfl.lamp.compiler.msil.Type)List[ch.epfl.lamp.compiler.msil.Type]</span><a id="21362">map</a></span>(<span class="typed"><span class="type">(GenMSIL.this.global.Type)ch.epfl.lamp.compiler.msil.Type</span><a href="#161750">msilType</a></span>).<span class="typed"><span class="type">Array[ch.epfl.lamp.compiler.msil.Type]</span><a id="21675">toArray</a></span>
    }

    <span class="keyword">def</span> <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.Type</span><a id="161752">getType</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a id="163563">sym</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="../../symtab/Symbols.scala.html#21866">Symbol</a></span>): <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a id="34226">MsilType</a></span> = <span class="typed"><span class="type">=&gt; scala.collection.mutable.Map[GenMSIL.this.global.loaders.clrTypes.global.Symbol,ch.epfl.lamp.compiler.msil.Type]</span><a href="../../symtab/clr/CLRTypes.scala.html#35387">types</a></span>.<span class="typed"><span class="type">(GenMSIL.this.global.loaders.clrTypes.global.Symbol)Option[ch.epfl.lamp.compiler.msil.Type]</span><a id="24235">get</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#163563">sym</a></span>.<span class="typed"><span class="type">GenMSIL.this.global.loaders.clrTypes.global.Symbol</span><a id="3503">asInstanceOf</a></span>[clrTypes.global.<span class="typed"><span class="type">GenMSIL.this.global.loaders.clrTypes.global.Symbol</span><a href="../../symtab/Symbols.scala.html#21866">Symbol</a></span>]) <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><span class="keyword">match</span></span> {
      <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><span class="keyword">case</span></span> <a id="1">Some</a>(<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a id="168852">typ</a></span>) =&gt; <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a href="#168852">typ</a></span>
      <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object None</span><a id="536">None</a></span> =&gt;
        <span class="keyword">val</span> <span class="typed"><span class="type">java.lang.String</span><a id="168853">name</a></span> = <span class="typed"><span class="type">java.lang.String</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#163563">sym</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../../symtab/Symbols.scala.html#25166">isModuleClass</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#163563">sym</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../../symtab/Symbols.scala.html#25155">isTrait</a></span>) <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#163563">sym</a></span>.<span class="typed"><span class="type">=&gt; String</span><a href="../../symtab/Symbols.scala.html#25313">fullNameString</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;$&quot;)</span><span class="string">&quot;$&quot;</span></span>
                   <span class="keyword">else</span> <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#163563">sym</a></span>.<span class="typed"><span class="type">=&gt; String</span><a href="../../symtab/Symbols.scala.html#25313">fullNameString</a></span>
        <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a id="168854">typ</a></span> = <span class="typed"><span class="type">object GenMSIL.this.global.loaders.clrTypes</span><a href="../../symtab/SymbolLoaders.scala.html#34365">clrTypes</a></span>.<span class="typed"><span class="type">(String)ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35401">getType</a></span>(<span class="typed"><span class="type">java.lang.String</span><a href="#168853">name</a></span>)
        <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a href="#168854">typ</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>)
          <span class="typed"><span class="type">Nothing</span><span class="keyword">throw</span></span> <span class="typed"><span class="type">(java.lang.String)java.lang.Error</span><a id="27228" class="keyword">new</a></span> <span class="typed"><span class="type">java.lang.Error</span><span id="5975"><a id="821">Error</a></span></span>(<span class="typed"><span class="type">(GenMSIL.this.global.Symbol)String</span><a href="#161784">showsym</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#163563">sym</a></span>) <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot; with name &quot;)</span><span class="string">&quot; with name &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String</span><a href="#168853">name</a></span>)
        <span class="keyword">else</span> {
          <span class="typed"><span class="type">object GenMSIL.this.global.loaders.clrTypes</span><a href="../../symtab/SymbolLoaders.scala.html#34365">clrTypes</a></span>.<span class="typed"><span class="type">=&gt; scala.collection.mutable.Map[GenMSIL.this.global.loaders.clrTypes.global.Symbol,ch.epfl.lamp.compiler.msil.Type]</span><a href="../../symtab/clr/CLRTypes.scala.html#35387">types</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#163563">sym</a></span>.<span class="typed"><span class="type">GenMSIL.this.global.loaders.clrTypes.global.Symbol</span><a id="3503">asInstanceOf</a></span>[clrTypes.global.<span class="typed"><span class="type">GenMSIL.this.global.loaders.clrTypes.global.Symbol</span><a href="../../symtab/Symbols.scala.html#21866">Symbol</a></span>]) = <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a href="#168854">typ</a></span>
          <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a href="#168854">typ</a></span>
        }
    }

    <span class="keyword">def</span> <span class="typed"><span class="type">(GenMSIL.this.global.Symbol,ch.epfl.lamp.compiler.msil.Type)Unit</span><a id="161753">mapType</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a id="162804">sym</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="../../symtab/Symbols.scala.html#21866">Symbol</a></span>, <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a id="162805">mType</a></span>: <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a id="34226">MsilType</a></span>) {
      <span class="typed"><span class="type">(Boolean,=&gt; Any)Unit</span><span id="6004"><a id="821">assert</a></span></span>(<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a href="#162805">mType</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5793">!=</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>, <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)String</span><a href="#161784">showsym</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#162804">sym</a></span>))
      <span class="typed"><span class="type">=&gt; scala.collection.mutable.Map[GenMSIL.this.global.loaders.clrTypes.global.Symbol,ch.epfl.lamp.compiler.msil.Type]</span><a href="../../symtab/clr/CLRTypes.scala.html#35387">types</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#162804">sym</a></span>.<span class="typed"><span class="type">GenMSIL.this.global.loaders.clrTypes.global.Symbol</span><a id="3503">asInstanceOf</a></span>[clrTypes.global.<span class="typed"><span class="type">GenMSIL.this.global.loaders.clrTypes.global.Symbol</span><a href="../../symtab/Symbols.scala.html#21866">Symbol</a></span>]) = <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a href="#162805">mType</a></span>
    }

    <span class="keyword">def</span> <span class="typed"><span class="type">(GenMSIL.this.global.icodes.IClass)Unit</span><a id="161754">createTypeBuilder</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.IClass</span><a id="161788">iclass</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.icodes.IClass</span><a href="../icode/Members.scala.html#32330">IClass</a></span>) {
      <span class="keyword">def</span> <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.Type</span><a id="168868">msilTypeFromSym</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a id="168874">sym</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="../../symtab/Symbols.scala.html#21866">Symbol</a></span>): <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a id="34226">MsilType</a></span> = {
	<span class="typed"><span class="type">=&gt; scala.collection.mutable.Map[GenMSIL.this.global.loaders.clrTypes.global.Symbol,ch.epfl.lamp.compiler.msil.Type]</span><a href="../../symtab/clr/CLRTypes.scala.html#35387">types</a></span>.<span class="typed"><span class="type">(GenMSIL.this.global.loaders.clrTypes.global.Symbol)Option[ch.epfl.lamp.compiler.msil.Type]</span><a id="24235">get</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#168874">sym</a></span>.<span class="typed"><span class="type">GenMSIL.this.global.loaders.clrTypes.global.Symbol</span><a id="3503">asInstanceOf</a></span>[clrTypes.global.<span class="typed"><span class="type">GenMSIL.this.global.loaders.clrTypes.global.Symbol</span><a href="../../symtab/Symbols.scala.html#21866">Symbol</a></span>]) <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><span class="keyword">match</span></span> {
          <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><span class="keyword">case</span></span> <a id="1">Some</a>(<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a id="168875">mtype</a></span>) =&gt; <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a href="#168875">mtype</a></span>
          <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object None</span><a id="536">None</a></span> =&gt; <span class="typed"><span class="type">(GenMSIL.this.global.icodes.IClass)Unit</span><a href="#161754">createTypeBuilder</a></span>(<span class="typed"><span class="type">(GenMSIL.this.global.icodes.global.Symbol)GenMSIL.this.global.icodes.IClass</span><a href="../icode/ICodes.scala.html#32305" id="24239">classes</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#168874">sym</a></span>)); <span class="typed"><span class="type">(GenMSIL.this.global.loaders.clrTypes.global.Symbol)ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35387" id="24239">types</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#168874">sym</a></span>.<span class="typed"><span class="type">GenMSIL.this.global.loaders.clrTypes.global.Symbol</span><a id="3503">asInstanceOf</a></span>[clrTypes.global.<span class="typed"><span class="type">GenMSIL.this.global.loaders.clrTypes.global.Symbol</span><a href="../../symtab/Symbols.scala.html#21866">Symbol</a></span>])
        }
      }

      <span class="keyword">val</span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a id="168869">sym</a></span> = <span class="typed"><span class="type">GenMSIL.this.global.icodes.IClass</span><a href="#161788">iclass</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Symbol</span><a href="../icode/Members.scala.html#32681">symbol</a></span>
      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; scala.collection.mutable.Map[GenMSIL.this.global.loaders.clrTypes.global.Symbol,ch.epfl.lamp.compiler.msil.Type]</span><a href="../../symtab/clr/CLRTypes.scala.html#35387">types</a></span> <span class="typed"><span class="type">(GenMSIL.this.global.loaders.clrTypes.global.Symbol)Boolean</span><a id="24240">contains</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#168869">sym</a></span>.<span class="typed"><span class="type">GenMSIL.this.global.loaders.clrTypes.global.Symbol</span><a id="3503">asInstanceOf</a></span>[clrTypes.global.<span class="typed"><span class="type">GenMSIL.this.global.loaders.clrTypes.global.Symbol</span><a href="../../symtab/Symbols.scala.html#21866">Symbol</a></span>]) <span class="typed"><span class="type">Nothing</span><span class="keyword">return</span></span>

      <span class="keyword">def</span> <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)Boolean</span><a id="168870">isInterface</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a id="168883">s</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="../../symtab/Symbols.scala.html#21866">Symbol</a></span>) = <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#168883">s</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../../symtab/Symbols.scala.html#25155">isTrait</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#168883">s</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../../symtab/Symbols.scala.html#25189">isImplClass</a></span>
      <span class="keyword">val</span> <span class="typed"><span class="type">List[GenMSIL.this.global.Type]</span><a id="168871">parents</a></span>: <span class="typed"><span class="type">List[GenMSIL.this.global.Type]</span><a id="526">List</a></span>[Type] =
        <span class="typed"><span class="type">List[GenMSIL.this.global.Type]</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#168869">sym</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Type</span><a href="../../symtab/Symbols.scala.html#25231">info</a></span>.<span class="typed"><span class="type">=&gt; List[GenMSIL.this.global.icodes.global.Type]</span><a href="../../symtab/Types.scala.html#25659">parents</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a id="21645">isEmpty</a></span>) <span class="typed"><span class="type">(GenMSIL.this.global.Type*)List[GenMSIL.this.global.Type]</span><span id="21328"><a id="527">List</a></span></span>(<span class="typed"><span class="type">object GenMSIL.this.global.definitions</span><a href="../../symtab/Definitions.scala.html#22259">definitions</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="../../symtab/Definitions.scala.html#25778">ObjectClass</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Type</span><a href="../../symtab/Symbols.scala.html#25230">tpe</a></span>)
        <span class="keyword">else</span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#168869">sym</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Type</span><a href="../../symtab/Symbols.scala.html#25231">info</a></span>.<span class="typed"><span class="type">=&gt; List[GenMSIL.this.global.icodes.global.Type]</span><a href="../../symtab/Types.scala.html#25659">parents</a></span>.<span class="typed"><span class="type">=&gt; List[GenMSIL.this.global.icodes.global.Type]</span><a id="21405">removeDuplicates</a></span>

      <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a id="168872">superType</a></span> = <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">(GenMSIL.this.global.Symbol)Boolean</span><a href="#168870">isInterface</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#168869">sym</a></span>)) <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span> <span class="keyword">else</span> <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.Type</span><a href="#168868">msilTypeFromSym</a></span>(<span class="typed"><span class="type">List[GenMSIL.this.global.Type]</span><a href="#168871">parents</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Type</span><a id="21332">head</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="../../symtab/Types.scala.html#25650">typeSymbol</a></span>)
      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="../../Global.scala.html#21157">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting</span><a href="../../Settings.scala.html#30066">debug</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting#T</span><a href="../../Settings.scala.html#30301">value</a></span>)
        <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;super type: &quot;)</span><span class="string">&quot;super type: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">(Int)GenMSIL.this.global.Type</span><a href="#168871" id="21361">parents</a></span>(<span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>).<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="../../symtab/Types.scala.html#25650">typeSymbol</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;, msil type: &quot;)</span><span class="string">&quot;, msil type: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a href="#168872">superType</a></span>)

      <span class="keyword">val</span> <span class="typed"><span class="type">Array[ch.epfl.lamp.compiler.msil.Type]</span><a id="168873">interfaces</a></span>: <span class="typed"><span class="type">Array[ch.epfl.lamp.compiler.msil.Type]</span><a id="1072">Array</a></span>[MsilType] =
	<span class="typed"><span class="type">List[GenMSIL.this.global.Type]</span><a href="#168871">parents</a></span>.<span class="typed"><span class="type">=&gt; List[GenMSIL.this.global.Type]</span><a id="21334">tail</a></span>.<span class="typed"><span class="type">((GenMSIL.this.global.Type) =&gt; ch.epfl.lamp.compiler.msil.Type)List[ch.epfl.lamp.compiler.msil.Type]</span><a id="21362">map</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Type</span><a id="168894">p</a></span> =&gt; <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.Type</span><a href="#168868">msilTypeFromSym</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Type</span><a href="#168894">p</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="../../symtab/Types.scala.html#25650">typeSymbol</a></span>)).<span class="typed"><span class="type">Array[ch.epfl.lamp.compiler.msil.Type]</span><a id="21675">toArray</a></span>
      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">List[GenMSIL.this.global.Type]</span><a href="#168871">parents</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21345">length</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3145">&gt;</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>) {
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="../../Global.scala.html#21157">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting</span><a href="../../Settings.scala.html#30066">debug</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting#T</span><a href="../../Settings.scala.html#30301">value</a></span>){
          <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;interfaces:&quot;)</span><span class="string">&quot;interfaces:&quot;</span></span>)
          <span class="keyword">for</span> (<span class="typed"><span class="type">((Int) =&gt; Unit)Unit</span><span id="40475"><a id="168912">i</a></span></span> &lt;- <span class="typed"><span class="type">implicit scala.Predef.intWrapper : (Int)scala.runtime.RichInt</span><span id="6133"><a id="821" class="int">0</a></span></span>.<span class="typed"><span class="type">(Int)Range</span><a id="26778">until</a></span>(<span class="typed"><span class="type">Array[ch.epfl.lamp.compiler.msil.Type]</span><a href="#168873">interfaces</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21508">length</a></span>)){
            <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;  type: &quot;)</span><span class="string">&quot;  type: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">(Int)GenMSIL.this.global.Type</span><a href="#168871" id="21361">parents</a></span>(<span class="typed"><span class="type">Int</span><a href="#168912">i</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">+</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>).<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="../../symtab/Types.scala.html#25650">typeSymbol</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;, msil type: &quot;)</span><span class="string">&quot;, msil type: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">(Int)ch.epfl.lamp.compiler.msil.Type</span><a href="#168873" id="21509">interfaces</a></span>(<span class="typed"><span class="type">Int</span><a href="#168912">i</a></span>))
          }
        }
      }

      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#168869">sym</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../../symtab/Symbols.scala.html#25201">isNestedClass</a></span>) {
	<span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a id="168937">ownerT</a></span> = <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.Type</span><a href="#168868">msilTypeFromSym</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#168869">sym</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Symbol</span><a href="../../symtab/Symbols.scala.html#25211">owner</a></span>).<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a id="3503">asInstanceOf</a></span>[<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a id="83405">TypeBuilder</a></span>]
	<span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a id="168938">tBuilder</a></span> =
	  <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a href="#168937">ownerT</a></span>.<span class="typed"><span class="type">(String,int,ch.epfl.lamp.compiler.msil.Type,Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a id="162738">DefineNestedType</a></span>(<span class="typed"><span class="type">(GenMSIL.this.global.Symbol)String</span><a href="#161737">msilName</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#168869">sym</a></span>), <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)Int</span><a href="#161738">msilTypeFlags</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#168869">sym</a></span>), <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a href="#168872">superType</a></span>, <span class="typed"><span class="type">Array[ch.epfl.lamp.compiler.msil.Type]</span><a href="#168873">interfaces</a></span>)
	<span class="typed"><span class="type">(GenMSIL.this.global.Symbol,ch.epfl.lamp.compiler.msil.Type)Unit</span><a href="#161753">mapType</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#168869">sym</a></span>, <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a href="#168938">tBuilder</a></span>)
      } <span class="keyword">else</span> {
	<span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a id="168939">tBuilder</a></span> =
          <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ModuleBuilder</span><a href="#161641">mmodule</a></span>.<span class="typed"><span class="type">(String,Int,ch.epfl.lamp.compiler.msil.Type,Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a id="162510">DefineType</a></span>(<span class="typed"><span class="type">(GenMSIL.this.global.Symbol)String</span><a href="#161737">msilName</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#168869">sym</a></span>), <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)Int</span><a href="#161738">msilTypeFlags</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#168869">sym</a></span>), <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a href="#168872">superType</a></span>, <span class="typed"><span class="type">Array[ch.epfl.lamp.compiler.msil.Type]</span><a href="#168873">interfaces</a></span>)
	<span class="typed"><span class="type">(GenMSIL.this.global.Symbol,ch.epfl.lamp.compiler.msil.Type)Unit</span><a href="#161753">mapType</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#168869">sym</a></span>, <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a href="#168939">tBuilder</a></span>)
      }
    } <span class="comment">// createTypeBuilder</span>

    <span class="keyword">def</span> <span class="typed"><span class="type">(GenMSIL.this.global.icodes.IClass)Unit</span><a id="161755">createClassMembers</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.IClass</span><a id="161791">iclass</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.icodes.IClass</span><a href="../icode/Members.scala.html#32330">IClass</a></span>) {
      <span class="keyword">try</span> {
        <span class="typed"><span class="type">(GenMSIL.this.global.icodes.IClass)Unit</span><a href="#161756">createClassMembers0</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.IClass</span><a href="#161791">iclass</a></span>)
      }
      <span class="keyword">catch</span> {
        <span class="typed"><span class="type">Nothing</span><span class="keyword">case</span></span> <span class="typed"><span class="type">java.lang.Throwable</span><a id="168946">e</a></span>: <span class="typed"><span class="type">Throwable</span><a id="2143">Throwable</a></span> =&gt;
          <span class="typed"><span class="type">object java.lang.System</span><a id="1886">System</a></span>.<span class="typed"><span class="type">java.io.PrintStream</span><a id="47437">err</a></span>.<span class="typed"><span class="type">(java.lang.String)Unit</span><a id="27111">println</a></span>(<span class="typed"><span class="type">(GenMSIL.this.global.Symbol)String</span><a href="#161784">showsym</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.IClass</span><a href="#161791">iclass</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Symbol</span><a href="../icode/Members.scala.html#32681">symbol</a></span>))
          <span class="typed"><span class="type">object java.lang.System</span><a id="1886">System</a></span>.<span class="typed"><span class="type">java.io.PrintStream</span><a id="47437">err</a></span>.<span class="typed"><span class="type">(java.lang.String)Unit</span><a id="27111">println</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;with methods = &quot;)</span><span class="string">&quot;with methods = &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.IClass</span><a href="#161791">iclass</a></span>.<span class="typed"><span class="type">=&gt; List[GenMSIL.this.global.icodes.IMethod]</span><a href="../icode/Members.scala.html#32687">methods</a></span>)
          <span class="typed"><span class="type">Nothing</span><span class="keyword">throw</span></span> <span class="typed"><span class="type">java.lang.Throwable</span><a href="#168946">e</a></span>
      }
    }

    <span class="keyword">def</span> <span class="typed"><span class="type">(GenMSIL.this.global.icodes.IClass)Unit</span><a id="161756">createClassMembers0</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.IClass</span><a id="168945">iclass</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.icodes.IClass</span><a href="../icode/Members.scala.html#32330">IClass</a></span>) {
      <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a id="168951">mtype</a></span> = <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.Type</span><a href="#161752">getType</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.IClass</span><a href="#168945">iclass</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Symbol</span><a href="../icode/Members.scala.html#32681">symbol</a></span>).<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a id="3503">asInstanceOf</a></span>[<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a id="83405">TypeBuilder</a></span>]
      <span class="keyword">for</span> (<span class="typed"><span class="type">((GenMSIL.this.global.icodes.IField) =&gt; Unit)Unit</span><span id="21366"><a id="168954">ifield</a></span></span> &lt;- <span class="typed"><span class="type">GenMSIL.this.global.icodes.IClass</span><a href="#168945">iclass</a></span>.<span class="typed"><span class="type">=&gt; List[GenMSIL.this.global.icodes.IField]</span><a href="../icode/Members.scala.html#32684">fields</a></span>) {
        <span class="keyword">val</span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a id="168955">sym</a></span> = <span class="typed"><span class="type">GenMSIL.this.global.icodes.IField</span><a href="#168954">ifield</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Symbol</span><a href="../icode/Members.scala.html#37278">symbol</a></span>
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="../../Global.scala.html#21157">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting</span><a href="../../Settings.scala.html#30066">debug</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting#T</span><a href="../../Settings.scala.html#30301">value</a></span>)
          <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;Adding field: &quot;)</span><span class="string">&quot;Adding field: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#168955">sym</a></span>.<span class="typed"><span class="type">=&gt; String</span><a href="../../symtab/Symbols.scala.html#25313">fullNameString</a></span>)

        <span class="keyword">var</span> <span class="typed"><span class="type">Short</span><a id="168956">attributes</a></span> = <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)Short</span><a href="#161740">msilFieldFlags</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#168955">sym</a></span>)
        <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.FieldBuilder</span><a id="168957">fBuilder</a></span> = <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a href="#168951">mtype</a></span>.<span class="typed"><span class="type">(String,ch.epfl.lamp.compiler.msil.Type,short)ch.epfl.lamp.compiler.msil.emit.FieldBuilder</span><a id="162735">DefineField</a></span>(<span class="typed"><span class="type">(GenMSIL.this.global.Symbol)String</span><a href="#161737">msilName</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#168955">sym</a></span>), <span class="typed"><span class="type">(GenMSIL.this.global.Type)ch.epfl.lamp.compiler.msil.Type</span><a href="#161750">msilType</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#168955">sym</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Type</span><a href="../../symtab/Symbols.scala.html#25230">tpe</a></span>), <span class="typed"><span class="type">Short</span><a href="#168956">attributes</a></span>)
        <span class="typed"><span class="type">=&gt; scala.collection.mutable.Map[GenMSIL.this.global.loaders.clrTypes.global.Symbol,ch.epfl.lamp.compiler.msil.FieldInfo]</span><a href="../../symtab/clr/CLRTypes.scala.html#35393">fields</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#168955">sym</a></span>.<span class="typed"><span class="type">GenMSIL.this.global.loaders.clrTypes.global.Symbol</span><a id="3503">asInstanceOf</a></span>[clrTypes.global.<span class="typed"><span class="type">GenMSIL.this.global.loaders.clrTypes.global.Symbol</span><a href="../../symtab/Symbols.scala.html#21866">Symbol</a></span>]) = <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.FieldBuilder</span><a href="#168957">fBuilder</a></span>
        <span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.ICustomAttributeSetter,List[GenMSIL.this.global.AnnotationInfo])Unit</span><a href="#161664">addAttributes</a></span>(<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.FieldBuilder</span><a href="#168957">fBuilder</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#168955">sym</a></span>.<span class="typed"><span class="type">=&gt; List[GenMSIL.this.global.icodes.global.AnnotationInfo]</span><a href="../../symtab/Symbols.scala.html#25090">attributes</a></span>)
      }

      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">GenMSIL.this.global.icodes.IClass</span><a href="#168945">iclass</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Symbol</span><a href="../icode/Members.scala.html#32681">symbol</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5793">!=</a></span> <span class="typed"><span class="type">object GenMSIL.this.global.definitions</span><a href="../../symtab/Definitions.scala.html#22259">definitions</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="../../symtab/Definitions.scala.html#25901">ArrayClass</a></span>)
      <span class="keyword">for</span> (<span class="typed"><span class="type">((GenMSIL.this.global.icodes.IMethod) =&gt; Unit)Unit</span><span id="21366"><a id="168965">m</a></span></span>: <span class="typed"><span class="type">GenMSIL.this.global.icodes.IMethod</span><a href="../icode/Members.scala.html#32332">IMethod</a></span> &lt;- <span class="typed"><span class="type">GenMSIL.this.global.icodes.IClass</span><a href="#168945">iclass</a></span>.<span class="typed"><span class="type">=&gt; List[GenMSIL.this.global.icodes.IMethod]</span><a href="../icode/Members.scala.html#32687">methods</a></span>) {
        <span class="keyword">val</span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a id="168966">sym</a></span> = <span class="typed"><span class="type">GenMSIL.this.global.icodes.IMethod</span><a href="#168965">m</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Symbol</span><a href="../icode/Members.scala.html#32864">symbol</a></span>
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="../../Global.scala.html#21157">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting</span><a href="../../Settings.scala.html#30066">debug</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting#T</span><a href="../../Settings.scala.html#30301">value</a></span>)
          <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;Creating MethodBuilder for &quot;)</span><span class="string">&quot;Creating MethodBuilder for &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">object scala.tools.nsc.symtab.Flags</span><a href="../../symtab/Flags.scala.html#9658">Flags</a></span>.<span class="typed"><span class="type">(Long)String</span><a href="../../symtab/Flags.scala.html#20637">flagsToString</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#168966">sym</a></span>.<span class="typed"><span class="type">=&gt; Long</span><a href="../../symtab/Symbols.scala.html#25218">flags</a></span>) <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot; &quot;)</span><span class="string">&quot; &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span>
              <span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#168966">sym</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Symbol</span><a href="../../symtab/Symbols.scala.html#25211">owner</a></span>.<span class="typed"><span class="type">=&gt; String</span><a href="../../symtab/Symbols.scala.html#25313">fullNameString</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;::&quot;)</span><span class="string">&quot;::&quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#168966">sym</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Name</span><a href="../../symtab/Symbols.scala.html#25215">name</a></span>)

        <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a id="168967">ownerType</a></span> = <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.Type</span><a href="#161752">getType</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#168966">sym</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Symbol</span><a href="../../symtab/Symbols.scala.html#25257">enclClass</a></span>).<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a id="3503">asInstanceOf</a></span>[<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a id="83405">TypeBuilder</a></span>]
        <span class="typed"><span class="type">(Boolean,=&gt; Any)Unit</span><span id="6004"><a id="821">assert</a></span></span>(<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a href="#168951">mtype</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a href="#168967">ownerType</a></span>, <span class="typed"><span class="type">java.lang.String(&quot;mtype = &quot;)</span><span class="string">&quot;mtype = &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a href="#168951">mtype</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;; ownerType = &quot;)</span><span class="string">&quot;; ownerType = &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a href="#168967">ownerType</a></span>)
        <span class="keyword">var</span> <span class="typed"><span class="type">Array[ch.epfl.lamp.compiler.msil.Type]</span><a id="168968">paramTypes</a></span> = <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)Array[ch.epfl.lamp.compiler.msil.Type]</span><a href="#161751">msilParamTypes</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#168966">sym</a></span>)
        <span class="keyword">val</span> <span class="typed"><span class="type">Short</span><a id="168969">attr</a></span> = <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)Short</span><a href="#161739">msilMethodFlags</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#168966">sym</a></span>)

        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">GenMSIL.this.global.icodes.IMethod</span><a href="#168965">m</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Symbol</span><a href="../icode/Members.scala.html#32864">symbol</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../../symtab/Symbols.scala.html#25146">isClassConstructor</a></span>) {
          <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ConstructorBuilder</span><a id="168982">constr</a></span> =
            <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a href="#168967">ownerType</a></span>.<span class="typed"><span class="type">(short,short,Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.emit.ConstructorBuilder</span><a id="162737">DefineConstructor</a></span>(<span class="typed"><span class="type">Short</span><a href="#168969">attr</a></span>, CallingConventions.<span class="typed"><span class="type">Short(1)</span><span >Standard</span></span>, <span class="typed"><span class="type">Array[ch.epfl.lamp.compiler.msil.Type]</span><a href="#168968">paramTypes</a></span>)
          <span class="keyword">for</span> (<span class="typed"><span class="type">((Int) =&gt; Unit)Unit</span><span id="40475"><a id="168999">i</a></span></span> &lt;- <span class="typed"><span class="type">implicit scala.Predef.intWrapper : (Int)scala.runtime.RichInt</span><span id="6133"><a id="821" class="int">0</a></span></span>.<span class="typed"><span class="type">(Int)Range</span><a id="26778">until</a></span>(<span class="typed"><span class="type">Array[ch.epfl.lamp.compiler.msil.Type]</span><a href="#168968">paramTypes</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21508">length</a></span>)) {
            <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ConstructorBuilder</span><a href="#168982">constr</a></span>.<span class="typed"><span class="type">(int,int,String)ch.epfl.lamp.compiler.msil.emit.ParameterBuilder</span><a id="165756">DefineParameter</a></span>(<span class="typed"><span class="type">Int</span><a href="#168999">i</a></span>, ParameterAttributes.<span class="typed"><span class="type">Int(0)</span><span >None</span></span>, <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)String</span><a href="#161737">msilName</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.IMethod</span><a href="#168965">m</a></span>.<span class="typed"><span class="type">(Int)GenMSIL.this.global.icodes.Local</span><a href="../icode/Members.scala.html#32888" id="21361">params</a></span>(<span class="typed"><span class="type">Int</span><a href="#168999">i</a></span>).<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Symbol</span><a href="../icode/Members.scala.html#33246">sym</a></span>))
          }
          <span class="typed"><span class="type">(GenMSIL.this.global.Symbol,ch.epfl.lamp.compiler.msil.ConstructorInfo)Unit</span><a href="#161775">mapConstructor</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#168966">sym</a></span>, <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ConstructorBuilder</span><a href="#168982">constr</a></span>)
          <span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.ICustomAttributeSetter,List[GenMSIL.this.global.AnnotationInfo])Unit</span><a href="#161664">addAttributes</a></span>(<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ConstructorBuilder</span><a href="#168982">constr</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#168966">sym</a></span>.<span class="typed"><span class="type">=&gt; List[GenMSIL.this.global.icodes.global.AnnotationInfo]</span><a href="../../symtab/Symbols.scala.html#25090">attributes</a></span>)
        } <span class="keyword">else</span> {
          <span class="keyword">var</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a id="169007">resType</a></span> = <span class="typed"><span class="type">(GenMSIL.this.global.icodes.TypeKind)ch.epfl.lamp.compiler.msil.Type</span><a href="#161749">msilType</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.IMethod</span><a href="#168965">m</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.TypeKind</span><a href="../icode/Members.scala.html#32879">returnType</a></span>)
          <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.MethodBuilder</span><a id="169008">method</a></span> =
            <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a href="#168967">ownerType</a></span>.<span class="typed"><span class="type">(String,short,ch.epfl.lamp.compiler.msil.Type,Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.emit.MethodBuilder</span><a id="162736">DefineMethod</a></span>(<span class="typed"><span class="type">(GenMSIL.this.global.Symbol)String</span><a href="#161783">getMethodName</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#168966">sym</a></span>), <span class="typed"><span class="type">Short</span><a href="#168969">attr</a></span>, <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a href="#169007">resType</a></span>, <span class="typed"><span class="type">Array[ch.epfl.lamp.compiler.msil.Type]</span><a href="#168968">paramTypes</a></span>)
          <span class="keyword">for</span> (<span class="typed"><span class="type">((Int) =&gt; Unit)Unit</span><span id="40475"><a id="169021">i</a></span></span> &lt;- <span class="typed"><span class="type">implicit scala.Predef.intWrapper : (Int)scala.runtime.RichInt</span><span id="6133"><a id="821" class="int">0</a></span></span>.<span class="typed"><span class="type">(Int)Range</span><a id="26778">until</a></span>(<span class="typed"><span class="type">Array[ch.epfl.lamp.compiler.msil.Type]</span><a href="#168968">paramTypes</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21508">length</a></span>)){
            <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.MethodBuilder</span><a href="#169008">method</a></span>.<span class="typed"><span class="type">(Int,Int,String)ch.epfl.lamp.compiler.msil.emit.ParameterBuilder</span><a id="163977">DefineParameter</a></span>(<span class="typed"><span class="type">Int</span><a href="#169021">i</a></span>, ParameterAttributes.<span class="typed"><span class="type">Int(0)</span><span >None</span></span>, <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)String</span><a href="#161737">msilName</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.IMethod</span><a href="#168965">m</a></span>.<span class="typed"><span class="type">(Int)GenMSIL.this.global.icodes.Local</span><a href="../icode/Members.scala.html#32888" id="21361">params</a></span>(<span class="typed"><span class="type">Int</span><a href="#169021">i</a></span>).<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Symbol</span><a href="../icode/Members.scala.html#33246">sym</a></span>))
          }
          <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">=&gt; scala.collection.mutable.Map[GenMSIL.this.global.loaders.clrTypes.global.Symbol,ch.epfl.lamp.compiler.msil.MethodInfo]</span><a href="../../symtab/clr/CLRTypes.scala.html#35391">methods</a></span>.<span class="typed"><span class="type">(GenMSIL.this.global.loaders.clrTypes.global.Symbol)Boolean</span><a id="24240">contains</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#168966">sym</a></span>.<span class="typed"><span class="type">GenMSIL.this.global.loaders.clrTypes.global.Symbol</span><a id="3503">asInstanceOf</a></span>[clrTypes.global.<span class="typed"><span class="type">GenMSIL.this.global.loaders.clrTypes.global.Symbol</span><a href="../../symtab/Symbols.scala.html#21866">Symbol</a></span>]))
            <span class="typed"><span class="type">(GenMSIL.this.global.Symbol,ch.epfl.lamp.compiler.msil.MethodInfo)Unit</span><a href="#161777">mapMethod</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#168966">sym</a></span>, <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.MethodBuilder</span><a href="#169008">method</a></span>)
          <span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.ICustomAttributeSetter,List[GenMSIL.this.global.AnnotationInfo])Unit</span><a href="#161664">addAttributes</a></span>(<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.MethodBuilder</span><a href="#169008">method</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#168966">sym</a></span>.<span class="typed"><span class="type">=&gt; List[GenMSIL.this.global.icodes.global.AnnotationInfo]</span><a href="../../symtab/Symbols.scala.html#25090">attributes</a></span>)
          <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="../../Global.scala.html#21157">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting</span><a href="../../Settings.scala.html#30066">debug</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting#T</span><a href="../../Settings.scala.html#30301">value</a></span>)
            <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;\011 created MethodBuilder &quot;)</span><span class="string">&quot;\t created MethodBuilder &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.MethodBuilder</span><a href="#169008">method</a></span>)
        }
      }

      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">(GenMSIL.this.global.Symbol)Boolean</span><a href="#161758">isStaticModule</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.IClass</span><a href="#168945">iclass</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Symbol</span><a href="../icode/Members.scala.html#32681">symbol</a></span>)) {
        <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)Unit</span><a href="#161760">addModuleInstanceField</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.IClass</span><a href="#168945">iclass</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Symbol</span><a href="../icode/Members.scala.html#32681">symbol</a></span>)
        <span class="typed"><span class="type">=&gt; scala.collection.mutable.HashSet[GenMSIL.this.global.Symbol]</span><a href="#161744">notInitializedModules</a></span> <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)Unit</span><a id="25499">+=</a></span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.IClass</span><a href="#168945">iclass</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Symbol</span><a href="../icode/Members.scala.html#32681">symbol</a></span>
        <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)Unit</span><a href="#161762">addStaticInit</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.IClass</span><a href="#168945">iclass</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.Symbol</span><a href="../icode/Members.scala.html#32681">symbol</a></span>)
      }

    } <span class="comment">// createClassMembers</span>

    <span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)Boolean</span><a id="161757">isTopLevelModule</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a id="165723">sym</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="../../symtab/Symbols.scala.html#21866">Symbol</a></span>): <span class="typed"><span class="type">Boolean</span><a id="2170">Boolean</a></span> =
      <span class="typed"><span class="type">(scala.tools.nsc.Phase)(=&gt; Boolean)Boolean</span><a href="../../symtab/SymbolTable.scala.html#21147">atPhase</a></span> (<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Run</span><a href="../../Global.scala.html#21305">currentRun</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Phase</span><a href="../../Global.scala.html#36562">refchecksPhase</a></span>) {
        <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#165723">sym</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../../symtab/Symbols.scala.html#25166">isModuleClass</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#165723">sym</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../../symtab/Symbols.scala.html#25189">isImplClass</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#165723">sym</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../../symtab/Symbols.scala.html#25201">isNestedClass</a></span>
      }

    <span class="comment">// if the module is lifted it does not need to be initialized in</span>
    <span class="comment">// its static constructor, and the MODULE$ field is not required.</span>
    <span class="comment">// the outer class will care about it.</span>
    <span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)Boolean</span><a id="161758">isStaticModule</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a id="167090">sym</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="../../symtab/Symbols.scala.html#21866">Symbol</a></span>): <span class="typed"><span class="type">Boolean</span><a id="2170">Boolean</a></span> = {
      <span class="comment">// .net inner classes: removed '!sym.hasFlag(Flags.LIFTED)', added</span>
      <span class="comment">// 'sym.isStatic'. -&gt; no longer compatible without skipping flatten!</span>
      <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#167090">sym</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../../symtab/Symbols.scala.html#25166">isModuleClass</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#167090">sym</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../../symtab/Symbols.scala.html#25194">isStatic</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#167090">sym</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../../symtab/Symbols.scala.html#25189">isImplClass</a></span>
    }

    <span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)Boolean</span><a id="161759">isCloneable</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a id="165671">sym</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="../../symtab/Symbols.scala.html#21866">Symbol</a></span>): <span class="typed"><span class="type">Boolean</span><a id="2170">Boolean</a></span> = {
      <span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#165671">sym</a></span>.<span class="typed"><span class="type">=&gt; List[GenMSIL.this.global.AnnotationInfo]</span><a href="../../symtab/Symbols.scala.html#25090">attributes</a></span>.<span class="typed"><span class="type">((GenMSIL.this.global.AnnotationInfo) =&gt; Boolean)Boolean</span><a id="21372">forall</a></span>( <span class="typed"><span class="type">GenMSIL.this.global.AnnotationInfo</span><a id="169035">a</a></span> =&gt; <span class="typed"><span class="type">GenMSIL.this.global.AnnotationInfo</span><a href="#169035">a</a></span> <span class="typed"><span class="type">Boolean</span><span class="keyword">match</span></span> {
        <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">case</span></span> <a id="1">AnnotationInfo</a>(<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Type</span><a href="#161622">CloneableAttr</a></span>, _, _) =&gt; <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>
        <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">case</span></span> _ =&gt; <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>
      })
    }

    <span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)Unit</span><a id="161760">addModuleInstanceField</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a id="169029">sym</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="../../symtab/Symbols.scala.html#21866">Symbol</a></span>) {
      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="../../Global.scala.html#21157">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting</span><a href="../../Settings.scala.html#30066">debug</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting#T</span><a href="../../Settings.scala.html#30301">value</a></span>)
        <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;Adding Module-Instance Field for &quot;)</span><span class="string">&quot;Adding Module-Instance Field for &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)String</span><a href="#161784">showsym</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#169029">sym</a></span>))
      <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a id="169036">tBuilder</a></span> = <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.Type</span><a href="#161752">getType</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#169029">sym</a></span>).<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a id="3503">asInstanceOf</a></span>[<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a id="83405">TypeBuilder</a></span>]
      <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.FieldBuilder</span><a id="169037">fb</a></span> = <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a href="#169036">tBuilder</a></span>.<span class="typed"><span class="type">(String,ch.epfl.lamp.compiler.msil.Type,short)ch.epfl.lamp.compiler.msil.emit.FieldBuilder</span><a id="162735">DefineField</a></span>(<span class="typed"><span class="type">=&gt; java.lang.String</span><a href="#161566">MODULE_INSTANCE_NAME</a></span>,
                           <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a href="#169036">tBuilder</a></span>,
                           (FieldAttributes.Public <span class="typed"><span class="type">Int(22)</span><span >|</span></span>
                            <span class="comment">//FieldAttributes.InitOnly |</span>
                            FieldAttributes.Static).<span class="typed"><span class="type">=&gt; Short</span><a id="3083">toShort</a></span>)
      <span class="typed"><span class="type">=&gt; scala.collection.mutable.Map[GenMSIL.this.global.loaders.clrTypes.global.Symbol,ch.epfl.lamp.compiler.msil.FieldInfo]</span><a href="../../symtab/clr/CLRTypes.scala.html#35393">fields</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#169029">sym</a></span>.<span class="typed"><span class="type">GenMSIL.this.global.loaders.clrTypes.global.Symbol</span><a id="3503">asInstanceOf</a></span>[clrTypes.global.<span class="typed"><span class="type">GenMSIL.this.global.loaders.clrTypes.global.Symbol</span><a href="../../symtab/Symbols.scala.html#21866">Symbol</a></span>]) = <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.FieldBuilder</span><a href="#169037">fb</a></span>
    }


    <span class="comment">// the symbol may be a object-symbol (module-symbol), or a module-class-symbol</span>
    <span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.FieldInfo</span><a id="161761">getModuleInstanceField</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a id="163996">sym</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="../../symtab/Symbols.scala.html#21866">Symbol</a></span>): <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.FieldInfo</span><a id="34343">FieldInfo</a></span> = {
      <span class="typed"><span class="type">(Boolean,=&gt; Any)Unit</span><span id="6004"><a id="821">assert</a></span></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#163996">sym</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../../symtab/Symbols.scala.html#25149">isModule</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2750">||</a></span> <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#163996">sym</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../../symtab/Symbols.scala.html#25166">isModuleClass</a></span>, <span class="typed"><span class="type">java.lang.String(&quot;Expected module: &quot;)</span><span class="string">&quot;Expected module: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)String</span><a href="#161784">showsym</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#163996">sym</a></span>))

      <span class="comment">// when called by LOAD_MODULE, the corresponding type maybe doesn't</span>
      <span class="comment">// exist yet -&gt; make a getType</span>
      <span class="keyword">val</span> <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a id="169041">moduleClassSym</a></span> = <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#163996">sym</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../../symtab/Symbols.scala.html#25149">isModule</a></span>) <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#163996">sym</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="../../symtab/Symbols.scala.html#25283">moduleClass</a></span> <span class="keyword">else</span> <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#163996">sym</a></span>

      <span class="comment">// TODO: get module field for modules not defined in the</span>
      <span class="comment">// source currently compiling (e.g. Console)</span>

      <span class="typed"><span class="type">=&gt; scala.collection.mutable.Map[GenMSIL.this.global.loaders.clrTypes.global.Symbol,ch.epfl.lamp.compiler.msil.FieldInfo]</span><a href="../../symtab/clr/CLRTypes.scala.html#35393">fields</a></span> <span class="typed"><span class="type">(GenMSIL.this.global.loaders.clrTypes.global.Symbol)Option[ch.epfl.lamp.compiler.msil.FieldInfo]</span><a id="24235">get</a></span> <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#169041">moduleClassSym</a></span>.<span class="typed"><span class="type">GenMSIL.this.global.loaders.clrTypes.global.Symbol</span><a id="3503">asInstanceOf</a></span>[clrTypes.global.<span class="typed"><span class="type">GenMSIL.this.global.loaders.clrTypes.global.Symbol</span><a href="../../symtab/Symbols.scala.html#21866">Symbol</a></span>] <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.FieldInfo</span><span class="keyword">match</span></span> {
        <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.FieldInfo</span><span class="keyword">case</span></span> <a id="1">Some</a>(<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.FieldInfo</span><a id="169049">sym</a></span>) =&gt; <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.FieldInfo</span><a href="#169049">sym</a></span>
        <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.FieldInfo</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object None</span><a id="536">None</a></span> =&gt;
          <span class="comment">//val mclass = types(moduleClassSym)</span>
          <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a id="169050">mClass</a></span> = <span class="typed"><span class="type">object GenMSIL.this.global.loaders.clrTypes</span><a href="../../symtab/SymbolLoaders.scala.html#34365">clrTypes</a></span>.<span class="typed"><span class="type">(String)ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35401">getType</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#169041">moduleClassSym</a></span>.<span class="typed"><span class="type">=&gt; String</span><a href="../../symtab/Symbols.scala.html#25313">fullNameString</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;$&quot;)</span><span class="string">&quot;$&quot;</span></span>)
          <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.FieldInfo</span><a id="169051">mfield</a></span> = <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a href="#169050">mClass</a></span>.<span class="typed"><span class="type">(java.lang.String)ch.epfl.lamp.compiler.msil.FieldInfo</span><a id="35237">GetField</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;MODULE$&quot;)</span><span class="string">&quot;MODULE$&quot;</span></span>)
          <span class="typed"><span class="type">(Boolean,=&gt; Any)Unit</span><span id="6004"><a id="821">assert</a></span></span>(<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.FieldInfo</span><a href="#169051">mfield</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5795">ne</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>, <span class="typed"><span class="type">java.lang.String(&quot;module not found &quot;)</span><span class="string">&quot;module not found &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)String</span><a href="#161784">showsym</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#169041">moduleClassSym</a></span>))
          <span class="typed"><span class="type">=&gt; scala.collection.mutable.Map[GenMSIL.this.global.loaders.clrTypes.global.Symbol,ch.epfl.lamp.compiler.msil.FieldInfo]</span><a href="../../symtab/clr/CLRTypes.scala.html#35393">fields</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#169041">moduleClassSym</a></span>.<span class="typed"><span class="type">GenMSIL.this.global.loaders.clrTypes.global.Symbol</span><a id="3503">asInstanceOf</a></span>[clrTypes.global.<span class="typed"><span class="type">GenMSIL.this.global.loaders.clrTypes.global.Symbol</span><a href="../../symtab/Symbols.scala.html#21866">Symbol</a></span>]) = <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.FieldInfo</span><a href="#169051">mfield</a></span>
          <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.FieldInfo</span><a href="#169051">mfield</a></span>
      }

      <span class="comment">//fields(moduleClassSym)</span>
    }

    <span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)Unit</span><a id="161762">addStaticInit</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a id="169031">sym</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="../../symtab/Symbols.scala.html#21866">Symbol</a></span>) {
      <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a id="169061">tBuilder</a></span> = <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.Type</span><a href="#161752">getType</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#169031">sym</a></span>).<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a id="3503">asInstanceOf</a></span>[<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a id="83405">TypeBuilder</a></span>]

      <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ConstructorBuilder</span><a id="169062">staticInit</a></span> = <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a href="#169061">tBuilder</a></span>.<span class="typed"><span class="type">(short,short,Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.emit.ConstructorBuilder</span><a id="162737">DefineConstructor</a></span>(
        (MethodAttributes.Static <span class="typed"><span class="type">Int(22)</span><span >|</span></span> MethodAttributes.Public).<span class="typed"><span class="type">=&gt; Short</span><a id="3083">toShort</a></span>,
        CallingConventions.<span class="typed"><span class="type">Short(1)</span><span >Standard</span></span>,
        <span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.Type</span><a id="34227">MsilType</a></span>.<span class="typed"><span class="type">Array[ch.epfl.lamp.compiler.msil.Type]</span><a id="35178">EmptyTypes</a></span>)

      <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a id="169063">sicode</a></span> = <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ConstructorBuilder</span><a href="#169062">staticInit</a></span>.<span class="typed"><span class="type">()ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a id="165757">GetILGenerator</a></span>()

      <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.ConstructorInfo</span><a id="169064">instanceConstructor</a></span> = <span class="typed"><span class="type">(GenMSIL.this.global.loaders.clrTypes.global.Symbol)ch.epfl.lamp.compiler.msil.ConstructorInfo</span><a href="../../symtab/clr/CLRTypes.scala.html#35389" id="24239">constructors</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#169031">sym</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="../../symtab/Symbols.scala.html#25259">primaryConstructor</a></span>.<span class="typed"><span class="type">GenMSIL.this.global.loaders.clrTypes.global.Symbol</span><a id="3503">asInstanceOf</a></span>[clrTypes.global.<span class="typed"><span class="type">GenMSIL.this.global.loaders.clrTypes.global.Symbol</span><a href="../../symtab/Symbols.scala.html#21866">Symbol</a></span>])

      <span class="comment">// there are no constructor parameters. assuming the constructor takes no parameter</span>
      <span class="comment">// is fine: we call (in the static constructor) the constructor of the module class,</span>
      <span class="comment">// which takes no arguments - an object definition cannot take constructor arguments.</span>
      <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#169063">sicode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.ConstructorInfo)Unit</span><a id="162530">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165435">Newobj</a></span>, <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.ConstructorInfo</span><a href="#169064">instanceConstructor</a></span>)
      <span class="comment">// the stsfld is done in the instance constructor, just after the super call.</span>
      <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#169063">sicode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165283">Pop</a></span>)

      <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#169063">sicode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165291">Ret</a></span>)
    }

    <span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)Unit</span><a id="161763">dumpMirrorClass</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a id="165730">sym</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="../../symtab/Symbols.scala.html#21866">Symbol</a></span>) {
      <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a id="169079">tBuilder</a></span> = <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.Type</span><a href="#161752">getType</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#165730">sym</a></span>)
      <span class="typed"><span class="type">(Boolean,=&gt; Any)Unit</span><span id="6004"><a id="821">assert</a></span></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#165730">sym</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../../symtab/Symbols.scala.html#25166">isModuleClass</a></span>, <span class="typed"><span class="type">java.lang.String(&quot;Can't generate Mirror-Class for the Non-Module class &quot;)</span><span class="string">&quot;Can't generate Mirror-Class for the Non-Module class &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#165730">sym</a></span>)
      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="../../Global.scala.html#21157">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting</span><a href="../../Settings.scala.html#30066">debug</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting#T</span><a href="../../Settings.scala.html#30301">value</a></span>)
        <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;Dumping mirror class for object: &quot;)</span><span class="string">&quot;Dumping mirror class for object: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#165730">sym</a></span>)
      <span class="keyword">val</span> <span class="typed"><span class="type">String</span><a id="169080">moduleName</a></span> = <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)String</span><a href="#161737">msilName</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#165730">sym</a></span>)
      <span class="keyword">val</span> <span class="typed"><span class="type">java.lang.String</span><a id="169081">mirrorName</a></span> = <span class="typed"><span class="type">String</span><a href="#169080">moduleName</a></span>.<span class="typed"><span class="type">(Int,Int)java.lang.String</span><a id="5855">substring</a></span>(<span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>, <span class="typed"><span class="type">String</span><a href="#169080">moduleName</a></span>.<span class="typed"><span class="type">()Int</span><a id="5821">length</a></span>() <span class="typed"><span class="type">(Int)Int</span><a id="3148">-</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>)
      <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a id="169082">mirrorTypeBuilder</a></span> = <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ModuleBuilder</span><a href="#161641">mmodule</a></span>.<span class="typed"><span class="type">(String,Int,ch.epfl.lamp.compiler.msil.Type,Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a id="162510">DefineType</a></span>(<span class="typed"><span class="type">java.lang.String</span><a href="#169081">mirrorName</a></span>,
                                                 TypeAttributes.Class |
                                                 TypeAttributes.Public <span class="typed"><span class="type">Int(257)</span><span >|</span></span>
                                                 TypeAttributes.Sealed,
                <span class="comment">//FIXME: an object may have a super-type (a class, not an object) -&gt; not in mirror class?</span>
                                                 <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35360">MOBJECT</a></span>,
                                                 <span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.Type</span><a id="34227">MsilType</a></span>.<span class="typed"><span class="type">Array[ch.epfl.lamp.compiler.msil.Type]</span><a id="35178">EmptyTypes</a></span>)

      <span class="keyword">val</span> <span class="typed"><span class="type">GenMSIL.this.global.icodes.IClass</span><a id="169083">iclass</a></span> = <span class="typed"><span class="type">(GenMSIL.this.global.icodes.global.Symbol)GenMSIL.this.global.icodes.IClass</span><a href="../icode/ICodes.scala.html#32305" id="24239">classes</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#165730">sym</a></span>)

      <span class="keyword">for</span> (<span class="typed"><span class="type">((GenMSIL.this.global.Symbol) =&gt; Unit)Unit</span><span id="21366"><span id="21367"><span id="169132"><a id="169137">m</a></span></span></span></span> &lt;- <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#165730">sym</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Type</span><a href="../../symtab/Symbols.scala.html#25230">tpe</a></span>.<span class="typed"><span class="type">=&gt; List[GenMSIL.this.global.Symbol]</span><a href="../../symtab/Types.scala.html#25681">nonPrivateMembers</a></span>
           <span class="keyword">if</span> <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#169132">m</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="../../symtab/Symbols.scala.html#25211">owner</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5793">!=</a></span> <span class="typed"><span class="type">object GenMSIL.this.global.definitions</span><a href="../../symtab/Definitions.scala.html#22259">definitions</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="../../symtab/Definitions.scala.html#25778">ObjectClass</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#169132">m</a></span>.<span class="typed"><span class="type">(Long)Boolean</span><a href="../../symtab/Symbols.scala.html#25223">hasFlag</a></span>(Flags.<span class="typed"><span class="type">Long(1L)</span><span >PROTECTED</span></span>) <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span>
           <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#169132">m</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../../symtab/Symbols.scala.html#25142">isMethod</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#169132">m</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../../symtab/Symbols.scala.html#25146">isClassConstructor</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#169132">m</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../../symtab/Symbols.scala.html#25195">isStaticMember</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#169132">m</a></span>.<span class="typed"><span class="type">(Long)Boolean</span><a href="../../symtab/Symbols.scala.html#25223">hasFlag</a></span>(Flags.<span class="typed"><span class="type">Long(2048L)</span><span >CASE</span></span>))
        {
          <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="../../Global.scala.html#21157">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting</span><a href="../../Settings.scala.html#30066">debug</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting#T</span><a href="../../Settings.scala.html#30301">value</a></span>)
            <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;   Mirroring method: &quot;)</span><span class="string">&quot;   Mirroring method: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#169137">m</a></span>)
          <span class="keyword">val</span> <span class="typed"><span class="type">Array[ch.epfl.lamp.compiler.msil.Type]</span><a id="169138">paramTypes</a></span> = <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)Array[ch.epfl.lamp.compiler.msil.Type]</span><a href="#161751">msilParamTypes</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#169137">m</a></span>)
          <span class="keyword">val</span> <span class="typed"><span class="type">Array[String]</span><a id="169139">paramNames</a></span>: <span class="typed"><span class="type">Array[String]</span><a id="1072">Array</a></span>[String] = <span class="typed"><span class="type">Array[String]</span><span class="keyword">new</span></span> <span class="typed"><span class="type">Array[String]</span><a id="1072">Array</a></span>[String](<span class="typed"><span class="type">Array[ch.epfl.lamp.compiler.msil.Type]</span><a href="#169138">paramTypes</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21508">length</a></span>)
          <span class="keyword">for</span> (<span class="typed"><span class="type">((Int) =&gt; Unit)Unit</span><span id="40475"><a id="169156">i</a></span></span> &lt;- <span class="typed"><span class="type">implicit scala.Predef.intWrapper : (Int)scala.runtime.RichInt</span><span id="6133"><a id="821" class="int">0</a></span></span> <span class="typed"><span class="type">(Int)Range</span><a id="26778">until</a></span> <span class="typed"><span class="type">Array[ch.epfl.lamp.compiler.msil.Type]</span><a href="#169138">paramTypes</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21508">length</a></span>)
            <span class="typed"><span class="type">Array[String]</span><a href="#169139">paramNames</a></span>(<span class="typed"><span class="type">Int</span><a href="#169156">i</a></span>) = <span class="typed"><span class="type">java.lang.String(&quot;x_&quot;)</span><span class="string">&quot;x_&quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">Int</span><a href="#169156">i</a></span>

          <span class="comment">// CHECK: verify if getMethodName is better than msilName</span>
          <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.MethodBuilder</span><a id="169140">mirrorMethod</a></span> = <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a href="#169082">mirrorTypeBuilder</a></span>.<span class="typed"><span class="type">(String,short,ch.epfl.lamp.compiler.msil.Type,Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.emit.MethodBuilder</span><a id="162736">DefineMethod</a></span>(<span class="typed"><span class="type">(GenMSIL.this.global.Symbol)String</span><a href="#161783">getMethodName</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#169137">m</a></span>),
                                                            MethodAttributes.Public <span class="typed"><span class="type">Short(22)</span><span >|</span></span>
                                                            MethodAttributes.Static,
                                                            <span class="typed"><span class="type">(GenMSIL.this.global.Type)ch.epfl.lamp.compiler.msil.Type</span><a href="#161750">msilType</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#169137">m</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Type</span><a href="../../symtab/Symbols.scala.html#25230">tpe</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Type</span><a href="../../symtab/Types.scala.html#25663">resultType</a></span>),
                                                            <span class="typed"><span class="type">Array[ch.epfl.lamp.compiler.msil.Type]</span><a href="#169138">paramTypes</a></span>)

          <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="169141">i</a></span> = <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>
          <span class="typed"><span class="type">Unit</span><a href="#169143" class="keyword">while</a></span> (<span class="typed"><span class="type">Int</span><a href="#169141">i</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&lt;</a></span> <span class="typed"><span class="type">Array[ch.epfl.lamp.compiler.msil.Type]</span><a href="#169138">paramTypes</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21508">length</a></span>) {
            <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.MethodBuilder</span><a href="#169140">mirrorMethod</a></span>.<span class="typed"><span class="type">(Int,Int,String)ch.epfl.lamp.compiler.msil.emit.ParameterBuilder</span><a id="163977">DefineParameter</a></span>(<span class="typed"><span class="type">Int</span><a href="#169141">i</a></span>, ParameterAttributes.<span class="typed"><span class="type">Int(0)</span><span >None</span></span>, <span class="typed"><span class="type">(Int)String</span><a href="#169139" id="21509">paramNames</a></span>(<span class="typed"><span class="type">Int</span><a href="#169141">i</a></span>))
            <span class="typed"><span class="type">Int</span><a href="#169141">i</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">+=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
          }

          <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a id="169142">mirrorCode</a></span> = <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.MethodBuilder</span><a href="#169140">mirrorMethod</a></span>.<span class="typed"><span class="type">()ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a id="163978">GetILGenerator</a></span>()
          <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#169142">mirrorCode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.FieldInfo)Unit</span><a id="162533">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165451">Ldsfld</a></span>, <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.FieldInfo</span><a href="#161761">getModuleInstanceField</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#165730">sym</a></span>))
          <span class="typed"><span class="type">implicit scala.Predef.intWrapper : (Int)scala.runtime.RichInt</span><span id="6133"><a id="821" class="int">0</a></span></span>.<span class="typed"><span class="type">(Int)Range</span><a id="26778">until</a></span>(<span class="typed"><span class="type">Array[ch.epfl.lamp.compiler.msil.Type]</span><a href="#169138">paramTypes</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21508">length</a></span>) <span class="typed"><span class="type">((Int) =&gt; Unit)Unit</span><a id="40475">foreach</a></span> <span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.ILGenerator)(Int)Unit</span><a href="#161729">loadArg</a></span>(<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#169142">mirrorCode</a></span>)

          <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#169142">mirrorCode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.MethodInfo)Unit</span><a id="162539">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165427">Callvirt</a></span>, <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.MethodInfo</span><a href="#161776">getMethod</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#169137">m</a></span>))
          <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#169142">mirrorCode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165291">Ret</a></span>)
        }

      <span class="typed"><span class="type">(GenMSIL.this.global.Symbol,ch.epfl.lamp.compiler.msil.emit.TypeBuilder)Unit</span><a href="#161663">addSymtabAttribute</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#165730">sym</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="../../symtab/Symbols.scala.html#25282">sourceModule</a></span>, <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a href="#169082">mirrorTypeBuilder</a></span>)

      <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a href="#169082">mirrorTypeBuilder</a></span>.<span class="typed"><span class="type">()ch.epfl.lamp.compiler.msil.Type</span><a id="162734">CreateType</a></span>()
      <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a href="#169082">mirrorTypeBuilder</a></span>.<span class="typed"><span class="type">(String)Unit</span><a id="162749">setSourceFilepath</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.IClass</span><a href="#169083">iclass</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.icodes.global.CompilationUnit</span><a href="../icode/Members.scala.html#32690">cunit</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.util.SourceFile</span><a href="../../CompilationUnits.scala.html#24127">source</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.io.AbstractFile</span><a href="../../util/SourceFile.scala.html#22650">file</a></span>.<span class="typed"><span class="type">=&gt; String</span><a href="../../io/AbstractFile.scala.html#25440">path</a></span>)
    }


    <span class="comment">// #####################################################################</span>
    <span class="comment">// delegate callers</span>

    <span class="keyword">var</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><span id="161766"><span id="161764"><span id="161765"><a id="162779">delegateCallers</a></span></span></span></span>: <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a id="83405">TypeBuilder</a></span> = _
    <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><span id="161769"><span id="161767"><span id="161768"><a id="162780">nbDelegateCallers</a></span></span></span></span>: <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span> = <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>

    <span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">()Unit</span><a id="161770">initDelegateCallers</a></span>() = {
      <span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.TypeBuilder)Unit</span><a href="#161765">delegateCallers</a></span> = <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ModuleBuilder</span><a href="#161641">mmodule</a></span>.<span class="typed"><span class="type">(String,Int)ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a id="162508">DefineType</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;$DelegateCallers&quot;)</span><span class="string">&quot;$DelegateCallers&quot;</span></span>, TypeAttributes.Public <span class="typed"><span class="type">Int(257)</span><span >|</span></span>
                                          TypeAttributes.Sealed)
    }

    <span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(GenMSIL.this.global.Type,GenMSIL.this.global.Type)Unit</span><a id="161771">createDelegateCaller</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Type</span><a id="167167">functionType</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.Type</span><a href="../../symtab/Types.scala.html#21944">Type</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.Type</span><a id="167168">delegateType</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.Type</span><a href="../../symtab/Types.scala.html#21944">Type</a></span>) = {
      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a href="#161764">delegateCallers</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>)
        <span class="typed"><span class="type">()Unit</span><a href="#161770">initDelegateCallers</a></span>()
      <span class="comment">// create a field an store the function-object</span>
      <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a id="167170">mFunctionType</a></span>: <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a id="34226">MsilType</a></span> = <span class="typed"><span class="type">(GenMSIL.this.global.Type)ch.epfl.lamp.compiler.msil.Type</span><a href="#161750">msilType</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Type</span><a href="#167167">functionType</a></span>)
      <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.FieldBuilder</span><a id="167171">anonfunField</a></span>: <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.FieldBuilder</span><a id="83522">FieldBuilder</a></span> = <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a href="#161764">delegateCallers</a></span>.<span class="typed"><span class="type">(String,ch.epfl.lamp.compiler.msil.Type,short)ch.epfl.lamp.compiler.msil.emit.FieldBuilder</span><a id="162735">DefineField</a></span>(
        <span class="typed"><span class="type">java.lang.String(&quot;$anonfunField$$&quot;)</span><span class="string">&quot;$anonfunField$$&quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">=&gt; Int</span><a href="#161767">nbDelegateCallers</a></span>, <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a href="#167170">mFunctionType</a></span>,
        FieldAttributes.InitOnly | FieldAttributes.Public <span class="typed"><span class="type">Short(54)</span><span >|</span></span> FieldAttributes.Static)
      <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.FieldInfo)Unit</span><a id="162533">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165457">Stsfld</a></span>, <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.FieldBuilder</span><a href="#167171">anonfunField</a></span>)


      <span class="comment">// create the static caller method and the delegate object</span>
      <span class="keyword">val</span> <span class="typed"><span class="type">(List[GenMSIL.this.global.Type], GenMSIL.this.global.Type)</span><span id="23625"><a href="#167249" id="1379">(</a></span></span><span class="typed"><span class="type">List[GenMSIL.this.global.Type]</span><span id="167249"><span id="167173"><a href="#167172" id="23614">paramTypes</a></span></span></span>, <span class="typed"><span class="type">GenMSIL.this.global.Type</span><span id="167250"><span id="167174"><a href="#167172" id="23616">returnType</a></span></span></span>) = <span class="typed"><span class="type">GenMSIL.this.global.Type</span><a href="#167168">delegateType</a></span>.<span class="typed"><span class="type">(GenMSIL.this.global.Name)GenMSIL.this.global.Symbol</span><a href="../../symtab/Types.scala.html#25684">member</a></span>(<span class="typed"><span class="type">object GenMSIL.this.global.nme</span><a href="../../symtab/StdNames.scala.html#22317">nme</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Name</span><a href="../../symtab/StdNames.scala.html#30762">apply</a></span>).<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Type</span><a href="../../symtab/Symbols.scala.html#25230">tpe</a></span> <span class="typed"><span class="type">(List[GenMSIL.this.global.Type], GenMSIL.this.global.Type)</span><span class="keyword">match</span></span> {
        <span class="typed"><span class="type">(List[GenMSIL.this.global.Type], GenMSIL.this.global.Type)</span><span class="keyword">case</span></span> <a id="1">MethodType</a>(<span class="typed"><span class="type">List[GenMSIL.this.global.Type]</span><a id="167245">delParams</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.Type</span><a id="167246">delReturn</a></span>) =&gt; <span class="typed"><span class="type">(List[GenMSIL.this.global.Type],GenMSIL.this.global.Type)(List[GenMSIL.this.global.Type], GenMSIL.this.global.Type)</span><span id="23625"><a id="1379">(</a></span></span><span class="typed"><span class="type">List[GenMSIL.this.global.Type]</span><a href="#167245">delParams</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.Type</span><a href="#167246">delReturn</a></span>)
        <span class="typed"><span class="type">Nothing</span><span class="keyword">case</span></span> _ =&gt; <span class="typed"><span class="type">(String)Nothing</span><a href="../../Global.scala.html#21214">abort</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;not a delegate type: &quot;)</span><span class="string">&quot;not a delegate type: &quot;</span></span>  <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">GenMSIL.this.global.Type</span><a href="#167168">delegateType</a></span>)
      }
      <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.MethodBuilder</span><a id="167175">caller</a></span>: <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.MethodBuilder</span><a id="83438">MethodBuilder</a></span> = <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.TypeBuilder</span><a href="#161764">delegateCallers</a></span>.<span class="typed"><span class="type">(String,short,ch.epfl.lamp.compiler.msil.Type,Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.emit.MethodBuilder</span><a id="162736">DefineMethod</a></span>(
        <span class="typed"><span class="type">java.lang.String(&quot;$delegateCaller$$&quot;)</span><span class="string">&quot;$delegateCaller$$&quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">=&gt; Int</span><a href="#161767">nbDelegateCallers</a></span>,
        MethodAttributes.Final | MethodAttributes.Public <span class="typed"><span class="type">Short(54)</span><span >|</span></span> MethodAttributes.Static,
        <span class="typed"><span class="type">(GenMSIL.this.global.Type)ch.epfl.lamp.compiler.msil.Type</span><a href="#161750">msilType</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Type</span><a href="#167174">returnType</a></span>), <span class="typed"><span class="type">List[GenMSIL.this.global.Type]</span><a href="#167173">paramTypes</a></span>.<span class="typed"><span class="type">((GenMSIL.this.global.Type) =&gt; ch.epfl.lamp.compiler.msil.Type)List[ch.epfl.lamp.compiler.msil.Type]</span><a id="21362">map</a></span>(<span class="typed"><span class="type">(GenMSIL.this.global.Type)ch.epfl.lamp.compiler.msil.Type</span><a href="#161750">msilType</a></span>).<span class="typed"><span class="type">Array[ch.epfl.lamp.compiler.msil.Type]</span><a id="21675">toArray</a></span>)
      <span class="keyword">for</span> (<span class="typed"><span class="type">((Int) =&gt; Unit)Unit</span><span id="40475"><a id="167285">i</a></span></span> &lt;- <span class="typed"><span class="type">implicit scala.Predef.intWrapper : (Int)scala.runtime.RichInt</span><span id="6133"><a id="821" class="int">0</a></span></span> <span class="typed"><span class="type">(Int)Range</span><a id="26778">until</a></span> <span class="typed"><span class="type">List[GenMSIL.this.global.Type]</span><a href="#167173">paramTypes</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21345">length</a></span>)
        <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.MethodBuilder</span><a href="#167175">caller</a></span>.<span class="typed"><span class="type">(Int,Int,String)ch.epfl.lamp.compiler.msil.emit.ParameterBuilder</span><a id="163977">DefineParameter</a></span>(<span class="typed"><span class="type">Int</span><a href="#167285">i</a></span>, ParameterAttributes.<span class="typed"><span class="type">Int(0)</span><span >None</span></span>, <span class="typed"><span class="type">java.lang.String(&quot;arg&quot;)</span><span class="string">&quot;arg&quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">Int</span><a href="#167285">i</a></span>)
      <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.ConstructorInfo</span><a id="167176">delegCtor</a></span> = <span class="typed"><span class="type">(GenMSIL.this.global.Type)ch.epfl.lamp.compiler.msil.Type</span><a href="#161750">msilType</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Type</span><a href="#167168">delegateType</a></span>).<span class="typed"><span class="type">(Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.ConstructorInfo</span><a id="35242">GetConstructor</a></span>(<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.Type*)Array[ch.epfl.lamp.compiler.msil.Type]</span><span id="21530"><a id="1073">Array</a></span></span>(<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35360">MOBJECT</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="#161591">INT_PTR</a></span>))
      <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165249">Ldnull</a></span>)
      <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.MethodInfo)Unit</span><a id="162539">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165597">Ldftn</a></span>, <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.MethodBuilder</span><a href="#167175">caller</a></span>)
      <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#161644">mcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.ConstructorInfo)Unit</span><a id="162530">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165435">Newobj</a></span>, <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.ConstructorInfo</span><a href="#167176">delegCtor</a></span>)


      <span class="comment">// create the static caller method body</span>
      <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.MethodInfo</span><a id="167177">functionApply</a></span>: <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.MethodInfo</span><a id="34319">MethodInfo</a></span> = <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.MethodInfo</span><a href="#161776">getMethod</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Type</span><a href="#167167">functionType</a></span>.<span class="typed"><span class="type">(GenMSIL.this.global.Name)GenMSIL.this.global.Symbol</span><a href="../../symtab/Types.scala.html#25684">member</a></span>(<span class="typed"><span class="type">object GenMSIL.this.global.nme</span><a href="../../symtab/StdNames.scala.html#22317">nme</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Name</span><a href="../../symtab/StdNames.scala.html#30762">apply</a></span>))
      <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a id="167178">dcode</a></span>: <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a id="83453">ILGenerator</a></span> = <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.MethodBuilder</span><a href="#167175">caller</a></span>.<span class="typed"><span class="type">()ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a id="163978">GetILGenerator</a></span>()
      <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#167178">dcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.FieldInfo)Unit</span><a id="162533">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165451">Ldsfld</a></span>, <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.FieldBuilder</span><a href="#167171">anonfunField</a></span>)
      <span class="keyword">for</span> (<span class="typed"><span class="type">((Int) =&gt; Unit)Unit</span><span id="40475"><a id="167549">i</a></span></span> &lt;- <span class="typed"><span class="type">implicit scala.Predef.intWrapper : (Int)scala.runtime.RichInt</span><span id="6133"><a id="821" class="int">0</a></span></span> <span class="typed"><span class="type">(Int)Range</span><a id="26778">until</a></span> <span class="typed"><span class="type">List[GenMSIL.this.global.Type]</span><a href="#167173">paramTypes</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21345">length</a></span>) {
        <span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.ILGenerator)(Int)Unit</span><a href="#161729">loadArg</a></span>(<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#167178">dcode</a></span>)(<span class="typed"><span class="type">Int</span><a href="#167549">i</a></span>)
        <span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.ILGenerator,GenMSIL.this.global.icodes.TypeKind)Unit</span><a href="#161772">emitBox</a></span>(<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#167178">dcode</a></span>, <span class="typed"><span class="type">(GenMSIL.this.global.icodes.global.Type)GenMSIL.this.global.icodes.TypeKind</span><a href="../icode/TypeKinds.scala.html#32385">toTypeKind</a></span>(<span class="typed"><span class="type">(Int)GenMSIL.this.global.Type</span><a href="#167173" id="21361">paramTypes</a></span>(<span class="typed"><span class="type">Int</span><a href="#167549">i</a></span>)))
      }
      <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#167178">dcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.MethodInfo)Unit</span><a id="162539">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165427">Callvirt</a></span>, <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.MethodInfo</span><a href="#167177">functionApply</a></span>)
      <span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.ILGenerator,GenMSIL.this.global.icodes.TypeKind)Unit</span><a href="#161773">emitUnbox</a></span>(<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#167178">dcode</a></span>, <span class="typed"><span class="type">(GenMSIL.this.global.icodes.global.Type)GenMSIL.this.global.icodes.TypeKind</span><a href="../icode/TypeKinds.scala.html#32385">toTypeKind</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Type</span><a href="#167174">returnType</a></span>))
      <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#167178">dcode</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165291">Ret</a></span>)

      <span class="typed"><span class="type">(Int)Unit</span><a href="#161768">nbDelegateCallers</a></span> = <span class="typed"><span class="type">=&gt; Int</span><a href="#161767">nbDelegateCallers</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">+</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>

    } <span class="comment">//def createDelegateCaller</span>

    <span class="keyword">def</span> <span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.ILGenerator,GenMSIL.this.global.icodes.TypeKind)Unit</span><a id="161772">emitBox</a></span>(<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a id="167550">code</a></span>: <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a id="83453">ILGenerator</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.icodes.TypeKind</span><a id="167551">boxType</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.icodes.TypeKind</span><a href="../icode/TypeKinds.scala.html#32353">TypeKind</a></span>) = (<span class="typed"><span class="type">GenMSIL.this.global.icodes.TypeKind</span><a href="#167551">boxType</a></span>: @<span class="typed"><span class="type">GenMSIL.this.global.icodes.TypeKind @unchecked</span><a href="../icode/TypeKinds.scala.html#32353">unchecked</a></span>) <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
      <span class="comment">// doesn't make sense, unit as parameter..</span>
      <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.UNIT</span><a href="../icode/TypeKinds.scala.html#32355">UNIT</a></span>   =&gt; <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#167550">code</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.FieldInfo)Unit</span><a id="162533">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165451">Ldsfld</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.FieldInfo</span><a href="#161618">boxedUnit</a></span>)
      <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.BOOL</span><a href="../icode/TypeKinds.scala.html#32357">BOOL</a></span> | <span class="typed"><span class="type">object GenMSIL.this.global.icodes.BYTE</span><a href="../icode/TypeKinds.scala.html#32359">BYTE</a></span> | <span class="typed"><span class="type">object GenMSIL.this.global.icodes.SHORT</span><a href="../icode/TypeKinds.scala.html#32361">SHORT</a></span> | <span class="typed"><span class="type">object GenMSIL.this.global.icodes.CHAR</span><a href="../icode/TypeKinds.scala.html#32363">CHAR</a></span> | <span class="typed"><span class="type">object GenMSIL.this.global.icodes.INT</span><a href="../icode/TypeKinds.scala.html#32365">INT</a></span> | <span class="typed"><span class="type">object GenMSIL.this.global.icodes.LONG</span><a href="../icode/TypeKinds.scala.html#32367">LONG</a></span> | <span class="typed"><span class="type">object GenMSIL.this.global.icodes.FLOAT</span><a href="../icode/TypeKinds.scala.html#32369">FLOAT</a></span> | <span class="typed"><span class="type">object GenMSIL.this.global.icodes.DOUBLE</span><a href="../icode/TypeKinds.scala.html#32371">DOUBLE</a></span> =&gt;
        <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#167550">code</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.Type)Unit</span><a id="162542">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165481">Box</a></span>, <span class="typed"><span class="type">(GenMSIL.this.global.icodes.TypeKind)ch.epfl.lamp.compiler.msil.Type</span><a href="#161749">msilType</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.TypeKind</span><a href="#167551">boxType</a></span>))
      <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">REFERENCE</a>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a id="167570">cls</a></span>) <span class="keyword">if</span> (<span class="typed"><span class="type">object GenMSIL.this.global.definitions</span><a href="../../symtab/Definitions.scala.html#22259">definitions</a></span>.<span class="typed"><span class="type">=&gt; scala.collection.mutable.HashMap[GenMSIL.this.global.Symbol,GenMSIL.this.global.Symbol]</span><a href="../../symtab/Definitions.scala.html#26124">unboxMethod</a></span>.<span class="typed"><span class="type">(GenMSIL.this.global.Symbol)Boolean</span><a id="24240">contains</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#167570">cls</a></span>)) =&gt;
        <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#167550">code</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.Type)Unit</span><a id="162542">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165481">Box</a></span>, (<span class="typed"><span class="type">(GenMSIL.this.global.icodes.TypeKind)ch.epfl.lamp.compiler.msil.Type</span><a href="#161749">msilType</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.TypeKind</span><a href="#167551">boxType</a></span>)))
      <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">REFERENCE</a>(_) | <a id="1">ARRAY</a>(_) =&gt; <span class="typed"><span class="type">Unit</span><span >(</span></span>)
    }

    <span class="keyword">def</span> <span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.ILGenerator,GenMSIL.this.global.icodes.TypeKind)Unit</span><a id="161773">emitUnbox</a></span>(<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a id="167591">code</a></span>: <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a id="83453">ILGenerator</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.icodes.TypeKind</span><a id="167592">boxType</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.icodes.TypeKind</span><a href="../icode/TypeKinds.scala.html#32353">TypeKind</a></span>) = (<span class="typed"><span class="type">GenMSIL.this.global.icodes.TypeKind</span><a href="#167592">boxType</a></span>: @<span class="typed"><span class="type">GenMSIL.this.global.icodes.TypeKind @unchecked</span><a href="../icode/TypeKinds.scala.html#32353">unchecked</a></span>) <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
      <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.UNIT</span><a href="../icode/TypeKinds.scala.html#32355">UNIT</a></span>   =&gt; <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#167591">code</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165283">Pop</a></span>)
      <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.BOOL</span><a href="../icode/TypeKinds.scala.html#32357">BOOL</a></span>   =&gt; <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#167591">code</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.Type)Unit</span><a id="162542">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165443">Unbox</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.Type</span><a href="../../symtab/clr/CLRTypes.scala.html#35348">MBOOL</a></span>); <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#167591">code</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode)Unit</span><a id="162528">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165347">Ldind_I1</a></span>)
      <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.BYTE</span><a href="../icode/TypeKinds.scala.html#32359">BYTE</a></span>   =&gt; <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#167591">code</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.MethodInfo)Unit</span><a id="162539">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165287">Call</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.MethodInfo</span><a href="#161604">toByte</a></span>)
      <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.SHORT</span><a href="../icode/TypeKinds.scala.html#32361">SHORT</a></span>  =&gt; <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#167591">code</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.MethodInfo)Unit</span><a id="162539">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165287">Call</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.MethodInfo</span><a href="#161606">toShort</a></span>)
      <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.CHAR</span><a href="../icode/TypeKinds.scala.html#32363">CHAR</a></span>   =&gt; <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#167591">code</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.MethodInfo)Unit</span><a id="162539">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165287">Call</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.MethodInfo</span><a href="#161608">toChar</a></span>)
      <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.INT</span><a href="../icode/TypeKinds.scala.html#32365">INT</a></span>    =&gt; <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#167591">code</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.MethodInfo)Unit</span><a id="162539">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165287">Call</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.MethodInfo</span><a href="#161610">toInt</a></span>)
      <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.LONG</span><a href="../icode/TypeKinds.scala.html#32367">LONG</a></span>   =&gt; <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#167591">code</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.MethodInfo)Unit</span><a id="162539">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165287">Call</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.MethodInfo</span><a href="#161612">toLong</a></span>)
      <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.FLOAT</span><a href="../icode/TypeKinds.scala.html#32369">FLOAT</a></span>  =&gt; <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#167591">code</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.MethodInfo)Unit</span><a id="162539">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165287">Call</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.MethodInfo</span><a href="#161614">toFloat</a></span>)
      <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object GenMSIL.this.global.icodes.DOUBLE</span><a href="../icode/TypeKinds.scala.html#32371">DOUBLE</a></span> =&gt; <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#167591">code</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.MethodInfo)Unit</span><a id="162539">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165287">Call</a></span>, <span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.MethodInfo</span><a href="#161616">toDouble</a></span>)
      <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">REFERENCE</a>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a id="167660">cls</a></span>) <span class="keyword">if</span> (<span class="typed"><span class="type">object GenMSIL.this.global.definitions</span><a href="../../symtab/Definitions.scala.html#22259">definitions</a></span>.<span class="typed"><span class="type">=&gt; scala.collection.mutable.HashMap[GenMSIL.this.global.Symbol,GenMSIL.this.global.Symbol]</span><a href="../../symtab/Definitions.scala.html#26124">unboxMethod</a></span>.<span class="typed"><span class="type">(GenMSIL.this.global.Symbol)Boolean</span><a id="24240">contains</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.global.Symbol</span><a href="#167660">cls</a></span>)) =&gt;
        <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#167591">code</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.Type)Unit</span><a id="162542">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165443">Unbox</a></span>, <span class="typed"><span class="type">(GenMSIL.this.global.icodes.TypeKind)ch.epfl.lamp.compiler.msil.Type</span><a href="#161749">msilType</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.TypeKind</span><a href="#167592">boxType</a></span>))
        <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.emit.ILGenerator</span><a href="#167591">code</a></span>.<span class="typed"><span class="type">(ch.epfl.lamp.compiler.msil.emit.OpCode,ch.epfl.lamp.compiler.msil.Type)Unit</span><a id="162542">Emit</a></span>(<span class="typed"><span class="type">object ch.epfl.lamp.compiler.msil.emit.OpCodes</span><a id="83424">OpCodes</a></span>.<span class="typed"><span class="type">=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode</span><a id="165431">Ldobj</a></span>, <span class="typed"><span class="type">(GenMSIL.this.global.icodes.TypeKind)ch.epfl.lamp.compiler.msil.Type</span><a href="#161749">msilType</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.icodes.TypeKind</span><a href="#167592">boxType</a></span>))
      <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">REFERENCE</a>(_) | <a id="1">ARRAY</a>(_) =&gt; <span class="typed"><span class="type">Unit</span><span >(</span></span>)
    }

    <span class="comment">// #####################################################################</span>
    <span class="comment">// get and create methods / constructors</span>
 
    <span class="keyword">def</span> <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.ConstructorInfo</span><a id="161774">getConstructor</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a id="167063">sym</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="../../symtab/Symbols.scala.html#21866">Symbol</a></span>): <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.ConstructorInfo</span><a id="34250">ConstructorInfo</a></span> = <span class="typed"><span class="type">=&gt; scala.collection.mutable.Map[GenMSIL.this.global.loaders.clrTypes.global.Symbol,ch.epfl.lamp.compiler.msil.ConstructorInfo]</span><a href="../../symtab/clr/CLRTypes.scala.html#35389">constructors</a></span>.<span class="typed"><span class="type">(GenMSIL.this.global.loaders.clrTypes.global.Symbol)Option[ch.epfl.lamp.compiler.msil.ConstructorInfo]</span><a id="24235">get</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#167063">sym</a></span>.<span class="typed"><span class="type">GenMSIL.this.global.loaders.clrTypes.global.Symbol</span><a id="3503">asInstanceOf</a></span>[clrTypes.global.<span class="typed"><span class="type">GenMSIL.this.global.loaders.clrTypes.global.Symbol</span><a href="../../symtab/Symbols.scala.html#21866">Symbol</a></span>]) <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.ConstructorInfo</span><span class="keyword">match</span></span> {
      <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.ConstructorInfo</span><span class="keyword">case</span></span> <a id="1">Some</a>(<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.ConstructorInfo</span><a id="169224">constr</a></span>) =&gt; <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.ConstructorInfo</span><a href="#169224">constr</a></span>
      <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.ConstructorInfo</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object None</span><a id="536">None</a></span> =&gt;
        <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a id="169225">mClass</a></span> = <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.Type</span><a href="#161752">getType</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#167063">sym</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="../../symtab/Symbols.scala.html#25211">owner</a></span>)
        <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.ConstructorInfo</span><a id="169226">constr</a></span> = <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a href="#169225">mClass</a></span>.<span class="typed"><span class="type">(Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.ConstructorInfo</span><a id="35242">GetConstructor</a></span>(<span class="typed"><span class="type">(GenMSIL.this.global.Symbol)Array[ch.epfl.lamp.compiler.msil.Type]</span><a href="#161751">msilParamTypes</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#167063">sym</a></span>))
        <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.ConstructorInfo</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.ConstructorInfo</span><a href="#169226">constr</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5794">eq</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>) {
          <span class="typed"><span class="type">object java.lang.System</span><a id="1886">System</a></span>.<span class="typed"><span class="type">java.io.PrintStream</span><a id="47436">out</a></span>.<span class="typed"><span class="type">(java.lang.String)Unit</span><a id="27111">println</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;Cannot find constructor &quot;)</span><span class="string">&quot;Cannot find constructor &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#167063">sym</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="../../symtab/Symbols.scala.html#25211">owner</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;::&quot;)</span><span class="string">&quot;::&quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#167063">sym</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Name</span><a href="../../symtab/Symbols.scala.html#25215">name</a></span>)
          <span class="typed"><span class="type">object java.lang.System</span><a id="1886">System</a></span>.<span class="typed"><span class="type">java.io.PrintStream</span><a id="47436">out</a></span>.<span class="typed"><span class="type">(java.lang.String)Unit</span><a id="27111">println</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;scope = &quot;)</span><span class="string">&quot;scope = &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#167063">sym</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="../../symtab/Symbols.scala.html#25211">owner</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Type</span><a href="../../symtab/Symbols.scala.html#25230">tpe</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Scope</span><a href="../../symtab/Types.scala.html#25677">decls</a></span>)
          <span class="typed"><span class="type">Nothing</span><span class="keyword">throw</span></span> <span class="typed"><span class="type">(java.lang.String)java.lang.Error</span><a id="27228" class="keyword">new</a></span> <span class="typed"><span class="type">java.lang.Error</span><span id="5975"><a id="821">Error</a></span></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#167063">sym</a></span>.<span class="typed"><span class="type">=&gt; String</span><a href="../../symtab/Symbols.scala.html#25313">fullNameString</a></span>)
        }
        <span class="keyword">else</span> {
          <span class="typed"><span class="type">(GenMSIL.this.global.Symbol,ch.epfl.lamp.compiler.msil.ConstructorInfo)Unit</span><a href="#161775">mapConstructor</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#167063">sym</a></span>, <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.ConstructorInfo</span><a href="#169226">constr</a></span>)
          <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.ConstructorInfo</span><a href="#169226">constr</a></span>
        }
    }

    <span class="keyword">def</span> <span class="typed"><span class="type">(GenMSIL.this.global.Symbol,ch.epfl.lamp.compiler.msil.ConstructorInfo)Unit</span><a id="161775">mapConstructor</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a id="169004">sym</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="../../symtab/Symbols.scala.html#21866">Symbol</a></span>, <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.ConstructorInfo</span><a id="169005">cInfo</a></span>: <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.ConstructorInfo</span><a id="34250">ConstructorInfo</a></span>) = {
      <span class="typed"><span class="type">=&gt; scala.collection.mutable.Map[GenMSIL.this.global.loaders.clrTypes.global.Symbol,ch.epfl.lamp.compiler.msil.ConstructorInfo]</span><a href="../../symtab/clr/CLRTypes.scala.html#35389">constructors</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#169004">sym</a></span>.<span class="typed"><span class="type">GenMSIL.this.global.loaders.clrTypes.global.Symbol</span><a id="3503">asInstanceOf</a></span>[clrTypes.global.<span class="typed"><span class="type">GenMSIL.this.global.loaders.clrTypes.global.Symbol</span><a href="../../symtab/Symbols.scala.html#21866">Symbol</a></span>]) = <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.ConstructorInfo</span><a href="#169005">cInfo</a></span>
    }

    <span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.MethodInfo</span><a id="161776">getMethod</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a id="167531">sym</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="../../symtab/Symbols.scala.html#21866">Symbol</a></span>): <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.MethodInfo</span><a id="34319">MethodInfo</a></span> = {
    <span class="comment">//private def getMethod(sym: Symbol): MethodInfo = sym match {</span>
<span class="comment">//       case SRToInt =&gt; toInt</span>
<span class="comment">//       case SRToDouble =&gt; toDouble</span>
<span class="comment">//       case SRToLong =&gt; toLong</span>
<span class="comment">//       case SRToChar =&gt; toChar</span>
<span class="comment">//       case SRToFloat =&gt; toFloat</span>
<span class="comment">//       case SRToBool =&gt; toBool</span>
<span class="comment">//       case SRToByte =&gt; toByte</span>
<span class="comment">//       case SRToShort =&gt; toShort</span>
<span class="comment">//       case _ =&gt;</span>

        <span class="typed"><span class="type">=&gt; scala.collection.mutable.Map[GenMSIL.this.global.loaders.clrTypes.global.Symbol,ch.epfl.lamp.compiler.msil.MethodInfo]</span><a href="../../symtab/clr/CLRTypes.scala.html#35391">methods</a></span>.<span class="typed"><span class="type">(GenMSIL.this.global.loaders.clrTypes.global.Symbol)Option[ch.epfl.lamp.compiler.msil.MethodInfo]</span><a id="24235">get</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#167531">sym</a></span>.<span class="typed"><span class="type">GenMSIL.this.global.loaders.clrTypes.global.Symbol</span><a id="3503">asInstanceOf</a></span>[clrTypes.global.<span class="typed"><span class="type">GenMSIL.this.global.loaders.clrTypes.global.Symbol</span><a href="../../symtab/Symbols.scala.html#21866">Symbol</a></span>]) <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.MethodInfo</span><span class="keyword">match</span></span> {
        <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.MethodInfo</span><span class="keyword">case</span></span> <a id="1">Some</a>(<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.MethodInfo</span><a id="169234">method</a></span>) =&gt; <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.MethodInfo</span><a href="#169234">method</a></span>
        <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.MethodInfo</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object None</span><a id="536">None</a></span> =&gt;
          <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a id="169235">mClass</a></span> = <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.Type</span><a href="#161752">getType</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#167531">sym</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="../../symtab/Symbols.scala.html#25211">owner</a></span>)
          <span class="keyword">try</span> {
            <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.MethodInfo</span><a id="169236">method</a></span> = <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a href="#169235">mClass</a></span>.<span class="typed"><span class="type">(java.lang.String,Array[ch.epfl.lamp.compiler.msil.Type],ch.epfl.lamp.compiler.msil.Type)ch.epfl.lamp.compiler.msil.MethodInfo</span><a id="35246">GetMethod</a></span>(<span class="typed"><span class="type">(GenMSIL.this.global.Symbol)String</span><a href="#161783">getMethodName</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#167531">sym</a></span>), <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)Array[ch.epfl.lamp.compiler.msil.Type]</span><a href="#161751">msilParamTypes</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#167531">sym</a></span>),
                                          <span class="typed"><span class="type">(GenMSIL.this.global.Type)ch.epfl.lamp.compiler.msil.Type</span><a href="#161750">msilType</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#167531">sym</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Type</span><a href="../../symtab/Symbols.scala.html#25230">tpe</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Type</span><a href="../../symtab/Types.scala.html#25663">resultType</a></span>))
            <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.MethodInfo</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.MethodInfo</span><a href="#169236">method</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5794">eq</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>) {
              <span class="typed"><span class="type">object java.lang.System</span><a id="1886">System</a></span>.<span class="typed"><span class="type">java.io.PrintStream</span><a id="47436">out</a></span>.<span class="typed"><span class="type">(java.lang.String)Unit</span><a id="27111">println</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;Cannot find method &quot;)</span><span class="string">&quot;Cannot find method &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#167531">sym</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="../../symtab/Symbols.scala.html#25211">owner</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;::&quot;)</span><span class="string">&quot;::&quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)String</span><a href="#161737">msilName</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#167531">sym</a></span>))
              <span class="typed"><span class="type">object java.lang.System</span><a id="1886">System</a></span>.<span class="typed"><span class="type">java.io.PrintStream</span><a id="47436">out</a></span>.<span class="typed"><span class="type">(java.lang.String)Unit</span><a id="27111">println</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;scope = &quot;)</span><span class="string">&quot;scope = &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#167531">sym</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="../../symtab/Symbols.scala.html#25211">owner</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Type</span><a href="../../symtab/Symbols.scala.html#25230">tpe</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Scope</span><a href="../../symtab/Types.scala.html#25677">decls</a></span>)
              <span class="typed"><span class="type">Nothing</span><span class="keyword">throw</span></span> <span class="typed"><span class="type">(java.lang.String)java.lang.Error</span><a id="27228" class="keyword">new</a></span> <span class="typed"><span class="type">java.lang.Error</span><span id="5975"><a id="821">Error</a></span></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#167531">sym</a></span>.<span class="typed"><span class="type">=&gt; String</span><a href="../../symtab/Symbols.scala.html#25313">fullNameString</a></span>)
            }
            <span class="keyword">else</span> {
              <span class="typed"><span class="type">(GenMSIL.this.global.Symbol,ch.epfl.lamp.compiler.msil.MethodInfo)Unit</span><a href="#161777">mapMethod</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#167531">sym</a></span>, <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.MethodInfo</span><a href="#169236">method</a></span>)
              <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.MethodInfo</span><a href="#169236">method</a></span>
            }
          }
          <span class="keyword">catch</span> {
            <span class="typed"><span class="type">Nothing</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Exception</span><a id="169249">e</a></span>: <span class="typed"><span class="type">Exception</span><a id="2131">Exception</a></span> =&gt;
              <span class="typed"><span class="type">object Console</span><a id="440">Console</a></span>.<span class="typed"><span class="type">(Any)Unit</span><a id="27062">println</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;While looking up &quot;)</span><span class="string">&quot;While looking up &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a href="#169235">mClass</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;::&quot;)</span><span class="string">&quot;::&quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#167531">sym</a></span>.<span class="typed"><span class="type">=&gt; String</span><a href="../../symtab/Symbols.scala.html#25310">nameString</a></span>)
            <span class="typed"><span class="type">object Console</span><a id="440">Console</a></span>.<span class="typed"><span class="type">(Any)Unit</span><a id="27062">println</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;\011&quot;)</span><span class="string">&quot;\t&quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)String</span><a href="#161784">showsym</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#167531">sym</a></span>))
            <span class="typed"><span class="type">Nothing</span><span class="keyword">throw</span></span> <span class="typed"><span class="type">Exception</span><a href="#169249">e</a></span>
          }
      }
    }

    <span class="comment">/*
     * add a mapping between sym and mInfo
     */</span>
    <span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(GenMSIL.this.global.Symbol,ch.epfl.lamp.compiler.msil.MethodInfo)Unit</span><a id="161777">mapMethod</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a id="162908">sym</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="../../symtab/Symbols.scala.html#21866">Symbol</a></span>, <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.MethodInfo</span><a id="162909">mInfo</a></span>: <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.MethodInfo</span><a id="34319">MethodInfo</a></span>) {
      <span class="typed"><span class="type">(Boolean,=&gt; Any)Unit</span><span id="6004"><a id="821">assert</a></span></span> (<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.MethodInfo</span><a href="#162909">mInfo</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5793">!=</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>, <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.MethodInfo</span><a href="#162909">mInfo</a></span>)
      <span class="typed"><span class="type">=&gt; scala.collection.mutable.Map[GenMSIL.this.global.loaders.clrTypes.global.Symbol,ch.epfl.lamp.compiler.msil.MethodInfo]</span><a href="../../symtab/clr/CLRTypes.scala.html#35391">methods</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#162908">sym</a></span>.<span class="typed"><span class="type">GenMSIL.this.global.loaders.clrTypes.global.Symbol</span><a id="3503">asInstanceOf</a></span>[clrTypes.global.<span class="typed"><span class="type">GenMSIL.this.global.loaders.clrTypes.global.Symbol</span><a href="../../symtab/Symbols.scala.html#21866">Symbol</a></span>]) = <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.MethodInfo</span><a href="#162909">mInfo</a></span>
    }

    <span class="comment">/*
     * add mapping between sym and method with newName, paramTypes of newClass
     */</span>
    <span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(GenMSIL.this.global.Symbol,ch.epfl.lamp.compiler.msil.Type,String,Array[ch.epfl.lamp.compiler.msil.Type])Unit</span><a id="161778">mapMethod</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a id="162904">sym</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="../../symtab/Symbols.scala.html#21866">Symbol</a></span>, <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a id="162905">newClass</a></span>: <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a id="34226">MsilType</a></span>, <span class="typed"><span class="type">String</span><a id="162906">newName</a></span>: <span class="typed"><span class="type">String</span><a id="1861">String</a></span>, <span class="typed"><span class="type">Array[ch.epfl.lamp.compiler.msil.Type]</span><a id="162907">paramTypes</a></span>: <span class="typed"><span class="type">Array[ch.epfl.lamp.compiler.msil.Type]</span><a id="1072">Array</a></span>[MsilType]) {
      <span class="keyword">val</span> <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.MethodInfo</span><a id="169260">methodInfo</a></span> = <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a href="#162905">newClass</a></span>.<span class="typed"><span class="type">(java.lang.String,Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.MethodInfo</span><a id="35245">GetMethod</a></span>(<span class="typed"><span class="type">String</span><a href="#162906">newName</a></span>, <span class="typed"><span class="type">Array[ch.epfl.lamp.compiler.msil.Type]</span><a href="#162907">paramTypes</a></span>)
      <span class="typed"><span class="type">(Boolean,=&gt; Any)Unit</span><span id="6004"><a id="821">assert</a></span></span>(<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.MethodInfo</span><a href="#169260">methodInfo</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5793">!=</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>, <span class="typed"><span class="type">java.lang.String(&quot;Can't find mapping for &quot;)</span><span class="string">&quot;Can't find mapping for &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#162904">sym</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot; -&gt; &quot;)</span><span class="string">&quot; -&gt; &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span>
             <span class="typed"><span class="type">String</span><a href="#162906">newName</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;(&quot;)</span><span class="string">&quot;(&quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">Array[ch.epfl.lamp.compiler.msil.Type]</span><a href="#162907">paramTypes</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;)&quot;)</span><span class="string">&quot;)&quot;</span></span>)
      <span class="typed"><span class="type">(GenMSIL.this.global.Symbol,ch.epfl.lamp.compiler.msil.MethodInfo)Unit</span><a href="#161777">mapMethod</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#162904">sym</a></span>, <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.MethodInfo</span><a href="#169260">methodInfo</a></span>)
      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.MethodInfo</span><a href="#169260">methodInfo</a></span>.<span class="typed"><span class="type">()Boolean</span><a id="35701">IsStatic</a></span>) 
        <span class="typed"><span class="type">=&gt; scala.collection.mutable.HashSet[GenMSIL.this.global.Symbol]</span><a href="#161626">dynToStatMapped</a></span> <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)Unit</span><a id="25499">+=</a></span> <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#162904">sym</a></span>
    }

    <span class="comment">/*
     * add mapping between method with name and paramTypes of clazz to
     * method with newName and newParamTypes of newClass (used for instance
     * for &quot;wait&quot;)
     */</span>
    <span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(GenMSIL.this.global.Symbol,GenMSIL.this.global.Name,Array[GenMSIL.this.global.Type],ch.epfl.lamp.compiler.msil.Type,String,Array[ch.epfl.lamp.compiler.msil.Type])Unit</span><a id="161779">mapMethod</a></span>(
      <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a id="162898">clazz</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="../../symtab/Symbols.scala.html#21866">Symbol</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.Name</span><a id="162899">name</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.Name</span><a href="../../symtab/Names.scala.html#21103">Name</a></span>, <span class="typed"><span class="type">Array[GenMSIL.this.global.Type]</span><a id="162900">paramTypes</a></span>: <span class="typed"><span class="type">Array[GenMSIL.this.global.Type]</span><a id="1072">Array</a></span>[Type],
      <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a id="162901">newClass</a></span>: <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a id="34226">MsilType</a></span>, <span class="typed"><span class="type">String</span><a id="162902">newName</a></span>: <span class="typed"><span class="type">String</span><a id="1861">String</a></span>, <span class="typed"><span class="type">Array[ch.epfl.lamp.compiler.msil.Type]</span><a id="162903">newParamTypes</a></span>: <span class="typed"><span class="type">Array[ch.epfl.lamp.compiler.msil.Type]</span><a id="1072">Array</a></span>[MsilType]) {
        <span class="keyword">val</span> <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a id="169272">methodSym</a></span> = <span class="typed"><span class="type">(GenMSIL.this.global.Symbol,GenMSIL.this.global.Name,Array[GenMSIL.this.global.Type])GenMSIL.this.global.Symbol</span><a href="#161782">lookupMethod</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#162898">clazz</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.Name</span><a href="#162899">name</a></span>, <span class="typed"><span class="type">Array[GenMSIL.this.global.Type]</span><a href="#162900">paramTypes</a></span>)
        <span class="typed"><span class="type">(Boolean,=&gt; Any)Unit</span><span id="6004"><a id="821">assert</a></span></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#169272">methodSym</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5793">!=</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>, <span class="typed"><span class="type">java.lang.String(&quot;cannot find method &quot;)</span><span class="string">&quot;cannot find method &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">GenMSIL.this.global.Name</span><a href="#162899">name</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;(&quot;)</span><span class="string">&quot;(&quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span>
               <span class="typed"><span class="type">Array[GenMSIL.this.global.Type]</span><a href="#162900">paramTypes</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;)&quot;)</span><span class="string">&quot;)&quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot; in class &quot;)</span><span class="string">&quot; in class &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#162898">clazz</a></span>)
        <span class="typed"><span class="type">(GenMSIL.this.global.Symbol,ch.epfl.lamp.compiler.msil.Type,String,Array[ch.epfl.lamp.compiler.msil.Type])Unit</span><a href="#161778">mapMethod</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#169272">methodSym</a></span>, <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a href="#162901">newClass</a></span>, <span class="typed"><span class="type">String</span><a href="#162902">newName</a></span>, <span class="typed"><span class="type">Array[ch.epfl.lamp.compiler.msil.Type]</span><a href="#162903">newParamTypes</a></span>)
      }

    <span class="comment">/*
     * add maping for member with name and paramTypes to member
     * newName of newClass (same parameters)
     */</span>
    <span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(GenMSIL.this.global.Symbol,GenMSIL.this.global.Name,Array[GenMSIL.this.global.Type],ch.epfl.lamp.compiler.msil.Type,String)Unit</span><a id="161780">mapMethod</a></span>(
      <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a id="162893">clazz</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="../../symtab/Symbols.scala.html#21866">Symbol</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.Name</span><a id="162894">name</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.Name</span><a href="../../symtab/Names.scala.html#21103">Name</a></span>, <span class="typed"><span class="type">Array[GenMSIL.this.global.Type]</span><a id="162895">paramTypes</a></span>: <span class="typed"><span class="type">Array[GenMSIL.this.global.Type]</span><a id="1072">Array</a></span>[Type],
      <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a id="162896">newClass</a></span>: <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a id="34226">MsilType</a></span>, <span class="typed"><span class="type">String</span><a id="162897">newName</a></span>: <span class="typed"><span class="type">String</span><a id="1861">String</a></span>) {
        <span class="typed"><span class="type">(GenMSIL.this.global.Symbol,GenMSIL.this.global.Name,Array[GenMSIL.this.global.Type],ch.epfl.lamp.compiler.msil.Type,String,Array[ch.epfl.lamp.compiler.msil.Type])Unit</span><a href="#161779">mapMethod</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#162893">clazz</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.Name</span><a href="#162894">name</a></span>, <span class="typed"><span class="type">Array[GenMSIL.this.global.Type]</span><a href="#162895">paramTypes</a></span>, <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a href="#162896">newClass</a></span>, <span class="typed"><span class="type">String</span><a href="#162897">newName</a></span>, <span class="typed"><span class="type">Array[GenMSIL.this.global.Type]</span><a href="#162895">paramTypes</a></span> <span class="typed"><span class="type">((GenMSIL.this.global.Type) =&gt; ch.epfl.lamp.compiler.msil.Type)Array[ch.epfl.lamp.compiler.msil.Type]</span><a id="21516">map</a></span> <span class="typed"><span class="type">(GenMSIL.this.global.Type)ch.epfl.lamp.compiler.msil.Type</span><a href="#161750">msilType</a></span>)
      }

    <span class="comment">/*
     * add mapping for all methods with name of clazz to the corresponding
     * method (same parameters) with newName of newClass
     */</span>
    <span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(GenMSIL.this.global.Symbol,GenMSIL.this.global.Name,ch.epfl.lamp.compiler.msil.Type,String)Unit</span><a id="161781">mapMethod</a></span>(
      <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a id="162889">clazz</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="../../symtab/Symbols.scala.html#21866">Symbol</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.Name</span><a id="162890">name</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.Name</span><a href="../../symtab/Names.scala.html#21103">Name</a></span>,
      <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a id="162891">newClass</a></span>: <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a id="34226">MsilType</a></span>, <span class="typed"><span class="type">String</span><a id="162892">newName</a></span>: <span class="typed"><span class="type">String</span><a id="1861">String</a></span>) {
        <span class="keyword">val</span> <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a id="169289">memberSym</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="../../symtab/Symbols.scala.html#21866">Symbol</a></span> = <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#162889">clazz</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Type</span><a href="../../symtab/Symbols.scala.html#25230">tpe</a></span>.<span class="typed"><span class="type">(GenMSIL.this.global.Name)GenMSIL.this.global.Symbol</span><a href="../../symtab/Types.scala.html#25684">member</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Name</span><a href="#162890">name</a></span>)
        <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#169289">memberSym</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Type</span><a href="../../symtab/Symbols.scala.html#25230">tpe</a></span> <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
          <span class="comment">// alternatives: List[Symbol]</span>
          <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">OverloadedType</a>(_, <span class="typed"><span class="type">List[GenMSIL.this.global.Symbol]</span><a id="169290">alternatives</a></span>) =&gt;
            <span class="typed"><span class="type">List[GenMSIL.this.global.Symbol]</span><a href="#169290">alternatives</a></span>.<span class="typed"><span class="type">((GenMSIL.this.global.Symbol) =&gt; Unit)Unit</span><a id="21366">foreach</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a id="169292">s</a></span> =&gt; <span class="typed"><span class="type">(GenMSIL.this.global.Symbol,ch.epfl.lamp.compiler.msil.Type,String,Array[ch.epfl.lamp.compiler.msil.Type])Unit</span><a href="#161778">mapMethod</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#169292">s</a></span>, <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a href="#162891">newClass</a></span>, <span class="typed"><span class="type">String</span><a href="#162892">newName</a></span>, <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)Array[ch.epfl.lamp.compiler.msil.Type]</span><a href="#161751">msilParamTypes</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#169292">s</a></span>)))

          <span class="comment">// paramTypes: List[Type], resType: Type</span>
          <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">MethodType</a>(<span class="typed"><span class="type">List[GenMSIL.this.global.Type]</span><a id="169295">paramTypes</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.Type</span><a id="169296">resType</a></span>) =&gt;
            <span class="typed"><span class="type">(GenMSIL.this.global.Symbol,ch.epfl.lamp.compiler.msil.Type,String,Array[ch.epfl.lamp.compiler.msil.Type])Unit</span><a href="#161778">mapMethod</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#169289">memberSym</a></span>, <span class="typed"><span class="type">ch.epfl.lamp.compiler.msil.Type</span><a href="#162891">newClass</a></span>, <span class="typed"><span class="type">String</span><a href="#162892">newName</a></span>, <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)Array[ch.epfl.lamp.compiler.msil.Type]</span><a href="#161751">msilParamTypes</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#169289">memberSym</a></span>))

          <span class="typed"><span class="type">Nothing</span><span class="keyword">case</span></span> _ =&gt;
            <span class="typed"><span class="type">(String)Nothing</span><a href="../../Global.scala.html#21214">abort</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;member not found: &quot;)</span><span class="string">&quot;member not found: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#162889">clazz</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;, &quot;)</span><span class="string">&quot;, &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">GenMSIL.this.global.Name</span><a href="#162890">name</a></span>)
        }
      }


    <span class="comment">/*
     * find the method in clazz with name and paramTypes
     */</span>
    <span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(GenMSIL.this.global.Symbol,GenMSIL.this.global.Name,Array[GenMSIL.this.global.Type])GenMSIL.this.global.Symbol</span><a id="161782">lookupMethod</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a id="162884">clazz</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="../../symtab/Symbols.scala.html#21866">Symbol</a></span>, <span class="typed"><span class="type">GenMSIL.this.global.Name</span><a id="162885">name</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.Name</span><a href="../../symtab/Names.scala.html#21103">Name</a></span>, <span class="typed"><span class="type">Array[GenMSIL.this.global.Type]</span><a id="162886">paramTypes</a></span>: <span class="typed"><span class="type">Array[GenMSIL.this.global.Type]</span><a id="1072">Array</a></span>[Type]): <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="../../symtab/Symbols.scala.html#21866">Symbol</a></span> = {
      <span class="keyword">val</span> <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a id="169299">memberSym</a></span> = <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#162884">clazz</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Type</span><a href="../../symtab/Symbols.scala.html#25230">tpe</a></span>.<span class="typed"><span class="type">(GenMSIL.this.global.Name)GenMSIL.this.global.Symbol</span><a href="../../symtab/Types.scala.html#25684">member</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Name</span><a href="#162885">name</a></span>)
      <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#169299">memberSym</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Type</span><a href="../../symtab/Symbols.scala.html#25230">tpe</a></span> <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><span class="keyword">match</span></span> {
        <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><span class="keyword">case</span></span> <a id="1">OverloadedType</a>(_, <span class="typed"><span class="type">List[GenMSIL.this.global.Symbol]</span><a id="169300">alternatives</a></span>) =&gt;
          <span class="typed"><span class="type">List[GenMSIL.this.global.Symbol]</span><a href="#169300">alternatives</a></span>.<span class="typed"><span class="type">((GenMSIL.this.global.Symbol) =&gt; Boolean)Option[GenMSIL.this.global.Symbol]</span><a id="21374">find</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a id="169302">s</a></span> =&gt; {
            <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="169303">i</a></span>: <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span> = <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>
            <span class="keyword">var</span> <span class="typed"><span class="type">Boolean</span><a id="169304">typesOK</a></span>: <span class="typed"><span class="type">Boolean</span><a id="2170">Boolean</a></span> = <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>
            <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Array[GenMSIL.this.global.Type]</span><a href="#162886">paramTypes</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21508">length</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3141">==</a></span> <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#169302">s</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Type</span><a href="../../symtab/Symbols.scala.html#25230">tpe</a></span>.<span class="typed"><span class="type">=&gt; List[GenMSIL.this.global.Type]</span><a href="../../symtab/Types.scala.html#25668">paramTypes</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21345">length</a></span>){
              <span class="typed"><span class="type">Unit</span><a href="#169308" class="keyword">while</a></span>(<span class="typed"><span class="type">Int</span><a href="#169303">i</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&lt;</a></span> <span class="typed"><span class="type">Array[GenMSIL.this.global.Type]</span><a href="#162886">paramTypes</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21508">length</a></span>){
                <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">(Int)GenMSIL.this.global.Type</span><a href="#162886" id="21509">paramTypes</a></span>(<span class="typed"><span class="type">Int</span><a href="#169303">i</a></span>) <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5793">!=</a></span> <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#169302">s</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Type</span><a href="../../symtab/Symbols.scala.html#25230">tpe</a></span>.<span class="typed"><span class="type">(Int)GenMSIL.this.global.Type</span><a href="../../symtab/Types.scala.html#25668" id="21361">paramTypes</a></span>(<span class="typed"><span class="type">Int</span><a href="#169303">i</a></span>))
                  <span class="typed"><span class="type">Boolean</span><a href="#169304">typesOK</a></span> = <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>
                <span class="typed"><span class="type">Int</span><a href="#169303">i</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">+=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
              } 
            } <span class="keyword">else</span> {
              <span class="typed"><span class="type">Boolean</span><a href="#169304">typesOK</a></span> = <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>
            }
            <span class="typed"><span class="type">Boolean</span><a href="#169304">typesOK</a></span>
          }) <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><span class="keyword">match</span></span> {
            <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><span class="keyword">case</span></span> <a id="1">Some</a>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a id="169341">sym</a></span>) =&gt; <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#169341">sym</a></span>
            <span class="typed"><span class="type">Nothing</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object None</span><a id="536">None</a></span> =&gt; <span class="typed"><span class="type">(String)Nothing</span><a href="../../Global.scala.html#21214">abort</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;member of &quot;)</span><span class="string">&quot;member of &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#162884">clazz</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;, &quot;)</span><span class="string">&quot;, &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">GenMSIL.this.global.Name</span><a href="#162885">name</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;(&quot;)</span><span class="string">&quot;(&quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span>
                               <span class="typed"><span class="type">Array[GenMSIL.this.global.Type]</span><a href="#162886">paramTypes</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;) not found&quot;)</span><span class="string">&quot;) not found&quot;</span></span>)
          }

        <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><span class="keyword">case</span></span> <a id="1">MethodType</a>(_, _) =&gt; <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#169299">memberSym</a></span>

        <span class="typed"><span class="type">Nothing</span><span class="keyword">case</span></span> _ =&gt; <span class="typed"><span class="type">(String)Nothing</span><a href="../../Global.scala.html#21214">abort</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;member not found: &quot;)</span><span class="string">&quot;member not found: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">GenMSIL.this.global.Name</span><a href="#162885">name</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot; of &quot;)</span><span class="string">&quot; of &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#162884">clazz</a></span>)
      }
    }

    <span class="keyword">def</span> <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)String</span><a id="161783">getMethodName</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a id="169010">methodSym</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="../../symtab/Symbols.scala.html#21866">Symbol</a></span>): <span class="typed"><span class="type">String</span><a id="1861">String</a></span> = {
      <span class="keyword">val</span> <span class="typed"><span class="type">GenMSIL.this.global.Name</span><a id="169342">name</a></span> = <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#169010">methodSym</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Name</span><a href="../../symtab/Symbols.scala.html#25215">name</a></span>
      <span class="keyword">val</span> <span class="typed"><span class="type">List[GenMSIL.this.global.Type]</span><a id="169343">params</a></span> = <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#169010">methodSym</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Type</span><a href="../../symtab/Symbols.scala.html#25230">tpe</a></span>.<span class="typed"><span class="type">=&gt; List[GenMSIL.this.global.Type]</span><a href="../../symtab/Types.scala.html#25668">paramTypes</a></span>
      <span class="typed"><span class="type">String</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">GenMSIL.this.global.Name</span><a href="#169342">name</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">object GenMSIL.this.global.nme</span><a href="../../symtab/StdNames.scala.html#22317">nme</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Name</span><a href="../../symtab/StdNames.scala.html#30828">finalize_</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">List[GenMSIL.this.global.Type]</span><a href="#169343">params</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21345">length</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3141">==</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>)
        <span class="typed"><span class="type">java.lang.String(&quot;Finalize&quot;)</span><span class="string">&quot;Finalize&quot;</span></span>
      <span class="keyword">else</span> <span class="typed"><span class="type">String</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">GenMSIL.this.global.Name</span><a href="#169342">name</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">object GenMSIL.this.global.nme</span><a href="../../symtab/StdNames.scala.html#22317">nme</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Name</span><a href="../../symtab/StdNames.scala.html#30936">toString_</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">List[GenMSIL.this.global.Type]</span><a href="#169343">params</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21345">length</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3141">==</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>)
        <span class="typed"><span class="type">java.lang.String(&quot;ToString&quot;)</span><span class="string">&quot;ToString&quot;</span></span>
      <span class="keyword">else</span> <span class="typed"><span class="type">String</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">GenMSIL.this.global.Name</span><a href="#169342">name</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">object GenMSIL.this.global.nme</span><a href="../../symtab/StdNames.scala.html#22317">nme</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Name</span><a href="../../symtab/StdNames.scala.html#30848">hashCode_</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">List[GenMSIL.this.global.Type]</span><a href="#169343">params</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21345">length</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3141">==</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>)
        <span class="typed"><span class="type">java.lang.String(&quot;GetHashCode&quot;)</span><span class="string">&quot;GetHashCode&quot;</span></span>
      <span class="keyword">else</span> <span class="typed"><span class="type">String</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">GenMSIL.this.global.Name</span><a href="#169342">name</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">object GenMSIL.this.global.nme</span><a href="../../symtab/StdNames.scala.html#22317">nme</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Name</span><a href="../../symtab/StdNames.scala.html#30810">equals_</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">List[GenMSIL.this.global.Type]</span><a href="#169343">params</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21345">length</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3141">==</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span>
              <span class="typed"><span class="type">(Int)GenMSIL.this.global.Type</span><a href="#169343" id="21361">params</a></span>(<span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>) <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">object GenMSIL.this.global.definitions</span><a href="../../symtab/Definitions.scala.html#22259">definitions</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="../../symtab/Definitions.scala.html#25778">ObjectClass</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Type</span><a href="../../symtab/Symbols.scala.html#25230">tpe</a></span>)
        <span class="typed"><span class="type">java.lang.String(&quot;Equals&quot;)</span><span class="string">&quot;Equals&quot;</span></span>
      <span class="comment">// FIXME: why is there no nme.clone_ ?</span>
      <span class="keyword">else</span> <span class="typed"><span class="type">String</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">GenMSIL.this.global.Name</span><a href="#169342">name</a></span>.<span class="typed"><span class="type">()String</span><a href="../../symtab/Names.scala.html#23898">toString</a></span>() <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">java.lang.String(&quot;clone&quot;)</span><span class="string">&quot;clone&quot;</span></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">List[GenMSIL.this.global.Type]</span><a href="#169343">params</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21345">length</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3141">==</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>)
        <span class="typed"><span class="type">java.lang.String(&quot;Clone&quot;)</span><span class="string">&quot;Clone&quot;</span></span>
      <span class="keyword">else</span>
        <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)String</span><a href="#161737">msilName</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#169010">methodSym</a></span>)
    }

    <span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(GenMSIL.this.global.Symbol)String</span><a id="161784">showsym</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a id="166964">sym</a></span>: <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="../../symtab/Symbols.scala.html#21866">Symbol</a></span>): <span class="typed"><span class="type">String</span><a id="1861">String</a></span> = (<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#166964">sym</a></span>.<span class="typed"><span class="type">()String</span><a href="../../symtab/Symbols.scala.html#25315">toString</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span>
      <span class="typed"><span class="type">java.lang.String(&quot;\012  symbol = &quot;)</span><span class="string">&quot;\n  symbol = &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">object scala.tools.nsc.symtab.Flags</span><a href="../../symtab/Flags.scala.html#9658">Flags</a></span>.<span class="typed"><span class="type">(Long)String</span><a href="../../symtab/Flags.scala.html#20637">flagsToString</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#166964">sym</a></span>.<span class="typed"><span class="type">=&gt; Long</span><a href="../../symtab/Symbols.scala.html#25218">flags</a></span>) <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot; &quot;)</span><span class="string">&quot; &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#166964">sym</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span>
      <span class="typed"><span class="type">java.lang.String(&quot;\012  owner  = &quot;)</span><span class="string">&quot;\n  owner  = &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">object scala.tools.nsc.symtab.Flags</span><a href="../../symtab/Flags.scala.html#9658">Flags</a></span>.<span class="typed"><span class="type">(Long)String</span><a href="../../symtab/Flags.scala.html#20637">flagsToString</a></span>(<span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#166964">sym</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="../../symtab/Symbols.scala.html#25211">owner</a></span>.<span class="typed"><span class="type">=&gt; Long</span><a href="../../symtab/Symbols.scala.html#25218">flags</a></span>) <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot; &quot;)</span><span class="string">&quot; &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">GenMSIL.this.global.Symbol</span><a href="#166964">sym</a></span>.<span class="typed"><span class="type">=&gt; GenMSIL.this.global.Symbol</span><a href="../../symtab/Symbols.scala.html#25211">owner</a></span>
    )

  } <span class="comment">// class BytecodeGenerator</span>

} <span class="comment">// class GenMSIL</span>

        </pre>
    </body>
</html>