<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/backend/msil/GenMSIL.scala</title>
        <script type="text/javascript" src="../../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../../style.css" title="Style">
    </head>
    <body>
        <pre>
/* NSC -- new scala compiler
 * Copyright 2005-2009 LAMP/EPFL
 * @author Nikolay Mihaylov
 */

// $Id: GenMSIL.scala 18547 2009-08-22 19:52:46Z extempore $

<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> backend.msil

<span class="keyword">import</span> java.io.{File, IOException}
<span class="keyword">import</span> java.nio.{ByteBuffer, ByteOrder}

<span class="keyword">import</span> scala.collection.mutable.{Map, HashMap, HashSet, Stack}
<span class="keyword">import</span> scala.tools.nsc.symtab._
<span class="keyword">import</span> scala.tools.nsc.util.Position

<span class="keyword">import</span> ch.epfl.lamp.compiler.msil.{Type =&gt; MsilType, _}
<span class="keyword">import</span> ch.epfl.lamp.compiler.msil.emit._

/**
 */
<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class GenMSIL extends scala.tools.nsc.SubComponent with ScalaObject" id="21613">GenMSIL</a> <span title="ScalaObject" class="keyword">extends</span> <a href="../../SubComponent.scala.html#8259" title="scala.tools.nsc.SubComponent">SubComponent</a> {
  <span class="keyword">import</span> global._
  <span class="keyword">import</span> loaders.clrTypes
  <span class="keyword">import</span> clrTypes.{types, constructors, methods, fields}
  <span class="keyword">import</span> icodes._
  <span class="keyword">import</span> icodes.opcodes._

  /** Create a new phase */
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(p: scala.tools.nsc.Phase)GenMSIL.this.MsilPhase" id="287375">newPhase</a>(<a title="scala.tools.nsc.Phase" id="287493">p</a>: <a href="../../Phase.scala.html#8862" title="scala.tools.nsc.Phase">Phase</a>) = <span title="GenMSIL.this.MsilPhase" class="keyword">new</span> <a href="#287378" title="GenMSIL.this.MsilPhase">MsilPhase</a>(<a href="#287493" title="scala.tools.nsc.Phase">p</a>)

  <span class="keyword">val</span> <a title="java.lang.String" id="287376">phaseName</a> = <span title="java.lang.String(&quot;msil&quot;)" class="string">&quot;msil&quot;</span>
  /** MSIL code generation phase
   */
  <span class="keyword">class</span> <a title="class MsilPhase extends GenMSIL.this.global.GlobalPhase with ScalaObject" id="287378">MsilPhase</a><span title="ScalaObject">(</span><a title="scala.tools.nsc.Phase" id="287504">prev</a>: <a href="../../Phase.scala.html#8862" title="scala.tools.nsc.Phase">Phase</a>) <span class="keyword">extends</span> <a href="../../Global.scala.html#39099" title="GenMSIL.this.global.GlobalPhase">GlobalPhase</a>(<a href="#287504" title="scala.tools.nsc.Phase">prev</a>) {
    <span class="keyword">def</span> <a title="=&gt; java.lang.String" id="287499">name</a> = <a href="#287376" title="=&gt; java.lang.String">phaseName</a>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Long" id="287500">newFlags</a> = <a href="../../SubComponent.scala.html#39630" title="=&gt; Long">phaseNewFlags</a>

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Boolean" id="287501">erasedTypes</a> = <span title="Boolean(true)" class="keyword">true</span>

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Unit" id="287502">run</a> {
      <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37759" title="=&gt; Boolean">value</a>) <a href="../../Global.scala.html#39062" title="(msg: String)Unit">inform</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;[running phase &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#287499" title="=&gt; java.lang.String">name</a> + <span title="java.lang.String(&quot; on icode]&quot;)" class="string">&quot; on icode]&quot;</span>)

      <span class="keyword">val</span> <a title="GenMSIL.this.BytecodeGenerator" id="287525">codeGenerator</a> = <span title="GenMSIL.this.BytecodeGenerator" class="keyword">new</span> <a href="#287379" title="GenMSIL.this.BytecodeGenerator">BytecodeGenerator</a>

      //classes is ICodes.classes, a HashMap[Symbol, IClass]
      <a href="../icode/ICodes.scala.html#46146" title="=&gt; scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.global.Symbol,GenMSIL.this.global.icodes.IClass]">classes</a>.<span title="(f: (GenMSIL.this.global.icodes.IClass) =&gt; Unit)Unit">valuesIterator</span> foreach <a href="#287525" title="GenMSIL.this.BytecodeGenerator">codeGenerator</a>.<a href="#287721" title="(cls: GenMSIL.this.global.icodes.IClass)Unit">findEntryPoint</a>

      <a href="#287525" title="GenMSIL.this.BytecodeGenerator">codeGenerator</a>.<a href="#287636" title="()Unit">initAssembly</a>

      <a href="../icode/ICodes.scala.html#46146" title="=&gt; scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.global.Symbol,GenMSIL.this.global.icodes.IClass]">classes</a>.<span title="(f: (GenMSIL.this.global.icodes.IClass) =&gt; Unit)Unit">valuesIterator</span> foreach <a href="#287525" title="GenMSIL.this.BytecodeGenerator">codeGenerator</a>.<a href="#287727" title="(iclass: GenMSIL.this.global.icodes.IClass)Unit">createTypeBuilder</a>
      <a href="../icode/ICodes.scala.html#46146" title="=&gt; scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.global.Symbol,GenMSIL.this.global.icodes.IClass]">classes</a>.<span title="(f: (GenMSIL.this.global.icodes.IClass) =&gt; Unit)Unit">valuesIterator</span> foreach <a href="#287525" title="GenMSIL.this.BytecodeGenerator">codeGenerator</a>.<a href="#287728" title="(iclass: GenMSIL.this.global.icodes.IClass)Unit">createClassMembers</a>

      <span class="keyword">try</span> {
        <a href="../icode/ICodes.scala.html#46146" title="=&gt; scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.global.Symbol,GenMSIL.this.global.icodes.IClass]">classes</a>.<span title="(f: (GenMSIL.this.global.icodes.IClass) =&gt; Unit)Unit">valuesIterator</span> foreach <a href="#287525" title="GenMSIL.this.BytecodeGenerator">codeGenerator</a>.<a href="#287641" title="(iclass: GenMSIL.this.global.icodes.IClass)Unit">genClass</a>
      } <span class="keyword">finally</span> {
        <a href="#287525" title="GenMSIL.this.BytecodeGenerator">codeGenerator</a>.<a href="#287639" title="()Unit">writeAssembly</a>
      }
    }

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(unit: GenMSIL.this.global.CompilationUnit)Unit" id="287503">apply</a>(<a title="GenMSIL.this.global.CompilationUnit" id="287814">unit</a>: <a href="../../CompilationUnits.scala.html#39196" title="GenMSIL.this.global.CompilationUnit">CompilationUnit</a>) {
      <a href="../../Global.scala.html#39077" title="(msg: String)Nothing">abort</a>(<span title="java.lang.String(&quot;MSIL works on icode classes, not on compilation units!&quot;)" class="string">&quot;MSIL works on icode classes, not on compilation units!&quot;</span>)
    }
  }

  /**
   * MSIL bytecode generator.
   *
   */
  <span class="keyword">class</span> <a title="class BytecodeGenerator extends java.lang.Object with ScalaObject" id="287379">BytecodeGenerator</a> <span title="ScalaObject">{</span>

    <span class="keyword">val</span> <a title="java.lang.String" id="287540">MODULE_INSTANCE_NAME</a> = <span title="java.lang.String(&quot;MODULE$&quot;)" class="string">&quot;MODULE$&quot;</span>

    <span class="keyword">import</span> clrTypes.{VOID =&gt; MVOID, BOOLEAN =&gt; MBOOL, UBYTE =&gt; MBYTE, SHORT =&gt; MSHORT,
                   CHAR =&gt; MCHAR, INT =&gt; MINT, LONG =&gt; MLONG, FLOAT =&gt; MFLOAT,
                   DOUBLE =&gt; MDOUBLE, OBJECT =&gt; MOBJECT, STRING =&gt; MSTRING,
                   STRING_ARRAY =&gt; MSTRING_ARRAY, SCALA_SYMTAB_ATTR =&gt; SYMTAB_ATTRIBUTE,
                   SYMTAB_CONSTR =&gt; SYMTAB_ATTRIBUTE_CONSTRUCTOR,
                   SYMTAB_DEFAULT_CONSTR =&gt; SYMTAB_ATTRIBUTE_EMPTY_CONSTRUCTOR}

    <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.Type" id="287543">EXCEPTION</a> = <a href="../../symtab/SymbolLoaders.scala.html#109166" title="object GenMSIL.this.global.loaders.clrTypes">clrTypes</a>.<a href="../../symtab/clr/CLRTypes.scala.html#287479" title="(name: String)ch.epfl.lamp.compiler.msil.Type">getType</a>(<span title="java.lang.String(&quot;System.Exception&quot;)" class="string">&quot;System.Exception&quot;</span>)
    <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.Type" id="287545">MBYTE_ARRAY</a> = <a href="../../symtab/SymbolLoaders.scala.html#109166" title="object GenMSIL.this.global.loaders.clrTypes">clrTypes</a>.<a href="../../symtab/clr/CLRTypes.scala.html#287481" title="(elemType: ch.epfl.lamp.compiler.msil.Type)ch.epfl.lamp.compiler.msil.Type">mkArrayType</a>(<a href="../../symtab/clr/CLRTypes.scala.html#287396" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MBYTE</a>)

    <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.Type" id="287547">ICLONEABLE</a> = <a href="../../symtab/SymbolLoaders.scala.html#109166" title="object GenMSIL.this.global.loaders.clrTypes">clrTypes</a>.<a href="../../symtab/clr/CLRTypes.scala.html#287479" title="(name: String)ch.epfl.lamp.compiler.msil.Type">getType</a>(<span title="java.lang.String(&quot;System.ICloneable&quot;)" class="string">&quot;System.ICloneable&quot;</span>)
    <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.MethodInfo" id="287549">MEMBERWISE_CLONE</a> = <a href="../../symtab/clr/CLRTypes.scala.html#287438" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MOBJECT</a>.<span title="(x$1: java.lang.String,x$2: Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.MethodInfo">GetMethod</span>(<span title="java.lang.String(&quot;MemberwiseClone&quot;)" class="string">&quot;MemberwiseClone&quot;</span>, <span title="object ch.epfl.lamp.compiler.msil.Type">MsilType</span>.<span title="Array[ch.epfl.lamp.compiler.msil.Type]">EmptyTypes</span>)

    <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.Type" id="287551">MMONITOR</a>       = <a href="../../symtab/SymbolLoaders.scala.html#109166" title="object GenMSIL.this.global.loaders.clrTypes">clrTypes</a>.<a href="../../symtab/clr/CLRTypes.scala.html#287479" title="(name: String)ch.epfl.lamp.compiler.msil.Type">getType</a>(<span title="java.lang.String(&quot;System.Threading.Monitor&quot;)" class="string">&quot;System.Threading.Monitor&quot;</span>)
    <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.MethodInfo" id="287553">MMONITOR_ENTER</a> = <a href="#287551" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MMONITOR</a>.<span title="(x$1: java.lang.String,x$2: Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.MethodInfo">GetMethod</span>(<span title="java.lang.String(&quot;Enter&quot;)" class="string">&quot;Enter&quot;</span>, <span title="(xs: ch.epfl.lamp.compiler.msil.Type*)(implicit evidence$2: scala.reflect.ClassManifest[ch.epfl.lamp.compiler.msil.Type])Array[ch.epfl.lamp.compiler.msil.Type]">Array</span><span title="(clazz: Class[_])scala.reflect.ClassManifest[ch.epfl.lamp.compiler.msil.Type]">(</span><a href="../../symtab/clr/CLRTypes.scala.html#287438" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MOBJECT</a>))
    <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.MethodInfo" id="287555">MMONITOR_EXIT</a>  = <a href="#287551" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MMONITOR</a>.<span title="(x$1: java.lang.String,x$2: Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.MethodInfo">GetMethod</span>(<span title="java.lang.String(&quot;Exit&quot;)" class="string">&quot;Exit&quot;</span>, <span title="(xs: ch.epfl.lamp.compiler.msil.Type*)(implicit evidence$2: scala.reflect.ClassManifest[ch.epfl.lamp.compiler.msil.Type])Array[ch.epfl.lamp.compiler.msil.Type]">Array</span><span title="(clazz: Class[_])scala.reflect.ClassManifest[ch.epfl.lamp.compiler.msil.Type]">(</span><a href="../../symtab/clr/CLRTypes.scala.html#287438" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MOBJECT</a>))

    <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.Type" id="287557">MSTRING_BUILDER</a> = <a href="../../symtab/SymbolLoaders.scala.html#109166" title="object GenMSIL.this.global.loaders.clrTypes">clrTypes</a>.<a href="../../symtab/clr/CLRTypes.scala.html#287479" title="(name: String)ch.epfl.lamp.compiler.msil.Type">getType</a>(<span title="java.lang.String(&quot;System.Text.StringBuilder&quot;)" class="string">&quot;System.Text.StringBuilder&quot;</span>)
    <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.ConstructorInfo" id="287559">MSTRING_BUILDER_CONSTR</a> = <a href="#287557" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MSTRING_BUILDER</a>.<span title="(x$1: Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.ConstructorInfo">GetConstructor</span>(<span title="object ch.epfl.lamp.compiler.msil.Type">MsilType</span>.<span title="Array[ch.epfl.lamp.compiler.msil.Type]">EmptyTypes</span>)
    <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.MethodInfo" id="287561">MSTRING_BUILDER_TOSTRING</a> = <a href="#287557" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MSTRING_BUILDER</a>.<span title="(x$1: java.lang.String,x$2: Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.MethodInfo">GetMethod</span>(<span title="java.lang.String(&quot;ToString&quot;)" class="string">&quot;ToString&quot;</span>,
                                                             <span title="object ch.epfl.lamp.compiler.msil.Type">MsilType</span>.<span title="Array[ch.epfl.lamp.compiler.msil.Type]">EmptyTypes</span>)

    <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.MethodInfo" id="287563">TYPE_FROM_HANDLE</a> =
      <a href="../../symtab/SymbolLoaders.scala.html#109166" title="object GenMSIL.this.global.loaders.clrTypes">clrTypes</a>.<a href="../../symtab/clr/CLRTypes.scala.html#287479" title="(name: String)ch.epfl.lamp.compiler.msil.Type">getType</a>(<span title="java.lang.String(&quot;System.Type&quot;)" class="string">&quot;System.Type&quot;</span>).<span title="(x$1: java.lang.String,x$2: Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.MethodInfo">GetMethod</span>(<span title="java.lang.String(&quot;GetTypeFromHandle&quot;)" class="string">&quot;GetTypeFromHandle&quot;</span>, <span title="(xs: ch.epfl.lamp.compiler.msil.Type*)(implicit evidence$2: scala.reflect.ClassManifest[ch.epfl.lamp.compiler.msil.Type])Array[ch.epfl.lamp.compiler.msil.Type]">Array</span><span title="(clazz: Class[_])scala.reflect.ClassManifest[ch.epfl.lamp.compiler.msil.Type]">(</span><a href="../../symtab/SymbolLoaders.scala.html#109166" title="object GenMSIL.this.global.loaders.clrTypes">clrTypes</a>.<a href="../../symtab/clr/CLRTypes.scala.html#287479" title="(name: String)ch.epfl.lamp.compiler.msil.Type">getType</a>(<span title="java.lang.String(&quot;System.RuntimeTypeHandle&quot;)" class="string">&quot;System.RuntimeTypeHandle&quot;</span>)))

    <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.Type" id="287565">INT_PTR</a> = <a href="../../symtab/SymbolLoaders.scala.html#109166" title="object GenMSIL.this.global.loaders.clrTypes">clrTypes</a>.<a href="../../symtab/clr/CLRTypes.scala.html#287479" title="(name: String)ch.epfl.lamp.compiler.msil.Type">getType</a>(<span title="java.lang.String(&quot;System.IntPtr&quot;)" class="string">&quot;System.IntPtr&quot;</span>)

    <span class="keyword">val</span> <a title="GenMSIL.this.global.Symbol" id="287567">JOBJECT</a> = <a href="../../symtab/Definitions.scala.html#26479" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28267" title="=&gt; GenMSIL.this.global.Symbol">ObjectClass</a>
    <span class="keyword">val</span> <a title="GenMSIL.this.global.Symbol" id="287569">JSTRING</a> = <a href="../../symtab/Definitions.scala.html#26479" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28333" title="=&gt; GenMSIL.this.global.Symbol">StringClass</a>

    <span class="keyword">var</span> <a title="GenMSIL.this.global.Symbol" id="287572">JSTRING_SUBSTRING_INT_INT</a>: <a href="../../symtab/Symbols.scala.html#26127" title="GenMSIL.this.global.Symbol">Symbol</a> = _

    <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.Type" id="287574">SystemConvert</a> = <a href="../../symtab/SymbolLoaders.scala.html#109166" title="object GenMSIL.this.global.loaders.clrTypes">clrTypes</a>.<a href="../../symtab/clr/CLRTypes.scala.html#287479" title="(name: String)ch.epfl.lamp.compiler.msil.Type">getType</a>(<span title="java.lang.String(&quot;System.Convert&quot;)" class="string">&quot;System.Convert&quot;</span>)

    <span class="keyword">val</span> <a title="Array[ch.epfl.lamp.compiler.msil.Type]" id="287576">objParam</a> = <span title="(xs: ch.epfl.lamp.compiler.msil.Type*)(implicit evidence$2: scala.reflect.ClassManifest[ch.epfl.lamp.compiler.msil.Type])Array[ch.epfl.lamp.compiler.msil.Type]">Array</span><span title="(clazz: Class[_])scala.reflect.ClassManifest[ch.epfl.lamp.compiler.msil.Type]">(</span><a href="../../symtab/clr/CLRTypes.scala.html#287438" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MOBJECT</a>)

//     val toBool:   MethodInfo = SystemConvert.GetMethod(&quot;ToBoolean&quot;, objParam)
    <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.MethodInfo" id="287578">toByte</a>:   <span title="ch.epfl.lamp.compiler.msil.MethodInfo">MethodInfo</span> = <a href="#287574" title="=&gt; ch.epfl.lamp.compiler.msil.Type">SystemConvert</a>.<span title="(x$1: java.lang.String,x$2: Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.MethodInfo">GetMethod</span>(<span title="java.lang.String(&quot;ToByte&quot;)" class="string">&quot;ToByte&quot;</span>, <a href="#287576" title="=&gt; Array[ch.epfl.lamp.compiler.msil.Type]">objParam</a>)
    <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.MethodInfo" id="287580">toShort</a>:  <span title="ch.epfl.lamp.compiler.msil.MethodInfo">MethodInfo</span> = <a href="#287574" title="=&gt; ch.epfl.lamp.compiler.msil.Type">SystemConvert</a>.<span title="(x$1: java.lang.String,x$2: Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.MethodInfo">GetMethod</span>(<span title="java.lang.String(&quot;ToInt16&quot;)" class="string">&quot;ToInt16&quot;</span>, <a href="#287576" title="=&gt; Array[ch.epfl.lamp.compiler.msil.Type]">objParam</a>)
    <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.MethodInfo" id="287582">toChar</a>:   <span title="ch.epfl.lamp.compiler.msil.MethodInfo">MethodInfo</span> = <a href="#287574" title="=&gt; ch.epfl.lamp.compiler.msil.Type">SystemConvert</a>.<span title="(x$1: java.lang.String,x$2: Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.MethodInfo">GetMethod</span>(<span title="java.lang.String(&quot;ToChar&quot;)" class="string">&quot;ToChar&quot;</span>, <a href="#287576" title="=&gt; Array[ch.epfl.lamp.compiler.msil.Type]">objParam</a>)
    <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.MethodInfo" id="287584">toInt</a>:    <span title="ch.epfl.lamp.compiler.msil.MethodInfo">MethodInfo</span> = <a href="#287574" title="=&gt; ch.epfl.lamp.compiler.msil.Type">SystemConvert</a>.<span title="(x$1: java.lang.String,x$2: Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.MethodInfo">GetMethod</span>(<span title="java.lang.String(&quot;ToInt32&quot;)" class="string">&quot;ToInt32&quot;</span>, <a href="#287576" title="=&gt; Array[ch.epfl.lamp.compiler.msil.Type]">objParam</a>)
    <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.MethodInfo" id="287586">toLong</a>:   <span title="ch.epfl.lamp.compiler.msil.MethodInfo">MethodInfo</span> = <a href="#287574" title="=&gt; ch.epfl.lamp.compiler.msil.Type">SystemConvert</a>.<span title="(x$1: java.lang.String,x$2: Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.MethodInfo">GetMethod</span>(<span title="java.lang.String(&quot;ToInt64&quot;)" class="string">&quot;ToInt64&quot;</span>, <a href="#287576" title="=&gt; Array[ch.epfl.lamp.compiler.msil.Type]">objParam</a>)
    <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.MethodInfo" id="287588">toFloat</a>:  <span title="ch.epfl.lamp.compiler.msil.MethodInfo">MethodInfo</span> = <a href="#287574" title="=&gt; ch.epfl.lamp.compiler.msil.Type">SystemConvert</a>.<span title="(x$1: java.lang.String,x$2: Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.MethodInfo">GetMethod</span>(<span title="java.lang.String(&quot;ToSingle&quot;)" class="string">&quot;ToSingle&quot;</span>, <a href="#287576" title="=&gt; Array[ch.epfl.lamp.compiler.msil.Type]">objParam</a>)
    <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.MethodInfo" id="287590">toDouble</a>: <span title="ch.epfl.lamp.compiler.msil.MethodInfo">MethodInfo</span> = <a href="#287574" title="=&gt; ch.epfl.lamp.compiler.msil.Type">SystemConvert</a>.<span title="(x$1: java.lang.String,x$2: Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.MethodInfo">GetMethod</span>(<span title="java.lang.String(&quot;ToDouble&quot;)" class="string">&quot;ToDouble&quot;</span>, <a href="#287576" title="=&gt; Array[ch.epfl.lamp.compiler.msil.Type]">objParam</a>)

    //val boxedUnit: FieldInfo = msilType(definitions.BoxedUnitModule.info).GetField(&quot;UNIT&quot;)
    <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.FieldInfo" id="287592">boxedUnit</a>: <span title="ch.epfl.lamp.compiler.msil.FieldInfo">FieldInfo</span> = <a href="../../symtab/clr/CLRTypes.scala.html#287471" title="(key: GenMSIL.this.global.loaders.clrTypes.global.Symbol)ch.epfl.lamp.compiler.msil.FieldInfo">fields</a>(<a href="../../symtab/Definitions.scala.html#26479" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28559" title="=&gt; GenMSIL.this.global.Symbol">BoxedUnit_UNIT</a>.<span title="[T0]T0">asInstanceOf</span><span title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">[</span>clrTypes.global.<a href="../../symtab/Symbols.scala.html#26127" title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">Symbol</a>])

    // Scala attributes
    // symtab.Definitions -&gt; object (singleton..)
    <span class="keyword">val</span> <a title="GenMSIL.this.global.Type" id="287594">SerializableAttr</a> = <a href="../../symtab/Definitions.scala.html#26479" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28560" title="=&gt; GenMSIL.this.global.Symbol">SerializableAttr</a>.<a href="../../symtab/Symbols.scala.html#27003" title="=&gt; GenMSIL.this.global.Type">tpe</a>
    <span class="keyword">val</span> <a title="GenMSIL.this.global.Type" id="287596">CloneableAttr</a>    = <a href="../../symtab/Definitions.scala.html#26479" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28576" title="(fullname: GenMSIL.this.global.Name)GenMSIL.this.global.Symbol">getClass</a>(<a href="../../symtab/Names.scala.html#26054" title="implicit scala.tools.nsc.symtab.Names.view : (s: String)GenMSIL.this.global.Name" class="string">&quot;scala.cloneable&quot;</a>).<a href="../../symtab/Symbols.scala.html#27003" title="=&gt; GenMSIL.this.global.Type">tpe</a>
    <span class="keyword">val</span> <a title="GenMSIL.this.global.Type" id="287598">TransientAtt</a>     = <a href="../../symtab/Definitions.scala.html#26479" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28576" title="(fullname: GenMSIL.this.global.Name)GenMSIL.this.global.Symbol">getClass</a>(<a href="../../symtab/Names.scala.html#26054" title="implicit scala.tools.nsc.symtab.Names.view : (s: String)GenMSIL.this.global.Name" class="string">&quot;scala.transient&quot;</a>).<a href="../../symtab/Symbols.scala.html#27003" title="=&gt; GenMSIL.this.global.Type">tpe</a>
    // remoting: the architectures are too different, no mapping (no portable code
    // possible)

    // java instance methods that are mapped to static methods in .net
    // these will need to be called with OpCodes.Call (not Callvirt)
    <span class="keyword">val</span> <a title="scala.collection.mutable.HashSet[GenMSIL.this.global.Symbol]" id="287600">dynToStatMapped</a>: <span title="scala.collection.mutable.HashSet[GenMSIL.this.global.Symbol]">HashSet</span>[Symbol] = <span title="scala.collection.mutable.HashSet[GenMSIL.this.global.Symbol]" class="keyword">new</span> <span title="scala.collection.mutable.HashSet[GenMSIL.this.global.Symbol]">HashSet</span>()

    <a href="#287602" title="()Unit">initMappings</a>()
    // ********************************************************************
    // Create the mappings
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="()Unit" id="287602">initMappings</a>() {
      <a href="#287726" title="(sym: GenMSIL.this.global.Symbol,mType: ch.epfl.lamp.compiler.msil.Type)Unit">mapType</a>(<a href="../../symtab/Definitions.scala.html#26479" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28261" title="=&gt; GenMSIL.this.global.Symbol">AnyClass</a>, <a href="../../symtab/clr/CLRTypes.scala.html#287438" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MOBJECT</a>)
      <a href="#287726" title="(sym: GenMSIL.this.global.Symbol,mType: ch.epfl.lamp.compiler.msil.Type)Unit">mapType</a>(<a href="../../symtab/Definitions.scala.html#26479" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28265" title="=&gt; GenMSIL.this.global.Symbol">AnyRefClass</a>, <a href="../../symtab/clr/CLRTypes.scala.html#287438" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MOBJECT</a>)
      //mapType(definitions.NullClass, clrTypes.getType(&quot;scala.AllRef$&quot;))
      //mapType(definitions.NothingClass, clrTypes.getType(&quot;scala.All$&quot;))
      // FIXME: for some reason the upper two lines map to null
      <a href="#287726" title="(sym: GenMSIL.this.global.Symbol,mType: ch.epfl.lamp.compiler.msil.Type)Unit">mapType</a>(<a href="../../symtab/Definitions.scala.html#26479" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28269" title="=&gt; GenMSIL.this.global.Symbol">NullClass</a>, <a href="#287543" title="=&gt; ch.epfl.lamp.compiler.msil.Type">EXCEPTION</a>)
      <a href="#287726" title="(sym: GenMSIL.this.global.Symbol,mType: ch.epfl.lamp.compiler.msil.Type)Unit">mapType</a>(<a href="../../symtab/Definitions.scala.html#26479" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28271" title="=&gt; GenMSIL.this.global.Symbol">NothingClass</a>, <a href="#287543" title="=&gt; ch.epfl.lamp.compiler.msil.Type">EXCEPTION</a>)

      <span class="keyword">val</span> <a title="Array[GenMSIL.this.global.Type]" id="289187">jEmpty</a> = <span title="Array[GenMSIL.this.global.Type]" class="keyword">new</span> <span title="Array[GenMSIL.this.global.Type]">Array</span>[Type](<span title="Int(0)" class="int">0</span>)
      <span class="keyword">val</span> <a title="Array[GenMSIL.this.global.Type]" id="289188">jString1</a> = <span title="(xs: GenMSIL.this.global.Type*)(implicit evidence$2: scala.reflect.ClassManifest[GenMSIL.this.global.Type])Array[GenMSIL.this.global.Type]">Array</span><a href="../../SubComponent.scala.html#39621" title="(prefix: scala.reflect.OptManifest[_],clazz: Class[_],args: scala.reflect.OptManifest[_]*)scala.reflect.ClassManifest[GenMSIL.this.global.Type]">(</a><a href="#287569" title="=&gt; GenMSIL.this.global.Symbol">JSTRING</a>.<a href="../../symtab/Symbols.scala.html#27003" title="=&gt; GenMSIL.this.global.Type">tpe</a>)
      <span class="keyword">val</span> <a title="Array[GenMSIL.this.global.Type]" id="289189">jInt1</a> = <span title="(xs: GenMSIL.this.global.Type*)(implicit evidence$2: scala.reflect.ClassManifest[GenMSIL.this.global.Type])Array[GenMSIL.this.global.Type]">Array</span><a href="../../SubComponent.scala.html#39621" title="(prefix: scala.reflect.OptManifest[_],clazz: Class[_],args: scala.reflect.OptManifest[_]*)scala.reflect.ClassManifest[GenMSIL.this.global.Type]">(</a><a href="../../symtab/Definitions.scala.html#26479" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28285" title="=&gt; GenMSIL.this.global.Symbol">IntClass</a>.<a href="../../symtab/Symbols.scala.html#27003" title="=&gt; GenMSIL.this.global.Type">tpe</a>)
      <span class="keyword">val</span> <a title="Array[GenMSIL.this.global.Type]" id="289190">jInt2</a> = <span title="(xs: GenMSIL.this.global.Type*)(implicit evidence$2: scala.reflect.ClassManifest[GenMSIL.this.global.Type])Array[GenMSIL.this.global.Type]">Array</span><a href="../../SubComponent.scala.html#39621" title="(prefix: scala.reflect.OptManifest[_],clazz: Class[_],args: scala.reflect.OptManifest[_]*)scala.reflect.ClassManifest[GenMSIL.this.global.Type]">(</a><a href="../../symtab/Definitions.scala.html#26479" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28285" title="=&gt; GenMSIL.this.global.Symbol">IntClass</a>.<a href="../../symtab/Symbols.scala.html#27003" title="=&gt; GenMSIL.this.global.Type">tpe</a>, <a href="../../symtab/Definitions.scala.html#26479" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28285" title="=&gt; GenMSIL.this.global.Symbol">IntClass</a>.<a href="../../symtab/Symbols.scala.html#27003" title="=&gt; GenMSIL.this.global.Type">tpe</a>)
      <span class="keyword">val</span> <a title="Array[GenMSIL.this.global.Type]" id="289191">jLong1</a> = <span title="(xs: GenMSIL.this.global.Type*)(implicit evidence$2: scala.reflect.ClassManifest[GenMSIL.this.global.Type])Array[GenMSIL.this.global.Type]">Array</span><a href="../../SubComponent.scala.html#39621" title="(prefix: scala.reflect.OptManifest[_],clazz: Class[_],args: scala.reflect.OptManifest[_]*)scala.reflect.ClassManifest[GenMSIL.this.global.Type]">(</a><a href="../../symtab/Definitions.scala.html#26479" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28287" title="=&gt; GenMSIL.this.global.Symbol">LongClass</a>.<a href="../../symtab/Symbols.scala.html#27003" title="=&gt; GenMSIL.this.global.Type">tpe</a>)
      <span class="keyword">val</span> <a title="Array[GenMSIL.this.global.Type]" id="289192">jStringInt</a> = <span title="(xs: GenMSIL.this.global.Type*)(implicit evidence$2: scala.reflect.ClassManifest[GenMSIL.this.global.Type])Array[GenMSIL.this.global.Type]">Array</span><a href="../../SubComponent.scala.html#39621" title="(prefix: scala.reflect.OptManifest[_],clazz: Class[_],args: scala.reflect.OptManifest[_]*)scala.reflect.ClassManifest[GenMSIL.this.global.Type]">(</a><a href="#287569" title="=&gt; GenMSIL.this.global.Symbol">JSTRING</a>.<a href="../../symtab/Symbols.scala.html#27003" title="=&gt; GenMSIL.this.global.Type">tpe</a>, <a href="../../symtab/Definitions.scala.html#26479" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28285" title="=&gt; GenMSIL.this.global.Symbol">IntClass</a>.<a href="../../symtab/Symbols.scala.html#27003" title="=&gt; GenMSIL.this.global.Type">tpe</a>)
      <span class="keyword">val</span> <a title="Array[GenMSIL.this.global.Type]" id="289193">jChar2</a> = <span title="(xs: GenMSIL.this.global.Type*)(implicit evidence$2: scala.reflect.ClassManifest[GenMSIL.this.global.Type])Array[GenMSIL.this.global.Type]">Array</span><a href="../../SubComponent.scala.html#39621" title="(prefix: scala.reflect.OptManifest[_],clazz: Class[_],args: scala.reflect.OptManifest[_]*)scala.reflect.ClassManifest[GenMSIL.this.global.Type]">(</a><a href="../../symtab/Definitions.scala.html#26479" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28283" title="=&gt; GenMSIL.this.global.Symbol">CharClass</a>.<a href="../../symtab/Symbols.scala.html#27003" title="=&gt; GenMSIL.this.global.Type">tpe</a>, <a href="../../symtab/Definitions.scala.html#26479" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28283" title="=&gt; GenMSIL.this.global.Symbol">CharClass</a>.<a href="../../symtab/Symbols.scala.html#27003" title="=&gt; GenMSIL.this.global.Type">tpe</a>)

      <span class="keyword">val</span> <a title="Array[ch.epfl.lamp.compiler.msil.Type]" id="289194">mObject1</a> = <span title="(xs: ch.epfl.lamp.compiler.msil.Type*)(implicit evidence$2: scala.reflect.ClassManifest[ch.epfl.lamp.compiler.msil.Type])Array[ch.epfl.lamp.compiler.msil.Type]">Array</span><span title="(clazz: Class[_])scala.reflect.ClassManifest[ch.epfl.lamp.compiler.msil.Type]">(</span><a href="../../symtab/clr/CLRTypes.scala.html#287438" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MOBJECT</a>)
      <span class="keyword">val</span> <a title="Array[ch.epfl.lamp.compiler.msil.Type]" id="289195">mString1</a> = <span title="(xs: ch.epfl.lamp.compiler.msil.Type*)(implicit evidence$2: scala.reflect.ClassManifest[ch.epfl.lamp.compiler.msil.Type])Array[ch.epfl.lamp.compiler.msil.Type]">Array</span><span title="(clazz: Class[_])scala.reflect.ClassManifest[ch.epfl.lamp.compiler.msil.Type]">(</span><a href="../../symtab/clr/CLRTypes.scala.html#287441" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MSTRING</a>)
      <span class="keyword">val</span> <a title="Array[ch.epfl.lamp.compiler.msil.Type]" id="289196">mString2</a> = <span title="(xs: ch.epfl.lamp.compiler.msil.Type*)(implicit evidence$2: scala.reflect.ClassManifest[ch.epfl.lamp.compiler.msil.Type])Array[ch.epfl.lamp.compiler.msil.Type]">Array</span><span title="(clazz: Class[_])scala.reflect.ClassManifest[ch.epfl.lamp.compiler.msil.Type]">(</span><a href="../../symtab/clr/CLRTypes.scala.html#287441" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MSTRING</a>, <a href="../../symtab/clr/CLRTypes.scala.html#287441" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MSTRING</a>)
      <span class="keyword">val</span> <a title="Array[ch.epfl.lamp.compiler.msil.Type]" id="289197">mChar1</a> = <span title="(xs: ch.epfl.lamp.compiler.msil.Type*)(implicit evidence$2: scala.reflect.ClassManifest[ch.epfl.lamp.compiler.msil.Type])Array[ch.epfl.lamp.compiler.msil.Type]">Array</span><span title="(clazz: Class[_])scala.reflect.ClassManifest[ch.epfl.lamp.compiler.msil.Type]">(</span><a href="../../symtab/clr/CLRTypes.scala.html#287405" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MCHAR</a>)
      <span class="keyword">val</span> <a title="Array[ch.epfl.lamp.compiler.msil.Type]" id="289198">mCharInt</a> = <span title="(xs: ch.epfl.lamp.compiler.msil.Type*)(implicit evidence$2: scala.reflect.ClassManifest[ch.epfl.lamp.compiler.msil.Type])Array[ch.epfl.lamp.compiler.msil.Type]">Array</span><span title="(clazz: Class[_])scala.reflect.ClassManifest[ch.epfl.lamp.compiler.msil.Type]">(</span><a href="../../symtab/clr/CLRTypes.scala.html#287405" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MCHAR</a>, <a href="../../symtab/clr/CLRTypes.scala.html#287408" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MINT</a>)

      <a href="#287572" title="(x$1: GenMSIL.this.global.Symbol)Unit">JSTRING_SUBSTRING_INT_INT</a> = <a href="#287755" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,paramTypes: Array[GenMSIL.this.global.Type])GenMSIL.this.global.Symbol">lookupMethod</a>(<a href="#287569" title="=&gt; GenMSIL.this.global.Symbol">JSTRING</a>, <a href="../../symtab/Names.scala.html#26054" title="implicit scala.tools.nsc.symtab.Names.view : (s: String)GenMSIL.this.global.Name" class="string">&quot;substring&quot;</a>, <a href="#289190" title="Array[GenMSIL.this.global.Type]">jInt2</a>)

      <a href="#287754" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,newClass: ch.epfl.lamp.compiler.msil.Type,newName: String)Unit">mapMethod</a>(<a href="#287567" title="=&gt; GenMSIL.this.global.Symbol">JOBJECT</a>, <a href="../../symtab/Names.scala.html#26054" title="implicit scala.tools.nsc.symtab.Names.view : (s: String)GenMSIL.this.global.Name" class="string">&quot;clone&quot;</a>, <a href="../../symtab/clr/CLRTypes.scala.html#287438" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MOBJECT</a>, <span title="java.lang.String(&quot;MemberwiseClone&quot;)" class="string">&quot;MemberwiseClone&quot;</span>)
      <a href="#287754" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,newClass: ch.epfl.lamp.compiler.msil.Type,newName: String)Unit">mapMethod</a>(<a href="#287567" title="=&gt; GenMSIL.this.global.Symbol">JOBJECT</a>, <a href="../../symtab/StdNames.scala.html#26531" title="object GenMSIL.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29866" title="=&gt; GenMSIL.this.global.Name">equals_</a>, <a href="../../symtab/clr/CLRTypes.scala.html#287438" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MOBJECT</a>, <span title="java.lang.String(&quot;Equals&quot;)" class="string">&quot;Equals&quot;</span>)
      <a href="#287754" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,newClass: ch.epfl.lamp.compiler.msil.Type,newName: String)Unit">mapMethod</a>(<a href="#287567" title="=&gt; GenMSIL.this.global.Symbol">JOBJECT</a>, <a href="../../symtab/StdNames.scala.html#26531" title="object GenMSIL.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29900" title="=&gt; GenMSIL.this.global.Name">hashCode_</a>, <a href="../../symtab/clr/CLRTypes.scala.html#287438" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MOBJECT</a>, <span title="java.lang.String(&quot;GetHashCode&quot;)" class="string">&quot;GetHashCode&quot;</span>)
      <a href="#287754" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,newClass: ch.epfl.lamp.compiler.msil.Type,newName: String)Unit">mapMethod</a>(<a href="#287567" title="=&gt; GenMSIL.this.global.Symbol">JOBJECT</a>, <a href="../../symtab/StdNames.scala.html#26531" title="object GenMSIL.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29968" title="=&gt; GenMSIL.this.global.Name">toString_</a>, <a href="../../symtab/clr/CLRTypes.scala.html#287438" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MOBJECT</a>, <span title="java.lang.String(&quot;ToString&quot;)" class="string">&quot;ToString&quot;</span>)
      <a href="#287754" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,newClass: ch.epfl.lamp.compiler.msil.Type,newName: String)Unit">mapMethod</a>(<a href="#287567" title="=&gt; GenMSIL.this.global.Symbol">JOBJECT</a>, <a href="../../symtab/StdNames.scala.html#26531" title="object GenMSIL.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29882" title="=&gt; GenMSIL.this.global.Name">finalize_</a>, <a href="../../symtab/clr/CLRTypes.scala.html#287438" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MOBJECT</a>, <span title="java.lang.String(&quot;Finalize&quot;)" class="string">&quot;Finalize&quot;</span>)
      <a href="#287752" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,paramTypes: Array[GenMSIL.this.global.Type],newClass: ch.epfl.lamp.compiler.msil.Type,newName: String,newParamTypes: Array[ch.epfl.lamp.compiler.msil.Type])Unit">mapMethod</a>(<a href="#287567" title="=&gt; GenMSIL.this.global.Symbol">JOBJECT</a>, <a href="../../symtab/StdNames.scala.html#26531" title="object GenMSIL.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29990" title="=&gt; GenMSIL.this.global.Name">wait_</a>, <a href="#289187" title="Array[GenMSIL.this.global.Type]">jEmpty</a>, <a href="#287551" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MMONITOR</a>, <span title="java.lang.String(&quot;Wait&quot;)" class="string">&quot;Wait&quot;</span>, <a href="#289194" title="Array[ch.epfl.lamp.compiler.msil.Type]">mObject1</a>)
      <a href="#287752" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,paramTypes: Array[GenMSIL.this.global.Type],newClass: ch.epfl.lamp.compiler.msil.Type,newName: String,newParamTypes: Array[ch.epfl.lamp.compiler.msil.Type])Unit">mapMethod</a>(<a href="#287567" title="=&gt; GenMSIL.this.global.Symbol">JOBJECT</a>, <a href="../../symtab/StdNames.scala.html#26531" title="object GenMSIL.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29990" title="=&gt; GenMSIL.this.global.Name">wait_</a>, <a href="#289191" title="Array[GenMSIL.this.global.Type]">jLong1</a>, <a href="#287551" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MMONITOR</a>, <span title="java.lang.String(&quot;Wait&quot;)" class="string">&quot;Wait&quot;</span>, <span title="(xs: ch.epfl.lamp.compiler.msil.Type*)(implicit evidence$2: scala.reflect.ClassManifest[ch.epfl.lamp.compiler.msil.Type])Array[ch.epfl.lamp.compiler.msil.Type]">Array</span><span title="(clazz: Class[_])scala.reflect.ClassManifest[ch.epfl.lamp.compiler.msil.Type]">(</span><a href="../../symtab/clr/CLRTypes.scala.html#287438" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MOBJECT</a>, <a href="../../symtab/clr/CLRTypes.scala.html#287408" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MINT</a>))
      <a href="#287752" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,paramTypes: Array[GenMSIL.this.global.Type],newClass: ch.epfl.lamp.compiler.msil.Type,newName: String,newParamTypes: Array[ch.epfl.lamp.compiler.msil.Type])Unit">mapMethod</a>(<a href="#287567" title="=&gt; GenMSIL.this.global.Symbol">JOBJECT</a>, <a href="../../symtab/StdNames.scala.html#26531" title="object GenMSIL.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29934" title="=&gt; GenMSIL.this.global.Name">notify_</a>, <a href="#289187" title="Array[GenMSIL.this.global.Type]">jEmpty</a>, <a href="#287551" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MMONITOR</a>, <span title="java.lang.String(&quot;Pulse&quot;)" class="string">&quot;Pulse&quot;</span>, <a href="#289194" title="Array[ch.epfl.lamp.compiler.msil.Type]">mObject1</a>)
      <a href="#287752" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,paramTypes: Array[GenMSIL.this.global.Type],newClass: ch.epfl.lamp.compiler.msil.Type,newName: String,newParamTypes: Array[ch.epfl.lamp.compiler.msil.Type])Unit">mapMethod</a>(<a href="#287567" title="=&gt; GenMSIL.this.global.Symbol">JOBJECT</a>, <a href="../../symtab/StdNames.scala.html#26531" title="object GenMSIL.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29936" title="=&gt; GenMSIL.this.global.Name">notifyAll_</a>, <a href="#289187" title="Array[GenMSIL.this.global.Type]">jEmpty</a>, <a href="#287551" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MMONITOR</a>, <span title="java.lang.String(&quot;PulseAll&quot;)" class="string">&quot;PulseAll&quot;</span>, <a href="#289194" title="Array[ch.epfl.lamp.compiler.msil.Type]">mObject1</a>)

      <a href="#287754" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,newClass: ch.epfl.lamp.compiler.msil.Type,newName: String)Unit">mapMethod</a>(<a href="#287569" title="=&gt; GenMSIL.this.global.Symbol">JSTRING</a>, <a href="../../symtab/Names.scala.html#26054" title="implicit scala.tools.nsc.symtab.Names.view : (s: String)GenMSIL.this.global.Name" class="string">&quot;compareTo&quot;</a>,<a href="../../symtab/clr/CLRTypes.scala.html#287441" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MSTRING</a>, <span title="java.lang.String(&quot;CompareTo&quot;)" class="string">&quot;CompareTo&quot;</span>)
      <a href="#287754" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,newClass: ch.epfl.lamp.compiler.msil.Type,newName: String)Unit">mapMethod</a>(<a href="#287569" title="=&gt; GenMSIL.this.global.Symbol">JSTRING</a>, <a href="../../symtab/Names.scala.html#26054" title="implicit scala.tools.nsc.symtab.Names.view : (s: String)GenMSIL.this.global.Name" class="string">&quot;length&quot;</a>, <a href="../../symtab/clr/CLRTypes.scala.html#287441" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MSTRING</a>, <span title="java.lang.String(&quot;get_Length&quot;)" class="string">&quot;get_Length&quot;</span>)
      <a href="#287754" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,newClass: ch.epfl.lamp.compiler.msil.Type,newName: String)Unit">mapMethod</a>(<a href="#287569" title="=&gt; GenMSIL.this.global.Symbol">JSTRING</a>, <a href="../../symtab/Names.scala.html#26054" title="implicit scala.tools.nsc.symtab.Names.view : (s: String)GenMSIL.this.global.Name" class="string">&quot;charAt&quot;</a>, <a href="../../symtab/clr/CLRTypes.scala.html#287441" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MSTRING</a>, <span title="java.lang.String(&quot;get_Chars&quot;)" class="string">&quot;get_Chars&quot;</span>)

      <a href="#287752" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,paramTypes: Array[GenMSIL.this.global.Type],newClass: ch.epfl.lamp.compiler.msil.Type,newName: String,newParamTypes: Array[ch.epfl.lamp.compiler.msil.Type])Unit">mapMethod</a>(<a href="#287569" title="=&gt; GenMSIL.this.global.Symbol">JSTRING</a>, <a href="../../symtab/Names.scala.html#26054" title="implicit scala.tools.nsc.symtab.Names.view : (s: String)GenMSIL.this.global.Name" class="string">&quot;concat&quot;</a>, <a href="#289188" title="Array[GenMSIL.this.global.Type]">jString1</a>, <a href="../../symtab/clr/CLRTypes.scala.html#287441" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MSTRING</a>, <span title="java.lang.String(&quot;Concat&quot;)" class="string">&quot;Concat&quot;</span>, <a href="#289196" title="Array[ch.epfl.lamp.compiler.msil.Type]">mString2</a>)
      <a href="#287752" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,paramTypes: Array[GenMSIL.this.global.Type],newClass: ch.epfl.lamp.compiler.msil.Type,newName: String,newParamTypes: Array[ch.epfl.lamp.compiler.msil.Type])Unit">mapMethod</a>(<a href="#287569" title="=&gt; GenMSIL.this.global.Symbol">JSTRING</a>, <a href="../../symtab/Names.scala.html#26054" title="implicit scala.tools.nsc.symtab.Names.view : (s: String)GenMSIL.this.global.Name" class="string">&quot;indexOf&quot;</a>, <a href="#289189" title="Array[GenMSIL.this.global.Type]">jInt1</a>, <a href="../../symtab/clr/CLRTypes.scala.html#287441" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MSTRING</a>, <span title="java.lang.String(&quot;IndexOf&quot;)" class="string">&quot;IndexOf&quot;</span>, <a href="#289197" title="Array[ch.epfl.lamp.compiler.msil.Type]">mChar1</a>)
      <a href="#287752" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,paramTypes: Array[GenMSIL.this.global.Type],newClass: ch.epfl.lamp.compiler.msil.Type,newName: String,newParamTypes: Array[ch.epfl.lamp.compiler.msil.Type])Unit">mapMethod</a>(<a href="#287569" title="=&gt; GenMSIL.this.global.Symbol">JSTRING</a>, <a href="../../symtab/Names.scala.html#26054" title="implicit scala.tools.nsc.symtab.Names.view : (s: String)GenMSIL.this.global.Name" class="string">&quot;indexOf&quot;</a>, <a href="#289190" title="Array[GenMSIL.this.global.Type]">jInt2</a>, <a href="../../symtab/clr/CLRTypes.scala.html#287441" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MSTRING</a>, <span title="java.lang.String(&quot;IndexOf&quot;)" class="string">&quot;IndexOf&quot;</span>, <a href="#289198" title="Array[ch.epfl.lamp.compiler.msil.Type]">mCharInt</a>)

      <a href="#287753" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,paramTypes: Array[GenMSIL.this.global.Type],newClass: ch.epfl.lamp.compiler.msil.Type,newName: String)Unit">mapMethod</a>(<a href="#287569" title="=&gt; GenMSIL.this.global.Symbol">JSTRING</a>, <a href="../../symtab/Names.scala.html#26054" title="implicit scala.tools.nsc.symtab.Names.view : (s: String)GenMSIL.this.global.Name" class="string">&quot;indexOf&quot;</a>, <a href="#289188" title="Array[GenMSIL.this.global.Type]">jString1</a>, <a href="../../symtab/clr/CLRTypes.scala.html#287441" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MSTRING</a>, <span title="java.lang.String(&quot;IndexOf&quot;)" class="string">&quot;IndexOf&quot;</span>)
      <a href="#287753" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,paramTypes: Array[GenMSIL.this.global.Type],newClass: ch.epfl.lamp.compiler.msil.Type,newName: String)Unit">mapMethod</a>(<a href="#287569" title="=&gt; GenMSIL.this.global.Symbol">JSTRING</a>, <a href="../../symtab/Names.scala.html#26054" title="implicit scala.tools.nsc.symtab.Names.view : (s: String)GenMSIL.this.global.Name" class="string">&quot;indexOf&quot;</a>, <a href="#289192" title="Array[GenMSIL.this.global.Type]">jStringInt</a>, <a href="../../symtab/clr/CLRTypes.scala.html#287441" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MSTRING</a>, <span title="java.lang.String(&quot;IndexOf&quot;)" class="string">&quot;IndexOf&quot;</span>)
      <a href="#287752" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,paramTypes: Array[GenMSIL.this.global.Type],newClass: ch.epfl.lamp.compiler.msil.Type,newName: String,newParamTypes: Array[ch.epfl.lamp.compiler.msil.Type])Unit">mapMethod</a>(<a href="#287569" title="=&gt; GenMSIL.this.global.Symbol">JSTRING</a>, <a href="../../symtab/Names.scala.html#26054" title="implicit scala.tools.nsc.symtab.Names.view : (s: String)GenMSIL.this.global.Name" class="string">&quot;lastIndexOf&quot;</a>, <a href="#289189" title="Array[GenMSIL.this.global.Type]">jInt1</a>, <a href="../../symtab/clr/CLRTypes.scala.html#287441" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MSTRING</a>, <span title="java.lang.String(&quot;LastIndexOf&quot;)" class="string">&quot;LastIndexOf&quot;</span>, <a href="#289197" title="Array[ch.epfl.lamp.compiler.msil.Type]">mChar1</a>)
      <a href="#287752" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,paramTypes: Array[GenMSIL.this.global.Type],newClass: ch.epfl.lamp.compiler.msil.Type,newName: String,newParamTypes: Array[ch.epfl.lamp.compiler.msil.Type])Unit">mapMethod</a>(<a href="#287569" title="=&gt; GenMSIL.this.global.Symbol">JSTRING</a>, <a href="../../symtab/Names.scala.html#26054" title="implicit scala.tools.nsc.symtab.Names.view : (s: String)GenMSIL.this.global.Name" class="string">&quot;lastIndexOf&quot;</a>, <a href="#289190" title="Array[GenMSIL.this.global.Type]">jInt2</a>, <a href="../../symtab/clr/CLRTypes.scala.html#287441" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MSTRING</a>, <span title="java.lang.String(&quot;LastIndexOf&quot;)" class="string">&quot;LastIndexOf&quot;</span>, <a href="#289198" title="Array[ch.epfl.lamp.compiler.msil.Type]">mCharInt</a>)
      <a href="#287753" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,paramTypes: Array[GenMSIL.this.global.Type],newClass: ch.epfl.lamp.compiler.msil.Type,newName: String)Unit">mapMethod</a>(<a href="#287569" title="=&gt; GenMSIL.this.global.Symbol">JSTRING</a>, <a href="../../symtab/Names.scala.html#26054" title="implicit scala.tools.nsc.symtab.Names.view : (s: String)GenMSIL.this.global.Name" class="string">&quot;lastIndexOf&quot;</a>, <a href="#289188" title="Array[GenMSIL.this.global.Type]">jString1</a>, <a href="../../symtab/clr/CLRTypes.scala.html#287441" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MSTRING</a>, <span title="java.lang.String(&quot;LastIndexOf&quot;)" class="string">&quot;LastIndexOf&quot;</span>)
      <a href="#287753" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,paramTypes: Array[GenMSIL.this.global.Type],newClass: ch.epfl.lamp.compiler.msil.Type,newName: String)Unit">mapMethod</a>(<a href="#287569" title="=&gt; GenMSIL.this.global.Symbol">JSTRING</a>, <a href="../../symtab/Names.scala.html#26054" title="implicit scala.tools.nsc.symtab.Names.view : (s: String)GenMSIL.this.global.Name" class="string">&quot;lastIndexOf&quot;</a>, <a href="#289192" title="Array[GenMSIL.this.global.Type]">jStringInt</a>, <a href="../../symtab/clr/CLRTypes.scala.html#287441" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MSTRING</a>, <span title="java.lang.String(&quot;LastIndexOf&quot;)" class="string">&quot;LastIndexOf&quot;</span>)

      <a href="#287753" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,paramTypes: Array[GenMSIL.this.global.Type],newClass: ch.epfl.lamp.compiler.msil.Type,newName: String)Unit">mapMethod</a>(<a href="#287569" title="=&gt; GenMSIL.this.global.Symbol">JSTRING</a>, <a href="../../symtab/Names.scala.html#26054" title="implicit scala.tools.nsc.symtab.Names.view : (s: String)GenMSIL.this.global.Name" class="string">&quot;toLowerCase&quot;</a>, <a href="#289187" title="Array[GenMSIL.this.global.Type]">jEmpty</a>, <a href="../../symtab/clr/CLRTypes.scala.html#287441" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MSTRING</a>, <span title="java.lang.String(&quot;ToLower&quot;)" class="string">&quot;ToLower&quot;</span>)
      <a href="#287753" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,paramTypes: Array[GenMSIL.this.global.Type],newClass: ch.epfl.lamp.compiler.msil.Type,newName: String)Unit">mapMethod</a>(<a href="#287569" title="=&gt; GenMSIL.this.global.Symbol">JSTRING</a>, <a href="../../symtab/Names.scala.html#26054" title="implicit scala.tools.nsc.symtab.Names.view : (s: String)GenMSIL.this.global.Name" class="string">&quot;toUpperCase&quot;</a>, <a href="#289187" title="Array[GenMSIL.this.global.Type]">jEmpty</a>, <a href="../../symtab/clr/CLRTypes.scala.html#287441" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MSTRING</a>, <span title="java.lang.String(&quot;ToUpper&quot;)" class="string">&quot;ToUpper&quot;</span>)
      <a href="#287753" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,paramTypes: Array[GenMSIL.this.global.Type],newClass: ch.epfl.lamp.compiler.msil.Type,newName: String)Unit">mapMethod</a>(<a href="#287569" title="=&gt; GenMSIL.this.global.Symbol">JSTRING</a>, <a href="../../symtab/Names.scala.html#26054" title="implicit scala.tools.nsc.symtab.Names.view : (s: String)GenMSIL.this.global.Name" class="string">&quot;startsWith&quot;</a>, <a href="#289188" title="Array[GenMSIL.this.global.Type]">jString1</a>, <a href="../../symtab/clr/CLRTypes.scala.html#287441" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MSTRING</a>, <span title="java.lang.String(&quot;StartsWith&quot;)" class="string">&quot;StartsWith&quot;</span>)
      <a href="#287753" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,paramTypes: Array[GenMSIL.this.global.Type],newClass: ch.epfl.lamp.compiler.msil.Type,newName: String)Unit">mapMethod</a>(<a href="#287569" title="=&gt; GenMSIL.this.global.Symbol">JSTRING</a>, <a href="../../symtab/Names.scala.html#26054" title="implicit scala.tools.nsc.symtab.Names.view : (s: String)GenMSIL.this.global.Name" class="string">&quot;endsWith&quot;</a>, <a href="#289188" title="Array[GenMSIL.this.global.Type]">jString1</a>, <a href="../../symtab/clr/CLRTypes.scala.html#287441" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MSTRING</a>, <span title="java.lang.String(&quot;EndsWith&quot;)" class="string">&quot;EndsWith&quot;</span>)
      <a href="#287753" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,paramTypes: Array[GenMSIL.this.global.Type],newClass: ch.epfl.lamp.compiler.msil.Type,newName: String)Unit">mapMethod</a>(<a href="#287569" title="=&gt; GenMSIL.this.global.Symbol">JSTRING</a>, <a href="../../symtab/Names.scala.html#26054" title="implicit scala.tools.nsc.symtab.Names.view : (s: String)GenMSIL.this.global.Name" class="string">&quot;substring&quot;</a>, <a href="#289189" title="Array[GenMSIL.this.global.Type]">jInt1</a>, <a href="../../symtab/clr/CLRTypes.scala.html#287441" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MSTRING</a>, <span title="java.lang.String(&quot;Substring&quot;)" class="string">&quot;Substring&quot;</span>)
      <a href="#287753" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,paramTypes: Array[GenMSIL.this.global.Type],newClass: ch.epfl.lamp.compiler.msil.Type,newName: String)Unit">mapMethod</a>(<a href="#287569" title="=&gt; GenMSIL.this.global.Symbol">JSTRING</a>, <a href="../../symtab/Names.scala.html#26054" title="implicit scala.tools.nsc.symtab.Names.view : (s: String)GenMSIL.this.global.Name" class="string">&quot;substring&quot;</a>, <a href="#289190" title="Array[GenMSIL.this.global.Type]">jInt2</a>, <a href="../../symtab/clr/CLRTypes.scala.html#287441" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MSTRING</a>, <span title="java.lang.String(&quot;Substring&quot;)" class="string">&quot;Substring&quot;</span>)
      <a href="#287753" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,paramTypes: Array[GenMSIL.this.global.Type],newClass: ch.epfl.lamp.compiler.msil.Type,newName: String)Unit">mapMethod</a>(<a href="#287569" title="=&gt; GenMSIL.this.global.Symbol">JSTRING</a>, <a href="../../symtab/Names.scala.html#26054" title="implicit scala.tools.nsc.symtab.Names.view : (s: String)GenMSIL.this.global.Name" class="string">&quot;trim&quot;</a>, <a href="#289187" title="Array[GenMSIL.this.global.Type]">jEmpty</a>, <a href="../../symtab/clr/CLRTypes.scala.html#287441" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MSTRING</a>, <span title="java.lang.String(&quot;Trim&quot;)" class="string">&quot;Trim&quot;</span>)
      <a href="#287752" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,paramTypes: Array[GenMSIL.this.global.Type],newClass: ch.epfl.lamp.compiler.msil.Type,newName: String,newParamTypes: Array[ch.epfl.lamp.compiler.msil.Type])Unit">mapMethod</a>(<a href="#287569" title="=&gt; GenMSIL.this.global.Symbol">JSTRING</a>, <a href="../../symtab/Names.scala.html#26054" title="implicit scala.tools.nsc.symtab.Names.view : (s: String)GenMSIL.this.global.Name" class="string">&quot;intern&quot;</a>, <a href="#289187" title="Array[GenMSIL.this.global.Type]">jEmpty</a>, <a href="../../symtab/clr/CLRTypes.scala.html#287441" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MSTRING</a>, <span title="java.lang.String(&quot;Intern&quot;)" class="string">&quot;Intern&quot;</span>, <a href="#289195" title="Array[ch.epfl.lamp.compiler.msil.Type]">mString1</a>)
      <a href="#287753" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,paramTypes: Array[GenMSIL.this.global.Type],newClass: ch.epfl.lamp.compiler.msil.Type,newName: String)Unit">mapMethod</a>(<a href="#287569" title="=&gt; GenMSIL.this.global.Symbol">JSTRING</a>, <a href="../../symtab/Names.scala.html#26054" title="implicit scala.tools.nsc.symtab.Names.view : (s: String)GenMSIL.this.global.Name" class="string">&quot;replace&quot;</a>, <a href="#289193" title="Array[GenMSIL.this.global.Type]">jChar2</a>, <a href="../../symtab/clr/CLRTypes.scala.html#287441" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MSTRING</a>, <span title="java.lang.String(&quot;Replace&quot;)" class="string">&quot;Replace&quot;</span>)
      <a href="#287754" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,newClass: ch.epfl.lamp.compiler.msil.Type,newName: String)Unit">mapMethod</a>(<a href="#287569" title="=&gt; GenMSIL.this.global.Symbol">JSTRING</a>, <a href="../../symtab/Names.scala.html#26054" title="implicit scala.tools.nsc.symtab.Names.view : (s: String)GenMSIL.this.global.Name" class="string">&quot;toCharArray&quot;</a>, <a href="../../symtab/clr/CLRTypes.scala.html#287441" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MSTRING</a>, <span title="java.lang.String(&quot;ToCharArray&quot;)" class="string">&quot;ToCharArray&quot;</span>)

      <a href="#287726" title="(sym: GenMSIL.this.global.Symbol,mType: ch.epfl.lamp.compiler.msil.Type)Unit">mapType</a>(<a href="../../symtab/Definitions.scala.html#26479" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28293" title="=&gt; GenMSIL.this.global.Symbol">BooleanClass</a>, <a href="../../symtab/clr/CLRTypes.scala.html#287426" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MBOOL</a>)
      <a href="#287726" title="(sym: GenMSIL.this.global.Symbol,mType: ch.epfl.lamp.compiler.msil.Type)Unit">mapType</a>(<a href="../../symtab/Definitions.scala.html#26479" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28279" title="=&gt; GenMSIL.this.global.Symbol">ByteClass</a>, <a href="../../symtab/clr/CLRTypes.scala.html#287396" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MBYTE</a>)
      <a href="#287726" title="(sym: GenMSIL.this.global.Symbol,mType: ch.epfl.lamp.compiler.msil.Type)Unit">mapType</a>(<a href="../../symtab/Definitions.scala.html#26479" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28281" title="=&gt; GenMSIL.this.global.Symbol">ShortClass</a>, <a href="../../symtab/clr/CLRTypes.scala.html#287399" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MSHORT</a>)
      <a href="#287726" title="(sym: GenMSIL.this.global.Symbol,mType: ch.epfl.lamp.compiler.msil.Type)Unit">mapType</a>(<a href="../../symtab/Definitions.scala.html#26479" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28283" title="=&gt; GenMSIL.this.global.Symbol">CharClass</a>, <a href="../../symtab/clr/CLRTypes.scala.html#287405" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MCHAR</a>)
      <a href="#287726" title="(sym: GenMSIL.this.global.Symbol,mType: ch.epfl.lamp.compiler.msil.Type)Unit">mapType</a>(<a href="../../symtab/Definitions.scala.html#26479" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28285" title="=&gt; GenMSIL.this.global.Symbol">IntClass</a>, <a href="../../symtab/clr/CLRTypes.scala.html#287408" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MINT</a>)
      <a href="#287726" title="(sym: GenMSIL.this.global.Symbol,mType: ch.epfl.lamp.compiler.msil.Type)Unit">mapType</a>(<a href="../../symtab/Definitions.scala.html#26479" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28287" title="=&gt; GenMSIL.this.global.Symbol">LongClass</a>, <a href="../../symtab/clr/CLRTypes.scala.html#287414" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MLONG</a>)
      <a href="#287726" title="(sym: GenMSIL.this.global.Symbol,mType: ch.epfl.lamp.compiler.msil.Type)Unit">mapType</a>(<a href="../../symtab/Definitions.scala.html#26479" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28289" title="=&gt; GenMSIL.this.global.Symbol">FloatClass</a>, <a href="../../symtab/clr/CLRTypes.scala.html#287420" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MFLOAT</a>)
      <a href="#287726" title="(sym: GenMSIL.this.global.Symbol,mType: ch.epfl.lamp.compiler.msil.Type)Unit">mapType</a>(<a href="../../symtab/Definitions.scala.html#26479" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28291" title="=&gt; GenMSIL.this.global.Symbol">DoubleClass</a>, <a href="../../symtab/clr/CLRTypes.scala.html#287423" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MDOUBLE</a>)
    }

    <span class="keyword">var</span> <a title="GenMSIL.this.global.icodes.IClass" id="287604">clasz</a>: <a href="../icode/Members.scala.html#46171" title="GenMSIL.this.global.icodes.IClass">IClass</a> = _
    <span class="keyword">var</span> <a title="GenMSIL.this.global.icodes.IMethod" id="287607">method</a>: <a href="../icode/Members.scala.html#46173" title="GenMSIL.this.global.icodes.IMethod">IMethod</a> = _
    <span class="keyword">var</span> <a title="GenMSIL.this.global.icodes.Code" id="287610">code</a>: <a href="../icode/Members.scala.html#46170" title="GenMSIL.this.global.icodes.Code">Code</a> = _

    <span class="keyword">var</span> <a title="ch.epfl.lamp.compiler.msil.emit.AssemblyBuilder" id="287613">massembly</a>: <a title="ch.epfl.lamp.compiler.msil.emit.AssemblyBuilder" id="287282">AssemblyBuilder</a> = _
    <span class="keyword">var</span> <a title="ch.epfl.lamp.compiler.msil.emit.ModuleBuilder" id="287616">mmodule</a>: <a title="ch.epfl.lamp.compiler.msil.emit.ModuleBuilder" id="287318">ModuleBuilder</a> = _
    <span class="keyword">var</span> <a title="ch.epfl.lamp.compiler.msil.emit.ILGenerator" id="287619">mcode</a>: <span title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">ILGenerator</span> = _

    <span class="keyword">var</span> <a title="String" id="287622">assemName</a>: <span title="String">String</span> = _
    <span class="keyword">var</span> <a title="java.lang.String" id="287625">firstSourceName</a> = <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>
    <span class="keyword">var</span> <a title="java.io.File" id="287628">outDir</a>: <span title="java.io.File">File</span> = _
    <span class="keyword">var</span> <a title="java.io.File" id="287631">srcPath</a>: <span title="java.io.File">File</span> = _
    <span class="keyword">var</span> <a title="String" id="287634">moduleName</a>: <span title="String">String</span> = _

    <span class="keyword">def</span> <a title="()Unit" id="287636">initAssembly</a>() {

      <a href="#287622" title="(x$1: String)Unit">assemName</a> = <a href="../../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37076" title="=&gt; scala.tools.nsc.Settings.StringSetting">assemname</a>.<a href="../../Settings.scala.html#37759" title="=&gt; java.lang.String">value</a>

      <span title="Unit" class="keyword">if</span> (<a href="#287622" title="(x$1: AnyRef)Boolean">assemName</a> == <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>) {
        <span title="Unit" class="keyword">if</span> (<a href="#287715" title="(x$1: AnyRef)Boolean">entryPoint</a> != <span title="Null(null)" class="keyword">null</span>) {
          <a href="#287622" title="(x$1: String)Unit">assemName</a> = <a href="#287710" title="(sym: GenMSIL.this.global.Symbol)String">msilName</a>(<a href="#287715" title="=&gt; GenMSIL.this.global.Symbol">entryPoint</a>.<a href="../../symtab/Symbols.scala.html#27031" title="=&gt; GenMSIL.this.global.Symbol">enclClass</a>)
          // remove the $ at the end (from module-name)
          <a href="#287622" title="(x$1: String)Unit">assemName</a> = <a href="#287622" title="=&gt; String">assemName</a>.<span title="(x$1: Int,x$2: Int)java.lang.String">substring</span>(<span title="Int(0)" class="int">0</span>, <a href="#287622" title="=&gt; String">assemName</a>.<span title="()Int">length</span><span title="(x$1: Int)Int">(</span>) - <span title="Int(1)" class="int">1</span>)
        } <span class="keyword">else</span> {
          // assuming filename of first source file
          <span title="(assertion: Boolean,message: =&gt; Any)Unit">assert</span>(<a href="#287625" title="=&gt; java.lang.String">firstSourceName</a>.<span title="(x$1: java.lang.String)Boolean">endsWith</span>(<span title="java.lang.String(&quot;.scala&quot;)" class="string">&quot;.scala&quot;</span>), <span title="java.lang.String(&quot;Source file doesn't end with .scala&quot;)" class="string">&quot;Source file doesn't end with .scala&quot;</span>)
          <a href="#287622" title="(x$1: String)Unit">assemName</a> = <a href="#287625" title="=&gt; java.lang.String">firstSourceName</a>.<span title="(x$1: Int,x$2: Int)java.lang.String">substring</span>(<span title="Int(0)" class="int">0</span>, <a href="#287625" title="=&gt; java.lang.String">firstSourceName</a>.<span title="()Int">length</span><span title="(x$1: Int)Int">(</span>) - <span title="Int(6)" class="int">6</span>)
        }
      } <span class="keyword">else</span> {
        <span title="Unit" class="keyword">if</span> (<a href="#287622" title="=&gt; String">assemName</a>.<span title="(x$1: java.lang.String)Boolean">endsWith</span>(<span title="java.lang.String(&quot;.msil&quot;)" class="string">&quot;.msil&quot;</span>))
          <a href="#287622" title="(x$1: String)Unit">assemName</a> = <a href="#287622" title="=&gt; String">assemName</a>.<span title="(x$1: Int,x$2: Int)java.lang.String">substring</span>(<span title="Int(0)" class="int">0</span>, <a href="#287622" title="=&gt; String">assemName</a>.<span title="()Int">length</span><span title="(x$1: Int)Int">(</span>)-<span title="Int(5)" class="int">5</span>)
        <span title="Unit" class="keyword">if</span> (<a href="#287622" title="=&gt; String">assemName</a>.<span title="(x$1: java.lang.String)Boolean">endsWith</span>(<span title="java.lang.String(&quot;.il&quot;)" class="string">&quot;.il&quot;</span>))
          <a href="#287622" title="(x$1: String)Unit">assemName</a> = <a href="#287622" title="=&gt; String">assemName</a>.<span title="(x$1: Int,x$2: Int)java.lang.String">substring</span>(<span title="Int(0)" class="int">0</span>, <a href="#287622" title="=&gt; String">assemName</a>.<span title="()Int">length</span><span title="(x$1: Int)Int">(</span>)-<span title="Int(3)" class="int">3</span>)
        <span class="keyword">val</span> <a title="java.io.File" id="290328">f</a>: <span title="java.io.File">File</span> = <span title="java.io.File" class="keyword">new</span> <span title="java.io.File">File</span>(<a href="#287622" title="=&gt; String">assemName</a>)
        <a href="#287622" title="(x$1: String)Unit">assemName</a> = <a href="#290328" title="java.io.File">f</a>.<a title="()java.lang.String" id="35179">getName</a>()
      }
      
      <a href="#287628" title="(x$1: java.io.File)Unit">outDir</a> = <span title="java.io.File" class="keyword">new</span> <span title="java.io.File">File</span>(<a href="../../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37038" title="=&gt; scala.tools.nsc.Settings.OutputSetting">outdir</a>.<a href="../../Settings.scala.html#37759" title="=&gt; java.lang.String">value</a>)

      <a href="#287631" title="(x$1: java.io.File)Unit">srcPath</a> = <span title="java.io.File" class="keyword">new</span> <span title="java.io.File">File</span>(<a href="../../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37062" title="=&gt; scala.tools.nsc.Settings.StringSetting">sourcepath</a>.<a href="../../Settings.scala.html#37759" title="=&gt; java.lang.String">value</a>)

      <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.AssemblyName" id="290202">assemblyName</a> = <span title="ch.epfl.lamp.compiler.msil.AssemblyName" class="keyword">new</span> <a title="ch.epfl.lamp.compiler.msil.AssemblyName" id="109269">AssemblyName</a>()
      <a href="#290202" title="ch.epfl.lamp.compiler.msil.AssemblyName">assemblyName</a>.<a title="java.lang.String" id="290425">Name</a> = <a href="#287622" title="=&gt; String">assemName</a>
      <a href="#287613" title="(x$1: ch.epfl.lamp.compiler.msil.emit.AssemblyBuilder)Unit">massembly</a> = <a title="object ch.epfl.lamp.compiler.msil.emit.AssemblyBuilderFactory" id="287349">AssemblyBuilderFactory</a>.<a title="(name: ch.epfl.lamp.compiler.msil.AssemblyName)ch.epfl.lamp.compiler.msil.emit.AssemblyBuilder" id="290439">DefineDynamicAssembly</a>(<a href="#290202" title="ch.epfl.lamp.compiler.msil.AssemblyName">assemblyName</a>)

      <a href="#287634" title="(x$1: String)Unit">moduleName</a> = <a href="#287622" title="(x$1: Any)java.lang.String">assemName</a> + (<span title="Any" class="keyword">if</span> (<a href="#287715" title="(x$1: AnyRef)Boolean">entryPoint</a> == <span title="Null(null)" class="keyword">null</span>) <span title="java.lang.String(&quot;.dll&quot;)" class="string">&quot;.dll&quot;</span> <span class="keyword">else</span> <span title="java.lang.String(&quot;.exe&quot;)" class="string">&quot;.exe&quot;</span>)
      // filename here: .dll or .exe (in both parameters), second: give absolute-path
      <a href="#287616" title="(x$1: ch.epfl.lamp.compiler.msil.emit.ModuleBuilder)Unit">mmodule</a> = <a href="#287613" title="=&gt; ch.epfl.lamp.compiler.msil.emit.AssemblyBuilder">massembly</a>.<a title="(name: String,fileName: String)ch.epfl.lamp.compiler.msil.emit.ModuleBuilder" id="288674">DefineDynamicModule</a>(<a href="#287634" title="=&gt; String">moduleName</a>,
                                              <a title="(x$1: java.io.File,x$2: java.lang.String)java.io.File" id="35174" class="keyword">new</a> <span title="java.io.File">File</span>(<a href="#287628" title="=&gt; java.io.File">outDir</a>, <a href="#287634" title="=&gt; String">moduleName</a>).<a title="()java.lang.String" id="35184">getAbsolutePath</a>())
      <span title="(assertion: Boolean)Unit">assert</span> (<a href="#287616" title="(x$1: AnyRef)Boolean">mmodule</a> != <span title="Null(null)" class="keyword">null</span>)
    }


    /**
     * Form of the custom Attribute parameter (Ecma-335.pdf)
     *      - p. 163 for CustomAttrib Form,
     *      - p. 164 for FixedArg Form (Array and Element) (if array or not is known!)
     *  !! least significant *byte* first if values longer than one byte !!
     *
     * 1: Prolog (unsigned int16, value 0x0001) -&gt; symtab[0] = 0x01, symtab[1] = 0x00
     * 2: FixedArgs (directly the data, get number and types from related constructor)
     *  2.1: length of the array (unsigned int32, take care on order of the 4 bytes)
     *  2.2: the byte array data
     * 3: NumNamed (unsigned int16, number of named fields and properties, 0x0000)
     *
     **/
    <span class="keyword">def</span> <a title="(sym: GenMSIL.this.global.Symbol,tBuilder: ch.epfl.lamp.compiler.msil.emit.TypeBuilder)Unit" id="287637">addSymtabAttribute</a>(<a title="GenMSIL.this.global.Symbol" id="290565">sym</a>: <a href="../../symtab/Symbols.scala.html#26127" title="GenMSIL.this.global.Symbol">Symbol</a>, <a title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder" id="290566">tBuilder</a>: <span title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">TypeBuilder</span>) {
      <a href="../../Global.scala.html#39176" title="=&gt; GenMSIL.this.global.Run">currentRun</a>.<a href="../../Global.scala.html#40215" title="=&gt; scala.collection.mutable.HashMap[GenMSIL.this.global.Symbol,scala.tools.nsc.symtab.classfile.PickleBuffer]">symData</a>.<a title="(key: GenMSIL.this.global.Symbol)Option[scala.tools.nsc.symtab.classfile.PickleBuffer]" id="44381">get</a>(<a href="#290565" title="GenMSIL.this.global.Symbol">sym</a>) <span title="Unit" class="keyword">match</span> {
        <span title="Unit" class="keyword">case</span> Some(<a title="scala.tools.nsc.symtab.classfile.PickleBuffer" id="290575">pickle</a>) =&gt;
          <span class="keyword">val</span> <a title="Array[Byte]" id="290578">symtab</a>: <span title="Array[Byte]">Array</span>[Byte] = <span title="Array[Byte]" class="keyword">new</span> <span title="Array[Byte]">Array</span>[Byte](<a href="#290575" title="scala.tools.nsc.symtab.classfile.PickleBuffer">pickle</a>.<a href="../../symtab/classfile/PickleBuffer.scala.html#83281" title="(x$1: Int)Int">writeIndex</a> + <span title="Int(8)" class="int">8</span>)
          <a href="#290578" title="(i: Int,x: Byte)Unit">symtab</a>(<span title="Int(0)" class="int">0</span>) = <span title="Int(1)" class="int">1</span>.<span title="=&gt; Byte">toByte</span>
          <span class="keyword">var</span> <a title="Int" id="290579">size</a>:<span title="Int">Int</span> = <a href="#290575" title="scala.tools.nsc.symtab.classfile.PickleBuffer">pickle</a>.<a href="../../symtab/classfile/PickleBuffer.scala.html#83281" title="=&gt; Int">writeIndex</a>
          <span class="keyword">for</span> (<a title="Int" id="290652">i</a> &lt;- <span title="(end: Int)Range" class="int">2</span> <span title="(f: (Int) =&gt; Unit)Unit">until</span> <span title="Int(6)" class="int">6</span>) {
            <a href="#290578" title="(i: Int,x: Byte)Unit">symtab</a>(<a href="#290652" title="Int">i</a>) = (<a href="#290579" title="(x$1: Int)Int" id="2976">size</a> &amp; <span title="Int(255)" class="int">0xff</span>).<span title="=&gt; Byte">toByte</span>
            <a href="#290579" title="Int">size</a> = <a href="#290579" title="(x$1: Int)Int" id="2861">size</a> &gt;&gt; <span title="Int(8)" class="int">8</span>
          }

          <span title="object java.lang.System">System</span>.<a title="(x$1: Any,x$2: Int,x$3: Any,x$4: Int,x$5: Int)Unit" id="65044">arraycopy</a>(<a href="#290575" title="scala.tools.nsc.symtab.classfile.PickleBuffer">pickle</a>.<a href="../../symtab/classfile/PickleBuffer.scala.html#83275" title="=&gt; Array[Byte]">bytes</a>, <span title="Int(0)" class="int">0</span>, <a href="#290578" title="Array[Byte]">symtab</a>, <span title="Int(6)" class="int">6</span>, <a href="#290575" title="scala.tools.nsc.symtab.classfile.PickleBuffer">pickle</a>.<a href="../../symtab/classfile/PickleBuffer.scala.html#83281" title="=&gt; Int">writeIndex</a>)

          <a href="#290566" title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">tBuilder</a>.<a title="(constr: ch.epfl.lamp.compiler.msil.ConstructorInfo,value: Array[byte])Unit" id="289085">SetCustomAttribute</a>(<a href="../../symtab/clr/CLRTypes.scala.html#287453" title="=&gt; ch.epfl.lamp.compiler.msil.ConstructorInfo">SYMTAB_ATTRIBUTE_CONSTRUCTOR</a>, <a href="#290578" title="Array[Byte]">symtab</a>)

          <a href="../../Global.scala.html#39176" title="=&gt; GenMSIL.this.global.Run">currentRun</a>.<a href="../../Global.scala.html#40215" title="(key: GenMSIL.this.global.Symbol)scala.collection.mutable.HashMap[GenMSIL.this.global.Symbol,scala.tools.nsc.symtab.classfile.PickleBuffer]">symData</a> -= <a href="#290565" title="GenMSIL.this.global.Symbol">sym</a>
          <a href="../../Global.scala.html#39176" title="=&gt; GenMSIL.this.global.Run">currentRun</a>.<a href="../../Global.scala.html#40215" title="(key: GenMSIL.this.global.Symbol)scala.collection.mutable.HashMap[GenMSIL.this.global.Symbol,scala.tools.nsc.symtab.classfile.PickleBuffer]">symData</a> <span title="Unit">-=</span> <a href="#290565" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27055" title="=&gt; GenMSIL.this.global.Symbol">linkedSym</a>
          //log(&quot;Generated ScalaSig Attr for &quot; + sym)//debug
        <span title="Unit" class="keyword">case</span> _ =&gt;
          <a href="../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Could not find pickle information for &quot;</span> + <a href="#290565" title="GenMSIL.this.global.Symbol">sym</a>)
      }
    }

    <span class="keyword">def</span> <a title="(member: ch.epfl.lamp.compiler.msil.emit.ICustomAttributeSetter,annotations: List[GenMSIL.this.global.AnnotationInfo])Unit" id="287638">addAttributes</a>(<a title="ch.epfl.lamp.compiler.msil.emit.ICustomAttributeSetter" id="290752">member</a>: <a title="ch.epfl.lamp.compiler.msil.emit.ICustomAttributeSetter" id="287270">ICustomAttributeSetter</a>, <a title="List[GenMSIL.this.global.AnnotationInfo]" id="290753">annotations</a>: <span title="List[GenMSIL.this.global.AnnotationInfo]">List</span>[AnnotationInfo]) {
      <span title="Nothing" class="keyword">return</span> // TODO: implement at some point
    }
/*
      if (settings.debug.value)
        log(&quot;creating annotations: &quot; + annotations + &quot; for member : &quot; + member)
      for (annot@ AnnotationInfo(typ, annArgs, nvPairs) &lt;- annotations ;
           if annot.isConstant)
           //!typ.typeSymbol.hasFlag(Flags.JAVA)
      {
//        assert(consts.length &lt;= 1,
//               &quot;too many constant arguments for annotations; &quot;+consts.toString())

        // Problem / TODO having the symbol of the annotations type would be nicer
        // (i hope that type.typeSymbol is the same as the one in types2create)
        // AND: this will crash if the annotations Type is already compiled (-&gt; not a typeBuilder)
        // when this is solved, types2create will be the same as icodes.classes, thus superfluous
        val annType: TypeBuilder = getType(typ.typeSymbol).asInstanceOf[TypeBuilder]
//        val annType: MsilType = getType(typ.typeSymbol)

        // Problem / TODO: i have no idea which constructor is used. This
        // information should be available in AnnotationInfo.
        annType.CreateType() // else, GetConstructors can't be used
        val constr: ConstructorInfo = annType.GetConstructors()(0)
        // prevent a second call of CreateType, only needed because there's no
        // otehr way than GetConstructors()(0) to get the constructor, if there's
        // no constructor symbol available.

        val args: Array[Byte] =
          getAttributeArgs(
            annArgs map (_.constant.get),
            (for((n,v) &lt;- nvPairs) yield (n, v.constant.get)))
        member.SetCustomAttribute(constr, args)
      }
    } */

/*    def getAttributeArgs(consts: List[Constant], nvPairs: List[(Name, Constant)]): Array[Byte] = {
      val buf = ByteBuffer.allocate(2048) // FIXME: this may be not enough!
      buf.order(ByteOrder.LITTLE_ENDIAN)
      buf.putShort(1.toShort) // signature

      def emitSerString(str: String) = {
          // this is wrong, it has to be the length of the UTF-8 byte array, which
          // may be longer (see clr-book on page 302)
//          val length: Int = str.length
            val strBytes: Array[Byte] = try {
              str.getBytes(&quot;UTF-8&quot;)
            } catch {
              case _: Error =&gt; abort(&quot;could not get byte-array for string: &quot; + str)
            }
            val length: Int = strBytes.length //this length is stored big-endian
            if (length &lt; 128)
              buf.put(length.toByte)
            else if (length &lt; (1&lt;&lt;14)) {
              buf.put(((length &gt;&gt; 8) | 0x80).toByte) // the bits 14 and 15 of length are '0'
              buf.put((length | 0xff).toByte)
            } else if (length &lt; (1 &lt;&lt; 29)) {
              buf.put(((length &gt;&gt; 24) | 0xc0).toByte)
              buf.put(((length &gt;&gt; 16) &amp; 0xff).toByte)
              buf.put(((length &gt;&gt;  8) &amp; 0xff).toByte)
              buf.put(((length      ) &amp; 0xff).toByte)
            } else
              abort(&quot;string too long for attribute parameter: &quot; + length)
            buf.put(strBytes)
      }

      def emitConst(const: Constant): Unit = const.tag match {
        case BooleanTag =&gt; buf.put((if (const.booleanValue) 1 else 0).toByte)
        case ByteTag =&gt; buf.put(const.byteValue)
        case ShortTag =&gt; buf.putShort(const.shortValue)
        case CharTag =&gt; buf.putChar(const.charValue)
        case IntTag =&gt; buf.putInt(const.intValue)
        case LongTag =&gt; buf.putLong(const.longValue)
        case FloatTag =&gt; buf.putFloat(const.floatValue)
        case DoubleTag =&gt; buf.putDouble(const.doubleValue)
        case StringTag =&gt;
          val str: String = const.stringValue
          if (str == null) {
            buf.put(0xff.toByte)
          } else {
            emitSerString(str)
          }
        case ArrayTag =&gt;
          val arr: Array[Constant] = const.arrayValue
          if (arr == null) {
            buf.putInt(0xffffffff)
          } else {
            buf.putInt(arr.length)
            arr.foreach(emitConst)
          }

        // TODO: other Tags: NoTag, UnitTag, ClassTag, EnumTag, ArrayTag ???

        case _ =&gt; abort(&quot;could not handle attribute argument: &quot; + const)
      }

      consts foreach emitConst
      buf.putShort(nvPairs.length.toShort)
      def emitNamedArg(nvPair: (Name, Constant)) {
        // the named argument is a property of the attribute (it can't be a field, since
        //  all fields in scala are private)
        buf.put(0x54.toByte)

        def emitType(c: Constant) = c.tag match { // type of the constant, Ecma-335.pdf, page 151
          case BooleanTag =&gt; buf.put(0x02.toByte)
          case ByteTag =&gt;    buf.put(0x05.toByte)
          case ShortTag =&gt;   buf.put(0x06.toByte)
          case CharTag =&gt;    buf.put(0x07.toByte)
          case IntTag =&gt;     buf.put(0x08.toByte)
          case LongTag =&gt;    buf.put(0x0a.toByte)
          case FloatTag =&gt;   buf.put(0x0c.toByte)
          case DoubleTag =&gt;  buf.put(0x0d.toByte)
          case StringTag =&gt;  buf.put(0x0e.toByte)

          // TODO: other Tags: NoTag, UnitTag, ClassTag, EnumTag ???

          // ArrayTag falls in here
          case _ =&gt; abort(&quot;could not handle attribute argument: &quot; + c)
        }

        val cnst: Constant = nvPair._2
        if (cnst.tag == ArrayTag) {
          buf.put(0x1d.toByte)
          emitType(cnst.arrayValue(0)) // FIXME: will crash if array length = 0
        } else if (cnst.tag == EnumTag) {
          buf.put(0x55.toByte)
          // TODO: put a SerString (don't know what exactly, names of the enums somehow..)
              } else {
          buf.put(0x51.toByte)
          emitType(cnst)
        }

        emitSerString(nvPair._1.toString)
        emitConst(nvPair._2)
      }

      val length = buf.position()
      buf.array().slice(0, length)
    } */

    <span class="keyword">def</span> <a title="()Unit" id="287639">writeAssembly</a>() {
      <span title="Unit" class="keyword">if</span> (<a href="#287715" title="(x$1: AnyRef)Boolean">entryPoint</a> != <span title="Null(null)" class="keyword">null</span>) {
        <span title="(assertion: Boolean,message: =&gt; Any)Unit">assert</span>(<a href="#287715" title="=&gt; GenMSIL.this.global.Symbol">entryPoint</a>.<a href="../../symtab/Symbols.scala.html#27031" title="=&gt; GenMSIL.this.global.Symbol">enclClass</a>.<a href="../../symtab/Symbols.scala.html#26934" title="=&gt; Boolean">isModuleClass</a>, <span title="java.lang.String(&quot;main-method not defined in a module&quot;)" class="string">&quot;main-method not defined in a module&quot;</span>)
        <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.MethodInfo" id="290763">mainMethod</a> = <a href="../../symtab/clr/CLRTypes.scala.html#287469" title="(key: GenMSIL.this.global.loaders.clrTypes.global.Symbol)ch.epfl.lamp.compiler.msil.MethodInfo">methods</a>(<a href="#287715" title="=&gt; GenMSIL.this.global.Symbol">entryPoint</a>.<span title="[T0]T0">asInstanceOf</span><span title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">[</span>clrTypes.global.<a href="../../symtab/Symbols.scala.html#26127" title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">Symbol</a>])
        <span class="keyword">val</span> <a title="Array[ch.epfl.lamp.compiler.msil.Type]" id="290764">stringArrayTypes</a>: <span title="Array[ch.epfl.lamp.compiler.msil.Type]">Array</span>[MsilType] = <span title="(xs: ch.epfl.lamp.compiler.msil.Type*)(implicit evidence$2: scala.reflect.ClassManifest[ch.epfl.lamp.compiler.msil.Type])Array[ch.epfl.lamp.compiler.msil.Type]">Array</span><span title="(clazz: Class[_])scala.reflect.ClassManifest[ch.epfl.lamp.compiler.msil.Type]">(</span><a href="../../symtab/clr/CLRTypes.scala.html#287444" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MSTRING_ARRAY</a>)
        <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.MethodBuilder" id="290765">globalMain</a> = <a href="#287616" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ModuleBuilder">mmodule</a>.<a title="(name: String,attributes: Int,returnType: ch.epfl.lamp.compiler.msil.Type,paramTypes: Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.emit.MethodBuilder" id="288733">DefineGlobalMethod</a>(
          <span title="java.lang.String(&quot;Main&quot;)" class="string">&quot;Main&quot;</span>, MethodAttributes.Public <span title="Int(22)">|</span> MethodAttributes.Static,
          <a href="../../symtab/clr/CLRTypes.scala.html#287429" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MVOID</a>, <a href="#290764" title="Array[ch.epfl.lamp.compiler.msil.Type]">stringArrayTypes</a>)
        <a href="#290765" title="ch.epfl.lamp.compiler.msil.emit.MethodBuilder">globalMain</a>.<span title="(pos: Int,attr: Int,name: String)ch.epfl.lamp.compiler.msil.emit.ParameterBuilder">DefineParameter</span>(<span title="Int(0)" class="int">0</span>, ParameterAttributes.<span title="Int(0)">None</span>, <span title="java.lang.String(&quot;args&quot;)" class="string">&quot;args&quot;</span>)
        <a href="#287613" title="=&gt; ch.epfl.lamp.compiler.msil.emit.AssemblyBuilder">massembly</a>.<a title="(entryMethod: ch.epfl.lamp.compiler.msil.MethodInfo)Unit" id="288685">SetEntryPoint</a>(<a href="#290765" title="ch.epfl.lamp.compiler.msil.emit.MethodBuilder">globalMain</a>)
        <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.ILGenerator" id="290766">code</a> = <a href="#290765" title="ch.epfl.lamp.compiler.msil.emit.MethodBuilder">globalMain</a>.<span title="()ch.epfl.lamp.compiler.msil.emit.ILGenerator">GetILGenerator</span>()
        <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.FieldInfo" id="290767">moduleField</a> = <a href="#287734" title="(sym: GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.FieldInfo">getModuleInstanceField</a>(<a href="#287715" title="=&gt; GenMSIL.this.global.Symbol">entryPoint</a>.<a href="../../symtab/Symbols.scala.html#27031" title="=&gt; GenMSIL.this.global.Symbol">enclClass</a>)
        <a href="#290766" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.FieldInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ldsfld</span>, <a href="#290767" title="ch.epfl.lamp.compiler.msil.FieldInfo">moduleField</a>)
        <a href="#290766" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ldarg_0</span>)
        <a href="#290766" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.MethodInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Callvirt</span>, <a href="#290763" title="ch.epfl.lamp.compiler.msil.MethodInfo">mainMethod</a>)
        <a href="#290766" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ret</span>)
      }
      <a href="#287640" title="()Unit">createTypes</a>()
      <span class="keyword">val</span> <a title="java.lang.String" id="290755">filename</a> = <a href="#287628" title="=&gt; java.io.File">outDir</a>.<span title="()java.lang.String">getPath</span>() 
      <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37759" title="=&gt; Boolean">value</a>)
        <a href="../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Output path: &quot;</span> + <a href="#290755" title="java.lang.String">filename</a>)
      <span class="keyword">try</span> {
        <a href="#287613" title="=&gt; ch.epfl.lamp.compiler.msil.emit.AssemblyBuilder">massembly</a>.<a title="(destPath: String,sourceFilesPath: String)Unit" id="288681">Save</a>(<a href="#290755" title="java.lang.String">filename</a>, <a href="#287631" title="=&gt; java.io.File">srcPath</a>.<span title="()java.lang.String">getPath</span>())
      } <span class="keyword">catch</span> {
        <span title="Nothing" class="keyword">case</span> <a title="java.io.IOException" id="292674">e</a>:<a title="java.io.IOException" id="3636">IOException</a> =&gt; <a href="../../Global.scala.html#39077" title="(msg: String)Nothing">abort</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Could not write to &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#290755" title="java.lang.String">filename</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;: &quot;)" class="string">&quot;: &quot;</span> + <a href="#292674" title="java.io.IOException">e</a>.<a title="()java.lang.String" id="25926">getMessage</a>())
      }
    }

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="()Unit" id="287640">createTypes</a>() {
      <span class="keyword">for</span> (<a title="GenMSIL.this.global.icodes.global.Symbol" id="292689">sym</a> &lt;- <a href="../icode/ICodes.scala.html#46146" title="=&gt; scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.global.Symbol,GenMSIL.this.global.icodes.IClass]">classes</a>.<span title="(f: (GenMSIL.this.global.icodes.global.Symbol) =&gt; Unit)Unit">keysIterator</span>) {
        <span class="keyword">val</span> <a title="GenMSIL.this.global.icodes.IClass" id="292690">iclass</a>   = <a href="../icode/ICodes.scala.html#46146" title="(key: GenMSIL.this.global.icodes.global.Symbol)GenMSIL.this.global.icodes.IClass">classes</a>(<a href="#292689" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>)
        <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder" id="292691">tBuilder</a> = <a href="../../symtab/clr/CLRTypes.scala.html#287465" title="(key: GenMSIL.this.global.loaders.clrTypes.global.Symbol)ch.epfl.lamp.compiler.msil.Type">types</a>(<a href="#292689" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>.<span title="[T0]T0">asInstanceOf</span><span title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">[</span>clrTypes.global.<a href="../../symtab/Symbols.scala.html#26127" title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">Symbol</a>]).<span title="[T0]T0">asInstanceOf</span><span title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">[</span><span title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">TypeBuilder</span>]
          
        <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37759" title="=&gt; Boolean">value</a>)
          <a href="../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Calling CreatType for &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#292689" title="GenMSIL.this.global.icodes.global.Symbol">sym</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;, &quot;)" class="string">&quot;, &quot;</span> + <a href="#292691" title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">tBuilder</a>.<a title="()java.lang.String" id="287973">toString</a>)

        <a href="#292691" title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">tBuilder</a>.<span title="()ch.epfl.lamp.compiler.msil.Type">CreateType</span>()
        <a href="#292691" title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">tBuilder</a>.<span title="(sourceFilepath: String)Unit">setSourceFilepath</span>(<a href="#292690" title="GenMSIL.this.global.icodes.IClass">iclass</a>.<a href="../icode/Members.scala.html#66678" title="=&gt; GenMSIL.this.global.icodes.global.CompilationUnit">cunit</a>.<a href="../../CompilationUnits.scala.html#45431" title="=&gt; scala.tools.nsc.util.SourceFile">source</a>.<a href="../../util/SourceFile.scala.html#68207" title="=&gt; scala.tools.nsc.io.AbstractFile">file</a>.<a href="../../io/AbstractFile.scala.html#51384" title="=&gt; String">path</a>)
      }
    }

    <span class="keyword">private</span>[GenMSIL] <span class="keyword">def</span> <a title="(iclass: GenMSIL.this.global.icodes.IClass)Unit" id="287641">genClass</a>(<a title="GenMSIL.this.global.icodes.IClass" id="287802">iclass</a>: <a href="../icode/Members.scala.html#46171" title="GenMSIL.this.global.icodes.IClass">IClass</a>) {
      <span class="keyword">val</span> <a title="GenMSIL.this.global.icodes.global.Symbol" id="292741">sym</a> = <a href="#287802" title="GenMSIL.this.global.icodes.IClass">iclass</a>.<a href="../icode/Members.scala.html#66669" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>
      <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37759" title="=&gt; Boolean">value</a>)
        <a href="../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Generating class &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#292741" title="GenMSIL.this.global.icodes.global.Symbol">sym</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; flags: &quot;)" class="string">&quot; flags: &quot;</span> + <a href="../../symtab/Flags.scala.html#10413" title="object scala.tools.nsc.symtab.Flags">Flags</a>.<a href="../../symtab/Flags.scala.html#28814" title="(flags: Long)String">flagsToString</a>(<a href="#292741" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#26991" title="=&gt; Long">flags</a>))
      <a href="#287604" title="(x$1: GenMSIL.this.global.icodes.IClass)Unit">clasz</a> = <a href="#287802" title="GenMSIL.this.global.icodes.IClass">iclass</a>

      <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder" id="292742">tBuilder</a> = <a href="#287725" title="(sym: GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.Type">getType</a>(<a href="#292741" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>).<span title="[T0]T0">asInstanceOf</span><span title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">[</span><span title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">TypeBuilder</span>]
      <span title="Unit" class="keyword">if</span> (<a href="#287732" title="(sym: GenMSIL.this.global.Symbol)Boolean">isCloneable</a>(<a href="#292741" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>)){
        // FIXME: why there's no nme.clone_ ?
        // &quot;Clone&quot;: if the code is non-portable, &quot;Clone&quot; is defined, not &quot;clone&quot;
        // TODO: improve condition (should override AnyRef.clone)
        <span title="Unit" class="keyword">if</span> (<a href="#287802" title="GenMSIL.this.global.icodes.IClass">iclass</a>.<a href="../icode/Members.scala.html#66675" title="=&gt; List[GenMSIL.this.global.icodes.IMethod]">methods</a>.<span title="(p: (GenMSIL.this.global.icodes.IMethod) =&gt; Boolean)Boolean">forall</span>(<a title="GenMSIL.this.global.icodes.IMethod" id="292773">m</a> =&gt; {
          <span title="=&gt; Boolean">!</span>(<span title="(x$1: Boolean)Boolean">(</span><a href="#292773" title="GenMSIL.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61225" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>.<a href="../../symtab/Symbols.scala.html#26988" title="=&gt; GenMSIL.this.global.icodes.global.Name">name</a>.<a href="../../symtab/Names.scala.html#28205" title="()String">toString</a><span title="(x$1: AnyRef)Boolean">(</span>) <span title="(x$1: Boolean)Boolean">!=</span> <span title="java.lang.String(&quot;clone&quot;)" class="string">&quot;clone&quot;</span> || <a href="#292773" title="GenMSIL.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61225" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>.<a href="../../symtab/Symbols.scala.html#26988" title="=&gt; GenMSIL.this.global.icodes.global.Name">name</a>.<a href="../../symtab/Names.scala.html#28205" title="()String">toString</a><span title="(x$1: AnyRef)Boolean">(</span>) != <span title="java.lang.String(&quot;Clone&quot;)" class="string">&quot;Clone&quot;</span>) &amp;&amp;
            <a href="#292773" title="GenMSIL.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61225" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>.<a href="../../symtab/Symbols.scala.html#27003" title="=&gt; GenMSIL.this.global.icodes.global.Type">tpe</a>.<a href="../../symtab/Types.scala.html#30200" title="=&gt; List[GenMSIL.this.global.icodes.global.Type]">paramTypes</a>.<span title="(x$1: Int)Boolean">length</span> != <span title="Int(0)" class="int">0</span>)
        })) {
          <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37759" title="=&gt; Boolean">value</a>)
            <a href="../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;auto-generating cloneable method for &quot;</span> + <a href="#292741" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>)
          <span class="keyword">val</span> <a title="Short" id="292808">attrs</a>: <span title="Short">Short</span> = (MethodAttributes.Public | MethodAttributes.Virtual <span title="Short(198)">|</span>
                              MethodAttributes.HideBySig)
          <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.MethodBuilder" id="292809">cloneMethod</a> = <a href="#292742" title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">tBuilder</a>.<span title="(name: String,attrs: short,returnType: ch.epfl.lamp.compiler.msil.Type,paramTypes: Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.emit.MethodBuilder">DefineMethod</span>(<span title="java.lang.String(&quot;Clone&quot;)" class="string">&quot;Clone&quot;</span>, <a href="#292808" title="Short">attrs</a>, <a href="../../symtab/clr/CLRTypes.scala.html#287438" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MOBJECT</a>,
                                                  <span title="object ch.epfl.lamp.compiler.msil.Type">MsilType</span>.<span title="Array[ch.epfl.lamp.compiler.msil.Type]">EmptyTypes</span>)
          <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.ILGenerator" id="292810">clCode</a> = <a href="#292809" title="ch.epfl.lamp.compiler.msil.emit.MethodBuilder">cloneMethod</a>.<span title="()ch.epfl.lamp.compiler.msil.emit.ILGenerator">GetILGenerator</span>()
          <a href="#292810" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">clCode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ldarg_0</span>)
          <a href="#292810" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">clCode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.MethodInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Call</span>, <a href="#287549" title="=&gt; ch.epfl.lamp.compiler.msil.MethodInfo">MEMBERWISE_CLONE</a>)
          <a href="#292810" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">clCode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ret</span>)
        }
      }

      <span class="keyword">val</span> <a title="Int" id="292743">line</a> = <a href="#292741" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#26847" title="=&gt; scala.tools.nsc.util.Position">pos</a>.<a href="../../util/Position.scala.html#30304" title="=&gt; Int">line</a>
      <a href="#292742" title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">tBuilder</a>.<a title="(sourceLine: int,sourceFilename: String)Unit" id="289088">setPosition</a>(<a href="#292743" title="Int">line</a>, <a href="#287802" title="GenMSIL.this.global.icodes.IClass">iclass</a>.<a href="../icode/Members.scala.html#66678" title="=&gt; GenMSIL.this.global.icodes.global.CompilationUnit">cunit</a>.<a href="../../CompilationUnits.scala.html#45431" title="=&gt; scala.tools.nsc.util.SourceFile">source</a>.<a href="../../util/SourceFile.scala.html#68207" title="=&gt; scala.tools.nsc.io.AbstractFile">file</a>.<a href="../../io/AbstractFile.scala.html#51383" title="=&gt; String">name</a>)

      <span title="Unit" class="keyword">if</span> (<a href="#287730" title="(sym: GenMSIL.this.global.Symbol)Boolean">isTopLevelModule</a>(<a href="#292741" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>)) {
        <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37759" title="=&gt; Boolean">value</a>)
          <a href="../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;TopLevelModule: &quot;</span> + <a href="#292741" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>)
        <span title="Unit" class="keyword">if</span> (<a href="#292741" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27053" title="(x$1: AnyRef)Boolean">linkedClassOfModule</a> == <a href="../../symtab/Symbols.scala.html#26134" title="object GenMSIL.this.global.NoSymbol">NoSymbol</a>) {
          <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37759" title="=&gt; Boolean">value</a>)
            <a href="../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot; no linked class: &quot;</span> + <a href="#292741" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>)
          <a href="#287736" title="(sym: GenMSIL.this.global.Symbol)Unit">dumpMirrorClass</a>(<a href="#292741" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>)
        } <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="../../Global.scala.html#39176" title="=&gt; GenMSIL.this.global.Run">currentRun</a>.<a href="../../Global.scala.html#40217" title="(sym: GenMSIL.this.global.Symbol)Boolean">compiles</a>(<a href="#292741" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27053" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">linkedClassOfModule</a>)) {
          <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37759" title="=&gt; Boolean">value</a>)
            <a href="../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot; not compiling linked class: &quot;</span> + <a href="#292741" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>)
          <a href="#287736" title="(sym: GenMSIL.this.global.Symbol)Unit">dumpMirrorClass</a>(<a href="#292741" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>)
        }
      }

      // the pickling info is not written to the module class, but to it's
      // linked class (the mirror class eventually dumped)
      <span title="Unit" class="keyword">if</span> (<span title="=&gt; Boolean">!</span>(<a href="#292742" title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">tBuilder</a>.<a title="java.lang.String" id="288006">Name</a>.<span title="(x$1: java.lang.String)Boolean">endsWith</span><span title="(x$1: Boolean)Boolean">(</span><span title="java.lang.String(&quot;$&quot;)" class="string">&quot;$&quot;</span>) &amp;&amp; <a href="#292741" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#26934" title="=&gt; Boolean">isModuleClass</a>)){
        // think the if inside could be removed, because in this case, addSymtabAttribute is
        // called in the dumpMirrorClass method
        <a href="#287637" title="(sym: GenMSIL.this.global.Symbol,tBuilder: ch.epfl.lamp.compiler.msil.emit.TypeBuilder)Unit">addSymtabAttribute</a>(<span title="GenMSIL.this.global.Symbol" class="keyword">if</span> (<a href="#287730" title="(sym: GenMSIL.this.global.Symbol)Boolean">isTopLevelModule</a>(<a href="#292741" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>)) <a href="#292741" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27058" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">sourceModule</a> <span class="keyword">else</span> <a href="#292741" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>, <a href="#292742" title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">tBuilder</a>)

        // TODO: remove; check the above think:
        <span title="(assertion: Boolean,message: =&gt; Any)Unit">assert</span>(<span title="=&gt; Boolean">!</span><a href="#287730" title="(sym: GenMSIL.this.global.Symbol)Boolean">isTopLevelModule</a>(<a href="#292741" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>), <span title="java.lang.String(&quot;can't remove the 'if'&quot;)" class="string">&quot;can't remove the 'if'&quot;</span>)
      }

      <a href="#287638" title="(member: ch.epfl.lamp.compiler.msil.emit.ICustomAttributeSetter,annotations: List[GenMSIL.this.global.AnnotationInfo])Unit">addAttributes</a>(<a href="#292742" title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">tBuilder</a>, <a href="#292741" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#26854" title="=&gt; List[GenMSIL.this.global.icodes.global.AnnotationInfo]">annotations</a>)

      <span title="Unit" class="keyword">if</span> (<a href="#287802" title="GenMSIL.this.global.icodes.IClass">iclass</a>.<a href="../icode/Members.scala.html#66669" title="(x$1: AnyRef)Boolean">symbol</a> != <a href="../../symtab/Definitions.scala.html#26479" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28393" title="=&gt; GenMSIL.this.global.Symbol">ArrayClass</a>)
        <a href="#287802" title="GenMSIL.this.global.icodes.IClass">iclass</a>.<a href="../icode/Members.scala.html#66675" title="(f: (GenMSIL.this.global.icodes.IMethod) =&gt; Unit)Unit">methods</a> foreach <a href="#287642" title="(m: GenMSIL.this.global.icodes.IMethod)Unit">genMethod</a>

    } //genClass


    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(m: GenMSIL.this.global.icodes.IMethod)Unit" id="287642">genMethod</a>(<a title="GenMSIL.this.global.icodes.IMethod" id="292960">m</a>: <a href="../icode/Members.scala.html#46173" title="GenMSIL.this.global.icodes.IMethod">IMethod</a>) {
      <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37759" title="=&gt; Boolean">value</a>)
        <a href="../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Generating method &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#292960" title="GenMSIL.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61225" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; flags: &quot;)" class="string">&quot; flags: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="../../symtab/Flags.scala.html#10413" title="object scala.tools.nsc.symtab.Flags">Flags</a>.<a href="../../symtab/Flags.scala.html#28814" title="(flags: Long)String">flagsToString</a>(<a href="#292960" title="GenMSIL.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61225" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>.<a href="../../symtab/Symbols.scala.html#26991" title="=&gt; Long">flags</a>) <span title="(x$1: Any)java.lang.String">+</span>
            <span title="java.lang.String(&quot; owner: &quot;)" class="string">&quot; owner: &quot;</span> + <a href="#292960" title="GenMSIL.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61225" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>.<a href="../../symtab/Symbols.scala.html#26983" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">owner</a>)
      <a href="#287607" title="(x$1: GenMSIL.this.global.icodes.IMethod)Unit">method</a> = <a href="#292960" title="GenMSIL.this.global.icodes.IMethod">m</a>
      <a href="#287719" title="=&gt; scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.Local,ch.epfl.lamp.compiler.msil.emit.LocalBuilder]">localBuilders</a>.<span title="()Unit">clear</span>
      <a href="#287709" title="(m: GenMSIL.this.global.icodes.IMethod)Unit">computeLocalVarsIndex</a>(<a href="#292960" title="GenMSIL.this.global.icodes.IMethod">m</a>)

      <span title="Unit" class="keyword">if</span> (<a href="#292960" title="GenMSIL.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61225" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>.<a href="../../symtab/Symbols.scala.html#26914" title="=&gt; Boolean">isClassConstructor</a>){
        <a href="#287619" title="(x$1: ch.epfl.lamp.compiler.msil.emit.ILGenerator)Unit">mcode</a> = <a href="../../symtab/clr/CLRTypes.scala.html#287467" title="(key: GenMSIL.this.global.loaders.clrTypes.global.Symbol)ch.epfl.lamp.compiler.msil.ConstructorInfo">constructors</a>(<a href="#292960" title="GenMSIL.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61225" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>.<span title="[T0]T0">asInstanceOf</span><span title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">[</span>clrTypes.global.<a href="../../symtab/Symbols.scala.html#26127" title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">Symbol</a>]).<span title="[T0]T0">asInstanceOf</span><span title="ch.epfl.lamp.compiler.msil.emit.ConstructorBuilder">[</span><a title="ch.epfl.lamp.compiler.msil.emit.ConstructorBuilder" id="287246">ConstructorBuilder</a>].<span title="()ch.epfl.lamp.compiler.msil.emit.ILGenerator">GetILGenerator</span>()
      } <span class="keyword">else</span> {
        <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.MethodBuilder" id="293034">mBuilder</a> = <a href="../../symtab/clr/CLRTypes.scala.html#287469" title="(key: GenMSIL.this.global.loaders.clrTypes.global.Symbol)ch.epfl.lamp.compiler.msil.MethodInfo">methods</a>(<a href="#292960" title="GenMSIL.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61225" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>.<span title="[T0]T0">asInstanceOf</span><span title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">[</span>clrTypes.global.<a href="../../symtab/Symbols.scala.html#26127" title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">Symbol</a>]).<span title="[T0]T0">asInstanceOf</span><span title="ch.epfl.lamp.compiler.msil.emit.MethodBuilder">[</span><span title="ch.epfl.lamp.compiler.msil.emit.MethodBuilder">MethodBuilder</span>]
        <span title="Unit" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="#293034" title="ch.epfl.lamp.compiler.msil.emit.MethodBuilder">mBuilder</a>.<a title="()Boolean" id="290922">IsAbstract</a>())
          <span class="keyword">try</span> {
            <a href="#287619" title="(x$1: ch.epfl.lamp.compiler.msil.emit.ILGenerator)Unit">mcode</a> = <a href="#293034" title="ch.epfl.lamp.compiler.msil.emit.MethodBuilder">mBuilder</a>.<span title="()ch.epfl.lamp.compiler.msil.emit.ILGenerator">GetILGenerator</span>()
          } <span class="keyword">catch</span> {
            <span title="Nothing" class="keyword">case</span> <a title="Exception" id="293055">e</a>: <span title="Exception">Exception</span> =&gt;
              <span title="object java.lang.System">System</span>.<span title="java.io.PrintStream">out</span>.<span title="(x$1: java.lang.String)Unit">println</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;m.symbol       = &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="../../symtab/Flags.scala.html#10413" title="object scala.tools.nsc.symtab.Flags">Flags</a>.<a href="../../symtab/Flags.scala.html#28814" title="(flags: Long)String">flagsToString</a>(<a href="#292960" title="GenMSIL.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61225" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>.<a href="../../symtab/Symbols.scala.html#26991" title="=&gt; Long">flags</a>) <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; &quot;)" class="string">&quot; &quot;</span> + <a href="#292960" title="GenMSIL.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61225" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>)
              <span title="object java.lang.System">System</span>.<span title="java.io.PrintStream">out</span>.<span title="(x$1: java.lang.String)Unit">println</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;m.symbol.owner = &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="../../symtab/Flags.scala.html#10413" title="object scala.tools.nsc.symtab.Flags">Flags</a>.<a href="../../symtab/Flags.scala.html#28814" title="(flags: Long)String">flagsToString</a>(<a href="#292960" title="GenMSIL.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61225" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>.<a href="../../symtab/Symbols.scala.html#26983" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">owner</a>.<a href="../../symtab/Symbols.scala.html#26991" title="=&gt; Long">flags</a>) <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; &quot;)" class="string">&quot; &quot;</span> + <a href="#292960" title="GenMSIL.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61225" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>.<a href="../../symtab/Symbols.scala.html#26983" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">owner</a>)
              <span title="object java.lang.System">System</span>.<span title="java.io.PrintStream">out</span>.<span title="(x$1: java.lang.String)Unit">println</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;mBuilder       = &quot;</span> + <a href="#293034" title="ch.epfl.lamp.compiler.msil.emit.MethodBuilder">mBuilder</a>)
              <span title="object java.lang.System">System</span>.<span title="java.io.PrintStream">out</span>.<span title="(x$1: java.lang.String)Unit">println</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;mBuilder.DeclaringType = &quot;</span> <span title="(x$1: Any)java.lang.String">+</span>
                                 <a title="object ch.epfl.lamp.compiler.msil.TypeAttributes" id="109234">TypeAttributes</a>.<a title="(x$1: Int)java.lang.String" id="293130">toString</a>(<a href="#293034" title="ch.epfl.lamp.compiler.msil.emit.MethodBuilder">mBuilder</a>.<span title="ch.epfl.lamp.compiler.msil.Type">DeclaringType</span>.<a title="Int" id="287832">Attributes</a>) <span title="(x$1: Any)java.lang.String">+</span>
                                 <span title="java.lang.String(&quot;::&quot;)" class="string">&quot;::&quot;</span> + <a href="#293034" title="ch.epfl.lamp.compiler.msil.emit.MethodBuilder">mBuilder</a>.<span title="ch.epfl.lamp.compiler.msil.Type">DeclaringType</span>)
              <span title="Nothing" class="keyword">throw</span> <a href="#293055" title="Exception">e</a>
          }
          <span class="keyword">else</span>
            <a href="#287619" title="(x$1: ch.epfl.lamp.compiler.msil.emit.ILGenerator)Unit">mcode</a> = <span title="Null(null)" class="keyword">null</span>
      }

      <span title="Unit" class="keyword">if</span> (<a href="#287619" title="(x$1: AnyRef)Boolean">mcode</a> != <span title="Null(null)" class="keyword">null</span>) {
        <span class="keyword">for</span> (<a title="GenMSIL.this.global.icodes.Local" id="293177">local</a> &lt;- <a href="#292960" title="GenMSIL.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61246" title="(that: List[GenMSIL.this.global.icodes.Local])List[GenMSIL.this.global.icodes.Local]">locals</a> <span title="(f: (GenMSIL.this.global.icodes.Local) =&gt; Unit)Unit">--</span> <a href="#292960" title="GenMSIL.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61249" title="=&gt; List[GenMSIL.this.global.icodes.Local]">params</a>) {
          <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37759" title="=&gt; Boolean">value</a>)
            <a href="../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;add local var: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#293177" title="GenMSIL.this.global.icodes.Local">local</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;, of kind &quot;)" class="string">&quot;, of kind &quot;</span> + <a href="#293177" title="GenMSIL.this.global.icodes.Local">local</a>.<a href="../icode/Members.scala.html#60753" title="=&gt; GenMSIL.this.global.icodes.TypeKind">kind</a>)
          <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.Type" id="293178">t</a>: <span title="ch.epfl.lamp.compiler.msil.Type">MsilType</span> = <a href="#287722" title="(t: GenMSIL.this.global.icodes.TypeKind)ch.epfl.lamp.compiler.msil.Type">msilType</a>(<a href="#293177" title="GenMSIL.this.global.icodes.Local">local</a>.<a href="../icode/Members.scala.html#60753" title="=&gt; GenMSIL.this.global.icodes.TypeKind">kind</a>)
          <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.LocalBuilder" id="293179">localBuilder</a> = <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(localType: ch.epfl.lamp.compiler.msil.Type)ch.epfl.lamp.compiler.msil.emit.LocalBuilder">DeclareLocal</span>(<a href="#293178" title="ch.epfl.lamp.compiler.msil.Type">t</a>)
          <a href="#293179" title="ch.epfl.lamp.compiler.msil.emit.LocalBuilder">localBuilder</a>.<span title="(name: String)Unit">SetLocalSymInfo</span>(<a href="#287710" title="(sym: GenMSIL.this.global.Symbol)String">msilName</a>(<a href="#293177" title="GenMSIL.this.global.icodes.Local">local</a>.<a href="../icode/Members.scala.html#60751" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">sym</a>))
          <a href="#287719" title="(key: GenMSIL.this.global.icodes.Local,value: ch.epfl.lamp.compiler.msil.emit.LocalBuilder)Unit">localBuilders</a>(<a href="#293177" title="GenMSIL.this.global.icodes.Local">local</a>) = <a href="#293179" title="ch.epfl.lamp.compiler.msil.emit.LocalBuilder">localBuilder</a>
        }
        <a href="#287649" title="(m: GenMSIL.this.global.icodes.IMethod)Unit">genCode</a>(<a href="#292960" title="GenMSIL.this.global.icodes.IMethod">m</a>)
      }

    }

    <span class="keyword">var</span> <a title="List[GenMSIL.this.global.icodes.BasicBlock]" id="287644">linearization</a>: <span title="List[GenMSIL.this.global.icodes.BasicBlock]">List</span>[BasicBlock] = <span title="object Nil">Nil</span>
    // a &quot;ret&quot; instruction is needed (which is not present in
    //  icode) if there's no code after a try-catch block
    <span class="keyword">var</span> <a title="Boolean" id="287647">needAdditionalRet</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span>

    <span class="keyword">def</span> <a title="(m: GenMSIL.this.global.icodes.IMethod)Unit" id="287649">genCode</a>(<a title="GenMSIL.this.global.icodes.IMethod" id="293218">m</a>: <a href="../icode/Members.scala.html#46173" title="GenMSIL.this.global.icodes.IMethod">IMethod</a>) {
      <a href="#287610" title="(x$1: GenMSIL.this.global.icodes.Code)Unit">code</a> = <a href="#293218" title="GenMSIL.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61228" title="=&gt; GenMSIL.this.global.icodes.Code">code</a>

      <a href="#287704" title="=&gt; scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.BasicBlock,ch.epfl.lamp.compiler.msil.emit.Label]">labels</a>.<span title="()Unit">clear</span>
      <a href="#287644" title="(x$1: List[GenMSIL.this.global.icodes.BasicBlock])Unit">linearization</a> = <a href="../icode/ICodes.scala.html#46149" title="=&gt; GenMSIL.this.global.icodes.Linearizer">linearizer</a>.<a href="../icode/Linearizers.scala.html#62209" title="(c: GenMSIL.this.global.icodes.IMethod)List[GenMSIL.this.global.icodes.BasicBlock]">linearize</a>(<a href="#293218" title="GenMSIL.this.global.icodes.IMethod">m</a>)
      <span class="keyword">val</span> <a title="List[GenMSIL.this.global.icodes.BasicBlock]" id="293222">orderedBlocks</a> = (<span title="List[GenMSIL.this.global.icodes.BasicBlock]" class="keyword">if</span> (<a href="#293218" title="GenMSIL.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61234" title="(x$1: AnyRef)Boolean">exh</a> != <span title="object Nil">Nil</span>) <a href="#287683" title="(blocks: List[GenMSIL.this.global.icodes.BasicBlock],exH: List[GenMSIL.this.global.icodes.ExceptionHandler])List[GenMSIL.this.global.icodes.BasicBlock]">orderBlocksForExh</a>(<a href="#287644" title="=&gt; List[GenMSIL.this.global.icodes.BasicBlock]">linearization</a>, <a href="#293218" title="GenMSIL.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61234" title="=&gt; List[GenMSIL.this.global.icodes.ExceptionHandler]">exh</a>)
                           <span class="keyword">else</span> <a href="#287644" title="=&gt; List[GenMSIL.this.global.icodes.BasicBlock]">linearization</a>)

      <a href="#287708" title="(bs: List[GenMSIL.this.global.icodes.BasicBlock])Unit">makeLabels</a>(<a href="#293222" title="List[GenMSIL.this.global.icodes.BasicBlock]">orderedBlocks</a>) // orderBlocksForExh may create new Blocks -&gt; new Labels
      <a href="#287693" title="(l: List[GenMSIL.this.global.icodes.BasicBlock])Unit">genBlocks</a>(<a href="#293222" title="List[GenMSIL.this.global.icodes.BasicBlock]">orderedBlocks</a>)
      <span title="Unit" class="keyword">if</span> (<a href="#287647" title="=&gt; Boolean">needAdditionalRet</a>) {
        <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ret</span>)
        <a href="#287647" title="(x$1: Boolean)Unit">needAdditionalRet</a> = <span title="Boolean(false)" class="keyword">false</span>
      }
    }

    <span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class ExHInstruction extends java.lang.Object with ScalaObject" id="287650">ExHInstruction</a><span title="ScalaObject">(</span><a title="GenMSIL.this.global.icodes.ExceptionHandler" id="293263">handler</a>: <a href="../icode/ExceptionHandlers.scala.html#46236" title="GenMSIL.this.global.icodes.ExceptionHandler">ExceptionHandler</a>) { }
    case <span class="keyword">class</span> <a title="class BeginExceptionBlock extends BytecodeGenerator.this.ExHInstruction with ScalaObject with Product" id="293295">BeginExceptionBlock</a><span title="ScalaObject">(</span><a title="GenMSIL.this.global.icodes.ExceptionHandler" id="302930">handler</a>: <a href="../icode/ExceptionHandlers.scala.html#46236" title="GenMSIL.this.global.icodes.ExceptionHandler">ExceptionHandler</a>) <span class="keyword">extends</span> <a href="#287650" title="BytecodeGenerator.this.ExHInstruction">ExHInstruction</a>(<a href="#302930" title="GenMSIL.this.global.icodes.ExceptionHandler">handler</a>)
    case <span class="keyword">class</span> <a title="class BeginCatchBlock extends BytecodeGenerator.this.ExHInstruction with ScalaObject with Product" id="293371">BeginCatchBlock</a><span title="ScalaObject">(</span><a title="GenMSIL.this.global.icodes.ExceptionHandler" id="302920">handler</a>: <a href="../icode/ExceptionHandlers.scala.html#46236" title="GenMSIL.this.global.icodes.ExceptionHandler">ExceptionHandler</a>, <a title="ch.epfl.lamp.compiler.msil.Type" id="302921">exceptionType</a>: <span title="ch.epfl.lamp.compiler.msil.Type">MsilType</span>) <span class="keyword">extends</span> <a href="#287650" title="BytecodeGenerator.this.ExHInstruction">ExHInstruction</a>(<a href="#302920" title="GenMSIL.this.global.icodes.ExceptionHandler">handler</a>)
    case <span class="keyword">class</span> <a title="class BeginFinallyBlock extends BytecodeGenerator.this.ExHInstruction with ScalaObject with Product" id="293454">BeginFinallyBlock</a><span title="ScalaObject">(</span><a title="GenMSIL.this.global.icodes.ExceptionHandler" id="302912">handler</a>: <a href="../icode/ExceptionHandlers.scala.html#46236" title="GenMSIL.this.global.icodes.ExceptionHandler">ExceptionHandler</a>) <span class="keyword">extends</span> <a href="#287650" title="BytecodeGenerator.this.ExHInstruction">ExHInstruction</a>(<a href="#302912" title="GenMSIL.this.global.icodes.ExceptionHandler">handler</a>)
    case <span class="keyword">class</span> <a title="class EndExceptionBlock extends BytecodeGenerator.this.ExHInstruction with ScalaObject with Product" id="293520">EndExceptionBlock</a><span title="ScalaObject">(</span><a title="GenMSIL.this.global.icodes.ExceptionHandler" id="302904">handler</a>: <a href="../icode/ExceptionHandlers.scala.html#46236" title="GenMSIL.this.global.icodes.ExceptionHandler">ExceptionHandler</a>) <span class="keyword">extends</span> <a href="#287650" title="BytecodeGenerator.this.ExHInstruction">ExHInstruction</a>(<a href="#302904" title="GenMSIL.this.global.icodes.ExceptionHandler">handler</a>)


    <span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class Block extends java.lang.Object with ScalaObject" id="287663">Block</a> <span title="ScalaObject">{</span>
      <span class="keyword">var</span> <a title="Boolean" id="293559">closed</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span>
      <span class="keyword">def</span> <a title="=&gt; Option[BytecodeGenerator.this.BlockList0]" id="293561">parentBlockList</a>: <span title="Option[BytecodeGenerator.this.BlockList0]">Option</span>[BlockList0]
      <span class="keyword">def</span> <a title="=&gt; GenMSIL.this.global.icodes.BasicBlock" id="293562">firstBasicBlock</a>: <a href="../icode/BasicBlocks.scala.html#46178" title="GenMSIL.this.global.icodes.BasicBlock">BasicBlock</a>
      <span class="keyword">def</span> <a title="=&gt; GenMSIL.this.global.icodes.BasicBlock" id="293563">lastBasicBlock</a>: <a href="../icode/BasicBlocks.scala.html#46178" title="GenMSIL.this.global.icodes.BasicBlock">BasicBlock</a>
//      def getExceptionBlock(exh: ExceptionHandler): Option[ExceptionBlock]
      <span class="keyword">def</span> <a title="()Unit" id="293564">close</a>(): <span title="Unit">Unit</span>
/*      protected def findExceptionBlock(list: List[Block], exh: ExceptionHandler): Option[ExceptionBlock] = {
        var res: Option[ExceptionBlock] = None
        var i: Int = 0
        while (i &lt; list.length &amp;&amp; res == None) {
          val b = list(i)
          val exB = b.getExceptionBlock(exh)
          exB match {
            case some: Some[ExceptionBlock] =&gt; res = some
            case None =&gt; ()
          }
          i = i + 1
        }
        res
      } */
    }
    case <span class="keyword">class</span> <a title="class CodeBlock extends BytecodeGenerator.this.Block with ScalaObject with Product" id="293665">CodeBlock</a><span title="ScalaObject">(</span><a title="BytecodeGenerator.this.BlockList0" id="302896">parent</a>: <a href="#287667" title="BytecodeGenerator.this.BlockList0">BlockList0</a>) <span class="keyword">extends</span> <a href="#287663" title="BytecodeGenerator.this.Block">Block</a> {
      <span class="keyword">var</span> <a title="List[GenMSIL.this.global.icodes.BasicBlock]" id="293581">basicBlocks</a>: <span title="List[GenMSIL.this.global.icodes.BasicBlock]">List</span>[BasicBlock] = <span title="object Nil">Nil</span>
      <span class="keyword">def</span> <a title="=&gt; Boolean" id="293583">isEmpty</a> = <a href="#293581" title="=&gt; List[GenMSIL.this.global.icodes.BasicBlock]">basicBlocks</a>.<span title="=&gt; Boolean">isEmpty</span>
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; GenMSIL.this.global.icodes.BasicBlock" id="293584">firstBasicBlock</a>: <a href="../icode/BasicBlocks.scala.html#46178" title="GenMSIL.this.global.icodes.BasicBlock">BasicBlock</a> = {
        <span title="GenMSIL.this.global.icodes.BasicBlock" class="keyword">if</span>(<a href="#293583" title="=&gt; Boolean">isEmpty</a>) <span title="Null(null)" class="keyword">null</span>
        <span class="keyword">else</span> {
          <span title="GenMSIL.this.global.icodes.BasicBlock" class="keyword">if</span> (<a href="#293559" title="=&gt; Boolean">closed</a>) <a href="#293581" title="=&gt; List[GenMSIL.this.global.icodes.BasicBlock]">basicBlocks</a>.<span title="=&gt; GenMSIL.this.global.icodes.BasicBlock">head</span>
          <span class="keyword">else</span> <a href="#293581" title="=&gt; List[GenMSIL.this.global.icodes.BasicBlock]">basicBlocks</a>.<span title="=&gt; GenMSIL.this.global.icodes.BasicBlock">last</span>
        }
      }
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; GenMSIL.this.global.icodes.BasicBlock" id="293585">lastBasicBlock</a>: <a href="../icode/BasicBlocks.scala.html#46178" title="GenMSIL.this.global.icodes.BasicBlock">BasicBlock</a> = {
        <span title="GenMSIL.this.global.icodes.BasicBlock" class="keyword">if</span>(<a href="#293583" title="=&gt; Boolean">isEmpty</a>) <span title="Null(null)" class="keyword">null</span>
        <span class="keyword">else</span> {
          <span title="GenMSIL.this.global.icodes.BasicBlock" class="keyword">if</span> (<a href="#293559" title="=&gt; Boolean">closed</a>) <a href="#293581" title="=&gt; List[GenMSIL.this.global.icodes.BasicBlock]">basicBlocks</a>.<span title="=&gt; GenMSIL.this.global.icodes.BasicBlock">last</span>
          <span class="keyword">else</span> <a href="#293581" title="=&gt; List[GenMSIL.this.global.icodes.BasicBlock]">basicBlocks</a>.<span title="=&gt; GenMSIL.this.global.icodes.BasicBlock">head</span>
        }
      }
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Some[BytecodeGenerator.this.BlockList0]" id="293586">parentBlockList</a> = <span title="(x: BytecodeGenerator.this.BlockList0)Some[BytecodeGenerator.this.BlockList0]">Some</span>(<a href="#302896" title="=&gt; BytecodeGenerator.this.BlockList0">parent</a>)
//      override def getExceptionBlock(exh: ExceptionHandler): Option[ExceptionBlock] = None
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="293587">close</a>() {
        <a href="#293581" title="(x$1: List[GenMSIL.this.global.icodes.BasicBlock])Unit">basicBlocks</a> = <a href="#293581" title="=&gt; List[GenMSIL.this.global.icodes.BasicBlock]">basicBlocks</a>.<span title="=&gt; List[GenMSIL.this.global.icodes.BasicBlock]">reverse</span>
        <a href="#293559" title="(x$1: Boolean)Unit">closed</a> = <span title="Boolean(true)" class="keyword">true</span>
      }
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="()java.lang.String" id="293588">toString</a>() = {
        <span class="keyword">var</span> <a title="java.lang.String" id="293634">res</a> = <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>
        <a href="#293634" title="java.lang.String">res</a> = <a href="#293634" title="(x$1: Any)java.lang.String">res</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="#294504" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>.<a href="#293637" title="=&gt; java.lang.String">indent</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;CodeBlock(&quot;)" class="string">&quot;CodeBlock(&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#293581" title="=&gt; List[GenMSIL.this.global.icodes.BasicBlock]">basicBlocks</a> + <span title="java.lang.String(&quot;)\012&quot;)" class="string">&quot;)\n&quot;</span>
        <a href="#293634" title="java.lang.String">res</a>
      }
    }
    <span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class BlockList0 extends BytecodeGenerator.this.Block with ScalaObject" id="287667">BlockList0</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#287663" title="BytecodeGenerator.this.Block">Block</a> {
      <span class="keyword">var</span> <a title="List[BytecodeGenerator.this.Block]" id="293594">blocks</a>: <span title="List[BytecodeGenerator.this.Block]">List</span>[Block] = <span title="object Nil">Nil</span>
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; GenMSIL.this.global.icodes.BasicBlock" id="293596">firstBasicBlock</a>: <a href="../icode/BasicBlocks.scala.html#46178" title="GenMSIL.this.global.icodes.BasicBlock">BasicBlock</a> = {
        <span title="GenMSIL.this.global.icodes.BasicBlock" class="keyword">if</span>(<a href="#293594" title="=&gt; List[BytecodeGenerator.this.Block]">blocks</a>.<span title="=&gt; Boolean">isEmpty</span>) <span title="Null(null)" class="keyword">null</span>
        <span class="keyword">else</span> {
          <span title="GenMSIL.this.global.icodes.BasicBlock" class="keyword">if</span> (<a href="#293559" title="=&gt; Boolean">closed</a>) <a href="#293594" title="=&gt; List[BytecodeGenerator.this.Block]">blocks</a>.<span title="=&gt; BytecodeGenerator.this.Block">head</span>.<a href="#293562" title="=&gt; GenMSIL.this.global.icodes.BasicBlock">firstBasicBlock</a>
          <span class="keyword">else</span> <a href="#293594" title="=&gt; List[BytecodeGenerator.this.Block]">blocks</a>.<span title="=&gt; BytecodeGenerator.this.Block">last</span>.<a href="#293562" title="=&gt; GenMSIL.this.global.icodes.BasicBlock">firstBasicBlock</a>
        }
      }
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; GenMSIL.this.global.icodes.BasicBlock" id="293597">lastBasicBlock</a>: <a href="../icode/BasicBlocks.scala.html#46178" title="GenMSIL.this.global.icodes.BasicBlock">BasicBlock</a> = {
        <span title="GenMSIL.this.global.icodes.BasicBlock" class="keyword">if</span>(<a href="#293594" title="=&gt; List[BytecodeGenerator.this.Block]">blocks</a>.<span title="=&gt; Boolean">isEmpty</span>) <span title="Null(null)" class="keyword">null</span>
        <span class="keyword">else</span> {
          <span title="GenMSIL.this.global.icodes.BasicBlock" class="keyword">if</span> (<a href="#293559" title="=&gt; Boolean">closed</a>) <a href="#293594" title="=&gt; List[BytecodeGenerator.this.Block]">blocks</a>.<span title="=&gt; BytecodeGenerator.this.Block">last</span>.<a href="#293563" title="=&gt; GenMSIL.this.global.icodes.BasicBlock">lastBasicBlock</a>
          <span class="keyword">else</span> <a href="#293594" title="=&gt; List[BytecodeGenerator.this.Block]">blocks</a>.<span title="=&gt; BytecodeGenerator.this.Block">head</span>.<a href="#293563" title="=&gt; GenMSIL.this.global.icodes.BasicBlock">lastBasicBlock</a>
        }
      }
/*      override def getExceptionBlock(exh: ExceptionHandler): Option[ExceptionBlock] = {
        findExceptionBlock(blocks, exh)
      } */
      <span class="keyword">def</span> <a title="(exh: GenMSIL.this.global.icodes.ExceptionHandler)BytecodeGenerator.this.ExceptionBlock" id="293598">addExceptionBlock</a>(<a title="GenMSIL.this.global.icodes.ExceptionHandler" id="293716">exh</a>: <a href="../icode/ExceptionHandlers.scala.html#46236" title="GenMSIL.this.global.icodes.ExceptionHandler">ExceptionHandler</a>) = {
        <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37759" title="=&gt; Boolean">value</a>)
          <a href="../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;new exc block with &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#293716" title="GenMSIL.this.global.icodes.ExceptionHandler">exh</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; to &quot;)" class="string">&quot; to &quot;</span> + <a href="#287667" title="BytecodeGenerator.this.BlockList0" class="keyword">this</a>)
        <span class="keyword">val</span> <a title="BytecodeGenerator.this.ExceptionBlock" id="293719">e</a> = <span title="BytecodeGenerator.this.ExceptionBlock" class="keyword">new</span> <a href="#294324" title="BytecodeGenerator.this.ExceptionBlock">ExceptionBlock</a>(<a href="#287667" title="BytecodeGenerator.this.BlockList0" class="keyword">this</a>, <a href="#293716" title="GenMSIL.this.global.icodes.ExceptionHandler">exh</a>)
        <a href="#293594" title="(x$1: List[BytecodeGenerator.this.Block])Unit">blocks</a> = <a href="#293719" title="BytecodeGenerator.this.ExceptionBlock">e</a> <a href="#293757" title="BytecodeGenerator.this.ExceptionBlock">::</a> <a href="#293594" title="(x: BytecodeGenerator.this.Block)List[BytecodeGenerator.this.Block]">blocks</a>
        <a href="#293719" title="BytecodeGenerator.this.ExceptionBlock">e</a>
      }
      <span class="keyword">def</span> <a title="(bb: GenMSIL.this.global.icodes.BasicBlock)Unit" id="293599">addBasicBlock</a>(<a title="GenMSIL.this.global.icodes.BasicBlock" id="293767">bb</a>: <a href="../icode/BasicBlocks.scala.html#46178" title="GenMSIL.this.global.icodes.BasicBlock">BasicBlock</a>) = {
        <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37759" title="=&gt; Boolean">value</a>)
          <a href="../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;adding bb &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#293767" title="GenMSIL.this.global.icodes.BasicBlock">bb</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; to &quot;)" class="string">&quot; to &quot;</span> + <a href="#287667" title="BytecodeGenerator.this.BlockList0" class="keyword">this</a>)
        <span class="keyword">var</span> <a title="BytecodeGenerator.this.CodeBlock" id="293770">cb</a>: <a href="#293665" title="BytecodeGenerator.this.CodeBlock">CodeBlock</a> = <span title="BytecodeGenerator.this.CodeBlock" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="#293594" title="=&gt; List[BytecodeGenerator.this.Block]">blocks</a>.<span title="=&gt; Boolean">isEmpty</span>) {
          <a href="#293594" title="=&gt; List[BytecodeGenerator.this.Block]">blocks</a>.<span title="=&gt; BytecodeGenerator.this.Block">head</span> <span title="BytecodeGenerator.this.CodeBlock" class="keyword">match</span> {
            <span title="BytecodeGenerator.this.CodeBlock" class="keyword">case</span> <a title="BytecodeGenerator.this.CodeBlock" id="293783">blk</a>: <a href="#293665" title="BytecodeGenerator.this.CodeBlock">CodeBlock</a> =&gt; <a href="#293783" title="BytecodeGenerator.this.CodeBlock">blk</a>
            <span title="Null(null)" class="keyword">case</span> _ =&gt; <span title="Null(null)" class="keyword">null</span>
          }
        } <span class="keyword">else</span> <span title="Null(null)" class="keyword">null</span>
        <span title="Unit" class="keyword">if</span> (<a href="#293770" title="(x$1: AnyRef)Boolean">cb</a> == <span title="Null(null)" class="keyword">null</span>) {
          <a href="#293770" title="BytecodeGenerator.this.CodeBlock">cb</a> = <span title="BytecodeGenerator.this.CodeBlock" class="keyword">new</span> <a href="#293665" title="BytecodeGenerator.this.CodeBlock">CodeBlock</a>(<a href="#287667" title="BytecodeGenerator.this.BlockList0" class="keyword">this</a>)
          <a href="#293594" title="(x$1: List[BytecodeGenerator.this.Block])Unit">blocks</a> = <a href="#293770" title="BytecodeGenerator.this.CodeBlock">cb</a> <a href="#293793" title="BytecodeGenerator.this.CodeBlock">::</a> <a href="#293594" title="(x: BytecodeGenerator.this.Block)List[BytecodeGenerator.this.Block]">blocks</a>
        }
        <a href="#293770" title="BytecodeGenerator.this.CodeBlock">cb</a>.<a href="#293581" title="(x$1: List[GenMSIL.this.global.icodes.BasicBlock])Unit">basicBlocks</a> = <a href="#293767" title="GenMSIL.this.global.icodes.BasicBlock">bb</a> <a href="#293803" title="GenMSIL.this.global.icodes.BasicBlock">::</a> <a href="#293770" title="BytecodeGenerator.this.CodeBlock">cb</a>.<a href="#293581" title="(x: GenMSIL.this.global.icodes.BasicBlock)List[GenMSIL.this.global.icodes.BasicBlock]">basicBlocks</a>
      }
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="293600">close</a>() {
        <a href="#293594" title="=&gt; List[BytecodeGenerator.this.Block]">blocks</a>.<span title="(f: (BytecodeGenerator.this.Block) =&gt; Unit)Unit">foreach</span>(<a href="#293831" title="BytecodeGenerator.this.Block">_</a>.<a href="#293564" title="()Unit">close</a>)
        <a href="#293594" title="(x$1: List[BytecodeGenerator.this.Block])Unit">blocks</a> = <a href="#293594" title="=&gt; List[BytecodeGenerator.this.Block]">blocks</a>.<span title="=&gt; List[BytecodeGenerator.this.Block]">reverse</span>
        <a href="#293559" title="(x$1: Boolean)Unit">closed</a> = <span title="Boolean(true)" class="keyword">true</span>
      }
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="()java.lang.String" id="293601">toString</a>() = {
        <span class="keyword">var</span> <a title="java.lang.String" id="293844">res</a> = <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>
        <a href="#293844" title="java.lang.String">res</a> = <a href="#293844" title="(x$1: Any)java.lang.String">res</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="#294504" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>.<a href="#293637" title="=&gt; java.lang.String">indent</a> + <span title="java.lang.String(&quot;BlockList0:\012&quot;)" class="string">&quot;BlockList0:\n&quot;</span>
        <a href="#294504" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>.<a href="#293637" title="(x$1: java.lang.String)Unit">indent</a> = <a href="#294504" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>.<a href="#293637" title="(x$1: Any)java.lang.String">indent</a> + <span title="java.lang.String(&quot;  &quot;)" class="string">&quot;  &quot;</span>
        <span class="keyword">for</span> (<a title="BytecodeGenerator.this.Block" id="293871">b</a> &lt;- <a href="#293594" title="(f: (BytecodeGenerator.this.Block) =&gt; Unit)Unit">blocks</a>)
          <a href="#293844" title="java.lang.String">res</a> = <a href="#293844" title="(x$1: Any)java.lang.String">res</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="#293871" title="BytecodeGenerator.this.Block">b</a> + <span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span>
        <a href="#294504" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>.<a href="#293637" title="(x$1: java.lang.String)Unit">indent</a> = <a href="#294504" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>.<a href="#293637" title="=&gt; java.lang.String">indent</a>.<span title="(x$1: Int,x$2: Int)java.lang.String">substring</span>(<span title="Int(0)" class="int">0</span>,<a href="#294504" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>.<a href="#293637" title="=&gt; java.lang.String">indent</a>.<span title="(x$1: Int)Int">length</span>-<span title="Int(2)" class="int">2</span>)
        <a href="#293844" title="java.lang.String">res</a>
      }
    }
    case <span class="keyword">class</span> <a title="class BlockList extends BytecodeGenerator.this.BlockList0 with ScalaObject with Product" id="293985">BlockList</a><span title="ScalaObject">(</span><a title="BytecodeGenerator.this.Block" id="302888">parent</a>: <a href="#287663" title="BytecodeGenerator.this.Block">Block</a>) <span class="keyword">extends</span> <a href="#287667" title="BytecodeGenerator.this.BlockList0">BlockList0</a> {
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Option[BytecodeGenerator.this.BlockList0]" id="293914">parentBlockList</a>: <span title="Option[BytecodeGenerator.this.BlockList0]">Option</span>[BlockList0] = {
        <span title="Option[BytecodeGenerator.this.BlockList0]" class="keyword">if</span> (<a href="#302888" title="(x$1: AnyRef)Boolean">parent</a> == <a href="#294504" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>)
          <span title="(x: object BytecodeGenerator.this.TopBlock)Some[object BytecodeGenerator.this.TopBlock]">Some</span>(<a href="#294504" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>)
        <span class="keyword">else</span> <a href="#302888" title="=&gt; BytecodeGenerator.this.Block">parent</a> <span title="Option[BytecodeGenerator.this.BlockList0]" class="keyword">match</span> {
          <span title="Some[BytecodeGenerator.this.BlockList]" class="keyword">case</span> <a title="BytecodeGenerator.this.BlockList" id="293935">bl</a>: <a href="#293985" title="BytecodeGenerator.this.BlockList">BlockList</a> =&gt; <span title="(x: BytecodeGenerator.this.BlockList)Some[BytecodeGenerator.this.BlockList]">Some</span>(<a href="#293935" title="BytecodeGenerator.this.BlockList">bl</a>)
          <span title="Some[BytecodeGenerator.this.CatchBlock]" class="keyword">case</span> <a title="BytecodeGenerator.this.CatchBlock" id="293941">cb</a>: <a href="#294418" title="BytecodeGenerator.this.CatchBlock">CatchBlock</a> =&gt; <span title="(x: BytecodeGenerator.this.CatchBlock)Some[BytecodeGenerator.this.CatchBlock]">Some</span>(<a href="#293941" title="BytecodeGenerator.this.CatchBlock">cb</a>)
          <span title="Option[BytecodeGenerator.this.BlockList0]" class="keyword">case</span> _ =&gt; <a href="#302888" title="=&gt; BytecodeGenerator.this.Block">parent</a>.<a href="#293561" title="=&gt; Option[BytecodeGenerator.this.BlockList0]">parentBlockList</a>
        }
      }
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="()java.lang.String" id="293915">toString</a>() = {
        <span class="keyword">var</span> <a title="java.lang.String" id="293959">res</a> = <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>
        <a href="#293959" title="java.lang.String">res</a> = <a href="#293959" title="(x$1: Any)java.lang.String">res</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="#294504" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>.<a href="#293637" title="=&gt; java.lang.String">indent</a> + <span title="java.lang.String(&quot;BlockList:\012&quot;)" class="string">&quot;BlockList:\n&quot;</span>
        <a href="#293959" title="java.lang.String">res</a> = <a href="#293959" title="(x$1: Any)java.lang.String">res</a> + <span class="keyword">super</span>.<a href="#293601" title="()java.lang.String">toString</a>()
        <a href="#293959" title="java.lang.String">res</a>
      }
    }
    case <span class="keyword">class</span> <a title="class ExceptionBlock extends BytecodeGenerator.this.Block with ScalaObject with Product" id="294324">ExceptionBlock</a><span title="ScalaObject">(</span><a title="BytecodeGenerator.this.Block" id="302878">parent</a>: <a href="#287663" title="BytecodeGenerator.this.Block">Block</a>, <a title="GenMSIL.this.global.icodes.ExceptionHandler" id="302879">handler</a>: <a href="../icode/ExceptionHandlers.scala.html#46236" title="GenMSIL.this.global.icodes.ExceptionHandler">ExceptionHandler</a>) <span class="keyword">extends</span> <a href="#287663" title="BytecodeGenerator.this.Block">Block</a> {
      <span class="keyword">var</span> <a title="BytecodeGenerator.this.BlockList" id="293738">tryBlock</a>: <a href="#293985" title="BytecodeGenerator.this.BlockList">BlockList</a> = <span title="BytecodeGenerator.this.BlockList" class="keyword">new</span> <a href="#293985" title="BytecodeGenerator.this.BlockList">BlockList</a>(<a href="#294324" title="BytecodeGenerator.this.ExceptionBlock" class="keyword">this</a>)
      <span class="keyword">var</span> <a title="List[BytecodeGenerator.this.CatchBlock]" id="293741">catchBlocks</a>: <span title="List[BytecodeGenerator.this.CatchBlock]">List</span>[CatchBlock] = <span title="object Nil">Nil</span>
      <span class="keyword">var</span> <a title="BytecodeGenerator.this.BlockList" id="293744">finallyBlock</a>: <a href="#293985" title="BytecodeGenerator.this.BlockList">BlockList</a> = <span title="BytecodeGenerator.this.BlockList" class="keyword">new</span> <a href="#293985" title="BytecodeGenerator.this.BlockList">BlockList</a>(<a href="#294324" title="BytecodeGenerator.this.ExceptionBlock" class="keyword">this</a>)
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; GenMSIL.this.global.icodes.BasicBlock" id="293746">firstBasicBlock</a> = {
        <a href="#293738" title="=&gt; BytecodeGenerator.this.BlockList">tryBlock</a>.<a href="#293596" title="=&gt; GenMSIL.this.global.icodes.BasicBlock">firstBasicBlock</a>
      }
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; GenMSIL.this.global.icodes.BasicBlock" id="293747">lastBasicBlock</a> = {
        <span title="GenMSIL.this.global.icodes.BasicBlock" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="#293744" title="=&gt; BytecodeGenerator.this.BlockList">finallyBlock</a>.<a href="#293594" title="=&gt; List[BytecodeGenerator.this.Block]">blocks</a>.<span title="=&gt; Boolean">isEmpty</span>)
          <a href="#293744" title="=&gt; BytecodeGenerator.this.BlockList">finallyBlock</a>.<a href="#293597" title="=&gt; GenMSIL.this.global.icodes.BasicBlock">lastBasicBlock</a>
        <span class="keyword">else</span> <span title="GenMSIL.this.global.icodes.BasicBlock" class="keyword">if</span>(<span title="=&gt; Boolean">!</span><a href="#293741" title="=&gt; List[BytecodeGenerator.this.CatchBlock]">catchBlocks</a>.<span title="=&gt; Boolean">isEmpty</span>) {
          <span title="GenMSIL.this.global.icodes.BasicBlock" class="keyword">if</span> (<a href="#293559" title="=&gt; Boolean">closed</a>) <a href="#293741" title="=&gt; List[BytecodeGenerator.this.CatchBlock]">catchBlocks</a>.<span title="=&gt; BytecodeGenerator.this.CatchBlock">last</span>.<a href="#293597" title="=&gt; GenMSIL.this.global.icodes.BasicBlock">lastBasicBlock</a>
          <span class="keyword">else</span> <a href="#293741" title="=&gt; List[BytecodeGenerator.this.CatchBlock]">catchBlocks</a>.<span title="=&gt; BytecodeGenerator.this.CatchBlock">head</span>.<a href="#293597" title="=&gt; GenMSIL.this.global.icodes.BasicBlock">lastBasicBlock</a>
        } <span class="keyword">else</span> {
          <a href="#293738" title="=&gt; BytecodeGenerator.this.BlockList">tryBlock</a>.<a href="#293597" title="=&gt; GenMSIL.this.global.icodes.BasicBlock">lastBasicBlock</a>
        }
      }
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Option[BytecodeGenerator.this.BlockList0]" id="293748">parentBlockList</a>: <span title="Option[BytecodeGenerator.this.BlockList0]">Option</span>[BlockList0] = {
        <span title="Option[BytecodeGenerator.this.BlockList0]" class="keyword">if</span> (<a href="#302878" title="(x$1: AnyRef)Boolean">parent</a> == <a href="#294504" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>)
          <span title="(x: object BytecodeGenerator.this.TopBlock)Some[object BytecodeGenerator.this.TopBlock]">Some</span>(<a href="#294504" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>)
        <span class="keyword">else</span> <a href="#302878" title="=&gt; BytecodeGenerator.this.Block">parent</a> <span title="Option[BytecodeGenerator.this.BlockList0]" class="keyword">match</span> {
          <span title="Some[BytecodeGenerator.this.BlockList]" class="keyword">case</span> <a title="BytecodeGenerator.this.BlockList" id="294062">bl</a>: <a href="#293985" title="BytecodeGenerator.this.BlockList">BlockList</a> =&gt; <span title="(x: BytecodeGenerator.this.BlockList)Some[BytecodeGenerator.this.BlockList]">Some</span>(<a href="#294062" title="BytecodeGenerator.this.BlockList">bl</a>)
          <span title="Some[BytecodeGenerator.this.CatchBlock]" class="keyword">case</span> <a title="BytecodeGenerator.this.CatchBlock" id="294068">cb</a>: <a href="#294418" title="BytecodeGenerator.this.CatchBlock">CatchBlock</a> =&gt; <span title="(x: BytecodeGenerator.this.CatchBlock)Some[BytecodeGenerator.this.CatchBlock]">Some</span>(<a href="#294068" title="BytecodeGenerator.this.CatchBlock">cb</a>)
          <span title="Option[BytecodeGenerator.this.BlockList0]" class="keyword">case</span> _ =&gt; <a href="#302878" title="=&gt; BytecodeGenerator.this.Block">parent</a>.<a href="#293561" title="=&gt; Option[BytecodeGenerator.this.BlockList0]">parentBlockList</a>
        }
      }
/*      override def getExceptionBlock(exh: ExceptionHandler): Option[ExceptionBlock] = {
        if (exh == handler) Some(this)
        else {
          val t = if (tryBlock == null) Nil else List(tryBlock)
          val f = if (finallyBlock == null) Nil else List(finallyBlock)
          findExceptionBlock(t ::: catchBlocks ::: f, exh)
        }
      }
*/
      <span class="keyword">def</span> <a title="(exSym: GenMSIL.this.global.Symbol)BytecodeGenerator.this.CatchBlock" id="293749">addCatchBlock</a>(<a title="GenMSIL.this.global.Symbol" id="294074">exSym</a>: <a href="../../symtab/Symbols.scala.html#26127" title="GenMSIL.this.global.Symbol">Symbol</a>): <a href="#294418" title="BytecodeGenerator.this.CatchBlock">CatchBlock</a> = {
        <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37759" title="=&gt; Boolean">value</a>)
          <a href="../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;new catch block with &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#294074" title="GenMSIL.this.global.Symbol">exSym</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; to &quot;)" class="string">&quot; to &quot;</span> + <a href="#294324" title="BytecodeGenerator.this.ExceptionBlock" class="keyword">this</a>)
        <span class="keyword">val</span> <a title="BytecodeGenerator.this.CatchBlock" id="294076">c</a> = <span title="BytecodeGenerator.this.CatchBlock" class="keyword">new</span> <a href="#294418" title="BytecodeGenerator.this.CatchBlock">CatchBlock</a>(<a href="#294324" title="BytecodeGenerator.this.ExceptionBlock" class="keyword">this</a>, <a href="#294074" title="GenMSIL.this.global.Symbol">exSym</a>)
        <a href="#293741" title="(x$1: List[BytecodeGenerator.this.CatchBlock])Unit">catchBlocks</a> = <a href="#294076" title="BytecodeGenerator.this.CatchBlock">c</a> <a href="#294091" title="BytecodeGenerator.this.CatchBlock">::</a> <a href="#293741" title="(x: BytecodeGenerator.this.CatchBlock)List[BytecodeGenerator.this.CatchBlock]">catchBlocks</a>
        <a href="#294076" title="BytecodeGenerator.this.CatchBlock">c</a>
      }
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="293750">close</a>() {
        <a href="#293738" title="=&gt; BytecodeGenerator.this.BlockList">tryBlock</a>.<a href="#293600" title="()Unit">close</a>
        <a href="#293741" title="=&gt; List[BytecodeGenerator.this.CatchBlock]">catchBlocks</a>.<span title="(f: (BytecodeGenerator.this.CatchBlock) =&gt; Unit)Unit">foreach</span>(<a href="#294122" title="BytecodeGenerator.this.CatchBlock">_</a>.<a href="#293600" title="()Unit">close</a>)
        <a href="#293741" title="(x$1: List[BytecodeGenerator.this.CatchBlock])Unit">catchBlocks</a> = <a href="#293741" title="=&gt; List[BytecodeGenerator.this.CatchBlock]">catchBlocks</a>.<span title="=&gt; List[BytecodeGenerator.this.CatchBlock]">reverse</span>
        <a href="#293744" title="=&gt; BytecodeGenerator.this.BlockList">finallyBlock</a>.<a href="#293600" title="()Unit">close</a>
        <a href="#293559" title="(x$1: Boolean)Unit">closed</a> = <span title="Boolean(true)" class="keyword">true</span>
      }
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="()java.lang.String" id="293751">toString</a>() = {
        <span class="keyword">var</span> <a title="java.lang.String" id="294138">res</a> = <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>
        <a href="#294138" title="java.lang.String">res</a> = <a href="#294138" title="(x$1: Any)java.lang.String">res</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="#294504" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>.<a href="#293637" title="=&gt; java.lang.String">indent</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;ExceptionBlock, handler: &quot;)" class="string">&quot;ExceptionBlock, handler: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#302879" title="=&gt; GenMSIL.this.global.icodes.ExceptionHandler">handler</a> + <span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span>
        <a href="#294138" title="java.lang.String">res</a> = <a href="#294138" title="(x$1: Any)java.lang.String">res</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="#294504" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>.<a href="#293637" title="=&gt; java.lang.String">indent</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;  &quot;)" class="string">&quot;  &quot;</span> + <span title="java.lang.String(&quot;try:\012&quot;)" class="string">&quot;try:\n&quot;</span>
        <a href="#294504" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>.<a href="#293637" title="(x$1: java.lang.String)Unit">indent</a> = <a href="#294504" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>.<a href="#293637" title="(x$1: Any)java.lang.String">indent</a> + <span title="java.lang.String(&quot;    &quot;)" class="string">&quot;    &quot;</span>
        <a href="#294138" title="java.lang.String">res</a> = <a href="#294138" title="(x$1: Any)java.lang.String">res</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="#293738" title="=&gt; BytecodeGenerator.this.BlockList">tryBlock</a> + <span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span>
        <a href="#294504" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>.<a href="#293637" title="(x$1: java.lang.String)Unit">indent</a> = <a href="#294504" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>.<a href="#293637" title="=&gt; java.lang.String">indent</a>.<span title="(x$1: Int,x$2: Int)java.lang.String">substring</span>(<span title="Int(0)" class="int">0</span>,<a href="#294504" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>.<a href="#293637" title="=&gt; java.lang.String">indent</a>.<span title="(x$1: Int)Int">length</span>-<span title="Int(4)" class="int">4</span>)
        <a href="#294138" title="java.lang.String">res</a> = <a href="#294138" title="(x$1: Any)java.lang.String">res</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="#294504" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>.<a href="#293637" title="=&gt; java.lang.String">indent</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;  &quot;)" class="string">&quot;  &quot;</span> + <span title="java.lang.String(&quot;catch:\012&quot;)" class="string">&quot;catch:\n&quot;</span>
        <a href="#294504" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>.<a href="#293637" title="(x$1: java.lang.String)Unit">indent</a> = <a href="#294504" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>.<a href="#293637" title="(x$1: Any)java.lang.String">indent</a> + <span title="java.lang.String(&quot;    &quot;)" class="string">&quot;    &quot;</span>
        <span class="keyword">for</span> (<a title="BytecodeGenerator.this.CatchBlock" id="294219">b</a> &lt;- <a href="#293741" title="(f: (BytecodeGenerator.this.CatchBlock) =&gt; Unit)Unit">catchBlocks</a>)
          <a href="#294138" title="java.lang.String">res</a> = <a href="#294138" title="(x$1: Any)java.lang.String">res</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="#294219" title="BytecodeGenerator.this.CatchBlock">b</a> + <span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span>
        <a href="#294504" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>.<a href="#293637" title="(x$1: java.lang.String)Unit">indent</a> = <a href="#294504" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>.<a href="#293637" title="=&gt; java.lang.String">indent</a>.<span title="(x$1: Int,x$2: Int)java.lang.String">substring</span>(<span title="Int(0)" class="int">0</span>,<a href="#294504" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>.<a href="#293637" title="=&gt; java.lang.String">indent</a>.<span title="(x$1: Int)Int">length</span>-<span title="Int(4)" class="int">4</span>)
        <a href="#294138" title="java.lang.String">res</a> = <a href="#294138" title="(x$1: Any)java.lang.String">res</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="#294504" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>.<a href="#293637" title="=&gt; java.lang.String">indent</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;  &quot;)" class="string">&quot;  &quot;</span> + <span title="java.lang.String(&quot;finally:\012&quot;)" class="string">&quot;finally:\n&quot;</span>
        <a href="#294504" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>.<a href="#293637" title="(x$1: java.lang.String)Unit">indent</a> = <a href="#294504" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>.<a href="#293637" title="(x$1: Any)java.lang.String">indent</a> + <span title="java.lang.String(&quot;    &quot;)" class="string">&quot;    &quot;</span>
        <a href="#294138" title="java.lang.String">res</a> = <a href="#294138" title="(x$1: Any)java.lang.String">res</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="#293744" title="=&gt; BytecodeGenerator.this.BlockList">finallyBlock</a> + <span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span>
        <a href="#294504" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>.<a href="#293637" title="(x$1: java.lang.String)Unit">indent</a> = <a href="#294504" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>.<a href="#293637" title="=&gt; java.lang.String">indent</a>.<span title="(x$1: Int,x$2: Int)java.lang.String">substring</span>(<span title="Int(0)" class="int">0</span>,<a href="#294504" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>.<a href="#293637" title="=&gt; java.lang.String">indent</a>.<span title="(x$1: Int)Int">length</span>-<span title="Int(4)" class="int">4</span>)
        <a href="#294138" title="java.lang.String">res</a>
      }
    }
    case <span class="keyword">class</span> <a title="class CatchBlock extends BytecodeGenerator.this.BlockList0 with ScalaObject with Product" id="294418">CatchBlock</a><span title="ScalaObject">(</span><a title="BytecodeGenerator.this.ExceptionBlock" id="302868">parent</a>: <a href="#294324" title="BytecodeGenerator.this.ExceptionBlock">ExceptionBlock</a>, <a title="GenMSIL.this.global.Symbol" id="302869">exSym</a>: <a href="../../symtab/Symbols.scala.html#26127" title="GenMSIL.this.global.Symbol">Symbol</a>) <span class="keyword">extends</span> <a href="#287667" title="BytecodeGenerator.this.BlockList0">BlockList0</a> {
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Option[BytecodeGenerator.this.BlockList0]" id="293949">parentBlockList</a>: <span title="Option[BytecodeGenerator.this.BlockList0]">Option</span>[BlockList0] = {
        <a href="#302868" title="=&gt; BytecodeGenerator.this.ExceptionBlock">parent</a>.<a href="#293748" title="=&gt; Option[BytecodeGenerator.this.BlockList0]">parentBlockList</a>
      }
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="()java.lang.String" id="293950">toString</a>() = {
        <span class="keyword">var</span> <a title="java.lang.String" id="294387">res</a> = <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>
        <a href="#294387" title="java.lang.String">res</a> = <a href="#294387" title="(x$1: Any)java.lang.String">res</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="#294504" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>.<a href="#293637" title="=&gt; java.lang.String">indent</a> + <span title="java.lang.String(&quot;CatchBlock:\012&quot;)" class="string">&quot;CatchBlock:\n&quot;</span>
        <a href="#294387" title="java.lang.String">res</a> = <a href="#294387" title="(x$1: Any)java.lang.String">res</a> + <span class="keyword">super</span>.<a href="#293601" title="()java.lang.String">toString</a>()
        <a href="#294387" title="java.lang.String">res</a>
      }
    }
    case <span class="keyword">object</span> <a href="#294493" title="object BytecodeGenerator.this.TopBlock" id="294504">TopBlock</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#287667" title="BytecodeGenerator.this.BlockList0">BlockList0</a> {
      <span class="keyword">var</span> <a title="java.lang.String" id="293637">indent</a> = <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; object None" id="293639">parentBlockList</a> = <span title="object None">None</span>
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="()java.lang.String" id="293640">toString</a>() = {
        <span class="keyword">var</span> <a title="java.lang.String" id="294480">res</a> = <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>
        <a href="#294480" title="java.lang.String">res</a> = <a href="#294480" title="(x$1: Any)java.lang.String">res</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="#294504" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>.<a href="#293637" title="=&gt; java.lang.String">indent</a> + <span title="java.lang.String(&quot;TopBlock:\012&quot;)" class="string">&quot;TopBlock:\n&quot;</span>
        <a href="#294480" title="java.lang.String">res</a> = <a href="#294480" title="(x$1: Any)java.lang.String">res</a> + <span class="keyword">super</span>.<a href="#293601" title="()java.lang.String">toString</a>()
        <a href="#294480" title="java.lang.String">res</a>
      }
    }

    // for every basic block, a list of ExHInstructions to be executed:
    //   - Begin_ are executed before the block
    //   - EndExceptionBlock is executed after the block
    <span class="keyword">val</span> <a title="scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.BasicBlock,List[BytecodeGenerator.this.ExHInstruction]]" id="287679">bb2exHInstructions</a>: <span title="scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.BasicBlock,List[BytecodeGenerator.this.ExHInstruction]]">HashMap</span>[BasicBlock, List[ExHInstruction]] = <span title="scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.BasicBlock,List[BytecodeGenerator.this.ExHInstruction]]" class="keyword">new</span> <span title="scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.BasicBlock,List[BytecodeGenerator.this.ExHInstruction]]">HashMap</span>()
    // at the end of a try, catch or finally block, the jumps must not be emitted,
    // the automatically generated leave (or endfinally) will do the job.
    <span class="keyword">val</span> <a title="scala.collection.mutable.HashSet[GenMSIL.this.global.icodes.BasicBlock]" id="287681">omitJumpBlocks</a>: <span title="scala.collection.mutable.HashSet[GenMSIL.this.global.icodes.BasicBlock]">HashSet</span>[BasicBlock] = <span title="scala.collection.mutable.HashSet[GenMSIL.this.global.icodes.BasicBlock]" class="keyword">new</span> <span title="scala.collection.mutable.HashSet[GenMSIL.this.global.icodes.BasicBlock]">HashSet</span>()

    // suposes that finalizers are the same for different handlers
    // covering the same blocks
    <span class="keyword">def</span> <a title="(blocks: List[GenMSIL.this.global.icodes.BasicBlock],exH: List[GenMSIL.this.global.icodes.ExceptionHandler])List[GenMSIL.this.global.icodes.BasicBlock]" id="287683">orderBlocksForExh</a>(<a title="List[GenMSIL.this.global.icodes.BasicBlock]" id="293239">blocks</a>: <span title="List[GenMSIL.this.global.icodes.BasicBlock]">List</span>[BasicBlock], <a title="List[GenMSIL.this.global.icodes.ExceptionHandler]" id="293240">exH</a>: <span title="List[GenMSIL.this.global.icodes.ExceptionHandler]">List</span>[ExceptionHandler]): <span title="List[GenMSIL.this.global.icodes.BasicBlock]">List</span>[BasicBlock] = {

      <span class="keyword">var</span> <a title="List[GenMSIL.this.global.icodes.BasicBlock]" id="294512">blocksToPut</a>: <span title="List[GenMSIL.this.global.icodes.BasicBlock]">List</span>[BasicBlock] = <a href="#293239" title="List[GenMSIL.this.global.icodes.BasicBlock]">blocks</a>
      <span class="keyword">var</span> <a title="GenMSIL.this.global.icodes.BasicBlock" id="294513">nextBlock</a>: <a href="../icode/BasicBlocks.scala.html#46178" title="GenMSIL.this.global.icodes.BasicBlock">BasicBlock</a> = <span title="Null(null)" class="keyword">null</span>
      <span class="keyword">var</span> <a title="List[GenMSIL.this.global.icodes.ExceptionHandler]" id="294514">untreatedHandlers</a>: <span title="List[GenMSIL.this.global.icodes.ExceptionHandler]">List</span>[ExceptionHandler] = <a href="#293240" title="List[GenMSIL.this.global.icodes.ExceptionHandler]">exH</a>
      <a href="#294504" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>.<a href="#293594" title="(x$1: List[BytecodeGenerator.this.Block])Unit">blocks</a> = <span title="object Nil">Nil</span>
      <span class="keyword">var</span> <a title="BytecodeGenerator.this.BlockList0" id="294515">currentBlock</a>: <a href="#287667" title="BytecodeGenerator.this.BlockList0">BlockList0</a> = <a href="#294504" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>
      <span class="keyword">def</span> <a title="(b: List[GenMSIL.this.global.icodes.BasicBlock])Unit" id="294516">addBlocks</a>(<a title="List[GenMSIL.this.global.icodes.BasicBlock]" id="294523">b</a>: <span title="List[GenMSIL.this.global.icodes.BasicBlock]">List</span>[BasicBlock]):<span title="Unit">Unit</span> = <a href="#294523" title="List[GenMSIL.this.global.icodes.BasicBlock]">b</a> <span title="Unit" class="keyword">match</span> {
        <span title="Unit" class="keyword">case</span> <span title="object Nil">Nil</span> =&gt; <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37759" title="=&gt; Boolean">value</a>) <a href="../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;adding &quot;</span> + <a href="#294523" title="List[GenMSIL.this.global.icodes.BasicBlock]">b</a>)

        <span title="Unit" class="keyword">case</span> <a title="GenMSIL.this.global.icodes.BasicBlock" id="294534">x</a> :: <a title="List[GenMSIL.this.global.icodes.BasicBlock]" id="294535">xs</a> =&gt;
          <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37759" title="=&gt; Boolean">value</a>) <a href="../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;adding &quot;</span> + <a href="#294523" title="List[GenMSIL.this.global.icodes.BasicBlock]">b</a>)
          // problem: block may already be added, and and needs to be moved.
          // if nextblock NOT in b: check if nextblock in blocksToPut, if NOT, check if movable, else don't put
          <span title="Unit" class="keyword">if</span> (<a href="#294513" title="(x$1: AnyRef)Boolean">nextBlock</a> <span title="(x$1: Boolean)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span> &amp;&amp; <a href="#294523" title="List[GenMSIL.this.global.icodes.BasicBlock]">b</a>.<span title="(elem: Any)Boolean">contains</span>(<a href="#294513" title="GenMSIL.this.global.icodes.BasicBlock">nextBlock</a>)) {
            <span class="keyword">val</span> <a title="List[GenMSIL.this.global.icodes.BasicBlock]" id="294555">blocksToAdd</a> = <a href="#294513" title="GenMSIL.this.global.icodes.BasicBlock">nextBlock</a> <a href="#294556" title="GenMSIL.this.global.icodes.BasicBlock">::</a> <span title="(x: GenMSIL.this.global.icodes.BasicBlock)List[GenMSIL.this.global.icodes.BasicBlock]">(</span><a href="#294523" title="(x: GenMSIL.this.global.icodes.BasicBlock)List[GenMSIL.this.global.icodes.BasicBlock]">b</a> - <a href="#294513" title="GenMSIL.this.global.icodes.BasicBlock">nextBlock</a>)
            <a href="#294513" title="GenMSIL.this.global.icodes.BasicBlock">nextBlock</a> = <span title="Null(null)" class="keyword">null</span>
            <a href="#294516" title="(b: List[GenMSIL.this.global.icodes.BasicBlock])Unit">addBlocks</a>(<a href="#294555" title="List[GenMSIL.this.global.icodes.BasicBlock]">blocksToAdd</a>)
          }
          <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<a href="#294514" title="List[GenMSIL.this.global.icodes.ExceptionHandler]">untreatedHandlers</a>.<span title="(p: (GenMSIL.this.global.icodes.ExceptionHandler) =&gt; Boolean)Boolean">forall</span>(<a title="GenMSIL.this.global.icodes.ExceptionHandler" id="294578">h</a> =&gt; <span title="=&gt; Boolean">!</span>(<a href="#294578" title="GenMSIL.this.global.icodes.ExceptionHandler">h</a>.<a href="../icode/ExceptionHandlers.scala.html#61450" title="(b: GenMSIL.this.global.icodes.BasicBlock)Boolean">covers</a>(<a href="#294534" title="GenMSIL.this.global.icodes.BasicBlock">x</a>)))) {

            <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37759" title="=&gt; Boolean">value</a>) <a href="../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot; no new handler for &quot;</span> + <a href="#294534" title="GenMSIL.this.global.icodes.BasicBlock">x</a>)
            <span title="Unit" class="keyword">if</span> (<a href="#294514" title="List[GenMSIL.this.global.icodes.ExceptionHandler]">untreatedHandlers</a>.<span title="(p: (GenMSIL.this.global.icodes.ExceptionHandler) =&gt; Boolean)Boolean">forall</span>(<a title="GenMSIL.this.global.icodes.ExceptionHandler" id="294597">h</a> =&gt; <span title="=&gt; Boolean">!</span>(<a href="#294597" title="GenMSIL.this.global.icodes.ExceptionHandler">h</a>.<a href="../icode/ExceptionHandlers.scala.html#61451" title="=&gt; List[GenMSIL.this.global.icodes.BasicBlock]">blocks</a>.<span title="(elem: Any)Boolean">contains</span><span title="(x$1: Boolean)Boolean">(</span><a href="#294534" title="GenMSIL.this.global.icodes.BasicBlock">x</a>) ||
                                                (<a href="#294597" title="GenMSIL.this.global.icodes.ExceptionHandler">h</a>.<a href="../icode/ExceptionHandlers.scala.html#61438" title="(x$1: AnyRef)Boolean">finalizer</a> <span title="(x$1: Boolean)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span> &amp;&amp;
                                                 <a href="#294597" title="GenMSIL.this.global.icodes.ExceptionHandler">h</a>.<a href="../icode/ExceptionHandlers.scala.html#61438" title="=&gt; GenMSIL.this.global.icodes.Finalizer">finalizer</a>.<a href="../icode/ExceptionHandlers.scala.html#61450" title="(b: GenMSIL.this.global.icodes.BasicBlock)Boolean">covers</a>(<a href="#294534" title="GenMSIL.this.global.icodes.BasicBlock">x</a>)))))
              {
                // the block is not part of some catch or finally code
                <a href="#294515" title="BytecodeGenerator.this.BlockList0">currentBlock</a>.<a href="#293599" title="(bb: GenMSIL.this.global.icodes.BasicBlock)Unit">addBasicBlock</a>(<a href="#294534" title="GenMSIL.this.global.icodes.BasicBlock">x</a>)
                <a href="#294512" title="List[GenMSIL.this.global.icodes.BasicBlock]">blocksToPut</a> = <a href="#294512" title="(x: GenMSIL.this.global.icodes.BasicBlock)List[GenMSIL.this.global.icodes.BasicBlock]">blocksToPut</a> - <a href="#294534" title="GenMSIL.this.global.icodes.BasicBlock">x</a>
                <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37759" title="=&gt; Boolean">value</a>) <a href="../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot; -&gt; addBlocks(&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#294535" title="List[GenMSIL.this.global.icodes.BasicBlock]">xs</a> + <span title="java.lang.String(&quot;)&quot;)" class="string">&quot;)&quot;</span>)
                <a href="#294516" title="(b: List[GenMSIL.this.global.icodes.BasicBlock])Unit">addBlocks</a>(<a href="#294535" title="List[GenMSIL.this.global.icodes.BasicBlock]">xs</a>)
              } <span class="keyword">else</span> {
                <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37759" title="=&gt; Boolean">value</a>) <a href="../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="java.lang.String(&quot;x is part of catch or finally block&quot;)" class="string">&quot;x is part of catch or finally block&quot;</span>)

                // check if the covered code of the handler x belongs to is empty
                // this check is not needed for finalizers: empty try with finalizer
                // is optimized by compiler (no try left)
                <span title="Unit" class="keyword">if</span>(<a href="#294514" title="List[GenMSIL.this.global.icodes.ExceptionHandler]">untreatedHandlers</a>.<span title="(p: (GenMSIL.this.global.icodes.ExceptionHandler) =&gt; Boolean)Boolean">forall</span>(<a title="GenMSIL.this.global.icodes.ExceptionHandler" id="294644">h</a> =&gt;
                  (<span title="(x$1: Boolean)Boolean">!</span><a href="#294644" title="GenMSIL.this.global.icodes.ExceptionHandler">h</a>.<a href="../icode/ExceptionHandlers.scala.html#61451" title="=&gt; List[GenMSIL.this.global.icodes.BasicBlock]">blocks</a>.<span title="(elem: Any)Boolean">contains</span>(<a href="#294534" title="GenMSIL.this.global.icodes.BasicBlock">x</a>) || <a href="#294644" title="GenMSIL.this.global.icodes.ExceptionHandler">h</a>.<a href="../icode/ExceptionHandlers.scala.html#61446" title="=&gt; scala.collection.immutable.Set[GenMSIL.this.global.icodes.BasicBlock]">covered</a>.<span title="=&gt; Boolean">isEmpty</span>))) {
                    <a href="#294512" title="List[GenMSIL.this.global.icodes.BasicBlock]">blocksToPut</a> = <a href="#294512" title="(x: GenMSIL.this.global.icodes.BasicBlock)List[GenMSIL.this.global.icodes.BasicBlock]">blocksToPut</a> - <a href="#294534" title="GenMSIL.this.global.icodes.BasicBlock">x</a>
                    <a href="#294516" title="(b: List[GenMSIL.this.global.icodes.BasicBlock])Unit">addBlocks</a>(<a href="#294535" title="List[GenMSIL.this.global.icodes.BasicBlock]">xs</a>)
                  } <span class="keyword">else</span>
                    <a href="#294516" title="(b: List[GenMSIL.this.global.icodes.BasicBlock])Unit">addBlocks</a>(<a href="#294535" title="List[GenMSIL.this.global.icodes.BasicBlock]">xs</a> <a href="#294661" title="List[GenMSIL.this.global.icodes.BasicBlock]">:::</a> <span title="(xs: GenMSIL.this.global.icodes.BasicBlock*)List[GenMSIL.this.global.icodes.BasicBlock]">List</span><span title="(prefix: List[GenMSIL.this.global.icodes.BasicBlock])List[GenMSIL.this.global.icodes.BasicBlock]">(</span><a href="#294534" title="GenMSIL.this.global.icodes.BasicBlock">x</a>))
              }
          } <span class="keyword">else</span> { // there are new handlers for this block

            <span class="keyword">var</span> <a title="scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.ExceptionHandler,GenMSIL.this.global.icodes.BasicBlock]" id="294680">firstBlockAfter</a>: <span title="scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.ExceptionHandler,GenMSIL.this.global.icodes.BasicBlock]">HashMap</span>[ExceptionHandler,BasicBlock] = <span title="scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.ExceptionHandler,GenMSIL.this.global.icodes.BasicBlock]" class="keyword">new</span> <span title="scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.ExceptionHandler,GenMSIL.this.global.icodes.BasicBlock]">HashMap</span>()
            <span class="keyword">val</span> <a title="BytecodeGenerator.this.BlockList0" id="294681">savedCurrentBlock</a> = <a href="#294515" title="BytecodeGenerator.this.BlockList0">currentBlock</a>
            /**
             * the output blocks of this method are changed so that:
             *  - only one block has a successor outside the set of blocks
             *  - this block is the last of the reusulting list
             *
             * side-effect: it stores the successor in the hashMap
             *  firstBlockAfter, which has to be emitted first after try/catch/finally,
             *  because the target of the Leave-instruction will always be the first
             *  instruction after EndExceptionBlock
             *
             * returns: the output blocks plus an Option containing the possibly created
             * new block
             **/
            <span class="keyword">def</span> <a title="(blocks: List[GenMSIL.this.global.icodes.BasicBlock],exh: GenMSIL.this.global.icodes.ExceptionHandler)(List[GenMSIL.this.global.icodes.BasicBlock], Option[GenMSIL.this.global.icodes.BasicBlock])" id="294682">adaptBlocks</a>(<a title="List[GenMSIL.this.global.icodes.BasicBlock]" id="294690">blocks</a>: <span title="List[GenMSIL.this.global.icodes.BasicBlock]">List</span>[BasicBlock], <a title="GenMSIL.this.global.icodes.ExceptionHandler" id="294691">exh</a>: <a href="../icode/ExceptionHandlers.scala.html#46236" title="GenMSIL.this.global.icodes.ExceptionHandler">ExceptionHandler</a>): <span title="(List[GenMSIL.this.global.icodes.BasicBlock], Option[GenMSIL.this.global.icodes.BasicBlock])">(</span>List[BasicBlock], Option[BasicBlock]) = {
              <span class="keyword">def</span> <a title="(block: GenMSIL.this.global.icodes.BasicBlock,blocks: List[GenMSIL.this.global.icodes.BasicBlock])List[GenMSIL.this.global.icodes.BasicBlock]" id="294692">outsideTargets</a>(<a title="GenMSIL.this.global.icodes.BasicBlock" id="294696">block</a>: <a href="../icode/BasicBlocks.scala.html#46178" title="GenMSIL.this.global.icodes.BasicBlock">BasicBlock</a>, <a title="List[GenMSIL.this.global.icodes.BasicBlock]" id="294697">blocks</a>: <span title="List[GenMSIL.this.global.icodes.BasicBlock]">List</span>[BasicBlock]) = {
                /* The catch block of the ExceptionHandler is always a successor of any block inside the try
                 * (see successors method in BasicBlocks.scala)
                 * Thus, this successor does not correspond to a jump outside the exception handler
                 * and has to be ignored when computing the list of blocks leaving the exception handler.  */
                <span class="keyword">val</span> <a title="List[GenMSIL.this.global.icodes.BasicBlock]" id="294698">res</a> = <a href="#294696" title="GenMSIL.this.global.icodes.BasicBlock">block</a>.<a href="../icode/BasicBlocks.scala.html#61344" title="=&gt; List[GenMSIL.this.global.icodes.BasicBlock]">successors</a>.<span title="(p: (GenMSIL.this.global.icodes.BasicBlock) =&gt; Boolean)List[GenMSIL.this.global.icodes.BasicBlock]">filter</span>(<a title="GenMSIL.this.global.icodes.BasicBlock" id="294701">scc</a> =&gt; <span title="(x$1: Boolean)Boolean">!</span><a href="#294697" title="List[GenMSIL.this.global.icodes.BasicBlock]">blocks</a>.<span title="(elem: Any)Boolean">contains</span>(<a href="#294701" title="GenMSIL.this.global.icodes.BasicBlock">scc</a>) &amp;&amp; <a href="#294701" title="(x$1: AnyRef)Boolean">scc</a> != <a href="#294691" title="GenMSIL.this.global.icodes.ExceptionHandler">exh</a>.<a href="../icode/ExceptionHandlers.scala.html#61445" title="=&gt; GenMSIL.this.global.icodes.BasicBlock">startBlock</a>)
                <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37759" title="=&gt; Boolean">value</a>) <a href="../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;outside of &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#294696" title="GenMSIL.this.global.icodes.BasicBlock">block</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; = &quot;)" class="string">&quot; = &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#294698" title="List[GenMSIL.this.global.icodes.BasicBlock]">res</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; succ &quot;)" class="string">&quot; succ &quot;</span> + <a href="#294696" title="GenMSIL.this.global.icodes.BasicBlock">block</a>.<a href="../icode/BasicBlocks.scala.html#61344" title="=&gt; List[GenMSIL.this.global.icodes.BasicBlock]">successors</a>)
                <a href="#294698" title="List[GenMSIL.this.global.icodes.BasicBlock]">res</a>
              }
              // get leaving blocks and their outside targets
              <span class="keyword">def</span> <a title="(blocks: List[GenMSIL.this.global.icodes.BasicBlock])List[(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])]" id="294693">leavingBlocks</a>(<a title="List[GenMSIL.this.global.icodes.BasicBlock]" id="294728">blocks</a>: <span title="List[GenMSIL.this.global.icodes.BasicBlock]">List</span>[BasicBlock]): <span title="List[(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])]">List</span>[(BasicBlock, List[BasicBlock])] = {
                <span class="keyword">for</span> {<a title="GenMSIL.this.global.icodes.BasicBlock" id="294861">b</a> &lt;- <a href="#294728" title="(f: (GenMSIL.this.global.icodes.BasicBlock) =&gt; (GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock]))(implicit bf: scala.collection.generic.BuilderFactory[(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock]),List[(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])],List[GenMSIL.this.global.icodes.BasicBlock]])List[(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])]">blocks</a>
                     <span class="keyword">val</span> <a title="List[GenMSIL.this.global.icodes.BasicBlock]" id="294862">t</a> = <a href="#294692" title="(block: GenMSIL.this.global.icodes.BasicBlock,blocks: List[GenMSIL.this.global.icodes.BasicBlock])List[GenMSIL.this.global.icodes.BasicBlock]">outsideTargets</a>(<a href="#294861" title="GenMSIL.this.global.icodes.BasicBlock">b</a>, <a href="#294728" title="List[GenMSIL.this.global.icodes.BasicBlock]">blocks</a>)
                     <span class="keyword">if</span> <a href="#294862" title="List[GenMSIL.this.global.icodes.BasicBlock]">t</a>.<span title="(x$1: Int)Boolean">length</span> != <span title="Int(0)" class="int">0</span> } <span class="keyword">yield</span> <span title="(_1: GenMSIL.this.global.icodes.BasicBlock,_2: List[GenMSIL.this.global.icodes.BasicBlock])(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])">(</span><a href="#294861" title="GenMSIL.this.global.icodes.BasicBlock">b</a>, <a href="#294862" title="List[GenMSIL.this.global.icodes.BasicBlock]">t</a>)
              }

              <span class="keyword">def</span> <a title="(blocks: List[GenMSIL.this.global.icodes.BasicBlock],leaving: List[(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])],exh: GenMSIL.this.global.icodes.ExceptionHandler)(List[GenMSIL.this.global.icodes.BasicBlock], Option[GenMSIL.this.global.icodes.BasicBlock])" id="294694">replaceOutJumps</a>(<a title="List[GenMSIL.this.global.icodes.BasicBlock]" id="294899">blocks</a>: <span title="List[GenMSIL.this.global.icodes.BasicBlock]">List</span>[BasicBlock], <a title="List[(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])]" id="294900">leaving</a>: <span title="List[(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])]">List</span>[(BasicBlock, List[BasicBlock])], <a title="GenMSIL.this.global.icodes.ExceptionHandler" id="294901">exh</a>: <a href="../icode/ExceptionHandlers.scala.html#46236" title="GenMSIL.this.global.icodes.ExceptionHandler">ExceptionHandler</a>): <span title="(List[GenMSIL.this.global.icodes.BasicBlock], Option[GenMSIL.this.global.icodes.BasicBlock])">(</span>List[BasicBlock], Option[BasicBlock]) = {
                <span class="keyword">def</span> <a title="(block: GenMSIL.this.global.icodes.BasicBlock,from: GenMSIL.this.global.icodes.BasicBlock,to: GenMSIL.this.global.icodes.BasicBlock)AnyVal" id="294902">replaceJump</a>(<a title="GenMSIL.this.global.icodes.BasicBlock" id="294904">block</a>: <a href="../icode/BasicBlocks.scala.html#46178" title="GenMSIL.this.global.icodes.BasicBlock">BasicBlock</a>, <a title="GenMSIL.this.global.icodes.BasicBlock" id="294905">from</a>: <a href="../icode/BasicBlocks.scala.html#46178" title="GenMSIL.this.global.icodes.BasicBlock">BasicBlock</a>, <a title="GenMSIL.this.global.icodes.BasicBlock" id="294906">to</a>: <a href="../icode/BasicBlocks.scala.html#46178" title="GenMSIL.this.global.icodes.BasicBlock">BasicBlock</a>) = <a href="#294904" title="GenMSIL.this.global.icodes.BasicBlock">block</a>.<a href="../icode/BasicBlocks.scala.html#61341" title="=&gt; GenMSIL.this.global.icodes.Instruction">lastInstruction</a> <span title="AnyVal" class="keyword">match</span> {
                  <span title="Boolean" class="keyword">case</span> JUMP(<a title="GenMSIL.this.global.icodes.BasicBlock" id="294908">whereto</a>) =&gt;
                    //assert(from == whereto)
                    <a href="#294904" title="GenMSIL.this.global.icodes.BasicBlock">block</a>.<a href="../icode/BasicBlocks.scala.html#61325" title="(oldInstr: GenMSIL.this.global.icodes.Instruction,newInstr: GenMSIL.this.global.icodes.Instruction)Boolean">replaceInstruction</a>(<a href="#294904" title="GenMSIL.this.global.icodes.BasicBlock">block</a>.<a href="../icode/BasicBlocks.scala.html#61341" title="=&gt; GenMSIL.this.global.icodes.Instruction">lastInstruction</a>, <a href="../icode/Opcodes.scala.html#63806" title="(whereto: GenMSIL.this.global.icodes.BasicBlock)GenMSIL.this.global.icodes.opcodes.JUMP">JUMP</a>(<a href="#294906" title="GenMSIL.this.global.icodes.BasicBlock">to</a>))
                  <span title="AnyVal" class="keyword">case</span> CJUMP(<a title="GenMSIL.this.global.icodes.BasicBlock" id="294946">success</a>, <a title="GenMSIL.this.global.icodes.BasicBlock" id="294947">failure</a>, <a title="GenMSIL.this.global.icodes.TestOp" id="294948">cond</a>, <a title="GenMSIL.this.global.icodes.TypeKind" id="294949">kind</a>) =&gt;
                    <span title="AnyVal" class="keyword">if</span> (<a href="#294905" title="(x$1: AnyRef)Boolean">from</a> == <a href="#294946" title="GenMSIL.this.global.icodes.BasicBlock">success</a>)
                      <a href="#294904" title="GenMSIL.this.global.icodes.BasicBlock">block</a>.<a href="../icode/BasicBlocks.scala.html#61325" title="(oldInstr: GenMSIL.this.global.icodes.Instruction,newInstr: GenMSIL.this.global.icodes.Instruction)Boolean">replaceInstruction</a>(<a href="#294904" title="GenMSIL.this.global.icodes.BasicBlock">block</a>.<a href="../icode/BasicBlocks.scala.html#61341" title="=&gt; GenMSIL.this.global.icodes.Instruction">lastInstruction</a>, <a href="../icode/Opcodes.scala.html#63830" title="(successBlock: GenMSIL.this.global.icodes.BasicBlock,failureBlock: GenMSIL.this.global.icodes.BasicBlock,cond: GenMSIL.this.global.icodes.TestOp,kind: GenMSIL.this.global.icodes.TypeKind)GenMSIL.this.global.icodes.opcodes.CJUMP">CJUMP</a>(<a href="#294906" title="GenMSIL.this.global.icodes.BasicBlock">to</a>, <a href="#294947" title="GenMSIL.this.global.icodes.BasicBlock">failure</a>, <a href="#294948" title="GenMSIL.this.global.icodes.TestOp">cond</a>, <a href="#294949" title="GenMSIL.this.global.icodes.TypeKind">kind</a>))
                    <span class="keyword">else</span>
                      //assert(from == failure)
                    <span title="AnyVal with NotNull" class="keyword">if</span> (<a href="#294905" title="(x$1: AnyRef)Boolean">from</a> == <a href="#294947" title="GenMSIL.this.global.icodes.BasicBlock">failure</a>)
                      <a href="#294904" title="GenMSIL.this.global.icodes.BasicBlock">block</a>.<a href="../icode/BasicBlocks.scala.html#61325" title="(oldInstr: GenMSIL.this.global.icodes.Instruction,newInstr: GenMSIL.this.global.icodes.Instruction)Boolean">replaceInstruction</a>(<a href="#294904" title="GenMSIL.this.global.icodes.BasicBlock">block</a>.<a href="../icode/BasicBlocks.scala.html#61341" title="=&gt; GenMSIL.this.global.icodes.Instruction">lastInstruction</a>, <a href="../icode/Opcodes.scala.html#63830" title="(successBlock: GenMSIL.this.global.icodes.BasicBlock,failureBlock: GenMSIL.this.global.icodes.BasicBlock,cond: GenMSIL.this.global.icodes.TestOp,kind: GenMSIL.this.global.icodes.TypeKind)GenMSIL.this.global.icodes.opcodes.CJUMP">CJUMP</a>(<a href="#294946" title="GenMSIL.this.global.icodes.BasicBlock">success</a>, <a href="#294906" title="GenMSIL.this.global.icodes.BasicBlock">to</a>, <a href="#294948" title="GenMSIL.this.global.icodes.TestOp">cond</a>, <a href="#294949" title="GenMSIL.this.global.icodes.TypeKind">kind</a>))
                  <span title="AnyVal" class="keyword">case</span> CZJUMP(<a title="GenMSIL.this.global.icodes.BasicBlock" id="295090">success</a>, <a title="GenMSIL.this.global.icodes.BasicBlock" id="295091">failure</a>, <a title="GenMSIL.this.global.icodes.TestOp" id="295092">cond</a>, <a title="GenMSIL.this.global.icodes.TypeKind" id="295093">kind</a>) =&gt;
                    <span title="AnyVal" class="keyword">if</span> (<a href="#294905" title="(x$1: AnyRef)Boolean">from</a> == <a href="#295090" title="GenMSIL.this.global.icodes.BasicBlock">success</a>)
                      <a href="#294904" title="GenMSIL.this.global.icodes.BasicBlock">block</a>.<a href="../icode/BasicBlocks.scala.html#61325" title="(oldInstr: GenMSIL.this.global.icodes.Instruction,newInstr: GenMSIL.this.global.icodes.Instruction)Boolean">replaceInstruction</a>(<a href="#294904" title="GenMSIL.this.global.icodes.BasicBlock">block</a>.<a href="../icode/BasicBlocks.scala.html#61341" title="=&gt; GenMSIL.this.global.icodes.Instruction">lastInstruction</a>, <a href="../icode/Opcodes.scala.html#63886" title="(successBlock: GenMSIL.this.global.icodes.BasicBlock,failureBlock: GenMSIL.this.global.icodes.BasicBlock,cond: GenMSIL.this.global.icodes.TestOp,kind: GenMSIL.this.global.icodes.TypeKind)GenMSIL.this.global.icodes.opcodes.CZJUMP">CZJUMP</a>(<a href="#294906" title="GenMSIL.this.global.icodes.BasicBlock">to</a>, <a href="#295091" title="GenMSIL.this.global.icodes.BasicBlock">failure</a>, <a href="#295092" title="GenMSIL.this.global.icodes.TestOp">cond</a>, <a href="#295093" title="GenMSIL.this.global.icodes.TypeKind">kind</a>))
                    <span class="keyword">else</span>
                      //assert(from == failure)
                    <span title="AnyVal with NotNull" class="keyword">if</span> (<a href="#294905" title="(x$1: AnyRef)Boolean">from</a> == <a href="#295091" title="GenMSIL.this.global.icodes.BasicBlock">failure</a>)
                      <a href="#294904" title="GenMSIL.this.global.icodes.BasicBlock">block</a>.<a href="../icode/BasicBlocks.scala.html#61325" title="(oldInstr: GenMSIL.this.global.icodes.Instruction,newInstr: GenMSIL.this.global.icodes.Instruction)Boolean">replaceInstruction</a>(<a href="#294904" title="GenMSIL.this.global.icodes.BasicBlock">block</a>.<a href="../icode/BasicBlocks.scala.html#61341" title="=&gt; GenMSIL.this.global.icodes.Instruction">lastInstruction</a>, <a href="../icode/Opcodes.scala.html#63886" title="(successBlock: GenMSIL.this.global.icodes.BasicBlock,failureBlock: GenMSIL.this.global.icodes.BasicBlock,cond: GenMSIL.this.global.icodes.TestOp,kind: GenMSIL.this.global.icodes.TypeKind)GenMSIL.this.global.icodes.opcodes.CZJUMP">CZJUMP</a>(<a href="#295090" title="GenMSIL.this.global.icodes.BasicBlock">success</a>, <a href="#294906" title="GenMSIL.this.global.icodes.BasicBlock">to</a>, <a href="#295092" title="GenMSIL.this.global.icodes.TestOp">cond</a>, <a href="#295093" title="GenMSIL.this.global.icodes.TypeKind">kind</a>))
                  <span title="Boolean" class="keyword">case</span> SWITCH(<a title="List[List[Int]]" id="295232">tags</a>, <a title="List[GenMSIL.this.global.icodes.BasicBlock]" id="295233">labels</a>) =&gt; // labels: List[BasicBlock]
                    <span class="keyword">val</span> <a title="List[GenMSIL.this.global.icodes.BasicBlock]" id="295236">newLabels</a> = <a href="#295233" title="List[GenMSIL.this.global.icodes.BasicBlock]">labels</a>.<span title="(f: (GenMSIL.this.global.icodes.BasicBlock) =&gt; GenMSIL.this.global.icodes.BasicBlock)(implicit bf: scala.collection.generic.BuilderFactory[GenMSIL.this.global.icodes.BasicBlock,List[GenMSIL.this.global.icodes.BasicBlock],List[GenMSIL.this.global.icodes.BasicBlock]])List[GenMSIL.this.global.icodes.BasicBlock]">map</span><span title="scala.collection.generic.BuilderFactory[GenMSIL.this.global.icodes.BasicBlock,List[GenMSIL.this.global.icodes.BasicBlock],List#Coll]">(</span><a title="GenMSIL.this.global.icodes.BasicBlock" id="295245">b</a> =&gt; <span title="GenMSIL.this.global.icodes.BasicBlock" class="keyword">if</span> (<a href="#295245" title="(x$1: AnyRef)Boolean">b</a> == <a href="#294905" title="GenMSIL.this.global.icodes.BasicBlock">from</a>) <a href="#294906" title="GenMSIL.this.global.icodes.BasicBlock">to</a> <span class="keyword">else</span> <a href="#295245" title="GenMSIL.this.global.icodes.BasicBlock">b</a>)
                    <span title="(assertion: Boolean)Unit">assert</span>(<a href="#295236" title="List[GenMSIL.this.global.icodes.BasicBlock]">newLabels</a>.<span title="(elem: Any)Boolean">contains</span>(<a href="#294906" title="GenMSIL.this.global.icodes.BasicBlock">to</a>))
                    <a href="#294904" title="GenMSIL.this.global.icodes.BasicBlock">block</a>.<a href="../icode/BasicBlocks.scala.html#61325" title="(oldInstr: GenMSIL.this.global.icodes.Instruction,newInstr: GenMSIL.this.global.icodes.Instruction)Boolean">replaceInstruction</a>(<a href="#294904" title="GenMSIL.this.global.icodes.BasicBlock">block</a>.<a href="../icode/BasicBlocks.scala.html#61341" title="=&gt; GenMSIL.this.global.icodes.Instruction">lastInstruction</a>, <a href="../icode/Opcodes.scala.html#63766" title="(tags: List[List[Int]],labels: List[GenMSIL.this.global.icodes.BasicBlock])GenMSIL.this.global.icodes.opcodes.SWITCH">SWITCH</a>(<a href="#295232" title="List[List[Int]]">tags</a>, <a href="#295236" title="List[GenMSIL.this.global.icodes.BasicBlock]">newLabels</a>))
                  /*
                  case RETURN(kind) =&gt;
                    if (kind != UNIT) {
                        returnVal
                    }
                    block.replaceInstruction(block.lastInstructionm JUMP(to))
                  */
                  <span title="Unit" class="keyword">case</span> _ =&gt; <span title="Unit">(</span>) //abort(&quot;expected branch at the end of block &quot; + block)
                }

                <span class="keyword">val</span> <a title="GenMSIL.this.global.icodes.BasicBlock" id="294903">jumpOutBlock</a> = <a href="#294899" title="List[GenMSIL.this.global.icodes.BasicBlock]">blocks</a>.<span title="=&gt; GenMSIL.this.global.icodes.BasicBlock">last</span>.<a href="../icode/BasicBlocks.scala.html#61281" title="=&gt; GenMSIL.this.global.icodes.Code">code</a>.<a href="../icode/Members.scala.html#61407" title="=&gt; GenMSIL.this.global.icodes.BasicBlock">newBlock</a>
                <a href="#294903" title="GenMSIL.this.global.icodes.BasicBlock">jumpOutBlock</a>.<a href="../icode/BasicBlocks.scala.html#61332" title="(instr: GenMSIL.this.global.icodes.Instruction)Unit">emit</a>(<a href="../icode/Opcodes.scala.html#63806" title="(whereto: GenMSIL.this.global.icodes.BasicBlock)GenMSIL.this.global.icodes.opcodes.JUMP">JUMP</a>(<a href="#294680" title="(key: GenMSIL.this.global.icodes.ExceptionHandler)GenMSIL.this.global.icodes.BasicBlock">firstBlockAfter</a>(<a href="#294901" title="GenMSIL.this.global.icodes.ExceptionHandler">exh</a>)))
                <a href="#294903" title="GenMSIL.this.global.icodes.BasicBlock">jumpOutBlock</a>.<a href="../icode/BasicBlocks.scala.html#61335" title="=&gt; Unit">close</a>
                <a href="#294900" title="List[(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])]">leaving</a>.<span title="(f: ((GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])) =&gt; Unit)Unit">foreach</span>(<a title="(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])" id="295444">p</a> =&gt; {
                  <span class="keyword">val</span> <a title="GenMSIL.this.global.icodes.BasicBlock" id="295445">lBlock</a> = <a href="#295444" title="(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])">p</a>.<span title="=&gt; GenMSIL.this.global.icodes.BasicBlock">_1</span>
                  <span class="keyword">val</span> <a title="GenMSIL.this.global.icodes.BasicBlock" id="295446">target</a> = <a href="#295444" title="(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])">p</a>.<span title="(n: Int)GenMSIL.this.global.icodes.BasicBlock">_2</span>(<span title="Int(0)" class="int">0</span>) // the elemets of p._2 are all the same, checked before
                  <a href="#294902" title="(block: GenMSIL.this.global.icodes.BasicBlock,from: GenMSIL.this.global.icodes.BasicBlock,to: GenMSIL.this.global.icodes.BasicBlock)AnyVal">replaceJump</a>(<a href="#295445" title="GenMSIL.this.global.icodes.BasicBlock">lBlock</a>, <a href="#295446" title="GenMSIL.this.global.icodes.BasicBlock">target</a>, <a href="#294903" title="GenMSIL.this.global.icodes.BasicBlock">jumpOutBlock</a>)
                  <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37759" title="=&gt; Boolean">value</a>) <a href="../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;replacing &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#295445" title="GenMSIL.this.global.icodes.BasicBlock">lBlock</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; target &quot;)" class="string">&quot; target &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#295446" title="GenMSIL.this.global.icodes.BasicBlock">target</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; jump out &quot;)" class="string">&quot; jump out &quot;</span> + <a href="#294903" title="GenMSIL.this.global.icodes.BasicBlock">jumpOutBlock</a>)
                })
                <span title="(_1: List[GenMSIL.this.global.icodes.BasicBlock],_2: Some[GenMSIL.this.global.icodes.BasicBlock])(List[GenMSIL.this.global.icodes.BasicBlock], Some[GenMSIL.this.global.icodes.BasicBlock])">(</span><a href="#294899" title="List[GenMSIL.this.global.icodes.BasicBlock]">blocks</a> <a href="#295479" title="List[GenMSIL.this.global.icodes.BasicBlock]">:::</a> <span title="(xs: GenMSIL.this.global.icodes.BasicBlock*)List[GenMSIL.this.global.icodes.BasicBlock]">List</span><span title="(prefix: List[GenMSIL.this.global.icodes.BasicBlock])List[GenMSIL.this.global.icodes.BasicBlock]">(</span><a href="#294903" title="GenMSIL.this.global.icodes.BasicBlock">jumpOutBlock</a>), <span title="(x: GenMSIL.this.global.icodes.BasicBlock)Some[GenMSIL.this.global.icodes.BasicBlock]">Some</span>(<a href="#294903" title="GenMSIL.this.global.icodes.BasicBlock">jumpOutBlock</a>))
              }

              <span class="keyword">val</span> <a title="List[(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])]" id="294695">leaving</a> = <a href="#294693" title="(blocks: List[GenMSIL.this.global.icodes.BasicBlock])List[(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])]">leavingBlocks</a>(<a href="#294690" title="List[GenMSIL.this.global.icodes.BasicBlock]">blocks</a>)
              <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37759" title="=&gt; Boolean">value</a>) <a href="../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;leaving &quot;</span> + <a href="#294695" title="List[(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])]">leaving</a>)
              <span title="(List[GenMSIL.this.global.icodes.BasicBlock], Option[GenMSIL.this.global.icodes.BasicBlock])" class="keyword">if</span> (<a href="#294695" title="List[(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])]">leaving</a>.<span title="(x$1: Int)Boolean">length</span> == <span title="Int(0)" class="int">0</span>)
                <span title="(_1: List[GenMSIL.this.global.icodes.BasicBlock],_2: object None)(List[GenMSIL.this.global.icodes.BasicBlock], object None)">(</span><a href="#294690" title="List[GenMSIL.this.global.icodes.BasicBlock]">blocks</a>, <span title="object None">None</span>)
              <span class="keyword">else</span> <span title="(List[GenMSIL.this.global.icodes.BasicBlock], Option[GenMSIL.this.global.icodes.BasicBlock])" class="keyword">if</span> (<a href="#294695" title="List[(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])]">leaving</a>.<span title="(x$1: Int)Boolean">length</span> == <span title="Int(1)" class="int">1</span>) {
                <span class="keyword">val</span> <a title="List[GenMSIL.this.global.icodes.BasicBlock]" id="295535">outside</a> = <a href="#294695" title="(n: Int)(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])">leaving</a>(<span title="Int(0)" class="int">0</span>).<span title="=&gt; List[GenMSIL.this.global.icodes.BasicBlock]">_2</span>
                //assert(outside.forall(b =&gt; b == outside(0)), &quot;exception-block leaving to multiple targets&quot;)
                <span title="Unit" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="#294680" title="scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.ExceptionHandler,GenMSIL.this.global.icodes.BasicBlock]">firstBlockAfter</a>.<span title="(key: GenMSIL.this.global.icodes.ExceptionHandler)Boolean">isDefinedAt</span>(<a href="#294691" title="GenMSIL.this.global.icodes.ExceptionHandler">exh</a>))
                  <a href="#294680" title="(key: GenMSIL.this.global.icodes.ExceptionHandler,value: GenMSIL.this.global.icodes.BasicBlock)Unit">firstBlockAfter</a>(<a href="#294691" title="GenMSIL.this.global.icodes.ExceptionHandler">exh</a>) = <a href="#295535" title="(n: Int)GenMSIL.this.global.icodes.BasicBlock">outside</a>(<span title="Int(0)" class="int">0</span>)
                //else ()
                  //assert(firstBlockAfter(exh) == outside(0), &quot;try/catch leaving to multiple targets: &quot; + firstBlockAfter(exh) + &quot;, new: &quot; + outside(0))
                <span class="keyword">val</span> <a title="GenMSIL.this.global.icodes.BasicBlock" id="295536">last</a> = <a href="#294695" title="(n: Int)(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])">leaving</a>(<span title="Int(0)" class="int">0</span>).<span title="=&gt; GenMSIL.this.global.icodes.BasicBlock">_1</span>
                <span title="(_1: List[GenMSIL.this.global.icodes.BasicBlock],_2: object None)(List[GenMSIL.this.global.icodes.BasicBlock], object None)">(</span>(<a href="#294690" title="(x: GenMSIL.this.global.icodes.BasicBlock)List[GenMSIL.this.global.icodes.BasicBlock]">blocks</a> - <a href="#295536" title="GenMSIL.this.global.icodes.BasicBlock">last</a>) <a href="#295585" title="List[GenMSIL.this.global.icodes.BasicBlock]">:::</a> <span title="(xs: GenMSIL.this.global.icodes.BasicBlock*)List[GenMSIL.this.global.icodes.BasicBlock]">List</span><span title="(prefix: List[GenMSIL.this.global.icodes.BasicBlock])List[GenMSIL.this.global.icodes.BasicBlock]">(</span><a href="#295536" title="GenMSIL.this.global.icodes.BasicBlock">last</a>), <span title="object None">None</span>)
              } <span class="keyword">else</span> {
                <span class="keyword">val</span> <a title="List[GenMSIL.this.global.icodes.BasicBlock]" id="295613">outside</a> = <a href="#294695" title="List[(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])]">leaving</a>.<a title="(f: ((GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])) =&gt; Traversable[GenMSIL.this.global.icodes.BasicBlock])(implicit bf: scala.collection.generic.BuilderFactory[GenMSIL.this.global.icodes.BasicBlock,List[GenMSIL.this.global.icodes.BasicBlock],List[(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])]])List[GenMSIL.this.global.icodes.BasicBlock]" id="25248">flatMap</a><span title="scala.collection.generic.BuilderFactory[GenMSIL.this.global.icodes.BasicBlock,List[GenMSIL.this.global.icodes.BasicBlock],List#Coll]">(</span><a title="(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])" id="295622">p</a> =&gt; <a href="#295622" title="(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])">p</a>.<span title="=&gt; List[GenMSIL.this.global.icodes.BasicBlock]">_2</span>)
                //assert(outside.forall(b =&gt; b == outside(0)), &quot;exception-block leaving to multiple targets&quot;)
                <span title="Unit" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="#294680" title="scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.ExceptionHandler,GenMSIL.this.global.icodes.BasicBlock]">firstBlockAfter</a>.<span title="(key: GenMSIL.this.global.icodes.ExceptionHandler)Boolean">isDefinedAt</span>(<a href="#294691" title="GenMSIL.this.global.icodes.ExceptionHandler">exh</a>))
                  <a href="#294680" title="(key: GenMSIL.this.global.icodes.ExceptionHandler,value: GenMSIL.this.global.icodes.BasicBlock)Unit">firstBlockAfter</a>(<a href="#294691" title="GenMSIL.this.global.icodes.ExceptionHandler">exh</a>) = <a href="#295613" title="(n: Int)GenMSIL.this.global.icodes.BasicBlock">outside</a>(<span title="Int(0)" class="int">0</span>)
                //else
                  //assert(firstBlockAfter(exh) == outside(0), &quot;try/catch leaving to multiple targets&quot;)
                <a href="#294694" title="(blocks: List[GenMSIL.this.global.icodes.BasicBlock],leaving: List[(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])],exh: GenMSIL.this.global.icodes.ExceptionHandler)(List[GenMSIL.this.global.icodes.BasicBlock], Option[GenMSIL.this.global.icodes.BasicBlock])">replaceOutJumps</a>(<a href="#294690" title="List[GenMSIL.this.global.icodes.BasicBlock]">blocks</a>, <a href="#294695" title="List[(GenMSIL.this.global.icodes.BasicBlock, List[GenMSIL.this.global.icodes.BasicBlock])]">leaving</a>, <a href="#294691" title="GenMSIL.this.global.icodes.ExceptionHandler">exh</a>)
              }
            }

            <span class="keyword">var</span> <a title="List[GenMSIL.this.global.icodes.ExceptionHandler]" id="294683">affectedHandlers</a>: <span title="List[GenMSIL.this.global.icodes.ExceptionHandler]">List</span>[ExceptionHandler] = <span title="object Nil">Nil</span>
            <a href="#294514" title="List[GenMSIL.this.global.icodes.ExceptionHandler]">untreatedHandlers</a>.<span title="(f: (GenMSIL.this.global.icodes.ExceptionHandler) =&gt; Unit)Unit">foreach</span>( (<a title="GenMSIL.this.global.icodes.ExceptionHandler" id="295745">h</a>) =&gt; {
              <span title="Unit" class="keyword">if</span> (<a href="#295745" title="GenMSIL.this.global.icodes.ExceptionHandler">h</a>.<a href="../icode/ExceptionHandlers.scala.html#61450" title="(b: GenMSIL.this.global.icodes.BasicBlock)Boolean">covers</a>(<a href="#294534" title="GenMSIL.this.global.icodes.BasicBlock">x</a>)){
                <a href="#294683" title="List[GenMSIL.this.global.icodes.ExceptionHandler]">affectedHandlers</a> = <a href="#295745" title="GenMSIL.this.global.icodes.ExceptionHandler">h</a> <a href="#295749" title="GenMSIL.this.global.icodes.ExceptionHandler">::</a> <a href="#294683" title="(x: GenMSIL.this.global.icodes.ExceptionHandler)List[GenMSIL.this.global.icodes.ExceptionHandler]">affectedHandlers</a>
              }
            })

            // shorter try-catch-finally last (the ones contained in another)
            <a href="#294683" title="List[GenMSIL.this.global.icodes.ExceptionHandler]">affectedHandlers</a> = <a href="#294683" title="List[GenMSIL.this.global.icodes.ExceptionHandler]">affectedHandlers</a>.<span title="(lt: (GenMSIL.this.global.icodes.ExceptionHandler, GenMSIL.this.global.icodes.ExceptionHandler) =&gt; Boolean)List[GenMSIL.this.global.icodes.ExceptionHandler]">sort</span>({(<a title="GenMSIL.this.global.icodes.ExceptionHandler" id="295762">h1</a>, <a title="GenMSIL.this.global.icodes.ExceptionHandler" id="295763">h2</a>) =&gt; <a href="#295762" title="GenMSIL.this.global.icodes.ExceptionHandler">h1</a>.<a href="../icode/ExceptionHandlers.scala.html#61446" title="=&gt; scala.collection.immutable.Set[GenMSIL.this.global.icodes.BasicBlock]">covered</a>.<span title="(x$1: Int)Boolean">size</span> &gt; <a href="#295763" title="GenMSIL.this.global.icodes.ExceptionHandler">h2</a>.<a href="../icode/ExceptionHandlers.scala.html#61446" title="=&gt; scala.collection.immutable.Set[GenMSIL.this.global.icodes.BasicBlock]">covered</a>.<span title="=&gt; Int">size</span>})
            <a href="#294683" title="List[GenMSIL.this.global.icodes.ExceptionHandler]">affectedHandlers</a> = <a href="#294683" title="List[GenMSIL.this.global.icodes.ExceptionHandler]">affectedHandlers</a>.<span title="(p: (GenMSIL.this.global.icodes.ExceptionHandler) =&gt; Boolean)List[GenMSIL.this.global.icodes.ExceptionHandler]">filter</span>(<a title="GenMSIL.this.global.icodes.ExceptionHandler" id="295774">h</a> =&gt; {<a href="#295774" title="GenMSIL.this.global.icodes.ExceptionHandler">h</a>.<a href="../icode/ExceptionHandlers.scala.html#61446" title="=&gt; scala.collection.immutable.Set[GenMSIL.this.global.icodes.BasicBlock]">covered</a>.<span title="(x$1: Int)Boolean">size</span> == <a href="#294683" title="(n: Int)GenMSIL.this.global.icodes.ExceptionHandler">affectedHandlers</a>(<span title="Int(0)" class="int">0</span>).<a href="../icode/ExceptionHandlers.scala.html#61446" title="=&gt; scala.collection.immutable.Set[GenMSIL.this.global.icodes.BasicBlock]">covered</a>.<span title="=&gt; Int">size</span>})
            <a href="#294514" title="List[GenMSIL.this.global.icodes.ExceptionHandler]">untreatedHandlers</a> = <a href="#294514" title="(that: List[GenMSIL.this.global.icodes.ExceptionHandler])List[GenMSIL.this.global.icodes.ExceptionHandler]">untreatedHandlers</a> -- <a href="#294683" title="List[GenMSIL.this.global.icodes.ExceptionHandler]">affectedHandlers</a>

            // more than one catch produces more than one exh, but we only need one
            <span class="keyword">var</span> <a title="GenMSIL.this.global.icodes.ExceptionHandler" id="294684">singleAffectedHandler</a>: <a href="../icode/ExceptionHandlers.scala.html#46236" title="GenMSIL.this.global.icodes.ExceptionHandler">ExceptionHandler</a> = <a href="#294683" title="(n: Int)GenMSIL.this.global.icodes.ExceptionHandler">affectedHandlers</a>(<span title="Int(0)" class="int">0</span>) // List[ExceptionHandler] = Nil
            <span class="keyword">var</span> <a title="Option[BytecodeGenerator.this.ExceptionBlock]" id="294685">exceptionBlock</a>: <span title="Option[BytecodeGenerator.this.ExceptionBlock]">Option</span>[ExceptionBlock] = <span title="object None">None</span>
            <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37759" title="=&gt; Boolean">value</a>) <a href="../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;affected handlers &quot;</span> + <a href="#294683" title="List[GenMSIL.this.global.icodes.ExceptionHandler]">affectedHandlers</a>)
            <a href="#294683" title="List[GenMSIL.this.global.icodes.ExceptionHandler]">affectedHandlers</a>.<span title="(f: (GenMSIL.this.global.icodes.ExceptionHandler) =&gt; Unit)Unit">foreach</span>(<a title="GenMSIL.this.global.icodes.ExceptionHandler" id="295834">h1</a> =&gt; {
              <span class="keyword">val</span> <a href="#295836" title="(List[GenMSIL.this.global.icodes.BasicBlock], Option[GenMSIL.this.global.icodes.BasicBlock])">(</a><a href="#295835" title="List[GenMSIL.this.global.icodes.BasicBlock]" id="295836">adaptedBlocks</a>, <a href="#295835" title="Option[GenMSIL.this.global.icodes.BasicBlock]" id="295837">newBlock</a>) = <a href="#294682" title="(blocks: List[GenMSIL.this.global.icodes.BasicBlock],exh: GenMSIL.this.global.icodes.ExceptionHandler)(List[GenMSIL.this.global.icodes.BasicBlock], Option[GenMSIL.this.global.icodes.BasicBlock])">adaptBlocks</a><span title="(List[GenMSIL.this.global.icodes.BasicBlock], Option[GenMSIL.this.global.icodes.BasicBlock]) @unchecked">(</span><a href="#294512" title="List[GenMSIL.this.global.icodes.BasicBlock]">blocksToPut</a>.<span title="(that: Sequence[GenMSIL.this.global.icodes.BasicBlock])List[GenMSIL.this.global.icodes.BasicBlock]">intersect</span>(<a href="#295834" title="GenMSIL.this.global.icodes.ExceptionHandler">h1</a>.<a href="../icode/ExceptionHandlers.scala.html#61451" title="=&gt; List[GenMSIL.this.global.icodes.BasicBlock]">blocks</a>), <a href="#294684" title="GenMSIL.this.global.icodes.ExceptionHandler">singleAffectedHandler</a>)
              <a href="#295837" title="Option[GenMSIL.this.global.icodes.BasicBlock]">newBlock</a> <span title="Unit" class="keyword">match</span> {
                <span title="Unit" class="keyword">case</span> Some(<a title="GenMSIL.this.global.icodes.BasicBlock" id="295867">block</a>) =&gt;
                  <a href="#294512" title="List[GenMSIL.this.global.icodes.BasicBlock]">blocksToPut</a> = <a href="#294512" title="List[GenMSIL.this.global.icodes.BasicBlock]">blocksToPut</a> <a href="#295870" title="List[GenMSIL.this.global.icodes.BasicBlock]">:::</a> <span title="(xs: GenMSIL.this.global.icodes.BasicBlock*)List[GenMSIL.this.global.icodes.BasicBlock]">List</span><span title="(prefix: List[GenMSIL.this.global.icodes.BasicBlock])List[GenMSIL.this.global.icodes.BasicBlock]">(</span><a href="#295867" title="GenMSIL.this.global.icodes.BasicBlock">block</a>)
                  <a href="#295834" title="GenMSIL.this.global.icodes.ExceptionHandler">h1</a>.<a href="../icode/ExceptionHandlers.scala.html#61454" title="(b: GenMSIL.this.global.icodes.BasicBlock)Unit">addBlock</a>(<a href="#295867" title="GenMSIL.this.global.icodes.BasicBlock">block</a>)
                <span title="Unit" class="keyword">case</span> <span title="object None">None</span> =&gt; <span title="Unit">(</span>)
              }
              <span class="keyword">val</span> <a title="List[GenMSIL.this.global.icodes.BasicBlock]" id="295838">orderedCatchBlocks</a> = <a href="#295834" title="GenMSIL.this.global.icodes.ExceptionHandler">h1</a>.<a href="../icode/ExceptionHandlers.scala.html#61445" title="=&gt; GenMSIL.this.global.icodes.BasicBlock">startBlock</a> <a href="#295892" title="GenMSIL.this.global.icodes.BasicBlock">::</a> <span title="(x: GenMSIL.this.global.icodes.BasicBlock)List[GenMSIL.this.global.icodes.BasicBlock]">(</span><a href="#295836" title="(x: GenMSIL.this.global.icodes.BasicBlock)List[GenMSIL.this.global.icodes.BasicBlock]">adaptedBlocks</a> - <a href="#295834" title="GenMSIL.this.global.icodes.ExceptionHandler">h1</a>.<a href="../icode/ExceptionHandlers.scala.html#61445" title="=&gt; GenMSIL.this.global.icodes.BasicBlock">startBlock</a>)

              <a href="#294685" title="Option[BytecodeGenerator.this.ExceptionBlock]">exceptionBlock</a> <span title="Unit" class="keyword">match</span> {
                <span title="Unit" class="keyword">case</span> Some(<a title="BytecodeGenerator.this.ExceptionBlock" id="295908">excBlock</a>) =&gt;
                  <span class="keyword">val</span> <a title="BytecodeGenerator.this.CatchBlock" id="295911">catchBlock</a> = <a href="#295908" title="BytecodeGenerator.this.ExceptionBlock">excBlock</a>.<a href="#293749" title="(exSym: GenMSIL.this.global.Symbol)BytecodeGenerator.this.CatchBlock">addCatchBlock</a>(<a href="#295834" title="GenMSIL.this.global.icodes.ExceptionHandler">h1</a>.<a href="../icode/ExceptionHandlers.scala.html#61432" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">cls</a>)
                  <a href="#294515" title="BytecodeGenerator.this.BlockList0">currentBlock</a> = <a href="#295911" title="BytecodeGenerator.this.CatchBlock">catchBlock</a>
                  <a href="#294516" title="(b: List[GenMSIL.this.global.icodes.BasicBlock])Unit">addBlocks</a>(<a href="#295838" title="List[GenMSIL.this.global.icodes.BasicBlock]">orderedCatchBlocks</a>)
                <span title="Unit" class="keyword">case</span> <span title="object None">None</span> =&gt;
                  <span class="keyword">val</span> <a title="BytecodeGenerator.this.ExceptionBlock" id="295916">excBlock</a> = <a href="#294515" title="BytecodeGenerator.this.BlockList0">currentBlock</a>.<a href="#293598" title="(exh: GenMSIL.this.global.icodes.ExceptionHandler)BytecodeGenerator.this.ExceptionBlock">addExceptionBlock</a>(<a href="#294684" title="GenMSIL.this.global.icodes.ExceptionHandler">singleAffectedHandler</a>)
                  <a href="#294685" title="Option[BytecodeGenerator.this.ExceptionBlock]">exceptionBlock</a> = <span title="(x: BytecodeGenerator.this.ExceptionBlock)Some[BytecodeGenerator.this.ExceptionBlock]">Some</span>(<a href="#295916" title="BytecodeGenerator.this.ExceptionBlock">excBlock</a>)

                  <span class="keyword">val</span> <a href="#295918" title="(List[GenMSIL.this.global.icodes.BasicBlock], Option[GenMSIL.this.global.icodes.BasicBlock])">(</a><a href="#295917" title="List[GenMSIL.this.global.icodes.BasicBlock]" id="295918">tryBlocks</a>, <a href="#295917" title="Option[GenMSIL.this.global.icodes.BasicBlock]" id="295919">newBlock</a>) = <a href="#294682" title="(blocks: List[GenMSIL.this.global.icodes.BasicBlock],exh: GenMSIL.this.global.icodes.ExceptionHandler)(List[GenMSIL.this.global.icodes.BasicBlock], Option[GenMSIL.this.global.icodes.BasicBlock])">adaptBlocks</a><span title="(List[GenMSIL.this.global.icodes.BasicBlock], Option[GenMSIL.this.global.icodes.BasicBlock]) @unchecked">(</span><a href="#294512" title="List[GenMSIL.this.global.icodes.BasicBlock]">blocksToPut</a>.<span title="(that: Sequence[GenMSIL.this.global.icodes.BasicBlock])List[GenMSIL.this.global.icodes.BasicBlock]">intersect</span>(<a href="#294684" title="GenMSIL.this.global.icodes.ExceptionHandler">singleAffectedHandler</a>.<a href="../icode/ExceptionHandlers.scala.html#61446" title="=&gt; scala.collection.immutable.Set[GenMSIL.this.global.icodes.BasicBlock]">covered</a>.<a title="=&gt; List[GenMSIL.this.global.icodes.BasicBlock]" id="25352">toList</a>), <a href="#294684" title="GenMSIL.this.global.icodes.ExceptionHandler">singleAffectedHandler</a>)

                  <a href="#295919" title="Option[GenMSIL.this.global.icodes.BasicBlock]">newBlock</a> <span title="Any" class="keyword">match</span> {
                    <span title="GenMSIL.this.global.icodes.ExceptionHandler" class="keyword">case</span> Some(<a title="GenMSIL.this.global.icodes.BasicBlock" id="295956">block</a>) =&gt;
                      <a href="#294512" title="List[GenMSIL.this.global.icodes.BasicBlock]">blocksToPut</a> = <a href="#294512" title="List[GenMSIL.this.global.icodes.BasicBlock]">blocksToPut</a> <a href="#295959" title="List[GenMSIL.this.global.icodes.BasicBlock]">:::</a> <span title="(xs: GenMSIL.this.global.icodes.BasicBlock*)List[GenMSIL.this.global.icodes.BasicBlock]">List</span><span title="(prefix: List[GenMSIL.this.global.icodes.BasicBlock])List[GenMSIL.this.global.icodes.BasicBlock]">(</span><a href="#295956" title="GenMSIL.this.global.icodes.BasicBlock">block</a>)
                      <a href="#294684" title="GenMSIL.this.global.icodes.ExceptionHandler">singleAffectedHandler</a>.<a href="../icode/ExceptionHandlers.scala.html#61449" title="(b: GenMSIL.this.global.icodes.BasicBlock)GenMSIL.this.global.icodes.ExceptionHandler">addCoveredBlock</a>(<a href="#295956" title="GenMSIL.this.global.icodes.BasicBlock">block</a>)
                    <span title="Unit" class="keyword">case</span> <span title="object None">None</span> =&gt; <span title="Unit">(</span>)
                  }
                  <a href="#294515" title="BytecodeGenerator.this.BlockList0">currentBlock</a> = <a href="#295916" title="BytecodeGenerator.this.ExceptionBlock">excBlock</a>.<a href="#293738" title="=&gt; BytecodeGenerator.this.BlockList">tryBlock</a>
                  <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37759" title="=&gt; Boolean">value</a>) <a href="../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;adding try blocks &quot;</span> + <a href="#295918" title="List[GenMSIL.this.global.icodes.BasicBlock]">tryBlocks</a>)
                  <a href="#294516" title="(b: List[GenMSIL.this.global.icodes.BasicBlock])Unit">addBlocks</a>(<a href="#295918" title="List[GenMSIL.this.global.icodes.BasicBlock]">tryBlocks</a>)

                  <span title="Unit" class="keyword">if</span> (<a href="#294684" title="GenMSIL.this.global.icodes.ExceptionHandler">singleAffectedHandler</a>.<a href="../icode/ExceptionHandlers.scala.html#61438" title="(x$1: AnyRef)Boolean">finalizer</a> <span title="(x$1: Boolean)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span> &amp;&amp; <a href="#294684" title="GenMSIL.this.global.icodes.ExceptionHandler">singleAffectedHandler</a>.<a href="../icode/ExceptionHandlers.scala.html#61438" title="(x$1: AnyRef)Boolean">finalizer</a> != <a href="../icode/ExceptionHandlers.scala.html#46238" title="object GenMSIL.this.global.icodes.NoFinalizer">NoFinalizer</a>) {
                    <span class="keyword">val</span> <a href="#296025" title="(List[GenMSIL.this.global.icodes.BasicBlock], Option[GenMSIL.this.global.icodes.BasicBlock])">(</a><a href="#296024" title="List[GenMSIL.this.global.icodes.BasicBlock]" id="296025">blocks0</a>, <a href="#296024" title="Option[GenMSIL.this.global.icodes.BasicBlock]" id="296026">newBlock</a>) = <a href="#294682" title="(blocks: List[GenMSIL.this.global.icodes.BasicBlock],exh: GenMSIL.this.global.icodes.ExceptionHandler)(List[GenMSIL.this.global.icodes.BasicBlock], Option[GenMSIL.this.global.icodes.BasicBlock])">adaptBlocks</a><span title="(List[GenMSIL.this.global.icodes.BasicBlock], Option[GenMSIL.this.global.icodes.BasicBlock]) @unchecked">(</span><a href="#294512" title="List[GenMSIL.this.global.icodes.BasicBlock]">blocksToPut</a>.<span title="(that: Sequence[GenMSIL.this.global.icodes.BasicBlock])List[GenMSIL.this.global.icodes.BasicBlock]">intersect</span>(<a href="#294684" title="GenMSIL.this.global.icodes.ExceptionHandler">singleAffectedHandler</a>.<a href="../icode/ExceptionHandlers.scala.html#61438" title="=&gt; GenMSIL.this.global.icodes.Finalizer">finalizer</a>.<a href="../icode/ExceptionHandlers.scala.html#61451" title="=&gt; List[GenMSIL.this.global.icodes.BasicBlock]">blocks</a>), <a href="#294684" title="GenMSIL.this.global.icodes.ExceptionHandler">singleAffectedHandler</a>)
                    <a href="#296026" title="Option[GenMSIL.this.global.icodes.BasicBlock]">newBlock</a> <span title="Unit" class="keyword">match</span> {
                      <span title="Unit" class="keyword">case</span> Some(<a title="GenMSIL.this.global.icodes.BasicBlock" id="296056">block</a>) =&gt;
                        <a href="#294512" title="List[GenMSIL.this.global.icodes.BasicBlock]">blocksToPut</a> = <a href="#294512" title="List[GenMSIL.this.global.icodes.BasicBlock]">blocksToPut</a> <a href="#296059" title="List[GenMSIL.this.global.icodes.BasicBlock]">:::</a> <span title="(xs: GenMSIL.this.global.icodes.BasicBlock*)List[GenMSIL.this.global.icodes.BasicBlock]">List</span><span title="(prefix: List[GenMSIL.this.global.icodes.BasicBlock])List[GenMSIL.this.global.icodes.BasicBlock]">(</span><a href="#296056" title="GenMSIL.this.global.icodes.BasicBlock">block</a>)
                        <a href="#294684" title="GenMSIL.this.global.icodes.ExceptionHandler">singleAffectedHandler</a>.<a href="../icode/ExceptionHandlers.scala.html#61438" title="=&gt; GenMSIL.this.global.icodes.Finalizer">finalizer</a>.<a href="../icode/ExceptionHandlers.scala.html#61454" title="(b: GenMSIL.this.global.icodes.BasicBlock)Unit">addBlock</a>(<a href="#296056" title="GenMSIL.this.global.icodes.BasicBlock">block</a>)
                      <span title="Unit" class="keyword">case</span> <span title="object None">None</span> =&gt; <span title="Unit">(</span>)
                    }
                    <span class="keyword">val</span> <a title="List[GenMSIL.this.global.icodes.BasicBlock]" id="296027">blocks</a> = <a href="#294684" title="GenMSIL.this.global.icodes.ExceptionHandler">singleAffectedHandler</a>.<a href="../icode/ExceptionHandlers.scala.html#61438" title="=&gt; GenMSIL.this.global.icodes.Finalizer">finalizer</a>.<a href="../icode/ExceptionHandlers.scala.html#61445" title="=&gt; GenMSIL.this.global.icodes.BasicBlock">startBlock</a> <a href="#296079" title="GenMSIL.this.global.icodes.BasicBlock">::</a> <span title="(x: GenMSIL.this.global.icodes.BasicBlock)List[GenMSIL.this.global.icodes.BasicBlock]">(</span><a href="#296025" title="(x: GenMSIL.this.global.icodes.BasicBlock)List[GenMSIL.this.global.icodes.BasicBlock]">blocks0</a> - <a href="#294684" title="GenMSIL.this.global.icodes.ExceptionHandler">singleAffectedHandler</a>.<a href="../icode/ExceptionHandlers.scala.html#61438" title="=&gt; GenMSIL.this.global.icodes.Finalizer">finalizer</a>.<a href="../icode/ExceptionHandlers.scala.html#61445" title="=&gt; GenMSIL.this.global.icodes.BasicBlock">startBlock</a>)
                    <a href="#294515" title="BytecodeGenerator.this.BlockList0">currentBlock</a> = <a href="#295916" title="BytecodeGenerator.this.ExceptionBlock">excBlock</a>.<a href="#293744" title="=&gt; BytecodeGenerator.this.BlockList">finallyBlock</a>
                    <a href="#294516" title="(b: List[GenMSIL.this.global.icodes.BasicBlock])Unit">addBlocks</a>(<a href="#296027" title="List[GenMSIL.this.global.icodes.BasicBlock]">blocks</a>)
                  }

                  <span class="keyword">val</span> <a title="BytecodeGenerator.this.CatchBlock" id="295920">catchBlock</a> = <a href="#295916" title="BytecodeGenerator.this.ExceptionBlock">excBlock</a>.<a href="#293749" title="(exSym: GenMSIL.this.global.Symbol)BytecodeGenerator.this.CatchBlock">addCatchBlock</a>(<a href="#294684" title="GenMSIL.this.global.icodes.ExceptionHandler">singleAffectedHandler</a>.<a href="../icode/ExceptionHandlers.scala.html#61432" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">cls</a>)
                  <a href="#294515" title="BytecodeGenerator.this.BlockList0">currentBlock</a> = <a href="#295920" title="BytecodeGenerator.this.CatchBlock">catchBlock</a>
                  <a href="#294516" title="(b: List[GenMSIL.this.global.icodes.BasicBlock])Unit">addBlocks</a>(<a href="#295838" title="List[GenMSIL.this.global.icodes.BasicBlock]">orderedCatchBlocks</a>)
              }
              <span title="Unit" class="keyword">if</span> (<a href="#294680" title="scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.ExceptionHandler,GenMSIL.this.global.icodes.BasicBlock]">firstBlockAfter</a>.<span title="(key: GenMSIL.this.global.icodes.ExceptionHandler)Boolean">isDefinedAt</span>(<a href="#294684" title="GenMSIL.this.global.icodes.ExceptionHandler">singleAffectedHandler</a>))
                <a href="#294513" title="GenMSIL.this.global.icodes.BasicBlock">nextBlock</a> = <a href="#294680" title="(key: GenMSIL.this.global.icodes.ExceptionHandler)GenMSIL.this.global.icodes.BasicBlock">firstBlockAfter</a>(<a href="#294684" title="GenMSIL.this.global.icodes.ExceptionHandler">singleAffectedHandler</a>)
              <span class="keyword">else</span>
                <a href="#294513" title="GenMSIL.this.global.icodes.BasicBlock">nextBlock</a> = <span title="Null(null)" class="keyword">null</span>
            })

            <a href="#294515" title="BytecodeGenerator.this.BlockList0">currentBlock</a> = <a href="#294681" title="BytecodeGenerator.this.BlockList0">savedCurrentBlock</a>

            <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37759" title="=&gt; Boolean">value</a>)
              <a href="../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot; -&gt; addBlocks(&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#294535" title="List[GenMSIL.this.global.icodes.BasicBlock]">xs</a>.<span title="(that: Sequence[GenMSIL.this.global.icodes.BasicBlock])List[GenMSIL.this.global.icodes.BasicBlock]">intersect</span>(<a href="#294512" title="List[GenMSIL.this.global.icodes.BasicBlock]">blocksToPut</a>) + <span title="java.lang.String(&quot;)&quot;)" class="string">&quot;)&quot;</span>)
            <a href="#294516" title="(b: List[GenMSIL.this.global.icodes.BasicBlock])Unit">addBlocks</a>(<a href="#294535" title="List[GenMSIL.this.global.icodes.BasicBlock]">xs</a>.<span title="(that: Sequence[GenMSIL.this.global.icodes.BasicBlock])List[GenMSIL.this.global.icodes.BasicBlock]">intersect</span>(<a href="#294512" title="List[GenMSIL.this.global.icodes.BasicBlock]">blocksToPut</a>))
          }
      }

      // begin method orderBlocksForExh

      <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37759" title="=&gt; Boolean">value</a>)
        <a href="../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;before: &quot;</span> + <a href="#293239" title="List[GenMSIL.this.global.icodes.BasicBlock]">blocks</a>)
      // some blocks may have been removed by linearization
      <a href="#294514" title="List[GenMSIL.this.global.icodes.ExceptionHandler]">untreatedHandlers</a>.<span title="(f: (GenMSIL.this.global.icodes.ExceptionHandler) =&gt; Unit)Unit">foreach</span>(<a title="GenMSIL.this.global.icodes.ExceptionHandler" id="296175">h</a> =&gt; {
        <a href="#296175" title="GenMSIL.this.global.icodes.ExceptionHandler">h</a>.<a href="../icode/ExceptionHandlers.scala.html#61452" title="(x$1: List[GenMSIL.this.global.icodes.BasicBlock])Unit">blocks</a> = <a href="#296175" title="GenMSIL.this.global.icodes.ExceptionHandler">h</a>.<a href="../icode/ExceptionHandlers.scala.html#61451" title="=&gt; List[GenMSIL.this.global.icodes.BasicBlock]">blocks</a>.<span title="(that: Sequence[GenMSIL.this.global.icodes.BasicBlock])List[GenMSIL.this.global.icodes.BasicBlock]">intersect</span>(<a href="#294512" title="List[GenMSIL.this.global.icodes.BasicBlock]">blocksToPut</a>)
        <a href="#296175" title="GenMSIL.this.global.icodes.ExceptionHandler">h</a>.<a href="../icode/ExceptionHandlers.scala.html#61447" title="(x$1: scala.collection.immutable.Set[GenMSIL.this.global.icodes.BasicBlock])Unit">covered</a> = <a href="#296175" title="GenMSIL.this.global.icodes.ExceptionHandler">h</a>.<a href="../icode/ExceptionHandlers.scala.html#61446" title="=&gt; scala.collection.immutable.Set[GenMSIL.this.global.icodes.BasicBlock]">covered</a>.<a title="(that: scala.collection.Set[GenMSIL.this.global.icodes.BasicBlock])scala.collection.immutable.Set[GenMSIL.this.global.icodes.BasicBlock]" id="39341">intersect</a>(collection.immutable.<a title="object scala.collection.immutable.HashSet" id="7262">HashSet</a>.<a title="(elems: Traversable[GenMSIL.this.global.icodes.BasicBlock])scala.collection.immutable.HashSet[GenMSIL.this.global.icodes.BasicBlock]" id="164791">empty</a> ++ <a href="#294512" title="List[GenMSIL.this.global.icodes.BasicBlock]">blocksToPut</a>)
        <span title="Unit" class="keyword">if</span> (<a href="#296175" title="GenMSIL.this.global.icodes.ExceptionHandler">h</a>.<a href="../icode/ExceptionHandlers.scala.html#61438" title="(x$1: AnyRef)Boolean">finalizer</a> <span title="(x$1: Boolean)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span> &amp;&amp; <a href="#296175" title="GenMSIL.this.global.icodes.ExceptionHandler">h</a>.<a href="../icode/ExceptionHandlers.scala.html#61438" title="(x$1: AnyRef)Boolean">finalizer</a> != <a href="../icode/ExceptionHandlers.scala.html#46238" title="object GenMSIL.this.global.icodes.NoFinalizer">NoFinalizer</a>)
          <a href="#296175" title="GenMSIL.this.global.icodes.ExceptionHandler">h</a>.<a href="../icode/ExceptionHandlers.scala.html#61438" title="=&gt; GenMSIL.this.global.icodes.Finalizer">finalizer</a>.<a href="../icode/ExceptionHandlers.scala.html#61452" title="(x$1: List[GenMSIL.this.global.icodes.BasicBlock])Unit">blocks</a> = <a href="#296175" title="GenMSIL.this.global.icodes.ExceptionHandler">h</a>.<a href="../icode/ExceptionHandlers.scala.html#61438" title="=&gt; GenMSIL.this.global.icodes.Finalizer">finalizer</a>.<a href="../icode/ExceptionHandlers.scala.html#61451" title="=&gt; List[GenMSIL.this.global.icodes.BasicBlock]">blocks</a>.<span title="(that: Sequence[GenMSIL.this.global.icodes.BasicBlock])List[GenMSIL.this.global.icodes.BasicBlock]">intersect</span>(<a href="#294512" title="List[GenMSIL.this.global.icodes.BasicBlock]">blocksToPut</a>)
      })
      <a href="#294516" title="(b: List[GenMSIL.this.global.icodes.BasicBlock])Unit">addBlocks</a>(<a href="#293239" title="List[GenMSIL.this.global.icodes.BasicBlock]">blocks</a>)

      <a href="#294504" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>.<a href="#293600" title="()Unit">close</a>()

      <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37759" title="=&gt; Boolean">value</a>) <a href="../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="java.lang.String(&quot;TopBlock tree is: &quot;)" class="string">&quot;TopBlock tree is: &quot;</span>)
      <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37759" title="=&gt; Boolean">value</a>) <a href="../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<a href="#294504" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>)

      <a href="#287679" title="=&gt; scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.BasicBlock,List[BytecodeGenerator.this.ExHInstruction]]">bb2exHInstructions</a>.<span title="()Unit">clear</span>
      <span class="keyword">def</span> <a title="(b: GenMSIL.this.global.icodes.BasicBlock,ehi: BytecodeGenerator.this.ExHInstruction)Unit" id="294517">addExHInstruction</a>(<a title="GenMSIL.this.global.icodes.BasicBlock" id="296323">b</a>: <a href="../icode/BasicBlocks.scala.html#46178" title="GenMSIL.this.global.icodes.BasicBlock">BasicBlock</a>, <a title="BytecodeGenerator.this.ExHInstruction" id="296324">ehi</a>: <a href="#287650" title="BytecodeGenerator.this.ExHInstruction">ExHInstruction</a>) = {
        <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37759" title="=&gt; Boolean">value</a>)
          <a href="../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;adding exhinstr: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#296323" title="GenMSIL.this.global.icodes.BasicBlock">b</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; -&gt; &quot;)" class="string">&quot; -&gt; &quot;</span> + <a href="#296324" title="BytecodeGenerator.this.ExHInstruction">ehi</a>)

        <span title="Unit" class="keyword">if</span> (<a href="#287679" title="=&gt; scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.BasicBlock,List[BytecodeGenerator.this.ExHInstruction]]">bb2exHInstructions</a>.<span title="(key: GenMSIL.this.global.icodes.BasicBlock)Boolean">contains</span>(<a href="#296323" title="GenMSIL.this.global.icodes.BasicBlock">b</a>)){
          <a href="#287679" title="(key: GenMSIL.this.global.icodes.BasicBlock,value: List[BytecodeGenerator.this.ExHInstruction])Unit">bb2exHInstructions</a>(<a href="#296323" title="GenMSIL.this.global.icodes.BasicBlock">b</a>) = <a href="#296324" title="BytecodeGenerator.this.ExHInstruction">ehi</a> <a href="#296344" title="BytecodeGenerator.this.ExHInstruction">::</a> <a href="#287679" title="(key: GenMSIL.this.global.icodes.BasicBlock)List[BytecodeGenerator.this.ExHInstruction]">bb2exHInstructions</a><span title="(x: BytecodeGenerator.this.ExHInstruction)List[BytecodeGenerator.this.ExHInstruction]">(</span><a href="#296323" title="GenMSIL.this.global.icodes.BasicBlock">b</a>)
        } <span class="keyword">else</span> {
          <a href="#287679" title="(key: GenMSIL.this.global.icodes.BasicBlock,value: List[BytecodeGenerator.this.ExHInstruction])Unit">bb2exHInstructions</a>(<a href="#296323" title="GenMSIL.this.global.icodes.BasicBlock">b</a>) = <span title="(xs: BytecodeGenerator.this.ExHInstruction*)List[BytecodeGenerator.this.ExHInstruction]">List</span>(<a href="#296324" title="BytecodeGenerator.this.ExHInstruction">ehi</a>)
        }
      }
      <a href="#287681" title="=&gt; scala.collection.mutable.HashSet[GenMSIL.this.global.icodes.BasicBlock]">omitJumpBlocks</a>.<a title="()Unit" id="39296">clear</a>
      <span class="keyword">def</span> <a title="(blk: GenMSIL.this.global.icodes.BasicBlock)scala.collection.mutable.HashSet[GenMSIL.this.global.icodes.BasicBlock]" id="294518">omitJump</a>(<a title="GenMSIL.this.global.icodes.BasicBlock" id="296387">blk</a>: <a href="../icode/BasicBlocks.scala.html#46178" title="GenMSIL.this.global.icodes.BasicBlock">BasicBlock</a>) = {
        <a href="#287681" title="(elem: GenMSIL.this.global.icodes.BasicBlock)BytecodeGenerator.this.omitJumpBlocks.type">omitJumpBlocks</a> += <a href="#296387" title="GenMSIL.this.global.icodes.BasicBlock">blk</a>
      }
      <span class="keyword">var</span> <a title="List[GenMSIL.this.global.icodes.BasicBlock]" id="294519">orderedBlocks</a>: <span title="List[GenMSIL.this.global.icodes.BasicBlock]">List</span>[BasicBlock] = <span title="object Nil">Nil</span>
      <span class="keyword">def</span> <a title="(block: BytecodeGenerator.this.Block)Unit" id="294520">flatten</a>(<a title="BytecodeGenerator.this.Block" id="296419">block</a>: <a href="#287663" title="BytecodeGenerator.this.Block">Block</a>) {
        <span title="Unit" class="keyword">if</span> (<a href="#296419" title="(x$1: AnyRef)Boolean">block</a> == <a href="#294504" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>) {
          <span class="keyword">for</span> (<a title="BytecodeGenerator.this.Block" id="296443">b</a> &lt;- <a href="#294504" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>.<a href="#293594" title="(f: (BytecodeGenerator.this.Block) =&gt; Unit)Unit">blocks</a>) <a href="#294520" title="(block: BytecodeGenerator.this.Block)Unit">flatten</a>(<a href="#296443" title="BytecodeGenerator.this.Block">b</a>)
        } <span class="keyword">else</span> <a href="#296419" title="BytecodeGenerator.this.Block">block</a> <span title="Unit" class="keyword">match</span> {
          <span title="Unit" class="keyword">case</span> <a title="BytecodeGenerator.this.CodeBlock" id="296449">cb</a>: <a href="#293665" title="BytecodeGenerator.this.CodeBlock">CodeBlock</a> =&gt;
            <a href="#294519" title="List[GenMSIL.this.global.icodes.BasicBlock]">orderedBlocks</a> = <a href="#294519" title="List[GenMSIL.this.global.icodes.BasicBlock]">orderedBlocks</a> <a href="#296450" title="List[GenMSIL.this.global.icodes.BasicBlock]">:::</a> <a href="#296449" title="BytecodeGenerator.this.CodeBlock">cb</a>.<a href="#293581" title="(prefix: List[GenMSIL.this.global.icodes.BasicBlock])List[GenMSIL.this.global.icodes.BasicBlock]">basicBlocks</a>
          <span title="Unit" class="keyword">case</span> <a title="BytecodeGenerator.this.BlockList" id="296458">bl</a>: <a href="#293985" title="BytecodeGenerator.this.BlockList">BlockList</a> =&gt;
            <span class="keyword">for</span> (<a title="BytecodeGenerator.this.Block" id="296476">b</a> &lt;- <a href="#296458" title="BytecodeGenerator.this.BlockList">bl</a>.<a href="#293594" title="(f: (BytecodeGenerator.this.Block) =&gt; Unit)Unit">blocks</a>) <a href="#294520" title="(block: BytecodeGenerator.this.Block)Unit">flatten</a>(<a href="#296476" title="BytecodeGenerator.this.Block">b</a>)
          <span title="Unit" class="keyword">case</span> <a title="BytecodeGenerator.this.CatchBlock" id="296482">cb</a>: <a href="#294418" title="BytecodeGenerator.this.CatchBlock">CatchBlock</a> =&gt;
            <span class="keyword">for</span> (<a title="BytecodeGenerator.this.Block" id="296500">b</a> &lt;- <a href="#296482" title="BytecodeGenerator.this.CatchBlock">cb</a>.<a href="#293594" title="(f: (BytecodeGenerator.this.Block) =&gt; Unit)Unit">blocks</a>) <a href="#294520" title="(block: BytecodeGenerator.this.Block)Unit">flatten</a>(<a href="#296500" title="BytecodeGenerator.this.Block">b</a>)
          <span title="Unit" class="keyword">case</span> <a title="BytecodeGenerator.this.ExceptionBlock" id="296506">eb</a>: <a href="#294324" title="BytecodeGenerator.this.ExceptionBlock">ExceptionBlock</a> =&gt;
            <span class="keyword">val</span> <a title="GenMSIL.this.global.icodes.ExceptionHandler" id="296507">handler</a> = <a href="#296506" title="BytecodeGenerator.this.ExceptionBlock">eb</a>.<a href="#302879" title="=&gt; GenMSIL.this.global.icodes.ExceptionHandler">handler</a>
            <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37759" title="=&gt; Boolean">value</a>) {
              <a href="../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;new exception block &quot;</span> + <a href="#296506" title="BytecodeGenerator.this.ExceptionBlock">eb</a>)
              <a href="../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;try: &quot;</span> + <a href="#296506" title="BytecodeGenerator.this.ExceptionBlock">eb</a>.<a href="#293738" title="=&gt; BytecodeGenerator.this.BlockList">tryBlock</a>)
            }
            <a href="#294517" title="(b: GenMSIL.this.global.icodes.BasicBlock,ehi: BytecodeGenerator.this.ExHInstruction)Unit">addExHInstruction</a>(<a href="#296506" title="BytecodeGenerator.this.ExceptionBlock">eb</a>.<a href="#293738" title="=&gt; BytecodeGenerator.this.BlockList">tryBlock</a>.<a href="#293596" title="=&gt; GenMSIL.this.global.icodes.BasicBlock">firstBasicBlock</a>, <span title="BytecodeGenerator.this.BeginExceptionBlock" class="keyword">new</span> <a href="#293295" title="BytecodeGenerator.this.BeginExceptionBlock">BeginExceptionBlock</a>(<a href="#296507" title="GenMSIL.this.global.icodes.ExceptionHandler">handler</a>))
            <a href="#294518" title="(blk: GenMSIL.this.global.icodes.BasicBlock)scala.collection.mutable.HashSet[GenMSIL.this.global.icodes.BasicBlock]">omitJump</a>(<a href="#296506" title="BytecodeGenerator.this.ExceptionBlock">eb</a>.<a href="#293738" title="=&gt; BytecodeGenerator.this.BlockList">tryBlock</a>.<a href="#293597" title="=&gt; GenMSIL.this.global.icodes.BasicBlock">lastBasicBlock</a>)
            <a href="#294520" title="(block: BytecodeGenerator.this.Block)Unit">flatten</a>(<a href="#296506" title="BytecodeGenerator.this.ExceptionBlock">eb</a>.<a href="#293738" title="=&gt; BytecodeGenerator.this.BlockList">tryBlock</a>)
            <span class="keyword">for</span> (<a title="BytecodeGenerator.this.CatchBlock" id="296545">c</a> &lt;- <a href="#296506" title="BytecodeGenerator.this.ExceptionBlock">eb</a>.<a href="#293741" title="(f: (BytecodeGenerator.this.CatchBlock) =&gt; Unit)Unit">catchBlocks</a>) {
              <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.Type" id="296546">t</a>: <span title="ch.epfl.lamp.compiler.msil.Type">MsilType</span> = (<span title="ch.epfl.lamp.compiler.msil.Type" class="keyword">if</span> (<a href="#296545" title="BytecodeGenerator.this.CatchBlock">c</a>.<a href="#302869" title="(x$1: AnyRef)Boolean">exSym</a> == <a href="../../symtab/Symbols.scala.html#26134" title="object GenMSIL.this.global.NoSymbol">NoSymbol</a>) <a href="#287543" title="=&gt; ch.epfl.lamp.compiler.msil.Type">EXCEPTION</a>
                                 <span class="keyword">else</span> <a href="#287725" title="(sym: GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.Type">getType</a>(<a href="#296545" title="BytecodeGenerator.this.CatchBlock">c</a>.<a href="#302869" title="=&gt; GenMSIL.this.global.Symbol">exSym</a>))
              <a href="#294517" title="(b: GenMSIL.this.global.icodes.BasicBlock,ehi: BytecodeGenerator.this.ExHInstruction)Unit">addExHInstruction</a>(<a href="#296545" title="BytecodeGenerator.this.CatchBlock">c</a>.<a href="#293596" title="=&gt; GenMSIL.this.global.icodes.BasicBlock">firstBasicBlock</a>, <span title="BytecodeGenerator.this.BeginCatchBlock" class="keyword">new</span> <a href="#293371" title="BytecodeGenerator.this.BeginCatchBlock">BeginCatchBlock</a>(<a href="#296507" title="GenMSIL.this.global.icodes.ExceptionHandler">handler</a>, <a href="#296546" title="ch.epfl.lamp.compiler.msil.Type">t</a>))
              <a href="#294518" title="(blk: GenMSIL.this.global.icodes.BasicBlock)scala.collection.mutable.HashSet[GenMSIL.this.global.icodes.BasicBlock]">omitJump</a>(<a href="#296545" title="BytecodeGenerator.this.CatchBlock">c</a>.<a href="#293597" title="=&gt; GenMSIL.this.global.icodes.BasicBlock">lastBasicBlock</a>)
              <a href="#294520" title="(block: BytecodeGenerator.this.Block)Unit">flatten</a>(<a href="#296545" title="BytecodeGenerator.this.CatchBlock">c</a>)
            }
            <span title="Unit" class="keyword">if</span> (<a href="#296507" title="GenMSIL.this.global.icodes.ExceptionHandler">handler</a>.<a href="../icode/ExceptionHandlers.scala.html#61438" title="(x$1: AnyRef)Boolean">finalizer</a> <span title="(x$1: Boolean)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span> &amp;&amp; <a href="#296507" title="GenMSIL.this.global.icodes.ExceptionHandler">handler</a>.<a href="../icode/ExceptionHandlers.scala.html#61438" title="(x$1: AnyRef)Boolean">finalizer</a> != <a href="../icode/ExceptionHandlers.scala.html#46238" title="object GenMSIL.this.global.icodes.NoFinalizer">NoFinalizer</a>) {
              <a href="#294517" title="(b: GenMSIL.this.global.icodes.BasicBlock,ehi: BytecodeGenerator.this.ExHInstruction)Unit">addExHInstruction</a>(<a href="#296506" title="BytecodeGenerator.this.ExceptionBlock">eb</a>.<a href="#293744" title="=&gt; BytecodeGenerator.this.BlockList">finallyBlock</a>.<a href="#293596" title="=&gt; GenMSIL.this.global.icodes.BasicBlock">firstBasicBlock</a>, <span title="BytecodeGenerator.this.BeginFinallyBlock" class="keyword">new</span> <a href="#293454" title="BytecodeGenerator.this.BeginFinallyBlock">BeginFinallyBlock</a>(<a href="#296507" title="GenMSIL.this.global.icodes.ExceptionHandler">handler</a>))
              <a href="#294520" title="(block: BytecodeGenerator.this.Block)Unit">flatten</a>(<a href="#296506" title="BytecodeGenerator.this.ExceptionBlock">eb</a>.<a href="#293744" title="=&gt; BytecodeGenerator.this.BlockList">finallyBlock</a>)
              <a href="#294517" title="(b: GenMSIL.this.global.icodes.BasicBlock,ehi: BytecodeGenerator.this.ExHInstruction)Unit">addExHInstruction</a>(<a href="#296506" title="BytecodeGenerator.this.ExceptionBlock">eb</a>.<a href="#293744" title="=&gt; BytecodeGenerator.this.BlockList">finallyBlock</a>.<a href="#293597" title="=&gt; GenMSIL.this.global.icodes.BasicBlock">lastBasicBlock</a>, <span title="BytecodeGenerator.this.EndExceptionBlock" class="keyword">new</span> <a href="#293520" title="BytecodeGenerator.this.EndExceptionBlock">EndExceptionBlock</a>(<a href="#296507" title="GenMSIL.this.global.icodes.ExceptionHandler">handler</a>))
              <a href="#294518" title="(blk: GenMSIL.this.global.icodes.BasicBlock)scala.collection.mutable.HashSet[GenMSIL.this.global.icodes.BasicBlock]">omitJump</a><span title="Unit">(</span><a href="#296506" title="BytecodeGenerator.this.ExceptionBlock">eb</a>.<a href="#293744" title="=&gt; BytecodeGenerator.this.BlockList">finallyBlock</a>.<a href="#293597" title="=&gt; GenMSIL.this.global.icodes.BasicBlock">lastBasicBlock</a>)
            } <span class="keyword">else</span> {
              <a href="#294517" title="(b: GenMSIL.this.global.icodes.BasicBlock,ehi: BytecodeGenerator.this.ExHInstruction)Unit">addExHInstruction</a>(<a href="#296506" title="BytecodeGenerator.this.ExceptionBlock">eb</a>.<a href="#293741" title="=&gt; List[BytecodeGenerator.this.CatchBlock]">catchBlocks</a>.<span title="=&gt; BytecodeGenerator.this.CatchBlock">last</span>.<a href="#293597" title="=&gt; GenMSIL.this.global.icodes.BasicBlock">lastBasicBlock</a>, <span title="BytecodeGenerator.this.EndExceptionBlock" class="keyword">new</span> <a href="#293520" title="BytecodeGenerator.this.EndExceptionBlock">EndExceptionBlock</a>(<a href="#296507" title="GenMSIL.this.global.icodes.ExceptionHandler">handler</a>))
            }
        }
      }

      <a href="#294520" title="(block: BytecodeGenerator.this.Block)Unit">flatten</a>(<a href="#294504" title="object BytecodeGenerator.this.TopBlock">TopBlock</a>)

      <span title="(assertion: Boolean,message: =&gt; Any)Unit">assert</span>(<a href="#294514" title="List[GenMSIL.this.global.icodes.ExceptionHandler]">untreatedHandlers</a>.<span title="(p: (GenMSIL.this.global.icodes.ExceptionHandler) =&gt; Boolean)Boolean">forall</span>((<a title="GenMSIL.this.global.icodes.ExceptionHandler" id="296616">h</a>) =&gt; <a href="#296616" title="GenMSIL.this.global.icodes.ExceptionHandler">h</a>.<a href="../icode/ExceptionHandlers.scala.html#61446" title="=&gt; scala.collection.immutable.Set[GenMSIL.this.global.icodes.BasicBlock]">covered</a>.<span title="=&gt; Boolean">isEmpty</span>),
             <span title="(x$1: Any)java.lang.String" class="string">&quot;untreated exception handlers left: &quot;</span> + <a href="#294514" title="List[GenMSIL.this.global.icodes.ExceptionHandler]">untreatedHandlers</a>)
      // remove catch blocks from empty handlers (finally-blocks remain)
      <a href="#294514" title="List[GenMSIL.this.global.icodes.ExceptionHandler]">untreatedHandlers</a>.<span title="(f: (GenMSIL.this.global.icodes.ExceptionHandler) =&gt; Unit)Unit">foreach</span>((<a title="GenMSIL.this.global.icodes.ExceptionHandler" id="296641">h</a>) =&gt; {
        <a href="#294519" title="List[GenMSIL.this.global.icodes.BasicBlock]">orderedBlocks</a> = <a href="#294519" title="(that: List[GenMSIL.this.global.icodes.BasicBlock])List[GenMSIL.this.global.icodes.BasicBlock]">orderedBlocks</a> -- <a href="#296641" title="GenMSIL.this.global.icodes.ExceptionHandler">h</a>.<a href="../icode/ExceptionHandlers.scala.html#61451" title="=&gt; List[GenMSIL.this.global.icodes.BasicBlock]">blocks</a>
      })

      // take care of order in which exHInstructions are executed (BeginExceptionBlock as last)
      <a href="#287679" title="=&gt; scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.BasicBlock,List[BytecodeGenerator.this.ExHInstruction]]">bb2exHInstructions</a>.<span title="=&gt; Iterator[GenMSIL.this.global.icodes.BasicBlock]">keysIterator</span>.<span title="(f: (GenMSIL.this.global.icodes.BasicBlock) =&gt; List[BytecodeGenerator.this.ExHInstruction])Unit">foreach</span>((<a title="GenMSIL.this.global.icodes.BasicBlock" id="296656">b</a>) =&gt; {
        <a href="#287679" title="(key: GenMSIL.this.global.icodes.BasicBlock)List[BytecodeGenerator.this.ExHInstruction]">bb2exHInstructions</a>(<a href="#296656" title="GenMSIL.this.global.icodes.BasicBlock">b</a>).<span title="(lt: (BytecodeGenerator.this.ExHInstruction, BytecodeGenerator.this.ExHInstruction) =&gt; Boolean)List[BytecodeGenerator.this.ExHInstruction]">sort</span>((<a title="BytecodeGenerator.this.ExHInstruction" id="296673">i1</a>, <a title="BytecodeGenerator.this.ExHInstruction" id="296674">i2</a>) =&gt; (<span title="=&gt; Boolean">!</span><a href="#296673" title="BytecodeGenerator.this.ExHInstruction">i1</a>.<a title="[T0]Boolean" id="3620">isInstanceOf</a><span title="Boolean">[</span><a href="#293295" title="BytecodeGenerator.this.BeginExceptionBlock">BeginExceptionBlock</a>]))
      })


      <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37759" title="=&gt; Boolean">value</a>){
        <a href="../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;after: &quot;</span> + <a href="#294519" title="List[GenMSIL.this.global.icodes.BasicBlock]">orderedBlocks</a>)
        <a href="../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot; exhInstr: &quot;</span> + <a href="#287679" title="=&gt; scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.BasicBlock,List[BytecodeGenerator.this.ExHInstruction]]">bb2exHInstructions</a>)
      }

      <a href="#294519" title="List[GenMSIL.this.global.icodes.BasicBlock]">orderedBlocks</a>
    }

    <span class="keyword">var</span> <a title="GenMSIL.this.global.icodes.BasicBlock" id="287685">currentBlock</a>: <a href="../icode/BasicBlocks.scala.html#46178" title="GenMSIL.this.global.icodes.BasicBlock">BasicBlock</a> = _
    <span class="keyword">var</span> <a title="GenMSIL.this.global.icodes.BasicBlock" id="287688">lastBlock</a>: <a href="../icode/BasicBlocks.scala.html#46178" title="GenMSIL.this.global.icodes.BasicBlock">BasicBlock</a> = _
    <span class="keyword">var</span> <a title="GenMSIL.this.global.icodes.BasicBlock" id="287691">nextBlock</a>: <a href="../icode/BasicBlocks.scala.html#46178" title="GenMSIL.this.global.icodes.BasicBlock">BasicBlock</a> = _

    <span class="keyword">def</span> <a title="(l: List[GenMSIL.this.global.icodes.BasicBlock])Unit" id="287693">genBlocks</a>(<a title="List[GenMSIL.this.global.icodes.BasicBlock]" id="293248">l</a>: <span title="List[GenMSIL.this.global.icodes.BasicBlock]">List</span>[BasicBlock]) {
      <a href="#293248" title="List[GenMSIL.this.global.icodes.BasicBlock]">l</a> <span title="Unit" class="keyword">match</span> {
        <span title="Unit" class="keyword">case</span> <span title="object Nil">Nil</span> =&gt; <span title="Unit">(</span>)
        <span title="Unit" class="keyword">case</span> <a title="GenMSIL.this.global.icodes.BasicBlock" id="296694">x</a> :: <span title="object Nil">Nil</span> =&gt; <a href="#287685" title="(x$1: GenMSIL.this.global.icodes.BasicBlock)Unit">currentBlock</a> = <a href="#296694" title="GenMSIL.this.global.icodes.BasicBlock">x</a>; <a href="#287691" title="(x$1: GenMSIL.this.global.icodes.BasicBlock)Unit">nextBlock</a> = <span title="Null(null)" class="keyword">null</span>; <a href="#287699" title="(b: GenMSIL.this.global.icodes.BasicBlock)Unit">genBlock</a>(<a href="#296694" title="GenMSIL.this.global.icodes.BasicBlock">x</a>)
        <span title="Unit" class="keyword">case</span> <a title="GenMSIL.this.global.icodes.BasicBlock" id="296709">x</a> :: <a title="GenMSIL.this.global.icodes.BasicBlock" id="296714">y</a> :: <a title="List[GenMSIL.this.global.icodes.BasicBlock]" id="296715">ys</a> =&gt; <a href="#287685" title="(x$1: GenMSIL.this.global.icodes.BasicBlock)Unit">currentBlock</a> = <a href="#296709" title="GenMSIL.this.global.icodes.BasicBlock">x</a>; <a href="#287691" title="(x$1: GenMSIL.this.global.icodes.BasicBlock)Unit">nextBlock</a> = <a href="#296714" title="GenMSIL.this.global.icodes.BasicBlock">y</a>; <a href="#287699" title="(b: GenMSIL.this.global.icodes.BasicBlock)Unit">genBlock</a>(<a href="#296709" title="GenMSIL.this.global.icodes.BasicBlock">x</a>); <a href="#287693" title="(l: List[GenMSIL.this.global.icodes.BasicBlock])Unit">genBlocks</a>(<a href="#296714" title="GenMSIL.this.global.icodes.BasicBlock">y</a> <a href="#296726" title="GenMSIL.this.global.icodes.BasicBlock">::</a> <a href="#296715" title="(x: GenMSIL.this.global.icodes.BasicBlock)List[GenMSIL.this.global.icodes.BasicBlock]">ys</a>)
      }
    }

    <span class="keyword">var</span> <a title="Boolean" id="287695">ignoreNextDup</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.Stack[ch.epfl.lamp.compiler.msil.emit.LocalBuilder]" id="287697">excResultLocals</a>: <span title="scala.collection.mutable.Stack[ch.epfl.lamp.compiler.msil.emit.LocalBuilder]">Stack</span>[LocalBuilder] = <a title="()scala.collection.mutable.Stack[ch.epfl.lamp.compiler.msil.emit.LocalBuilder]" id="79084" class="keyword">new</a> <span title="scala.collection.mutable.Stack[ch.epfl.lamp.compiler.msil.emit.LocalBuilder]">Stack</span>()

    <span class="keyword">def</span> <a title="(b: GenMSIL.this.global.icodes.BasicBlock)Unit" id="287699">genBlock</a>(<a title="GenMSIL.this.global.icodes.BasicBlock" id="296701">b</a>: <a href="../icode/BasicBlocks.scala.html#46178" title="GenMSIL.this.global.icodes.BasicBlock">BasicBlock</a>) {
      // at begin of the first block, there's nothing to save =&gt;
      //  lastBlock != null is secure
      <span class="keyword">def</span> <a title="(resType: ch.epfl.lamp.compiler.msil.Type)Unit" id="296740">saveResult</a>(<a title="ch.epfl.lamp.compiler.msil.Type" id="296742">resType</a>: <span title="ch.epfl.lamp.compiler.msil.Type">MsilType</span>) = <span title="Unit" class="keyword">if</span> (<a href="#296742" title="(x$1: AnyRef)Boolean">resType</a> <span title="(x$1: Boolean)Boolean">!=</span> <a href="../../symtab/clr/CLRTypes.scala.html#287429" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MVOID</a> &amp;&amp; <a href="#287688" title="(x$1: AnyRef)Boolean">lastBlock</a> != <span title="Null(null)" class="keyword">null</span>) {
        <a href="#287688" title="=&gt; GenMSIL.this.global.icodes.BasicBlock">lastBlock</a>.<a href="../icode/BasicBlocks.scala.html#61341" title="=&gt; GenMSIL.this.global.icodes.Instruction">lastInstruction</a> <span title="Unit" class="keyword">match</span> {
          <span title="Unit" class="keyword">case</span> THROW() =&gt; <span title="Unit">(</span>)
          <span title="Unit" class="keyword">case</span> _ =&gt;
            <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.LocalBuilder" id="296760">lb</a>: <span title="ch.epfl.lamp.compiler.msil.emit.LocalBuilder">LocalBuilder</span> = <a href="#287697" title="=&gt; scala.collection.mutable.Stack[ch.epfl.lamp.compiler.msil.emit.LocalBuilder]">excResultLocals</a>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.LocalBuilder" id="79103">top</a>
            <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.emit.LocalBuilder)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Stloc</span>, <a href="#296760" title="ch.epfl.lamp.compiler.msil.emit.LocalBuilder">lb</a>)
        }
      }

      <span title="Unit" class="keyword">if</span> (<a href="#287679" title="=&gt; scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.BasicBlock,List[BytecodeGenerator.this.ExHInstruction]]">bb2exHInstructions</a>.<span title="(key: GenMSIL.this.global.icodes.BasicBlock)Boolean">contains</span>(<a href="#296701" title="GenMSIL.this.global.icodes.BasicBlock">b</a>)){
        <a href="#287679" title="(key: GenMSIL.this.global.icodes.BasicBlock)List[BytecodeGenerator.this.ExHInstruction]">bb2exHInstructions</a>(<a href="#296701" title="GenMSIL.this.global.icodes.BasicBlock">b</a>).<span title="(f: (BytecodeGenerator.this.ExHInstruction) =&gt; Any)Unit">foreach</span>((<a title="BytecodeGenerator.this.ExHInstruction" id="296805">i</a>) =&gt; <a href="#296805" title="BytecodeGenerator.this.ExHInstruction">i</a> <span title="Any" class="keyword">match</span> {
          <span title="Any" class="keyword">case</span> BeginExceptionBlock(<a title="GenMSIL.this.global.icodes.ExceptionHandler" id="296806">handler</a>) =&gt;
            <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37759" title="=&gt; Boolean">value</a>) <a href="../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;begin ex blk: &quot;</span> + <a href="#296806" title="GenMSIL.this.global.icodes.ExceptionHandler">handler</a>)
            <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<a title="()Unit" id="288823">BeginExceptionBlock</a>()
            <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.Type" id="296809">resType</a> = <a href="#287722" title="(t: GenMSIL.this.global.icodes.TypeKind)ch.epfl.lamp.compiler.msil.Type">msilType</a>(<a href="#296806" title="GenMSIL.this.global.icodes.ExceptionHandler">handler</a>.<a href="../icode/ExceptionHandlers.scala.html#61441" title="=&gt; GenMSIL.this.global.icodes.TypeKind">resultKind</a>)
            <span title="Any" class="keyword">if</span> (<a href="#296809" title="(x$1: AnyRef)Boolean">resType</a> != <a href="../../symtab/clr/CLRTypes.scala.html#287429" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MVOID</a>) {
              <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.LocalBuilder" id="296831">l</a> = <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(localType: ch.epfl.lamp.compiler.msil.Type)ch.epfl.lamp.compiler.msil.emit.LocalBuilder">DeclareLocal</span>(<a href="#296809" title="ch.epfl.lamp.compiler.msil.Type">resType</a>)
              <a href="#296831" title="ch.epfl.lamp.compiler.msil.emit.LocalBuilder">l</a>.<span title="(name: String)Unit">SetLocalSymInfo</span>(<span title="java.lang.String(&quot;$exhResult&quot;)" class="string">&quot;$exhResult&quot;</span>)
              <a href="#287697" title="=&gt; scala.collection.mutable.Stack[ch.epfl.lamp.compiler.msil.emit.LocalBuilder]">excResultLocals</a>.<a title="(elem: ch.epfl.lamp.compiler.msil.emit.LocalBuilder)BytecodeGenerator.this.excResultLocals.type" id="79089">push</a>(<a href="#296831" title="ch.epfl.lamp.compiler.msil.emit.LocalBuilder">l</a>)
            }
          <span title="Unit" class="keyword">case</span> BeginCatchBlock(<a title="GenMSIL.this.global.icodes.ExceptionHandler" id="296851">handler</a>, <a title="ch.epfl.lamp.compiler.msil.Type" id="296852">exType</a>) =&gt;
            <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37759" title="=&gt; Boolean">value</a>) <a href="../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;begin catch blk: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#296851" title="GenMSIL.this.global.icodes.ExceptionHandler">handler</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;, tpe: &quot;)" class="string">&quot;, tpe: &quot;</span> + <a href="#296852" title="ch.epfl.lamp.compiler.msil.Type">exType</a>)
            <a href="#296740" title="(resType: ch.epfl.lamp.compiler.msil.Type)Unit">saveResult</a>(<a href="#287722" title="(t: GenMSIL.this.global.icodes.TypeKind)ch.epfl.lamp.compiler.msil.Type">msilType</a>(<a href="#296851" title="GenMSIL.this.global.icodes.ExceptionHandler">handler</a>.<a href="../icode/ExceptionHandlers.scala.html#61441" title="=&gt; GenMSIL.this.global.icodes.TypeKind">resultKind</a>))
            <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<a title="(exceptionType: ch.epfl.lamp.compiler.msil.Type)Unit" id="288824">BeginCatchBlock</a>(<a href="#296852" title="ch.epfl.lamp.compiler.msil.Type">exType</a>)
          <span title="Unit" class="keyword">case</span> BeginFinallyBlock(<a title="GenMSIL.this.global.icodes.ExceptionHandler" id="296876">handler</a>) =&gt;
            <a href="#296740" title="(resType: ch.epfl.lamp.compiler.msil.Type)Unit">saveResult</a>(<a href="#287722" title="(t: GenMSIL.this.global.icodes.TypeKind)ch.epfl.lamp.compiler.msil.Type">msilType</a>(<a href="#296876" title="GenMSIL.this.global.icodes.ExceptionHandler">handler</a>.<a href="../icode/ExceptionHandlers.scala.html#61441" title="=&gt; GenMSIL.this.global.icodes.TypeKind">resultKind</a>))
            <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<a title="()Unit" id="288827">BeginFinallyBlock</a>()
          <span title="Unit" class="keyword">case</span> EndExceptionBlock(<a title="GenMSIL.this.global.icodes.ExceptionHandler" id="296890">handler</a>) =&gt; <span title="Unit">(</span>)
          <span title="Nothing" class="keyword">case</span> _ =&gt; <a href="../../Global.scala.html#39077" title="(msg: String)Nothing">abort</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;unknown case: &quot;</span> + <a href="#296805" title="BytecodeGenerator.this.ExHInstruction">i</a>)
        })
      }

      <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<a title="(label: ch.epfl.lamp.compiler.msil.emit.Label)Unit" id="288819">MarkLabel</a>(<a href="#287704" title="(key: GenMSIL.this.global.icodes.BasicBlock)ch.epfl.lamp.compiler.msil.emit.Label">labels</a>(<a href="#296701" title="GenMSIL.this.global.icodes.BasicBlock">b</a>))
      <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37759" title="=&gt; Boolean">value</a>)
        <a href="../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Generating code for block: &quot;</span> + <a href="#296701" title="GenMSIL.this.global.icodes.BasicBlock">b</a>)

      <span class="keyword">var</span> <a title="Int" id="296741">lastLineNr</a>: <span title="Int">Int</span> = <span title="Int(0)" class="int">0</span>

      <span class="keyword">for</span> (<a title="GenMSIL.this.global.icodes.Instruction" id="296938">instr</a> &lt;- <a href="../icode/BasicBlocks.scala.html#61318" title="(f: (GenMSIL.this.global.icodes.Instruction) =&gt; Unit)Unit">b</a>) {

        <a href="#287647" title="(x$1: Boolean)Unit">needAdditionalRet</a> = <span title="Boolean(false)" class="keyword">false</span>
        
	<span class="keyword">val</span> <a title="Int" id="296939">currentLineNr</a> = <a href="#296938" title="GenMSIL.this.global.icodes.Instruction">instr</a>.<a href="../icode/Opcodes.scala.html#61473" title="=&gt; scala.tools.nsc.util.Position">pos</a>.<a href="../../util/Position.scala.html#30304" title="=&gt; Int">line</a>

        <span title="Unit" class="keyword">if</span> (<a href="#296939" title="(x$1: Int)Boolean">currentLineNr</a> != <a href="#296741" title="Int">lastLineNr</a>) {
          <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<a title="(line: Int)Unit" id="288830">setPosition</a>(<a href="#296939" title="Int">currentLineNr</a>)
          <a href="#296741" title="Int">lastLineNr</a> = <a href="#296939" title="Int">currentLineNr</a>
        }

        <a href="#296938" title="GenMSIL.this.global.icodes.Instruction">instr</a> <span title="Unit" class="keyword">match</span> {
          <span title="Unit" class="keyword">case</span> THIS(<a title="GenMSIL.this.global.icodes.global.Symbol" id="296953">clasz</a>) =&gt;
            <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ldarg_0</span>)

          <span title="Unit" class="keyword">case</span> CONSTANT(<a title="GenMSIL.this.global.icodes.global.Constant" id="296961">const</a>) =&gt;
            <a href="#296961" title="GenMSIL.this.global.icodes.global.Constant">const</a>.<a href="../../symtab/Constants.scala.html#42809" title="=&gt; Int">tag</a> <span title="Unit" class="keyword">match</span> {
              <span title="Unit" class="keyword">case</span> <span title="Int(1)">UnitTag</span>    =&gt; <span title="Unit">(</span>)
              <span title="Unit" class="keyword">case</span> <span title="Int(2)">BooleanTag</span> =&gt; <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="ch.epfl.lamp.compiler.msil.emit.OpCode" class="keyword">if</span> (<a href="#296961" title="GenMSIL.this.global.icodes.global.Constant">const</a>.<a href="../../symtab/Constants.scala.html#42813" title="=&gt; Boolean">booleanValue</a>) <span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ldc_I4_1</span>
                                            <span class="keyword">else</span> <span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ldc_I4_0</span>)
              <span title="Unit" class="keyword">case</span> <span title="Int(3)">ByteTag</span>    =&gt; <a href="#287701" title="(value: Int,code: ch.epfl.lamp.compiler.msil.emit.ILGenerator)Unit">loadI4</a>(<a href="#296961" title="GenMSIL.this.global.icodes.global.Constant">const</a>.<a href="../../symtab/Constants.scala.html#42814" title="implicit scala.Predef.byte2int : (x: Byte)Int" id="8113">byteValue</a>, <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>)
              <span title="Unit" class="keyword">case</span> <span title="Int(4)">ShortTag</span>   =&gt; <a href="#287701" title="(value: Int,code: ch.epfl.lamp.compiler.msil.emit.ILGenerator)Unit">loadI4</a>(<a href="#296961" title="GenMSIL.this.global.icodes.global.Constant">const</a>.<a href="../../symtab/Constants.scala.html#42815" title="implicit scala.Predef.short2int : (x: Short)Int" id="8121">shortValue</a>, <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>)
              <span title="Unit" class="keyword">case</span> <span title="Int(5)">CharTag</span>    =&gt; <a href="#287701" title="(value: Int,code: ch.epfl.lamp.compiler.msil.emit.ILGenerator)Unit">loadI4</a>(<a href="#296961" title="GenMSIL.this.global.icodes.global.Constant">const</a>.<a href="../../symtab/Constants.scala.html#42816" title="implicit scala.Predef.char2int : (x: Char)Int" id="8129">charValue</a>, <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>)
              <span title="Unit" class="keyword">case</span> <span title="Int(6)">IntTag</span>     =&gt; <a href="#287701" title="(value: Int,code: ch.epfl.lamp.compiler.msil.emit.ILGenerator)Unit">loadI4</a>(<a href="#296961" title="GenMSIL.this.global.icodes.global.Constant">const</a>.<a href="../../symtab/Constants.scala.html#42817" title="=&gt; Int">intValue</a>, <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>)
              <span title="Unit" class="keyword">case</span> <span title="Int(7)">LongTag</span>    =&gt; <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<a title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: Long)Unit" id="288785">Emit</a>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292275">Ldc_I8</a>, <a href="#296961" title="GenMSIL.this.global.icodes.global.Constant">const</a>.<a href="../../symtab/Constants.scala.html#42818" title="=&gt; Long">longValue</a>)
              <span title="Unit" class="keyword">case</span> <span title="Int(8)">FloatTag</span>   =&gt; <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<a title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: Float)Unit" id="288797">Emit</a>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292277">Ldc_R4</a>, <a href="#296961" title="GenMSIL.this.global.icodes.global.Constant">const</a>.<a href="../../symtab/Constants.scala.html#42819" title="=&gt; Float">floatValue</a>)
              <span title="Unit" class="keyword">case</span> <span title="Int(9)">DoubleTag</span>  =&gt; <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<a title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: Double)Unit" id="288773">Emit</a>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292279">Ldc_R8</a>, <a href="#296961" title="GenMSIL.this.global.icodes.global.Constant">const</a>.<a href="../../symtab/Constants.scala.html#42820" title="=&gt; Double">doubleValue</a>)
              <span title="Unit" class="keyword">case</span> <span title="Int(10)">StringTag</span>  =&gt; <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<a title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: String)Unit" id="288800">Emit</a>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292433">Ldstr</a>, <a href="#296961" title="GenMSIL.this.global.icodes.global.Constant">const</a>.<a href="../../symtab/Constants.scala.html#42822" title="=&gt; String">stringValue</a>)
              <span title="Unit" class="keyword">case</span> <span title="Int(11)">NullTag</span>    =&gt; <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ldnull</span>)
              <span title="Unit" class="keyword">case</span> <span title="Int(12)">ClassTag</span>   =&gt;
                <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.Type)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292551">Ldtoken</a>, <a href="#287723" title="(tpe: GenMSIL.this.global.Type)ch.epfl.lamp.compiler.msil.Type">msilType</a>(<a href="#296961" title="GenMSIL.this.global.icodes.global.Constant">const</a>.<a href="../../symtab/Constants.scala.html#42824" title="=&gt; GenMSIL.this.global.icodes.global.Type">typeValue</a>))
                <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.MethodInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Call</span>, <a href="#287563" title="=&gt; ch.epfl.lamp.compiler.msil.MethodInfo">TYPE_FROM_HANDLE</a>)
              <span title="Nothing" class="keyword">case</span> _          =&gt; <a href="../../Global.scala.html#39077" title="(msg: String)Nothing">abort</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Unknown constant value: &quot;</span> + <a href="#296961" title="GenMSIL.this.global.icodes.global.Constant">const</a>)
            }

          <span title="Unit" class="keyword">case</span> LOAD_ARRAY_ITEM(<a title="GenMSIL.this.global.icodes.TypeKind" id="297073">kind</a>) =&gt;
            (<a href="#297073" title="GenMSIL.this.global.icodes.TypeKind">kind</a>: @<a href="../icode/TypeKinds.scala.html#46199" title="GenMSIL.this.global.icodes.TypeKind @unchecked">unchecked</a>) <span title="Unit" class="keyword">match</span> {
              <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46203" title="object GenMSIL.this.global.icodes.BOOL">BOOL</a>           =&gt; <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292491">Ldelem_I1</a>)
              <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46205" title="object GenMSIL.this.global.icodes.BYTE">BYTE</a>           =&gt; <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292505">Ldelem_U1</a>)
              <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46207" title="object GenMSIL.this.global.icodes.SHORT">SHORT</a>          =&gt; <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292493">Ldelem_I2</a>)
              <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46209" title="object GenMSIL.this.global.icodes.CHAR">CHAR</a>           =&gt; <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292507">Ldelem_U2</a>)
              <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46211" title="object GenMSIL.this.global.icodes.INT">INT</a>            =&gt; <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292495">Ldelem_I4</a>)
              <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46213" title="object GenMSIL.this.global.icodes.LONG">LONG</a>           =&gt; <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292497">Ldelem_I8</a>)
              <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46215" title="object GenMSIL.this.global.icodes.FLOAT">FLOAT</a>          =&gt; <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292499">Ldelem_R4</a>)
              <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46217" title="object GenMSIL.this.global.icodes.DOUBLE">DOUBLE</a>         =&gt; <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292501">Ldelem_R8</a>)
              <span title="Unit" class="keyword">case</span> REFERENCE(<a title="GenMSIL.this.global.icodes.global.Symbol" id="297111">cls</a>) =&gt; <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292503">Ldelem_Ref</a>)

              // case ARRAY(elem) is not possible, for Array[Array[Int]], the
              //  load will be case REFERENCE(java.lang.Object)

              // case UNIT is not possible: an Array[Unit] will be an
              //  Array[scala.runtime.BoxedUnit] (-&gt; case REFERENCE)
            }

          <span title="Unit" class="keyword">case</span> LOAD_LOCAL(<a title="GenMSIL.this.global.icodes.Local" id="297119">local</a>) =&gt;
            <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37759" title="=&gt; Boolean">value</a>)
              <a href="../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;load_local for &quot;</span> + <a href="#297119" title="GenMSIL.this.global.icodes.Local">local</a>)
            <span class="keyword">val</span> <a title="Boolean" id="297122">isArg</a>: <span title="Boolean">Boolean</span> = <a href="#297119" title="GenMSIL.this.global.icodes.Local">local</a>.<a href="../icode/Members.scala.html#60755" title="=&gt; Boolean">arg</a>
            <span class="keyword">val</span> <a title="Int" id="297123">i</a> = <a href="#297119" title="GenMSIL.this.global.icodes.Local">local</a>.<a href="../icode/Members.scala.html#60758" title="=&gt; Int">index</a>
            <span title="Unit" class="keyword">if</span> (<a href="#297122" title="Boolean">isArg</a>) {
              <a href="#287702" title="(code: ch.epfl.lamp.compiler.msil.emit.ILGenerator)(i: Int)Unit">loadArg</a>(<a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>)(<a href="#297123" title="Int">i</a>)
            }
            <span class="keyword">else</span> {
              <a href="#287703" title="(i: Int,local: GenMSIL.this.global.icodes.Local,code: ch.epfl.lamp.compiler.msil.emit.ILGenerator)Unit">loadLocal</a>(<a href="#297123" title="Int">i</a>, <a href="#297119" title="GenMSIL.this.global.icodes.Local">local</a>, <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>)
            }

          <span title="Unit" class="keyword">case</span> LOAD_FIELD(<a title="GenMSIL.this.global.icodes.global.Symbol" id="297275">field</a>, <a title="Boolean" id="297276">isStatic</a>) =&gt;
            <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37759" title="=&gt; Boolean">value</a>)
              <a href="../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;LOAD_FIELD with owner: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#297275" title="GenMSIL.this.global.icodes.global.Symbol">field</a>.<a href="../../symtab/Symbols.scala.html#26983" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">owner</a> <span title="(x$1: Any)java.lang.String">+</span>
                  <span title="java.lang.String(&quot; flags: &quot;)" class="string">&quot; flags: &quot;</span> + <a href="../../symtab/Flags.scala.html#10413" title="object scala.tools.nsc.symtab.Flags">Flags</a>.<a href="../../symtab/Flags.scala.html#28814" title="(flags: Long)String">flagsToString</a>(<a href="#297275" title="GenMSIL.this.global.icodes.global.Symbol">field</a>.<a href="../../symtab/Symbols.scala.html#26983" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">owner</a>.<a href="../../symtab/Symbols.scala.html#26991" title="=&gt; Long">flags</a>))

            <span class="keyword">var</span> <a title="ch.epfl.lamp.compiler.msil.FieldInfo" id="297279">fieldInfo</a>: <span title="ch.epfl.lamp.compiler.msil.FieldInfo">FieldInfo</span> = <a href="../../symtab/clr/CLRTypes.scala.html#287471" title="=&gt; scala.collection.mutable.Map[GenMSIL.this.global.loaders.clrTypes.global.Symbol,ch.epfl.lamp.compiler.msil.FieldInfo]">fields</a>.<span title="(key: GenMSIL.this.global.loaders.clrTypes.global.Symbol)Option[ch.epfl.lamp.compiler.msil.FieldInfo]">get</span>(<a href="#297275" title="GenMSIL.this.global.icodes.global.Symbol">field</a>.<span title="[T0]T0">asInstanceOf</span><span title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">[</span>clrTypes.global.<a href="../../symtab/Symbols.scala.html#26127" title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">Symbol</a>]) <span title="ch.epfl.lamp.compiler.msil.FieldInfo" class="keyword">match</span> {
              <span title="ch.epfl.lamp.compiler.msil.FieldInfo" class="keyword">case</span> Some(<a title="ch.epfl.lamp.compiler.msil.FieldInfo" id="297298">fInfo</a>) =&gt; <a href="#297298" title="ch.epfl.lamp.compiler.msil.FieldInfo">fInfo</a>
              <span title="ch.epfl.lamp.compiler.msil.FieldInfo" class="keyword">case</span> <span title="object None">None</span> =&gt;
                <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.FieldInfo" id="297301">fInfo</a> = <a href="#287725" title="(sym: GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.Type">getType</a>(<a href="#297275" title="GenMSIL.this.global.icodes.global.Symbol">field</a>.<a href="../../symtab/Symbols.scala.html#26983" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">owner</a>).<span title="(x$1: java.lang.String)ch.epfl.lamp.compiler.msil.FieldInfo">GetField</span>(<a href="#287710" title="(sym: GenMSIL.this.global.Symbol)String">msilName</a>(<a href="#297275" title="GenMSIL.this.global.icodes.global.Symbol">field</a>))
                <a href="../../symtab/clr/CLRTypes.scala.html#287471" title="(key: GenMSIL.this.global.loaders.clrTypes.global.Symbol,value: ch.epfl.lamp.compiler.msil.FieldInfo)Unit">fields</a>(<a href="#297275" title="GenMSIL.this.global.icodes.global.Symbol">field</a>.<span title="[T0]T0">asInstanceOf</span><span title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">[</span>clrTypes.global.<a href="../../symtab/Symbols.scala.html#26127" title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">Symbol</a>]) = <a href="#297301" title="ch.epfl.lamp.compiler.msil.FieldInfo">fInfo</a>
                <a href="#297301" title="ch.epfl.lamp.compiler.msil.FieldInfo">fInfo</a>
            }
            <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.FieldInfo)Unit">Emit</span>(<span title="ch.epfl.lamp.compiler.msil.emit.OpCode" class="keyword">if</span> (<a href="#297276" title="Boolean">isStatic</a>) <span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ldsfld</span> <span class="keyword">else</span> <span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292447">Ldfld</a>, <a href="#297279" title="ch.epfl.lamp.compiler.msil.FieldInfo">fieldInfo</a>)


          <span title="Unit" class="keyword">case</span> LOAD_MODULE(<a title="GenMSIL.this.global.icodes.global.Symbol" id="297325">module</a>) =&gt;
            <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37759" title="=&gt; Boolean">value</a>)
              <a href="../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Generating LOAD_MODULE for: &quot;</span> + <a href="#287757" title="(sym: GenMSIL.this.global.Symbol)String">showsym</a>(<a href="#297325" title="GenMSIL.this.global.icodes.global.Symbol">module</a>))
            <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.FieldInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ldsfld</span>, <a href="#287734" title="(sym: GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.FieldInfo">getModuleInstanceField</a>(<a href="#297325" title="GenMSIL.this.global.icodes.global.Symbol">module</a>))

          <span title="Unit" class="keyword">case</span> STORE_ARRAY_ITEM(<a title="GenMSIL.this.global.icodes.TypeKind" id="297351">kind</a>) =&gt;
            (<a href="#297351" title="GenMSIL.this.global.icodes.TypeKind">kind</a>: @<a href="../icode/TypeKinds.scala.html#46199" title="GenMSIL.this.global.icodes.TypeKind @unchecked">unchecked</a>) <span title="Unit" class="keyword">match</span> {
              <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46203" title="object GenMSIL.this.global.icodes.BOOL">BOOL</a>           =&gt; <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Stelem_I1</span>)
              <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46205" title="object GenMSIL.this.global.icodes.BYTE">BYTE</a>           =&gt; <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Stelem_I1</span>)
              <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46207" title="object GenMSIL.this.global.icodes.SHORT">SHORT</a>          =&gt; <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Stelem_I2</span>)
              <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46209" title="object GenMSIL.this.global.icodes.CHAR">CHAR</a>           =&gt; <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Stelem_I2</span>)
              <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46211" title="object GenMSIL.this.global.icodes.INT">INT</a>            =&gt; <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292517">Stelem_I4</a>)
              <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46213" title="object GenMSIL.this.global.icodes.LONG">LONG</a>           =&gt; <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292519">Stelem_I8</a>)
              <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46215" title="object GenMSIL.this.global.icodes.FLOAT">FLOAT</a>          =&gt; <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292521">Stelem_R4</a>)
              <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46217" title="object GenMSIL.this.global.icodes.DOUBLE">DOUBLE</a>         =&gt; <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292523">Stelem_R8</a>)
              <span title="Unit" class="keyword">case</span> REFERENCE(<a title="GenMSIL.this.global.icodes.global.Symbol" id="297389">cls</a>) =&gt; <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292525">Stelem_Ref</a>)

              // case UNIT / ARRRAY are not possible (see comment at LOAD_ARRAY_ITEM)
            }

          <span title="Unit" class="keyword">case</span> STORE_LOCAL(<a title="GenMSIL.this.global.icodes.Local" id="297397">local</a>) =&gt;
            <span class="keyword">val</span> <a title="Boolean" id="297400">isArg</a>: <span title="Boolean">Boolean</span> = <a href="#297397" title="GenMSIL.this.global.icodes.Local">local</a>.<a href="../icode/Members.scala.html#60755" title="=&gt; Boolean">arg</a>
            <span class="keyword">val</span> <a title="Int" id="297401">i</a> = <a href="#297397" title="GenMSIL.this.global.icodes.Local">local</a>.<a href="../icode/Members.scala.html#60758" title="=&gt; Int">index</a>
            <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37759" title="=&gt; Boolean">value</a>)
              <a href="../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;store_local for &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#297397" title="GenMSIL.this.global.icodes.Local">local</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;, index &quot;)" class="string">&quot;, index &quot;</span> + <a href="#297401" title="Int">i</a>)

            // there are some locals defined by the compiler that
            // are isArg and are need to be stored.
            <span title="Unit" class="keyword">if</span> (<a href="#297400" title="Boolean">isArg</a>) {
              <span title="Unit" class="keyword">if</span> (<a href="#297401" title="(x$1: Int)Boolean">i</a> <span title="(x$1: Boolean)Boolean">&gt;=</span> <span title="Int(-128)">-</span><span class="int">128</span> &amp;&amp; <a href="#297401" title="(x$1: Int)Boolean">i</a> &lt;= <span title="Int(127)" class="int">127</span>)
                <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: Int)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Starg_S</span>, <a href="#297401" title="Int">i</a>)
              <span class="keyword">else</span>
                <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: Int)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292609">Starg</a>, <a href="#297401" title="Int">i</a>)
            } <span class="keyword">else</span> {
              <a href="#297401" title="Int">i</a> <span title="Unit" class="keyword">match</span> {
                <span title="Unit" class="keyword">case</span> <span title="Int(0)" class="int">0</span> =&gt; <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292229">Stloc_0</a>)
                <span title="Unit" class="keyword">case</span> <span title="Int(1)" class="int">1</span> =&gt; <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292231">Stloc_1</a>)
                <span title="Unit" class="keyword">case</span> <span title="Int(2)" class="int">2</span> =&gt; <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292233">Stloc_2</a>)
                <span title="Unit" class="keyword">case</span> <span title="Int(3)" class="int">3</span> =&gt; <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292235">Stloc_3</a>)
                <span title="Unit" class="keyword">case</span> _      =&gt;
                  <span title="Unit" class="keyword">if</span> (<a href="#297401" title="(x$1: Int)Boolean">i</a> <span title="(x$1: Boolean)Boolean">&gt;=</span> <span title="Int(-128)">-</span><span class="int">128</span> &amp;&amp; <a href="#297401" title="(x$1: Int)Boolean">i</a> &lt;= <span title="Int(127)" class="int">127</span>)
                    <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.emit.LocalBuilder)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292247">Stloc_S</a>, <a href="#287719" title="(key: GenMSIL.this.global.icodes.Local)ch.epfl.lamp.compiler.msil.emit.LocalBuilder">localBuilders</a>(<a href="#297397" title="GenMSIL.this.global.icodes.Local">local</a>))
                  <span class="keyword">else</span>
                    <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.emit.LocalBuilder)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Stloc</span>, <a href="#287719" title="(key: GenMSIL.this.global.icodes.Local)ch.epfl.lamp.compiler.msil.emit.LocalBuilder">localBuilders</a>(<a href="#297397" title="GenMSIL.this.global.icodes.Local">local</a>))
              }
            }

          <span title="Unit" class="keyword">case</span> STORE_THIS(_) =&gt;
            // this only works for impl classes because the self parameter comes first
            // in the method signature. If that changes, this code has to be revisited.
            <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: Int)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Starg_S</span>, <span title="Int(0)" class="int">0</span>)
            
          <span title="Unit" class="keyword">case</span> STORE_FIELD(<a title="GenMSIL.this.global.icodes.global.Symbol" id="297539">field</a>, <a title="Boolean" id="297540">isStatic</a>) =&gt;
            <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.FieldInfo" id="297543">fieldInfo</a>: <span title="ch.epfl.lamp.compiler.msil.FieldInfo">FieldInfo</span> = <a href="../../symtab/clr/CLRTypes.scala.html#287471" title="=&gt; scala.collection.mutable.Map[GenMSIL.this.global.loaders.clrTypes.global.Symbol,ch.epfl.lamp.compiler.msil.FieldInfo]">fields</a>.<span title="(key: GenMSIL.this.global.loaders.clrTypes.global.Symbol)Option[ch.epfl.lamp.compiler.msil.FieldInfo]">get</span>(<a href="#297539" title="GenMSIL.this.global.icodes.global.Symbol">field</a>.<span title="[T0]T0">asInstanceOf</span><span title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">[</span>clrTypes.global.<a href="../../symtab/Symbols.scala.html#26127" title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">Symbol</a>]) <span title="ch.epfl.lamp.compiler.msil.FieldInfo" class="keyword">match</span> {
              <span title="ch.epfl.lamp.compiler.msil.FieldInfo" class="keyword">case</span> Some(<a title="ch.epfl.lamp.compiler.msil.FieldInfo" id="297548">fInfo</a>) =&gt; <a href="#297548" title="ch.epfl.lamp.compiler.msil.FieldInfo">fInfo</a>
              <span title="ch.epfl.lamp.compiler.msil.FieldInfo" class="keyword">case</span> <span title="object None">None</span> =&gt;
                <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.FieldInfo" id="297551">fInfo</a> = <a href="#287725" title="(sym: GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.Type">getType</a>(<a href="#297539" title="GenMSIL.this.global.icodes.global.Symbol">field</a>.<a href="../../symtab/Symbols.scala.html#26983" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">owner</a>).<span title="(x$1: java.lang.String)ch.epfl.lamp.compiler.msil.FieldInfo">GetField</span>(<a href="#287710" title="(sym: GenMSIL.this.global.Symbol)String">msilName</a>(<a href="#297539" title="GenMSIL.this.global.icodes.global.Symbol">field</a>))
                <a href="../../symtab/clr/CLRTypes.scala.html#287471" title="(key: GenMSIL.this.global.loaders.clrTypes.global.Symbol,value: ch.epfl.lamp.compiler.msil.FieldInfo)Unit">fields</a>(<a href="#297539" title="GenMSIL.this.global.icodes.global.Symbol">field</a>.<span title="[T0]T0">asInstanceOf</span><span title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">[</span>clrTypes.global.<a href="../../symtab/Symbols.scala.html#26127" title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">Symbol</a>]) = <a href="#297551" title="ch.epfl.lamp.compiler.msil.FieldInfo">fInfo</a>
                <a href="#297551" title="ch.epfl.lamp.compiler.msil.FieldInfo">fInfo</a>
            }
            <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.FieldInfo)Unit">Emit</span>(<span title="ch.epfl.lamp.compiler.msil.emit.OpCode" class="keyword">if</span> (<a href="#297540" title="Boolean">isStatic</a>) <span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Stsfld</span> <span class="keyword">else</span> <span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292455">Stfld</a>, <a href="#297543" title="ch.epfl.lamp.compiler.msil.FieldInfo">fieldInfo</a>)


          <span title="Unit" class="keyword">case</span> CALL_PRIMITIVE(<a title="GenMSIL.this.global.icodes.Primitive" id="297575">primitive</a>) =&gt;
            <a href="#287700" title="(primitive: GenMSIL.this.global.icodes.Primitive,pos: scala.tools.nsc.util.Position)Unit">genPrimitive</a>(<a href="#297575" title="GenMSIL.this.global.icodes.Primitive">primitive</a>, <a href="#296938" title="GenMSIL.this.global.icodes.Instruction">instr</a>.<a href="../icode/Opcodes.scala.html#61473" title="=&gt; scala.tools.nsc.util.Position">pos</a>)


          <span title="Unit" class="keyword">case</span> CALL_METHOD(<a title="GenMSIL.this.global.icodes.global.Symbol" id="297585">msym</a>, <a title="GenMSIL.this.global.icodes.opcodes.InvokeStyle" id="297586">style</a>) =&gt;
            <span title="Unit" class="keyword">if</span> (<a href="#297585" title="GenMSIL.this.global.icodes.global.Symbol">msym</a>.<a href="../../symtab/Symbols.scala.html#26914" title="=&gt; Boolean">isClassConstructor</a>) {
              <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.ConstructorInfo" id="297589">constructorInfo</a>: <span title="ch.epfl.lamp.compiler.msil.ConstructorInfo">ConstructorInfo</span> = <a href="#287747" title="(sym: GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.ConstructorInfo">getConstructor</a>(<a href="#297585" title="GenMSIL.this.global.icodes.global.Symbol">msym</a>)
              (<a href="#297586" title="GenMSIL.this.global.icodes.opcodes.InvokeStyle">style</a>: @<a href="../icode/Opcodes.scala.html#46440" title="GenMSIL.this.global.icodes.opcodes.InvokeStyle @unchecked">unchecked</a>) <span title="Unit" class="keyword">match</span> {
                // normal constructor calls are Static..
                <span title="Unit" class="keyword">case</span> Static(_) =&gt;
                  <span title="Unit" class="keyword">if</span> (<a href="#287607" title="=&gt; GenMSIL.this.global.icodes.IMethod">method</a>.<a href="../icode/Members.scala.html#61225" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>.<a href="../../symtab/Symbols.scala.html#26914" title="(x$1: Boolean)Boolean">isClassConstructor</a> &amp;&amp; <a href="#287607" title="=&gt; GenMSIL.this.global.icodes.IMethod">method</a>.<a href="../icode/Members.scala.html#61225" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>.<a href="../../symtab/Symbols.scala.html#26983" title="(x$1: AnyRef)Boolean">owner</a> == <a href="#297585" title="GenMSIL.this.global.icodes.global.Symbol">msym</a>.<a href="../../symtab/Symbols.scala.html#26983" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">owner</a>)
                    <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.ConstructorInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Call</span>, <a href="#297589" title="ch.epfl.lamp.compiler.msil.ConstructorInfo">constructorInfo</a>)
                  <span class="keyword">else</span>
                    <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.ConstructorInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Newobj</span>, <a href="#297589" title="ch.epfl.lamp.compiler.msil.ConstructorInfo">constructorInfo</a>)
                <span title="Unit" class="keyword">case</span> SuperCall(_) =&gt;
                  <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.ConstructorInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Call</span>, <a href="#297589" title="ch.epfl.lamp.compiler.msil.ConstructorInfo">constructorInfo</a>)
                  <span title="Unit" class="keyword">if</span> (<a href="#287731" title="(sym: GenMSIL.this.global.Symbol)Boolean">isStaticModule</a><span title="(x$1: Boolean)Boolean">(</span><a href="#287604" title="=&gt; GenMSIL.this.global.icodes.IClass">clasz</a>.<a href="../icode/Members.scala.html#66669" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>) &amp;&amp;
                     <a href="#287717" title="=&gt; scala.collection.mutable.HashSet[GenMSIL.this.global.Symbol]">notInitializedModules</a>.<span title="(elem: GenMSIL.this.global.Symbol)Boolean">contains</span>(<a href="#287604" title="=&gt; GenMSIL.this.global.icodes.IClass">clasz</a>.<a href="../icode/Members.scala.html#66669" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>))
                    {
                      <a href="#287717" title="(elem: GenMSIL.this.global.Symbol)BytecodeGenerator.this.notInitializedModules.type" id="39290">notInitializedModules</a> -= <a href="#287604" title="=&gt; GenMSIL.this.global.icodes.IClass">clasz</a>.<a href="../icode/Members.scala.html#66669" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>
                      <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ldarg_0</span>)
                      <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.FieldInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Stsfld</span>, <a href="#287734" title="(sym: GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.FieldInfo">getModuleInstanceField</a>(<a href="#287604" title="=&gt; GenMSIL.this.global.icodes.IClass">clasz</a>.<a href="../icode/Members.scala.html#66669" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>))
                    }
              }

            } <span class="keyword">else</span> {
              // java.lang.String.substring(int start_incl, int end_excl)
              // System.String.Substring(int start_incl, int length)
              <span title="Unit" class="keyword">if</span> (<a href="#297585" title="(x$1: AnyRef)Boolean">msym</a> == <a href="#287572" title="=&gt; GenMSIL.this.global.Symbol">JSTRING_SUBSTRING_INT_INT</a>) {
                <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.LocalBuilder" id="297703">endLocal</a> = <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(localType: ch.epfl.lamp.compiler.msil.Type)ch.epfl.lamp.compiler.msil.emit.LocalBuilder">DeclareLocal</span>(<a href="../../symtab/clr/CLRTypes.scala.html#287408" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MINT</a>)
                <a href="#297703" title="ch.epfl.lamp.compiler.msil.emit.LocalBuilder">endLocal</a>.<span title="(name: String)Unit">SetLocalSymInfo</span>(<span title="java.lang.String(&quot;$substring_end&quot;)" class="string">&quot;$substring_end&quot;</span>)
                <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.emit.LocalBuilder)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Stloc</span>, <a href="#297703" title="ch.epfl.lamp.compiler.msil.emit.LocalBuilder">endLocal</a>)
                <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Dup</span>) // duplicate start_incl
                <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Neg</span>)
                <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.emit.LocalBuilder)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ldloc</span>, <a href="#297703" title="ch.epfl.lamp.compiler.msil.emit.LocalBuilder">endLocal</a>) // load end_excl
                <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Add</span>) // compute length (-start + end)
              }

              <span class="keyword">var</span> <a title="Boolean" id="297692">doEmit</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(true)" class="keyword">true</span>
              <a href="../../symtab/clr/CLRTypes.scala.html#287465" title="=&gt; scala.collection.mutable.Map[GenMSIL.this.global.loaders.clrTypes.global.Symbol,ch.epfl.lamp.compiler.msil.Type]">types</a>.<span title="(key: GenMSIL.this.global.loaders.clrTypes.global.Symbol)Option[ch.epfl.lamp.compiler.msil.Type]">get</span>(<a href="#297585" title="GenMSIL.this.global.icodes.global.Symbol">msym</a>.<a href="../../symtab/Symbols.scala.html#26983" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">owner</a>.<span title="[T0]T0">asInstanceOf</span><span title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">[</span>clrTypes.global.<a href="../../symtab/Symbols.scala.html#26127" title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">Symbol</a>]) <span title="Unit" class="keyword">match</span> {
                <span title="Unit" class="keyword">case</span> Some(<a title="ch.epfl.lamp.compiler.msil.Type" id="297744">typ</a>) <span class="keyword">if</span> (<a href="#297744" title="ch.epfl.lamp.compiler.msil.Type">typ</a>.<a title="()Boolean" id="287886">IsEnum</a>) =&gt; {
                  <span class="keyword">def</span> <a title="=&gt; Unit" id="297749">negBool</a> = {
                    <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ldc_I4_0</span>)
                    <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ceq</span>)
                  }
                  <a href="#297692" title="Boolean">doEmit</a> = <span title="Boolean(false)" class="keyword">false</span>
                  <span class="keyword">val</span> <a title="GenMSIL.this.global.icodes.global.Name" id="297750">name</a> = <a href="#297585" title="GenMSIL.this.global.icodes.global.Symbol">msym</a>.<a href="../../symtab/Symbols.scala.html#26988" title="=&gt; GenMSIL.this.global.icodes.global.Name">name</a>
                  <span title="Unit" class="keyword">if</span> (<a href="#297750" title="(x$1: AnyRef)Boolean">name</a> eq <a href="../../symtab/StdNames.scala.html#26531" title="object GenMSIL.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#30008" title="=&gt; GenMSIL.this.global.Name">EQ</a>)       { <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ceq</span>) }
                  <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<a href="#297750" title="(x$1: AnyRef)Boolean">name</a> eq <a href="../../symtab/StdNames.scala.html#26531" title="object GenMSIL.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#30010" title="=&gt; GenMSIL.this.global.Name">NE</a>)  { <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ceq</span>); <a href="#297749" title="=&gt; Unit">negBool</a> }
                  <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<a href="#297750" title="(x$1: AnyRef)Boolean">name</a> eq <a href="../../symtab/StdNames.scala.html#26531" title="object GenMSIL.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#30012" title="=&gt; GenMSIL.this.global.Name">LT</a>)  { <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Clt</span>) }
                  <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<a href="#297750" title="(x$1: AnyRef)Boolean">name</a> eq <a href="../../symtab/StdNames.scala.html#26531" title="object GenMSIL.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#30014" title="=&gt; GenMSIL.this.global.Name">LE</a>)  { <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Cgt</span>); <a href="#297749" title="=&gt; Unit">negBool</a> }
                  <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<a href="#297750" title="(x$1: AnyRef)Boolean">name</a> eq <a href="../../symtab/StdNames.scala.html#26531" title="object GenMSIL.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#30016" title="=&gt; GenMSIL.this.global.Name">GT</a>)  { <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Cgt</span>) }
                  <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<a href="#297750" title="(x$1: AnyRef)Boolean">name</a> eq <a href="../../symtab/StdNames.scala.html#26531" title="object GenMSIL.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#30018" title="=&gt; GenMSIL.this.global.Name">GE</a>)  { <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Clt</span>); <a href="#297749" title="=&gt; Unit">negBool</a> }
                  <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<a href="#297750" title="(x$1: AnyRef)Boolean">name</a> eq <a href="../../symtab/StdNames.scala.html#26531" title="object GenMSIL.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#30020" title="=&gt; GenMSIL.this.global.Name">OR</a>)  { <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Or</span>) }
                  <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<a href="#297750" title="(x$1: AnyRef)Boolean">name</a> eq <a href="../../symtab/StdNames.scala.html#26531" title="object GenMSIL.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#30024" title="=&gt; GenMSIL.this.global.Name">AND</a>) { <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">And</span>) }
                  <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<a href="#297750" title="(x$1: AnyRef)Boolean">name</a> eq <a href="../../symtab/StdNames.scala.html#26531" title="object GenMSIL.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#30022" title="=&gt; GenMSIL.this.global.Name">XOR</a>) { <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Xor</span>) }
                  <span class="keyword">else</span>
                    <a href="#297692" title="Boolean">doEmit</a> = <span title="Boolean(true)" class="keyword">true</span>
                }
                <span title="Unit" class="keyword">case</span> _ =&gt; <span title="Unit">(</span>)
              }

              // method: implicit view(FunctionX[PType0, PType1, ...,PTypeN, ResType]):DelegateType
              <span class="keyword">val</span> <a href="#32686" title="(Boolean, GenMSIL.this.global.Type, GenMSIL.this.global.Type)">(</a><a href="#297693" title="Boolean" id="32686">isDelegateView</a>, <a href="#297693" title="GenMSIL.this.global.Type" id="32688">paramType</a>, <a href="#297693" title="GenMSIL.this.global.Type" id="32690">resType</a>) = <a href="../../symtab/SymbolTable.scala.html#26097" title="(ph: scala.tools.nsc.Phase)(op: =&gt; (Boolean, GenMSIL.this.global.Type, GenMSIL.this.global.Type))(Boolean, GenMSIL.this.global.Type, GenMSIL.this.global.Type)">atPhase</a>(<a href="../../Global.scala.html#39176" title="=&gt; GenMSIL.this.global.Run">currentRun</a>.<a href="../../Global.scala.html#40188" title="=&gt; scala.tools.nsc.Phase">typerPhase</a>)<a title="(Boolean, GenMSIL.this.global.Type, GenMSIL.this.global.Type) @unchecked" id="395">{</a>
                <a href="#297585" title="GenMSIL.this.global.icodes.global.Symbol">msym</a>.<a href="../../symtab/Symbols.scala.html#27003" title="=&gt; GenMSIL.this.global.icodes.global.Type">tpe</a> <span title="(Boolean, GenMSIL.this.global.Type, GenMSIL.this.global.Type)" class="keyword">match</span> {
                  <span title="(Boolean, GenMSIL.this.global.Type, GenMSIL.this.global.Type)" class="keyword">case</span> MethodType(<a title="List[GenMSIL.this.global.Symbol]" id="297821">params</a>, <a title="GenMSIL.this.global.Type" id="297822">resultType</a>)
                  <span class="keyword">if</span> (<a href="#297821" title="List[GenMSIL.this.global.Symbol]">params</a>.<span title="(x$1: Int)Boolean">length</span> <span title="(x$1: Boolean)Boolean">==</span> <span title="Int(1)" class="int">1</span> &amp;&amp; <a href="#297585" title="GenMSIL.this.global.icodes.global.Symbol">msym</a>.<a href="../../symtab/Symbols.scala.html#26988" title="(x$1: AnyRef)Boolean">name</a> == <a href="../../symtab/StdNames.scala.html#26531" title="object GenMSIL.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29988" title="=&gt; GenMSIL.this.global.Name">view_</a>) =&gt;
                    <span class="keyword">val</span> <a title="GenMSIL.this.global.Type" id="297846">paramType</a> = <a href="#297821" title="(n: Int)GenMSIL.this.global.Symbol">params</a>(<span title="Int(0)" class="int">0</span>).<a href="../../symtab/Symbols.scala.html#27003" title="=&gt; GenMSIL.this.global.Type">tpe</a>
                    <span class="keyword">val</span> <a title="Boolean" id="297847">isDel</a> = <a href="../../symtab/Definitions.scala.html#26479" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28485" title="(delegateType: GenMSIL.this.global.Type,functionType: GenMSIL.this.global.Type)Boolean">isCorrespondingDelegate</a>(<a href="#297822" title="GenMSIL.this.global.Type">resultType</a>, <a href="#297846" title="GenMSIL.this.global.Type">paramType</a>)
                    <span title="(_1: Boolean,_2: GenMSIL.this.global.Type,_3: GenMSIL.this.global.Type)(Boolean, GenMSIL.this.global.Type, GenMSIL.this.global.Type)">(</span><a href="#297847" title="Boolean">isDel</a>, <a href="#297846" title="GenMSIL.this.global.Type">paramType</a>, <a href="#297822" title="GenMSIL.this.global.Type">resultType</a>)
                  <span title="(Boolean, Null, Null)" class="keyword">case</span> _ =&gt; <span title="(_1: Boolean,_2: Null,_3: Null)(Boolean, Null, Null)">(</span><span title="Boolean(false)" class="keyword">false</span>, <span title="Null(null)" class="keyword">null</span>, <span title="Null(null)" class="keyword">null</span>)
                }
              }
              <span title="Unit" class="keyword">if</span> (<a href="#297692" title="(x$1: Boolean)Boolean">doEmit</a> &amp;&amp; <a href="#32686" title="Boolean">isDelegateView</a>) {
                <a href="#297692" title="Boolean">doEmit</a> = <span title="Boolean(false)" class="keyword">false</span>
                <a href="#287744" title="(functionType: GenMSIL.this.global.Type,delegateType: GenMSIL.this.global.Type)Unit">createDelegateCaller</a>(<a href="#32688" title="GenMSIL.this.global.Type">paramType</a>, <a href="#32690" title="GenMSIL.this.global.Type">resType</a>)
              }

              <span title="Unit" class="keyword">if</span> (<a href="#297692" title="(x$1: Boolean)Boolean">doEmit</a> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span>
                  (<a href="#297585" title="GenMSIL.this.global.icodes.global.Symbol">msym</a>.<a href="../../symtab/Symbols.scala.html#26988" title="(x$1: AnyRef)Boolean">name</a> <span title="(x$1: Boolean)Boolean">==</span> <a href="../../symtab/StdNames.scala.html#26531" title="object GenMSIL.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29729" title="=&gt; GenMSIL.this.global.Name">PLUS</a> || <a href="#297585" title="GenMSIL.this.global.icodes.global.Symbol">msym</a>.<a href="../../symtab/Symbols.scala.html#26988" title="(x$1: AnyRef)Boolean">name</a> == <a href="../../symtab/StdNames.scala.html#26531" title="object GenMSIL.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29727" title="=&gt; GenMSIL.this.global.Name">MINUS</a>)
                  &amp;&amp; <a href="../../symtab/SymbolLoaders.scala.html#109166" title="object GenMSIL.this.global.loaders.clrTypes">clrTypes</a>.<a href="../../symtab/clr/CLRTypes.scala.html#287482" title="(t: ch.epfl.lamp.compiler.msil.Type)Boolean">isDelegateType</a>(<a href="#287723" title="(tpe: GenMSIL.this.global.Type)ch.epfl.lamp.compiler.msil.Type">msilType</a>(<a href="#297585" title="GenMSIL.this.global.icodes.global.Symbol">msym</a>.<a href="../../symtab/Symbols.scala.html#26983" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">owner</a>.<a href="../../symtab/Symbols.scala.html#27003" title="=&gt; GenMSIL.this.global.icodes.global.Type">tpe</a>)))
                {
                <a href="#297692" title="Boolean">doEmit</a> = <span title="Boolean(false)" class="keyword">false</span>
                <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.MethodInfo" id="298854">methodInfo</a>: <span title="ch.epfl.lamp.compiler.msil.MethodInfo">MethodInfo</span> = <a href="#287749" title="(sym: GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.MethodInfo">getMethod</a>(<a href="#297585" title="GenMSIL.this.global.icodes.global.Symbol">msym</a>)
                // call it as a static method, even if the compiler (symbol) thinks it's virtual
                <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.MethodInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Call</span>, <a href="#298854" title="ch.epfl.lamp.compiler.msil.MethodInfo">methodInfo</a>)
                <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.Type)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Castclass</span>, <a href="#287723" title="(tpe: GenMSIL.this.global.Type)ch.epfl.lamp.compiler.msil.Type">msilType</a>(<a href="#297585" title="GenMSIL.this.global.icodes.global.Symbol">msym</a>.<a href="../../symtab/Symbols.scala.html#26983" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">owner</a>.<a href="../../symtab/Symbols.scala.html#27003" title="=&gt; GenMSIL.this.global.icodes.global.Type">tpe</a>))
              }

              <span title="Unit" class="keyword">if</span> (<a href="#297692" title="(x$1: Boolean)Boolean">doEmit</a> &amp;&amp; <a href="../../symtab/Definitions.scala.html#26479" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28480" title="=&gt; List[GenMSIL.this.global.Symbol]">Delegate_scalaCallers</a>.<span title="(elem: Any)Boolean">contains</span>(<a href="#297585" title="GenMSIL.this.global.icodes.global.Symbol">msym</a>)) {
                <a href="#297692" title="Boolean">doEmit</a> = <span title="Boolean(false)" class="keyword">false</span>
                <span class="keyword">val</span> <a title="GenMSIL.this.global.Symbol" id="298888">methodSym</a>: <a href="../../symtab/Symbols.scala.html#26127" title="GenMSIL.this.global.Symbol">Symbol</a> = <a href="../../symtab/Definitions.scala.html#26479" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28483" title="(key: GenMSIL.this.global.Symbol)GenMSIL.this.global.Symbol">Delegate_scalaCallerTargets</a>(<a href="#297585" title="GenMSIL.this.global.icodes.global.Symbol">msym</a>)
                <span class="keyword">val</span> <a title="GenMSIL.this.global.Type" id="298889">delegateType</a>: <a href="../../symtab/Types.scala.html#26205" title="GenMSIL.this.global.Type">Type</a> = <a href="#297585" title="GenMSIL.this.global.icodes.global.Symbol">msym</a>.<a href="../../symtab/Symbols.scala.html#27003" title="=&gt; GenMSIL.this.global.icodes.global.Type">tpe</a> <span title="GenMSIL.this.global.Type" class="keyword">match</span> {
                  <span title="GenMSIL.this.global.Type" class="keyword">case</span> MethodType(_, <a title="GenMSIL.this.global.Type" id="298908">retType</a>) =&gt; <a href="#298908" title="GenMSIL.this.global.Type">retType</a>
                  <span title="Nothing" class="keyword">case</span> _ =&gt; <a href="../../Global.scala.html#39077" title="(msg: String)Nothing">abort</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;not a method type: &quot;</span> + <a href="#297585" title="GenMSIL.this.global.icodes.global.Symbol">msym</a>.<a href="../../symtab/Symbols.scala.html#27003" title="=&gt; GenMSIL.this.global.icodes.global.Type">tpe</a>)
                }
                <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.MethodInfo" id="298890">method</a>: <span title="ch.epfl.lamp.compiler.msil.MethodInfo">MethodInfo</span> = <a href="#287749" title="(sym: GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.MethodInfo">getMethod</a>(<a href="#298888" title="GenMSIL.this.global.Symbol">methodSym</a>)
                <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.ConstructorInfo" id="298891">delegCtor</a> = <a href="#287723" title="(tpe: GenMSIL.this.global.Type)ch.epfl.lamp.compiler.msil.Type">msilType</a>(<a href="#298889" title="GenMSIL.this.global.Type">delegateType</a>).<span title="(x$1: Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.ConstructorInfo">GetConstructor</span>(<span title="(xs: ch.epfl.lamp.compiler.msil.Type*)(implicit evidence$2: scala.reflect.ClassManifest[ch.epfl.lamp.compiler.msil.Type])Array[ch.epfl.lamp.compiler.msil.Type]">Array</span><span title="(clazz: Class[_])scala.reflect.ClassManifest[ch.epfl.lamp.compiler.msil.Type]">(</span><a href="../../symtab/clr/CLRTypes.scala.html#287438" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MOBJECT</a>, <a href="#287565" title="=&gt; ch.epfl.lamp.compiler.msil.Type">INT_PTR</a>))
                <span title="Unit" class="keyword">if</span> (<a href="#298888" title="GenMSIL.this.global.Symbol">methodSym</a>.<a href="../../symtab/Symbols.scala.html#26966" title="=&gt; Boolean">isStatic</a>) {
                  <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.MethodInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ldftn</span>, <a href="#298890" title="ch.epfl.lamp.compiler.msil.MethodInfo">method</a>)
                } <span class="keyword">else</span> {
                  <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Dup</span>)
                  <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.MethodInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292599">Ldvirtftn</a>, <a href="#298890" title="ch.epfl.lamp.compiler.msil.MethodInfo">method</a>)
                }
                <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.ConstructorInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Newobj</span>, <a href="#298891" title="ch.epfl.lamp.compiler.msil.ConstructorInfo">delegCtor</a>)
              }

              <span title="Unit" class="keyword">if</span> (<a href="#297692" title="Boolean">doEmit</a>) {
                <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.MethodInfo" id="299024">methodInfo</a>: <span title="ch.epfl.lamp.compiler.msil.MethodInfo">MethodInfo</span> = <a href="#287749" title="(sym: GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.MethodInfo">getMethod</a>(<a href="#297585" title="GenMSIL.this.global.icodes.global.Symbol">msym</a>)
                (<a href="#297586" title="GenMSIL.this.global.icodes.opcodes.InvokeStyle">style</a>: @<a href="../icode/Opcodes.scala.html#46440" title="GenMSIL.this.global.icodes.opcodes.InvokeStyle @unchecked">unchecked</a>) <span title="Unit" class="keyword">match</span> {
                  <span title="Unit" class="keyword">case</span> SuperCall(_) =&gt;
                    <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.MethodInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Call</span>, <a href="#299024" title="ch.epfl.lamp.compiler.msil.MethodInfo">methodInfo</a>)
                  <span title="Unit" class="keyword">case</span> <a href="../icode/Opcodes.scala.html#46441" title="object GenMSIL.this.global.icodes.opcodes.Dynamic">Dynamic</a> =&gt;
                    <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.MethodInfo)Unit">Emit</span>(<span title="ch.epfl.lamp.compiler.msil.emit.OpCode" class="keyword">if</span> (<a href="#287600" title="(elem: GenMSIL.this.global.Symbol)Boolean" id="39339">dynToStatMapped</a>(<a href="#297585" title="GenMSIL.this.global.icodes.global.Symbol">msym</a>)) <span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Call</span> <span class="keyword">else</span> <span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Callvirt</span>,
                               <a href="#299024" title="ch.epfl.lamp.compiler.msil.MethodInfo">methodInfo</a>)
                  <span title="Unit" class="keyword">case</span> Static(_) =&gt;
                    <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.MethodInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Call</span>, <a href="#299024" title="ch.epfl.lamp.compiler.msil.MethodInfo">methodInfo</a>)
                }
              }
            }

          <span title="Unit" class="keyword">case</span> BOX(<a title="GenMSIL.this.global.icodes.TypeKind" id="299079">boxType</a>) =&gt; <a href="#287745" title="(code: ch.epfl.lamp.compiler.msil.emit.ILGenerator,boxType: GenMSIL.this.global.icodes.TypeKind)Unit">emitBox</a>(<a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>, <a href="#299079" title="GenMSIL.this.global.icodes.TypeKind">boxType</a>) //mcode.Emit(OpCodes.Box, msilType(boxType))

          <span title="Unit" class="keyword">case</span> UNBOX(<a title="GenMSIL.this.global.icodes.TypeKind" id="299085">boxType</a>) =&gt; <a href="#287746" title="(code: ch.epfl.lamp.compiler.msil.emit.ILGenerator,boxType: GenMSIL.this.global.icodes.TypeKind)Unit">emitUnbox</a>(<a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>, <a href="#299085" title="GenMSIL.this.global.icodes.TypeKind">boxType</a>)

          <span title="Unit" class="keyword">case</span> NEW(REFERENCE(<a title="GenMSIL.this.global.icodes.global.Symbol" id="299092">cls</a>)) =&gt;
            <a href="#287695" title="(x$1: Boolean)Unit">ignoreNextDup</a> = <span title="Boolean(true)" class="keyword">true</span>

          // works also for arrays and reference-types
          <span title="Unit" class="keyword">case</span> CREATE_ARRAY(<a title="GenMSIL.this.global.icodes.TypeKind" id="299101">elem</a>, <a title="Int" id="299102">dims</a>) =&gt;
            // TODO: handle multi dimensional arrays
            <span title="(assertion: Boolean,message: =&gt; Any)Unit">assert</span>(<a href="#299102" title="(x$1: Int)Boolean">dims</a> == <span title="Int(1)" class="int">1</span>, <span title="java.lang.String(&quot;Can't handle multi dimensional arrays&quot;)" class="string">&quot;Can't handle multi dimensional arrays&quot;</span>)
            <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.Type)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292483">Newarr</a>, <a href="#287722" title="(t: GenMSIL.this.global.icodes.TypeKind)ch.epfl.lamp.compiler.msil.Type">msilType</a>(<a href="#299101" title="GenMSIL.this.global.icodes.TypeKind">elem</a>))

          // works for arrays and reference-types
          <span title="Unit" class="keyword">case</span> IS_INSTANCE(<a title="GenMSIL.this.global.icodes.TypeKind" id="299137">tpe</a>) =&gt;
            <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.Type)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292439">Isinst</a>, <a href="#287722" title="(t: GenMSIL.this.global.icodes.TypeKind)ch.epfl.lamp.compiler.msil.Type">msilType</a>(<a href="#299137" title="GenMSIL.this.global.icodes.TypeKind">tpe</a>))
            <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ldnull</span>)
            <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ceq</span>)
            <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ldc_I4_0</span>)
            <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ceq</span>)


          // works for arrays and reference-types
          // part from the scala reference: &quot;S &lt;: T does not imply
          //  Array[S] &lt;: Array[T] in Scala. However, it is possible
          //  to cast an array of S to an array of T if such a cast
          //  is permitted in the host environment.&quot;
          <span title="Unit" class="keyword">case</span> CHECK_CAST(<a title="GenMSIL.this.global.icodes.TypeKind" id="299174">tpe</a>) =&gt; <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.Type)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Castclass</span>, <a href="#287722" title="(t: GenMSIL.this.global.icodes.TypeKind)ch.epfl.lamp.compiler.msil.Type">msilType</a>(<a href="#299174" title="GenMSIL.this.global.icodes.TypeKind">tpe</a>))


          // no SWITCH is generated when there's
          //  - a default case (&quot;case _ =&gt; ...&quot;) in the matching expr
          //  - OR is used (&quot;case 1 | 2 =&gt; ...&quot;)
          <span title="Unit" class="keyword">case</span> SWITCH(<a title="List[List[Int]]" id="299196">tags</a>, <a title="List[GenMSIL.this.global.icodes.BasicBlock]" id="299197">branches</a>) =&gt;
            // tags is List[List[Int]]; a list of integers for every label.
            //    if the int on stack is 4, and 4 is in the second list =&gt; jump
            //    to second label
            // branches is List[BasicBlock]
            //    the labels to jump to (the last one ist the default one)

            <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.LocalBuilder" id="299200">switchLocal</a> = <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(localType: ch.epfl.lamp.compiler.msil.Type)ch.epfl.lamp.compiler.msil.emit.LocalBuilder">DeclareLocal</span>(<a href="../../symtab/clr/CLRTypes.scala.html#287408" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MINT</a>)
            // several switch variables will appear with the same name in the
            //  assembly code, but this makes no truble
            <a href="#299200" title="ch.epfl.lamp.compiler.msil.emit.LocalBuilder">switchLocal</a>.<span title="(name: String)Unit">SetLocalSymInfo</span>(<span title="java.lang.String(&quot;$switch_var&quot;)" class="string">&quot;$switch_var&quot;</span>)

            <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.emit.LocalBuilder)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Stloc</span>, <a href="#299200" title="ch.epfl.lamp.compiler.msil.emit.LocalBuilder">switchLocal</a>)
            <span class="keyword">var</span> <a title="Int" id="299201">i</a>: <span title="Int">Int</span> = <span title="Int(0)" class="int">0</span>
            <span class="keyword">for</span> (<a title="List[Int]" id="299233">l</a> &lt;- <a href="#299196" title="(f: (List[Int]) =&gt; Unit)Unit">tags</a>) {
              <span class="keyword">var</span> <a title="ch.epfl.lamp.compiler.msil.emit.Label" id="299234">targetLabel</a> = <a href="#287704" title="(key: GenMSIL.this.global.icodes.BasicBlock)ch.epfl.lamp.compiler.msil.emit.Label">labels</a>(<a href="#299197" title="(n: Int)GenMSIL.this.global.icodes.BasicBlock">branches</a>(<a href="#299201" title="Int">i</a>))
              <span class="keyword">for</span> (<a title="Int" id="299274">i</a> &lt;- <a href="#299233" title="(f: (Int) =&gt; Unit)Unit">l</a>) {
                <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.emit.LocalBuilder)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ldloc</span>, <a href="#299200" title="ch.epfl.lamp.compiler.msil.emit.LocalBuilder">switchLocal</a>)
                <a href="#287701" title="(value: Int,code: ch.epfl.lamp.compiler.msil.emit.ILGenerator)Unit">loadI4</a>(<a href="#299274" title="Int">i</a>, <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>)
                <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,label: ch.epfl.lamp.compiler.msil.emit.Label)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Beq</span>, <a href="#299234" title="ch.epfl.lamp.compiler.msil.emit.Label">targetLabel</a>)
              }
              <a href="#299201" title="Int">i</a> += <span title="Int(1)" class="int">1</span>
            }
            <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.Label" id="299202">defaultTarget</a> = <a href="#287704" title="(key: GenMSIL.this.global.icodes.BasicBlock)ch.epfl.lamp.compiler.msil.emit.Label">labels</a>(<a href="#299197" title="(n: Int)GenMSIL.this.global.icodes.BasicBlock">branches</a>(<a href="#299201" title="Int">i</a>))
            <span title="Unit" class="keyword">if</span> (<a href="#287691" title="(x$1: AnyRef)Boolean">nextBlock</a> <span title="(x$1: Boolean)Boolean">!=</span> <a href="#299202" title="ch.epfl.lamp.compiler.msil.emit.Label">defaultTarget</a> &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#287681" title="=&gt; scala.collection.mutable.HashSet[GenMSIL.this.global.icodes.BasicBlock]">omitJumpBlocks</a>.<span title="(elem: GenMSIL.this.global.icodes.BasicBlock)Boolean">contains</span>(<a href="#287685" title="=&gt; GenMSIL.this.global.icodes.BasicBlock">currentBlock</a>))
              <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,label: ch.epfl.lamp.compiler.msil.emit.Label)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Br</span>, <a href="#299202" title="ch.epfl.lamp.compiler.msil.emit.Label">defaultTarget</a>)


          <span title="Unit" class="keyword">case</span> JUMP(<a title="GenMSIL.this.global.icodes.BasicBlock" id="299385">whereto</a>) =&gt;
            <span title="Unit" class="keyword">if</span> (<a href="#287691" title="(x$1: AnyRef)Boolean">nextBlock</a> <span title="(x$1: Boolean)Boolean">!=</span> <a href="#299385" title="GenMSIL.this.global.icodes.BasicBlock">whereto</a> &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#287681" title="=&gt; scala.collection.mutable.HashSet[GenMSIL.this.global.icodes.BasicBlock]">omitJumpBlocks</a>.<span title="(elem: GenMSIL.this.global.icodes.BasicBlock)Boolean">contains</span>(<a href="#287685" title="=&gt; GenMSIL.this.global.icodes.BasicBlock">currentBlock</a>))
              <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,label: ch.epfl.lamp.compiler.msil.emit.Label)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Br</span>, <a href="#287704" title="(key: GenMSIL.this.global.icodes.BasicBlock)ch.epfl.lamp.compiler.msil.emit.Label">labels</a>(<a href="#299385" title="GenMSIL.this.global.icodes.BasicBlock">whereto</a>))


          <span title="Unit" class="keyword">case</span> CJUMP(<a title="GenMSIL.this.global.icodes.BasicBlock" id="299430">success</a>, <a title="GenMSIL.this.global.icodes.BasicBlock" id="299431">failure</a>, <a title="GenMSIL.this.global.icodes.TestOp" id="299432">cond</a>, <a title="GenMSIL.this.global.icodes.TypeKind" id="299433">kind</a>) =&gt;
            // cond is TestOp (see Primitives.scala), and can take
            // values EQ, NE, LT, GE LE, GT
            // kind is TypeKind
            <span class="keyword">val</span> <a title="Boolean" id="299436">isFloat</a> = <a href="#299433" title="(x$1: AnyRef)Boolean">kind</a> <span title="(x$1: Boolean)Boolean">==</span> <a href="../icode/TypeKinds.scala.html#46215" title="object GenMSIL.this.global.icodes.FLOAT">FLOAT</a> || <a href="#299433" title="(x$1: AnyRef)Boolean">kind</a> == <a href="../icode/TypeKinds.scala.html#46217" title="object GenMSIL.this.global.icodes.DOUBLE">DOUBLE</a>
            <span title="Unit" class="keyword">if</span> (<a href="#287691" title="(x$1: AnyRef)Boolean">nextBlock</a> <span title="(x$1: Boolean)Boolean">==</span> <a href="#299430" title="GenMSIL.this.global.icodes.BasicBlock">success</a> || <a href="#287681" title="=&gt; scala.collection.mutable.HashSet[GenMSIL.this.global.icodes.BasicBlock]">omitJumpBlocks</a>.<span title="(elem: GenMSIL.this.global.icodes.BasicBlock)Boolean">contains</span>(<a href="#287685" title="=&gt; GenMSIL.this.global.icodes.BasicBlock">currentBlock</a>)) {
              <a href="#287706" title="(condition: GenMSIL.this.global.icodes.TestOp,dest: ch.epfl.lamp.compiler.msil.emit.Label,isFloat: Boolean)Unit">emitBr</a>(<a href="#299432" title="GenMSIL.this.global.icodes.TestOp">cond</a>.<a href="../icode/Primitives.scala.html#62996" title="()GenMSIL.this.global.icodes.TestOp">negate</a>, <a href="#287704" title="(key: GenMSIL.this.global.icodes.BasicBlock)ch.epfl.lamp.compiler.msil.emit.Label">labels</a>(<a href="#299431" title="GenMSIL.this.global.icodes.BasicBlock">failure</a>), <a href="#299436" title="Boolean">isFloat</a>)
            } <span class="keyword">else</span> {
              <a href="#287706" title="(condition: GenMSIL.this.global.icodes.TestOp,dest: ch.epfl.lamp.compiler.msil.emit.Label,isFloat: Boolean)Unit">emitBr</a>(<a href="#299432" title="GenMSIL.this.global.icodes.TestOp">cond</a>, <a href="#287704" title="(key: GenMSIL.this.global.icodes.BasicBlock)ch.epfl.lamp.compiler.msil.emit.Label">labels</a>(<a href="#299430" title="GenMSIL.this.global.icodes.BasicBlock">success</a>), <a href="#299436" title="Boolean">isFloat</a>)
              <span title="Unit" class="keyword">if</span> (<a href="#287691" title="(x$1: AnyRef)Boolean">nextBlock</a> <span title="(x$1: Boolean)Boolean">!=</span> <a href="#299431" title="GenMSIL.this.global.icodes.BasicBlock">failure</a> &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#287681" title="=&gt; scala.collection.mutable.HashSet[GenMSIL.this.global.icodes.BasicBlock]">omitJumpBlocks</a>.<span title="(elem: GenMSIL.this.global.icodes.BasicBlock)Boolean">contains</span>(<a href="#287685" title="=&gt; GenMSIL.this.global.icodes.BasicBlock">currentBlock</a>)) {
                <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,label: ch.epfl.lamp.compiler.msil.emit.Label)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Br</span>, <a href="#287704" title="(key: GenMSIL.this.global.icodes.BasicBlock)ch.epfl.lamp.compiler.msil.emit.Label">labels</a>(<a href="#299431" title="GenMSIL.this.global.icodes.BasicBlock">failure</a>))
              }
            }

          <span title="Unit" class="keyword">case</span> CZJUMP(<a title="GenMSIL.this.global.icodes.BasicBlock" id="299545">success</a>, <a title="GenMSIL.this.global.icodes.BasicBlock" id="299546">failure</a>, <a title="GenMSIL.this.global.icodes.TestOp" id="299547">cond</a>, <a title="GenMSIL.this.global.icodes.TypeKind" id="299548">kind</a>) =&gt;
            (<a href="#299548" title="GenMSIL.this.global.icodes.TypeKind">kind</a>: @<a href="../icode/TypeKinds.scala.html#46199" title="GenMSIL.this.global.icodes.TypeKind @unchecked">unchecked</a>) <span title="Unit" class="keyword">match</span> {
              <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46203" title="object GenMSIL.this.global.icodes.BOOL">BOOL</a> | REFERENCE(_) =&gt;
                <span title="Unit" class="keyword">if</span> (<a href="#287691" title="(x$1: AnyRef)Boolean">nextBlock</a> <span title="(x$1: Boolean)Boolean">==</span> <a href="#299545" title="GenMSIL.this.global.icodes.BasicBlock">success</a> || <a href="#287681" title="=&gt; scala.collection.mutable.HashSet[GenMSIL.this.global.icodes.BasicBlock]">omitJumpBlocks</a>.<span title="(elem: GenMSIL.this.global.icodes.BasicBlock)Boolean">contains</span>(<a href="#287685" title="=&gt; GenMSIL.this.global.icodes.BasicBlock">currentBlock</a>)) {
                  <a href="#287707" title="(cond: GenMSIL.this.global.icodes.TestOp,dest: ch.epfl.lamp.compiler.msil.emit.Label)Unit">emitBrBool</a>(<a href="#299547" title="GenMSIL.this.global.icodes.TestOp">cond</a>.<a href="../icode/Primitives.scala.html#62996" title="()GenMSIL.this.global.icodes.TestOp">negate</a>, <a href="#287704" title="(key: GenMSIL.this.global.icodes.BasicBlock)ch.epfl.lamp.compiler.msil.emit.Label">labels</a>(<a href="#299546" title="GenMSIL.this.global.icodes.BasicBlock">failure</a>))
                } <span class="keyword">else</span> {
                  <a href="#287707" title="(cond: GenMSIL.this.global.icodes.TestOp,dest: ch.epfl.lamp.compiler.msil.emit.Label)Unit">emitBrBool</a>(<a href="#299547" title="GenMSIL.this.global.icodes.TestOp">cond</a>, <a href="#287704" title="(key: GenMSIL.this.global.icodes.BasicBlock)ch.epfl.lamp.compiler.msil.emit.Label">labels</a>(<a href="#299545" title="GenMSIL.this.global.icodes.BasicBlock">success</a>))
                  <span title="Unit" class="keyword">if</span> (<a href="#287691" title="(x$1: AnyRef)Boolean">nextBlock</a> <span title="(x$1: Boolean)Boolean">!=</span> <a href="#299546" title="GenMSIL.this.global.icodes.BasicBlock">failure</a> &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#287681" title="=&gt; scala.collection.mutable.HashSet[GenMSIL.this.global.icodes.BasicBlock]">omitJumpBlocks</a>.<span title="(elem: GenMSIL.this.global.icodes.BasicBlock)Boolean">contains</span>(<a href="#287685" title="=&gt; GenMSIL.this.global.icodes.BasicBlock">currentBlock</a>)) {
                    <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,label: ch.epfl.lamp.compiler.msil.emit.Label)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Br</span>, <a href="#287704" title="(key: GenMSIL.this.global.icodes.BasicBlock)ch.epfl.lamp.compiler.msil.emit.Label">labels</a>(<a href="#299546" title="GenMSIL.this.global.icodes.BasicBlock">failure</a>))
                  }
                }
            }

          <span title="Unit" class="keyword">case</span> RETURN(<a title="GenMSIL.this.global.icodes.TypeKind" id="299646">kind</a>) =&gt;
            <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ret</span>)

          <span title="Unit" class="keyword">case</span> THROW() =&gt;
            <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292445">Throw</a>)

          <span title="Unit" class="keyword">case</span> DROP(<a title="GenMSIL.this.global.icodes.TypeKind" id="299660">kind</a>) =&gt;
            <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Pop</span>)

          <span title="Unit" class="keyword">case</span> DUP(<a title="GenMSIL.this.global.icodes.TypeKind" id="299668">kind</a>) =&gt;
            // needed to create new instances
            <span title="Unit" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="#287695" title="=&gt; Boolean">ignoreNextDup</a>) {
              <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Dup</span>)
            } <span class="keyword">else</span> {
              <a href="#287695" title="(x$1: Boolean)Unit">ignoreNextDup</a> = <span title="Boolean(false)" class="keyword">false</span>
            }

          <span title="Unit" class="keyword">case</span> MONITOR_ENTER() =&gt;
            <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.MethodInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Call</span>, <a href="#287553" title="=&gt; ch.epfl.lamp.compiler.msil.MethodInfo">MMONITOR_ENTER</a>)

          <span title="Unit" class="keyword">case</span> MONITOR_EXIT() =&gt;
            <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.MethodInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Call</span>, <a href="#287555" title="=&gt; ch.epfl.lamp.compiler.msil.MethodInfo">MMONITOR_EXIT</a>)

          <span title="Unit" class="keyword">case</span> SCOPE_ENTER(_) | SCOPE_EXIT(_) =&gt;
            <span title="Unit">(</span>)
        }

      } // end for (instr &lt;- b) { .. }

      <a href="#287688" title="(x$1: GenMSIL.this.global.icodes.BasicBlock)Unit">lastBlock</a> = <a href="#296701" title="GenMSIL.this.global.icodes.BasicBlock">b</a> // this way, saveResult knows lastBlock

      <span title="Unit" class="keyword">if</span> (<a href="#287679" title="=&gt; scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.BasicBlock,List[BytecodeGenerator.this.ExHInstruction]]">bb2exHInstructions</a>.<span title="(key: GenMSIL.this.global.icodes.BasicBlock)Boolean">contains</span>(<a href="#296701" title="GenMSIL.this.global.icodes.BasicBlock">b</a>)){
        <a href="#287679" title="(key: GenMSIL.this.global.icodes.BasicBlock)List[BytecodeGenerator.this.ExHInstruction]">bb2exHInstructions</a>(<a href="#296701" title="GenMSIL.this.global.icodes.BasicBlock">b</a>).<span title="(f: (BytecodeGenerator.this.ExHInstruction) =&gt; Unit)Unit">foreach</span>((<a title="BytecodeGenerator.this.ExHInstruction" id="299746">i</a>) =&gt; <a href="#299746" title="BytecodeGenerator.this.ExHInstruction">i</a> <span title="Unit" class="keyword">match</span> {
          <span title="Unit" class="keyword">case</span> BeginExceptionBlock(<a title="GenMSIL.this.global.icodes.ExceptionHandler" id="299747">handler</a>) =&gt; <span title="Unit">(</span>)
          <span title="Unit" class="keyword">case</span> BeginCatchBlock(<a title="GenMSIL.this.global.icodes.ExceptionHandler" id="299750">handler</a>, <a title="ch.epfl.lamp.compiler.msil.Type" id="299751">exType</a>) =&gt; <span title="Unit">(</span>)
          <span title="Unit" class="keyword">case</span> BeginFinallyBlock(<a title="GenMSIL.this.global.icodes.ExceptionHandler" id="299754">handler</a>) =&gt; <span title="Unit">(</span>)
          <span title="Unit" class="keyword">case</span> EndExceptionBlock(<a title="GenMSIL.this.global.icodes.ExceptionHandler" id="299757">handler</a>) =&gt;
            <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37759" title="=&gt; Boolean">value</a>) <a href="../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;end ex blk: &quot;</span> + <a href="#299757" title="GenMSIL.this.global.icodes.ExceptionHandler">handler</a>)
            <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.Type" id="299760">resType</a> = <a href="#287722" title="(t: GenMSIL.this.global.icodes.TypeKind)ch.epfl.lamp.compiler.msil.Type">msilType</a>(<a href="#299757" title="GenMSIL.this.global.icodes.ExceptionHandler">handler</a>.<a href="../icode/ExceptionHandlers.scala.html#61441" title="=&gt; GenMSIL.this.global.icodes.TypeKind">resultKind</a>)
            <span title="Unit" class="keyword">if</span> (<a href="#299757" title="GenMSIL.this.global.icodes.ExceptionHandler">handler</a>.<a href="../icode/ExceptionHandlers.scala.html#61438" title="(x$1: AnyRef)Boolean">finalizer</a> <span title="(x$1: Boolean)Boolean">==</span> <span title="Null(null)" class="keyword">null</span> || <a href="#299757" title="GenMSIL.this.global.icodes.ExceptionHandler">handler</a>.<a href="../icode/ExceptionHandlers.scala.html#61438" title="(x$1: AnyRef)Boolean">finalizer</a> == <a href="../icode/ExceptionHandlers.scala.html#46238" title="object GenMSIL.this.global.icodes.NoFinalizer">NoFinalizer</a>)
              <a href="#296740" title="(resType: ch.epfl.lamp.compiler.msil.Type)Unit">saveResult</a>(<a href="#299760" title="ch.epfl.lamp.compiler.msil.Type">resType</a>)
            <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<a title="()Unit" id="288826">EndExceptionBlock</a>()
            <span title="Unit" class="keyword">if</span> (<a href="#299760" title="(x$1: AnyRef)Boolean">resType</a> != <a href="../../symtab/clr/CLRTypes.scala.html#287429" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MVOID</a>) {
              <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.LocalBuilder" id="299800">lb</a>: <span title="ch.epfl.lamp.compiler.msil.emit.LocalBuilder">LocalBuilder</span> = <a href="#287697" title="=&gt; scala.collection.mutable.Stack[ch.epfl.lamp.compiler.msil.emit.LocalBuilder]">excResultLocals</a>.<a title="()ch.epfl.lamp.compiler.msil.emit.LocalBuilder" id="79104">pop</a>
              <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.emit.LocalBuilder)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ldloc</span>, <a href="#299800" title="ch.epfl.lamp.compiler.msil.emit.LocalBuilder">lb</a>)
            } <span class="keyword">else</span>
              <a href="#287647" title="(x$1: Boolean)Unit">needAdditionalRet</a> = <span title="Boolean(true)" class="keyword">true</span>
          <span title="Nothing" class="keyword">case</span> _ =&gt; <a href="../../Global.scala.html#39077" title="(msg: String)Nothing">abort</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;unknown case: &quot;</span> + <a href="#299746" title="BytecodeGenerator.this.ExHInstruction">i</a>)
        })
      }

    } // end genBlock

    <span class="keyword">def</span> <a title="(primitive: GenMSIL.this.global.icodes.Primitive,pos: scala.tools.nsc.util.Position)Unit" id="287700">genPrimitive</a>(<a title="GenMSIL.this.global.icodes.Primitive" id="297578">primitive</a>: <a href="../icode/Primitives.scala.html#46242" title="GenMSIL.this.global.icodes.Primitive">Primitive</a>, <a title="scala.tools.nsc.util.Position" id="297579">pos</a>: <a href="../../util/Position.scala.html#14710" title="scala.tools.nsc.util.Position">Position</a>) {
      <a href="#297578" title="GenMSIL.this.global.icodes.Primitive">primitive</a> <span title="Unit" class="keyword">match</span> {
        <span title="Unit" class="keyword">case</span> Negation(<a title="GenMSIL.this.global.icodes.TypeKind" id="299823">kind</a>) =&gt;
          <a href="#299823" title="GenMSIL.this.global.icodes.TypeKind">kind</a> <span title="Unit" class="keyword">match</span> {
            // CHECK: is ist possible to get this for BOOL? in this case, verify.
            <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46203" title="object GenMSIL.this.global.icodes.BOOL">BOOL</a> | <a href="../icode/TypeKinds.scala.html#46205" title="object GenMSIL.this.global.icodes.BYTE">BYTE</a> | <a href="../icode/TypeKinds.scala.html#46209" title="object GenMSIL.this.global.icodes.CHAR">CHAR</a> | <a href="../icode/TypeKinds.scala.html#46207" title="object GenMSIL.this.global.icodes.SHORT">SHORT</a> | <a href="../icode/TypeKinds.scala.html#46211" title="object GenMSIL.this.global.icodes.INT">INT</a> | <a href="../icode/TypeKinds.scala.html#46213" title="object GenMSIL.this.global.icodes.LONG">LONG</a> | <a href="../icode/TypeKinds.scala.html#46215" title="object GenMSIL.this.global.icodes.FLOAT">FLOAT</a> | <a href="../icode/TypeKinds.scala.html#46217" title="object GenMSIL.this.global.icodes.DOUBLE">DOUBLE</a> =&gt;
              <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Neg</span>)

            <span title="Nothing" class="keyword">case</span> _ =&gt; <a href="../../Global.scala.html#39077" title="(msg: String)Nothing">abort</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Impossible to negate a &quot;</span> + <a href="#299823" title="GenMSIL.this.global.icodes.TypeKind">kind</a>)
          }

        <span title="Unit" class="keyword">case</span> Arithmetic(<a title="GenMSIL.this.global.icodes.ArithmeticOp" id="299836">op</a>, <a title="GenMSIL.this.global.icodes.TypeKind" id="299837">kind</a>) =&gt;
          <a href="#299836" title="GenMSIL.this.global.icodes.ArithmeticOp">op</a> <span title="Unit" class="keyword">match</span> {
            <span title="Unit" class="keyword">case</span> <a href="../icode/Primitives.scala.html#46296" title="object GenMSIL.this.global.icodes.ADD">ADD</a> =&gt; <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Add</span>)
            <span title="Unit" class="keyword">case</span> <a href="../icode/Primitives.scala.html#46298" title="object GenMSIL.this.global.icodes.SUB">SUB</a> =&gt; <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292383">Sub</a>)
            <span title="Unit" class="keyword">case</span> <a href="../icode/Primitives.scala.html#46300" title="object GenMSIL.this.global.icodes.MUL">MUL</a> =&gt; <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292385">Mul</a>)
            <span title="Unit" class="keyword">case</span> <a href="../icode/Primitives.scala.html#46302" title="object GenMSIL.this.global.icodes.DIV">DIV</a> =&gt; <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292387">Div</a>)
            <span title="Unit" class="keyword">case</span> <a href="../icode/Primitives.scala.html#46304" title="object GenMSIL.this.global.icodes.REM">REM</a> =&gt; <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292391">Rem</a>)
            <span title="Unit" class="keyword">case</span> <a href="../icode/Primitives.scala.html#46306" title="object GenMSIL.this.global.icodes.NOT">NOT</a> =&gt; <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292409">Not</a>) //bitwise complement (one's complement)
            <span title="Nothing" class="keyword">case</span> _ =&gt; <a href="../../Global.scala.html#39077" title="(msg: String)Nothing">abort</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Unknown arithmetic primitive &quot;</span> + <a href="#297578" title="GenMSIL.this.global.icodes.Primitive">primitive</a> )
          }

        <span title="Unit" class="keyword">case</span> Logical(<a title="GenMSIL.this.global.icodes.LogicalOp" id="299870">op</a>, <a title="GenMSIL.this.global.icodes.TypeKind" id="299871">kind</a>) =&gt; <a href="#299870" title="GenMSIL.this.global.icodes.LogicalOp">op</a> <span title="Unit" class="keyword">match</span> {
          <span title="Unit" class="keyword">case</span> <a href="../icode/Primitives.scala.html#46316" title="object GenMSIL.this.global.icodes.AND">AND</a> =&gt; <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">And</span>)
          <span title="Unit" class="keyword">case</span> <a href="../icode/Primitives.scala.html#46318" title="object GenMSIL.this.global.icodes.OR">OR</a> =&gt; <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Or</span>)
          <span title="Unit" class="keyword">case</span> <a href="../icode/Primitives.scala.html#46320" title="object GenMSIL.this.global.icodes.XOR">XOR</a> =&gt; <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Xor</span>)
        }

        <span title="Unit" class="keyword">case</span> Shift(<a title="GenMSIL.this.global.icodes.ShiftOp" id="299888">op</a>, <a title="GenMSIL.this.global.icodes.TypeKind" id="299889">kind</a>) =&gt; <a href="#299888" title="GenMSIL.this.global.icodes.ShiftOp">op</a> <span title="Unit" class="keyword">match</span> {
          <span title="Unit" class="keyword">case</span> <a href="../icode/Primitives.scala.html#46309" title="object GenMSIL.this.global.icodes.LSL">LSL</a> =&gt; <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292401">Shl</a>)
          <span title="Unit" class="keyword">case</span> <a href="../icode/Primitives.scala.html#46311" title="object GenMSIL.this.global.icodes.ASR">ASR</a> =&gt; <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292403">Shr</a>)
          <span title="Unit" class="keyword">case</span> <a href="../icode/Primitives.scala.html#46313" title="object GenMSIL.this.global.icodes.LSR">LSR</a> =&gt; <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292405">Shr_Un</a>)
        }

        <span title="Unit" class="keyword">case</span> Conversion(<a title="GenMSIL.this.global.icodes.TypeKind" id="299906">src</a>, <a title="GenMSIL.this.global.icodes.TypeKind" id="299907">dst</a>) =&gt;
          <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37759" title="=&gt; Boolean">value</a>)
            <a href="../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Converting from: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#299906" title="GenMSIL.this.global.icodes.TypeKind">src</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; to: &quot;)" class="string">&quot; to: &quot;</span> + <a href="#299907" title="GenMSIL.this.global.icodes.TypeKind">dst</a>)

          <a href="#299907" title="GenMSIL.this.global.icodes.TypeKind">dst</a> <span title="Unit" class="keyword">match</span> {
            <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46205" title="object GenMSIL.this.global.icodes.BYTE">BYTE</a> =&gt;   <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292553">Conv_U1</a>)
            <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46207" title="object GenMSIL.this.global.icodes.SHORT">SHORT</a> =&gt;  <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292413">Conv_I2</a>)
            <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46209" title="object GenMSIL.this.global.icodes.CHAR">CHAR</a> =&gt;   <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292555">Conv_U2</a>)
            <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46211" title="object GenMSIL.this.global.icodes.INT">INT</a> =&gt;    <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292415">Conv_I4</a>)
            <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46213" title="object GenMSIL.this.global.icodes.LONG">LONG</a> =&gt;   <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292417">Conv_I8</a>)
            <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46215" title="object GenMSIL.this.global.icodes.FLOAT">FLOAT</a> =&gt;  <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292419">Conv_R4</a>)
            <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46217" title="object GenMSIL.this.global.icodes.DOUBLE">DOUBLE</a> =&gt; <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292421">Conv_R8</a>)
            <span title="Unit" class="keyword">case</span> _ =&gt;
              <span title="object Console">Console</span>.<span title="(x: Any)Unit">println</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Illegal conversion at: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#287604" title="=&gt; GenMSIL.this.global.icodes.IClass">clasz</a> <span title="(x$1: Any)java.lang.String">+</span>
                              <span title="java.lang.String(&quot; at: &quot;)" class="string">&quot; at: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#297579" title="scala.tools.nsc.util.Position">pos</a>.<a href="../../util/Position.scala.html#30278" title="=&gt; scala.tools.nsc.util.SourceFile">source</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;:&quot;)" class="string">&quot;:&quot;</span> + <a href="#297579" title="scala.tools.nsc.util.Position">pos</a>.<a href="../../util/Position.scala.html#30304" title="=&gt; Int">line</a>)
          }

        <span title="Unit" class="keyword">case</span> ArrayLength(_) =&gt;
          <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292485">Ldlen</a>)

        <span title="Unit" class="keyword">case</span> <a href="../icode/Primitives.scala.html#46270" title="object GenMSIL.this.global.icodes.StartConcat">StartConcat</a> =&gt;
          <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.ConstructorInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Newobj</span>, <a href="#287559" title="=&gt; ch.epfl.lamp.compiler.msil.ConstructorInfo">MSTRING_BUILDER_CONSTR</a>)


        <span title="Unit" class="keyword">case</span> StringConcat(<a title="GenMSIL.this.global.icodes.TypeKind" id="299980">el</a>) =&gt;
          <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.Type" id="299983">elemType</a> : <span title="ch.epfl.lamp.compiler.msil.Type">MsilType</span> = <a href="#299980" title="GenMSIL.this.global.icodes.TypeKind">el</a> <span title="ch.epfl.lamp.compiler.msil.Type" class="keyword">match</span> {
            <span title="ch.epfl.lamp.compiler.msil.Type" class="keyword">case</span> REFERENCE(_) | ARRAY(_) =&gt; <a href="../../symtab/clr/CLRTypes.scala.html#287438" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MOBJECT</a>
            <span title="ch.epfl.lamp.compiler.msil.Type" class="keyword">case</span> _ =&gt; <a href="#287722" title="(t: GenMSIL.this.global.icodes.TypeKind)ch.epfl.lamp.compiler.msil.Type">msilType</a>(<a href="#299980" title="GenMSIL.this.global.icodes.TypeKind">el</a>)
          }

          <span class="keyword">val</span> <a title="Array[ch.epfl.lamp.compiler.msil.Type]" id="299984">argTypes</a>:<span title="Array[ch.epfl.lamp.compiler.msil.Type]">Array</span>[MsilType] = <span title="(xs: ch.epfl.lamp.compiler.msil.Type*)(implicit evidence$2: scala.reflect.ClassManifest[ch.epfl.lamp.compiler.msil.Type])Array[ch.epfl.lamp.compiler.msil.Type]">Array</span><span title="(clazz: Class[_])scala.reflect.ClassManifest[ch.epfl.lamp.compiler.msil.Type]">(</span><a href="#299983" title="ch.epfl.lamp.compiler.msil.Type">elemType</a>)
          <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.MethodInfo" id="299985">stringBuilderAppend</a> = <a href="#287557" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MSTRING_BUILDER</a>.<span title="(x$1: java.lang.String,x$2: Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.MethodInfo">GetMethod</span>(<span title="java.lang.String(&quot;Append&quot;)" class="string">&quot;Append&quot;</span>, <a href="#299984" title="Array[ch.epfl.lamp.compiler.msil.Type]">argTypes</a> )
          <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.MethodInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Callvirt</span>,  <a href="#299985" title="ch.epfl.lamp.compiler.msil.MethodInfo">stringBuilderAppend</a>)

        <span title="Unit" class="keyword">case</span> <a href="../icode/Primitives.scala.html#46272" title="object GenMSIL.this.global.icodes.EndConcat">EndConcat</a> =&gt;
          <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.MethodInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Callvirt</span>, <a href="#287561" title="=&gt; ch.epfl.lamp.compiler.msil.MethodInfo">MSTRING_BUILDER_TOSTRING</a>)

        <span title="Nothing" class="keyword">case</span> _ =&gt;
          <a href="../../Global.scala.html#39077" title="(msg: String)Nothing">abort</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Unimplemented primitive &quot;</span> + <a href="#297578" title="GenMSIL.this.global.icodes.Primitive">primitive</a>)
      }
    }


    ////////////////////// loading ///////////////////////

    <span class="keyword">def</span> <a title="(value: Int,code: ch.epfl.lamp.compiler.msil.emit.ILGenerator)Unit" id="287701">loadI4</a>(<a title="Int" id="296968">value</a>: <span title="Int">Int</span>, <a title="ch.epfl.lamp.compiler.msil.emit.ILGenerator" id="296969">code</a>: <span title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">ILGenerator</span>): <span title="Unit">Unit</span> = <a href="#296968" title="Int">value</a> <span title="Unit" class="keyword">match</span> {
      <span title="Unit" class="keyword">case</span> <span title="Int(-1)">-</span><span class="int">1</span> =&gt; <a href="#296969" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292251">Ldc_I4_M1</a>)
      <span title="Unit" class="keyword">case</span> <span title="Int(0)" class="int">0</span>  =&gt; <a href="#296969" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ldc_I4_0</span>)
      <span title="Unit" class="keyword">case</span> <span title="Int(1)" class="int">1</span>  =&gt; <a href="#296969" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ldc_I4_1</span>)
      <span title="Unit" class="keyword">case</span> <span title="Int(2)" class="int">2</span>  =&gt; <a href="#296969" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292257">Ldc_I4_2</a>)
      <span title="Unit" class="keyword">case</span> <span title="Int(3)" class="int">3</span>  =&gt; <a href="#296969" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292259">Ldc_I4_3</a>)
      <span title="Unit" class="keyword">case</span> <span title="Int(4)" class="int">4</span>  =&gt; <a href="#296969" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292261">Ldc_I4_4</a>)
      <span title="Unit" class="keyword">case</span> <span title="Int(5)" class="int">5</span>  =&gt; <a href="#296969" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292263">Ldc_I4_5</a>)
      <span title="Unit" class="keyword">case</span> <span title="Int(6)" class="int">6</span>  =&gt; <a href="#296969" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292265">Ldc_I4_6</a>)
      <span title="Unit" class="keyword">case</span> <span title="Int(7)" class="int">7</span>  =&gt; <a href="#296969" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292267">Ldc_I4_7</a>)
      <span title="Unit" class="keyword">case</span> <span title="Int(8)" class="int">8</span>  =&gt; <a href="#296969" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292269">Ldc_I4_8</a>)
      <span title="Unit" class="keyword">case</span> _  =&gt;
        <span title="Unit" class="keyword">if</span> (<a href="#296968" title="(x$1: Int)Boolean">value</a> <span title="(x$1: Boolean)Boolean">&gt;=</span> <span title="Int(-128)">-</span><span class="int">128</span> &amp;&amp; <a href="#296968" title="(x$1: Int)Boolean">value</a> &lt;= <span title="Int(127)" class="int">127</span>)
          <a href="#296969" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: Int)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292271">Ldc_I4_S</a>, <a href="#296968" title="Int">value</a>)
        <span class="keyword">else</span>
          <a href="#296969" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: Int)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292273">Ldc_I4</a>, <a href="#296968" title="Int">value</a>)
    }

    <span class="keyword">def</span> <a title="(code: ch.epfl.lamp.compiler.msil.emit.ILGenerator)(i: Int)Unit" id="287702">loadArg</a>(<a title="ch.epfl.lamp.compiler.msil.emit.ILGenerator" id="297130">code</a>: <span title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">ILGenerator</span>)(<a title="Int" id="297131">i</a>: <span title="Int">Int</span>) = <a href="#297131" title="Int">i</a> <span title="Unit" class="keyword">match</span> {
      <span title="Unit" class="keyword">case</span> <span title="Int(0)" class="int">0</span> =&gt; <a href="#297130" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ldarg_0</span>)
      <span title="Unit" class="keyword">case</span> <span title="Int(1)" class="int">1</span> =&gt; <a href="#297130" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292215">Ldarg_1</a>)
      <span title="Unit" class="keyword">case</span> <span title="Int(2)" class="int">2</span> =&gt; <a href="#297130" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292217">Ldarg_2</a>)
      <span title="Unit" class="keyword">case</span> <span title="Int(3)" class="int">3</span> =&gt; <a href="#297130" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292219">Ldarg_3</a>)
      <span title="Unit" class="keyword">case</span> _      =&gt;
        <span title="Unit" class="keyword">if</span> (<a href="#297131" title="(x$1: Int)Boolean">i</a> <span title="(x$1: Boolean)Boolean">&gt;=</span> <span title="Int(-128)">-</span><span class="int">128</span> &amp;&amp; <a href="#297131" title="(x$1: Int)Boolean">i</a> &lt;= <span title="Int(127)" class="int">127</span>)
          <a href="#297130" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: Int)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292237">Ldarg_S</a>, <a href="#297131" title="Int">i</a>)
        <span class="keyword">else</span>
          <a href="#297130" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: Int)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292601">Ldarg</a>, <a href="#297131" title="Int">i</a>)
    }

    <span class="keyword">def</span> <a title="(i: Int,local: GenMSIL.this.global.icodes.Local,code: ch.epfl.lamp.compiler.msil.emit.ILGenerator)Unit" id="287703">loadLocal</a>(<a title="Int" id="297188">i</a>: <span title="Int">Int</span>, <a title="GenMSIL.this.global.icodes.Local" id="297189">local</a>: <a href="../icode/Members.scala.html#46174" title="GenMSIL.this.global.icodes.Local">Local</a>, <a title="ch.epfl.lamp.compiler.msil.emit.ILGenerator" id="297190">code</a>: <span title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">ILGenerator</span>) = <a href="#297188" title="Int">i</a> <span title="Unit" class="keyword">match</span> {
      <span title="Unit" class="keyword">case</span> <span title="Int(0)" class="int">0</span> =&gt; <a href="#297190" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292221">Ldloc_0</a>)
      <span title="Unit" class="keyword">case</span> <span title="Int(1)" class="int">1</span> =&gt; <a href="#297190" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292223">Ldloc_1</a>)
      <span title="Unit" class="keyword">case</span> <span title="Int(2)" class="int">2</span> =&gt; <a href="#297190" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292225">Ldloc_2</a>)
      <span title="Unit" class="keyword">case</span> <span title="Int(3)" class="int">3</span> =&gt; <a href="#297190" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292227">Ldloc_3</a>)
      <span title="Unit" class="keyword">case</span> _      =&gt;
        <span title="Unit" class="keyword">if</span> (<a href="#297188" title="(x$1: Int)Boolean">i</a> <span title="(x$1: Boolean)Boolean">&gt;=</span> <span title="Int(-128)">-</span><span class="int">128</span> &amp;&amp; <a href="#297188" title="(x$1: Int)Boolean">i</a> &lt;= <span title="Int(127)" class="int">127</span>)
          <a href="#297190" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.emit.LocalBuilder)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292241">Ldloc_S</a>, <a href="#287719" title="(key: GenMSIL.this.global.icodes.Local)ch.epfl.lamp.compiler.msil.emit.LocalBuilder">localBuilders</a>(<a href="#297189" title="GenMSIL.this.global.icodes.Local">local</a>))
        <span class="keyword">else</span>
          <a href="#297190" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.emit.LocalBuilder)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ldloc</span>, <a href="#287719" title="(key: GenMSIL.this.global.icodes.Local)ch.epfl.lamp.compiler.msil.emit.LocalBuilder">localBuilders</a>(<a href="#297189" title="GenMSIL.this.global.icodes.Local">local</a>))
    }

    ////////////////////// labels ///////////////////////


    <span class="keyword">val</span> <a title="scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.BasicBlock,ch.epfl.lamp.compiler.msil.emit.Label]" id="287704">labels</a>: <span title="scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.BasicBlock,ch.epfl.lamp.compiler.msil.emit.Label]">HashMap</span>[BasicBlock, Label] = <span title="scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.BasicBlock,ch.epfl.lamp.compiler.msil.emit.Label]" class="keyword">new</span> <span title="scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.BasicBlock,ch.epfl.lamp.compiler.msil.emit.Label]">HashMap</span>() // labels for branches

    <span class="keyword">def</span> <a title="(condition: GenMSIL.this.global.icodes.TestOp,dest: ch.epfl.lamp.compiler.msil.emit.Label,isFloat: Boolean)Unit" id="287706">emitBr</a>(<a title="GenMSIL.this.global.icodes.TestOp" id="299465">condition</a>: <a href="../icode/Primitives.scala.html#46282" title="GenMSIL.this.global.icodes.TestOp">TestOp</a>, <a title="ch.epfl.lamp.compiler.msil.emit.Label" id="299466">dest</a>: <span title="ch.epfl.lamp.compiler.msil.emit.Label">Label</span>, <a title="Boolean" id="299467">isFloat</a>: <span title="Boolean">Boolean</span>) {
      <a href="#299465" title="GenMSIL.this.global.icodes.TestOp">condition</a> <span title="Unit" class="keyword">match</span> {
        <span title="Unit" class="keyword">case</span> <a href="../icode/Primitives.scala.html#46283" title="object GenMSIL.this.global.icodes.EQ">EQ</a> =&gt; <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,label: ch.epfl.lamp.compiler.msil.emit.Label)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Beq</span>, <a href="#299466" title="ch.epfl.lamp.compiler.msil.emit.Label">dest</a>)
        <span title="Unit" class="keyword">case</span> <a href="../icode/Primitives.scala.html#46285" title="object GenMSIL.this.global.icodes.NE">NE</a> =&gt; <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,label: ch.epfl.lamp.compiler.msil.emit.Label)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292335">Bne_Un</a>, <a href="#299466" title="ch.epfl.lamp.compiler.msil.emit.Label">dest</a>)
        <span title="Unit" class="keyword">case</span> <a href="../icode/Primitives.scala.html#46287" title="object GenMSIL.this.global.icodes.LT">LT</a> =&gt; <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,label: ch.epfl.lamp.compiler.msil.emit.Label)Unit">Emit</span>(<span title="ch.epfl.lamp.compiler.msil.emit.OpCode" class="keyword">if</span> (<a href="#299467" title="Boolean">isFloat</a>) <span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292343">Blt_Un</a> <span class="keyword">else</span> <span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292333">Blt</a>, <a href="#299466" title="ch.epfl.lamp.compiler.msil.emit.Label">dest</a>)
        <span title="Unit" class="keyword">case</span> <a href="../icode/Primitives.scala.html#46289" title="object GenMSIL.this.global.icodes.GE">GE</a> =&gt; <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,label: ch.epfl.lamp.compiler.msil.emit.Label)Unit">Emit</span>(<span title="ch.epfl.lamp.compiler.msil.emit.OpCode" class="keyword">if</span> (<a href="#299467" title="Boolean">isFloat</a>) <span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292337">Bge_Un</a> <span class="keyword">else</span> <span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292327">Bge</a>, <a href="#299466" title="ch.epfl.lamp.compiler.msil.emit.Label">dest</a>)
        <span title="Unit" class="keyword">case</span> <a href="../icode/Primitives.scala.html#46291" title="object GenMSIL.this.global.icodes.LE">LE</a> =&gt; <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,label: ch.epfl.lamp.compiler.msil.emit.Label)Unit">Emit</span>(<span title="ch.epfl.lamp.compiler.msil.emit.OpCode" class="keyword">if</span> (<a href="#299467" title="Boolean">isFloat</a>) <span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292341">Ble_Un</a> <span class="keyword">else</span> <span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292331">Ble</a>, <a href="#299466" title="ch.epfl.lamp.compiler.msil.emit.Label">dest</a>)
        <span title="Unit" class="keyword">case</span> <a href="../icode/Primitives.scala.html#46293" title="object GenMSIL.this.global.icodes.GT">GT</a> =&gt; <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,label: ch.epfl.lamp.compiler.msil.emit.Label)Unit">Emit</span>(<span title="ch.epfl.lamp.compiler.msil.emit.OpCode" class="keyword">if</span> (<a href="#299467" title="Boolean">isFloat</a>) <span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292339">Bgt_Un</a> <span class="keyword">else</span> <span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292329">Bgt</a>, <a href="#299466" title="ch.epfl.lamp.compiler.msil.emit.Label">dest</a>)
      }
    }

    <span class="keyword">def</span> <a title="(cond: GenMSIL.this.global.icodes.TestOp,dest: ch.epfl.lamp.compiler.msil.emit.Label)Unit" id="287707">emitBrBool</a>(<a title="GenMSIL.this.global.icodes.TestOp" id="299570">cond</a>: <a href="../icode/Primitives.scala.html#46282" title="GenMSIL.this.global.icodes.TestOp">TestOp</a>, <a title="ch.epfl.lamp.compiler.msil.emit.Label" id="299571">dest</a>: <span title="ch.epfl.lamp.compiler.msil.emit.Label">Label</span>) {
      <a href="#299570" title="GenMSIL.this.global.icodes.TestOp">cond</a> <span title="Unit" class="keyword">match</span> {
        // EQ -&gt; Brfalse, NE -&gt; Brtrue; this is because we come from
        // a CZJUMP. If the value on the stack is 0 (e.g. a boolen
        // method returned false), and we are in the case EQ, then
        // we need to emit Brfalse (EQ Zero means false). vice versa
        <span title="Unit" class="keyword">case</span> <a href="../icode/Primitives.scala.html#46283" title="object GenMSIL.this.global.icodes.EQ">EQ</a> =&gt; <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,label: ch.epfl.lamp.compiler.msil.emit.Label)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292321">Brfalse</a>, <a href="#299571" title="ch.epfl.lamp.compiler.msil.emit.Label">dest</a>)
        <span title="Unit" class="keyword">case</span> <a href="../icode/Primitives.scala.html#46285" title="object GenMSIL.this.global.icodes.NE">NE</a> =&gt; <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,label: ch.epfl.lamp.compiler.msil.emit.Label)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292323">Brtrue</a>, <a href="#299571" title="ch.epfl.lamp.compiler.msil.emit.Label">dest</a>)
      }
    }

    <span class="keyword">def</span> <a title="(bs: List[GenMSIL.this.global.icodes.BasicBlock])Unit" id="287708">makeLabels</a>(<a title="List[GenMSIL.this.global.icodes.BasicBlock]" id="293244">bs</a>: <span title="List[GenMSIL.this.global.icodes.BasicBlock]">List</span>[BasicBlock]) {
      <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37759" title="=&gt; Boolean">value</a>)
        <a href="../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Making labels for: &quot;</span> + <a href="#287607" title="=&gt; GenMSIL.this.global.icodes.IMethod">method</a>)
      <span class="keyword">for</span> (<a title="GenMSIL.this.global.icodes.BasicBlock" id="300271">bb</a> &lt;- <a href="#293244" title="(f: (GenMSIL.this.global.icodes.BasicBlock) =&gt; Unit)Unit">bs</a>) <a href="#287704" title="(key: GenMSIL.this.global.icodes.BasicBlock,value: ch.epfl.lamp.compiler.msil.emit.Label)Unit">labels</a>(<a href="#300271" title="GenMSIL.this.global.icodes.BasicBlock">bb</a>) = <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<a title="()ch.epfl.lamp.compiler.msil.emit.Label" id="288818">DefineLabel</a>()
    }

    ////////////////////// local vars ///////////////////////

    /**
     * Compute the indexes of each local variable of the given
     * method.
     */
    <span class="keyword">def</span> <a title="(m: GenMSIL.this.global.icodes.IMethod)Unit" id="287709">computeLocalVarsIndex</a>(<a title="GenMSIL.this.global.icodes.IMethod" id="292991">m</a>: <a href="../icode/Members.scala.html#46173" title="GenMSIL.this.global.icodes.IMethod">IMethod</a>) {
      <span class="keyword">val</span> <a title="List[GenMSIL.this.global.icodes.Local]" id="300285">params</a> = <a href="#292991" title="GenMSIL.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61249" title="=&gt; List[GenMSIL.this.global.icodes.Local]">params</a>
      <span class="keyword">var</span> <a title="Int" id="300286">idx</a> = <span title="Int(1)" class="int">1</span>
      <span title="Unit" class="keyword">if</span> (<a href="#292991" title="GenMSIL.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61225" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>.<a href="../../symtab/Symbols.scala.html#26967" title="=&gt; Boolean">isStaticMember</a>)
        <a href="#300286" title="Int">idx</a> = <span title="Int(0)" class="int">0</span>

      <span class="keyword">for</span> (<a title="GenMSIL.this.global.icodes.Local" id="300304">l</a> &lt;- <a href="#300285" title="(f: (GenMSIL.this.global.icodes.Local) =&gt; Unit)Unit">params</a>) {
        <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37759" title="=&gt; Boolean">value</a>)
          <a href="../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Index value for parameter &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#300304" title="GenMSIL.this.global.icodes.Local">l</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;: &quot;)" class="string">&quot;: &quot;</span> + <a href="#300286" title="Int">idx</a>)
        <a href="#300304" title="GenMSIL.this.global.icodes.Local">l</a>.<a href="../icode/Members.scala.html#60759" title="(x$1: Int)Unit">index</a> = <a href="#300286" title="Int">idx</a>
        <a href="#300286" title="Int">idx</a> += <span title="Int(1)" class="int">1</span> // sizeOf(l.kind)
      }

      <span class="keyword">val</span> <a title="List[GenMSIL.this.global.icodes.Local]" id="300287">locvars</a> = <a href="#292991" title="GenMSIL.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61246" title="(that: List[GenMSIL.this.global.icodes.Local])List[GenMSIL.this.global.icodes.Local]">locals</a> -- <a href="#300285" title="List[GenMSIL.this.global.icodes.Local]">params</a>
      <a href="#300286" title="Int">idx</a> = <span title="Int(0)" class="int">0</span>

      <span class="keyword">for</span> (<a title="GenMSIL.this.global.icodes.Local" id="300377">l</a> &lt;- <a href="#300287" title="(f: (GenMSIL.this.global.icodes.Local) =&gt; Unit)Unit">locvars</a>) {
        <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37759" title="=&gt; Boolean">value</a>)
          <a href="../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Index value for local variable &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#300377" title="GenMSIL.this.global.icodes.Local">l</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;: &quot;)" class="string">&quot;: &quot;</span> + <a href="#300286" title="Int">idx</a>)
        <a href="#300377" title="GenMSIL.this.global.icodes.Local">l</a>.<a href="../icode/Members.scala.html#60759" title="(x$1: Int)Unit">index</a> = <a href="#300286" title="Int">idx</a>
        <a href="#300286" title="Int">idx</a> += <span title="Int(1)" class="int">1</span> // sizeOf(l.kind)
      }

    }

    ////////////////////// Utilities ////////////////////////

    /** Return the a name of this symbol that can be used on the .NET
     * platform. It removes spaces from names.
     *
     * Special handling: scala.All and scala.AllRef are 'erased' to
     * scala.All$ and scala.AllRef$. This is needed because they are
     * not real classes, and they mean 'abrupt termination upon evaluation
     * of that expression' or 'null' respectively. This handling is
     * done already in GenICode, but here we need to remove references
     * from method signatures to these types, because such classes can
     * not exist in the classpath: the type checker will be very confused.
     */
    <span class="keyword">def</span> <a title="(sym: GenMSIL.this.global.Symbol)String" id="287710">msilName</a>(<a title="GenMSIL.this.global.Symbol" id="290250">sym</a>: <a href="../../symtab/Symbols.scala.html#26127" title="GenMSIL.this.global.Symbol">Symbol</a>): <span title="String">String</span> = {
      <span class="keyword">val</span> <a title="String" id="300427">suffix</a>: <span title="String">String</span> = <span title="String" class="keyword">if</span> (<a href="#290250" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#26996" title="(mask: Long)Boolean">hasFlag</a><span title="(x$1: Boolean)Boolean">(</span>Flags.<span title="Long(256L)">MODULE</span>) <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#290250" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#26910" title="=&gt; Boolean">isMethod</a> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span>
                               <span title="=&gt; Boolean">!</span><a href="#290250" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#26961" title="=&gt; Boolean">isImplClass</a> &amp;&amp;
                               <span title="=&gt; Boolean">!</span><a href="#290250" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#26996" title="(mask: Long)Boolean">hasFlag</a>(Flags.<span title="Long(1048576L)">JAVA</span>)) <span title="java.lang.String(&quot;$&quot;)" class="string">&quot;$&quot;</span> <span class="keyword">else</span> <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>
      // Flags.JAVA: &quot;symbol was not defined by a scala-class&quot; (java, or .net-class)

      <span title="Unit" class="keyword">if</span> (<a href="#290250" title="(x$1: AnyRef)Boolean">sym</a> == <a href="../../symtab/Definitions.scala.html#26479" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28271" title="=&gt; GenMSIL.this.global.Symbol">NothingClass</a>)
        <span title="Nothing" class="keyword">return</span> <span title="java.lang.String(&quot;scala.runtime.Nothing$&quot;)" class="string">&quot;scala.runtime.Nothing$&quot;</span>
      <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<a href="#290250" title="(x$1: AnyRef)Boolean">sym</a> == <a href="../../symtab/Definitions.scala.html#26479" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28269" title="=&gt; GenMSIL.this.global.Symbol">NullClass</a>)
        <span title="Nothing" class="keyword">return</span> <span title="java.lang.String(&quot;scala.runtime.Null$&quot;)" class="string">&quot;scala.runtime.Null$&quot;</span>

      <span title="(x$1: Any)java.lang.String">(</span><span title="String" class="keyword">if</span> (<a href="#290250" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#26897" title="(x$1: Boolean)Boolean">isClass</a> || (<a href="#290250" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#26917" title="(x$1: Boolean)Boolean">isModule</a> &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#290250" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#26910" title="=&gt; Boolean">isMethod</a>))
        <a href="#290250" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27089" title="=&gt; String">fullNameString</a>
       <span class="keyword">else</span>
         <a href="#290250" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27083" title="=&gt; GenMSIL.this.global.Name">simpleName</a>.<a href="../../symtab/Names.scala.html#28205" title="()String">toString</a>().<a title="()java.lang.String" id="7051">trim</a>()) + <a href="#300427" title="String">suffix</a>
    }


    ////////////////////// flags ///////////////////////

    <span class="keyword">def</span> <a title="(sym: GenMSIL.this.global.Symbol)Int" id="287711">msilTypeFlags</a>(<a title="GenMSIL.this.global.Symbol" id="300463">sym</a>: <a href="../../symtab/Symbols.scala.html#26127" title="GenMSIL.this.global.Symbol">Symbol</a>): <span title="Int">Int</span> = {
      <span class="keyword">var</span> <a title="Int" id="300465">mf</a>: <span title="Int">Int</span> = TypeAttributes.AutoLayout <span title="Int(0)">|</span> TypeAttributes.AnsiClass

      <span title="Unit" class="keyword">if</span>(<a href="#300463" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#26973" title="=&gt; Boolean">isNestedClass</a>) {
        <a href="#300465" title="Int">mf</a> = <a href="#300465" title="(x$1: Int)Int">mf</a> | (<span title="Int" class="keyword">if</span> (<a href="../../symtab/Symbols.scala.html#26996" title="(mask: Long)Boolean">sym</a> hasFlag Flags.<span title="Long(4L)">PRIVATE</span>) TypeAttributes.<span title="Int(3)">NestedPrivate</span> <span class="keyword">else</span> TypeAttributes.<span title="Int(2)">NestedPublic</span>)
      } <span class="keyword">else</span> {
        <a href="#300465" title="Int">mf</a> = <a href="#300465" title="(x$1: Int)Int">mf</a> | (<span title="Int" class="keyword">if</span> (<a href="../../symtab/Symbols.scala.html#26996" title="(mask: Long)Boolean">sym</a> hasFlag Flags.<span title="Long(4L)">PRIVATE</span>) TypeAttributes.<span title="Int(0)">NotPublic</span> <span class="keyword">else</span> TypeAttributes.<span title="Int(1)">Public</span>)
      }
      <a href="#300465" title="Int">mf</a> = <a href="#300465" title="(x$1: Int)Int">mf</a> | (<span title="Int" class="keyword">if</span> (<a href="../../symtab/Symbols.scala.html#26996" title="(mask: Long)Boolean">sym</a> hasFlag Flags.<span title="Long(8L)">ABSTRACT</span>) TypeAttributes.<span title="Int(128)">Abstract</span> <span class="keyword">else</span> <span title="Int(0)" class="int">0</span>)
      <a href="#300465" title="Int">mf</a> = <a href="#300465" title="(x$1: Int)Int">mf</a> | (<span title="Int" class="keyword">if</span> (<a href="#300463" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#26923" title="(x$1: Boolean)Boolean">isTrait</a> &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#300463" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#26961" title="=&gt; Boolean">isImplClass</a>) TypeAttributes.<span title="Int(32)">Interface</span> <span class="keyword">else</span> TypeAttributes.<span title="Int(0)">Class</span>)
      <a href="#300465" title="Int">mf</a> = <a href="#300465" title="(x$1: Int)Int">mf</a> | (<span title="Int" class="keyword">if</span> (<a href="#300463" title="GenMSIL.this.global.Symbol">sym</a> <a href="../../symtab/Symbols.scala.html#26969" title="=&gt; Boolean">isFinal</a>) TypeAttributes.<span title="Int(256)">Sealed</span> <span class="keyword">else</span> <span title="Int(0)" class="int">0</span>)

      <a href="#300463" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#26854" title="(f: (GenMSIL.this.global.AnnotationInfo) =&gt; Unit)Unit">annotations</a> foreach { <a title="GenMSIL.this.global.AnnotationInfo" id="300553">a</a> =&gt; <a href="#300553" title="GenMSIL.this.global.AnnotationInfo">a</a> <span title="Unit" class="keyword">match</span> {
        <span title="Unit" class="keyword">case</span> AnnotationInfo(<a href="#287594" title="=&gt; GenMSIL.this.global.Type">SerializableAttr</a>, _, _) =&gt;
          // TODO: add the Serializable TypeAttribute also if the annotation
          // System.SerializableAttribute is present (.net annotation, not scala)
          //  Best way to do it: compare with
          //  definitions.getClass(&quot;System.SerializableAttribute&quot;).tpe
          //  when frontend available
          <a href="#300465" title="Int">mf</a> = <a href="#300465" title="(x$1: Int)Int">mf</a> | TypeAttributes.<span title="Int(8192)">Serializable</span>
        <span title="Unit" class="keyword">case</span> _ =&gt; <span title="Unit">(</span>)
      }}

      <a href="#300465" title="Int">mf</a>
      // static: not possible (or?)
    }

    <span class="keyword">def</span> <a title="(sym: GenMSIL.this.global.Symbol)Short" id="287712">msilMethodFlags</a>(<a title="GenMSIL.this.global.Symbol" id="300572">sym</a>: <a href="../../symtab/Symbols.scala.html#26127" title="GenMSIL.this.global.Symbol">Symbol</a>): <span title="Short">Short</span> = {
      <span class="keyword">var</span> <a title="Int" id="300574">mf</a>: <span title="Int">Int</span> = MethodAttributes.<a title="(x$1: Short)Int" id="2502">HideBySig</a> |
        (<span title="Short" class="keyword">if</span> (<a href="../../symtab/Symbols.scala.html#26996" title="(mask: Long)Boolean">sym</a> hasFlag Flags.<span title="Long(4L)">PRIVATE</span>) MethodAttributes.<span title="Short(1)">Private</span>
         <span class="keyword">else</span> MethodAttributes.<span title="Short(6)">Public</span>)

      <span title="Unit" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="#300572" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#26914" title="=&gt; Boolean">isClassConstructor</a>) {
        <span title="Unit" class="keyword">if</span> (<a href="#300572" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#26967" title="=&gt; Boolean">isStaticMember</a>)
          <a href="#300574" title="Int">mf</a> = <a href="#300574" title="(x$1: Short)Int">mf</a> | FieldAttributes.<span title="Short(16)">Static</span>
        <span class="keyword">else</span> {
          <a href="#300574" title="Int">mf</a> = <a href="#300574" title="(x$1: Short)Int">mf</a> | MethodAttributes.<span title="Short(64)">Virtual</span>
          <span title="Unit" class="keyword">if</span> (<a href="#300572" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#26969" title="(x$1: Boolean)Boolean">isFinal</a> &amp;&amp; <span title="=&gt; Boolean">!</span><a href="../../symtab/clr/CLRTypes.scala.html#287465" title="(key: GenMSIL.this.global.loaders.clrTypes.global.Symbol)ch.epfl.lamp.compiler.msil.Type">types</a>(<a href="#300572" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#26983" title="=&gt; GenMSIL.this.global.Symbol">owner</a>.<span title="[T0]T0">asInstanceOf</span><span title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">[</span>clrTypes.global.<a href="../../symtab/Symbols.scala.html#26127" title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">Symbol</a>]).<span title="()Boolean">IsInterface</span>)
            <a href="#300574" title="Int">mf</a> = <a href="#300574" title="(x$1: Short)Int">mf</a> | MethodAttributes.<span title="Short(32)">Final</span>
          <span title="Unit" class="keyword">if</span> (<a href="#300572" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#26996" title="(mask: Long)Boolean">hasFlag</a><span title="(x$1: Boolean)Boolean">(</span>Flags.<span title="Long(16L)">DEFERRED</span>) || <a href="../../symtab/clr/CLRTypes.scala.html#287465" title="(key: GenMSIL.this.global.loaders.clrTypes.global.Symbol)ch.epfl.lamp.compiler.msil.Type">types</a>(<a href="#300572" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#26983" title="=&gt; GenMSIL.this.global.Symbol">owner</a>.<span title="[T0]T0">asInstanceOf</span><span title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">[</span>clrTypes.global.<a href="../../symtab/Symbols.scala.html#26127" title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">Symbol</a>]).<span title="()Boolean">IsInterface</span>)
            <a href="#300574" title="Int">mf</a> = <a href="#300574" title="(x$1: Short)Int">mf</a> | MethodAttributes.<span title="Short(1024)">Abstract</span>
        }
      }

      <a href="#300574" title="Int">mf</a>.<span title="=&gt; Short">toShort</span>
    }

    <span class="keyword">def</span> <a title="(sym: GenMSIL.this.global.Symbol)Short" id="287713">msilFieldFlags</a>(<a title="GenMSIL.this.global.Symbol" id="300665">sym</a>: <a href="../../symtab/Symbols.scala.html#26127" title="GenMSIL.this.global.Symbol">Symbol</a>): <span title="Short">Short</span> = {
      <span class="keyword">var</span> <a title="Int" id="300667">mf</a>: <span title="Int">Int</span> =
        <span title="Int" class="keyword">if</span> (<a href="../../symtab/Symbols.scala.html#26996" title="(mask: Long)Boolean">sym</a> hasFlag Flags.<span title="Long(4L)">PRIVATE</span>) FieldAttributes.<span title="Int(1)">Private</span>
        <span class="keyword">else</span> <span title="Int" class="keyword">if</span> (<a href="../../symtab/Symbols.scala.html#26996" title="(mask: Long)Boolean">sym</a> hasFlag Flags.<span title="Long(1L)">PROTECTED</span>) FieldAttributes.<span title="Int(5)">FamORAssem</span>
        <span class="keyword">else</span> FieldAttributes.<span title="Int(6)">Public</span>

      <span title="Unit" class="keyword">if</span> (<a href="../../symtab/Symbols.scala.html#26996" title="(mask: Long)Boolean">sym</a> hasFlag Flags.<span title="Long(32L)">FINAL</span>)
        <a href="#300667" title="Int">mf</a> = <a href="#300667" title="(x$1: Short)Int">mf</a> | FieldAttributes.<span title="Short(32)">InitOnly</span>

      <span title="Unit" class="keyword">if</span> (<a href="#300665" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#26967" title="=&gt; Boolean">isStaticMember</a>)
        <a href="#300667" title="Int">mf</a> = <a href="#300667" title="(x$1: Short)Int">mf</a> | FieldAttributes.<span title="Short(16)">Static</span>

      // TRANSIENT: &quot;not nerialized&quot;, VOLATILE: doesn't exist on .net
      // TODO: add this annotation also if the class has the custom attribute
      // System.NotSerializedAttribute
      <a href="#300665" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#26854" title="=&gt; List[GenMSIL.this.global.AnnotationInfo]">annotations</a>.<span title="(f: (GenMSIL.this.global.AnnotationInfo) =&gt; Unit)Unit">foreach</span>( <a title="GenMSIL.this.global.AnnotationInfo" id="300711">a</a> =&gt; <a href="#300711" title="GenMSIL.this.global.AnnotationInfo">a</a> <span title="Unit" class="keyword">match</span> {
        <span title="Unit" class="keyword">case</span> AnnotationInfo(<a href="#287598" title="=&gt; GenMSIL.this.global.Type">TransientAtt</a>, _, _) =&gt;
          <a href="#300667" title="Int">mf</a> = <a href="#300667" title="(x$1: Short)Int">mf</a> | FieldAttributes.<span title="Short(128)">NotSerialized</span>
        <span title="Unit" class="keyword">case</span> _ =&gt; <span title="Unit">(</span>)
      })

      <a href="#300667" title="Int">mf</a>.<span title="=&gt; Short">toShort</span>
    }

    ////////////////////// builders, types ///////////////////////

    <span class="keyword">var</span> <a title="GenMSIL.this.global.Symbol" id="287715">entryPoint</a>: <a href="../../symtab/Symbols.scala.html#26127" title="GenMSIL.this.global.Symbol">Symbol</a> = _

    <span class="keyword">val</span> <a title="scala.collection.mutable.HashSet[GenMSIL.this.global.Symbol]" id="287717">notInitializedModules</a>: <span title="scala.collection.mutable.HashSet[GenMSIL.this.global.Symbol]">HashSet</span>[Symbol] = <span title="scala.collection.mutable.HashSet[GenMSIL.this.global.Symbol]" class="keyword">new</span> <span title="scala.collection.mutable.HashSet[GenMSIL.this.global.Symbol]">HashSet</span>()

    // TODO: create fields also in def createType, and not in genClass,
    // add a getField method (it only works as it is because fields never
    // accessed from outside a class)

    <span class="keyword">val</span> <a title="scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.Local,ch.epfl.lamp.compiler.msil.emit.LocalBuilder]" id="287719">localBuilders</a>: <span title="scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.Local,ch.epfl.lamp.compiler.msil.emit.LocalBuilder]">HashMap</span>[Local, LocalBuilder] = <span title="scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.Local,ch.epfl.lamp.compiler.msil.emit.LocalBuilder]" class="keyword">new</span> <span title="scala.collection.mutable.HashMap[GenMSIL.this.global.icodes.Local,ch.epfl.lamp.compiler.msil.emit.LocalBuilder]">HashMap</span>()

    <span class="keyword">private</span>[GenMSIL] <span class="keyword">def</span> <a title="(cls: GenMSIL.this.global.icodes.IClass)Unit" id="287721">findEntryPoint</a>(<a title="GenMSIL.this.global.icodes.IClass" id="287763">cls</a>: <a href="../icode/Members.scala.html#46171" title="GenMSIL.this.global.icodes.IClass">IClass</a>) {
      <span class="keyword">def</span> <a title="(sym: GenMSIL.this.global.Symbol)Boolean" id="300737">isEntryPoint</a>(<a title="GenMSIL.this.global.Symbol" id="300738">sym</a>: <a href="../../symtab/Symbols.scala.html#26127" title="GenMSIL.this.global.Symbol">Symbol</a>):<span title="Boolean">Boolean</span> = {
        <span title="Unit" class="keyword">if</span> (<a href="#287731" title="(sym: GenMSIL.this.global.Symbol)Boolean">isStaticModule</a><span title="(x$1: Boolean)Boolean">(</span><a href="#300738" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#26983" title="=&gt; GenMSIL.this.global.Symbol">owner</a>) &amp;&amp; <a href="#287710" title="(sym: GenMSIL.this.global.Symbol)String">msilName</a><span title="(x$1: AnyRef)Boolean">(</span><a href="#300738" title="GenMSIL.this.global.Symbol">sym</a>) == <span title="java.lang.String(&quot;main&quot;)" class="string">&quot;main&quot;</span>)
          <span title="Unit" class="keyword">if</span> (<a href="#300738" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27003" title="=&gt; GenMSIL.this.global.Type">tpe</a>.<a href="../../symtab/Types.scala.html#30200" title="=&gt; List[GenMSIL.this.global.Type]">paramTypes</a>.<span title="(x$1: Int)Boolean">length</span> == <span title="Int(1)" class="int">1</span>) {
            <a href="../icode/TypeKinds.scala.html#46231" title="(t: GenMSIL.this.global.icodes.global.Type)GenMSIL.this.global.icodes.TypeKind">toTypeKind</a>(<a href="#300738" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27003" title="=&gt; GenMSIL.this.global.Type">tpe</a>.<a href="../../symtab/Types.scala.html#30200" title="(n: Int)GenMSIL.this.global.Type">paramTypes</a>(<span title="Int(0)" class="int">0</span>)) <span title="Unit" class="keyword">match</span> {
              <span title="Unit" class="keyword">case</span> ARRAY(<a title="GenMSIL.this.global.icodes.TypeKind" id="300774">elem</a>) =&gt;
                <span title="Unit" class="keyword">if</span> (<a href="#300774" title="GenMSIL.this.global.icodes.TypeKind">elem</a>.<a href="../icode/TypeKinds.scala.html#60436" title="=&gt; GenMSIL.this.global.icodes.global.Type">toType</a>.<a href="../../symtab/Types.scala.html#30180" title="(x$1: AnyRef)Boolean">typeSymbol</a> == <a href="../../symtab/Definitions.scala.html#26479" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28333" title="=&gt; GenMSIL.this.global.Symbol">StringClass</a>){
                  <span title="Nothing" class="keyword">return</span> <span title="Boolean(true)" class="keyword">true</span>
                }
              <span title="Unit" class="keyword">case</span> _ =&gt; <span title="Unit">(</span>)
            }
          }
        <span title="Boolean(false)" class="keyword">false</span>
      }

      <span class="keyword">for</span> (<a title="GenMSIL.this.global.icodes.IMethod" id="300801">m</a> &lt;- <a href="#287763" title="GenMSIL.this.global.icodes.IClass">cls</a>.<a href="../icode/Members.scala.html#66675" title="(f: (GenMSIL.this.global.icodes.IMethod) =&gt; Unit)Unit">methods</a>) {
        <span title="Unit" class="keyword">if</span> (<a href="#300737" title="(sym: GenMSIL.this.global.Symbol)Boolean">isEntryPoint</a>(<a href="#300801" title="GenMSIL.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61225" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>)) {
          <span title="Unit" class="keyword">if</span> (<a href="#287715" title="(x$1: AnyRef)Boolean">entryPoint</a> == <span title="Null(null)" class="keyword">null</span>)
            <a href="#287715" title="(x$1: GenMSIL.this.global.Symbol)Unit">entryPoint</a> = <a href="#300801" title="GenMSIL.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61225" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>
        }
      }
      <span title="Unit" class="keyword">if</span> (<a href="#287625" title="(x$1: AnyRef)Boolean">firstSourceName</a> == <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>)
        <span title="Unit" class="keyword">if</span> (<a href="#287763" title="GenMSIL.this.global.icodes.IClass">cls</a>.<a href="../icode/Members.scala.html#66669" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>.<a href="../../symtab/Symbols.scala.html#27077" title="(x$1: AnyRef)Boolean">sourceFile</a> != <span title="Null(null)" class="keyword">null</span>) // is null for nested classes
          <a href="#287625" title="(x$1: java.lang.String)Unit">firstSourceName</a> = <a href="#287763" title="GenMSIL.this.global.icodes.IClass">cls</a>.<a href="../icode/Members.scala.html#66669" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>.<a href="../../symtab/Symbols.scala.html#27077" title="=&gt; scala.tools.nsc.io.AbstractFile">sourceFile</a>.<a href="../../io/AbstractFile.scala.html#51383" title="=&gt; String">name</a>
    }

    // #####################################################################
    // get and create types

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(t: GenMSIL.this.global.icodes.TypeKind)ch.epfl.lamp.compiler.msil.Type" id="287722">msilType</a>(<a title="GenMSIL.this.global.icodes.TypeKind" id="293195">t</a>: <a href="../icode/TypeKinds.scala.html#46199" title="GenMSIL.this.global.icodes.TypeKind">TypeKind</a>): <span title="ch.epfl.lamp.compiler.msil.Type">MsilType</span> = (<a href="#293195" title="GenMSIL.this.global.icodes.TypeKind">t</a>: @<a href="../icode/TypeKinds.scala.html#46199" title="GenMSIL.this.global.icodes.TypeKind @unchecked">unchecked</a>) <span title="ch.epfl.lamp.compiler.msil.Type" class="keyword">match</span> {
      <span title="ch.epfl.lamp.compiler.msil.Type" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46201" title="object GenMSIL.this.global.icodes.UNIT">UNIT</a>           =&gt; <a href="../../symtab/clr/CLRTypes.scala.html#287429" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MVOID</a>
      <span title="ch.epfl.lamp.compiler.msil.Type" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46203" title="object GenMSIL.this.global.icodes.BOOL">BOOL</a>           =&gt; <a href="../../symtab/clr/CLRTypes.scala.html#287426" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MBOOL</a>
      <span title="ch.epfl.lamp.compiler.msil.Type" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46205" title="object GenMSIL.this.global.icodes.BYTE">BYTE</a>           =&gt; <a href="../../symtab/clr/CLRTypes.scala.html#287396" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MBYTE</a>
      <span title="ch.epfl.lamp.compiler.msil.Type" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46207" title="object GenMSIL.this.global.icodes.SHORT">SHORT</a>          =&gt; <a href="../../symtab/clr/CLRTypes.scala.html#287399" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MSHORT</a>
      <span title="ch.epfl.lamp.compiler.msil.Type" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46209" title="object GenMSIL.this.global.icodes.CHAR">CHAR</a>           =&gt; <a href="../../symtab/clr/CLRTypes.scala.html#287405" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MCHAR</a>
      <span title="ch.epfl.lamp.compiler.msil.Type" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46211" title="object GenMSIL.this.global.icodes.INT">INT</a>            =&gt; <a href="../../symtab/clr/CLRTypes.scala.html#287408" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MINT</a>
      <span title="ch.epfl.lamp.compiler.msil.Type" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46213" title="object GenMSIL.this.global.icodes.LONG">LONG</a>           =&gt; <a href="../../symtab/clr/CLRTypes.scala.html#287414" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MLONG</a>
      <span title="ch.epfl.lamp.compiler.msil.Type" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46215" title="object GenMSIL.this.global.icodes.FLOAT">FLOAT</a>          =&gt; <a href="../../symtab/clr/CLRTypes.scala.html#287420" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MFLOAT</a>
      <span title="ch.epfl.lamp.compiler.msil.Type" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46217" title="object GenMSIL.this.global.icodes.DOUBLE">DOUBLE</a>         =&gt; <a href="../../symtab/clr/CLRTypes.scala.html#287423" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MDOUBLE</a>
      <span title="ch.epfl.lamp.compiler.msil.Type" class="keyword">case</span> REFERENCE(<a title="GenMSIL.this.global.icodes.global.Symbol" id="300835">cls</a>) =&gt; <a href="#287725" title="(sym: GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.Type">getType</a>(<a href="#300835" title="GenMSIL.this.global.icodes.global.Symbol">cls</a>)
      <span title="ch.epfl.lamp.compiler.msil.Type" class="keyword">case</span> ARRAY(<a title="GenMSIL.this.global.icodes.TypeKind" id="300841">elem</a>)    =&gt; <a href="../../symtab/SymbolLoaders.scala.html#109166" title="object GenMSIL.this.global.loaders.clrTypes">clrTypes</a>.<a href="../../symtab/clr/CLRTypes.scala.html#287481" title="(elemType: ch.epfl.lamp.compiler.msil.Type)ch.epfl.lamp.compiler.msil.Type">mkArrayType</a>(<a href="#287722" title="(t: GenMSIL.this.global.icodes.TypeKind)ch.epfl.lamp.compiler.msil.Type">msilType</a>(<a href="#300841" title="GenMSIL.this.global.icodes.TypeKind">elem</a>))
    }

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tpe: GenMSIL.this.global.Type)ch.epfl.lamp.compiler.msil.Type" id="287723">msilType</a>(<a title="GenMSIL.this.global.Type" id="293193">tpe</a>: <a href="../../symtab/Types.scala.html#26205" title="GenMSIL.this.global.Type">Type</a>): <span title="ch.epfl.lamp.compiler.msil.Type">MsilType</span> = <a href="#287722" title="(t: GenMSIL.this.global.icodes.TypeKind)ch.epfl.lamp.compiler.msil.Type">msilType</a>(<a href="../icode/TypeKinds.scala.html#46231" title="(t: GenMSIL.this.global.icodes.global.Type)GenMSIL.this.global.icodes.TypeKind">toTypeKind</a>(<a href="#293193" title="GenMSIL.this.global.Type">tpe</a>))

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: GenMSIL.this.global.Symbol)Array[ch.epfl.lamp.compiler.msil.Type]" id="287724">msilParamTypes</a>(<a title="GenMSIL.this.global.Symbol" id="300863">sym</a>: <a href="../../symtab/Symbols.scala.html#26127" title="GenMSIL.this.global.Symbol">Symbol</a>): <span title="Array[ch.epfl.lamp.compiler.msil.Type]">Array</span>[MsilType] = {
      <a href="#300863" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27003" title="=&gt; GenMSIL.this.global.Type">tpe</a>.<a href="../../symtab/Types.scala.html#30200" title="=&gt; List[GenMSIL.this.global.Type]">paramTypes</a>.<span title="(f: (GenMSIL.this.global.Type) =&gt; ch.epfl.lamp.compiler.msil.Type)(implicit bf: scala.collection.generic.BuilderFactory[ch.epfl.lamp.compiler.msil.Type,List[ch.epfl.lamp.compiler.msil.Type],List[GenMSIL.this.global.Type]])List[ch.epfl.lamp.compiler.msil.Type]">map</span><span title="scala.collection.generic.BuilderFactory[ch.epfl.lamp.compiler.msil.Type,List[ch.epfl.lamp.compiler.msil.Type],List#Coll]">(</span><a href="#287723" title="(tpe: GenMSIL.this.global.Type)ch.epfl.lamp.compiler.msil.Type">msilType</a>).<span title="(implicit evidence$1: scala.reflect.ClassManifest[ch.epfl.lamp.compiler.msil.Type])Array[ch.epfl.lamp.compiler.msil.Type]">toArray</span>
    }

    <span class="keyword">def</span> <a title="(sym: GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.Type" id="287725">getType</a>(<a title="GenMSIL.this.global.Symbol" id="292760">sym</a>: <a href="../../symtab/Symbols.scala.html#26127" title="GenMSIL.this.global.Symbol">Symbol</a>): <span title="ch.epfl.lamp.compiler.msil.Type">MsilType</span> = <a href="../../symtab/clr/CLRTypes.scala.html#287465" title="=&gt; scala.collection.mutable.Map[GenMSIL.this.global.loaders.clrTypes.global.Symbol,ch.epfl.lamp.compiler.msil.Type]">types</a>.<span title="(key: GenMSIL.this.global.loaders.clrTypes.global.Symbol)Option[ch.epfl.lamp.compiler.msil.Type]">get</span>(<a href="#292760" title="GenMSIL.this.global.Symbol">sym</a>.<span title="[T0]T0">asInstanceOf</span><span title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">[</span>clrTypes.global.<a href="../../symtab/Symbols.scala.html#26127" title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">Symbol</a>]) <span title="ch.epfl.lamp.compiler.msil.Type" class="keyword">match</span> {
      <span title="ch.epfl.lamp.compiler.msil.Type" class="keyword">case</span> Some(<a title="ch.epfl.lamp.compiler.msil.Type" id="300981">typ</a>) =&gt; <a href="#300981" title="ch.epfl.lamp.compiler.msil.Type">typ</a>
      <span title="ch.epfl.lamp.compiler.msil.Type" class="keyword">case</span> <span title="object None">None</span> =&gt;
        <span class="keyword">val</span> <a title="java.lang.String" id="300984">name</a> = <span title="java.lang.String" class="keyword">if</span> (<a href="#292760" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#26934" title="(x$1: Boolean)Boolean">isModuleClass</a> &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#292760" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#26923" title="=&gt; Boolean">isTrait</a>) <a href="#292760" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27089" title="(x$1: Any)java.lang.String">fullNameString</a> + <span title="java.lang.String(&quot;$&quot;)" class="string">&quot;$&quot;</span>
                   <span class="keyword">else</span> <a href="#292760" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27089" title="=&gt; String">fullNameString</a>
        <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.Type" id="300985">typ</a> = <a href="../../symtab/SymbolLoaders.scala.html#109166" title="object GenMSIL.this.global.loaders.clrTypes">clrTypes</a>.<a href="../../symtab/clr/CLRTypes.scala.html#287479" title="(name: String)ch.epfl.lamp.compiler.msil.Type">getType</a>(<a href="#300984" title="java.lang.String">name</a>)
        <span title="ch.epfl.lamp.compiler.msil.Type" class="keyword">if</span> (<a href="#300985" title="(x$1: AnyRef)Boolean">typ</a> == <span title="Null(null)" class="keyword">null</span>)
          <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.Error" class="keyword">new</span> <span title="java.lang.Error">Error</span>(<a href="#287757" title="(sym: GenMSIL.this.global.Symbol)String">showsym</a><span title="(x$1: Any)java.lang.String">(</span><a href="#292760" title="GenMSIL.this.global.Symbol">sym</a>) <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; with name &quot;)" class="string">&quot; with name &quot;</span> + <a href="#300984" title="java.lang.String">name</a>)
        <span class="keyword">else</span> {
          <a href="../../symtab/SymbolLoaders.scala.html#109166" title="object GenMSIL.this.global.loaders.clrTypes">clrTypes</a>.<a href="../../symtab/clr/CLRTypes.scala.html#287465" title="(key: GenMSIL.this.global.loaders.clrTypes.global.Symbol,value: ch.epfl.lamp.compiler.msil.Type)Unit">types</a>(<a href="#292760" title="GenMSIL.this.global.Symbol">sym</a>.<span title="[T0]T0">asInstanceOf</span><span title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">[</span>clrTypes.global.<a href="../../symtab/Symbols.scala.html#26127" title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">Symbol</a>]) = <a href="#300985" title="ch.epfl.lamp.compiler.msil.Type">typ</a>
          <a href="#300985" title="ch.epfl.lamp.compiler.msil.Type">typ</a>
        }
    }

    <span class="keyword">def</span> <a title="(sym: GenMSIL.this.global.Symbol,mType: ch.epfl.lamp.compiler.msil.Type)Unit" id="287726">mapType</a>(<a title="GenMSIL.this.global.Symbol" id="289199">sym</a>: <a href="../../symtab/Symbols.scala.html#26127" title="GenMSIL.this.global.Symbol">Symbol</a>, <a title="ch.epfl.lamp.compiler.msil.Type" id="289200">mType</a>: <span title="ch.epfl.lamp.compiler.msil.Type">MsilType</span>) {
      <span title="(assertion: Boolean,message: =&gt; Any)Unit">assert</span>(<a href="#289200" title="(x$1: AnyRef)Boolean">mType</a> != <span title="Null(null)" class="keyword">null</span>, <a href="#287757" title="(sym: GenMSIL.this.global.Symbol)String">showsym</a>(<a href="#289199" title="GenMSIL.this.global.Symbol">sym</a>))
      <a href="../../symtab/clr/CLRTypes.scala.html#287465" title="(key: GenMSIL.this.global.loaders.clrTypes.global.Symbol,value: ch.epfl.lamp.compiler.msil.Type)Unit">types</a>(<a href="#289199" title="GenMSIL.this.global.Symbol">sym</a>.<span title="[T0]T0">asInstanceOf</span><span title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">[</span>clrTypes.global.<a href="../../symtab/Symbols.scala.html#26127" title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">Symbol</a>]) = <a href="#289200" title="ch.epfl.lamp.compiler.msil.Type">mType</a>
    }

    <span class="keyword">def</span> <a title="(iclass: GenMSIL.this.global.icodes.IClass)Unit" id="287727">createTypeBuilder</a>(<a title="GenMSIL.this.global.icodes.IClass" id="287778">iclass</a>: <a href="../icode/Members.scala.html#46171" title="GenMSIL.this.global.icodes.IClass">IClass</a>) {
      <span class="keyword">def</span> <a title="(sym: GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.Type" id="301038">msilTypeFromSym</a>(<a title="GenMSIL.this.global.Symbol" id="301044">sym</a>: <a href="../../symtab/Symbols.scala.html#26127" title="GenMSIL.this.global.Symbol">Symbol</a>): <span title="ch.epfl.lamp.compiler.msil.Type">MsilType</span> = {
	<a href="../../symtab/clr/CLRTypes.scala.html#287465" title="=&gt; scala.collection.mutable.Map[GenMSIL.this.global.loaders.clrTypes.global.Symbol,ch.epfl.lamp.compiler.msil.Type]">types</a>.<span title="(key: GenMSIL.this.global.loaders.clrTypes.global.Symbol)Option[ch.epfl.lamp.compiler.msil.Type]">get</span>(<a href="#301044" title="GenMSIL.this.global.Symbol">sym</a>.<span title="[T0]T0">asInstanceOf</span><span title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">[</span>clrTypes.global.<a href="../../symtab/Symbols.scala.html#26127" title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">Symbol</a>]) <span title="ch.epfl.lamp.compiler.msil.Type" class="keyword">match</span> {
          <span title="ch.epfl.lamp.compiler.msil.Type" class="keyword">case</span> Some(<a title="ch.epfl.lamp.compiler.msil.Type" id="301049">mtype</a>) =&gt; <a href="#301049" title="ch.epfl.lamp.compiler.msil.Type">mtype</a>
          <span title="ch.epfl.lamp.compiler.msil.Type" class="keyword">case</span> <span title="object None">None</span> =&gt; <a href="#287727" title="(iclass: GenMSIL.this.global.icodes.IClass)Unit">createTypeBuilder</a>(<a href="../icode/ICodes.scala.html#46146" title="(key: GenMSIL.this.global.icodes.global.Symbol)GenMSIL.this.global.icodes.IClass">classes</a>(<a href="#301044" title="GenMSIL.this.global.Symbol">sym</a>)); <a href="../../symtab/clr/CLRTypes.scala.html#287465" title="(key: GenMSIL.this.global.loaders.clrTypes.global.Symbol)ch.epfl.lamp.compiler.msil.Type">types</a>(<a href="#301044" title="GenMSIL.this.global.Symbol">sym</a>.<span title="[T0]T0">asInstanceOf</span><span title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">[</span>clrTypes.global.<a href="../../symtab/Symbols.scala.html#26127" title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">Symbol</a>])
        }
      }

      <span class="keyword">val</span> <a title="GenMSIL.this.global.icodes.global.Symbol" id="301039">sym</a> = <a href="#287778" title="GenMSIL.this.global.icodes.IClass">iclass</a>.<a href="../icode/Members.scala.html#66669" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>
      <span title="Unit" class="keyword">if</span> (<a href="../../symtab/clr/CLRTypes.scala.html#287465" title="(key: GenMSIL.this.global.loaders.clrTypes.global.Symbol)Boolean">types</a> contains <a href="#301039" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>.<span title="[T0]T0">asInstanceOf</span><span title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">[</span>clrTypes.global.<a href="../../symtab/Symbols.scala.html#26127" title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">Symbol</a>]) <span title="Nothing" class="keyword">return</span>

      <span class="keyword">def</span> <a title="(s: GenMSIL.this.global.Symbol)Boolean" id="301040">isInterface</a>(<a title="GenMSIL.this.global.Symbol" id="301086">s</a>: <a href="../../symtab/Symbols.scala.html#26127" title="GenMSIL.this.global.Symbol">Symbol</a>) = <a href="#301086" title="GenMSIL.this.global.Symbol">s</a>.<a href="../../symtab/Symbols.scala.html#26923" title="(x$1: Boolean)Boolean">isTrait</a> &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#301086" title="GenMSIL.this.global.Symbol">s</a>.<a href="../../symtab/Symbols.scala.html#26961" title="=&gt; Boolean">isImplClass</a>
      <span class="keyword">val</span> <a title="List[GenMSIL.this.global.Type]" id="301041">parents</a>: <span title="List[GenMSIL.this.global.Type]">List</span>[Type] =
        <span title="List[GenMSIL.this.global.Type]" class="keyword">if</span> (<a href="#301039" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27004" title="=&gt; GenMSIL.this.global.icodes.global.Type">info</a>.<a href="../../symtab/Types.scala.html#30189" title="=&gt; List[GenMSIL.this.global.icodes.global.Type]">parents</a>.<span title="=&gt; Boolean">isEmpty</span>) <span title="(xs: GenMSIL.this.global.Type*)List[GenMSIL.this.global.Type]">List</span>(<a href="../../symtab/Definitions.scala.html#26479" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28267" title="=&gt; GenMSIL.this.global.Symbol">ObjectClass</a>.<a href="../../symtab/Symbols.scala.html#27003" title="=&gt; GenMSIL.this.global.Type">tpe</a>)
        <span class="keyword">else</span> <a href="#301039" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27004" title="=&gt; GenMSIL.this.global.icodes.global.Type">info</a>.<a href="../../symtab/Types.scala.html#30189" title="=&gt; List[GenMSIL.this.global.icodes.global.Type]">parents</a>.<a title="=&gt; List[GenMSIL.this.global.icodes.global.Type]" id="25627">removeDuplicates</a>

      <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.Type" id="301042">superType</a> = <span title="ch.epfl.lamp.compiler.msil.Type" class="keyword">if</span> (<a href="#301040" title="(s: GenMSIL.this.global.Symbol)Boolean">isInterface</a>(<a href="#301039" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>)) <span title="Null(null)" class="keyword">null</span> <span class="keyword">else</span> <a href="#301038" title="(sym: GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.Type">msilTypeFromSym</a>(<a href="#301041" title="List[GenMSIL.this.global.Type]">parents</a>.<span title="=&gt; GenMSIL.this.global.Type">head</span>.<a href="../../symtab/Types.scala.html#30180" title="=&gt; GenMSIL.this.global.Symbol">typeSymbol</a>)
      <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37759" title="=&gt; Boolean">value</a>)
        <a href="../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;super type: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#301041" title="(n: Int)GenMSIL.this.global.Type">parents</a>(<span title="Int(0)" class="int">0</span>).<a href="../../symtab/Types.scala.html#30180" title="=&gt; GenMSIL.this.global.Symbol">typeSymbol</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;, msil type: &quot;)" class="string">&quot;, msil type: &quot;</span> + <a href="#301042" title="ch.epfl.lamp.compiler.msil.Type">superType</a>)

      <span class="keyword">val</span> <a title="Array[ch.epfl.lamp.compiler.msil.Type]" id="301043">interfaces</a>: <span title="Array[ch.epfl.lamp.compiler.msil.Type]">Array</span>[MsilType] =
	<a href="#301041" title="List[GenMSIL.this.global.Type]">parents</a>.<a title="=&gt; List[GenMSIL.this.global.Type]" id="25318">tail</a>.<span title="(f: (GenMSIL.this.global.Type) =&gt; ch.epfl.lamp.compiler.msil.Type)(implicit bf: scala.collection.generic.BuilderFactory[ch.epfl.lamp.compiler.msil.Type,List[ch.epfl.lamp.compiler.msil.Type],List[GenMSIL.this.global.Type]])List[ch.epfl.lamp.compiler.msil.Type]">map</span><span title="scala.collection.generic.BuilderFactory[ch.epfl.lamp.compiler.msil.Type,List[ch.epfl.lamp.compiler.msil.Type],List#Coll]">(</span><a title="GenMSIL.this.global.Type" id="301130">p</a> =&gt; <a href="#301038" title="(sym: GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.Type">msilTypeFromSym</a>(<a href="#301130" title="GenMSIL.this.global.Type">p</a>.<a href="../../symtab/Types.scala.html#30180" title="=&gt; GenMSIL.this.global.Symbol">typeSymbol</a>)).<span title="(implicit evidence$1: scala.reflect.ClassManifest[ch.epfl.lamp.compiler.msil.Type])Array[ch.epfl.lamp.compiler.msil.Type]">toArray</span>
      <span title="Unit" class="keyword">if</span> (<a href="#301041" title="List[GenMSIL.this.global.Type]">parents</a>.<span title="(x$1: Int)Boolean">length</span> &gt; <span title="Int(1)" class="int">1</span>) {
        <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37759" title="=&gt; Boolean">value</a>){
          <a href="../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="java.lang.String(&quot;interfaces:&quot;)" class="string">&quot;interfaces:&quot;</span>)
          <span class="keyword">for</span> (<a title="Int" id="301271">i</a> &lt;- <span title="implicit scala.Predef.intWrapper : (x: Int)scala.runtime.RichInt" class="int">0</span>.<span title="(end: Int)Range">until</span><span title="(f: (Int) =&gt; Unit)Unit">(</span><a href="#301043" title="Array[ch.epfl.lamp.compiler.msil.Type]">interfaces</a>.<span title="=&gt; Int">length</span>)){
            <a href="../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;  type: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#301041" title="(n: Int)GenMSIL.this.global.Type">parents</a>(<a href="#301271" title="(x$1: Int)Int">i</a> + <span title="Int(1)" class="int">1</span>).<a href="../../symtab/Types.scala.html#30180" title="=&gt; GenMSIL.this.global.Symbol">typeSymbol</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;, msil type: &quot;)" class="string">&quot;, msil type: &quot;</span> + <a href="#301043" title="(i: Int)ch.epfl.lamp.compiler.msil.Type">interfaces</a>(<a href="#301271" title="Int">i</a>))
          }
        }
      }

      <span title="Unit" class="keyword">if</span> (<a href="#301039" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#26973" title="=&gt; Boolean">isNestedClass</a>) {
	<span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder" id="301323">ownerT</a> = <a href="#301038" title="(sym: GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.Type">msilTypeFromSym</a>(<a href="#301039" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#26983" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">owner</a>).<span title="[T0]T0">asInstanceOf</span><span title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">[</span><span title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">TypeBuilder</span>]
	<span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder" id="301324">tBuilder</a> =
	  <a href="#301323" title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">ownerT</a>.<a title="(name: String,attributes: int,baseType: ch.epfl.lamp.compiler.msil.Type,interfaces: Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.emit.TypeBuilder" id="289067">DefineNestedType</a>(<a href="#287710" title="(sym: GenMSIL.this.global.Symbol)String">msilName</a>(<a href="#301039" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>), <a href="#287711" title="(sym: GenMSIL.this.global.Symbol)Int">msilTypeFlags</a>(<a href="#301039" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>), <a href="#301042" title="ch.epfl.lamp.compiler.msil.Type">superType</a>, <a href="#301043" title="Array[ch.epfl.lamp.compiler.msil.Type]">interfaces</a>)
	<a href="#287726" title="(sym: GenMSIL.this.global.Symbol,mType: ch.epfl.lamp.compiler.msil.Type)Unit">mapType</a>(<a href="#301039" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>, <a href="#301324" title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">tBuilder</a>)
      } <span class="keyword">else</span> {
	<span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder" id="301335">tBuilder</a> =
          <a href="#287616" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ModuleBuilder">mmodule</a>.<span title="(typeName: String,attributes: Int,baseType: ch.epfl.lamp.compiler.msil.Type,interfaces: Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.emit.TypeBuilder">DefineType</span>(<a href="#287710" title="(sym: GenMSIL.this.global.Symbol)String">msilName</a>(<a href="#301039" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>), <a href="#287711" title="(sym: GenMSIL.this.global.Symbol)Int">msilTypeFlags</a>(<a href="#301039" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>), <a href="#301042" title="ch.epfl.lamp.compiler.msil.Type">superType</a>, <a href="#301043" title="Array[ch.epfl.lamp.compiler.msil.Type]">interfaces</a>)
	<a href="#287726" title="(sym: GenMSIL.this.global.Symbol,mType: ch.epfl.lamp.compiler.msil.Type)Unit">mapType</a>(<a href="#301039" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>, <a href="#301335" title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">tBuilder</a>)
      }
    } // createTypeBuilder

    <span class="keyword">def</span> <a title="(iclass: GenMSIL.this.global.icodes.IClass)Unit" id="287728">createClassMembers</a>(<a title="GenMSIL.this.global.icodes.IClass" id="287790">iclass</a>: <a href="../icode/Members.scala.html#46171" title="GenMSIL.this.global.icodes.IClass">IClass</a>) {
      <span class="keyword">try</span> {
        <a href="#287729" title="(iclass: GenMSIL.this.global.icodes.IClass)Unit">createClassMembers0</a>(<a href="#287790" title="GenMSIL.this.global.icodes.IClass">iclass</a>)
      }
      <span class="keyword">catch</span> {
        <span title="Nothing" class="keyword">case</span> <a title="java.lang.Throwable" id="301360">e</a>: <a title="Throwable" id="1887">Throwable</a> =&gt;
          <span title="object java.lang.System">System</span>.<span title="java.io.PrintStream">err</span>.<span title="(x$1: java.lang.String)Unit">println</span>(<a href="#287757" title="(sym: GenMSIL.this.global.Symbol)String">showsym</a>(<a href="#287790" title="GenMSIL.this.global.icodes.IClass">iclass</a>.<a href="../icode/Members.scala.html#66669" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>))
          <span title="object java.lang.System">System</span>.<span title="java.io.PrintStream">err</span>.<span title="(x$1: java.lang.String)Unit">println</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;with methods = &quot;</span> + <a href="#287790" title="GenMSIL.this.global.icodes.IClass">iclass</a>.<a href="../icode/Members.scala.html#66675" title="=&gt; List[GenMSIL.this.global.icodes.IMethod]">methods</a>)
          <span title="Nothing" class="keyword">throw</span> <a href="#301360" title="java.lang.Throwable">e</a>
      }
    }

    <span class="keyword">def</span> <a title="(iclass: GenMSIL.this.global.icodes.IClass)Unit" id="287729">createClassMembers0</a>(<a title="GenMSIL.this.global.icodes.IClass" id="301356">iclass</a>: <a href="../icode/Members.scala.html#46171" title="GenMSIL.this.global.icodes.IClass">IClass</a>) {
      <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder" id="301377">mtype</a> = <a href="#287725" title="(sym: GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.Type">getType</a>(<a href="#301356" title="GenMSIL.this.global.icodes.IClass">iclass</a>.<a href="../icode/Members.scala.html#66669" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>).<span title="[T0]T0">asInstanceOf</span><span title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">[</span><span title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">TypeBuilder</span>]
      <span class="keyword">for</span> (<a title="GenMSIL.this.global.icodes.IField" id="301397">ifield</a> &lt;- <a href="#301356" title="GenMSIL.this.global.icodes.IClass">iclass</a>.<a href="../icode/Members.scala.html#66672" title="(f: (GenMSIL.this.global.icodes.IField) =&gt; Unit)Unit">fields</a>) {
        <span class="keyword">val</span> <a title="GenMSIL.this.global.icodes.global.Symbol" id="301398">sym</a> = <a href="#301397" title="GenMSIL.this.global.icodes.IField">ifield</a>.<a href="../icode/Members.scala.html#67140" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>
        <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37759" title="=&gt; Boolean">value</a>)
          <a href="../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Adding field: &quot;</span> + <a href="#301398" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27089" title="=&gt; String">fullNameString</a>)

        <span class="keyword">var</span> <a title="Short" id="301399">attributes</a> = <a href="#287713" title="(sym: GenMSIL.this.global.Symbol)Short">msilFieldFlags</a>(<a href="#301398" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>)
        <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.FieldBuilder" id="301400">fBuilder</a> = <a href="#301377" title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">mtype</a>.<span title="(name: String,type: ch.epfl.lamp.compiler.msil.Type,attrs: short)ch.epfl.lamp.compiler.msil.emit.FieldBuilder">DefineField</span>(<a href="#287710" title="(sym: GenMSIL.this.global.Symbol)String">msilName</a>(<a href="#301398" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>), <a href="#287723" title="(tpe: GenMSIL.this.global.Type)ch.epfl.lamp.compiler.msil.Type">msilType</a>(<a href="#301398" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27003" title="=&gt; GenMSIL.this.global.icodes.global.Type">tpe</a>), <a href="#301399" title="Short">attributes</a>)
        <a href="../../symtab/clr/CLRTypes.scala.html#287471" title="(key: GenMSIL.this.global.loaders.clrTypes.global.Symbol,value: ch.epfl.lamp.compiler.msil.FieldInfo)Unit">fields</a>(<a href="#301398" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>.<span title="[T0]T0">asInstanceOf</span><span title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">[</span>clrTypes.global.<a href="../../symtab/Symbols.scala.html#26127" title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">Symbol</a>]) = <a href="#301400" title="ch.epfl.lamp.compiler.msil.emit.FieldBuilder">fBuilder</a>
        <a href="#287638" title="(member: ch.epfl.lamp.compiler.msil.emit.ICustomAttributeSetter,annotations: List[GenMSIL.this.global.AnnotationInfo])Unit">addAttributes</a>(<a href="#301400" title="ch.epfl.lamp.compiler.msil.emit.FieldBuilder">fBuilder</a>, <a href="#301398" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#26854" title="=&gt; List[GenMSIL.this.global.icodes.global.AnnotationInfo]">annotations</a>)
      }

      <span title="Unit" class="keyword">if</span> (<a href="#301356" title="GenMSIL.this.global.icodes.IClass">iclass</a>.<a href="../icode/Members.scala.html#66669" title="(x$1: AnyRef)Boolean">symbol</a> != <a href="../../symtab/Definitions.scala.html#26479" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28393" title="=&gt; GenMSIL.this.global.Symbol">ArrayClass</a>)
      <span class="keyword">for</span> (<a title="GenMSIL.this.global.icodes.IMethod" id="301454">m</a>: <a href="../icode/Members.scala.html#46173" title="GenMSIL.this.global.icodes.IMethod">IMethod</a> &lt;- <a href="#301356" title="GenMSIL.this.global.icodes.IClass">iclass</a>.<a href="../icode/Members.scala.html#66675" title="(f: (GenMSIL.this.global.icodes.IMethod) =&gt; Unit)Unit">methods</a>) {
        <span class="keyword">val</span> <a title="GenMSIL.this.global.icodes.global.Symbol" id="301455">sym</a> = <a href="#301454" title="GenMSIL.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61225" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>
        <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37759" title="=&gt; Boolean">value</a>)
          <a href="../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Creating MethodBuilder for &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="../../symtab/Flags.scala.html#10413" title="object scala.tools.nsc.symtab.Flags">Flags</a>.<a href="../../symtab/Flags.scala.html#28814" title="(flags: Long)String">flagsToString</a>(<a href="#301455" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#26991" title="=&gt; Long">flags</a>) <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; &quot;)" class="string">&quot; &quot;</span> <span title="(x$1: Any)java.lang.String">+</span>
              <a href="#301455" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#26983" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">owner</a>.<a href="../../symtab/Symbols.scala.html#27089" title="=&gt; String">fullNameString</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;::&quot;)" class="string">&quot;::&quot;</span> + <a href="#301455" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#26988" title="=&gt; GenMSIL.this.global.icodes.global.Name">name</a>)

        <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder" id="301456">ownerType</a> = <a href="#287725" title="(sym: GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.Type">getType</a>(<a href="#301455" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27031" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">enclClass</a>).<span title="[T0]T0">asInstanceOf</span><span title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">[</span><span title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">TypeBuilder</span>]
        <span title="(assertion: Boolean,message: =&gt; Any)Unit">assert</span>(<a href="#301377" title="(x$1: AnyRef)Boolean">mtype</a> == <a href="#301456" title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">ownerType</a>, <span title="(x$1: Any)java.lang.String" class="string">&quot;mtype = &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#301377" title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">mtype</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;; ownerType = &quot;)" class="string">&quot;; ownerType = &quot;</span> + <a href="#301456" title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">ownerType</a>)
        <span class="keyword">var</span> <a title="Array[ch.epfl.lamp.compiler.msil.Type]" id="301457">paramTypes</a> = <a href="#287724" title="(sym: GenMSIL.this.global.Symbol)Array[ch.epfl.lamp.compiler.msil.Type]">msilParamTypes</a>(<a href="#301455" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>)
        <span class="keyword">val</span> <a title="Short" id="301458">attr</a> = <a href="#287712" title="(sym: GenMSIL.this.global.Symbol)Short">msilMethodFlags</a>(<a href="#301455" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>)

        <span title="Unit" class="keyword">if</span> (<a href="#301454" title="GenMSIL.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61225" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>.<a href="../../symtab/Symbols.scala.html#26914" title="=&gt; Boolean">isClassConstructor</a>) {
          <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.ConstructorBuilder" id="301505">constr</a> =
            <a href="#301456" title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">ownerType</a>.<span title="(attrs: short,callingConvention: short,paramTypes: Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.emit.ConstructorBuilder">DefineConstructor</span>(<a href="#301458" title="Short">attr</a>, CallingConventions.<span title="Short(1)">Standard</span>, <a href="#301457" title="Array[ch.epfl.lamp.compiler.msil.Type]">paramTypes</a>)
          <span class="keyword">for</span> (<a title="Int" id="301550">i</a> &lt;- <span title="implicit scala.Predef.intWrapper : (x: Int)scala.runtime.RichInt" class="int">0</span>.<span title="(end: Int)Range">until</span><span title="(f: (Int) =&gt; ch.epfl.lamp.compiler.msil.emit.ParameterBuilder)Unit">(</span><a href="#301457" title="Array[ch.epfl.lamp.compiler.msil.Type]">paramTypes</a>.<span title="=&gt; Int">length</span>)) {
            <a href="#301505" title="ch.epfl.lamp.compiler.msil.emit.ConstructorBuilder">constr</a>.<a title="(pos: int,attr: int,name: String)ch.epfl.lamp.compiler.msil.emit.ParameterBuilder" id="293016">DefineParameter</a>(<a href="#301550" title="Int">i</a>, ParameterAttributes.<span title="Int(0)">None</span>, <a href="#287710" title="(sym: GenMSIL.this.global.Symbol)String">msilName</a>(<a href="#301454" title="GenMSIL.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61249" title="(n: Int)GenMSIL.this.global.icodes.Local">params</a>(<a href="#301550" title="Int">i</a>).<a href="../icode/Members.scala.html#60751" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">sym</a>))
          }
          <a href="#287748" title="(sym: GenMSIL.this.global.Symbol,cInfo: ch.epfl.lamp.compiler.msil.ConstructorInfo)Unit">mapConstructor</a>(<a href="#301455" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>, <a href="#301505" title="ch.epfl.lamp.compiler.msil.emit.ConstructorBuilder">constr</a>)
          <a href="#287638" title="(member: ch.epfl.lamp.compiler.msil.emit.ICustomAttributeSetter,annotations: List[GenMSIL.this.global.AnnotationInfo])Unit">addAttributes</a>(<a href="#301505" title="ch.epfl.lamp.compiler.msil.emit.ConstructorBuilder">constr</a>, <a href="#301455" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#26854" title="=&gt; List[GenMSIL.this.global.icodes.global.AnnotationInfo]">annotations</a>)
        } <span class="keyword">else</span> {
          <span class="keyword">var</span> <a title="ch.epfl.lamp.compiler.msil.Type" id="301580">resType</a> = <a href="#287722" title="(t: GenMSIL.this.global.icodes.TypeKind)ch.epfl.lamp.compiler.msil.Type">msilType</a>(<a href="#301454" title="GenMSIL.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61240" title="=&gt; GenMSIL.this.global.icodes.TypeKind">returnType</a>)
          <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.MethodBuilder" id="301581">method</a> =
            <a href="#301456" title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">ownerType</a>.<span title="(name: String,attrs: short,returnType: ch.epfl.lamp.compiler.msil.Type,paramTypes: Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.emit.MethodBuilder">DefineMethod</span>(<a href="#287756" title="(methodSym: GenMSIL.this.global.Symbol)String">getMethodName</a>(<a href="#301455" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>), <a href="#301458" title="Short">attr</a>, <a href="#301580" title="ch.epfl.lamp.compiler.msil.Type">resType</a>, <a href="#301457" title="Array[ch.epfl.lamp.compiler.msil.Type]">paramTypes</a>)
          <span class="keyword">for</span> (<a title="Int" id="301630">i</a> &lt;- <span title="implicit scala.Predef.intWrapper : (x: Int)scala.runtime.RichInt" class="int">0</span>.<span title="(end: Int)Range">until</span><span title="(f: (Int) =&gt; ch.epfl.lamp.compiler.msil.emit.ParameterBuilder)Unit">(</span><a href="#301457" title="Array[ch.epfl.lamp.compiler.msil.Type]">paramTypes</a>.<span title="=&gt; Int">length</span>)){
            <a href="#301581" title="ch.epfl.lamp.compiler.msil.emit.MethodBuilder">method</a>.<span title="(pos: Int,attr: Int,name: String)ch.epfl.lamp.compiler.msil.emit.ParameterBuilder">DefineParameter</span>(<a href="#301630" title="Int">i</a>, ParameterAttributes.<span title="Int(0)">None</span>, <a href="#287710" title="(sym: GenMSIL.this.global.Symbol)String">msilName</a>(<a href="#301454" title="GenMSIL.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61249" title="(n: Int)GenMSIL.this.global.icodes.Local">params</a>(<a href="#301630" title="Int">i</a>).<a href="../icode/Members.scala.html#60751" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">sym</a>))
          }
          <span title="Unit" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="../../symtab/clr/CLRTypes.scala.html#287469" title="=&gt; scala.collection.mutable.Map[GenMSIL.this.global.loaders.clrTypes.global.Symbol,ch.epfl.lamp.compiler.msil.MethodInfo]">methods</a>.<span title="(key: GenMSIL.this.global.loaders.clrTypes.global.Symbol)Boolean">contains</span>(<a href="#301455" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>.<span title="[T0]T0">asInstanceOf</span><span title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">[</span>clrTypes.global.<a href="../../symtab/Symbols.scala.html#26127" title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">Symbol</a>]))
            <a href="#287750" title="(sym: GenMSIL.this.global.Symbol,mInfo: ch.epfl.lamp.compiler.msil.MethodInfo)Unit">mapMethod</a>(<a href="#301455" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>, <a href="#301581" title="ch.epfl.lamp.compiler.msil.emit.MethodBuilder">method</a>)
          <a href="#287638" title="(member: ch.epfl.lamp.compiler.msil.emit.ICustomAttributeSetter,annotations: List[GenMSIL.this.global.AnnotationInfo])Unit">addAttributes</a>(<a href="#301581" title="ch.epfl.lamp.compiler.msil.emit.MethodBuilder">method</a>, <a href="#301455" title="GenMSIL.this.global.icodes.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#26854" title="=&gt; List[GenMSIL.this.global.icodes.global.AnnotationInfo]">annotations</a>)
          <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37759" title="=&gt; Boolean">value</a>)
            <a href="../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;\t created MethodBuilder &quot;</span> + <a href="#301581" title="ch.epfl.lamp.compiler.msil.emit.MethodBuilder">method</a>)
        }
      }

      <span title="Unit" class="keyword">if</span> (<a href="#287731" title="(sym: GenMSIL.this.global.Symbol)Boolean">isStaticModule</a>(<a href="#301356" title="GenMSIL.this.global.icodes.IClass">iclass</a>.<a href="../icode/Members.scala.html#66669" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>)) {
        <a href="#287733" title="(sym: GenMSIL.this.global.Symbol)Unit">addModuleInstanceField</a>(<a href="#301356" title="GenMSIL.this.global.icodes.IClass">iclass</a>.<a href="../icode/Members.scala.html#66669" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>)
        <a href="#287717" title="(elem: GenMSIL.this.global.Symbol)BytecodeGenerator.this.notInitializedModules.type">notInitializedModules</a> += <a href="#301356" title="GenMSIL.this.global.icodes.IClass">iclass</a>.<a href="../icode/Members.scala.html#66669" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>
        <a href="#287735" title="(sym: GenMSIL.this.global.Symbol)Unit">addStaticInit</a>(<a href="#301356" title="GenMSIL.this.global.icodes.IClass">iclass</a>.<a href="../icode/Members.scala.html#66669" title="=&gt; GenMSIL.this.global.icodes.global.Symbol">symbol</a>)
      }

    } // createClassMembers

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: GenMSIL.this.global.Symbol)Boolean" id="287730">isTopLevelModule</a>(<a title="GenMSIL.this.global.Symbol" id="292880">sym</a>: <a href="../../symtab/Symbols.scala.html#26127" title="GenMSIL.this.global.Symbol">Symbol</a>): <span title="Boolean">Boolean</span> =
      <a href="../../symtab/SymbolTable.scala.html#26097" title="(ph: scala.tools.nsc.Phase)(op: =&gt; Boolean)Boolean">atPhase</a> (<a href="../../Global.scala.html#39176" title="=&gt; GenMSIL.this.global.Run">currentRun</a>.<a href="../../Global.scala.html#40192" title="=&gt; scala.tools.nsc.Phase">refchecksPhase</a>) {
        <a href="#292880" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#26934" title="(x$1: Boolean)Boolean">isModuleClass</a> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#292880" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#26961" title="=&gt; Boolean">isImplClass</a> &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#292880" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#26973" title="=&gt; Boolean">isNestedClass</a>
      }

    // if the module is lifted it does not need to be initialized in
    // its static constructor, and the MODULE$ field is not required.
    // the outer class will care about it.
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: GenMSIL.this.global.Symbol)Boolean" id="287731">isStaticModule</a>(<a title="GenMSIL.this.global.Symbol" id="297640">sym</a>: <a href="../../symtab/Symbols.scala.html#26127" title="GenMSIL.this.global.Symbol">Symbol</a>): <span title="Boolean">Boolean</span> = {
      // .net inner classes: removed '!sym.hasFlag(Flags.LIFTED)', added
      // 'sym.isStatic'. -&gt; no longer compatible without skipping flatten!
      <a href="#297640" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#26934" title="(x$1: Boolean)Boolean">isModuleClass</a> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> <a href="#297640" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#26966" title="=&gt; Boolean">isStatic</a> &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#297640" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#26961" title="=&gt; Boolean">isImplClass</a>
    }

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: GenMSIL.this.global.Symbol)Boolean" id="287732">isCloneable</a>(<a title="GenMSIL.this.global.Symbol" id="292764">sym</a>: <a href="../../symtab/Symbols.scala.html#26127" title="GenMSIL.this.global.Symbol">Symbol</a>): <span title="Boolean">Boolean</span> = {
      <span title="=&gt; Boolean">!</span><a href="#292764" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#26854" title="=&gt; List[GenMSIL.this.global.AnnotationInfo]">annotations</a>.<span title="(p: (GenMSIL.this.global.AnnotationInfo) =&gt; Boolean)Boolean">forall</span>( <a title="GenMSIL.this.global.AnnotationInfo" id="301731">a</a> =&gt; <a href="#301731" title="GenMSIL.this.global.AnnotationInfo">a</a> <span title="Boolean" class="keyword">match</span> {
        <span title="Boolean(false)" class="keyword">case</span> AnnotationInfo(<a href="#287596" title="=&gt; GenMSIL.this.global.Type">CloneableAttr</a>, _, _) =&gt; <span title="Boolean(false)" class="keyword">false</span>
        <span title="Boolean(true)" class="keyword">case</span> _ =&gt; <span title="Boolean(true)" class="keyword">true</span>
      })
    }

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: GenMSIL.this.global.Symbol)Unit" id="287733">addModuleInstanceField</a>(<a title="GenMSIL.this.global.Symbol" id="301669">sym</a>: <a href="../../symtab/Symbols.scala.html#26127" title="GenMSIL.this.global.Symbol">Symbol</a>) {
      <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37759" title="=&gt; Boolean">value</a>)
        <a href="../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Adding Module-Instance Field for &quot;</span> + <a href="#287757" title="(sym: GenMSIL.this.global.Symbol)String">showsym</a>(<a href="#301669" title="GenMSIL.this.global.Symbol">sym</a>))
      <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder" id="301739">tBuilder</a> = <a href="#287725" title="(sym: GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.Type">getType</a>(<a href="#301669" title="GenMSIL.this.global.Symbol">sym</a>).<span title="[T0]T0">asInstanceOf</span><span title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">[</span><span title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">TypeBuilder</span>]
      <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.FieldBuilder" id="301740">fb</a> = <a href="#301739" title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">tBuilder</a>.<span title="(name: String,type: ch.epfl.lamp.compiler.msil.Type,attrs: short)ch.epfl.lamp.compiler.msil.emit.FieldBuilder">DefineField</span>(<a href="#287540" title="=&gt; java.lang.String">MODULE_INSTANCE_NAME</a>,
                           <a href="#301739" title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">tBuilder</a>,
                           (FieldAttributes.Public <span title="Int(22)">|</span>
                            //FieldAttributes.InitOnly |
                            FieldAttributes.Static).<span title="=&gt; Short">toShort</span>)
      <a href="../../symtab/clr/CLRTypes.scala.html#287471" title="(key: GenMSIL.this.global.loaders.clrTypes.global.Symbol,value: ch.epfl.lamp.compiler.msil.FieldInfo)Unit">fields</a>(<a href="#301669" title="GenMSIL.this.global.Symbol">sym</a>.<span title="[T0]T0">asInstanceOf</span><span title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">[</span>clrTypes.global.<a href="../../symtab/Symbols.scala.html#26127" title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">Symbol</a>]) = <a href="#301740" title="ch.epfl.lamp.compiler.msil.emit.FieldBuilder">fb</a>
    }


    // the symbol may be a object-symbol (module-symbol), or a module-class-symbol
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.FieldInfo" id="287734">getModuleInstanceField</a>(<a title="GenMSIL.this.global.Symbol" id="290968">sym</a>: <a href="../../symtab/Symbols.scala.html#26127" title="GenMSIL.this.global.Symbol">Symbol</a>): <span title="ch.epfl.lamp.compiler.msil.FieldInfo">FieldInfo</span> = {
      <span title="(assertion: Boolean,message: =&gt; Any)Unit">assert</span>(<a href="#290968" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#26917" title="(x$1: Boolean)Boolean">isModule</a> || <a href="#290968" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#26934" title="=&gt; Boolean">isModuleClass</a>, <span title="(x$1: Any)java.lang.String" class="string">&quot;Expected module: &quot;</span> + <a href="#287757" title="(sym: GenMSIL.this.global.Symbol)String">showsym</a>(<a href="#290968" title="GenMSIL.this.global.Symbol">sym</a>))

      // when called by LOAD_MODULE, the corresponding type maybe doesn't
      // exist yet -&gt; make a getType
      <span class="keyword">val</span> <a title="GenMSIL.this.global.Symbol" id="301763">moduleClassSym</a> = <span title="GenMSIL.this.global.Symbol" class="keyword">if</span> (<a href="#290968" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#26917" title="=&gt; Boolean">isModule</a>) <a href="#290968" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27059" title="=&gt; GenMSIL.this.global.Symbol">moduleClass</a> <span class="keyword">else</span> <a href="#290968" title="GenMSIL.this.global.Symbol">sym</a>

      // TODO: get module field for modules not defined in the
      // source currently compiling (e.g. Console)

      <a href="../../symtab/clr/CLRTypes.scala.html#287471" title="(key: GenMSIL.this.global.loaders.clrTypes.global.Symbol)Option[ch.epfl.lamp.compiler.msil.FieldInfo]">fields</a> get <a href="#301763" title="GenMSIL.this.global.Symbol">moduleClassSym</a>.<span title="[T0]T0">asInstanceOf</span><span title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">[</span>clrTypes.global.<a href="../../symtab/Symbols.scala.html#26127" title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">Symbol</a>] <span title="ch.epfl.lamp.compiler.msil.FieldInfo" class="keyword">match</span> {
        <span title="ch.epfl.lamp.compiler.msil.FieldInfo" class="keyword">case</span> Some(<a title="ch.epfl.lamp.compiler.msil.FieldInfo" id="301782">sym</a>) =&gt; <a href="#301782" title="ch.epfl.lamp.compiler.msil.FieldInfo">sym</a>
        <span title="ch.epfl.lamp.compiler.msil.FieldInfo" class="keyword">case</span> <span title="object None">None</span> =&gt;
          //val mclass = types(moduleClassSym)
          <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.Type" id="301785">mClass</a> = <a href="../../symtab/SymbolLoaders.scala.html#109166" title="object GenMSIL.this.global.loaders.clrTypes">clrTypes</a>.<a href="../../symtab/clr/CLRTypes.scala.html#287479" title="(name: String)ch.epfl.lamp.compiler.msil.Type">getType</a>(<a href="#301763" title="GenMSIL.this.global.Symbol">moduleClassSym</a>.<a href="../../symtab/Symbols.scala.html#27089" title="(x$1: Any)java.lang.String">fullNameString</a> + <span title="java.lang.String(&quot;$&quot;)" class="string">&quot;$&quot;</span>)
          <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.FieldInfo" id="301786">mfield</a> = <a href="#301785" title="ch.epfl.lamp.compiler.msil.Type">mClass</a>.<span title="(x$1: java.lang.String)ch.epfl.lamp.compiler.msil.FieldInfo">GetField</span>(<span title="java.lang.String(&quot;MODULE$&quot;)" class="string">&quot;MODULE$&quot;</span>)
          <span title="(assertion: Boolean,message: =&gt; Any)Unit">assert</span>(<a href="#301786" title="(x$1: AnyRef)Boolean" id="6544">mfield</a> ne <span title="Null(null)" class="keyword">null</span>, <span title="(x$1: Any)java.lang.String" class="string">&quot;module not found &quot;</span> + <a href="#287757" title="(sym: GenMSIL.this.global.Symbol)String">showsym</a>(<a href="#301763" title="GenMSIL.this.global.Symbol">moduleClassSym</a>))
          <a href="../../symtab/clr/CLRTypes.scala.html#287471" title="(key: GenMSIL.this.global.loaders.clrTypes.global.Symbol,value: ch.epfl.lamp.compiler.msil.FieldInfo)Unit">fields</a>(<a href="#301763" title="GenMSIL.this.global.Symbol">moduleClassSym</a>.<span title="[T0]T0">asInstanceOf</span><span title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">[</span>clrTypes.global.<a href="../../symtab/Symbols.scala.html#26127" title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">Symbol</a>]) = <a href="#301786" title="ch.epfl.lamp.compiler.msil.FieldInfo">mfield</a>
          <a href="#301786" title="ch.epfl.lamp.compiler.msil.FieldInfo">mfield</a>
      }

      //fields(moduleClassSym)
    }

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: GenMSIL.this.global.Symbol)Unit" id="287735">addStaticInit</a>(<a title="GenMSIL.this.global.Symbol" id="301704">sym</a>: <a href="../../symtab/Symbols.scala.html#26127" title="GenMSIL.this.global.Symbol">Symbol</a>) {
      <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder" id="301815">tBuilder</a> = <a href="#287725" title="(sym: GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.Type">getType</a>(<a href="#301704" title="GenMSIL.this.global.Symbol">sym</a>).<span title="[T0]T0">asInstanceOf</span><span title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">[</span><span title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">TypeBuilder</span>]

      <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.ConstructorBuilder" id="301816">staticInit</a> = <a href="#301815" title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">tBuilder</a>.<span title="(attrs: short,callingConvention: short,paramTypes: Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.emit.ConstructorBuilder">DefineConstructor</span>(
        (MethodAttributes.Static <span title="Int(22)">|</span> MethodAttributes.Public).<span title="=&gt; Short">toShort</span>,
        CallingConventions.<span title="Short(1)">Standard</span>,
        <span title="object ch.epfl.lamp.compiler.msil.Type">MsilType</span>.<span title="Array[ch.epfl.lamp.compiler.msil.Type]">EmptyTypes</span>)

      <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.ILGenerator" id="301817">sicode</a> = <a href="#301816" title="ch.epfl.lamp.compiler.msil.emit.ConstructorBuilder">staticInit</a>.<span title="()ch.epfl.lamp.compiler.msil.emit.ILGenerator">GetILGenerator</span>()

      <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.ConstructorInfo" id="301818">instanceConstructor</a> = <a href="../../symtab/clr/CLRTypes.scala.html#287467" title="(key: GenMSIL.this.global.loaders.clrTypes.global.Symbol)ch.epfl.lamp.compiler.msil.ConstructorInfo">constructors</a>(<a href="#301704" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27033" title="=&gt; GenMSIL.this.global.Symbol">primaryConstructor</a>.<span title="[T0]T0">asInstanceOf</span><span title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">[</span>clrTypes.global.<a href="../../symtab/Symbols.scala.html#26127" title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">Symbol</a>])

      // there are no constructor parameters. assuming the constructor takes no parameter
      // is fine: we call (in the static constructor) the constructor of the module class,
      // which takes no arguments - an object definition cannot take constructor arguments.
      <a href="#301817" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">sicode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.ConstructorInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Newobj</span>, <a href="#301818" title="ch.epfl.lamp.compiler.msil.ConstructorInfo">instanceConstructor</a>)
      // the stsfld is done in the instance constructor, just after the super call.
      <a href="#301817" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">sicode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Pop</span>)

      <a href="#301817" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">sicode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ret</span>)
    }

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: GenMSIL.this.global.Symbol)Unit" id="287736">dumpMirrorClass</a>(<a title="GenMSIL.this.global.Symbol" id="292903">sym</a>: <a href="../../symtab/Symbols.scala.html#26127" title="GenMSIL.this.global.Symbol">Symbol</a>) {
      <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.Type" id="301863">tBuilder</a> = <a href="#287725" title="(sym: GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.Type">getType</a>(<a href="#292903" title="GenMSIL.this.global.Symbol">sym</a>)
      <span title="(assertion: Boolean,message: =&gt; Any)Unit">assert</span>(<a href="#292903" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#26934" title="=&gt; Boolean">isModuleClass</a>, <span title="(x$1: Any)java.lang.String" class="string">&quot;Can't generate Mirror-Class for the Non-Module class &quot;</span> + <a href="#292903" title="GenMSIL.this.global.Symbol">sym</a>)
      <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37759" title="=&gt; Boolean">value</a>)
        <a href="../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Dumping mirror class for object: &quot;</span> + <a href="#292903" title="GenMSIL.this.global.Symbol">sym</a>)
      <span class="keyword">val</span> <a title="String" id="301864">moduleName</a> = <a href="#287710" title="(sym: GenMSIL.this.global.Symbol)String">msilName</a>(<a href="#292903" title="GenMSIL.this.global.Symbol">sym</a>)
      <span class="keyword">val</span> <a title="java.lang.String" id="301865">mirrorName</a> = <a href="#301864" title="String">moduleName</a>.<span title="(x$1: Int,x$2: Int)java.lang.String">substring</span>(<span title="Int(0)" class="int">0</span>, <a href="#301864" title="String">moduleName</a>.<span title="()Int">length</span><span title="(x$1: Int)Int">(</span>) - <span title="Int(1)" class="int">1</span>)
      <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder" id="301866">mirrorTypeBuilder</a> = <a href="#287616" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ModuleBuilder">mmodule</a>.<span title="(typeName: String,attributes: Int,baseType: ch.epfl.lamp.compiler.msil.Type,interfaces: Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.emit.TypeBuilder">DefineType</span>(<a href="#301865" title="java.lang.String">mirrorName</a>,
                                                 TypeAttributes.Class |
                                                 TypeAttributes.Public <span title="Int(257)">|</span>
                                                 TypeAttributes.Sealed,
                //FIXME: an object may have a super-type (a class, not an object) -&gt; not in mirror class?
                                                 <a href="../../symtab/clr/CLRTypes.scala.html#287438" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MOBJECT</a>,
                                                 <span title="object ch.epfl.lamp.compiler.msil.Type">MsilType</span>.<span title="Array[ch.epfl.lamp.compiler.msil.Type]">EmptyTypes</span>)

      <span class="keyword">val</span> <a title="GenMSIL.this.global.icodes.IClass" id="301867">iclass</a> = <a href="../icode/ICodes.scala.html#46146" title="(key: GenMSIL.this.global.icodes.global.Symbol)GenMSIL.this.global.icodes.IClass">classes</a>(<a href="#292903" title="GenMSIL.this.global.Symbol">sym</a>)

      <span class="keyword">for</span> (<a title="GenMSIL.this.global.Symbol" id="301998">m</a> &lt;- <a href="#292903" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27003" title="=&gt; GenMSIL.this.global.Type">tpe</a>.<a href="../../symtab/Types.scala.html#30214" title="(f: (GenMSIL.this.global.Symbol) =&gt; Unit)Unit">nonPrivateMembers</a>
           <span class="keyword">if</span> <a href="#301998" title="GenMSIL.this.global.Symbol">m</a>.<a href="../../symtab/Symbols.scala.html#26983" title="(x$1: AnyRef)Boolean">owner</a> <span title="(x$1: Boolean)Boolean">!=</span> <a href="../../symtab/Definitions.scala.html#26479" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28267" title="=&gt; GenMSIL.this.global.Symbol">ObjectClass</a> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#301998" title="GenMSIL.this.global.Symbol">m</a>.<a href="../../symtab/Symbols.scala.html#26996" title="(mask: Long)Boolean">hasFlag</a>(Flags.<span title="Long(1L)">PROTECTED</span>) <span title="(x$1: Boolean)Boolean">&amp;&amp;</span>
           <a href="#301998" title="GenMSIL.this.global.Symbol">m</a>.<a href="../../symtab/Symbols.scala.html#26910" title="=&gt; Boolean">isMethod</a> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#301998" title="GenMSIL.this.global.Symbol">m</a>.<a href="../../symtab/Symbols.scala.html#26914" title="=&gt; Boolean">isClassConstructor</a> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#301998" title="GenMSIL.this.global.Symbol">m</a>.<a href="../../symtab/Symbols.scala.html#26967" title="=&gt; Boolean">isStaticMember</a> &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#301998" title="GenMSIL.this.global.Symbol">m</a>.<a href="../../symtab/Symbols.scala.html#26996" title="(mask: Long)Boolean">hasFlag</a>(Flags.<span title="Long(2048L)">CASE</span>))
        {
          <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37759" title="=&gt; Boolean">value</a>)
            <a href="../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;   Mirroring method: &quot;</span> + <a href="#301998" title="GenMSIL.this.global.Symbol">m</a>)
          <span class="keyword">val</span> <a title="Array[ch.epfl.lamp.compiler.msil.Type]" id="301999">paramTypes</a> = <a href="#287724" title="(sym: GenMSIL.this.global.Symbol)Array[ch.epfl.lamp.compiler.msil.Type]">msilParamTypes</a>(<a href="#301998" title="GenMSIL.this.global.Symbol">m</a>)
          <span class="keyword">val</span> <a title="Array[String]" id="302000">paramNames</a>: <span title="Array[String]">Array</span>[String] = <span title="Array[String]" class="keyword">new</span> <span title="Array[String]">Array</span>[String](<a href="#301999" title="Array[ch.epfl.lamp.compiler.msil.Type]">paramTypes</a>.<span title="=&gt; Int">length</span>)
          <span class="keyword">for</span> (<a title="Int" id="302051">i</a> &lt;- <span title="(end: Int)Range" class="int">0</span> <span title="(f: (Int) =&gt; Unit)Unit">until</span> <a href="#301999" title="Array[ch.epfl.lamp.compiler.msil.Type]">paramTypes</a>.<span title="=&gt; Int">length</span>)
            <a href="#302000" title="(i: Int,x: String)Unit">paramNames</a>(<a href="#302051" title="Int">i</a>) = <span title="(x$1: Any)java.lang.String" class="string">&quot;x_&quot;</span> + <a href="#302051" title="Int">i</a>

          // CHECK: verify if getMethodName is better than msilName
          <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.MethodBuilder" id="302001">mirrorMethod</a> = <a href="#301866" title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">mirrorTypeBuilder</a>.<span title="(name: String,attrs: short,returnType: ch.epfl.lamp.compiler.msil.Type,paramTypes: Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.emit.MethodBuilder">DefineMethod</span>(<a href="#287756" title="(methodSym: GenMSIL.this.global.Symbol)String">getMethodName</a>(<a href="#301998" title="GenMSIL.this.global.Symbol">m</a>),
                                                            MethodAttributes.Public <span title="Short(22)">|</span>
                                                            MethodAttributes.Static,
                                                            <a href="#287723" title="(tpe: GenMSIL.this.global.Type)ch.epfl.lamp.compiler.msil.Type">msilType</a>(<a href="#301998" title="GenMSIL.this.global.Symbol">m</a>.<a href="../../symtab/Symbols.scala.html#27003" title="=&gt; GenMSIL.this.global.Type">tpe</a>.<a href="../../symtab/Types.scala.html#30193" title="=&gt; GenMSIL.this.global.Type">resultType</a>),
                                                            <a href="#301999" title="Array[ch.epfl.lamp.compiler.msil.Type]">paramTypes</a>)

          <span class="keyword">var</span> <a title="Int" id="302002">i</a> = <span title="Int(0)" class="int">0</span>
          <span title="Unit" class="keyword">while</span> (<a href="#302002" title="(x$1: Int)Boolean">i</a> &lt; <a href="#301999" title="Array[ch.epfl.lamp.compiler.msil.Type]">paramTypes</a>.<span title="=&gt; Int">length</span>) <a href="#302004" title="()Unit">{</a>
            <a href="#302001" title="ch.epfl.lamp.compiler.msil.emit.MethodBuilder">mirrorMethod</a>.<span title="(pos: Int,attr: Int,name: String)ch.epfl.lamp.compiler.msil.emit.ParameterBuilder">DefineParameter</span>(<a href="#302002" title="Int">i</a>, ParameterAttributes.<span title="Int(0)">None</span>, <a href="#302000" title="(i: Int)String">paramNames</a>(<a href="#302002" title="Int">i</a>))
            <a href="#302002" title="Int">i</a> += <span title="Int(1)" class="int">1</span>
          }

          <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.ILGenerator" id="302003">mirrorCode</a> = <a href="#302001" title="ch.epfl.lamp.compiler.msil.emit.MethodBuilder">mirrorMethod</a>.<span title="()ch.epfl.lamp.compiler.msil.emit.ILGenerator">GetILGenerator</span>()
          <a href="#302003" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">mirrorCode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.FieldInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ldsfld</span>, <a href="#287734" title="(sym: GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.FieldInfo">getModuleInstanceField</a>(<a href="#292903" title="GenMSIL.this.global.Symbol">sym</a>))
          <span title="implicit scala.Predef.intWrapper : (x: Int)scala.runtime.RichInt" class="int">0</span>.<span title="(end: Int)Range">until</span><span title="(f: (Int) =&gt; Unit)Unit">(</span><a href="#301999" title="Array[ch.epfl.lamp.compiler.msil.Type]">paramTypes</a>.<span title="=&gt; Int">length</span>) foreach <a href="#287702" title="(code: ch.epfl.lamp.compiler.msil.emit.ILGenerator)(i: Int)Unit">loadArg</a><a href="#302212" title="Int">(</a><a href="#302003" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">mirrorCode</a>)

          <a href="#302003" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">mirrorCode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.MethodInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Callvirt</span>, <a href="#287749" title="(sym: GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.MethodInfo">getMethod</a>(<a href="#301998" title="GenMSIL.this.global.Symbol">m</a>))
          <a href="#302003" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">mirrorCode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ret</span>)
        }

      <a href="#287637" title="(sym: GenMSIL.this.global.Symbol,tBuilder: ch.epfl.lamp.compiler.msil.emit.TypeBuilder)Unit">addSymtabAttribute</a>(<a href="#292903" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27058" title="=&gt; GenMSIL.this.global.Symbol">sourceModule</a>, <a href="#301866" title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">mirrorTypeBuilder</a>)

      <a href="#301866" title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">mirrorTypeBuilder</a>.<span title="()ch.epfl.lamp.compiler.msil.Type">CreateType</span>()
      <a href="#301866" title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">mirrorTypeBuilder</a>.<span title="(sourceFilepath: String)Unit">setSourceFilepath</span>(<a href="#301867" title="GenMSIL.this.global.icodes.IClass">iclass</a>.<a href="../icode/Members.scala.html#66678" title="=&gt; GenMSIL.this.global.icodes.global.CompilationUnit">cunit</a>.<a href="../../CompilationUnits.scala.html#45431" title="=&gt; scala.tools.nsc.util.SourceFile">source</a>.<a href="../../util/SourceFile.scala.html#68207" title="=&gt; scala.tools.nsc.io.AbstractFile">file</a>.<a href="../../io/AbstractFile.scala.html#51384" title="=&gt; String">path</a>)
    }


    // #####################################################################
    // delegate callers

    <span class="keyword">var</span> <a title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder" id="287738">delegateCallers</a>: <span title="ch.epfl.lamp.compiler.msil.emit.TypeBuilder">TypeBuilder</span> = _
    <span class="keyword">var</span> <a title="Int" id="287741">nbDelegateCallers</a>: <span title="Int">Int</span> = <span title="Int(0)" class="int">0</span>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="()Unit" id="287743">initDelegateCallers</a>() = {
      <a href="#287738" title="(x$1: ch.epfl.lamp.compiler.msil.emit.TypeBuilder)Unit">delegateCallers</a> = <a href="#287616" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ModuleBuilder">mmodule</a>.<a title="(typeName: String,attributes: Int)ch.epfl.lamp.compiler.msil.emit.TypeBuilder" id="288721">DefineType</a>(<span title="java.lang.String(&quot;$DelegateCallers&quot;)" class="string">&quot;$DelegateCallers&quot;</span>, TypeAttributes.Public <span title="Int(257)">|</span>
                                          TypeAttributes.Sealed)
    }

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(functionType: GenMSIL.this.global.Type,delegateType: GenMSIL.this.global.Type)Unit" id="287744">createDelegateCaller</a>(<a title="GenMSIL.this.global.Type" id="297910">functionType</a>: <a href="../../symtab/Types.scala.html#26205" title="GenMSIL.this.global.Type">Type</a>, <a title="GenMSIL.this.global.Type" id="297911">delegateType</a>: <a href="../../symtab/Types.scala.html#26205" title="GenMSIL.this.global.Type">Type</a>) = {
      <span title="Unit" class="keyword">if</span> (<a href="#287738" title="(x$1: AnyRef)Boolean">delegateCallers</a> == <span title="Null(null)" class="keyword">null</span>)
        <a href="#287743" title="()Unit">initDelegateCallers</a>()
      // create a field an store the function-object
      <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.Type" id="297914">mFunctionType</a>: <span title="ch.epfl.lamp.compiler.msil.Type">MsilType</span> = <a href="#287723" title="(tpe: GenMSIL.this.global.Type)ch.epfl.lamp.compiler.msil.Type">msilType</a>(<a href="#297910" title="GenMSIL.this.global.Type">functionType</a>)
      <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.FieldBuilder" id="297915">anonfunField</a>: <a title="ch.epfl.lamp.compiler.msil.emit.FieldBuilder" id="287324">FieldBuilder</a> = <a href="#287738" title="=&gt; ch.epfl.lamp.compiler.msil.emit.TypeBuilder">delegateCallers</a>.<span title="(name: String,type: ch.epfl.lamp.compiler.msil.Type,attrs: short)ch.epfl.lamp.compiler.msil.emit.FieldBuilder">DefineField</span>(
        <span title="(x$1: Any)java.lang.String" class="string">&quot;$anonfunField$$&quot;</span> + <a href="#287741" title="=&gt; Int">nbDelegateCallers</a>, <a href="#297914" title="ch.epfl.lamp.compiler.msil.Type">mFunctionType</a>,
        FieldAttributes.InitOnly | FieldAttributes.Public <span title="Short(54)">|</span> FieldAttributes.Static)
      <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.FieldInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Stsfld</span>, <a href="#297915" title="ch.epfl.lamp.compiler.msil.emit.FieldBuilder">anonfunField</a>)


      // create the static caller method and the delegate object
      <span class="keyword">val</span> <a href="#297917" title="(List[GenMSIL.this.global.Symbol], GenMSIL.this.global.Type)">(</a><a href="#297916" title="List[GenMSIL.this.global.Symbol]" id="297917">params</a>, <a href="#297916" title="GenMSIL.this.global.Type" id="297918">returnType</a>) = <a href="#297911" title="GenMSIL.this.global.Type">delegateType</a>.<a href="../../symtab/Types.scala.html#30217" title="(name: GenMSIL.this.global.Name)GenMSIL.this.global.Symbol">member</a>(<a href="../../symtab/StdNames.scala.html#26531" title="object GenMSIL.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29828" title="=&gt; GenMSIL.this.global.Name">apply</a>).<a href="../../symtab/Symbols.scala.html#27003" title="=&gt; GenMSIL.this.global.Type">tpe</a> <span title="(List[GenMSIL.this.global.Symbol], GenMSIL.this.global.Type)" class="keyword">match</span> {
        <span title="(List[GenMSIL.this.global.Symbol], GenMSIL.this.global.Type)" class="keyword">case</span> MethodType(<a title="List[GenMSIL.this.global.Symbol]" id="298060">delParams</a>, <a title="GenMSIL.this.global.Type" id="298061">delReturn</a>) =&gt; <span title="(_1: List[GenMSIL.this.global.Symbol],_2: GenMSIL.this.global.Type)(List[GenMSIL.this.global.Symbol], GenMSIL.this.global.Type)">(</span><a href="#298060" title="List[GenMSIL.this.global.Symbol]">delParams</a>, <a href="#298061" title="GenMSIL.this.global.Type">delReturn</a>)
        <span title="Nothing" class="keyword">case</span> _ =&gt; <a href="../../Global.scala.html#39077" title="(msg: String)Nothing">abort</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;not a delegate type: &quot;</span>  + <a href="#297911" title="GenMSIL.this.global.Type">delegateType</a>)
      }
      <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.MethodBuilder" id="297919">caller</a>: <span title="ch.epfl.lamp.compiler.msil.emit.MethodBuilder">MethodBuilder</span> = <a href="#287738" title="=&gt; ch.epfl.lamp.compiler.msil.emit.TypeBuilder">delegateCallers</a>.<span title="(name: String,attrs: short,returnType: ch.epfl.lamp.compiler.msil.Type,paramTypes: Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.emit.MethodBuilder">DefineMethod</span>(
        <span title="(x$1: Any)java.lang.String" class="string">&quot;$delegateCaller$$&quot;</span> + <a href="#287741" title="=&gt; Int">nbDelegateCallers</a>,
        MethodAttributes.Final | MethodAttributes.Public <span title="Short(54)">|</span> MethodAttributes.Static,
        <a href="#287723" title="(tpe: GenMSIL.this.global.Type)ch.epfl.lamp.compiler.msil.Type">msilType</a>(<a href="#297918" title="GenMSIL.this.global.Type">returnType</a>), (<a href="#297917" title="(f: (GenMSIL.this.global.Symbol) =&gt; GenMSIL.this.global.Type)(implicit bf: scala.collection.generic.BuilderFactory[GenMSIL.this.global.Type,List[GenMSIL.this.global.Type],List[GenMSIL.this.global.Symbol]])List[GenMSIL.this.global.Type]">params</a> <span title="scala.collection.generic.BuilderFactory[GenMSIL.this.global.Type,List[GenMSIL.this.global.Type],List#Coll]">map</span> (<a href="#298139" title="GenMSIL.this.global.Symbol">_</a>.<a href="../../symtab/Symbols.scala.html#27003" title="=&gt; GenMSIL.this.global.Type">tpe</a>)).<span title="(f: (GenMSIL.this.global.Type) =&gt; ch.epfl.lamp.compiler.msil.Type)(implicit bf: scala.collection.generic.BuilderFactory[ch.epfl.lamp.compiler.msil.Type,List[ch.epfl.lamp.compiler.msil.Type],List[GenMSIL.this.global.Type]])List[ch.epfl.lamp.compiler.msil.Type]">map</span><span title="scala.collection.generic.BuilderFactory[ch.epfl.lamp.compiler.msil.Type,List[ch.epfl.lamp.compiler.msil.Type],List#Coll]">(</span><a href="#287723" title="(tpe: GenMSIL.this.global.Type)ch.epfl.lamp.compiler.msil.Type">msilType</a>).<span title="(implicit evidence$1: scala.reflect.ClassManifest[ch.epfl.lamp.compiler.msil.Type])Array[ch.epfl.lamp.compiler.msil.Type]">toArray</span>)
      <span class="keyword">for</span> (<a title="Int" id="298365">i</a> &lt;- <span title="(end: Int)Range" class="int">0</span> <span title="(f: (Int) =&gt; ch.epfl.lamp.compiler.msil.emit.ParameterBuilder)Unit">until</span> <a href="#297917" title="List[GenMSIL.this.global.Symbol]">params</a>.<span title="=&gt; Int">length</span>)
        <a href="#297919" title="ch.epfl.lamp.compiler.msil.emit.MethodBuilder">caller</a>.<span title="(pos: Int,attr: Int,name: String)ch.epfl.lamp.compiler.msil.emit.ParameterBuilder">DefineParameter</span>(<a href="#298365" title="Int">i</a>, ParameterAttributes.<span title="Int(0)">None</span>, <span title="(x$1: Any)java.lang.String" class="string">&quot;arg&quot;</span> + <a href="#298365" title="Int">i</a>) // FIXME: use name of parameter symbol 
      <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.ConstructorInfo" id="297920">delegCtor</a> = <a href="#287723" title="(tpe: GenMSIL.this.global.Type)ch.epfl.lamp.compiler.msil.Type">msilType</a>(<a href="#297911" title="GenMSIL.this.global.Type">delegateType</a>).<span title="(x$1: Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.ConstructorInfo">GetConstructor</span>(<span title="(xs: ch.epfl.lamp.compiler.msil.Type*)(implicit evidence$2: scala.reflect.ClassManifest[ch.epfl.lamp.compiler.msil.Type])Array[ch.epfl.lamp.compiler.msil.Type]">Array</span><span title="(clazz: Class[_])scala.reflect.ClassManifest[ch.epfl.lamp.compiler.msil.Type]">(</span><a href="../../symtab/clr/CLRTypes.scala.html#287438" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MOBJECT</a>, <a href="#287565" title="=&gt; ch.epfl.lamp.compiler.msil.Type">INT_PTR</a>))
      <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ldnull</span>)
      <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.MethodInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ldftn</span>, <a href="#297919" title="ch.epfl.lamp.compiler.msil.emit.MethodBuilder">caller</a>)
      <a href="#287619" title="=&gt; ch.epfl.lamp.compiler.msil.emit.ILGenerator">mcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.ConstructorInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Newobj</span>, <a href="#297920" title="ch.epfl.lamp.compiler.msil.ConstructorInfo">delegCtor</a>)


      // create the static caller method body
      <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.MethodInfo" id="297921">functionApply</a>: <span title="ch.epfl.lamp.compiler.msil.MethodInfo">MethodInfo</span> = <a href="#287749" title="(sym: GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.MethodInfo">getMethod</a>(<a href="#297910" title="GenMSIL.this.global.Type">functionType</a>.<a href="../../symtab/Types.scala.html#30217" title="(name: GenMSIL.this.global.Name)GenMSIL.this.global.Symbol">member</a>(<a href="../../symtab/StdNames.scala.html#26531" title="object GenMSIL.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29828" title="=&gt; GenMSIL.this.global.Name">apply</a>))
      <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.emit.ILGenerator" id="297922">dcode</a>: <span title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">ILGenerator</span> = <a href="#297919" title="ch.epfl.lamp.compiler.msil.emit.MethodBuilder">caller</a>.<span title="()ch.epfl.lamp.compiler.msil.emit.ILGenerator">GetILGenerator</span>()
      <a href="#297922" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">dcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.FieldInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ldsfld</span>, <a href="#297915" title="ch.epfl.lamp.compiler.msil.emit.FieldBuilder">anonfunField</a>)
      <span class="keyword">for</span> (<a title="Int" id="298552">i</a> &lt;- <span title="(end: Int)Range" class="int">0</span> <span title="(f: (Int) =&gt; Unit)Unit">until</span> <a href="#297917" title="List[GenMSIL.this.global.Symbol]">params</a>.<span title="=&gt; Int">length</span>) {
        <a href="#287702" title="(code: ch.epfl.lamp.compiler.msil.emit.ILGenerator)(i: Int)Unit">loadArg</a>(<a href="#297922" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">dcode</a>)(<a href="#298552" title="Int">i</a>)
        <a href="#287745" title="(code: ch.epfl.lamp.compiler.msil.emit.ILGenerator,boxType: GenMSIL.this.global.icodes.TypeKind)Unit">emitBox</a>(<a href="#297922" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">dcode</a>, <a href="../icode/TypeKinds.scala.html#46231" title="(t: GenMSIL.this.global.icodes.global.Type)GenMSIL.this.global.icodes.TypeKind">toTypeKind</a>(<a href="#297917" title="(n: Int)GenMSIL.this.global.Symbol">params</a>(<a href="#298552" title="Int">i</a>).<a href="../../symtab/Symbols.scala.html#27003" title="=&gt; GenMSIL.this.global.Type">tpe</a>))
      }
      <a href="#297922" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">dcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.MethodInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Callvirt</span>, <a href="#297921" title="ch.epfl.lamp.compiler.msil.MethodInfo">functionApply</a>)
      <a href="#287746" title="(code: ch.epfl.lamp.compiler.msil.emit.ILGenerator,boxType: GenMSIL.this.global.icodes.TypeKind)Unit">emitUnbox</a>(<a href="#297922" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">dcode</a>, <a href="../icode/TypeKinds.scala.html#46231" title="(t: GenMSIL.this.global.icodes.global.Type)GenMSIL.this.global.icodes.TypeKind">toTypeKind</a>(<a href="#297918" title="GenMSIL.this.global.Type">returnType</a>))
      <a href="#297922" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">dcode</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ret</span>)

      <a href="#287741" title="(x$1: Int)Unit">nbDelegateCallers</a> = <a href="#287741" title="(x$1: Int)Int">nbDelegateCallers</a> + <span title="Int(1)" class="int">1</span>

    } //def createDelegateCaller

    <span class="keyword">def</span> <a title="(code: ch.epfl.lamp.compiler.msil.emit.ILGenerator,boxType: GenMSIL.this.global.icodes.TypeKind)Unit" id="287745">emitBox</a>(<a title="ch.epfl.lamp.compiler.msil.emit.ILGenerator" id="298557">code</a>: <span title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">ILGenerator</span>, <a title="GenMSIL.this.global.icodes.TypeKind" id="298558">boxType</a>: <a href="../icode/TypeKinds.scala.html#46199" title="GenMSIL.this.global.icodes.TypeKind">TypeKind</a>) = (<a href="#298558" title="GenMSIL.this.global.icodes.TypeKind">boxType</a>: @<a href="../icode/TypeKinds.scala.html#46199" title="GenMSIL.this.global.icodes.TypeKind @unchecked">unchecked</a>) <span title="Unit" class="keyword">match</span> {
      // doesn't make sense, unit as parameter..
      <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46201" title="object GenMSIL.this.global.icodes.UNIT">UNIT</a>   =&gt; <a href="#298557" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.FieldInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Ldsfld</span>, <a href="#287592" title="=&gt; ch.epfl.lamp.compiler.msil.FieldInfo">boxedUnit</a>)
      <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46203" title="object GenMSIL.this.global.icodes.BOOL">BOOL</a> | <a href="../icode/TypeKinds.scala.html#46205" title="object GenMSIL.this.global.icodes.BYTE">BYTE</a> | <a href="../icode/TypeKinds.scala.html#46207" title="object GenMSIL.this.global.icodes.SHORT">SHORT</a> | <a href="../icode/TypeKinds.scala.html#46209" title="object GenMSIL.this.global.icodes.CHAR">CHAR</a> | <a href="../icode/TypeKinds.scala.html#46211" title="object GenMSIL.this.global.icodes.INT">INT</a> | <a href="../icode/TypeKinds.scala.html#46213" title="object GenMSIL.this.global.icodes.LONG">LONG</a> | <a href="../icode/TypeKinds.scala.html#46215" title="object GenMSIL.this.global.icodes.FLOAT">FLOAT</a> | <a href="../icode/TypeKinds.scala.html#46217" title="object GenMSIL.this.global.icodes.DOUBLE">DOUBLE</a> =&gt;
        <a href="#298557" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.Type)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Box</span>, <a href="#287722" title="(t: GenMSIL.this.global.icodes.TypeKind)ch.epfl.lamp.compiler.msil.Type">msilType</a>(<a href="#298558" title="GenMSIL.this.global.icodes.TypeKind">boxType</a>))
      <span title="Unit" class="keyword">case</span> REFERENCE(<a title="GenMSIL.this.global.icodes.global.Symbol" id="298591">cls</a>) <span class="keyword">if</span> (<a href="../../symtab/Definitions.scala.html#26479" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28591" title="=&gt; scala.collection.mutable.HashMap[GenMSIL.this.global.Symbol,GenMSIL.this.global.Symbol]">unboxMethod</a>.<span title="(key: GenMSIL.this.global.Symbol)Boolean">contains</span>(<a href="#298591" title="GenMSIL.this.global.icodes.global.Symbol">cls</a>)) =&gt;
        <a href="#298557" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.Type)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Box</span>, (<a href="#287722" title="(t: GenMSIL.this.global.icodes.TypeKind)ch.epfl.lamp.compiler.msil.Type">msilType</a>(<a href="#298558" title="GenMSIL.this.global.icodes.TypeKind">boxType</a>)))
      <span title="Unit" class="keyword">case</span> REFERENCE(_) | ARRAY(_) =&gt; <span title="Unit">(</span>)
    }

    <span class="keyword">def</span> <a title="(code: ch.epfl.lamp.compiler.msil.emit.ILGenerator,boxType: GenMSIL.this.global.icodes.TypeKind)Unit" id="287746">emitUnbox</a>(<a title="ch.epfl.lamp.compiler.msil.emit.ILGenerator" id="298647">code</a>: <span title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">ILGenerator</span>, <a title="GenMSIL.this.global.icodes.TypeKind" id="298648">boxType</a>: <a href="../icode/TypeKinds.scala.html#46199" title="GenMSIL.this.global.icodes.TypeKind">TypeKind</a>) = (<a href="#298648" title="GenMSIL.this.global.icodes.TypeKind">boxType</a>: @<a href="../icode/TypeKinds.scala.html#46199" title="GenMSIL.this.global.icodes.TypeKind @unchecked">unchecked</a>) <span title="Unit" class="keyword">match</span> {
      <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46201" title="object GenMSIL.this.global.icodes.UNIT">UNIT</a>   =&gt; <a href="#298647" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Pop</span>)
      <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46203" title="object GenMSIL.this.global.icodes.BOOL">BOOL</a>   =&gt; <a href="#298647" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.Type)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Unbox</span>, <a href="../../symtab/clr/CLRTypes.scala.html#287426" title="=&gt; ch.epfl.lamp.compiler.msil.Type">MBOOL</a>); <a href="#298647" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292347">Ldind_I1</a>)
      <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46205" title="object GenMSIL.this.global.icodes.BYTE">BYTE</a>   =&gt; <a href="#298647" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.MethodInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Call</span>, <a href="#287578" title="=&gt; ch.epfl.lamp.compiler.msil.MethodInfo">toByte</a>)
      <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46207" title="object GenMSIL.this.global.icodes.SHORT">SHORT</a>  =&gt; <a href="#298647" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.MethodInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Call</span>, <a href="#287580" title="=&gt; ch.epfl.lamp.compiler.msil.MethodInfo">toShort</a>)
      <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46209" title="object GenMSIL.this.global.icodes.CHAR">CHAR</a>   =&gt; <a href="#298647" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.MethodInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Call</span>, <a href="#287582" title="=&gt; ch.epfl.lamp.compiler.msil.MethodInfo">toChar</a>)
      <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46211" title="object GenMSIL.this.global.icodes.INT">INT</a>    =&gt; <a href="#298647" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.MethodInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Call</span>, <a href="#287584" title="=&gt; ch.epfl.lamp.compiler.msil.MethodInfo">toInt</a>)
      <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46213" title="object GenMSIL.this.global.icodes.LONG">LONG</a>   =&gt; <a href="#298647" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.MethodInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Call</span>, <a href="#287586" title="=&gt; ch.epfl.lamp.compiler.msil.MethodInfo">toLong</a>)
      <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46215" title="object GenMSIL.this.global.icodes.FLOAT">FLOAT</a>  =&gt; <a href="#298647" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.MethodInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Call</span>, <a href="#287588" title="=&gt; ch.epfl.lamp.compiler.msil.MethodInfo">toFloat</a>)
      <span title="Unit" class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#46217" title="object GenMSIL.this.global.icodes.DOUBLE">DOUBLE</a> =&gt; <a href="#298647" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.MethodInfo)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Call</span>, <a href="#287590" title="=&gt; ch.epfl.lamp.compiler.msil.MethodInfo">toDouble</a>)
      <span title="Unit" class="keyword">case</span> REFERENCE(<a title="GenMSIL.this.global.icodes.global.Symbol" id="298742">cls</a>) <span class="keyword">if</span> (<a href="../../symtab/Definitions.scala.html#26479" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28591" title="=&gt; scala.collection.mutable.HashMap[GenMSIL.this.global.Symbol,GenMSIL.this.global.Symbol]">unboxMethod</a>.<span title="(key: GenMSIL.this.global.Symbol)Boolean">contains</span>(<a href="#298742" title="GenMSIL.this.global.icodes.global.Symbol">cls</a>)) =&gt;
        <a href="#298647" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.Type)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<span title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode">Unbox</span>, <a href="#287722" title="(t: GenMSIL.this.global.icodes.TypeKind)ch.epfl.lamp.compiler.msil.Type">msilType</a>(<a href="#298648" title="GenMSIL.this.global.icodes.TypeKind">boxType</a>))
        <a href="#298647" title="ch.epfl.lamp.compiler.msil.emit.ILGenerator">code</a>.<span title="(opcode: ch.epfl.lamp.compiler.msil.emit.OpCode,arg: ch.epfl.lamp.compiler.msil.Type)Unit">Emit</span>(<span title="object ch.epfl.lamp.compiler.msil.emit.OpCodes">OpCodes</span>.<a title="=&gt; ch.epfl.lamp.compiler.msil.emit.OpCode" id="292431">Ldobj</a>, <a href="#287722" title="(t: GenMSIL.this.global.icodes.TypeKind)ch.epfl.lamp.compiler.msil.Type">msilType</a>(<a href="#298648" title="GenMSIL.this.global.icodes.TypeKind">boxType</a>))
      <span title="Unit" class="keyword">case</span> REFERENCE(_) | ARRAY(_) =&gt; <span title="Unit">(</span>)
    }

    // #####################################################################
    // get and create methods / constructors
 
    <span class="keyword">def</span> <a title="(sym: GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.ConstructorInfo" id="287747">getConstructor</a>(<a title="GenMSIL.this.global.Symbol" id="297590">sym</a>: <a href="../../symtab/Symbols.scala.html#26127" title="GenMSIL.this.global.Symbol">Symbol</a>): <span title="ch.epfl.lamp.compiler.msil.ConstructorInfo">ConstructorInfo</span> = <a href="../../symtab/clr/CLRTypes.scala.html#287467" title="=&gt; scala.collection.mutable.Map[GenMSIL.this.global.loaders.clrTypes.global.Symbol,ch.epfl.lamp.compiler.msil.ConstructorInfo]">constructors</a>.<span title="(key: GenMSIL.this.global.loaders.clrTypes.global.Symbol)Option[ch.epfl.lamp.compiler.msil.ConstructorInfo]">get</span>(<a href="#297590" title="GenMSIL.this.global.Symbol">sym</a>.<span title="[T0]T0">asInstanceOf</span><span title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">[</span>clrTypes.global.<a href="../../symtab/Symbols.scala.html#26127" title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">Symbol</a>]) <span title="ch.epfl.lamp.compiler.msil.ConstructorInfo" class="keyword">match</span> {
      <span title="ch.epfl.lamp.compiler.msil.ConstructorInfo" class="keyword">case</span> Some(<a title="ch.epfl.lamp.compiler.msil.ConstructorInfo" id="302250">constr</a>) =&gt; <a href="#302250" title="ch.epfl.lamp.compiler.msil.ConstructorInfo">constr</a>
      <span title="ch.epfl.lamp.compiler.msil.ConstructorInfo" class="keyword">case</span> <span title="object None">None</span> =&gt;
        <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.Type" id="302253">mClass</a> = <a href="#287725" title="(sym: GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.Type">getType</a>(<a href="#297590" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#26983" title="=&gt; GenMSIL.this.global.Symbol">owner</a>)
        <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.ConstructorInfo" id="302254">constr</a> = <a href="#302253" title="ch.epfl.lamp.compiler.msil.Type">mClass</a>.<span title="(x$1: Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.ConstructorInfo">GetConstructor</span>(<a href="#287724" title="(sym: GenMSIL.this.global.Symbol)Array[ch.epfl.lamp.compiler.msil.Type]">msilParamTypes</a>(<a href="#297590" title="GenMSIL.this.global.Symbol">sym</a>))
        <span title="ch.epfl.lamp.compiler.msil.ConstructorInfo" class="keyword">if</span> (<a href="#302254" title="(x$1: AnyRef)Boolean">constr</a> eq <span title="Null(null)" class="keyword">null</span>) {
          <span title="object java.lang.System">System</span>.<span title="java.io.PrintStream">out</span>.<span title="(x$1: java.lang.String)Unit">println</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Cannot find constructor &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#297590" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#26983" title="=&gt; GenMSIL.this.global.Symbol">owner</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;::&quot;)" class="string">&quot;::&quot;</span> + <a href="#297590" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#26988" title="=&gt; GenMSIL.this.global.Name">name</a>)
          <span title="object java.lang.System">System</span>.<span title="java.io.PrintStream">out</span>.<span title="(x$1: java.lang.String)Unit">println</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;scope = &quot;</span> + <a href="#297590" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#26983" title="=&gt; GenMSIL.this.global.Symbol">owner</a>.<a href="../../symtab/Symbols.scala.html#27003" title="=&gt; GenMSIL.this.global.Type">tpe</a>.<a href="../../symtab/Types.scala.html#30210" title="=&gt; GenMSIL.this.global.Scope">decls</a>)
          <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.Error" class="keyword">new</span> <span title="java.lang.Error">Error</span>(<a href="#297590" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27089" title="=&gt; String">fullNameString</a>)
        }
        <span class="keyword">else</span> {
          <a href="#287748" title="(sym: GenMSIL.this.global.Symbol,cInfo: ch.epfl.lamp.compiler.msil.ConstructorInfo)Unit">mapConstructor</a>(<a href="#297590" title="GenMSIL.this.global.Symbol">sym</a>, <a href="#302254" title="ch.epfl.lamp.compiler.msil.ConstructorInfo">constr</a>)
          <a href="#302254" title="ch.epfl.lamp.compiler.msil.ConstructorInfo">constr</a>
        }
    }

    <span class="keyword">def</span> <a title="(sym: GenMSIL.this.global.Symbol,cInfo: ch.epfl.lamp.compiler.msil.ConstructorInfo)Unit" id="287748">mapConstructor</a>(<a title="GenMSIL.this.global.Symbol" id="301568">sym</a>: <a href="../../symtab/Symbols.scala.html#26127" title="GenMSIL.this.global.Symbol">Symbol</a>, <a title="ch.epfl.lamp.compiler.msil.ConstructorInfo" id="301569">cInfo</a>: <span title="ch.epfl.lamp.compiler.msil.ConstructorInfo">ConstructorInfo</span>) = {
      <a href="../../symtab/clr/CLRTypes.scala.html#287467" title="(key: GenMSIL.this.global.loaders.clrTypes.global.Symbol,value: ch.epfl.lamp.compiler.msil.ConstructorInfo)Unit">constructors</a>(<a href="#301568" title="GenMSIL.this.global.Symbol">sym</a>.<span title="[T0]T0">asInstanceOf</span><span title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">[</span>clrTypes.global.<a href="../../symtab/Symbols.scala.html#26127" title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">Symbol</a>]) = <a href="#301569" title="ch.epfl.lamp.compiler.msil.ConstructorInfo">cInfo</a>
    }

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.MethodInfo" id="287749">getMethod</a>(<a title="GenMSIL.this.global.Symbol" id="298499">sym</a>: <a href="../../symtab/Symbols.scala.html#26127" title="GenMSIL.this.global.Symbol">Symbol</a>): <span title="ch.epfl.lamp.compiler.msil.MethodInfo">MethodInfo</span> = {
    //private def getMethod(sym: Symbol): MethodInfo = sym match {
//       case SRToInt =&gt; toInt
//       case SRToDouble =&gt; toDouble
//       case SRToLong =&gt; toLong
//       case SRToChar =&gt; toChar
//       case SRToFloat =&gt; toFloat
//       case SRToBool =&gt; toBool
//       case SRToByte =&gt; toByte
//       case SRToShort =&gt; toShort
//       case _ =&gt;

        <a href="../../symtab/clr/CLRTypes.scala.html#287469" title="=&gt; scala.collection.mutable.Map[GenMSIL.this.global.loaders.clrTypes.global.Symbol,ch.epfl.lamp.compiler.msil.MethodInfo]">methods</a>.<span title="(key: GenMSIL.this.global.loaders.clrTypes.global.Symbol)Option[ch.epfl.lamp.compiler.msil.MethodInfo]">get</span>(<a href="#298499" title="GenMSIL.this.global.Symbol">sym</a>.<span title="[T0]T0">asInstanceOf</span><span title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">[</span>clrTypes.global.<a href="../../symtab/Symbols.scala.html#26127" title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">Symbol</a>]) <span title="ch.epfl.lamp.compiler.msil.MethodInfo" class="keyword">match</span> {
        <span title="ch.epfl.lamp.compiler.msil.MethodInfo" class="keyword">case</span> Some(<a title="ch.epfl.lamp.compiler.msil.MethodInfo" id="302297">method</a>) =&gt; <a href="#302297" title="ch.epfl.lamp.compiler.msil.MethodInfo">method</a>
        <span title="ch.epfl.lamp.compiler.msil.MethodInfo" class="keyword">case</span> <span title="object None">None</span> =&gt;
          <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.Type" id="302300">mClass</a> = <a href="#287725" title="(sym: GenMSIL.this.global.Symbol)ch.epfl.lamp.compiler.msil.Type">getType</a>(<a href="#298499" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#26983" title="=&gt; GenMSIL.this.global.Symbol">owner</a>)
          <span class="keyword">try</span> {
            <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.MethodInfo" id="302303">method</a> = <a href="#302300" title="ch.epfl.lamp.compiler.msil.Type">mClass</a>.<a title="(x$1: java.lang.String,x$2: Array[ch.epfl.lamp.compiler.msil.Type],x$3: ch.epfl.lamp.compiler.msil.Type)ch.epfl.lamp.compiler.msil.MethodInfo" id="287923">GetMethod</a>(<a href="#287756" title="(methodSym: GenMSIL.this.global.Symbol)String">getMethodName</a>(<a href="#298499" title="GenMSIL.this.global.Symbol">sym</a>), <a href="#287724" title="(sym: GenMSIL.this.global.Symbol)Array[ch.epfl.lamp.compiler.msil.Type]">msilParamTypes</a>(<a href="#298499" title="GenMSIL.this.global.Symbol">sym</a>),
                                          <a href="#287723" title="(tpe: GenMSIL.this.global.Type)ch.epfl.lamp.compiler.msil.Type">msilType</a>(<a href="#298499" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27003" title="=&gt; GenMSIL.this.global.Type">tpe</a>.<a href="../../symtab/Types.scala.html#30193" title="=&gt; GenMSIL.this.global.Type">resultType</a>))
            <span title="ch.epfl.lamp.compiler.msil.MethodInfo" class="keyword">if</span> (<a href="#302303" title="(x$1: AnyRef)Boolean">method</a> eq <span title="Null(null)" class="keyword">null</span>) {
              <span title="object java.lang.System">System</span>.<span title="java.io.PrintStream">out</span>.<span title="(x$1: java.lang.String)Unit">println</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Cannot find method &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#298499" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#26983" title="=&gt; GenMSIL.this.global.Symbol">owner</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;::&quot;)" class="string">&quot;::&quot;</span> + <a href="#287710" title="(sym: GenMSIL.this.global.Symbol)String">msilName</a>(<a href="#298499" title="GenMSIL.this.global.Symbol">sym</a>))
              <span title="object java.lang.System">System</span>.<span title="java.io.PrintStream">out</span>.<span title="(x$1: java.lang.String)Unit">println</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;scope = &quot;</span> + <a href="#298499" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#26983" title="=&gt; GenMSIL.this.global.Symbol">owner</a>.<a href="../../symtab/Symbols.scala.html#27003" title="=&gt; GenMSIL.this.global.Type">tpe</a>.<a href="../../symtab/Types.scala.html#30210" title="=&gt; GenMSIL.this.global.Scope">decls</a>)
              <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.Error" class="keyword">new</span> <span title="java.lang.Error">Error</span>(<a href="#298499" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27089" title="=&gt; String">fullNameString</a>)
            }
            <span class="keyword">else</span> {
              <a href="#287750" title="(sym: GenMSIL.this.global.Symbol,mInfo: ch.epfl.lamp.compiler.msil.MethodInfo)Unit">mapMethod</a>(<a href="#298499" title="GenMSIL.this.global.Symbol">sym</a>, <a href="#302303" title="ch.epfl.lamp.compiler.msil.MethodInfo">method</a>)
              <a href="#302303" title="ch.epfl.lamp.compiler.msil.MethodInfo">method</a>
            }
          }
          <span class="keyword">catch</span> {
            <span title="Nothing" class="keyword">case</span> <a title="Exception" id="302363">e</a>: <span title="Exception">Exception</span> =&gt;
              <span title="object Console">Console</span>.<span title="(x: Any)Unit">println</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;While looking up &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#302300" title="ch.epfl.lamp.compiler.msil.Type">mClass</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;::&quot;)" class="string">&quot;::&quot;</span> + <a href="#298499" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27086" title="=&gt; String">nameString</a>)
            <span title="object Console">Console</span>.<span title="(x: Any)Unit">println</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;\t&quot;</span> + <a href="#287757" title="(sym: GenMSIL.this.global.Symbol)String">showsym</a>(<a href="#298499" title="GenMSIL.this.global.Symbol">sym</a>))
            <span title="Nothing" class="keyword">throw</span> <a href="#302363" title="Exception">e</a>
          }
      }
    }

    /*
     * add a mapping between sym and mInfo
     */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: GenMSIL.this.global.Symbol,mInfo: ch.epfl.lamp.compiler.msil.MethodInfo)Unit" id="287750">mapMethod</a>(<a title="GenMSIL.this.global.Symbol" id="289655">sym</a>: <a href="../../symtab/Symbols.scala.html#26127" title="GenMSIL.this.global.Symbol">Symbol</a>, <a title="ch.epfl.lamp.compiler.msil.MethodInfo" id="289656">mInfo</a>: <span title="ch.epfl.lamp.compiler.msil.MethodInfo">MethodInfo</span>) {
      <span title="(assertion: Boolean,message: =&gt; Any)Unit">assert</span> (<a href="#289656" title="(x$1: AnyRef)Boolean">mInfo</a> != <span title="Null(null)" class="keyword">null</span>, <a href="#289656" title="ch.epfl.lamp.compiler.msil.MethodInfo">mInfo</a>)
      <a href="../../symtab/clr/CLRTypes.scala.html#287469" title="(key: GenMSIL.this.global.loaders.clrTypes.global.Symbol,value: ch.epfl.lamp.compiler.msil.MethodInfo)Unit">methods</a>(<a href="#289655" title="GenMSIL.this.global.Symbol">sym</a>.<span title="[T0]T0">asInstanceOf</span><span title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">[</span>clrTypes.global.<a href="../../symtab/Symbols.scala.html#26127" title="GenMSIL.this.global.loaders.clrTypes.global.Symbol">Symbol</a>]) = <a href="#289656" title="ch.epfl.lamp.compiler.msil.MethodInfo">mInfo</a>
    }

    /*
     * add mapping between sym and method with newName, paramTypes of newClass
     */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: GenMSIL.this.global.Symbol,newClass: ch.epfl.lamp.compiler.msil.Type,newName: String,paramTypes: Array[ch.epfl.lamp.compiler.msil.Type])Unit" id="287751">mapMethod</a>(<a title="GenMSIL.this.global.Symbol" id="289650">sym</a>: <a href="../../symtab/Symbols.scala.html#26127" title="GenMSIL.this.global.Symbol">Symbol</a>, <a title="ch.epfl.lamp.compiler.msil.Type" id="289651">newClass</a>: <span title="ch.epfl.lamp.compiler.msil.Type">MsilType</span>, <a title="String" id="289652">newName</a>: <span title="String">String</span>, <a title="Array[ch.epfl.lamp.compiler.msil.Type]" id="289653">paramTypes</a>: <span title="Array[ch.epfl.lamp.compiler.msil.Type]">Array</span>[MsilType]) {
      <span class="keyword">val</span> <a title="ch.epfl.lamp.compiler.msil.MethodInfo" id="302400">methodInfo</a> = <a href="#289651" title="ch.epfl.lamp.compiler.msil.Type">newClass</a>.<span title="(x$1: java.lang.String,x$2: Array[ch.epfl.lamp.compiler.msil.Type])ch.epfl.lamp.compiler.msil.MethodInfo">GetMethod</span>(<a href="#289652" title="String">newName</a>, <a href="#289653" title="Array[ch.epfl.lamp.compiler.msil.Type]">paramTypes</a>)
      <span title="(assertion: Boolean,message: =&gt; Any)Unit">assert</span>(<a href="#302400" title="(x$1: AnyRef)Boolean">methodInfo</a> != <span title="Null(null)" class="keyword">null</span>, <span title="(x$1: Any)java.lang.String" class="string">&quot;Can't find mapping for &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#289650" title="GenMSIL.this.global.Symbol">sym</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; -&gt; &quot;)" class="string">&quot; -&gt; &quot;</span> <span title="(x$1: Any)java.lang.String">+</span>
             <a href="#289652" title="String">newName</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;(&quot;)" class="string">&quot;(&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#289653" title="Array[ch.epfl.lamp.compiler.msil.Type]">paramTypes</a> + <span title="java.lang.String(&quot;)&quot;)" class="string">&quot;)&quot;</span>)
      <a href="#287750" title="(sym: GenMSIL.this.global.Symbol,mInfo: ch.epfl.lamp.compiler.msil.MethodInfo)Unit">mapMethod</a>(<a href="#289650" title="GenMSIL.this.global.Symbol">sym</a>, <a href="#302400" title="ch.epfl.lamp.compiler.msil.MethodInfo">methodInfo</a>)
      <span title="Unit" class="keyword">if</span> (<a href="#302400" title="ch.epfl.lamp.compiler.msil.MethodInfo">methodInfo</a>.<a title="()Boolean" id="290925">IsStatic</a>) 
        <a href="#287600" title="(elem: GenMSIL.this.global.Symbol)BytecodeGenerator.this.dynToStatMapped.type">dynToStatMapped</a> <span title="Unit">+=</span> <a href="#289650" title="GenMSIL.this.global.Symbol">sym</a>
    }

    /*
     * add mapping between method with name and paramTypes of clazz to
     * method with newName and newParamTypes of newClass (used for instance
     * for &quot;wait&quot;)
     */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,paramTypes: Array[GenMSIL.this.global.Type],newClass: ch.epfl.lamp.compiler.msil.Type,newName: String,newParamTypes: Array[ch.epfl.lamp.compiler.msil.Type])Unit" id="287752">mapMethod</a>(
      <a title="GenMSIL.this.global.Symbol" id="289643">clazz</a>: <a href="../../symtab/Symbols.scala.html#26127" title="GenMSIL.this.global.Symbol">Symbol</a>, <a title="GenMSIL.this.global.Name" id="289644">name</a>: <a href="../../symtab/Names.scala.html#26055" title="GenMSIL.this.global.Name">Name</a>, <a title="Array[GenMSIL.this.global.Type]" id="289645">paramTypes</a>: <span title="Array[GenMSIL.this.global.Type]">Array</span>[Type],
      <a title="ch.epfl.lamp.compiler.msil.Type" id="289646">newClass</a>: <span title="ch.epfl.lamp.compiler.msil.Type">MsilType</span>, <a title="String" id="289647">newName</a>: <span title="String">String</span>, <a title="Array[ch.epfl.lamp.compiler.msil.Type]" id="289648">newParamTypes</a>: <span title="Array[ch.epfl.lamp.compiler.msil.Type]">Array</span>[MsilType]) {
        <span class="keyword">val</span> <a title="GenMSIL.this.global.Symbol" id="302469">methodSym</a> = <a href="#287755" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,paramTypes: Array[GenMSIL.this.global.Type])GenMSIL.this.global.Symbol">lookupMethod</a>(<a href="#289643" title="GenMSIL.this.global.Symbol">clazz</a>, <a href="#289644" title="GenMSIL.this.global.Name">name</a>, <a href="#289645" title="Array[GenMSIL.this.global.Type]">paramTypes</a>)
        <span title="(assertion: Boolean,message: =&gt; Any)Unit">assert</span>(<a href="#302469" title="(x$1: AnyRef)Boolean">methodSym</a> != <span title="Null(null)" class="keyword">null</span>, <span title="(x$1: Any)java.lang.String" class="string">&quot;cannot find method &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#289644" title="GenMSIL.this.global.Name">name</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;(&quot;)" class="string">&quot;(&quot;</span> <span title="(x$1: Any)java.lang.String">+</span>
               <a href="#289645" title="Array[GenMSIL.this.global.Type]">paramTypes</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;)&quot;)" class="string">&quot;)&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; in class &quot;)" class="string">&quot; in class &quot;</span> + <a href="#289643" title="GenMSIL.this.global.Symbol">clazz</a>)
        <a href="#287751" title="(sym: GenMSIL.this.global.Symbol,newClass: ch.epfl.lamp.compiler.msil.Type,newName: String,paramTypes: Array[ch.epfl.lamp.compiler.msil.Type])Unit">mapMethod</a>(<a href="#302469" title="GenMSIL.this.global.Symbol">methodSym</a>, <a href="#289646" title="ch.epfl.lamp.compiler.msil.Type">newClass</a>, <a href="#289647" title="String">newName</a>, <a href="#289648" title="Array[ch.epfl.lamp.compiler.msil.Type]">newParamTypes</a>)
      }

    /*
     * add maping for member with name and paramTypes to member
     * newName of newClass (same parameters)
     */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,paramTypes: Array[GenMSIL.this.global.Type],newClass: ch.epfl.lamp.compiler.msil.Type,newName: String)Unit" id="287753">mapMethod</a>(
      <a title="GenMSIL.this.global.Symbol" id="289637">clazz</a>: <a href="../../symtab/Symbols.scala.html#26127" title="GenMSIL.this.global.Symbol">Symbol</a>, <a title="GenMSIL.this.global.Name" id="289638">name</a>: <a href="../../symtab/Names.scala.html#26055" title="GenMSIL.this.global.Name">Name</a>, <a title="Array[GenMSIL.this.global.Type]" id="289639">paramTypes</a>: <span title="Array[GenMSIL.this.global.Type]">Array</span>[Type],
      <a title="ch.epfl.lamp.compiler.msil.Type" id="289640">newClass</a>: <span title="ch.epfl.lamp.compiler.msil.Type">MsilType</span>, <a title="String" id="289641">newName</a>: <span title="String">String</span>) {
        <a href="#287752" title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,paramTypes: Array[GenMSIL.this.global.Type],newClass: ch.epfl.lamp.compiler.msil.Type,newName: String,newParamTypes: Array[ch.epfl.lamp.compiler.msil.Type])Unit">mapMethod</a>(<a href="#289637" title="GenMSIL.this.global.Symbol">clazz</a>, <a href="#289638" title="GenMSIL.this.global.Name">name</a>, <a href="#289639" title="Array[GenMSIL.this.global.Type]">paramTypes</a>, <a href="#289640" title="ch.epfl.lamp.compiler.msil.Type">newClass</a>, <a href="#289641" title="String">newName</a>, <a href="#289639" title="(f: (GenMSIL.this.global.Type) =&gt; ch.epfl.lamp.compiler.msil.Type)(implicit bf: scala.collection.generic.BuilderFactory[ch.epfl.lamp.compiler.msil.Type,Array[ch.epfl.lamp.compiler.msil.Type],Array[GenMSIL.this.global.Type]])Array[ch.epfl.lamp.compiler.msil.Type]">paramTypes</a> <a title="scala.collection.generic.BuilderFactory[ch.epfl.lamp.compiler.msil.Type,Array[ch.epfl.lamp.compiler.msil.Type],Array[_]]" id="24510">map</a> <a href="#287723" title="(tpe: GenMSIL.this.global.Type)ch.epfl.lamp.compiler.msil.Type">msilType</a>)
      }

    /*
     * add mapping for all methods with name of clazz to the corresponding
     * method (same parameters) with newName of newClass
     */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,newClass: ch.epfl.lamp.compiler.msil.Type,newName: String)Unit" id="287754">mapMethod</a>(
      <a title="GenMSIL.this.global.Symbol" id="289632">clazz</a>: <a href="../../symtab/Symbols.scala.html#26127" title="GenMSIL.this.global.Symbol">Symbol</a>, <a title="GenMSIL.this.global.Name" id="289633">name</a>: <a href="../../symtab/Names.scala.html#26055" title="GenMSIL.this.global.Name">Name</a>,
      <a title="ch.epfl.lamp.compiler.msil.Type" id="289634">newClass</a>: <span title="ch.epfl.lamp.compiler.msil.Type">MsilType</span>, <a title="String" id="289635">newName</a>: <span title="String">String</span>) {
        <span class="keyword">val</span> <a title="GenMSIL.this.global.Symbol" id="302553">memberSym</a>: <a href="../../symtab/Symbols.scala.html#26127" title="GenMSIL.this.global.Symbol">Symbol</a> = <a href="#289632" title="GenMSIL.this.global.Symbol">clazz</a>.<a href="../../symtab/Symbols.scala.html#27003" title="=&gt; GenMSIL.this.global.Type">tpe</a>.<a href="../../symtab/Types.scala.html#30217" title="(name: GenMSIL.this.global.Name)GenMSIL.this.global.Symbol">member</a>(<a href="#289633" title="GenMSIL.this.global.Name">name</a>)
        <a href="#302553" title="GenMSIL.this.global.Symbol">memberSym</a>.<a href="../../symtab/Symbols.scala.html#27003" title="=&gt; GenMSIL.this.global.Type">tpe</a> <span title="Unit" class="keyword">match</span> {
          // alternatives: List[Symbol]
          <span title="Unit" class="keyword">case</span> OverloadedType(_, <a title="List[GenMSIL.this.global.Symbol]" id="302559">alternatives</a>) =&gt;
            <a href="#302559" title="List[GenMSIL.this.global.Symbol]">alternatives</a>.<span title="(f: (GenMSIL.this.global.Symbol) =&gt; Unit)Unit">foreach</span>(<a title="GenMSIL.this.global.Symbol" id="302578">s</a> =&gt; <a href="#287751" title="(sym: GenMSIL.this.global.Symbol,newClass: ch.epfl.lamp.compiler.msil.Type,newName: String,paramTypes: Array[ch.epfl.lamp.compiler.msil.Type])Unit">mapMethod</a>(<a href="#302578" title="GenMSIL.this.global.Symbol">s</a>, <a href="#289634" title="ch.epfl.lamp.compiler.msil.Type">newClass</a>, <a href="#289635" title="String">newName</a>, <a href="#287724" title="(sym: GenMSIL.this.global.Symbol)Array[ch.epfl.lamp.compiler.msil.Type]">msilParamTypes</a>(<a href="#302578" title="GenMSIL.this.global.Symbol">s</a>)))

          // paramTypes: List[Type], resType: Type
          <span title="Unit" class="keyword">case</span> MethodType(<a title="List[GenMSIL.this.global.Symbol]" id="302593">params</a>, <a title="GenMSIL.this.global.Type" id="302594">resType</a>) =&gt;
            <a href="#287751" title="(sym: GenMSIL.this.global.Symbol,newClass: ch.epfl.lamp.compiler.msil.Type,newName: String,paramTypes: Array[ch.epfl.lamp.compiler.msil.Type])Unit">mapMethod</a>(<a href="#302553" title="GenMSIL.this.global.Symbol">memberSym</a>, <a href="#289634" title="ch.epfl.lamp.compiler.msil.Type">newClass</a>, <a href="#289635" title="String">newName</a>, <a href="#287724" title="(sym: GenMSIL.this.global.Symbol)Array[ch.epfl.lamp.compiler.msil.Type]">msilParamTypes</a>(<a href="#302553" title="GenMSIL.this.global.Symbol">memberSym</a>))

          <span title="Nothing" class="keyword">case</span> _ =&gt;
            <a href="../../Global.scala.html#39077" title="(msg: String)Nothing">abort</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;member not found: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#289632" title="GenMSIL.this.global.Symbol">clazz</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;, &quot;)" class="string">&quot;, &quot;</span> + <a href="#289633" title="GenMSIL.this.global.Name">name</a>)
        }
      }


    /*
     * find the method in clazz with name and paramTypes
     */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(clazz: GenMSIL.this.global.Symbol,name: GenMSIL.this.global.Name,paramTypes: Array[GenMSIL.this.global.Type])GenMSIL.this.global.Symbol" id="287755">lookupMethod</a>(<a title="GenMSIL.this.global.Symbol" id="289615">clazz</a>: <a href="../../symtab/Symbols.scala.html#26127" title="GenMSIL.this.global.Symbol">Symbol</a>, <a title="GenMSIL.this.global.Name" id="289616">name</a>: <a href="../../symtab/Names.scala.html#26055" title="GenMSIL.this.global.Name">Name</a>, <a title="Array[GenMSIL.this.global.Type]" id="289617">paramTypes</a>: <span title="Array[GenMSIL.this.global.Type]">Array</span>[Type]): <a href="../../symtab/Symbols.scala.html#26127" title="GenMSIL.this.global.Symbol">Symbol</a> = {
      <span class="keyword">val</span> <a title="GenMSIL.this.global.Symbol" id="302614">memberSym</a> = <a href="#289615" title="GenMSIL.this.global.Symbol">clazz</a>.<a href="../../symtab/Symbols.scala.html#27003" title="=&gt; GenMSIL.this.global.Type">tpe</a>.<a href="../../symtab/Types.scala.html#30217" title="(name: GenMSIL.this.global.Name)GenMSIL.this.global.Symbol">member</a>(<a href="#289616" title="GenMSIL.this.global.Name">name</a>)
      <a href="#302614" title="GenMSIL.this.global.Symbol">memberSym</a>.<a href="../../symtab/Symbols.scala.html#27003" title="=&gt; GenMSIL.this.global.Type">tpe</a> <span title="GenMSIL.this.global.Symbol" class="keyword">match</span> {
        <span title="GenMSIL.this.global.Symbol" class="keyword">case</span> OverloadedType(_, <a title="List[GenMSIL.this.global.Symbol]" id="302620">alternatives</a>) =&gt;
          <a href="#302620" title="List[GenMSIL.this.global.Symbol]">alternatives</a>.<a title="(p: (GenMSIL.this.global.Symbol) =&gt; Boolean)Option[GenMSIL.this.global.Symbol]" id="28941">find</a>(<a title="GenMSIL.this.global.Symbol" id="302627">s</a> =&gt; {
            <span class="keyword">var</span> <a title="Int" id="302628">i</a>: <span title="Int">Int</span> = <span title="Int(0)" class="int">0</span>
            <span class="keyword">var</span> <a title="Boolean" id="302629">typesOK</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(true)" class="keyword">true</span>
            <span title="Unit" class="keyword">if</span> (<a href="#289617" title="Array[GenMSIL.this.global.Type]">paramTypes</a>.<span title="(x$1: Int)Boolean">length</span> == <a href="#302627" title="GenMSIL.this.global.Symbol">s</a>.<a href="../../symtab/Symbols.scala.html#27003" title="=&gt; GenMSIL.this.global.Type">tpe</a>.<a href="../../symtab/Types.scala.html#30200" title="=&gt; List[GenMSIL.this.global.Type]">paramTypes</a>.<span title="=&gt; Int">length</span>){
              <span title="Unit" class="keyword">while</span>(<a href="#302628" title="(x$1: Int)Boolean">i</a> &lt; <a href="#289617" title="Array[GenMSIL.this.global.Type]">paramTypes</a>.<span title="=&gt; Int">length</span>)<a href="#302638" title="()Unit">{</a>
                <span title="Unit" class="keyword">if</span> (<a href="#289617" title="(i: Int)GenMSIL.this.global.Type">paramTypes</a><span title="(x$1: AnyRef)Boolean">(</span><a href="#302628" title="Int">i</a>) != <a href="#302627" title="GenMSIL.this.global.Symbol">s</a>.<a href="../../symtab/Symbols.scala.html#27003" title="=&gt; GenMSIL.this.global.Type">tpe</a>.<a href="../../symtab/Types.scala.html#30200" title="(n: Int)GenMSIL.this.global.Type">paramTypes</a>(<a href="#302628" title="Int">i</a>))
                  <a href="#302629" title="Boolean">typesOK</a> = <span title="Boolean(false)" class="keyword">false</span>
                <a href="#302628" title="Int">i</a> += <span title="Int(1)" class="int">1</span>
              } 
            } <span class="keyword">else</span> {
              <a href="#302629" title="Boolean">typesOK</a> = <span title="Boolean(false)" class="keyword">false</span>
            }
            <a href="#302629" title="Boolean">typesOK</a>
          }) <span title="GenMSIL.this.global.Symbol" class="keyword">match</span> {
            <span title="GenMSIL.this.global.Symbol" class="keyword">case</span> Some(<a title="GenMSIL.this.global.Symbol" id="302710">sym</a>) =&gt; <a href="#302710" title="GenMSIL.this.global.Symbol">sym</a>
            <span title="Nothing" class="keyword">case</span> <span title="object None">None</span> =&gt; <a href="../../Global.scala.html#39077" title="(msg: String)Nothing">abort</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;member of &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#289615" title="GenMSIL.this.global.Symbol">clazz</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;, &quot;)" class="string">&quot;, &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#289616" title="GenMSIL.this.global.Name">name</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;(&quot;)" class="string">&quot;(&quot;</span> <span title="(x$1: Any)java.lang.String">+</span>
                               <a href="#289617" title="Array[GenMSIL.this.global.Type]">paramTypes</a> + <span title="java.lang.String(&quot;) not found&quot;)" class="string">&quot;) not found&quot;</span>)
          }

        <span title="GenMSIL.this.global.Symbol" class="keyword">case</span> MethodType(_, _) =&gt; <a href="#302614" title="GenMSIL.this.global.Symbol">memberSym</a>

        <span title="Nothing" class="keyword">case</span> _ =&gt; <a href="../../Global.scala.html#39077" title="(msg: String)Nothing">abort</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;member not found: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#289616" title="GenMSIL.this.global.Name">name</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; of &quot;)" class="string">&quot; of &quot;</span> + <a href="#289615" title="GenMSIL.this.global.Symbol">clazz</a>)
      }
    }

    <span class="keyword">def</span> <a title="(methodSym: GenMSIL.this.global.Symbol)String" id="287756">getMethodName</a>(<a title="GenMSIL.this.global.Symbol" id="301589">methodSym</a>: <a href="../../symtab/Symbols.scala.html#26127" title="GenMSIL.this.global.Symbol">Symbol</a>): <span title="String">String</span> = {
      <span class="keyword">val</span> <a title="GenMSIL.this.global.Name" id="302739">name</a> = <a href="#301589" title="GenMSIL.this.global.Symbol">methodSym</a>.<a href="../../symtab/Symbols.scala.html#26988" title="=&gt; GenMSIL.this.global.Name">name</a>
      <span class="keyword">val</span> <a title="List[GenMSIL.this.global.Type]" id="302740">params</a> = <a href="#301589" title="GenMSIL.this.global.Symbol">methodSym</a>.<a href="../../symtab/Symbols.scala.html#27003" title="=&gt; GenMSIL.this.global.Type">tpe</a>.<a href="../../symtab/Types.scala.html#30200" title="=&gt; List[GenMSIL.this.global.Type]">paramTypes</a>
      <span title="String" class="keyword">if</span> (<a href="#302739" title="(x$1: AnyRef)Boolean">name</a> <span title="(x$1: Boolean)Boolean">==</span> <a href="../../symtab/StdNames.scala.html#26531" title="object GenMSIL.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29882" title="=&gt; GenMSIL.this.global.Name">finalize_</a> &amp;&amp; <a href="#302740" title="List[GenMSIL.this.global.Type]">params</a>.<span title="(x$1: Int)Boolean">length</span> == <span title="Int(0)" class="int">0</span>)
        <span title="java.lang.String(&quot;Finalize&quot;)" class="string">&quot;Finalize&quot;</span>
      <span class="keyword">else</span> <span title="String" class="keyword">if</span> (<a href="#302739" title="(x$1: AnyRef)Boolean">name</a> <span title="(x$1: Boolean)Boolean">==</span> <a href="../../symtab/StdNames.scala.html#26531" title="object GenMSIL.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29968" title="=&gt; GenMSIL.this.global.Name">toString_</a> &amp;&amp; <a href="#302740" title="List[GenMSIL.this.global.Type]">params</a>.<span title="(x$1: Int)Boolean">length</span> == <span title="Int(0)" class="int">0</span>)
        <span title="java.lang.String(&quot;ToString&quot;)" class="string">&quot;ToString&quot;</span>
      <span class="keyword">else</span> <span title="String" class="keyword">if</span> (<a href="#302739" title="(x$1: AnyRef)Boolean">name</a> <span title="(x$1: Boolean)Boolean">==</span> <a href="../../symtab/StdNames.scala.html#26531" title="object GenMSIL.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29900" title="=&gt; GenMSIL.this.global.Name">hashCode_</a> &amp;&amp; <a href="#302740" title="List[GenMSIL.this.global.Type]">params</a>.<span title="(x$1: Int)Boolean">length</span> == <span title="Int(0)" class="int">0</span>)
        <span title="java.lang.String(&quot;GetHashCode&quot;)" class="string">&quot;GetHashCode&quot;</span>
      <span class="keyword">else</span> <span title="String" class="keyword">if</span> (<a href="#302739" title="(x$1: AnyRef)Boolean">name</a> <span title="(x$1: Boolean)Boolean">==</span> <a href="../../symtab/StdNames.scala.html#26531" title="object GenMSIL.this.global.nme">nme</a>.<a href="../../symtab/StdNames.scala.html#29866" title="=&gt; GenMSIL.this.global.Name">equals_</a> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> <a href="#302740" title="List[GenMSIL.this.global.Type]">params</a>.<span title="(x$1: Int)Boolean">length</span> == <span title="Int(1)" class="int">1</span> &amp;&amp;
              <a href="#302740" title="(n: Int)GenMSIL.this.global.Type">params</a><span title="(x$1: AnyRef)Boolean">(</span><span title="Int(0)" class="int">0</span>) == <a href="../../symtab/Definitions.scala.html#26479" title="object GenMSIL.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28267" title="=&gt; GenMSIL.this.global.Symbol">ObjectClass</a>.<a href="../../symtab/Symbols.scala.html#27003" title="=&gt; GenMSIL.this.global.Type">tpe</a>)
        <span title="java.lang.String(&quot;Equals&quot;)" class="string">&quot;Equals&quot;</span>
      // FIXME: why is there no nme.clone_ ?
      <span class="keyword">else</span> <span title="String" class="keyword">if</span> (<a href="#302739" title="GenMSIL.this.global.Name">name</a>.<a href="../../symtab/Names.scala.html#28205" title="()String">toString</a><span title="(x$1: AnyRef)Boolean">(</span>) <span title="(x$1: Boolean)Boolean">==</span> <span title="java.lang.String(&quot;clone&quot;)" class="string">&quot;clone&quot;</span> &amp;&amp; <a href="#302740" title="List[GenMSIL.this.global.Type]">params</a>.<span title="(x$1: Int)Boolean">length</span> == <span title="Int(0)" class="int">0</span>)
        <span title="java.lang.String(&quot;Clone&quot;)" class="string">&quot;Clone&quot;</span>
      <span class="keyword">else</span>
        <a href="#287710" title="(sym: GenMSIL.this.global.Symbol)String">msilName</a>(<a href="#301589" title="GenMSIL.this.global.Symbol">methodSym</a>)
    }

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: GenMSIL.this.global.Symbol)String" id="287757">showsym</a>(<a title="GenMSIL.this.global.Symbol" id="297330">sym</a>: <a href="../../symtab/Symbols.scala.html#26127" title="GenMSIL.this.global.Symbol">Symbol</a>): <span title="String">String</span> = (<a href="#297330" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#27091" title="(x$1: Any)java.lang.String">toString</a> <span title="(x$1: Any)java.lang.String">+</span>
      <span title="java.lang.String(&quot;\012  symbol = &quot;)" class="string">&quot;\n  symbol = &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="../../symtab/Flags.scala.html#10413" title="object scala.tools.nsc.symtab.Flags">Flags</a>.<a href="../../symtab/Flags.scala.html#28814" title="(flags: Long)String">flagsToString</a>(<a href="#297330" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#26991" title="=&gt; Long">flags</a>) <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; &quot;)" class="string">&quot; &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#297330" title="GenMSIL.this.global.Symbol">sym</a> <span title="(x$1: Any)java.lang.String">+</span>
      <span title="java.lang.String(&quot;\012  owner  = &quot;)" class="string">&quot;\n  owner  = &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="../../symtab/Flags.scala.html#10413" title="object scala.tools.nsc.symtab.Flags">Flags</a>.<a href="../../symtab/Flags.scala.html#28814" title="(flags: Long)String">flagsToString</a>(<a href="#297330" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#26983" title="=&gt; GenMSIL.this.global.Symbol">owner</a>.<a href="../../symtab/Symbols.scala.html#26991" title="=&gt; Long">flags</a>) <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; &quot;)" class="string">&quot; &quot;</span> + <a href="#297330" title="GenMSIL.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#26983" title="=&gt; GenMSIL.this.global.Symbol">owner</a>
    )

  } // class BytecodeGenerator

} // class GenMSIL

        </pre>
    </body>
</html>