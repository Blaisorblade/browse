<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/backend/opt/DeadCodeElimination.scala</title>
        <script type="text/javascript" src="../../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../../style.css" title="Style">
    </head>
    <body>
        <pre>
/* NSC -- new scala compiler
 * Copyright 2005-2009 LAMP/EPFL
 * @author  Iulian Dragos
 */

// $Id: DeadCodeElimination.scala 18387 2009-07-24 15:28:37Z odersky $

<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> backend.opt

<span class="keyword">import</span> scala.collection._
<span class="keyword">import</span> scala.collection.immutable.{Map, HashMap, Set, HashSet}
<span class="keyword">import</span> scala.tools.nsc.backend.icode.analysis.LubError
<span class="keyword">import</span> scala.tools.nsc.symtab._

/**
 */
<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class DeadCodeElimination extends scala.tools.nsc.SubComponent with ScalaObject" id="20903">DeadCodeElimination</a> <span title="ScalaObject" class="keyword">extends</span> <a href="../../SubComponent.scala.html#8259" title="scala.tools.nsc.SubComponent">SubComponent</a> {
  <span class="keyword">import</span> global._
  <span class="keyword">import</span> icodes._
  <span class="keyword">import</span> icodes.opcodes._

  <span class="keyword">val</span> <a title="java.lang.String" id="82523">phaseName</a> = <span title="java.lang.String(&quot;dce&quot;)" class="string">&quot;dce&quot;</span>

  /** Create a new phase */
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(p: scala.tools.nsc.Phase)DeadCodeElimination.this.DeadCodeEliminationPhase" id="82525">newPhase</a>(<a title="scala.tools.nsc.Phase" id="686021">p</a>: <a href="../../Phase.scala.html#8862" title="scala.tools.nsc.Phase">Phase</a>) = <span title="DeadCodeElimination.this.DeadCodeEliminationPhase" class="keyword">new</span> <a href="#82526" title="DeadCodeElimination.this.DeadCodeEliminationPhase">DeadCodeEliminationPhase</a>(<a href="#686021" title="scala.tools.nsc.Phase">p</a>)

  /** Dead code elimination phase.
   */
  <span class="keyword">class</span> <a title="class DeadCodeEliminationPhase extends DeadCodeElimination.this.global.icodes.ICodePhase with ScalaObject" id="82526">DeadCodeEliminationPhase</a><span title="ScalaObject">(</span><a title="scala.tools.nsc.Phase" id="686031">prev</a>: <a href="../../Phase.scala.html#8862" title="scala.tools.nsc.Phase">Phase</a>) <span class="keyword">extends</span> <a href="../icode/ICodes.scala.html#46161" title="DeadCodeElimination.this.global.icodes.ICodePhase">ICodePhase</a>(<a href="#686031" title="scala.tools.nsc.Phase">prev</a>) {

    <span class="keyword">def</span> <a title="=&gt; java.lang.String" id="686027">name</a> = <a href="#82523" title="=&gt; java.lang.String">phaseName</a>
    <span class="keyword">val</span> <a title="DeadCodeElimination.this.DeadCode" id="686028">dce</a> = <span title="DeadCodeElimination.this.DeadCode" class="keyword">new</span> <a href="#82529" title="DeadCodeElimination.this.DeadCode">DeadCode</a>()

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(c: DeadCodeElimination.this.global.icodes.IClass)Unit" id="686030">apply</a>(<a title="DeadCodeElimination.this.global.icodes.IClass" id="686074">c</a>: <a href="../icode/Members.scala.html#46171" title="DeadCodeElimination.this.global.icodes.IClass">IClass</a>) {
      <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37148" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">Xdce</a>.<a href="../../Settings.scala.html#37759" title="=&gt; Boolean">value</a>)
        <a href="#686028" title="=&gt; DeadCodeElimination.this.DeadCode">dce</a>.<a href="#686037" title="(cls: DeadCodeElimination.this.global.icodes.IClass)Unit">analyzeClass</a>(<a href="#686074" title="DeadCodeElimination.this.global.icodes.IClass">c</a>)
    }
  }

  /** closures that are instantiated at least once, after dead code elimination */
  <span class="keyword">val</span> <a title="scala.collection.mutable.Set[DeadCodeElimination.this.global.Symbol]" id="82527">liveClosures</a>: mutable.<span title="scala.collection.mutable.Set[DeadCodeElimination.this.global.Symbol]">Set</span>[Symbol] = <span title="scala.collection.mutable.HashSet[DeadCodeElimination.this.global.Symbol]" class="keyword">new</span> mutable.<a title="scala.collection.mutable.HashSet[DeadCodeElimination.this.global.Symbol]" id="24801">HashSet</a>()

  /** Remove dead code.
   */
  <span class="keyword">class</span> <a title="class DeadCode extends java.lang.Object with ScalaObject" id="82529">DeadCode</a> <span title="ScalaObject">{</span>
    
    <span class="keyword">def</span> <a title="(cls: DeadCodeElimination.this.global.icodes.IClass)Unit" id="686037">analyzeClass</a>(<a title="DeadCodeElimination.this.global.icodes.IClass" id="686085">cls</a>: <a href="../icode/Members.scala.html#46171" title="DeadCodeElimination.this.global.icodes.IClass">IClass</a>) {
      <a href="#686085" title="DeadCodeElimination.this.global.icodes.IClass">cls</a>.<a href="../icode/Members.scala.html#66675" title="=&gt; List[DeadCodeElimination.this.global.icodes.IMethod]">methods</a>.<span title="(f: (DeadCodeElimination.this.global.icodes.IMethod) =&gt; Unit)Unit">foreach</span> { <a title="DeadCodeElimination.this.global.icodes.IMethod" id="686129">m</a> =&gt;
        <a href="#82529" title="DeadCode.this.type" class="keyword">this</a>.<a href="#686051" title="(x$1: DeadCodeElimination.this.global.icodes.IMethod)Unit">method</a> = <a href="#686129" title="DeadCodeElimination.this.global.icodes.IMethod">m</a>
        <a href="#686055" title="(m: DeadCodeElimination.this.global.icodes.IMethod)Unit">dieCodeDie</a>(<a href="#686129" title="DeadCodeElimination.this.global.icodes.IMethod">m</a>)
      }
    }

    <span class="keyword">val</span> <a title="DeadCodeElimination.this.global.icodes.reachingDefinitions.ReachingDefinitionsAnalysis" id="686038">rdef</a> = <span title="DeadCodeElimination.this.global.icodes.reachingDefinitions.ReachingDefinitionsAnalysis" class="keyword">new</span> <a href="../icode/ICodes.scala.html#46154" title="object DeadCodeElimination.this.global.icodes.reachingDefinitions">reachingDefinitions</a>.<a href="../icode/analysis/ReachingDefinitions.scala.html#163870" title="DeadCodeElimination.this.global.icodes.reachingDefinitions.ReachingDefinitionsAnalysis">ReachingDefinitionsAnalysis</a>;

    /** Use-def chain: give the reaching definitions at the beginning of given instruction. */
    <span class="keyword">var</span> <a title="scala.collection.immutable.Map[(DeadCodeElimination.this.global.icodes.BasicBlock, Int),scala.collection.immutable.Set[(DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.Local, DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock, Int)]]" id="686041">defs</a>: <a title="scala.collection.immutable.Map[(DeadCodeElimination.this.global.icodes.BasicBlock, Int),scala.collection.immutable.Set[(DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.Local, DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock, Int)]]" id="7246">Map</a>[(BasicBlock, Int), Set[rdef.lattice.Definition]] = <span title="object scala.collection.immutable.HashMap">HashMap</span>.<span title="scala.collection.immutable.HashMap[(DeadCodeElimination.this.global.icodes.BasicBlock, Int),Nothing]">empty</span>
    
    /** Useful instructions which have not been scanned yet. */
    <span class="keyword">val</span> <a title="scala.collection.mutable.Set[(DeadCodeElimination.this.global.icodes.BasicBlock, Int)]" id="686043">worklist</a>: mutable.<span title="scala.collection.mutable.Set[(DeadCodeElimination.this.global.icodes.BasicBlock, Int)]">Set</span>[(BasicBlock, Int)] = <span title="scala.collection.mutable.LinkedHashSet[(DeadCodeElimination.this.global.icodes.BasicBlock, Int)]" class="keyword">new</span> mutable.<a title="scala.collection.mutable.LinkedHashSet[(DeadCodeElimination.this.global.icodes.BasicBlock, Int)]" id="25074">LinkedHashSet</a>
    
    /** what instructions have been marked as useful? */
    <span class="keyword">val</span> <a title="scala.collection.mutable.Map[DeadCodeElimination.this.global.icodes.BasicBlock,scala.collection.mutable.BitSet]" id="686045">useful</a>: mutable.<span title="scala.collection.mutable.Map[DeadCodeElimination.this.global.icodes.BasicBlock,scala.collection.mutable.BitSet]">Map</span>[BasicBlock, mutable.BitSet] = <span title="scala.collection.mutable.HashMap[DeadCodeElimination.this.global.icodes.BasicBlock,scala.collection.mutable.BitSet]" class="keyword">new</span> mutable.<span title="scala.collection.mutable.HashMap[DeadCodeElimination.this.global.icodes.BasicBlock,scala.collection.mutable.BitSet]">HashMap</span>
    
    /** what local variables have been accessed at least once? */
    <span class="keyword">var</span> <a title="List[DeadCodeElimination.this.global.icodes.Local]" id="686048">accessedLocals</a>: <a title="List[DeadCodeElimination.this.global.icodes.Local]" id="7345">List</a>[Local] = <a title="object Nil" id="7634">Nil</a>
    
    /** the current method. */
    <span class="keyword">var</span> <a title="DeadCodeElimination.this.global.icodes.IMethod" id="686051">method</a>: <a href="../icode/Members.scala.html#46173" title="DeadCodeElimination.this.global.icodes.IMethod">IMethod</a> = _
    
    /** Map instructions who have a drop on some control path, to that DROP instruction. */
    <span class="keyword">val</span> <a title="scala.collection.mutable.Map[(DeadCodeElimination.this.global.icodes.BasicBlock, Int),(DeadCodeElimination.this.global.icodes.BasicBlock, Int)]" id="686053">dropOf</a>: mutable.<span title="scala.collection.mutable.Map[(DeadCodeElimination.this.global.icodes.BasicBlock, Int),(DeadCodeElimination.this.global.icodes.BasicBlock, Int)]">Map</span>[(BasicBlock, Int), (BasicBlock, Int)] = <span title="scala.collection.mutable.HashMap[(DeadCodeElimination.this.global.icodes.BasicBlock, Int),(DeadCodeElimination.this.global.icodes.BasicBlock, Int)]" class="keyword">new</span> mutable.<span title="scala.collection.mutable.HashMap[(DeadCodeElimination.this.global.icodes.BasicBlock, Int),(DeadCodeElimination.this.global.icodes.BasicBlock, Int)]">HashMap</span>()
    
    <span class="keyword">def</span> <a title="(m: DeadCodeElimination.this.global.icodes.IMethod)Unit" id="686055">dieCodeDie</a>(<a title="DeadCodeElimination.this.global.icodes.IMethod" id="686132">m</a>: <a href="../icode/Members.scala.html#46173" title="DeadCodeElimination.this.global.icodes.IMethod">IMethod</a>) {
      <span title="Unit" class="keyword">if</span> (<a href="#686132" title="DeadCodeElimination.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61228" title="(x$1: AnyRef)Boolean">code</a> ne <span title="Null(null)" class="keyword">null</span>) {
        <a href="../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;dead code elimination on &quot;</span> + <a href="#686132" title="DeadCodeElimination.this.global.icodes.IMethod">m</a>);
        <a href="#686053" title="=&gt; scala.collection.mutable.Map[(DeadCodeElimination.this.global.icodes.BasicBlock, Int),(DeadCodeElimination.this.global.icodes.BasicBlock, Int)]">dropOf</a>.<span title="()Unit">clear</span>
        <a href="#686132" title="DeadCodeElimination.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61228" title="=&gt; DeadCodeElimination.this.global.icodes.Code">code</a>.<a href="../icode/Members.scala.html#61390" title="=&gt; scala.collection.mutable.ListBuffer[DeadCodeElimination.this.global.icodes.BasicBlock]">blocks</a>.<a title="()Unit" id="61582">clear</a>
        <a href="#686048" title="(x$1: List[DeadCodeElimination.this.global.icodes.Local])Unit">accessedLocals</a> = <a href="#686132" title="DeadCodeElimination.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61249" title="=&gt; List[DeadCodeElimination.this.global.icodes.Local]">params</a>.<span title="=&gt; List[DeadCodeElimination.this.global.icodes.Local]">reverse</span>
        <a href="#686132" title="DeadCodeElimination.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61228" title="=&gt; DeadCodeElimination.this.global.icodes.Code">code</a>.<a href="../icode/Members.scala.html#61390" title="(iter: Traversable[DeadCodeElimination.this.global.icodes.BasicBlock])scala.collection.mutable.ListBuffer[DeadCodeElimination.this.global.icodes.BasicBlock]" id="39507">blocks</a> ++= <a href="../icode/ICodes.scala.html#46149" title="=&gt; DeadCodeElimination.this.global.icodes.Linearizer">linearizer</a>.<a href="../icode/Linearizers.scala.html#62209" title="(c: DeadCodeElimination.this.global.icodes.IMethod)List[DeadCodeElimination.this.global.icodes.BasicBlock]">linearize</a>(<a href="#686132" title="DeadCodeElimination.this.global.icodes.IMethod">m</a>)
        <a href="#686056" title="(m: DeadCodeElimination.this.global.icodes.IMethod)Unit">collectRDef</a>(<a href="#686132" title="DeadCodeElimination.this.global.icodes.IMethod">m</a>)
        <a href="#686057" title="=&gt; Unit">mark</a>
        <a href="#686058" title="(m: DeadCodeElimination.this.global.icodes.IMethod)Unit">sweep</a>(<a href="#686132" title="DeadCodeElimination.this.global.icodes.IMethod">m</a>)
        <a href="#686048" title="(x$1: List[DeadCodeElimination.this.global.icodes.Local])Unit">accessedLocals</a> = <a href="#686048" title="=&gt; List[DeadCodeElimination.this.global.icodes.Local]">accessedLocals</a>.<a title="=&gt; List[DeadCodeElimination.this.global.icodes.Local]" id="25627">removeDuplicates</a>
        <span title="Unit" class="keyword">if</span> ((<a href="#686132" title="DeadCodeElimination.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61246" title="(that: List[DeadCodeElimination.this.global.icodes.Local])List[DeadCodeElimination.this.global.icodes.Local]">locals</a> -- <a href="#686048" title="=&gt; List[DeadCodeElimination.this.global.icodes.Local]">accessedLocals</a>).<a title="(x$1: Int)Boolean" id="28928">length</a> &gt; <span title="Int(0)" class="int">0</span>) {
          <a href="../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Removed dead locals: &quot;</span> + (<a href="#686132" title="DeadCodeElimination.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61246" title="(that: List[DeadCodeElimination.this.global.icodes.Local])List[DeadCodeElimination.this.global.icodes.Local]">locals</a> -- <a href="#686048" title="=&gt; List[DeadCodeElimination.this.global.icodes.Local]">accessedLocals</a>))
          <a href="#686132" title="DeadCodeElimination.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61247" title="(x$1: List[DeadCodeElimination.this.global.icodes.Local])Unit">locals</a> = <a href="#686048" title="=&gt; List[DeadCodeElimination.this.global.icodes.Local]">accessedLocals</a>.<span title="=&gt; List[DeadCodeElimination.this.global.icodes.Local]">reverse</span>
        }
      }
    }

    /** collect reaching definitions and initial useful instructions for this method. */
    <span class="keyword">def</span> <a title="(m: DeadCodeElimination.this.global.icodes.IMethod)Unit" id="686056">collectRDef</a>(<a title="DeadCodeElimination.this.global.icodes.IMethod" id="686212">m</a>: <a href="../icode/Members.scala.html#46173" title="DeadCodeElimination.this.global.icodes.IMethod">IMethod</a>): <a title="Unit" id="1950">Unit</a> = <span title="Unit" class="keyword">if</span> (<a href="#686212" title="DeadCodeElimination.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61228" title="(x$1: AnyRef)Boolean">code</a> ne <span title="Null(null)" class="keyword">null</span>) {
      <a href="#686041" title="(x$1: scala.collection.immutable.Map[(DeadCodeElimination.this.global.icodes.BasicBlock, Int),scala.collection.immutable.Set[(DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.Local, DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock, Int)]])Unit">defs</a> = <span title="object scala.collection.immutable.HashMap">HashMap</span>.<span title="scala.collection.immutable.HashMap[(DeadCodeElimination.this.global.icodes.BasicBlock, Int),Nothing]">empty</span>; <a href="#686043" title="=&gt; scala.collection.mutable.Set[(DeadCodeElimination.this.global.icodes.BasicBlock, Int)]">worklist</a>.<a title="()Unit" id="39469">clear</a>; <a href="#686045" title="=&gt; scala.collection.mutable.Map[DeadCodeElimination.this.global.icodes.BasicBlock,scala.collection.mutable.BitSet]">useful</a>.<span title="()Unit">clear</span>;
      <a href="#686038" title="=&gt; DeadCodeElimination.this.global.icodes.reachingDefinitions.ReachingDefinitionsAnalysis">rdef</a>.<a href="../icode/analysis/ReachingDefinitions.scala.html#164223" title="(m: DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.IMethod)Unit">init</a>(<a href="#686212" title="DeadCodeElimination.this.global.icodes.IMethod">m</a>);
      <a href="#686038" title="=&gt; DeadCodeElimination.this.global.icodes.reachingDefinitions.ReachingDefinitionsAnalysis">rdef</a>.<a href="../icode/analysis/ReachingDefinitions.scala.html#164227" title="=&gt; Unit">run</a>;
     
      <span class="keyword">for</span> (<a title="DeadCodeElimination.this.global.icodes.BasicBlock" id="686295">bb</a> &lt;- <a href="#686212" title="DeadCodeElimination.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61228" title="=&gt; DeadCodeElimination.this.global.icodes.Code">code</a>.<a href="../icode/Members.scala.html#61390" title="=&gt; scala.collection.mutable.ListBuffer[DeadCodeElimination.this.global.icodes.BasicBlock]">blocks</a>.<span title="(f: (DeadCodeElimination.this.global.icodes.BasicBlock) =&gt; Unit)Unit">toList</span>) {
        <a href="#686045" title="(key: DeadCodeElimination.this.global.icodes.BasicBlock,value: scala.collection.mutable.BitSet)Unit">useful</a>(<a href="#686295" title="DeadCodeElimination.this.global.icodes.BasicBlock">bb</a>) = <a title="(initSize: Int)scala.collection.mutable.BitSet" id="536303" class="keyword">new</a> mutable.<a title="scala.collection.mutable.BitSet" id="24828">BitSet</a>(<a href="#686295" title="DeadCodeElimination.this.global.icodes.BasicBlock">bb</a>.<span title="=&gt; Int">size</span>)
        <span class="keyword">var</span> <a title="DeadCode.this.rdef.lattice.Elem" id="686296">rd</a> = <a href="#686038" title="=&gt; DeadCodeElimination.this.global.icodes.reachingDefinitions.ReachingDefinitionsAnalysis">rdef</a>.<a href="../icode/analysis/DataFlowAnalysis.scala.html#61151" title="(key: DeadCode.this.rdef.P)DeadCode.this.rdef.lattice.Elem">in</a>(<a href="#686295" title="DeadCodeElimination.this.global.icodes.BasicBlock">bb</a>);
        <span class="keyword">for</span> (<a href="#686410" title="(x: (DeadCodeElimination.this.global.icodes.Instruction, Int))Option[(DeadCodeElimination.this.global.icodes.Instruction, Int)]">Pair</a>(<a title="DeadCodeElimination.this.global.icodes.Instruction" id="686455">i</a>, <a title="Int" id="686456">idx</a>) &lt;- <a href="#686295" title="DeadCodeElimination.this.global.icodes.BasicBlock">bb</a>.<a href="../icode/BasicBlocks.scala.html#61313" title="=&gt; List[DeadCodeElimination.this.global.icodes.Instruction]">toList</a>.<a href="#686407" title="(f: ((DeadCodeElimination.this.global.icodes.Instruction, Int)) =&gt; Unit)Unit">zipWithIndex</a>) {
          <a href="#686455" title="DeadCodeElimination.this.global.icodes.Instruction">i</a> <span title="Any" class="keyword">match</span> {
            <span title="Unit" class="keyword">case</span> LOAD_LOCAL(<a title="DeadCodeElimination.this.global.icodes.Local" id="686459">l</a>) =&gt; 
              <a href="#686041" title="(x$1: scala.collection.immutable.Map[(DeadCodeElimination.this.global.icodes.BasicBlock, Int),scala.collection.immutable.Set[(DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.Local, DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock, Int)]])Unit">defs</a> = <a href="#686041" title="(kv: ((DeadCodeElimination.this.global.icodes.BasicBlock, Int), scala.collection.immutable.Set[(DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.Local, DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock, Int)]))scala.collection.immutable.Map[(DeadCodeElimination.this.global.icodes.BasicBlock, Int),scala.collection.immutable.Set[(DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.Local, DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock, Int)]]" id="44832">defs</a> + <a title="(x: (DeadCodeElimination.this.global.icodes.BasicBlock, Int),y: scala.collection.immutable.Set[(DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.Local, DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock, Int)])((DeadCodeElimination.this.global.icodes.BasicBlock, Int), scala.collection.immutable.Set[(DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.Local, DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock, Int)])" id="7895">Pair</a>((<span title="(_1: DeadCodeElimination.this.global.icodes.BasicBlock,_2: Int)(DeadCodeElimination.this.global.icodes.BasicBlock, Int)">(</span><a href="#686295" title="DeadCodeElimination.this.global.icodes.BasicBlock">bb</a>, <a href="#686456" title="Int">idx</a>)), <a href="#686296" title="DeadCode.this.rdef.lattice.Elem">rd</a>.<a href="../icode/analysis/CompleteLattice.scala.html#60844" title="=&gt; scala.collection.immutable.Set[(DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.Local, DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock, Int)]">vars</a>)
//              Console.println(i + &quot;: &quot; + (bb, idx) + &quot; rd: &quot; + rd + &quot; and having: &quot; + defs)
            <span title="DeadCode.this.worklist.type" class="keyword">case</span> RETURN(_) | JUMP(_) | CJUMP(_, _, _, _) | CZJUMP(_, _, _, _) | STORE_FIELD(_, _) |
                 THROW()   | STORE_ARRAY_ITEM(_) | SCOPE_ENTER(_) | SCOPE_EXIT(_) | STORE_THIS(_) |
                 LOAD_EXCEPTION() | SWITCH(_, _) | MONITOR_ENTER() | MONITOR_EXIT() =&gt; <a href="#686043" title="(elem: (DeadCodeElimination.this.global.icodes.BasicBlock, Int))DeadCode.this.worklist.type">worklist</a> += (<span title="(_1: DeadCodeElimination.this.global.icodes.BasicBlock,_2: Int)(DeadCodeElimination.this.global.icodes.BasicBlock, Int)">(</span><a href="#686295" title="DeadCodeElimination.this.global.icodes.BasicBlock">bb</a>, <a href="#686456" title="Int">idx</a>))
            <span title="Unit" class="keyword">case</span> CALL_METHOD(<a title="DeadCodeElimination.this.global.icodes.global.Symbol" id="686669">m1</a>, _) <span class="keyword">if</span> <a href="#686066" title="(sym: DeadCodeElimination.this.global.Symbol)Boolean">isSideEffecting</a>(<a href="#686669" title="DeadCodeElimination.this.global.icodes.global.Symbol">m1</a>) =&gt; <a href="#686043" title="(elem: (DeadCodeElimination.this.global.icodes.BasicBlock, Int))DeadCode.this.worklist.type">worklist</a> += (<span title="(_1: DeadCodeElimination.this.global.icodes.BasicBlock,_2: Int)(DeadCodeElimination.this.global.icodes.BasicBlock, Int)">(</span><a href="#686295" title="DeadCodeElimination.this.global.icodes.BasicBlock">bb</a>, <a href="#686456" title="Int">idx</a>)); <a href="../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;marking &quot;</span> + <a href="#686669" title="DeadCodeElimination.this.global.icodes.global.Symbol">m1</a>)
            <span title="DeadCode.this.worklist.type" class="keyword">case</span> CALL_METHOD(<a title="DeadCodeElimination.this.global.icodes.global.Symbol" id="686711">m1</a>, SuperCall(_)) =&gt; 
              <a href="#686043" title="(elem: (DeadCodeElimination.this.global.icodes.BasicBlock, Int))DeadCode.this.worklist.type">worklist</a> += (<span title="(_1: DeadCodeElimination.this.global.icodes.BasicBlock,_2: Int)(DeadCodeElimination.this.global.icodes.BasicBlock, Int)">(</span><a href="#686295" title="DeadCodeElimination.this.global.icodes.BasicBlock">bb</a>, <a href="#686456" title="Int">idx</a>)) // super calls to constructor
            <span title="Any" class="keyword">case</span> DROP(_) =&gt;
              <span class="keyword">val</span> <a title="Boolean" id="686749">necessary</a> = <a href="#686038" title="=&gt; DeadCodeElimination.this.global.icodes.reachingDefinitions.ReachingDefinitionsAnalysis">rdef</a>.<a href="../icode/analysis/ReachingDefinitions.scala.html#164234" title="(bb: DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock,idx: Int,m: Int)List[(DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock, Int)]">findDefs</a><a title="(p: ((DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock, Int)) =&gt; Boolean)Boolean" id="28937">(</a><a href="#686295" title="DeadCodeElimination.this.global.icodes.BasicBlock">bb</a>, <a href="#686456" title="Int">idx</a>, <span title="Int(1)" class="int">1</span>) exists { <a title="(DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock, Int)" id="686769">p</a> =&gt;
                <span class="keyword">val</span> <a href="#686771" title="(DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock, Int)">(</a><a href="#686770" title="DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock" id="686771">bb1</a>, <a href="#686770" title="Int" id="686772">idx1</a>) = <a href="#686769" title="(DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock, Int)">p</a>
                <a href="../icode/BasicBlocks.scala.html#61323" title="(n: Int)DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.Instruction">bb1</a>(<a href="#686772" title="Int">idx1</a>) <span title="Boolean" class="keyword">match</span> {
                  <span title="Boolean(true)" class="keyword">case</span> CALL_METHOD(<a title="DeadCodeElimination.this.global.icodes.global.Symbol" id="686800">m1</a>, _) <span class="keyword">if</span> <a href="#686066" title="(sym: DeadCodeElimination.this.global.Symbol)Boolean">isSideEffecting</a>(<a href="#686800" title="DeadCodeElimination.this.global.icodes.global.Symbol">m1</a>) =&gt; <span title="Boolean(true)" class="keyword">true</span>
                  <span title="Boolean(true)" class="keyword">case</span> LOAD_EXCEPTION() | DUP(_) | LOAD_MODULE(_) =&gt; <span title="Boolean(true)" class="keyword">true</span>
                  <span title="Boolean" class="keyword">case</span> _ =&gt; 
                    <a href="#686053" title="(key: (DeadCodeElimination.this.global.icodes.BasicBlock, Int),value: (DeadCodeElimination.this.global.icodes.BasicBlock, Int))Unit">dropOf</a>(<span title="(_1: DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock,_2: Int)(DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock, Int)">(</span><a href="#686771" title="DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock">bb1</a>, <a href="#686772" title="Int">idx1</a>)) = <span title="(_1: DeadCodeElimination.this.global.icodes.BasicBlock,_2: Int)(DeadCodeElimination.this.global.icodes.BasicBlock, Int)">(</span><a href="#686295" title="DeadCodeElimination.this.global.icodes.BasicBlock">bb</a>, <a href="#686456" title="Int">idx</a>)
//                    println(&quot;DROP is innessential: &quot; + i + &quot; because of: &quot; + bb1(idx1) + &quot; at &quot; + bb1 + &quot;:&quot; + idx1) 
                    <span title="Boolean(false)" class="keyword">false</span>
                }
              }
              <span title="Any" class="keyword">if</span> (<a href="#686749" title="Boolean">necessary</a>) <a href="#686043" title="(elem: (DeadCodeElimination.this.global.icodes.BasicBlock, Int))DeadCode.this.worklist.type">worklist</a> += (<span title="(_1: DeadCodeElimination.this.global.icodes.BasicBlock,_2: Int)(DeadCodeElimination.this.global.icodes.BasicBlock, Int)">(</span><a href="#686295" title="DeadCodeElimination.this.global.icodes.BasicBlock">bb</a>, <a href="#686456" title="Int">idx</a>))
            <span title="Unit" class="keyword">case</span> _ =&gt; <span title="Unit">(</span>)
          }
          <a href="#686296" title="DeadCode.this.rdef.lattice.Elem">rd</a> = <a href="#686038" title="=&gt; DeadCodeElimination.this.global.icodes.reachingDefinitions.ReachingDefinitionsAnalysis">rdef</a>.<a href="../icode/analysis/ReachingDefinitions.scala.html#164232" title="(b: DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock,idx: Int,in: DeadCode.this.rdef.lattice.Elem)DeadCode.this.rdef.lattice.Elem">interpret</a>(<a href="#686295" title="DeadCodeElimination.this.global.icodes.BasicBlock">bb</a>, <a href="#686456" title="Int">idx</a>, <a href="#686296" title="DeadCode.this.rdef.lattice.Elem">rd</a>)
        }
      }
    }

    /** Mark useful instructions. Instructions in the worklist are each inspected and their
     *  dependecies are marked useful too, and added to the worklist.
     */
    <span class="keyword">def</span> <a title="=&gt; Unit" id="686057">mark</a> {
//      log(&quot;Starting with worklist: &quot; + worklist)
      <span title="Unit" class="keyword">while</span> (<span title="=&gt; Boolean">!</span><a href="#686043" title="=&gt; scala.collection.mutable.Set[(DeadCodeElimination.this.global.icodes.BasicBlock, Int)]">worklist</a>.<a title="=&gt; Boolean" id="39338">isEmpty</a>) <a href="#686881" title="()Unit">{</a>
        <span class="keyword">val</span> <a href="#686883" title="(DeadCodeElimination.this.global.icodes.BasicBlock, Int)">(</a><a href="#686882" title="DeadCodeElimination.this.global.icodes.BasicBlock" id="686883">bb</a>, <a href="#686882" title="Int" id="686884">idx</a>) = <a href="#686043" title="=&gt; scala.collection.mutable.Set[(DeadCodeElimination.this.global.icodes.BasicBlock, Int)]">worklist</a>.<a title="=&gt; Iterator[(DeadCodeElimination.this.global.icodes.BasicBlock, Int)]" id="25429">iterator</a>.<a title="()(DeadCodeElimination.this.global.icodes.BasicBlock, Int)" id="32121">next</a>
        <a href="#686043" title="(elem: (DeadCodeElimination.this.global.icodes.BasicBlock, Int))DeadCode.this.worklist.type" id="39465">worklist</a> -= (<span title="(_1: DeadCodeElimination.this.global.icodes.BasicBlock,_2: Int)(DeadCodeElimination.this.global.icodes.BasicBlock, Int)">(</span><a href="#686883" title="DeadCodeElimination.this.global.icodes.BasicBlock">bb</a>, <a href="#686884" title="Int">idx</a>))
        <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37759" title="=&gt; Boolean">value</a>)
          <a href="../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Marking instr: \tBB_&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#686883" title="DeadCodeElimination.this.global.icodes.BasicBlock">bb</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;: &quot;)" class="string">&quot;: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#686884" title="Int">idx</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; &quot;)" class="string">&quot; &quot;</span> + <a href="../icode/BasicBlocks.scala.html#61323" title="(n: Int)DeadCodeElimination.this.global.icodes.Instruction">bb</a>(<a href="#686884" title="Int">idx</a>))
          
        <span class="keyword">val</span> <a title="DeadCodeElimination.this.global.icodes.Instruction" id="686885">instr</a> = <a href="../icode/BasicBlocks.scala.html#61323" title="(n: Int)DeadCodeElimination.this.global.icodes.Instruction">bb</a>(<a href="#686884" title="Int">idx</a>)
        <span title="Any" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="#686045" title="(key: DeadCodeElimination.this.global.icodes.BasicBlock)scala.collection.mutable.BitSet">useful</a><span title="(elem: Int)Boolean">(</span><a href="#686883" title="DeadCodeElimination.this.global.icodes.BasicBlock">bb</a>)(<a href="#686884" title="Int">idx</a>)) {
          <a href="#686045" title="(key: DeadCodeElimination.this.global.icodes.BasicBlock)scala.collection.mutable.BitSet">useful</a><span title="(elem: Int)scala.collection.mutable.BitSet">(</span><a href="#686883" title="DeadCodeElimination.this.global.icodes.BasicBlock">bb</a>) += <a href="#686884" title="Int">idx</a>
          <a href="#686053" title="=&gt; scala.collection.mutable.Map[(DeadCodeElimination.this.global.icodes.BasicBlock, Int),(DeadCodeElimination.this.global.icodes.BasicBlock, Int)]">dropOf</a>.<span title="(key: (DeadCodeElimination.this.global.icodes.BasicBlock, Int))Option[(DeadCodeElimination.this.global.icodes.BasicBlock, Int)]">get</span><span title="(_1: DeadCodeElimination.this.global.icodes.BasicBlock,_2: Int)(DeadCodeElimination.this.global.icodes.BasicBlock, Int)">(</span><a href="#686883" title="DeadCodeElimination.this.global.icodes.BasicBlock">bb</a>, <a href="#686884" title="Int">idx</a>) <span title="Any" class="keyword">match</span> {
            <span title="scala.collection.mutable.BitSet" class="keyword">case</span> Some((<a title="DeadCodeElimination.this.global.icodes.BasicBlock" id="687051">bb1</a>, <a title="Int" id="687052">idx1</a>)) =&gt; <a href="#686045" title="(key: DeadCodeElimination.this.global.icodes.BasicBlock)scala.collection.mutable.BitSet">useful</a><span title="(elem: Int)scala.collection.mutable.BitSet">(</span><a href="#687051" title="DeadCodeElimination.this.global.icodes.BasicBlock">bb1</a>) += <a href="#687052" title="Int">idx1</a>
            <span title="Unit" class="keyword">case</span> <span title="object None">None</span> =&gt; <span title="Unit">(</span>)
          }
          <a href="#686885" title="DeadCodeElimination.this.global.icodes.Instruction">instr</a> <span title="Any" class="keyword">match</span> {
            <span title="Unit" class="keyword">case</span> LOAD_LOCAL(<a title="DeadCodeElimination.this.global.icodes.Local" id="687136">l1</a>) =&gt;
              <span class="keyword">for</span> ((<a title="DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.Local" id="687259">l2</a>, <a title="DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock" id="687260">bb1</a>, <a title="Int" id="687261">idx1</a>) &lt;- <a href="#686041" title="(key: (DeadCodeElimination.this.global.icodes.BasicBlock, Int))scala.collection.immutable.Set[(DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.Local, DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock, Int)]">defs</a><a href="#687164" title="(f: ((DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.Local, DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock, Int)) =&gt; scala.collection.mutable.Set[(DeadCodeElimination.this.global.icodes.BasicBlock, Int)])Unit" id="25431">(</a><span title="(_1: DeadCodeElimination.this.global.icodes.BasicBlock,_2: Int)(DeadCodeElimination.this.global.icodes.BasicBlock, Int)">(</span><a href="#686883" title="DeadCodeElimination.this.global.icodes.BasicBlock">bb</a>, <a href="#686884" title="Int">idx</a>)) <span class="keyword">if</span> <a href="#687136" title="(x$1: AnyRef)Boolean">l1</a> == <a href="#687259" title="DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.Local">l2</a>; <span class="keyword">if</span> <span title="=&gt; Boolean">!</span><a href="#686045" title="(key: DeadCodeElimination.this.global.icodes.BasicBlock)scala.collection.mutable.BitSet">useful</a><span title="(elem: Int)Boolean">(</span><a href="#687260" title="DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock">bb1</a>)(<a href="#687261" title="Int">idx1</a>)) {
                <a href="../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;\tAdding &quot;</span> + <a href="../icode/BasicBlocks.scala.html#61323" title="(n: Int)DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.Instruction">bb1</a>(<a href="#687261" title="Int">idx1</a>))
                <a href="#686043" title="(elem: (DeadCodeElimination.this.global.icodes.BasicBlock, Int))DeadCode.this.worklist.type">worklist</a> += (<span title="(_1: DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock,_2: Int)(DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock, Int)">(</span><a href="#687260" title="DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock">bb1</a>, <a href="#687261" title="Int">idx1</a>))
              }
                
            <span title="Any" class="keyword">case</span> <a title="DeadCodeElimination.this.global.icodes.opcodes.NEW" id="687309">nw</a> @ NEW(REFERENCE(<a title="DeadCodeElimination.this.global.icodes.global.Symbol" id="687312">sym</a>)) =&gt;
              <span title="(assertion: Boolean,message: =&gt; Any)Unit">assert</span>(<a href="#687309" title="DeadCodeElimination.this.global.icodes.opcodes.NEW">nw</a>.<a href="../icode/Opcodes.scala.html#63622" title="(x$1: AnyRef)Boolean">init</a> ne <span title="Null(null)" class="keyword">null</span>, <span title="(x$1: Any)java.lang.String" class="string">&quot;null new.init at: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#686883" title="DeadCodeElimination.this.global.icodes.BasicBlock">bb</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;: &quot;)" class="string">&quot;: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#686884" title="Int">idx</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;(&quot;)" class="string">&quot;(&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#686885" title="DeadCodeElimination.this.global.icodes.Instruction">instr</a> + <span title="java.lang.String(&quot;)&quot;)" class="string">&quot;)&quot;</span>)
              <a href="#686043" title="(elem: (DeadCodeElimination.this.global.icodes.BasicBlock, Int))DeadCode.this.worklist.type">worklist</a> += <a href="#686063" title="(bb: DeadCodeElimination.this.global.icodes.BasicBlock,i: DeadCodeElimination.this.global.icodes.Instruction)(DeadCodeElimination.this.global.icodes.BasicBlock, Int)">findInstruction</a>(<a href="#686883" title="DeadCodeElimination.this.global.icodes.BasicBlock">bb</a>, <a href="#687309" title="DeadCodeElimination.this.global.icodes.opcodes.NEW">nw</a>.<a href="../icode/Opcodes.scala.html#63622" title="=&gt; DeadCodeElimination.this.global.icodes.opcodes.CALL_METHOD">init</a>)
              <span title="Any" class="keyword">if</span> (<a href="../../Global.scala.html#39141" title="object DeadCodeElimination.this.global.inliner">inliner</a>.<a href="Inliners.scala.html#82492" title="(cls: DeadCodeElimination.this.global.inliner.global.Symbol)Boolean">isClosureClass</a>(<a href="#687312" title="DeadCodeElimination.this.global.icodes.global.Symbol">sym</a>)) {
                <a href="#82527" title="(elem: DeadCodeElimination.this.global.Symbol)DeadCodeElimination.this.liveClosures.type">liveClosures</a> += <a href="#687312" title="DeadCodeElimination.this.global.icodes.global.Symbol">sym</a>
              }
            <span title="Unit" class="keyword">case</span> LOAD_EXCEPTION() =&gt;
              <span title="Unit">(</span>)
              
            <span title="Unit" class="keyword">case</span> _ =&gt;
              <span class="keyword">for</span> ((<a title="DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock" id="687488">bb1</a>, <a title="Int" id="687489">idx1</a>) &lt;- <a href="#686038" title="=&gt; DeadCodeElimination.this.global.icodes.reachingDefinitions.ReachingDefinitionsAnalysis">rdef</a>.<a href="../icode/analysis/ReachingDefinitions.scala.html#164234" title="(bb: DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock,idx: Int,m: Int)List[(DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock, Int)]">findDefs</a><a href="#687413" title="(f: ((DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock, Int)) =&gt; scala.collection.mutable.Set[(DeadCodeElimination.this.global.icodes.BasicBlock, Int)])Unit">(</a><a href="#686883" title="DeadCodeElimination.this.global.icodes.BasicBlock">bb</a>, <a href="#686884" title="Int">idx</a>, <a href="#686885" title="DeadCodeElimination.this.global.icodes.Instruction">instr</a>.<a href="../icode/Opcodes.scala.html#61468" title="=&gt; Int">consumed</a>) <span class="keyword">if</span> <span title="=&gt; Boolean">!</span><a href="#686045" title="(key: DeadCodeElimination.this.global.icodes.BasicBlock)scala.collection.mutable.BitSet">useful</a><span title="(elem: Int)Boolean">(</span><a href="#687488" title="DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock">bb1</a>)(<a href="#687489" title="Int">idx1</a>)) {
                <a href="../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;\tAdding &quot;</span> + <a href="../icode/BasicBlocks.scala.html#61323" title="(n: Int)DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.Instruction">bb1</a>(<a href="#687489" title="Int">idx1</a>))
                <a href="#686043" title="(elem: (DeadCodeElimination.this.global.icodes.BasicBlock, Int))DeadCode.this.worklist.type">worklist</a> += (<span title="(_1: DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock,_2: Int)(DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock, Int)">(</span><a href="#687488" title="DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock">bb1</a>, <a href="#687489" title="Int">idx1</a>))
              }
          }
        }
      }
    }
    
    <span class="keyword">def</span> <a title="(m: DeadCodeElimination.this.global.icodes.IMethod)Unit" id="686058">sweep</a>(<a title="DeadCodeElimination.this.global.icodes.IMethod" id="686218">m</a>: <a href="../icode/Members.scala.html#46173" title="DeadCodeElimination.this.global.icodes.IMethod">IMethod</a>) {
      <span class="keyword">val</span> <a title="scala.collection.mutable.Map[(DeadCodeElimination.this.global.icodes.BasicBlock, Int),List[DeadCodeElimination.this.global.icodes.Instruction]]" id="687539">compensations</a> = <a href="#686059" title="(m: DeadCodeElimination.this.global.icodes.IMethod)scala.collection.mutable.Map[(DeadCodeElimination.this.global.icodes.BasicBlock, Int),List[DeadCodeElimination.this.global.icodes.Instruction]]">computeCompensations</a>(<a href="#686218" title="DeadCodeElimination.this.global.icodes.IMethod">m</a>)
      
      <span class="keyword">for</span> (<a title="DeadCodeElimination.this.global.icodes.BasicBlock" id="687562">bb</a> &lt;- <a href="#686218" title="DeadCodeElimination.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61228" title="=&gt; DeadCodeElimination.this.global.icodes.Code">code</a>.<a href="../icode/Members.scala.html#61390" title="=&gt; scala.collection.mutable.ListBuffer[DeadCodeElimination.this.global.icodes.BasicBlock]">blocks</a>.<span title="(f: (DeadCodeElimination.this.global.icodes.BasicBlock) =&gt; Unit)Unit">toList</span>) {
//        Console.println(&quot;** Sweeping block &quot; + bb + &quot; **&quot;)
        <span class="keyword">val</span> <a title="List[DeadCodeElimination.this.global.icodes.Instruction]" id="687563">oldInstr</a> = <a href="#687562" title="DeadCodeElimination.this.global.icodes.BasicBlock">bb</a>.<a href="../icode/BasicBlocks.scala.html#61313" title="=&gt; List[DeadCodeElimination.this.global.icodes.Instruction]">toList</a>
        <a href="#687562" title="DeadCodeElimination.this.global.icodes.BasicBlock">bb</a>.<a href="../icode/BasicBlocks.scala.html#61336" title="=&gt; Unit">open</a>
        <a href="#687562" title="DeadCodeElimination.this.global.icodes.BasicBlock">bb</a>.<a href="../icode/BasicBlocks.scala.html#61337" title="=&gt; Unit">clear</a>
        <span class="keyword">for</span> (<a href="#687650" title="(x: (DeadCodeElimination.this.global.icodes.Instruction, Int))Option[(DeadCodeElimination.this.global.icodes.Instruction, Int)]">Pair</a>(<a title="DeadCodeElimination.this.global.icodes.Instruction" id="687695">i</a>, <a title="Int" id="687696">idx</a>) &lt;- <a href="#687563" title="List[DeadCodeElimination.this.global.icodes.Instruction]">oldInstr</a>.<a href="#687647" title="(f: ((DeadCodeElimination.this.global.icodes.Instruction, Int)) =&gt; Unit)Unit">zipWithIndex</a>) {
          <span title="Unit" class="keyword">if</span> (<a href="#686045" title="(key: DeadCodeElimination.this.global.icodes.BasicBlock)scala.collection.mutable.BitSet">useful</a><span title="(elem: Int)Boolean">(</span><a href="#687562" title="DeadCodeElimination.this.global.icodes.BasicBlock">bb</a>)(<a href="#687696" title="Int">idx</a>)) {
//            log(&quot; &quot; + i + &quot; is useful&quot;)
            <a href="#687562" title="DeadCodeElimination.this.global.icodes.BasicBlock">bb</a>.<a href="../icode/BasicBlocks.scala.html#61333" title="(instr: DeadCodeElimination.this.global.icodes.Instruction,pos: scala.tools.nsc.util.Position)Unit">emit</a>(<a href="#687695" title="DeadCodeElimination.this.global.icodes.Instruction">i</a>, <a href="#687695" title="DeadCodeElimination.this.global.icodes.Instruction">i</a>.<a href="../icode/Opcodes.scala.html#61473" title="=&gt; scala.tools.nsc.util.Position">pos</a>)
            <a href="#687539" title="scala.collection.mutable.Map[(DeadCodeElimination.this.global.icodes.BasicBlock, Int),List[DeadCodeElimination.this.global.icodes.Instruction]]">compensations</a>.<span title="(key: (DeadCodeElimination.this.global.icodes.BasicBlock, Int))Option[List[DeadCodeElimination.this.global.icodes.Instruction]]">get</span><span title="(_1: DeadCodeElimination.this.global.icodes.BasicBlock,_2: Int)(DeadCodeElimination.this.global.icodes.BasicBlock, Int)">(</span><a href="#687562" title="DeadCodeElimination.this.global.icodes.BasicBlock">bb</a>, <a href="#687696" title="Int">idx</a>) <span title="Unit" class="keyword">match</span> {
              <span title="Unit" class="keyword">case</span> Some(<a title="List[DeadCodeElimination.this.global.icodes.Instruction]" id="687775">is</a>) =&gt; <a href="#687775" title="(f: (DeadCodeElimination.this.global.icodes.Instruction) =&gt; Unit)Unit">is</a> foreach <a href="#687562" title="DeadCodeElimination.this.global.icodes.BasicBlock">bb</a>.<a href="../icode/BasicBlocks.scala.html#61332" title="(instr: DeadCodeElimination.this.global.icodes.Instruction)Unit">emit</a>
              <span title="Unit" class="keyword">case</span> <span title="object None">None</span> =&gt; <span title="Unit">(</span>)
            }
            // check for accessed locals
            <a href="#687695" title="DeadCodeElimination.this.global.icodes.Instruction">i</a> <span title="Unit" class="keyword">match</span> {
              <span title="Unit" class="keyword">case</span> LOAD_LOCAL(<a title="DeadCodeElimination.this.global.icodes.Local" id="687819">l</a>) <span class="keyword">if</span> <span title="=&gt; Boolean">!</span><a href="#687819" title="DeadCodeElimination.this.global.icodes.Local">l</a>.<a href="../icode/Members.scala.html#60755" title="=&gt; Boolean">arg</a> =&gt; 
                <a href="#686048" title="(x$1: List[DeadCodeElimination.this.global.icodes.Local])Unit">accessedLocals</a> = <a href="#687819" title="DeadCodeElimination.this.global.icodes.Local">l</a> <a href="#687822" title="DeadCodeElimination.this.global.icodes.Local">::</a> <a href="#686048" title="(x: DeadCodeElimination.this.global.icodes.Local)List[DeadCodeElimination.this.global.icodes.Local]">accessedLocals</a>
              <span title="Unit" class="keyword">case</span> STORE_LOCAL(<a title="DeadCodeElimination.this.global.icodes.Local" id="687833">l</a>) <span class="keyword">if</span> <span title="=&gt; Boolean">!</span><a href="#687833" title="DeadCodeElimination.this.global.icodes.Local">l</a>.<a href="../icode/Members.scala.html#60755" title="=&gt; Boolean">arg</a> =&gt;
                <a href="#686048" title="(x$1: List[DeadCodeElimination.this.global.icodes.Local])Unit">accessedLocals</a> = <a href="#687833" title="DeadCodeElimination.this.global.icodes.Local">l</a> <a href="#687836" title="DeadCodeElimination.this.global.icodes.Local">::</a> <a href="#686048" title="(x: DeadCodeElimination.this.global.icodes.Local)List[DeadCodeElimination.this.global.icodes.Local]">accessedLocals</a>
              <span title="Unit" class="keyword">case</span> _ =&gt; <span title="Unit">(</span>)
            }
          } <span class="keyword">else</span> {
            <a href="#687695" title="DeadCodeElimination.this.global.icodes.Instruction">i</a> <span title="Unit" class="keyword">match</span> {
              <span title="Unit" class="keyword">case</span> NEW(REFERENCE(<a title="DeadCodeElimination.this.global.icodes.global.Symbol" id="687848">sym</a>)) =&gt; 
                <a href="../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;skipped object creation: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#687848" title="DeadCodeElimination.this.global.icodes.global.Symbol">sym</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;inside &quot;)" class="string">&quot;inside &quot;</span> + <a href="#686218" title="DeadCodeElimination.this.global.icodes.IMethod">m</a>)
              <span title="Unit" class="keyword">case</span> _ =&gt; <span title="Unit">(</span>)
            }
            <span title="Unit" class="keyword">if</span> (<a href="../../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../../Settings.scala.html#37759" title="=&gt; Boolean">value</a>) <a href="../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Skipped: bb_&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#687562" title="DeadCodeElimination.this.global.icodes.BasicBlock">bb</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;: &quot;)" class="string">&quot;: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#687696" title="Int">idx</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;( &quot;)" class="string">&quot;( &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#687695" title="DeadCodeElimination.this.global.icodes.Instruction">i</a> + <span title="java.lang.String(&quot;)&quot;)" class="string">&quot;)&quot;</span>)
          }
        }

        <span title="Unit" class="keyword">if</span> (<a href="#687562" title="DeadCodeElimination.this.global.icodes.BasicBlock">bb</a>.<span title="(x$1: Int)Boolean">size</span> &gt; <span title="Int(0)" class="int">0</span>)
          <a href="#687562" title="DeadCodeElimination.this.global.icodes.BasicBlock">bb</a>.<a href="../icode/BasicBlocks.scala.html#61335" title="=&gt; Unit">close</a>
        <span class="keyword">else</span> 
          <a href="../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="java.lang.String(&quot;empty block encountered&quot;)" class="string">&quot;empty block encountered&quot;</span>)
      }
    }
    
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(m: DeadCodeElimination.this.global.icodes.IMethod)scala.collection.mutable.Map[(DeadCodeElimination.this.global.icodes.BasicBlock, Int),List[DeadCodeElimination.this.global.icodes.Instruction]]" id="686059">computeCompensations</a>(<a title="DeadCodeElimination.this.global.icodes.IMethod" id="687540">m</a>: <a href="../icode/Members.scala.html#46173" title="DeadCodeElimination.this.global.icodes.IMethod">IMethod</a>): mutable.<span title="scala.collection.mutable.Map[(DeadCodeElimination.this.global.icodes.BasicBlock, Int),List[DeadCodeElimination.this.global.icodes.Instruction]]">Map</span>[(BasicBlock, Int), List[Instruction]] = {
      <span class="keyword">val</span> <a title="scala.collection.mutable.Map[(DeadCodeElimination.this.global.icodes.BasicBlock, Int),List[DeadCodeElimination.this.global.icodes.Instruction]]" id="687891">compensations</a>: mutable.<span title="scala.collection.mutable.Map[(DeadCodeElimination.this.global.icodes.BasicBlock, Int),List[DeadCodeElimination.this.global.icodes.Instruction]]">Map</span>[(BasicBlock, Int), List[Instruction]] = <span title="scala.collection.mutable.HashMap[(DeadCodeElimination.this.global.icodes.BasicBlock, Int),List[DeadCodeElimination.this.global.icodes.Instruction]]" class="keyword">new</span> mutable.<span title="scala.collection.mutable.HashMap[(DeadCodeElimination.this.global.icodes.BasicBlock, Int),List[DeadCodeElimination.this.global.icodes.Instruction]]">HashMap</span>
      
      <span class="keyword">for</span> (<a title="DeadCodeElimination.this.global.icodes.BasicBlock" id="687914">bb</a> &lt;- <a href="#687540" title="DeadCodeElimination.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#61228" title="=&gt; DeadCodeElimination.this.global.icodes.Code">code</a>.<a href="../icode/Members.scala.html#61390" title="=&gt; scala.collection.mutable.ListBuffer[DeadCodeElimination.this.global.icodes.BasicBlock]">blocks</a>.<span title="(f: (DeadCodeElimination.this.global.icodes.BasicBlock) =&gt; Unit)Unit">toList</span>) {
        <span title="(assertion: Boolean,message: =&gt; Any)Unit">assert</span>(<a href="#687914" title="DeadCodeElimination.this.global.icodes.BasicBlock">bb</a>.<a href="../icode/BasicBlocks.scala.html#61288" title="=&gt; Boolean">closed</a>, <span title="java.lang.String(&quot;Open block in computeCompensations&quot;)" class="string">&quot;Open block in computeCompensations&quot;</span>)
        <span class="keyword">for</span> ((<a title="DeadCodeElimination.this.global.icodes.Instruction" id="688039">i</a>, <a title="Int" id="688040">idx</a>) &lt;- <a href="#687914" title="DeadCodeElimination.this.global.icodes.BasicBlock">bb</a>.<a href="../icode/BasicBlocks.scala.html#61313" title="=&gt; List[DeadCodeElimination.this.global.icodes.Instruction]">toList</a>.<a href="#688006" title="(f: ((DeadCodeElimination.this.global.icodes.Instruction, Int)) =&gt; Unit)Unit">zipWithIndex</a>) {
          <span title="Unit" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="#686045" title="(key: DeadCodeElimination.this.global.icodes.BasicBlock)scala.collection.mutable.BitSet">useful</a><span title="(elem: Int)Boolean">(</span><a href="#687914" title="DeadCodeElimination.this.global.icodes.BasicBlock">bb</a>)(<a href="#688040" title="Int">idx</a>)) {
            <span class="keyword">for</span> ((<a title="DeadCodeElimination.this.global.icodes.TypeKind" id="688189">consumedType</a>, <a title="Int" id="688190">depth</a>) &lt;- <a href="#688039" title="DeadCodeElimination.this.global.icodes.Instruction">i</a>.<a href="../icode/Opcodes.scala.html#61470" title="=&gt; List[DeadCodeElimination.this.global.icodes.TypeKind]">consumedTypes</a>.<span title="=&gt; List[DeadCodeElimination.this.global.icodes.TypeKind]">reverse</span>.<a href="#688156" title="(f: ((DeadCodeElimination.this.global.icodes.TypeKind, Int)) =&gt; Unit)Unit">zipWithIndex</a>) {
              <a href="../../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Finding definitions of: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#688039" title="DeadCodeElimination.this.global.icodes.Instruction">i</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;\012\011&quot;)" class="string">&quot;\n\t&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#688189" title="DeadCodeElimination.this.global.icodes.TypeKind">consumedType</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; at depth: &quot;)" class="string">&quot; at depth: &quot;</span> + <a href="#688190" title="Int">depth</a>)
              <span class="keyword">val</span> <a title="List[(DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock, Int)]" id="688193">defs</a> = <a href="#686038" title="=&gt; DeadCodeElimination.this.global.icodes.reachingDefinitions.ReachingDefinitionsAnalysis">rdef</a>.<a href="../icode/analysis/ReachingDefinitions.scala.html#164233" title="(bb: DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock,idx: Int,m: Int,depth: Int)List[(DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock, Int)]">findDefs</a>(<a href="#687914" title="DeadCodeElimination.this.global.icodes.BasicBlock">bb</a>, <a href="#688040" title="Int">idx</a>, <span title="Int(1)" class="int">1</span>, <a href="#688190" title="Int">depth</a>)
              <span class="keyword">for</span> (<a title="(DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock, Int)" id="688237">d</a> &lt;- <a href="#688193" title="(f: ((DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock, Int)) =&gt; Unit)Unit">defs</a>) {
                <span title="Unit" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="#687891" title="scala.collection.mutable.Map[(DeadCodeElimination.this.global.icodes.BasicBlock, Int),List[DeadCodeElimination.this.global.icodes.Instruction]]">compensations</a>.<a title="(key: (DeadCodeElimination.this.global.icodes.BasicBlock, Int))Boolean" id="44448">isDefinedAt</a>(<a href="#688237" title="(DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock, Int)">d</a>))
                  <a href="#687891" title="(key: (DeadCodeElimination.this.global.icodes.BasicBlock, Int),value: List[DeadCodeElimination.this.global.icodes.Instruction])Unit">compensations</a>(<a href="#688237" title="(DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock, Int)">d</a>) = <a title="(xs: DeadCodeElimination.this.global.icodes.opcodes.DROP*)List[DeadCodeElimination.this.global.icodes.opcodes.DROP]" id="24319">List</a>(<a href="../icode/Opcodes.scala.html#63996" title="(typ: DeadCodeElimination.this.global.icodes.TypeKind)DeadCodeElimination.this.global.icodes.opcodes.DROP">DROP</a>(<a href="#688189" title="DeadCodeElimination.this.global.icodes.TypeKind">consumedType</a>))
              }
            }
          }
        }
      }
      <a href="#687891" title="scala.collection.mutable.Map[(DeadCodeElimination.this.global.icodes.BasicBlock, Int),List[DeadCodeElimination.this.global.icodes.Instruction]]">compensations</a>
    }
    
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="[a](bb: DeadCodeElimination.this.global.icodes.BasicBlock)(f: =&gt; a)a" id="686060">withClosed</a>[<a title="&gt;: Nothing &lt;: Any" id="686062">a</a>](<a title="DeadCodeElimination.this.global.icodes.BasicBlock" id="688279">bb</a>: <a href="../icode/BasicBlocks.scala.html#46178" title="DeadCodeElimination.this.global.icodes.BasicBlock">BasicBlock</a>)(<a title="=&gt; a" id="688280">f</a>: =&gt; a): <a href="#686062" title="a">a</a> = {
      <span title="Unit" class="keyword">if</span> (<a href="#688279" title="DeadCodeElimination.this.global.icodes.BasicBlock">bb</a>.<span title="(x$1: Int)Boolean">size</span> &gt; <span title="Int(0)" class="int">0</span>) <a href="#688279" title="DeadCodeElimination.this.global.icodes.BasicBlock">bb</a>.<a href="../icode/BasicBlocks.scala.html#61335" title="=&gt; Unit">close</a>
      <span class="keyword">val</span> <a title="a" id="688283">res</a> = <a href="#688280" title="=&gt; a">f</a>
      <span title="Unit" class="keyword">if</span> (<a href="#688279" title="DeadCodeElimination.this.global.icodes.BasicBlock">bb</a>.<span title="(x$1: Int)Boolean">size</span> &gt; <span title="Int(0)" class="int">0</span>) <a href="#688279" title="DeadCodeElimination.this.global.icodes.BasicBlock">bb</a>.<a href="../icode/BasicBlocks.scala.html#61336" title="=&gt; Unit">open</a>
      <a href="#688283" title="a">res</a>
    }
    
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(bb: DeadCodeElimination.this.global.icodes.BasicBlock,i: DeadCodeElimination.this.global.icodes.Instruction)(DeadCodeElimination.this.global.icodes.BasicBlock, Int)" id="686063">findInstruction</a>(<a title="DeadCodeElimination.this.global.icodes.BasicBlock" id="687358">bb</a>: <a href="../icode/BasicBlocks.scala.html#46178" title="DeadCodeElimination.this.global.icodes.BasicBlock">BasicBlock</a>, <a title="DeadCodeElimination.this.global.icodes.Instruction" id="687359">i</a>: <a href="../icode/Opcodes.scala.html#46182" title="DeadCodeElimination.this.global.icodes.Instruction">Instruction</a>): <a title="(DeadCodeElimination.this.global.icodes.BasicBlock, Int)" id="1154">(</a>BasicBlock, Int) = {
      <span class="keyword">def</span> <a title="(bb: DeadCodeElimination.this.global.icodes.BasicBlock)Option[(DeadCodeElimination.this.global.icodes.BasicBlock, Int)]" id="688296">find</a>(<a title="DeadCodeElimination.this.global.icodes.BasicBlock" id="688297">bb</a>: <a href="../icode/BasicBlocks.scala.html#46178" title="DeadCodeElimination.this.global.icodes.BasicBlock">BasicBlock</a>): <a title="Option[(DeadCodeElimination.this.global.icodes.BasicBlock, Int)]" id="782">Option</a>[(BasicBlock, Int)] = {
        <span class="keyword">var</span> <a title="List[DeadCodeElimination.this.global.icodes.Instruction]" id="688298">xs</a> = <a href="#688297" title="DeadCodeElimination.this.global.icodes.BasicBlock">bb</a>.<a href="../icode/BasicBlocks.scala.html#61313" title="=&gt; List[DeadCodeElimination.this.global.icodes.Instruction]">toList</a>
        <a href="#688298" title="List[DeadCodeElimination.this.global.icodes.Instruction]">xs</a>.<a title="(p: ((DeadCodeElimination.this.global.icodes.Instruction, Int)) =&gt; Boolean)Option[(DeadCodeElimination.this.global.icodes.Instruction, Int)]" id="28941">zipWithIndex</a> find { <a title="(DeadCodeElimination.this.global.icodes.Instruction, Int)" id="688385">hd</a> =&gt; <a href="#688385" title="(DeadCodeElimination.this.global.icodes.Instruction, Int)">hd</a>.<a title="(x$1: AnyRef)Boolean" id="6542">_1</a> eq <a href="#687359" title="DeadCodeElimination.this.global.icodes.Instruction">i</a> } <span title="Option[(DeadCodeElimination.this.global.icodes.BasicBlock, Int)]" class="keyword">match</span> {
          <span title="Some[(DeadCodeElimination.this.global.icodes.BasicBlock, Int)]" class="keyword">case</span> Some((_, <a title="Int" id="688393">idx</a>)) =&gt; <a title="(x: (DeadCodeElimination.this.global.icodes.BasicBlock, Int))Some[(DeadCodeElimination.this.global.icodes.BasicBlock, Int)]" id="258">Some</a><span title="(_1: DeadCodeElimination.this.global.icodes.BasicBlock,_2: Int)(DeadCodeElimination.this.global.icodes.BasicBlock, Int)">(</span><a href="#688297" title="DeadCodeElimination.this.global.icodes.BasicBlock">bb</a>, <a href="#688393" title="Int">idx</a>)
          <span title="None.type" class="keyword">case</span> <span title="object None">None</span> =&gt; <span title="object None">None</span>
        }
      }

      <span class="keyword">for</span> (<a title="DeadCodeElimination.this.global.icodes.BasicBlock" id="688435">b</a> &lt;- <a href="../icode/ICodes.scala.html#46149" title="=&gt; DeadCodeElimination.this.global.icodes.Linearizer">linearizer</a>.<a href="../icode/Linearizers.scala.html#62210" title="(c: DeadCodeElimination.this.global.icodes.IMethod,start: DeadCodeElimination.this.global.icodes.BasicBlock)List[DeadCodeElimination.this.global.icodes.BasicBlock]">linearizeAt</a><span title="(f: (DeadCodeElimination.this.global.icodes.BasicBlock) =&gt; Unit)Unit">(</span><a href="#686051" title="=&gt; DeadCodeElimination.this.global.icodes.IMethod">method</a>, <a href="#687358" title="DeadCodeElimination.this.global.icodes.BasicBlock">bb</a>))
        <a href="#688296" title="(bb: DeadCodeElimination.this.global.icodes.BasicBlock)Option[(DeadCodeElimination.this.global.icodes.BasicBlock, Int)]">find</a>(<a href="#688435" title="DeadCodeElimination.this.global.icodes.BasicBlock">b</a>) <span title="Unit" class="keyword">match</span> {
          <span title="Nothing" class="keyword">case</span> Some(<a title="(DeadCodeElimination.this.global.icodes.BasicBlock, Int)" id="688439">p</a>) =&gt; <span title="Nothing" class="keyword">return</span> <a href="#688439" title="(DeadCodeElimination.this.global.icodes.BasicBlock, Int)">p</a>
          <span title="Unit" class="keyword">case</span> <span title="object None">None</span> =&gt; <span title="Unit">(</span>)
        }
      <a href="../../Global.scala.html#39077" title="(msg: String)Nothing">abort</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;could not find init in: &quot;</span> + <a href="#686051" title="=&gt; DeadCodeElimination.this.global.icodes.IMethod">method</a>)
    }

    <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="DeadCodeElimination.this.global.Symbol" id="686065">RuntimePackage</a> = <a href="../../symtab/Definitions.scala.html#26479" title="object DeadCodeElimination.this.global.definitions">definitions</a>.<a href="../../symtab/Definitions.scala.html#28574" title="(fullname: DeadCodeElimination.this.global.Name)DeadCodeElimination.this.global.Symbol">getModule</a>(<a href="../../symtab/Names.scala.html#26054" title="implicit scala.tools.nsc.symtab.Names.view : (s: String)DeadCodeElimination.this.global.Name" class="string">&quot;scala.runtime&quot;</a>)
    /** Is 'sym' a side-effecting method? TODO: proper analysis.  */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: DeadCodeElimination.this.global.Symbol)Boolean" id="686066">isSideEffecting</a>(<a title="DeadCodeElimination.this.global.Symbol" id="686672">sym</a>: <a href="../../symtab/Symbols.scala.html#26127" title="DeadCodeElimination.this.global.Symbol">Symbol</a>): <a title="Boolean" id="1951">Boolean</a> = {
      <span title="=&gt; Boolean">!</span>(<span title="(x$1: Boolean)Boolean">(</span><a href="#686672" title="DeadCodeElimination.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#26905" title="(x$1: Boolean)Boolean">isGetter</a> &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#686672" title="DeadCodeElimination.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#26996" title="(mask: Long)Boolean">hasFlag</a>(Flags.<span title="Long(2147483648L)">LAZY</span>))
       <span title="(x$1: Boolean)Boolean">||</span> (<a href="#686672" title="DeadCodeElimination.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#26916" title="(x$1: Boolean)Boolean">isConstructor</a> 
           <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span>(<a href="#686672" title="DeadCodeElimination.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#26983" title="(x$1: AnyRef)Boolean">owner</a> <span title="(x$1: Boolean)Boolean">==</span> <a href="#686051" title="=&gt; DeadCodeElimination.this.global.icodes.IMethod">method</a>.<a href="../icode/Members.scala.html#61225" title="=&gt; DeadCodeElimination.this.global.icodes.global.Symbol">symbol</a>.<a href="../../symtab/Symbols.scala.html#26983" title="=&gt; DeadCodeElimination.this.global.icodes.global.Symbol">owner</a> &amp;&amp; <a href="#686051" title="=&gt; DeadCodeElimination.this.global.icodes.IMethod">method</a>.<a href="../icode/Members.scala.html#61225" title="=&gt; DeadCodeElimination.this.global.icodes.global.Symbol">symbol</a>.<a href="../../symtab/Symbols.scala.html#26916" title="=&gt; Boolean">isConstructor</a>) // a call to another constructor  
           &amp;&amp; <a href="#686672" title="DeadCodeElimination.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#26983" title="=&gt; DeadCodeElimination.this.global.Symbol">owner</a>.<a href="../../symtab/Symbols.scala.html#26983" title="(x$1: AnyRef)Boolean">owner</a> == <a href="#686064" title="=&gt; DeadCodeElimination.this.global.Symbol">RuntimePackage</a>.<a href="../../symtab/Symbols.scala.html#27059" title="=&gt; DeadCodeElimination.this.global.Symbol">moduleClass</a>)
       || (<a href="#686672" title="DeadCodeElimination.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#26916" title="(x$1: Boolean)Boolean">isConstructor</a> &amp;&amp; <a href="../../Global.scala.html#39141" title="object DeadCodeElimination.this.global.inliner">inliner</a>.<a href="Inliners.scala.html#82492" title="(cls: DeadCodeElimination.this.global.inliner.global.Symbol)Boolean">isClosureClass</a>(<a href="#686672" title="DeadCodeElimination.this.global.Symbol">sym</a>.<a href="../../symtab/Symbols.scala.html#26983" title="=&gt; DeadCodeElimination.this.global.Symbol">owner</a>))
/*       || definitions.isBox(sym)
       || definitions.isUnbox(sym)*/)
    }
  } /* DeadCode */
}

        </pre>
    </body>
</html>