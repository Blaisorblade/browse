<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/backend/opt/DeadCodeElimination.scala</title>
        <script type="text/javascript" src="../../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../../style.css" title="Style">
    </head>
    <body onload="initializeLinked()">
        <pre>
<span class="comment">/* NSC -- new scala compiler
 * Copyright 2005-2009 LAMP/EPFL
 * @author  Iulian Dragos
 */</span>

<span class="comment">// $Id: DeadCodeElimination.scala 16884 2009-01-09 16:52:09Z cunei $</span>

<span class="keyword">package</span> scala.tools.nsc.backend.opt

<span class="keyword">import</span> scala.collection._
<span class="keyword">import</span> scala.collection.immutable.{Map, HashMap, Set, HashSet}
<span class="keyword">import</span> scala.tools.nsc.backend.icode.analysis.LubError
<span class="keyword">import</span> scala.tools.nsc.symtab._

<span class="comment">/**
 */</span>
<span class="keyword">abstract</span> <span class="keyword">class</span> <span class="typed"><span class="type">class DeadCodeElimination extends scala.tools.nsc.SubComponent with ScalaObject</span><a id="8591">DeadCodeElimination</a></span> <span class="keyword">extends</span> <span class="typed"><span class="type">scala.tools.nsc.SubComponent</span><a href="../../SubComponent.scala.html#6300">SubComponent</a></span> {
  <span class="keyword">import</span> global._
  <span class="keyword">import</span> icodes._
  <span class="keyword">import</span> icodes.opcodes._

  <span class="keyword">val</span> <span class="typed"><span class="type">java.lang.String</span><span id="32296"><a id="32295">phaseName</a></span></span> = <span class="typed"><span class="type">java.lang.String(&quot;dce&quot;)</span><span class="string">&quot;dce&quot;</span></span>

  <span class="comment">/** Create a new phase */</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">(scala.tools.nsc.Phase)DeadCodeElimination.this.DeadCodeEliminationPhase</span><a id="32297">newPhase</a></span>(<span class="typed"><span class="type">scala.tools.nsc.Phase</span><a id="32609">p</a></span>: <span class="typed"><span class="type">scala.tools.nsc.Phase</span><a href="../../Phase.scala.html#6873">Phase</a></span>) = <span class="typed"><span class="type">DeadCodeElimination.this.DeadCodeEliminationPhase</span><span class="keyword">new</span></span> <span class="typed"><span class="type">DeadCodeElimination.this.DeadCodeEliminationPhase</span><a href="#32298">DeadCodeEliminationPhase</a></span>(<span class="typed"><span class="type">scala.tools.nsc.Phase</span><a href="#32609">p</a></span>)

  <span class="comment">/** Dead code elimination phase.
   */</span>
  <span class="keyword">class</span> <span class="typed"><span class="type">class DeadCodeEliminationPhase extends DeadCodeElimination.this.global.icodes.ICodePhase with ScalaObject</span><a id="32298">DeadCodeEliminationPhase</a></span>(<span class="typed"><span class="type">scala.tools.nsc.Phase</span><span id="32635"><a id="32641">prev</a></span></span>: <span class="typed"><span class="type">scala.tools.nsc.Phase</span><a href="../../Phase.scala.html#6873">Phase</a></span>) <span class="keyword">extends</span> <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.ICodePhase</span><a href="../icode/ICodes.scala.html#32320">ICodePhase</a></span>(<span class="typed"><span class="type">scala.tools.nsc.Phase</span><a href="#32641">prev</a></span>) {

    <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; java.lang.String</span><a id="32637">name</a></span> = <span class="typed"><span class="type">=&gt; java.lang.String</span><a href="#32295">phaseName</a></span>
    <span class="keyword">val</span> <span class="typed"><span class="type">DeadCodeElimination.this.DeadCode</span><span id="32639"><a id="32638">dce</a></span></span> = <span class="typed"><span class="type">DeadCodeElimination.this.DeadCode</span><span class="keyword">new</span></span> <span class="typed"><span class="type">DeadCodeElimination.this.DeadCode</span><a href="#32301">DeadCode</a></span>()

    <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">(DeadCodeElimination.this.global.icodes.IClass)Unit</span><a id="32640">apply</a></span>(<span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.IClass</span><a id="32679">c</a></span>: <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.IClass</span><a href="../icode/Members.scala.html#32330">IClass</a></span>) {
      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="../../Global.scala.html#21157">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting</span><a href="../../Settings.scala.html#30064">Xdce</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting#T</span><a href="../../Settings.scala.html#30301">value</a></span>)
        <span class="typed"><span class="type">=&gt; DeadCodeElimination.this.DeadCode</span><a href="#32638">dce</a></span>.<span class="typed"><span class="type">(DeadCodeElimination.this.global.icodes.IClass)Unit</span><a href="#32645">analyzeClass</a></span>(<span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.IClass</span><a href="#32679">c</a></span>)
    }
  }

  <span class="comment">/** closures that are instantiated at least once, after dead code elimination */</span>
  <span class="keyword">val</span> <span class="typed"><span class="type">scala.collection.mutable.Set[DeadCodeElimination.this.global.Symbol]</span><span id="32300"><a id="32299">liveClosures</a></span></span>: mutable.<span class="typed"><span class="type">scala.collection.mutable.Set[DeadCodeElimination.this.global.Symbol]</span><a id="20147">Set</a></span>[Symbol] = <span class="typed"><span class="type">scala.collection.mutable.HashSet[DeadCodeElimination.this.global.Symbol]</span><span class="keyword">new</span></span> mutable.<span class="typed"><span class="type">scala.collection.mutable.HashSet[DeadCodeElimination.this.global.Symbol]</span><a id="19895">HashSet</a></span>()

  <span class="comment">/** Remove dead code.
   */</span>
  <span class="keyword">class</span> <span class="typed"><span class="type">class DeadCode extends java.lang.Object with ScalaObject</span><a id="32301">DeadCode</a></span> {
    
    <span class="keyword">def</span> <span class="typed"><span class="type">(DeadCodeElimination.this.global.icodes.IClass)Unit</span><a id="32645">analyzeClass</a></span>(<span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.IClass</span><a id="32705">cls</a></span>: <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.IClass</span><a href="../icode/Members.scala.html#32330">IClass</a></span>) {
      <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.IClass</span><a href="#32705">cls</a></span>.<span class="typed"><span class="type">=&gt; List[DeadCodeElimination.this.global.icodes.IMethod]</span><a href="../icode/Members.scala.html#32687">methods</a></span>.<span class="typed"><span class="type">((DeadCodeElimination.this.global.icodes.IMethod) =&gt; Unit)Unit</span><a id="21366">foreach</a></span> { <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.IMethod</span><a id="32862">m</a></span> =&gt;
        <span class="typed"><span class="type">DeadCode.this.type</span><a href="#32301" class="keyword">this</a></span>.<span class="typed"><span class="type">(DeadCodeElimination.this.global.icodes.IMethod)Unit</span><a href="#32659">method</a></span> = <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.IMethod</span><a href="#32862">m</a></span>
        <span class="typed"><span class="type">(DeadCodeElimination.this.global.icodes.IMethod)Unit</span><a href="#32663">dieCodeDie</a></span>(<span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.IMethod</span><a href="#32862">m</a></span>)
      }
    }

    <span class="keyword">val</span> <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.reachingDefinitions.ReachingDefinitionsAnalysis</span><span id="32647"><a id="32646">rdef</a></span></span> = <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.reachingDefinitions.ReachingDefinitionsAnalysis</span><span class="keyword">new</span></span> <span class="typed"><span class="type">object DeadCodeElimination.this.global.icodes.reachingDefinitions</span><a href="../icode/ICodes.scala.html#32313">reachingDefinitions</a></span>.<span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.reachingDefinitions.ReachingDefinitionsAnalysis</span><a href="../icode/analysis/ReachingDefinitions.scala.html#32714">ReachingDefinitionsAnalysis</a></span>;

    <span class="comment">/** Use-def chain: give the reaching definitions at the beginning of given instruction. */</span>
    <span class="keyword">var</span> <span class="typed"><span class="type">scala.collection.immutable.Map[(DeadCodeElimination.this.global.icodes.BasicBlock, Int),scala.collection.immutable.Set[(DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.Local, DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock, Int)]]</span><span id="32650"><span id="32648"><span id="32649"><a id="32839">defs</a></span></span></span></span>: <span class="typed"><span class="type">scala.collection.immutable.Map[(DeadCodeElimination.this.global.icodes.BasicBlock, Int),scala.collection.immutable.Set[(DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.Local, DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock, Int)]]</span><a id="26197">Map</a></span>[(BasicBlock, Int), Set[rdef.lattice.Definition]] = <span class="typed"><span class="type">object scala.collection.immutable.HashMap</span><a id="26432">HashMap</a></span>.<span class="typed"><span class="type">scala.collection.immutable.HashMap[(DeadCodeElimination.this.global.icodes.BasicBlock, Int),Nothing]</span><a id="32908">empty</a></span>
    
    <span class="comment">/** Useful instructions which have not been scanned yet. */</span>
    <span class="keyword">val</span> <span class="typed"><span class="type">scala.collection.mutable.Set[(DeadCodeElimination.this.global.icodes.BasicBlock, Int)]</span><span id="32652"><a id="32651">worklist</a></span></span>: mutable.<span class="typed"><span class="type">scala.collection.mutable.Set[(DeadCodeElimination.this.global.icodes.BasicBlock, Int)]</span><a id="20147">Set</a></span>[(BasicBlock, Int)] = <span class="typed"><span class="type">()scala.collection.jcl.LinkedHashSet[(DeadCodeElimination.this.global.icodes.BasicBlock, Int)]</span><a id="32949" class="keyword">new</a></span> jcl.<span class="typed"><span class="type">scala.collection.jcl.LinkedHashSet[(DeadCodeElimination.this.global.icodes.BasicBlock, Int)]</span><a id="24644">LinkedHashSet</a></span>
    
    <span class="comment">/** what instructions have been marked as useful? */</span>
    <span class="keyword">val</span> <span class="typed"><span class="type">scala.collection.mutable.Map[DeadCodeElimination.this.global.icodes.BasicBlock,scala.collection.mutable.BitSet]</span><span id="32654"><a id="32653">useful</a></span></span>: mutable.<span class="typed"><span class="type">scala.collection.mutable.Map[DeadCodeElimination.this.global.icodes.BasicBlock,scala.collection.mutable.BitSet]</span><a id="19880">Map</a></span>[BasicBlock, mutable.BitSet] = <span class="typed"><span class="type">scala.collection.mutable.HashMap[DeadCodeElimination.this.global.icodes.BasicBlock,scala.collection.mutable.BitSet]</span><span class="keyword">new</span></span> mutable.<span class="typed"><span class="type">scala.collection.mutable.HashMap[DeadCodeElimination.this.global.icodes.BasicBlock,scala.collection.mutable.BitSet]</span><a id="20081">HashMap</a></span>
    
    <span class="comment">/** what local variables have been accessed at least once? */</span>
    <span class="keyword">var</span> <span class="typed"><span class="type">List[DeadCodeElimination.this.global.icodes.Local]</span><span id="32657"><span id="32655"><span id="32656"><a id="32858">accessedLocals</a></span></span></span></span>: <span class="typed"><span class="type">List[DeadCodeElimination.this.global.icodes.Local]</span><a id="526">List</a></span>[Local] = <span class="typed"><span class="type">object Nil</span><a id="335">Nil</a></span>
    
    <span class="comment">/** the current method. */</span>
    <span class="keyword">var</span> <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.IMethod</span><span id="32660"><span id="32658"><span id="32659"><a id="32859">method</a></span></span></span></span>: <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.IMethod</span><a href="../icode/Members.scala.html#32332">IMethod</a></span> = _
    
    <span class="comment">/** Map instructions who have a drop on some control path, to that DROP instruction. */</span>
    <span class="keyword">val</span> <span class="typed"><span class="type">scala.collection.mutable.Map[(DeadCodeElimination.this.global.icodes.BasicBlock, Int),(DeadCodeElimination.this.global.icodes.BasicBlock, Int)]</span><span id="32662"><a id="32661">dropOf</a></span></span>: mutable.<span class="typed"><span class="type">scala.collection.mutable.Map[(DeadCodeElimination.this.global.icodes.BasicBlock, Int),(DeadCodeElimination.this.global.icodes.BasicBlock, Int)]</span><a id="19880">Map</a></span>[(BasicBlock, Int), (BasicBlock, Int)] = <span class="typed"><span class="type">scala.collection.mutable.HashMap[(DeadCodeElimination.this.global.icodes.BasicBlock, Int),(DeadCodeElimination.this.global.icodes.BasicBlock, Int)]</span><span class="keyword">new</span></span> mutable.<span class="typed"><span class="type">scala.collection.mutable.HashMap[(DeadCodeElimination.this.global.icodes.BasicBlock, Int),(DeadCodeElimination.this.global.icodes.BasicBlock, Int)]</span><a id="20081">HashMap</a></span>()
    
    <span class="keyword">def</span> <span class="typed"><span class="type">(DeadCodeElimination.this.global.icodes.IMethod)Unit</span><a id="32663">dieCodeDie</a></span>(<span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.IMethod</span><a id="32906">m</a></span>: <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.IMethod</span><a href="../icode/Members.scala.html#32332">IMethod</a></span>) {
      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.IMethod</span><a href="#32906">m</a></span>.<span class="typed"><span class="type">=&gt; DeadCodeElimination.this.global.icodes.Code</span><a href="../icode/Members.scala.html#32867">code</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5795">ne</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>) {
        <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;dead code elimination on &quot;)</span><span class="string">&quot;dead code elimination on &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.IMethod</span><a href="#32906">m</a></span>);
        <span class="typed"><span class="type">=&gt; scala.collection.mutable.Map[(DeadCodeElimination.this.global.icodes.BasicBlock, Int),(DeadCodeElimination.this.global.icodes.BasicBlock, Int)]</span><a href="#32661">dropOf</a></span>.<span class="typed"><span class="type">()Unit</span><a id="24207">clear</a></span>
        <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.IMethod</span><a href="#32906">m</a></span>.<span class="typed"><span class="type">=&gt; DeadCodeElimination.this.global.icodes.Code</span><a href="../icode/Members.scala.html#32867">code</a></span>.<span class="typed"><span class="type">=&gt; scala.collection.mutable.ListBuffer[DeadCodeElimination.this.global.icodes.BasicBlock]</span><a href="../icode/Members.scala.html#33274">blocks</a></span>.<span class="typed"><span class="type">()Unit</span><a id="33312">clear</a></span>
        <span class="typed"><span class="type">(List[DeadCodeElimination.this.global.icodes.Local])Unit</span><a href="#32656">accessedLocals</a></span> = <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.IMethod</span><a href="#32906">m</a></span>.<span class="typed"><span class="type">=&gt; List[DeadCodeElimination.this.global.icodes.Local]</span><a href="../icode/Members.scala.html#32888">params</a></span>.<span class="typed"><span class="type">=&gt; List[DeadCodeElimination.this.global.icodes.Local]</span><a id="21385">reverse</a></span>
        <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.IMethod</span><a href="#32906">m</a></span>.<span class="typed"><span class="type">=&gt; DeadCodeElimination.this.global.icodes.Code</span><a href="../icode/Members.scala.html#32867">code</a></span>.<span class="typed"><span class="type">=&gt; scala.collection.mutable.ListBuffer[DeadCodeElimination.this.global.icodes.BasicBlock]</span><a href="../icode/Members.scala.html#33274">blocks</a></span> <span class="typed"><span class="type">(Iterable[DeadCodeElimination.this.global.icodes.BasicBlock])Unit</span><a id="31623">++=</a></span> <span class="typed"><span class="type">=&gt; DeadCodeElimination.this.global.icodes.Linearizer</span><a href="../icode/ICodes.scala.html#32308">linearizer</a></span>.<span class="typed"><span class="type">(DeadCodeElimination.this.global.icodes.IMethod)List[DeadCodeElimination.this.global.icodes.BasicBlock]</span><a href="../icode/Linearizers.scala.html#33332">linearize</a></span>(<span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.IMethod</span><a href="#32906">m</a></span>)
        <span class="typed"><span class="type">(DeadCodeElimination.this.global.icodes.IMethod)Unit</span><a href="#32664">collectRDef</a></span>(<span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.IMethod</span><a href="#32906">m</a></span>)
        <span class="typed"><span class="type">=&gt; Unit</span><a href="#32665">mark</a></span>
        <span class="typed"><span class="type">(DeadCodeElimination.this.global.icodes.IMethod)Unit</span><a href="#32666">sweep</a></span>(<span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.IMethod</span><a href="#32906">m</a></span>)
        <span class="typed"><span class="type">(List[DeadCodeElimination.this.global.icodes.Local])Unit</span><a href="#32656">accessedLocals</a></span> = <span class="typed"><span class="type">=&gt; List[DeadCodeElimination.this.global.icodes.Local]</span><a href="#32655">accessedLocals</a></span>.<span class="typed"><span class="type">=&gt; List[DeadCodeElimination.this.global.icodes.Local]</span><a id="21405">removeDuplicates</a></span>
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> ((<span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.IMethod</span><a href="#32906">m</a></span>.<span class="typed"><span class="type">=&gt; List[DeadCodeElimination.this.global.icodes.Local]</span><a href="../icode/Members.scala.html#32885">locals</a></span> <span class="typed"><span class="type">(List[DeadCodeElimination.this.global.icodes.Local])List[DeadCodeElimination.this.global.icodes.Local]</span><a id="21399">--</a></span> <span class="typed"><span class="type">=&gt; List[DeadCodeElimination.this.global.icodes.Local]</span><a href="#32655">accessedLocals</a></span>).<span class="typed"><span class="type">=&gt; Int</span><a id="21345">length</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3145">&gt;</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>) {
          <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;Removed dead locals: &quot;)</span><span class="string">&quot;Removed dead locals: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> (<span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.IMethod</span><a href="#32906">m</a></span>.<span class="typed"><span class="type">=&gt; List[DeadCodeElimination.this.global.icodes.Local]</span><a href="../icode/Members.scala.html#32885">locals</a></span> <span class="typed"><span class="type">(List[DeadCodeElimination.this.global.icodes.Local])List[DeadCodeElimination.this.global.icodes.Local]</span><a id="21399">--</a></span> <span class="typed"><span class="type">=&gt; List[DeadCodeElimination.this.global.icodes.Local]</span><a href="#32655">accessedLocals</a></span>))
          <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.IMethod</span><a href="#32906">m</a></span>.<span class="typed"><span class="type">(List[DeadCodeElimination.this.global.icodes.Local])Unit</span><a href="../icode/Members.scala.html#32886">locals</a></span> = <span class="typed"><span class="type">=&gt; List[DeadCodeElimination.this.global.icodes.Local]</span><a href="#32655">accessedLocals</a></span>.<span class="typed"><span class="type">=&gt; List[DeadCodeElimination.this.global.icodes.Local]</span><a id="21385">reverse</a></span>
        }
      }
    }

    <span class="comment">/** collect reaching definitions and initial useful instructions for this method. */</span>
    <span class="keyword">def</span> <span class="typed"><span class="type">(DeadCodeElimination.this.global.icodes.IMethod)Unit</span><a id="32664">collectRDef</a></span>(<span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.IMethod</span><a id="33335">m</a></span>: <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.IMethod</span><a href="../icode/Members.scala.html#32332">IMethod</a></span>): <span class="typed"><span class="type">Unit</span><a id="2169">Unit</a></span> = <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.IMethod</span><a href="#33335">m</a></span>.<span class="typed"><span class="type">=&gt; DeadCodeElimination.this.global.icodes.Code</span><a href="../icode/Members.scala.html#32867">code</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5795">ne</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>) {
      <span class="typed"><span class="type">(scala.collection.immutable.Map[(DeadCodeElimination.this.global.icodes.BasicBlock, Int),scala.collection.immutable.Set[(DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.Local, DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock, Int)]])Unit</span><a href="#32649">defs</a></span> = <span class="typed"><span class="type">object scala.collection.immutable.HashMap</span><a id="26432">HashMap</a></span>.<span class="typed"><span class="type">scala.collection.immutable.HashMap[(DeadCodeElimination.this.global.icodes.BasicBlock, Int),Nothing]</span><a id="32908">empty</a></span>; <span class="typed"><span class="type">=&gt; scala.collection.mutable.Set[(DeadCodeElimination.this.global.icodes.BasicBlock, Int)]</span><a href="#32651">worklist</a></span>.<span class="typed"><span class="type">()Unit</span><a id="25531">clear</a></span>; <span class="typed"><span class="type">=&gt; scala.collection.mutable.Map[DeadCodeElimination.this.global.icodes.BasicBlock,scala.collection.mutable.BitSet]</span><a href="#32653">useful</a></span>.<span class="typed"><span class="type">()Unit</span><a id="24207">clear</a></span>;
      <span class="typed"><span class="type">=&gt; DeadCodeElimination.this.global.icodes.reachingDefinitions.ReachingDefinitionsAnalysis</span><a href="#32646">rdef</a></span>.<span class="typed"><span class="type">(DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.IMethod)Unit</span><a href="../icode/analysis/ReachingDefinitions.scala.html#32779">init</a></span>(<span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.IMethod</span><a href="#33335">m</a></span>);
      <span class="typed"><span class="type">=&gt; DeadCodeElimination.this.global.icodes.reachingDefinitions.ReachingDefinitionsAnalysis</span><a href="#32646">rdef</a></span>.<span class="typed"><span class="type">=&gt; Unit</span><a href="../icode/analysis/ReachingDefinitions.scala.html#32783">run</a></span>;
     
      <span class="keyword">for</span> (<span class="typed"><span class="type">((DeadCodeElimination.this.global.icodes.BasicBlock) =&gt; Unit)Unit</span><span id="21366"><a id="33355">bb</a></span></span> &lt;- <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.IMethod</span><a href="#33335">m</a></span>.<span class="typed"><span class="type">=&gt; DeadCodeElimination.this.global.icodes.Code</span><a href="../icode/Members.scala.html#32867">code</a></span>.<span class="typed"><span class="type">=&gt; scala.collection.mutable.ListBuffer[DeadCodeElimination.this.global.icodes.BasicBlock]</span><a href="../icode/Members.scala.html#33274">blocks</a></span>.<span class="typed"><span class="type">=&gt; List[DeadCodeElimination.this.global.icodes.BasicBlock]</span><a id="33309">toList</a></span>) {
        <span class="typed"><span class="type">=&gt; scala.collection.mutable.Map[DeadCodeElimination.this.global.icodes.BasicBlock,scala.collection.mutable.BitSet]</span><a href="#32653">useful</a></span>(<span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.BasicBlock</span><a href="#33355">bb</a></span>) = <span class="typed"><span class="type">scala.collection.mutable.BitSet</span><span class="keyword">new</span></span> mutable.<span class="typed"><span class="type">scala.collection.mutable.BitSet</span><a id="19946">BitSet</a></span>(<span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.BasicBlock</span><a href="#33355">bb</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21644">size</a></span>)
        <span class="keyword">var</span> <span class="typed"><span class="type">DeadCode.this.rdef.lattice.Elem</span><a id="33356">rd</a></span> = <span class="typed"><span class="type">=&gt; DeadCodeElimination.this.global.icodes.reachingDefinitions.ReachingDefinitionsAnalysis</span><a href="#32646">rdef</a></span>.<span class="typed"><span class="type">(DeadCode.this.rdef.P)DeadCode.this.rdef.lattice.Elem</span><a href="../icode/analysis/DataFlowAnalysis.scala.html#32744" id="24239">in</a></span>(<span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.BasicBlock</span><a href="#33355">bb</a></span>);
        <span class="keyword">for</span> (<span class="typed"><span class="type">(((DeadCodeElimination.this.global.icodes.Instruction, Int)) =&gt; Unit)Unit</span><span id="21366"><span id="6018"><span id="6013"><span id="821"><a href="#33383" id="21367">Pair</a></span></span></span></span></span>(<span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.Instruction</span><span id="33402"><a id="33412">i</a></span></span>, <span class="typed"><span class="type">Int</span><span id="33403"><a id="33413">idx</a></span></span>) &lt;- <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.BasicBlock</span><a href="#33355">bb</a></span>.<span class="typed"><span class="type">=&gt; List[DeadCodeElimination.this.global.icodes.Instruction]</span><a href="../icode/BasicBlocks.scala.html#33188">toList</a></span>.<span class="typed"><span class="type">=&gt; List[(DeadCodeElimination.this.global.icodes.Instruction, Int)]</span><a id="21388">zipWithIndex</a></span>) {
          <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.Instruction</span><a href="#33412">i</a></span> <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
            <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">LOAD_LOCAL</a>(<span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.Local</span><a id="33429">l</a></span>) =&gt; 
              <span class="typed"><span class="type">(scala.collection.immutable.Map[(DeadCodeElimination.this.global.icodes.BasicBlock, Int),scala.collection.immutable.Set[(DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.Local, DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock, Int)]])Unit</span><a href="#32649">defs</a></span> = <span class="typed"><span class="type">=&gt; scala.collection.immutable.Map[(DeadCodeElimination.this.global.icodes.BasicBlock, Int),scala.collection.immutable.Set[(DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.Local, DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock, Int)]]</span><a href="#32648">defs</a></span> <span class="typed"><span class="type">(((DeadCodeElimination.this.global.icodes.BasicBlock, Int), scala.collection.immutable.Set[(DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.Local, DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock, Int)]))scala.collection.immutable.Map[(DeadCodeElimination.this.global.icodes.BasicBlock, Int),scala.collection.immutable.Set[(DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.Local, DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock, Int)]]</span><a id="32801">+</a></span> <span class="typed"><span class="type">((DeadCodeElimination.this.global.icodes.BasicBlock, Int),scala.collection.immutable.Set[(DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.Local, DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock, Int)])((DeadCodeElimination.this.global.icodes.BasicBlock, Int), scala.collection.immutable.Set[(DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.Local, DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock, Int)])</span><span id="6015"><span id="6013"><a id="821">Pair</a></span></span></span>((<span class="typed"><span class="type">(DeadCodeElimination.this.global.icodes.BasicBlock,Int)(DeadCodeElimination.this.global.icodes.BasicBlock, Int)</span><span id="23625"><a id="1379">(</a></span></span><span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.BasicBlock</span><a href="#33355">bb</a></span>, <span class="typed"><span class="type">Int</span><a href="#33413">idx</a></span>)), <span class="typed"><span class="type">DeadCode.this.rdef.lattice.Elem</span><a href="#33356">rd</a></span>.<span class="typed"><span class="type">=&gt; scala.collection.immutable.Set[(DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.Local, DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock, Int)]</span><a href="../icode/analysis/CompleteLattice.scala.html#33360">vars</a></span>)
<span class="comment">//              Console.println(i + &quot;: &quot; + (bb, idx) + &quot; rd: &quot; + rd + &quot; and having: &quot; + defs)</span>
            <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">RETURN</a>(_) | <a id="1">JUMP</a>(_) | <a id="1">CJUMP</a>(_, _, _, _) | <a id="1">CZJUMP</a>(_, _, _, _) | <a id="1">STORE_FIELD</a>(_, _) |
                 <a id="1">THROW</a>()   | <a id="1">STORE_ARRAY_ITEM</a>(_) | <a id="1">SCOPE_ENTER</a>(_) | <a id="1">SCOPE_EXIT</a>(_) | <a id="1">STORE_THIS</a>(_) |
                 <a id="1">LOAD_EXCEPTION</a>() | <a id="1">SWITCH</a>(_, _) | <a id="1">MONITOR_ENTER</a>() | <a id="1">MONITOR_EXIT</a>() =&gt; <span class="typed"><span class="type">=&gt; scala.collection.mutable.Set[(DeadCodeElimination.this.global.icodes.BasicBlock, Int)]</span><a href="#32651">worklist</a></span> <span class="typed"><span class="type">((DeadCodeElimination.this.global.icodes.BasicBlock, Int))Unit</span><a id="25511">+=</a></span> (<span class="typed"><span class="type">(DeadCodeElimination.this.global.icodes.BasicBlock,Int)(DeadCodeElimination.this.global.icodes.BasicBlock, Int)</span><span id="23625"><a id="1379">(</a></span></span><span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.BasicBlock</span><a href="#33355">bb</a></span>, <span class="typed"><span class="type">Int</span><a href="#33413">idx</a></span>))
            <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">CALL_METHOD</a>(<span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.global.Symbol</span><a id="33738">m1</a></span>, _) <span class="keyword">if</span> <span class="typed"><span class="type">(DeadCodeElimination.this.global.Symbol)Boolean</span><a href="#32674">isSideEffecting</a></span>(<span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.global.Symbol</span><a href="#33738">m1</a></span>) =&gt; <span class="typed"><span class="type">=&gt; scala.collection.mutable.Set[(DeadCodeElimination.this.global.icodes.BasicBlock, Int)]</span><a href="#32651">worklist</a></span> <span class="typed"><span class="type">((DeadCodeElimination.this.global.icodes.BasicBlock, Int))Unit</span><a id="25511">+=</a></span> (<span class="typed"><span class="type">(DeadCodeElimination.this.global.icodes.BasicBlock,Int)(DeadCodeElimination.this.global.icodes.BasicBlock, Int)</span><span id="23625"><a id="1379">(</a></span></span><span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.BasicBlock</span><a href="#33355">bb</a></span>, <span class="typed"><span class="type">Int</span><a href="#33413">idx</a></span>)); <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;marking &quot;)</span><span class="string">&quot;marking &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.global.Symbol</span><a href="#33738">m1</a></span>)
            <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">CALL_METHOD</a>(<span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.global.Symbol</span><a id="33743">m1</a></span>, <a id="1">SuperCall</a>(_)) =&gt; 
              <span class="typed"><span class="type">=&gt; scala.collection.mutable.Set[(DeadCodeElimination.this.global.icodes.BasicBlock, Int)]</span><a href="#32651">worklist</a></span> <span class="typed"><span class="type">((DeadCodeElimination.this.global.icodes.BasicBlock, Int))Unit</span><a id="25511">+=</a></span> (<span class="typed"><span class="type">(DeadCodeElimination.this.global.icodes.BasicBlock,Int)(DeadCodeElimination.this.global.icodes.BasicBlock, Int)</span><span id="23625"><a id="1379">(</a></span></span><span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.BasicBlock</span><a href="#33355">bb</a></span>, <span class="typed"><span class="type">Int</span><a href="#33413">idx</a></span>)) <span class="comment">// super calls to constructor</span>
            <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">DROP</a>(_) =&gt;
              <span class="keyword">val</span> <span class="typed"><span class="type">Boolean</span><a id="33772">necessary</a></span> = <span class="typed"><span class="type">=&gt; DeadCodeElimination.this.global.icodes.reachingDefinitions.ReachingDefinitionsAnalysis</span><a href="#32646">rdef</a></span>.<span class="typed"><span class="type">(DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock,Int,Int)List[(DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock, Int)]</span><a href="../icode/analysis/ReachingDefinitions.scala.html#32790">findDefs</a></span>(<span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.BasicBlock</span><a href="#33355">bb</a></span>, <span class="typed"><span class="type">Int</span><a href="#33413">idx</a></span>, <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>) <span class="typed"><span class="type">(((DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock, Int)) =&gt; Boolean)Boolean</span><a id="21373">exists</a></span> { <span class="typed"><span class="type">(DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock, Int)</span><a id="33783">p</a></span> =&gt;
                <span class="keyword">val</span> <span class="typed"><span class="type">(DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock, Int)</span><span id="23625"><a href="#33787" id="1379">(</a></span></span><span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock</span><span id="33787"><span id="33785"><a href="#33784" id="23614">bb1</a></span></span></span>, <span class="typed"><span class="type">Int</span><span id="33788"><span id="33786"><a href="#33784" id="23616">idx1</a></span></span></span>) = <span class="typed"><span class="type">(DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock, Int)</span><a href="#33783">p</a></span>
                <span class="typed"><span class="type">(Int)DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.Instruction</span><a href="../icode/BasicBlocks.scala.html#33196">bb1</a></span>(<span class="typed"><span class="type">Int</span><a href="#33786">idx1</a></span>) <span class="typed"><span class="type">Boolean</span><span class="keyword">match</span></span> {
                  <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">case</span></span> <a id="1">CALL_METHOD</a>(<span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.global.Symbol</span><a id="33795">m1</a></span>, _) <span class="keyword">if</span> <span class="typed"><span class="type">(DeadCodeElimination.this.global.Symbol)Boolean</span><a href="#32674">isSideEffecting</a></span>(<span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.global.Symbol</span><a href="#33795">m1</a></span>) =&gt; <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>
                  <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">case</span></span> <a id="1">LOAD_EXCEPTION</a>() | <a id="1">DUP</a>(_) | <a id="1">LOAD_MODULE</a>(_) =&gt; <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>
                  <span class="typed"><span class="type">Boolean</span><span class="keyword">case</span></span> _ =&gt; 
                    <span class="typed"><span class="type">=&gt; scala.collection.mutable.Map[(DeadCodeElimination.this.global.icodes.BasicBlock, Int),(DeadCodeElimination.this.global.icodes.BasicBlock, Int)]</span><a href="#32661">dropOf</a></span>(<span class="typed"><span class="type">(DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock,Int)(DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock, Int)</span><span id="23625"><a id="1379">(</a></span></span><span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock</span><a href="#33785">bb1</a></span>, <span class="typed"><span class="type">Int</span><a href="#33786">idx1</a></span>)) = <span class="typed"><span class="type">(DeadCodeElimination.this.global.icodes.BasicBlock,Int)(DeadCodeElimination.this.global.icodes.BasicBlock, Int)</span><span id="23625"><a id="1379">(</a></span></span><span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.BasicBlock</span><a href="#33355">bb</a></span>, <span class="typed"><span class="type">Int</span><a href="#33413">idx</a></span>)
<span class="comment">//                    println(&quot;DROP is innessential: &quot; + i + &quot; because of: &quot; + bb1(idx1) + &quot; at &quot; + bb1 + &quot;:&quot; + idx1) </span>
                    <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>
                }
              }
              <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Boolean</span><a href="#33772">necessary</a></span>) <span class="typed"><span class="type">=&gt; scala.collection.mutable.Set[(DeadCodeElimination.this.global.icodes.BasicBlock, Int)]</span><a href="#32651">worklist</a></span> <span class="typed"><span class="type">((DeadCodeElimination.this.global.icodes.BasicBlock, Int))Unit</span><a id="25511">+=</a></span> (<span class="typed"><span class="type">(DeadCodeElimination.this.global.icodes.BasicBlock,Int)(DeadCodeElimination.this.global.icodes.BasicBlock, Int)</span><span id="23625"><a id="1379">(</a></span></span><span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.BasicBlock</span><a href="#33355">bb</a></span>, <span class="typed"><span class="type">Int</span><a href="#33413">idx</a></span>))
            <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> _ =&gt; <span class="typed"><span class="type">Unit</span><span >(</span></span>)
          }
          <span class="typed"><span class="type">DeadCode.this.rdef.lattice.Elem</span><a href="#33356">rd</a></span> = <span class="typed"><span class="type">=&gt; DeadCodeElimination.this.global.icodes.reachingDefinitions.ReachingDefinitionsAnalysis</span><a href="#32646">rdef</a></span>.<span class="typed"><span class="type">(DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock,Int,DeadCode.this.rdef.lattice.Elem)DeadCode.this.rdef.lattice.Elem</span><a href="../icode/analysis/ReachingDefinitions.scala.html#32788">interpret</a></span>(<span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.BasicBlock</span><a href="#33355">bb</a></span>, <span class="typed"><span class="type">Int</span><a href="#33413">idx</a></span>, <span class="typed"><span class="type">DeadCode.this.rdef.lattice.Elem</span><a href="#33356">rd</a></span>)
        }
      }
    }

    <span class="comment">/** Mark useful instructions. Instructions in the worklist are each inspected and their
     *  dependecies are marked useful too, and added to the worklist.
     */</span>
    <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Unit</span><a id="32665">mark</a></span> {
<span class="comment">//      log(&quot;Starting with worklist: &quot; + worklist)</span>
      <span class="typed"><span class="type">Unit</span><a href="#33835" class="keyword">while</a></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">=&gt; scala.collection.mutable.Set[(DeadCodeElimination.this.global.icodes.BasicBlock, Int)]</span><a href="#32651">worklist</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a id="25544">isEmpty</a></span>) {
        <span class="keyword">val</span> <span class="typed"><span class="type">(DeadCodeElimination.this.global.icodes.BasicBlock, Int)</span><span id="23625"><a href="#33840" id="1379">(</a></span></span><span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.BasicBlock</span><span id="33840"><span id="33837"><a href="#33836" id="23614">bb</a></span></span></span>, <span class="typed"><span class="type">Int</span><span id="33841"><span id="33838"><a href="#33836" id="23616">idx</a></span></span></span>) = <span class="typed"><span class="type">=&gt; scala.collection.mutable.Set[(DeadCodeElimination.this.global.icodes.BasicBlock, Int)]</span><a href="#32651">worklist</a></span>.<span class="typed"><span class="type">=&gt; Iterator[(DeadCodeElimination.this.global.icodes.BasicBlock, Int)]</span><a id="21776">elements</a></span>.<span class="typed"><span class="type">()(DeadCodeElimination.this.global.icodes.BasicBlock, Int)</span><a id="32164">next</a></span>
        <span class="typed"><span class="type">=&gt; scala.collection.mutable.Set[(DeadCodeElimination.this.global.icodes.BasicBlock, Int)]</span><a href="#32651">worklist</a></span> <span class="typed"><span class="type">((DeadCodeElimination.this.global.icodes.BasicBlock, Int))Unit</span><a id="25520">-=</a></span> (<span class="typed"><span class="type">(DeadCodeElimination.this.global.icodes.BasicBlock,Int)(DeadCodeElimination.this.global.icodes.BasicBlock, Int)</span><span id="23625"><a id="1379">(</a></span></span><span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.BasicBlock</span><a href="#33837">bb</a></span>, <span class="typed"><span class="type">Int</span><a href="#33838">idx</a></span>))
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="../../Global.scala.html#21157">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting</span><a href="../../Settings.scala.html#30066">debug</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting#T</span><a href="../../Settings.scala.html#30301">value</a></span>)
          <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;Marking instr: \011BB_&quot;)</span><span class="string">&quot;Marking instr: \tBB_&quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.BasicBlock</span><a href="#33837">bb</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;: &quot;)</span><span class="string">&quot;: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">Int</span><a href="#33838">idx</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot; &quot;)</span><span class="string">&quot; &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">(Int)DeadCodeElimination.this.global.icodes.Instruction</span><a href="../icode/BasicBlocks.scala.html#33196">bb</a></span>(<span class="typed"><span class="type">Int</span><a href="#33838">idx</a></span>))
          
        <span class="keyword">val</span> <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.Instruction</span><a id="33839">instr</a></span> = <span class="typed"><span class="type">(Int)DeadCodeElimination.this.global.icodes.Instruction</span><a href="../icode/BasicBlocks.scala.html#33196">bb</a></span>(<span class="typed"><span class="type">Int</span><a href="#33838">idx</a></span>)
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">(Int)Boolean</span><span id="25543"><a href="#32653" id="24239">useful</a></span></span>(<span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.BasicBlock</span><a href="#33837">bb</a></span>)(<span class="typed"><span class="type">Int</span><a href="#33838">idx</a></span>)) {
          <span class="typed"><span class="type">(DeadCodeElimination.this.global.icodes.BasicBlock)scala.collection.mutable.BitSet</span><a href="#32653" id="24239">useful</a></span>(<span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.BasicBlock</span><a href="#33837">bb</a></span>) <span class="typed"><span class="type">(Int)Unit</span><a id="32844">+=</a></span> <span class="typed"><span class="type">Int</span><a href="#33838">idx</a></span>
          <span class="typed"><span class="type">=&gt; scala.collection.mutable.Map[(DeadCodeElimination.this.global.icodes.BasicBlock, Int),(DeadCodeElimination.this.global.icodes.BasicBlock, Int)]</span><a href="#32661">dropOf</a></span>.<span class="typed"><span class="type">((DeadCodeElimination.this.global.icodes.BasicBlock, Int))Option[(DeadCodeElimination.this.global.icodes.BasicBlock, Int)]</span><span id="24235"><span id="23625"><a id="1379">get</a></span></span></span>(<span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.BasicBlock</span><a href="#33837">bb</a></span>, <span class="typed"><span class="type">Int</span><a href="#33838">idx</a></span>) <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
            <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">Some</a>(<a id="1">(</a><span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.BasicBlock</span><a id="33869">bb1</a></span>, <span class="typed"><span class="type">Int</span><a id="33870">idx1</a></span>)) =&gt; <span class="typed"><span class="type">(DeadCodeElimination.this.global.icodes.BasicBlock)scala.collection.mutable.BitSet</span><a href="#32653" id="24239">useful</a></span>(<span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.BasicBlock</span><a href="#33869">bb1</a></span>) <span class="typed"><span class="type">(Int)Unit</span><a id="32844">+=</a></span> <span class="typed"><span class="type">Int</span><a href="#33870">idx1</a></span>
            <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object None</span><a id="536">None</a></span> =&gt; <span class="typed"><span class="type">Unit</span><span >(</span></span>)
          }
          <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.Instruction</span><a href="#33839">instr</a></span> <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
            <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">LOAD_LOCAL</a>(<span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.Local</span><a id="33876">l1</a></span>) =&gt;
              <span class="keyword">for</span> (<span class="typed"><span class="type">(((DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.Local, DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock, Int)) =&gt; Unit)Unit</span><span id="21792"><a href="#33885" id="31156">(</a></span></span><span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.Local</span><span id="33886"><span id="33892"><span id="33899"><a id="33911">l2</a></span></span></span></span>, <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock</span><span id="33887"><span id="33893"><span id="33900"><a id="33912">bb1</a></span></span></span></span>, <span class="typed"><span class="type">Int</span><span id="33888"><span id="33894"><span id="33901"><a id="33913">idx1</a></span></span></span></span>) &lt;- <span class="typed"><span class="type">((DeadCodeElimination.this.global.icodes.BasicBlock, Int))scala.collection.immutable.Set[(DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.Local, DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock, Int)]</span><a href="#32648" id="24239">defs</a></span>(<span class="typed"><span class="type">(DeadCodeElimination.this.global.icodes.BasicBlock,Int)(DeadCodeElimination.this.global.icodes.BasicBlock, Int)</span><span id="23625"><a id="1379">(</a></span></span><span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.BasicBlock</span><a href="#33837">bb</a></span>, <span class="typed"><span class="type">Int</span><a href="#33838">idx</a></span>)) <span class="keyword">if</span> <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.Local</span><a href="#33876">l1</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.Local</span><a href="#33892">l2</a></span>; <span class="keyword">if</span> <span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">(Int)Boolean</span><span id="25543"><a href="#32653" id="24239">useful</a></span></span>(<span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock</span><a href="#33900">bb1</a></span>)(<span class="typed"><span class="type">Int</span><a href="#33901">idx1</a></span>)) {
                <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;\011Adding &quot;)</span><span class="string">&quot;\tAdding &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">(Int)DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.Instruction</span><a href="../icode/BasicBlocks.scala.html#33196">bb1</a></span>(<span class="typed"><span class="type">Int</span><a href="#33913">idx1</a></span>))
                <span class="typed"><span class="type">=&gt; scala.collection.mutable.Set[(DeadCodeElimination.this.global.icodes.BasicBlock, Int)]</span><a href="#32651">worklist</a></span> <span class="typed"><span class="type">((DeadCodeElimination.this.global.icodes.BasicBlock, Int))Unit</span><a id="25511">+=</a></span> (<span class="typed"><span class="type">(DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock,Int)(DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock, Int)</span><span id="23625"><a id="1379">(</a></span></span><span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock</span><a href="#33912">bb1</a></span>, <span class="typed"><span class="type">Int</span><a href="#33913">idx1</a></span>))
              }
                
            <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.opcodes.NEW</span><a id="33920">nw</a></span> @ <a id="1">NEW</a>(<a id="1">REFERENCE</a>(<span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.global.Symbol</span><a id="33954">sym</a></span>)) =&gt;
              <span class="typed"><span class="type">(Boolean,=&gt; Any)Unit</span><span id="6004"><a id="821">assert</a></span></span>(<span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.opcodes.NEW</span><a href="#33920">nw</a></span>.<span class="typed"><span class="type">=&gt; DeadCodeElimination.this.global.icodes.opcodes.CALL_METHOD</span><a href="../icode/Opcodes.scala.html#33930">init</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5795">ne</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>, <span class="typed"><span class="type">java.lang.String(&quot;null new.init at: &quot;)</span><span class="string">&quot;null new.init at: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.BasicBlock</span><a href="#33837">bb</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;: &quot;)</span><span class="string">&quot;: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">Int</span><a href="#33838">idx</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;(&quot;)</span><span class="string">&quot;(&quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.Instruction</span><a href="#33839">instr</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;)&quot;)</span><span class="string">&quot;)&quot;</span></span>)
              <span class="typed"><span class="type">=&gt; scala.collection.mutable.Set[(DeadCodeElimination.this.global.icodes.BasicBlock, Int)]</span><a href="#32651">worklist</a></span> <span class="typed"><span class="type">((DeadCodeElimination.this.global.icodes.BasicBlock, Int))Unit</span><a id="25511">+=</a></span> <span class="typed"><span class="type">(DeadCodeElimination.this.global.icodes.BasicBlock,DeadCodeElimination.this.global.icodes.Instruction)(DeadCodeElimination.this.global.icodes.BasicBlock, Int)</span><a href="#32671">findInstruction</a></span>(<span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.BasicBlock</span><a href="#33837">bb</a></span>, <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.opcodes.NEW</span><a href="#33920">nw</a></span>.<span class="typed"><span class="type">=&gt; DeadCodeElimination.this.global.icodes.opcodes.CALL_METHOD</span><a href="../icode/Opcodes.scala.html#33930">init</a></span>)
              <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">object DeadCodeElimination.this.global.inliner</span><a href="../../Global.scala.html#21273">inliner</a></span>.<span class="typed"><span class="type">(DeadCodeElimination.this.global.inliner.global.Symbol)Boolean</span><a href="Inliners.scala.html#33976">isClosureClass</a></span>(<span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.global.Symbol</span><a href="#33954">sym</a></span>)) {
                <span class="typed"><span class="type">=&gt; scala.collection.mutable.Set[DeadCodeElimination.this.global.Symbol]</span><a href="#32299">liveClosures</a></span> <span class="typed"><span class="type">(DeadCodeElimination.this.global.Symbol)Unit</span><a id="25511">+=</a></span> <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.global.Symbol</span><a href="#33954">sym</a></span>
              }
            <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">LOAD_EXCEPTION</a>() =&gt;
              <span class="typed"><span class="type">Unit</span><span >(</span></span>)
              
            <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> _ =&gt;
              <span class="keyword">for</span> (<span class="typed"><span class="type">(((DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock, Int)) =&gt; Unit)Unit</span><span id="21366"><a href="#33996" id="21367">(</a></span></span><span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock</span><span id="33997"><span id="34002"><a id="34014">bb1</a></span></span></span>, <span class="typed"><span class="type">Int</span><span id="33998"><span id="34003"><a id="34015">idx1</a></span></span></span>) &lt;- <span class="typed"><span class="type">=&gt; DeadCodeElimination.this.global.icodes.reachingDefinitions.ReachingDefinitionsAnalysis</span><a href="#32646">rdef</a></span>.<span class="typed"><span class="type">(DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock,Int,Int)List[(DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock, Int)]</span><a href="../icode/analysis/ReachingDefinitions.scala.html#32790">findDefs</a></span>(<span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.BasicBlock</span><a href="#33837">bb</a></span>, <span class="typed"><span class="type">Int</span><a href="#33838">idx</a></span>, <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.Instruction</span><a href="#33839">instr</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a href="../icode/Opcodes.scala.html#33388">consumed</a></span>) <span class="keyword">if</span> <span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">(Int)Boolean</span><span id="25543"><a href="#32653" id="24239">useful</a></span></span>(<span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock</span><a href="#34002">bb1</a></span>)(<span class="typed"><span class="type">Int</span><a href="#34003">idx1</a></span>)) {
                <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;\011Adding &quot;)</span><span class="string">&quot;\tAdding &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">(Int)DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.Instruction</span><a href="../icode/BasicBlocks.scala.html#33196">bb1</a></span>(<span class="typed"><span class="type">Int</span><a href="#34015">idx1</a></span>))
                <span class="typed"><span class="type">=&gt; scala.collection.mutable.Set[(DeadCodeElimination.this.global.icodes.BasicBlock, Int)]</span><a href="#32651">worklist</a></span> <span class="typed"><span class="type">((DeadCodeElimination.this.global.icodes.BasicBlock, Int))Unit</span><a id="25511">+=</a></span> (<span class="typed"><span class="type">(DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock,Int)(DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock, Int)</span><span id="23625"><a id="1379">(</a></span></span><span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock</span><a href="#34014">bb1</a></span>, <span class="typed"><span class="type">Int</span><a href="#34015">idx1</a></span>))
              }
          }
        }
      }
    }
    
    <span class="keyword">def</span> <span class="typed"><span class="type">(DeadCodeElimination.this.global.icodes.IMethod)Unit</span><a id="32666">sweep</a></span>(<span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.IMethod</span><a id="33337">m</a></span>: <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.IMethod</span><a href="../icode/Members.scala.html#32332">IMethod</a></span>) {
      <span class="keyword">val</span> <span class="typed"><span class="type">scala.collection.mutable.Map[(DeadCodeElimination.this.global.icodes.BasicBlock, Int),List[DeadCodeElimination.this.global.icodes.Instruction]]</span><a id="34022">compensations</a></span> = <span class="typed"><span class="type">(DeadCodeElimination.this.global.icodes.IMethod)scala.collection.mutable.Map[(DeadCodeElimination.this.global.icodes.BasicBlock, Int),List[DeadCodeElimination.this.global.icodes.Instruction]]</span><a href="#32667">computeCompensations</a></span>(<span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.IMethod</span><a href="#33337">m</a></span>)
      
      <span class="keyword">for</span> (<span class="typed"><span class="type">((DeadCodeElimination.this.global.icodes.BasicBlock) =&gt; Unit)Unit</span><span id="21366"><a id="34027">bb</a></span></span> &lt;- <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.IMethod</span><a href="#33337">m</a></span>.<span class="typed"><span class="type">=&gt; DeadCodeElimination.this.global.icodes.Code</span><a href="../icode/Members.scala.html#32867">code</a></span>.<span class="typed"><span class="type">=&gt; scala.collection.mutable.ListBuffer[DeadCodeElimination.this.global.icodes.BasicBlock]</span><a href="../icode/Members.scala.html#33274">blocks</a></span>.<span class="typed"><span class="type">=&gt; List[DeadCodeElimination.this.global.icodes.BasicBlock]</span><a id="33309">toList</a></span>) {
<span class="comment">//        Console.println(&quot;** Sweeping block &quot; + bb + &quot; **&quot;)</span>
        <span class="keyword">val</span> <span class="typed"><span class="type">List[DeadCodeElimination.this.global.icodes.Instruction]</span><a id="34028">oldInstr</a></span> = <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.BasicBlock</span><a href="#34027">bb</a></span>.<span class="typed"><span class="type">=&gt; List[DeadCodeElimination.this.global.icodes.Instruction]</span><a href="../icode/BasicBlocks.scala.html#33188">toList</a></span>
        <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.BasicBlock</span><a href="#34027">bb</a></span>.<span class="typed"><span class="type">=&gt; Unit</span><a href="../icode/BasicBlocks.scala.html#33209">open</a></span>
        <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.BasicBlock</span><a href="#34027">bb</a></span>.<span class="typed"><span class="type">=&gt; Unit</span><a href="../icode/BasicBlocks.scala.html#33210">clear</a></span>
        <span class="keyword">for</span> (<span class="typed"><span class="type">(((DeadCodeElimination.this.global.icodes.Instruction, Int)) =&gt; Unit)Unit</span><span id="21366"><span id="6018"><span id="6013"><span id="821"><a href="#34033" id="21367">Pair</a></span></span></span></span></span>(<span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.Instruction</span><span id="34039"><a id="34049">i</a></span></span>, <span class="typed"><span class="type">Int</span><span id="34040"><a id="34050">idx</a></span></span>) &lt;- <span class="typed"><span class="type">List[DeadCodeElimination.this.global.icodes.Instruction]</span><a href="#34028">oldInstr</a></span>.<span class="typed"><span class="type">=&gt; List[(DeadCodeElimination.this.global.icodes.Instruction, Int)]</span><a id="21388">zipWithIndex</a></span>) {
          <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">(Int)Boolean</span><span id="25543"><a href="#32653" id="24239">useful</a></span></span>(<span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.BasicBlock</span><a href="#34027">bb</a></span>)(<span class="typed"><span class="type">Int</span><a href="#34050">idx</a></span>)) {
<span class="comment">//            log(&quot; &quot; + i + &quot; is useful&quot;)</span>
            <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.BasicBlock</span><a href="#34027">bb</a></span>.<span class="typed"><span class="type">(DeadCodeElimination.this.global.icodes.Instruction,scala.tools.nsc.util.Position)Unit</span><a href="../icode/BasicBlocks.scala.html#33206">emit</a></span>(<span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.Instruction</span><a href="#34049">i</a></span>, <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.Instruction</span><a href="#34049">i</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.util.Position</span><a href="../icode/Opcodes.scala.html#33393">pos</a></span>)
            <span class="typed"><span class="type">scala.collection.mutable.Map[(DeadCodeElimination.this.global.icodes.BasicBlock, Int),List[DeadCodeElimination.this.global.icodes.Instruction]]</span><a href="#34022">compensations</a></span>.<span class="typed"><span class="type">((DeadCodeElimination.this.global.icodes.BasicBlock, Int))Option[List[DeadCodeElimination.this.global.icodes.Instruction]]</span><span id="24235"><span id="23625"><a id="1379">get</a></span></span></span>(<span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.BasicBlock</span><a href="#34027">bb</a></span>, <span class="typed"><span class="type">Int</span><a href="#34050">idx</a></span>) <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
              <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">Some</a>(<span class="typed"><span class="type">List[DeadCodeElimination.this.global.icodes.Instruction]</span><a id="34077">is</a></span>) =&gt; <span class="typed"><span class="type">List[DeadCodeElimination.this.global.icodes.Instruction]</span><a href="#34077">is</a></span> <span class="typed"><span class="type">((DeadCodeElimination.this.global.icodes.Instruction) =&gt; Unit)Unit</span><a id="21366">foreach</a></span> <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.BasicBlock</span><a href="#34027">bb</a></span>.<span class="typed"><span class="type">(DeadCodeElimination.this.global.icodes.Instruction)Unit</span><a href="../icode/BasicBlocks.scala.html#33205">emit</a></span>
              <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object None</span><a id="536">None</a></span> =&gt; <span class="typed"><span class="type">Unit</span><span >(</span></span>)
            }
            <span class="comment">// check for accessed locals</span>
            <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.Instruction</span><a href="#34049">i</a></span> <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
              <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">LOAD_LOCAL</a>(<span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.Local</span><a id="34083">l</a></span>) <span class="keyword">if</span> <span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.Local</span><a href="#34083">l</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../icode/Members.scala.html#33250">arg</a></span> =&gt; 
                <span class="typed"><span class="type">(List[DeadCodeElimination.this.global.icodes.Local])Unit</span><a href="#32656">accessedLocals</a></span> = <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.Local</span><a href="#34083">l</a></span> <span class="typed"><span class="type">(DeadCodeElimination.this.global.icodes.Local)List[DeadCodeElimination.this.global.icodes.Local]</span><a href="#34084" id="21335">::</a></span> <span class="typed"><span class="type">=&gt; List[DeadCodeElimination.this.global.icodes.Local]</span><a href="#32655">accessedLocals</a></span>
              <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">STORE_LOCAL</a>(<span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.Local</span><a id="34102">l</a></span>) <span class="keyword">if</span> <span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.Local</span><a href="#34102">l</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../icode/Members.scala.html#33250">arg</a></span> =&gt;
                <span class="typed"><span class="type">(List[DeadCodeElimination.this.global.icodes.Local])Unit</span><a href="#32656">accessedLocals</a></span> = <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.Local</span><a href="#34102">l</a></span> <span class="typed"><span class="type">(DeadCodeElimination.this.global.icodes.Local)List[DeadCodeElimination.this.global.icodes.Local]</span><a href="#34103" id="21335">::</a></span> <span class="typed"><span class="type">=&gt; List[DeadCodeElimination.this.global.icodes.Local]</span><a href="#32655">accessedLocals</a></span>
              <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> _ =&gt; <span class="typed"><span class="type">Unit</span><span >(</span></span>)
            }
          } <span class="keyword">else</span> {
            <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.Instruction</span><a href="#34049">i</a></span> <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
              <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">NEW</a>(<a id="1">REFERENCE</a>(<span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.global.Symbol</span><a id="34106">sym</a></span>)) =&gt; 
                <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;skipped object creation: &quot;)</span><span class="string">&quot;skipped object creation: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.global.Symbol</span><a href="#34106">sym</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;inside &quot;)</span><span class="string">&quot;inside &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.IMethod</span><a href="#33337">m</a></span>)
              <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> _ =&gt; <span class="typed"><span class="type">Unit</span><span >(</span></span>)
            }
            <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="../../Global.scala.html#21157">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting</span><a href="../../Settings.scala.html#30066">debug</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting#T</span><a href="../../Settings.scala.html#30301">value</a></span>) <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;Skipped: bb_&quot;)</span><span class="string">&quot;Skipped: bb_&quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.BasicBlock</span><a href="#34027">bb</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;: &quot;)</span><span class="string">&quot;: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">Int</span><a href="#34050">idx</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;( &quot;)</span><span class="string">&quot;( &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.Instruction</span><a href="#34049">i</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;)&quot;)</span><span class="string">&quot;)&quot;</span></span>)
          }
        }

        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.BasicBlock</span><a href="#34027">bb</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21644">size</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3145">&gt;</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>)
          <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.BasicBlock</span><a href="#34027">bb</a></span>.<span class="typed"><span class="type">=&gt; Unit</span><a href="../icode/BasicBlocks.scala.html#33208">close</a></span>
        <span class="keyword">else</span> 
          <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;empty block encountered&quot;)</span><span class="string">&quot;empty block encountered&quot;</span></span>)
      }
    }
    
    <span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(DeadCodeElimination.this.global.icodes.IMethod)scala.collection.mutable.Map[(DeadCodeElimination.this.global.icodes.BasicBlock, Int),List[DeadCodeElimination.this.global.icodes.Instruction]]</span><a id="32667">computeCompensations</a></span>(<span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.IMethod</span><a id="34023">m</a></span>: <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.IMethod</span><a href="../icode/Members.scala.html#32332">IMethod</a></span>): mutable.<span class="typed"><span class="type">scala.collection.mutable.Map[(DeadCodeElimination.this.global.icodes.BasicBlock, Int),List[DeadCodeElimination.this.global.icodes.Instruction]]</span><a id="19880">Map</a></span>[(BasicBlock, Int), List[Instruction]] = {
      <span class="keyword">val</span> <span class="typed"><span class="type">scala.collection.mutable.Map[(DeadCodeElimination.this.global.icodes.BasicBlock, Int),List[DeadCodeElimination.this.global.icodes.Instruction]]</span><a id="34111">compensations</a></span>: mutable.<span class="typed"><span class="type">scala.collection.mutable.Map[(DeadCodeElimination.this.global.icodes.BasicBlock, Int),List[DeadCodeElimination.this.global.icodes.Instruction]]</span><a id="19880">Map</a></span>[(BasicBlock, Int), List[Instruction]] = <span class="typed"><span class="type">scala.collection.mutable.HashMap[(DeadCodeElimination.this.global.icodes.BasicBlock, Int),List[DeadCodeElimination.this.global.icodes.Instruction]]</span><span class="keyword">new</span></span> mutable.<span class="typed"><span class="type">scala.collection.mutable.HashMap[(DeadCodeElimination.this.global.icodes.BasicBlock, Int),List[DeadCodeElimination.this.global.icodes.Instruction]]</span><a id="20081">HashMap</a></span>
      
      <span class="keyword">for</span> (<span class="typed"><span class="type">((DeadCodeElimination.this.global.icodes.BasicBlock) =&gt; Unit)Unit</span><span id="21366"><a id="34117">bb</a></span></span> &lt;- <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.IMethod</span><a href="#34023">m</a></span>.<span class="typed"><span class="type">=&gt; DeadCodeElimination.this.global.icodes.Code</span><a href="../icode/Members.scala.html#32867">code</a></span>.<span class="typed"><span class="type">=&gt; scala.collection.mutable.ListBuffer[DeadCodeElimination.this.global.icodes.BasicBlock]</span><a href="../icode/Members.scala.html#33274">blocks</a></span>.<span class="typed"><span class="type">=&gt; List[DeadCodeElimination.this.global.icodes.BasicBlock]</span><a id="33309">toList</a></span>) {
        <span class="typed"><span class="type">(Boolean,=&gt; Any)Unit</span><span id="6004"><a id="821">assert</a></span></span>(<span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.BasicBlock</span><a href="#34117">bb</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../icode/BasicBlocks.scala.html#33163">closed</a></span>, <span class="typed"><span class="type">java.lang.String(&quot;Open block in computeCompensations&quot;)</span><span class="string">&quot;Open block in computeCompensations&quot;</span></span>)
        <span class="keyword">for</span> (<span class="typed"><span class="type">(((DeadCodeElimination.this.global.icodes.Instruction, Int)) =&gt; Unit)Unit</span><span id="21366"><a href="#34128" id="21367">(</a></span></span><span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.Instruction</span><span id="34129"><a id="34134">i</a></span></span>, <span class="typed"><span class="type">Int</span><span id="34130"><a id="34135">idx</a></span></span>) &lt;- <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.BasicBlock</span><a href="#34117">bb</a></span>.<span class="typed"><span class="type">=&gt; List[DeadCodeElimination.this.global.icodes.Instruction]</span><a href="../icode/BasicBlocks.scala.html#33188">toList</a></span>.<span class="typed"><span class="type">=&gt; List[(DeadCodeElimination.this.global.icodes.Instruction, Int)]</span><a id="21388">zipWithIndex</a></span>) {
          <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">(Int)Boolean</span><span id="25543"><a href="#32653" id="24239">useful</a></span></span>(<span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.BasicBlock</span><a href="#34117">bb</a></span>)(<span class="typed"><span class="type">Int</span><a href="#34135">idx</a></span>)) {
            <span class="keyword">for</span> (<span class="typed"><span class="type">(((DeadCodeElimination.this.global.icodes.TypeKind, Int)) =&gt; Unit)Unit</span><span id="21366"><a href="#34147" id="21367">(</a></span></span><span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.TypeKind</span><span id="34148"><a id="34153">consumedType</a></span></span>, <span class="typed"><span class="type">Int</span><span id="34149"><a id="34154">depth</a></span></span>) &lt;- <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.Instruction</span><a href="#34134">i</a></span>.<span class="typed"><span class="type">=&gt; List[DeadCodeElimination.this.global.icodes.TypeKind]</span><a href="../icode/Opcodes.scala.html#33390">consumedTypes</a></span>.<span class="typed"><span class="type">=&gt; List[DeadCodeElimination.this.global.icodes.TypeKind]</span><a id="21385">reverse</a></span>.<span class="typed"><span class="type">=&gt; List[(DeadCodeElimination.this.global.icodes.TypeKind, Int)]</span><a id="21388">zipWithIndex</a></span>) {
              <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;Finding definitions of: &quot;)</span><span class="string">&quot;Finding definitions of: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.Instruction</span><a href="#34134">i</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;\012\011&quot;)</span><span class="string">&quot;\n\t&quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.TypeKind</span><a href="#34153">consumedType</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot; at depth: &quot;)</span><span class="string">&quot; at depth: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">Int</span><a href="#34154">depth</a></span>)
              <span class="keyword">val</span> <span class="typed"><span class="type">List[(DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock, Int)]</span><a id="34155">defs</a></span> = <span class="typed"><span class="type">=&gt; DeadCodeElimination.this.global.icodes.reachingDefinitions.ReachingDefinitionsAnalysis</span><a href="#32646">rdef</a></span>.<span class="typed"><span class="type">(DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock,Int,Int,Int)List[(DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock, Int)]</span><a href="../icode/analysis/ReachingDefinitions.scala.html#32789">findDefs</a></span>(<span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.BasicBlock</span><a href="#34117">bb</a></span>, <span class="typed"><span class="type">Int</span><a href="#34135">idx</a></span>, <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>, <span class="typed"><span class="type">Int</span><a href="#34154">depth</a></span>)
              <span class="keyword">for</span> (<span class="typed"><span class="type">(((DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock, Int)) =&gt; Unit)Unit</span><span id="21366"><a id="34158">d</a></span></span> &lt;- <span class="typed"><span class="type">List[(DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock, Int)]</span><a href="#34155">defs</a></span>) {
                <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">scala.collection.mutable.Map[(DeadCodeElimination.this.global.icodes.BasicBlock, Int),List[DeadCodeElimination.this.global.icodes.Instruction]]</span><a href="#34111">compensations</a></span>.<span class="typed"><span class="type">((DeadCodeElimination.this.global.icodes.BasicBlock, Int))Boolean</span><a id="24241">isDefinedAt</a></span>(<span class="typed"><span class="type">(DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock, Int)</span><a href="#34158">d</a></span>))
                  <span class="typed"><span class="type">scala.collection.mutable.Map[(DeadCodeElimination.this.global.icodes.BasicBlock, Int),List[DeadCodeElimination.this.global.icodes.Instruction]]</span><a href="#34111">compensations</a></span>(<span class="typed"><span class="type">(DeadCodeElimination.this.global.icodes.reachingDefinitions.global.icodes.BasicBlock, Int)</span><a href="#34158">d</a></span>) = <span class="typed"><span class="type">(DeadCodeElimination.this.global.icodes.opcodes.DROP*)List[DeadCodeElimination.this.global.icodes.opcodes.DROP]</span><span id="21328"><a id="527">List</a></span></span>(<span class="typed"><span class="type">(DeadCodeElimination.this.global.icodes.TypeKind)DeadCodeElimination.this.global.icodes.opcodes.DROP</span><a href="../icode/Opcodes.scala.html#33759">DROP</a></span>(<span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.TypeKind</span><a href="#34153">consumedType</a></span>))
              }
            }
          }
        }
      }
      <span class="typed"><span class="type">scala.collection.mutable.Map[(DeadCodeElimination.this.global.icodes.BasicBlock, Int),List[DeadCodeElimination.this.global.icodes.Instruction]]</span><a href="#34111">compensations</a></span>
    }
    
    <span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">[a](DeadCodeElimination.this.global.icodes.BasicBlock)(=&gt; a)a</span><a id="32668">withClosed</a></span>[<span class="typed"><span class="type">&gt;: Nothing &lt;: Any</span><a id="32670">a</a></span>](<span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.BasicBlock</span><a id="34161">bb</a></span>: <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.BasicBlock</span><a href="../icode/BasicBlocks.scala.html#32337">BasicBlock</a></span>)(<span class="typed"><span class="type">=&gt; a</span><a id="34162">f</a></span>: =&gt; a): <span class="typed"><span class="type">a</span><a href="#32670">a</a></span> = {
      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.BasicBlock</span><a href="#34161">bb</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21644">size</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3145">&gt;</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>) <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.BasicBlock</span><a href="#34161">bb</a></span>.<span class="typed"><span class="type">=&gt; Unit</span><a href="../icode/BasicBlocks.scala.html#33208">close</a></span>
      <span class="keyword">val</span> <span class="typed"><span class="type">a</span><a id="34163">res</a></span> = <span class="typed"><span class="type">=&gt; a</span><a href="#34162">f</a></span>
      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.BasicBlock</span><a href="#34161">bb</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21644">size</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3145">&gt;</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>) <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.BasicBlock</span><a href="#34161">bb</a></span>.<span class="typed"><span class="type">=&gt; Unit</span><a href="../icode/BasicBlocks.scala.html#33209">open</a></span>
      <span class="typed"><span class="type">a</span><a href="#34163">res</a></span>
    }
    
    <span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(DeadCodeElimination.this.global.icodes.BasicBlock,DeadCodeElimination.this.global.icodes.Instruction)(DeadCodeElimination.this.global.icodes.BasicBlock, Int)</span><a id="32671">findInstruction</a></span>(<span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.BasicBlock</span><a id="33963">bb</a></span>: <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.BasicBlock</span><a href="../icode/BasicBlocks.scala.html#32337">BasicBlock</a></span>, <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.Instruction</span><a id="33964">i</a></span>: <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.Instruction</span><a href="../icode/Opcodes.scala.html#32341">Instruction</a></span>): <span class="typed"><span class="type">(DeadCodeElimination.this.global.icodes.BasicBlock, Int)</span><a id="1378">(</a></span>BasicBlock, Int) = {
      <span class="keyword">def</span> <span class="typed"><span class="type">(DeadCodeElimination.this.global.icodes.BasicBlock)Option[(DeadCodeElimination.this.global.icodes.BasicBlock, Int)]</span><a id="34166">find</a></span>(<span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.BasicBlock</span><a id="34167">bb</a></span>: <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.BasicBlock</span><a href="../icode/BasicBlocks.scala.html#32337">BasicBlock</a></span>): <span class="typed"><span class="type">Option[(DeadCodeElimination.this.global.icodes.BasicBlock, Int)]</span><a id="934">Option</a></span>[(BasicBlock, Int)] = {
        <span class="keyword">var</span> <span class="typed"><span class="type">List[DeadCodeElimination.this.global.icodes.Instruction]</span><a id="34168">xs</a></span> = <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.BasicBlock</span><a href="#34167">bb</a></span>.<span class="typed"><span class="type">=&gt; List[DeadCodeElimination.this.global.icodes.Instruction]</span><a href="../icode/BasicBlocks.scala.html#33188">toList</a></span>
        <span class="typed"><span class="type">List[DeadCodeElimination.this.global.icodes.Instruction]</span><a href="#34168">xs</a></span>.<span class="typed"><span class="type">=&gt; List[(DeadCodeElimination.this.global.icodes.Instruction, Int)]</span><a id="21388">zipWithIndex</a></span> <span class="typed"><span class="type">(((DeadCodeElimination.this.global.icodes.Instruction, Int)) =&gt; Boolean)Option[(DeadCodeElimination.this.global.icodes.Instruction, Int)]</span><a id="21374">find</a></span> { <span class="typed"><span class="type">(DeadCodeElimination.this.global.icodes.Instruction, Int)</span><a id="34171">hd</a></span> =&gt; <span class="typed"><span class="type">(DeadCodeElimination.this.global.icodes.Instruction, Int)</span><a href="#34171">hd</a></span>.<span class="typed"><span class="type">=&gt; DeadCodeElimination.this.global.icodes.Instruction</span><a id="23614">_1</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5794">eq</a></span> <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.Instruction</span><a href="#33964">i</a></span> } <span class="typed"><span class="type">Option[(DeadCodeElimination.this.global.icodes.BasicBlock, Int)]</span><span class="keyword">match</span></span> {
          <span class="typed"><span class="type">Some[(DeadCodeElimination.this.global.icodes.BasicBlock, Int)]</span><span class="keyword">case</span></span> <a id="1">Some</a>(<a id="1">(</a>_, <span class="typed"><span class="type">Int</span><a id="34172">idx</a></span>)) =&gt; <span class="typed"><span class="type">((DeadCodeElimination.this.global.icodes.BasicBlock, Int))Some[(DeadCodeElimination.this.global.icodes.BasicBlock, Int)]</span><span id="29737"><span id="308"><span id="23625"><a id="1379">Some</a></span></span></span></span>(<span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.BasicBlock</span><a href="#34167">bb</a></span>, <span class="typed"><span class="type">Int</span><a href="#34172">idx</a></span>)
          <span class="typed"><span class="type">None.type</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object None</span><a id="536">None</a></span> =&gt; <span class="typed"><span class="type">object None</span><a id="536">None</a></span>
        }
      }

      <span class="keyword">for</span> (<span class="typed"><span class="type">((DeadCodeElimination.this.global.icodes.BasicBlock) =&gt; Unit)Unit</span><span id="21366"><a id="34180">b</a></span></span> &lt;- <span class="typed"><span class="type">=&gt; DeadCodeElimination.this.global.icodes.Linearizer</span><a href="../icode/ICodes.scala.html#32308">linearizer</a></span>.<span class="typed"><span class="type">(DeadCodeElimination.this.global.icodes.IMethod,DeadCodeElimination.this.global.icodes.BasicBlock)List[DeadCodeElimination.this.global.icodes.BasicBlock]</span><a href="../icode/Linearizers.scala.html#33333">linearizeAt</a></span>(<span class="typed"><span class="type">=&gt; DeadCodeElimination.this.global.icodes.IMethod</span><a href="#32658">method</a></span>, <span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.BasicBlock</span><a href="#33963">bb</a></span>))
        <span class="typed"><span class="type">(DeadCodeElimination.this.global.icodes.BasicBlock)Option[(DeadCodeElimination.this.global.icodes.BasicBlock, Int)]</span><a href="#34166">find</a></span>(<span class="typed"><span class="type">DeadCodeElimination.this.global.icodes.BasicBlock</span><a href="#34180">b</a></span>) <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
          <span class="typed"><span class="type">Nothing</span><span class="keyword">case</span></span> <a id="1">Some</a>(<span class="typed"><span class="type">(DeadCodeElimination.this.global.icodes.BasicBlock, Int)</span><a id="34181">p</a></span>) =&gt; <span class="typed"><span class="type">Nothing</span><span class="keyword">return</span></span> <span class="typed"><span class="type">(DeadCodeElimination.this.global.icodes.BasicBlock, Int)</span><a href="#34181">p</a></span>
          <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object None</span><a id="536">None</a></span> =&gt; <span class="typed"><span class="type">Unit</span><span >(</span></span>)
        }
      <span class="typed"><span class="type">(String)Nothing</span><a href="../../Global.scala.html#21214">abort</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;could not find init in: &quot;)</span><span class="string">&quot;could not find init in: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">=&gt; DeadCodeElimination.this.global.icodes.IMethod</span><a href="#32658">method</a></span>)
    }

    <span class="keyword">lazy</span> <span class="keyword">val</span> <span class="typed"><span class="type">DeadCodeElimination.this.global.Symbol</span><a id="32673">RuntimePackage</a></span> = <span class="typed"><span class="type">object DeadCodeElimination.this.global.definitions</span><a href="../../symtab/Definitions.scala.html#22259">definitions</a></span>.<span class="typed"><span class="type">(DeadCodeElimination.this.global.Name)DeadCodeElimination.this.global.Symbol</span><a href="../../symtab/Definitions.scala.html#26108">getModule</a></span>(<span class="typed"><span class="type">implicit scala.tools.nsc.symtab.Names.view : (String)DeadCodeElimination.this.global.Name</span><a href="../../symtab/Names.scala.html#21102" class="string">&quot;scala.runtime&quot;</a></span>)
    <span class="comment">/** Is 'sym' a side-effecting method? TODO: proper analysis.  */</span>
    <span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(DeadCodeElimination.this.global.Symbol)Boolean</span><a id="32674">isSideEffecting</a></span>(<span class="typed"><span class="type">DeadCodeElimination.this.global.Symbol</span><a id="33739">sym</a></span>: <span class="typed"><span class="type">DeadCodeElimination.this.global.Symbol</span><a href="../../symtab/Symbols.scala.html#21866">Symbol</a></span>): <span class="typed"><span class="type">Boolean</span><a id="2170">Boolean</a></span> = {
      <span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span>((<span class="typed"><span class="type">DeadCodeElimination.this.global.Symbol</span><a href="#33739">sym</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../../symtab/Symbols.scala.html#25137">isGetter</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">DeadCodeElimination.this.global.Symbol</span><a href="#33739">sym</a></span>.<span class="typed"><span class="type">(Long)Boolean</span><a href="../../symtab/Symbols.scala.html#25223">hasFlag</a></span>(Flags.<span class="typed"><span class="type">Long(2147483648L)</span><span >LAZY</span></span>))
       <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2750">||</a></span> (<span class="typed"><span class="type">DeadCodeElimination.this.global.Symbol</span><a href="#33739">sym</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../../symtab/Symbols.scala.html#25148">isConstructor</a></span> 
           <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span>(<span class="typed"><span class="type">DeadCodeElimination.this.global.Symbol</span><a href="#33739">sym</a></span>.<span class="typed"><span class="type">=&gt; DeadCodeElimination.this.global.Symbol</span><a href="../../symtab/Symbols.scala.html#25211">owner</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">=&gt; DeadCodeElimination.this.global.icodes.IMethod</span><a href="#32658">method</a></span>.<span class="typed"><span class="type">=&gt; DeadCodeElimination.this.global.icodes.global.Symbol</span><a href="../icode/Members.scala.html#32864">symbol</a></span>.<span class="typed"><span class="type">=&gt; DeadCodeElimination.this.global.icodes.global.Symbol</span><a href="../../symtab/Symbols.scala.html#25211">owner</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">=&gt; DeadCodeElimination.this.global.icodes.IMethod</span><a href="#32658">method</a></span>.<span class="typed"><span class="type">=&gt; DeadCodeElimination.this.global.icodes.global.Symbol</span><a href="../icode/Members.scala.html#32864">symbol</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../../symtab/Symbols.scala.html#25148">isConstructor</a></span>) <span class="comment">// a call to another constructor  </span>
           <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">DeadCodeElimination.this.global.Symbol</span><a href="#33739">sym</a></span>.<span class="typed"><span class="type">=&gt; DeadCodeElimination.this.global.Symbol</span><a href="../../symtab/Symbols.scala.html#25211">owner</a></span>.<span class="typed"><span class="type">=&gt; DeadCodeElimination.this.global.Symbol</span><a href="../../symtab/Symbols.scala.html#25211">owner</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">=&gt; DeadCodeElimination.this.global.Symbol</span><a href="#32672">RuntimePackage</a></span>.<span class="typed"><span class="type">=&gt; DeadCodeElimination.this.global.Symbol</span><a href="../../symtab/Symbols.scala.html#25283">moduleClass</a></span>)
       <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2750">||</a></span> (<span class="typed"><span class="type">DeadCodeElimination.this.global.Symbol</span><a href="#33739">sym</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../../symtab/Symbols.scala.html#25148">isConstructor</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">object DeadCodeElimination.this.global.inliner</span><a href="../../Global.scala.html#21273">inliner</a></span>.<span class="typed"><span class="type">(DeadCodeElimination.this.global.inliner.global.Symbol)Boolean</span><a href="Inliners.scala.html#33976">isClosureClass</a></span>(<span class="typed"><span class="type">DeadCodeElimination.this.global.Symbol</span><a href="#33739">sym</a></span>.<span class="typed"><span class="type">=&gt; DeadCodeElimination.this.global.Symbol</span><a href="../../symtab/Symbols.scala.html#25211">owner</a></span>))
<span class="comment">/*       || definitions.isBox(sym)
       || definitions.isUnbox(sym)*/</span>)
    }
  } <span class="comment">/* DeadCode */</span>
}

        </pre>
    </body>
</html>