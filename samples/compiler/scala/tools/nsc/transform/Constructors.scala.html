<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/transform/Constructors.scala</title>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style">
    </head>
    <body onload="initializeLinked()">
        <pre>
<span class="comment">/* NSC -- new Scala compiler
 * Copyright 2005-2009 LAMP/EPFL
 * @author
 */</span>
<span class="comment">// $Id: Constructors.scala 16893 2009-01-13 13:09:22Z cunei $</span>

<span class="keyword">package</span> scala.tools.nsc.transform

<span class="keyword">import</span> scala.collection.mutable.ListBuffer
<span class="keyword">import</span> symtab.Flags._
<span class="keyword">import</span> util.TreeSet

<span class="comment">/** This phase converts classes with parameters into Java-like classes with 
 *  fields, which are assigned to from constructors.
 */</span>  
<span class="keyword">abstract</span> <span class="keyword">class</span> <span class="typed"><span class="type">class Constructors extends scala.tools.nsc.SubComponent with scala.tools.nsc.transform.Transform with ScalaObject</span><a id="12958">Constructors</a></span> <span class="keyword">extends</span> <span class="typed"><span class="type">scala.tools.nsc.transform.Transform</span><a href="Transform.scala.html#13183">Transform</a></span> {
  <span class="keyword">import</span> global._
  <span class="keyword">import</span> definitions._
  <span class="keyword">import</span> posAssigner.atPos

  <span class="comment">/** the following two members override abstract members in Transform */</span>
  <span class="keyword">val</span> <span class="typed"><span class="type">String</span><span id="64036"><a id="64035">phaseName</a></span></span>: <span class="typed"><span class="type">String</span><a id="1861">String</a></span> = <span class="typed"><span class="type">java.lang.String(&quot;constructors&quot;)</span><span class="string">&quot;constructors&quot;</span></span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <span class="typed"><span class="type">(Constructors.this.global.CompilationUnit)Constructors.this.global.Transformer</span><a id="64037">newTransformer</a></span>(<span class="typed"><span class="type">Constructors.this.global.CompilationUnit</span><a id="64040">unit</a></span>: <span class="typed"><span class="type">Constructors.this.global.CompilationUnit</span><a href="../CompilationUnits.scala.html#22571">CompilationUnit</a></span>): <span class="typed"><span class="type">Constructors.this.global.Transformer</span><a href="../ast/Trees.scala.html#22548">Transformer</a></span> =
    <span class="typed"><span class="type">Constructors.this.ConstructorTransformer</span><span class="keyword">new</span></span> <span class="typed"><span class="type">Constructors.this.ConstructorTransformer</span><a href="#64038">ConstructorTransformer</a></span>(<span class="typed"><span class="type">Constructors.this.global.CompilationUnit</span><a href="#64040">unit</a></span>)

  <span class="keyword">class</span> <span class="typed"><span class="type">class ConstructorTransformer extends Constructors.this.global.Transformer with ScalaObject</span><a id="64038">ConstructorTransformer</a></span>(<span class="typed"><span class="type">Constructors.this.global.CompilationUnit</span><span id="64042"><a id="64046">unit</a></span></span>: <span class="typed"><span class="type">Constructors.this.global.CompilationUnit</span><a href="../CompilationUnits.scala.html#22571">CompilationUnit</a></span>) <span class="keyword">extends</span> <span class="typed"><span class="type">Constructors.this.global.Transformer</span><a href="../ast/Trees.scala.html#22548">Transformer</a></span> {

    <span class="keyword">def</span> <span class="typed"><span class="type">(Constructors.this.global.Template)Constructors.this.global.Template</span><a id="64044">transformClassTemplate</a></span>(<span class="typed"><span class="type">Constructors.this.global.Template</span><a id="64049">impl</a></span>: <span class="typed"><span class="type">Constructors.this.global.Template</span><a href="../ast/Trees.scala.html#22430">Template</a></span>): <span class="typed"><span class="type">Constructors.this.global.Template</span><a href="../ast/Trees.scala.html#22430">Template</a></span> = {
      <span class="keyword">val</span> <span class="typed"><span class="type">Constructors.this.global.Symbol</span><a id="64050">clazz</a></span> = <span class="typed"><span class="type">Constructors.this.global.Template</span><a href="#64049">impl</a></span>.<span class="typed"><span class="type">=&gt; Constructors.this.global.Symbol</span><a href="../ast/Trees.scala.html#26908">symbol</a></span>.<span class="typed"><span class="type">=&gt; Constructors.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#25211">owner</a></span>  <span class="comment">// the transformed class</span>
      <span class="keyword">val</span> <span class="typed"><span class="type">List[Constructors.this.global.Tree]</span><a id="64051">stats</a></span> = <span class="typed"><span class="type">Constructors.this.global.Template</span><a href="#64049">impl</a></span>.<span class="typed"><span class="type">=&gt; List[Constructors.this.global.Tree]</span><a href="../ast/Trees.scala.html#26975">body</a></span>          <span class="comment">// the transformed template body</span>
      <span class="keyword">val</span> <span class="typed"><span class="type">Constructors.this.global.analyzer.Typer</span><a id="64052">localTyper</a></span> = <span class="typed"><span class="type">object Constructors.this.global.typer</span><a href="../Global.scala.html#21291">typer</a></span>.<span class="typed"><span class="type">(Constructors.this.global.analyzer.global.Tree,Constructors.this.global.analyzer.global.Symbol)Constructors.this.global.analyzer.Typer</span><a href="../typechecker/Typers.scala.html#31829">atOwner</a></span>(<span class="typed"><span class="type">Constructors.this.global.Template</span><a href="#64049">impl</a></span>, <span class="typed"><span class="type">Constructors.this.global.Symbol</span><a href="#64050">clazz</a></span>) 

      <span class="keyword">var</span> <span class="typed"><span class="type">Constructors.this.global.DefDef</span><a id="64053">constr</a></span>: <span class="typed"><span class="type">Constructors.this.global.DefDef</span><a href="../ast/Trees.scala.html#22405">DefDef</a></span> = <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>      <span class="comment">// The primary constructor</span>
      <span class="keyword">var</span> <span class="typed"><span class="type">List[Constructors.this.global.Symbol]</span><a id="64054">constrParams</a></span>: <span class="typed"><span class="type">List[Constructors.this.global.Symbol]</span><a id="526">List</a></span>[Symbol] = <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span> <span class="comment">// ... and its parameters</span>
      <span class="keyword">var</span> <span class="typed"><span class="type">Constructors.this.global.Block</span><a id="64055">constrBody</a></span>: <span class="typed"><span class="type">Constructors.this.global.Block</span><a href="../ast/Trees.scala.html#22434">Block</a></span> = <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>   <span class="comment">// ... and its body</span>

      <span class="comment">// decompose primary constructor into the three entities above.</span>
      <span class="keyword">for</span> (<span class="typed"><span class="type">((Constructors.this.global.Tree) =&gt; Unit)Unit</span><span id="21366"><a id="64085">stat</a></span></span> &lt;- <span class="typed"><span class="type">List[Constructors.this.global.Tree]</span><a href="#64051">stats</a></span>) {
        <span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="#64085">stat</a></span> <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
          <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Constructors.this.global.DefDef</span><a id="64086">ddef</a></span> @ <a id="1">DefDef</a>(_, _, _, <span class="typed"><span class="type">(List[List[Constructors.this.global.ValDef]])Some[List[List[Constructors.this.global.ValDef]]]</span><span id="21410"><a href="#64088" id="527">List</a></span></span>(<span class="typed"><span class="type">List[Constructors.this.global.ValDef]</span><a id="64091">vparams</a></span>), _, <span class="typed"><span class="type">Constructors.this.global.Block</span><a id="64092">rhs</a></span> @ <a id="1">Block</a>(_, <a id="1">Literal</a>(_))) =&gt;
            <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Constructors.this.global.DefDef</span><a href="#64086">ddef</a></span>.<span class="typed"><span class="type">=&gt; Constructors.this.global.Symbol</span><a href="../ast/Trees.scala.html#26908">symbol</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../symtab/Symbols.scala.html#25187">isPrimaryConstructor</a></span>) {
              <span class="typed"><span class="type">Constructors.this.global.DefDef</span><a href="#64053">constr</a></span> = <span class="typed"><span class="type">Constructors.this.global.DefDef</span><a href="#64086">ddef</a></span>
              <span class="typed"><span class="type">List[Constructors.this.global.Symbol]</span><a href="#64054">constrParams</a></span> = <span class="typed"><span class="type">List[Constructors.this.global.ValDef]</span><a href="#64091">vparams</a></span> <span class="typed"><span class="type">((Constructors.this.global.ValDef) =&gt; Constructors.this.global.Symbol)List[Constructors.this.global.Symbol]</span><a id="21362">map</a></span> (<span class="typed"><span class="type">Constructors.this.global.ValDef</span><a href="#64096">_</a></span>.<span class="typed"><span class="type">=&gt; Constructors.this.global.Symbol</span><a href="../ast/Trees.scala.html#26908">symbol</a></span>)
              <span class="typed"><span class="type">Constructors.this.global.Block</span><a href="#64055">constrBody</a></span> = <span class="typed"><span class="type">Constructors.this.global.Block</span><a href="#64092">rhs</a></span>
            }
          <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> _ =&gt;
        }
      }
      <span class="typed"><span class="type">(Boolean,=&gt; Any)Unit</span><span id="6004"><a id="821">assert</a></span></span>((<span class="typed"><span class="type">Constructors.this.global.DefDef</span><a href="#64053">constr</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5795">ne</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>) <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> (<span class="typed"><span class="type">Constructors.this.global.Block</span><a href="#64055">constrBody</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5795">ne</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>), <span class="typed"><span class="type">Constructors.this.global.Template</span><a href="#64049">impl</a></span>)

      <span class="comment">// The parameter accessor fields which are members of the class</span>
      <span class="keyword">val</span> <span class="typed"><span class="type">List[Constructors.this.global.Symbol]</span><a id="64056">paramAccessors</a></span> = <span class="typed"><span class="type">Constructors.this.global.Symbol</span><a href="#64050">clazz</a></span>.<span class="typed"><span class="type">=&gt; List[Constructors.this.global.Symbol]</span><a href="../symtab/Symbols.scala.html#25265">constrParamAccessors</a></span>

      <span class="comment">// The constructor parameter corresponding to an accessor</span>
      <span class="keyword">def</span> <span class="typed"><span class="type">(Constructors.this.global.Symbol)Constructors.this.global.Symbol</span><a id="64057">parameter</a></span>(<span class="typed"><span class="type">Constructors.this.global.Symbol</span><a id="64104">acc</a></span>: <span class="typed"><span class="type">Constructors.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#21866">Symbol</a></span>): <span class="typed"><span class="type">Constructors.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#21866">Symbol</a></span> = 
        <span class="typed"><span class="type">(Constructors.this.global.Name)Constructors.this.global.Symbol</span><a href="#64058">parameterNamed</a></span>(<span class="typed"><span class="type">object Constructors.this.global.nme</span><a href="../symtab/StdNames.scala.html#22317">nme</a></span>.<span class="typed"><span class="type">(Constructors.this.global.Name)Constructors.this.global.Name</span><a href="../symtab/StdNames.scala.html#30571">getterName</a></span>(<span class="typed"><span class="type">Constructors.this.global.Symbol</span><a href="#64104">acc</a></span>.<span class="typed"><span class="type">=&gt; Constructors.this.global.Name</span><a href="../symtab/Symbols.scala.html#25217">originalName</a></span>))

      <span class="comment">// The constructor parameter with given name. This means the parameter</span>
      <span class="comment">// has given name, or starts with given name, and continues with a `$' afterwards.</span>
      <span class="keyword">def</span> <span class="typed"><span class="type">(Constructors.this.global.Name)Constructors.this.global.Symbol</span><a id="64058">parameterNamed</a></span>(<span class="typed"><span class="type">Constructors.this.global.Name</span><a id="64105">name</a></span>: <span class="typed"><span class="type">Constructors.this.global.Name</span><a href="../symtab/Names.scala.html#21103">Name</a></span>): <span class="typed"><span class="type">Constructors.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#21866">Symbol</a></span> = {
        <span class="keyword">def</span> <span class="typed"><span class="type">(Constructors.this.global.Symbol)Boolean</span><a id="64106">matchesName</a></span>(<span class="typed"><span class="type">Constructors.this.global.Symbol</span><a id="64108">param</a></span>: <span class="typed"><span class="type">Constructors.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#21866">Symbol</a></span>) = 
          <span class="typed"><span class="type">Constructors.this.global.Symbol</span><a href="#64108">param</a></span>.<span class="typed"><span class="type">=&gt; Constructors.this.global.Name</span><a href="../symtab/Symbols.scala.html#25215">name</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">Constructors.this.global.Name</span><a href="#64105">name</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2750">||</a></span>
          <span class="typed"><span class="type">Constructors.this.global.Symbol</span><a href="#64108">param</a></span>.<span class="typed"><span class="type">=&gt; Constructors.this.global.Name</span><a href="../symtab/Symbols.scala.html#25215">name</a></span>.<span class="typed"><span class="type">(Constructors.this.global.Name)Boolean</span><a href="../symtab/Names.scala.html#23910">startsWith</a></span>(<span class="typed"><span class="type">Constructors.this.global.Name</span><a href="#64105">name</a></span>) <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">Constructors.this.global.Symbol</span><a href="#64108">param</a></span>.<span class="typed"><span class="type">(Int)Char</span><a href="../symtab/Names.scala.html#23901">name</a></span>(<span class="typed"><span class="type">Constructors.this.global.Name</span><a href="#64105">name</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a href="../symtab/Names.scala.html#23890">length</a></span>) <span class="typed"><span class="type">(Char)Boolean</span><a id="3018">==</a></span> <span class="typed"><span class="type">Char('$')</span><span class="char">'$'</span></span>
        <span class="keyword">val</span> <span class="typed"><span class="type">List[Constructors.this.global.Symbol]</span><a id="64107">ps</a></span> = <span class="typed"><span class="type">List[Constructors.this.global.Symbol]</span><a href="#64054">constrParams</a></span> <span class="typed"><span class="type">((Constructors.this.global.Symbol) =&gt; Boolean)List[Constructors.this.global.Symbol]</span><a id="21367">filter</a></span> <span class="typed"><span class="type">(Constructors.this.global.Symbol)Boolean</span><a href="#64106">matchesName</a></span>
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">List[Constructors.this.global.Symbol]</span><a href="#64107">ps</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a id="21645">isEmpty</a></span>) <span class="typed"><span class="type">(Boolean,=&gt; Any)Unit</span><span id="6004"><a id="821">assert</a></span></span>(<span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>, <span class="typed"><span class="type">java.lang.String(&quot;&quot;)</span><span class="string">&quot;&quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">Constructors.this.global.Name</span><a href="#64105">name</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot; not in &quot;)</span><span class="string">&quot; not in &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">List[Constructors.this.global.Symbol]</span><a href="#64054">constrParams</a></span>)
        <span class="typed"><span class="type">List[Constructors.this.global.Symbol]</span><a href="#64107">ps</a></span>.<span class="typed"><span class="type">=&gt; Constructors.this.global.Symbol</span><a id="21332">head</a></span>
      }

      <span class="keyword">var</span> <span class="typed"><span class="type">Boolean</span><a id="64059">thisRefSeen</a></span>: <span class="typed"><span class="type">Boolean</span><a id="2170">Boolean</a></span> = <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>

      <span class="comment">// A transformer for expressions that go into the constructor</span>
      <span class="keyword">val</span> <span class="typed"><span class="type">Constructors.this.global.Transformer</span><a id="64060">intoConstructorTransformer</a></span> = <span class="typed"><span class="type">template $anon extends Constructors.this.global.Transformer</span><a id="64128" class="keyword">new</a></span> <span class="typed"><span class="type">Constructors.this.global.Transformer</span><a href="../ast/Trees.scala.html#22548">Transformer</a></span> {
        <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">(Constructors.this.global.Tree)Constructors.this.global.Tree</span><a id="64130">transform</a></span>(<span class="typed"><span class="type">Constructors.this.global.Tree</span><a id="64132">tree</a></span>: <span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="../ast/Trees.scala.html#22371">Tree</a></span>): <span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="../ast/Trees.scala.html#22371">Tree</a></span> = <span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="#64132">tree</a></span> <span class="typed"><span class="type">Constructors.this.global.Tree</span><span class="keyword">match</span></span> {
          <span class="typed"><span class="type">Constructors.this.global.Tree</span><span class="keyword">case</span></span> <a id="1">Apply</a>(<a id="1">Select</a>(<a id="1">This</a>(_), _), <span class="typed"><span class="type">(List[Constructors.this.global.Tree])Some[List[Constructors.this.global.Tree]]</span><span id="21410"><a href="#64135" id="527">List</a></span></span>()) =&gt;
            <span class="comment">// references to parameter accessor methods of own class become references to parameters</span>
            <span class="comment">// outer accessors become references to $outer parameter </span>
            <span class="typed"><span class="type">Constructors.this.global.Tree</span><span class="keyword">if</span></span> ((<span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="#64132">tree</a></span>.<span class="typed"><span class="type">=&gt; Constructors.this.global.Symbol</span><a href="../ast/Trees.scala.html#25358">symbol</a></span> <span class="typed"><span class="type">(Long)Boolean</span><a href="../symtab/Symbols.scala.html#25223">hasFlag</a></span> <span class="typed"><span class="type">Long(536870912L)</span><span >PARAMACCESSOR</span></span>) <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="#64132">tree</a></span>.<span class="typed"><span class="type">=&gt; Constructors.this.global.Symbol</span><a href="../ast/Trees.scala.html#25358">symbol</a></span>.<span class="typed"><span class="type">=&gt; Constructors.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#25211">owner</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">Constructors.this.global.Symbol</span><a href="#64050">clazz</a></span>)
              <span class="typed"><span class="type">object Constructors.this.global.gen</span><a href="../Global.scala.html#21170">gen</a></span>.<span class="typed"><span class="type">(Constructors.this.global.gen.global.Symbol)Constructors.this.global.gen.global.Tree</span><a href="../ast/TreeGen.scala.html#27610">mkAttributedIdent</a></span>(<span class="typed"><span class="type">(Constructors.this.global.Symbol)Constructors.this.global.Symbol</span><a href="#64057">parameter</a></span>(<span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="#64132">tree</a></span>.<span class="typed"><span class="type">=&gt; Constructors.this.global.Symbol</span><a href="../ast/Trees.scala.html#25358">symbol</a></span>.<span class="typed"><span class="type">=&gt; Constructors.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#25266">accessed</a></span>)) <span class="typed"><span class="type">(scala.tools.nsc.util.Position)Constructors.this.global.gen.global.Tree</span><a href="../ast/Trees.scala.html#25356">setPos</a></span> <span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="#64132">tree</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.util.Position</span><a href="../ast/Trees.scala.html#25352">pos</a></span>
            <span class="keyword">else</span> <span class="typed"><span class="type">Constructors.this.global.Tree</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="#64132">tree</a></span>.<span class="typed"><span class="type">=&gt; Constructors.this.global.Symbol</span><a href="../ast/Trees.scala.html#25358">symbol</a></span>.<span class="typed"><span class="type">=&gt; Constructors.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#25271">outerSource</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">Constructors.this.global.Symbol</span><a href="#64050">clazz</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">Constructors.this.global.Symbol</span><a href="#64050">clazz</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../symtab/Symbols.scala.html#25189">isImplClass</a></span>)
              <span class="typed"><span class="type">object Constructors.this.global.gen</span><a href="../Global.scala.html#21170">gen</a></span>.<span class="typed"><span class="type">(Constructors.this.global.gen.global.Symbol)Constructors.this.global.gen.global.Tree</span><a href="../ast/TreeGen.scala.html#27610">mkAttributedIdent</a></span>(<span class="typed"><span class="type">(Constructors.this.global.Name)Constructors.this.global.Symbol</span><a href="#64058">parameterNamed</a></span>(<span class="typed"><span class="type">object Constructors.this.global.nme</span><a href="../symtab/StdNames.scala.html#22317">nme</a></span>.<span class="typed"><span class="type">=&gt; Constructors.this.global.Name</span><a href="../symtab/StdNames.scala.html#30456">OUTER</a></span>)) <span class="typed"><span class="type">(scala.tools.nsc.util.Position)Constructors.this.global.gen.global.Tree</span><a href="../ast/Trees.scala.html#25356">setPos</a></span> <span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="#64132">tree</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.util.Position</span><a href="../ast/Trees.scala.html#25352">pos</a></span>
            <span class="keyword">else</span> 
              <span class="keyword">super</span>.<span class="typed"><span class="type">(Constructors.this.global.Tree)Constructors.this.global.Tree</span><a href="../ast/Trees.scala.html#43096">transform</a></span>(<span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="#64132">tree</a></span>)
          <span class="typed"><span class="type">Constructors.this.global.gen.global.Tree</span><span class="keyword">case</span></span> <a id="1">Select</a>(<a id="1">This</a>(_), _)
          <span class="keyword">if</span> ((<span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="#64132">tree</a></span>.<span class="typed"><span class="type">=&gt; Constructors.this.global.Symbol</span><a href="../ast/Trees.scala.html#25358">symbol</a></span> <span class="typed"><span class="type">(Long)Boolean</span><a href="../symtab/Symbols.scala.html#25223">hasFlag</a></span> <span class="typed"><span class="type">Long(536870912L)</span><span >PARAMACCESSOR</span></span>) <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="#64132">tree</a></span>.<span class="typed"><span class="type">=&gt; Constructors.this.global.Symbol</span><a href="../ast/Trees.scala.html#25358">symbol</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../symtab/Symbols.scala.html#25138">isSetter</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="#64132">tree</a></span>.<span class="typed"><span class="type">=&gt; Constructors.this.global.Symbol</span><a href="../ast/Trees.scala.html#25358">symbol</a></span>.<span class="typed"><span class="type">=&gt; Constructors.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#25211">owner</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">Constructors.this.global.Symbol</span><a href="#64050">clazz</a></span>) =&gt;
            <span class="comment">// references to parameter accessor field of own class become references to parameters</span>
            <span class="typed"><span class="type">object Constructors.this.global.gen</span><a href="../Global.scala.html#21170">gen</a></span>.<span class="typed"><span class="type">(Constructors.this.global.gen.global.Symbol)Constructors.this.global.gen.global.Tree</span><a href="../ast/TreeGen.scala.html#27610">mkAttributedIdent</a></span>(<span class="typed"><span class="type">(Constructors.this.global.Symbol)Constructors.this.global.Symbol</span><a href="#64057">parameter</a></span>(<span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="#64132">tree</a></span>.<span class="typed"><span class="type">=&gt; Constructors.this.global.Symbol</span><a href="../ast/Trees.scala.html#25358">symbol</a></span>)) <span class="typed"><span class="type">(scala.tools.nsc.util.Position)Constructors.this.global.gen.global.Tree</span><a href="../ast/Trees.scala.html#25356">setPos</a></span> <span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="#64132">tree</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.util.Position</span><a href="../ast/Trees.scala.html#25352">pos</a></span>
          <span class="typed"><span class="type">Constructors.this.global.Tree</span><span class="keyword">case</span></span> <a id="1">Select</a>(_, _) =&gt;
            <span class="typed"><span class="type">Boolean</span><a href="#64059">thisRefSeen</a></span> = <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>
            <span class="keyword">super</span>.<span class="typed"><span class="type">(Constructors.this.global.Tree)Constructors.this.global.Tree</span><a href="../ast/Trees.scala.html#43096">transform</a></span>(<span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="#64132">tree</a></span>)
          <span class="typed"><span class="type">Constructors.this.global.Tree</span><span class="keyword">case</span></span> <a id="1">This</a>(_) =&gt;
            <span class="typed"><span class="type">Boolean</span><a href="#64059">thisRefSeen</a></span> = <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>
            <span class="keyword">super</span>.<span class="typed"><span class="type">(Constructors.this.global.Tree)Constructors.this.global.Tree</span><a href="../ast/Trees.scala.html#43096">transform</a></span>(<span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="#64132">tree</a></span>)
          <span class="typed"><span class="type">Constructors.this.global.Tree</span><span class="keyword">case</span></span> <a id="1">Super</a>(_, _) =&gt;
            <span class="typed"><span class="type">Boolean</span><a href="#64059">thisRefSeen</a></span> = <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>
            <span class="keyword">super</span>.<span class="typed"><span class="type">(Constructors.this.global.Tree)Constructors.this.global.Tree</span><a href="../ast/Trees.scala.html#43096">transform</a></span>(<span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="#64132">tree</a></span>)
          <span class="typed"><span class="type">Constructors.this.global.Tree</span><span class="keyword">case</span></span> _ =&gt;
            <span class="keyword">super</span>.<span class="typed"><span class="type">(Constructors.this.global.Tree)Constructors.this.global.Tree</span><a href="../ast/Trees.scala.html#43096">transform</a></span>(<span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="#64132">tree</a></span>)
        }
      }

      <span class="comment">// Move tree into constructor, take care of changing owner from `oldowner' to constructor symbol</span>
      <span class="keyword">def</span> <span class="typed"><span class="type">(Constructors.this.global.Symbol,Constructors.this.global.Tree)Constructors.this.global.Tree</span><a id="64061">intoConstructor</a></span>(<span class="typed"><span class="type">Constructors.this.global.Symbol</span><a id="64163">oldowner</a></span>: <span class="typed"><span class="type">Constructors.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#21866">Symbol</a></span>, <span class="typed"><span class="type">Constructors.this.global.Tree</span><a id="64164">tree</a></span>: <span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="../ast/Trees.scala.html#22371">Tree</a></span>) =
        <span class="typed"><span class="type">Constructors.this.global.Transformer</span><a href="#64060">intoConstructorTransformer</a></span>.<span class="typed"><span class="type">(Constructors.this.global.Tree)Constructors.this.global.Tree</span><a href="../ast/Trees.scala.html#43096">transform</a></span>(
          <span class="typed"><span class="type">(Constructors.this.global.Tree)Constructors.this.global.Tree</span><a href="../ast/Trees.scala.html#28563" class="keyword">new</a></span> <span class="typed"><span class="type">Constructors.this.global.ChangeOwnerTraverser</span><a href="../ast/Trees.scala.html#22555">ChangeOwnerTraverser</a></span>(<span class="typed"><span class="type">Constructors.this.global.Symbol</span><a href="#64163">oldowner</a></span>, <span class="typed"><span class="type">Constructors.this.global.DefDef</span><a href="#64053">constr</a></span>.<span class="typed"><span class="type">=&gt; Constructors.this.global.Symbol</span><a href="../ast/Trees.scala.html#26908">symbol</a></span>)(<span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="#64164">tree</a></span>))

      <span class="comment">// Should tree be moved in front of super constructor call?</span>
      <span class="keyword">def</span> <span class="typed"><span class="type">(Constructors.this.global.Tree)Boolean</span><a id="64062">canBeMoved</a></span>(<span class="typed"><span class="type">Constructors.this.global.Tree</span><a id="64168">tree</a></span>: <span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="../ast/Trees.scala.html#22371">Tree</a></span>) = <span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="#64168">tree</a></span> <span class="typed"><span class="type">Boolean</span><span class="keyword">match</span></span> {
        <span class="comment">//todo: eliminate thisRefSeen</span>
        <span class="typed"><span class="type">Boolean</span><span class="keyword">case</span></span> <a id="1">ValDef</a>(<span class="typed"><span class="type">Constructors.this.global.Modifiers</span><a id="64170">mods</a></span>, _, _, _) =&gt; 
          <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="../Global.scala.html#21157">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting</span><a href="../Settings.scala.html#30050">Xwarninit</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting#T</span><a href="../Settings.scala.html#30301">value</a></span>)
            <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span>(<span class="typed"><span class="type">Constructors.this.global.Modifiers</span><a href="#64170">mods</a></span> <span class="typed"><span class="type">(Long)Boolean</span><a href="../ast/Trees.scala.html#42017">hasFlag</a></span> PRESUPER <span class="typed"><span class="type">Long(137975824384L)</span><span >|</span></span> PARAMACCESSOR) <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">Boolean</span><a href="#64059">thisRefSeen</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span>
                { <span class="keyword">val</span> <span class="typed"><span class="type">Constructors.this.global.Symbol</span><a id="64174">g</a></span> = <span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="#64168">tree</a></span>.<span class="typed"><span class="type">=&gt; Constructors.this.global.Symbol</span><a href="../ast/Trees.scala.html#25358">symbol</a></span>.<span class="typed"><span class="type">(Constructors.this.global.Symbol)Constructors.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#25291">getter</a></span>(<span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="#64168">tree</a></span>.<span class="typed"><span class="type">=&gt; Constructors.this.global.Symbol</span><a href="../ast/Trees.scala.html#25358">symbol</a></span>.<span class="typed"><span class="type">=&gt; Constructors.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#25211">owner</a></span>);
                 <span class="typed"><span class="type">Constructors.this.global.Symbol</span><a href="#64174">g</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5793">!=</a></span> <span class="typed"><span class="type">object Constructors.this.global.NoSymbol</span><a href="../symtab/Symbols.scala.html#21873">NoSymbol</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">Constructors.this.global.Symbol</span><a href="#64174">g</a></span>.<span class="typed"><span class="type">=&gt; List[Constructors.this.global.Symbol]</span><a href="../symtab/Symbols.scala.html#25288">allOverriddenSymbols</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a id="21645">isEmpty</a></span> 
               })
              <span class="typed"><span class="type">Constructors.this.global.CompilationUnit</span><a href="#64042">unit</a></span>.<span class="typed"><span class="type">(scala.tools.nsc.util.Position,String)Unit</span><a href="../CompilationUnits.scala.html#24151">warning</a></span>(<span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="#64168">tree</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.util.Position</span><a href="../ast/Trees.scala.html#25352">pos</a></span>, <span class="typed"><span class="type">java.lang.String(&quot;the semantics of this definition has changed;\012the initialization is no longer be executed before the superclass is called&quot;)</span><span class="string">&quot;the semantics of this definition has changed;\nthe initialization is no longer be executed before the superclass is called&quot;</span></span>)
          (<span class="typed"><span class="type">Constructors.this.global.Modifiers</span><a href="#64170">mods</a></span> <span class="typed"><span class="type">(Long)Boolean</span><a href="../ast/Trees.scala.html#42017">hasFlag</a></span> PRESUPER <span class="typed"><span class="type">Long(137975824384L)</span><span >|</span></span> PARAMACCESSOR)<span class="comment">// || !thisRefSeen &amp;&amp; (!settings.future.value &amp;&amp; !settings.checkInit.value)</span>
        <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">case</span></span> _ =&gt; <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>
      }

      <span class="comment">// Create an assignment to class field `to' with rhs `from'</span>
      <span class="keyword">def</span> <span class="typed"><span class="type">(Constructors.this.global.Symbol,Constructors.this.global.Tree)Constructors.this.global.Tree</span><a id="64063">mkAssign</a></span>(<span class="typed"><span class="type">Constructors.this.global.Symbol</span><a id="64178">to</a></span>: <span class="typed"><span class="type">Constructors.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#21866">Symbol</a></span>, <span class="typed"><span class="type">Constructors.this.global.Tree</span><a id="64179">from</a></span>: <span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="../ast/Trees.scala.html#22371">Tree</a></span>): <span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="../ast/Trees.scala.html#22371">Tree</a></span> =
        <span class="typed"><span class="type">Constructors.this.global.analyzer.Typer</span><a href="#64052">localTyper</a></span>.<span class="typed"><span class="type">(Constructors.this.global.analyzer.global.Tree)Constructors.this.global.analyzer.global.Tree</span><a href="../typechecker/Typers.scala.html#31830">typed</a></span> {
          <span class="typed"><span class="type">(scala.tools.nsc.util.Position)(Constructors.this.global.Assign)Constructors.this.global.Assign</span><a href="../ast/Trees.scala.html#28572">atPos</a></span>(<span class="typed"><span class="type">Constructors.this.global.Symbol</span><a href="#64178">to</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.util.Position</span><a href="../symtab/Symbols.scala.html#25087">pos</a></span>) {
            <span class="typed"><span class="type">(Constructors.this.global.Tree,Constructors.this.global.Tree)Constructors.this.global.Assign</span><a href="../ast/Trees.scala.html#42698">Assign</a></span>(<span class="typed"><span class="type">(Constructors.this.global.Tree,Constructors.this.global.Symbol)Constructors.this.global.Select</span><a href="../ast/Trees.scala.html#22509">Select</a></span>(<span class="typed"><span class="type">(Constructors.this.global.Symbol)Constructors.this.global.Tree</span><a href="../ast/Trees.scala.html#22505">This</a></span>(<span class="typed"><span class="type">Constructors.this.global.Symbol</span><a href="#64050">clazz</a></span>), <span class="typed"><span class="type">Constructors.this.global.Symbol</span><a href="#64178">to</a></span>), <span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="#64179">from</a></span>)
          }
        }

      <span class="comment">// Create code to copy parameter to parameter accessor field. </span>
      <span class="comment">// If parameter is $outer, check that it is not null.</span>
      <span class="keyword">def</span> <span class="typed"><span class="type">(Constructors.this.global.Symbol,Constructors.this.global.Symbol)Constructors.this.global.Tree</span><a id="64064">copyParam</a></span>(<span class="typed"><span class="type">Constructors.this.global.Symbol</span><a id="64185">to</a></span>: <span class="typed"><span class="type">Constructors.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#21866">Symbol</a></span>, <span class="typed"><span class="type">Constructors.this.global.Symbol</span><a id="64186">from</a></span>: <span class="typed"><span class="type">Constructors.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#21866">Symbol</a></span>): <span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="../ast/Trees.scala.html#22371">Tree</a></span> = {
        <span class="keyword">var</span> <span class="typed"><span class="type">Constructors.this.global.Tree</span><a id="64187">result</a></span> = <span class="typed"><span class="type">(Constructors.this.global.Symbol,Constructors.this.global.Tree)Constructors.this.global.Tree</span><a href="#64063">mkAssign</a></span>(<span class="typed"><span class="type">Constructors.this.global.Symbol</span><a href="#64185">to</a></span>, <span class="typed"><span class="type">(Constructors.this.global.Symbol)Constructors.this.global.Ident</span><a href="../ast/Trees.scala.html#22514">Ident</a></span>(<span class="typed"><span class="type">Constructors.this.global.Symbol</span><a href="#64186">from</a></span>))
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Constructors.this.global.Symbol</span><a href="#64186">from</a></span>.<span class="typed"><span class="type">=&gt; Constructors.this.global.Name</span><a href="../symtab/Symbols.scala.html#25215">name</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">object Constructors.this.global.nme</span><a href="../symtab/StdNames.scala.html#22317">nme</a></span>.<span class="typed"><span class="type">=&gt; Constructors.this.global.Name</span><a href="../symtab/StdNames.scala.html#30456">OUTER</a></span>)
          <span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="#64187">result</a></span> =
            <span class="typed"><span class="type">(scala.tools.nsc.util.Position)(Constructors.this.global.analyzer.global.Tree)Constructors.this.global.analyzer.global.Tree</span><a href="../ast/Trees.scala.html#28572">atPos</a></span>(<span class="typed"><span class="type">Constructors.this.global.Symbol</span><a href="#64185">to</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.util.Position</span><a href="../symtab/Symbols.scala.html#25087">pos</a></span>) {
              <span class="typed"><span class="type">Constructors.this.global.analyzer.Typer</span><a href="#64052">localTyper</a></span>.<span class="typed"><span class="type">(Constructors.this.global.analyzer.global.Tree)Constructors.this.global.analyzer.global.Tree</span><a href="../typechecker/Typers.scala.html#31830">typed</a></span> {
                <span class="typed"><span class="type">(Constructors.this.global.Tree,Constructors.this.global.Tree,Constructors.this.global.Tree)Constructors.this.global.If</span><a href="../ast/Trees.scala.html#42677">If</a></span>(
                  <span class="typed"><span class="type">(Constructors.this.global.Tree,List[Constructors.this.global.Tree])Constructors.this.global.Apply</span><a href="../ast/Trees.scala.html#31199">Apply</a></span>(
                    <span class="typed"><span class="type">(Constructors.this.global.Tree,Constructors.this.global.Name)Constructors.this.global.Select</span><a href="../ast/Trees.scala.html#31358">Select</a></span>(<span class="typed"><span class="type">(Constructors.this.global.Symbol)Constructors.this.global.Ident</span><a href="../ast/Trees.scala.html#22514">Ident</a></span>(<span class="typed"><span class="type">Constructors.this.global.Symbol</span><a href="#64186">from</a></span>), <span class="typed"><span class="type">object Constructors.this.global.nme</span><a href="../symtab/StdNames.scala.html#22317">nme</a></span>.<span class="typed"><span class="type">=&gt; Constructors.this.global.Name</span><a href="../symtab/StdNames.scala.html#30808">eq</a></span>), 
                    <span class="typed"><span class="type">(Constructors.this.global.Literal*)List[Constructors.this.global.Literal]</span><span id="21328"><a id="527">List</a></span></span>(<span class="typed"><span class="type">(Constructors.this.global.Constant)Constructors.this.global.Literal</span><a href="../ast/Trees.scala.html#43688">Literal</a></span>(<span class="typed"><span class="type">(Any)Constructors.this.global.Constant</span><a href="../symtab/Constants.scala.html#50347">Constant</a></span>(<span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>)))),
                  <span class="typed"><span class="type">(Constructors.this.global.Tree)Constructors.this.global.Throw</span><a href="../ast/Trees.scala.html#42736">Throw</a></span>(<span class="typed"><span class="type">(Constructors.this.global.Tree,List[List[Constructors.this.global.Tree]])Constructors.this.global.Tree</span><a href="../ast/Trees.scala.html#22484">New</a></span>(<span class="typed"><span class="type">(Constructors.this.global.Type)Constructors.this.global.TypeTree</span><a href="../ast/Trees.scala.html#22522">TypeTree</a></span>(<span class="typed"><span class="type">=&gt; Constructors.this.global.Symbol</span><a href="../symtab/Definitions.scala.html#25806">NullPointerExceptionClass</a></span>.<span class="typed"><span class="type">=&gt; Constructors.this.global.Type</span><a href="../symtab/Symbols.scala.html#25230">tpe</a></span>), <span class="typed"><span class="type">(List[Nothing]*)List[List[Nothing]]</span><span id="21328"><a id="527">List</a></span></span>(<span class="typed"><span class="type">object Nil</span><a id="335">List</a></span>()))),
                  <span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="#64187">result</a></span>)
              }
            }
        <span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="#64187">result</a></span>
      }

      <span class="comment">// The list of definitions that go into class</span>
      <span class="keyword">val</span> <span class="typed"><span class="type">scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]</span><a id="64065">defBuf</a></span> = <span class="typed"><span class="type">scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]</span><span class="keyword">new</span></span> <span class="typed"><span class="type">scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]</span><a id="19925">ListBuffer</a></span>[Tree]

      <span class="comment">// The list of statements that go into constructor after superclass constructor call</span>
      <span class="keyword">val</span> <span class="typed"><span class="type">scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]</span><a id="64066">constrStatBuf</a></span> = <span class="typed"><span class="type">scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]</span><span class="keyword">new</span></span> <span class="typed"><span class="type">scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]</span><a id="19925">ListBuffer</a></span>[Tree]

      <span class="comment">// The list of statements that go into constructor before superclass constructor call</span>
      <span class="keyword">val</span> <span class="typed"><span class="type">scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]</span><a id="64067">constrPrefixBuf</a></span> = <span class="typed"><span class="type">scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]</span><span class="keyword">new</span></span> <span class="typed"><span class="type">scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]</span><a id="19925">ListBuffer</a></span>[Tree]

      <span class="comment">// The early initialized field definitions of the class (these are the class members)</span>
      <span class="keyword">val</span> <span class="typed"><span class="type">List[Constructors.this.global.treeInfo.trees.ValDef]</span><a id="64068">presupers</a></span> = <span class="typed"><span class="type">object Constructors.this.global.treeInfo</span><a href="../ast/Trees.scala.html#22360">treeInfo</a></span>.<span class="typed"><span class="type">(List[Constructors.this.global.treeInfo.trees.Tree])List[Constructors.this.global.treeInfo.trees.ValDef]</span><a href="../ast/TreeInfo.scala.html#42447">preSuperFields</a></span>(<span class="typed"><span class="type">List[Constructors.this.global.Tree]</span><a href="#64051">stats</a></span>)

      <span class="comment">// generate code to copy pre-initialized fields</span>
      <span class="keyword">for</span> (<span class="typed"><span class="type">((Constructors.this.global.Tree) =&gt; Unit)Unit</span><span id="21366"><a id="64211">stat</a></span></span> &lt;- <span class="typed"><span class="type">Constructors.this.global.Block</span><a href="#64055">constrBody</a></span>.<span class="typed"><span class="type">=&gt; List[Constructors.this.global.Tree]</span><a href="../ast/Trees.scala.html#28100">stats</a></span>) {
        <span class="typed"><span class="type">scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]</span><a href="#64066">constrStatBuf</a></span> <span class="typed"><span class="type">(Constructors.this.global.Tree)Unit</span><a id="33306">+=</a></span> <span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="#64211">stat</a></span>
        <span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="#64211">stat</a></span> <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
          <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">ValDef</a>(<span class="typed"><span class="type">Constructors.this.global.Modifiers</span><a id="64213">mods</a></span>, <span class="typed"><span class="type">Constructors.this.global.Name</span><a id="64214">name</a></span>, _, _) <span class="keyword">if</span> (<span class="typed"><span class="type">Constructors.this.global.Modifiers</span><a href="#64213">mods</a></span> <span class="typed"><span class="type">(Long)Boolean</span><a href="../ast/Trees.scala.html#42017">hasFlag</a></span> <span class="typed"><span class="type">Long(137438953472L)</span><span >PRESUPER</span></span>) =&gt;
            <span class="comment">// stat is the constructor-local definition of the field value</span>
            <span class="keyword">val</span> <span class="typed"><span class="type">List[Constructors.this.global.treeInfo.trees.ValDef]</span><a id="64215">fields</a></span> = <span class="typed"><span class="type">List[Constructors.this.global.treeInfo.trees.ValDef]</span><a href="#64068">presupers</a></span> <span class="typed"><span class="type">((Constructors.this.global.treeInfo.trees.ValDef) =&gt; Boolean)List[Constructors.this.global.treeInfo.trees.ValDef]</span><a id="21367">filter</a></span> (
              <span class="typed"><span class="type">Constructors.this.global.treeInfo.trees.ValDef</span><a id="64217">vdef</a></span> =&gt; <span class="typed"><span class="type">object Constructors.this.global.nme</span><a href="../symtab/StdNames.scala.html#22317">nme</a></span>.<span class="typed"><span class="type">(Constructors.this.global.Name)Constructors.this.global.Name</span><a href="../symtab/StdNames.scala.html#30567">localToGetter</a></span>(<span class="typed"><span class="type">Constructors.this.global.treeInfo.trees.ValDef</span><a href="#64217">vdef</a></span>.<span class="typed"><span class="type">=&gt; Constructors.this.global.treeInfo.trees.Name</span><a href="../ast/Trees.scala.html#27180">name</a></span>) <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">Constructors.this.global.Name</span><a href="#64214">name</a></span>)
            <span class="typed"><span class="type">(Boolean)Unit</span><span id="6003"><a id="821">assert</a></span></span>(<span class="typed"><span class="type">List[Constructors.this.global.treeInfo.trees.ValDef]</span><a href="#64215">fields</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21345">length</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3141">==</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>)
            <span class="typed"><span class="type">scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]</span><a href="#64066">constrStatBuf</a></span> <span class="typed"><span class="type">(Constructors.this.global.Tree)Unit</span><a id="33306">+=</a></span> <span class="typed"><span class="type">(Constructors.this.global.Symbol,Constructors.this.global.Tree)Constructors.this.global.Tree</span><a href="#64063">mkAssign</a></span>(<span class="typed"><span class="type">List[Constructors.this.global.treeInfo.trees.ValDef]</span><a href="#64215">fields</a></span>.<span class="typed"><span class="type">=&gt; Constructors.this.global.treeInfo.trees.ValDef</span><a id="21332">head</a></span>.<span class="typed"><span class="type">=&gt; Constructors.this.global.treeInfo.trees.Symbol</span><a href="../ast/Trees.scala.html#26908">symbol</a></span>, <span class="typed"><span class="type">(Constructors.this.global.Symbol)Constructors.this.global.Ident</span><a href="../ast/Trees.scala.html#22514">Ident</a></span>(<span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="#64211">stat</a></span>.<span class="typed"><span class="type">=&gt; Constructors.this.global.Symbol</span><a href="../ast/Trees.scala.html#25358">symbol</a></span>))
          <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> _ =&gt;
        }
      }

      <span class="comment">// Triage all template definitions to go into defBuf, constrStatBuf, or constrPrefixBuf.</span>
      <span class="keyword">for</span> (<span class="typed"><span class="type">((Constructors.this.global.Tree) =&gt; Unit)Unit</span><span id="21366"><a id="64227">stat</a></span></span> &lt;- <span class="typed"><span class="type">List[Constructors.this.global.Tree]</span><a href="#64051">stats</a></span>) <span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="#64227">stat</a></span> <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
        <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">DefDef</a>(<span class="typed"><span class="type">Constructors.this.global.Modifiers</span><a id="64229">mods</a></span>, <span class="typed"><span class="type">Constructors.this.global.Name</span><a id="64230">name</a></span>, <span class="typed"><span class="type">List[Constructors.this.global.TypeDef]</span><a id="64231">tparams</a></span>, <span class="typed"><span class="type">List[List[Constructors.this.global.ValDef]]</span><a id="64232">vparamss</a></span>, <span class="typed"><span class="type">Constructors.this.global.Tree</span><a id="64233">tpt</a></span>, <span class="typed"><span class="type">Constructors.this.global.Tree</span><a id="64234">rhs</a></span>) =&gt;
          <span class="comment">// methods with constant result type get literals as their body</span>
          <span class="comment">// all methods except the primary constructor go into template</span>
          <span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="#64227">stat</a></span>.<span class="typed"><span class="type">=&gt; Constructors.this.global.Symbol</span><a href="../ast/Trees.scala.html#25358">symbol</a></span>.<span class="typed"><span class="type">=&gt; Constructors.this.global.Type</span><a href="../symtab/Symbols.scala.html#25230">tpe</a></span> <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
            <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">MethodType</a>(<span class="typed"><span class="type">(List[Constructors.this.global.Type])Some[List[Constructors.this.global.Type]]</span><span id="21410"><a href="#64235" id="527">List</a></span></span>(), <span class="typed"><span class="type">Constructors.this.global.ConstantType</span><a id="64238">tp</a></span> @ <a id="1">ConstantType</a>(<span class="typed"><span class="type">Constructors.this.global.Constant</span><a id="64239">c</a></span>)) =&gt;
              <span class="typed"><span class="type">scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]</span><a href="#64065">defBuf</a></span> <span class="typed"><span class="type">(Constructors.this.global.Tree)Unit</span><a id="33306">+=</a></span> <span class="typed"><span class="type">=&gt; Constructors.this.global.TreeCopier</span><a href="../ast/Trees.scala.html#43088">copy</a></span>.<span class="typed"><span class="type">(Constructors.this.global.Tree,Constructors.this.global.Modifiers,Constructors.this.global.Name,List[Constructors.this.global.TypeDef],List[List[Constructors.this.global.ValDef]],Constructors.this.global.Tree,Constructors.this.global.Tree)Constructors.this.global.DefDef</span><a href="../ast/Trees.scala.html#43160">DefDef</a></span>(
                <span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="#64227">stat</a></span>, <span class="typed"><span class="type">Constructors.this.global.Modifiers</span><a href="#64229">mods</a></span>, <span class="typed"><span class="type">Constructors.this.global.Name</span><a href="#64230">name</a></span>, <span class="typed"><span class="type">List[Constructors.this.global.TypeDef]</span><a href="#64231">tparams</a></span>, <span class="typed"><span class="type">List[List[Constructors.this.global.ValDef]]</span><a href="#64232">vparamss</a></span>, <span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="#64233">tpt</a></span>,
                <span class="typed"><span class="type">(Constructors.this.global.Constant)Constructors.this.global.Literal</span><a href="../ast/Trees.scala.html#43688">Literal</a></span>(<span class="typed"><span class="type">Constructors.this.global.Constant</span><a href="#64239">c</a></span>) <span class="typed"><span class="type">(scala.tools.nsc.util.Position)Constructors.this.global.Literal</span><a href="../ast/Trees.scala.html#25356">setPos</a></span> <span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="#64234">rhs</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.util.Position</span><a href="../ast/Trees.scala.html#25352">pos</a></span> <span class="typed"><span class="type">(Constructors.this.global.Type)Constructors.this.global.Literal</span><a href="../ast/Trees.scala.html#25357">setType</a></span> <span class="typed"><span class="type">Constructors.this.global.ConstantType</span><a href="#64238">tp</a></span>)
            <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> _ =&gt;
              <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="#64227">stat</a></span>.<span class="typed"><span class="type">=&gt; Constructors.this.global.Symbol</span><a href="../ast/Trees.scala.html#25358">symbol</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../symtab/Symbols.scala.html#25187">isPrimaryConstructor</a></span>) <span class="typed"><span class="type">scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]</span><a href="#64065">defBuf</a></span> <span class="typed"><span class="type">(Constructors.this.global.Tree)Unit</span><a id="33306">+=</a></span> <span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="#64227">stat</a></span>
          }
        <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">ValDef</a>(<span class="typed"><span class="type">Constructors.this.global.Modifiers</span><a id="64246">mods</a></span>, <span class="typed"><span class="type">Constructors.this.global.Name</span><a id="64247">name</a></span>, <span class="typed"><span class="type">Constructors.this.global.Tree</span><a id="64248">tpt</a></span>, <span class="typed"><span class="type">Constructors.this.global.Tree</span><a id="64249">rhs</a></span>) =&gt;
          <span class="comment">// val defs with constant right-hand sides are eliminated.</span>
          <span class="comment">// for all other val defs, an empty valdef goes into the template and </span>
          <span class="comment">// the initializer goes as an assignment into the constructor</span>
          <span class="comment">// if the val def is an early initialized or a parameter accessor, it goes</span>
          <span class="comment">// before the superclass constructor call, otherwise it goes after.</span>
          <span class="comment">// Lazy vals don't get the assignment in the constructor.</span>
          <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="#64227">stat</a></span>.<span class="typed"><span class="type">=&gt; Constructors.this.global.Symbol</span><a href="../ast/Trees.scala.html#25358">symbol</a></span>.<span class="typed"><span class="type">=&gt; Constructors.this.global.Type</span><a href="../symtab/Symbols.scala.html#25230">tpe</a></span>.<span class="typed"><span class="type">Boolean</span><a id="3501">isInstanceOf</a></span>[<span class="typed"><span class="type">Constructors.this.global.ConstantType</span><a href="../symtab/Types.scala.html#21990">ConstantType</a></span>]) {
            <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="#64249">rhs</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5793">!=</a></span> <span class="typed"><span class="type">object Constructors.this.global.EmptyTree</span><a href="../ast/Trees.scala.html#22380">EmptyTree</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="#64227">stat</a></span>.<span class="typed"><span class="type">=&gt; Constructors.this.global.Symbol</span><a href="../ast/Trees.scala.html#25358">symbol</a></span>.<span class="typed"><span class="type">(Long)Boolean</span><a href="../symtab/Symbols.scala.html#25223">hasFlag</a></span>(<span class="typed"><span class="type">Long(2147483648L)</span><span >LAZY</span></span>)) {
              <span class="keyword">val</span> <span class="typed"><span class="type">Constructors.this.global.Tree</span><a id="64251">rhs1</a></span> = <span class="typed"><span class="type">(Constructors.this.global.Symbol,Constructors.this.global.Tree)Constructors.this.global.Tree</span><a href="#64061">intoConstructor</a></span>(<span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="#64227">stat</a></span>.<span class="typed"><span class="type">=&gt; Constructors.this.global.Symbol</span><a href="../ast/Trees.scala.html#25358">symbol</a></span>, <span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="#64249">rhs</a></span>);
              (<span class="typed"><span class="type">scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">(Constructors.this.global.Tree)Boolean</span><a href="#64062">canBeMoved</a></span>(<span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="#64227">stat</a></span>)) <span class="typed"><span class="type">scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]</span><a href="#64067">constrPrefixBuf</a></span> <span class="keyword">else</span> <span class="typed"><span class="type">scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]</span><a href="#64066">constrStatBuf</a></span>) <span class="typed"><span class="type">(Constructors.this.global.Tree)Unit</span><a id="33306">+=</a></span> <span class="typed"><span class="type">(Constructors.this.global.Symbol,Constructors.this.global.Tree)Constructors.this.global.Tree</span><a href="#64063">mkAssign</a></span>(
                <span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="#64227">stat</a></span>.<span class="typed"><span class="type">=&gt; Constructors.this.global.Symbol</span><a href="../ast/Trees.scala.html#25358">symbol</a></span>, <span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="#64251">rhs1</a></span>)
            }
            <span class="typed"><span class="type">scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]</span><a href="#64065">defBuf</a></span> <span class="typed"><span class="type">(Constructors.this.global.Tree)Unit</span><a id="33306">+=</a></span> <span class="typed"><span class="type">=&gt; Constructors.this.global.TreeCopier</span><a href="../ast/Trees.scala.html#43088">copy</a></span>.<span class="typed"><span class="type">(Constructors.this.global.Tree,Constructors.this.global.Modifiers,Constructors.this.global.Name,Constructors.this.global.Tree,Constructors.this.global.Tree)Constructors.this.global.ValDef</span><a href="../ast/Trees.scala.html#43159">ValDef</a></span>(<span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="#64227">stat</a></span>, <span class="typed"><span class="type">Constructors.this.global.Modifiers</span><a href="#64246">mods</a></span>, <span class="typed"><span class="type">Constructors.this.global.Name</span><a href="#64247">name</a></span>, <span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="#64248">tpt</a></span>, <span class="typed"><span class="type">object Constructors.this.global.EmptyTree</span><a href="../ast/Trees.scala.html#22380">EmptyTree</a></span>)
          }
        <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">ClassDef</a>(_, _, _, _) =&gt;
          <span class="comment">// classes are treated recursively, and left in the template</span>
          <span class="typed"><span class="type">scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]</span><a href="#64065">defBuf</a></span> <span class="typed"><span class="type">(Constructors.this.global.Tree)Unit</span><a id="33306">+=</a></span> <span class="typed"><span class="type">Constructors.this.ConstructorTransformer</span><span class="keyword">new</span></span> <span class="typed"><span class="type">Constructors.this.ConstructorTransformer</span><a href="#64038">ConstructorTransformer</a></span>(<span class="typed"><span class="type">Constructors.this.global.CompilationUnit</span><a href="#64042">unit</a></span>).<span class="typed"><span class="type">(Constructors.this.global.Tree)Constructors.this.global.Tree</span><a href="#64045">transform</a></span>(<span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="#64227">stat</a></span>)
        <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> _ =&gt;
          <span class="comment">// all other statements go into the constructor</span>
          <span class="typed"><span class="type">scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]</span><a href="#64066">constrStatBuf</a></span> <span class="typed"><span class="type">(Constructors.this.global.Tree)Unit</span><a id="33306">+=</a></span> <span class="typed"><span class="type">(Constructors.this.global.Symbol,Constructors.this.global.Tree)Constructors.this.global.Tree</span><a href="#64061">intoConstructor</a></span>(<span class="typed"><span class="type">Constructors.this.global.Template</span><a href="#64049">impl</a></span>.<span class="typed"><span class="type">=&gt; Constructors.this.global.Symbol</span><a href="../ast/Trees.scala.html#26908">symbol</a></span>, <span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="#64227">stat</a></span>)
      }

      <span class="comment">// ----------- avoid making fields for symbols that are not accessed --------------</span>

      <span class="comment">// A sorted set of symbols that are known to be accessed outside the primary constructor.</span>
      <span class="keyword">val</span> <span class="typed"><span class="type">scala.tools.nsc.util.TreeSet[Constructors.this.global.Symbol]</span><a id="64069">accessedSyms</a></span> = <span class="typed"><span class="type">scala.tools.nsc.util.TreeSet[Constructors.this.global.Symbol]</span><span class="keyword">new</span></span> <span class="typed"><span class="type">scala.tools.nsc.util.TreeSet[Constructors.this.global.Symbol]</span><a href="../util/TreeSet.scala.html#8429">TreeSet</a></span>[Symbol]((<span class="typed"><span class="type">Constructors.this.global.Symbol</span><a id="64257">x</a></span>, <span class="typed"><span class="type">Constructors.this.global.Symbol</span><a id="64258">y</a></span>) =&gt; <span class="typed"><span class="type">Constructors.this.global.Symbol</span><a href="#64257">x</a></span> <span class="typed"><span class="type">(Constructors.this.global.Symbol)Boolean</span><a href="../symtab/Symbols.scala.html#25247">isLess</a></span> <span class="typed"><span class="type">Constructors.this.global.Symbol</span><a href="#64258">y</a></span>)

      <span class="comment">// a list of outer accessor symbols and their bodies</span>
      <span class="keyword">var</span> <span class="typed"><span class="type">List[(Constructors.this.global.Symbol, Constructors.this.global.Tree)]</span><a id="64070">outerAccessors</a></span>: <span class="typed"><span class="type">List[(Constructors.this.global.Symbol, Constructors.this.global.Tree)]</span><a id="526">List</a></span>[(Symbol, Tree)] = <span class="typed"><span class="type">object Nil</span><a id="335">List</a></span>()

      <span class="comment">// Could symbol's definition be omitted, provided it is not accessed?</span>
      <span class="comment">// This is the case if the symbol is defined in the current class, and</span>
      <span class="comment">// ( the symbol is an object private parameter accessor field, or</span>
      <span class="comment">//   the symbol is an outer accessor of a final class which does not override another outer accesser. )</span>
      <span class="keyword">def</span> <span class="typed"><span class="type">(Constructors.this.global.Symbol)Boolean</span><a id="64071">maybeOmittable</a></span>(<span class="typed"><span class="type">Constructors.this.global.Symbol</span><a id="64260">sym</a></span>: <span class="typed"><span class="type">Constructors.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#21866">Symbol</a></span>) = 
        (<span class="typed"><span class="type">Constructors.this.global.Symbol</span><a href="#64260">sym</a></span>.<span class="typed"><span class="type">=&gt; Constructors.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#25211">owner</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">Constructors.this.global.Symbol</span><a href="#64050">clazz</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span>
         ((<span class="typed"><span class="type">Constructors.this.global.Symbol</span><a href="#64260">sym</a></span> <span class="typed"><span class="type">(Long)Boolean</span><a href="../symtab/Symbols.scala.html#25223">hasFlag</a></span> <span class="typed"><span class="type">Long(536870912L)</span><span >PARAMACCESSOR</span></span>) <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">Constructors.this.global.Symbol</span><a href="#64260">sym</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../symtab/Symbols.scala.html#25185">isPrivateLocal</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2750">||</a></span>
          <span class="typed"><span class="type">Constructors.this.global.Symbol</span><a href="#64260">sym</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../symtab/Symbols.scala.html#25178">isOuterAccessor</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">Constructors.this.global.Symbol</span><a href="#64260">sym</a></span>.<span class="typed"><span class="type">=&gt; Constructors.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#25211">owner</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../symtab/Symbols.scala.html#25197">isFinal</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">Constructors.this.global.Symbol</span><a href="#64260">sym</a></span>.<span class="typed"><span class="type">=&gt; List[Constructors.this.global.Symbol]</span><a href="../symtab/Symbols.scala.html#25288">allOverriddenSymbols</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a id="21645">isEmpty</a></span>))

      <span class="comment">// Is symbol known to be accessed outside of the primary constructor,</span>
      <span class="comment">// or is it a symbol whose definition cannot be omitted anyway? </span>
      <span class="keyword">def</span> <span class="typed"><span class="type">(Constructors.this.global.Symbol)Boolean</span><a id="64072">mustbeKept</a></span>(<span class="typed"><span class="type">Constructors.this.global.Symbol</span><a id="64264">sym</a></span>: <span class="typed"><span class="type">Constructors.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#21866">Symbol</a></span>) =
        <span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">(Constructors.this.global.Symbol)Boolean</span><a href="#64071">maybeOmittable</a></span>(<span class="typed"><span class="type">Constructors.this.global.Symbol</span><a href="#64264">sym</a></span>) <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2750">||</a></span> (<span class="typed"><span class="type">scala.tools.nsc.util.TreeSet[Constructors.this.global.Symbol]</span><a href="#64069">accessedSyms</a></span> <span class="typed"><span class="type">(Constructors.this.global.Symbol)Boolean</span><a href="../util/Set.scala.html#32120">contains</a></span> <span class="typed"><span class="type">Constructors.this.global.Symbol</span><a href="#64264">sym</a></span>)

      <span class="comment">// A traverser to set accessedSyms and outerAccessors</span>
      <span class="keyword">val</span> <span class="typed"><span class="type">Constructors.this.global.Traverser</span><a id="64073">accessTraverser</a></span> = <span class="typed"><span class="type">template $anon extends Constructors.this.global.Traverser</span><a id="64265" class="keyword">new</a></span> <span class="typed"><span class="type">Constructors.this.global.Traverser</span><a href="../ast/Trees.scala.html#22549">Traverser</a></span> {
        <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">(Constructors.this.global.Tree)Unit</span><a id="64267">traverse</a></span>(<span class="typed"><span class="type">Constructors.this.global.Tree</span><a id="64269">tree</a></span>: <span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="../ast/Trees.scala.html#22371">Tree</a></span>) = {
          <span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="#64269">tree</a></span> <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
            <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">DefDef</a>(_, _, _, _, _, <span class="typed"><span class="type">Constructors.this.global.Tree</span><a id="64271">body</a></span>) 
            <span class="keyword">if</span> (<span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="#64269">tree</a></span>.<span class="typed"><span class="type">=&gt; Constructors.this.global.Symbol</span><a href="../ast/Trees.scala.html#25358">symbol</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../symtab/Symbols.scala.html#25178">isOuterAccessor</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="#64269">tree</a></span>.<span class="typed"><span class="type">=&gt; Constructors.this.global.Symbol</span><a href="../ast/Trees.scala.html#25358">symbol</a></span>.<span class="typed"><span class="type">=&gt; Constructors.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#25211">owner</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">Constructors.this.global.Symbol</span><a href="#64050">clazz</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">Constructors.this.global.Symbol</span><a href="#64050">clazz</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../symtab/Symbols.scala.html#25197">isFinal</a></span>) =&gt;
              <span class="typed"><span class="type">List[(Constructors.this.global.Symbol, Constructors.this.global.Tree)]</span><a href="#64070">outerAccessors</a></span> <span class="typed"><span class="type">((Constructors.this.global.Symbol, Constructors.this.global.Tree))List[(Constructors.this.global.Symbol, Constructors.this.global.Tree)]</span><span id="21335"><span id="23625"><a id="1379">::=</a></span></span></span> (<span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="#64269">tree</a></span>.<span class="typed"><span class="type">=&gt; Constructors.this.global.Symbol</span><a href="../ast/Trees.scala.html#25358">symbol</a></span>, <span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="#64271">body</a></span>)
            <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">Select</a>(_, _) =&gt;
              <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">(Constructors.this.global.Symbol)Boolean</span><a href="#64072">mustbeKept</a></span>(<span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="#64269">tree</a></span>.<span class="typed"><span class="type">=&gt; Constructors.this.global.Symbol</span><a href="../ast/Trees.scala.html#25358">symbol</a></span>)) <span class="typed"><span class="type">scala.tools.nsc.util.TreeSet[Constructors.this.global.Symbol]</span><a href="#64069">accessedSyms</a></span> <span class="typed"><span class="type">(Constructors.this.global.Symbol)Unit</span><a href="../util/TreeSet.scala.html#32130">addEntry</a></span> <span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="#64269">tree</a></span>.<span class="typed"><span class="type">=&gt; Constructors.this.global.Symbol</span><a href="../ast/Trees.scala.html#25358">symbol</a></span>
              <span class="keyword">super</span>.<span class="typed"><span class="type">(Constructors.this.global.Tree)Unit</span><a href="../ast/Trees.scala.html#28559">traverse</a></span>(<span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="#64269">tree</a></span>)
            <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> _ =&gt;
              <span class="keyword">super</span>.<span class="typed"><span class="type">(Constructors.this.global.Tree)Unit</span><a href="../ast/Trees.scala.html#28559">traverse</a></span>(<span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="#64269">tree</a></span>)
          }
        }
      }

      <span class="comment">// first traverse all definitions except outeraccesors </span>
      <span class="comment">// (outeraccessors are avoided in accessTraverser)</span>
      <span class="keyword">for</span> (<span class="typed"><span class="type">((Constructors.this.global.Tree) =&gt; Unit)Unit</span><span id="32202"><a id="64307">stat</a></span></span> &lt;- <span class="typed"><span class="type">scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]</span><a href="#64065">defBuf</a></span>.<span class="typed"><span class="type">=&gt; &lt;refinement&gt; extends java.lang.Object with Iterator[Constructors.this.global.Tree]</span><a id="33320">elements</a></span>) <span class="typed"><span class="type">Constructors.this.global.Traverser</span><a href="#64073">accessTraverser</a></span>.<span class="typed"><span class="type">(Constructors.this.global.Tree)Unit</span><a href="../ast/Trees.scala.html#28559">traverse</a></span>(<span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="#64307">stat</a></span>) 

      <span class="comment">// then traverse all bodies of outeraccessors which are accessed themselves</span>
      <span class="comment">// note: this relies on the fact that an outer accessor never calls another</span>
      <span class="comment">// outer accessor in the same class.</span>
      <span class="keyword">for</span> (<span class="typed"><span class="type">(((Constructors.this.global.Symbol, Constructors.this.global.Tree)) =&gt; Unit)Unit</span><span id="21366"><a href="#64310" id="21367">(</a></span></span><span class="typed"><span class="type">Constructors.this.global.Symbol</span><span id="64311"><a id="64316">accSym</a></span></span>, <span class="typed"><span class="type">Constructors.this.global.Tree</span><span id="64312"><a id="64317">accBody</a></span></span>) &lt;- <span class="typed"><span class="type">List[(Constructors.this.global.Symbol, Constructors.this.global.Tree)]</span><a href="#64070">outerAccessors</a></span>) 
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">(Constructors.this.global.Symbol)Boolean</span><a href="#64072">mustbeKept</a></span>(<span class="typed"><span class="type">Constructors.this.global.Symbol</span><a href="#64316">accSym</a></span>)) <span class="typed"><span class="type">Constructors.this.global.Traverser</span><a href="#64073">accessTraverser</a></span>.<span class="typed"><span class="type">(Constructors.this.global.Tree)Unit</span><a href="../ast/Trees.scala.html#28559">traverse</a></span>(<span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="#64317">accBody</a></span>)

      <span class="comment">// Initialize all parameters fields that must be kept.</span>
      <span class="keyword">val</span> <span class="typed"><span class="type">List[Constructors.this.global.Tree]</span><a id="64074">paramInits</a></span> = <span class="keyword">for</span> (<span class="typed"><span class="type">((Constructors.this.global.Symbol) =&gt; Constructors.this.global.Tree)List[Constructors.this.global.Tree]</span><span id="21362"><span id="21367"><span id="64319"><a id="64323">acc</a></span></span></span></span> &lt;- <span class="typed"><span class="type">List[Constructors.this.global.Symbol]</span><a href="#64056">paramAccessors</a></span> <span class="keyword">if</span> <span class="typed"><span class="type">(Constructors.this.global.Symbol)Boolean</span><a href="#64072">mustbeKept</a></span>(<span class="typed"><span class="type">Constructors.this.global.Symbol</span><a href="#64319">acc</a></span>))
                       <span class="keyword">yield</span> <span class="typed"><span class="type">(Constructors.this.global.Symbol,Constructors.this.global.Symbol)Constructors.this.global.Tree</span><a href="#64064">copyParam</a></span>(<span class="typed"><span class="type">Constructors.this.global.Symbol</span><a href="#64323">acc</a></span>, <span class="typed"><span class="type">(Constructors.this.global.Symbol)Constructors.this.global.Symbol</span><a href="#64057">parameter</a></span>(<span class="typed"><span class="type">Constructors.this.global.Symbol</span><a href="#64323">acc</a></span>))
      
      <span class="comment">// Assemble final constructor</span>
      <span class="typed"><span class="type">scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]</span><a href="#64065">defBuf</a></span> <span class="typed"><span class="type">(Constructors.this.global.Tree)Unit</span><a id="33306">+=</a></span> <span class="typed"><span class="type">=&gt; Constructors.this.global.TreeCopier</span><a href="../ast/Trees.scala.html#43088">copy</a></span>.<span class="typed"><span class="type">(Constructors.this.global.Tree,Constructors.this.global.Modifiers,Constructors.this.global.Name,List[Constructors.this.global.TypeDef],List[List[Constructors.this.global.ValDef]],Constructors.this.global.Tree,Constructors.this.global.Tree)Constructors.this.global.DefDef</span><a href="../ast/Trees.scala.html#43160">DefDef</a></span>(
        <span class="typed"><span class="type">Constructors.this.global.DefDef</span><a href="#64053">constr</a></span>, <span class="typed"><span class="type">Constructors.this.global.DefDef</span><a href="#64053">constr</a></span>.<span class="typed"><span class="type">=&gt; Constructors.this.global.Modifiers</span><a href="../ast/Trees.scala.html#27152">mods</a></span>, <span class="typed"><span class="type">Constructors.this.global.DefDef</span><a href="#64053">constr</a></span>.<span class="typed"><span class="type">=&gt; Constructors.this.global.Name</span><a href="../ast/Trees.scala.html#27154">name</a></span>, <span class="typed"><span class="type">Constructors.this.global.DefDef</span><a href="#64053">constr</a></span>.<span class="typed"><span class="type">=&gt; List[Constructors.this.global.TypeDef]</span><a href="../ast/Trees.scala.html#27156">tparams</a></span>, <span class="typed"><span class="type">Constructors.this.global.DefDef</span><a href="#64053">constr</a></span>.<span class="typed"><span class="type">=&gt; List[List[Constructors.this.global.ValDef]]</span><a href="../ast/Trees.scala.html#27158">vparamss</a></span>, <span class="typed"><span class="type">Constructors.this.global.DefDef</span><a href="#64053">constr</a></span>.<span class="typed"><span class="type">=&gt; Constructors.this.global.Tree</span><a href="../ast/Trees.scala.html#27160">tpt</a></span>,
        <span class="typed"><span class="type">=&gt; Constructors.this.global.TreeCopier</span><a href="../ast/Trees.scala.html#43088">copy</a></span>.<span class="typed"><span class="type">(Constructors.this.global.Tree,List[Constructors.this.global.Tree],Constructors.this.global.Tree)Constructors.this.global.Block</span><a href="../ast/Trees.scala.html#43167">Block</a></span>(
          <span class="typed"><span class="type">Constructors.this.global.Block</span><a href="#64055">constrBody</a></span>,
          <span class="typed"><span class="type">List[Constructors.this.global.Tree]</span><a href="#64074">paramInits</a></span> <span class="typed"><span class="type">(List[Constructors.this.global.Tree])List[Constructors.this.global.Tree]</span><a href="#64327" id="21339">:::</a></span> <span class="typed"><span class="type">scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]</span><a href="#64067">constrPrefixBuf</a></span>.<span class="typed"><span class="type">=&gt; List[Constructors.this.global.Tree]</span><a id="33309">toList</a></span> <span class="typed"><span class="type">(List[Constructors.this.global.Tree])List[Constructors.this.global.Tree]</span><a href="#64328" id="21339">:::</a></span> <span class="typed"><span class="type">scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]</span><a href="#64066">constrStatBuf</a></span>.<span class="typed"><span class="type">=&gt; List[Constructors.this.global.Tree]</span><a id="33309">toList</a></span>,
          <span class="typed"><span class="type">Constructors.this.global.Block</span><a href="#64055">constrBody</a></span>.<span class="typed"><span class="type">=&gt; Constructors.this.global.Tree</span><a href="../ast/Trees.scala.html#28102">expr</a></span>));

      <span class="comment">// Unlink all fields that can be dropped from class scope</span>
      <span class="keyword">for</span> (<span class="typed"><span class="type">((Constructors.this.global.Symbol) =&gt; Unit)Unit</span><span id="21366"><a id="64335">sym</a></span></span> &lt;- <span class="typed"><span class="type">Constructors.this.global.Symbol</span><a href="#64050">clazz</a></span>.<span class="typed"><span class="type">=&gt; Constructors.this.global.Type</span><a href="../symtab/Symbols.scala.html#25231">info</a></span>.<span class="typed"><span class="type">=&gt; Constructors.this.global.Scope</span><a href="../symtab/Types.scala.html#25677">decls</a></span>.<span class="typed"><span class="type">=&gt; List[Constructors.this.global.Symbol]</span><a href="../symtab/Scopes.scala.html#34629">toList</a></span>) 
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">(Constructors.this.global.Symbol)Boolean</span><a href="#64072">mustbeKept</a></span>(<span class="typed"><span class="type">Constructors.this.global.Symbol</span><a href="#64335">sym</a></span>)) <span class="typed"><span class="type">Constructors.this.global.Symbol</span><a href="#64050">clazz</a></span>.<span class="typed"><span class="type">=&gt; Constructors.this.global.Type</span><a href="../symtab/Symbols.scala.html#25231">info</a></span>.<span class="typed"><span class="type">=&gt; Constructors.this.global.Scope</span><a href="../symtab/Types.scala.html#25677">decls</a></span> <span class="typed"><span class="type">(Constructors.this.global.Symbol)Unit</span><a href="../symtab/Scopes.scala.html#34623">unlink</a></span> <span class="typed"><span class="type">Constructors.this.global.Symbol</span><a href="#64335">sym</a></span>

      <span class="comment">// Eliminate all field definitions that can be dropped from template</span>
      <span class="typed"><span class="type">=&gt; Constructors.this.global.TreeCopier</span><a href="../ast/Trees.scala.html#43088">copy</a></span>.<span class="typed"><span class="type">(Constructors.this.global.Tree,List[Constructors.this.global.Tree],Constructors.this.global.ValDef,List[Constructors.this.global.Tree])Constructors.this.global.Template</span><a href="../ast/Trees.scala.html#43166">Template</a></span>(<span class="typed"><span class="type">Constructors.this.global.Template</span><a href="#64049">impl</a></span>, <span class="typed"><span class="type">Constructors.this.global.Template</span><a href="#64049">impl</a></span>.<span class="typed"><span class="type">=&gt; List[Constructors.this.global.Tree]</span><a href="../ast/Trees.scala.html#26971">parents</a></span>, <span class="typed"><span class="type">Constructors.this.global.Template</span><a href="#64049">impl</a></span>.<span class="typed"><span class="type">=&gt; Constructors.this.global.ValDef</span><a href="../ast/Trees.scala.html#26973">self</a></span>, 
                    <span class="typed"><span class="type">scala.collection.mutable.ListBuffer[Constructors.this.global.Tree]</span><a href="#64065">defBuf</a></span>.<span class="typed"><span class="type">=&gt; List[Constructors.this.global.Tree]</span><a id="33309">toList</a></span> <span class="typed"><span class="type">((Constructors.this.global.Tree) =&gt; Boolean)List[Constructors.this.global.Tree]</span><a id="21367">filter</a></span> (<span class="typed"><span class="type">Constructors.this.global.Tree</span><a id="64339">stat</a></span> =&gt; <span class="typed"><span class="type">(Constructors.this.global.Symbol)Boolean</span><a href="#64072">mustbeKept</a></span>(<span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="#64339">stat</a></span>.<span class="typed"><span class="type">=&gt; Constructors.this.global.Symbol</span><a href="../ast/Trees.scala.html#25358">symbol</a></span>)))
    } <span class="comment">// transformClassTemplate</span>

    <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">(Constructors.this.global.Tree)Constructors.this.global.Tree</span><a id="64045">transform</a></span>(<span class="typed"><span class="type">Constructors.this.global.Tree</span><a id="64255">tree</a></span>: <span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="../ast/Trees.scala.html#22371">Tree</a></span>): <span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="../ast/Trees.scala.html#22371">Tree</a></span> = 
      <span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="#64255">tree</a></span> <span class="typed"><span class="type">Constructors.this.global.Tree</span><span class="keyword">match</span></span> {
        <span class="typed"><span class="type">Constructors.this.global.ClassDef</span><span class="keyword">case</span></span> <a id="1">ClassDef</a>(<span class="typed"><span class="type">Constructors.this.global.Modifiers</span><a id="64341">mods</a></span>, <span class="typed"><span class="type">Constructors.this.global.Name</span><a id="64342">name</a></span>, <span class="typed"><span class="type">List[Constructors.this.global.TypeDef]</span><a id="64343">tparams</a></span>, <span class="typed"><span class="type">Constructors.this.global.Template</span><a id="64344">impl</a></span>) <span class="keyword">if</span> <span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="#64255">tree</a></span>.<span class="typed"><span class="type">=&gt; Constructors.this.global.Symbol</span><a href="../ast/Trees.scala.html#25358">symbol</a></span>.<span class="typed"><span class="type">(Long)Boolean</span><a href="../symtab/Symbols.scala.html#25223">hasFlag</a></span>(<span class="typed"><span class="type">Long(128L)</span><span >INTERFACE</span></span>) =&gt;
          <span class="typed"><span class="type">=&gt; Constructors.this.global.TreeCopier</span><a href="../ast/Trees.scala.html#43088">copy</a></span>.<span class="typed"><span class="type">(Constructors.this.global.Tree,Constructors.this.global.Modifiers,Constructors.this.global.Name,List[Constructors.this.global.TypeDef],Constructors.this.global.Template)Constructors.this.global.ClassDef</span><a href="../ast/Trees.scala.html#43156">ClassDef</a></span>(<span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="#64255">tree</a></span>, <span class="typed"><span class="type">Constructors.this.global.Modifiers</span><a href="#64341">mods</a></span>, <span class="typed"><span class="type">Constructors.this.global.Name</span><a href="#64342">name</a></span>, <span class="typed"><span class="type">List[Constructors.this.global.TypeDef]</span><a href="#64343">tparams</a></span>, <span class="typed"><span class="type">(Constructors.this.global.Template)Constructors.this.global.Template</span><a href="#64044">transformClassTemplate</a></span>(<span class="typed"><span class="type">Constructors.this.global.Template</span><a href="#64344">impl</a></span>))
        <span class="typed"><span class="type">Constructors.this.global.Tree</span><span class="keyword">case</span></span> _ =&gt;
          <span class="keyword">super</span>.<span class="typed"><span class="type">(Constructors.this.global.Tree)Constructors.this.global.Tree</span><a href="../ast/Trees.scala.html#43096">transform</a></span>(<span class="typed"><span class="type">Constructors.this.global.Tree</span><a href="#64255">tree</a></span>)
      }
  } <span class="comment">// ConstructorTransformer</span>
}

        </pre>
    </body>
</html>