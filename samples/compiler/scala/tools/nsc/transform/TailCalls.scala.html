<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/transform/TailCalls.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style">
    </head>
    <body>
        <pre>
/* NSC -- new scala compiler
 * Copyright 2005-2009 LAMP/EPFL
 * @author Iulian Dragos
 */
// $Id: TailCalls.scala 18579 2009-08-26 15:17:51Z extempore $

<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> transform

<span class="keyword">import</span> scala.tools.nsc.symtab.Flags

/** Perform tail recursive call elimination.
 *
 *  @author Iulian Dragos
 *  @version 1.0
 */
<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class TailCalls extends scala.tools.nsc.SubComponent with scala.tools.nsc.transform.Transform with ScalaObject" id="13843">TailCalls</a> <span title="ScalaObject" class="keyword">extends</span> <a href="Transform.scala.html#14164" title="scala.tools.nsc.transform.Transform">Transform</a>
                         /* with JavaLogging() */ {
  // inherits abstract value `global' and class `Phase' from Transform

  <span class="keyword">import</span> global._                  // the global environment
  <span class="keyword">import</span> definitions._             // standard classes and methods
  <span class="keyword">import</span> typer.{typed, atOwner}    // methods to type trees

  <span class="keyword">val</span> <a title="String" id="580702">phaseName</a>: <span title="String">String</span> = <span title="java.lang.String(&quot;tailcalls&quot;)" class="string">&quot;tailcalls&quot;</span>

  <span class="keyword">def</span> <a title="(unit: TailCalls.this.global.CompilationUnit)TailCalls.this.global.Transformer" id="580704">newTransformer</a>(<a title="TailCalls.this.global.CompilationUnit" id="639687">unit</a>: <a href="../CompilationUnits.scala.html#39428" title="TailCalls.this.global.CompilationUnit">CompilationUnit</a>): <a href="../ast/Trees.scala.html#26932" title="TailCalls.this.global.Transformer">Transformer</a> =
    <span title="TailCalls.this.TailCallElimination" class="keyword">new</span> <a href="#580708" title="TailCalls.this.TailCallElimination">TailCallElimination</a>(<a href="#639687" title="TailCalls.this.global.CompilationUnit">unit</a>)

  /** Create a new phase which applies transformer */
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(prev: scala.tools.nsc.Phase)TailCalls.this.StdPhase" id="580705">newPhase</a>(<a title="scala.tools.nsc.Phase" id="639708">prev</a>: scala.tools.nsc.<a href="../Phase.scala.html#8931" title="scala.tools.nsc.Phase">Phase</a>): <a href="../SubComponent.scala.html#39872" title="TailCalls.this.StdPhase">StdPhase</a> = <span title="TailCalls.this.Phase" class="keyword">new</span> <a href="#580706" title="TailCalls.this.Phase">Phase</a>(<a href="#639708" title="scala.tools.nsc.Phase">prev</a>)

  /** The phase defined by this transform */
  <span class="keyword">class</span> <a title="class Phase extends TailCalls.this.StdPhase with ScalaObject" id="580706">Phase</a><span title="ScalaObject">(</span><a title="scala.tools.nsc.Phase" id="639714">prev</a>: scala.tools.nsc.<a href="../Phase.scala.html#8931" title="scala.tools.nsc.Phase">Phase</a>) <span class="keyword">extends</span> <a href="../SubComponent.scala.html#39872" title="TailCalls.this.StdPhase">StdPhase</a>(<a href="#639714" title="scala.tools.nsc.Phase">prev</a>) {
    <span class="keyword">def</span> <a title="(unit: TailCalls.this.global.CompilationUnit)Unit" id="639713">apply</a>(<a title="TailCalls.this.global.CompilationUnit" id="639721">unit</a>: global.<a href="../CompilationUnits.scala.html#39428" title="TailCalls.this.global.CompilationUnit">CompilationUnit</a>) {
      <span title="Unit" class="keyword">if</span> (<span title="=&gt; Boolean">!</span>(<a href="../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../Settings.scala.html#37245" title="=&gt; scala.tools.nsc.Settings.DebugSetting">debuginfo</a>.<a href="../Settings.scala.html#37988" title="(x$1: AnyRef)Boolean">value</a> == <span title="java.lang.String(&quot;notailcalls&quot;)" class="string">&quot;notailcalls&quot;</span>)) {
        <a href="#580704" title="(unit: TailCalls.this.global.CompilationUnit)TailCalls.this.global.Transformer">newTransformer</a>(<a href="#639721" title="TailCalls.this.global.CompilationUnit">unit</a>).<a href="../ast/Trees.scala.html#45715" title="(unit: TailCalls.this.global.CompilationUnit)Unit">transformUnit</a>(<a href="#639721" title="TailCalls.this.global.CompilationUnit">unit</a>);
      }
    }
  }
  
  /** The @tailrec annotation indicates TCO is mandatory */
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(defdef: TailCalls.this.global.DefDef)Boolean" id="580707">tailrecRequired</a>(<a title="TailCalls.this.global.DefDef" id="639739">defdef</a>: <a href="../ast/Trees.scala.html#26785" title="TailCalls.this.global.DefDef">DefDef</a>) = <a href="#639739" title="TailCalls.this.global.DefDef">defdef</a>.<a href="../symtab/Symbols.scala.html#27016" title="(cls: TailCalls.this.global.Symbol)Boolean">symbol</a> hasAnnotation <a href="../symtab/Definitions.scala.html#28509" title="=&gt; TailCalls.this.global.Symbol">TailrecClass</a>

  /**
   * A Tail Call Transformer
   *
   * @author     Erik Stenman, Iulian Dragos
   * @version    1.1
   *
   * What it does:
   * &lt;p&gt;
   *   Finds method calls in tail-position and replaces them with jumps.
   *   A call is in a tail-position if it is the last instruction to be
   *   executed in the body of a method.  This is done by recursing over
   *   the trees that may contain calls in tail-position (trees that can't
   *   contain such calls are not transformed). However, they are not that
   *   many.
   * &lt;/p&gt;
   * &lt;p&gt;
   *   Self-recursive calls in tail-position are replaced by jumps to a
   *   label at the beginning of the method. As the JVM provides no way to
   *   jump from a method to another one, non-recursive calls in
   *   tail-position are not optimized.
   * &lt;/p&gt;
   * &lt;p&gt;
   *   A method call is self-recursive if it calls the current method and
   *   the method is final (otherwise, it could
   *   be a call to an overridden method in a subclass). Furthermore, If
   *   the method has type parameters, the call must contain these
   *   parameters as type arguments. Recursive calls on a different instance
   *   are optimized. Since 'this' is not a local variable, a dummy local val
   *   is added and used as a label parameter. The backend knows to load
   *   the corresponding argument in the 'this' (local at index 0). This dummy local
   *   is never used and should be cleand up by dead code elmination (when enabled).
   * &lt;/p&gt;
   * &lt;p&gt;
   *   This phase has been moved before pattern matching to catch more
   *   of the common cases of tail recursive functions. This means that
   *   more cases should be taken into account (like nested function, and
   *   pattern cases).
   * &lt;/p&gt;
   * &lt;p&gt;
   *   If a method contains self-recursive calls, a label is added to at
   *   the beginning of its body and the calls are replaced by jumps to
   *   that label.
   * &lt;/p&gt;
   * &lt;p&gt;
   *   Assumes: &lt;code&gt;Uncurry&lt;/code&gt; has been run already, and no multiple
   *            parameter lists exit.
   * &lt;/p&gt;
   */
  <span class="keyword">class</span> <a title="class TailCallElimination extends TailCalls.this.global.Transformer with ScalaObject" id="580708">TailCallElimination</a><span title="ScalaObject">(</span><a title="TailCalls.this.global.CompilationUnit" id="639705">unit</a>: <a href="../CompilationUnits.scala.html#39428" title="TailCalls.this.global.CompilationUnit">CompilationUnit</a>) <span class="keyword">extends</span> <a href="../ast/Trees.scala.html#26932" title="TailCalls.this.global.Transformer">Transformer</a> {

    <span class="keyword">class</span> <a title="class Context extends java.lang.Object with ScalaObject" id="639693">Context</a> <span title="ScalaObject">{</span>
      /** The current method */
      <span class="keyword">var</span> <a title="TailCalls.this.global.Symbol" id="639749">currentMethod</a>: <a href="../symtab/Symbols.scala.html#26286" title="TailCalls.this.global.Symbol">Symbol</a> = <a href="../symtab/Symbols.scala.html#26293" title="object TailCalls.this.global.NoSymbol">NoSymbol</a>

      /** The current tail-call label */
      <span class="keyword">var</span> <a title="TailCalls.this.global.Symbol" id="639752">label</a>: <a href="../symtab/Symbols.scala.html#26286" title="TailCalls.this.global.Symbol">Symbol</a> = <a href="../symtab/Symbols.scala.html#26293" title="object TailCalls.this.global.NoSymbol">NoSymbol</a>

      /** The expected type arguments of self-recursive calls */
      <span class="keyword">var</span> <a title="List[TailCalls.this.global.Symbol]" id="639755">tparams</a>: <span title="List[TailCalls.this.global.Symbol]">List</span>[Symbol] = <span title="object Nil">Nil</span>

      /** Tells whether we are in a (possible) tail position */
      <span class="keyword">var</span> <a title="Boolean" id="639758">tailPos</a> = <span title="Boolean(false)" class="keyword">false</span>

      /** Is the label accessed? */
      <span class="keyword">var</span> <a title="Boolean" id="639761">accessed</a> = <span title="Boolean(false)" class="keyword">false</span>

      <span class="keyword">def</span> <a title="(that: TailCallElimination.this.Context)TailCallElimination.this.Context" id="639763" class="keyword">this</a>(<a title="TailCallElimination.this.Context" id="639779">that</a>: <a href="#639693" title="TailCallElimination.this.Context">Context</a>) = <span title="Unit">{</span>
        <a href="#639693" title="Context.this.type" class="keyword">this</a>()
        <a href="#639693" title="Context.this.type" class="keyword">this</a>.<a href="#639749" title="(x$1: TailCalls.this.global.Symbol)Unit">currentMethod</a> = <a href="#639779" title="TailCallElimination.this.Context">that</a>.<a href="#639749" title="=&gt; TailCalls.this.global.Symbol">currentMethod</a>
        <a href="#639693" title="Context.this.type" class="keyword">this</a>.<a href="#639752" title="(x$1: TailCalls.this.global.Symbol)Unit">label</a>         = <a href="#639779" title="TailCallElimination.this.Context">that</a>.<a href="#639752" title="=&gt; TailCalls.this.global.Symbol">label</a>
        <a href="#639693" title="Context.this.type" class="keyword">this</a>.<a href="#639755" title="(x$1: List[TailCalls.this.global.Symbol])Unit">tparams</a>       = <a href="#639779" title="TailCallElimination.this.Context">that</a>.<a href="#639755" title="=&gt; List[TailCalls.this.global.Symbol]">tparams</a>
        <a href="#639693" title="Context.this.type" class="keyword">this</a>.<a href="#639758" title="(x$1: Boolean)Unit">tailPos</a>       = <a href="#639779" title="TailCallElimination.this.Context">that</a>.<a href="#639758" title="=&gt; Boolean">tailPos</a>
        <a href="#639693" title="Context.this.type" class="keyword">this</a>.<a href="#639761" title="(x$1: Boolean)Unit">accessed</a>      = <a href="#639779" title="TailCallElimination.this.Context">that</a>.<a href="#639761" title="=&gt; Boolean">accessed</a>
      }

      /** Create a new method symbol for the current method and store it in
        * the label field.
        */
      <span class="keyword">def</span> <a title="()Unit" id="639764">makeLabel</a>(): <a title="Unit" id="1971">Unit</a> = {
        <a href="#639752" title="(x$1: TailCalls.this.global.Symbol)Unit">label</a> = <a href="#639749" title="=&gt; TailCalls.this.global.Symbol">currentMethod</a>.<a href="../symtab/Symbols.scala.html#27027" title="(pos: scala.tools.nsc.util.Position,name: TailCalls.this.global.Name)TailCalls.this.global.TermSymbol">newLabel</a>(<a href="#639749" title="=&gt; TailCalls.this.global.Symbol">currentMethod</a>.<a href="../symtab/Symbols.scala.html#27006" title="=&gt; scala.tools.nsc.util.Position">pos</a>, <span title="(x$1: Any)java.lang.String" class="string">&quot;_&quot;</span> <a href="../symtab/Names.scala.html#26213" title="implicit scala.tools.nsc.symtab.Names.view : (s: String)TailCalls.this.global.Name">+</a> <a href="#639749" title="=&gt; TailCalls.this.global.Symbol">currentMethod</a>.<a href="../symtab/Symbols.scala.html#27147" title="=&gt; TailCalls.this.global.Name">name</a>)
        <a href="#639761" title="(x$1: Boolean)Unit">accessed</a> = <span title="Boolean(false)" class="keyword">false</span>
      }

      <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="639765">toString</a>(): <span title="String">String</span> = (
        <span title="(x$1: Any)java.lang.String" class="string">&quot;&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#639749" title="=&gt; TailCalls.this.global.Symbol">currentMethod</a>.<a href="../symtab/Symbols.scala.html#27147" title="=&gt; TailCalls.this.global.Name">name</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; tparams: &quot;)" class="string">&quot; tparams: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#639755" title="=&gt; List[TailCalls.this.global.Symbol]">tparams</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; tailPos: &quot;)" class="string">&quot; tailPos: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#639758" title="=&gt; Boolean">tailPos</a> <span title="(x$1: Any)java.lang.String">+</span>
        <span title="java.lang.String(&quot; accessed: &quot;)" class="string">&quot; accessed: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#639761" title="=&gt; Boolean">accessed</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;\012Label: &quot;)" class="string">&quot;\nLabel: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#639752" title="=&gt; TailCalls.this.global.Symbol">label</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;\012Label type: &quot;)" class="string">&quot;\nLabel type: &quot;</span> + <a href="#639752" title="=&gt; TailCalls.this.global.Symbol">label</a>.<a href="../symtab/Symbols.scala.html#27163" title="=&gt; TailCalls.this.global.Type">info</a>
      )
    }

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(that: TailCallElimination.this.Context)TailCallElimination.this.Context" id="639694">mkContext</a>(<a title="TailCallElimination.this.Context" id="639846">that</a>: <a href="#639693" title="TailCallElimination.this.Context">Context</a>) = <a href="#639763" title="(that: TailCallElimination.this.Context)TailCallElimination.this.Context" class="keyword">new</a> <a href="#639693" title="TailCallElimination.this.Context">Context</a>(<a href="#639846" title="TailCallElimination.this.Context">that</a>)
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(that: TailCallElimination.this.Context,tp: Boolean)TailCallElimination.this.Context" id="639695">mkContext</a>(<a title="TailCallElimination.this.Context" id="639854">that</a>: <a href="#639693" title="TailCallElimination.this.Context">Context</a>, <a title="Boolean" id="639855">tp</a>: <span title="Boolean">Boolean</span>): <a href="#639693" title="TailCallElimination.this.Context">Context</a> = {
      <span class="keyword">val</span> <a title="TailCallElimination.this.Context" id="639857">t</a> = <a href="#639694" title="(that: TailCallElimination.this.Context)TailCallElimination.this.Context">mkContext</a>(<a href="#639854" title="TailCallElimination.this.Context">that</a>)
      <a href="#639857" title="TailCallElimination.this.Context">t</a>.<a href="#639758" title="(x$1: Boolean)Unit">tailPos</a> = <a href="#639855" title="Boolean">tp</a>
      <a href="#639857" title="TailCallElimination.this.Context">t</a>
    }

    <span class="keyword">private</span> <span class="keyword">var</span> <a title="TailCallElimination.this.Context" id="639697">ctx</a>: <a href="#639693" title="TailCallElimination.this.Context">Context</a> = <span title="TailCallElimination.this.Context" class="keyword">new</span> <a href="#639693" title="TailCallElimination.this.Context">Context</a>()

    /** Rewrite this tree to contain no tail recursive calls */
    <span class="keyword">def</span> <a title="(tree: TailCalls.this.global.Tree,nctx: TailCallElimination.this.Context)TailCalls.this.global.Tree" id="639699">transform</a>(<a title="TailCalls.this.global.Tree" id="639873">tree</a>: <a href="../ast/Trees.scala.html#26752" title="TailCalls.this.global.Tree">Tree</a>, <a title="TailCallElimination.this.Context" id="639874">nctx</a>: <a href="#639693" title="TailCallElimination.this.Context">Context</a>): <a href="../ast/Trees.scala.html#26752" title="TailCalls.this.global.Tree">Tree</a> = {
      <span class="keyword">val</span> <a title="TailCallElimination.this.Context" id="639877">oldCtx</a> = <a href="#639697" title="=&gt; TailCallElimination.this.Context">ctx</a>
      <a href="#639697" title="(x$1: TailCallElimination.this.Context)Unit">ctx</a> = <a href="#639874" title="TailCallElimination.this.Context">nctx</a>
      <span class="keyword">val</span> <a title="TailCalls.this.global.Tree" id="639878">t</a> = <a href="#639700" title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree">transform</a>(<a href="#639873" title="TailCalls.this.global.Tree">tree</a>)
      <a href="#580708" title="TailCallElimination.this.type" class="keyword">this</a>.<a href="#639697" title="(x$1: TailCallElimination.this.Context)Unit">ctx</a> = <a href="#639877" title="TailCallElimination.this.Context">oldCtx</a>
      <a href="#639878" title="TailCalls.this.global.Tree">t</a>
    }

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree" id="639700">transform</a>(<a title="TailCalls.this.global.Tree" id="639882">tree</a>: <a href="../ast/Trees.scala.html#26752" title="TailCalls.this.global.Tree">Tree</a>): <a href="../ast/Trees.scala.html#26752" title="TailCalls.this.global.Tree">Tree</a> = {
      <a href="#639882" title="TailCalls.this.global.Tree">tree</a> <span title="TailCalls.this.global.Tree" class="keyword">match</span> {

        <span title="TailCalls.this.global.DefDef" class="keyword">case</span> <a title="TailCalls.this.global.DefDef" id="639893">dd</a> @ DefDef(<a title="TailCalls.this.global.Modifiers" id="639902">mods</a>, <a title="TailCalls.this.global.Name" id="639903">name</a>, <a title="List[TailCalls.this.global.TypeDef]" id="639904">tparams</a>, <a title="List[List[TailCalls.this.global.ValDef]]" id="639905">vparams</a>, <a title="TailCalls.this.global.Tree" id="639906">tpt</a>, <a title="TailCalls.this.global.Tree" id="639907">rhs</a>) =&gt;
          <a href="../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Entering DefDef: &quot;</span> + <a href="#639903" title="TailCalls.this.global.Name">name</a>)
          <span class="keyword">var</span> <a title="Boolean" id="639910">isTransformed</a> = <span title="Boolean(false)" class="keyword">false</span>
          <span class="keyword">val</span> <a title="TailCallElimination.this.Context" id="639911">newCtx</a> = <a href="#639694" title="(that: TailCallElimination.this.Context)TailCallElimination.this.Context">mkContext</a>(<a href="#639697" title="=&gt; TailCallElimination.this.Context">ctx</a>)
          <a href="#639911" title="TailCallElimination.this.Context">newCtx</a>.<a href="#639749" title="(x$1: TailCalls.this.global.Symbol)Unit">currentMethod</a> = <a href="#639882" title="TailCalls.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; TailCalls.this.global.Symbol">symbol</a>
          <a href="#639911" title="TailCallElimination.this.Context">newCtx</a>.<a href="#639764" title="()Unit">makeLabel</a>()
          <span class="keyword">val</span> <a title="TailCalls.this.global.Symbol" id="639912">currentClassParam</a> = <a href="#639882" title="TailCalls.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; TailCalls.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27042" title="(argtype: TailCalls.this.global.Type)TailCalls.this.global.Symbol">newSyntheticValueParam</a>(<a href="../ast/Trees.scala.html#45703" title="=&gt; TailCalls.this.global.Symbol">currentClass</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; TailCalls.this.global.Type">tpe</a>)
          <a href="#639911" title="TailCallElimination.this.Context">newCtx</a>.<a href="#639752" title="=&gt; TailCalls.this.global.Symbol">label</a>.<a href="../symtab/Symbols.scala.html#27164" title="(info: TailCalls.this.global.Type)TailCalls.this.global.Symbol">setInfo</a>(<a href="../symtab/Types.scala.html#44127" title="(params: List[TailCalls.this.global.Symbol],resultType: TailCalls.this.global.Type)TailCalls.this.global.MethodType">MethodType</a>(<a href="#639912" title="TailCalls.this.global.Symbol">currentClassParam</a> <a href="#639952" title="TailCalls.this.global.Symbol">::</a> <a href="#639882" title="TailCalls.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; TailCalls.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; TailCalls.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30385" title="(x: TailCalls.this.global.Symbol)List[TailCalls.this.global.Symbol]">params</a>, <a href="#639882" title="TailCalls.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; TailCalls.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; TailCalls.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30382" title="=&gt; TailCalls.this.global.Type">finalResultType</a>))
          <a href="#639911" title="TailCallElimination.this.Context">newCtx</a>.<a href="#639758" title="(x$1: Boolean)Unit">tailPos</a> = <span title="Boolean(true)" class="keyword">true</span>

          <span class="keyword">val</span> <a title="Boolean" id="639913">isEligible</a> = <a href="#639911" title="TailCallElimination.this.Context">newCtx</a>.<a href="#639749" title="=&gt; TailCalls.this.global.Symbol">currentMethod</a>.<a href="../symtab/Symbols.scala.html#27128" title="(x$1: Boolean)Boolean">isFinal</a> || (<a href="#639911" title="TailCallElimination.this.Context">newCtx</a>.<a href="#639749" title="=&gt; TailCalls.this.global.Symbol">currentMethod</a>.<a href="../symtab/Symbols.scala.html#27155" title="(mask: Long)Boolean">enclClass</a> hasFlag Flags.<span title="Long(256L)">MODULE</span>)
          <span title="Any" class="keyword">if</span> (<a href="#639913" title="Boolean">isEligible</a>) {
            <a href="#639911" title="TailCallElimination.this.Context">newCtx</a>.<a href="#639755" title="(x$1: List[TailCalls.this.global.Symbol])Unit">tparams</a> = <span title="object Nil">Nil</span>
            <a href="../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;  Considering &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#639903" title="TailCalls.this.global.Name">name</a> + <span title="java.lang.String(&quot; for tailcalls&quot;)" class="string">&quot; for tailcalls&quot;</span>)
            <a href="#639882" title="TailCalls.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; TailCalls.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; TailCalls.this.global.Type">tpe</a> <span title="Any" class="keyword">match</span> {
              <span title="TailCalls.this.global.Symbol" class="keyword">case</span> PolyType(<a title="List[TailCalls.this.global.Symbol]" id="639980">tpes</a>, <a title="TailCalls.this.global.Type" id="639981">restpe</a>) =&gt;
                <a href="#639911" title="TailCallElimination.this.Context">newCtx</a>.<a href="#639755" title="(x$1: List[TailCalls.this.global.Symbol])Unit">tparams</a> = <a href="#639904" title="(f: (TailCalls.this.global.TypeDef) =&gt; TailCalls.this.global.Symbol)(implicit bf: scala.collection.generic.BuilderFactory[TailCalls.this.global.Symbol,List[TailCalls.this.global.Symbol],List[TailCalls.this.global.TypeDef]])List[TailCalls.this.global.Symbol]">tparams</a> <span title="scala.collection.generic.BuilderFactory[TailCalls.this.global.Symbol,List[TailCalls.this.global.Symbol],List#Coll]">map</span> (<a href="#639992" title="TailCalls.this.global.TypeDef">_</a>.<a href="../ast/Trees.scala.html#48738" title="=&gt; TailCalls.this.global.Symbol">symbol</a>)
                <a href="#639911" title="TailCallElimination.this.Context">newCtx</a>.<a href="#639752" title="=&gt; TailCalls.this.global.Symbol">label</a>.<a href="../symtab/Symbols.scala.html#27164" title="(info: TailCalls.this.global.Type)TailCalls.this.global.Symbol">setInfo</a>(
                  <a href="#639911" title="TailCallElimination.this.Context">newCtx</a>.<a href="#639752" title="=&gt; TailCalls.this.global.Symbol">label</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; TailCalls.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30411" title="(from: List[TailCalls.this.global.Symbol],to: List[TailCalls.this.global.Symbol])TailCalls.this.global.Type">substSym</a>(<a href="#639980" title="List[TailCalls.this.global.Symbol]">tpes</a>, <a href="#639904" title="(f: (TailCalls.this.global.TypeDef) =&gt; TailCalls.this.global.Symbol)(implicit bf: scala.collection.generic.BuilderFactory[TailCalls.this.global.Symbol,List[TailCalls.this.global.Symbol],List[TailCalls.this.global.TypeDef]])List[TailCalls.this.global.Symbol]">tparams</a> <span title="scala.collection.generic.BuilderFactory[TailCalls.this.global.Symbol,List[TailCalls.this.global.Symbol],List#Coll]">map</span> (<a href="#640038" title="TailCalls.this.global.TypeDef">_</a>.<a href="../ast/Trees.scala.html#48738" title="=&gt; TailCalls.this.global.Symbol">symbol</a>)))
              <span title="Unit" class="keyword">case</span> _ =&gt;
            }
          }
          <span class="keyword">val</span> <a title="TailCalls.this.global.DefDef" id="639914">t1</a> = <a href="../ast/Trees.scala.html#45697" title="=&gt; TailCalls.this.global.TreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#48798" title="(tree: TailCalls.this.global.Tree,mods: TailCalls.this.global.Modifiers,name: TailCalls.this.global.Name,tparams: List[TailCalls.this.global.TypeDef],vparamss: List[List[TailCalls.this.global.ValDef]],tpt: TailCalls.this.global.Tree,rhs: TailCalls.this.global.Tree)TailCalls.this.global.DefDef">DefDef</a>(<a href="#639882" title="TailCalls.this.global.Tree">tree</a>, <a href="#639902" title="TailCalls.this.global.Modifiers">mods</a>, <a href="#639903" title="TailCalls.this.global.Name">name</a>, <a href="#639904" title="List[TailCalls.this.global.TypeDef]">tparams</a>, <a href="#639905" title="List[List[TailCalls.this.global.ValDef]]">vparams</a>, <a href="#639906" title="TailCalls.this.global.Tree">tpt</a>,
            <a href="#639699" title="(tree: TailCalls.this.global.Tree,nctx: TailCallElimination.this.Context)TailCalls.this.global.Tree">transform</a>(<a href="#639907" title="TailCalls.this.global.Tree">rhs</a>, <a href="#639911" title="TailCallElimination.this.Context">newCtx</a>) <span title="TailCalls.this.global.Tree" class="keyword">match</span> {
              <span title="TailCalls.this.global.analyzer.global.Tree" class="keyword">case</span> <a title="TailCalls.this.global.Tree" id="640081">newRHS</a> <span class="keyword">if</span> <a href="#639913" title="(x$1: Boolean)Boolean">isEligible</a> &amp;&amp; <a href="#639911" title="TailCallElimination.this.Context">newCtx</a>.<a href="#639761" title="=&gt; Boolean">accessed</a> =&gt;
                <a href="../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Rewrote def &quot;</span> + <a href="#639911" title="TailCallElimination.this.Context">newCtx</a>.<a href="#639749" title="=&gt; TailCalls.this.global.Symbol">currentMethod</a>)
                <a href="#639910" title="Boolean">isTransformed</a> = <span title="Boolean(true)" class="keyword">true</span>
                <span class="keyword">val</span> <a title="TailCalls.this.global.TermSymbol" id="640084">newThis</a> = <a href="#639911" title="TailCallElimination.this.Context">newCtx</a>.<a href="#639749" title="=&gt; TailCalls.this.global.Symbol">currentMethod</a>
                  . <a href="../symtab/Symbols.scala.html#27022" title="(pos: scala.tools.nsc.util.Position,name: TailCalls.this.global.Name)TailCalls.this.global.TermSymbol">newValue</a> (<a href="#639882" title="TailCalls.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29547" title="=&gt; scala.tools.nsc.util.Position">pos</a>, <a href="../symtab/StdNames.scala.html#26690" title="object TailCalls.this.global.nme">nme</a>.<a href="../symtab/StdNames.scala.html#29903" title="=&gt; TailCalls.this.global.Name">THIS</a>)
                  . <a href="../symtab/Symbols.scala.html#27164" title="(info: TailCalls.this.global.Type)TailCalls.this.global.TermSymbol">setInfo</a> (<a href="../ast/Trees.scala.html#45703" title="=&gt; TailCalls.this.global.Symbol">currentClass</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; TailCalls.this.global.Type">tpe</a>)
                  . <a href="../symtab/Symbols.scala.html#27152" title="(mask: Long)TailCalls.this.global.TermSymbol">setFlag</a> (Flags.<span title="Long(2097152L)">SYNTHETIC</span>)
                
                <a href="../typechecker/Typers.scala.html#42872" title="(tree: TailCalls.this.global.analyzer.global.Tree)TailCalls.this.global.analyzer.global.Tree">typed</a>(<a href="../ast/Trees.scala.html#26943" title="(pos: scala.tools.nsc.util.Position)(tree: TailCalls.this.global.Block)TailCalls.this.global.Block">atPos</a>(<a href="#639882" title="TailCalls.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29547" title="=&gt; scala.tools.nsc.util.Position">pos</a>)(<a href="../ast/Trees.scala.html#49279" title="(stats: List[TailCalls.this.global.Tree],expr: TailCalls.this.global.Tree)TailCalls.this.global.Block">Block</a>(
                  <a title="(xs: TailCalls.this.global.ValDef*)List[TailCalls.this.global.ValDef]" id="24478">List</a>(<a href="../ast/Trees.scala.html#26781" title="(sym: TailCalls.this.global.Symbol,rhs: TailCalls.this.global.Tree)TailCalls.this.global.ValDef">ValDef</a>(<a href="#640084" title="TailCalls.this.global.TermSymbol">newThis</a>, <a href="../ast/Trees.scala.html#26886" title="(sym: TailCalls.this.global.Symbol)TailCalls.this.global.Tree">This</a>(<a href="../ast/Trees.scala.html#45703" title="=&gt; TailCalls.this.global.Symbol">currentClass</a>))),
                  <a href="../ast/Trees.scala.html#26801" title="(sym: TailCalls.this.global.Symbol,params: List[TailCalls.this.global.Symbol],rhs: TailCalls.this.global.Tree)TailCalls.this.global.LabelDef">LabelDef</a>(<a href="#639911" title="TailCallElimination.this.Context">newCtx</a>.<a href="#639752" title="=&gt; TailCalls.this.global.Symbol">label</a>, <a href="#640084" title="TailCalls.this.global.TermSymbol">newThis</a> <a href="#640210" title="TailCalls.this.global.TermSymbol">::</a> <span title="(x: TailCalls.this.global.Symbol)List[TailCalls.this.global.Symbol]">(</span><a href="#639905" title="List[List[TailCalls.this.global.ValDef]]">vparams</a>.<a href="#640223" title="(f: (TailCalls.this.global.ValDef) =&gt; TailCalls.this.global.Symbol)(implicit bf: scala.collection.generic.BuilderFactory[TailCalls.this.global.Symbol,List[TailCalls.this.global.Symbol],List[TailCalls.this.global.ValDef]])List[TailCalls.this.global.Symbol]" id="7935">flatten</a> <span title="scala.collection.generic.BuilderFactory[TailCalls.this.global.Symbol,List[TailCalls.this.global.Symbol],List#Coll]">map</span> (<a href="#640238" title="TailCalls.this.global.ValDef">_</a>.<a href="../ast/Trees.scala.html#48738" title="=&gt; TailCalls.this.global.Symbol">symbol</a>)), <a href="#640081" title="TailCalls.this.global.Tree">newRHS</a>)
                )))
              <span title="TailCalls.this.global.Tree" class="keyword">case</span> <a title="TailCalls.this.global.Tree" id="640357">rhs</a>  =&gt; <a href="#640357" title="TailCalls.this.global.Tree">rhs</a>
            }
          )

          <span title="Unit" class="keyword">if</span> (<span title="(x$1: Boolean)Boolean">!</span><a href="#639910" title="Boolean">isTransformed</a> &amp;&amp; <a href="#580707" title="(defdef: TailCalls.this.global.DefDef)Boolean">tailrecRequired</a>(<a href="#639893" title="TailCalls.this.global.DefDef">dd</a>))
            <a href="#639705" title="TailCalls.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#45687" title="(pos: scala.tools.nsc.util.Position,msg: String)Unit">error</a>(<a href="#639893" title="TailCalls.this.global.DefDef">dd</a>.<a href="../ast/Trees.scala.html#29547" title="=&gt; scala.tools.nsc.util.Position">pos</a>, <span title="java.lang.String(&quot;could not optimize @tailrec annotated method&quot;)" class="string">&quot;could not optimize @tailrec annotated method&quot;</span>)
            
          <a href="../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Leaving DefDef: &quot;</span> + <a href="#639903" title="TailCalls.this.global.Name">name</a>)
          <a href="#639914" title="TailCalls.this.global.DefDef">t1</a>

        <span title="TailCalls.this.global.Tree" class="keyword">case</span> <a href="../ast/Trees.scala.html#26761" title="object TailCalls.this.global.EmptyTree">EmptyTree</a> =&gt; <a href="#639882" title="TailCalls.this.global.Tree">tree</a>

        <span title="TailCalls.this.global.Tree" class="keyword">case</span> PackageDef(_, _) =&gt;
          <span class="keyword">super</span>.<a href="../ast/Trees.scala.html#45705" title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree">transform</a>(<a href="#639882" title="TailCalls.this.global.Tree">tree</a>)

        <span title="TailCalls.this.global.Tree" class="keyword">case</span> ClassDef(_, <a title="TailCalls.this.global.Name" id="640384">name</a>, _, _) =&gt;
          <a href="../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Entering class &quot;</span> + <a href="#640384" title="TailCalls.this.global.Name">name</a>)
          <span class="keyword">val</span> <a title="TailCalls.this.global.Tree" id="640387">res</a> = <span class="keyword">super</span>.<a href="../ast/Trees.scala.html#45705" title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree">transform</a>(<a href="#639882" title="TailCalls.this.global.Tree">tree</a>)
          <a href="../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Leaving class &quot;</span> + <a href="#640384" title="TailCalls.this.global.Name">name</a>)
          <a href="#640387" title="TailCalls.this.global.Tree">res</a>

        <span title="TailCalls.this.global.Tree" class="keyword">case</span> ValDef(<a title="TailCalls.this.global.Modifiers" id="640406">mods</a>, <a title="TailCalls.this.global.Name" id="640407">name</a>, <a title="TailCalls.this.global.Tree" id="640408">tpt</a>, <a title="TailCalls.this.global.Tree" id="640409">rhs</a>) =&gt; <span class="keyword">super</span>.<a href="../ast/Trees.scala.html#45705" title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree">transform</a>(<a href="#639882" title="TailCalls.this.global.Tree">tree</a>)
        <span title="TailCalls.this.global.Tree" class="keyword">case</span> LabelDef(<a title="TailCalls.this.global.Name" id="640421">name</a>, <a title="List[TailCalls.this.global.Ident]" id="640422">params</a>, <a title="TailCalls.this.global.Tree" id="640423">rhs</a>) =&gt; <span class="keyword">super</span>.<a href="../ast/Trees.scala.html#45705" title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree">transform</a>(<a href="#639882" title="TailCalls.this.global.Tree">tree</a>)

        <span title="TailCalls.this.global.Tree" class="keyword">case</span> Template(<a title="List[TailCalls.this.global.Tree]" id="640435">parents</a>, <a title="TailCalls.this.global.ValDef" id="640436">self</a>, <a title="List[TailCalls.this.global.Tree]" id="640437">body</a>) =&gt;
          <span class="keyword">super</span>.<a href="../ast/Trees.scala.html#45705" title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree">transform</a>(<a href="#639882" title="TailCalls.this.global.Tree">tree</a>)

        <span title="TailCalls.this.global.Block" class="keyword">case</span> Block(<a title="List[TailCalls.this.global.Tree]" id="640446">stats</a>, <a title="TailCalls.this.global.Tree" id="640447">expr</a>) =&gt;
          <a href="../ast/Trees.scala.html#45697" title="=&gt; TailCalls.this.global.TreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#48804" title="(tree: TailCalls.this.global.Tree,stats: List[TailCalls.this.global.Tree],expr: TailCalls.this.global.Tree)TailCalls.this.global.Block">Block</a>(<a href="#639882" title="TailCalls.this.global.Tree">tree</a>,
                         <a href="#639701" title="(trees: List[TailCalls.this.global.Tree],nctx: TailCallElimination.this.Context)List[TailCalls.this.global.Tree]">transformTrees</a>(<a href="#640446" title="List[TailCalls.this.global.Tree]">stats</a>, <a href="#639695" title="(that: TailCallElimination.this.Context,tp: Boolean)TailCallElimination.this.Context">mkContext</a>(<a href="#639697" title="=&gt; TailCallElimination.this.Context">ctx</a>, <span title="Boolean(false)" class="keyword">false</span>)),
                         <a href="#639700" title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree">transform</a>(<a href="#640447" title="TailCalls.this.global.Tree">expr</a>))

        <span title="TailCalls.this.global.CaseDef" class="keyword">case</span> CaseDef(<a title="TailCalls.this.global.Tree" id="640525">pat</a>, <a title="TailCalls.this.global.Tree" id="640526">guard</a>, <a title="TailCalls.this.global.Tree" id="640527">body</a>) =&gt;
          <a href="../ast/Trees.scala.html#45697" title="=&gt; TailCalls.this.global.TreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#48805" title="(tree: TailCalls.this.global.Tree,pat: TailCalls.this.global.Tree,guard: TailCalls.this.global.Tree,body: TailCalls.this.global.Tree)TailCalls.this.global.CaseDef">CaseDef</a>(<a href="#639882" title="TailCalls.this.global.Tree">tree</a>, <a href="#640525" title="TailCalls.this.global.Tree">pat</a>, <a href="#640526" title="TailCalls.this.global.Tree">guard</a>, <a href="#639700" title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree">transform</a>(<a href="#640527" title="TailCalls.this.global.Tree">body</a>))

        <span title="Nothing" class="keyword">case</span> Sequence(_) | Alternative(_) |
             Star(_)     | Bind(_, _) =&gt;
          <span title="Nothing" class="keyword">throw</span> <a title="(x$1: java.lang.String)java.lang.RuntimeException" id="29432" class="keyword">new</a> <a title="java.lang.RuntimeException" id="7891">RuntimeException</a>(<span title="java.lang.String(&quot;We should've never gotten inside a pattern&quot;)" class="string">&quot;We should've never gotten inside a pattern&quot;</span>)

        <span title="TailCalls.this.global.Tree" class="keyword">case</span> Function(<a title="List[TailCalls.this.global.ValDef]" id="640566">vparams</a>, <a title="TailCalls.this.global.Tree" id="640567">body</a>) =&gt;
          <a href="#639882" title="TailCalls.this.global.Tree">tree</a>
          //throw new RuntimeException(&quot;Anonymous function should not exist at this point. at: &quot; + unit.position(tree.pos));

        <span title="TailCalls.this.global.Tree" class="keyword">case</span> Assign(<a title="TailCalls.this.global.Tree" id="640572">lhs</a>, <a title="TailCalls.this.global.Tree" id="640573">rhs</a>) =&gt;
          <span class="keyword">super</span>.<a href="../ast/Trees.scala.html#45705" title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree">transform</a>(<a href="#639882" title="TailCalls.this.global.Tree">tree</a>)

        <span title="TailCalls.this.global.If" class="keyword">case</span> If(<a title="TailCalls.this.global.Tree" id="640583">cond</a>, <a title="TailCalls.this.global.Tree" id="640584">thenp</a>, <a title="TailCalls.this.global.Tree" id="640585">elsep</a>) =&gt;
          <a href="../ast/Trees.scala.html#45697" title="=&gt; TailCalls.this.global.TreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#48815" title="(tree: TailCalls.this.global.Tree,cond: TailCalls.this.global.Tree,thenp: TailCalls.this.global.Tree,elsep: TailCalls.this.global.Tree)TailCalls.this.global.If">If</a>(<a href="#639882" title="TailCalls.this.global.Tree">tree</a>, <a href="#640583" title="TailCalls.this.global.Tree">cond</a>, <a href="#639700" title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree">transform</a>(<a href="#640584" title="TailCalls.this.global.Tree">thenp</a>), <a href="#639700" title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree">transform</a>(<a href="#640585" title="TailCalls.this.global.Tree">elsep</a>))

        <span title="TailCalls.this.global.Match" class="keyword">case</span> Match(<a title="TailCalls.this.global.Tree" id="640610">selector</a>, <a title="List[TailCalls.this.global.CaseDef]" id="640611">cases</a>) =&gt; //super.transform(tree);
          <a href="../ast/Trees.scala.html#45697" title="=&gt; TailCalls.this.global.TreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#48816" title="(tree: TailCalls.this.global.Tree,selector: TailCalls.this.global.Tree,cases: List[TailCalls.this.global.CaseDef])TailCalls.this.global.Match">Match</a>(<a href="#639882" title="TailCalls.this.global.Tree">tree</a>, <a href="#639699" title="(tree: TailCalls.this.global.Tree,nctx: TailCallElimination.this.Context)TailCalls.this.global.Tree">transform</a>(<a href="#640610" title="TailCalls.this.global.Tree">selector</a>, <a href="#639695" title="(that: TailCallElimination.this.Context,tp: Boolean)TailCallElimination.this.Context">mkContext</a>(<a href="#639697" title="=&gt; TailCallElimination.this.Context">ctx</a>, <span title="Boolean(false)" class="keyword">false</span>)), <a href="../ast/Trees.scala.html#45706" title="(trees: List[TailCalls.this.global.Tree])List[TailCalls.this.global.Tree]">transformTrees</a>(<a href="#640611" title="List[TailCalls.this.global.CaseDef]">cases</a>).<span title="[T0]T0">asInstanceOf</span><span title="List[TailCalls.this.global.CaseDef]">[</span><span title="List[TailCalls.this.global.CaseDef]">List</span>[CaseDef]])

        <span title="TailCalls.this.global.Tree" class="keyword">case</span> Return(<a title="TailCalls.this.global.Tree" id="640648">expr</a>) =&gt; <span class="keyword">super</span>.<a href="../ast/Trees.scala.html#45705" title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree">transform</a>(<a href="#639882" title="TailCalls.this.global.Tree">tree</a>)
        <span title="TailCalls.this.global.Try" class="keyword">case</span> Try(<a title="TailCalls.this.global.Tree" id="640658">block</a>, <a title="List[TailCalls.this.global.CaseDef]" id="640659">catches</a>, <a title="TailCalls.this.global.Tree" id="640660">finalizer</a>) =&gt; 
           // no calls inside a try are in tail position, but keep recursing for nested functions
          <a href="../ast/Trees.scala.html#45697" title="=&gt; TailCalls.this.global.TreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#48818" title="(tree: TailCalls.this.global.Tree,block: TailCalls.this.global.Tree,catches: List[TailCalls.this.global.CaseDef],finalizer: TailCalls.this.global.Tree)TailCalls.this.global.Try">Try</a>(<a href="#639882" title="TailCalls.this.global.Tree">tree</a>, <a href="#639699" title="(tree: TailCalls.this.global.Tree,nctx: TailCallElimination.this.Context)TailCalls.this.global.Tree">transform</a>(<a href="#640658" title="TailCalls.this.global.Tree">block</a>, <a href="#639695" title="(that: TailCallElimination.this.Context,tp: Boolean)TailCallElimination.this.Context">mkContext</a>(<a href="#639697" title="=&gt; TailCallElimination.this.Context">ctx</a>, <span title="Boolean(false)" class="keyword">false</span>)),
                       <a href="#639701" title="(trees: List[TailCalls.this.global.Tree],nctx: TailCallElimination.this.Context)List[TailCalls.this.global.Tree]">transformTrees</a>(<a href="#640659" title="List[TailCalls.this.global.CaseDef]">catches</a>, <a href="#639695" title="(that: TailCallElimination.this.Context,tp: Boolean)TailCallElimination.this.Context">mkContext</a>(<a href="#639697" title="=&gt; TailCallElimination.this.Context">ctx</a>, <span title="Boolean(false)" class="keyword">false</span>)).<span title="[T0]T0">asInstanceOf</span><span title="List[TailCalls.this.global.CaseDef]">[</span><span title="List[TailCalls.this.global.CaseDef]">List</span>[CaseDef]],
                       <a href="#639699" title="(tree: TailCalls.this.global.Tree,nctx: TailCallElimination.this.Context)TailCalls.this.global.Tree">transform</a>(<a href="#640660" title="TailCalls.this.global.Tree">finalizer</a>, <a href="#639695" title="(that: TailCallElimination.this.Context,tp: Boolean)TailCallElimination.this.Context">mkContext</a>(<a href="#639697" title="=&gt; TailCallElimination.this.Context">ctx</a>, <span title="Boolean(false)" class="keyword">false</span>)))

        <span title="TailCalls.this.global.Tree" class="keyword">case</span> Throw(<a title="TailCalls.this.global.Tree" id="640730">expr</a>) =&gt; <span class="keyword">super</span>.<a href="../ast/Trees.scala.html#45705" title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree">transform</a>(<a href="#639882" title="TailCalls.this.global.Tree">tree</a>)
        <span title="TailCalls.this.global.Tree" class="keyword">case</span> New(<a title="TailCalls.this.global.Tree" id="640740">tpt</a>) =&gt; <span class="keyword">super</span>.<a href="../ast/Trees.scala.html#45705" title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree">transform</a>(<a href="#639882" title="TailCalls.this.global.Tree">tree</a>)
        <span title="TailCalls.this.global.Tree" class="keyword">case</span> Typed(<a title="TailCalls.this.global.Tree" id="640749">expr</a>, <a title="TailCalls.this.global.Tree" id="640750">tpt</a>) =&gt; <span class="keyword">super</span>.<a href="../ast/Trees.scala.html#45705" title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree">transform</a>(<a href="#639882" title="TailCalls.this.global.Tree">tree</a>)

        <span title="TailCalls.this.global.Tree" class="keyword">case</span> Apply(<a title="TailCalls.this.global.TypeApply" id="640759">tapply</a> @ TypeApply(<a title="TailCalls.this.global.Tree" id="640762">fun</a>, <a title="List[TailCalls.this.global.Tree]" id="640763">targs</a>), <a title="List[TailCalls.this.global.Tree]" id="640766">vargs</a>) =&gt;
          <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="TailCalls.this.global.Apply" id="640770">defaultTree</a> = <a href="../ast/Trees.scala.html#45697" title="=&gt; TailCalls.this.global.TreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#48823" title="(tree: TailCalls.this.global.Tree,fun: TailCalls.this.global.Tree,args: List[TailCalls.this.global.Tree])TailCalls.this.global.Apply">Apply</a>(<a href="#639882" title="TailCalls.this.global.Tree">tree</a>, <a href="#640759" title="TailCalls.this.global.TypeApply">tapply</a>, <a href="#639701" title="(trees: List[TailCalls.this.global.Tree],nctx: TailCallElimination.this.Context)List[TailCalls.this.global.Tree]">transformTrees</a>(<a href="#640766" title="List[TailCalls.this.global.Tree]">vargs</a>, <a href="#639695" title="(that: TailCallElimination.this.Context,tp: Boolean)TailCallElimination.this.Context">mkContext</a>(<a href="#639697" title="=&gt; TailCallElimination.this.Context">ctx</a>, <span title="Boolean(false)" class="keyword">false</span>)))
          <span title="TailCalls.this.global.Tree" class="keyword">if</span> ( <a href="#639697" title="=&gt; TailCallElimination.this.Context">ctx</a>.<a href="#639749" title="=&gt; TailCalls.this.global.Symbol">currentMethod</a>.<a href="../symtab/Symbols.scala.html#27128" title="(x$1: Boolean)Boolean">isFinal</a> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span>
               <a href="#639697" title="=&gt; TailCallElimination.this.Context">ctx</a>.<a href="#639758" title="=&gt; Boolean">tailPos</a> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span>
               <a href="#639703" title="(ts1: List[TailCalls.this.global.Symbol],ts2: List[TailCalls.this.global.Symbol])Boolean">isSameTypes</a>(<a href="#639697" title="=&gt; TailCallElimination.this.Context">ctx</a>.<a href="#639755" title="=&gt; List[TailCalls.this.global.Symbol]">tparams</a>, <a href="#640763" title="(f: (TailCalls.this.global.Tree) =&gt; TailCalls.this.global.Symbol)(implicit bf: scala.collection.generic.BuilderFactory[TailCalls.this.global.Symbol,List[TailCalls.this.global.Symbol],List[TailCalls.this.global.Tree]])List[TailCalls.this.global.Symbol]">targs</a> <span title="scala.collection.generic.BuilderFactory[TailCalls.this.global.Symbol,List[TailCalls.this.global.Symbol],List#Coll]">map</span> (<a href="#640809" title="TailCalls.this.global.Tree">_</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; TailCalls.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30366" title="=&gt; TailCalls.this.global.Symbol">typeSymbol</a>)) &amp;&amp;
               <a href="#639704" title="(fun: TailCalls.this.global.Tree)Boolean">isRecursiveCall</a>(<a href="#640762" title="TailCalls.this.global.Tree">fun</a>)) {
            <a href="#640762" title="TailCalls.this.global.Tree">fun</a> <span title="TailCalls.this.global.Tree" class="keyword">match</span> {
              <span title="TailCalls.this.global.Tree" class="keyword">case</span> Select(<a title="TailCalls.this.global.Tree" id="640848">receiver</a>, _) =&gt;
                <span class="keyword">val</span> <a title="TailCalls.this.global.Type" id="640851">recTpe</a> = <a href="#640848" title="TailCalls.this.global.Tree">receiver</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; TailCalls.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30370" title="=&gt; TailCalls.this.global.Type">widen</a>
                <span class="keyword">val</span> <a title="TailCalls.this.global.Type" id="640852">enclTpe</a> = <a href="#639697" title="=&gt; TailCallElimination.this.Context">ctx</a>.<a href="#639749" title="=&gt; TailCalls.this.global.Symbol">currentMethod</a>.<a href="../symtab/Symbols.scala.html#27190" title="=&gt; TailCalls.this.global.Symbol">enclClass</a>.<a href="../symtab/Symbols.scala.html#27194" title="=&gt; TailCalls.this.global.Type">typeOfThis</a>
                // make sure the type of 'this' doesn't change through this polymorphic recursive call
                <span title="TailCalls.this.global.Tree" class="keyword">if</span> (<span title="(x$1: Boolean)Boolean">!</span><a href="../Global.scala.html#39416" title="=&gt; Boolean">forMSIL</a> &amp;&amp; 
                    (<a href="#640848" title="TailCalls.this.global.Tree">receiver</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; TailCalls.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30387" title="=&gt; List[TailCalls.this.global.Symbol]">typeParams</a>.<a title="(x$1: Boolean)Boolean" id="25593">isEmpty</a> || 
                      (<a href="#640848" title="TailCalls.this.global.Tree">receiver</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; TailCalls.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30370" title="(x$1: AnyRef)Boolean">widen</a> == <a href="#639697" title="=&gt; TailCallElimination.this.Context">ctx</a>.<a href="#639749" title="=&gt; TailCalls.this.global.Symbol">currentMethod</a>.<a href="../symtab/Symbols.scala.html#27190" title="=&gt; TailCalls.this.global.Symbol">enclClass</a>.<a href="../symtab/Symbols.scala.html#27194" title="=&gt; TailCalls.this.global.Type">typeOfThis</a>))) 
                  <a href="#639702" title="(fun: TailCalls.this.global.Tree,args: List[TailCalls.this.global.Tree])TailCalls.this.global.Tree">rewriteTailCall</a>(<a href="#640762" title="TailCalls.this.global.Tree">fun</a>, <a href="#640848" title="TailCalls.this.global.Tree">receiver</a> <a href="#640868" title="TailCalls.this.global.Tree">::</a> <a href="#639701" title="(trees: List[TailCalls.this.global.Tree],nctx: TailCallElimination.this.Context)List[TailCalls.this.global.Tree]">transformTrees</a><span title="(x: TailCalls.this.global.Tree)List[TailCalls.this.global.Tree]">(</span><a href="#640766" title="List[TailCalls.this.global.Tree]">vargs</a>, <a href="#639695" title="(that: TailCallElimination.this.Context,tp: Boolean)TailCallElimination.this.Context">mkContext</a>(<a href="#639697" title="=&gt; TailCallElimination.this.Context">ctx</a>, <span title="Boolean(false)" class="keyword">false</span>))) 
                <span class="keyword">else</span> 
                  <a href="#640769" title="=&gt; TailCalls.this.global.Apply">defaultTree</a>
              <span title="TailCalls.this.global.Tree" class="keyword">case</span> _ =&gt; <a href="#639702" title="(fun: TailCalls.this.global.Tree,args: List[TailCalls.this.global.Tree])TailCalls.this.global.Tree">rewriteTailCall</a>(<a href="#640762" title="TailCalls.this.global.Tree">fun</a>, <a href="../ast/Trees.scala.html#26886" title="(sym: TailCalls.this.global.Symbol)TailCalls.this.global.Tree">This</a>(<a href="../ast/Trees.scala.html#45703" title="=&gt; TailCalls.this.global.Symbol">currentClass</a>) <a href="#640898" title="TailCalls.this.global.Tree">::</a> <a href="#639701" title="(trees: List[TailCalls.this.global.Tree],nctx: TailCallElimination.this.Context)List[TailCalls.this.global.Tree]">transformTrees</a><span title="(x: TailCalls.this.global.Tree)List[TailCalls.this.global.Tree]">(</span><a href="#640766" title="List[TailCalls.this.global.Tree]">vargs</a>, <a href="#639695" title="(that: TailCallElimination.this.Context,tp: Boolean)TailCallElimination.this.Context">mkContext</a>(<a href="#639697" title="=&gt; TailCallElimination.this.Context">ctx</a>, <span title="Boolean(false)" class="keyword">false</span>)))
            }
          } <span class="keyword">else</span>
            <a href="#640769" title="=&gt; TailCalls.this.global.Apply">defaultTree</a>

        <span title="TailCalls.this.global.Tree" class="keyword">case</span> TypeApply(<a title="TailCalls.this.global.Tree" id="640946">fun</a>, <a title="List[TailCalls.this.global.Tree]" id="640947">args</a>) =&gt; 
          <span class="keyword">super</span>.<a href="../ast/Trees.scala.html#45705" title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree">transform</a>(<a href="#639882" title="TailCalls.this.global.Tree">tree</a>)

        <span title="TailCalls.this.global.Apply" class="keyword">case</span> Apply(<a title="TailCalls.this.global.Tree" id="640956">fun</a>, <a title="List[TailCalls.this.global.Tree]" id="640957">args</a>) <span class="keyword">if</span> (<a href="#640956" title="TailCalls.this.global.Tree">fun</a>.<a href="../ast/Trees.scala.html#29553" title="(x$1: AnyRef)Boolean">symbol</a> <span title="(x$1: Boolean)Boolean">==</span> <a href="../symtab/Definitions.scala.html#26638" title="object TailCalls.this.global.definitions">definitions</a>.<a href="../symtab/Definitions.scala.html#28482" title="=&gt; TailCalls.this.global.Symbol">Boolean_or</a> ||
                                  <a href="#640956" title="TailCalls.this.global.Tree">fun</a>.<a href="../ast/Trees.scala.html#29553" title="(x$1: AnyRef)Boolean">symbol</a> == <a href="../symtab/Definitions.scala.html#26638" title="object TailCalls.this.global.definitions">definitions</a>.<a href="../symtab/Definitions.scala.html#28481" title="=&gt; TailCalls.this.global.Symbol">Boolean_and</a>) =&gt;
          <a href="../ast/Trees.scala.html#45697" title="=&gt; TailCalls.this.global.TreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#48823" title="(tree: TailCalls.this.global.Tree,fun: TailCalls.this.global.Tree,args: List[TailCalls.this.global.Tree])TailCalls.this.global.Apply">Apply</a>(<a href="#639882" title="TailCalls.this.global.Tree">tree</a>, <a href="#640956" title="TailCalls.this.global.Tree">fun</a>, <a href="../ast/Trees.scala.html#45706" title="(trees: List[TailCalls.this.global.Tree])List[TailCalls.this.global.Tree]">transformTrees</a>(<a href="#640957" title="List[TailCalls.this.global.Tree]">args</a>))
          
        <span title="TailCalls.this.global.Tree" class="keyword">case</span> Apply(<a title="TailCalls.this.global.Tree" id="640991">fun</a>, <a title="List[TailCalls.this.global.Tree]" id="640992">args</a>) =&gt;
          <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="TailCalls.this.global.Apply" id="640996">defaultTree</a> = <a href="../ast/Trees.scala.html#45697" title="=&gt; TailCalls.this.global.TreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#48823" title="(tree: TailCalls.this.global.Tree,fun: TailCalls.this.global.Tree,args: List[TailCalls.this.global.Tree])TailCalls.this.global.Apply">Apply</a>(<a href="#639882" title="TailCalls.this.global.Tree">tree</a>, <a href="#640991" title="TailCalls.this.global.Tree">fun</a>, <a href="#639701" title="(trees: List[TailCalls.this.global.Tree],nctx: TailCallElimination.this.Context)List[TailCalls.this.global.Tree]">transformTrees</a>(<a href="#640992" title="List[TailCalls.this.global.Tree]">args</a>, <a href="#639695" title="(that: TailCallElimination.this.Context,tp: Boolean)TailCallElimination.this.Context">mkContext</a>(<a href="#639697" title="=&gt; TailCallElimination.this.Context">ctx</a>, <span title="Boolean(false)" class="keyword">false</span>)))
          <span title="TailCalls.this.global.Tree" class="keyword">if</span> (<a href="#639697" title="=&gt; TailCallElimination.this.Context">ctx</a>.<a href="#639749" title="=&gt; TailCalls.this.global.Symbol">currentMethod</a>.<a href="../symtab/Symbols.scala.html#27128" title="(x$1: Boolean)Boolean">isFinal</a> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> 
              <a href="#639697" title="=&gt; TailCallElimination.this.Context">ctx</a>.<a href="#639758" title="=&gt; Boolean">tailPos</a> &amp;&amp; 
              <a href="#639704" title="(fun: TailCalls.this.global.Tree)Boolean">isRecursiveCall</a>(<a href="#640991" title="TailCalls.this.global.Tree">fun</a>)) {
            <a href="#640991" title="TailCalls.this.global.Tree">fun</a> <span title="TailCalls.this.global.Tree" class="keyword">match</span> {
              <span title="TailCalls.this.global.Tree" class="keyword">case</span> Select(<a title="TailCalls.this.global.Tree" id="641032">receiver</a>, _) =&gt;
                <span title="TailCalls.this.global.Tree" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="../Global.scala.html#39416" title="=&gt; Boolean">forMSIL</a>) 
                  <a href="#639702" title="(fun: TailCalls.this.global.Tree,args: List[TailCalls.this.global.Tree])TailCalls.this.global.Tree">rewriteTailCall</a>(<a href="#640991" title="TailCalls.this.global.Tree">fun</a>, <a href="#641032" title="TailCalls.this.global.Tree">receiver</a> <a href="#641035" title="TailCalls.this.global.Tree">::</a> <a href="#639701" title="(trees: List[TailCalls.this.global.Tree],nctx: TailCallElimination.this.Context)List[TailCalls.this.global.Tree]">transformTrees</a><span title="(x: TailCalls.this.global.Tree)List[TailCalls.this.global.Tree]">(</span><a href="#640992" title="List[TailCalls.this.global.Tree]">args</a>, <a href="#639695" title="(that: TailCallElimination.this.Context,tp: Boolean)TailCallElimination.this.Context">mkContext</a>(<a href="#639697" title="=&gt; TailCallElimination.this.Context">ctx</a>, <span title="Boolean(false)" class="keyword">false</span>))) 
                <span class="keyword">else</span> 
                  <a href="#640995" title="=&gt; TailCalls.this.global.Apply">defaultTree</a>
              <span title="TailCalls.this.global.Tree" class="keyword">case</span> _ =&gt; <a href="#639702" title="(fun: TailCalls.this.global.Tree,args: List[TailCalls.this.global.Tree])TailCalls.this.global.Tree">rewriteTailCall</a>(<a href="#640991" title="TailCalls.this.global.Tree">fun</a>, <a href="../ast/Trees.scala.html#26886" title="(sym: TailCalls.this.global.Symbol)TailCalls.this.global.Tree">This</a>(<a href="../ast/Trees.scala.html#45703" title="=&gt; TailCalls.this.global.Symbol">currentClass</a>) <a href="#641065" title="TailCalls.this.global.Tree">::</a> <a href="#639701" title="(trees: List[TailCalls.this.global.Tree],nctx: TailCallElimination.this.Context)List[TailCalls.this.global.Tree]">transformTrees</a><span title="(x: TailCalls.this.global.Tree)List[TailCalls.this.global.Tree]">(</span><a href="#640992" title="List[TailCalls.this.global.Tree]">args</a>, <a href="#639695" title="(that: TailCallElimination.this.Context,tp: Boolean)TailCallElimination.this.Context">mkContext</a>(<a href="#639697" title="=&gt; TailCallElimination.this.Context">ctx</a>, <span title="Boolean(false)" class="keyword">false</span>)))
            }
          } <span class="keyword">else</span>
            <a href="#640995" title="=&gt; TailCalls.this.global.Apply">defaultTree</a>
            

        <span title="TailCalls.this.global.Tree" class="keyword">case</span> Super(<a title="TailCalls.this.global.Name" id="641115">qual</a>, <a title="TailCalls.this.global.Name" id="641116">mix</a>) =&gt;
          <a href="#639882" title="TailCalls.this.global.Tree">tree</a>
        <span title="TailCalls.this.global.Tree" class="keyword">case</span> This(<a title="TailCalls.this.global.Name" id="641122">qual</a>) =&gt;
          <a href="#639882" title="TailCalls.this.global.Tree">tree</a>
        <span title="TailCalls.this.global.Tree" class="keyword">case</span> Select(<a title="TailCalls.this.global.Tree" id="641129">qualifier</a>, <a title="TailCalls.this.global.Name" id="641130">selector</a>) =&gt;
          <a href="#639882" title="TailCalls.this.global.Tree">tree</a>
        <span title="TailCalls.this.global.Tree" class="keyword">case</span> Ident(<a title="TailCalls.this.global.Name" id="641136">name</a>) =&gt;
          <a href="#639882" title="TailCalls.this.global.Tree">tree</a>
        <span title="TailCalls.this.global.Tree" class="keyword">case</span> Literal(<a title="TailCalls.this.global.Constant" id="641142">value</a>) =&gt;
          <a href="#639882" title="TailCalls.this.global.Tree">tree</a>
        <span title="TailCalls.this.global.Tree" class="keyword">case</span> TypeTree() =&gt;
          <a href="#639882" title="TailCalls.this.global.Tree">tree</a>
        <span title="TailCalls.this.global.Tree" class="keyword">case</span> _ =&gt;
          <a href="#639882" title="TailCalls.this.global.Tree">tree</a>
      }
    }

    <span class="keyword">def</span> <a title="(trees: List[TailCalls.this.global.Tree],nctx: TailCallElimination.this.Context)List[TailCalls.this.global.Tree]" id="639701">transformTrees</a>(<a title="List[TailCalls.this.global.Tree]" id="640453">trees</a>: <span title="List[TailCalls.this.global.Tree]">List</span>[Tree], <a title="TailCallElimination.this.Context" id="640454">nctx</a>: <a href="#639693" title="TailCallElimination.this.Context">Context</a>): <span title="List[TailCalls.this.global.Tree]">List</span>[Tree] =
      <a href="#640453" title="(f: (TailCalls.this.global.Tree) =&gt; TailCalls.this.global.Tree)(implicit bf: scala.collection.generic.BuilderFactory[TailCalls.this.global.Tree,List[TailCalls.this.global.Tree],List[TailCalls.this.global.Tree]])List[TailCalls.this.global.Tree]">trees</a> <span title="scala.collection.generic.BuilderFactory[TailCalls.this.global.Tree,List[TailCalls.this.global.Tree],List#Coll]">map</span> ((<a title="TailCalls.this.global.Tree" id="641157">tree</a>) =&gt; <a href="#639699" title="(tree: TailCalls.this.global.Tree,nctx: TailCallElimination.this.Context)TailCalls.this.global.Tree">transform</a>(<a href="#641157" title="TailCalls.this.global.Tree">tree</a>, <a href="#640454" title="TailCallElimination.this.Context">nctx</a>))

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(fun: TailCalls.this.global.Tree,args: List[TailCalls.this.global.Tree])TailCalls.this.global.Tree" id="639702">rewriteTailCall</a>(<a title="TailCalls.this.global.Tree" id="640865">fun</a>: <a href="../ast/Trees.scala.html#26752" title="TailCalls.this.global.Tree">Tree</a>, <a title="List[TailCalls.this.global.Tree]" id="640866">args</a>: <span title="List[TailCalls.this.global.Tree]">List</span>[Tree]): <a href="../ast/Trees.scala.html#26752" title="TailCalls.this.global.Tree">Tree</a> = {
      <a href="../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Rewriting tail recursive method call at: &quot;</span> +
                      (<a href="#640865" title="TailCalls.this.global.Tree">fun</a>.<a href="../ast/Trees.scala.html#29547" title="=&gt; scala.tools.nsc.util.Position">pos</a>))
      <a href="#639697" title="=&gt; TailCallElimination.this.Context">ctx</a>.<a href="#639761" title="(x$1: Boolean)Unit">accessed</a> = <span title="Boolean(true)" class="keyword">true</span>
      //println(&quot;fun: &quot; + fun + &quot; args: &quot; + args)
      <span class="keyword">val</span> <a title="TailCalls.this.global.Apply" id="641193">t</a> = <a href="../ast/Trees.scala.html#26943" title="(pos: scala.tools.nsc.util.Position)(tree: TailCalls.this.global.Apply)TailCalls.this.global.Apply">atPos</a>(<a href="#640865" title="TailCalls.this.global.Tree">fun</a>.<a href="../ast/Trees.scala.html#29547" title="=&gt; scala.tools.nsc.util.Position">pos</a>)(<a href="../ast/Trees.scala.html#49378" title="(fun: TailCalls.this.global.Tree,args: List[TailCalls.this.global.Tree])TailCalls.this.global.Apply">Apply</a>(<a href="../ast/Trees.scala.html#26895" title="(sym: TailCalls.this.global.Symbol)TailCalls.this.global.Ident">Ident</a>(<a href="#639697" title="=&gt; TailCallElimination.this.Context">ctx</a>.<a href="#639752" title="=&gt; TailCalls.this.global.Symbol">label</a>), <a href="#640866" title="List[TailCalls.this.global.Tree]">args</a>))
      // println(&quot;TAIL: &quot;+t)
      <a href="../typechecker/Typers.scala.html#42872" title="(tree: TailCalls.this.global.analyzer.global.Tree)TailCalls.this.global.analyzer.global.Tree">typed</a>(<a href="#641193" title="TailCalls.this.global.Apply">t</a>)
    }

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(ts1: List[TailCalls.this.global.Symbol],ts2: List[TailCalls.this.global.Symbol])Boolean" id="639703">isSameTypes</a>(<a title="List[TailCalls.this.global.Symbol]" id="640798">ts1</a>: <span title="List[TailCalls.this.global.Symbol]">List</span>[Symbol], <a title="List[TailCalls.this.global.Symbol]" id="640799">ts2</a>: <span title="List[TailCalls.this.global.Symbol]">List</span>[Symbol]): <span title="Boolean">Boolean</span> = {
      <span class="keyword">def</span> <a title="(t1: TailCalls.this.global.Symbol,t2: TailCalls.this.global.Symbol)Boolean" id="641259">isSameType</a>(<a title="TailCalls.this.global.Symbol" id="641260">t1</a>: <a href="../symtab/Symbols.scala.html#26286" title="TailCalls.this.global.Symbol">Symbol</a>, <a title="TailCalls.this.global.Symbol" id="641261">t2</a>: <a href="../symtab/Symbols.scala.html#26286" title="TailCalls.this.global.Symbol">Symbol</a>) = {
        <a href="#641260" title="(x$1: AnyRef)Boolean">t1</a> == <a href="#641261" title="TailCalls.this.global.Symbol">t2</a>
      }
      <span title="object List">List</span>.<a title="(xs: List[TailCalls.this.global.Symbol],ys: List[TailCalls.this.global.Symbol])(f: (TailCalls.this.global.Symbol, TailCalls.this.global.Symbol) =&gt; Boolean)Boolean" id="24550">forall2</a>(<a href="#640798" title="List[TailCalls.this.global.Symbol]">ts1</a>, <a href="#640799" title="List[TailCalls.this.global.Symbol]">ts2</a>)(<a href="#641259" title="(t1: TailCalls.this.global.Symbol,t2: TailCalls.this.global.Symbol)Boolean">isSameType</a>)
    }

    /** Returns &lt;code&gt;true&lt;/code&gt; if the fun tree refers to the same method as
     *  the one saved in &lt;code&gt;ctx&lt;/code&gt;.
     * 
     *  @param fun the expression that is applied
     *  @return    &lt;code&gt;true&lt;/code&gt; if the tree symbol refers to the innermost 
     *             enclosing method
     */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(fun: TailCalls.this.global.Tree)Boolean" id="639704">isRecursiveCall</a>(<a title="TailCalls.this.global.Tree" id="640838">fun</a>: <a href="../ast/Trees.scala.html#26752" title="TailCalls.this.global.Tree">Tree</a>): <span title="Boolean">Boolean</span> =
      (<a href="#640838" title="TailCalls.this.global.Tree">fun</a>.<a href="../ast/Trees.scala.html#29553" title="(x$1: AnyRef)Boolean" id="6611">symbol</a> eq <a href="#639697" title="=&gt; TailCallElimination.this.Context">ctx</a>.<a href="#639749" title="=&gt; TailCalls.this.global.Symbol">currentMethod</a>)
  }

}

        </pre>
    </body>
</html>