<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/transform/TailCalls.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style">
    </head>
    <body>
        <pre>
/* NSC -- new scala compiler
 * Copyright 2005-2009 LAMP/EPFL
 * @author Iulian Dragos
 */
// $Id: TailCalls.scala 18579 2009-08-26 15:17:51Z extempore $

<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> transform

<span class="keyword">import</span> scala.tools.nsc.symtab.Flags

/** Perform tail recursive call elimination.
 *
 *  @author Iulian Dragos
 *  @version 1.0
 */
<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class TailCalls extends scala.tools.nsc.SubComponent with scala.tools.nsc.transform.Transform with ScalaObject" id="13768">TailCalls</a> <span title="ScalaObject" class="keyword">extends</span> <a href="Transform.scala.html#14089" title="scala.tools.nsc.transform.Transform">Transform</a>
                         /* with JavaLogging() */ {
  // inherits abstract value `global' and class `Phase' from Transform

  <span class="keyword">import</span> global._                  // the global environment
  <span class="keyword">import</span> definitions._             // standard classes and methods
  <span class="keyword">import</span> typer.{typed, atOwner}    // methods to type trees

  <span class="keyword">val</span> <a title="String" id="579137">phaseName</a>: <span title="String">String</span> = <span title="java.lang.String(&quot;tailcalls&quot;)" class="string">&quot;tailcalls&quot;</span>

  <span class="keyword">def</span> <a title="(unit: TailCalls.this.global.CompilationUnit)TailCalls.this.global.Transformer" id="579139">newTransformer</a>(<a title="TailCalls.this.global.CompilationUnit" id="638281">unit</a>: <a href="../CompilationUnits.scala.html#39196" title="TailCalls.this.global.CompilationUnit">CompilationUnit</a>): <a href="../ast/Trees.scala.html#26773" title="TailCalls.this.global.Transformer">Transformer</a> =
    <span title="TailCalls.this.TailCallElimination" class="keyword">new</span> <a href="#579143" title="TailCalls.this.TailCallElimination">TailCallElimination</a>(<a href="#638281" title="TailCalls.this.global.CompilationUnit">unit</a>)

  /** Create a new phase which applies transformer */
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(prev: scala.tools.nsc.Phase)TailCalls.this.StdPhase" id="579140">newPhase</a>(<a title="scala.tools.nsc.Phase" id="638302">prev</a>: scala.tools.nsc.<a href="../Phase.scala.html#8862" title="scala.tools.nsc.Phase">Phase</a>): <a href="../SubComponent.scala.html#39640" title="TailCalls.this.StdPhase">StdPhase</a> = <span title="TailCalls.this.Phase" class="keyword">new</span> <a href="#579141" title="TailCalls.this.Phase">Phase</a>(<a href="#638302" title="scala.tools.nsc.Phase">prev</a>)

  /** The phase defined by this transform */
  <span class="keyword">class</span> <a title="class Phase extends TailCalls.this.StdPhase with ScalaObject" id="579141">Phase</a><span title="ScalaObject">(</span><a title="scala.tools.nsc.Phase" id="638308">prev</a>: scala.tools.nsc.<a href="../Phase.scala.html#8862" title="scala.tools.nsc.Phase">Phase</a>) <span class="keyword">extends</span> <a href="../SubComponent.scala.html#39640" title="TailCalls.this.StdPhase">StdPhase</a>(<a href="#638308" title="scala.tools.nsc.Phase">prev</a>) {
    <span class="keyword">def</span> <a title="(unit: TailCalls.this.global.CompilationUnit)Unit" id="638307">apply</a>(<a title="TailCalls.this.global.CompilationUnit" id="638315">unit</a>: global.<a href="../CompilationUnits.scala.html#39196" title="TailCalls.this.global.CompilationUnit">CompilationUnit</a>) {
      <span title="Unit" class="keyword">if</span> (<span title="=&gt; Boolean">!</span>(<a href="../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../Settings.scala.html#37050" title="=&gt; scala.tools.nsc.Settings.DebugSetting">debuginfo</a>.<a href="../Settings.scala.html#37759" title="(x$1: AnyRef)Boolean">value</a> == <span title="java.lang.String(&quot;notailcalls&quot;)" class="string">&quot;notailcalls&quot;</span>)) {
        <a href="#579139" title="(unit: TailCalls.this.global.CompilationUnit)TailCalls.this.global.Transformer">newTransformer</a>(<a href="#638315" title="TailCalls.this.global.CompilationUnit">unit</a>).<a href="../ast/Trees.scala.html#45483" title="(unit: TailCalls.this.global.CompilationUnit)Unit">transformUnit</a>(<a href="#638315" title="TailCalls.this.global.CompilationUnit">unit</a>);
      }
    }
  }
  
  /** The @tailrec annotation indicates TCO is mandatory */
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(defdef: TailCalls.this.global.DefDef)Boolean" id="579142">tailrecRequired</a>(<a title="TailCalls.this.global.DefDef" id="638333">defdef</a>: <a href="../ast/Trees.scala.html#26626" title="TailCalls.this.global.DefDef">DefDef</a>) = <a href="#638333" title="TailCalls.this.global.DefDef">defdef</a>.<a href="../symtab/Symbols.scala.html#26857" title="(cls: TailCalls.this.global.Symbol)Boolean">symbol</a> hasAnnotation <a href="../symtab/Definitions.scala.html#28323" title="=&gt; TailCalls.this.global.Symbol">TailrecClass</a>

  /**
   * A Tail Call Transformer
   *
   * @author     Erik Stenman, Iulian Dragos
   * @version    1.1
   *
   * What it does:
   * &lt;p&gt;
   *   Finds method calls in tail-position and replaces them with jumps.
   *   A call is in a tail-position if it is the last instruction to be
   *   executed in the body of a method.  This is done by recursing over
   *   the trees that may contain calls in tail-position (trees that can't
   *   contain such calls are not transformed). However, they are not that
   *   many.
   * &lt;/p&gt;
   * &lt;p&gt;
   *   Self-recursive calls in tail-position are replaced by jumps to a
   *   label at the beginning of the method. As the JVM provides no way to
   *   jump from a method to another one, non-recursive calls in
   *   tail-position are not optimized.
   * &lt;/p&gt;
   * &lt;p&gt;
   *   A method call is self-recursive if it calls the current method and
   *   the method is final (otherwise, it could
   *   be a call to an overridden method in a subclass). Furthermore, If
   *   the method has type parameters, the call must contain these
   *   parameters as type arguments. Recursive calls on a different instance
   *   are optimized. Since 'this' is not a local variable, a dummy local val
   *   is added and used as a label parameter. The backend knows to load
   *   the corresponding argument in the 'this' (local at index 0). This dummy local
   *   is never used and should be cleand up by dead code elmination (when enabled).
   * &lt;/p&gt;
   * &lt;p&gt;
   *   This phase has been moved before pattern matching to catch more
   *   of the common cases of tail recursive functions. This means that
   *   more cases should be taken into account (like nested function, and
   *   pattern cases).
   * &lt;/p&gt;
   * &lt;p&gt;
   *   If a method contains self-recursive calls, a label is added to at
   *   the beginning of its body and the calls are replaced by jumps to
   *   that label.
   * &lt;/p&gt;
   * &lt;p&gt;
   *   Assumes: &lt;code&gt;Uncurry&lt;/code&gt; has been run already, and no multiple
   *            parameter lists exit.
   * &lt;/p&gt;
   */
  <span class="keyword">class</span> <a title="class TailCallElimination extends TailCalls.this.global.Transformer with ScalaObject" id="579143">TailCallElimination</a><span title="ScalaObject">(</span><a title="TailCalls.this.global.CompilationUnit" id="638299">unit</a>: <a href="../CompilationUnits.scala.html#39196" title="TailCalls.this.global.CompilationUnit">CompilationUnit</a>) <span class="keyword">extends</span> <a href="../ast/Trees.scala.html#26773" title="TailCalls.this.global.Transformer">Transformer</a> {

    <span class="keyword">class</span> <a title="class Context extends java.lang.Object with ScalaObject" id="638287">Context</a> <span title="ScalaObject">{</span>
      /** The current method */
      <span class="keyword">var</span> <a title="TailCalls.this.global.Symbol" id="638343">currentMethod</a>: <a href="../symtab/Symbols.scala.html#26127" title="TailCalls.this.global.Symbol">Symbol</a> = <a href="../symtab/Symbols.scala.html#26134" title="object TailCalls.this.global.NoSymbol">NoSymbol</a>

      /** The current tail-call label */
      <span class="keyword">var</span> <a title="TailCalls.this.global.Symbol" id="638346">label</a>: <a href="../symtab/Symbols.scala.html#26127" title="TailCalls.this.global.Symbol">Symbol</a> = <a href="../symtab/Symbols.scala.html#26134" title="object TailCalls.this.global.NoSymbol">NoSymbol</a>

      /** The expected type arguments of self-recursive calls */
      <span class="keyword">var</span> <a title="List[TailCalls.this.global.Symbol]" id="638349">tparams</a>: <span title="List[TailCalls.this.global.Symbol]">List</span>[Symbol] = <span title="object Nil">Nil</span>

      /** Tells whether we are in a (possible) tail position */
      <span class="keyword">var</span> <a title="Boolean" id="638352">tailPos</a> = <span title="Boolean(false)" class="keyword">false</span>

      /** Is the label accessed? */
      <span class="keyword">var</span> <a title="Boolean" id="638355">accessed</a> = <span title="Boolean(false)" class="keyword">false</span>

      <span class="keyword">def</span> <a title="(that: TailCallElimination.this.Context)TailCallElimination.this.Context" id="638357" class="keyword">this</a>(<a title="TailCallElimination.this.Context" id="638373">that</a>: <a href="#638287" title="TailCallElimination.this.Context">Context</a>) = <span title="Unit">{</span>
        <a href="#638287" title="Context.this.type" class="keyword">this</a>()
        <a href="#638287" title="Context.this.type" class="keyword">this</a>.<a href="#638343" title="(x$1: TailCalls.this.global.Symbol)Unit">currentMethod</a> = <a href="#638373" title="TailCallElimination.this.Context">that</a>.<a href="#638343" title="=&gt; TailCalls.this.global.Symbol">currentMethod</a>
        <a href="#638287" title="Context.this.type" class="keyword">this</a>.<a href="#638346" title="(x$1: TailCalls.this.global.Symbol)Unit">label</a>         = <a href="#638373" title="TailCallElimination.this.Context">that</a>.<a href="#638346" title="=&gt; TailCalls.this.global.Symbol">label</a>
        <a href="#638287" title="Context.this.type" class="keyword">this</a>.<a href="#638349" title="(x$1: List[TailCalls.this.global.Symbol])Unit">tparams</a>       = <a href="#638373" title="TailCallElimination.this.Context">that</a>.<a href="#638349" title="=&gt; List[TailCalls.this.global.Symbol]">tparams</a>
        <a href="#638287" title="Context.this.type" class="keyword">this</a>.<a href="#638352" title="(x$1: Boolean)Unit">tailPos</a>       = <a href="#638373" title="TailCallElimination.this.Context">that</a>.<a href="#638352" title="=&gt; Boolean">tailPos</a>
        <a href="#638287" title="Context.this.type" class="keyword">this</a>.<a href="#638355" title="(x$1: Boolean)Unit">accessed</a>      = <a href="#638373" title="TailCallElimination.this.Context">that</a>.<a href="#638355" title="=&gt; Boolean">accessed</a>
      }

      /** Create a new method symbol for the current method and store it in
        * the label field.
        */
      <span class="keyword">def</span> <a title="()Unit" id="638358">makeLabel</a>(): <a title="Unit" id="1950">Unit</a> = {
        <a href="#638346" title="(x$1: TailCalls.this.global.Symbol)Unit">label</a> = <a href="#638343" title="=&gt; TailCalls.this.global.Symbol">currentMethod</a>.<a href="../symtab/Symbols.scala.html#26868" title="(pos: scala.tools.nsc.util.Position,name: TailCalls.this.global.Name)TailCalls.this.global.TermSymbol">newLabel</a>(<a href="#638343" title="=&gt; TailCalls.this.global.Symbol">currentMethod</a>.<a href="../symtab/Symbols.scala.html#26847" title="=&gt; scala.tools.nsc.util.Position">pos</a>, <span title="(x$1: Any)java.lang.String" class="string">&quot;_&quot;</span> <a href="../symtab/Names.scala.html#26054" title="implicit scala.tools.nsc.symtab.Names.view : (s: String)TailCalls.this.global.Name">+</a> <a href="#638343" title="=&gt; TailCalls.this.global.Symbol">currentMethod</a>.<a href="../symtab/Symbols.scala.html#26988" title="=&gt; TailCalls.this.global.Name">name</a>)
        <a href="#638355" title="(x$1: Boolean)Unit">accessed</a> = <span title="Boolean(false)" class="keyword">false</span>
      }

      <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="638359">toString</a>(): <span title="String">String</span> = (
        <span title="(x$1: Any)java.lang.String" class="string">&quot;&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#638343" title="=&gt; TailCalls.this.global.Symbol">currentMethod</a>.<a href="../symtab/Symbols.scala.html#26988" title="=&gt; TailCalls.this.global.Name">name</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; tparams: &quot;)" class="string">&quot; tparams: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#638349" title="=&gt; List[TailCalls.this.global.Symbol]">tparams</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; tailPos: &quot;)" class="string">&quot; tailPos: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#638352" title="=&gt; Boolean">tailPos</a> <span title="(x$1: Any)java.lang.String">+</span>
        <span title="java.lang.String(&quot; accessed: &quot;)" class="string">&quot; accessed: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#638355" title="=&gt; Boolean">accessed</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;\012Label: &quot;)" class="string">&quot;\nLabel: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#638346" title="=&gt; TailCalls.this.global.Symbol">label</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;\012Label type: &quot;)" class="string">&quot;\nLabel type: &quot;</span> + <a href="#638346" title="=&gt; TailCalls.this.global.Symbol">label</a>.<a href="../symtab/Symbols.scala.html#27004" title="=&gt; TailCalls.this.global.Type">info</a>
      )
    }

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(that: TailCallElimination.this.Context)TailCallElimination.this.Context" id="638288">mkContext</a>(<a title="TailCallElimination.this.Context" id="638440">that</a>: <a href="#638287" title="TailCallElimination.this.Context">Context</a>) = <a href="#638357" title="(that: TailCallElimination.this.Context)TailCallElimination.this.Context" class="keyword">new</a> <a href="#638287" title="TailCallElimination.this.Context">Context</a>(<a href="#638440" title="TailCallElimination.this.Context">that</a>)
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(that: TailCallElimination.this.Context,tp: Boolean)TailCallElimination.this.Context" id="638289">mkContext</a>(<a title="TailCallElimination.this.Context" id="638448">that</a>: <a href="#638287" title="TailCallElimination.this.Context">Context</a>, <a title="Boolean" id="638449">tp</a>: <span title="Boolean">Boolean</span>): <a href="#638287" title="TailCallElimination.this.Context">Context</a> = {
      <span class="keyword">val</span> <a title="TailCallElimination.this.Context" id="638451">t</a> = <a href="#638288" title="(that: TailCallElimination.this.Context)TailCallElimination.this.Context">mkContext</a>(<a href="#638448" title="TailCallElimination.this.Context">that</a>)
      <a href="#638451" title="TailCallElimination.this.Context">t</a>.<a href="#638352" title="(x$1: Boolean)Unit">tailPos</a> = <a href="#638449" title="Boolean">tp</a>
      <a href="#638451" title="TailCallElimination.this.Context">t</a>
    }

    <span class="keyword">private</span> <span class="keyword">var</span> <a title="TailCallElimination.this.Context" id="638291">ctx</a>: <a href="#638287" title="TailCallElimination.this.Context">Context</a> = <span title="TailCallElimination.this.Context" class="keyword">new</span> <a href="#638287" title="TailCallElimination.this.Context">Context</a>()

    /** Rewrite this tree to contain no tail recursive calls */
    <span class="keyword">def</span> <a title="(tree: TailCalls.this.global.Tree,nctx: TailCallElimination.this.Context)TailCalls.this.global.Tree" id="638293">transform</a>(<a title="TailCalls.this.global.Tree" id="638467">tree</a>: <a href="../ast/Trees.scala.html#26593" title="TailCalls.this.global.Tree">Tree</a>, <a title="TailCallElimination.this.Context" id="638468">nctx</a>: <a href="#638287" title="TailCallElimination.this.Context">Context</a>): <a href="../ast/Trees.scala.html#26593" title="TailCalls.this.global.Tree">Tree</a> = {
      <span class="keyword">val</span> <a title="TailCallElimination.this.Context" id="638471">oldCtx</a> = <a href="#638291" title="=&gt; TailCallElimination.this.Context">ctx</a>
      <a href="#638291" title="(x$1: TailCallElimination.this.Context)Unit">ctx</a> = <a href="#638468" title="TailCallElimination.this.Context">nctx</a>
      <span class="keyword">val</span> <a title="TailCalls.this.global.Tree" id="638472">t</a> = <a href="#638294" title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree">transform</a>(<a href="#638467" title="TailCalls.this.global.Tree">tree</a>)
      <a href="#579143" title="TailCallElimination.this.type" class="keyword">this</a>.<a href="#638291" title="(x$1: TailCallElimination.this.Context)Unit">ctx</a> = <a href="#638471" title="TailCallElimination.this.Context">oldCtx</a>
      <a href="#638472" title="TailCalls.this.global.Tree">t</a>
    }

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree" id="638294">transform</a>(<a title="TailCalls.this.global.Tree" id="638476">tree</a>: <a href="../ast/Trees.scala.html#26593" title="TailCalls.this.global.Tree">Tree</a>): <a href="../ast/Trees.scala.html#26593" title="TailCalls.this.global.Tree">Tree</a> = {
      <a href="#638476" title="TailCalls.this.global.Tree">tree</a> <span title="TailCalls.this.global.Tree" class="keyword">match</span> {

        <span title="TailCalls.this.global.DefDef" class="keyword">case</span> <a title="TailCalls.this.global.DefDef" id="638487">dd</a> @ DefDef(<a title="TailCalls.this.global.Modifiers" id="638496">mods</a>, <a title="TailCalls.this.global.Name" id="638497">name</a>, <a title="List[TailCalls.this.global.TypeDef]" id="638498">tparams</a>, <a title="List[List[TailCalls.this.global.ValDef]]" id="638499">vparams</a>, <a title="TailCalls.this.global.Tree" id="638500">tpt</a>, <a title="TailCalls.this.global.Tree" id="638501">rhs</a>) =&gt;
          <a href="../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Entering DefDef: &quot;</span> + <a href="#638497" title="TailCalls.this.global.Name">name</a>)
          <span class="keyword">var</span> <a title="Boolean" id="638504">isTransformed</a> = <span title="Boolean(false)" class="keyword">false</span>
          <span class="keyword">val</span> <a title="TailCallElimination.this.Context" id="638505">newCtx</a> = <a href="#638288" title="(that: TailCallElimination.this.Context)TailCallElimination.this.Context">mkContext</a>(<a href="#638291" title="=&gt; TailCallElimination.this.Context">ctx</a>)
          <a href="#638505" title="TailCallElimination.this.Context">newCtx</a>.<a href="#638343" title="(x$1: TailCalls.this.global.Symbol)Unit">currentMethod</a> = <a href="#638476" title="TailCalls.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; TailCalls.this.global.Symbol">symbol</a>
          <a href="#638505" title="TailCallElimination.this.Context">newCtx</a>.<a href="#638358" title="()Unit">makeLabel</a>()
          <span class="keyword">val</span> <a title="TailCalls.this.global.Symbol" id="638506">currentClassParam</a> = <a href="#638476" title="TailCalls.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; TailCalls.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#26883" title="(argtype: TailCalls.this.global.Type)TailCalls.this.global.Symbol">newSyntheticValueParam</a>(<a href="../ast/Trees.scala.html#45471" title="=&gt; TailCalls.this.global.Symbol">currentClass</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; TailCalls.this.global.Type">tpe</a>)
          <a href="#638505" title="TailCallElimination.this.Context">newCtx</a>.<a href="#638346" title="=&gt; TailCalls.this.global.Symbol">label</a>.<a href="../symtab/Symbols.scala.html#27005" title="(info: TailCalls.this.global.Type)TailCalls.this.global.Symbol">setInfo</a>(<a href="../symtab/Types.scala.html#43895" title="(params: List[TailCalls.this.global.Symbol],resultType: TailCalls.this.global.Type)TailCalls.this.global.MethodType">MethodType</a>(<a href="#638506" title="TailCalls.this.global.Symbol">currentClassParam</a> <a href="#638546" title="TailCalls.this.global.Symbol">::</a> <a href="#638476" title="TailCalls.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; TailCalls.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; TailCalls.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30199" title="(x: TailCalls.this.global.Symbol)List[TailCalls.this.global.Symbol]">params</a>, <a href="#638476" title="TailCalls.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; TailCalls.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; TailCalls.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30196" title="=&gt; TailCalls.this.global.Type">finalResultType</a>))
          <a href="#638505" title="TailCallElimination.this.Context">newCtx</a>.<a href="#638352" title="(x$1: Boolean)Unit">tailPos</a> = <span title="Boolean(true)" class="keyword">true</span>

          <span class="keyword">val</span> <a title="Boolean" id="638507">isEligible</a> = <a href="#638505" title="TailCallElimination.this.Context">newCtx</a>.<a href="#638343" title="=&gt; TailCalls.this.global.Symbol">currentMethod</a>.<a href="../symtab/Symbols.scala.html#26969" title="(x$1: Boolean)Boolean">isFinal</a> || (<a href="#638505" title="TailCallElimination.this.Context">newCtx</a>.<a href="#638343" title="=&gt; TailCalls.this.global.Symbol">currentMethod</a>.<a href="../symtab/Symbols.scala.html#26996" title="(mask: Long)Boolean">enclClass</a> hasFlag Flags.<span title="Long(256L)">MODULE</span>)
          <span title="Any" class="keyword">if</span> (<a href="#638507" title="Boolean">isEligible</a>) {
            <a href="#638505" title="TailCallElimination.this.Context">newCtx</a>.<a href="#638349" title="(x$1: List[TailCalls.this.global.Symbol])Unit">tparams</a> = <span title="object Nil">Nil</span>
            <a href="../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;  Considering &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#638497" title="TailCalls.this.global.Name">name</a> + <span title="java.lang.String(&quot; for tailcalls&quot;)" class="string">&quot; for tailcalls&quot;</span>)
            <a href="#638476" title="TailCalls.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; TailCalls.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; TailCalls.this.global.Type">tpe</a> <span title="Any" class="keyword">match</span> {
              <span title="TailCalls.this.global.Symbol" class="keyword">case</span> PolyType(<a title="List[TailCalls.this.global.Symbol]" id="638574">tpes</a>, <a title="TailCalls.this.global.Type" id="638575">restpe</a>) =&gt;
                <a href="#638505" title="TailCallElimination.this.Context">newCtx</a>.<a href="#638349" title="(x$1: List[TailCalls.this.global.Symbol])Unit">tparams</a> = <a href="#638498" title="(f: (TailCalls.this.global.TypeDef) =&gt; TailCalls.this.global.Symbol)(implicit bf: scala.collection.generic.BuilderFactory[TailCalls.this.global.Symbol,List[TailCalls.this.global.Symbol],List[TailCalls.this.global.TypeDef]])List[TailCalls.this.global.Symbol]">tparams</a> <span title="scala.collection.generic.BuilderFactory[TailCalls.this.global.Symbol,List[TailCalls.this.global.Symbol],List#Coll]">map</span> (<a href="#638586" title="TailCalls.this.global.TypeDef">_</a>.<a href="../ast/Trees.scala.html#48485" title="=&gt; TailCalls.this.global.Symbol">symbol</a>)
                <a href="#638505" title="TailCallElimination.this.Context">newCtx</a>.<a href="#638346" title="=&gt; TailCalls.this.global.Symbol">label</a>.<a href="../symtab/Symbols.scala.html#27005" title="(info: TailCalls.this.global.Type)TailCalls.this.global.Symbol">setInfo</a>(
                  <a href="#638505" title="TailCallElimination.this.Context">newCtx</a>.<a href="#638346" title="=&gt; TailCalls.this.global.Symbol">label</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; TailCalls.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30225" title="(from: List[TailCalls.this.global.Symbol],to: List[TailCalls.this.global.Symbol])TailCalls.this.global.Type">substSym</a>(<a href="#638574" title="List[TailCalls.this.global.Symbol]">tpes</a>, <a href="#638498" title="(f: (TailCalls.this.global.TypeDef) =&gt; TailCalls.this.global.Symbol)(implicit bf: scala.collection.generic.BuilderFactory[TailCalls.this.global.Symbol,List[TailCalls.this.global.Symbol],List[TailCalls.this.global.TypeDef]])List[TailCalls.this.global.Symbol]">tparams</a> <span title="scala.collection.generic.BuilderFactory[TailCalls.this.global.Symbol,List[TailCalls.this.global.Symbol],List#Coll]">map</span> (<a href="#638632" title="TailCalls.this.global.TypeDef">_</a>.<a href="../ast/Trees.scala.html#48485" title="=&gt; TailCalls.this.global.Symbol">symbol</a>)))
              <span title="Unit" class="keyword">case</span> _ =&gt;
            }
          }
          <span class="keyword">val</span> <a title="TailCalls.this.global.DefDef" id="638508">t1</a> = <a href="../ast/Trees.scala.html#45465" title="=&gt; TailCalls.this.global.TreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#48545" title="(tree: TailCalls.this.global.Tree,mods: TailCalls.this.global.Modifiers,name: TailCalls.this.global.Name,tparams: List[TailCalls.this.global.TypeDef],vparamss: List[List[TailCalls.this.global.ValDef]],tpt: TailCalls.this.global.Tree,rhs: TailCalls.this.global.Tree)TailCalls.this.global.DefDef">DefDef</a>(<a href="#638476" title="TailCalls.this.global.Tree">tree</a>, <a href="#638496" title="TailCalls.this.global.Modifiers">mods</a>, <a href="#638497" title="TailCalls.this.global.Name">name</a>, <a href="#638498" title="List[TailCalls.this.global.TypeDef]">tparams</a>, <a href="#638499" title="List[List[TailCalls.this.global.ValDef]]">vparams</a>, <a href="#638500" title="TailCalls.this.global.Tree">tpt</a>,
            <a href="#638293" title="(tree: TailCalls.this.global.Tree,nctx: TailCallElimination.this.Context)TailCalls.this.global.Tree">transform</a>(<a href="#638501" title="TailCalls.this.global.Tree">rhs</a>, <a href="#638505" title="TailCallElimination.this.Context">newCtx</a>) <span title="TailCalls.this.global.Tree" class="keyword">match</span> {
              <span title="TailCalls.this.global.analyzer.global.Tree" class="keyword">case</span> <a title="TailCalls.this.global.Tree" id="638675">newRHS</a> <span class="keyword">if</span> <a href="#638507" title="(x$1: Boolean)Boolean">isEligible</a> &amp;&amp; <a href="#638505" title="TailCallElimination.this.Context">newCtx</a>.<a href="#638355" title="=&gt; Boolean">accessed</a> =&gt;
                <a href="../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Rewrote def &quot;</span> + <a href="#638505" title="TailCallElimination.this.Context">newCtx</a>.<a href="#638343" title="=&gt; TailCalls.this.global.Symbol">currentMethod</a>)
                <a href="#638504" title="Boolean">isTransformed</a> = <span title="Boolean(true)" class="keyword">true</span>
                <span class="keyword">val</span> <a title="TailCalls.this.global.TermSymbol" id="638678">newThis</a> = <a href="#638505" title="TailCallElimination.this.Context">newCtx</a>.<a href="#638343" title="=&gt; TailCalls.this.global.Symbol">currentMethod</a>
                  . <a href="../symtab/Symbols.scala.html#26863" title="(pos: scala.tools.nsc.util.Position,name: TailCalls.this.global.Name)TailCalls.this.global.TermSymbol">newValue</a> (<a href="#638476" title="TailCalls.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29361" title="=&gt; scala.tools.nsc.util.Position">pos</a>, <a href="../symtab/StdNames.scala.html#26531" title="object TailCalls.this.global.nme">nme</a>.<a href="../symtab/StdNames.scala.html#29717" title="=&gt; TailCalls.this.global.Name">THIS</a>)
                  . <a href="../symtab/Symbols.scala.html#27005" title="(info: TailCalls.this.global.Type)TailCalls.this.global.TermSymbol">setInfo</a> (<a href="../ast/Trees.scala.html#45471" title="=&gt; TailCalls.this.global.Symbol">currentClass</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; TailCalls.this.global.Type">tpe</a>)
                  . <a href="../symtab/Symbols.scala.html#26993" title="(mask: Long)TailCalls.this.global.TermSymbol">setFlag</a> (Flags.<span title="Long(2097152L)">SYNTHETIC</span>)
                
                <a href="../typechecker/Typers.scala.html#42640" title="(tree: TailCalls.this.global.analyzer.global.Tree)TailCalls.this.global.analyzer.global.Tree">typed</a>(<a href="../ast/Trees.scala.html#26784" title="(pos: scala.tools.nsc.util.Position)(tree: TailCalls.this.global.Block)TailCalls.this.global.Block">atPos</a>(<a href="#638476" title="TailCalls.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29361" title="=&gt; scala.tools.nsc.util.Position">pos</a>)(<a href="../ast/Trees.scala.html#49026" title="(stats: List[TailCalls.this.global.Tree],expr: TailCalls.this.global.Tree)TailCalls.this.global.Block">Block</a>(
                  <a title="(xs: TailCalls.this.global.ValDef*)List[TailCalls.this.global.ValDef]" id="24319">List</a>(<a href="../ast/Trees.scala.html#26622" title="(sym: TailCalls.this.global.Symbol,rhs: TailCalls.this.global.Tree)TailCalls.this.global.ValDef">ValDef</a>(<a href="#638678" title="TailCalls.this.global.TermSymbol">newThis</a>, <a href="../ast/Trees.scala.html#26727" title="(sym: TailCalls.this.global.Symbol)TailCalls.this.global.Tree">This</a>(<a href="../ast/Trees.scala.html#45471" title="=&gt; TailCalls.this.global.Symbol">currentClass</a>))),
                  <a href="../ast/Trees.scala.html#26642" title="(sym: TailCalls.this.global.Symbol,params: List[TailCalls.this.global.Symbol],rhs: TailCalls.this.global.Tree)TailCalls.this.global.LabelDef">LabelDef</a>(<a href="#638505" title="TailCallElimination.this.Context">newCtx</a>.<a href="#638346" title="=&gt; TailCalls.this.global.Symbol">label</a>, <a href="#638678" title="TailCalls.this.global.TermSymbol">newThis</a> <a href="#638804" title="TailCalls.this.global.TermSymbol">::</a> <span title="(x: TailCalls.this.global.Symbol)List[TailCalls.this.global.Symbol]">(</span><a href="#638499" title="List[List[TailCalls.this.global.ValDef]]">vparams</a>.<a href="#638817" title="(f: (TailCalls.this.global.ValDef) =&gt; TailCalls.this.global.Symbol)(implicit bf: scala.collection.generic.BuilderFactory[TailCalls.this.global.Symbol,List[TailCalls.this.global.Symbol],List[TailCalls.this.global.ValDef]])List[TailCalls.this.global.Symbol]" id="7866">flatten</a> <span title="scala.collection.generic.BuilderFactory[TailCalls.this.global.Symbol,List[TailCalls.this.global.Symbol],List#Coll]">map</span> (<a href="#638832" title="TailCalls.this.global.ValDef">_</a>.<a href="../ast/Trees.scala.html#48485" title="=&gt; TailCalls.this.global.Symbol">symbol</a>)), <a href="#638675" title="TailCalls.this.global.Tree">newRHS</a>)
                )))
              <span title="TailCalls.this.global.Tree" class="keyword">case</span> <a title="TailCalls.this.global.Tree" id="638948">rhs</a>  =&gt; <a href="#638948" title="TailCalls.this.global.Tree">rhs</a>
            }
          )

          <span title="Unit" class="keyword">if</span> (<span title="(x$1: Boolean)Boolean">!</span><a href="#638504" title="Boolean">isTransformed</a> &amp;&amp; <a href="#579142" title="(defdef: TailCalls.this.global.DefDef)Boolean">tailrecRequired</a>(<a href="#638487" title="TailCalls.this.global.DefDef">dd</a>))
            <a href="#638299" title="TailCalls.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#45455" title="(pos: scala.tools.nsc.util.Position,msg: String)Unit">error</a>(<a href="#638487" title="TailCalls.this.global.DefDef">dd</a>.<a href="../ast/Trees.scala.html#29361" title="=&gt; scala.tools.nsc.util.Position">pos</a>, <span title="java.lang.String(&quot;could not optimize @tailrec annotated method&quot;)" class="string">&quot;could not optimize @tailrec annotated method&quot;</span>)
            
          <a href="../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Leaving DefDef: &quot;</span> + <a href="#638497" title="TailCalls.this.global.Name">name</a>)
          <a href="#638508" title="TailCalls.this.global.DefDef">t1</a>

        <span title="TailCalls.this.global.Tree" class="keyword">case</span> <a href="../ast/Trees.scala.html#26602" title="object TailCalls.this.global.EmptyTree">EmptyTree</a> =&gt; <a href="#638476" title="TailCalls.this.global.Tree">tree</a>

        <span title="TailCalls.this.global.Tree" class="keyword">case</span> PackageDef(_, _) =&gt;
          <span class="keyword">super</span>.<a href="../ast/Trees.scala.html#45473" title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree">transform</a>(<a href="#638476" title="TailCalls.this.global.Tree">tree</a>)

        <span title="TailCalls.this.global.Tree" class="keyword">case</span> ClassDef(_, <a title="TailCalls.this.global.Name" id="638975">name</a>, _, _) =&gt;
          <a href="../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Entering class &quot;</span> + <a href="#638975" title="TailCalls.this.global.Name">name</a>)
          <span class="keyword">val</span> <a title="TailCalls.this.global.Tree" id="638978">res</a> = <span class="keyword">super</span>.<a href="../ast/Trees.scala.html#45473" title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree">transform</a>(<a href="#638476" title="TailCalls.this.global.Tree">tree</a>)
          <a href="../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Leaving class &quot;</span> + <a href="#638975" title="TailCalls.this.global.Name">name</a>)
          <a href="#638978" title="TailCalls.this.global.Tree">res</a>

        <span title="TailCalls.this.global.Tree" class="keyword">case</span> ValDef(<a title="TailCalls.this.global.Modifiers" id="638997">mods</a>, <a title="TailCalls.this.global.Name" id="638998">name</a>, <a title="TailCalls.this.global.Tree" id="638999">tpt</a>, <a title="TailCalls.this.global.Tree" id="639000">rhs</a>) =&gt; <span class="keyword">super</span>.<a href="../ast/Trees.scala.html#45473" title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree">transform</a>(<a href="#638476" title="TailCalls.this.global.Tree">tree</a>)
        <span title="TailCalls.this.global.Tree" class="keyword">case</span> LabelDef(<a title="TailCalls.this.global.Name" id="639012">name</a>, <a title="List[TailCalls.this.global.Ident]" id="639013">params</a>, <a title="TailCalls.this.global.Tree" id="639014">rhs</a>) =&gt; <span class="keyword">super</span>.<a href="../ast/Trees.scala.html#45473" title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree">transform</a>(<a href="#638476" title="TailCalls.this.global.Tree">tree</a>)

        <span title="TailCalls.this.global.Tree" class="keyword">case</span> Template(<a title="List[TailCalls.this.global.Tree]" id="639026">parents</a>, <a title="TailCalls.this.global.ValDef" id="639027">self</a>, <a title="List[TailCalls.this.global.Tree]" id="639028">body</a>) =&gt;
          <span class="keyword">super</span>.<a href="../ast/Trees.scala.html#45473" title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree">transform</a>(<a href="#638476" title="TailCalls.this.global.Tree">tree</a>)

        <span title="TailCalls.this.global.Block" class="keyword">case</span> Block(<a title="List[TailCalls.this.global.Tree]" id="639037">stats</a>, <a title="TailCalls.this.global.Tree" id="639038">expr</a>) =&gt;
          <a href="../ast/Trees.scala.html#45465" title="=&gt; TailCalls.this.global.TreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#48551" title="(tree: TailCalls.this.global.Tree,stats: List[TailCalls.this.global.Tree],expr: TailCalls.this.global.Tree)TailCalls.this.global.Block">Block</a>(<a href="#638476" title="TailCalls.this.global.Tree">tree</a>,
                         <a href="#638295" title="(trees: List[TailCalls.this.global.Tree],nctx: TailCallElimination.this.Context)List[TailCalls.this.global.Tree]">transformTrees</a>(<a href="#639037" title="List[TailCalls.this.global.Tree]">stats</a>, <a href="#638289" title="(that: TailCallElimination.this.Context,tp: Boolean)TailCallElimination.this.Context">mkContext</a>(<a href="#638291" title="=&gt; TailCallElimination.this.Context">ctx</a>, <span title="Boolean(false)" class="keyword">false</span>)),
                         <a href="#638294" title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree">transform</a>(<a href="#639038" title="TailCalls.this.global.Tree">expr</a>))

        <span title="TailCalls.this.global.CaseDef" class="keyword">case</span> CaseDef(<a title="TailCalls.this.global.Tree" id="639116">pat</a>, <a title="TailCalls.this.global.Tree" id="639117">guard</a>, <a title="TailCalls.this.global.Tree" id="639118">body</a>) =&gt;
          <a href="../ast/Trees.scala.html#45465" title="=&gt; TailCalls.this.global.TreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#48552" title="(tree: TailCalls.this.global.Tree,pat: TailCalls.this.global.Tree,guard: TailCalls.this.global.Tree,body: TailCalls.this.global.Tree)TailCalls.this.global.CaseDef">CaseDef</a>(<a href="#638476" title="TailCalls.this.global.Tree">tree</a>, <a href="#639116" title="TailCalls.this.global.Tree">pat</a>, <a href="#639117" title="TailCalls.this.global.Tree">guard</a>, <a href="#638294" title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree">transform</a>(<a href="#639118" title="TailCalls.this.global.Tree">body</a>))

        <span title="Nothing" class="keyword">case</span> Sequence(_) | Alternative(_) |
             Star(_)     | Bind(_, _) =&gt;
          <span title="Nothing" class="keyword">throw</span> <a title="(x$1: java.lang.String)java.lang.RuntimeException" id="29246" class="keyword">new</a> <a title="java.lang.RuntimeException" id="7822">RuntimeException</a>(<span title="java.lang.String(&quot;We should've never gotten inside a pattern&quot;)" class="string">&quot;We should've never gotten inside a pattern&quot;</span>)

        <span title="TailCalls.this.global.Tree" class="keyword">case</span> Function(<a title="List[TailCalls.this.global.ValDef]" id="639157">vparams</a>, <a title="TailCalls.this.global.Tree" id="639158">body</a>) =&gt;
          <a href="#638476" title="TailCalls.this.global.Tree">tree</a>
          //throw new RuntimeException(&quot;Anonymous function should not exist at this point. at: &quot; + unit.position(tree.pos));

        <span title="TailCalls.this.global.Tree" class="keyword">case</span> Assign(<a title="TailCalls.this.global.Tree" id="639163">lhs</a>, <a title="TailCalls.this.global.Tree" id="639164">rhs</a>) =&gt;
          <span class="keyword">super</span>.<a href="../ast/Trees.scala.html#45473" title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree">transform</a>(<a href="#638476" title="TailCalls.this.global.Tree">tree</a>)

        <span title="TailCalls.this.global.If" class="keyword">case</span> If(<a title="TailCalls.this.global.Tree" id="639174">cond</a>, <a title="TailCalls.this.global.Tree" id="639175">thenp</a>, <a title="TailCalls.this.global.Tree" id="639176">elsep</a>) =&gt;
          <a href="../ast/Trees.scala.html#45465" title="=&gt; TailCalls.this.global.TreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#48562" title="(tree: TailCalls.this.global.Tree,cond: TailCalls.this.global.Tree,thenp: TailCalls.this.global.Tree,elsep: TailCalls.this.global.Tree)TailCalls.this.global.If">If</a>(<a href="#638476" title="TailCalls.this.global.Tree">tree</a>, <a href="#639174" title="TailCalls.this.global.Tree">cond</a>, <a href="#638294" title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree">transform</a>(<a href="#639175" title="TailCalls.this.global.Tree">thenp</a>), <a href="#638294" title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree">transform</a>(<a href="#639176" title="TailCalls.this.global.Tree">elsep</a>))

        <span title="TailCalls.this.global.Match" class="keyword">case</span> Match(<a title="TailCalls.this.global.Tree" id="639201">selector</a>, <a title="List[TailCalls.this.global.CaseDef]" id="639202">cases</a>) =&gt; //super.transform(tree);
          <a href="../ast/Trees.scala.html#45465" title="=&gt; TailCalls.this.global.TreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#48563" title="(tree: TailCalls.this.global.Tree,selector: TailCalls.this.global.Tree,cases: List[TailCalls.this.global.CaseDef])TailCalls.this.global.Match">Match</a>(<a href="#638476" title="TailCalls.this.global.Tree">tree</a>, <a href="#638293" title="(tree: TailCalls.this.global.Tree,nctx: TailCallElimination.this.Context)TailCalls.this.global.Tree">transform</a>(<a href="#639201" title="TailCalls.this.global.Tree">selector</a>, <a href="#638289" title="(that: TailCallElimination.this.Context,tp: Boolean)TailCallElimination.this.Context">mkContext</a>(<a href="#638291" title="=&gt; TailCallElimination.this.Context">ctx</a>, <span title="Boolean(false)" class="keyword">false</span>)), <a href="../ast/Trees.scala.html#45474" title="(trees: List[TailCalls.this.global.Tree])List[TailCalls.this.global.Tree]">transformTrees</a>(<a href="#639202" title="List[TailCalls.this.global.CaseDef]">cases</a>).<span title="[T0]T0">asInstanceOf</span><span title="List[TailCalls.this.global.CaseDef]">[</span><span title="List[TailCalls.this.global.CaseDef]">List</span>[CaseDef]])

        <span title="TailCalls.this.global.Tree" class="keyword">case</span> Return(<a title="TailCalls.this.global.Tree" id="639239">expr</a>) =&gt; <span class="keyword">super</span>.<a href="../ast/Trees.scala.html#45473" title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree">transform</a>(<a href="#638476" title="TailCalls.this.global.Tree">tree</a>)
        <span title="TailCalls.this.global.Try" class="keyword">case</span> Try(<a title="TailCalls.this.global.Tree" id="639249">block</a>, <a title="List[TailCalls.this.global.CaseDef]" id="639250">catches</a>, <a title="TailCalls.this.global.Tree" id="639251">finalizer</a>) =&gt; 
           // no calls inside a try are in tail position, but keep recursing for nested functions
          <a href="../ast/Trees.scala.html#45465" title="=&gt; TailCalls.this.global.TreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#48565" title="(tree: TailCalls.this.global.Tree,block: TailCalls.this.global.Tree,catches: List[TailCalls.this.global.CaseDef],finalizer: TailCalls.this.global.Tree)TailCalls.this.global.Try">Try</a>(<a href="#638476" title="TailCalls.this.global.Tree">tree</a>, <a href="#638293" title="(tree: TailCalls.this.global.Tree,nctx: TailCallElimination.this.Context)TailCalls.this.global.Tree">transform</a>(<a href="#639249" title="TailCalls.this.global.Tree">block</a>, <a href="#638289" title="(that: TailCallElimination.this.Context,tp: Boolean)TailCallElimination.this.Context">mkContext</a>(<a href="#638291" title="=&gt; TailCallElimination.this.Context">ctx</a>, <span title="Boolean(false)" class="keyword">false</span>)),
                       <a href="#638295" title="(trees: List[TailCalls.this.global.Tree],nctx: TailCallElimination.this.Context)List[TailCalls.this.global.Tree]">transformTrees</a>(<a href="#639250" title="List[TailCalls.this.global.CaseDef]">catches</a>, <a href="#638289" title="(that: TailCallElimination.this.Context,tp: Boolean)TailCallElimination.this.Context">mkContext</a>(<a href="#638291" title="=&gt; TailCallElimination.this.Context">ctx</a>, <span title="Boolean(false)" class="keyword">false</span>)).<span title="[T0]T0">asInstanceOf</span><span title="List[TailCalls.this.global.CaseDef]">[</span><span title="List[TailCalls.this.global.CaseDef]">List</span>[CaseDef]],
                       <a href="#638293" title="(tree: TailCalls.this.global.Tree,nctx: TailCallElimination.this.Context)TailCalls.this.global.Tree">transform</a>(<a href="#639251" title="TailCalls.this.global.Tree">finalizer</a>, <a href="#638289" title="(that: TailCallElimination.this.Context,tp: Boolean)TailCallElimination.this.Context">mkContext</a>(<a href="#638291" title="=&gt; TailCallElimination.this.Context">ctx</a>, <span title="Boolean(false)" class="keyword">false</span>)))

        <span title="TailCalls.this.global.Tree" class="keyword">case</span> Throw(<a title="TailCalls.this.global.Tree" id="639321">expr</a>) =&gt; <span class="keyword">super</span>.<a href="../ast/Trees.scala.html#45473" title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree">transform</a>(<a href="#638476" title="TailCalls.this.global.Tree">tree</a>)
        <span title="TailCalls.this.global.Tree" class="keyword">case</span> New(<a title="TailCalls.this.global.Tree" id="639331">tpt</a>) =&gt; <span class="keyword">super</span>.<a href="../ast/Trees.scala.html#45473" title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree">transform</a>(<a href="#638476" title="TailCalls.this.global.Tree">tree</a>)
        <span title="TailCalls.this.global.Tree" class="keyword">case</span> Typed(<a title="TailCalls.this.global.Tree" id="639340">expr</a>, <a title="TailCalls.this.global.Tree" id="639341">tpt</a>) =&gt; <span class="keyword">super</span>.<a href="../ast/Trees.scala.html#45473" title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree">transform</a>(<a href="#638476" title="TailCalls.this.global.Tree">tree</a>)

        <span title="TailCalls.this.global.Tree" class="keyword">case</span> Apply(<a title="TailCalls.this.global.TypeApply" id="639350">tapply</a> @ TypeApply(<a title="TailCalls.this.global.Tree" id="639353">fun</a>, <a title="List[TailCalls.this.global.Tree]" id="639354">targs</a>), <a title="List[TailCalls.this.global.Tree]" id="639357">vargs</a>) =&gt;
          <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="TailCalls.this.global.Apply" id="639361">defaultTree</a> = <a href="../ast/Trees.scala.html#45465" title="=&gt; TailCalls.this.global.TreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#48570" title="(tree: TailCalls.this.global.Tree,fun: TailCalls.this.global.Tree,args: List[TailCalls.this.global.Tree])TailCalls.this.global.Apply">Apply</a>(<a href="#638476" title="TailCalls.this.global.Tree">tree</a>, <a href="#639350" title="TailCalls.this.global.TypeApply">tapply</a>, <a href="#638295" title="(trees: List[TailCalls.this.global.Tree],nctx: TailCallElimination.this.Context)List[TailCalls.this.global.Tree]">transformTrees</a>(<a href="#639357" title="List[TailCalls.this.global.Tree]">vargs</a>, <a href="#638289" title="(that: TailCallElimination.this.Context,tp: Boolean)TailCallElimination.this.Context">mkContext</a>(<a href="#638291" title="=&gt; TailCallElimination.this.Context">ctx</a>, <span title="Boolean(false)" class="keyword">false</span>)))
          <span title="TailCalls.this.global.Tree" class="keyword">if</span> ( <a href="#638291" title="=&gt; TailCallElimination.this.Context">ctx</a>.<a href="#638343" title="=&gt; TailCalls.this.global.Symbol">currentMethod</a>.<a href="../symtab/Symbols.scala.html#26969" title="(x$1: Boolean)Boolean">isFinal</a> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span>
               <a href="#638291" title="=&gt; TailCallElimination.this.Context">ctx</a>.<a href="#638352" title="=&gt; Boolean">tailPos</a> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span>
               <a href="#638297" title="(ts1: List[TailCalls.this.global.Symbol],ts2: List[TailCalls.this.global.Symbol])Boolean">isSameTypes</a>(<a href="#638291" title="=&gt; TailCallElimination.this.Context">ctx</a>.<a href="#638349" title="=&gt; List[TailCalls.this.global.Symbol]">tparams</a>, <a href="#639354" title="(f: (TailCalls.this.global.Tree) =&gt; TailCalls.this.global.Symbol)(implicit bf: scala.collection.generic.BuilderFactory[TailCalls.this.global.Symbol,List[TailCalls.this.global.Symbol],List[TailCalls.this.global.Tree]])List[TailCalls.this.global.Symbol]">targs</a> <span title="scala.collection.generic.BuilderFactory[TailCalls.this.global.Symbol,List[TailCalls.this.global.Symbol],List#Coll]">map</span> (<a href="#639400" title="TailCalls.this.global.Tree">_</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; TailCalls.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30180" title="=&gt; TailCalls.this.global.Symbol">typeSymbol</a>)) &amp;&amp;
               <a href="#638298" title="(fun: TailCalls.this.global.Tree)Boolean">isRecursiveCall</a>(<a href="#639353" title="TailCalls.this.global.Tree">fun</a>)) {
            <a href="#639353" title="TailCalls.this.global.Tree">fun</a> <span title="TailCalls.this.global.Tree" class="keyword">match</span> {
              <span title="TailCalls.this.global.Tree" class="keyword">case</span> Select(<a title="TailCalls.this.global.Tree" id="639439">receiver</a>, _) =&gt;
                <span class="keyword">val</span> <a title="TailCalls.this.global.Type" id="639442">recTpe</a> = <a href="#639439" title="TailCalls.this.global.Tree">receiver</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; TailCalls.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30184" title="=&gt; TailCalls.this.global.Type">widen</a>
                <span class="keyword">val</span> <a title="TailCalls.this.global.Type" id="639443">enclTpe</a> = <a href="#638291" title="=&gt; TailCallElimination.this.Context">ctx</a>.<a href="#638343" title="=&gt; TailCalls.this.global.Symbol">currentMethod</a>.<a href="../symtab/Symbols.scala.html#27031" title="=&gt; TailCalls.this.global.Symbol">enclClass</a>.<a href="../symtab/Symbols.scala.html#27035" title="=&gt; TailCalls.this.global.Type">typeOfThis</a>
                // make sure the type of 'this' doesn't change through this polymorphic recursive call
                <span title="TailCalls.this.global.Tree" class="keyword">if</span> (<span title="(x$1: Boolean)Boolean">!</span><a href="../Global.scala.html#39184" title="=&gt; Boolean">forMSIL</a> &amp;&amp; 
                    (<a href="#639439" title="TailCalls.this.global.Tree">receiver</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; TailCalls.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30201" title="=&gt; List[TailCalls.this.global.Symbol]">typeParams</a>.<a title="(x$1: Boolean)Boolean" id="25434">isEmpty</a> || 
                      (<a href="#639439" title="TailCalls.this.global.Tree">receiver</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; TailCalls.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30184" title="(x$1: AnyRef)Boolean">widen</a> == <a href="#638291" title="=&gt; TailCallElimination.this.Context">ctx</a>.<a href="#638343" title="=&gt; TailCalls.this.global.Symbol">currentMethod</a>.<a href="../symtab/Symbols.scala.html#27031" title="=&gt; TailCalls.this.global.Symbol">enclClass</a>.<a href="../symtab/Symbols.scala.html#27035" title="=&gt; TailCalls.this.global.Type">typeOfThis</a>))) 
                  <a href="#638296" title="(fun: TailCalls.this.global.Tree,args: List[TailCalls.this.global.Tree])TailCalls.this.global.Tree">rewriteTailCall</a>(<a href="#639353" title="TailCalls.this.global.Tree">fun</a>, <a href="#639439" title="TailCalls.this.global.Tree">receiver</a> <a href="#639459" title="TailCalls.this.global.Tree">::</a> <a href="#638295" title="(trees: List[TailCalls.this.global.Tree],nctx: TailCallElimination.this.Context)List[TailCalls.this.global.Tree]">transformTrees</a><span title="(x: TailCalls.this.global.Tree)List[TailCalls.this.global.Tree]">(</span><a href="#639357" title="List[TailCalls.this.global.Tree]">vargs</a>, <a href="#638289" title="(that: TailCallElimination.this.Context,tp: Boolean)TailCallElimination.this.Context">mkContext</a>(<a href="#638291" title="=&gt; TailCallElimination.this.Context">ctx</a>, <span title="Boolean(false)" class="keyword">false</span>))) 
                <span class="keyword">else</span> 
                  <a href="#639360" title="=&gt; TailCalls.this.global.Apply">defaultTree</a>
              <span title="TailCalls.this.global.Tree" class="keyword">case</span> _ =&gt; <a href="#638296" title="(fun: TailCalls.this.global.Tree,args: List[TailCalls.this.global.Tree])TailCalls.this.global.Tree">rewriteTailCall</a>(<a href="#639353" title="TailCalls.this.global.Tree">fun</a>, <a href="../ast/Trees.scala.html#26727" title="(sym: TailCalls.this.global.Symbol)TailCalls.this.global.Tree">This</a>(<a href="../ast/Trees.scala.html#45471" title="=&gt; TailCalls.this.global.Symbol">currentClass</a>) <a href="#639489" title="TailCalls.this.global.Tree">::</a> <a href="#638295" title="(trees: List[TailCalls.this.global.Tree],nctx: TailCallElimination.this.Context)List[TailCalls.this.global.Tree]">transformTrees</a><span title="(x: TailCalls.this.global.Tree)List[TailCalls.this.global.Tree]">(</span><a href="#639357" title="List[TailCalls.this.global.Tree]">vargs</a>, <a href="#638289" title="(that: TailCallElimination.this.Context,tp: Boolean)TailCallElimination.this.Context">mkContext</a>(<a href="#638291" title="=&gt; TailCallElimination.this.Context">ctx</a>, <span title="Boolean(false)" class="keyword">false</span>)))
            }
          } <span class="keyword">else</span>
            <a href="#639360" title="=&gt; TailCalls.this.global.Apply">defaultTree</a>

        <span title="TailCalls.this.global.Tree" class="keyword">case</span> TypeApply(<a title="TailCalls.this.global.Tree" id="639537">fun</a>, <a title="List[TailCalls.this.global.Tree]" id="639538">args</a>) =&gt; 
          <span class="keyword">super</span>.<a href="../ast/Trees.scala.html#45473" title="(tree: TailCalls.this.global.Tree)TailCalls.this.global.Tree">transform</a>(<a href="#638476" title="TailCalls.this.global.Tree">tree</a>)

        <span title="TailCalls.this.global.Apply" class="keyword">case</span> Apply(<a title="TailCalls.this.global.Tree" id="639547">fun</a>, <a title="List[TailCalls.this.global.Tree]" id="639548">args</a>) <span class="keyword">if</span> (<a href="#639547" title="TailCalls.this.global.Tree">fun</a>.<a href="../ast/Trees.scala.html#29367" title="(x$1: AnyRef)Boolean">symbol</a> <span title="(x$1: Boolean)Boolean">==</span> <a href="../symtab/Definitions.scala.html#26479" title="object TailCalls.this.global.definitions">definitions</a>.<a href="../symtab/Definitions.scala.html#28296" title="=&gt; TailCalls.this.global.Symbol">Boolean_or</a> ||
                                  <a href="#639547" title="TailCalls.this.global.Tree">fun</a>.<a href="../ast/Trees.scala.html#29367" title="(x$1: AnyRef)Boolean">symbol</a> == <a href="../symtab/Definitions.scala.html#26479" title="object TailCalls.this.global.definitions">definitions</a>.<a href="../symtab/Definitions.scala.html#28295" title="=&gt; TailCalls.this.global.Symbol">Boolean_and</a>) =&gt;
          <a href="../ast/Trees.scala.html#45465" title="=&gt; TailCalls.this.global.TreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#48570" title="(tree: TailCalls.this.global.Tree,fun: TailCalls.this.global.Tree,args: List[TailCalls.this.global.Tree])TailCalls.this.global.Apply">Apply</a>(<a href="#638476" title="TailCalls.this.global.Tree">tree</a>, <a href="#639547" title="TailCalls.this.global.Tree">fun</a>, <a href="../ast/Trees.scala.html#45474" title="(trees: List[TailCalls.this.global.Tree])List[TailCalls.this.global.Tree]">transformTrees</a>(<a href="#639548" title="List[TailCalls.this.global.Tree]">args</a>))
          
        <span title="TailCalls.this.global.Tree" class="keyword">case</span> Apply(<a title="TailCalls.this.global.Tree" id="639582">fun</a>, <a title="List[TailCalls.this.global.Tree]" id="639583">args</a>) =&gt;
          <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="TailCalls.this.global.Apply" id="639587">defaultTree</a> = <a href="../ast/Trees.scala.html#45465" title="=&gt; TailCalls.this.global.TreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#48570" title="(tree: TailCalls.this.global.Tree,fun: TailCalls.this.global.Tree,args: List[TailCalls.this.global.Tree])TailCalls.this.global.Apply">Apply</a>(<a href="#638476" title="TailCalls.this.global.Tree">tree</a>, <a href="#639582" title="TailCalls.this.global.Tree">fun</a>, <a href="#638295" title="(trees: List[TailCalls.this.global.Tree],nctx: TailCallElimination.this.Context)List[TailCalls.this.global.Tree]">transformTrees</a>(<a href="#639583" title="List[TailCalls.this.global.Tree]">args</a>, <a href="#638289" title="(that: TailCallElimination.this.Context,tp: Boolean)TailCallElimination.this.Context">mkContext</a>(<a href="#638291" title="=&gt; TailCallElimination.this.Context">ctx</a>, <span title="Boolean(false)" class="keyword">false</span>)))
          <span title="TailCalls.this.global.Tree" class="keyword">if</span> (<a href="#638291" title="=&gt; TailCallElimination.this.Context">ctx</a>.<a href="#638343" title="=&gt; TailCalls.this.global.Symbol">currentMethod</a>.<a href="../symtab/Symbols.scala.html#26969" title="(x$1: Boolean)Boolean">isFinal</a> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> 
              <a href="#638291" title="=&gt; TailCallElimination.this.Context">ctx</a>.<a href="#638352" title="=&gt; Boolean">tailPos</a> &amp;&amp; 
              <a href="#638298" title="(fun: TailCalls.this.global.Tree)Boolean">isRecursiveCall</a>(<a href="#639582" title="TailCalls.this.global.Tree">fun</a>)) {
            <a href="#639582" title="TailCalls.this.global.Tree">fun</a> <span title="TailCalls.this.global.Tree" class="keyword">match</span> {
              <span title="TailCalls.this.global.Tree" class="keyword">case</span> Select(<a title="TailCalls.this.global.Tree" id="639623">receiver</a>, _) =&gt;
                <span title="TailCalls.this.global.Tree" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="../Global.scala.html#39184" title="=&gt; Boolean">forMSIL</a>) 
                  <a href="#638296" title="(fun: TailCalls.this.global.Tree,args: List[TailCalls.this.global.Tree])TailCalls.this.global.Tree">rewriteTailCall</a>(<a href="#639582" title="TailCalls.this.global.Tree">fun</a>, <a href="#639623" title="TailCalls.this.global.Tree">receiver</a> <a href="#639626" title="TailCalls.this.global.Tree">::</a> <a href="#638295" title="(trees: List[TailCalls.this.global.Tree],nctx: TailCallElimination.this.Context)List[TailCalls.this.global.Tree]">transformTrees</a><span title="(x: TailCalls.this.global.Tree)List[TailCalls.this.global.Tree]">(</span><a href="#639583" title="List[TailCalls.this.global.Tree]">args</a>, <a href="#638289" title="(that: TailCallElimination.this.Context,tp: Boolean)TailCallElimination.this.Context">mkContext</a>(<a href="#638291" title="=&gt; TailCallElimination.this.Context">ctx</a>, <span title="Boolean(false)" class="keyword">false</span>))) 
                <span class="keyword">else</span> 
                  <a href="#639586" title="=&gt; TailCalls.this.global.Apply">defaultTree</a>
              <span title="TailCalls.this.global.Tree" class="keyword">case</span> _ =&gt; <a href="#638296" title="(fun: TailCalls.this.global.Tree,args: List[TailCalls.this.global.Tree])TailCalls.this.global.Tree">rewriteTailCall</a>(<a href="#639582" title="TailCalls.this.global.Tree">fun</a>, <a href="../ast/Trees.scala.html#26727" title="(sym: TailCalls.this.global.Symbol)TailCalls.this.global.Tree">This</a>(<a href="../ast/Trees.scala.html#45471" title="=&gt; TailCalls.this.global.Symbol">currentClass</a>) <a href="#639656" title="TailCalls.this.global.Tree">::</a> <a href="#638295" title="(trees: List[TailCalls.this.global.Tree],nctx: TailCallElimination.this.Context)List[TailCalls.this.global.Tree]">transformTrees</a><span title="(x: TailCalls.this.global.Tree)List[TailCalls.this.global.Tree]">(</span><a href="#639583" title="List[TailCalls.this.global.Tree]">args</a>, <a href="#638289" title="(that: TailCallElimination.this.Context,tp: Boolean)TailCallElimination.this.Context">mkContext</a>(<a href="#638291" title="=&gt; TailCallElimination.this.Context">ctx</a>, <span title="Boolean(false)" class="keyword">false</span>)))
            }
          } <span class="keyword">else</span>
            <a href="#639586" title="=&gt; TailCalls.this.global.Apply">defaultTree</a>
            

        <span title="TailCalls.this.global.Tree" class="keyword">case</span> Super(<a title="TailCalls.this.global.Name" id="639706">qual</a>, <a title="TailCalls.this.global.Name" id="639707">mix</a>) =&gt;
          <a href="#638476" title="TailCalls.this.global.Tree">tree</a>
        <span title="TailCalls.this.global.Tree" class="keyword">case</span> This(<a title="TailCalls.this.global.Name" id="639713">qual</a>) =&gt;
          <a href="#638476" title="TailCalls.this.global.Tree">tree</a>
        <span title="TailCalls.this.global.Tree" class="keyword">case</span> Select(<a title="TailCalls.this.global.Tree" id="639720">qualifier</a>, <a title="TailCalls.this.global.Name" id="639721">selector</a>) =&gt;
          <a href="#638476" title="TailCalls.this.global.Tree">tree</a>
        <span title="TailCalls.this.global.Tree" class="keyword">case</span> Ident(<a title="TailCalls.this.global.Name" id="639727">name</a>) =&gt;
          <a href="#638476" title="TailCalls.this.global.Tree">tree</a>
        <span title="TailCalls.this.global.Tree" class="keyword">case</span> Literal(<a title="TailCalls.this.global.Constant" id="639733">value</a>) =&gt;
          <a href="#638476" title="TailCalls.this.global.Tree">tree</a>
        <span title="TailCalls.this.global.Tree" class="keyword">case</span> TypeTree() =&gt;
          <a href="#638476" title="TailCalls.this.global.Tree">tree</a>
        <span title="TailCalls.this.global.Tree" class="keyword">case</span> _ =&gt;
          <a href="#638476" title="TailCalls.this.global.Tree">tree</a>
      }
    }

    <span class="keyword">def</span> <a title="(trees: List[TailCalls.this.global.Tree],nctx: TailCallElimination.this.Context)List[TailCalls.this.global.Tree]" id="638295">transformTrees</a>(<a title="List[TailCalls.this.global.Tree]" id="639044">trees</a>: <span title="List[TailCalls.this.global.Tree]">List</span>[Tree], <a title="TailCallElimination.this.Context" id="639045">nctx</a>: <a href="#638287" title="TailCallElimination.this.Context">Context</a>): <span title="List[TailCalls.this.global.Tree]">List</span>[Tree] =
      <a href="#639044" title="(f: (TailCalls.this.global.Tree) =&gt; TailCalls.this.global.Tree)(implicit bf: scala.collection.generic.BuilderFactory[TailCalls.this.global.Tree,List[TailCalls.this.global.Tree],List[TailCalls.this.global.Tree]])List[TailCalls.this.global.Tree]">trees</a> <span title="scala.collection.generic.BuilderFactory[TailCalls.this.global.Tree,List[TailCalls.this.global.Tree],List#Coll]">map</span> ((<a title="TailCalls.this.global.Tree" id="639748">tree</a>) =&gt; <a href="#638293" title="(tree: TailCalls.this.global.Tree,nctx: TailCallElimination.this.Context)TailCalls.this.global.Tree">transform</a>(<a href="#639748" title="TailCalls.this.global.Tree">tree</a>, <a href="#639045" title="TailCallElimination.this.Context">nctx</a>))

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(fun: TailCalls.this.global.Tree,args: List[TailCalls.this.global.Tree])TailCalls.this.global.Tree" id="638296">rewriteTailCall</a>(<a title="TailCalls.this.global.Tree" id="639456">fun</a>: <a href="../ast/Trees.scala.html#26593" title="TailCalls.this.global.Tree">Tree</a>, <a title="List[TailCalls.this.global.Tree]" id="639457">args</a>: <span title="List[TailCalls.this.global.Tree]">List</span>[Tree]): <a href="../ast/Trees.scala.html#26593" title="TailCalls.this.global.Tree">Tree</a> = {
      <a href="../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Rewriting tail recursive method call at: &quot;</span> +
                      (<a href="#639456" title="TailCalls.this.global.Tree">fun</a>.<a href="../ast/Trees.scala.html#29361" title="=&gt; scala.tools.nsc.util.Position">pos</a>))
      <a href="#638291" title="=&gt; TailCallElimination.this.Context">ctx</a>.<a href="#638355" title="(x$1: Boolean)Unit">accessed</a> = <span title="Boolean(true)" class="keyword">true</span>
      //println(&quot;fun: &quot; + fun + &quot; args: &quot; + args)
      <span class="keyword">val</span> <a title="TailCalls.this.global.Apply" id="639784">t</a> = <a href="../ast/Trees.scala.html#26784" title="(pos: scala.tools.nsc.util.Position)(tree: TailCalls.this.global.Apply)TailCalls.this.global.Apply">atPos</a>(<a href="#639456" title="TailCalls.this.global.Tree">fun</a>.<a href="../ast/Trees.scala.html#29361" title="=&gt; scala.tools.nsc.util.Position">pos</a>)(<a href="../ast/Trees.scala.html#49125" title="(fun: TailCalls.this.global.Tree,args: List[TailCalls.this.global.Tree])TailCalls.this.global.Apply">Apply</a>(<a href="../ast/Trees.scala.html#26736" title="(sym: TailCalls.this.global.Symbol)TailCalls.this.global.Ident">Ident</a>(<a href="#638291" title="=&gt; TailCallElimination.this.Context">ctx</a>.<a href="#638346" title="=&gt; TailCalls.this.global.Symbol">label</a>), <a href="#639457" title="List[TailCalls.this.global.Tree]">args</a>))
      // println(&quot;TAIL: &quot;+t)
      <a href="../typechecker/Typers.scala.html#42640" title="(tree: TailCalls.this.global.analyzer.global.Tree)TailCalls.this.global.analyzer.global.Tree">typed</a>(<a href="#639784" title="TailCalls.this.global.Apply">t</a>)
    }

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(ts1: List[TailCalls.this.global.Symbol],ts2: List[TailCalls.this.global.Symbol])Boolean" id="638297">isSameTypes</a>(<a title="List[TailCalls.this.global.Symbol]" id="639389">ts1</a>: <span title="List[TailCalls.this.global.Symbol]">List</span>[Symbol], <a title="List[TailCalls.this.global.Symbol]" id="639390">ts2</a>: <span title="List[TailCalls.this.global.Symbol]">List</span>[Symbol]): <span title="Boolean">Boolean</span> = {
      <span class="keyword">def</span> <a title="(t1: TailCalls.this.global.Symbol,t2: TailCalls.this.global.Symbol)Boolean" id="639850">isSameType</a>(<a title="TailCalls.this.global.Symbol" id="639851">t1</a>: <a href="../symtab/Symbols.scala.html#26127" title="TailCalls.this.global.Symbol">Symbol</a>, <a title="TailCalls.this.global.Symbol" id="639852">t2</a>: <a href="../symtab/Symbols.scala.html#26127" title="TailCalls.this.global.Symbol">Symbol</a>) = {
        <a href="#639851" title="(x$1: AnyRef)Boolean">t1</a> == <a href="#639852" title="TailCalls.this.global.Symbol">t2</a>
      }
      <span title="object List">List</span>.<a title="(xs: List[TailCalls.this.global.Symbol],ys: List[TailCalls.this.global.Symbol])(f: (TailCalls.this.global.Symbol, TailCalls.this.global.Symbol) =&gt; Boolean)Boolean" id="24391">forall2</a>(<a href="#639389" title="List[TailCalls.this.global.Symbol]">ts1</a>, <a href="#639390" title="List[TailCalls.this.global.Symbol]">ts2</a>)(<a href="#639850" title="(t1: TailCalls.this.global.Symbol,t2: TailCalls.this.global.Symbol)Boolean">isSameType</a>)
    }

    /** Returns &lt;code&gt;true&lt;/code&gt; if the fun tree refers to the same method as
     *  the one saved in &lt;code&gt;ctx&lt;/code&gt;.
     * 
     *  @param fun the expression that is applied
     *  @return    &lt;code&gt;true&lt;/code&gt; if the tree symbol refers to the innermost 
     *             enclosing method
     */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(fun: TailCalls.this.global.Tree)Boolean" id="638298">isRecursiveCall</a>(<a title="TailCalls.this.global.Tree" id="639429">fun</a>: <a href="../ast/Trees.scala.html#26593" title="TailCalls.this.global.Tree">Tree</a>): <span title="Boolean">Boolean</span> =
      (<a href="#639429" title="TailCalls.this.global.Tree">fun</a>.<a href="../ast/Trees.scala.html#29367" title="(x$1: AnyRef)Boolean" id="6542">symbol</a> eq <a href="#638291" title="=&gt; TailCallElimination.this.Context">ctx</a>.<a href="#638343" title="=&gt; TailCalls.this.global.Symbol">currentMethod</a>)
  }

}

        </pre>
    </body>
</html>