<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/transform/TailCalls.scala</title>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style">
    </head>
    <body onload="initializeLinked()">
        <pre>
<span class="comment">/* NSC -- new scala compiler
 * Copyright 2005-2009 LAMP/EPFL
 * @author Iulian Dragos
 */</span>
<span class="comment">// $Id: TailCalls.scala 17315 2009-03-16 17:46:58Z extempore $</span>

<span class="keyword">package</span> scala.tools.nsc.transform

<span class="keyword">import</span> scala.tools.nsc.symtab.Flags

<span class="comment">/** Perform tail recursive call elimination.
 *
 *  @author Iulian Dragos
 *  @version 1.0
 */</span>
<span class="keyword">abstract</span> <span class="keyword">class</span> <span class="typed"><span class="type">class TailCalls extends scala.tools.nsc.SubComponent with scala.tools.nsc.transform.Transform with ScalaObject</span><a id="13642">TailCalls</a></span> <span class="keyword">extends</span> <span class="typed"><span class="type">scala.tools.nsc.transform.Transform</span><a href="Transform.scala.html#13183">Transform</a></span>
                         <span class="comment">/* with JavaLogging() */</span> {
  <span class="comment">// inherits abstract value `global' and class `Phase' from Transform</span>

  <span class="keyword">import</span> global._                  <span class="comment">// the global environment</span>
  <span class="keyword">import</span> definitions._             <span class="comment">// standard classes and methods</span>
  <span class="keyword">import</span> typer.{typed, atOwner}    <span class="comment">// methods to type trees</span>
  <span class="keyword">import</span> posAssigner.atPos         <span class="comment">// for filling in tree positions </span>

  <span class="keyword">val</span> <span class="typed"><span class="type">String</span><span id="82667"><a id="82666">phaseName</a></span></span>: <span class="typed"><span class="type">String</span><a id="1861">String</a></span> = <span class="typed"><span class="type">java.lang.String(&quot;tailcalls&quot;)</span><span class="string">&quot;tailcalls&quot;</span></span>

  <span class="keyword">def</span> <span class="typed"><span class="type">(TailCalls.this.global.CompilationUnit)TailCalls.this.global.Transformer</span><a id="82668">newTransformer</a></span>(<span class="typed"><span class="type">TailCalls.this.global.CompilationUnit</span><a id="98874">unit</a></span>: <span class="typed"><span class="type">TailCalls.this.global.CompilationUnit</span><a href="../CompilationUnits.scala.html#22571">CompilationUnit</a></span>): <span class="typed"><span class="type">TailCalls.this.global.Transformer</span><a href="../ast/Trees.scala.html#22548">Transformer</a></span> =
    <span class="typed"><span class="type">TailCalls.this.TailCallElimination</span><span class="keyword">new</span></span> <span class="typed"><span class="type">TailCalls.this.TailCallElimination</span><a href="#82672">TailCallElimination</a></span>(<span class="typed"><span class="type">TailCalls.this.global.CompilationUnit</span><a href="#98874">unit</a></span>)

  <span class="comment">/** Create a new phase which applies transformer */</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">(scala.tools.nsc.Phase)TailCalls.this.StdPhase</span><a id="82669">newPhase</a></span>(<span class="typed"><span class="type">scala.tools.nsc.Phase</span><a id="98891">prev</a></span>: scala.tools.nsc.<span class="typed"><span class="type">scala.tools.nsc.Phase</span><a href="../Phase.scala.html#6873">Phase</a></span>): <span class="typed"><span class="type">TailCalls.this.StdPhase</span><a href="../SubComponent.scala.html#29468">StdPhase</a></span> = <span class="typed"><span class="type">TailCalls.this.Phase</span><span class="keyword">new</span></span> <span class="typed"><span class="type">TailCalls.this.Phase</span><a href="#82670">Phase</a></span>(<span class="typed"><span class="type">scala.tools.nsc.Phase</span><a href="#98891">prev</a></span>)

  <span class="comment">/** The phase defined by this transform */</span>
  <span class="keyword">class</span> <span class="typed"><span class="type">class Phase extends TailCalls.this.StdPhase with ScalaObject</span><a id="82670">Phase</a></span>(<span class="typed"><span class="type">scala.tools.nsc.Phase</span><span id="98893"><a id="98896">prev</a></span></span>: scala.tools.nsc.<span class="typed"><span class="type">scala.tools.nsc.Phase</span><a href="../Phase.scala.html#6873">Phase</a></span>) <span class="keyword">extends</span> <span class="typed"><span class="type">TailCalls.this.StdPhase</span><a href="../SubComponent.scala.html#29468">StdPhase</a></span>(<span class="typed"><span class="type">scala.tools.nsc.Phase</span><a href="#98896">prev</a></span>) {
    <span class="keyword">def</span> <span class="typed"><span class="type">(TailCalls.this.global.CompilationUnit)Unit</span><a id="98895">apply</a></span>(<span class="typed"><span class="type">TailCalls.this.global.CompilationUnit</span><a id="98899">unit</a></span>: global.<span class="typed"><span class="type">TailCalls.this.global.CompilationUnit</span><a href="../CompilationUnits.scala.html#22571">CompilationUnit</a></span>) {
      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span>(<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="../Global.scala.html#21157">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.DebugSetting</span><a href="../Settings.scala.html#29966">debuginfo</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.DebugSetting#T</span><a href="../Settings.scala.html#30301">value</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">java.lang.String(&quot;notailcalls&quot;)</span><span class="string">&quot;notailcalls&quot;</span></span>)) {
        <span class="typed"><span class="type">(TailCalls.this.global.CompilationUnit)TailCalls.this.global.Transformer</span><a href="#82668">newTransformer</a></span>(<span class="typed"><span class="type">TailCalls.this.global.CompilationUnit</span><a href="#98899">unit</a></span>).<span class="typed"><span class="type">(TailCalls.this.global.CompilationUnit)Unit</span><a href="../ast/Trees.scala.html#43106">transformUnit</a></span>(<span class="typed"><span class="type">TailCalls.this.global.CompilationUnit</span><a href="#98899">unit</a></span>);
      }
    }
  }
  
  <span class="comment">/** The @tailrec annotation indicates TCO is mandatory */</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(TailCalls.this.global.DefDef)Boolean</span><a id="82671">tailrecRequired</a></span>(<span class="typed"><span class="type">TailCalls.this.global.DefDef</span><a id="98905">defdef</a></span>: <span class="typed"><span class="type">TailCalls.this.global.DefDef</span><a href="../ast/Trees.scala.html#22405">DefDef</a></span>) = <span class="typed"><span class="type">TailCalls.this.global.DefDef</span><a href="#98905">defdef</a></span>.<span class="typed"><span class="type">=&gt; TailCalls.this.global.Symbol</span><a href="../ast/Trees.scala.html#26908">symbol</a></span> <span class="typed"><span class="type">(TailCalls.this.global.Symbol)Boolean</span><a href="../symtab/Symbols.scala.html#25094">hasAttribute</a></span> <span class="typed"><span class="type">=&gt; TailCalls.this.global.Symbol</span><a href="../symtab/Definitions.scala.html#25954">TailrecClass</a></span>

  <span class="comment">/**
   * A Tail Call Transformer
   *
   * @author     Erik Stenman, Iulian Dragos
   * @version    1.1
   *
   * What it does:
   * &lt;p&gt;
   *   Finds method calls in tail-position and replaces them with jumps.
   *   A call is in a tail-position if it is the last instruction to be
   *   executed in the body of a method.  This is done by recursing over
   *   the trees that may contain calls in tail-position (trees that can't
   *   contain such calls are not transformed). However, they are not that
   *   many.
   * &lt;/p&gt;
   * &lt;p&gt;
   *   Self-recursive calls in tail-position are replaced by jumps to a
   *   label at the beginning of the method. As the JVM provides no way to
   *   jump from a method to another one, non-recursive calls in
   *   tail-position are not optimized.
   * &lt;/p&gt;
   * &lt;p&gt;
   *   A method call is self-recursive if it calls the current method and
   *   the method is final (otherwise, it could
   *   be a call to an overridden method in a subclass). Furthermore, If
   *   the method has type parameters, the call must contain these
   *   parameters as type arguments. Recursive calls on a different instance
   *   are optimized. Since 'this' is not a local variable, a dummy local val
   *   is added and used as a label parameter. The backend knows to load
   *   the corresponding argument in the 'this' (local at index 0). This dummy local
   *   is never used and should be cleand up by dead code elmination (when enabled).
   * &lt;/p&gt;
   * &lt;p&gt;
   *   This phase has been moved before pattern matching to catch more
   *   of the common cases of tail recursive functions. This means that
   *   more cases should be taken into account (like nested function, and
   *   pattern cases).
   * &lt;/p&gt;
   * &lt;p&gt;
   *   If a method contains self-recursive calls, a label is added to at
   *   the beginning of its body and the calls are replaced by jumps to
   *   that label.
   * &lt;/p&gt;
   * &lt;p&gt;
   *   Assumes: &lt;code&gt;Uncurry&lt;/code&gt; has been run already, and no multiple
   *            parameter lists exit.
   * &lt;/p&gt;
   */</span>
  <span class="keyword">class</span> <span class="typed"><span class="type">class TailCallElimination extends TailCalls.this.global.Transformer with ScalaObject</span><a id="82672">TailCallElimination</a></span>(<span class="typed"><span class="type">TailCalls.this.global.CompilationUnit</span><span id="98876"><a id="98890">unit</a></span></span>: <span class="typed"><span class="type">TailCalls.this.global.CompilationUnit</span><a href="../CompilationUnits.scala.html#22571">CompilationUnit</a></span>) <span class="keyword">extends</span> <span class="typed"><span class="type">TailCalls.this.global.Transformer</span><a href="../ast/Trees.scala.html#22548">Transformer</a></span> {

    <span class="keyword">class</span> <span class="typed"><span class="type">class Context extends java.lang.Object with ScalaObject</span><a id="98878">Context</a></span> {
      <span class="comment">/** The current method */</span>
      <span class="keyword">var</span> <span class="typed"><span class="type">TailCalls.this.global.Symbol</span><span id="98913"><span id="98911"><span id="98912"><a id="98930">currentMethod</a></span></span></span></span>: <span class="typed"><span class="type">TailCalls.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#21866">Symbol</a></span> = <span class="typed"><span class="type">object TailCalls.this.global.NoSymbol</span><a href="../symtab/Symbols.scala.html#21873">NoSymbol</a></span>

      <span class="comment">/** The current tail-call label */</span>
      <span class="keyword">var</span> <span class="typed"><span class="type">TailCalls.this.global.Symbol</span><span id="98916"><span id="98914"><span id="98915"><a id="98931">label</a></span></span></span></span>: <span class="typed"><span class="type">TailCalls.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#21866">Symbol</a></span> = <span class="typed"><span class="type">object TailCalls.this.global.NoSymbol</span><a href="../symtab/Symbols.scala.html#21873">NoSymbol</a></span>

      <span class="comment">/** The expected type arguments of self-recursive calls */</span>
      <span class="keyword">var</span> <span class="typed"><span class="type">List[TailCalls.this.global.Symbol]</span><span id="98919"><span id="98917"><span id="98918"><a id="98932">tparams</a></span></span></span></span>: <span class="typed"><span class="type">List[TailCalls.this.global.Symbol]</span><a id="526">List</a></span>[Symbol] = <span class="typed"><span class="type">object Nil</span><a id="335">Nil</a></span>

      <span class="comment">/** Tells whether we are in a (possible) tail position */</span>
      <span class="keyword">var</span> <span class="typed"><span class="type">Boolean</span><span id="98922"><span id="98920"><span id="98921"><a id="98933">tailPos</a></span></span></span></span> = <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>

      <span class="comment">/** Is the label accessed? */</span>
      <span class="keyword">var</span> <span class="typed"><span class="type">Boolean</span><span id="98925"><span id="98923"><span id="98924"><a id="98934">accessed</a></span></span></span></span> = <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>

      <span class="keyword">def</span> <span class="typed"><span class="type">(TailCallElimination.this.Context)TailCallElimination.this.Context</span><a id="98926" class="keyword">this</a></span>(<span class="typed"><span class="type">TailCallElimination.this.Context</span><a id="98937">that</a></span>: <span class="typed"><span class="type">TailCallElimination.this.Context</span><a href="#98878">Context</a></span>) = <span class="typed"><span class="type">Unit</span><span >{</span></span>
        <span class="typed"><span class="type">Context.this.type</span><a href="#98878" class="keyword">this</a></span>()
        <span class="typed"><span class="type">Context.this.type</span><a href="#98878" class="keyword">this</a></span>.<span class="typed"><span class="type">(TailCalls.this.global.Symbol)Unit</span><a href="#98912">currentMethod</a></span> = <span class="typed"><span class="type">TailCallElimination.this.Context</span><a href="#98937">that</a></span>.<span class="typed"><span class="type">=&gt; TailCalls.this.global.Symbol</span><a href="#98911">currentMethod</a></span>
        <span class="typed"><span class="type">Context.this.type</span><a href="#98878" class="keyword">this</a></span>.<span class="typed"><span class="type">(TailCalls.this.global.Symbol)Unit</span><a href="#98915">label</a></span>         = <span class="typed"><span class="type">TailCallElimination.this.Context</span><a href="#98937">that</a></span>.<span class="typed"><span class="type">=&gt; TailCalls.this.global.Symbol</span><a href="#98914">label</a></span>
        <span class="typed"><span class="type">Context.this.type</span><a href="#98878" class="keyword">this</a></span>.<span class="typed"><span class="type">(List[TailCalls.this.global.Symbol])Unit</span><a href="#98918">tparams</a></span>       = <span class="typed"><span class="type">TailCallElimination.this.Context</span><a href="#98937">that</a></span>.<span class="typed"><span class="type">=&gt; List[TailCalls.this.global.Symbol]</span><a href="#98917">tparams</a></span>
        <span class="typed"><span class="type">Context.this.type</span><a href="#98878" class="keyword">this</a></span>.<span class="typed"><span class="type">(Boolean)Unit</span><a href="#98921">tailPos</a></span>       = <span class="typed"><span class="type">TailCallElimination.this.Context</span><a href="#98937">that</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="#98920">tailPos</a></span>
        <span class="typed"><span class="type">Context.this.type</span><a href="#98878" class="keyword">this</a></span>.<span class="typed"><span class="type">(Boolean)Unit</span><a href="#98924">accessed</a></span>      = <span class="typed"><span class="type">TailCallElimination.this.Context</span><a href="#98937">that</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="#98923">accessed</a></span>
      }

      <span class="comment">/** Create a new method symbol for the current method and store it in
        * the label field.
        */</span>
      <span class="keyword">def</span> <span class="typed"><span class="type">()Unit</span><a id="98927">makeLabel</a></span>(): <span class="typed"><span class="type">Unit</span><a id="2169">Unit</a></span> = {
        <span class="typed"><span class="type">(TailCalls.this.global.Symbol)Unit</span><a href="#98915">label</a></span> = <span class="typed"><span class="type">=&gt; TailCalls.this.global.Symbol</span><a href="#98911">currentMethod</a></span>.<span class="typed"><span class="type">(scala.tools.nsc.util.Position,TailCalls.this.global.Name)TailCalls.this.global.TermSymbol</span><a href="../symtab/Symbols.scala.html#25103">newLabel</a></span>(<span class="typed"><span class="type">=&gt; TailCalls.this.global.Symbol</span><a href="#98911">currentMethod</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.util.Position</span><a href="../symtab/Symbols.scala.html#25087">pos</a></span>, <span class="typed"><span class="type">java.lang.String(&quot;_&quot;)</span><span class="string">&quot;_&quot;</span></span> <span class="typed"><span class="type">implicit scala.tools.nsc.symtab.Names.view : (String)TailCalls.this.global.Name</span><a href="../symtab/Names.scala.html#21102" id="5802">+</a></span> <span class="typed"><span class="type">=&gt; TailCalls.this.global.Symbol</span><a href="#98911">currentMethod</a></span>.<span class="typed"><span class="type">=&gt; TailCalls.this.global.Name</span><a href="../symtab/Symbols.scala.html#25215">name</a></span>)
        <span class="typed"><span class="type">(Boolean)Unit</span><a href="#98924">accessed</a></span> = <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>
      }

      <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">()String</span><a id="98928">toString</a></span>(): <span class="typed"><span class="type">String</span><a id="1861">String</a></span> = (
        <span class="typed"><span class="type">java.lang.String(&quot;&quot;)</span><span class="string">&quot;&quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">=&gt; TailCalls.this.global.Symbol</span><a href="#98911">currentMethod</a></span>.<span class="typed"><span class="type">=&gt; TailCalls.this.global.Name</span><a href="../symtab/Symbols.scala.html#25215">name</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot; tparams: &quot;)</span><span class="string">&quot; tparams: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">=&gt; List[TailCalls.this.global.Symbol]</span><a href="#98917">tparams</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot; tailPos: &quot;)</span><span class="string">&quot; tailPos: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">=&gt; Boolean</span><a href="#98920">tailPos</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span>
        <span class="typed"><span class="type">java.lang.String(&quot; accessed: &quot;)</span><span class="string">&quot; accessed: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">=&gt; Boolean</span><a href="#98923">accessed</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;\012Label: &quot;)</span><span class="string">&quot;\nLabel: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">=&gt; TailCalls.this.global.Symbol</span><a href="#98914">label</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;\012Label type: &quot;)</span><span class="string">&quot;\nLabel type: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">=&gt; TailCalls.this.global.Symbol</span><a href="#98914">label</a></span>.<span class="typed"><span class="type">=&gt; TailCalls.this.global.Type</span><a href="../symtab/Symbols.scala.html#25231">info</a></span>
      )
    }

    <span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(TailCallElimination.this.Context)TailCallElimination.this.Context</span><a id="98879">mkContext</a></span>(<span class="typed"><span class="type">TailCallElimination.this.Context</span><a id="98944">that</a></span>: <span class="typed"><span class="type">TailCallElimination.this.Context</span><a href="#98878">Context</a></span>) = <span class="typed"><span class="type">(TailCallElimination.this.Context)TailCallElimination.this.Context</span><a href="#98926" class="keyword">new</a></span> <span class="typed"><span class="type">TailCallElimination.this.Context</span><a href="#98878">Context</a></span>(<span class="typed"><span class="type">TailCallElimination.this.Context</span><a href="#98944">that</a></span>)
    <span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(TailCallElimination.this.Context,Boolean)TailCallElimination.this.Context</span><a id="98880">mkContext</a></span>(<span class="typed"><span class="type">TailCallElimination.this.Context</span><a id="98948">that</a></span>: <span class="typed"><span class="type">TailCallElimination.this.Context</span><a href="#98878">Context</a></span>, <span class="typed"><span class="type">Boolean</span><a id="98949">tp</a></span>: <span class="typed"><span class="type">Boolean</span><a id="2170">Boolean</a></span>): <span class="typed"><span class="type">TailCallElimination.this.Context</span><a href="#98878">Context</a></span> = {
      <span class="keyword">val</span> <span class="typed"><span class="type">TailCallElimination.this.Context</span><a id="98950">t</a></span> = <span class="typed"><span class="type">(TailCallElimination.this.Context)TailCallElimination.this.Context</span><a href="#98879">mkContext</a></span>(<span class="typed"><span class="type">TailCallElimination.this.Context</span><a href="#98948">that</a></span>)
      <span class="typed"><span class="type">TailCallElimination.this.Context</span><a href="#98950">t</a></span>.<span class="typed"><span class="type">(Boolean)Unit</span><a href="#98921">tailPos</a></span> = <span class="typed"><span class="type">Boolean</span><a href="#98949">tp</a></span>
      <span class="typed"><span class="type">TailCallElimination.this.Context</span><a href="#98950">t</a></span>
    }

    <span class="keyword">private</span> <span class="keyword">var</span> <span class="typed"><span class="type">TailCallElimination.this.Context</span><span id="98883"><span id="98881"><span id="98882"><a id="98909">ctx</a></span></span></span></span>: <span class="typed"><span class="type">TailCallElimination.this.Context</span><a href="#98878">Context</a></span> = <span class="typed"><span class="type">TailCallElimination.this.Context</span><span class="keyword">new</span></span> <span class="typed"><span class="type">TailCallElimination.this.Context</span><a href="#98878">Context</a></span>()

    <span class="comment">/** Rewrite this tree to contain no tail recursive calls */</span>
    <span class="keyword">def</span> <span class="typed"><span class="type">(TailCalls.this.global.Tree,TailCallElimination.this.Context)TailCalls.this.global.Tree</span><a id="98884">transform</a></span>(<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a id="98953">tree</a></span>: <span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="../ast/Trees.scala.html#22371">Tree</a></span>, <span class="typed"><span class="type">TailCallElimination.this.Context</span><a id="98954">nctx</a></span>: <span class="typed"><span class="type">TailCallElimination.this.Context</span><a href="#98878">Context</a></span>): <span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="../ast/Trees.scala.html#22371">Tree</a></span> = {
      <span class="keyword">val</span> <span class="typed"><span class="type">TailCallElimination.this.Context</span><a id="98955">oldCtx</a></span> = <span class="typed"><span class="type">=&gt; TailCallElimination.this.Context</span><a href="#98881">ctx</a></span>
      <span class="typed"><span class="type">(TailCallElimination.this.Context)Unit</span><a href="#98882">ctx</a></span> = <span class="typed"><span class="type">TailCallElimination.this.Context</span><a href="#98954">nctx</a></span>
      <span class="keyword">val</span> <span class="typed"><span class="type">TailCalls.this.global.Tree</span><a id="98956">t</a></span> = <span class="typed"><span class="type">(TailCalls.this.global.Tree)TailCalls.this.global.Tree</span><a href="#98885">transform</a></span>(<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#98953">tree</a></span>)
      <span class="typed"><span class="type">TailCallElimination.this.type</span><a href="#82672" class="keyword">this</a></span>.<span class="typed"><span class="type">(TailCallElimination.this.Context)Unit</span><a href="#98882">ctx</a></span> = <span class="typed"><span class="type">TailCallElimination.this.Context</span><a href="#98955">oldCtx</a></span>
      <span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#98956">t</a></span>
    }

    <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">(TailCalls.this.global.Tree)TailCalls.this.global.Tree</span><a id="98885">transform</a></span>(<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a id="98957">tree</a></span>: <span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="../ast/Trees.scala.html#22371">Tree</a></span>): <span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="../ast/Trees.scala.html#22371">Tree</a></span> = {
      <span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#98957">tree</a></span> <span class="typed"><span class="type">TailCalls.this.global.Tree</span><span class="keyword">match</span></span> {

        <span class="typed"><span class="type">TailCalls.this.global.DefDef</span><span class="keyword">case</span></span> <span class="typed"><span class="type">TailCalls.this.global.DefDef</span><a id="98959">dd</a></span> @ <a id="1">DefDef</a>(<span class="typed"><span class="type">TailCalls.this.global.Modifiers</span><a id="98961">mods</a></span>, <span class="typed"><span class="type">TailCalls.this.global.Name</span><a id="98962">name</a></span>, <span class="typed"><span class="type">List[TailCalls.this.global.TypeDef]</span><a id="98963">tparams</a></span>, <span class="typed"><span class="type">List[List[TailCalls.this.global.ValDef]]</span><a id="98964">vparams</a></span>, <span class="typed"><span class="type">TailCalls.this.global.Tree</span><a id="98965">tpt</a></span>, <span class="typed"><span class="type">TailCalls.this.global.Tree</span><a id="98966">rhs</a></span>) =&gt;
          <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;Entering DefDef: &quot;)</span><span class="string">&quot;Entering DefDef: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">TailCalls.this.global.Name</span><a href="#98962">name</a></span>)
          <span class="keyword">var</span> <span class="typed"><span class="type">Boolean</span><a id="98967">isTransformed</a></span> = <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>
          <span class="keyword">val</span> <span class="typed"><span class="type">TailCallElimination.this.Context</span><a id="98968">newCtx</a></span> = <span class="typed"><span class="type">(TailCallElimination.this.Context)TailCallElimination.this.Context</span><a href="#98879">mkContext</a></span>(<span class="typed"><span class="type">=&gt; TailCallElimination.this.Context</span><a href="#98881">ctx</a></span>)
          <span class="typed"><span class="type">TailCallElimination.this.Context</span><a href="#98968">newCtx</a></span>.<span class="typed"><span class="type">(TailCalls.this.global.Symbol)Unit</span><a href="#98912">currentMethod</a></span> = <span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#98957">tree</a></span>.<span class="typed"><span class="type">=&gt; TailCalls.this.global.Symbol</span><a href="../ast/Trees.scala.html#25358">symbol</a></span>
          <span class="typed"><span class="type">TailCallElimination.this.Context</span><a href="#98968">newCtx</a></span>.<span class="typed"><span class="type">()Unit</span><a href="#98927">makeLabel</a></span>()
          <span class="typed"><span class="type">TailCallElimination.this.Context</span><a href="#98968">newCtx</a></span>.<span class="typed"><span class="type">=&gt; TailCalls.this.global.Symbol</span><a href="#98914">label</a></span>.<span class="typed"><span class="type">(TailCalls.this.global.Type)TailCalls.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#25232">setInfo</a></span>(<span class="typed"><span class="type">(List[TailCalls.this.global.Type],TailCalls.this.global.Type)TailCalls.this.global.MethodType</span><a href="../symtab/Types.scala.html#31175">MethodType</a></span>(<span class="typed"><span class="type">=&gt; TailCalls.this.global.Symbol</span><a href="../ast/Trees.scala.html#43094">currentClass</a></span>.<span class="typed"><span class="type">=&gt; TailCalls.this.global.Type</span><a href="../symtab/Symbols.scala.html#25230">tpe</a></span> <span class="typed"><span class="type">(TailCalls.this.global.Type)List[TailCalls.this.global.Type]</span><a href="#98973" id="21335">::</a></span> <span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#98957">tree</a></span>.<span class="typed"><span class="type">=&gt; TailCalls.this.global.Symbol</span><a href="../ast/Trees.scala.html#25358">symbol</a></span>.<span class="typed"><span class="type">=&gt; TailCalls.this.global.Type</span><a href="../symtab/Symbols.scala.html#25230">tpe</a></span>.<span class="typed"><span class="type">=&gt; List[TailCalls.this.global.Type]</span><a href="../symtab/Types.scala.html#25668">paramTypes</a></span>, <span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#98957">tree</a></span>.<span class="typed"><span class="type">=&gt; TailCalls.this.global.Symbol</span><a href="../ast/Trees.scala.html#25358">symbol</a></span>.<span class="typed"><span class="type">=&gt; TailCalls.this.global.Type</span><a href="../symtab/Symbols.scala.html#25230">tpe</a></span>.<span class="typed"><span class="type">=&gt; TailCalls.this.global.Type</span><a href="../symtab/Types.scala.html#25666">finalResultType</a></span>))
          <span class="typed"><span class="type">TailCallElimination.this.Context</span><a href="#98968">newCtx</a></span>.<span class="typed"><span class="type">(Boolean)Unit</span><a href="#98921">tailPos</a></span> = <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>

          <span class="keyword">val</span> <span class="typed"><span class="type">TailCalls.this.global.DefDef</span><a id="98969">t1</a></span> = <span class="typed"><span class="type">TailCalls.this.global.DefDef</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">TailCallElimination.this.Context</span><a href="#98968">newCtx</a></span>.<span class="typed"><span class="type">=&gt; TailCalls.this.global.Symbol</span><a href="#98911">currentMethod</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../symtab/Symbols.scala.html#25197">isFinal</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2750">||</a></span>
                       <span class="typed"><span class="type">TailCallElimination.this.Context</span><a href="#98968">newCtx</a></span>.<span class="typed"><span class="type">=&gt; TailCalls.this.global.Symbol</span><a href="#98911">currentMethod</a></span>.<span class="typed"><span class="type">=&gt; TailCalls.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#25257">enclClass</a></span>.<span class="typed"><span class="type">(Long)Boolean</span><a href="../symtab/Symbols.scala.html#25223">hasFlag</a></span>(Flags.<span class="typed"><span class="type">Long(256L)</span><span >MODULE</span></span>)) {
            <span class="typed"><span class="type">TailCallElimination.this.Context</span><a href="#98968">newCtx</a></span>.<span class="typed"><span class="type">(List[TailCalls.this.global.Symbol])Unit</span><a href="#98918">tparams</a></span> = <span class="typed"><span class="type">object Nil</span><a id="335">Nil</a></span>
            <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;  Considering &quot;)</span><span class="string">&quot;  Considering &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">TailCalls.this.global.Name</span><a href="#98962">name</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot; for tailcalls&quot;)</span><span class="string">&quot; for tailcalls&quot;</span></span>)
            <span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#98957">tree</a></span>.<span class="typed"><span class="type">=&gt; TailCalls.this.global.Symbol</span><a href="../ast/Trees.scala.html#25358">symbol</a></span>.<span class="typed"><span class="type">=&gt; TailCalls.this.global.Type</span><a href="../symtab/Symbols.scala.html#25230">tpe</a></span> <span class="typed"><span class="type">Any</span><span class="keyword">match</span></span> {
              <span class="typed"><span class="type">TailCalls.this.global.Symbol</span><span class="keyword">case</span></span> <a id="1">PolyType</a>(<span class="typed"><span class="type">List[TailCalls.this.global.Symbol]</span><a id="98977">tpes</a></span>, <span class="typed"><span class="type">TailCalls.this.global.Type</span><a id="98978">restpe</a></span>) =&gt;
                <span class="typed"><span class="type">TailCallElimination.this.Context</span><a href="#98968">newCtx</a></span>.<span class="typed"><span class="type">(List[TailCalls.this.global.Symbol])Unit</span><a href="#98918">tparams</a></span> = <span class="typed"><span class="type">List[TailCalls.this.global.TypeDef]</span><a href="#98963">tparams</a></span> <span class="typed"><span class="type">((TailCalls.this.global.TypeDef) =&gt; TailCalls.this.global.Symbol)List[TailCalls.this.global.Symbol]</span><a id="21362">map</a></span> (<span class="typed"><span class="type">TailCalls.this.global.TypeDef</span><a href="#98981">_</a></span>.<span class="typed"><span class="type">=&gt; TailCalls.this.global.Symbol</span><a href="../ast/Trees.scala.html#26908">symbol</a></span>)
                <span class="typed"><span class="type">TailCallElimination.this.Context</span><a href="#98968">newCtx</a></span>.<span class="typed"><span class="type">=&gt; TailCalls.this.global.Symbol</span><a href="#98914">label</a></span>.<span class="typed"><span class="type">(TailCalls.this.global.Type)TailCalls.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#25232">setInfo</a></span>(
                  <span class="typed"><span class="type">TailCallElimination.this.Context</span><a href="#98968">newCtx</a></span>.<span class="typed"><span class="type">=&gt; TailCalls.this.global.Symbol</span><a href="#98914">label</a></span>.<span class="typed"><span class="type">=&gt; TailCalls.this.global.Type</span><a href="../symtab/Symbols.scala.html#25230">tpe</a></span>.<span class="typed"><span class="type">(List[TailCalls.this.global.Symbol],List[TailCalls.this.global.Symbol])TailCalls.this.global.Type</span><a href="../symtab/Types.scala.html#25692">substSym</a></span>(<span class="typed"><span class="type">List[TailCalls.this.global.Symbol]</span><a href="#98977">tpes</a></span>, <span class="typed"><span class="type">List[TailCalls.this.global.TypeDef]</span><a href="#98963">tparams</a></span> <span class="typed"><span class="type">((TailCalls.this.global.TypeDef) =&gt; TailCalls.this.global.Symbol)List[TailCalls.this.global.Symbol]</span><a id="21362">map</a></span> (<span class="typed"><span class="type">TailCalls.this.global.TypeDef</span><a href="#98986">_</a></span>.<span class="typed"><span class="type">=&gt; TailCalls.this.global.Symbol</span><a href="../ast/Trees.scala.html#26908">symbol</a></span>)))
              <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> _ =&gt; <span class="typed"><span class="type">Unit</span><span >(</span></span>)
            }

            <span class="comment">//println(&quot;label.tpe: &quot; + newCtx.label.tpe)</span>
            <span class="keyword">var</span> <span class="typed"><span class="type">TailCalls.this.global.Tree</span><a id="98976">newRHS</a></span> = <span class="typed"><span class="type">(TailCalls.this.global.Tree,TailCallElimination.this.Context)TailCalls.this.global.Tree</span><a href="#98884">transform</a></span>(<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#98966">rhs</a></span>, <span class="typed"><span class="type">TailCallElimination.this.Context</span><a href="#98968">newCtx</a></span>);
            <span class="typed"><span class="type">TailCalls.this.global.DefDef</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">TailCallElimination.this.Context</span><a href="#98968">newCtx</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="#98923">accessed</a></span>) {
              <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;Rewrote def &quot;)</span><span class="string">&quot;Rewrote def &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">TailCallElimination.this.Context</span><a href="#98968">newCtx</a></span>.<span class="typed"><span class="type">=&gt; TailCalls.this.global.Symbol</span><a href="#98911">currentMethod</a></span>)
              <span class="typed"><span class="type">Boolean</span><a href="#98967">isTransformed</a></span> = <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>

              <span class="keyword">val</span> <span class="typed"><span class="type">TailCalls.this.global.TermSymbol</span><a id="98998">newThis</a></span> = <span class="typed"><span class="type">TailCallElimination.this.Context</span><a href="#98968">newCtx</a></span>.<span class="typed"><span class="type">=&gt; TailCalls.this.global.Symbol</span><a href="#98911">currentMethod</a></span>.<span class="typed"><span class="type">(scala.tools.nsc.util.Position,TailCalls.this.global.Name)TailCalls.this.global.TermSymbol</span><a href="../symtab/Symbols.scala.html#25098">newValue</a></span>(<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#98957">tree</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.util.Position</span><a href="../ast/Trees.scala.html#25352">pos</a></span>, <span class="typed"><span class="type">object TailCalls.this.global.nme</span><a href="../symtab/StdNames.scala.html#22317">nme</a></span>.<span class="typed"><span class="type">=&gt; TailCalls.this.global.Name</span><a href="../symtab/StdNames.scala.html#30637">THIS</a></span>)
                 .<span class="typed"><span class="type">(TailCalls.this.global.Type)TailCalls.this.global.TermSymbol</span><a href="../symtab/Symbols.scala.html#25232">setInfo</a></span>(<span class="typed"><span class="type">=&gt; TailCalls.this.global.Symbol</span><a href="../ast/Trees.scala.html#43094">currentClass</a></span>.<span class="typed"><span class="type">=&gt; TailCalls.this.global.Type</span><a href="../symtab/Symbols.scala.html#25230">tpe</a></span>)
                 .<span class="typed"><span class="type">(Long)TailCalls.this.global.TermSymbol</span><a href="../symtab/Symbols.scala.html#25220">setFlag</a></span>(Flags.<span class="typed"><span class="type">Long(2097152L)</span><span >SYNTHETIC</span></span>)
              <span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#98976">newRHS</a></span> =
                  <span class="typed"><span class="type">(TailCalls.this.global.analyzer.global.Tree)TailCalls.this.global.analyzer.global.Tree</span><a href="../typechecker/Typers.scala.html#31830">typed</a></span>(<span class="typed"><span class="type">(scala.tools.nsc.util.Position)(TailCalls.this.global.Block)TailCalls.this.global.Block</span><a href="../ast/Trees.scala.html#28572">atPos</a></span>(<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#98957">tree</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.util.Position</span><a href="../ast/Trees.scala.html#25352">pos</a></span>)(<span class="typed"><span class="type">(List[TailCalls.this.global.Tree],TailCalls.this.global.Tree)TailCalls.this.global.Block</span><a href="../ast/Trees.scala.html#42662">Block</a></span>(<span class="typed"><span class="type">(TailCalls.this.global.ValDef*)List[TailCalls.this.global.ValDef]</span><span id="21328"><a id="527">List</a></span></span>(
                    <span class="typed"><span class="type">(TailCalls.this.global.Symbol,TailCalls.this.global.Tree)TailCalls.this.global.ValDef</span><a href="../ast/Trees.scala.html#22401">ValDef</a></span>(<span class="typed"><span class="type">TailCalls.this.global.TermSymbol</span><a href="#98998">newThis</a></span>, <span class="typed"><span class="type">(TailCalls.this.global.Symbol)TailCalls.this.global.Tree</span><a href="../ast/Trees.scala.html#22505">This</a></span>(<span class="typed"><span class="type">=&gt; TailCalls.this.global.Symbol</span><a href="../ast/Trees.scala.html#43094">currentClass</a></span>))),
                    <span class="typed"><span class="type">(TailCalls.this.global.Symbol,List[TailCalls.this.global.Symbol],TailCalls.this.global.Tree)TailCalls.this.global.LabelDef</span><a href="../ast/Trees.scala.html#22420">LabelDef</a></span>(<span class="typed"><span class="type">TailCallElimination.this.Context</span><a href="#98968">newCtx</a></span>.<span class="typed"><span class="type">=&gt; TailCalls.this.global.Symbol</span><a href="#98914">label</a></span>, 
                             <span class="typed"><span class="type">TailCalls.this.global.TermSymbol</span><a href="#98998">newThis</a></span> <span class="typed"><span class="type">(TailCalls.this.global.Symbol)List[TailCalls.this.global.Symbol]</span><a href="#99015" id="21335">::</a></span> (<span class="typed"><span class="type">object List</span><a id="527">List</a></span>.<span class="typed"><span class="type">(List[List[TailCalls.this.global.ValDef]])List[TailCalls.this.global.ValDef]</span><a id="21419">flatten</a></span>(<span class="typed"><span class="type">List[List[TailCalls.this.global.ValDef]]</span><a href="#98964">vparams</a></span>) <span class="typed"><span class="type">((TailCalls.this.global.ValDef) =&gt; TailCalls.this.global.Symbol)List[TailCalls.this.global.Symbol]</span><a id="21362">map</a></span> (<span class="typed"><span class="type">TailCalls.this.global.ValDef</span><a href="#99020">_</a></span>.<span class="typed"><span class="type">=&gt; TailCalls.this.global.Symbol</span><a href="../ast/Trees.scala.html#26908">symbol</a></span>)), 
                             <span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#98976">newRHS</a></span>))));
              <span class="typed"><span class="type">=&gt; TailCalls.this.global.TreeCopier</span><a href="../ast/Trees.scala.html#43088">copy</a></span>.<span class="typed"><span class="type">(TailCalls.this.global.Tree,TailCalls.this.global.Modifiers,TailCalls.this.global.Name,List[TailCalls.this.global.TypeDef],List[List[TailCalls.this.global.ValDef]],TailCalls.this.global.Tree,TailCalls.this.global.Tree)TailCalls.this.global.DefDef</span><a href="../ast/Trees.scala.html#43160">DefDef</a></span>(<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#98957">tree</a></span>, <span class="typed"><span class="type">TailCalls.this.global.Modifiers</span><a href="#98961">mods</a></span>, <span class="typed"><span class="type">TailCalls.this.global.Name</span><a href="#98962">name</a></span>, <span class="typed"><span class="type">List[TailCalls.this.global.TypeDef]</span><a href="#98963">tparams</a></span>, <span class="typed"><span class="type">List[List[TailCalls.this.global.ValDef]]</span><a href="#98964">vparams</a></span>, <span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#98965">tpt</a></span>, <span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#98976">newRHS</a></span>);
            } <span class="keyword">else</span>
              <span class="typed"><span class="type">=&gt; TailCalls.this.global.TreeCopier</span><a href="../ast/Trees.scala.html#43088">copy</a></span>.<span class="typed"><span class="type">(TailCalls.this.global.Tree,TailCalls.this.global.Modifiers,TailCalls.this.global.Name,List[TailCalls.this.global.TypeDef],List[List[TailCalls.this.global.ValDef]],TailCalls.this.global.Tree,TailCalls.this.global.Tree)TailCalls.this.global.DefDef</span><a href="../ast/Trees.scala.html#43160">DefDef</a></span>(<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#98957">tree</a></span>, <span class="typed"><span class="type">TailCalls.this.global.Modifiers</span><a href="#98961">mods</a></span>, <span class="typed"><span class="type">TailCalls.this.global.Name</span><a href="#98962">name</a></span>, <span class="typed"><span class="type">List[TailCalls.this.global.TypeDef]</span><a href="#98963">tparams</a></span>, <span class="typed"><span class="type">List[List[TailCalls.this.global.ValDef]]</span><a href="#98964">vparams</a></span>, <span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#98965">tpt</a></span>, <span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#98976">newRHS</a></span>);
          } <span class="keyword">else</span> {
            <span class="typed"><span class="type">=&gt; TailCalls.this.global.TreeCopier</span><a href="../ast/Trees.scala.html#43088">copy</a></span>.<span class="typed"><span class="type">(TailCalls.this.global.Tree,TailCalls.this.global.Modifiers,TailCalls.this.global.Name,List[TailCalls.this.global.TypeDef],List[List[TailCalls.this.global.ValDef]],TailCalls.this.global.Tree,TailCalls.this.global.Tree)TailCalls.this.global.DefDef</span><a href="../ast/Trees.scala.html#43160">DefDef</a></span>(<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#98957">tree</a></span>, <span class="typed"><span class="type">TailCalls.this.global.Modifiers</span><a href="#98961">mods</a></span>, <span class="typed"><span class="type">TailCalls.this.global.Name</span><a href="#98962">name</a></span>, <span class="typed"><span class="type">List[TailCalls.this.global.TypeDef]</span><a href="#98963">tparams</a></span>, <span class="typed"><span class="type">List[List[TailCalls.this.global.ValDef]]</span><a href="#98964">vparams</a></span>, <span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#98965">tpt</a></span>, <span class="typed"><span class="type">(TailCalls.this.global.Tree,TailCallElimination.this.Context)TailCalls.this.global.Tree</span><a href="#98884">transform</a></span>(<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#98966">rhs</a></span>, <span class="typed"><span class="type">TailCallElimination.this.Context</span><a href="#98968">newCtx</a></span>))
          }

          <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">Boolean</span><a href="#98967">isTransformed</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">(TailCalls.this.global.DefDef)Boolean</span><a href="#82671">tailrecRequired</a></span>(<span class="typed"><span class="type">TailCalls.this.global.DefDef</span><a href="#98959">dd</a></span>))
            <span class="typed"><span class="type">TailCalls.this.global.CompilationUnit</span><a href="#98876">unit</a></span>.<span class="typed"><span class="type">(scala.tools.nsc.util.Position,String)Unit</span><a href="../CompilationUnits.scala.html#24150">error</a></span>(<span class="typed"><span class="type">TailCalls.this.global.DefDef</span><a href="#98959">dd</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.util.Position</span><a href="../ast/Trees.scala.html#25352">pos</a></span>, <span class="typed"><span class="type">java.lang.String(&quot;could not optimize @tailrec annotated method&quot;)</span><span class="string">&quot;could not optimize @tailrec annotated method&quot;</span></span>)
            
          <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;Leaving DefDef: &quot;)</span><span class="string">&quot;Leaving DefDef: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">TailCalls.this.global.Name</span><a href="#98962">name</a></span>)
          <span class="typed"><span class="type">TailCalls.this.global.DefDef</span><a href="#98969">t1</a></span>

        <span class="typed"><span class="type">TailCalls.this.global.Tree</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object TailCalls.this.global.EmptyTree</span><a href="../ast/Trees.scala.html#22380">EmptyTree</a></span> =&gt; <span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#98957">tree</a></span>

        <span class="typed"><span class="type">TailCalls.this.global.Tree</span><span class="keyword">case</span></span> <a id="1">PackageDef</a>(<span class="typed"><span class="type">TailCalls.this.global.Name</span><a id="99029">name</a></span>, <span class="typed"><span class="type">List[TailCalls.this.global.Tree]</span><a id="99030">stats</a></span>) =&gt;
          <span class="keyword">super</span>.<span class="typed"><span class="type">(TailCalls.this.global.Tree)TailCalls.this.global.Tree</span><a href="../ast/Trees.scala.html#43096">transform</a></span>(<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#98957">tree</a></span>)

        <span class="typed"><span class="type">TailCalls.this.global.Tree</span><span class="keyword">case</span></span> <a id="1">ClassDef</a>(_, <span class="typed"><span class="type">TailCalls.this.global.Name</span><a id="99033">name</a></span>, _, _) =&gt;
          <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;Entering class &quot;)</span><span class="string">&quot;Entering class &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">TailCalls.this.global.Name</span><a href="#99033">name</a></span>)
          <span class="keyword">val</span> <span class="typed"><span class="type">TailCalls.this.global.Tree</span><a id="99034">res</a></span> = <span class="keyword">super</span>.<span class="typed"><span class="type">(TailCalls.this.global.Tree)TailCalls.this.global.Tree</span><a href="../ast/Trees.scala.html#43096">transform</a></span>(<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#98957">tree</a></span>)
          <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;Leaving class &quot;)</span><span class="string">&quot;Leaving class &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">TailCalls.this.global.Name</span><a href="#99033">name</a></span>)
          <span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#99034">res</a></span>

        <span class="typed"><span class="type">TailCalls.this.global.Tree</span><span class="keyword">case</span></span> <a id="1">ValDef</a>(<span class="typed"><span class="type">TailCalls.this.global.Modifiers</span><a id="99037">mods</a></span>, <span class="typed"><span class="type">TailCalls.this.global.Name</span><a id="99038">name</a></span>, <span class="typed"><span class="type">TailCalls.this.global.Tree</span><a id="99039">tpt</a></span>, <span class="typed"><span class="type">TailCalls.this.global.Tree</span><a id="99040">rhs</a></span>) =&gt; <span class="keyword">super</span>.<span class="typed"><span class="type">(TailCalls.this.global.Tree)TailCalls.this.global.Tree</span><a href="../ast/Trees.scala.html#43096">transform</a></span>(<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#98957">tree</a></span>)
        <span class="typed"><span class="type">TailCalls.this.global.Tree</span><span class="keyword">case</span></span> <a id="1">LabelDef</a>(<span class="typed"><span class="type">TailCalls.this.global.Name</span><a id="99043">name</a></span>, <span class="typed"><span class="type">List[TailCalls.this.global.Ident]</span><a id="99044">params</a></span>, <span class="typed"><span class="type">TailCalls.this.global.Tree</span><a id="99045">rhs</a></span>) =&gt; <span class="keyword">super</span>.<span class="typed"><span class="type">(TailCalls.this.global.Tree)TailCalls.this.global.Tree</span><a href="../ast/Trees.scala.html#43096">transform</a></span>(<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#98957">tree</a></span>)

        <span class="typed"><span class="type">TailCalls.this.global.Tree</span><span class="keyword">case</span></span> <a id="1">Template</a>(<span class="typed"><span class="type">List[TailCalls.this.global.Tree]</span><a id="99048">parents</a></span>, <span class="typed"><span class="type">TailCalls.this.global.ValDef</span><a id="99049">self</a></span>, <span class="typed"><span class="type">List[TailCalls.this.global.Tree]</span><a id="99050">body</a></span>) =&gt;
          <span class="keyword">super</span>.<span class="typed"><span class="type">(TailCalls.this.global.Tree)TailCalls.this.global.Tree</span><a href="../ast/Trees.scala.html#43096">transform</a></span>(<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#98957">tree</a></span>)

        <span class="typed"><span class="type">TailCalls.this.global.Block</span><span class="keyword">case</span></span> <a id="1">Block</a>(<span class="typed"><span class="type">List[TailCalls.this.global.Tree]</span><a id="99052">stats</a></span>, <span class="typed"><span class="type">TailCalls.this.global.Tree</span><a id="99053">expr</a></span>) =&gt;
          <span class="typed"><span class="type">=&gt; TailCalls.this.global.TreeCopier</span><a href="../ast/Trees.scala.html#43088">copy</a></span>.<span class="typed"><span class="type">(TailCalls.this.global.Tree,List[TailCalls.this.global.Tree],TailCalls.this.global.Tree)TailCalls.this.global.Block</span><a href="../ast/Trees.scala.html#43167">Block</a></span>(<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#98957">tree</a></span>,
                     <span class="typed"><span class="type">(List[TailCalls.this.global.Tree],TailCallElimination.this.Context)List[TailCalls.this.global.Tree]</span><a href="#98886">transformTrees</a></span>(<span class="typed"><span class="type">List[TailCalls.this.global.Tree]</span><a href="#99052">stats</a></span>, <span class="typed"><span class="type">(TailCallElimination.this.Context,Boolean)TailCallElimination.this.Context</span><a href="#98880">mkContext</a></span>(<span class="typed"><span class="type">=&gt; TailCallElimination.this.Context</span><a href="#98881">ctx</a></span>, <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>)),
                     <span class="typed"><span class="type">(TailCalls.this.global.Tree)TailCalls.this.global.Tree</span><a href="#98885">transform</a></span>(<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#99053">expr</a></span>))

        <span class="typed"><span class="type">TailCalls.this.global.CaseDef</span><span class="keyword">case</span></span> <a id="1">CaseDef</a>(<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a id="99074">pat</a></span>, <span class="typed"><span class="type">TailCalls.this.global.Tree</span><a id="99075">guard</a></span>, <span class="typed"><span class="type">TailCalls.this.global.Tree</span><a id="99076">body</a></span>) =&gt;
          <span class="typed"><span class="type">=&gt; TailCalls.this.global.TreeCopier</span><a href="../ast/Trees.scala.html#43088">copy</a></span>.<span class="typed"><span class="type">(TailCalls.this.global.Tree,TailCalls.this.global.Tree,TailCalls.this.global.Tree,TailCalls.this.global.Tree)TailCalls.this.global.CaseDef</span><a href="../ast/Trees.scala.html#43168">CaseDef</a></span>(<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#98957">tree</a></span>, <span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#99074">pat</a></span>, <span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#99075">guard</a></span>, <span class="typed"><span class="type">(TailCalls.this.global.Tree)TailCalls.this.global.Tree</span><a href="#98885">transform</a></span>(<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#99076">body</a></span>))

        <span class="typed"><span class="type">Nothing</span><span class="keyword">case</span></span> <a id="1">Sequence</a>(_) | <a id="1">Alternative</a>(_) |
             <a id="1">Star</a>(_)     | <a id="1">Bind</a>(_, _) =&gt;
          <span class="typed"><span class="type">Nothing</span><span class="keyword">throw</span></span> <span class="typed"><span class="type">(java.lang.String)java.lang.RuntimeException</span><a id="29859" class="keyword">new</a></span> <span class="typed"><span class="type">java.lang.RuntimeException</span><span id="5976"><a id="821">RuntimeException</a></span></span>(<span class="typed"><span class="type">java.lang.String(&quot;We should've never gotten inside a pattern&quot;)</span><span class="string">&quot;We should've never gotten inside a pattern&quot;</span></span>)

        <span class="typed"><span class="type">TailCalls.this.global.Tree</span><span class="keyword">case</span></span> <a id="1">Function</a>(<span class="typed"><span class="type">List[TailCalls.this.global.ValDef]</span><a id="99081">vparams</a></span>, <span class="typed"><span class="type">TailCalls.this.global.Tree</span><a id="99082">body</a></span>) =&gt;
          <span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#98957">tree</a></span>
          <span class="comment">//throw new RuntimeException(&quot;Anonymous function should not exist at this point. at: &quot; + unit.position(tree.pos));</span>

        <span class="typed"><span class="type">TailCalls.this.global.Tree</span><span class="keyword">case</span></span> <a id="1">Assign</a>(<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a id="99083">lhs</a></span>, <span class="typed"><span class="type">TailCalls.this.global.Tree</span><a id="99084">rhs</a></span>) =&gt;
          <span class="keyword">super</span>.<span class="typed"><span class="type">(TailCalls.this.global.Tree)TailCalls.this.global.Tree</span><a href="../ast/Trees.scala.html#43096">transform</a></span>(<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#98957">tree</a></span>)

        <span class="typed"><span class="type">TailCalls.this.global.If</span><span class="keyword">case</span></span> <a id="1">If</a>(<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a id="99086">cond</a></span>, <span class="typed"><span class="type">TailCalls.this.global.Tree</span><a id="99087">thenp</a></span>, <span class="typed"><span class="type">TailCalls.this.global.Tree</span><a id="99088">elsep</a></span>) =&gt;
          <span class="typed"><span class="type">=&gt; TailCalls.this.global.TreeCopier</span><a href="../ast/Trees.scala.html#43088">copy</a></span>.<span class="typed"><span class="type">(TailCalls.this.global.Tree,TailCalls.this.global.Tree,TailCalls.this.global.Tree,TailCalls.this.global.Tree)TailCalls.this.global.If</span><a href="../ast/Trees.scala.html#43177">If</a></span>(<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#98957">tree</a></span>, <span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#99086">cond</a></span>, <span class="typed"><span class="type">(TailCalls.this.global.Tree)TailCalls.this.global.Tree</span><a href="#98885">transform</a></span>(<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#99087">thenp</a></span>), <span class="typed"><span class="type">(TailCalls.this.global.Tree)TailCalls.this.global.Tree</span><a href="#98885">transform</a></span>(<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#99088">elsep</a></span>))

        <span class="typed"><span class="type">TailCalls.this.global.Match</span><span class="keyword">case</span></span> <a id="1">Match</a>(<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a id="99091">selector</a></span>, <span class="typed"><span class="type">List[TailCalls.this.global.CaseDef]</span><a id="99092">cases</a></span>) =&gt; <span class="comment">//super.transform(tree);</span>
          <span class="typed"><span class="type">=&gt; TailCalls.this.global.TreeCopier</span><a href="../ast/Trees.scala.html#43088">copy</a></span>.<span class="typed"><span class="type">(TailCalls.this.global.Tree,TailCalls.this.global.Tree,List[TailCalls.this.global.CaseDef])TailCalls.this.global.Match</span><a href="../ast/Trees.scala.html#43178">Match</a></span>(<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#98957">tree</a></span>, <span class="typed"><span class="type">(TailCalls.this.global.Tree,TailCallElimination.this.Context)TailCalls.this.global.Tree</span><a href="#98884">transform</a></span>(<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#99091">selector</a></span>, <span class="typed"><span class="type">(TailCallElimination.this.Context,Boolean)TailCallElimination.this.Context</span><a href="#98880">mkContext</a></span>(<span class="typed"><span class="type">=&gt; TailCallElimination.this.Context</span><a href="#98881">ctx</a></span>, <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>)), <span class="typed"><span class="type">(List[TailCalls.this.global.Tree])List[TailCalls.this.global.Tree]</span><a href="../ast/Trees.scala.html#43097">transformTrees</a></span>(<span class="typed"><span class="type">List[TailCalls.this.global.CaseDef]</span><a href="#99092">cases</a></span>).<span class="typed"><span class="type">List[TailCalls.this.global.CaseDef]</span><a id="3503">asInstanceOf</a></span>[<span class="typed"><span class="type">List[TailCalls.this.global.CaseDef]</span><a id="526">List</a></span>[CaseDef]])

        <span class="typed"><span class="type">TailCalls.this.global.Tree</span><span class="keyword">case</span></span> <a id="1">Return</a>(<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a id="99104">expr</a></span>) =&gt; <span class="keyword">super</span>.<span class="typed"><span class="type">(TailCalls.this.global.Tree)TailCalls.this.global.Tree</span><a href="../ast/Trees.scala.html#43096">transform</a></span>(<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#98957">tree</a></span>)
        <span class="typed"><span class="type">TailCalls.this.global.Try</span><span class="keyword">case</span></span> <a id="1">Try</a>(<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a id="99106">block</a></span>, <span class="typed"><span class="type">List[TailCalls.this.global.CaseDef]</span><a id="99107">catches</a></span>, <span class="typed"><span class="type">TailCalls.this.global.Tree</span><a id="99108">finalizer</a></span>) =&gt; 
           <span class="comment">// no calls inside a try are in tail position, but keep recursing for nested functions</span>
          <span class="typed"><span class="type">=&gt; TailCalls.this.global.TreeCopier</span><a href="../ast/Trees.scala.html#43088">copy</a></span>.<span class="typed"><span class="type">(TailCalls.this.global.Tree,TailCalls.this.global.Tree,List[TailCalls.this.global.CaseDef],TailCalls.this.global.Tree)TailCalls.this.global.Try</span><a href="../ast/Trees.scala.html#43180">Try</a></span>(<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#98957">tree</a></span>, <span class="typed"><span class="type">(TailCalls.this.global.Tree,TailCallElimination.this.Context)TailCalls.this.global.Tree</span><a href="#98884">transform</a></span>(<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#99106">block</a></span>, <span class="typed"><span class="type">(TailCallElimination.this.Context,Boolean)TailCallElimination.this.Context</span><a href="#98880">mkContext</a></span>(<span class="typed"><span class="type">=&gt; TailCallElimination.this.Context</span><a href="#98881">ctx</a></span>, <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>)),
                   <span class="typed"><span class="type">(List[TailCalls.this.global.Tree],TailCallElimination.this.Context)List[TailCalls.this.global.Tree]</span><a href="#98886">transformTrees</a></span>(<span class="typed"><span class="type">List[TailCalls.this.global.CaseDef]</span><a href="#99107">catches</a></span>, <span class="typed"><span class="type">(TailCallElimination.this.Context,Boolean)TailCallElimination.this.Context</span><a href="#98880">mkContext</a></span>(<span class="typed"><span class="type">=&gt; TailCallElimination.this.Context</span><a href="#98881">ctx</a></span>, <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>)).<span class="typed"><span class="type">List[TailCalls.this.global.CaseDef]</span><a id="3503">asInstanceOf</a></span>[<span class="typed"><span class="type">List[TailCalls.this.global.CaseDef]</span><a id="526">List</a></span>[CaseDef]],
                   <span class="typed"><span class="type">(TailCalls.this.global.Tree,TailCallElimination.this.Context)TailCalls.this.global.Tree</span><a href="#98884">transform</a></span>(<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#99108">finalizer</a></span>, <span class="typed"><span class="type">(TailCallElimination.this.Context,Boolean)TailCallElimination.this.Context</span><a href="#98880">mkContext</a></span>(<span class="typed"><span class="type">=&gt; TailCallElimination.this.Context</span><a href="#98881">ctx</a></span>, <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>)))

        <span class="typed"><span class="type">TailCalls.this.global.Tree</span><span class="keyword">case</span></span> <a id="1">Throw</a>(<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a id="99145">expr</a></span>) =&gt; <span class="keyword">super</span>.<span class="typed"><span class="type">(TailCalls.this.global.Tree)TailCalls.this.global.Tree</span><a href="../ast/Trees.scala.html#43096">transform</a></span>(<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#98957">tree</a></span>)
        <span class="typed"><span class="type">TailCalls.this.global.Tree</span><span class="keyword">case</span></span> <a id="1">New</a>(<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a id="99148">tpt</a></span>) =&gt; <span class="keyword">super</span>.<span class="typed"><span class="type">(TailCalls.this.global.Tree)TailCalls.this.global.Tree</span><a href="../ast/Trees.scala.html#43096">transform</a></span>(<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#98957">tree</a></span>)
        <span class="typed"><span class="type">TailCalls.this.global.Tree</span><span class="keyword">case</span></span> <a id="1">Typed</a>(<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a id="99150">expr</a></span>, <span class="typed"><span class="type">TailCalls.this.global.Tree</span><a id="99151">tpt</a></span>) =&gt; <span class="keyword">super</span>.<span class="typed"><span class="type">(TailCalls.this.global.Tree)TailCalls.this.global.Tree</span><a href="../ast/Trees.scala.html#43096">transform</a></span>(<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#98957">tree</a></span>)

        <span class="typed"><span class="type">TailCalls.this.global.Tree</span><span class="keyword">case</span></span> <a id="1">Apply</a>(<span class="typed"><span class="type">TailCalls.this.global.TypeApply</span><a id="99153">tapply</a></span> @ <a id="1">TypeApply</a>(<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a id="99154">fun</a></span>, <span class="typed"><span class="type">List[TailCalls.this.global.Tree]</span><a id="99155">targs</a></span>), <span class="typed"><span class="type">List[TailCalls.this.global.Tree]</span><a id="99156">vargs</a></span>) =&gt;
          <span class="keyword">lazy</span> <span class="keyword">val</span> <span class="typed"><span class="type">TailCalls.this.global.Apply</span><a id="99158">defaultTree</a></span> = <span class="typed"><span class="type">=&gt; TailCalls.this.global.TreeCopier</span><a href="../ast/Trees.scala.html#43088">copy</a></span>.<span class="typed"><span class="type">(TailCalls.this.global.Tree,TailCalls.this.global.Tree,List[TailCalls.this.global.Tree])TailCalls.this.global.Apply</span><a href="../ast/Trees.scala.html#43185">Apply</a></span>(<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#98957">tree</a></span>, <span class="typed"><span class="type">TailCalls.this.global.TypeApply</span><a href="#99153">tapply</a></span>, <span class="typed"><span class="type">(List[TailCalls.this.global.Tree],TailCallElimination.this.Context)List[TailCalls.this.global.Tree]</span><a href="#98886">transformTrees</a></span>(<span class="typed"><span class="type">List[TailCalls.this.global.Tree]</span><a href="#99156">vargs</a></span>, <span class="typed"><span class="type">(TailCallElimination.this.Context,Boolean)TailCallElimination.this.Context</span><a href="#98880">mkContext</a></span>(<span class="typed"><span class="type">=&gt; TailCallElimination.this.Context</span><a href="#98881">ctx</a></span>, <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>)))
          <span class="typed"><span class="type">TailCalls.this.global.Tree</span><span class="keyword">if</span></span> ( <span class="typed"><span class="type">=&gt; TailCallElimination.this.Context</span><a href="#98881">ctx</a></span>.<span class="typed"><span class="type">=&gt; TailCalls.this.global.Symbol</span><a href="#98911">currentMethod</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../symtab/Symbols.scala.html#25197">isFinal</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span>
               <span class="typed"><span class="type">=&gt; TailCallElimination.this.Context</span><a href="#98881">ctx</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="#98920">tailPos</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span>
               <span class="typed"><span class="type">(List[TailCalls.this.global.Symbol],List[TailCalls.this.global.Symbol])Boolean</span><a href="#98888">isSameTypes</a></span>(<span class="typed"><span class="type">=&gt; TailCallElimination.this.Context</span><a href="#98881">ctx</a></span>.<span class="typed"><span class="type">=&gt; List[TailCalls.this.global.Symbol]</span><a href="#98917">tparams</a></span>, <span class="typed"><span class="type">List[TailCalls.this.global.Tree]</span><a href="#99155">targs</a></span> <span class="typed"><span class="type">((TailCalls.this.global.Tree) =&gt; TailCalls.this.global.Symbol)List[TailCalls.this.global.Symbol]</span><a id="21362">map</a></span> (<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#99179">_</a></span>.<span class="typed"><span class="type">=&gt; TailCalls.this.global.Type</span><a href="../ast/Trees.scala.html#25354">tpe</a></span>.<span class="typed"><span class="type">=&gt; TailCalls.this.global.Symbol</span><a href="../symtab/Types.scala.html#25650">typeSymbol</a></span>)) <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span>
               <span class="typed"><span class="type">(TailCalls.this.global.Tree)Boolean</span><a href="#98889">isRecursiveCall</a></span>(<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#99154">fun</a></span>)) {
            <span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#99154">fun</a></span> <span class="typed"><span class="type">TailCalls.this.global.Tree</span><span class="keyword">match</span></span> {
              <span class="typed"><span class="type">TailCalls.this.global.Tree</span><span class="keyword">case</span></span> <a id="1">Select</a>(<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a id="99182">receiver</a></span>, _) =&gt;
                <span class="keyword">val</span> <span class="typed"><span class="type">TailCalls.this.global.Type</span><a id="99183">recTpe</a></span> = <span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#99182">receiver</a></span>.<span class="typed"><span class="type">=&gt; TailCalls.this.global.Type</span><a href="../ast/Trees.scala.html#25354">tpe</a></span>.<span class="typed"><span class="type">=&gt; TailCalls.this.global.Type</span><a href="../symtab/Types.scala.html#25654">widen</a></span>
                <span class="keyword">val</span> <span class="typed"><span class="type">TailCalls.this.global.Type</span><a id="99184">enclTpe</a></span> = <span class="typed"><span class="type">=&gt; TailCallElimination.this.Context</span><a href="#98881">ctx</a></span>.<span class="typed"><span class="type">=&gt; TailCalls.this.global.Symbol</span><a href="#98911">currentMethod</a></span>.<span class="typed"><span class="type">=&gt; TailCalls.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#25257">enclClass</a></span>.<span class="typed"><span class="type">=&gt; TailCalls.this.global.Type</span><a href="../symtab/Symbols.scala.html#25261">typeOfThis</a></span>
                <span class="comment">// make sure the type of 'this' doesn't change through this polymorphic recursive call</span>
                <span class="typed"><span class="type">TailCalls.this.global.Tree</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">=&gt; Boolean</span><a href="../Global.scala.html#21320">forMSIL</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> 
                    (<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#99182">receiver</a></span>.<span class="typed"><span class="type">=&gt; TailCalls.this.global.Type</span><a href="../ast/Trees.scala.html#25354">tpe</a></span>.<span class="typed"><span class="type">=&gt; List[TailCalls.this.global.Symbol]</span><a href="../symtab/Types.scala.html#25669">typeParams</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a id="21645">isEmpty</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2750">||</a></span> 
                      (<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#99182">receiver</a></span>.<span class="typed"><span class="type">=&gt; TailCalls.this.global.Type</span><a href="../ast/Trees.scala.html#25354">tpe</a></span>.<span class="typed"><span class="type">=&gt; TailCalls.this.global.Type</span><a href="../symtab/Types.scala.html#25654">widen</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">=&gt; TailCallElimination.this.Context</span><a href="#98881">ctx</a></span>.<span class="typed"><span class="type">=&gt; TailCalls.this.global.Symbol</span><a href="#98911">currentMethod</a></span>.<span class="typed"><span class="type">=&gt; TailCalls.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#25257">enclClass</a></span>.<span class="typed"><span class="type">=&gt; TailCalls.this.global.Type</span><a href="../symtab/Symbols.scala.html#25261">typeOfThis</a></span>))) 
                  <span class="typed"><span class="type">(TailCalls.this.global.Tree,List[TailCalls.this.global.Tree])TailCalls.this.global.Tree</span><a href="#98887">rewriteTailCall</a></span>(<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#99154">fun</a></span>, <span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#99182">receiver</a></span> <span class="typed"><span class="type">(TailCalls.this.global.Tree)List[TailCalls.this.global.Tree]</span><a href="#99190" id="21335">::</a></span> <span class="typed"><span class="type">(List[TailCalls.this.global.Tree],TailCallElimination.this.Context)List[TailCalls.this.global.Tree]</span><a href="#98886">transformTrees</a></span>(<span class="typed"><span class="type">List[TailCalls.this.global.Tree]</span><a href="#99156">vargs</a></span>, <span class="typed"><span class="type">(TailCallElimination.this.Context,Boolean)TailCallElimination.this.Context</span><a href="#98880">mkContext</a></span>(<span class="typed"><span class="type">=&gt; TailCallElimination.this.Context</span><a href="#98881">ctx</a></span>, <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>))) 
                <span class="keyword">else</span> 
                  <span class="typed"><span class="type">=&gt; TailCalls.this.global.Apply</span><a href="#99157">defaultTree</a></span>
              <span class="typed"><span class="type">TailCalls.this.global.Tree</span><span class="keyword">case</span></span> _ =&gt; <span class="typed"><span class="type">(TailCalls.this.global.Tree,List[TailCalls.this.global.Tree])TailCalls.this.global.Tree</span><a href="#98887">rewriteTailCall</a></span>(<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#99154">fun</a></span>, <span class="typed"><span class="type">(TailCalls.this.global.Symbol)TailCalls.this.global.Tree</span><a href="../ast/Trees.scala.html#22505">This</a></span>(<span class="typed"><span class="type">=&gt; TailCalls.this.global.Symbol</span><a href="../ast/Trees.scala.html#43094">currentClass</a></span>) <span class="typed"><span class="type">(TailCalls.this.global.Tree)List[TailCalls.this.global.Tree]</span><a href="#99209" id="21335">::</a></span> <span class="typed"><span class="type">(List[TailCalls.this.global.Tree],TailCallElimination.this.Context)List[TailCalls.this.global.Tree]</span><a href="#98886">transformTrees</a></span>(<span class="typed"><span class="type">List[TailCalls.this.global.Tree]</span><a href="#99156">vargs</a></span>, <span class="typed"><span class="type">(TailCallElimination.this.Context,Boolean)TailCallElimination.this.Context</span><a href="#98880">mkContext</a></span>(<span class="typed"><span class="type">=&gt; TailCallElimination.this.Context</span><a href="#98881">ctx</a></span>, <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>)))
            }
          } <span class="keyword">else</span>
            <span class="typed"><span class="type">=&gt; TailCalls.this.global.Apply</span><a href="#99157">defaultTree</a></span>

        <span class="typed"><span class="type">TailCalls.this.global.Tree</span><span class="keyword">case</span></span> <a id="1">TypeApply</a>(<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a id="99229">fun</a></span>, <span class="typed"><span class="type">List[TailCalls.this.global.Tree]</span><a id="99230">args</a></span>) =&gt; 
          <span class="keyword">super</span>.<span class="typed"><span class="type">(TailCalls.this.global.Tree)TailCalls.this.global.Tree</span><a href="../ast/Trees.scala.html#43096">transform</a></span>(<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#98957">tree</a></span>)

        <span class="typed"><span class="type">TailCalls.this.global.Apply</span><span class="keyword">case</span></span> <a id="1">Apply</a>(<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a id="99232">fun</a></span>, <span class="typed"><span class="type">List[TailCalls.this.global.Tree]</span><a id="99233">args</a></span>) <span class="keyword">if</span> (<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#99232">fun</a></span>.<span class="typed"><span class="type">=&gt; TailCalls.this.global.Symbol</span><a href="../ast/Trees.scala.html#25358">symbol</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">object TailCalls.this.global.definitions</span><a href="../symtab/Definitions.scala.html#22259">definitions</a></span>.<span class="typed"><span class="type">=&gt; TailCalls.this.global.Symbol</span><a href="../symtab/Definitions.scala.html#25829">Boolean_or</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2750">||</a></span>
                                  <span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#99232">fun</a></span>.<span class="typed"><span class="type">=&gt; TailCalls.this.global.Symbol</span><a href="../ast/Trees.scala.html#25358">symbol</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">object TailCalls.this.global.definitions</span><a href="../symtab/Definitions.scala.html#22259">definitions</a></span>.<span class="typed"><span class="type">=&gt; TailCalls.this.global.Symbol</span><a href="../symtab/Definitions.scala.html#25828">Boolean_and</a></span>) =&gt;
          <span class="typed"><span class="type">=&gt; TailCalls.this.global.TreeCopier</span><a href="../ast/Trees.scala.html#43088">copy</a></span>.<span class="typed"><span class="type">(TailCalls.this.global.Tree,TailCalls.this.global.Tree,List[TailCalls.this.global.Tree])TailCalls.this.global.Apply</span><a href="../ast/Trees.scala.html#43185">Apply</a></span>(<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#98957">tree</a></span>, <span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#99232">fun</a></span>, <span class="typed"><span class="type">(List[TailCalls.this.global.Tree])List[TailCalls.this.global.Tree]</span><a href="../ast/Trees.scala.html#43097">transformTrees</a></span>(<span class="typed"><span class="type">List[TailCalls.this.global.Tree]</span><a href="#99233">args</a></span>))
          
        <span class="typed"><span class="type">TailCalls.this.global.Tree</span><span class="keyword">case</span></span> <a id="1">Apply</a>(<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a id="99239">fun</a></span>, <span class="typed"><span class="type">List[TailCalls.this.global.Tree]</span><a id="99240">args</a></span>) =&gt;
          <span class="keyword">lazy</span> <span class="keyword">val</span> <span class="typed"><span class="type">TailCalls.this.global.Apply</span><a id="99242">defaultTree</a></span> = <span class="typed"><span class="type">=&gt; TailCalls.this.global.TreeCopier</span><a href="../ast/Trees.scala.html#43088">copy</a></span>.<span class="typed"><span class="type">(TailCalls.this.global.Tree,TailCalls.this.global.Tree,List[TailCalls.this.global.Tree])TailCalls.this.global.Apply</span><a href="../ast/Trees.scala.html#43185">Apply</a></span>(<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#98957">tree</a></span>, <span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#99239">fun</a></span>, <span class="typed"><span class="type">(List[TailCalls.this.global.Tree],TailCallElimination.this.Context)List[TailCalls.this.global.Tree]</span><a href="#98886">transformTrees</a></span>(<span class="typed"><span class="type">List[TailCalls.this.global.Tree]</span><a href="#99240">args</a></span>, <span class="typed"><span class="type">(TailCallElimination.this.Context,Boolean)TailCallElimination.this.Context</span><a href="#98880">mkContext</a></span>(<span class="typed"><span class="type">=&gt; TailCallElimination.this.Context</span><a href="#98881">ctx</a></span>, <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>)))
          <span class="typed"><span class="type">TailCalls.this.global.Tree</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; TailCallElimination.this.Context</span><a href="#98881">ctx</a></span>.<span class="typed"><span class="type">=&gt; TailCalls.this.global.Symbol</span><a href="#98911">currentMethod</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../symtab/Symbols.scala.html#25197">isFinal</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> 
              <span class="typed"><span class="type">=&gt; TailCallElimination.this.Context</span><a href="#98881">ctx</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="#98920">tailPos</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> 
              <span class="typed"><span class="type">(TailCalls.this.global.Tree)Boolean</span><a href="#98889">isRecursiveCall</a></span>(<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#99239">fun</a></span>)) {
            <span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#99239">fun</a></span> <span class="typed"><span class="type">TailCalls.this.global.Tree</span><span class="keyword">match</span></span> {
              <span class="typed"><span class="type">TailCalls.this.global.Tree</span><span class="keyword">case</span></span> <a id="1">Select</a>(<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a id="99260">receiver</a></span>, _) =&gt;
                <span class="typed"><span class="type">TailCalls.this.global.Tree</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">=&gt; Boolean</span><a href="../Global.scala.html#21320">forMSIL</a></span>) 
                  <span class="typed"><span class="type">(TailCalls.this.global.Tree,List[TailCalls.this.global.Tree])TailCalls.this.global.Tree</span><a href="#98887">rewriteTailCall</a></span>(<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#99239">fun</a></span>, <span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#99260">receiver</a></span> <span class="typed"><span class="type">(TailCalls.this.global.Tree)List[TailCalls.this.global.Tree]</span><a href="#99261" id="21335">::</a></span> <span class="typed"><span class="type">(List[TailCalls.this.global.Tree],TailCallElimination.this.Context)List[TailCalls.this.global.Tree]</span><a href="#98886">transformTrees</a></span>(<span class="typed"><span class="type">List[TailCalls.this.global.Tree]</span><a href="#99240">args</a></span>, <span class="typed"><span class="type">(TailCallElimination.this.Context,Boolean)TailCallElimination.this.Context</span><a href="#98880">mkContext</a></span>(<span class="typed"><span class="type">=&gt; TailCallElimination.this.Context</span><a href="#98881">ctx</a></span>, <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>))) 
                <span class="keyword">else</span> 
                  <span class="typed"><span class="type">=&gt; TailCalls.this.global.Apply</span><a href="#99241">defaultTree</a></span>
              <span class="typed"><span class="type">TailCalls.this.global.Tree</span><span class="keyword">case</span></span> _ =&gt; <span class="typed"><span class="type">(TailCalls.this.global.Tree,List[TailCalls.this.global.Tree])TailCalls.this.global.Tree</span><a href="#98887">rewriteTailCall</a></span>(<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#99239">fun</a></span>, <span class="typed"><span class="type">(TailCalls.this.global.Symbol)TailCalls.this.global.Tree</span><a href="../ast/Trees.scala.html#22505">This</a></span>(<span class="typed"><span class="type">=&gt; TailCalls.this.global.Symbol</span><a href="../ast/Trees.scala.html#43094">currentClass</a></span>) <span class="typed"><span class="type">(TailCalls.this.global.Tree)List[TailCalls.this.global.Tree]</span><a href="#99280" id="21335">::</a></span> <span class="typed"><span class="type">(List[TailCalls.this.global.Tree],TailCallElimination.this.Context)List[TailCalls.this.global.Tree]</span><a href="#98886">transformTrees</a></span>(<span class="typed"><span class="type">List[TailCalls.this.global.Tree]</span><a href="#99240">args</a></span>, <span class="typed"><span class="type">(TailCallElimination.this.Context,Boolean)TailCallElimination.this.Context</span><a href="#98880">mkContext</a></span>(<span class="typed"><span class="type">=&gt; TailCallElimination.this.Context</span><a href="#98881">ctx</a></span>, <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>)))
            }
          } <span class="keyword">else</span>
            <span class="typed"><span class="type">=&gt; TailCalls.this.global.Apply</span><a href="#99241">defaultTree</a></span>
            

        <span class="typed"><span class="type">TailCalls.this.global.Tree</span><span class="keyword">case</span></span> <a id="1">Super</a>(<span class="typed"><span class="type">TailCalls.this.global.Name</span><a id="99301">qual</a></span>, <span class="typed"><span class="type">TailCalls.this.global.Name</span><a id="99302">mix</a></span>) =&gt;
          <span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#98957">tree</a></span>
        <span class="typed"><span class="type">TailCalls.this.global.Tree</span><span class="keyword">case</span></span> <a id="1">This</a>(<span class="typed"><span class="type">TailCalls.this.global.Name</span><a id="99304">qual</a></span>) =&gt;
          <span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#98957">tree</a></span>
        <span class="typed"><span class="type">TailCalls.this.global.Tree</span><span class="keyword">case</span></span> <a id="1">Select</a>(<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a id="99306">qualifier</a></span>, <span class="typed"><span class="type">TailCalls.this.global.Name</span><a id="99307">selector</a></span>) =&gt;
          <span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#98957">tree</a></span>
        <span class="typed"><span class="type">TailCalls.this.global.Tree</span><span class="keyword">case</span></span> <a id="1">Ident</a>(<span class="typed"><span class="type">TailCalls.this.global.Name</span><a id="99309">name</a></span>) =&gt;
          <span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#98957">tree</a></span>
        <span class="typed"><span class="type">TailCalls.this.global.Tree</span><span class="keyword">case</span></span> <a id="1">Literal</a>(<span class="typed"><span class="type">TailCalls.this.global.Constant</span><a id="99311">value</a></span>) =&gt;
          <span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#98957">tree</a></span>
        <span class="typed"><span class="type">TailCalls.this.global.Tree</span><span class="keyword">case</span></span> <a id="1">TypeTree</a>() =&gt;
          <span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#98957">tree</a></span>
        <span class="typed"><span class="type">TailCalls.this.global.Tree</span><span class="keyword">case</span></span> _ =&gt;
          <span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#98957">tree</a></span>
      }
    }

    <span class="keyword">def</span> <span class="typed"><span class="type">(List[TailCalls.this.global.Tree],TailCallElimination.this.Context)List[TailCalls.this.global.Tree]</span><a id="98886">transformTrees</a></span>(<span class="typed"><span class="type">List[TailCalls.this.global.Tree]</span><a id="99054">trees</a></span>: <span class="typed"><span class="type">List[TailCalls.this.global.Tree]</span><a id="526">List</a></span>[Tree], <span class="typed"><span class="type">TailCallElimination.this.Context</span><a id="99055">nctx</a></span>: <span class="typed"><span class="type">TailCallElimination.this.Context</span><a href="#98878">Context</a></span>): <span class="typed"><span class="type">List[TailCalls.this.global.Tree]</span><a id="526">List</a></span>[Tree] =
      <span class="typed"><span class="type">List[TailCalls.this.global.Tree]</span><a href="#99054">trees</a></span> <span class="typed"><span class="type">((TailCalls.this.global.Tree) =&gt; TailCalls.this.global.Tree)List[TailCalls.this.global.Tree]</span><a id="21362">map</a></span> ((<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a id="99315">tree</a></span>) =&gt; <span class="typed"><span class="type">(TailCalls.this.global.Tree,TailCallElimination.this.Context)TailCalls.this.global.Tree</span><a href="#98884">transform</a></span>(<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#99315">tree</a></span>, <span class="typed"><span class="type">TailCallElimination.this.Context</span><a href="#99055">nctx</a></span>))

    <span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(TailCalls.this.global.Tree,List[TailCalls.this.global.Tree])TailCalls.this.global.Tree</span><a id="98887">rewriteTailCall</a></span>(<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a id="99188">fun</a></span>: <span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="../ast/Trees.scala.html#22371">Tree</a></span>, <span class="typed"><span class="type">List[TailCalls.this.global.Tree]</span><a id="99189">args</a></span>: <span class="typed"><span class="type">List[TailCalls.this.global.Tree]</span><a id="526">List</a></span>[Tree]): <span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="../ast/Trees.scala.html#22371">Tree</a></span> = {
      <span class="typed"><span class="type">(AnyRef)Unit</span><a href="../Global.scala.html#21205">log</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;Rewriting tail recursive method call at: &quot;)</span><span class="string">&quot;Rewriting tail recursive method call at: &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span>
                      (<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#99188">fun</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.util.Position</span><a href="../ast/Trees.scala.html#25352">pos</a></span>))
      <span class="typed"><span class="type">=&gt; TailCallElimination.this.Context</span><a href="#98881">ctx</a></span>.<span class="typed"><span class="type">(Boolean)Unit</span><a href="#98924">accessed</a></span> = <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>
      <span class="comment">//println(&quot;fun: &quot; + fun + &quot; args: &quot; + args)</span>
      <span class="keyword">val</span> <span class="typed"><span class="type">TailCalls.this.global.Apply</span><a id="99321">t</a></span> = <span class="typed"><span class="type">(scala.tools.nsc.util.Position)(TailCalls.this.global.Apply)TailCalls.this.global.Apply</span><a href="../ast/Trees.scala.html#28572">atPos</a></span>(<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#99188">fun</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.util.Position</span><a href="../ast/Trees.scala.html#25352">pos</a></span>)(<span class="typed"><span class="type">(TailCalls.this.global.Tree,List[TailCalls.this.global.Tree])TailCalls.this.global.Apply</span><a href="../ast/Trees.scala.html#31199">Apply</a></span>(<span class="typed"><span class="type">(TailCalls.this.global.Symbol)TailCalls.this.global.Ident</span><a href="../ast/Trees.scala.html#22514">Ident</a></span>(<span class="typed"><span class="type">=&gt; TailCallElimination.this.Context</span><a href="#98881">ctx</a></span>.<span class="typed"><span class="type">=&gt; TailCalls.this.global.Symbol</span><a href="#98914">label</a></span>), <span class="typed"><span class="type">List[TailCalls.this.global.Tree]</span><a href="#99189">args</a></span>))
      <span class="comment">//println(t)</span>
      <span class="typed"><span class="type">(TailCalls.this.global.analyzer.global.Tree)TailCalls.this.global.analyzer.global.Tree</span><a href="../typechecker/Typers.scala.html#31830">typed</a></span>(<span class="typed"><span class="type">TailCalls.this.global.Apply</span><a href="#99321">t</a></span>)
    }

    <span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(List[TailCalls.this.global.Symbol],List[TailCalls.this.global.Symbol])Boolean</span><a id="98888">isSameTypes</a></span>(<span class="typed"><span class="type">List[TailCalls.this.global.Symbol]</span><a id="99175">ts1</a></span>: <span class="typed"><span class="type">List[TailCalls.this.global.Symbol]</span><a id="526">List</a></span>[Symbol], <span class="typed"><span class="type">List[TailCalls.this.global.Symbol]</span><a id="99176">ts2</a></span>: <span class="typed"><span class="type">List[TailCalls.this.global.Symbol]</span><a id="526">List</a></span>[Symbol]): <span class="typed"><span class="type">Boolean</span><a id="2170">Boolean</a></span> = {
      <span class="keyword">def</span> <span class="typed"><span class="type">(TailCalls.this.global.Symbol,TailCalls.this.global.Symbol)Boolean</span><a id="99326">isSameType</a></span>(<span class="typed"><span class="type">TailCalls.this.global.Symbol</span><a id="99327">t1</a></span>: <span class="typed"><span class="type">TailCalls.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#21866">Symbol</a></span>, <span class="typed"><span class="type">TailCalls.this.global.Symbol</span><a id="99328">t2</a></span>: <span class="typed"><span class="type">TailCalls.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#21866">Symbol</a></span>) = {
        <span class="typed"><span class="type">TailCalls.this.global.Symbol</span><a href="#99327">t1</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">TailCalls.this.global.Symbol</span><a href="#99328">t2</a></span>
      }
      <span class="typed"><span class="type">object List</span><a id="527">List</a></span>.<span class="typed"><span class="type">(List[TailCalls.this.global.Symbol],List[TailCalls.this.global.Symbol])((TailCalls.this.global.Symbol, TailCalls.this.global.Symbol) =&gt; Boolean)Boolean</span><a id="21458">forall2</a></span>(<span class="typed"><span class="type">List[TailCalls.this.global.Symbol]</span><a href="#99175">ts1</a></span>, <span class="typed"><span class="type">List[TailCalls.this.global.Symbol]</span><a href="#99176">ts2</a></span>)(<span class="typed"><span class="type">(TailCalls.this.global.Symbol,TailCalls.this.global.Symbol)Boolean</span><a href="#99326">isSameType</a></span>)
    }

    <span class="comment">/** Returns &lt;code&gt;true&lt;/code&gt; if the fun tree refers to the same method as
     *  the one saved in &lt;code&gt;ctx&lt;/code&gt;.
     * 
     *  @param fun the expression that is applied
     *  @return    &lt;code&gt;true&lt;/code&gt; if the tree symbol refers to the innermost 
     *             enclosing method
     */</span>
    <span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(TailCalls.this.global.Tree)Boolean</span><a id="98889">isRecursiveCall</a></span>(<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a id="99180">fun</a></span>: <span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="../ast/Trees.scala.html#22371">Tree</a></span>): <span class="typed"><span class="type">Boolean</span><a id="2170">Boolean</a></span> =
      (<span class="typed"><span class="type">TailCalls.this.global.Tree</span><a href="#99180">fun</a></span>.<span class="typed"><span class="type">=&gt; TailCalls.this.global.Symbol</span><a href="../ast/Trees.scala.html#25358">symbol</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5794">eq</a></span> <span class="typed"><span class="type">=&gt; TailCallElimination.this.Context</span><a href="#98881">ctx</a></span>.<span class="typed"><span class="type">=&gt; TailCalls.this.global.Symbol</span><a href="#98911">currentMethod</a></span>)
  }

}

        </pre>
    </body>
</html>