<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/transform/AddInterfaces.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style">
    </head>
    <body>
        <pre>
/* NSC -- new Scala compiler
 * Copyright 2005-2009 LAMP/EPFL
 * @author Martin Odersky
 */
// $Id: AddInterfaces.scala 18387 2009-07-24 15:28:37Z odersky $

<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> transform

<span class="keyword">import</span> symtab._
<span class="keyword">import</span> Flags._
<span class="keyword">import</span> collection.mutable.{HashMap, ListBuffer}

<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class AddInterfaces extends scala.tools.nsc.SubComponent with scala.tools.nsc.transform.InfoTransform with ScalaObject" id="14053">AddInterfaces</a> <span title="ScalaObject" class="keyword">extends</span> <a href="InfoTransform.scala.html#13951" title="scala.tools.nsc.transform.InfoTransform">InfoTransform</a> {
  <span class="keyword">import</span> global._                  // the global environment
  <span class="keyword">import</span> definitions._             // standard classes and methods

  /** &lt;p&gt;
   *    The phase sets &lt;code&gt;lateINTERFACE&lt;/code&gt; for non-interface traits
   *    that now become interfaces.
   *  &lt;/p&gt;
   *  &lt;p&gt;
   *    It sets &lt;code&gt;lateDEFERRED&lt;/code&gt; for formerly concrete methods in
   *    such traits.
   *  &lt;/p&gt;
   */
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Long" id="42412">phaseNewFlags</a>: <a title="Long" id="2184">Long</a> = <a href="../symtab/Flags.scala.html#28737" title="(x$1: Long)Long">lateDEFERRED</a> | <a href="../symtab/Flags.scala.html#28739" title="=&gt; Long">lateINTERFACE</a>

  /** Type reference after erasure; to be defined in subclass
   *  &lt;code&gt;Erasure&lt;/code&gt;.
   */
  <span class="keyword">def</span> <a title="(sym: AddInterfaces.this.global.Symbol)AddInterfaces.this.global.Type" id="42413">erasedTypeRef</a>(<a title="AddInterfaces.this.global.Symbol" id="43462">sym</a>: <a href="../symtab/Symbols.scala.html#26127" title="AddInterfaces.this.global.Symbol">Symbol</a>): <a href="../symtab/Types.scala.html#26205" title="AddInterfaces.this.global.Type">Type</a>

  /** Erasure type-map; to be defined in subclass
   *  &lt;code&gt;Erasure&lt;/code&gt;.
   */
  <span class="keyword">def</span> <a title="=&gt; AddInterfaces.this.global.TypeMap" id="42414">erasure</a>: <a href="../symtab/Types.scala.html#26320" title="AddInterfaces.this.global.TypeMap">TypeMap</a>

  /** A lazily constructed map that associates every non-interface trait with
   *  its implementation class.
   */
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.mutable.HashMap[AddInterfaces.this.global.Symbol,AddInterfaces.this.global.Symbol]" id="42415">implClassMap</a> = <span title="scala.collection.mutable.HashMap[AddInterfaces.this.global.Symbol,AddInterfaces.this.global.Symbol]" class="keyword">new</span> <span title="scala.collection.mutable.HashMap[AddInterfaces.this.global.Symbol,AddInterfaces.this.global.Symbol]">HashMap</span>[Symbol, Symbol]

  /** A lazily constructed map that associates every concrete method in a non-interface
   *  trait that's currently compiled with its corresponding method in the trait's
   *  implementation class.
   */
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.mutable.HashMap[AddInterfaces.this.global.Symbol,AddInterfaces.this.global.Symbol]" id="42417">implMethodMap</a> = <span title="scala.collection.mutable.HashMap[AddInterfaces.this.global.Symbol,AddInterfaces.this.global.Symbol]" class="keyword">new</span> <span title="scala.collection.mutable.HashMap[AddInterfaces.this.global.Symbol,AddInterfaces.this.global.Symbol]">HashMap</span>[Symbol, Symbol]

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(prev: scala.tools.nsc.Phase)AddInterfaces.this.StdPhase" id="42419">newPhase</a>(<a title="scala.tools.nsc.Phase" id="128124">prev</a>: scala.tools.nsc.<a href="../Phase.scala.html#8862" title="scala.tools.nsc.Phase">Phase</a>): <a href="../SubComponent.scala.html#39640" title="AddInterfaces.this.StdPhase">StdPhase</a> = {
    <a href="#42415" title="=&gt; scala.collection.mutable.HashMap[AddInterfaces.this.global.Symbol,AddInterfaces.this.global.Symbol]">implClassMap</a>.<span title="()Unit">clear</span>
    <a href="#42417" title="=&gt; scala.collection.mutable.HashMap[AddInterfaces.this.global.Symbol,AddInterfaces.this.global.Symbol]">implMethodMap</a>.<span title="()Unit">clear</span>
    <span class="keyword">super</span>.<a href="InfoTransform.scala.html#42405" title="(prev: scala.tools.nsc.Phase)AddInterfaces.this.StdPhase">newPhase</a>(<a href="#128124" title="scala.tools.nsc.Phase">prev</a>)
  }

  /** Is given trait member symbol a member of the trait's interface 
   *  after this transform is performed? */
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: AddInterfaces.this.global.Symbol)Boolean" id="42420">isInterfaceMember</a>(<a title="AddInterfaces.this.global.Symbol" id="128135">sym</a>: <a href="../symtab/Symbols.scala.html#26127" title="AddInterfaces.this.global.Symbol">Symbol</a>): <span title="Boolean">Boolean</span> = {
    <a href="#128135" title="AddInterfaces.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26896" title="(x$1: Boolean)Boolean">isType</a> ||
    { <a href="#128135" title="AddInterfaces.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27004" title="=&gt; AddInterfaces.this.global.Type">info</a>; // to set lateMETHOD flag if necessary
      <a href="#128135" title="AddInterfaces.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26910" title="(x$1: Boolean)Boolean">isMethod</a> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#128135" title="AddInterfaces.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26912" title="=&gt; Boolean">isLabel</a> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span>(<a href="../symtab/Symbols.scala.html#26996" title="(mask: Long)Boolean">sym</a> hasFlag (PRIVATE <span title="Long(67108868L)">|</span> BRIDGE)) <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> 
      <span title="=&gt; Boolean">!</span><a href="#128135" title="AddInterfaces.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26916" title="=&gt; Boolean">isConstructor</a> &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#128135" title="AddInterfaces.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26964" title="=&gt; Boolean">isImplOnly</a>
    }
  }

  /** Does symbol need an implementation method? */
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: AddInterfaces.this.global.Symbol)Boolean" id="42421">needsImplMethod</a>(<a title="AddInterfaces.this.global.Symbol" id="128187">sym</a>: <a href="../symtab/Symbols.scala.html#26127" title="AddInterfaces.this.global.Symbol">Symbol</a>): <span title="Boolean">Boolean</span> =
    <a href="#128187" title="AddInterfaces.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26910" title="(x$1: Boolean)Boolean">isMethod</a> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> <a href="#42420" title="(sym: AddInterfaces.this.global.Symbol)Boolean">isInterfaceMember</a>(<a href="#128187" title="AddInterfaces.this.global.Symbol">sym</a>) &amp;&amp; 
    (<span title="(x$1: Boolean)Boolean">!</span>(<a href="../symtab/Symbols.scala.html#26996" title="(mask: Long)Boolean">sym</a> hasFlag (DEFERRED <span title="Long(268435472L)">|</span> SUPERACCESSOR)) || (<a href="../symtab/Symbols.scala.html#26996" title="(mask: Long)Boolean">sym</a> hasFlag <a href="../symtab/Flags.scala.html#28737" title="=&gt; Long">lateDEFERRED</a>))

  <span class="keyword">def</span> <a title="=&gt; scala.tools.nsc.Phase" id="42422">implClassPhase</a> = <a href="../Global.scala.html#39176" title="=&gt; AddInterfaces.this.global.Run">currentRun</a>.<a href="../Global.scala.html#40196" title="=&gt; scala.tools.nsc.Phase">erasurePhase</a>.<a href="../Phase.scala.html#23158" title="=&gt; scala.tools.nsc.Phase">next</a>

  /** Return the implementation class of a trait; create a new one of one does not yet exist */  
  <span class="keyword">def</span> <a title="(iface: AddInterfaces.this.global.Symbol)AddInterfaces.this.global.Symbol" id="42423">implClass</a>(<a title="AddInterfaces.this.global.Symbol" id="55279">iface</a>: <a href="../symtab/Symbols.scala.html#26127" title="AddInterfaces.this.global.Symbol">Symbol</a>): <a href="../symtab/Symbols.scala.html#26127" title="AddInterfaces.this.global.Symbol">Symbol</a> = <a href="#42415" title="=&gt; scala.collection.mutable.HashMap[AddInterfaces.this.global.Symbol,AddInterfaces.this.global.Symbol]">implClassMap</a>.<span title="(key: AddInterfaces.this.global.Symbol)Option[AddInterfaces.this.global.Symbol]">get</span>(<a href="#55279" title="AddInterfaces.this.global.Symbol">iface</a>) <span title="AddInterfaces.this.global.Symbol" class="keyword">match</span> {
    <span title="AddInterfaces.this.global.Symbol" class="keyword">case</span> Some(<a title="AddInterfaces.this.global.Symbol" id="128232">c</a>) =&gt; <a href="#128232" title="AddInterfaces.this.global.Symbol">c</a>
    <span title="AddInterfaces.this.global.Symbol" class="keyword">case</span> <span title="object None">None</span> =&gt;
      <a href="../symtab/SymbolTable.scala.html#26097" title="(ph: scala.tools.nsc.Phase)(op: =&gt; AddInterfaces.this.global.Symbol)AddInterfaces.this.global.Symbol">atPhase</a>(<a href="#42422" title="=&gt; scala.tools.nsc.Phase">implClassPhase</a>) {
        <span class="keyword">val</span> <a title="AddInterfaces.this.global.Name" id="128241">implName</a> = <a href="../symtab/StdNames.scala.html#26531" title="object AddInterfaces.this.global.nme">nme</a>.<a href="../symtab/StdNames.scala.html#29669" title="(name: AddInterfaces.this.global.Name)AddInterfaces.this.global.Name">implClassName</a>(<a href="#55279" title="AddInterfaces.this.global.Symbol">iface</a>.<a href="../symtab/Symbols.scala.html#26988" title="=&gt; AddInterfaces.this.global.Name">name</a>)
        <span class="keyword">var</span> <a title="AddInterfaces.this.global.Symbol" id="128242">impl</a> = <span title="AddInterfaces.this.global.Symbol" class="keyword">if</span> (<a href="#55279" title="AddInterfaces.this.global.Symbol">iface</a>.<a href="../symtab/Symbols.scala.html#26983" title="=&gt; AddInterfaces.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#26897" title="=&gt; Boolean">isClass</a>) <a href="#55279" title="AddInterfaces.this.global.Symbol">iface</a>.<a href="../symtab/Symbols.scala.html#26983" title="=&gt; AddInterfaces.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27004" title="=&gt; AddInterfaces.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#30211" title="(name: AddInterfaces.this.global.Name)AddInterfaces.this.global.Symbol">decl</a>(<a href="#128241" title="AddInterfaces.this.global.Name">implName</a>) <span class="keyword">else</span> <a href="../symtab/Symbols.scala.html#26134" title="object AddInterfaces.this.global.NoSymbol">NoSymbol</a>
        <span title="Any" class="keyword">if</span> (<a href="#128242" title="(x$1: AnyRef)Boolean">impl</a> == <a href="../symtab/Symbols.scala.html#26134" title="object AddInterfaces.this.global.NoSymbol">NoSymbol</a>) {
          <a href="#128242" title="AddInterfaces.this.global.Symbol">impl</a> = <a href="#55279" title="AddInterfaces.this.global.Symbol">iface</a>.<a href="../symtab/Symbols.scala.html#27030" title="(owner: AddInterfaces.this.global.Symbol)AddInterfaces.this.global.Symbol">cloneSymbolImpl</a>(<a href="#55279" title="AddInterfaces.this.global.Symbol">iface</a>.<a href="../symtab/Symbols.scala.html#26983" title="=&gt; AddInterfaces.this.global.Symbol">owner</a>)
          <a href="#128242" title="AddInterfaces.this.global.Symbol">impl</a>.<a href="../symtab/Symbols.scala.html#26989" title="(name: AddInterfaces.this.global.Name)Unit">name</a> = <a href="#128241" title="AddInterfaces.this.global.Name">implName</a>
          <a href="#128242" title="AddInterfaces.this.global.Symbol">impl</a>.<a href="../symtab/Symbols.scala.html#27078" title="(f: scala.tools.nsc.io.AbstractFile)Unit">sourceFile</a> = <a href="#55279" title="AddInterfaces.this.global.Symbol">iface</a>.<a href="../symtab/Symbols.scala.html#27077" title="=&gt; scala.tools.nsc.io.AbstractFile">sourceFile</a>
          <span title="Any" class="keyword">if</span> (<a href="#55279" title="AddInterfaces.this.global.Symbol">iface</a>.<a href="../symtab/Symbols.scala.html#26983" title="=&gt; AddInterfaces.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#26897" title="=&gt; Boolean">isClass</a>)
            <a href="#55279" title="AddInterfaces.this.global.Symbol">iface</a>.<a href="../symtab/Symbols.scala.html#26983" title="=&gt; AddInterfaces.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27004" title="=&gt; AddInterfaces.this.global.Type">info</a>.<a href="../symtab/Scopes.scala.html#27131" title="(sym: AddInterfaces.this.global.Symbol)AddInterfaces.this.global.Symbol">decls</a> enter <a href="#128242" title="AddInterfaces.this.global.Symbol">impl</a> 
        }
        <span title="Unit" class="keyword">if</span> (<a href="../Global.scala.html#39176" title="=&gt; AddInterfaces.this.global.Run">currentRun</a>.<a href="../Global.scala.html#40217" title="(sym: AddInterfaces.this.global.Symbol)Boolean">compiles</a>(<a href="#55279" title="AddInterfaces.this.global.Symbol">iface</a>)) <a href="../Global.scala.html#39176" title="=&gt; AddInterfaces.this.global.Run">currentRun</a>.<a href="../Global.scala.html#40213" title="(key: AddInterfaces.this.global.Symbol,value: scala.tools.nsc.io.AbstractFile)Unit">symSource</a>(<a href="#128242" title="AddInterfaces.this.global.Symbol">impl</a>) = <a href="#55279" title="AddInterfaces.this.global.Symbol">iface</a>.<a href="../symtab/Symbols.scala.html#27077" title="=&gt; scala.tools.nsc.io.AbstractFile">sourceFile</a>
        <a href="../symtab/Symbols.scala.html#26848" title="(pos: scala.tools.nsc.util.Position)AddInterfaces.this.global.Symbol">impl</a> setPos <a href="#55279" title="AddInterfaces.this.global.Symbol">iface</a>.<a href="../symtab/Symbols.scala.html#26847" title="=&gt; scala.tools.nsc.util.Position">pos</a>
        <a href="#128242" title="AddInterfaces.this.global.Symbol">impl</a>.<a href="../symtab/Symbols.scala.html#26992" title="(fs: Long)Unit">flags</a> = <a href="#55279" title="AddInterfaces.this.global.Symbol">iface</a>.<a href="../symtab/Symbols.scala.html#26991" title="(x$1: Long)Long" id="3212">flags</a> <span title="(x$1: Long)Long">&amp;</span> <a title="=&gt; Long" id="3075">~</a>(<a title="(x$1: Long)Long" id="3002">INTERFACE</a> | <a href="../symtab/Flags.scala.html#28739" title="=&gt; Long">lateINTERFACE</a>) | <span title="Long(137438953472L)">IMPLCLASS</span>
        <a href="../symtab/Symbols.scala.html#27005" title="(info: AddInterfaces.this.global.Type)AddInterfaces.this.global.Symbol">impl</a> setInfo <span title="AddInterfaces.this.LazyImplClassType" class="keyword">new</span> <a href="#42424" title="AddInterfaces.this.LazyImplClassType">LazyImplClassType</a>(<a href="#55279" title="AddInterfaces.this.global.Symbol">iface</a>)
        <a href="#42415" title="(key: AddInterfaces.this.global.Symbol,value: AddInterfaces.this.global.Symbol)Unit">implClassMap</a>(<a href="#55279" title="AddInterfaces.this.global.Symbol">iface</a>) = <a href="#128242" title="AddInterfaces.this.global.Symbol">impl</a>
        <span title="Unit" class="keyword">if</span> (<a href="../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../Settings.scala.html#37759" title="=&gt; Boolean">value</a>) <a href="../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;generating impl class &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#128242" title="AddInterfaces.this.global.Symbol">impl</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; in &quot;)" class="string">&quot; in &quot;</span> + <a href="#55279" title="AddInterfaces.this.global.Symbol">iface</a>.<a href="../symtab/Symbols.scala.html#26983" title="=&gt; AddInterfaces.this.global.Symbol">owner</a>)//debug
        <a href="#128242" title="AddInterfaces.this.global.Symbol">impl</a>
      }
  }

  /** &lt;p&gt;
   *    A lazy type to set the info of an implementation class 
   *    The parents of an implementation class for trait &lt;code&gt;iface&lt;/code&gt; are:
   *  &lt;/p&gt;
   *  &lt;ul&gt;
   *    &lt;li&gt;superclass: &lt;code&gt;Object&lt;/code&gt;&lt;/li&gt;
   *    &lt;li&gt;
   *      mixin classes: mixin classes of &lt;code&gt;iface&lt;/code&gt; where every
   *      non-interface trait is mapped to its implementation class, followed
   *      by &lt;code&gt;iface&lt;/code&gt; itself.
   *    &lt;/li&gt;
   *  &lt;/ul&gt;
   *  &lt;p&gt;
   *    The declarations of a mixin class are:
   *  &lt;/p&gt;
   *  &lt;ul&gt;
   *    &lt;li&gt;
   *      for every interface member of &lt;code&gt;iface&lt;/code&gt; its implemention
   *      method, if one is needed.
   *    &lt;/li&gt;
   *    &lt;li&gt;
   *      every former member of &lt;code&gt;iface&lt;/code&gt; that is implementation only
   *    &lt;/li&gt;
   *  &lt;/ul&gt;
   */
  <span class="keyword">private</span> <span class="keyword">class</span> <a title="class LazyImplClassType extends AddInterfaces.this.global.LazyType with ScalaObject" id="42424">LazyImplClassType</a><span title="ScalaObject">(</span><a title="AddInterfaces.this.global.Symbol" id="128340">iface</a>: <a href="../symtab/Symbols.scala.html#26127" title="AddInterfaces.this.global.Symbol">Symbol</a>) <span class="keyword">extends</span> <a href="../symtab/Types.scala.html#26283" title="AddInterfaces.this.global.LazyType">LazyType</a> {

    /** Compute the decls of implementation class &lt;code&gt;implClass&lt;/code&gt;, 
     *  given the decls &lt;code&gt;ifaceDecls&lt;/code&gt; of its interface.
     *
     *  @param implClass  ...
     *  @param ifaceDecls ...
     *  @return           ...
     */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(implClass: AddInterfaces.this.global.Symbol,ifaceDecls: AddInterfaces.this.global.Scope)AddInterfaces.this.global.Scope" id="128337">implDecls</a>(<a title="AddInterfaces.this.global.Symbol" id="128371">implClass</a>: <a href="../symtab/Symbols.scala.html#26127" title="AddInterfaces.this.global.Symbol">Symbol</a>, <a title="AddInterfaces.this.global.Scope" id="128372">ifaceDecls</a>: <a href="../symtab/Scopes.scala.html#26012" title="AddInterfaces.this.global.Scope">Scope</a>): <a href="../symtab/Scopes.scala.html#26012" title="AddInterfaces.this.global.Scope">Scope</a> = {
      <span class="keyword">val</span> <a title="AddInterfaces.this.global.Scope" id="128374">decls</a> = <a href="../symtab/Scopes.scala.html#25966" title="=&gt; AddInterfaces.this.global.Scope">newScope</a>
      <span title="Any" class="keyword">if</span> (<span title="(x$1: AnyRef)Boolean">(</span><a href="../symtab/Scopes.scala.html#27138" title="(name: AddInterfaces.this.global.Name)AddInterfaces.this.global.Symbol">ifaceDecls</a> lookup <a href="../symtab/StdNames.scala.html#26531" title="object AddInterfaces.this.global.nme">nme</a>.<a href="../symtab/StdNames.scala.html#29721" title="=&gt; AddInterfaces.this.global.Name">MIXIN_CONSTRUCTOR</a>) == <a href="../symtab/Symbols.scala.html#26134" title="object AddInterfaces.this.global.NoSymbol">NoSymbol</a>)
        <a href="../symtab/Scopes.scala.html#27131" title="(sym: AddInterfaces.this.global.Symbol)AddInterfaces.this.global.Symbol">decls</a> enter (<a href="#128371" title="AddInterfaces.this.global.Symbol">implClass</a>.<a href="../symtab/Symbols.scala.html#26867" title="(pos: scala.tools.nsc.util.Position,name: AddInterfaces.this.global.Name)AddInterfaces.this.global.TermSymbol">newMethod</a><a href="../symtab/Symbols.scala.html#27005" title="(info: AddInterfaces.this.global.Type)AddInterfaces.this.global.TermSymbol">(</a><a href="#128371" title="AddInterfaces.this.global.Symbol">implClass</a>.<a href="../symtab/Symbols.scala.html#26847" title="=&gt; scala.tools.nsc.util.Position">pos</a>, <a href="../symtab/StdNames.scala.html#26531" title="object AddInterfaces.this.global.nme">nme</a>.<a href="../symtab/StdNames.scala.html#29721" title="=&gt; AddInterfaces.this.global.Name">MIXIN_CONSTRUCTOR</a>) 
                     setInfo <a href="../symtab/Types.scala.html#43895" title="(params: List[AddInterfaces.this.global.Symbol],resultType: AddInterfaces.this.global.Type)AddInterfaces.this.global.MethodType">MethodType</a>(List<span title="object Nil">(</span>), <a href="../symtab/Definitions.scala.html#28277" title="=&gt; AddInterfaces.this.global.Symbol">UnitClass</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; AddInterfaces.this.global.Type">tpe</a>))
      <span class="keyword">for</span> (<a title="AddInterfaces.this.global.Symbol" id="128456">sym</a> &lt;- <a href="#128372" title="AddInterfaces.this.global.Scope">ifaceDecls</a>.<a href="../symtab/Scopes.scala.html#27145" title="(f: (AddInterfaces.this.global.Symbol) =&gt; Any)Unit" id="32173">iterator</a>) {
        <span title="Any" class="keyword">if</span> (<a href="#42420" title="(sym: AddInterfaces.this.global.Symbol)Boolean">isInterfaceMember</a>(<a href="#128456" title="AddInterfaces.this.global.Symbol">sym</a>)) {
          <span title="Any" class="keyword">if</span> (<a href="#42421" title="(sym: AddInterfaces.this.global.Symbol)Boolean">needsImplMethod</a>(<a href="#128456" title="AddInterfaces.this.global.Symbol">sym</a>)) {
            <span class="keyword">val</span> <a title="AddInterfaces.this.global.Symbol" id="128461">impl</a> = <a href="#128456" title="AddInterfaces.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27029" title="(owner: AddInterfaces.this.global.Symbol)AddInterfaces.this.global.Symbol">cloneSymbol</a>(<a href="#128371" title="AddInterfaces.this.global.Symbol">implClass</a>).<a href="../symtab/Symbols.scala.html#27005" title="(info: AddInterfaces.this.global.Type)AddInterfaces.this.global.Symbol">setInfo</a>(<a href="#128456" title="AddInterfaces.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27004" title="=&gt; AddInterfaces.this.global.Type">info</a>).<a href="../symtab/Symbols.scala.html#26994" title="(mask: Long)AddInterfaces.this.global.Symbol">resetFlag</a>(<a href="../symtab/Flags.scala.html#28737" title="=&gt; Long">lateDEFERRED</a>)
            <span title="Unit" class="keyword">if</span> (<a href="../Global.scala.html#39176" title="=&gt; AddInterfaces.this.global.Run">currentRun</a>.<a href="../Global.scala.html#40217" title="(sym: AddInterfaces.this.global.Symbol)Boolean">compiles</a>(<a href="#128371" title="AddInterfaces.this.global.Symbol">implClass</a>)) <a href="#42417" title="(key: AddInterfaces.this.global.Symbol,value: AddInterfaces.this.global.Symbol)Unit">implMethodMap</a>(<a href="#128456" title="AddInterfaces.this.global.Symbol">sym</a>) = <a href="#128461" title="AddInterfaces.this.global.Symbol">impl</a>
            <a href="../symtab/Scopes.scala.html#27131" title="(sym: AddInterfaces.this.global.Symbol)AddInterfaces.this.global.Symbol">decls</a> enter <a href="#128461" title="AddInterfaces.this.global.Symbol">impl</a>
            <a href="../symtab/Symbols.scala.html#26993" title="(mask: Long)sym.type">sym</a> setFlag <a href="../symtab/Flags.scala.html#28737" title="=&gt; Long">lateDEFERRED</a>
          }
        } <span class="keyword">else</span> {
          <a href="#128456" title="AddInterfaces.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26984" title="(owner: AddInterfaces.this.global.Symbol)Unit">owner</a> = <a href="#128371" title="AddInterfaces.this.global.Symbol">implClass</a> 
          // note: OK to destructively modify the owner here, 
          // because symbol will not be accessible from outside the sourcefile.
          // mixin constructors are corrected separately; see TermSymbol.owner
          <a href="../symtab/Scopes.scala.html#27131" title="(sym: AddInterfaces.this.global.Symbol)AddInterfaces.this.global.Symbol">decls</a> enter <a href="#128456" title="AddInterfaces.this.global.Symbol">sym</a>
        }
      }
      <a href="#128374" title="AddInterfaces.this.global.Scope">decls</a>
    }

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(sym: AddInterfaces.this.global.Symbol)Unit" id="128338">complete</a>(<a title="AddInterfaces.this.global.Symbol" id="128526">sym</a>: <a href="../symtab/Symbols.scala.html#26127" title="AddInterfaces.this.global.Symbol">Symbol</a>) {
      <span class="keyword">def</span> <a title="(tp: AddInterfaces.this.global.Type)AddInterfaces.this.global.Type" id="128531">implType</a>(<a title="AddInterfaces.this.global.Type" id="128532">tp</a>: <a href="../symtab/Types.scala.html#26205" title="AddInterfaces.this.global.Type">Type</a>): <a href="../symtab/Types.scala.html#26205" title="AddInterfaces.this.global.Type">Type</a> = <a href="#128532" title="AddInterfaces.this.global.Type">tp</a> <span title="AddInterfaces.this.global.Type" class="keyword">match</span> {
        <span title="AddInterfaces.this.global.ClassInfoType" class="keyword">case</span> ClassInfoType(<a title="List[AddInterfaces.this.global.Type]" id="128536">parents</a>, <a title="AddInterfaces.this.global.Scope" id="128537">decls</a>, _) =&gt;
          <a title="(assertion: Boolean)Unit" id="7874">assert</a>(<a href="../symtab/SymbolTable.scala.html#26088" title="(x$1: AnyRef)Boolean">phase</a> == <a href="#42422" title="=&gt; scala.tools.nsc.Phase">implClassPhase</a>)
          <a href="../symtab/Types.scala.html#44259" title="(parents: List[AddInterfaces.this.global.Type],decls: AddInterfaces.this.global.Scope,typeSymbol: AddInterfaces.this.global.Symbol)AddInterfaces.this.global.ClassInfoType">ClassInfoType</a>(
            <a href="../symtab/Definitions.scala.html#28267" title="=&gt; AddInterfaces.this.global.Symbol">ObjectClass</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; AddInterfaces.this.global.Type">tpe</a> <a href="#128578" title="AddInterfaces.this.global.Type">::</a> (<a href="#128536" title="List[AddInterfaces.this.global.Type]">parents</a>.<span title="(f: (AddInterfaces.this.global.Type) =&gt; AddInterfaces.this.global.Type)(implicit bf: scala.collection.generic.BuilderFactory[AddInterfaces.this.global.Type,List[AddInterfaces.this.global.Type],List[AddInterfaces.this.global.Type]])List[AddInterfaces.this.global.Type]">tail</span> <span title="scala.collection.generic.BuilderFactory[AddInterfaces.this.global.Type,List[AddInterfaces.this.global.Type],List#Coll]">map</span> <a href="#42425" title="(tp: AddInterfaces.this.global.Type)AddInterfaces.this.global.Type">mixinToImplClass</a>) <a href="#128579" title="(x: AddInterfaces.this.global.Type)List[AddInterfaces.this.global.Type]">:::</a> <a title="(xs: AddInterfaces.this.global.Type*)List[AddInterfaces.this.global.Type]" id="24319">List</a><span title="(prefix: List[AddInterfaces.this.global.Type])List[AddInterfaces.this.global.Type]">(</span><a href="#128340" title="AddInterfaces.this.global.Symbol">iface</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; AddInterfaces.this.global.Type">tpe</a>),
            <a href="#128337" title="(implClass: AddInterfaces.this.global.Symbol,ifaceDecls: AddInterfaces.this.global.Scope)AddInterfaces.this.global.Scope">implDecls</a>(<a href="#128526" title="AddInterfaces.this.global.Symbol">sym</a>, <a href="#128537" title="AddInterfaces.this.global.Scope">decls</a>),
            <a href="#128526" title="AddInterfaces.this.global.Symbol">sym</a>)
        <span title="AddInterfaces.this.global.Type" class="keyword">case</span> PolyType(<a title="List[AddInterfaces.this.global.Symbol]" id="128699">tparams</a>, <a title="AddInterfaces.this.global.Type" id="128700">restpe</a>) =&gt;
          <a href="#128531" title="(tp: AddInterfaces.this.global.Type)AddInterfaces.this.global.Type">implType</a>(<a href="#128700" title="AddInterfaces.this.global.Type">restpe</a>)
      }
      <a href="#128526" title="AddInterfaces.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27005" title="(info: AddInterfaces.this.global.Type)sym.type">setInfo</a><span title="Unit">(</span><a href="#128531" title="(tp: AddInterfaces.this.global.Type)AddInterfaces.this.global.Type">implType</a>(<a href="../symtab/SymbolTable.scala.html#26097" title="(ph: scala.tools.nsc.Phase)(op: =&gt; AddInterfaces.this.global.Type)AddInterfaces.this.global.Type">atPhase</a>(<a href="../Global.scala.html#39176" title="=&gt; AddInterfaces.this.global.Run">currentRun</a>.<a href="../Global.scala.html#40196" title="=&gt; scala.tools.nsc.Phase">erasurePhase</a>)(<a href="#128340" title="AddInterfaces.this.global.Symbol">iface</a>.<a href="../symtab/Symbols.scala.html#27004" title="=&gt; AddInterfaces.this.global.Type">info</a>)))
    }

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(clazz: AddInterfaces.this.global.Symbol)Unit" id="128339">load</a>(<a title="AddInterfaces.this.global.Symbol" id="128720">clazz</a>: <a href="../symtab/Symbols.scala.html#26127" title="AddInterfaces.this.global.Symbol">Symbol</a>) { <a href="#128338" title="(sym: AddInterfaces.this.global.Symbol)Unit">complete</a>(<a href="#128720" title="AddInterfaces.this.global.Symbol">clazz</a>) }
  }

  /** If type &lt;code&gt;tp&lt;/code&gt; refers to a non-interface trait, return a
   *  reference to its implementation class. Otherwise return &lt;code&gt;tp&lt;/code&gt;
   *  itself.
   *
   *  @param tp ...
   *  @return   ...
   */
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tp: AddInterfaces.this.global.Type)AddInterfaces.this.global.Type" id="42425">mixinToImplClass</a>(<a title="AddInterfaces.this.global.Type" id="128587">tp</a>: <a href="../symtab/Types.scala.html#26205" title="AddInterfaces.this.global.Type">Type</a>): <a href="../symtab/Types.scala.html#26205" title="AddInterfaces.this.global.Type">Type</a> = 
    <a href="#42414" title="(v1: AddInterfaces.this.global.Type)AddInterfaces.this.global.Type" id="25529">erasure</a>(
      <a href="#128587" title="AddInterfaces.this.global.Type">tp</a> <span title="AddInterfaces.this.global.Type" class="keyword">match</span> { //@MATN: no normalize needed (comes after erasure)
        <span title="AddInterfaces.this.global.Type" class="keyword">case</span> TypeRef(<a title="AddInterfaces.this.global.Type" id="128734">pre</a>, <a title="AddInterfaces.this.global.Symbol" id="128735">sym</a>, <a title="List[AddInterfaces.this.global.Type]" id="128736">args</a>) <span class="keyword">if</span> (<a href="#128735" title="AddInterfaces.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26963" title="=&gt; Boolean">needsImplClass</a>) =&gt;
          <a href="../symtab/Types.scala.html#26295" title="(pre: AddInterfaces.this.global.Type,sym: AddInterfaces.this.global.Symbol,args: List[AddInterfaces.this.global.Type])AddInterfaces.this.global.Type">typeRef</a>(<a href="#128734" title="AddInterfaces.this.global.Type">pre</a>, <a href="#42423" title="(iface: AddInterfaces.this.global.Symbol)AddInterfaces.this.global.Symbol">implClass</a>(<a href="#128735" title="AddInterfaces.this.global.Symbol">sym</a>), <a href="#128736" title="List[AddInterfaces.this.global.Type]">args</a>)
        <span title="AddInterfaces.this.global.Type" class="keyword">case</span> _ =&gt;
          <a href="#128587" title="AddInterfaces.this.global.Type">tp</a>
      })

  <span class="keyword">def</span> <a title="(tp: AddInterfaces.this.global.Type)AddInterfaces.this.global.Type" id="42426">transformMixinInfo</a>(<a title="AddInterfaces.this.global.Type" id="48225">tp</a>: <a href="../symtab/Types.scala.html#26205" title="AddInterfaces.this.global.Type">Type</a>): <a href="../symtab/Types.scala.html#26205" title="AddInterfaces.this.global.Type">Type</a> = <a href="#48225" title="AddInterfaces.this.global.Type">tp</a> <span title="AddInterfaces.this.global.Type" class="keyword">match</span> {
    <span title="AddInterfaces.this.global.ClassInfoType" class="keyword">case</span> ClassInfoType(<a title="List[AddInterfaces.this.global.Type]" id="128751">parents</a>, <a title="AddInterfaces.this.global.Scope" id="128752">decls</a>, <a title="AddInterfaces.this.global.Symbol" id="128753">clazz</a>) =&gt;
      <span title="Any" class="keyword">if</span> (<a href="#128753" title="AddInterfaces.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#26963" title="=&gt; Boolean">needsImplClass</a>) {
        <a href="../symtab/Symbols.scala.html#26993" title="(mask: Long)clazz.type">clazz</a> setFlag <a href="../symtab/Flags.scala.html#28739" title="=&gt; Long">lateINTERFACE</a>
        <a href="#42423" title="(iface: AddInterfaces.this.global.Symbol)AddInterfaces.this.global.Symbol">implClass</a>(<a href="#128753" title="AddInterfaces.this.global.Symbol">clazz</a>) // generate an impl class
      }
      <span class="keyword">val</span> <a title="List[AddInterfaces.this.global.Type]" id="128756">parents1</a> =
        <span title="List[AddInterfaces.this.global.Type]" class="keyword">if</span> (<a href="#128751" title="List[AddInterfaces.this.global.Type]">parents</a>.<a title="=&gt; Boolean" id="25434">isEmpty</a>) List<span title="object Nil">(</span>)
        <span class="keyword">else</span> {
          <a title="(assertion: Boolean,message: =&gt; Any)Unit" id="7876">assert</a>(<span title="=&gt; Boolean">!</span><a href="#128751" title="List[AddInterfaces.this.global.Type]">parents</a>.<a title="=&gt; AddInterfaces.this.global.Type" id="25443">head</a>.<a href="../symtab/Types.scala.html#30180" title="=&gt; AddInterfaces.this.global.Symbol">typeSymbol</a>.<a href="../symtab/Symbols.scala.html#26923" title="=&gt; Boolean">isTrait</a>, <a href="#128753" title="AddInterfaces.this.global.Symbol">clazz</a>)
          <span title="List[AddInterfaces.this.global.Type]" class="keyword">if</span> (<a href="#128753" title="AddInterfaces.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#26923" title="=&gt; Boolean">isTrait</a>) <a href="#42413" title="(sym: AddInterfaces.this.global.Symbol)AddInterfaces.this.global.Type">erasedTypeRef</a>(<a href="../symtab/Definitions.scala.html#28267" title="=&gt; AddInterfaces.this.global.Symbol">ObjectClass</a>) <a href="#128785" title="AddInterfaces.this.global.Type">::</a> <a href="#128751" title="List[AddInterfaces.this.global.Type]">parents</a>.<span title="(x: AddInterfaces.this.global.Type)List[AddInterfaces.this.global.Type]">tail</span>
          <span class="keyword">else</span> <a href="#128751" title="List[AddInterfaces.this.global.Type]">parents</a>
        }
      <span class="keyword">val</span> <a title="AddInterfaces.this.global.Scope" id="128757">decls1</a> = <a href="../symtab/Scopes.scala.html#27149" title="(p: (AddInterfaces.this.global.Symbol) =&gt; Boolean)AddInterfaces.this.global.Scope">decls</a> filter (<a title="AddInterfaces.this.global.Symbol" id="128799">sym</a> =&gt;
        <span title="Boolean" class="keyword">if</span> (<a href="../symtab/Symbols.scala.html#26996" title="(mask: Long)Boolean">clazz</a> hasFlag <span title="Long(128L)">INTERFACE</span>) <a href="#42420" title="(sym: AddInterfaces.this.global.Symbol)Boolean">isInterfaceMember</a>(<a href="#128799" title="AddInterfaces.this.global.Symbol">sym</a>)
        <span class="keyword">else</span> (<span title="(x$1: Boolean)Boolean">!</span><a href="#128799" title="AddInterfaces.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26896" title="=&gt; Boolean">isType</a> || <a href="#128799" title="AddInterfaces.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26897" title="=&gt; Boolean">isClass</a>))

      //if (!clazz.isPackageClass) System.out.println(&quot;Decls of &quot;+clazz+&quot; after explicitOuter = &quot; + decls1);//DEBUG
      //if ((parents1 eq parents) &amp;&amp; (decls1 eq decls)) tp
      //else 
      <a href="../symtab/Types.scala.html#44259" title="(parents: List[AddInterfaces.this.global.Type],decls: AddInterfaces.this.global.Scope,typeSymbol: AddInterfaces.this.global.Symbol)AddInterfaces.this.global.ClassInfoType">ClassInfoType</a>(<a href="#128756" title="List[AddInterfaces.this.global.Type]">parents1</a>, <a href="#128757" title="AddInterfaces.this.global.Scope">decls1</a>, <a href="#128753" title="AddInterfaces.this.global.Symbol">clazz</a>)
    <span title="AddInterfaces.this.global.Type" class="keyword">case</span> _ =&gt;
      <a href="#48225" title="AddInterfaces.this.global.Type">tp</a>
  }

// Tree transformation --------------------------------------------------------------

  <span class="keyword">private</span> <span class="keyword">class</span> <a title="class ChangeOwnerAndReturnTraverser extends AddInterfaces.this.global.ChangeOwnerTraverser with ScalaObject" id="42427">ChangeOwnerAndReturnTraverser</a><span title="ScalaObject">(</span><a title="AddInterfaces.this.global.Symbol" id="128854">oldowner</a>: <a href="../symtab/Symbols.scala.html#26127" title="AddInterfaces.this.global.Symbol">Symbol</a>, <a title="AddInterfaces.this.global.Symbol" id="128855">newowner</a>: <a href="../symtab/Symbols.scala.html#26127" title="AddInterfaces.this.global.Symbol">Symbol</a>)
          <span class="keyword">extends</span> <a href="../ast/Trees.scala.html#26780" title="AddInterfaces.this.global.ChangeOwnerTraverser">ChangeOwnerTraverser</a>(<a href="#128854" title="AddInterfaces.this.global.Symbol">oldowner</a>, <a href="#128855" title="AddInterfaces.this.global.Symbol">newowner</a>) {
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: AddInterfaces.this.global.Tree)Unit" id="128850">traverse</a>(<a title="AddInterfaces.this.global.Tree" id="128862">tree</a>: <a href="../ast/Trees.scala.html#26593" title="AddInterfaces.this.global.Tree">Tree</a>) {
      <a href="#128862" title="AddInterfaces.this.global.Tree">tree</a> <span title="Unit" class="keyword">match</span> {
        <span title="Unit" class="keyword">case</span> Return(<a title="AddInterfaces.this.global.Tree" id="128882">expr</a>) =&gt;
          <span title="Unit" class="keyword">if</span> (<a href="#128862" title="AddInterfaces.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="(x$1: AnyRef)Boolean">symbol</a> == <a href="../ast/Trees.scala.html#128839" title="=&gt; AddInterfaces.this.global.Symbol">oldowner</a>) <a href="#128862" title="AddInterfaces.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29368" title="(sym: AddInterfaces.this.global.Symbol)Unit">symbol</a> = <a href="../ast/Trees.scala.html#128841" title="=&gt; AddInterfaces.this.global.Symbol">newowner</a>
        <span title="Unit" class="keyword">case</span> _ =&gt;
      }
      <span class="keyword">super</span>.<a href="../ast/Trees.scala.html#128844" title="(tree: AddInterfaces.this.global.Tree)Unit">traverse</a>(<a href="#128862" title="AddInterfaces.this.global.Tree">tree</a>)
    }
  }

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tree: AddInterfaces.this.global.Tree)AddInterfaces.this.global.Tree" id="42428">ifaceMemberDef</a>(<a title="AddInterfaces.this.global.Tree" id="128901">tree</a>: <a href="../ast/Trees.scala.html#26593" title="AddInterfaces.this.global.Tree">Tree</a>): <a href="../ast/Trees.scala.html#26593" title="AddInterfaces.this.global.Tree">Tree</a> =
    <span title="AddInterfaces.this.global.Tree" class="keyword">if</span> (<span title="(x$1: Boolean)Boolean">!</span><a href="#128901" title="AddInterfaces.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29371" title="=&gt; Boolean">isDef</a> || <span title="=&gt; Boolean">!</span><a href="#42420" title="(sym: AddInterfaces.this.global.Symbol)Boolean">isInterfaceMember</a>(<a href="#128901" title="AddInterfaces.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; AddInterfaces.this.global.Symbol">symbol</a>)) <a href="../ast/Trees.scala.html#26602" title="object AddInterfaces.this.global.EmptyTree">EmptyTree</a>
    <span class="keyword">else</span> <span title="AddInterfaces.this.global.Tree" class="keyword">if</span> (<a href="#42421" title="(sym: AddInterfaces.this.global.Symbol)Boolean">needsImplMethod</a>(<a href="#128901" title="AddInterfaces.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; AddInterfaces.this.global.Symbol">symbol</a>)) <a href="../ast/Trees.scala.html#26632" title="(sym: AddInterfaces.this.global.Symbol,rhs: AddInterfaces.this.global.Tree)AddInterfaces.this.global.DefDef">DefDef</a>(<a href="#128901" title="AddInterfaces.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; AddInterfaces.this.global.Symbol">symbol</a>, <a href="../ast/Trees.scala.html#26602" title="object AddInterfaces.this.global.EmptyTree">EmptyTree</a>)
    <span class="keyword">else</span> <a href="#128901" title="AddInterfaces.this.global.Tree">tree</a>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(templ: AddInterfaces.this.global.Template)AddInterfaces.this.global.Template" id="42429">ifaceTemplate</a>(<a title="AddInterfaces.this.global.Template" id="55296">templ</a>: <a href="../ast/Trees.scala.html#26649" title="AddInterfaces.this.global.Template">Template</a>): <a href="../ast/Trees.scala.html#26649" title="AddInterfaces.this.global.Template">Template</a> =
    <a href="../ast/Trees.scala.html#26584" title="=&gt; AddInterfaces.this.global.LazyTreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#48598" title="(tree: AddInterfaces.this.global.Tree,parents: List[AddInterfaces.this.global.Tree],self: AddInterfaces.this.global.ValDef,body: List[AddInterfaces.this.global.Tree])AddInterfaces.this.global.Template">Template</a>(<a href="#55296" title="AddInterfaces.this.global.Template">templ</a>, <a href="#55296" title="AddInterfaces.this.global.Template">templ</a>.<a href="../ast/Trees.scala.html#52056" title="=&gt; List[AddInterfaces.this.global.Tree]">parents</a>, <a href="../ast/Trees.scala.html#26624" title="object AddInterfaces.this.global.emptyValDef">emptyValDef</a>, <a href="#55296" title="AddInterfaces.this.global.Template">templ</a>.<a href="../ast/Trees.scala.html#52060" title="(f: (AddInterfaces.this.global.Tree) =&gt; AddInterfaces.this.global.Tree)(implicit bf: scala.collection.generic.BuilderFactory[AddInterfaces.this.global.Tree,List[AddInterfaces.this.global.Tree],List[AddInterfaces.this.global.Tree]])List[AddInterfaces.this.global.Tree]">body</a> <span title="scala.collection.generic.BuilderFactory[AddInterfaces.this.global.Tree,List[AddInterfaces.this.global.Tree],List#Coll]">map</span> <a href="#42428" title="(tree: AddInterfaces.this.global.Tree)AddInterfaces.this.global.Tree">ifaceMemberDef</a>)

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tree: AddInterfaces.this.global.Tree,ifaceMethod: AddInterfaces.this.global.Symbol)AddInterfaces.this.global.Tree" id="42430">implMethodDef</a>(<a title="AddInterfaces.this.global.Tree" id="129042">tree</a>: <a href="../ast/Trees.scala.html#26593" title="AddInterfaces.this.global.Tree">Tree</a>, <a title="AddInterfaces.this.global.Symbol" id="129043">ifaceMethod</a>: <a href="../symtab/Symbols.scala.html#26127" title="AddInterfaces.this.global.Symbol">Symbol</a>): <a href="../ast/Trees.scala.html#26593" title="AddInterfaces.this.global.Tree">Tree</a> =
    <a href="#42417" title="=&gt; scala.collection.mutable.HashMap[AddInterfaces.this.global.Symbol,AddInterfaces.this.global.Symbol]">implMethodMap</a>.<span title="(key: AddInterfaces.this.global.Symbol)Option[AddInterfaces.this.global.Symbol]">get</span>(<a href="#129043" title="AddInterfaces.this.global.Symbol">ifaceMethod</a>) <span title="AddInterfaces.this.global.Tree" class="keyword">match</span> {
      <span title="AddInterfaces.this.global.Tree" class="keyword">case</span> Some(<a title="AddInterfaces.this.global.Symbol" id="129051">implMethod</a>) =&gt;
        <a href="#129042" title="AddInterfaces.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29368" title="(sym: AddInterfaces.this.global.Symbol)Unit">symbol</a> = <a href="#129051" title="AddInterfaces.this.global.Symbol">implMethod</a>
        <a href="../ast/Trees.scala.html#70829" title="(tree: AddInterfaces.this.global.Tree)AddInterfaces.this.global.Tree" class="keyword">new</a> <a href="#42427" title="AddInterfaces.this.ChangeOwnerAndReturnTraverser">ChangeOwnerAndReturnTraverser</a>(<a href="#129043" title="AddInterfaces.this.global.Symbol">ifaceMethod</a>, <a href="#129051" title="AddInterfaces.this.global.Symbol">implMethod</a>)(<a href="#129042" title="AddInterfaces.this.global.Tree">tree</a>)
      <span title="Nothing" class="keyword">case</span> <span title="object None">None</span> =&gt;
        <span title="Nothing" class="keyword">throw</span> <a title="(x$1: java.lang.String)java.lang.Error" id="25911" class="keyword">new</a> <a title="java.lang.Error" id="7821">Error</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;implMethod missing for &quot;</span> + <a href="#129043" title="AddInterfaces.this.global.Symbol">ifaceMethod</a>)
    }

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tree: AddInterfaces.this.global.Tree)AddInterfaces.this.global.Tree" id="42431">implMemberDef</a>(<a title="AddInterfaces.this.global.Tree" id="129077">tree</a>: <a href="../ast/Trees.scala.html#26593" title="AddInterfaces.this.global.Tree">Tree</a>): <a href="../ast/Trees.scala.html#26593" title="AddInterfaces.this.global.Tree">Tree</a> =
    <span title="AddInterfaces.this.global.Tree" class="keyword">if</span> (<span title="(x$1: Boolean)Boolean">!</span><a href="#129077" title="AddInterfaces.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29371" title="=&gt; Boolean">isDef</a> || <span title="=&gt; Boolean">!</span><a href="#42420" title="(sym: AddInterfaces.this.global.Symbol)Boolean">isInterfaceMember</a>(<a href="#129077" title="AddInterfaces.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; AddInterfaces.this.global.Symbol">symbol</a>)) <a href="#129077" title="AddInterfaces.this.global.Tree">tree</a>
    <span class="keyword">else</span> <span title="AddInterfaces.this.global.Tree" class="keyword">if</span> (<a href="#42421" title="(sym: AddInterfaces.this.global.Symbol)Boolean">needsImplMethod</a>(<a href="#129077" title="AddInterfaces.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; AddInterfaces.this.global.Symbol">symbol</a>)) <a href="#42430" title="(tree: AddInterfaces.this.global.Tree,ifaceMethod: AddInterfaces.this.global.Symbol)AddInterfaces.this.global.Tree">implMethodDef</a>(<a href="#129077" title="AddInterfaces.this.global.Tree">tree</a>, <a href="#129077" title="AddInterfaces.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; AddInterfaces.this.global.Symbol">symbol</a>)
    <span class="keyword">else</span> <a href="../ast/Trees.scala.html#26602" title="object AddInterfaces.this.global.EmptyTree">EmptyTree</a>

  /** Add mixin constructor definition 
   *    def $init$(): Unit = ()
   *  to `stats' unless there is already one.
   */
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(clazz: AddInterfaces.this.global.Symbol,stats: List[AddInterfaces.this.global.Tree])List[AddInterfaces.this.global.Tree]" id="42432">addMixinConstructorDef</a>(<a title="AddInterfaces.this.global.Symbol" id="129087">clazz</a>: <a href="../symtab/Symbols.scala.html#26127" title="AddInterfaces.this.global.Symbol">Symbol</a>, <a title="List[AddInterfaces.this.global.Tree]" id="129088">stats</a>: <span title="List[AddInterfaces.this.global.Tree]">List</span>[Tree]): <span title="List[AddInterfaces.this.global.Tree]">List</span>[Tree] = 
    <span title="List[AddInterfaces.this.global.Tree]" class="keyword">if</span> (<a href="../ast/Trees.scala.html#26582" title="object AddInterfaces.this.global.treeInfo">treeInfo</a>.<a href="../ast/TreeInfo.scala.html#48915" title="(stats: List[AddInterfaces.this.global.treeInfo.trees.Tree])AddInterfaces.this.global.treeInfo.trees.Tree">firstConstructor</a><span title="(x$1: AnyRef)Boolean">(</span><a href="#129088" title="List[AddInterfaces.this.global.Tree]">stats</a>) != <a href="../ast/Trees.scala.html#26602" title="object AddInterfaces.this.global.EmptyTree">EmptyTree</a>) <a href="#129088" title="List[AddInterfaces.this.global.Tree]">stats</a>
    <span class="keyword">else</span> <a href="../ast/Trees.scala.html#26632" title="(sym: AddInterfaces.this.global.Symbol,rhs: AddInterfaces.this.global.Tree)AddInterfaces.this.global.DefDef">DefDef</a>(<a href="#129087" title="AddInterfaces.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27033" title="=&gt; AddInterfaces.this.global.Symbol">primaryConstructor</a>, <a href="../ast/Trees.scala.html#49026" title="(stats: List[AddInterfaces.this.global.Tree],expr: AddInterfaces.this.global.Tree)AddInterfaces.this.global.Block">Block</a>(List<span title="object Nil">(</span>), <a href="../ast/Trees.scala.html#26740" title="(value: Any)AddInterfaces.this.global.Literal">Literal</a>(<span title="Unit">(</span>)))) <a href="#129102" title="AddInterfaces.this.global.DefDef">::</a> <a href="#129088" title="(x: AddInterfaces.this.global.Tree)List[AddInterfaces.this.global.Tree]">stats</a>
    
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(clazz: AddInterfaces.this.global.Symbol,templ: AddInterfaces.this.global.Template)AddInterfaces.this.global.Template" id="42433">implTemplate</a>(<a title="AddInterfaces.this.global.Symbol" id="129196">clazz</a>: <a href="../symtab/Symbols.scala.html#26127" title="AddInterfaces.this.global.Symbol">Symbol</a>, <a title="AddInterfaces.this.global.Template" id="129197">templ</a>: <a href="../ast/Trees.scala.html#26649" title="AddInterfaces.this.global.Template">Template</a>): <a href="../ast/Trees.scala.html#26649" title="AddInterfaces.this.global.Template">Template</a> = <a href="../ast/Trees.scala.html#26784" title="(pos: scala.tools.nsc.util.Position)(tree: AddInterfaces.this.global.Template)AddInterfaces.this.global.Template">atPos</a>(<a href="#129197" title="AddInterfaces.this.global.Template">templ</a>.<a href="../ast/Trees.scala.html#29361" title="=&gt; scala.tools.nsc.util.Position">pos</a>) {
    <span class="keyword">val</span> <a title="AddInterfaces.this.global.Template" id="129207">templ1</a> = <a href="../ast/Trees.scala.html#26784" title="(pos: scala.tools.nsc.util.Position)(tree: AddInterfaces.this.global.Template)AddInterfaces.this.global.Template">atPos</a>(<a href="#129197" title="AddInterfaces.this.global.Template">templ</a>.<a href="../ast/Trees.scala.html#29361" title="=&gt; scala.tools.nsc.util.Position">pos</a>) {
      <a href="../ast/Trees.scala.html#53504" title="(parents: List[AddInterfaces.this.global.Tree],self: AddInterfaces.this.global.ValDef,body: List[AddInterfaces.this.global.Tree])AddInterfaces.this.global.Template">Template</a>(<a href="#129197" title="AddInterfaces.this.global.Template">templ</a>.<a href="../ast/Trees.scala.html#52056" title="=&gt; List[AddInterfaces.this.global.Tree]">parents</a>, <a href="../ast/Trees.scala.html#26624" title="object AddInterfaces.this.global.emptyValDef">emptyValDef</a>, 
               <a href="#42432" title="(clazz: AddInterfaces.this.global.Symbol,stats: List[AddInterfaces.this.global.Tree])List[AddInterfaces.this.global.Tree]">addMixinConstructorDef</a>(<a href="#129196" title="AddInterfaces.this.global.Symbol">clazz</a>, <a href="#129197" title="AddInterfaces.this.global.Template">templ</a>.<a href="../ast/Trees.scala.html#52060" title="(f: (AddInterfaces.this.global.Tree) =&gt; AddInterfaces.this.global.Tree)(implicit bf: scala.collection.generic.BuilderFactory[AddInterfaces.this.global.Tree,List[AddInterfaces.this.global.Tree],List[AddInterfaces.this.global.Tree]])List[AddInterfaces.this.global.Tree]">body</a> <span title="scala.collection.generic.BuilderFactory[AddInterfaces.this.global.Tree,List[AddInterfaces.this.global.Tree],List#Coll]">map</span> <a href="#42431" title="(tree: AddInterfaces.this.global.Tree)AddInterfaces.this.global.Tree">implMemberDef</a>))
        .<a href="../ast/Trees.scala.html#29369" title="(sym: AddInterfaces.this.global.Symbol)AddInterfaces.this.global.Template">setSymbol</a>(<a href="#129196" title="AddInterfaces.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#26866" title="(pos: scala.tools.nsc.util.Position)AddInterfaces.this.global.TermSymbol">newLocalDummy</a>(<a href="#129197" title="AddInterfaces.this.global.Template">templ</a>.<a href="../ast/Trees.scala.html#29361" title="=&gt; scala.tools.nsc.util.Position">pos</a>))
    }
    <a href="../ast/Trees.scala.html#70829" title="(tree: AddInterfaces.this.global.Template)AddInterfaces.this.global.Template" class="keyword">new</a> <a href="../ast/Trees.scala.html#26780" title="AddInterfaces.this.global.ChangeOwnerTraverser">ChangeOwnerTraverser</a>(<a href="#129197" title="AddInterfaces.this.global.Template">templ</a>.<a href="../ast/Trees.scala.html#48485" title="=&gt; AddInterfaces.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#26983" title="=&gt; AddInterfaces.this.global.Symbol">owner</a>, <a href="#129196" title="AddInterfaces.this.global.Symbol">clazz</a>)(
      <a href="../ast/Trees.scala.html#70829" title="(tree: AddInterfaces.this.global.Template)AddInterfaces.this.global.Template" class="keyword">new</a> <a href="../ast/Trees.scala.html#26780" title="AddInterfaces.this.global.ChangeOwnerTraverser">ChangeOwnerTraverser</a>(<a href="#129197" title="AddInterfaces.this.global.Template">templ</a>.<a href="../ast/Trees.scala.html#48485" title="=&gt; AddInterfaces.this.global.Symbol">symbol</a>, <a href="#129207" title="AddInterfaces.this.global.Template">templ1</a>.<a href="../ast/Trees.scala.html#48485" title="=&gt; AddInterfaces.this.global.Symbol">symbol</a>)(<a href="#129207" title="AddInterfaces.this.global.Template">templ1</a>))
  }

  <span class="keyword">def</span> <a title="(trees: List[AddInterfaces.this.global.Tree])List[AddInterfaces.this.global.Tree]" id="42434">implClassDefs</a>(<a title="List[AddInterfaces.this.global.Tree]" id="55248">trees</a>: <span title="List[AddInterfaces.this.global.Tree]">List</span>[Tree]): <span title="List[AddInterfaces.this.global.Tree]">List</span>[Tree] = {
    <span class="keyword">val</span> <a title="scala.collection.mutable.ListBuffer[AddInterfaces.this.global.Tree]" id="129330">buf</a> = <span title="scala.collection.mutable.ListBuffer[AddInterfaces.this.global.Tree]" class="keyword">new</span> <a title="scala.collection.mutable.ListBuffer[AddInterfaces.this.global.Tree]" id="24819">ListBuffer</a>[Tree]
    <span class="keyword">for</span> (<a title="AddInterfaces.this.global.Tree" id="129349">tree</a> &lt;- <a href="#55248" title="(f: (AddInterfaces.this.global.Tree) =&gt; Any)Unit" id="28932">trees</a>)
      <a href="#129349" title="AddInterfaces.this.global.Tree">tree</a> <span title="Any" class="keyword">match</span> {
        <span title="Any" class="keyword">case</span> ClassDef(_, _, _, <a title="AddInterfaces.this.global.Template" id="129356">impl</a>) =&gt;
          <span title="Any" class="keyword">if</span> (<a href="#129349" title="AddInterfaces.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; AddInterfaces.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#26963" title="=&gt; Boolean">needsImplClass</a>)
            <a href="#129330" title="(x: AddInterfaces.this.global.Tree)buf.type" id="61580">buf</a> += {
              <span class="keyword">val</span> <a title="AddInterfaces.this.global.Symbol" id="129388">clazz</a> = <a href="#42423" title="(iface: AddInterfaces.this.global.Symbol)AddInterfaces.this.global.Symbol">implClass</a>(<a href="#129349" title="AddInterfaces.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; AddInterfaces.this.global.Symbol">symbol</a>).<a href="../symtab/Symbols.scala.html#27010" title="=&gt; AddInterfaces.this.global.Symbol">initialize</a>
              <a href="../ast/Trees.scala.html#26612" title="(sym: AddInterfaces.this.global.Symbol,impl: AddInterfaces.this.global.Template)AddInterfaces.this.global.ClassDef">ClassDef</a>(<a href="#129388" title="AddInterfaces.this.global.Symbol">clazz</a>, <a href="#42433" title="(clazz: AddInterfaces.this.global.Symbol,templ: AddInterfaces.this.global.Template)AddInterfaces.this.global.Template">implTemplate</a>(<a href="#129388" title="AddInterfaces.this.global.Symbol">clazz</a>, <a href="#129356" title="AddInterfaces.this.global.Template">impl</a>))
            }
        <span title="Unit" class="keyword">case</span> _ =&gt;
      }
    <a href="#129330" title="scala.collection.mutable.ListBuffer[AddInterfaces.this.global.Tree]">buf</a>.<a title="=&gt; List[AddInterfaces.this.global.Tree]" id="61592">toList</a>
  }

  /** Add calls to supermixin constructors
   *  &lt;blockquote&gt;&lt;pre&gt;super[mix].$init$()&lt;/pre&gt;&lt;/blockquote&gt;
   *  to &lt;code&gt;tree&lt;/code&gt;. &lt;code&gt;tree&lt;/code&gt; which is assumed to be the body
   *  of a constructor of class &lt;code&gt;clazz&lt;/code&gt;.
   */
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tree: AddInterfaces.this.global.Tree,clazz: AddInterfaces.this.global.Symbol)AddInterfaces.this.global.Tree" id="42435">addMixinConstructorCalls</a>(<a title="AddInterfaces.this.global.Tree" id="55350">tree</a>: <a href="../ast/Trees.scala.html#26593" title="AddInterfaces.this.global.Tree">Tree</a>, <a title="AddInterfaces.this.global.Symbol" id="55351">clazz</a>: <a href="../symtab/Symbols.scala.html#26127" title="AddInterfaces.this.global.Symbol">Symbol</a>): <a href="../ast/Trees.scala.html#26593" title="AddInterfaces.this.global.Tree">Tree</a> = {
    <span class="keyword">def</span> <a title="(impl: AddInterfaces.this.global.Symbol)AddInterfaces.this.global.Tree" id="129447">mixinConstructorCall</a>(<a title="AddInterfaces.this.global.Symbol" id="129449">impl</a>: <a href="../symtab/Symbols.scala.html#26127" title="AddInterfaces.this.global.Symbol">Symbol</a>): <a href="../ast/Trees.scala.html#26593" title="AddInterfaces.this.global.Tree">Tree</a> = <a href="../ast/Trees.scala.html#26784" title="(pos: scala.tools.nsc.util.Position)(tree: AddInterfaces.this.global.Apply)AddInterfaces.this.global.Apply">atPos</a>(<a href="#55350" title="AddInterfaces.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29361" title="=&gt; scala.tools.nsc.util.Position">pos</a>) {
      <a href="../ast/Trees.scala.html#49125" title="(fun: AddInterfaces.this.global.Tree,args: List[AddInterfaces.this.global.Tree])AddInterfaces.this.global.Apply">Apply</a>(<a href="../ast/Trees.scala.html#26731" title="(qualifier: AddInterfaces.this.global.Tree,sym: AddInterfaces.this.global.Symbol)AddInterfaces.this.global.Select">Select</a>(<a href="../ast/Trees.scala.html#26727" title="(sym: AddInterfaces.this.global.Symbol)AddInterfaces.this.global.Tree">This</a>(<a href="#55351" title="AddInterfaces.this.global.Symbol">clazz</a>), <a href="#129449" title="AddInterfaces.this.global.Symbol">impl</a>.<a href="../symtab/Symbols.scala.html#27033" title="=&gt; AddInterfaces.this.global.Symbol">primaryConstructor</a>), List<span title="object Nil">(</span>))
    }
    <span class="keyword">val</span> <a title="List[AddInterfaces.this.global.Tree]" id="129448">mixinConstructorCalls</a>: <span title="List[AddInterfaces.this.global.Tree]">List</span>[Tree] = {
      <span class="keyword">for</span> (<a title="AddInterfaces.this.global.Symbol" id="129570">mc</a> &lt;- <a href="#55351" title="AddInterfaces.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27049" title="=&gt; List[AddInterfaces.this.global.Symbol]">mixinClasses</a>.<a title="(f: (AddInterfaces.this.global.Symbol) =&gt; AddInterfaces.this.global.Tree)(implicit bf: scala.collection.generic.BuilderFactory[AddInterfaces.this.global.Tree,List[AddInterfaces.this.global.Tree],List[AddInterfaces.this.global.Symbol]])List[AddInterfaces.this.global.Tree]" id="24301">reverse</a>
           <span class="keyword">if</span> <a href="#129570" title="AddInterfaces.this.global.Symbol">mc</a>.<a href="../symtab/Symbols.scala.html#26996" title="(mask: Long)Boolean">hasFlag</a><span title="(x$1: Boolean)Boolean">(</span><a href="../symtab/Flags.scala.html#28739" title="=&gt; Long">lateINTERFACE</a>) &amp;&amp; <a href="#129570" title="(x$1: AnyRef)Boolean">mc</a> != <a href="../symtab/Definitions.scala.html#28329" title="=&gt; AddInterfaces.this.global.Symbol">ScalaObjectClass</a>)
      <span class="keyword">yield</span> <a href="#129447" title="(impl: AddInterfaces.this.global.Symbol)AddInterfaces.this.global.Tree">mixinConstructorCall</a>(<a href="#42423" title="(iface: AddInterfaces.this.global.Symbol)AddInterfaces.this.global.Symbol">implClass</a>(<a href="#129570" title="AddInterfaces.this.global.Symbol">mc</a>))
    }
    (<a href="#55350" title="AddInterfaces.this.global.Tree">tree</a>: @<a href="../ast/Trees.scala.html#26593" title="AddInterfaces.this.global.Tree @unchecked">unchecked</a>) <span title="AddInterfaces.this.global.Tree" class="keyword">match</span> {
      <span title="AddInterfaces.this.global.Block" class="keyword">case</span> Block(<a title="List[AddInterfaces.this.global.Tree]" id="129603">stats</a>, <a title="AddInterfaces.this.global.Tree" id="129604">expr</a>) =&gt;
        // needs `hasSymbol' check because `supercall' could be a block (named / default args)
        <span class="keyword">val</span> <a href="#32686" title="(List[AddInterfaces.this.global.Tree], AddInterfaces.this.global.Tree, List[AddInterfaces.this.global.Tree])" id="396">(</a><a href="#129607" title="List[AddInterfaces.this.global.Tree]" id="32686">presuper</a>, <a href="#129607" title="AddInterfaces.this.global.Tree" id="32688">supercall</a> :: <a href="#129607" title="List[AddInterfaces.this.global.Tree]" id="32690">rest</a>) = <a href="#129603" title="(p: (AddInterfaces.this.global.Tree) =&gt; Boolean)(List[AddInterfaces.this.global.Tree], List[AddInterfaces.this.global.Tree])" id="24299">stats</a> <a title="(List[AddInterfaces.this.global.Tree], List[AddInterfaces.this.global.Tree]) @unchecked" id="1154">span</a> (<a title="AddInterfaces.this.global.Tree" id="129617">t</a> =&gt; <a href="#129617" title="AddInterfaces.this.global.Tree">t</a>.<a href="../ast/Trees.scala.html#29370" title="(x$1: Boolean)Boolean">hasSymbol</a> &amp;&amp; <a href="#129617" title="AddInterfaces.this.global.Tree">t</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; AddInterfaces.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#26996" title="(mask: Long)Boolean">hasFlag</a>(<span title="Long(137438953472L)">PRESUPER</span>))
        //assert(supercall.symbol.isClassConstructor, supercall)
        <a href="../ast/Trees.scala.html#26584" title="=&gt; AddInterfaces.this.global.LazyTreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#48599" title="(tree: AddInterfaces.this.global.Tree,stats: List[AddInterfaces.this.global.Tree],expr: AddInterfaces.this.global.Tree)AddInterfaces.this.global.Block">Block</a>(<a href="#55350" title="AddInterfaces.this.global.Tree">tree</a>, <a href="#32686" title="List[AddInterfaces.this.global.Tree]">presuper</a> <a href="#129689" title="List[AddInterfaces.this.global.Tree]">:::</a> <span title="(prefix: List[AddInterfaces.this.global.Tree])List[AddInterfaces.this.global.Tree]">(</span><a href="#32688" title="AddInterfaces.this.global.Tree">supercall</a> <a href="#129690" title="AddInterfaces.this.global.Tree">::</a> <a href="#129448" title="List[AddInterfaces.this.global.Tree]">mixinConstructorCalls</a> <a href="#129691" title="(x: AddInterfaces.this.global.Tree)List[AddInterfaces.this.global.Tree]">:::</a> <a href="#32690" title="(prefix: List[AddInterfaces.this.global.Tree])List[AddInterfaces.this.global.Tree]">rest</a>), <a href="#129604" title="AddInterfaces.this.global.Tree">expr</a>)
    }
  }

  <span class="keyword">protected</span> <span class="keyword">val</span> <a title="AddInterfaces.this.global.Transformer" id="42436">mixinTransformer</a> = <a href="#55227" title="AddInterfaces.this.global.Transformer{ ... }" class="keyword">new</a> <a href="../ast/Trees.scala.html#26773" title="anonymous class $anon extends AddInterfaces.this.global.Transformer" id="55227">Transformer</a> {
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(stats: List[AddInterfaces.this.global.Tree],exprOwner: AddInterfaces.this.global.Symbol)List[AddInterfaces.this.global.Tree]" id="55229">transformStats</a>(<a title="List[AddInterfaces.this.global.Tree]" id="55234">stats</a>: <span title="List[AddInterfaces.this.global.Tree]">List</span>[Tree], <a title="AddInterfaces.this.global.Symbol" id="55235">exprOwner</a>: <a href="../symtab/Symbols.scala.html#26127" title="AddInterfaces.this.global.Symbol">Symbol</a>): <span title="List[AddInterfaces.this.global.Tree]">List</span>[Tree] =
      (<span class="keyword">super</span>.<a href="../ast/Trees.scala.html#45482" title="(stats: List[AddInterfaces.this.global.Tree],exprOwner: AddInterfaces.this.global.Symbol)List[AddInterfaces.this.global.Tree]">transformStats</a>(<a href="#55234" title="List[AddInterfaces.this.global.Tree]">stats</a>, <a href="#55235" title="AddInterfaces.this.global.Symbol">exprOwner</a>) <a href="#55241" title="List[AddInterfaces.this.global.Tree]">:::</a>
       <span class="keyword">super</span>.<a href="../ast/Trees.scala.html#45482" title="(stats: List[AddInterfaces.this.global.Tree],exprOwner: AddInterfaces.this.global.Symbol)List[AddInterfaces.this.global.Tree]">transformStats</a><span title="(prefix: List[AddInterfaces.this.global.Tree])List[AddInterfaces.this.global.Tree]">(</span><a href="#42434" title="(trees: List[AddInterfaces.this.global.Tree])List[AddInterfaces.this.global.Tree]">implClassDefs</a>(<a href="#55234" title="List[AddInterfaces.this.global.Tree]">stats</a>), <a href="#55235" title="AddInterfaces.this.global.Symbol">exprOwner</a>))
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: AddInterfaces.this.global.Tree)AddInterfaces.this.global.Tree" id="55230">transform</a>(<a title="AddInterfaces.this.global.Tree" id="55261">tree</a>: <a href="../ast/Trees.scala.html#26593" title="AddInterfaces.this.global.Tree">Tree</a>): <a href="../ast/Trees.scala.html#26593" title="AddInterfaces.this.global.Tree">Tree</a> = {
      <span class="keyword">val</span> <a title="AddInterfaces.this.global.Symbol" id="55263">sym</a> = <a href="#55261" title="AddInterfaces.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; AddInterfaces.this.global.Symbol">symbol</a>
      <span class="keyword">val</span> <a title="AddInterfaces.this.global.Tree" id="55264">tree1</a> = <a href="#55261" title="AddInterfaces.this.global.Tree">tree</a> <span title="AddInterfaces.this.global.Tree" class="keyword">match</span> {
        <span title="AddInterfaces.this.global.ClassDef" class="keyword">case</span> ClassDef(<a title="AddInterfaces.this.global.Modifiers" id="55271">mods</a>, <a title="AddInterfaces.this.global.Name" id="55272">name</a>, <a title="List[AddInterfaces.this.global.TypeDef]" id="55273">tparams</a>, <a title="AddInterfaces.this.global.Template" id="55274">impl</a>) <span class="keyword">if</span> (<a href="#55263" title="AddInterfaces.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26963" title="=&gt; Boolean">needsImplClass</a>) =&gt;
          <a href="#42423" title="(iface: AddInterfaces.this.global.Symbol)AddInterfaces.this.global.Symbol">implClass</a>(<a href="#55263" title="AddInterfaces.this.global.Symbol">sym</a>).<a href="../symtab/Symbols.scala.html#27010" title="=&gt; AddInterfaces.this.global.Symbol">initialize</a> // to force lateDEFERRED flags
          <a href="../ast/Trees.scala.html#45465" title="=&gt; AddInterfaces.this.global.TreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#48541" title="(tree: AddInterfaces.this.global.Tree,mods: AddInterfaces.this.global.Modifiers,name: AddInterfaces.this.global.Name,tparams: List[AddInterfaces.this.global.TypeDef],impl: AddInterfaces.this.global.Template)AddInterfaces.this.global.ClassDef">ClassDef</a>(<a href="#55261" title="AddInterfaces.this.global.Tree">tree</a>, <a href="../ast/Trees.scala.html#52049" title="(flag: Long)AddInterfaces.this.global.Modifiers">mods</a> | <span title="Long(128L)">INTERFACE</span>, <a href="#55272" title="AddInterfaces.this.global.Name">name</a>, <a href="#55273" title="List[AddInterfaces.this.global.TypeDef]">tparams</a>, <a href="#42429" title="(templ: AddInterfaces.this.global.Template)AddInterfaces.this.global.Template">ifaceTemplate</a>(<a href="#55274" title="AddInterfaces.this.global.Template">impl</a>))
        <span title="AddInterfaces.this.global.DefDef" class="keyword">case</span> DefDef(<a title="AddInterfaces.this.global.Modifiers" id="55310">mods</a>, <a title="AddInterfaces.this.global.Name" id="55311">name</a>, <a title="List[AddInterfaces.this.global.TypeDef]" id="55312">tparams</a>, <a title="List[List[AddInterfaces.this.global.ValDef]]" id="55313">vparamss</a>, <a title="AddInterfaces.this.global.Tree" id="55314">tpt</a>, <a title="AddInterfaces.this.global.Tree" id="55315">rhs</a>) 
        <span class="keyword">if</span> (<a href="#55263" title="AddInterfaces.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26914" title="(x$1: Boolean)Boolean">isClassConstructor</a> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> <a href="#55263" title="AddInterfaces.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26959" title="=&gt; Boolean">isPrimaryConstructor</a> &amp;&amp; <a href="#55263" title="AddInterfaces.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26983" title="(x$1: AnyRef)Boolean">owner</a> != <a href="../symtab/Definitions.scala.html#28393" title="=&gt; AddInterfaces.this.global.Symbol">ArrayClass</a>) =&gt;
          <a href="../ast/Trees.scala.html#45465" title="=&gt; AddInterfaces.this.global.TreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#48545" title="(tree: AddInterfaces.this.global.Tree,mods: AddInterfaces.this.global.Modifiers,name: AddInterfaces.this.global.Name,tparams: List[AddInterfaces.this.global.TypeDef],vparamss: List[List[AddInterfaces.this.global.ValDef]],tpt: AddInterfaces.this.global.Tree,rhs: AddInterfaces.this.global.Tree)AddInterfaces.this.global.DefDef">DefDef</a>(<a href="#55261" title="AddInterfaces.this.global.Tree">tree</a>, <a href="#55310" title="AddInterfaces.this.global.Modifiers">mods</a>, <a href="#55311" title="AddInterfaces.this.global.Name">name</a>, <a href="#55312" title="List[AddInterfaces.this.global.TypeDef]">tparams</a>, <a href="#55313" title="List[List[AddInterfaces.this.global.ValDef]]">vparamss</a>, <a href="#55314" title="AddInterfaces.this.global.Tree">tpt</a>, 
                      <a href="#42435" title="(tree: AddInterfaces.this.global.Tree,clazz: AddInterfaces.this.global.Symbol)AddInterfaces.this.global.Tree">addMixinConstructorCalls</a>(<a href="#55315" title="AddInterfaces.this.global.Tree">rhs</a>, <a href="#55263" title="AddInterfaces.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26983" title="=&gt; AddInterfaces.this.global.Symbol">owner</a>)) // (3)
        <span title="AddInterfaces.this.global.Template" class="keyword">case</span> Template(<a title="List[AddInterfaces.this.global.Tree]" id="55362">parents</a>, <a title="AddInterfaces.this.global.ValDef" id="55363">self</a>, <a title="List[AddInterfaces.this.global.Tree]" id="55364">body</a>) =&gt;
          <span class="keyword">val</span> <a title="List[AddInterfaces.this.global.TypeTree]" id="55367">parents1</a> = <a href="#55263" title="AddInterfaces.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26983" title="=&gt; AddInterfaces.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27004" title="=&gt; AddInterfaces.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#30189" title="(f: (AddInterfaces.this.global.Type) =&gt; AddInterfaces.this.global.TypeTree)(implicit bf: scala.collection.generic.BuilderFactory[AddInterfaces.this.global.TypeTree,List[AddInterfaces.this.global.TypeTree],List[AddInterfaces.this.global.Type]])List[AddInterfaces.this.global.TypeTree]">parents</a> <span title="scala.collection.generic.BuilderFactory[AddInterfaces.this.global.TypeTree,List[AddInterfaces.this.global.TypeTree],List#Coll]">map</span> (<a title="AddInterfaces.this.global.Type" id="55376">t</a> =&gt; <a href="../ast/Trees.scala.html#26744" title="(tp: AddInterfaces.this.global.Type)AddInterfaces.this.global.TypeTree">TypeTree</a><a href="../ast/Trees.scala.html#29365" title="(pos: scala.tools.nsc.util.Position)AddInterfaces.this.global.TypeTree">(</a><a href="#55376" title="AddInterfaces.this.global.Type">t</a>) setPos <a href="#55261" title="AddInterfaces.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29361" title="=&gt; scala.tools.nsc.util.Position">pos</a>)
          <a href="../ast/Trees.scala.html#45465" title="=&gt; AddInterfaces.this.global.TreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#48550" title="(tree: AddInterfaces.this.global.Tree,parents: List[AddInterfaces.this.global.Tree],self: AddInterfaces.this.global.ValDef,body: List[AddInterfaces.this.global.Tree])AddInterfaces.this.global.Template">Template</a>(<a href="#55261" title="AddInterfaces.this.global.Tree">tree</a>, <a href="#55367" title="List[AddInterfaces.this.global.TypeTree]">parents1</a>, <a href="../ast/Trees.scala.html#26624" title="object AddInterfaces.this.global.emptyValDef">emptyValDef</a>, <a href="#55364" title="List[AddInterfaces.this.global.Tree]">body</a>)
        <span title="AddInterfaces.this.global.Tree" class="keyword">case</span> This(_) =&gt;
          <span title="AddInterfaces.this.global.Tree" class="keyword">if</span> (<a href="#55263" title="AddInterfaces.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26963" title="=&gt; Boolean">needsImplClass</a>) {
            <span class="keyword">val</span> <a title="AddInterfaces.this.global.Symbol" id="55489">impl</a> = <a href="#42423" title="(iface: AddInterfaces.this.global.Symbol)AddInterfaces.this.global.Symbol">implClass</a>(<a href="#55263" title="AddInterfaces.this.global.Symbol">sym</a>)
            <span class="keyword">var</span> <a title="AddInterfaces.this.global.Symbol" id="55490">owner</a> = <a href="../ast/Trees.scala.html#45467" title="=&gt; AddInterfaces.this.global.Symbol">currentOwner</a>
            <span title="Unit" class="keyword">while</span> (<a href="#55490" title="(x$1: AnyRef)Boolean">owner</a> <span title="(x$1: Boolean)Boolean">!=</span> <a href="#55263" title="AddInterfaces.this.global.Symbol">sym</a> &amp;&amp; <a href="#55490" title="(x$1: AnyRef)Boolean">owner</a> != <a href="#55489" title="AddInterfaces.this.global.Symbol">impl</a>) <a href="#55490" title="AddInterfaces.this.global.Symbol">owner</a> = <a href="#55490" title="AddInterfaces.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#26983" title="=&gt; AddInterfaces.this.global.Symbol">owner</a>;
            <span title="AddInterfaces.this.global.Tree" class="keyword">if</span> (<a href="#55490" title="(x$1: AnyRef)Boolean">owner</a> == <a href="#55489" title="AddInterfaces.this.global.Symbol">impl</a>) <a href="../ast/Trees.scala.html#26727" title="(sym: AddInterfaces.this.global.Symbol)AddInterfaces.this.global.Tree">This</a><a href="../ast/Trees.scala.html#29365" title="(pos: scala.tools.nsc.util.Position)AddInterfaces.this.global.Tree">(</a><a href="#55489" title="AddInterfaces.this.global.Symbol">impl</a>) setPos <a href="#55261" title="AddInterfaces.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29361" title="=&gt; scala.tools.nsc.util.Position">pos</a>
            <span class="keyword">else</span> <a href="#55261" title="AddInterfaces.this.global.Tree">tree</a>
          } <span class="keyword">else</span> <a href="#55261" title="AddInterfaces.this.global.Tree">tree</a>
/* !!!
        case Super(qual, mix) =&gt;
          val mix1 = mix
            if (mix == nme.EMPTY.toTypeName) mix
            else {
              val ps = atPhase(currentRun.erasurePhase) {
                sym.info.parents dropWhile (p =&gt; p.symbol.name != mix)
              }
              assert(!ps.isEmpty, tree);
              if (ps.head.symbol.needsImplClass) implClass(ps.head.symbol).name 
              else mix
            }
          if (sym.needsImplClass) Super(implClass(sym), mix1) setPos tree.pos
          else treeCopy.Super(tree, qual, mix1)
*/
        <span title="AddInterfaces.this.global.Tree" class="keyword">case</span> _ =&gt;
          <a href="#55261" title="AddInterfaces.this.global.Tree">tree</a>
      }
      <span class="keyword">super</span>.<a href="../ast/Trees.scala.html#45473" title="(tree: AddInterfaces.this.global.Tree)AddInterfaces.this.global.Tree">transform</a>(<a href="#55264" title="AddInterfaces.this.global.Tree">tree1</a>)
    }
  }
}
/*
    val ensureNoEscapes = new TypeTraverser {
      def ensureNoEscape(sym: Symbol) {
        if (sym.hasFlag(PRIVATE)) {
          var o = currentOwner;
          while (o != NoSymbol &amp;&amp; o != sym.owner &amp;&amp; !o.isLocal &amp;&amp; !o.hasFlag(PRIVATE))
          o = o.owner
          if (o == sym.owner) sym.makeNotPrivate(base);
        }
      }
      def traverse(t: Type): TypeTraverser = {
        t match {
          case TypeRef(qual, sym, args) =&gt;
            ensureNoEscape(sym)
            mapOver(t)
          case ClassInfoType(parents, decls, clazz) =&gt;
            parents foreach { p =&gt; traverse; () }
            traverse(t.typeOfThis)
          case _ =&gt; 
            mapOver(t)
        }
        this
      }
    }

*/

        </pre>
    </body>
</html>