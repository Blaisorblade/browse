<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/transform/AddInterfaces.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style">
    </head>
    <body>
        <pre>
/* NSC -- new Scala compiler
 * Copyright 2005-2009 LAMP/EPFL
 * @author Martin Odersky
 */
// $Id: AddInterfaces.scala 18387 2009-07-24 15:28:37Z odersky $

<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> transform

<span class="keyword">import</span> symtab._
<span class="keyword">import</span> Flags._
<span class="keyword">import</span> collection.mutable.{HashMap, ListBuffer}

<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class AddInterfaces extends scala.tools.nsc.SubComponent with scala.tools.nsc.transform.InfoTransform with ScalaObject" id="14128">AddInterfaces</a> <span title="ScalaObject" class="keyword">extends</span> <a href="InfoTransform.scala.html#14026" title="scala.tools.nsc.transform.InfoTransform">InfoTransform</a> {
  <span class="keyword">import</span> global._                  // the global environment
  <span class="keyword">import</span> definitions._             // standard classes and methods

  /** &lt;p&gt;
   *    The phase sets &lt;code&gt;lateINTERFACE&lt;/code&gt; for non-interface traits
   *    that now become interfaces.
   *  &lt;/p&gt;
   *  &lt;p&gt;
   *    It sets &lt;code&gt;lateDEFERRED&lt;/code&gt; for formerly concrete methods in
   *    such traits.
   *  &lt;/p&gt;
   */
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Long" id="42644">phaseNewFlags</a>: <a title="Long" id="2205">Long</a> = <a href="../symtab/Flags.scala.html#28923" title="(x$1: Long)Long">lateDEFERRED</a> | <a href="../symtab/Flags.scala.html#28925" title="=&gt; Long">lateINTERFACE</a>

  /** Type reference after erasure; to be defined in subclass
   *  &lt;code&gt;Erasure&lt;/code&gt;.
   */
  <span class="keyword">def</span> <a title="(sym: AddInterfaces.this.global.Symbol)AddInterfaces.this.global.Type" id="42645">erasedTypeRef</a>(<a title="AddInterfaces.this.global.Symbol" id="43694">sym</a>: <a href="../symtab/Symbols.scala.html#26286" title="AddInterfaces.this.global.Symbol">Symbol</a>): <a href="../symtab/Types.scala.html#26364" title="AddInterfaces.this.global.Type">Type</a>

  /** Erasure type-map; to be defined in subclass
   *  &lt;code&gt;Erasure&lt;/code&gt;.
   */
  <span class="keyword">def</span> <a title="=&gt; AddInterfaces.this.global.TypeMap" id="42646">erasure</a>: <a href="../symtab/Types.scala.html#26479" title="AddInterfaces.this.global.TypeMap">TypeMap</a>

  /** A lazily constructed map that associates every non-interface trait with
   *  its implementation class.
   */
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.mutable.HashMap[AddInterfaces.this.global.Symbol,AddInterfaces.this.global.Symbol]" id="42647">implClassMap</a> = <span title="scala.collection.mutable.HashMap[AddInterfaces.this.global.Symbol,AddInterfaces.this.global.Symbol]" class="keyword">new</span> <span title="scala.collection.mutable.HashMap[AddInterfaces.this.global.Symbol,AddInterfaces.this.global.Symbol]">HashMap</span>[Symbol, Symbol]

  /** A lazily constructed map that associates every concrete method in a non-interface
   *  trait that's currently compiled with its corresponding method in the trait's
   *  implementation class.
   */
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.mutable.HashMap[AddInterfaces.this.global.Symbol,AddInterfaces.this.global.Symbol]" id="42649">implMethodMap</a> = <span title="scala.collection.mutable.HashMap[AddInterfaces.this.global.Symbol,AddInterfaces.this.global.Symbol]" class="keyword">new</span> <span title="scala.collection.mutable.HashMap[AddInterfaces.this.global.Symbol,AddInterfaces.this.global.Symbol]">HashMap</span>[Symbol, Symbol]

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(prev: scala.tools.nsc.Phase)AddInterfaces.this.StdPhase" id="42651">newPhase</a>(<a title="scala.tools.nsc.Phase" id="128668">prev</a>: scala.tools.nsc.<a href="../Phase.scala.html#8931" title="scala.tools.nsc.Phase">Phase</a>): <a href="../SubComponent.scala.html#39872" title="AddInterfaces.this.StdPhase">StdPhase</a> = {
    <a href="#42647" title="=&gt; scala.collection.mutable.HashMap[AddInterfaces.this.global.Symbol,AddInterfaces.this.global.Symbol]">implClassMap</a>.<span title="()Unit">clear</span>
    <a href="#42649" title="=&gt; scala.collection.mutable.HashMap[AddInterfaces.this.global.Symbol,AddInterfaces.this.global.Symbol]">implMethodMap</a>.<span title="()Unit">clear</span>
    <span class="keyword">super</span>.<a href="InfoTransform.scala.html#42637" title="(prev: scala.tools.nsc.Phase)AddInterfaces.this.StdPhase">newPhase</a>(<a href="#128668" title="scala.tools.nsc.Phase">prev</a>)
  }

  /** Is given trait member symbol a member of the trait's interface 
   *  after this transform is performed? */
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: AddInterfaces.this.global.Symbol)Boolean" id="42652">isInterfaceMember</a>(<a title="AddInterfaces.this.global.Symbol" id="128679">sym</a>: <a href="../symtab/Symbols.scala.html#26286" title="AddInterfaces.this.global.Symbol">Symbol</a>): <span title="Boolean">Boolean</span> = {
    <a href="#128679" title="AddInterfaces.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27055" title="(x$1: Boolean)Boolean">isType</a> ||
    { <a href="#128679" title="AddInterfaces.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27163" title="=&gt; AddInterfaces.this.global.Type">info</a>; // to set lateMETHOD flag if necessary
      <a href="#128679" title="AddInterfaces.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27069" title="(x$1: Boolean)Boolean">isMethod</a> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#128679" title="AddInterfaces.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27071" title="=&gt; Boolean">isLabel</a> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span>(<a href="../symtab/Symbols.scala.html#27155" title="(mask: Long)Boolean">sym</a> hasFlag (PRIVATE <span title="Long(67108868L)">|</span> BRIDGE)) <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> 
      <span title="=&gt; Boolean">!</span><a href="#128679" title="AddInterfaces.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27075" title="=&gt; Boolean">isConstructor</a> &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#128679" title="AddInterfaces.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27123" title="=&gt; Boolean">isImplOnly</a>
    }
  }

  /** Does symbol need an implementation method? */
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: AddInterfaces.this.global.Symbol)Boolean" id="42653">needsImplMethod</a>(<a title="AddInterfaces.this.global.Symbol" id="128731">sym</a>: <a href="../symtab/Symbols.scala.html#26286" title="AddInterfaces.this.global.Symbol">Symbol</a>): <span title="Boolean">Boolean</span> =
    <a href="#128731" title="AddInterfaces.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27069" title="(x$1: Boolean)Boolean">isMethod</a> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> <a href="#42652" title="(sym: AddInterfaces.this.global.Symbol)Boolean">isInterfaceMember</a>(<a href="#128731" title="AddInterfaces.this.global.Symbol">sym</a>) &amp;&amp; 
    (<span title="(x$1: Boolean)Boolean">!</span>(<a href="../symtab/Symbols.scala.html#27155" title="(mask: Long)Boolean">sym</a> hasFlag (DEFERRED <span title="Long(268435472L)">|</span> SUPERACCESSOR)) || (<a href="../symtab/Symbols.scala.html#27155" title="(mask: Long)Boolean">sym</a> hasFlag <a href="../symtab/Flags.scala.html#28923" title="=&gt; Long">lateDEFERRED</a>))

  <span class="keyword">def</span> <a title="=&gt; scala.tools.nsc.Phase" id="42654">implClassPhase</a> = <a href="../Global.scala.html#39408" title="=&gt; AddInterfaces.this.global.Run">currentRun</a>.<a href="../Global.scala.html#40428" title="=&gt; scala.tools.nsc.Phase">erasurePhase</a>.<a href="../Phase.scala.html#23302" title="=&gt; scala.tools.nsc.Phase">next</a>

  /** Return the implementation class of a trait; create a new one of one does not yet exist */  
  <span class="keyword">def</span> <a title="(iface: AddInterfaces.this.global.Symbol)AddInterfaces.this.global.Symbol" id="42655">implClass</a>(<a title="AddInterfaces.this.global.Symbol" id="55536">iface</a>: <a href="../symtab/Symbols.scala.html#26286" title="AddInterfaces.this.global.Symbol">Symbol</a>): <a href="../symtab/Symbols.scala.html#26286" title="AddInterfaces.this.global.Symbol">Symbol</a> = <a href="#42647" title="=&gt; scala.collection.mutable.HashMap[AddInterfaces.this.global.Symbol,AddInterfaces.this.global.Symbol]">implClassMap</a>.<span title="(key: AddInterfaces.this.global.Symbol)Option[AddInterfaces.this.global.Symbol]">get</span>(<a href="#55536" title="AddInterfaces.this.global.Symbol">iface</a>) <span title="AddInterfaces.this.global.Symbol" class="keyword">match</span> {
    <span title="AddInterfaces.this.global.Symbol" class="keyword">case</span> Some(<a title="AddInterfaces.this.global.Symbol" id="128776">c</a>) =&gt; <a href="#128776" title="AddInterfaces.this.global.Symbol">c</a>
    <span title="AddInterfaces.this.global.Symbol" class="keyword">case</span> <span title="object None">None</span> =&gt;
      <a href="../symtab/SymbolTable.scala.html#26256" title="(ph: scala.tools.nsc.Phase)(op: =&gt; AddInterfaces.this.global.Symbol)AddInterfaces.this.global.Symbol">atPhase</a>(<a href="#42654" title="=&gt; scala.tools.nsc.Phase">implClassPhase</a>) {
        <span class="keyword">val</span> <a title="AddInterfaces.this.global.Name" id="128785">implName</a> = <a href="../symtab/StdNames.scala.html#26690" title="object AddInterfaces.this.global.nme">nme</a>.<a href="../symtab/StdNames.scala.html#29855" title="(name: AddInterfaces.this.global.Name)AddInterfaces.this.global.Name">implClassName</a>(<a href="#55536" title="AddInterfaces.this.global.Symbol">iface</a>.<a href="../symtab/Symbols.scala.html#27147" title="=&gt; AddInterfaces.this.global.Name">name</a>)
        <span class="keyword">var</span> <a title="AddInterfaces.this.global.Symbol" id="128786">impl</a> = <span title="AddInterfaces.this.global.Symbol" class="keyword">if</span> (<a href="#55536" title="AddInterfaces.this.global.Symbol">iface</a>.<a href="../symtab/Symbols.scala.html#27142" title="=&gt; AddInterfaces.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27056" title="=&gt; Boolean">isClass</a>) <a href="#55536" title="AddInterfaces.this.global.Symbol">iface</a>.<a href="../symtab/Symbols.scala.html#27142" title="=&gt; AddInterfaces.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27163" title="=&gt; AddInterfaces.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#30397" title="(name: AddInterfaces.this.global.Name)AddInterfaces.this.global.Symbol">decl</a>(<a href="#128785" title="AddInterfaces.this.global.Name">implName</a>) <span class="keyword">else</span> <a href="../symtab/Symbols.scala.html#26293" title="object AddInterfaces.this.global.NoSymbol">NoSymbol</a>
        <span title="Any" class="keyword">if</span> (<a href="#128786" title="(x$1: AnyRef)Boolean">impl</a> == <a href="../symtab/Symbols.scala.html#26293" title="object AddInterfaces.this.global.NoSymbol">NoSymbol</a>) {
          <a href="#128786" title="AddInterfaces.this.global.Symbol">impl</a> = <a href="#55536" title="AddInterfaces.this.global.Symbol">iface</a>.<a href="../symtab/Symbols.scala.html#27189" title="(owner: AddInterfaces.this.global.Symbol)AddInterfaces.this.global.Symbol">cloneSymbolImpl</a>(<a href="#55536" title="AddInterfaces.this.global.Symbol">iface</a>.<a href="../symtab/Symbols.scala.html#27142" title="=&gt; AddInterfaces.this.global.Symbol">owner</a>)
          <a href="#128786" title="AddInterfaces.this.global.Symbol">impl</a>.<a href="../symtab/Symbols.scala.html#27148" title="(name: AddInterfaces.this.global.Name)Unit">name</a> = <a href="#128785" title="AddInterfaces.this.global.Name">implName</a>
          <a href="#128786" title="AddInterfaces.this.global.Symbol">impl</a>.<a href="../symtab/Symbols.scala.html#27237" title="(f: scala.tools.nsc.io.AbstractFile)Unit">sourceFile</a> = <a href="#55536" title="AddInterfaces.this.global.Symbol">iface</a>.<a href="../symtab/Symbols.scala.html#27236" title="=&gt; scala.tools.nsc.io.AbstractFile">sourceFile</a>
          <span title="Any" class="keyword">if</span> (<a href="#55536" title="AddInterfaces.this.global.Symbol">iface</a>.<a href="../symtab/Symbols.scala.html#27142" title="=&gt; AddInterfaces.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27056" title="=&gt; Boolean">isClass</a>)
            <a href="#55536" title="AddInterfaces.this.global.Symbol">iface</a>.<a href="../symtab/Symbols.scala.html#27142" title="=&gt; AddInterfaces.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27163" title="=&gt; AddInterfaces.this.global.Type">info</a>.<a href="../symtab/Scopes.scala.html#27290" title="(sym: AddInterfaces.this.global.Symbol)AddInterfaces.this.global.Symbol">decls</a> enter <a href="#128786" title="AddInterfaces.this.global.Symbol">impl</a> 
        }
        <span title="Unit" class="keyword">if</span> (<a href="../Global.scala.html#39408" title="=&gt; AddInterfaces.this.global.Run">currentRun</a>.<a href="../Global.scala.html#40449" title="(sym: AddInterfaces.this.global.Symbol)Boolean">compiles</a>(<a href="#55536" title="AddInterfaces.this.global.Symbol">iface</a>)) <a href="../Global.scala.html#39408" title="=&gt; AddInterfaces.this.global.Run">currentRun</a>.<a href="../Global.scala.html#40445" title="(key: AddInterfaces.this.global.Symbol,value: scala.tools.nsc.io.AbstractFile)Unit">symSource</a>(<a href="#128786" title="AddInterfaces.this.global.Symbol">impl</a>) = <a href="#55536" title="AddInterfaces.this.global.Symbol">iface</a>.<a href="../symtab/Symbols.scala.html#27236" title="=&gt; scala.tools.nsc.io.AbstractFile">sourceFile</a>
        <a href="../symtab/Symbols.scala.html#27007" title="(pos: scala.tools.nsc.util.Position)AddInterfaces.this.global.Symbol">impl</a> setPos <a href="#55536" title="AddInterfaces.this.global.Symbol">iface</a>.<a href="../symtab/Symbols.scala.html#27006" title="=&gt; scala.tools.nsc.util.Position">pos</a>
        <a href="#128786" title="AddInterfaces.this.global.Symbol">impl</a>.<a href="../symtab/Symbols.scala.html#27151" title="(fs: Long)Unit">flags</a> = <a href="#55536" title="AddInterfaces.this.global.Symbol">iface</a>.<a href="../symtab/Symbols.scala.html#27150" title="(x$1: Long)Long" id="3233">flags</a> <span title="(x$1: Long)Long">&amp;</span> <a title="=&gt; Long" id="3096">~</a>(<a title="(x$1: Long)Long" id="3023">INTERFACE</a> | <a href="../symtab/Flags.scala.html#28925" title="=&gt; Long">lateINTERFACE</a>) | <span title="Long(137438953472L)">IMPLCLASS</span>
        <a href="../symtab/Symbols.scala.html#27164" title="(info: AddInterfaces.this.global.Type)AddInterfaces.this.global.Symbol">impl</a> setInfo <span title="AddInterfaces.this.LazyImplClassType" class="keyword">new</span> <a href="#42656" title="AddInterfaces.this.LazyImplClassType">LazyImplClassType</a>(<a href="#55536" title="AddInterfaces.this.global.Symbol">iface</a>)
        <a href="#42647" title="(key: AddInterfaces.this.global.Symbol,value: AddInterfaces.this.global.Symbol)Unit">implClassMap</a>(<a href="#55536" title="AddInterfaces.this.global.Symbol">iface</a>) = <a href="#128786" title="AddInterfaces.this.global.Symbol">impl</a>
        <span title="Unit" class="keyword">if</span> (<a href="../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../Settings.scala.html#37988" title="=&gt; Boolean">value</a>) <a href="../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;generating impl class &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#128786" title="AddInterfaces.this.global.Symbol">impl</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; in &quot;)" class="string">&quot; in &quot;</span> + <a href="#55536" title="AddInterfaces.this.global.Symbol">iface</a>.<a href="../symtab/Symbols.scala.html#27142" title="=&gt; AddInterfaces.this.global.Symbol">owner</a>)//debug
        <a href="#128786" title="AddInterfaces.this.global.Symbol">impl</a>
      }
  }

  /** &lt;p&gt;
   *    A lazy type to set the info of an implementation class 
   *    The parents of an implementation class for trait &lt;code&gt;iface&lt;/code&gt; are:
   *  &lt;/p&gt;
   *  &lt;ul&gt;
   *    &lt;li&gt;superclass: &lt;code&gt;Object&lt;/code&gt;&lt;/li&gt;
   *    &lt;li&gt;
   *      mixin classes: mixin classes of &lt;code&gt;iface&lt;/code&gt; where every
   *      non-interface trait is mapped to its implementation class, followed
   *      by &lt;code&gt;iface&lt;/code&gt; itself.
   *    &lt;/li&gt;
   *  &lt;/ul&gt;
   *  &lt;p&gt;
   *    The declarations of a mixin class are:
   *  &lt;/p&gt;
   *  &lt;ul&gt;
   *    &lt;li&gt;
   *      for every interface member of &lt;code&gt;iface&lt;/code&gt; its implemention
   *      method, if one is needed.
   *    &lt;/li&gt;
   *    &lt;li&gt;
   *      every former member of &lt;code&gt;iface&lt;/code&gt; that is implementation only
   *    &lt;/li&gt;
   *  &lt;/ul&gt;
   */
  <span class="keyword">private</span> <span class="keyword">class</span> <a title="class LazyImplClassType extends AddInterfaces.this.global.LazyType with ScalaObject" id="42656">LazyImplClassType</a><span title="ScalaObject">(</span><a title="AddInterfaces.this.global.Symbol" id="128884">iface</a>: <a href="../symtab/Symbols.scala.html#26286" title="AddInterfaces.this.global.Symbol">Symbol</a>) <span class="keyword">extends</span> <a href="../symtab/Types.scala.html#26442" title="AddInterfaces.this.global.LazyType">LazyType</a> {

    /** Compute the decls of implementation class &lt;code&gt;implClass&lt;/code&gt;, 
     *  given the decls &lt;code&gt;ifaceDecls&lt;/code&gt; of its interface.
     *
     *  @param implClass  ...
     *  @param ifaceDecls ...
     *  @return           ...
     */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(implClass: AddInterfaces.this.global.Symbol,ifaceDecls: AddInterfaces.this.global.Scope)AddInterfaces.this.global.Scope" id="128881">implDecls</a>(<a title="AddInterfaces.this.global.Symbol" id="128915">implClass</a>: <a href="../symtab/Symbols.scala.html#26286" title="AddInterfaces.this.global.Symbol">Symbol</a>, <a title="AddInterfaces.this.global.Scope" id="128916">ifaceDecls</a>: <a href="../symtab/Scopes.scala.html#26171" title="AddInterfaces.this.global.Scope">Scope</a>): <a href="../symtab/Scopes.scala.html#26171" title="AddInterfaces.this.global.Scope">Scope</a> = {
      <span class="keyword">val</span> <a title="AddInterfaces.this.global.Scope" id="128918">decls</a> = <a href="../symtab/Scopes.scala.html#26125" title="=&gt; AddInterfaces.this.global.Scope">newScope</a>
      <span title="Any" class="keyword">if</span> (<span title="(x$1: AnyRef)Boolean">(</span><a href="../symtab/Scopes.scala.html#27297" title="(name: AddInterfaces.this.global.Name)AddInterfaces.this.global.Symbol">ifaceDecls</a> lookup <a href="../symtab/StdNames.scala.html#26690" title="object AddInterfaces.this.global.nme">nme</a>.<a href="../symtab/StdNames.scala.html#29907" title="=&gt; AddInterfaces.this.global.Name">MIXIN_CONSTRUCTOR</a>) == <a href="../symtab/Symbols.scala.html#26293" title="object AddInterfaces.this.global.NoSymbol">NoSymbol</a>)
        <a href="../symtab/Scopes.scala.html#27290" title="(sym: AddInterfaces.this.global.Symbol)AddInterfaces.this.global.Symbol">decls</a> enter (<a href="#128915" title="AddInterfaces.this.global.Symbol">implClass</a>.<a href="../symtab/Symbols.scala.html#27026" title="(pos: scala.tools.nsc.util.Position,name: AddInterfaces.this.global.Name)AddInterfaces.this.global.TermSymbol">newMethod</a><a href="../symtab/Symbols.scala.html#27164" title="(info: AddInterfaces.this.global.Type)AddInterfaces.this.global.TermSymbol">(</a><a href="#128915" title="AddInterfaces.this.global.Symbol">implClass</a>.<a href="../symtab/Symbols.scala.html#27006" title="=&gt; scala.tools.nsc.util.Position">pos</a>, <a href="../symtab/StdNames.scala.html#26690" title="object AddInterfaces.this.global.nme">nme</a>.<a href="../symtab/StdNames.scala.html#29907" title="=&gt; AddInterfaces.this.global.Name">MIXIN_CONSTRUCTOR</a>) 
                     setInfo <a href="../symtab/Types.scala.html#44127" title="(params: List[AddInterfaces.this.global.Symbol],resultType: AddInterfaces.this.global.Type)AddInterfaces.this.global.MethodType">MethodType</a>(List<span title="object Nil">(</span>), <a href="../symtab/Definitions.scala.html#28463" title="=&gt; AddInterfaces.this.global.Symbol">UnitClass</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; AddInterfaces.this.global.Type">tpe</a>))
      <span class="keyword">for</span> (<a title="AddInterfaces.this.global.Symbol" id="129000">sym</a> &lt;- <a href="#128916" title="AddInterfaces.this.global.Scope">ifaceDecls</a>.<a href="../symtab/Scopes.scala.html#27304" title="(f: (AddInterfaces.this.global.Symbol) =&gt; Any)Unit" id="32359">iterator</a>) {
        <span title="Any" class="keyword">if</span> (<a href="#42652" title="(sym: AddInterfaces.this.global.Symbol)Boolean">isInterfaceMember</a>(<a href="#129000" title="AddInterfaces.this.global.Symbol">sym</a>)) {
          <span title="Any" class="keyword">if</span> (<a href="#42653" title="(sym: AddInterfaces.this.global.Symbol)Boolean">needsImplMethod</a>(<a href="#129000" title="AddInterfaces.this.global.Symbol">sym</a>)) {
            <span class="keyword">val</span> <a title="AddInterfaces.this.global.Symbol" id="129005">impl</a> = <a href="#129000" title="AddInterfaces.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27188" title="(owner: AddInterfaces.this.global.Symbol)AddInterfaces.this.global.Symbol">cloneSymbol</a>(<a href="#128915" title="AddInterfaces.this.global.Symbol">implClass</a>).<a href="../symtab/Symbols.scala.html#27164" title="(info: AddInterfaces.this.global.Type)AddInterfaces.this.global.Symbol">setInfo</a>(<a href="#129000" title="AddInterfaces.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27163" title="=&gt; AddInterfaces.this.global.Type">info</a>).<a href="../symtab/Symbols.scala.html#27153" title="(mask: Long)AddInterfaces.this.global.Symbol">resetFlag</a>(<a href="../symtab/Flags.scala.html#28923" title="=&gt; Long">lateDEFERRED</a>)
            <span title="Unit" class="keyword">if</span> (<a href="../Global.scala.html#39408" title="=&gt; AddInterfaces.this.global.Run">currentRun</a>.<a href="../Global.scala.html#40449" title="(sym: AddInterfaces.this.global.Symbol)Boolean">compiles</a>(<a href="#128915" title="AddInterfaces.this.global.Symbol">implClass</a>)) <a href="#42649" title="(key: AddInterfaces.this.global.Symbol,value: AddInterfaces.this.global.Symbol)Unit">implMethodMap</a>(<a href="#129000" title="AddInterfaces.this.global.Symbol">sym</a>) = <a href="#129005" title="AddInterfaces.this.global.Symbol">impl</a>
            <a href="../symtab/Scopes.scala.html#27290" title="(sym: AddInterfaces.this.global.Symbol)AddInterfaces.this.global.Symbol">decls</a> enter <a href="#129005" title="AddInterfaces.this.global.Symbol">impl</a>
            <a href="../symtab/Symbols.scala.html#27152" title="(mask: Long)sym.type">sym</a> setFlag <a href="../symtab/Flags.scala.html#28923" title="=&gt; Long">lateDEFERRED</a>
          }
        } <span class="keyword">else</span> {
          <a href="#129000" title="AddInterfaces.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27143" title="(owner: AddInterfaces.this.global.Symbol)Unit">owner</a> = <a href="#128915" title="AddInterfaces.this.global.Symbol">implClass</a> 
          // note: OK to destructively modify the owner here, 
          // because symbol will not be accessible from outside the sourcefile.
          // mixin constructors are corrected separately; see TermSymbol.owner
          <a href="../symtab/Scopes.scala.html#27290" title="(sym: AddInterfaces.this.global.Symbol)AddInterfaces.this.global.Symbol">decls</a> enter <a href="#129000" title="AddInterfaces.this.global.Symbol">sym</a>
        }
      }
      <a href="#128918" title="AddInterfaces.this.global.Scope">decls</a>
    }

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(sym: AddInterfaces.this.global.Symbol)Unit" id="128882">complete</a>(<a title="AddInterfaces.this.global.Symbol" id="129070">sym</a>: <a href="../symtab/Symbols.scala.html#26286" title="AddInterfaces.this.global.Symbol">Symbol</a>) {
      <span class="keyword">def</span> <a title="(tp: AddInterfaces.this.global.Type)AddInterfaces.this.global.Type" id="129075">implType</a>(<a title="AddInterfaces.this.global.Type" id="129076">tp</a>: <a href="../symtab/Types.scala.html#26364" title="AddInterfaces.this.global.Type">Type</a>): <a href="../symtab/Types.scala.html#26364" title="AddInterfaces.this.global.Type">Type</a> = <a href="#129076" title="AddInterfaces.this.global.Type">tp</a> <span title="AddInterfaces.this.global.Type" class="keyword">match</span> {
        <span title="AddInterfaces.this.global.ClassInfoType" class="keyword">case</span> ClassInfoType(<a title="List[AddInterfaces.this.global.Type]" id="129080">parents</a>, <a title="AddInterfaces.this.global.Scope" id="129081">decls</a>, _) =&gt;
          <a title="(assertion: Boolean)Unit" id="7943">assert</a>(<a href="../symtab/SymbolTable.scala.html#26247" title="(x$1: AnyRef)Boolean">phase</a> == <a href="#42654" title="=&gt; scala.tools.nsc.Phase">implClassPhase</a>)
          <a href="../symtab/Types.scala.html#44491" title="(parents: List[AddInterfaces.this.global.Type],decls: AddInterfaces.this.global.Scope,typeSymbol: AddInterfaces.this.global.Symbol)AddInterfaces.this.global.ClassInfoType">ClassInfoType</a>(
            <a href="../symtab/Definitions.scala.html#28453" title="=&gt; AddInterfaces.this.global.Symbol">ObjectClass</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; AddInterfaces.this.global.Type">tpe</a> <a href="#129122" title="AddInterfaces.this.global.Type">::</a> (<a href="#129080" title="List[AddInterfaces.this.global.Type]">parents</a>.<span title="(f: (AddInterfaces.this.global.Type) =&gt; AddInterfaces.this.global.Type)(implicit bf: scala.collection.generic.BuilderFactory[AddInterfaces.this.global.Type,List[AddInterfaces.this.global.Type],List[AddInterfaces.this.global.Type]])List[AddInterfaces.this.global.Type]">tail</span> <span title="scala.collection.generic.BuilderFactory[AddInterfaces.this.global.Type,List[AddInterfaces.this.global.Type],List#Coll]">map</span> <a href="#42657" title="(tp: AddInterfaces.this.global.Type)AddInterfaces.this.global.Type">mixinToImplClass</a>) <a href="#129123" title="(x: AddInterfaces.this.global.Type)List[AddInterfaces.this.global.Type]">:::</a> <a title="(xs: AddInterfaces.this.global.Type*)List[AddInterfaces.this.global.Type]" id="24478">List</a><span title="(prefix: List[AddInterfaces.this.global.Type])List[AddInterfaces.this.global.Type]">(</span><a href="#128884" title="AddInterfaces.this.global.Symbol">iface</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; AddInterfaces.this.global.Type">tpe</a>),
            <a href="#128881" title="(implClass: AddInterfaces.this.global.Symbol,ifaceDecls: AddInterfaces.this.global.Scope)AddInterfaces.this.global.Scope">implDecls</a>(<a href="#129070" title="AddInterfaces.this.global.Symbol">sym</a>, <a href="#129081" title="AddInterfaces.this.global.Scope">decls</a>),
            <a href="#129070" title="AddInterfaces.this.global.Symbol">sym</a>)
        <span title="AddInterfaces.this.global.Type" class="keyword">case</span> PolyType(<a title="List[AddInterfaces.this.global.Symbol]" id="129246">tparams</a>, <a title="AddInterfaces.this.global.Type" id="129247">restpe</a>) =&gt;
          <a href="#129075" title="(tp: AddInterfaces.this.global.Type)AddInterfaces.this.global.Type">implType</a>(<a href="#129247" title="AddInterfaces.this.global.Type">restpe</a>)
      }
      <a href="#129070" title="AddInterfaces.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27164" title="(info: AddInterfaces.this.global.Type)sym.type">setInfo</a><span title="Unit">(</span><a href="#129075" title="(tp: AddInterfaces.this.global.Type)AddInterfaces.this.global.Type">implType</a>(<a href="../symtab/SymbolTable.scala.html#26256" title="(ph: scala.tools.nsc.Phase)(op: =&gt; AddInterfaces.this.global.Type)AddInterfaces.this.global.Type">atPhase</a>(<a href="../Global.scala.html#39408" title="=&gt; AddInterfaces.this.global.Run">currentRun</a>.<a href="../Global.scala.html#40428" title="=&gt; scala.tools.nsc.Phase">erasurePhase</a>)(<a href="#128884" title="AddInterfaces.this.global.Symbol">iface</a>.<a href="../symtab/Symbols.scala.html#27163" title="=&gt; AddInterfaces.this.global.Type">info</a>)))
    }

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(clazz: AddInterfaces.this.global.Symbol)Unit" id="128883">load</a>(<a title="AddInterfaces.this.global.Symbol" id="129267">clazz</a>: <a href="../symtab/Symbols.scala.html#26286" title="AddInterfaces.this.global.Symbol">Symbol</a>) { <a href="#128882" title="(sym: AddInterfaces.this.global.Symbol)Unit">complete</a>(<a href="#129267" title="AddInterfaces.this.global.Symbol">clazz</a>) }
  }

  /** If type &lt;code&gt;tp&lt;/code&gt; refers to a non-interface trait, return a
   *  reference to its implementation class. Otherwise return &lt;code&gt;tp&lt;/code&gt;
   *  itself.
   *
   *  @param tp ...
   *  @return   ...
   */
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tp: AddInterfaces.this.global.Type)AddInterfaces.this.global.Type" id="42657">mixinToImplClass</a>(<a title="AddInterfaces.this.global.Type" id="129131">tp</a>: <a href="../symtab/Types.scala.html#26364" title="AddInterfaces.this.global.Type">Type</a>): <a href="../symtab/Types.scala.html#26364" title="AddInterfaces.this.global.Type">Type</a> = 
    <a href="#42646" title="(v1: AddInterfaces.this.global.Type)AddInterfaces.this.global.Type" id="25688">erasure</a>(
      <a href="#129131" title="AddInterfaces.this.global.Type">tp</a> <span title="AddInterfaces.this.global.Type" class="keyword">match</span> { //@MATN: no normalize needed (comes after erasure)
        <span title="AddInterfaces.this.global.Type" class="keyword">case</span> TypeRef(<a title="AddInterfaces.this.global.Type" id="129281">pre</a>, <a title="AddInterfaces.this.global.Symbol" id="129282">sym</a>, <a title="List[AddInterfaces.this.global.Type]" id="129283">args</a>) <span class="keyword">if</span> (<a href="#129282" title="AddInterfaces.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27122" title="=&gt; Boolean">needsImplClass</a>) =&gt;
          <a href="../symtab/Types.scala.html#26454" title="(pre: AddInterfaces.this.global.Type,sym: AddInterfaces.this.global.Symbol,args: List[AddInterfaces.this.global.Type])AddInterfaces.this.global.Type">typeRef</a>(<a href="#129281" title="AddInterfaces.this.global.Type">pre</a>, <a href="#42655" title="(iface: AddInterfaces.this.global.Symbol)AddInterfaces.this.global.Symbol">implClass</a>(<a href="#129282" title="AddInterfaces.this.global.Symbol">sym</a>), <a href="#129283" title="List[AddInterfaces.this.global.Type]">args</a>)
        <span title="AddInterfaces.this.global.Type" class="keyword">case</span> _ =&gt;
          <a href="#129131" title="AddInterfaces.this.global.Type">tp</a>
      })

  <span class="keyword">def</span> <a title="(tp: AddInterfaces.this.global.Type)AddInterfaces.this.global.Type" id="42658">transformMixinInfo</a>(<a title="AddInterfaces.this.global.Type" id="48478">tp</a>: <a href="../symtab/Types.scala.html#26364" title="AddInterfaces.this.global.Type">Type</a>): <a href="../symtab/Types.scala.html#26364" title="AddInterfaces.this.global.Type">Type</a> = <a href="#48478" title="AddInterfaces.this.global.Type">tp</a> <span title="AddInterfaces.this.global.Type" class="keyword">match</span> {
    <span title="AddInterfaces.this.global.ClassInfoType" class="keyword">case</span> ClassInfoType(<a title="List[AddInterfaces.this.global.Type]" id="129298">parents</a>, <a title="AddInterfaces.this.global.Scope" id="129299">decls</a>, <a title="AddInterfaces.this.global.Symbol" id="129300">clazz</a>) =&gt;
      <span title="Any" class="keyword">if</span> (<a href="#129300" title="AddInterfaces.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27122" title="=&gt; Boolean">needsImplClass</a>) {
        <a href="../symtab/Symbols.scala.html#27152" title="(mask: Long)clazz.type">clazz</a> setFlag <a href="../symtab/Flags.scala.html#28925" title="=&gt; Long">lateINTERFACE</a>
        <a href="#42655" title="(iface: AddInterfaces.this.global.Symbol)AddInterfaces.this.global.Symbol">implClass</a>(<a href="#129300" title="AddInterfaces.this.global.Symbol">clazz</a>) // generate an impl class
      }
      <span class="keyword">val</span> <a title="List[AddInterfaces.this.global.Type]" id="129303">parents1</a> =
        <span title="List[AddInterfaces.this.global.Type]" class="keyword">if</span> (<a href="#129298" title="List[AddInterfaces.this.global.Type]">parents</a>.<a title="=&gt; Boolean" id="25593">isEmpty</a>) List<span title="object Nil">(</span>)
        <span class="keyword">else</span> {
          <a title="(assertion: Boolean,message: =&gt; Any)Unit" id="7945">assert</a>(<span title="=&gt; Boolean">!</span><a href="#129298" title="List[AddInterfaces.this.global.Type]">parents</a>.<a title="=&gt; AddInterfaces.this.global.Type" id="25602">head</a>.<a href="../symtab/Types.scala.html#30366" title="=&gt; AddInterfaces.this.global.Symbol">typeSymbol</a>.<a href="../symtab/Symbols.scala.html#27082" title="=&gt; Boolean">isTrait</a>, <a href="#129300" title="AddInterfaces.this.global.Symbol">clazz</a>)
          <span title="List[AddInterfaces.this.global.Type]" class="keyword">if</span> (<a href="#129300" title="AddInterfaces.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27082" title="=&gt; Boolean">isTrait</a>) <a href="#42645" title="(sym: AddInterfaces.this.global.Symbol)AddInterfaces.this.global.Type">erasedTypeRef</a>(<a href="../symtab/Definitions.scala.html#28453" title="=&gt; AddInterfaces.this.global.Symbol">ObjectClass</a>) <a href="#129332" title="AddInterfaces.this.global.Type">::</a> <a href="#129298" title="List[AddInterfaces.this.global.Type]">parents</a>.<span title="(x: AddInterfaces.this.global.Type)List[AddInterfaces.this.global.Type]">tail</span>
          <span class="keyword">else</span> <a href="#129298" title="List[AddInterfaces.this.global.Type]">parents</a>
        }
      <span class="keyword">val</span> <a title="AddInterfaces.this.global.Scope" id="129304">decls1</a> = <a href="../symtab/Scopes.scala.html#27308" title="(p: (AddInterfaces.this.global.Symbol) =&gt; Boolean)AddInterfaces.this.global.Scope">decls</a> filter (<a title="AddInterfaces.this.global.Symbol" id="129346">sym</a> =&gt;
        <span title="Boolean" class="keyword">if</span> (<a href="../symtab/Symbols.scala.html#27155" title="(mask: Long)Boolean">clazz</a> hasFlag <span title="Long(128L)">INTERFACE</span>) <a href="#42652" title="(sym: AddInterfaces.this.global.Symbol)Boolean">isInterfaceMember</a>(<a href="#129346" title="AddInterfaces.this.global.Symbol">sym</a>)
        <span class="keyword">else</span> (<span title="(x$1: Boolean)Boolean">!</span><a href="#129346" title="AddInterfaces.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27055" title="=&gt; Boolean">isType</a> || <a href="#129346" title="AddInterfaces.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27056" title="=&gt; Boolean">isClass</a>))

      //if (!clazz.isPackageClass) System.out.println(&quot;Decls of &quot;+clazz+&quot; after explicitOuter = &quot; + decls1);//DEBUG
      //if ((parents1 eq parents) &amp;&amp; (decls1 eq decls)) tp
      //else 
      <a href="../symtab/Types.scala.html#44491" title="(parents: List[AddInterfaces.this.global.Type],decls: AddInterfaces.this.global.Scope,typeSymbol: AddInterfaces.this.global.Symbol)AddInterfaces.this.global.ClassInfoType">ClassInfoType</a>(<a href="#129303" title="List[AddInterfaces.this.global.Type]">parents1</a>, <a href="#129304" title="AddInterfaces.this.global.Scope">decls1</a>, <a href="#129300" title="AddInterfaces.this.global.Symbol">clazz</a>)
    <span title="AddInterfaces.this.global.Type" class="keyword">case</span> _ =&gt;
      <a href="#48478" title="AddInterfaces.this.global.Type">tp</a>
  }

// Tree transformation --------------------------------------------------------------

  <span class="keyword">private</span> <span class="keyword">class</span> <a title="class ChangeOwnerAndReturnTraverser extends AddInterfaces.this.global.ChangeOwnerTraverser with ScalaObject" id="42659">ChangeOwnerAndReturnTraverser</a><span title="ScalaObject">(</span><a title="AddInterfaces.this.global.Symbol" id="129401">oldowner</a>: <a href="../symtab/Symbols.scala.html#26286" title="AddInterfaces.this.global.Symbol">Symbol</a>, <a title="AddInterfaces.this.global.Symbol" id="129402">newowner</a>: <a href="../symtab/Symbols.scala.html#26286" title="AddInterfaces.this.global.Symbol">Symbol</a>)
          <span class="keyword">extends</span> <a href="../ast/Trees.scala.html#26939" title="AddInterfaces.this.global.ChangeOwnerTraverser">ChangeOwnerTraverser</a>(<a href="#129401" title="AddInterfaces.this.global.Symbol">oldowner</a>, <a href="#129402" title="AddInterfaces.this.global.Symbol">newowner</a>) {
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: AddInterfaces.this.global.Tree)Unit" id="129397">traverse</a>(<a title="AddInterfaces.this.global.Tree" id="129409">tree</a>: <a href="../ast/Trees.scala.html#26752" title="AddInterfaces.this.global.Tree">Tree</a>) {
      <a href="#129409" title="AddInterfaces.this.global.Tree">tree</a> <span title="Unit" class="keyword">match</span> {
        <span title="Unit" class="keyword">case</span> Return(<a title="AddInterfaces.this.global.Tree" id="129429">expr</a>) =&gt;
          <span title="Unit" class="keyword">if</span> (<a href="#129409" title="AddInterfaces.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="(x$1: AnyRef)Boolean">symbol</a> == <a href="../ast/Trees.scala.html#129386" title="=&gt; AddInterfaces.this.global.Symbol">oldowner</a>) <a href="#129409" title="AddInterfaces.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29554" title="(sym: AddInterfaces.this.global.Symbol)Unit">symbol</a> = <a href="../ast/Trees.scala.html#129388" title="=&gt; AddInterfaces.this.global.Symbol">newowner</a>
        <span title="Unit" class="keyword">case</span> _ =&gt;
      }
      <span class="keyword">super</span>.<a href="../ast/Trees.scala.html#129391" title="(tree: AddInterfaces.this.global.Tree)Unit">traverse</a>(<a href="#129409" title="AddInterfaces.this.global.Tree">tree</a>)
    }
  }

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tree: AddInterfaces.this.global.Tree)AddInterfaces.this.global.Tree" id="42660">ifaceMemberDef</a>(<a title="AddInterfaces.this.global.Tree" id="129448">tree</a>: <a href="../ast/Trees.scala.html#26752" title="AddInterfaces.this.global.Tree">Tree</a>): <a href="../ast/Trees.scala.html#26752" title="AddInterfaces.this.global.Tree">Tree</a> =
    <span title="AddInterfaces.this.global.Tree" class="keyword">if</span> (<span title="(x$1: Boolean)Boolean">!</span><a href="#129448" title="AddInterfaces.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29557" title="=&gt; Boolean">isDef</a> || <span title="=&gt; Boolean">!</span><a href="#42652" title="(sym: AddInterfaces.this.global.Symbol)Boolean">isInterfaceMember</a>(<a href="#129448" title="AddInterfaces.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; AddInterfaces.this.global.Symbol">symbol</a>)) <a href="../ast/Trees.scala.html#26761" title="object AddInterfaces.this.global.EmptyTree">EmptyTree</a>
    <span class="keyword">else</span> <span title="AddInterfaces.this.global.Tree" class="keyword">if</span> (<a href="#42653" title="(sym: AddInterfaces.this.global.Symbol)Boolean">needsImplMethod</a>(<a href="#129448" title="AddInterfaces.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; AddInterfaces.this.global.Symbol">symbol</a>)) <a href="../ast/Trees.scala.html#26791" title="(sym: AddInterfaces.this.global.Symbol,rhs: AddInterfaces.this.global.Tree)AddInterfaces.this.global.DefDef">DefDef</a>(<a href="#129448" title="AddInterfaces.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; AddInterfaces.this.global.Symbol">symbol</a>, <a href="../ast/Trees.scala.html#26761" title="object AddInterfaces.this.global.EmptyTree">EmptyTree</a>)
    <span class="keyword">else</span> <a href="#129448" title="AddInterfaces.this.global.Tree">tree</a>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(templ: AddInterfaces.this.global.Template)AddInterfaces.this.global.Template" id="42661">ifaceTemplate</a>(<a title="AddInterfaces.this.global.Template" id="55553">templ</a>: <a href="../ast/Trees.scala.html#26808" title="AddInterfaces.this.global.Template">Template</a>): <a href="../ast/Trees.scala.html#26808" title="AddInterfaces.this.global.Template">Template</a> =
    <a href="../ast/Trees.scala.html#26743" title="=&gt; AddInterfaces.this.global.LazyTreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#48851" title="(tree: AddInterfaces.this.global.Tree,parents: List[AddInterfaces.this.global.Tree],self: AddInterfaces.this.global.ValDef,body: List[AddInterfaces.this.global.Tree])AddInterfaces.this.global.Template">Template</a>(<a href="#55553" title="AddInterfaces.this.global.Template">templ</a>, <a href="#55553" title="AddInterfaces.this.global.Template">templ</a>.<a href="../ast/Trees.scala.html#52310" title="=&gt; List[AddInterfaces.this.global.Tree]">parents</a>, <a href="../ast/Trees.scala.html#26783" title="object AddInterfaces.this.global.emptyValDef">emptyValDef</a>, <a href="#55553" title="AddInterfaces.this.global.Template">templ</a>.<a href="../ast/Trees.scala.html#52314" title="(f: (AddInterfaces.this.global.Tree) =&gt; AddInterfaces.this.global.Tree)(implicit bf: scala.collection.generic.BuilderFactory[AddInterfaces.this.global.Tree,List[AddInterfaces.this.global.Tree],List[AddInterfaces.this.global.Tree]])List[AddInterfaces.this.global.Tree]">body</a> <span title="scala.collection.generic.BuilderFactory[AddInterfaces.this.global.Tree,List[AddInterfaces.this.global.Tree],List#Coll]">map</span> <a href="#42660" title="(tree: AddInterfaces.this.global.Tree)AddInterfaces.this.global.Tree">ifaceMemberDef</a>)

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tree: AddInterfaces.this.global.Tree,ifaceMethod: AddInterfaces.this.global.Symbol)AddInterfaces.this.global.Tree" id="42662">implMethodDef</a>(<a title="AddInterfaces.this.global.Tree" id="129589">tree</a>: <a href="../ast/Trees.scala.html#26752" title="AddInterfaces.this.global.Tree">Tree</a>, <a title="AddInterfaces.this.global.Symbol" id="129590">ifaceMethod</a>: <a href="../symtab/Symbols.scala.html#26286" title="AddInterfaces.this.global.Symbol">Symbol</a>): <a href="../ast/Trees.scala.html#26752" title="AddInterfaces.this.global.Tree">Tree</a> =
    <a href="#42649" title="=&gt; scala.collection.mutable.HashMap[AddInterfaces.this.global.Symbol,AddInterfaces.this.global.Symbol]">implMethodMap</a>.<span title="(key: AddInterfaces.this.global.Symbol)Option[AddInterfaces.this.global.Symbol]">get</span>(<a href="#129590" title="AddInterfaces.this.global.Symbol">ifaceMethod</a>) <span title="AddInterfaces.this.global.Tree" class="keyword">match</span> {
      <span title="AddInterfaces.this.global.Tree" class="keyword">case</span> Some(<a title="AddInterfaces.this.global.Symbol" id="129598">implMethod</a>) =&gt;
        <a href="#129589" title="AddInterfaces.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29554" title="(sym: AddInterfaces.this.global.Symbol)Unit">symbol</a> = <a href="#129598" title="AddInterfaces.this.global.Symbol">implMethod</a>
        <a href="../ast/Trees.scala.html#71113" title="(tree: AddInterfaces.this.global.Tree)AddInterfaces.this.global.Tree" class="keyword">new</a> <a href="#42659" title="AddInterfaces.this.ChangeOwnerAndReturnTraverser">ChangeOwnerAndReturnTraverser</a>(<a href="#129590" title="AddInterfaces.this.global.Symbol">ifaceMethod</a>, <a href="#129598" title="AddInterfaces.this.global.Symbol">implMethod</a>)(<a href="#129589" title="AddInterfaces.this.global.Tree">tree</a>)
      <span title="Nothing" class="keyword">case</span> <span title="object None">None</span> =&gt;
        <span title="Nothing" class="keyword">throw</span> <a title="(x$1: java.lang.String)java.lang.Error" id="26070" class="keyword">new</a> <a title="java.lang.Error" id="7890">Error</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;implMethod missing for &quot;</span> + <a href="#129590" title="AddInterfaces.this.global.Symbol">ifaceMethod</a>)
    }

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tree: AddInterfaces.this.global.Tree)AddInterfaces.this.global.Tree" id="42663">implMemberDef</a>(<a title="AddInterfaces.this.global.Tree" id="129624">tree</a>: <a href="../ast/Trees.scala.html#26752" title="AddInterfaces.this.global.Tree">Tree</a>): <a href="../ast/Trees.scala.html#26752" title="AddInterfaces.this.global.Tree">Tree</a> =
    <span title="AddInterfaces.this.global.Tree" class="keyword">if</span> (<span title="(x$1: Boolean)Boolean">!</span><a href="#129624" title="AddInterfaces.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29557" title="=&gt; Boolean">isDef</a> || <span title="=&gt; Boolean">!</span><a href="#42652" title="(sym: AddInterfaces.this.global.Symbol)Boolean">isInterfaceMember</a>(<a href="#129624" title="AddInterfaces.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; AddInterfaces.this.global.Symbol">symbol</a>)) <a href="#129624" title="AddInterfaces.this.global.Tree">tree</a>
    <span class="keyword">else</span> <span title="AddInterfaces.this.global.Tree" class="keyword">if</span> (<a href="#42653" title="(sym: AddInterfaces.this.global.Symbol)Boolean">needsImplMethod</a>(<a href="#129624" title="AddInterfaces.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; AddInterfaces.this.global.Symbol">symbol</a>)) <a href="#42662" title="(tree: AddInterfaces.this.global.Tree,ifaceMethod: AddInterfaces.this.global.Symbol)AddInterfaces.this.global.Tree">implMethodDef</a>(<a href="#129624" title="AddInterfaces.this.global.Tree">tree</a>, <a href="#129624" title="AddInterfaces.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; AddInterfaces.this.global.Symbol">symbol</a>)
    <span class="keyword">else</span> <a href="../ast/Trees.scala.html#26761" title="object AddInterfaces.this.global.EmptyTree">EmptyTree</a>

  /** Add mixin constructor definition 
   *    def $init$(): Unit = ()
   *  to `stats' unless there is already one.
   */
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(clazz: AddInterfaces.this.global.Symbol,stats: List[AddInterfaces.this.global.Tree])List[AddInterfaces.this.global.Tree]" id="42664">addMixinConstructorDef</a>(<a title="AddInterfaces.this.global.Symbol" id="129634">clazz</a>: <a href="../symtab/Symbols.scala.html#26286" title="AddInterfaces.this.global.Symbol">Symbol</a>, <a title="List[AddInterfaces.this.global.Tree]" id="129635">stats</a>: <span title="List[AddInterfaces.this.global.Tree]">List</span>[Tree]): <span title="List[AddInterfaces.this.global.Tree]">List</span>[Tree] = 
    <span title="List[AddInterfaces.this.global.Tree]" class="keyword">if</span> (<a href="../ast/Trees.scala.html#26741" title="object AddInterfaces.this.global.treeInfo">treeInfo</a>.<a href="../ast/TreeInfo.scala.html#49168" title="(stats: List[AddInterfaces.this.global.treeInfo.trees.Tree])AddInterfaces.this.global.treeInfo.trees.Tree">firstConstructor</a><span title="(x$1: AnyRef)Boolean">(</span><a href="#129635" title="List[AddInterfaces.this.global.Tree]">stats</a>) != <a href="../ast/Trees.scala.html#26761" title="object AddInterfaces.this.global.EmptyTree">EmptyTree</a>) <a href="#129635" title="List[AddInterfaces.this.global.Tree]">stats</a>
    <span class="keyword">else</span> <a href="../ast/Trees.scala.html#26791" title="(sym: AddInterfaces.this.global.Symbol,rhs: AddInterfaces.this.global.Tree)AddInterfaces.this.global.DefDef">DefDef</a>(<a href="#129634" title="AddInterfaces.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27192" title="=&gt; AddInterfaces.this.global.Symbol">primaryConstructor</a>, <a href="../ast/Trees.scala.html#49279" title="(stats: List[AddInterfaces.this.global.Tree],expr: AddInterfaces.this.global.Tree)AddInterfaces.this.global.Block">Block</a>(List<span title="object Nil">(</span>), <a href="../ast/Trees.scala.html#26899" title="(value: Any)AddInterfaces.this.global.Literal">Literal</a>(<span title="Unit">(</span>)))) <a href="#129649" title="AddInterfaces.this.global.DefDef">::</a> <a href="#129635" title="(x: AddInterfaces.this.global.Tree)List[AddInterfaces.this.global.Tree]">stats</a>
    
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(clazz: AddInterfaces.this.global.Symbol,templ: AddInterfaces.this.global.Template)AddInterfaces.this.global.Template" id="42665">implTemplate</a>(<a title="AddInterfaces.this.global.Symbol" id="129743">clazz</a>: <a href="../symtab/Symbols.scala.html#26286" title="AddInterfaces.this.global.Symbol">Symbol</a>, <a title="AddInterfaces.this.global.Template" id="129744">templ</a>: <a href="../ast/Trees.scala.html#26808" title="AddInterfaces.this.global.Template">Template</a>): <a href="../ast/Trees.scala.html#26808" title="AddInterfaces.this.global.Template">Template</a> = <a href="../ast/Trees.scala.html#26943" title="(pos: scala.tools.nsc.util.Position)(tree: AddInterfaces.this.global.Template)AddInterfaces.this.global.Template">atPos</a>(<a href="#129744" title="AddInterfaces.this.global.Template">templ</a>.<a href="../ast/Trees.scala.html#29547" title="=&gt; scala.tools.nsc.util.Position">pos</a>) {
    <span class="keyword">val</span> <a title="AddInterfaces.this.global.Template" id="129754">templ1</a> = <a href="../ast/Trees.scala.html#26943" title="(pos: scala.tools.nsc.util.Position)(tree: AddInterfaces.this.global.Template)AddInterfaces.this.global.Template">atPos</a>(<a href="#129744" title="AddInterfaces.this.global.Template">templ</a>.<a href="../ast/Trees.scala.html#29547" title="=&gt; scala.tools.nsc.util.Position">pos</a>) {
      <a href="../ast/Trees.scala.html#53761" title="(parents: List[AddInterfaces.this.global.Tree],self: AddInterfaces.this.global.ValDef,body: List[AddInterfaces.this.global.Tree])AddInterfaces.this.global.Template">Template</a>(<a href="#129744" title="AddInterfaces.this.global.Template">templ</a>.<a href="../ast/Trees.scala.html#52310" title="=&gt; List[AddInterfaces.this.global.Tree]">parents</a>, <a href="../ast/Trees.scala.html#26783" title="object AddInterfaces.this.global.emptyValDef">emptyValDef</a>, 
               <a href="#42664" title="(clazz: AddInterfaces.this.global.Symbol,stats: List[AddInterfaces.this.global.Tree])List[AddInterfaces.this.global.Tree]">addMixinConstructorDef</a>(<a href="#129743" title="AddInterfaces.this.global.Symbol">clazz</a>, <a href="#129744" title="AddInterfaces.this.global.Template">templ</a>.<a href="../ast/Trees.scala.html#52314" title="(f: (AddInterfaces.this.global.Tree) =&gt; AddInterfaces.this.global.Tree)(implicit bf: scala.collection.generic.BuilderFactory[AddInterfaces.this.global.Tree,List[AddInterfaces.this.global.Tree],List[AddInterfaces.this.global.Tree]])List[AddInterfaces.this.global.Tree]">body</a> <span title="scala.collection.generic.BuilderFactory[AddInterfaces.this.global.Tree,List[AddInterfaces.this.global.Tree],List#Coll]">map</span> <a href="#42663" title="(tree: AddInterfaces.this.global.Tree)AddInterfaces.this.global.Tree">implMemberDef</a>))
        .<a href="../ast/Trees.scala.html#29555" title="(sym: AddInterfaces.this.global.Symbol)AddInterfaces.this.global.Template">setSymbol</a>(<a href="#129743" title="AddInterfaces.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27025" title="(pos: scala.tools.nsc.util.Position)AddInterfaces.this.global.TermSymbol">newLocalDummy</a>(<a href="#129744" title="AddInterfaces.this.global.Template">templ</a>.<a href="../ast/Trees.scala.html#29547" title="=&gt; scala.tools.nsc.util.Position">pos</a>))
    }
    <a href="../ast/Trees.scala.html#71113" title="(tree: AddInterfaces.this.global.Template)AddInterfaces.this.global.Template" class="keyword">new</a> <a href="../ast/Trees.scala.html#26939" title="AddInterfaces.this.global.ChangeOwnerTraverser">ChangeOwnerTraverser</a>(<a href="#129744" title="AddInterfaces.this.global.Template">templ</a>.<a href="../ast/Trees.scala.html#48738" title="=&gt; AddInterfaces.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27142" title="=&gt; AddInterfaces.this.global.Symbol">owner</a>, <a href="#129743" title="AddInterfaces.this.global.Symbol">clazz</a>)(
      <a href="../ast/Trees.scala.html#71113" title="(tree: AddInterfaces.this.global.Template)AddInterfaces.this.global.Template" class="keyword">new</a> <a href="../ast/Trees.scala.html#26939" title="AddInterfaces.this.global.ChangeOwnerTraverser">ChangeOwnerTraverser</a>(<a href="#129744" title="AddInterfaces.this.global.Template">templ</a>.<a href="../ast/Trees.scala.html#48738" title="=&gt; AddInterfaces.this.global.Symbol">symbol</a>, <a href="#129754" title="AddInterfaces.this.global.Template">templ1</a>.<a href="../ast/Trees.scala.html#48738" title="=&gt; AddInterfaces.this.global.Symbol">symbol</a>)(<a href="#129754" title="AddInterfaces.this.global.Template">templ1</a>))
  }

  <span class="keyword">def</span> <a title="(trees: List[AddInterfaces.this.global.Tree])List[AddInterfaces.this.global.Tree]" id="42666">implClassDefs</a>(<a title="List[AddInterfaces.this.global.Tree]" id="55505">trees</a>: <span title="List[AddInterfaces.this.global.Tree]">List</span>[Tree]): <span title="List[AddInterfaces.this.global.Tree]">List</span>[Tree] = {
    <span class="keyword">val</span> <a title="scala.collection.mutable.ListBuffer[AddInterfaces.this.global.Tree]" id="129877">buf</a> = <span title="scala.collection.mutable.ListBuffer[AddInterfaces.this.global.Tree]" class="keyword">new</span> <a title="scala.collection.mutable.ListBuffer[AddInterfaces.this.global.Tree]" id="24978">ListBuffer</a>[Tree]
    <span class="keyword">for</span> (<a title="AddInterfaces.this.global.Tree" id="129896">tree</a> &lt;- <a href="#55505" title="(f: (AddInterfaces.this.global.Tree) =&gt; Any)Unit" id="29118">trees</a>)
      <a href="#129896" title="AddInterfaces.this.global.Tree">tree</a> <span title="Any" class="keyword">match</span> {
        <span title="Any" class="keyword">case</span> ClassDef(_, _, _, <a title="AddInterfaces.this.global.Template" id="129903">impl</a>) =&gt;
          <span title="Any" class="keyword">if</span> (<a href="#129896" title="AddInterfaces.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; AddInterfaces.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27122" title="=&gt; Boolean">needsImplClass</a>)
            <a href="#129877" title="(x: AddInterfaces.this.global.Tree)buf.type" id="61852">buf</a> += {
              <span class="keyword">val</span> <a title="AddInterfaces.this.global.Symbol" id="129935">clazz</a> = <a href="#42655" title="(iface: AddInterfaces.this.global.Symbol)AddInterfaces.this.global.Symbol">implClass</a>(<a href="#129896" title="AddInterfaces.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; AddInterfaces.this.global.Symbol">symbol</a>).<a href="../symtab/Symbols.scala.html#27169" title="=&gt; AddInterfaces.this.global.Symbol">initialize</a>
              <a href="../ast/Trees.scala.html#26771" title="(sym: AddInterfaces.this.global.Symbol,impl: AddInterfaces.this.global.Template)AddInterfaces.this.global.ClassDef">ClassDef</a>(<a href="#129935" title="AddInterfaces.this.global.Symbol">clazz</a>, <a href="#42665" title="(clazz: AddInterfaces.this.global.Symbol,templ: AddInterfaces.this.global.Template)AddInterfaces.this.global.Template">implTemplate</a>(<a href="#129935" title="AddInterfaces.this.global.Symbol">clazz</a>, <a href="#129903" title="AddInterfaces.this.global.Template">impl</a>))
            }
        <span title="Unit" class="keyword">case</span> _ =&gt;
      }
    <a href="#129877" title="scala.collection.mutable.ListBuffer[AddInterfaces.this.global.Tree]">buf</a>.<a title="=&gt; List[AddInterfaces.this.global.Tree]" id="61864">toList</a>
  }

  /** Add calls to supermixin constructors
   *  &lt;blockquote&gt;&lt;pre&gt;super[mix].$init$()&lt;/pre&gt;&lt;/blockquote&gt;
   *  to &lt;code&gt;tree&lt;/code&gt;. &lt;code&gt;tree&lt;/code&gt; which is assumed to be the body
   *  of a constructor of class &lt;code&gt;clazz&lt;/code&gt;.
   */
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tree: AddInterfaces.this.global.Tree,clazz: AddInterfaces.this.global.Symbol)AddInterfaces.this.global.Tree" id="42667">addMixinConstructorCalls</a>(<a title="AddInterfaces.this.global.Tree" id="55607">tree</a>: <a href="../ast/Trees.scala.html#26752" title="AddInterfaces.this.global.Tree">Tree</a>, <a title="AddInterfaces.this.global.Symbol" id="55608">clazz</a>: <a href="../symtab/Symbols.scala.html#26286" title="AddInterfaces.this.global.Symbol">Symbol</a>): <a href="../ast/Trees.scala.html#26752" title="AddInterfaces.this.global.Tree">Tree</a> = {
    <span class="keyword">def</span> <a title="(impl: AddInterfaces.this.global.Symbol)AddInterfaces.this.global.Tree" id="129994">mixinConstructorCall</a>(<a title="AddInterfaces.this.global.Symbol" id="129996">impl</a>: <a href="../symtab/Symbols.scala.html#26286" title="AddInterfaces.this.global.Symbol">Symbol</a>): <a href="../ast/Trees.scala.html#26752" title="AddInterfaces.this.global.Tree">Tree</a> = <a href="../ast/Trees.scala.html#26943" title="(pos: scala.tools.nsc.util.Position)(tree: AddInterfaces.this.global.Apply)AddInterfaces.this.global.Apply">atPos</a>(<a href="#55607" title="AddInterfaces.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29547" title="=&gt; scala.tools.nsc.util.Position">pos</a>) {
      <a href="../ast/Trees.scala.html#49378" title="(fun: AddInterfaces.this.global.Tree,args: List[AddInterfaces.this.global.Tree])AddInterfaces.this.global.Apply">Apply</a>(<a href="../ast/Trees.scala.html#26890" title="(qualifier: AddInterfaces.this.global.Tree,sym: AddInterfaces.this.global.Symbol)AddInterfaces.this.global.Select">Select</a>(<a href="../ast/Trees.scala.html#26886" title="(sym: AddInterfaces.this.global.Symbol)AddInterfaces.this.global.Tree">This</a>(<a href="#55608" title="AddInterfaces.this.global.Symbol">clazz</a>), <a href="#129996" title="AddInterfaces.this.global.Symbol">impl</a>.<a href="../symtab/Symbols.scala.html#27192" title="=&gt; AddInterfaces.this.global.Symbol">primaryConstructor</a>), List<span title="object Nil">(</span>))
    }
    <span class="keyword">val</span> <a title="List[AddInterfaces.this.global.Tree]" id="129995">mixinConstructorCalls</a>: <span title="List[AddInterfaces.this.global.Tree]">List</span>[Tree] = {
      <span class="keyword">for</span> (<a title="AddInterfaces.this.global.Symbol" id="130117">mc</a> &lt;- <a href="#55608" title="AddInterfaces.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27208" title="=&gt; List[AddInterfaces.this.global.Symbol]">mixinClasses</a>.<a title="(f: (AddInterfaces.this.global.Symbol) =&gt; AddInterfaces.this.global.Tree)(implicit bf: scala.collection.generic.BuilderFactory[AddInterfaces.this.global.Tree,List[AddInterfaces.this.global.Tree],List[AddInterfaces.this.global.Symbol]])List[AddInterfaces.this.global.Tree]" id="24460">reverse</a>
           <span class="keyword">if</span> <a href="#130117" title="AddInterfaces.this.global.Symbol">mc</a>.<a href="../symtab/Symbols.scala.html#27155" title="(mask: Long)Boolean">hasFlag</a><span title="(x$1: Boolean)Boolean">(</span><a href="../symtab/Flags.scala.html#28925" title="=&gt; Long">lateINTERFACE</a>) &amp;&amp; <a href="#130117" title="(x$1: AnyRef)Boolean">mc</a> != <a href="../symtab/Definitions.scala.html#28515" title="=&gt; AddInterfaces.this.global.Symbol">ScalaObjectClass</a>)
      <span class="keyword">yield</span> <a href="#129994" title="(impl: AddInterfaces.this.global.Symbol)AddInterfaces.this.global.Tree">mixinConstructorCall</a>(<a href="#42655" title="(iface: AddInterfaces.this.global.Symbol)AddInterfaces.this.global.Symbol">implClass</a>(<a href="#130117" title="AddInterfaces.this.global.Symbol">mc</a>))
    }
    (<a href="#55607" title="AddInterfaces.this.global.Tree">tree</a>: @<a href="../ast/Trees.scala.html#26752" title="AddInterfaces.this.global.Tree @unchecked">unchecked</a>) <span title="AddInterfaces.this.global.Tree" class="keyword">match</span> {
      <span title="AddInterfaces.this.global.Block" class="keyword">case</span> Block(<a title="List[AddInterfaces.this.global.Tree]" id="130150">stats</a>, <a title="AddInterfaces.this.global.Tree" id="130151">expr</a>) =&gt;
        // needs `hasSymbol' check because `supercall' could be a block (named / default args)
        <span class="keyword">val</span> <a href="#32875" title="(List[AddInterfaces.this.global.Tree], AddInterfaces.this.global.Tree, List[AddInterfaces.this.global.Tree])" id="411">(</a><a href="#130154" title="List[AddInterfaces.this.global.Tree]" id="32875">presuper</a>, <a href="#130154" title="AddInterfaces.this.global.Tree" id="32877">supercall</a> :: <a href="#130154" title="List[AddInterfaces.this.global.Tree]" id="32879">rest</a>) = <a href="#130150" title="(p: (AddInterfaces.this.global.Tree) =&gt; Boolean)(List[AddInterfaces.this.global.Tree], List[AddInterfaces.this.global.Tree])" id="24458">stats</a> <a title="(List[AddInterfaces.this.global.Tree], List[AddInterfaces.this.global.Tree]) @unchecked" id="1175">span</a> (<a title="AddInterfaces.this.global.Tree" id="130164">t</a> =&gt; <a href="#130164" title="AddInterfaces.this.global.Tree">t</a>.<a href="../ast/Trees.scala.html#29556" title="(x$1: Boolean)Boolean">hasSymbol</a> &amp;&amp; <a href="#130164" title="AddInterfaces.this.global.Tree">t</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; AddInterfaces.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27155" title="(mask: Long)Boolean">hasFlag</a>(<span title="Long(137438953472L)">PRESUPER</span>))
        //assert(supercall.symbol.isClassConstructor, supercall)
        <a href="../ast/Trees.scala.html#26743" title="=&gt; AddInterfaces.this.global.LazyTreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#48852" title="(tree: AddInterfaces.this.global.Tree,stats: List[AddInterfaces.this.global.Tree],expr: AddInterfaces.this.global.Tree)AddInterfaces.this.global.Block">Block</a>(<a href="#55607" title="AddInterfaces.this.global.Tree">tree</a>, <a href="#32875" title="List[AddInterfaces.this.global.Tree]">presuper</a> <a href="#130236" title="List[AddInterfaces.this.global.Tree]">:::</a> <span title="(prefix: List[AddInterfaces.this.global.Tree])List[AddInterfaces.this.global.Tree]">(</span><a href="#32877" title="AddInterfaces.this.global.Tree">supercall</a> <a href="#130237" title="AddInterfaces.this.global.Tree">::</a> <a href="#129995" title="List[AddInterfaces.this.global.Tree]">mixinConstructorCalls</a> <a href="#130238" title="(x: AddInterfaces.this.global.Tree)List[AddInterfaces.this.global.Tree]">:::</a> <a href="#32879" title="(prefix: List[AddInterfaces.this.global.Tree])List[AddInterfaces.this.global.Tree]">rest</a>), <a href="#130151" title="AddInterfaces.this.global.Tree">expr</a>)
    }
  }

  <span class="keyword">protected</span> <span class="keyword">val</span> <a title="AddInterfaces.this.global.Transformer" id="42668">mixinTransformer</a> = <a href="#55484" title="AddInterfaces.this.global.Transformer{ ... }" class="keyword">new</a> <a href="../ast/Trees.scala.html#26932" title="anonymous class $anon extends AddInterfaces.this.global.Transformer" id="55484">Transformer</a> {
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(stats: List[AddInterfaces.this.global.Tree],exprOwner: AddInterfaces.this.global.Symbol)List[AddInterfaces.this.global.Tree]" id="55486">transformStats</a>(<a title="List[AddInterfaces.this.global.Tree]" id="55491">stats</a>: <span title="List[AddInterfaces.this.global.Tree]">List</span>[Tree], <a title="AddInterfaces.this.global.Symbol" id="55492">exprOwner</a>: <a href="../symtab/Symbols.scala.html#26286" title="AddInterfaces.this.global.Symbol">Symbol</a>): <span title="List[AddInterfaces.this.global.Tree]">List</span>[Tree] =
      (<span class="keyword">super</span>.<a href="../ast/Trees.scala.html#45714" title="(stats: List[AddInterfaces.this.global.Tree],exprOwner: AddInterfaces.this.global.Symbol)List[AddInterfaces.this.global.Tree]">transformStats</a>(<a href="#55491" title="List[AddInterfaces.this.global.Tree]">stats</a>, <a href="#55492" title="AddInterfaces.this.global.Symbol">exprOwner</a>) <a href="#55498" title="List[AddInterfaces.this.global.Tree]">:::</a>
       <span class="keyword">super</span>.<a href="../ast/Trees.scala.html#45714" title="(stats: List[AddInterfaces.this.global.Tree],exprOwner: AddInterfaces.this.global.Symbol)List[AddInterfaces.this.global.Tree]">transformStats</a><span title="(prefix: List[AddInterfaces.this.global.Tree])List[AddInterfaces.this.global.Tree]">(</span><a href="#42666" title="(trees: List[AddInterfaces.this.global.Tree])List[AddInterfaces.this.global.Tree]">implClassDefs</a>(<a href="#55491" title="List[AddInterfaces.this.global.Tree]">stats</a>), <a href="#55492" title="AddInterfaces.this.global.Symbol">exprOwner</a>))
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: AddInterfaces.this.global.Tree)AddInterfaces.this.global.Tree" id="55487">transform</a>(<a title="AddInterfaces.this.global.Tree" id="55518">tree</a>: <a href="../ast/Trees.scala.html#26752" title="AddInterfaces.this.global.Tree">Tree</a>): <a href="../ast/Trees.scala.html#26752" title="AddInterfaces.this.global.Tree">Tree</a> = {
      <span class="keyword">val</span> <a title="AddInterfaces.this.global.Symbol" id="55520">sym</a> = <a href="#55518" title="AddInterfaces.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; AddInterfaces.this.global.Symbol">symbol</a>
      <span class="keyword">val</span> <a title="AddInterfaces.this.global.Tree" id="55521">tree1</a> = <a href="#55518" title="AddInterfaces.this.global.Tree">tree</a> <span title="AddInterfaces.this.global.Tree" class="keyword">match</span> {
        <span title="AddInterfaces.this.global.ClassDef" class="keyword">case</span> ClassDef(<a title="AddInterfaces.this.global.Modifiers" id="55528">mods</a>, <a title="AddInterfaces.this.global.Name" id="55529">name</a>, <a title="List[AddInterfaces.this.global.TypeDef]" id="55530">tparams</a>, <a title="AddInterfaces.this.global.Template" id="55531">impl</a>) <span class="keyword">if</span> (<a href="#55520" title="AddInterfaces.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27122" title="=&gt; Boolean">needsImplClass</a>) =&gt;
          <a href="#42655" title="(iface: AddInterfaces.this.global.Symbol)AddInterfaces.this.global.Symbol">implClass</a>(<a href="#55520" title="AddInterfaces.this.global.Symbol">sym</a>).<a href="../symtab/Symbols.scala.html#27169" title="=&gt; AddInterfaces.this.global.Symbol">initialize</a> // to force lateDEFERRED flags
          <a href="../ast/Trees.scala.html#45697" title="=&gt; AddInterfaces.this.global.TreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#48794" title="(tree: AddInterfaces.this.global.Tree,mods: AddInterfaces.this.global.Modifiers,name: AddInterfaces.this.global.Name,tparams: List[AddInterfaces.this.global.TypeDef],impl: AddInterfaces.this.global.Template)AddInterfaces.this.global.ClassDef">ClassDef</a>(<a href="#55518" title="AddInterfaces.this.global.Tree">tree</a>, <a href="../ast/Trees.scala.html#52303" title="(flag: Long)AddInterfaces.this.global.Modifiers">mods</a> | <span title="Long(128L)">INTERFACE</span>, <a href="#55529" title="AddInterfaces.this.global.Name">name</a>, <a href="#55530" title="List[AddInterfaces.this.global.TypeDef]">tparams</a>, <a href="#42661" title="(templ: AddInterfaces.this.global.Template)AddInterfaces.this.global.Template">ifaceTemplate</a>(<a href="#55531" title="AddInterfaces.this.global.Template">impl</a>))
        <span title="AddInterfaces.this.global.DefDef" class="keyword">case</span> DefDef(<a title="AddInterfaces.this.global.Modifiers" id="55567">mods</a>, <a title="AddInterfaces.this.global.Name" id="55568">name</a>, <a title="List[AddInterfaces.this.global.TypeDef]" id="55569">tparams</a>, <a title="List[List[AddInterfaces.this.global.ValDef]]" id="55570">vparamss</a>, <a title="AddInterfaces.this.global.Tree" id="55571">tpt</a>, <a title="AddInterfaces.this.global.Tree" id="55572">rhs</a>) 
        <span class="keyword">if</span> (<a href="#55520" title="AddInterfaces.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27073" title="(x$1: Boolean)Boolean">isClassConstructor</a> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> <a href="#55520" title="AddInterfaces.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27118" title="=&gt; Boolean">isPrimaryConstructor</a> &amp;&amp; <a href="#55520" title="AddInterfaces.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27142" title="(x$1: AnyRef)Boolean">owner</a> != <a href="../symtab/Definitions.scala.html#28579" title="=&gt; AddInterfaces.this.global.Symbol">ArrayClass</a>) =&gt;
          <a href="../ast/Trees.scala.html#45697" title="=&gt; AddInterfaces.this.global.TreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#48798" title="(tree: AddInterfaces.this.global.Tree,mods: AddInterfaces.this.global.Modifiers,name: AddInterfaces.this.global.Name,tparams: List[AddInterfaces.this.global.TypeDef],vparamss: List[List[AddInterfaces.this.global.ValDef]],tpt: AddInterfaces.this.global.Tree,rhs: AddInterfaces.this.global.Tree)AddInterfaces.this.global.DefDef">DefDef</a>(<a href="#55518" title="AddInterfaces.this.global.Tree">tree</a>, <a href="#55567" title="AddInterfaces.this.global.Modifiers">mods</a>, <a href="#55568" title="AddInterfaces.this.global.Name">name</a>, <a href="#55569" title="List[AddInterfaces.this.global.TypeDef]">tparams</a>, <a href="#55570" title="List[List[AddInterfaces.this.global.ValDef]]">vparamss</a>, <a href="#55571" title="AddInterfaces.this.global.Tree">tpt</a>, 
                      <a href="#42667" title="(tree: AddInterfaces.this.global.Tree,clazz: AddInterfaces.this.global.Symbol)AddInterfaces.this.global.Tree">addMixinConstructorCalls</a>(<a href="#55572" title="AddInterfaces.this.global.Tree">rhs</a>, <a href="#55520" title="AddInterfaces.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27142" title="=&gt; AddInterfaces.this.global.Symbol">owner</a>)) // (3)
        <span title="AddInterfaces.this.global.Template" class="keyword">case</span> Template(<a title="List[AddInterfaces.this.global.Tree]" id="55619">parents</a>, <a title="AddInterfaces.this.global.ValDef" id="55620">self</a>, <a title="List[AddInterfaces.this.global.Tree]" id="55621">body</a>) =&gt;
          <span class="keyword">val</span> <a title="List[AddInterfaces.this.global.TypeTree]" id="55624">parents1</a> = <a href="#55520" title="AddInterfaces.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27142" title="=&gt; AddInterfaces.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27163" title="=&gt; AddInterfaces.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#30375" title="(f: (AddInterfaces.this.global.Type) =&gt; AddInterfaces.this.global.TypeTree)(implicit bf: scala.collection.generic.BuilderFactory[AddInterfaces.this.global.TypeTree,List[AddInterfaces.this.global.TypeTree],List[AddInterfaces.this.global.Type]])List[AddInterfaces.this.global.TypeTree]">parents</a> <span title="scala.collection.generic.BuilderFactory[AddInterfaces.this.global.TypeTree,List[AddInterfaces.this.global.TypeTree],List#Coll]">map</span> (<a title="AddInterfaces.this.global.Type" id="55633">t</a> =&gt; <a href="../ast/Trees.scala.html#26903" title="(tp: AddInterfaces.this.global.Type)AddInterfaces.this.global.TypeTree">TypeTree</a><a href="../ast/Trees.scala.html#29551" title="(pos: scala.tools.nsc.util.Position)AddInterfaces.this.global.TypeTree">(</a><a href="#55633" title="AddInterfaces.this.global.Type">t</a>) setPos <a href="#55518" title="AddInterfaces.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29547" title="=&gt; scala.tools.nsc.util.Position">pos</a>)
          <a href="../ast/Trees.scala.html#45697" title="=&gt; AddInterfaces.this.global.TreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#48803" title="(tree: AddInterfaces.this.global.Tree,parents: List[AddInterfaces.this.global.Tree],self: AddInterfaces.this.global.ValDef,body: List[AddInterfaces.this.global.Tree])AddInterfaces.this.global.Template">Template</a>(<a href="#55518" title="AddInterfaces.this.global.Tree">tree</a>, <a href="#55624" title="List[AddInterfaces.this.global.TypeTree]">parents1</a>, <a href="../ast/Trees.scala.html#26783" title="object AddInterfaces.this.global.emptyValDef">emptyValDef</a>, <a href="#55621" title="List[AddInterfaces.this.global.Tree]">body</a>)
        <span title="AddInterfaces.this.global.Tree" class="keyword">case</span> This(_) =&gt;
          <span title="AddInterfaces.this.global.Tree" class="keyword">if</span> (<a href="#55520" title="AddInterfaces.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27122" title="=&gt; Boolean">needsImplClass</a>) {
            <span class="keyword">val</span> <a title="AddInterfaces.this.global.Symbol" id="55749">impl</a> = <a href="#42655" title="(iface: AddInterfaces.this.global.Symbol)AddInterfaces.this.global.Symbol">implClass</a>(<a href="#55520" title="AddInterfaces.this.global.Symbol">sym</a>)
            <span class="keyword">var</span> <a title="AddInterfaces.this.global.Symbol" id="55750">owner</a> = <a href="../ast/Trees.scala.html#45699" title="=&gt; AddInterfaces.this.global.Symbol">currentOwner</a>
            <span title="Unit" class="keyword">while</span> (<a href="#55750" title="(x$1: AnyRef)Boolean">owner</a> <span title="(x$1: Boolean)Boolean">!=</span> <a href="#55520" title="AddInterfaces.this.global.Symbol">sym</a> &amp;&amp; <a href="#55750" title="(x$1: AnyRef)Boolean">owner</a> != <a href="#55749" title="AddInterfaces.this.global.Symbol">impl</a>) <a href="#55750" title="AddInterfaces.this.global.Symbol">owner</a> = <a href="#55750" title="AddInterfaces.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27142" title="=&gt; AddInterfaces.this.global.Symbol">owner</a>;
            <span title="AddInterfaces.this.global.Tree" class="keyword">if</span> (<a href="#55750" title="(x$1: AnyRef)Boolean">owner</a> == <a href="#55749" title="AddInterfaces.this.global.Symbol">impl</a>) <a href="../ast/Trees.scala.html#26886" title="(sym: AddInterfaces.this.global.Symbol)AddInterfaces.this.global.Tree">This</a><a href="../ast/Trees.scala.html#29551" title="(pos: scala.tools.nsc.util.Position)AddInterfaces.this.global.Tree">(</a><a href="#55749" title="AddInterfaces.this.global.Symbol">impl</a>) setPos <a href="#55518" title="AddInterfaces.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29547" title="=&gt; scala.tools.nsc.util.Position">pos</a>
            <span class="keyword">else</span> <a href="#55518" title="AddInterfaces.this.global.Tree">tree</a>
          } <span class="keyword">else</span> <a href="#55518" title="AddInterfaces.this.global.Tree">tree</a>
/* !!!
        case Super(qual, mix) =&gt;
          val mix1 = mix
            if (mix == nme.EMPTY.toTypeName) mix
            else {
              val ps = atPhase(currentRun.erasurePhase) {
                sym.info.parents dropWhile (p =&gt; p.symbol.name != mix)
              }
              assert(!ps.isEmpty, tree);
              if (ps.head.symbol.needsImplClass) implClass(ps.head.symbol).name 
              else mix
            }
          if (sym.needsImplClass) Super(implClass(sym), mix1) setPos tree.pos
          else treeCopy.Super(tree, qual, mix1)
*/
        <span title="AddInterfaces.this.global.Tree" class="keyword">case</span> _ =&gt;
          <a href="#55518" title="AddInterfaces.this.global.Tree">tree</a>
      }
      <span class="keyword">super</span>.<a href="../ast/Trees.scala.html#45705" title="(tree: AddInterfaces.this.global.Tree)AddInterfaces.this.global.Tree">transform</a>(<a href="#55521" title="AddInterfaces.this.global.Tree">tree1</a>)
    }
  }
}
/*
    val ensureNoEscapes = new TypeTraverser {
      def ensureNoEscape(sym: Symbol) {
        if (sym.hasFlag(PRIVATE)) {
          var o = currentOwner;
          while (o != NoSymbol &amp;&amp; o != sym.owner &amp;&amp; !o.isLocal &amp;&amp; !o.hasFlag(PRIVATE))
          o = o.owner
          if (o == sym.owner) sym.makeNotPrivate(base);
        }
      }
      def traverse(t: Type): TypeTraverser = {
        t match {
          case TypeRef(qual, sym, args) =&gt;
            ensureNoEscape(sym)
            mapOver(t)
          case ClassInfoType(parents, decls, clazz) =&gt;
            parents foreach { p =&gt; traverse; () }
            traverse(t.typeOfThis)
          case _ =&gt; 
            mapOver(t)
        }
        this
      }
    }

*/

        </pre>
    </body>
</html>