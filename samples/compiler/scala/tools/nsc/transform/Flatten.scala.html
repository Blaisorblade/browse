<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/transform/Flatten.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style">
    </head>
    <body>
        <pre>
/* NSC -- new Scala compiler
 * Copyright 2005-2009 LAMP/EPFL
 * @author Martin Odersky
 */
// $Id: Flatten.scala 18546 2009-08-22 18:48:25Z extempore $

<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> transform

<span class="keyword">import</span> symtab._
<span class="keyword">import</span> Flags._
<span class="keyword">import</span> scala.collection.mutable.{HashMap, ListBuffer}

<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class Flatten extends scala.tools.nsc.SubComponent with scala.tools.nsc.transform.InfoTransform with ScalaObject" id="13552">Flatten</a> <span title="ScalaObject" class="keyword">extends</span> <a href="InfoTransform.scala.html#13951" title="scala.tools.nsc.transform.InfoTransform">InfoTransform</a> {
  <span class="keyword">import</span> global._
  <span class="keyword">import</span> definitions._

  /** the following two members override abstract members in Transform */
  <span class="keyword">val</span> <a title="String" id="78374">phaseName</a>: <a title="String" id="1605">String</a> = <span title="java.lang.String(&quot;flatten&quot;)" class="string">&quot;flatten&quot;</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: Flatten.this.global.Symbol)Unit" id="78376">liftClass</a>(<a title="Flatten.this.global.Symbol" id="78547">sym</a>: <a href="../symtab/Symbols.scala.html#26127" title="Flatten.this.global.Symbol">Symbol</a>) {
    <span title="Unit" class="keyword">if</span> (<span title="=&gt; Boolean">!</span>(<a href="../symtab/Symbols.scala.html#26996" title="(mask: Long)Boolean">sym</a> hasFlag <span title="Long(17179869184L)">LIFTED</span>)) {
      <a href="../symtab/Symbols.scala.html#26993" title="(mask: Long)sym.type">sym</a> setFlag <span title="Long(17179869184L)">LIFTED</span>
      <a href="../symtab/SymbolTable.scala.html#26097" title="(ph: scala.tools.nsc.Phase)(op: =&gt; Flatten.this.global.Symbol)Flatten.this.global.Symbol">atPhase</a>(<a href="../symtab/SymbolTable.scala.html#26088" title="=&gt; scala.tools.nsc.Phase">phase</a>.<a href="../Phase.scala.html#23158" title="=&gt; scala.tools.nsc.Phase">next</a>) <span title="Unit">{</span>
        <span title="Unit" class="keyword">if</span> (<a href="../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../Settings.scala.html#37759" title="=&gt; Boolean">value</a>) <a href="../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;re-enter &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#78547" title="Flatten.this.global.Symbol">sym</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; in &quot;)" class="string">&quot; in &quot;</span> + <a href="#78547" title="Flatten.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26983" title="=&gt; Flatten.this.global.Symbol">owner</a>)
        <a title="(assertion: Boolean,message: =&gt; Any)Unit" id="7876">assert</a>(<a href="#78547" title="Flatten.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26983" title="=&gt; Flatten.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#26935" title="=&gt; Boolean">isPackageClass</a>, <a href="#78547" title="Flatten.this.global.Symbol">sym</a>) //debug
        <span class="keyword">val</span> <a title="Flatten.this.global.Scope" id="78754">scope</a> = <a href="#78547" title="Flatten.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26983" title="=&gt; Flatten.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27004" title="=&gt; Flatten.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#30210" title="=&gt; Flatten.this.global.Scope">decls</a>
        <span class="keyword">val</span> <a title="Flatten.this.global.Symbol" id="78755">old</a> = <a href="../symtab/Scopes.scala.html#27138" title="(name: Flatten.this.global.Name)Flatten.this.global.Symbol">scope</a> lookup <a href="#78547" title="Flatten.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26988" title="=&gt; Flatten.this.global.Name">name</a>
        <span title="Unit" class="keyword">if</span> (<a href="#78755" title="(x$1: AnyRef)Boolean" id="6540">old</a> != <a href="../symtab/Symbols.scala.html#26134" title="object Flatten.this.global.NoSymbol">NoSymbol</a>) <a href="../symtab/Scopes.scala.html#27137" title="(sym: Flatten.this.global.Symbol)Unit">scope</a> unlink <a href="#78755" title="Flatten.this.global.Symbol">old</a>
        <a href="../symtab/Scopes.scala.html#27131" title="(sym: Flatten.this.global.Symbol)Flatten.this.global.Symbol">scope</a> enter <a href="#78547" title="Flatten.this.global.Symbol">sym</a>
      }
    }
  }

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="Flatten.this.global.TypeMap" id="78377">flattened</a> = <a href="#78383" title="Flatten.this.global.TypeMap{ ... }" class="keyword">new</a> <a href="../symtab/Types.scala.html#26320" title="anonymous class $anon extends Flatten.this.global.TypeMap" id="78383">TypeMap</a> {
    <span class="keyword">def</span> <a title="(tp: Flatten.this.global.Type)Flatten.this.global.Type" id="78385">apply</a>(<a title="Flatten.this.global.Type" id="78389">tp</a>: <a href="../symtab/Types.scala.html#26205" title="Flatten.this.global.Type">Type</a>): <a href="../symtab/Types.scala.html#26205" title="Flatten.this.global.Type">Type</a> = <a href="#78389" title="Flatten.this.global.Type">tp</a> <span title="Flatten.this.global.Type" class="keyword">match</span> {
      <span title="Flatten.this.global.Type" class="keyword">case</span> TypeRef(<a title="Flatten.this.global.Type" id="78394">pre</a>, <a title="Flatten.this.global.Symbol" id="78395">sym</a>, <a title="List[Flatten.this.global.Type]" id="78396">args</a>) <span class="keyword">if</span> (<a href="#78394" title="Flatten.this.global.Type">pre</a>.<a href="../symtab/Types.scala.html#30180" title="=&gt; Flatten.this.global.Symbol">typeSymbol</a>.<a href="../symtab/Symbols.scala.html#26897" title="(x$1: Boolean)Boolean">isClass</a> &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#78394" title="Flatten.this.global.Type">pre</a>.<a href="../symtab/Types.scala.html#30180" title="=&gt; Flatten.this.global.Symbol">typeSymbol</a>.<a href="../symtab/Symbols.scala.html#26935" title="=&gt; Boolean">isPackageClass</a>) =&gt;
        <a title="(assertion: Boolean)Unit" id="7874">assert</a>(<a href="#78396" title="List[Flatten.this.global.Type]">args</a>.<a title="=&gt; Boolean" id="25434">isEmpty</a>)
        <a href="../symtab/Types.scala.html#26295" title="(pre: Flatten.this.global.Type,sym: Flatten.this.global.Symbol,args: List[Flatten.this.global.Type])Flatten.this.global.Type">typeRef</a>(<a href="#78395" title="Flatten.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27051" title="=&gt; Flatten.this.global.Symbol">toplevelClass</a>.<a href="../symtab/Symbols.scala.html#26983" title="=&gt; Flatten.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27037" title="=&gt; Flatten.this.global.Type">thisType</a>, <a href="#78395" title="Flatten.this.global.Symbol">sym</a>, <a href="#78396" title="List[Flatten.this.global.Type]">args</a>)
      <span title="Flatten.this.global.ClassInfoType" class="keyword">case</span> ClassInfoType(<a title="List[Flatten.this.global.Type]" id="78415">parents</a>, <a title="Flatten.this.global.Scope" id="78416">decls</a>, <a title="Flatten.this.global.Symbol" id="78417">clazz</a>) =&gt;
        <span class="keyword">var</span> <a title="List[Flatten.this.global.Type]" id="78420">parents1</a> = <a href="#78415" title="List[Flatten.this.global.Type]">parents</a>
        <span class="keyword">val</span> <a title="Flatten.this.global.Scope" id="78421">decls1</a> = <a href="../symtab/Scopes.scala.html#25966" title="=&gt; Flatten.this.global.Scope">newScope</a>
        <span title="Unit" class="keyword">if</span> (<a href="#78417" title="Flatten.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#26935" title="=&gt; Boolean">isPackageClass</a>) {
          <a href="../symtab/SymbolTable.scala.html#26097" title="(ph: scala.tools.nsc.Phase)(op: =&gt; Unit)Unit">atPhase</a>(<a href="../symtab/SymbolTable.scala.html#26088" title="=&gt; scala.tools.nsc.Phase">phase</a>.<a href="../Phase.scala.html#23158" title="=&gt; scala.tools.nsc.Phase">next</a>)(<a href="#78416" title="Flatten.this.global.Scope">decls</a>.<a href="../symtab/Scopes.scala.html#27144" title="(f: (Flatten.this.global.Symbol) =&gt; Flatten.this.global.Symbol)Unit">toList</a> foreach (<a title="Flatten.this.global.Symbol" id="78457">sym</a> =&gt; <a href="../symtab/Scopes.scala.html#27131" title="(sym: Flatten.this.global.Symbol)Flatten.this.global.Symbol">decls1</a> enter <a href="#78457" title="Flatten.this.global.Symbol">sym</a>))
        } <span class="keyword">else</span> {
          <span class="keyword">val</span> <a title="Flatten.this.global.Symbol" id="78476">oldowner</a> = <a href="#78417" title="Flatten.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#26983" title="=&gt; Flatten.this.global.Symbol">owner</a>
          <a href="../symtab/SymbolTable.scala.html#26097" title="(ph: scala.tools.nsc.Phase)(op: =&gt; Flatten.this.global.Type)Flatten.this.global.Type">atPhase</a>(<a href="../symtab/SymbolTable.scala.html#26088" title="=&gt; scala.tools.nsc.Phase">phase</a>.<a href="../Phase.scala.html#23158" title="=&gt; scala.tools.nsc.Phase">next</a>)(<a href="#78476" title="Flatten.this.global.Symbol">oldowner</a>.<a href="../symtab/Symbols.scala.html#27004" title="=&gt; Flatten.this.global.Type">info</a>)
          <a href="#78420" title="List[Flatten.this.global.Type]">parents1</a> = <a href="#78415" title="(f: (Flatten.this.global.Type) =&gt; Flatten.this.global.Type)List[Flatten.this.global.Type]" id="24270">parents</a> mapConserve (<a href="#78383" title="Flatten.this.global.TypeMap{ ... }" class="keyword">this</a>)
          <span class="keyword">for</span> (<a title="Flatten.this.global.Symbol" id="78512">sym</a> &lt;- <a href="#78416" title="Flatten.this.global.Scope">decls</a>.<a href="../symtab/Scopes.scala.html#27144" title="(f: (Flatten.this.global.Symbol) =&gt; Any)Unit">toList</a>) {
            <span title="Any" class="keyword">if</span> (<a href="#78512" title="Flatten.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26895" title="(x$1: Boolean)Boolean">isTerm</a> &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#78512" title="Flatten.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26918" title="=&gt; Boolean">isStaticModule</a>) {
              <a href="../symtab/Scopes.scala.html#27131" title="(sym: Flatten.this.global.Symbol)Flatten.this.global.Symbol">decls1</a> enter <a href="#78512" title="Flatten.this.global.Symbol">sym</a>
              <span title="Any" class="keyword">if</span> (<a href="#78512" title="Flatten.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26917" title="=&gt; Boolean">isModule</a>) <a href="#78512" title="Flatten.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26993" title="(mask: Long)Flatten.this.global.Symbol">moduleClass</a> setFlag <span title="Long(17179869184L)">LIFTED</span>
            } <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<a href="#78512" title="Flatten.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26897" title="=&gt; Boolean">isClass</a>) {
              <a href="#78376" title="(sym: Flatten.this.global.Symbol)Unit">liftClass</a>(<a href="#78512" title="Flatten.this.global.Symbol">sym</a>)
              <span title="Unit" class="keyword">if</span> (<a href="#78512" title="Flatten.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26963" title="=&gt; Boolean">needsImplClass</a>) <a href="#78376" title="(sym: Flatten.this.global.Symbol)Unit">liftClass</a>(<a href="../Global.scala.html#39123" title="object Flatten.this.global.erasure">erasure</a>.<a href="AddInterfaces.scala.html#42423" title="(iface: Flatten.this.global.erasure.global.Symbol)Flatten.this.global.erasure.global.Symbol">implClass</a>(<a href="#78512" title="Flatten.this.global.Symbol">sym</a>))
            }
          }
        }
        <a href="../symtab/Types.scala.html#44259" title="(parents: List[Flatten.this.global.Type],decls: Flatten.this.global.Scope,typeSymbol: Flatten.this.global.Symbol)Flatten.this.global.ClassInfoType">ClassInfoType</a>(<a href="#78420" title="List[Flatten.this.global.Type]">parents1</a>, <a href="#78421" title="Flatten.this.global.Scope">decls1</a>, <a href="#78417" title="Flatten.this.global.Symbol">clazz</a>)
      <span title="Flatten.this.global.Type" class="keyword">case</span> MethodType(<a title="List[Flatten.this.global.Symbol]" id="78615">params</a>, <a title="Flatten.this.global.Type" id="78616">restp</a>) =&gt;
        <span class="keyword">val</span> <a title="Flatten.this.global.Type" id="78619">restp1</a> = <a href="#78385" title="(tp: Flatten.this.global.Type)Flatten.this.global.Type">apply</a>(<a href="#78616" title="Flatten.this.global.Type">restp</a>)
        <span title="Flatten.this.global.Type" class="keyword">if</span> (<a href="#78619" title="(x$1: AnyRef)Boolean">restp1</a> eq <a href="#78616" title="Flatten.this.global.Type">restp</a>) <a href="#78389" title="Flatten.this.global.Type">tp</a> <span class="keyword">else</span> <a href="../symtab/Types.scala.html#26299" title="(tp: Flatten.this.global.Type,params: List[Flatten.this.global.Symbol],restpe: Flatten.this.global.Type)Flatten.this.global.Type">copyMethodType</a>(<a href="#78389" title="Flatten.this.global.Type">tp</a>, <a href="#78615" title="List[Flatten.this.global.Symbol]">params</a>, <a href="#78619" title="Flatten.this.global.Type">restp1</a>)
      <span title="Flatten.this.global.Type" class="keyword">case</span> PolyType(<a title="List[Flatten.this.global.Symbol]" id="78636">tparams</a>, <a title="Flatten.this.global.Type" id="78637">restp</a>) =&gt;
        <span class="keyword">val</span> <a title="Flatten.this.global.Type" id="78640">restp1</a> = <a href="#78385" title="(tp: Flatten.this.global.Type)Flatten.this.global.Type">apply</a>(<a href="#78637" title="Flatten.this.global.Type">restp</a>);
        <span title="Flatten.this.global.Type" class="keyword">if</span> (<a href="#78640" title="(x$1: AnyRef)Boolean">restp1</a> eq <a href="#78637" title="Flatten.this.global.Type">restp</a>) <a href="#78389" title="Flatten.this.global.Type">tp</a> <span class="keyword">else</span> <a href="../symtab/Types.scala.html#43825" title="(typeParams: List[Flatten.this.global.Symbol],resultType: Flatten.this.global.Type)Flatten.this.global.PolyType">PolyType</a>(<a href="#78636" title="List[Flatten.this.global.Symbol]">tparams</a>, <a href="#78640" title="Flatten.this.global.Type">restp1</a>)
      <span title="Flatten.this.global.Type" class="keyword">case</span> _ =&gt;
        <a href="../symtab/Types.scala.html#42722" title="(tp: Flatten.this.global.Type)Flatten.this.global.Type">mapOver</a>(<a href="#78389" title="Flatten.this.global.Type">tp</a>)
    }
  }

  <span class="keyword">def</span> <a title="(sym: Flatten.this.global.Symbol,tp: Flatten.this.global.Type)Flatten.this.global.Type" id="78379">transformInfo</a>(<a title="Flatten.this.global.Symbol" id="78812">sym</a>: <a href="../symtab/Symbols.scala.html#26127" title="Flatten.this.global.Symbol">Symbol</a>, <a title="Flatten.this.global.Type" id="78813">tp</a>: <a href="../symtab/Types.scala.html#26205" title="Flatten.this.global.Type">Type</a>): <a href="../symtab/Types.scala.html#26205" title="Flatten.this.global.Type">Type</a> = <a href="#78377" title="(v1: Flatten.this.global.Type)Flatten.this.global.Type">flattened</a>(<a href="#78813" title="Flatten.this.global.Type">tp</a>)

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(unit: Flatten.this.global.CompilationUnit)Flatten.this.global.Transformer" id="78380">newTransformer</a>(<a title="Flatten.this.global.CompilationUnit" id="78820">unit</a>: <a href="../CompilationUnits.scala.html#39196" title="Flatten.this.global.CompilationUnit">CompilationUnit</a>): <a href="../ast/Trees.scala.html#26773" title="Flatten.this.global.Transformer">Transformer</a> = <span title="Flatten.this.Flattener" class="keyword">new</span> <a href="#78381" title="Flatten.this.Flattener">Flattener</a>

  <span class="keyword">class</span> <a title="class Flattener extends Flatten.this.global.Transformer with ScalaObject" id="78381">Flattener</a> <span title="ScalaObject" class="keyword">extends</span> <a href="../ast/Trees.scala.html#26773" title="Flatten.this.global.Transformer">Transformer</a> {

    /** Buffers for lifted out classes */ 
    <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.mutable.HashMap[Flatten.this.global.Symbol,scala.collection.mutable.ListBuffer[Flatten.this.global.Tree]]" id="78824">liftedDefs</a> = <span title="scala.collection.mutable.HashMap[Flatten.this.global.Symbol,scala.collection.mutable.ListBuffer[Flatten.this.global.Tree]]" class="keyword">new</span> <a title="scala.collection.mutable.HashMap[Flatten.this.global.Symbol,scala.collection.mutable.ListBuffer[Flatten.this.global.Tree]]" id="24954">HashMap</a>[Symbol, ListBuffer[Tree]]

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: Flatten.this.global.Tree)Flatten.this.global.Tree" id="78826">transform</a>(<a title="Flatten.this.global.Tree" id="78836">tree</a>: <a href="../ast/Trees.scala.html#26593" title="Flatten.this.global.Tree">Tree</a>): <a href="../ast/Trees.scala.html#26593" title="Flatten.this.global.Tree">Tree</a> = {
      <a href="#78836" title="Flatten.this.global.Tree">tree</a> <span title="Unit" class="keyword">match</span> {
        <span title="Unit" class="keyword">case</span> PackageDef(_, _) =&gt;
          <a href="#78824" title="(key: Flatten.this.global.Symbol,value: scala.collection.mutable.ListBuffer[Flatten.this.global.Tree])Unit">liftedDefs</a>(<a href="#78836" title="Flatten.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; Flatten.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27059" title="=&gt; Flatten.this.global.Symbol">moduleClass</a>) = <span title="scala.collection.mutable.ListBuffer[Flatten.this.global.Tree]" class="keyword">new</span> <span title="scala.collection.mutable.ListBuffer[Flatten.this.global.Tree]">ListBuffer</span>
        <span title="Unit" class="keyword">case</span> Template(_, _, _) <span class="keyword">if</span> (<a href="#78836" title="Flatten.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; Flatten.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#26983" title="=&gt; Flatten.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#26996" title="(mask: Long)Boolean">hasFlag</a>(<span title="Long(16384L)">PACKAGE</span>)) =&gt;
          <a href="#78824" title="(key: Flatten.this.global.Symbol,value: scala.collection.mutable.ListBuffer[Flatten.this.global.Tree])Unit">liftedDefs</a>(<a href="#78836" title="Flatten.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; Flatten.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#26983" title="=&gt; Flatten.this.global.Symbol">owner</a>) = <span title="scala.collection.mutable.ListBuffer[Flatten.this.global.Tree]" class="keyword">new</span> <span title="scala.collection.mutable.ListBuffer[Flatten.this.global.Tree]">ListBuffer</span>
        <span title="Unit" class="keyword">case</span> _ =&gt;
      }
      <a href="#78827" title="(tree: Flatten.this.global.Tree)Flatten.this.global.Tree">postTransform</a>(<span class="keyword">super</span>.<a href="../ast/Trees.scala.html#45473" title="(tree: Flatten.this.global.Tree)Flatten.this.global.Tree">transform</a>(<a href="#78836" title="Flatten.this.global.Tree">tree</a>))
    }

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tree: Flatten.this.global.Tree)Flatten.this.global.Tree" id="78827">postTransform</a>(<a title="Flatten.this.global.Tree" id="78905">tree</a>: <a href="../ast/Trees.scala.html#26593" title="Flatten.this.global.Tree">Tree</a>): <a href="../ast/Trees.scala.html#26593" title="Flatten.this.global.Tree">Tree</a> = {
      <span class="keyword">val</span> <a title="Flatten.this.global.Symbol" id="78913">sym</a> = <a href="#78905" title="Flatten.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; Flatten.this.global.Symbol">symbol</a>
      <span class="keyword">val</span> <a title="Flatten.this.global.gen.global.Tree" id="78914">tree1</a> = <a href="#78905" title="Flatten.this.global.Tree">tree</a> <span title="Flatten.this.global.gen.global.Tree" class="keyword">match</span> {
        <span title="Flatten.this.global.EmptyTree.type" class="keyword">case</span> ClassDef(_, _, _, _) <span class="keyword">if</span> <a href="#78913" title="Flatten.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26973" title="=&gt; Boolean">isNestedClass</a> =&gt;
          <a href="#78824" title="(key: Flatten.this.global.Symbol)scala.collection.mutable.ListBuffer[Flatten.this.global.Tree]">liftedDefs</a><a title="(x: Flatten.this.global.Tree)scala.collection.mutable.ListBuffer[Flatten.this.global.Tree]" id="61580">(</a><a href="#78913" title="Flatten.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27051" title="=&gt; Flatten.this.global.Symbol">toplevelClass</a>.<a href="../symtab/Symbols.scala.html#26983" title="=&gt; Flatten.this.global.Symbol">owner</a>) += <a href="#78905" title="Flatten.this.global.Tree">tree</a>
          <a href="../ast/Trees.scala.html#26602" title="object Flatten.this.global.EmptyTree">EmptyTree</a>
        <span title="Flatten.this.global.gen.global.Tree" class="keyword">case</span> Select(<a title="Flatten.this.global.Tree" id="78989">qual</a>, <a title="Flatten.this.global.Name" id="78990">name</a>) <span class="keyword">if</span> (<a href="#78913" title="Flatten.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26918" title="(x$1: Boolean)Boolean">isStaticModule</a> &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#78913" title="Flatten.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26983" title="=&gt; Flatten.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#26935" title="=&gt; Boolean">isPackageClass</a>) =&gt;
          <a href="../symtab/SymbolTable.scala.html#26097" title="(ph: scala.tools.nsc.Phase)(op: =&gt; Flatten.this.global.gen.global.Tree)Flatten.this.global.gen.global.Tree">atPhase</a>(<a href="../symtab/SymbolTable.scala.html#26088" title="=&gt; scala.tools.nsc.Phase">phase</a>.<a href="../Phase.scala.html#23158" title="=&gt; scala.tools.nsc.Phase">next</a>) {
            <a href="../ast/Trees.scala.html#26784" title="(pos: scala.tools.nsc.util.Position)(tree: Flatten.this.global.gen.global.Tree)Flatten.this.global.gen.global.Tree">atPos</a>(<a href="#78905" title="Flatten.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29361" title="=&gt; scala.tools.nsc.util.Position">pos</a>) {
              <a href="../Global.scala.html#39031" title="object Flatten.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#42676" title="(sym: Flatten.this.global.gen.global.Symbol)Flatten.this.global.gen.global.Tree">mkAttributedRef</a>(<a href="#78913" title="Flatten.this.global.Symbol">sym</a>)
            }
          }
        <span title="Flatten.this.global.Tree" class="keyword">case</span> _ =&gt;
          <a href="#78905" title="Flatten.this.global.Tree">tree</a>
      }
      <a href="../ast/Trees.scala.html#29366" title="(tp: Flatten.this.global.gen.global.Type)tree1.type">tree1</a> setType <a href="#78377" title="(v1: Flatten.this.global.Type)Flatten.this.global.Type">flattened</a>(<a href="#78914" title="Flatten.this.global.gen.global.Tree">tree1</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; Flatten.this.global.gen.global.Type">tpe</a>)
    }

    /** Transform statements and add lifted definitions to them. */
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(stats: List[Flatten.this.global.Tree],exprOwner: Flatten.this.global.Symbol)List[Flatten.this.global.Tree]" id="78828">transformStats</a>(<a title="List[Flatten.this.global.Tree]" id="79032">stats</a>: <span title="List[Flatten.this.global.Tree]">List</span>[Tree], <a title="Flatten.this.global.Symbol" id="79033">exprOwner</a>: <a href="../symtab/Symbols.scala.html#26127" title="Flatten.this.global.Symbol">Symbol</a>): <span title="List[Flatten.this.global.Tree]">List</span>[Tree] = {
      <span class="keyword">val</span> <a title="List[Flatten.this.global.Tree]" id="79037">stats1</a> = <span class="keyword">super</span>.<a href="../ast/Trees.scala.html#45482" title="(stats: List[Flatten.this.global.Tree],exprOwner: Flatten.this.global.Symbol)List[Flatten.this.global.Tree]">transformStats</a>(<a href="#79032" title="List[Flatten.this.global.Tree]">stats</a>, <a href="#79033" title="Flatten.this.global.Symbol">exprOwner</a>)
      <span title="List[Flatten.this.global.Tree]" class="keyword">if</span> (<a href="../ast/Trees.scala.html#45467" title="=&gt; Flatten.this.global.Symbol">currentOwner</a>.<a href="../symtab/Symbols.scala.html#26935" title="=&gt; Boolean">isPackageClass</a>) <a href="#79037" title="List[Flatten.this.global.Tree]">stats1</a> <a href="#79043" title="List[Flatten.this.global.Tree]">:::</a> <a href="#78824" title="(key: Flatten.this.global.Symbol)scala.collection.mutable.ListBuffer[Flatten.this.global.Tree]">liftedDefs</a>(<a href="../ast/Trees.scala.html#45467" title="=&gt; Flatten.this.global.Symbol">currentOwner</a>).<a title="(prefix: List[Flatten.this.global.Tree])List[Flatten.this.global.Tree]" id="61592">toList</a>
      <span class="keyword">else</span> <a href="#79037" title="List[Flatten.this.global.Tree]">stats1</a>
    }
  }
}

        </pre>
    </body>
</html>