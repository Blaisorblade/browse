<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/transform/Flatten.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style">
    </head>
    <body>
        <pre>
/* NSC -- new Scala compiler
 * Copyright 2005-2009 LAMP/EPFL
 * @author Martin Odersky
 */
// $Id: Flatten.scala 18546 2009-08-22 18:48:25Z extempore $

<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> transform

<span class="keyword">import</span> symtab._
<span class="keyword">import</span> Flags._
<span class="keyword">import</span> scala.collection.mutable.{HashMap, ListBuffer}

<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class Flatten extends scala.tools.nsc.SubComponent with scala.tools.nsc.transform.InfoTransform with ScalaObject" id="13627">Flatten</a> <span title="ScalaObject" class="keyword">extends</span> <a href="InfoTransform.scala.html#14026" title="scala.tools.nsc.transform.InfoTransform">InfoTransform</a> {
  <span class="keyword">import</span> global._
  <span class="keyword">import</span> definitions._

  /** the following two members override abstract members in Transform */
  <span class="keyword">val</span> <a title="String" id="78664">phaseName</a>: <a title="String" id="1626">String</a> = <span title="java.lang.String(&quot;flatten&quot;)" class="string">&quot;flatten&quot;</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: Flatten.this.global.Symbol)Unit" id="78666">liftClass</a>(<a title="Flatten.this.global.Symbol" id="78837">sym</a>: <a href="../symtab/Symbols.scala.html#26286" title="Flatten.this.global.Symbol">Symbol</a>) {
    <span title="Unit" class="keyword">if</span> (<span title="=&gt; Boolean">!</span>(<a href="../symtab/Symbols.scala.html#27155" title="(mask: Long)Boolean">sym</a> hasFlag <span title="Long(17179869184L)">LIFTED</span>)) {
      <a href="../symtab/Symbols.scala.html#27152" title="(mask: Long)sym.type">sym</a> setFlag <span title="Long(17179869184L)">LIFTED</span>
      <a href="../symtab/SymbolTable.scala.html#26256" title="(ph: scala.tools.nsc.Phase)(op: =&gt; Flatten.this.global.Symbol)Flatten.this.global.Symbol">atPhase</a>(<a href="../symtab/SymbolTable.scala.html#26247" title="=&gt; scala.tools.nsc.Phase">phase</a>.<a href="../Phase.scala.html#23302" title="=&gt; scala.tools.nsc.Phase">next</a>) <span title="Unit">{</span>
        <span title="Unit" class="keyword">if</span> (<a href="../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../Settings.scala.html#37988" title="=&gt; Boolean">value</a>) <a href="../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;re-enter &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#78837" title="Flatten.this.global.Symbol">sym</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; in &quot;)" class="string">&quot; in &quot;</span> + <a href="#78837" title="Flatten.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27142" title="=&gt; Flatten.this.global.Symbol">owner</a>)
        <a title="(assertion: Boolean,message: =&gt; Any)Unit" id="7945">assert</a>(<a href="#78837" title="Flatten.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27142" title="=&gt; Flatten.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27094" title="=&gt; Boolean">isPackageClass</a>, <a href="#78837" title="Flatten.this.global.Symbol">sym</a>) //debug
        <span class="keyword">val</span> <a title="Flatten.this.global.Scope" id="79044">scope</a> = <a href="#78837" title="Flatten.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27142" title="=&gt; Flatten.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27163" title="=&gt; Flatten.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#30396" title="=&gt; Flatten.this.global.Scope">decls</a>
        <span class="keyword">val</span> <a title="Flatten.this.global.Symbol" id="79045">old</a> = <a href="../symtab/Scopes.scala.html#27297" title="(name: Flatten.this.global.Name)Flatten.this.global.Symbol">scope</a> lookup <a href="#78837" title="Flatten.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27147" title="=&gt; Flatten.this.global.Name">name</a>
        <span title="Unit" class="keyword">if</span> (<a href="#79045" title="(x$1: AnyRef)Boolean" id="6609">old</a> != <a href="../symtab/Symbols.scala.html#26293" title="object Flatten.this.global.NoSymbol">NoSymbol</a>) <a href="../symtab/Scopes.scala.html#27296" title="(sym: Flatten.this.global.Symbol)Unit">scope</a> unlink <a href="#79045" title="Flatten.this.global.Symbol">old</a>
        <a href="../symtab/Scopes.scala.html#27290" title="(sym: Flatten.this.global.Symbol)Flatten.this.global.Symbol">scope</a> enter <a href="#78837" title="Flatten.this.global.Symbol">sym</a>
      }
    }
  }

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="Flatten.this.global.TypeMap" id="78667">flattened</a> = <a href="#78673" title="Flatten.this.global.TypeMap{ ... }" class="keyword">new</a> <a href="../symtab/Types.scala.html#26479" title="anonymous class $anon extends Flatten.this.global.TypeMap" id="78673">TypeMap</a> {
    <span class="keyword">def</span> <a title="(tp: Flatten.this.global.Type)Flatten.this.global.Type" id="78675">apply</a>(<a title="Flatten.this.global.Type" id="78679">tp</a>: <a href="../symtab/Types.scala.html#26364" title="Flatten.this.global.Type">Type</a>): <a href="../symtab/Types.scala.html#26364" title="Flatten.this.global.Type">Type</a> = <a href="#78679" title="Flatten.this.global.Type">tp</a> <span title="Flatten.this.global.Type" class="keyword">match</span> {
      <span title="Flatten.this.global.Type" class="keyword">case</span> TypeRef(<a title="Flatten.this.global.Type" id="78684">pre</a>, <a title="Flatten.this.global.Symbol" id="78685">sym</a>, <a title="List[Flatten.this.global.Type]" id="78686">args</a>) <span class="keyword">if</span> (<a href="#78684" title="Flatten.this.global.Type">pre</a>.<a href="../symtab/Types.scala.html#30366" title="=&gt; Flatten.this.global.Symbol">typeSymbol</a>.<a href="../symtab/Symbols.scala.html#27056" title="(x$1: Boolean)Boolean">isClass</a> &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#78684" title="Flatten.this.global.Type">pre</a>.<a href="../symtab/Types.scala.html#30366" title="=&gt; Flatten.this.global.Symbol">typeSymbol</a>.<a href="../symtab/Symbols.scala.html#27094" title="=&gt; Boolean">isPackageClass</a>) =&gt;
        <a title="(assertion: Boolean)Unit" id="7943">assert</a>(<a href="#78686" title="List[Flatten.this.global.Type]">args</a>.<a title="=&gt; Boolean" id="25593">isEmpty</a>)
        <a href="../symtab/Types.scala.html#26454" title="(pre: Flatten.this.global.Type,sym: Flatten.this.global.Symbol,args: List[Flatten.this.global.Type])Flatten.this.global.Type">typeRef</a>(<a href="#78685" title="Flatten.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27210" title="=&gt; Flatten.this.global.Symbol">toplevelClass</a>.<a href="../symtab/Symbols.scala.html#27142" title="=&gt; Flatten.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27196" title="=&gt; Flatten.this.global.Type">thisType</a>, <a href="#78685" title="Flatten.this.global.Symbol">sym</a>, <a href="#78686" title="List[Flatten.this.global.Type]">args</a>)
      <span title="Flatten.this.global.ClassInfoType" class="keyword">case</span> ClassInfoType(<a title="List[Flatten.this.global.Type]" id="78705">parents</a>, <a title="Flatten.this.global.Scope" id="78706">decls</a>, <a title="Flatten.this.global.Symbol" id="78707">clazz</a>) =&gt;
        <span class="keyword">var</span> <a title="List[Flatten.this.global.Type]" id="78710">parents1</a> = <a href="#78705" title="List[Flatten.this.global.Type]">parents</a>
        <span class="keyword">val</span> <a title="Flatten.this.global.Scope" id="78711">decls1</a> = <a href="../symtab/Scopes.scala.html#26125" title="=&gt; Flatten.this.global.Scope">newScope</a>
        <span title="Unit" class="keyword">if</span> (<a href="#78707" title="Flatten.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27094" title="=&gt; Boolean">isPackageClass</a>) {
          <a href="../symtab/SymbolTable.scala.html#26256" title="(ph: scala.tools.nsc.Phase)(op: =&gt; Unit)Unit">atPhase</a>(<a href="../symtab/SymbolTable.scala.html#26247" title="=&gt; scala.tools.nsc.Phase">phase</a>.<a href="../Phase.scala.html#23302" title="=&gt; scala.tools.nsc.Phase">next</a>)(<a href="#78706" title="Flatten.this.global.Scope">decls</a>.<a href="../symtab/Scopes.scala.html#27303" title="(f: (Flatten.this.global.Symbol) =&gt; Flatten.this.global.Symbol)Unit">toList</a> foreach (<a title="Flatten.this.global.Symbol" id="78747">sym</a> =&gt; <a href="../symtab/Scopes.scala.html#27290" title="(sym: Flatten.this.global.Symbol)Flatten.this.global.Symbol">decls1</a> enter <a href="#78747" title="Flatten.this.global.Symbol">sym</a>))
        } <span class="keyword">else</span> {
          <span class="keyword">val</span> <a title="Flatten.this.global.Symbol" id="78766">oldowner</a> = <a href="#78707" title="Flatten.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27142" title="=&gt; Flatten.this.global.Symbol">owner</a>
          <a href="../symtab/SymbolTable.scala.html#26256" title="(ph: scala.tools.nsc.Phase)(op: =&gt; Flatten.this.global.Type)Flatten.this.global.Type">atPhase</a>(<a href="../symtab/SymbolTable.scala.html#26247" title="=&gt; scala.tools.nsc.Phase">phase</a>.<a href="../Phase.scala.html#23302" title="=&gt; scala.tools.nsc.Phase">next</a>)(<a href="#78766" title="Flatten.this.global.Symbol">oldowner</a>.<a href="../symtab/Symbols.scala.html#27163" title="=&gt; Flatten.this.global.Type">info</a>)
          <a href="#78710" title="List[Flatten.this.global.Type]">parents1</a> = <a href="#78705" title="(f: (Flatten.this.global.Type) =&gt; Flatten.this.global.Type)List[Flatten.this.global.Type]" id="24429">parents</a> mapConserve (<a href="#78673" title="Flatten.this.global.TypeMap{ ... }" class="keyword">this</a>)
          <span class="keyword">for</span> (<a title="Flatten.this.global.Symbol" id="78802">sym</a> &lt;- <a href="#78706" title="Flatten.this.global.Scope">decls</a>.<a href="../symtab/Scopes.scala.html#27303" title="(f: (Flatten.this.global.Symbol) =&gt; Any)Unit">toList</a>) {
            <span title="Any" class="keyword">if</span> (<a href="#78802" title="Flatten.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27054" title="(x$1: Boolean)Boolean">isTerm</a> &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#78802" title="Flatten.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27077" title="=&gt; Boolean">isStaticModule</a>) {
              <a href="../symtab/Scopes.scala.html#27290" title="(sym: Flatten.this.global.Symbol)Flatten.this.global.Symbol">decls1</a> enter <a href="#78802" title="Flatten.this.global.Symbol">sym</a>
              <span title="Any" class="keyword">if</span> (<a href="#78802" title="Flatten.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27076" title="=&gt; Boolean">isModule</a>) <a href="#78802" title="Flatten.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27152" title="(mask: Long)Flatten.this.global.Symbol">moduleClass</a> setFlag <span title="Long(17179869184L)">LIFTED</span>
            } <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<a href="#78802" title="Flatten.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27056" title="=&gt; Boolean">isClass</a>) {
              <a href="#78666" title="(sym: Flatten.this.global.Symbol)Unit">liftClass</a>(<a href="#78802" title="Flatten.this.global.Symbol">sym</a>)
              <span title="Unit" class="keyword">if</span> (<a href="#78802" title="Flatten.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27122" title="=&gt; Boolean">needsImplClass</a>) <a href="#78666" title="(sym: Flatten.this.global.Symbol)Unit">liftClass</a>(<a href="../Global.scala.html#39355" title="object Flatten.this.global.erasure">erasure</a>.<a href="AddInterfaces.scala.html#42655" title="(iface: Flatten.this.global.erasure.global.Symbol)Flatten.this.global.erasure.global.Symbol">implClass</a>(<a href="#78802" title="Flatten.this.global.Symbol">sym</a>))
            }
          }
        }
        <a href="../symtab/Types.scala.html#44491" title="(parents: List[Flatten.this.global.Type],decls: Flatten.this.global.Scope,typeSymbol: Flatten.this.global.Symbol)Flatten.this.global.ClassInfoType">ClassInfoType</a>(<a href="#78710" title="List[Flatten.this.global.Type]">parents1</a>, <a href="#78711" title="Flatten.this.global.Scope">decls1</a>, <a href="#78707" title="Flatten.this.global.Symbol">clazz</a>)
      <span title="Flatten.this.global.Type" class="keyword">case</span> MethodType(<a title="List[Flatten.this.global.Symbol]" id="78905">params</a>, <a title="Flatten.this.global.Type" id="78906">restp</a>) =&gt;
        <span class="keyword">val</span> <a title="Flatten.this.global.Type" id="78909">restp1</a> = <a href="#78675" title="(tp: Flatten.this.global.Type)Flatten.this.global.Type">apply</a>(<a href="#78906" title="Flatten.this.global.Type">restp</a>)
        <span title="Flatten.this.global.Type" class="keyword">if</span> (<a href="#78909" title="(x$1: AnyRef)Boolean">restp1</a> eq <a href="#78906" title="Flatten.this.global.Type">restp</a>) <a href="#78679" title="Flatten.this.global.Type">tp</a> <span class="keyword">else</span> <a href="../symtab/Types.scala.html#26458" title="(tp: Flatten.this.global.Type,params: List[Flatten.this.global.Symbol],restpe: Flatten.this.global.Type)Flatten.this.global.Type">copyMethodType</a>(<a href="#78679" title="Flatten.this.global.Type">tp</a>, <a href="#78905" title="List[Flatten.this.global.Symbol]">params</a>, <a href="#78909" title="Flatten.this.global.Type">restp1</a>)
      <span title="Flatten.this.global.Type" class="keyword">case</span> PolyType(<a title="List[Flatten.this.global.Symbol]" id="78926">tparams</a>, <a title="Flatten.this.global.Type" id="78927">restp</a>) =&gt;
        <span class="keyword">val</span> <a title="Flatten.this.global.Type" id="78930">restp1</a> = <a href="#78675" title="(tp: Flatten.this.global.Type)Flatten.this.global.Type">apply</a>(<a href="#78927" title="Flatten.this.global.Type">restp</a>);
        <span title="Flatten.this.global.Type" class="keyword">if</span> (<a href="#78930" title="(x$1: AnyRef)Boolean">restp1</a> eq <a href="#78927" title="Flatten.this.global.Type">restp</a>) <a href="#78679" title="Flatten.this.global.Type">tp</a> <span class="keyword">else</span> <a href="../symtab/Types.scala.html#44057" title="(typeParams: List[Flatten.this.global.Symbol],resultType: Flatten.this.global.Type)Flatten.this.global.PolyType">PolyType</a>(<a href="#78926" title="List[Flatten.this.global.Symbol]">tparams</a>, <a href="#78930" title="Flatten.this.global.Type">restp1</a>)
      <span title="Flatten.this.global.Type" class="keyword">case</span> _ =&gt;
        <a href="../symtab/Types.scala.html#42954" title="(tp: Flatten.this.global.Type)Flatten.this.global.Type">mapOver</a>(<a href="#78679" title="Flatten.this.global.Type">tp</a>)
    }
  }

  <span class="keyword">def</span> <a title="(sym: Flatten.this.global.Symbol,tp: Flatten.this.global.Type)Flatten.this.global.Type" id="78669">transformInfo</a>(<a title="Flatten.this.global.Symbol" id="79102">sym</a>: <a href="../symtab/Symbols.scala.html#26286" title="Flatten.this.global.Symbol">Symbol</a>, <a title="Flatten.this.global.Type" id="79103">tp</a>: <a href="../symtab/Types.scala.html#26364" title="Flatten.this.global.Type">Type</a>): <a href="../symtab/Types.scala.html#26364" title="Flatten.this.global.Type">Type</a> = <a href="#78667" title="(v1: Flatten.this.global.Type)Flatten.this.global.Type">flattened</a>(<a href="#79103" title="Flatten.this.global.Type">tp</a>)

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(unit: Flatten.this.global.CompilationUnit)Flatten.this.global.Transformer" id="78670">newTransformer</a>(<a title="Flatten.this.global.CompilationUnit" id="79110">unit</a>: <a href="../CompilationUnits.scala.html#39428" title="Flatten.this.global.CompilationUnit">CompilationUnit</a>): <a href="../ast/Trees.scala.html#26932" title="Flatten.this.global.Transformer">Transformer</a> = <span title="Flatten.this.Flattener" class="keyword">new</span> <a href="#78671" title="Flatten.this.Flattener">Flattener</a>

  <span class="keyword">class</span> <a title="class Flattener extends Flatten.this.global.Transformer with ScalaObject" id="78671">Flattener</a> <span title="ScalaObject" class="keyword">extends</span> <a href="../ast/Trees.scala.html#26932" title="Flatten.this.global.Transformer">Transformer</a> {

    /** Buffers for lifted out classes */ 
    <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.mutable.HashMap[Flatten.this.global.Symbol,scala.collection.mutable.ListBuffer[Flatten.this.global.Tree]]" id="79114">liftedDefs</a> = <span title="scala.collection.mutable.HashMap[Flatten.this.global.Symbol,scala.collection.mutable.ListBuffer[Flatten.this.global.Tree]]" class="keyword">new</span> <a title="scala.collection.mutable.HashMap[Flatten.this.global.Symbol,scala.collection.mutable.ListBuffer[Flatten.this.global.Tree]]" id="25113">HashMap</a>[Symbol, ListBuffer[Tree]]

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: Flatten.this.global.Tree)Flatten.this.global.Tree" id="79116">transform</a>(<a title="Flatten.this.global.Tree" id="79126">tree</a>: <a href="../ast/Trees.scala.html#26752" title="Flatten.this.global.Tree">Tree</a>): <a href="../ast/Trees.scala.html#26752" title="Flatten.this.global.Tree">Tree</a> = {
      <a href="#79126" title="Flatten.this.global.Tree">tree</a> <span title="Unit" class="keyword">match</span> {
        <span title="Unit" class="keyword">case</span> PackageDef(_, _) =&gt;
          <a href="#79114" title="(key: Flatten.this.global.Symbol,value: scala.collection.mutable.ListBuffer[Flatten.this.global.Tree])Unit">liftedDefs</a>(<a href="#79126" title="Flatten.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; Flatten.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27218" title="=&gt; Flatten.this.global.Symbol">moduleClass</a>) = <span title="scala.collection.mutable.ListBuffer[Flatten.this.global.Tree]" class="keyword">new</span> <span title="scala.collection.mutable.ListBuffer[Flatten.this.global.Tree]">ListBuffer</span>
        <span title="Unit" class="keyword">case</span> Template(_, _, _) <span class="keyword">if</span> (<a href="#79126" title="Flatten.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; Flatten.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27142" title="=&gt; Flatten.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27155" title="(mask: Long)Boolean">hasFlag</a>(<span title="Long(16384L)">PACKAGE</span>)) =&gt;
          <a href="#79114" title="(key: Flatten.this.global.Symbol,value: scala.collection.mutable.ListBuffer[Flatten.this.global.Tree])Unit">liftedDefs</a>(<a href="#79126" title="Flatten.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; Flatten.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27142" title="=&gt; Flatten.this.global.Symbol">owner</a>) = <span title="scala.collection.mutable.ListBuffer[Flatten.this.global.Tree]" class="keyword">new</span> <span title="scala.collection.mutable.ListBuffer[Flatten.this.global.Tree]">ListBuffer</span>
        <span title="Unit" class="keyword">case</span> _ =&gt;
      }
      <a href="#79117" title="(tree: Flatten.this.global.Tree)Flatten.this.global.Tree">postTransform</a>(<span class="keyword">super</span>.<a href="../ast/Trees.scala.html#45705" title="(tree: Flatten.this.global.Tree)Flatten.this.global.Tree">transform</a>(<a href="#79126" title="Flatten.this.global.Tree">tree</a>))
    }

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tree: Flatten.this.global.Tree)Flatten.this.global.Tree" id="79117">postTransform</a>(<a title="Flatten.this.global.Tree" id="79195">tree</a>: <a href="../ast/Trees.scala.html#26752" title="Flatten.this.global.Tree">Tree</a>): <a href="../ast/Trees.scala.html#26752" title="Flatten.this.global.Tree">Tree</a> = {
      <span class="keyword">val</span> <a title="Flatten.this.global.Symbol" id="79203">sym</a> = <a href="#79195" title="Flatten.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; Flatten.this.global.Symbol">symbol</a>
      <span class="keyword">val</span> <a title="Flatten.this.global.gen.global.Tree" id="79204">tree1</a> = <a href="#79195" title="Flatten.this.global.Tree">tree</a> <span title="Flatten.this.global.gen.global.Tree" class="keyword">match</span> {
        <span title="Flatten.this.global.EmptyTree.type" class="keyword">case</span> ClassDef(_, _, _, _) <span class="keyword">if</span> <a href="#79203" title="Flatten.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27132" title="=&gt; Boolean">isNestedClass</a> =&gt;
          <a href="#79114" title="(key: Flatten.this.global.Symbol)scala.collection.mutable.ListBuffer[Flatten.this.global.Tree]">liftedDefs</a><a title="(x: Flatten.this.global.Tree)scala.collection.mutable.ListBuffer[Flatten.this.global.Tree]" id="61852">(</a><a href="#79203" title="Flatten.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27210" title="=&gt; Flatten.this.global.Symbol">toplevelClass</a>.<a href="../symtab/Symbols.scala.html#27142" title="=&gt; Flatten.this.global.Symbol">owner</a>) += <a href="#79195" title="Flatten.this.global.Tree">tree</a>
          <a href="../ast/Trees.scala.html#26761" title="object Flatten.this.global.EmptyTree">EmptyTree</a>
        <span title="Flatten.this.global.gen.global.Tree" class="keyword">case</span> Select(<a title="Flatten.this.global.Tree" id="79279">qual</a>, <a title="Flatten.this.global.Name" id="79280">name</a>) <span class="keyword">if</span> (<a href="#79203" title="Flatten.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27077" title="(x$1: Boolean)Boolean">isStaticModule</a> &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#79203" title="Flatten.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27142" title="=&gt; Flatten.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27094" title="=&gt; Boolean">isPackageClass</a>) =&gt;
          <a href="../symtab/SymbolTable.scala.html#26256" title="(ph: scala.tools.nsc.Phase)(op: =&gt; Flatten.this.global.gen.global.Tree)Flatten.this.global.gen.global.Tree">atPhase</a>(<a href="../symtab/SymbolTable.scala.html#26247" title="=&gt; scala.tools.nsc.Phase">phase</a>.<a href="../Phase.scala.html#23302" title="=&gt; scala.tools.nsc.Phase">next</a>) {
            <a href="../ast/Trees.scala.html#26943" title="(pos: scala.tools.nsc.util.Position)(tree: Flatten.this.global.gen.global.Tree)Flatten.this.global.gen.global.Tree">atPos</a>(<a href="#79195" title="Flatten.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29547" title="=&gt; scala.tools.nsc.util.Position">pos</a>) {
              <a href="../Global.scala.html#39263" title="object Flatten.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#42908" title="(sym: Flatten.this.global.gen.global.Symbol)Flatten.this.global.gen.global.Tree">mkAttributedRef</a>(<a href="#79203" title="Flatten.this.global.Symbol">sym</a>)
            }
          }
        <span title="Flatten.this.global.Tree" class="keyword">case</span> _ =&gt;
          <a href="#79195" title="Flatten.this.global.Tree">tree</a>
      }
      <a href="../ast/Trees.scala.html#29552" title="(tp: Flatten.this.global.gen.global.Type)tree1.type">tree1</a> setType <a href="#78667" title="(v1: Flatten.this.global.Type)Flatten.this.global.Type">flattened</a>(<a href="#79204" title="Flatten.this.global.gen.global.Tree">tree1</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; Flatten.this.global.gen.global.Type">tpe</a>)
    }

    /** Transform statements and add lifted definitions to them. */
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(stats: List[Flatten.this.global.Tree],exprOwner: Flatten.this.global.Symbol)List[Flatten.this.global.Tree]" id="79118">transformStats</a>(<a title="List[Flatten.this.global.Tree]" id="79322">stats</a>: <span title="List[Flatten.this.global.Tree]">List</span>[Tree], <a title="Flatten.this.global.Symbol" id="79323">exprOwner</a>: <a href="../symtab/Symbols.scala.html#26286" title="Flatten.this.global.Symbol">Symbol</a>): <span title="List[Flatten.this.global.Tree]">List</span>[Tree] = {
      <span class="keyword">val</span> <a title="List[Flatten.this.global.Tree]" id="79327">stats1</a> = <span class="keyword">super</span>.<a href="../ast/Trees.scala.html#45714" title="(stats: List[Flatten.this.global.Tree],exprOwner: Flatten.this.global.Symbol)List[Flatten.this.global.Tree]">transformStats</a>(<a href="#79322" title="List[Flatten.this.global.Tree]">stats</a>, <a href="#79323" title="Flatten.this.global.Symbol">exprOwner</a>)
      <span title="List[Flatten.this.global.Tree]" class="keyword">if</span> (<a href="../ast/Trees.scala.html#45699" title="=&gt; Flatten.this.global.Symbol">currentOwner</a>.<a href="../symtab/Symbols.scala.html#27094" title="=&gt; Boolean">isPackageClass</a>) <a href="#79327" title="List[Flatten.this.global.Tree]">stats1</a> <a href="#79333" title="List[Flatten.this.global.Tree]">:::</a> <a href="#79114" title="(key: Flatten.this.global.Symbol)scala.collection.mutable.ListBuffer[Flatten.this.global.Tree]">liftedDefs</a>(<a href="../ast/Trees.scala.html#45699" title="=&gt; Flatten.this.global.Symbol">currentOwner</a>).<a title="(prefix: List[Flatten.this.global.Tree])List[Flatten.this.global.Tree]" id="61864">toList</a>
      <span class="keyword">else</span> <a href="#79327" title="List[Flatten.this.global.Tree]">stats1</a>
    }
  }
}

        </pre>
    </body>
</html>