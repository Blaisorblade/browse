<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/transform/LiftCode.scala</title>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style">
    </head>
    <body onload="initializeLinked()">
        <pre>
<span class="comment">/* NSC -- new Scala compiler
 * Copyright 2005-2009 LAMP/EPFL
 * @author Gilles Dubochet
 */</span>
<span class="comment">// $Id: LiftCode.scala 16893 2009-01-13 13:09:22Z cunei $</span>

<span class="keyword">package</span> scala.tools.nsc.transform

<span class="keyword">import</span> symtab._
<span class="keyword">import</span> Flags._
<span class="keyword">import</span> symtab.Flags._
<span class="keyword">import</span> scala.collection.immutable.ListMap
<span class="keyword">import</span> scala.collection.mutable.{HashMap, ListBuffer}
<span class="keyword">import</span> scala.tools.nsc.util.{FreshNameCreator, TreeSet}

<span class="comment">/** Translate expressions of the form reflect.Code.lift(exp)
 *  to the lifted &quot;reflect trees&quot; representation of exp.
 *
 *  @author Gilles Dubochet
 *  @version 1.0
 */</span>
<span class="keyword">abstract</span> <span class="keyword">class</span> <span class="typed"><span class="type">class LiftCode extends scala.tools.nsc.SubComponent with scala.tools.nsc.transform.Transform with scala.tools.nsc.transform.Reifiers with ScalaObject</span><a id="12988">LiftCode</a></span> <span class="keyword">extends</span> <span class="typed"><span class="type">scala.tools.nsc.transform.Transform</span><a href="Transform.scala.html#13183">Transform</a></span> <span class="keyword">with</span> <span class="typed"><span class="type">scala.tools.nsc.transform.Reifiers</span><a href="Reifiers.scala.html#12991">Reifiers</a></span> {

  <span class="keyword">import</span> global._                  <span class="comment">// the global environment</span>
  <span class="keyword">import</span> definitions._             <span class="comment">// standard classes and methods</span>
  <span class="keyword">import</span> typer.{typed, atOwner}    <span class="comment">// methods to type trees</span>
  <span class="keyword">import</span> posAssigner.atPos         <span class="comment">// for filling in tree positions</span>

  <span class="keyword">val</span> <span class="typed"><span class="type">LiftCode.this.global.type</span><span id="77286"><a id="77285">symbols</a></span></span>: global.<span class="keyword">type</span> = <span class="typed"><span class="type">=&gt; scala.tools.nsc.Global</span><a href="../SubComponent.scala.html#29449">global</a></span>

  <span class="comment">/** the following two members override abstract members in Transform */</span>
  <span class="keyword">val</span> <span class="typed"><span class="type">String</span><span id="77288"><a id="77287">phaseName</a></span></span>: <span class="typed"><span class="type">String</span><a id="1861">String</a></span> = <span class="typed"><span class="type">java.lang.String(&quot;liftcode&quot;)</span><span class="string">&quot;liftcode&quot;</span></span>

  <span class="keyword">def</span> <span class="typed"><span class="type">(LiftCode.this.global.CompilationUnit)LiftCode.this.global.Transformer</span><a id="77289">newTransformer</a></span>(<span class="typed"><span class="type">LiftCode.this.global.CompilationUnit</span><a id="77317">unit</a></span>: <span class="typed"><span class="type">LiftCode.this.global.CompilationUnit</span><a href="../CompilationUnits.scala.html#22571">CompilationUnit</a></span>): <span class="typed"><span class="type">LiftCode.this.global.Transformer</span><a href="../ast/Trees.scala.html#22548">Transformer</a></span> =
    <span class="typed"><span class="type">LiftCode.this.AddRefFields</span><span class="keyword">new</span></span> <span class="typed"><span class="type">LiftCode.this.AddRefFields</span><a href="#77290">AddRefFields</a></span>(<span class="typed"><span class="type">LiftCode.this.global.CompilationUnit</span><a href="#77317">unit</a></span>)

  <span class="keyword">class</span> <span class="typed"><span class="type">class AddRefFields extends LiftCode.this.global.Transformer with ScalaObject</span><a id="77290">AddRefFields</a></span>(<span class="typed"><span class="type">LiftCode.this.global.CompilationUnit</span><span id="77319"><a id="77322">unit</a></span></span>: <span class="typed"><span class="type">LiftCode.this.global.CompilationUnit</span><a href="../CompilationUnits.scala.html#22571">CompilationUnit</a></span>) <span class="keyword">extends</span> <span class="typed"><span class="type">LiftCode.this.global.Transformer</span><a href="../ast/Trees.scala.html#22548">Transformer</a></span> {
    <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">(LiftCode.this.global.Tree)LiftCode.this.global.Tree</span><a id="77321">transform</a></span>(<span class="typed"><span class="type">LiftCode.this.global.Tree</span><a id="77325">tree</a></span>: <span class="typed"><span class="type">LiftCode.this.global.Tree</span><a href="../ast/Trees.scala.html#22371">Tree</a></span>): <span class="typed"><span class="type">LiftCode.this.global.Tree</span><a href="../ast/Trees.scala.html#22371">Tree</a></span> = <span class="typed"><span class="type">LiftCode.this.global.Tree</span><a href="#77325">tree</a></span> <span class="typed"><span class="type">LiftCode.this.global.Tree</span><span class="keyword">match</span></span> {
      <span class="typed"><span class="type">LiftCode.this.global.analyzer.global.Tree</span><span class="keyword">case</span></span> <a id="1">Apply</a>(<span class="typed"><span class="type">LiftCode.this.global.Tree</span><a id="77326">lift</a></span>, <span class="typed"><span class="type">(List[LiftCode.this.global.Tree])Some[List[LiftCode.this.global.Tree]]</span><span id="21410"><a href="#77327" id="527">List</a></span></span>(<span class="typed"><span class="type">LiftCode.this.global.Tree</span><a id="77330">tree</a></span>))
      <span class="keyword">if</span> <span class="typed"><span class="type">LiftCode.this.global.Tree</span><a href="#77326">lift</a></span>.<span class="typed"><span class="type">=&gt; LiftCode.this.global.Symbol</span><a href="../ast/Trees.scala.html#25358">symbol</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">=&gt; LiftCode.this.global.Symbol</span><a href="../symtab/Definitions.scala.html#25879">Code_lift</a></span> =&gt;
        <span class="typed"><span class="type">(LiftCode.this.global.analyzer.global.Tree)LiftCode.this.global.analyzer.global.Tree</span><a href="../typechecker/Typers.scala.html#31830">typed</a></span>(<span class="typed"><span class="type">(scala.tools.nsc.util.Position)(LiftCode.this.global.Tree)LiftCode.this.global.Tree</span><a href="../ast/Trees.scala.html#28572">atPos</a></span>(<span class="typed"><span class="type">LiftCode.this.global.Tree</span><a href="#77330">tree</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.util.Position</span><a href="../ast/Trees.scala.html#25352">pos</a></span>)(<span class="typed"><span class="type">(LiftCode.this.global.Tree)LiftCode.this.global.Tree</span><a href="#77294">codify</a></span>(<span class="typed"><span class="type">LiftCode.this.global.Tree</span><a href="#77330">tree</a></span>)))
      <span class="typed"><span class="type">LiftCode.this.global.Tree</span><span class="keyword">case</span></span> _ =&gt;
        <span class="keyword">super</span>.<span class="typed"><span class="type">(LiftCode.this.global.Tree)LiftCode.this.global.Tree</span><a href="../ast/Trees.scala.html#43096">transform</a></span>(<span class="typed"><span class="type">LiftCode.this.global.Tree</span><a href="#77325">tree</a></span>)
    }
  }


  <span class="keyword">type</span> <span class="typed"><span class="type">scala.collection.immutable.ListMap[scala.reflect.Symbol,LiftCode.this.global.Name]</span><a id="77291">InjectEnvironment</a></span> = <span class="typed"><span class="type">scala.collection.immutable.ListMap[scala.reflect.Symbol,LiftCode.this.global.Name]</span><a id="26314">ListMap</a></span>[reflect.Symbol, Name]

  <span class="keyword">class</span> <span class="typed"><span class="type">class Injector extends java.lang.Object with ScalaObject</span><a id="77292">Injector</a></span>(<span class="typed"><span class="type">LiftCode.this.InjectEnvironment</span><span id="77386"><a id="77395">env</a></span></span>: <span class="typed"><span class="type">LiftCode.this.InjectEnvironment</span><a id="26314">InjectEnvironment</a></span>, <span class="typed"><span class="type">scala.tools.nsc.util.FreshNameCreator</span><span id="77387"><a id="77396">fresh</a></span></span>: <span class="typed"><span class="type">scala.tools.nsc.util.FreshNameCreator</span><a href="../util/FreshNameCreator.scala.html#8468">FreshNameCreator</a></span>) {

    <span class="comment">// todo replace className by caseName in CaseClass once we have switched to nsc.</span>
    <span class="keyword">def</span> <span class="typed"><span class="type">(AnyRef)String</span><a id="77389">className</a></span>(<span class="typed"><span class="type">AnyRef</span><a id="77397">value</a></span>: <span class="typed"><span class="type">AnyRef</span><a id="2017">AnyRef</a></span>): <span class="typed"><span class="type">String</span><a id="1861">String</a></span> = <span class="typed"><span class="type">AnyRef</span><a href="#77397">value</a></span> <span class="typed"><span class="type">String</span><span class="keyword">match</span></span> {
      <span class="typed"><span class="type">java.lang.String(&quot;scala.$colon$colon&quot;)</span><span class="keyword">case</span></span> _ <a id="1">::</a> _ =&gt; <span class="typed"><span class="type">java.lang.String(&quot;scala.$colon$colon&quot;)</span><span class="string">&quot;scala.$colon$colon&quot;</span></span>
      <span class="typed"><span class="type">String</span><span class="keyword">case</span></span> reflect.<a id="1">MethodType</a>(_, _) =&gt;
        <span class="typed"><span class="type">String</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">AnyRef</span><a href="#77397">value</a></span>.<span class="typed"><span class="type">Boolean</span><a id="3501">isInstanceOf</a></span>[reflect.<span class="typed"><span class="type">scala.reflect.ImplicitMethodType</span><a id="2450">ImplicitMethodType</a></span>])
          <span class="typed"><span class="type">java.lang.String(&quot;scala.reflect.ImplicitMethodType&quot;)</span><span class="string">&quot;scala.reflect.ImplicitMethodType&quot;</span></span>
        <span class="keyword">else</span>
          <span class="typed"><span class="type">java.lang.String(&quot;scala.reflect.MethodType&quot;)</span><span class="string">&quot;scala.reflect.MethodType&quot;</span></span>
      <span class="typed"><span class="type">java.lang.String</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Product</span><a id="77416">x</a></span>:<span class="typed"><span class="type">Product</span><a id="802">Product</a></span> =&gt;
        <span class="typed"><span class="type">java.lang.String(&quot;scala.reflect.&quot;)</span><span class="string">&quot;scala.reflect.&quot;</span></span><span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span><span class="typed"><span class="type">Product</span><a href="#77416">x</a></span>.<span class="typed"><span class="type">=&gt; java.lang.String</span><a id="22696">productPrefix</a></span> <span class="comment">//caseName</span>
      <span class="comment">//case _ =&gt; // bq:unreachable code</span>
      <span class="comment">//  &quot;&quot;</span>
    }

    <span class="keyword">def</span> <span class="typed"><span class="type">(Any)String</span><a id="77390">objectName</a></span>(<span class="typed"><span class="type">Any</span><a id="77417">value</a></span>: <span class="typed"><span class="type">Any</span><a id="51">Any</a></span>): <span class="typed"><span class="type">String</span><a id="1861">String</a></span> = <span class="typed"><span class="type">Any</span><a href="#77417">value</a></span> <span class="typed"><span class="type">String</span><span class="keyword">match</span></span> {
      <span class="typed"><span class="type">java.lang.String(&quot;scala.Nil&quot;)</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object Nil</span><a id="335">Nil</a></span>                =&gt; <span class="typed"><span class="type">java.lang.String(&quot;scala.Nil&quot;)</span><span class="string">&quot;scala.Nil&quot;</span></span>
      <span class="typed"><span class="type">java.lang.String(&quot;scala.reflect.NoSymbol&quot;)</span><span class="keyword">case</span></span> reflect.<span class="typed"><span class="type">object scala.reflect.NoSymbol</span><a id="2544">NoSymbol</a></span>   =&gt; <span class="typed"><span class="type">java.lang.String(&quot;scala.reflect.NoSymbol&quot;)</span><span class="string">&quot;scala.reflect.NoSymbol&quot;</span></span>
      <span class="typed"><span class="type">java.lang.String(&quot;scala.reflect.RootSymbol&quot;)</span><span class="keyword">case</span></span> reflect.<span class="typed"><span class="type">object scala.reflect.RootSymbol</span><a id="2454">RootSymbol</a></span> =&gt; <span class="typed"><span class="type">java.lang.String(&quot;scala.reflect.RootSymbol&quot;)</span><span class="string">&quot;scala.reflect.RootSymbol&quot;</span></span>
      <span class="typed"><span class="type">java.lang.String(&quot;scala.reflect.NoPrefix&quot;)</span><span class="keyword">case</span></span> reflect.<span class="typed"><span class="type">object scala.reflect.NoPrefix</span><a id="2448">NoPrefix</a></span>   =&gt; <span class="typed"><span class="type">java.lang.String(&quot;scala.reflect.NoPrefix&quot;)</span><span class="string">&quot;scala.reflect.NoPrefix&quot;</span></span>
      <span class="typed"><span class="type">java.lang.String(&quot;scala.reflect.NoType&quot;)</span><span class="keyword">case</span></span> reflect.<span class="typed"><span class="type">object scala.reflect.NoType</span><a id="2685">NoType</a></span>     =&gt; <span class="typed"><span class="type">java.lang.String(&quot;scala.reflect.NoType&quot;)</span><span class="string">&quot;scala.reflect.NoType&quot;</span></span>
      <span class="typed"><span class="type">java.lang.String(&quot;&quot;)</span><span class="keyword">case</span></span> _ =&gt; <span class="typed"><span class="type">java.lang.String(&quot;&quot;)</span><span class="string">&quot;&quot;</span></span>
    }

    <span class="keyword">def</span> <span class="typed"><span class="type">(Any)LiftCode.this.global.Tree</span><a id="77391">inject</a></span>(<span class="typed"><span class="type">Any</span><a id="77454">value</a></span>: <span class="typed"><span class="type">Any</span><a id="51">Any</a></span>): <span class="typed"><span class="type">LiftCode.this.global.Tree</span><a href="../ast/Trees.scala.html#22371">Tree</a></span> = {
      <span class="keyword">def</span> <span class="typed"><span class="type">(Product)LiftCode.this.global.gen.global.Tree</span><a id="77455">treatProduct</a></span>(<span class="typed"><span class="type">Product</span><a id="77456">c</a></span>: <span class="typed"><span class="type">Product</span><a id="802">Product</a></span>) = {
        <span class="keyword">val</span> <span class="typed"><span class="type">String</span><a id="77457">name</a></span> = <span class="typed"><span class="type">(Any)String</span><a href="#77390">objectName</a></span>(<span class="typed"><span class="type">Product</span><a href="#77456">c</a></span>)
        <span class="typed"><span class="type">LiftCode.this.global.gen.global.Tree</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">String</span><a href="#77457">name</a></span>.<span class="typed"><span class="type">()Int</span><a id="5821">length</a></span>() <span class="typed"><span class="type">(Int)Boolean</span><a id="3142">!=</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>)
          <span class="typed"><span class="type">object LiftCode.this.global.gen</span><a href="../Global.scala.html#21170">gen</a></span>.<span class="typed"><span class="type">(LiftCode.this.global.gen.global.Symbol)LiftCode.this.global.gen.global.Tree</span><a href="../ast/TreeGen.scala.html#27604">mkAttributedRef</a></span>(<span class="typed"><span class="type">object LiftCode.this.global.definitions</span><a href="../symtab/Definitions.scala.html#22259">definitions</a></span>.<span class="typed"><span class="type">(LiftCode.this.global.Name)LiftCode.this.global.Symbol</span><a href="../symtab/Definitions.scala.html#26108">getModule</a></span>(<span class="typed"><span class="type">implicit scala.tools.nsc.symtab.Names.view : (String)LiftCode.this.global.Name</span><a href="../symtab/Names.scala.html#21102">name</a></span>))
        <span class="keyword">else</span> {
          <span class="keyword">val</span> <span class="typed"><span class="type">String</span><a id="77465">name</a></span> = <span class="typed"><span class="type">(AnyRef)String</span><a href="#77389">className</a></span>(<span class="typed"><span class="type">Product</span><a href="#77456">c</a></span>)
          <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">String</span><a href="#77465">name</a></span>.<span class="typed"><span class="type">()Int</span><a id="5821">length</a></span>() <span class="typed"><span class="type">(Int)Boolean</span><a id="3141">==</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>) <span class="typed"><span class="type">Nothing</span><span class="keyword">throw</span></span> <span class="typed"><span class="type">(java.lang.String)java.lang.Error</span><a id="27228" class="keyword">new</a></span> <span class="typed"><span class="type">java.lang.Error</span><span id="5975"><a id="821">Error</a></span></span>(<span class="typed"><span class="type">java.lang.String(&quot;don't know how to inject &quot;)</span><span class="string">&quot;don't know how to inject &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">Any</span><a href="#77454">value</a></span>)
          <span class="keyword">val</span> <span class="typed"><span class="type">scala.collection.mutable.ListBuffer[LiftCode.this.global.Tree]</span><a id="77466">injectedArgs</a></span> = <span class="typed"><span class="type">scala.collection.mutable.ListBuffer[LiftCode.this.global.Tree]</span><span class="keyword">new</span></span> <span class="typed"><span class="type">scala.collection.mutable.ListBuffer[LiftCode.this.global.Tree]</span><a id="19925">ListBuffer</a></span>[Tree]
          <span class="keyword">for</span> (<span class="typed"><span class="type">((Int) =&gt; Unit)Unit</span><span id="40475"><a id="77480">i</a></span></span> &lt;- <span class="typed"><span class="type">implicit scala.Predef.intWrapper : (Int)scala.runtime.RichInt</span><span id="6133"><a id="821" class="int">0</a></span></span> <span class="typed"><span class="type">(Int)Range</span><a id="26778">until</a></span> <span class="typed"><span class="type">Product</span><a href="#77456">c</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="22694">productArity</a></span>)
            <span class="typed"><span class="type">scala.collection.mutable.ListBuffer[LiftCode.this.global.Tree]</span><a href="#77466">injectedArgs</a></span> <span class="typed"><span class="type">(LiftCode.this.global.Tree)Unit</span><a id="33306">+=</a></span> <span class="typed"><span class="type">(Any)LiftCode.this.global.Tree</span><a href="#77391">inject</a></span>(<span class="typed"><span class="type">Product</span><a href="#77456">c</a></span>.<span class="typed"><span class="type">(Int)Any</span><a id="22693">productElement</a></span>(<span class="typed"><span class="type">Int</span><a href="#77480">i</a></span>))
          <span class="typed"><span class="type">(LiftCode.this.global.Tree,List[List[LiftCode.this.global.Tree]])LiftCode.this.global.Tree</span><a href="../ast/Trees.scala.html#22484">New</a></span>(<span class="typed"><span class="type">(LiftCode.this.global.Symbol)LiftCode.this.global.Ident</span><a href="../ast/Trees.scala.html#22514">Ident</a></span>(<span class="typed"><span class="type">object LiftCode.this.global.definitions</span><a href="../symtab/Definitions.scala.html#22259">definitions</a></span>.<span class="typed"><span class="type">(LiftCode.this.global.Name)LiftCode.this.global.Symbol</span><a href="../symtab/Definitions.scala.html#26110">getClass</a></span>(<span class="typed"><span class="type">implicit scala.tools.nsc.symtab.Names.view : (String)LiftCode.this.global.Name</span><a href="../symtab/Names.scala.html#21102">name</a></span>)), <span class="typed"><span class="type">(List[LiftCode.this.global.Tree]*)List[List[LiftCode.this.global.Tree]]</span><span id="21328"><a id="527">List</a></span></span>(<span class="typed"><span class="type">scala.collection.mutable.ListBuffer[LiftCode.this.global.Tree]</span><a href="#77466">injectedArgs</a></span>.<span class="typed"><span class="type">=&gt; List[LiftCode.this.global.Tree]</span><a id="33309">toList</a></span>))
        }
      }
      <span class="typed"><span class="type">Any</span><a href="#77454">value</a></span> <span class="typed"><span class="type">LiftCode.this.global.Tree</span><span class="keyword">match</span></span> {
        <span class="typed"><span class="type">LiftCode.this.global.Tree</span><span class="keyword">case</span></span> <a id="1">FreeValue</a>(<span class="typed"><span class="type">LiftCode.this.symbols.Tree</span><a id="77501">tree</a></span>) =&gt;
          <span class="typed"><span class="type">(LiftCode.this.global.Tree,List[List[LiftCode.this.global.Tree]])LiftCode.this.global.Tree</span><a href="../ast/Trees.scala.html#22484">New</a></span>(<span class="typed"><span class="type">(LiftCode.this.global.Symbol)LiftCode.this.global.Ident</span><a href="../ast/Trees.scala.html#22514">Ident</a></span>(<span class="typed"><span class="type">object LiftCode.this.global.definitions</span><a href="../symtab/Definitions.scala.html#22259">definitions</a></span>.<span class="typed"><span class="type">(LiftCode.this.global.Name)LiftCode.this.global.Symbol</span><a href="../symtab/Definitions.scala.html#26110">getClass</a></span>(<span class="typed"><span class="type">implicit scala.tools.nsc.symtab.Names.view : (String)LiftCode.this.global.Name</span><a href="../symtab/Names.scala.html#21102" class="string">&quot;scala.reflect.Literal&quot;</a></span>)), <span class="typed"><span class="type">(List[LiftCode.this.symbols.Tree]*)List[List[LiftCode.this.symbols.Tree]]</span><span id="21328"><a id="527">List</a></span></span>(<span class="typed"><span class="type">(LiftCode.this.symbols.Tree*)List[LiftCode.this.symbols.Tree]</span><span id="21328"><a id="527">List</a></span></span>(<span class="typed"><span class="type">LiftCode.this.symbols.Tree</span><a href="#77501">tree</a></span>)))
        <span class="typed"><span class="type">LiftCode.this.global.Literal</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Unit</span><span >(</span></span>)           =&gt; <span class="typed"><span class="type">(LiftCode.this.global.Constant)LiftCode.this.global.Literal</span><a href="../ast/Trees.scala.html#43688">Literal</a></span>(<span class="typed"><span class="type">(Any)LiftCode.this.global.Constant</span><a href="../symtab/Constants.scala.html#50347">Constant</a></span>(<span class="typed"><span class="type">Unit</span><span >(</span></span>)))
        <span class="typed"><span class="type">LiftCode.this.global.Literal</span><span class="keyword">case</span></span> <span class="typed"><span class="type">String</span><a id="77512">x</a></span>: <span class="typed"><span class="type">String</span><a id="1861">String</a></span>    =&gt; <span class="typed"><span class="type">(LiftCode.this.global.Constant)LiftCode.this.global.Literal</span><a href="../ast/Trees.scala.html#43688">Literal</a></span>(<span class="typed"><span class="type">(Any)LiftCode.this.global.Constant</span><a href="../symtab/Constants.scala.html#50347">Constant</a></span>(<span class="typed"><span class="type">String</span><a href="#77512">x</a></span>))
        <span class="typed"><span class="type">LiftCode.this.global.Literal</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Boolean</span><a id="77514">x</a></span>: <span class="typed"><span class="type">Boolean</span><a id="2170">Boolean</a></span>   =&gt; <span class="typed"><span class="type">(LiftCode.this.global.Constant)LiftCode.this.global.Literal</span><a href="../ast/Trees.scala.html#43688">Literal</a></span>(<span class="typed"><span class="type">(Any)LiftCode.this.global.Constant</span><a href="../symtab/Constants.scala.html#50347">Constant</a></span>(<span class="typed"><span class="type">Boolean</span><a href="#77514">x</a></span>))
        <span class="typed"><span class="type">LiftCode.this.global.Literal</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Byte</span><a id="77516">x</a></span>: <span class="typed"><span class="type">Byte</span><a id="2379">Byte</a></span>      =&gt; <span class="typed"><span class="type">(LiftCode.this.global.Constant)LiftCode.this.global.Literal</span><a href="../ast/Trees.scala.html#43688">Literal</a></span>(<span class="typed"><span class="type">(Any)LiftCode.this.global.Constant</span><a href="../symtab/Constants.scala.html#50347">Constant</a></span>(<span class="typed"><span class="type">Byte</span><a href="#77516">x</a></span>))
        <span class="typed"><span class="type">LiftCode.this.global.Literal</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Short</span><a id="77518">x</a></span>: <span class="typed"><span class="type">Short</span><a id="2384">Short</a></span>     =&gt; <span class="typed"><span class="type">(LiftCode.this.global.Constant)LiftCode.this.global.Literal</span><a href="../ast/Trees.scala.html#43688">Literal</a></span>(<span class="typed"><span class="type">(Any)LiftCode.this.global.Constant</span><a href="../symtab/Constants.scala.html#50347">Constant</a></span>(<span class="typed"><span class="type">Short</span><a href="#77518">x</a></span>))
        <span class="typed"><span class="type">LiftCode.this.global.Literal</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Char</span><a id="77520">x</a></span>: <span class="typed"><span class="type">Char</span><a id="2389">Char</a></span>      =&gt; <span class="typed"><span class="type">(LiftCode.this.global.Constant)LiftCode.this.global.Literal</span><a href="../ast/Trees.scala.html#43688">Literal</a></span>(<span class="typed"><span class="type">(Any)LiftCode.this.global.Constant</span><a href="../symtab/Constants.scala.html#50347">Constant</a></span>(<span class="typed"><span class="type">Char</span><a href="#77520">x</a></span>))
        <span class="typed"><span class="type">LiftCode.this.global.Literal</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Int</span><a id="77522">x</a></span>: <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span>       =&gt; <span class="typed"><span class="type">(LiftCode.this.global.Constant)LiftCode.this.global.Literal</span><a href="../ast/Trees.scala.html#43688">Literal</a></span>(<span class="typed"><span class="type">(Any)LiftCode.this.global.Constant</span><a href="../symtab/Constants.scala.html#50347">Constant</a></span>(<span class="typed"><span class="type">Int</span><a href="#77522">x</a></span>))
        <span class="typed"><span class="type">LiftCode.this.global.Literal</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Long</span><a id="77524">x</a></span>: <span class="typed"><span class="type">Long</span><a id="2399">Long</a></span>      =&gt; <span class="typed"><span class="type">(LiftCode.this.global.Constant)LiftCode.this.global.Literal</span><a href="../ast/Trees.scala.html#43688">Literal</a></span>(<span class="typed"><span class="type">(Any)LiftCode.this.global.Constant</span><a href="../symtab/Constants.scala.html#50347">Constant</a></span>(<span class="typed"><span class="type">Long</span><a href="#77524">x</a></span>))
        <span class="typed"><span class="type">LiftCode.this.global.Literal</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Float</span><a id="77526">x</a></span>: <span class="typed"><span class="type">Float</span><a id="2404">Float</a></span>     =&gt; <span class="typed"><span class="type">(LiftCode.this.global.Constant)LiftCode.this.global.Literal</span><a href="../ast/Trees.scala.html#43688">Literal</a></span>(<span class="typed"><span class="type">(Any)LiftCode.this.global.Constant</span><a href="../symtab/Constants.scala.html#50347">Constant</a></span>(<span class="typed"><span class="type">Float</span><a href="#77526">x</a></span>))
        <span class="typed"><span class="type">LiftCode.this.global.Literal</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Double</span><a id="77528">x</a></span>: <span class="typed"><span class="type">Double</span><a id="2409">Double</a></span>    =&gt; <span class="typed"><span class="type">(LiftCode.this.global.Constant)LiftCode.this.global.Literal</span><a href="../ast/Trees.scala.html#43688">Literal</a></span>(<span class="typed"><span class="type">(Any)LiftCode.this.global.Constant</span><a href="../symtab/Constants.scala.html#50347">Constant</a></span>(<span class="typed"><span class="type">Double</span><a href="#77528">x</a></span>))
        <span class="typed"><span class="type">LiftCode.this.global.gen.global.Tree</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Product</span><a id="77530">c</a></span>: <span class="typed"><span class="type">Product</span><a id="802">Product</a></span>   =&gt; <span class="typed"><span class="type">(Product)LiftCode.this.global.gen.global.Tree</span><a href="#77455">treatProduct</a></span>(<span class="typed"><span class="type">Product</span><a href="#77530">c</a></span>)
        <span class="typed"><span class="type">LiftCode.this.global.gen.global.Tree</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span> =&gt;
          <span class="typed"><span class="type">object LiftCode.this.global.gen</span><a href="../Global.scala.html#21170">gen</a></span>.<span class="typed"><span class="type">(LiftCode.this.global.gen.global.Symbol)LiftCode.this.global.gen.global.Tree</span><a href="../ast/TreeGen.scala.html#27604">mkAttributedRef</a></span>(<span class="typed"><span class="type">object LiftCode.this.global.definitions</span><a href="../symtab/Definitions.scala.html#22259">definitions</a></span>.<span class="typed"><span class="type">(LiftCode.this.global.Name)LiftCode.this.global.Symbol</span><a href="../symtab/Definitions.scala.html#26108">getModule</a></span>(<span class="typed"><span class="type">implicit scala.tools.nsc.symtab.Names.view : (String)LiftCode.this.global.Name</span><a href="../symtab/Names.scala.html#21102" class="string">&quot;scala.reflect.NoType&quot;</a></span>))
        <span class="typed"><span class="type">Nothing</span><span class="keyword">case</span></span> _ =&gt;
          <span class="typed"><span class="type">Nothing</span><span class="keyword">throw</span></span> <span class="typed"><span class="type">(java.lang.String)java.lang.Error</span><a id="27228" class="keyword">new</a></span> <span class="typed"><span class="type">java.lang.Error</span><span id="5975"><a id="821">Error</a></span></span>(<span class="typed"><span class="type">java.lang.String(&quot;don't know how to inject &quot;)</span><span class="string">&quot;don't know how to inject &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">Any</span><a href="#77454">value</a></span>)
      }
    }
  } <span class="comment">// Injector</span>


  <span class="keyword">def</span> <span class="typed"><span class="type">(scala.reflect.Tree)LiftCode.this.global.Tree</span><a id="77293">inject</a></span>(<span class="typed"><span class="type">scala.reflect.Tree</span><a id="77535">code</a></span>: reflect.<span class="typed"><span class="type">scala.reflect.Tree</span><a id="2465">Tree</a></span>): <span class="typed"><span class="type">LiftCode.this.global.Tree</span><a href="../ast/Trees.scala.html#22371">Tree</a></span> =
    <span class="typed"><span class="type">LiftCode.this.Injector</span><span class="keyword">new</span></span> <span class="typed"><span class="type">LiftCode.this.Injector</span><a href="#77292">Injector</a></span>(<span class="typed"><span class="type">object scala.collection.immutable.ListMap</span><a id="26315">ListMap</a></span>.<span class="typed"><span class="type">scala.collection.immutable.ListMap[scala.reflect.Symbol,Nothing]</span><a id="77374">empty</a></span>, <span class="typed"><span class="type">scala.tools.nsc.util.FreshNameCreator.Default</span><span class="keyword">new</span></span> <span class="typed"><span class="type">object scala.tools.nsc.util.FreshNameCreator</span><a href="../util/FreshNameCreator.scala.html#8469">FreshNameCreator</a></span>.<span class="typed"><span class="type">scala.tools.nsc.util.FreshNameCreator.Default</span><a href="../util/FreshNameCreator.scala.html#77539">Default</a></span>).<span class="typed"><span class="type">(Any)LiftCode.this.global.Tree</span><a href="#77391">inject</a></span>(<span class="typed"><span class="type">scala.reflect.Tree</span><a href="#77535">code</a></span>)

  <span class="keyword">def</span> <span class="typed"><span class="type">(LiftCode.this.global.Tree)LiftCode.this.global.Tree</span><a id="77294">codify</a></span> (<span class="typed"><span class="type">LiftCode.this.global.Tree</span><a id="77339">tree</a></span>: <span class="typed"><span class="type">LiftCode.this.global.Tree</span><a href="../ast/Trees.scala.html#22371">Tree</a></span>): <span class="typed"><span class="type">LiftCode.this.global.Tree</span><a href="../ast/Trees.scala.html#22371">Tree</a></span> =
    <span class="typed"><span class="type">(LiftCode.this.global.Tree,List[List[LiftCode.this.global.Tree]])LiftCode.this.global.Tree</span><a href="../ast/Trees.scala.html#22484">New</a></span>(<span class="typed"><span class="type">(LiftCode.this.global.Type)LiftCode.this.global.TypeTree</span><a href="../ast/Trees.scala.html#22522">TypeTree</a></span>(<span class="typed"><span class="type">(LiftCode.this.global.Type,List[LiftCode.this.global.Type])LiftCode.this.global.Type</span><a href="../symtab/Types.scala.html#22037">appliedType</a></span>(<span class="typed"><span class="type">object LiftCode.this.global.definitions</span><a href="../symtab/Definitions.scala.html#22259">definitions</a></span>.<span class="typed"><span class="type">=&gt; LiftCode.this.global.Symbol</span><a href="../symtab/Definitions.scala.html#25873">CodeClass</a></span>.<span class="typed"><span class="type">=&gt; LiftCode.this.global.Type</span><a href="../symtab/Symbols.scala.html#25239">typeConstructor</a></span>,
                             <span class="typed"><span class="type">(LiftCode.this.global.Type*)List[LiftCode.this.global.Type]</span><span id="21328"><a id="527">List</a></span></span>(<span class="typed"><span class="type">LiftCode.this.global.Tree</span><a href="#77339">tree</a></span>.<span class="typed"><span class="type">=&gt; LiftCode.this.global.Type</span><a href="../ast/Trees.scala.html#25354">tpe</a></span>))),
        <span class="typed"><span class="type">(List[LiftCode.this.global.Tree]*)List[List[LiftCode.this.global.Tree]]</span><span id="21328"><a id="527">List</a></span></span>(<span class="typed"><span class="type">(LiftCode.this.global.Tree*)List[LiftCode.this.global.Tree]</span><span id="21328"><a id="527">List</a></span></span>(<span class="typed"><span class="type">(scala.reflect.Tree)LiftCode.this.global.Tree</span><a href="#77293">inject</a></span>(<span class="typed"><span class="type">(LiftCode.this.symbols.Tree)scala.reflect.Tree</span><a href="Reifiers.scala.html#77312">reify</a></span>(<span class="typed"><span class="type">LiftCode.this.global.Tree</span><a href="#77339">tree</a></span>)))))

}

<span class="comment">// case EmptyTree =&gt;</span>
<span class="comment">// case LiftPoint(tree) =&gt;</span>
<span class="comment">// case PackageDef(name, stats) =&gt; </span>
<span class="comment">// case ClassDef(mods, name, tparams, impl) =&gt; </span>
<span class="comment">// case ValDef(mods, name, tpt, rhs) =&gt; </span>
<span class="comment">// case DefDef(mods, name, tparams, vparamss, tpt, rhs) =&gt;</span>
<span class="comment">// case TypeDef(mods, name, tparams, rhs) =&gt;</span>
<span class="comment">// case LabelDef(name, params, rhs) =&gt;</span>
<span class="comment">// case Template(parents, self, body) =&gt;</span>
<span class="comment">// case Block(stats, expr) =&gt;</span>
<span class="comment">// case ArrayValue(elemtpt, trees) =&gt;</span>
<span class="comment">// case Assign(lhs, rhs) =&gt;</span>
<span class="comment">// case If(cond, thenp, elsep) =&gt;</span>
<span class="comment">// case Match(selector, cases) =&gt; </span>
<span class="comment">// case Return(expr) =&gt;          </span>
<span class="comment">// case Try(block, catches, finalizer) =&gt;</span>
<span class="comment">// case Throw(expr) =&gt;</span>
<span class="comment">// case New(tpt) =&gt;</span>
<span class="comment">// case Typed(expr, tpt) =&gt;</span>
<span class="comment">// case TypeApply(fun, args) =&gt;</span>
<span class="comment">// case Apply(fun, args) =&gt;</span>
<span class="comment">// case Super(qual, mix) =&gt;</span>
<span class="comment">// case This(qual) =&gt;</span>
<span class="comment">// case Select(qualifier, selector) =&gt;</span>
<span class="comment">// case Ident(name) =&gt;</span>
<span class="comment">// case Literal(value) =&gt;</span>
<span class="comment">// case TypeTree() =&gt;</span>
<span class="comment">// /* Pattern matching */</span>
<span class="comment">// case CaseDef(pat, guard, body) =&gt;</span>
<span class="comment">// case Sequence(trees) =&gt;</span>
<span class="comment">// case Alternative(trees) =&gt;</span>
<span class="comment">// case Star(elem) =&gt;</span>
<span class="comment">// case Bind(name, body) =&gt;</span>

        </pre>
    </body>
</html>