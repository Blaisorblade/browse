<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/transform/Erasure.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style">
    </head>
    <body>
        <pre>
/* NSC -- new Scala compiler
 * Copyright 2005-2009 LAMP/EPFL
 * @author Martin Odersky
 */
// $Id: Erasure.scala 18618 2009-08-31 16:27:39Z dragos $

<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> transform

<span class="keyword">import</span> scala.tools.nsc.symtab.classfile.ClassfileConstants._
<span class="keyword">import</span> scala.collection.mutable.{HashMap,ListBuffer}
<span class="keyword">import</span> scala.collection.immutable.Set
<span class="keyword">import</span> scala.tools.nsc.util.Position
<span class="keyword">import</span> symtab._
<span class="keyword">import</span> Flags._

<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class Erasure extends scala.tools.nsc.transform.AddInterfaces with scala.tools.nsc.typechecker.Analyzer with scala.tools.nsc.ast.TreeDSL with ScalaObject" id="14350">Erasure</a> <span title="ScalaObject" class="keyword">extends</span> <a href="AddInterfaces.scala.html#14128" title="scala.tools.nsc.transform.AddInterfaces">AddInterfaces</a> <span class="keyword">with</span> typechecker.<a href="../typechecker/Analyzer.scala.html#17208" title="scala.tools.nsc.typechecker.Analyzer">Analyzer</a> <span class="keyword">with</span> ast.<a href="../ast/TreeDSL.scala.html#11964" title="scala.tools.nsc.ast.TreeDSL">TreeDSL</a>
{
  <span class="keyword">import</span> global._                  // the global environment
  <span class="keyword">import</span> definitions._             // standard classes and methods
  // @S: XXX: why is this here? earsure is a typer, if you comment this
  //          out erasure still works, uses its own typed methods.
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Erasure.this.Typer" id="42674">typerXXX</a> = <a href="#14350" title="Erasure.this.type" class="keyword">this</a>.<a href="../typechecker/SyntheticMethods.scala.html#40272" title="=&gt; Erasure.this.Typer">typer</a>
  <span class="keyword">import</span> typerXXX.{typed, typedPos}             // methods to type trees
  
  <span class="keyword">import</span> CODE._

  <span class="keyword">val</span> <a title="String" id="42677">phaseName</a>: <span title="String">String</span> = <span title="java.lang.String(&quot;erasure&quot;)" class="string">&quot;erasure&quot;</span>

  <span class="keyword">def</span> <a title="(unit: Erasure.this.global.CompilationUnit)Erasure.this.global.Transformer" id="42679">newTransformer</a>(<a title="Erasure.this.global.CompilationUnit" id="45653">unit</a>: <a href="../CompilationUnits.scala.html#39428" title="Erasure.this.global.CompilationUnit">CompilationUnit</a>): <a href="../ast/Trees.scala.html#26932" title="Erasure.this.global.Transformer">Transformer</a> =
    <span title="Erasure.this.ErasureTransformer" class="keyword">new</span> <a href="#42698" title="Erasure.this.ErasureTransformer">ErasureTransformer</a>(<a href="#45653" title="Erasure.this.global.CompilationUnit">unit</a>)

// -------- erasure on types --------------------------------------------------------

  /** &lt;p&gt;
   *    The erasure &lt;code&gt;|T|&lt;/code&gt; of a type &lt;code&gt;T&lt;/code&gt;. This is:
   *  &lt;/p&gt;
   *  &lt;ul&gt;
   *    &lt;li&gt;For a constant type, itself.&lt;/li&gt;
   *    &lt;li&gt;For a type-bounds structure, the erasure of its upper bound.&lt;/li&gt;
   *    &lt;li&gt;For every other singleton type, the erasure of its supertype.&lt;/li&gt;
   *    &lt;li&gt;
   *      For a typeref &lt;code&gt;scala.Array+[T]&lt;/code&gt; where &lt;code&gt;T&lt;/code&gt; is
   *      an abstract type, &lt;code&gt;scala.runtime.BoxedArray[T]&lt;/code&gt;.
   *    &lt;/li&gt;
   *    &lt;li&gt;
   *   - For a typeref scala.Array+[T] where T is not an abstract type, scala.Array+[|T|].
   *   - For a typeref scala.Any or scala.AnyVal, java.lang.Object.
   *   - For a typeref scala.Unit, scala.runtime.BoxedUnit.
   *   - For a typeref P.C[Ts] where C refers to a class, |P|.C.
   *   - For a typeref P.C[Ts] where C refers to an alias type, the erasure of C's alias.
   *   - For a typeref P.C[Ts] where C refers to an abstract type, the
   *     erasure of C's upper bound.
   *   - For a non-empty type intersection (possibly with refinement),
   *     the erasure of its first parent.
   *   - For an empty type intersection, java.lang.Object
   *   - For a method type (Fs)scala.Unit, (|Fs|)scala#Unit.
   *   - For any other method type (Fs)Y, (|Fs|)|T|.
   *   - For a polymorphic type, the erasure of its result type
   *   - For the class info type of java.lang.Object, the same type without any parents
   *   - For a class info type of a value class, the same type without any parents
   *   - For any other class info type with parents Ps, the same type with
   *     parents |Ps|, but with duplicate references of Object removed.
   *   - for all other types, the type itself (with any sub-components erased)
   *    &lt;/li&gt;
   *  &lt;/ul&gt;
   */
  <span class="keyword">val</span> <a title="Erasure.this.global.TypeMap" id="42680">erasure</a> = <a href="#42892" title="Erasure.this.global.TypeMap{ ... }" class="keyword">new</a> <a href="../symtab/Types.scala.html#26479" title="anonymous class $anon extends Erasure.this.global.TypeMap" id="42892">TypeMap</a> {
    <span class="keyword">def</span> <a title="(tp: Erasure.this.global.Type)Erasure.this.global.Type" id="42965">apply</a>(<a title="Erasure.this.global.Type" id="42969">tp</a>: <a href="../symtab/Types.scala.html#26364" title="Erasure.this.global.Type">Type</a>): <a href="../symtab/Types.scala.html#26364" title="Erasure.this.global.Type">Type</a> = {
      <a href="#42969" title="Erasure.this.global.Type">tp</a> <span title="Erasure.this.global.Type" class="keyword">match</span> {
        <span title="Erasure.this.global.Type" class="keyword">case</span> ConstantType(_) =&gt;
          <a href="#42969" title="Erasure.this.global.Type">tp</a>
        <span title="Erasure.this.global.Type" class="keyword">case</span> <a title="Erasure.this.global.SubType" id="43067">st</a>: <a href="../symtab/Types.scala.html#26371" title="Erasure.this.global.SubType">SubType</a> =&gt;
          <a href="#42965" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">apply</a>(<a href="#43067" title="Erasure.this.global.SubType">st</a>.<a href="../symtab/Types.scala.html#42974" title="=&gt; Erasure.this.global.Type">supertype</a>)
        <span title="Erasure.this.global.Type" class="keyword">case</span> TypeRef(<a title="Erasure.this.global.Type" id="43163">pre</a>, <a title="Erasure.this.global.Symbol" id="43164">sym</a>, <a title="List[Erasure.this.global.Type]" id="43165">args</a>) =&gt;
          <span class="keyword">def</span> <a title="(tp: Erasure.this.global.Type)Boolean" id="43168">isGeneric</a>(<a title="Erasure.this.global.Type" id="43169">tp</a>: <a href="../symtab/Types.scala.html#26364" title="Erasure.this.global.Type">Type</a>): <span title="Boolean">Boolean</span> = <a href="#43169" title="Erasure.this.global.Type">tp</a> <span title="Boolean" class="keyword">match</span> {
            <span title="Boolean" class="keyword">case</span> TypeRef(<a title="Erasure.this.global.Type" id="43173">pre</a>, <a title="Erasure.this.global.Symbol" id="43174">sym</a>, <a title="List[Erasure.this.global.Type]" id="43175">args</a>) =&gt;
              <a href="#43174" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27059" title="(x$1: Boolean)Boolean">isAbstractType</a> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span>(<a href="#43174" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27155" title="(mask: Long)Boolean">owner</a> hasFlag <span title="Long(1048576L)">JAVA</span>) ||
              <a href="#43174" title="(x$1: AnyRef)Boolean">sym</a> <span title="(x$1: Boolean)Boolean">==</span> <a href="../symtab/Definitions.scala.html#28579" title="=&gt; Erasure.this.global.Symbol">ArrayClass</a> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> <a href="#43175" title="List[Erasure.this.global.Type]">args</a>.<span title="(x$1: Int)Boolean">length</span> == <span title="Int(1)" class="int">1</span> &amp;&amp; <a href="#43168" title="(tp: Erasure.this.global.Type)Boolean">isGeneric</a>(<a href="#43175" title="List[Erasure.this.global.Type]">args</a>.<span title="=&gt; Erasure.this.global.Type">head</span>) 
            <span title="Boolean" class="keyword">case</span> ExistentialType(<a title="List[Erasure.this.global.Symbol]" id="43678">tparams</a>, <a title="Erasure.this.global.Type" id="43679">restp</a>) =&gt;
              <a href="#43168" title="(tp: Erasure.this.global.Type)Boolean">isGeneric</a>(<a href="#43679" title="Erasure.this.global.Type">restp</a>)
            <span title="Boolean(false)" class="keyword">case</span> _ =&gt;
              <span title="Boolean(false)" class="keyword">false</span>
          }
          <span title="Erasure.this.global.Type" class="keyword">if</span> (<a href="#43164" title="(x$1: AnyRef)Boolean">sym</a> == <a href="../symtab/Definitions.scala.html#28579" title="=&gt; Erasure.this.global.Symbol">ArrayClass</a>)
            <span title="Erasure.this.global.Type" class="keyword">if</span> (<a href="#43168" title="(tp: Erasure.this.global.Type)Boolean">isGeneric</a>(<a href="#42969" title="Erasure.this.global.Type">tp</a>)) <a href="#42689" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.Type">erasedTypeRef</a>(<a href="../symtab/Definitions.scala.html#28729" title="=&gt; Erasure.this.global.Symbol">BoxedArrayClass</a>)
            <span class="keyword">else</span> <a href="../symtab/Types.scala.html#26454" title="(pre: Erasure.this.global.Type,sym: Erasure.this.global.Symbol,args: List[Erasure.this.global.Type])Erasure.this.global.Type">typeRef</a>(<a href="#42965" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">apply</a>(<a href="#43163" title="Erasure.this.global.Type">pre</a>), <a href="#43164" title="Erasure.this.global.Symbol">sym</a>, <a href="#43165" title="(f: (Erasure.this.global.Type) =&gt; Erasure.this.global.Type)(implicit bf: scala.collection.generic.BuilderFactory[Erasure.this.global.Type,List[Erasure.this.global.Type],List[Erasure.this.global.Type]])List[Erasure.this.global.Type]">args</a> <span title="scala.collection.generic.BuilderFactory[Erasure.this.global.Type,List[Erasure.this.global.Type],List#Coll]">map</span> <a href="#42892" title="Erasure.this.global.TypeMap{ ... }" class="keyword">this</a>)
          <span class="keyword">else</span> <span title="Erasure.this.global.Type" class="keyword">if</span> (<a href="#43164" title="(x$1: AnyRef)Boolean">sym</a> <span title="(x$1: Boolean)Boolean">==</span> <a href="../symtab/Definitions.scala.html#28447" title="=&gt; Erasure.this.global.Symbol">AnyClass</a> <span title="(x$1: Boolean)Boolean">||</span> <a href="#43164" title="(x$1: AnyRef)Boolean">sym</a> == <a href="../symtab/Definitions.scala.html#28449" title="=&gt; Erasure.this.global.Symbol">AnyValClass</a> || <a href="#43164" title="(x$1: AnyRef)Boolean">sym</a> == <a href="../symtab/Definitions.scala.html#28542" title="=&gt; Erasure.this.global.Symbol">SingletonClass</a>) <a href="#42689" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.Type">erasedTypeRef</a>(<a href="../symtab/Definitions.scala.html#28453" title="=&gt; Erasure.this.global.Symbol">ObjectClass</a>)
          <span class="keyword">else</span> <span title="Erasure.this.global.Type" class="keyword">if</span> (<a href="#43164" title="(x$1: AnyRef)Boolean">sym</a> == <a href="../symtab/Definitions.scala.html#28463" title="=&gt; Erasure.this.global.Symbol">UnitClass</a>) <a href="#42689" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.Type">erasedTypeRef</a>(<a href="../symtab/Definitions.scala.html#28741" title="=&gt; Erasure.this.global.Symbol">BoxedUnitClass</a>)
          <span class="keyword">else</span> <span title="Erasure.this.global.Type" class="keyword">if</span> (<a href="#43164" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27056" title="=&gt; Boolean">isClass</a>) 
            <a href="../symtab/Types.scala.html#26454" title="(pre: Erasure.this.global.Type,sym: Erasure.this.global.Symbol,args: List[Erasure.this.global.Type])Erasure.this.global.Type">typeRef</a>(<a href="#42965" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">apply</a>(<span title="Erasure.this.global.Type" class="keyword">if</span> (<a href="#43164" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27142" title="=&gt; Erasure.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27056" title="=&gt; Boolean">isClass</a>) <a href="#43164" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27142" title="=&gt; Erasure.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; Erasure.this.global.Type">tpe</a> <span class="keyword">else</span> <a href="#43163" title="Erasure.this.global.Type">pre</a>), <a href="#43164" title="Erasure.this.global.Symbol">sym</a>, List<span title="object Nil">(</span>))
          <span class="keyword">else</span> <a href="#42965" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">apply</a>(<a href="#43164" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27163" title="=&gt; Erasure.this.global.Type">info</a>)
        <span title="Erasure.this.global.Type" class="keyword">case</span> PolyType(<a title="List[Erasure.this.global.Symbol]" id="44109">tparams</a>, <a title="Erasure.this.global.Type" id="44110">restpe</a>) =&gt;
          <a href="#42965" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">apply</a>(<a href="#44110" title="Erasure.this.global.Type">restpe</a>)
        <span title="Erasure.this.global.Type" class="keyword">case</span> ExistentialType(<a title="List[Erasure.this.global.Symbol]" id="44118">tparams</a>, <a title="Erasure.this.global.Type" id="44119">restpe</a>) =&gt;
          <a href="#42965" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">apply</a>(<a href="#44119" title="Erasure.this.global.Type">restpe</a>)
        <span title="Erasure.this.global.MethodType" class="keyword">case</span> <a title="Erasure.this.global.MethodType" id="44125">mt</a> @ MethodType(<a title="List[Erasure.this.global.Symbol]" id="44169">params</a>, <a title="Erasure.this.global.Type" id="44170">restpe</a>) =&gt;
          <a href="../symtab/Types.scala.html#44127" title="(params: List[Erasure.this.global.Symbol],resultType: Erasure.this.global.Type)Erasure.this.global.MethodType">MethodType</a>(
            <a href="../symtab/Symbols.scala.html#26295" title="(syms: List[Erasure.this.global.Symbol])List[Erasure.this.global.Symbol]">cloneSymbols</a><span title="(f: (Erasure.this.global.Symbol) =&gt; Erasure.this.global.Symbol)(implicit bf: scala.collection.generic.BuilderFactory[Erasure.this.global.Symbol,List[Erasure.this.global.Symbol],List[Erasure.this.global.Symbol]])List[Erasure.this.global.Symbol]">(</span><a href="#44169" title="List[Erasure.this.global.Symbol]">params</a>) <span title="scala.collection.generic.BuilderFactory[Erasure.this.global.Symbol,List[Erasure.this.global.Symbol],List#Coll]">map</span> (<a title="Erasure.this.global.Symbol" id="44217">p</a> =&gt; <a href="#44217" title="Erasure.this.global.Symbol">p</a>.<a href="../symtab/Symbols.scala.html#27164" title="(info: Erasure.this.global.Type)p.type">setInfo</a>(<a href="#42965" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">apply</a>(<a href="#44217" title="Erasure.this.global.Symbol">p</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; Erasure.this.global.Type">tpe</a>))),
            <span title="Erasure.this.global.Type" class="keyword">if</span> (<a href="#44170" title="Erasure.this.global.Type">restpe</a>.<a href="../symtab/Types.scala.html#30366" title="(x$1: AnyRef)Boolean">typeSymbol</a> == <a href="../symtab/Definitions.scala.html#28463" title="=&gt; Erasure.this.global.Symbol">UnitClass</a>) 
              <a href="#42689" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.Type">erasedTypeRef</a>(<a href="../symtab/Definitions.scala.html#28463" title="=&gt; Erasure.this.global.Symbol">UnitClass</a>) 
            <span class="keyword">else</span> <span title="Erasure.this.global.Type" class="keyword">if</span> (<a href="../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../Settings.scala.html#37281" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">Xexperimental</a>.<a href="../Settings.scala.html#37988" title="=&gt; Boolean">value</a>)
              <a href="#42965" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">apply</a>(<a href="#44125" title="Erasure.this.global.MethodType">mt</a>.<a href="../symtab/Types.scala.html#44141" title="(actuals: List[Erasure.this.global.Type])Erasure.this.global.Type">resultType</a>(<a href="#44169" title="(f: (Erasure.this.global.Symbol) =&gt; Erasure.this.global.Type)(implicit bf: scala.collection.generic.BuilderFactory[Erasure.this.global.Type,List[Erasure.this.global.Type],List[Erasure.this.global.Symbol]])List[Erasure.this.global.Type]">params</a> <span title="scala.collection.generic.BuilderFactory[Erasure.this.global.Type,List[Erasure.this.global.Type],List#Coll]">map</span> (<a href="#44332" title="Erasure.this.global.Symbol">_</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; Erasure.this.global.Type">tpe</a>))) // this gets rid of DeBruijnTypes
            <span class="keyword">else</span>
              <a href="#42965" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">apply</a>(<a href="#44170" title="Erasure.this.global.Type">restpe</a>))
        <span title="Erasure.this.global.Type" class="keyword">case</span> RefinedType(<a title="List[Erasure.this.global.Type]" id="44426">parents</a>, <a title="Erasure.this.global.Scope" id="44427">decls</a>) =&gt;
          <span title="Erasure.this.global.Type" class="keyword">if</span> (<a href="#44426" title="List[Erasure.this.global.Type]">parents</a>.<span title="=&gt; Boolean">isEmpty</span>) <a href="#42689" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.Type">erasedTypeRef</a>(<a href="../symtab/Definitions.scala.html#28453" title="=&gt; Erasure.this.global.Symbol">ObjectClass</a>) 
          <span class="keyword">else</span> <a href="#42965" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">apply</a>(<a href="#44426" title="List[Erasure.this.global.Type]">parents</a>.<span title="=&gt; Erasure.this.global.Type">head</span>)
        <span title="Erasure.this.global.Type" class="keyword">case</span> AnnotatedType(_, <a title="Erasure.this.global.Type" id="44484">atp</a>, _) =&gt;
          <a href="#42965" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">apply</a>(<a href="#44484" title="Erasure.this.global.Type">atp</a>)
        <span title="Erasure.this.global.ClassInfoType" class="keyword">case</span> ClassInfoType(<a title="List[Erasure.this.global.Type]" id="44554">parents</a>, <a title="Erasure.this.global.Scope" id="44555">decls</a>, <a title="Erasure.this.global.Symbol" id="44556">clazz</a>) =&gt;
          <a href="../symtab/Types.scala.html#44491" title="(parents: List[Erasure.this.global.Type],decls: Erasure.this.global.Scope,typeSymbol: Erasure.this.global.Symbol)Erasure.this.global.ClassInfoType">ClassInfoType</a>(
            <span title="List[Erasure.this.global.Type]" class="keyword">if</span> (<span title="(x$1: Boolean)Boolean">(</span><a href="#44556" title="(x$1: AnyRef)Boolean">clazz</a> == <a href="../symtab/Definitions.scala.html#28453" title="=&gt; Erasure.this.global.Symbol">ObjectClass</a>) || (<a href="../symtab/Definitions.scala.html#28794" title="(sym: Erasure.this.global.Symbol)Boolean">isValueType</a>(<a href="#44556" title="Erasure.this.global.Symbol">clazz</a>))) List<span title="object Nil">(</span>) 
            <span class="keyword">else</span> <span title="List[Erasure.this.global.Type]" class="keyword">if</span> (<a href="#44556" title="(x$1: AnyRef)Boolean">clazz</a> == <a href="../symtab/Definitions.scala.html#28579" title="=&gt; Erasure.this.global.Symbol">ArrayClass</a>) <span title="(xs: Erasure.this.global.Type*)List[Erasure.this.global.Type]">List</span>(<a href="#42689" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.Type">erasedTypeRef</a>(<a href="../symtab/Definitions.scala.html#28453" title="=&gt; Erasure.this.global.Symbol">ObjectClass</a>))
            <span class="keyword">else</span> <a href="#42690" title="(tps: List[Erasure.this.global.Type])List[Erasure.this.global.Type]">removeDoubleObject</a>(<a href="#44554" title="(f: (Erasure.this.global.Type) =&gt; Erasure.this.global.Type)(implicit bf: scala.collection.generic.BuilderFactory[Erasure.this.global.Type,List[Erasure.this.global.Type],List[Erasure.this.global.Type]])List[Erasure.this.global.Type]">parents</a> <span title="scala.collection.generic.BuilderFactory[Erasure.this.global.Type,List[Erasure.this.global.Type],List#Coll]">map</span> <a href="#42892" title="Erasure.this.global.TypeMap{ ... }" class="keyword">this</a>),
            <a href="#44555" title="Erasure.this.global.Scope">decls</a>, <a href="#44556" title="Erasure.this.global.Symbol">clazz</a>)
        <span title="Erasure.this.global.Type" class="keyword">case</span> _ =&gt;
          <a href="../symtab/Types.scala.html#42954" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">mapOver</a>(<a href="#42969" title="Erasure.this.global.Type">tp</a>)
      }
    }
  }

  <span class="keyword">private</span> <span class="keyword">object</span> <a title="object Erasure.this.NeedsSigCollector" id="42682">NeedsSigCollector</a> <span title="ScalaObject" class="keyword">extends</span> <a href="../symtab/Types.scala.html#26483" title="Erasure.this.global.TypeCollector[Boolean]">TypeCollector</a>(<span title="Boolean(false)" class="keyword">false</span>) {
    <span class="keyword">def</span> <a title="(tp: Erasure.this.global.Type)Unit" id="45749">traverse</a>(<a title="Erasure.this.global.Type" id="45759">tp</a>: <a href="../symtab/Types.scala.html#26364" title="Erasure.this.global.Type">Type</a>) { 
      <span title="Unit" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="../symtab/Types.scala.html#45738" title="=&gt; Boolean">result</a>) { 
        <a href="#45759" title="Erasure.this.global.Type">tp</a> <span title="Unit" class="keyword">match</span> {
          <span title="Unit" class="keyword">case</span> <a title="Erasure.this.global.SubType" id="45764">st</a>: <a href="../symtab/Types.scala.html#26371" title="Erasure.this.global.SubType">SubType</a> =&gt;
            <a href="#45749" title="(tp: Erasure.this.global.Type)Unit">traverse</a>(<a href="#45764" title="Erasure.this.global.SubType">st</a>.<a href="../symtab/Types.scala.html#42974" title="=&gt; Erasure.this.global.Type">supertype</a>)
          <span title="Unit" class="keyword">case</span> TypeRef(<a title="Erasure.this.global.Type" id="45771">pre</a>, <a title="Erasure.this.global.Symbol" id="45772">sym</a>, <a title="List[Erasure.this.global.Type]" id="45773">args</a>) =&gt;
            <span title="Unit" class="keyword">if</span> (<a href="#45772" title="(x$1: AnyRef)Boolean">sym</a> == <a href="../symtab/Definitions.scala.html#28579" title="=&gt; Erasure.this.global.Symbol">ArrayClass</a>) <a href="#45773" title="(f: (Erasure.this.global.Type) =&gt; Unit)Unit">args</a> foreach <a href="#45749" title="(tp: Erasure.this.global.Type)Unit">traverse</a>
            <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<a href="#45772" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27083" title="(x$1: Boolean)Boolean">isTypeParameterOrSkolem</a> <span title="(x$1: Boolean)Boolean">||</span> <a href="#45772" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27086" title="=&gt; Boolean">isExistential</a> || <span title="=&gt; Boolean">!</span><a href="#45773" title="List[Erasure.this.global.Type]">args</a>.<span title="=&gt; Boolean">isEmpty</span>) <a href="../symtab/Types.scala.html#45739" title="(x$1: Boolean)Unit">result</a> = <span title="Boolean(true)" class="keyword">true</span>
            <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="#45772" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27142" title="=&gt; Erasure.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27094" title="=&gt; Boolean">isPackageClass</a>) <a href="#45749" title="(tp: Erasure.this.global.Type)Unit">traverse</a>(<a href="#45771" title="Erasure.this.global.Type">pre</a>)
          <span title="Unit" class="keyword">case</span> PolyType(_, _) | ExistentialType(_, _) =&gt;
            <a href="../symtab/Types.scala.html#45739" title="(x$1: Boolean)Unit">result</a> = <span title="Boolean(true)" class="keyword">true</span>
          <span title="Unit" class="keyword">case</span> RefinedType(<a title="List[Erasure.this.global.Type]" id="45854">parents</a>, <a title="Erasure.this.global.Scope" id="45855">decls</a>) =&gt;
            <span title="Unit" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="#45854" title="List[Erasure.this.global.Type]">parents</a>.<span title="=&gt; Boolean">isEmpty</span>) <a href="#45749" title="(tp: Erasure.this.global.Type)Unit">traverse</a>(<a href="#45854" title="List[Erasure.this.global.Type]">parents</a>.<span title="=&gt; Erasure.this.global.Type">head</span>)
          <span title="Unit" class="keyword">case</span> ClassInfoType(<a title="List[Erasure.this.global.Type]" id="45864">parents</a>, _, _) =&gt;
            <a href="#45864" title="(f: (Erasure.this.global.Type) =&gt; Unit)Unit">parents</a> foreach <a href="#45749" title="(tp: Erasure.this.global.Type)Unit">traverse</a>
	  <span title="Unit" class="keyword">case</span> AnnotatedType(_, <a title="Erasure.this.global.Type" id="45894">atp</a>, _) =&gt;
	    <a href="#45749" title="(tp: Erasure.this.global.Type)Unit">traverse</a>(<a href="#45894" title="Erasure.this.global.Type">atp</a>)
          <span title="Unit" class="keyword">case</span> _ =&gt;
            <a href="../symtab/Types.scala.html#42954" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">mapOver</a><span title="Unit">(</span><a href="#45759" title="Erasure.this.global.Type">tp</a>)
        }
      }
    }
  }

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tp: Erasure.this.global.Type)Boolean" id="42684">needsJavaSig</a>(<a title="Erasure.this.global.Type" id="45918">tp</a>: <a href="../symtab/Types.scala.html#26364" title="Erasure.this.global.Type">Type</a>) = <span title="(x$1: Boolean)Boolean">!</span><a href="../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../Settings.scala.html#37355" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">Ynogenericsig</a>.<a href="../Settings.scala.html#37988" title="=&gt; Boolean">value</a> &amp;&amp; <a href="#42682" title="object Erasure.this.NeedsSigCollector">NeedsSigCollector</a>.<a href="../symtab/Types.scala.html#45741" title="(tp: Erasure.this.global.Type)Boolean">collect</a>(<a href="#45918" title="Erasure.this.global.Type">tp</a>)

  <span class="keyword">private</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="scala.collection.immutable.Map[Erasure.this.global.Symbol,Char]" id="42686">tagOfClass</a> = <a title="[A, B](elems: (A, B)*)scala.collection.immutable.Map[A,B]" id="7918">Map</a><span title="(elems: (Erasure.this.global.Symbol, Char)*)scala.collection.immutable.Map[Erasure.this.global.Symbol,Char]">[</span><a href="../symtab/Symbols.scala.html#26286" title="Erasure.this.global.Symbol">Symbol</a>,<a title="Char" id="2184">Char</a>](
    <a href="../symtab/Definitions.scala.html#28465" title="(y: Char)(Erasure.this.global.Symbol, Char)">ByteClass</a> -&gt; <span title="Char('B')">BYTE_TAG</span>,
    <a href="../symtab/Definitions.scala.html#28469" title="(y: Char)(Erasure.this.global.Symbol, Char)">CharClass</a> -&gt; <span title="Char('C')">CHAR_TAG</span>,
    <a href="../symtab/Definitions.scala.html#28477" title="(y: Char)(Erasure.this.global.Symbol, Char)">DoubleClass</a> -&gt; <span title="Char('D')">DOUBLE_TAG</span>,
    <a href="../symtab/Definitions.scala.html#28475" title="(y: Char)(Erasure.this.global.Symbol, Char)">FloatClass</a> -&gt; <span title="Char('F')">FLOAT_TAG</span>,
    <a href="../symtab/Definitions.scala.html#28471" title="(y: Char)(Erasure.this.global.Symbol, Char)">IntClass</a> -&gt; <span title="Char('I')">INT_TAG</span>,
    <a href="../symtab/Definitions.scala.html#28473" title="(y: Char)(Erasure.this.global.Symbol, Char)">LongClass</a> -&gt; <span title="Char('J')">LONG_TAG</span>,
    <a href="../symtab/Definitions.scala.html#28467" title="(y: Char)(Erasure.this.global.Symbol, Char)">ShortClass</a> -&gt; <span title="Char('S')">SHORT_TAG</span>,
    <a href="../symtab/Definitions.scala.html#28479" title="(y: Char)(Erasure.this.global.Symbol, Char)">BooleanClass</a> -&gt; <span title="Char('Z')">BOOL_TAG</span>,
    <a href="../symtab/Definitions.scala.html#28463" title="(y: Char)(Erasure.this.global.Symbol, Char)">UnitClass</a> -&gt; <span title="Char('V')">VOID_TAG</span>
  )

  /** The Java signature of type 'info', for symbol sym. The symbol is used to give the right return
   *  type for constructors.
   */
  <span class="keyword">def</span> <a title="(sym: Erasure.this.global.Symbol,info: Erasure.this.global.Type)Option[String]" id="42687">javaSig</a>(<a title="Erasure.this.global.Symbol" id="45939">sym</a>: <a href="../symtab/Symbols.scala.html#26286" title="Erasure.this.global.Symbol">Symbol</a>, <a title="Erasure.this.global.Type" id="45940">info</a>: <a href="../symtab/Types.scala.html#26364" title="Erasure.this.global.Type">Type</a>): <a title="Option[String]" id="794">Option</a>[String] = <a href="../symtab/SymbolTable.scala.html#26256" title="(ph: scala.tools.nsc.Phase)(op: =&gt; Option[String])Option[String]">atPhase</a>(<a href="../Global.scala.html#39408" title="=&gt; Erasure.this.global.Run">currentRun</a>.<a href="../Global.scala.html#40428" title="=&gt; scala.tools.nsc.Phase">erasurePhase</a>) {

    <span class="keyword">def</span> <a title="(tp: Erasure.this.global.Type)String" id="45958">jsig</a>(<a title="Erasure.this.global.Type" id="45960">tp</a>: <a href="../symtab/Types.scala.html#26364" title="Erasure.this.global.Type">Type</a>): <span title="String">String</span> = <a href="#45959" title="(toplevel: Boolean,tparams: List[Erasure.this.global.Symbol],tp0: Erasure.this.global.Type)String">jsig2</a>(<span title="Boolean(false)" class="keyword">false</span>, List<span title="object Nil">(</span>), <a href="#45960" title="Erasure.this.global.Type">tp</a>)

    <span class="keyword">def</span> <a title="(toplevel: Boolean,tparams: List[Erasure.this.global.Symbol],tp0: Erasure.this.global.Type)String" id="45959">jsig2</a>(<a title="Boolean" id="45961">toplevel</a>: <span title="Boolean">Boolean</span>, <a title="List[Erasure.this.global.Symbol]" id="45962">tparams</a>: <span title="List[Erasure.this.global.Symbol]">List</span>[Symbol], <a title="Erasure.this.global.Type" id="45963">tp0</a>: <a href="../symtab/Types.scala.html#26364" title="Erasure.this.global.Type">Type</a>): <span title="String">String</span> = {
      <span class="keyword">val</span> <a title="Erasure.this.global.Type" id="45975">tp</a> = <a href="#45963" title="Erasure.this.global.Type">tp0</a>.<a href="../symtab/Types.scala.html#30393" title="=&gt; Erasure.this.global.Type">dealias</a> 
      <a href="#45975" title="Erasure.this.global.Type">tp</a> <span title="String" class="keyword">match</span> {
        <span title="String" class="keyword">case</span> <a title="Erasure.this.global.SubType" id="45979">st</a>: <a href="../symtab/Types.scala.html#26371" title="Erasure.this.global.SubType">SubType</a> =&gt;
          <a href="#45959" title="(toplevel: Boolean,tparams: List[Erasure.this.global.Symbol],tp0: Erasure.this.global.Type)String">jsig2</a>(<a href="#45961" title="Boolean">toplevel</a>, <a href="#45962" title="List[Erasure.this.global.Symbol]">tparams</a>, <a href="#45979" title="Erasure.this.global.SubType">st</a>.<a href="../symtab/Types.scala.html#42974" title="=&gt; Erasure.this.global.Type">supertype</a>)
        <span title="String" class="keyword">case</span> ExistentialType(<a title="List[Erasure.this.global.Symbol]" id="45984">tparams</a>, <a title="Erasure.this.global.Type" id="45985">tpe</a>) =&gt;
          <a href="#45959" title="(toplevel: Boolean,tparams: List[Erasure.this.global.Symbol],tp0: Erasure.this.global.Type)String">jsig2</a>(<a href="#45961" title="Boolean">toplevel</a>, <a href="#45984" title="List[Erasure.this.global.Symbol]">tparams</a>, <a href="#45985" title="Erasure.this.global.Type">tpe</a>)
        <span title="String" class="keyword">case</span> TypeRef(<a title="Erasure.this.global.Type" id="45993">pre</a>, <a title="Erasure.this.global.Symbol" id="45994">sym</a>, <a title="List[Erasure.this.global.Type]" id="45995">args</a>) =&gt;
          <span class="keyword">def</span> <a title="(tp: Erasure.this.global.Type)java.lang.String" id="45998">argSig</a>(<a title="Erasure.this.global.Type" id="46001">tp</a>: <a href="../symtab/Types.scala.html#26364" title="Erasure.this.global.Type">Type</a>) =
            <span title="java.lang.String" class="keyword">if</span> (<a href="#45962" title="(elem: Any)Boolean" id="25768">tparams</a> contains <a href="#46001" title="Erasure.this.global.Type">tp</a>.<a href="../symtab/Types.scala.html#30366" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a>) {
              <span class="keyword">val</span> <a title="Erasure.this.global.TypeBounds" id="46004">bounds</a> = <a href="#46001" title="Erasure.this.global.Type">tp</a>.<a href="../symtab/Types.scala.html#30366" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a>.<a href="../symtab/Symbols.scala.html#27163" title="=&gt; Erasure.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#30374" title="=&gt; Erasure.this.global.TypeBounds">bounds</a>
              <span title="java.lang.String" class="keyword">if</span> (<span title="=&gt; Boolean">!</span>(<a href="../symtab/Definitions.scala.html#28451" title="=&gt; Erasure.this.global.Symbol">AnyRefClass</a>.<a href="../symtab/Types.scala.html#30421" title="(that: Erasure.this.global.Type)Boolean">tpe</a> &lt;:&lt; <a href="#46004" title="Erasure.this.global.TypeBounds">bounds</a>.<a href="../symtab/Types.scala.html#46011" title="=&gt; Erasure.this.global.Type">hi</a>)) <span title="(x$1: Any)java.lang.String" class="string">&quot;+&quot;</span>+<a href="#45958" title="(tp: Erasure.this.global.Type)String">jsig</a>(<a href="#46004" title="Erasure.this.global.TypeBounds">bounds</a>.<a href="../symtab/Types.scala.html#46011" title="=&gt; Erasure.this.global.Type">hi</a>)
              <span class="keyword">else</span> <span title="java.lang.String" class="keyword">if</span> (<span title="=&gt; Boolean">!</span>(<a href="#46004" title="Erasure.this.global.TypeBounds">bounds</a>.<a href="../symtab/Types.scala.html#30421" title="(that: Erasure.this.global.Type)Boolean">lo</a> &lt;:&lt; <a href="../symtab/Definitions.scala.html#28455" title="=&gt; Erasure.this.global.Symbol">NullClass</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; Erasure.this.global.Type">tpe</a>)) <span title="(x$1: Any)java.lang.String" class="string">&quot;-&quot;</span>+<a href="#45958" title="(tp: Erasure.this.global.Type)String">jsig</a>(<a href="#46004" title="Erasure.this.global.TypeBounds">bounds</a>.<a href="../symtab/Types.scala.html#46009" title="=&gt; Erasure.this.global.Type">lo</a>)
              <span class="keyword">else</span> <span title="java.lang.String(&quot;*&quot;)" class="string">&quot;*&quot;</span>
            } <span class="keyword">else</span> <span title="String" class="keyword">if</span> (<a href="#46001" title="Erasure.this.global.Type">tp</a>.<a href="../symtab/Types.scala.html#30366" title="(x$1: AnyRef)Boolean">typeSymbol</a> == <a href="../symtab/Definitions.scala.html#28463" title="=&gt; Erasure.this.global.Symbol">UnitClass</a>) {
              <a href="#45958" title="(tp: Erasure.this.global.Type)String">jsig</a>(<a href="../symtab/Definitions.scala.html#28453" title="=&gt; Erasure.this.global.Symbol">ObjectClass</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; Erasure.this.global.Type">tpe</a>)
            } <span class="keyword">else</span> {
              <a href="../symtab/Definitions.scala.html#28775" title="(key: Erasure.this.global.Symbol)Option[Erasure.this.global.Symbol]" id="44613">boxedClass</a> get <a href="#46001" title="Erasure.this.global.Type">tp</a>.<a href="../symtab/Types.scala.html#30366" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a> <span title="String" class="keyword">match</span> {
                <span title="String" class="keyword">case</span> Some(<a title="Erasure.this.global.Symbol" id="46114">boxed</a>) =&gt; <a href="#45958" title="(tp: Erasure.this.global.Type)String">jsig</a>(<a href="#46114" title="Erasure.this.global.Symbol">boxed</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; Erasure.this.global.Type">tpe</a>)
                <span title="String" class="keyword">case</span> <span title="object None">None</span> =&gt; <a href="#45958" title="(tp: Erasure.this.global.Type)String">jsig</a>(<a href="#46001" title="Erasure.this.global.Type">tp</a>)
              }
            }
          <span class="keyword">def</span> <a title="=&gt; String" id="45999">classSig</a>: <span title="String">String</span> = 
            <span title="(x$1: Any)java.lang.String" class="string">&quot;L&quot;</span>+<a href="../symtab/SymbolTable.scala.html#26256" title="(ph: scala.tools.nsc.Phase)(op: =&gt; java.lang.String)java.lang.String">atPhase</a>(<a href="../Global.scala.html#39408" title="=&gt; Erasure.this.global.Run">currentRun</a>.<a href="../Global.scala.html#40434" title="=&gt; scala.tools.nsc.Phase">icodePhase</a>)(<a href="#45994" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27248" title="(x$1: Any)java.lang.String">fullNameString</a> + <a href="../typechecker/Analyzer.scala.html#40028" title="=&gt; scala.tools.nsc.Global">global</a>.<a href="../Global.scala.html#39379" title="object Erasure.this.global.genJVM">genJVM</a>.<a href="../backend/jvm/GenJVM.scala.html#46348" title="(sym: Erasure.this.global.genJVM.global.Symbol)java.lang.String">moduleSuffix</a>(<a href="#45994" title="Erasure.this.global.Symbol">sym</a>)).<a title="(x$1: Char,x$2: Char)java.lang.String" id="7093">replace</a>(<span title="Char('.')" class="char">'.'</span>, <span title="Char('/')" class="char">'/'</span>)
          <span class="keyword">def</span> <a title="=&gt; String" id="46000">classSigSuffix</a>: <span title="String">String</span> = 
            <span title="(x$1: Any)java.lang.String" class="string">&quot;.&quot;</span>+<a href="#45994" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27147" title="=&gt; Erasure.this.global.Name">name</a>
          <span title="String" class="keyword">if</span> (<a href="#45994" title="(x$1: AnyRef)Boolean">sym</a> == <a href="../symtab/Definitions.scala.html#28579" title="=&gt; Erasure.this.global.Symbol">ArrayClass</a>)
            <span title="Char('[')">ARRAY_TAG</span>.<span title="(x$1: Any)java.lang.String">toString</span>+(<a href="#45995" title="(f: (Erasure.this.global.Type) =&gt; String)(implicit bf: scala.collection.generic.BuilderFactory[String,List[String],List[Erasure.this.global.Type]])List[String]">args</a> <span title="scala.collection.generic.BuilderFactory[String,List[String],List#Coll]">map</span> <a href="#45958" title="(tp: Erasure.this.global.Type)String">jsig</a>).<span title="=&gt; String">mkString</span>
          <span class="keyword">else</span> <span title="String" class="keyword">if</span> (<a href="#45994" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27083" title="(x$1: Boolean)Boolean">isTypeParameterOrSkolem</a> &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#45994" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27142" title="=&gt; Erasure.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27083" title="=&gt; Boolean">isTypeParameterOrSkolem</a> /*not a higher-order type parameter, as these are suppressed*/)
            <span title="Char('T')">TVAR_TAG</span>.<span title="(x$1: Any)java.lang.String">toString</span><span title="(x$1: Any)java.lang.String">+</span><a href="#45994" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27147" title="=&gt; Erasure.this.global.Name">name</a>+<span title="java.lang.String(&quot;;&quot;)" class="string">&quot;;&quot;</span>
          <span class="keyword">else</span> <span title="String" class="keyword">if</span> (<a href="#45994" title="(x$1: AnyRef)Boolean">sym</a> <span title="(x$1: Boolean)Boolean">==</span> <a href="../symtab/Definitions.scala.html#28447" title="=&gt; Erasure.this.global.Symbol">AnyClass</a> <span title="(x$1: Boolean)Boolean">||</span> <a href="#45994" title="(x$1: AnyRef)Boolean">sym</a> == <a href="../symtab/Definitions.scala.html#28449" title="=&gt; Erasure.this.global.Symbol">AnyValClass</a> || <a href="#45994" title="(x$1: AnyRef)Boolean">sym</a> == <a href="../symtab/Definitions.scala.html#28542" title="=&gt; Erasure.this.global.Symbol">SingletonClass</a>) 
            <a href="#45958" title="(tp: Erasure.this.global.Type)String">jsig</a>(<a href="../symtab/Definitions.scala.html#28453" title="=&gt; Erasure.this.global.Symbol">ObjectClass</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; Erasure.this.global.Type">tpe</a>)
          <span class="keyword">else</span> <span title="String" class="keyword">if</span> (<a href="#45994" title="(x$1: AnyRef)Boolean">sym</a> == <a href="../symtab/Definitions.scala.html#28463" title="=&gt; Erasure.this.global.Symbol">UnitClass</a>) 
            <a href="#45958" title="(tp: Erasure.this.global.Type)String">jsig</a>(<a href="../symtab/Definitions.scala.html#28741" title="=&gt; Erasure.this.global.Symbol">BoxedUnitClass</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; Erasure.this.global.Type">tpe</a>)
          <span class="keyword">else</span> <span title="String" class="keyword">if</span> (<a href="#45994" title="(x$1: AnyRef)Boolean">sym</a> == <a href="../symtab/Definitions.scala.html#28457" title="=&gt; Erasure.this.global.Symbol">NothingClass</a>)
            <a href="#45958" title="(tp: Erasure.this.global.Type)String">jsig</a>(<a href="../symtab/Definitions.scala.html#28459" title="=&gt; Erasure.this.global.Symbol">RuntimeNothingClass</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; Erasure.this.global.Type">tpe</a>)
          <span class="keyword">else</span> <span title="String" class="keyword">if</span> (<a href="#45994" title="(x$1: AnyRef)Boolean">sym</a> == <a href="../symtab/Definitions.scala.html#28455" title="=&gt; Erasure.this.global.Symbol">NullClass</a>)
            <a href="#45958" title="(tp: Erasure.this.global.Type)String">jsig</a>(<a href="../symtab/Definitions.scala.html#28461" title="=&gt; Erasure.this.global.Symbol">RuntimeNullClass</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; Erasure.this.global.Type">tpe</a>)
          <span class="keyword">else</span> <span title="String" class="keyword">if</span> (<a href="../symtab/Definitions.scala.html#28792" title="(sym: Erasure.this.global.Symbol)Boolean">isValueClass</a>(<a href="#45994" title="Erasure.this.global.Symbol">sym</a>)) 
            <a href="#42685" title="(key: Erasure.this.global.Symbol)Char">tagOfClass</a>(<a href="#45994" title="Erasure.this.global.Symbol">sym</a>).<span title="()java.lang.String">toString</span>
          <span class="keyword">else</span> <span title="String" class="keyword">if</span> (<a href="#45994" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27056" title="=&gt; Boolean">isClass</a>)
            { 
              <span title="(x$1: Any)java.lang.String" class="keyword">if</span> (<a href="#42684" title="(tp: Erasure.this.global.Type)Boolean">needsJavaSig</a>(<a href="#45993" title="Erasure.this.global.Type">pre</a>)) {
                <span class="keyword">val</span> <a title="String" id="47028">s</a> = <a href="#45958" title="(tp: Erasure.this.global.Type)String">jsig</a>(<a href="#45993" title="Erasure.this.global.Type">pre</a>) 
                <span title="java.lang.String" class="keyword">if</span> (<a href="#47028" title="String">s</a>.<a title="(x$1: Int)Char" id="6986">charAt</a><a title="(x$1: Char)Boolean" id="2737">(</a><span title="Int(0)" class="int">0</span>) == <span title="Char('L')" class="char">'L'</span>) <a href="#47028" title="String">s</a>.<a title="(x$1: Int,x$2: Int)java.lang.String" id="7085">substring</a><span title="(x$1: Any)java.lang.String">(</span><span title="Int(0)" class="int">0</span>, <a href="#47028" title="String">s</a>.<a title="(x$1: Int)Int" id="6984">length</a> - <span title="Int(1)" class="int">1</span>) + <a href="#46000" title="=&gt; String">classSigSuffix</a>
                <span class="keyword">else</span> <a href="#45999" title="=&gt; String">classSig</a>
              } <span class="keyword">else</span> <a href="#45999" title="=&gt; String">classSig</a>
            } <span title="(x$1: Any)java.lang.String">+</span> {
              <span title="Any" class="keyword">if</span> (<a href="#45995" title="List[Erasure.this.global.Type]">args</a>.<span title="=&gt; Boolean">isEmpty</span>) <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span> <span class="keyword">else</span> <span title="(x$1: Any)java.lang.String" class="string">&quot;&lt;&quot;</span><span title="(x$1: Any)java.lang.String">+</span>(<a href="#45995" title="(f: (Erasure.this.global.Type) =&gt; java.lang.String)(implicit bf: scala.collection.generic.BuilderFactory[java.lang.String,List[java.lang.String],List[Erasure.this.global.Type]])List[java.lang.String]">args</a> <span title="scala.collection.generic.BuilderFactory[java.lang.String,List[java.lang.String],List#Coll]">map</span> <a href="#45998" title="(tp: Erasure.this.global.Type)java.lang.String">argSig</a>).<span title="=&gt; String">mkString</span>+<span title="java.lang.String(&quot;&gt;&quot;)" class="string">&quot;&gt;&quot;</span>
            } + <span title="java.lang.String(&quot;;&quot;)" class="string">&quot;;&quot;</span>
          <span class="keyword">else</span> <a href="#45958" title="(tp: Erasure.this.global.Type)String">jsig</a>(<a href="#42680" title="(v1: Erasure.this.global.Type)Erasure.this.global.Type">erasure</a>(<a href="#45975" title="Erasure.this.global.Type">tp</a>))
        <span title="java.lang.String" class="keyword">case</span> PolyType(<a title="List[Erasure.this.global.Symbol]" id="47187">tparams</a>, <a title="Erasure.this.global.Type" id="47188">restpe</a>) =&gt;
          <span class="keyword">def</span> <a title="(bounds: Erasure.this.global.TypeBounds)List[Erasure.this.global.Type]" id="47191">hiBounds</a>(<a title="Erasure.this.global.TypeBounds" id="47194">bounds</a>: <a href="../symtab/Types.scala.html#26399" title="Erasure.this.global.TypeBounds">TypeBounds</a>): <span title="List[Erasure.this.global.Type]">List</span>[Type] = <a href="#47194" title="Erasure.this.global.TypeBounds">bounds</a>.<a href="../symtab/Types.scala.html#46011" title="=&gt; Erasure.this.global.Type">hi</a>.<a href="../symtab/Types.scala.html#30392" title="=&gt; Erasure.this.global.Type">normalize</a> <span title="List[Erasure.this.global.Type]" class="keyword">match</span> {
            <span title="List[Erasure.this.global.Type]" class="keyword">case</span> RefinedType(<a title="List[Erasure.this.global.Type]" id="47200">parents</a>, _) =&gt; <a href="#47200" title="(f: (Erasure.this.global.Type) =&gt; Erasure.this.global.Type)(implicit bf: scala.collection.generic.BuilderFactory[Erasure.this.global.Type,List[Erasure.this.global.Type],List[Erasure.this.global.Type]])List[Erasure.this.global.Type]">parents</a> <span title="scala.collection.generic.BuilderFactory[Erasure.this.global.Type,List[Erasure.this.global.Type],List#Coll]">map</span> <a href="../typechecker/Infer.scala.html#40183" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">normalize</a>
            <span title="List[Erasure.this.global.Type]" class="keyword">case</span> <a title="Erasure.this.global.Type" id="47336">tp</a> =&gt; <span title="(xs: Erasure.this.global.Type*)List[Erasure.this.global.Type]">List</span>(<a href="#47336" title="Erasure.this.global.Type">tp</a>)
          }
          <span class="keyword">def</span> <a title="(bounds: List[Erasure.this.global.Type])java.lang.String" id="47192">boundSig</a>(<a title="List[Erasure.this.global.Type]" id="47346">bounds</a>: <span title="List[Erasure.this.global.Type]">List</span>[Type]) = {
            <span class="keyword">def</span> <a title="(t: Erasure.this.global.Type)Boolean" id="47347">isClassBound</a>(<a title="Erasure.this.global.Type" id="47349">t</a>: <a href="../symtab/Types.scala.html#26364" title="Erasure.this.global.Type">Type</a>) = <span title="=&gt; Boolean">!</span><a href="#47349" title="Erasure.this.global.Type">t</a>.<a href="../symtab/Types.scala.html#30366" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a>.<a href="../symtab/Symbols.scala.html#27082" title="=&gt; Boolean">isTrait</a>
            <span class="keyword">val</span> <a title="String" id="47348">classBound</a> = <a href="#47346" title="(p: (Erasure.this.global.Type) =&gt; Boolean)Option[Erasure.this.global.Type]" id="29127">bounds</a> find <a href="#47347" title="(t: Erasure.this.global.Type)Boolean">isClassBound</a> <span title="String" class="keyword">match</span> {
              <span title="String" class="keyword">case</span> Some(<a title="Erasure.this.global.Type" id="47398">t</a>) =&gt; <a href="#45958" title="(tp: Erasure.this.global.Type)String">jsig</a>(<a href="#47398" title="Erasure.this.global.Type">t</a>)
              <span title="java.lang.String(&quot;&quot;)" class="keyword">case</span> <span title="object None">None</span> =&gt; <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>
            }
            <span title="(x$1: Any)java.lang.String" class="string">&quot;:&quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#47348" title="String">classBound</a>+(<span class="keyword">for</span> (<a title="Erasure.this.global.Type" id="47420">t</a> &lt;- <a href="#47346" title="(f: (Erasure.this.global.Type) =&gt; java.lang.String)(implicit bf: scala.collection.generic.BuilderFactory[java.lang.String,List[java.lang.String],List[Erasure.this.global.Type]])List[java.lang.String]">bounds</a> <span class="keyword">if</span> <span title="=&gt; Boolean">!</span><a href="#47347" title="(t: Erasure.this.global.Type)Boolean">isClassBound</a>(<a href="#47420" title="Erasure.this.global.Type">t</a>)) <span class="keyword">yield</span> <span title="(x$1: Any)java.lang.String" class="string">&quot;:&quot;</span>+<a href="#45958" title="(tp: Erasure.this.global.Type)String">jsig</a>(<a href="#47420" title="Erasure.this.global.Type">t</a>)).<span title="=&gt; String">mkString</span>
          }
          <span title="(assertion: Boolean)Unit">assert</span>(<span title="=&gt; Boolean">!</span><a href="#47187" title="List[Erasure.this.global.Symbol]">tparams</a>.<span title="=&gt; Boolean">isEmpty</span>)
          <span class="keyword">def</span> <a title="(tsym: Erasure.this.global.Symbol)java.lang.String" id="47193">paramSig</a>(<a title="Erasure.this.global.Symbol" id="47514">tsym</a>: <a href="../symtab/Symbols.scala.html#26286" title="Erasure.this.global.Symbol">Symbol</a>) = <a href="#47514" title="Erasure.this.global.Symbol">tsym</a>.<a href="../symtab/Symbols.scala.html#27147" title="(other: String)java.lang.String" id="8172">name</a>+<a href="#47192" title="(bounds: List[Erasure.this.global.Type])java.lang.String">boundSig</a>(<a href="#47191" title="(bounds: Erasure.this.global.TypeBounds)List[Erasure.this.global.Type]">hiBounds</a>(<a href="#47514" title="Erasure.this.global.Symbol">tsym</a>.<a href="../symtab/Symbols.scala.html#27163" title="=&gt; Erasure.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#30374" title="=&gt; Erasure.this.global.TypeBounds">bounds</a>))
          <span title="(x$1: Any)java.lang.String">(</span><span title="java.lang.String" class="keyword">if</span> (<a href="#45961" title="Boolean">toplevel</a>) <span title="(x$1: Any)java.lang.String" class="string">&quot;&lt;&quot;</span><span title="(x$1: Any)java.lang.String">+</span>(<a href="#47187" title="(f: (Erasure.this.global.Symbol) =&gt; java.lang.String)(implicit bf: scala.collection.generic.BuilderFactory[java.lang.String,List[java.lang.String],List[Erasure.this.global.Symbol]])List[java.lang.String]">tparams</a> <span title="scala.collection.generic.BuilderFactory[java.lang.String,List[java.lang.String],List#Coll]">map</span> <a href="#47193" title="(tsym: Erasure.this.global.Symbol)java.lang.String">paramSig</a>).<span title="=&gt; String">mkString</span>+<span title="java.lang.String(&quot;&gt;&quot;)" class="string">&quot;&gt;&quot;</span> <span class="keyword">else</span> <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>)+<a href="#45958" title="(tp: Erasure.this.global.Type)String">jsig</a>(<a href="#47188" title="Erasure.this.global.Type">restpe</a>) 
        <span title="java.lang.String" class="keyword">case</span> MethodType(<a title="List[Erasure.this.global.Symbol]" id="47641">params</a>, <a title="Erasure.this.global.Type" id="47642">restpe</a>) =&gt;
          <span title="(x$1: Any)java.lang.String" class="string">&quot;(&quot;</span><span title="(x$1: Any)java.lang.String">+</span>(<a href="#47641" title="(f: (Erasure.this.global.Symbol) =&gt; Erasure.this.global.Type)(implicit bf: scala.collection.generic.BuilderFactory[Erasure.this.global.Type,List[Erasure.this.global.Type],List[Erasure.this.global.Symbol]])List[Erasure.this.global.Type]">params</a> <span title="(f: (Erasure.this.global.Type) =&gt; String)(implicit bf: scala.collection.generic.BuilderFactory[String,List[String],List[Erasure.this.global.Type]])List[String]">map</span> (<a href="#47653" title="Erasure.this.global.Symbol">_</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; Erasure.this.global.Type">tpe</a>) <span title="scala.collection.generic.BuilderFactory[String,List[String],List#Coll]">map</span> <a href="#45958" title="(tp: Erasure.this.global.Type)String">jsig</a>).<span title="=&gt; String">mkString</span><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot;)&quot;)" class="string">&quot;)&quot;</span>+
          (<span title="Any" class="keyword">if</span> (<a href="#47642" title="Erasure.this.global.Type">restpe</a>.<a href="../symtab/Types.scala.html#30366" title="(x$1: AnyRef)Boolean">typeSymbol</a> <span title="(x$1: Boolean)Boolean">==</span> <a href="../symtab/Definitions.scala.html#28463" title="=&gt; Erasure.this.global.Symbol">UnitClass</a> || <a href="#45939" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27075" title="=&gt; Boolean">isConstructor</a>) <span title="Char('V')">VOID_TAG</span>.<span title="()java.lang.String">toString</span> <span class="keyword">else</span> <a href="#45958" title="(tp: Erasure.this.global.Type)String">jsig</a>(<a href="#47642" title="Erasure.this.global.Type">restpe</a>))
        <span title="String" class="keyword">case</span> RefinedType(<a title="List[Erasure.this.global.Type]" id="47880">parents</a>, <a title="Erasure.this.global.Scope" id="47881">decls</a>) <span class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="#47880" title="List[Erasure.this.global.Type]">parents</a>.<span title="=&gt; Boolean">isEmpty</span>) =&gt;
          <a href="#45958" title="(tp: Erasure.this.global.Type)String">jsig</a>(<a href="#47880" title="List[Erasure.this.global.Type]">parents</a>.<span title="=&gt; Erasure.this.global.Type">head</span>)
        <span title="String" class="keyword">case</span> ClassInfoType(<a title="List[Erasure.this.global.Type]" id="47889">parents</a>, _, _) =&gt;
          (<a href="#47889" title="(f: (Erasure.this.global.Type) =&gt; String)(implicit bf: scala.collection.generic.BuilderFactory[String,List[String],List[Erasure.this.global.Type]])List[String]">parents</a> <span title="scala.collection.generic.BuilderFactory[String,List[String],List#Coll]">map</span> <a href="#45958" title="(tp: Erasure.this.global.Type)String">jsig</a>).<span title="=&gt; String">mkString</span>
        <span title="String" class="keyword">case</span> AnnotatedType(_, <a title="Erasure.this.global.Type" id="47989">atp</a>, _) =&gt;
          <a href="#45958" title="(tp: Erasure.this.global.Type)String">jsig</a>(<a href="#47989" title="Erasure.this.global.Type">atp</a>)
        <span title="String" class="keyword">case</span> _ =&gt;
          <span class="keyword">val</span> <a title="Erasure.this.global.Type" id="47994">etp</a> = <a href="#42680" title="(v1: Erasure.this.global.Type)Erasure.this.global.Type">erasure</a>(<a href="#45975" title="Erasure.this.global.Type">tp</a>)
          <span title="String" class="keyword">if</span> (<a href="#47994" title="(x$1: AnyRef)Boolean">etp</a> eq <a href="#45975" title="Erasure.this.global.Type">tp</a>) <span title="Nothing" class="keyword">throw</span> <span title="Erasure.this.UnknownSig" class="keyword">new</span> <a href="#42688" title="Erasure.this.UnknownSig">UnknownSig</a>
          <span class="keyword">else</span> <a href="#45958" title="(tp: Erasure.this.global.Type)String">jsig</a>(<a href="#47994" title="Erasure.this.global.Type">etp</a>)
      }
    }
    <span title="Option[String]" class="keyword">if</span> (<a href="#42684" title="(tp: Erasure.this.global.Type)Boolean">needsJavaSig</a>(<a href="#45940" title="Erasure.this.global.Type">info</a>)) {
      <span class="keyword">try</span> {
        //println(&quot;Java sig of &quot;+sym+&quot; is &quot;+jsig2(true, List(), sym.info))//DEBUG
        <a title="(x: String)Some[String]" id="267">Some</a>(<a href="#45959" title="(toplevel: Boolean,tparams: List[Erasure.this.global.Symbol],tp0: Erasure.this.global.Type)String">jsig2</a>(<span title="Boolean(true)" class="keyword">true</span>, List<span title="object Nil">(</span>), <a href="#45940" title="Erasure.this.global.Type">info</a>))
      } <span class="keyword">catch</span> {
        <span title="None.type" class="keyword">case</span> <a title="Erasure.this.UnknownSig" id="48023">ex</a>: <a href="#42688" title="Erasure.this.UnknownSig">UnknownSig</a> =&gt; <span title="object None">None</span>
      }
    }
    <span class="keyword">else</span> <span title="object None">None</span>
  }

  <span class="keyword">class</span> <a title="class UnknownSig extends java.lang.Exception with ScalaObject" id="42688">UnknownSig</a> <span title="ScalaObject" class="keyword">extends</span> <a title="java.lang.Exception" id="7889">Exception</a>

  /** Type reference after erasure */
  <span class="keyword">def</span> <a title="(sym: Erasure.this.global.Symbol)Erasure.this.global.Type" id="42689">erasedTypeRef</a>(<a title="Erasure.this.global.Symbol" id="43692">sym</a>: <a href="../symtab/Symbols.scala.html#26286" title="Erasure.this.global.Symbol">Symbol</a>): <a href="../symtab/Types.scala.html#26364" title="Erasure.this.global.Type">Type</a> =
    <a href="../symtab/Types.scala.html#26454" title="(pre: Erasure.this.global.Type,sym: Erasure.this.global.Symbol,args: List[Erasure.this.global.Type])Erasure.this.global.Type">typeRef</a>(<a href="#42680" title="(v1: Erasure.this.global.Type)Erasure.this.global.Type">erasure</a>(<a href="#43692" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27142" title="=&gt; Erasure.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; Erasure.this.global.Type">tpe</a>), <a href="#43692" title="Erasure.this.global.Symbol">sym</a>, List<span title="object Nil">(</span>))

  /** Remove duplicate references to class Object in a list of parent classes
   * todo: needed?
   */
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tps: List[Erasure.this.global.Type])List[Erasure.this.global.Type]" id="42690">removeDoubleObject</a>(<a title="List[Erasure.this.global.Type]" id="44913">tps</a>: <span title="List[Erasure.this.global.Type]">List</span>[Type]): <span title="List[Erasure.this.global.Type]">List</span>[Type] = <a href="#44913" title="List[Erasure.this.global.Type]">tps</a> <span title="List[Erasure.this.global.Type]" class="keyword">match</span> {
    <span title="List[Nothing]" class="keyword">case</span> <a href="#48063" title="(x: List[Erasure.this.global.Type])Some[List[Erasure.this.global.Type]]">List</a>() =&gt; List<span title="object Nil">(</span>)
    <span title="List[Erasure.this.global.Type]" class="keyword">case</span> <a title="Erasure.this.global.Type" id="48129">tp</a> :: <a title="List[Erasure.this.global.Type]" id="48130">tps1</a> =&gt; 
      <span title="List[Erasure.this.global.Type]" class="keyword">if</span> (<a href="#48129" title="Erasure.this.global.Type">tp</a>.<a href="../symtab/Types.scala.html#30366" title="(x$1: AnyRef)Boolean">typeSymbol</a> == <a href="../symtab/Definitions.scala.html#28453" title="=&gt; Erasure.this.global.Symbol">ObjectClass</a>) <a href="#48129" title="Erasure.this.global.Type">tp</a> <a href="#48140" title="Erasure.this.global.Type">::</a> <a href="#48130" title="List[Erasure.this.global.Type]">tps1</a>.<span title="(p: (Erasure.this.global.Type) =&gt; Boolean)List[Erasure.this.global.Type]">filter</span><span title="(x: Erasure.this.global.Type)List[Erasure.this.global.Type]">(</span><a href="#48143" title="Erasure.this.global.Type">_</a>.<a href="../symtab/Types.scala.html#30366" title="(x$1: AnyRef)Boolean">typeSymbol</a> != <a href="../symtab/Definitions.scala.html#28453" title="=&gt; Erasure.this.global.Symbol">ObjectClass</a>)
      <span class="keyword">else</span> <a href="#48129" title="Erasure.this.global.Type">tp</a> <a href="#48160" title="Erasure.this.global.Type">::</a> <a href="#42690" title="(tps: List[Erasure.this.global.Type])List[Erasure.this.global.Type]">removeDoubleObject</a><span title="(x: Erasure.this.global.Type)List[Erasure.this.global.Type]">(</span><a href="#48130" title="List[Erasure.this.global.Type]">tps1</a>)
  }

  /** &lt;p&gt;
   *    The symbol's erased info. This is the type's erasure, except for the
   *    following symbols:
   *  &lt;/p&gt;
   *  &lt;ul&gt;
   *    &lt;li&gt;
   *      For &lt;code&gt;$asInstanceOf&lt;/code&gt; : &lt;code&gt;[T]T&lt;/code&gt;
   *    &lt;/li&gt;
   *    &lt;li&gt;
   *      For &lt;code&gt;$isInstanceOf&lt;/code&gt; : &lt;code&gt;[T]scala#Boolean&lt;/code&gt;
   *    &lt;/li&gt;
   *    &lt;li&gt;
   *      For class &lt;code&gt;Array&lt;/code&gt; : &lt;code&gt;[T]C&lt;/code&gt; where
   *      &lt;code&gt;C&lt;/code&gt; is the erased classinfo of the &lt;code&gt;Array&lt;/code&gt; class
   *    &lt;/li&gt;
   *    &lt;li&gt;
   *      For &lt;code&gt;Array[T].&amp;lt;init&amp;gt;&lt;/code&gt; : &lt;code&gt;{scala#Int)Array[T]&lt;/code&gt;
   *    &lt;/li&gt;
   *    &lt;li&gt;
   *      For a type parameter : A type bounds type consisting of the erasures
   *      of its bounds.
   *    &lt;/li&gt;
   *  &lt;/ul&gt;
   */
  <span class="keyword">def</span> <a title="(sym: Erasure.this.global.Symbol,tp: Erasure.this.global.Type)Erasure.this.global.Type" id="42691">transformInfo</a>(<a title="Erasure.this.global.Symbol" id="48170">sym</a>: <a href="../symtab/Symbols.scala.html#26286" title="Erasure.this.global.Symbol">Symbol</a>, <a title="Erasure.this.global.Type" id="48171">tp</a>: <a href="../symtab/Types.scala.html#26364" title="Erasure.this.global.Type">Type</a>): <a href="../symtab/Types.scala.html#26364" title="Erasure.this.global.Type">Type</a> =
    <span title="Erasure.this.global.Type" class="keyword">if</span> (<a href="#48170" title="(x$1: AnyRef)Boolean">sym</a> == <a href="../symtab/Definitions.scala.html#28711" title="=&gt; Erasure.this.global.Symbol">Object_asInstanceOf</a>)
      <a href="#48170" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27163" title="=&gt; Erasure.this.global.Type">info</a>
    <span class="keyword">else</span> <span title="Erasure.this.global.Type" class="keyword">if</span> (<a href="#48170" title="(x$1: AnyRef)Boolean">sym</a> <span title="(x$1: Boolean)Boolean">==</span> <a href="../symtab/Definitions.scala.html#28708" title="=&gt; Erasure.this.global.Symbol">Object_isInstanceOf</a> || <a href="#48170" title="(x$1: AnyRef)Boolean">sym</a> == <a href="../symtab/Definitions.scala.html#28579" title="=&gt; Erasure.this.global.Symbol">ArrayClass</a>) 
      <a href="../symtab/Types.scala.html#44057" title="(typeParams: List[Erasure.this.global.Symbol],resultType: Erasure.this.global.Type)Erasure.this.global.PolyType">PolyType</a>(<a href="#48170" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27163" title="=&gt; Erasure.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#30387" title="=&gt; List[Erasure.this.global.Symbol]">typeParams</a>, <a href="#42680" title="(v1: Erasure.this.global.Type)Erasure.this.global.Type">erasure</a>(<a href="#48170" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27163" title="=&gt; Erasure.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#30379" title="=&gt; Erasure.this.global.Type">resultType</a>))
    <span class="keyword">else</span> <span title="Erasure.this.global.Type" class="keyword">if</span> (<a href="#48170" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27059" title="=&gt; Boolean">isAbstractType</a>) 
      <a href="../symtab/Types.scala.html#26448" title="(lo: Erasure.this.global.Type,hi: Erasure.this.global.Type)Erasure.this.global.TypeBounds">mkTypeBounds</a>(<a href="../symtab/Types.scala.html#26378" title="object Erasure.this.global.WildcardType">WildcardType</a>, <a href="../symtab/Types.scala.html#26378" title="object Erasure.this.global.WildcardType">WildcardType</a>)
    <span class="keyword">else</span> <span title="Erasure.this.global.Type" class="keyword">if</span> (<a href="#48170" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27054" title="(x$1: Boolean)Boolean">isTerm</a> &amp;&amp; <a href="#48170" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27142" title="(x$1: AnyRef)Boolean">owner</a> == <a href="../symtab/Definitions.scala.html#28579" title="=&gt; Erasure.this.global.Symbol">ArrayClass</a>) {
      <span title="Erasure.this.global.Type" class="keyword">if</span> (<a href="#48170" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27073" title="=&gt; Boolean">isClassConstructor</a>)
        <a href="#48171" title="Erasure.this.global.Type">tp</a> <span title="Erasure.this.global.Type" class="keyword">match</span> {
          <span title="Erasure.this.global.MethodType" class="keyword">case</span> MethodType(<a title="List[Erasure.this.global.Symbol]" id="48264">params</a>, TypeRef(<a title="Erasure.this.global.Type" id="48268">pre</a>, <a title="Erasure.this.global.Symbol" id="48269">sym</a>, <a title="List[Erasure.this.global.Type]" id="48270">args</a>)) =&gt;
            <a href="../symtab/Types.scala.html#44127" title="(params: List[Erasure.this.global.Symbol],resultType: Erasure.this.global.Type)Erasure.this.global.MethodType">MethodType</a>(<a href="../symtab/Symbols.scala.html#26295" title="(syms: List[Erasure.this.global.Symbol])List[Erasure.this.global.Symbol]">cloneSymbols</a><span title="(f: (Erasure.this.global.Symbol) =&gt; Erasure.this.global.Symbol)(implicit bf: scala.collection.generic.BuilderFactory[Erasure.this.global.Symbol,List[Erasure.this.global.Symbol],List[Erasure.this.global.Symbol]])List[Erasure.this.global.Symbol]">(</span><a href="#48264" title="List[Erasure.this.global.Symbol]">params</a>) <span title="scala.collection.generic.BuilderFactory[Erasure.this.global.Symbol,List[Erasure.this.global.Symbol],List#Coll]">map</span> (<a title="Erasure.this.global.Symbol" id="48309">p</a> =&gt; <a href="#48309" title="Erasure.this.global.Symbol">p</a>.<a href="../symtab/Symbols.scala.html#27164" title="(info: Erasure.this.global.Type)p.type">setInfo</a>(<a href="#42680" title="(v1: Erasure.this.global.Type)Erasure.this.global.Type">erasure</a>(<a href="#48309" title="Erasure.this.global.Symbol">p</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; Erasure.this.global.Type">tpe</a>))),
                       <a href="../symtab/Types.scala.html#26454" title="(pre: Erasure.this.global.Type,sym: Erasure.this.global.Symbol,args: List[Erasure.this.global.Type])Erasure.this.global.Type">typeRef</a>(<a href="#42680" title="(v1: Erasure.this.global.Type)Erasure.this.global.Type">erasure</a>(<a href="#48268" title="Erasure.this.global.Type">pre</a>), <a href="#48269" title="Erasure.this.global.Symbol">sym</a>, <a href="#48270" title="List[Erasure.this.global.Type]">args</a>))
        }
      <span class="keyword">else</span> <span title="Erasure.this.global.Type" class="keyword">if</span> (<a href="#48170" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27147" title="(x$1: AnyRef)Boolean">name</a> == <a href="../symtab/StdNames.scala.html#26690" title="object Erasure.this.global.nme">nme</a>.<a href="../symtab/StdNames.scala.html#30014" title="=&gt; Erasure.this.global.Name">apply</a>) 
        <a href="#48171" title="Erasure.this.global.Type">tp</a>
      <span class="keyword">else</span> <span title="Erasure.this.global.Type" class="keyword">if</span> (<a href="#48170" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27147" title="(x$1: AnyRef)Boolean">name</a> == <a href="../symtab/StdNames.scala.html#26690" title="object Erasure.this.global.nme">nme</a>.<a href="../symtab/StdNames.scala.html#30170" title="=&gt; Erasure.this.global.Name">update</a>)
        <a href="#48171" title="Erasure.this.global.Type">tp</a> <span title="Erasure.this.global.Type" class="keyword">match</span> {
          <span title="Erasure.this.global.MethodType" class="keyword">case</span> MethodType(<a href="#48366" title="(x: List[Erasure.this.global.Symbol])Some[List[Erasure.this.global.Symbol]]">List</a>(<a title="Erasure.this.global.Symbol" id="48375">index</a>, <a title="Erasure.this.global.Symbol" id="48376">tvar</a>), <a title="Erasure.this.global.Type" id="48378">restpe</a>) =&gt;
            <a href="../symtab/Types.scala.html#44127" title="(params: List[Erasure.this.global.Symbol],resultType: Erasure.this.global.Type)Erasure.this.global.MethodType">MethodType</a>(<span title="(xs: Erasure.this.global.Symbol*)List[Erasure.this.global.Symbol]">List</span>(<a href="#48375" title="Erasure.this.global.Symbol">index</a>.<a href="../symtab/Symbols.scala.html#27187" title="=&gt; Erasure.this.global.Symbol">cloneSymbol</a>.<a href="../symtab/Symbols.scala.html#27164" title="(info: Erasure.this.global.Type)Erasure.this.global.Symbol">setInfo</a>(<a href="#42680" title="(v1: Erasure.this.global.Type)Erasure.this.global.Type">erasure</a>(<a href="#48375" title="Erasure.this.global.Symbol">index</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; Erasure.this.global.Type">tpe</a>)), <a href="#48376" title="Erasure.this.global.Symbol">tvar</a>),
                       <a href="#42689" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.Type">erasedTypeRef</a>(<a href="../symtab/Definitions.scala.html#28463" title="=&gt; Erasure.this.global.Symbol">UnitClass</a>))
        }
      <span class="keyword">else</span> <a href="#42680" title="(v1: Erasure.this.global.Type)Erasure.this.global.Type">erasure</a>(<a href="#48171" title="Erasure.this.global.Type">tp</a>)
    } <span class="keyword">else</span> <span title="Erasure.this.global.Type" class="keyword">if</span> (
      <a href="#48170" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27142" title="(x$1: AnyRef)Boolean">owner</a> <span title="(x$1: Boolean)Boolean">!=</span> <a href="../symtab/Symbols.scala.html#26293" title="object Erasure.this.global.NoSymbol">NoSymbol</a> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span>
      <a href="#48170" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27142" title="=&gt; Erasure.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27142" title="(x$1: AnyRef)Boolean">owner</a> == <a href="../symtab/Definitions.scala.html#28579" title="=&gt; Erasure.this.global.Symbol">ArrayClass</a> &amp;&amp;
      <a href="#48170" title="(x$1: AnyRef)Boolean">sym</a> == <a href="../symtab/Definitions.scala.html#28582" title="=&gt; Erasure.this.global.Symbol">Array_update</a>.<a href="../symtab/Symbols.scala.html#27176" title="=&gt; List[List[Erasure.this.global.Symbol]]">paramss</a>.<span title="(n: Int)Erasure.this.global.Symbol">head</span>(<span title="Int(1)" class="int">1</span>)) {
      // special case for Array.update: the non-erased type remains, i.e. (Int,A)Unit
      // since the erasure type map gets applied to every symbol, we have to catch the
      // symbol here
      <a href="#48171" title="Erasure.this.global.Type">tp</a>
    } <span class="keyword">else</span> {
/*
      val erased = 
        if (sym.isGetter &amp;&amp; sym.tpe.isInstanceOf[MethodType]) 
          erasure mapOver sym.tpe // for getters, unlike for normal methods, always convert Unit to BoxedUnit.
        else 
          erasure(tp)
*/
      <a href="AddInterfaces.scala.html#42658" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">transformMixinInfo</a>(<a href="#42680" title="(v1: Erasure.this.global.Type)Erasure.this.global.Type">erasure</a>(<a href="#48171" title="Erasure.this.global.Type">tp</a>))
    }

  <span class="keyword">val</span> <a title="Erasure.this.global.TypeMap" id="42692">deconstMap</a> = <a href="#45574" title="Erasure.this.global.TypeMap{ ... }" class="keyword">new</a> <a href="../symtab/Types.scala.html#26479" title="anonymous class $anon extends Erasure.this.global.TypeMap" id="45574">TypeMap</a> {
   <span class="keyword">def</span> <a title="(tp: Erasure.this.global.Type)Erasure.this.global.Type" id="45576">apply</a>(<a title="Erasure.this.global.Type" id="45580">tp</a>: <a href="../symtab/Types.scala.html#26364" title="Erasure.this.global.Type">Type</a>): <a href="../symtab/Types.scala.html#26364" title="Erasure.this.global.Type">Type</a> = <a href="#45580" title="Erasure.this.global.Type">tp</a> <span title="Erasure.this.global.Type" class="keyword">match</span> {
     <span title="Erasure.this.global.Type" class="keyword">case</span> PolyType(_, _) =&gt; <a href="../symtab/Types.scala.html#42954" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">mapOver</a>(<a href="#45580" title="Erasure.this.global.Type">tp</a>)
     <span title="Erasure.this.global.Type" class="keyword">case</span> MethodType(_, _) =&gt; <a href="../symtab/Types.scala.html#42954" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">mapOver</a>(<a href="#45580" title="Erasure.this.global.Type">tp</a>)
     <span title="Erasure.this.global.Type" class="keyword">case</span> _ =&gt; <a href="#45580" title="Erasure.this.global.Type">tp</a>.<a href="../symtab/Types.scala.html#30371" title="=&gt; Erasure.this.global.Type">deconst</a>
   }
  }

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: Erasure.this.global.Symbol)Boolean" id="42694">isSeqClass</a>(<a title="Erasure.this.global.Symbol" id="48486">sym</a>: <a href="../symtab/Symbols.scala.html#26286" title="Erasure.this.global.Symbol">Symbol</a>) =
    <span title="(x$1: Boolean)Boolean">(</span><a href="../symtab/Symbols.scala.html#27182" title="(that: Erasure.this.global.Symbol)Boolean">SeqClass</a> isNonBottomSubClass <a href="#48486" title="Erasure.this.global.Symbol">sym</a>) &amp;&amp; (<a href="#48486" title="(x$1: AnyRef)Boolean">sym</a> != <a href="../symtab/Definitions.scala.html#28453" title="=&gt; Erasure.this.global.Symbol">ObjectClass</a>)

  /** The symbol which is called by a bridge;
   *  @pre phase &gt; erasure
   */
  <span class="keyword">def</span> <a title="(bridge: Erasure.this.global.Symbol)Erasure.this.global.Symbol" id="42695">bridgedSym</a>(<a title="Erasure.this.global.Symbol" id="48543">bridge</a>: <a href="../symtab/Symbols.scala.html#26286" title="Erasure.this.global.Symbol">Symbol</a>) = 
    <a href="#48543" title="Erasure.this.global.Symbol">bridge</a>.<a href="../symtab/Symbols.scala.html#27142" title="=&gt; Erasure.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27163" title="=&gt; Erasure.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#30398" title="(name: Erasure.this.global.Name)Erasure.this.global.Symbol">nonPrivateDecl</a><a href="../symtab/Symbols.scala.html#27186" title="(cond: (Erasure.this.global.Symbol) =&gt; Boolean)Erasure.this.global.Symbol">(</a><a href="#48543" title="Erasure.this.global.Symbol">bridge</a>.<a href="../symtab/Symbols.scala.html#27147" title="=&gt; Erasure.this.global.Name">name</a>) suchThat {
      <a title="Erasure.this.global.Symbol" id="48555">sym</a> =&gt; <span title="(x$1: Boolean)Boolean">!</span>(<a href="../symtab/Symbols.scala.html#27155" title="(mask: Long)Boolean">sym</a> hasFlag <span title="Long(67108864L)">BRIDGE</span>) <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> 
             <a href="../symtab/Types.scala.html#26577" title="(tp1: Erasure.this.global.Type,tp2: Erasure.this.global.Type,alwaysMatchSimple: Boolean)Boolean">matchesType</a>(<a href="#48555" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; Erasure.this.global.Type">tpe</a>, <a href="#48543" title="Erasure.this.global.Symbol">bridge</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; Erasure.this.global.Type">tpe</a>, <span title="Boolean(true)" class="keyword">true</span>) &amp;&amp; 
             <a href="#48555" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; Erasure.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30421" title="(that: Erasure.this.global.Type)Boolean">resultType</a> &lt;:&lt; <a href="#48543" title="Erasure.this.global.Symbol">bridge</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; Erasure.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30379" title="=&gt; Erasure.this.global.Type">resultType</a>
    }

// -------- boxing/unboxing --------------------------------------------------------

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(context: Erasure.this.Context)Erasure.this.Eraser" id="42696">newTyper</a>(<a title="Erasure.this.Context" id="48584">context</a>: <a href="../typechecker/Contexts.scala.html#40053" title="Erasure.this.Context">Context</a>) = <span title="Erasure.this.Eraser" class="keyword">new</span> <a href="#42697" title="Erasure.this.Eraser">Eraser</a>(<a href="#48584" title="Erasure.this.Context">context</a>)

  /** The modifier typer which retypes with erased types. */
  <span class="keyword">class</span> <a title="class Eraser extends Erasure.this.Typer with ScalaObject" id="42697">Eraser</a><span title="ScalaObject">(</span><a title="Erasure.this.Context" id="48605">context</a>: <a href="../typechecker/Contexts.scala.html#40053" title="Erasure.this.Context">Context</a>) <span class="keyword">extends</span> <a href="../typechecker/Typers.scala.html#40153" title="Erasure.this.Typer">Typer</a>(<a href="#48605" title="Erasure.this.Context">context</a>) {
  
    /** Box `tree' of unboxed type */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree" id="48595">box</a>(<a title="Erasure.this.global.Tree" id="48726">tree</a>: <a href="../ast/Trees.scala.html#26752" title="Erasure.this.global.Tree">Tree</a>): <a href="../ast/Trees.scala.html#26752" title="Erasure.this.global.Tree">Tree</a> = <a href="#48726" title="Erasure.this.global.Tree">tree</a> <span title="Erasure.this.global.Tree" class="keyword">match</span> {
      <span title="Erasure.this.global.LabelDef" class="keyword">case</span> LabelDef(<a title="Erasure.this.global.Name" id="48785">name</a>, <a title="List[Erasure.this.global.Ident]" id="48786">params</a>, <a title="Erasure.this.global.Tree" id="48787">rhs</a>) =&gt;
        <span class="keyword">val</span> <a title="Erasure.this.global.Tree" id="48790">rhs1</a> = <a href="#48595" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">box</a>(<a href="#48787" title="Erasure.this.global.Tree">rhs</a>)
        <a href="../ast/Trees.scala.html#26743" title="=&gt; Erasure.this.global.LazyTreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#48848" title="(tree: Erasure.this.global.Tree,name: Erasure.this.global.Name,params: List[Erasure.this.global.Ident],rhs: Erasure.this.global.Tree)Erasure.this.global.LabelDef">LabelDef</a><a href="../ast/Trees.scala.html#29552" title="(tp: Erasure.this.global.Type)Erasure.this.global.LabelDef">(</a><a href="#48726" title="Erasure.this.global.Tree">tree</a>, <a href="#48785" title="Erasure.this.global.Name">name</a>, <a href="#48786" title="List[Erasure.this.global.Ident]">params</a>, <a href="#48790" title="Erasure.this.global.Tree">rhs1</a>) setType <a href="#48790" title="Erasure.this.global.Tree">rhs1</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; Erasure.this.global.Type">tpe</a>
      <span title="Erasure.this.global.Tree" class="keyword">case</span> _ =&gt;
        <a href="../typechecker/Typers.scala.html#42873" title="(pos: scala.tools.nsc.util.Position)(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">typedPos</a>(<a href="#48726" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29547" title="=&gt; scala.tools.nsc.util.Position">pos</a>)(<a href="#48726" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; Erasure.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30366" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a> <span title="Erasure.this.global.Tree" class="keyword">match</span> {
          <span title="Erasure.this.global.Tree" class="keyword">case</span> <a href="../symtab/Definitions.scala.html#28463" title="=&gt; Erasure.this.global.Symbol">UnitClass</a>  =&gt;
            <span title="Erasure.this.global.Tree" class="keyword">if</span> (<a href="../ast/TreeInfo.scala.html#49161" title="(tree: Erasure.this.global.treeInfo.trees.Tree)Boolean">treeInfo</a> isPureExpr <a href="#48726" title="Erasure.this.global.Tree">tree</a>) <a href="../ast/TreeDSL.scala.html#42765" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.gen.global.Tree">REF</a>(<a href="../symtab/Definitions.scala.html#28745" title="=&gt; Erasure.this.global.Symbol">BoxedUnit_UNIT</a>)
            <span class="keyword">else</span> <a href="../ast/TreeDSL.scala.html#42758" title="(xs: Erasure.this.global.Tree*)Erasure.this.global.Block">BLOCK</a>(<a href="#48726" title="Erasure.this.global.Tree">tree</a>, <a href="../ast/TreeDSL.scala.html#42765" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.gen.global.Tree">REF</a>(<a href="../symtab/Definitions.scala.html#28745" title="=&gt; Erasure.this.global.Symbol">BoxedUnit_UNIT</a>))
          <span title="Erasure.this.global.Tree" class="keyword">case</span> <a href="../symtab/Definitions.scala.html#28579" title="=&gt; Erasure.this.global.Symbol">ArrayClass</a> =&gt;
            <a href="#48596" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">boxArray</a>(<a href="#48726" title="Erasure.this.global.Tree">tree</a>)
          <span title="Erasure.this.global.Apply" class="keyword">case</span> <a title="Erasure.this.global.Symbol" id="49329">x</a>          =&gt;
            <a href="../ast/Trees.scala.html#29551" title="(pos: scala.tools.nsc.util.Position)Erasure.this.global.Apply">(</a><a href="../ast/TreeDSL.scala.html#42765" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.gen.global.Tree">REF</a><a href="../ast/TreeDSL.scala.html#45313" title="(params: Erasure.this.global.Tree*)Erasure.this.global.Apply">(</a><a href="../symtab/Definitions.scala.html#28779" title="(key: Erasure.this.global.Symbol)Erasure.this.global.Symbol">boxMethod</a>(<a href="#49329" title="Erasure.this.global.Symbol">x</a>)) APPLY <a href="#48726" title="Erasure.this.global.Tree">tree</a>) <a href="../ast/Trees.scala.html#29552" title="(tp: Erasure.this.global.Type)Erasure.this.global.Apply">setPos</a> (<a href="#48726" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29547" title="=&gt; scala.tools.nsc.util.Position">pos</a>) setType (<a href="../symtab/Definitions.scala.html#28453" title="=&gt; Erasure.this.global.Symbol">ObjectClass</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; Erasure.this.global.Type">tpe</a>)
        })
    }

    /** generate  ScalaRuntime.boxArray(tree)
     *  !!! todo: optimize this in case the runtime type is known
     */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree" id="48596">boxArray</a>(<a title="Erasure.this.global.Tree" id="49325">tree</a>: <a href="../ast/Trees.scala.html#26752" title="Erasure.this.global.Tree">Tree</a>): <a href="../ast/Trees.scala.html#26752" title="Erasure.this.global.Tree">Tree</a> = <a href="#49325" title="Erasure.this.global.Tree">tree</a> <span title="Erasure.this.global.Tree" class="keyword">match</span> {
      <span title="Erasure.this.global.LabelDef" class="keyword">case</span> LabelDef(<a title="Erasure.this.global.Name" id="49483">name</a>, <a title="List[Erasure.this.global.Ident]" id="49484">params</a>, <a title="Erasure.this.global.Tree" id="49485">rhs</a>) =&gt;
        <span class="keyword">val</span> <a title="Erasure.this.global.Tree" id="49488">rhs1</a> = <a href="#48596" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">boxArray</a>(<a href="#49485" title="Erasure.this.global.Tree">rhs</a>)
        <a href="../ast/Trees.scala.html#26743" title="=&gt; Erasure.this.global.LazyTreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#48848" title="(tree: Erasure.this.global.Tree,name: Erasure.this.global.Name,params: List[Erasure.this.global.Ident],rhs: Erasure.this.global.Tree)Erasure.this.global.LabelDef">LabelDef</a><a href="../ast/Trees.scala.html#29552" title="(tp: Erasure.this.global.Type)Erasure.this.global.LabelDef">(</a><a href="#49325" title="Erasure.this.global.Tree">tree</a>, <a href="#49483" title="Erasure.this.global.Name">name</a>, <a href="#49484" title="List[Erasure.this.global.Ident]">params</a>, <a href="#49488" title="Erasure.this.global.Tree">rhs1</a>) setType <a href="#49488" title="Erasure.this.global.Tree">rhs1</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; Erasure.this.global.Type">tpe</a>
      <span title="Erasure.this.global.Tree" class="keyword">case</span> _ =&gt;
        <a href="../typechecker/Typers.scala.html#42873" title="(pos: scala.tools.nsc.util.Position)(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">typedPos</a>(<a href="#49325" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29547" title="=&gt; scala.tools.nsc.util.Position">pos</a>) { <a href="../Global.scala.html#39263" title="object Erasure.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#42932" title="(meth: Erasure.this.global.gen.global.Name,args: List[Erasure.this.global.gen.global.Tree])Erasure.this.global.gen.global.Tree">mkRuntimeCall</a>(<a href="../symtab/StdNames.scala.html#26690" title="object Erasure.this.global.nme">nme</a>.<a href="../symtab/StdNames.scala.html#30028" title="=&gt; Erasure.this.global.Name">boxArray</a>, <span title="(xs: Erasure.this.global.Tree*)List[Erasure.this.global.Tree]">List</span>(<a href="#49325" title="Erasure.this.global.Tree">tree</a>)) }
    }

    /** Unbox &lt;code&gt;tree&lt;/code&gt; of boxed type to expected type &lt;code&gt;pt&lt;/code&gt;.
     *
     *  @param tree the given tree
     *  @param pt   the expected type.
     *  @return     the unboxed tree
     */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tree: Erasure.this.global.Tree,pt: Erasure.this.global.Type)Erasure.this.global.Tree" id="48597">unbox</a>(<a title="Erasure.this.global.Tree" id="49537">tree</a>: <a href="../ast/Trees.scala.html#26752" title="Erasure.this.global.Tree">Tree</a>, <a title="Erasure.this.global.Type" id="49538">pt</a>: <a href="../symtab/Types.scala.html#26364" title="Erasure.this.global.Type">Type</a>): <a href="../ast/Trees.scala.html#26752" title="Erasure.this.global.Tree">Tree</a> = <a href="#49537" title="Erasure.this.global.Tree">tree</a> <span title="Erasure.this.global.Tree" class="keyword">match</span> {
      <span title="Erasure.this.global.LabelDef" class="keyword">case</span> LabelDef(<a title="Erasure.this.global.Name" id="49545">name</a>, <a title="List[Erasure.this.global.Ident]" id="49546">params</a>, <a title="Erasure.this.global.Tree" id="49547">rhs</a>) =&gt;
        <span class="keyword">val</span> <a title="Erasure.this.global.Tree" id="49550">rhs1</a> = <a href="#48597" title="(tree: Erasure.this.global.Tree,pt: Erasure.this.global.Type)Erasure.this.global.Tree">unbox</a>(<a href="#49547" title="Erasure.this.global.Tree">rhs</a>, <a href="#49538" title="Erasure.this.global.Type">pt</a>)
        <a href="../ast/Trees.scala.html#26743" title="=&gt; Erasure.this.global.LazyTreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#48848" title="(tree: Erasure.this.global.Tree,name: Erasure.this.global.Name,params: List[Erasure.this.global.Ident],rhs: Erasure.this.global.Tree)Erasure.this.global.LabelDef">LabelDef</a><a href="../ast/Trees.scala.html#29552" title="(tp: Erasure.this.global.Type)Erasure.this.global.LabelDef">(</a><a href="#49537" title="Erasure.this.global.Tree">tree</a>, <a href="#49545" title="Erasure.this.global.Name">name</a>, <a href="#49546" title="List[Erasure.this.global.Ident]">params</a>, <a href="#49550" title="Erasure.this.global.Tree">rhs1</a>) setType <a href="#49550" title="Erasure.this.global.Tree">rhs1</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; Erasure.this.global.Type">tpe</a>
      <span title="Erasure.this.global.Tree" class="keyword">case</span> _ =&gt;
        <a href="../typechecker/Typers.scala.html#42873" title="(pos: scala.tools.nsc.util.Position)(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">typedPos</a>(<a href="#49537" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29547" title="=&gt; scala.tools.nsc.util.Position">pos</a>)(<a href="#49538" title="Erasure.this.global.Type">pt</a>.<a href="../symtab/Types.scala.html#30366" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a> <span title="Erasure.this.global.Tree" class="keyword">match</span> {
          <span title="Erasure.this.global.Tree" class="keyword">case</span> <a href="../symtab/Definitions.scala.html#28463" title="=&gt; Erasure.this.global.Symbol">UnitClass</a>  =&gt;
            <span title="Erasure.this.global.Tree" class="keyword">if</span> (<a href="../ast/TreeInfo.scala.html#49161" title="(tree: Erasure.this.global.treeInfo.trees.Tree)Boolean">treeInfo</a> isPureExpr <a href="#49537" title="Erasure.this.global.Tree">tree</a>) <a href="../ast/TreeDSL.scala.html#42731" title="=&gt; Erasure.this.global.Literal">UNIT</a>
            <span class="keyword">else</span> <a href="../ast/TreeDSL.scala.html#42758" title="(xs: Erasure.this.global.Tree*)Erasure.this.global.Block">BLOCK</a>(<a href="#49537" title="Erasure.this.global.Tree">tree</a>, <a href="../ast/TreeDSL.scala.html#42731" title="=&gt; Erasure.this.global.Literal">UNIT</a>)
          <span title="Erasure.this.global.gen.global.Tree" class="keyword">case</span> <a href="../symtab/Definitions.scala.html#28579" title="=&gt; Erasure.this.global.Symbol">ArrayClass</a> =&gt;
            <span class="keyword">val</span> <a title="Erasure.this.global.Tree" id="49848">tree1</a> = <a href="#48601" title="(tree: Erasure.this.global.Tree,pt: Erasure.this.global.Type)Erasure.this.global.Tree">adaptToType</a>(<a href="#49537" title="Erasure.this.global.Tree">tree</a>, <a href="../symtab/Definitions.scala.html#28729" title="=&gt; Erasure.this.global.Symbol">BoxedArrayClass</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; Erasure.this.global.Type">tpe</a>)
            <a href="../Global.scala.html#39263" title="object Erasure.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#42932" title="(meth: Erasure.this.global.gen.global.Name,args: List[Erasure.this.global.gen.global.Tree])Erasure.this.global.gen.global.Tree">mkRuntimeCall</a>(<a href="../symtab/StdNames.scala.html#26690" title="object Erasure.this.global.nme">nme</a>.<a href="../symtab/StdNames.scala.html#30016" title="=&gt; Erasure.this.global.Name">arrayValue</a>, <span title="(xs: Erasure.this.global.Tree*)List[Erasure.this.global.Tree]">List</span>(<a href="#49848" title="Erasure.this.global.Tree">tree1</a>, <a href="../ast/Trees.scala.html#26899" title="(value: Any)Erasure.this.global.Literal">Literal</a>(<a href="#49538" title="Erasure.this.global.Type">pt</a>.<a href="../symtab/Types.scala.html#30378" title="=&gt; List[Erasure.this.global.Type]">typeArgs</a>.<span title="=&gt; Erasure.this.global.Type">head</span>)))
          <span title="Erasure.this.global.Apply" class="keyword">case</span> _          =&gt;
            <a href="../ast/Trees.scala.html#29552" title="(tp: Erasure.this.global.Type)Erasure.this.global.Apply">(</a><a href="../ast/TreeDSL.scala.html#42765" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.gen.global.Tree">REF</a><a href="../ast/TreeDSL.scala.html#45313" title="(params: Erasure.this.global.Tree*)Erasure.this.global.Apply">(</a><a href="../symtab/Definitions.scala.html#28777" title="(key: Erasure.this.global.Symbol)Erasure.this.global.Symbol">unboxMethod</a>(<a href="#49538" title="Erasure.this.global.Type">pt</a>.<a href="../symtab/Types.scala.html#30366" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a>)) APPLY <a href="#49537" title="Erasure.this.global.Tree">tree</a>) setType <a href="#49538" title="Erasure.this.global.Type">pt</a>
        })
    }

    /** &lt;p&gt;
     *    Generate a cast operation from &lt;code&gt;tree.tpe&lt;/code&gt; to &lt;code&gt;pt&lt;/code&gt;.
     *    The following cases need to be treated specially:
     *  &lt;/p&gt;
     *  &lt;table&gt;
     *    &lt;tr&gt;
     *      &lt;td&gt;&lt;code&gt;Object -&gt; Array&lt;/code&gt;&lt;/td&gt;
     *      &lt;td&gt;(might be a boxedarray)&lt;/td&gt;
     *    &lt;/tr&gt;
     *    &lt;tr&gt;
     *      &lt;td&gt;&lt;code&gt;Object -&gt; Boxed*Array&lt;/code&gt;&lt;/td&gt;
     *      &lt;td&gt;(might be an array, which nees to be boxed)&lt;/td&gt;
     *    &lt;/tr&gt;
     *    &lt;tr&gt;
     *      &lt;td&gt;&lt;code&gt;Object -&gt; Seq, Iterable&lt;/code&gt;&lt;/td&gt;
     *      &lt;td&gt;(might be an array, which needs to be boxed)&lt;/td&gt;
     *    &lt;/tr&gt;
     *  &lt;/table&gt;
     */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tree: Erasure.this.global.Tree,pt: Erasure.this.global.Type)Erasure.this.global.Tree" id="48598">cast</a>(<a title="Erasure.this.global.Tree" id="49946">tree</a>: <a href="../ast/Trees.scala.html#26752" title="Erasure.this.global.Tree">Tree</a>, <a title="Erasure.this.global.Type" id="49947">pt</a>: <a href="../symtab/Types.scala.html#26364" title="Erasure.this.global.Type">Type</a>): <a href="../ast/Trees.scala.html#26752" title="Erasure.this.global.Tree">Tree</a> = {
      <span title="(assertion: Boolean)Unit">assert</span>(<a href="#49947" title="(x$1: AnyRef)Boolean">pt</a> eq <a href="#49947" title="Erasure.this.global.Type">pt</a>.<a href="../symtab/Types.scala.html#30392" title="=&gt; Erasure.this.global.Type">normalize</a>)
      <span class="keyword">def</span> <a title="(t: Erasure.this.global.Tree)Erasure.this.global.Tree" id="49949">asPt</a>(<a title="Erasure.this.global.Tree" id="49957">t</a>: <a href="../ast/Trees.scala.html#26752" title="Erasure.this.global.Tree">Tree</a>) = <a href="../ast/TreeDSL.scala.html#45322" title="(tpe: Erasure.this.global.Type)Erasure.this.global.Tree">t</a> AS_ATTR <a href="#49947" title="Erasure.this.global.Type">pt</a>
      <span class="keyword">def</span> <a title="(within: (() =&gt; Erasure.this.global.Tree) =&gt; Erasure.this.global.Tree)Erasure.this.global.Tree" id="49950">once</a>(<a title="(() =&gt; Erasure.this.global.Tree) =&gt; Erasure.this.global.Tree" id="49987">within</a>: (() =&gt; Tree) =&gt; Tree) =
        <a href="../typechecker/Typers.scala.html#42873" title="(pos: scala.tools.nsc.util.Position)(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">typedPos</a>(<a href="#49946" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29547" title="=&gt; scala.tools.nsc.util.Position">pos</a>)(<a href="../Global.scala.html#39263" title="object Erasure.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#42938" title="(expr: Erasure.this.global.gen.global.Tree,owner: Erasure.this.global.gen.global.Symbol,unit: Erasure.this.global.gen.global.CompilationUnit)(within: (() =&gt; Erasure.this.global.gen.global.Tree) =&gt; Erasure.this.global.gen.global.Tree)Erasure.this.global.gen.global.Tree">evalOnce</a>(<a href="#49946" title="Erasure.this.global.Tree">tree</a>, <a href="#48605" title="Erasure.this.Context">context</a>.<a href="../typechecker/Contexts.scala.html#48615" title="=&gt; Erasure.this.global.Symbol">owner</a>, <a href="#48605" title="Erasure.this.Context">context</a>.<a href="../typechecker/Contexts.scala.html#48609" title="=&gt; Erasure.this.global.CompilationUnit">unit</a>)(<a href="#49987" title="(g: (Erasure.this.global.Tree) =&gt; Erasure.this.global.Tree)(() =&gt; Erasure.this.global.Tree) =&gt; Erasure.this.global.Tree" id="25696">within</a> andThen <a href="#49949" title="(t: Erasure.this.global.Tree)Erasure.this.global.Tree">asPt</a>))

      <span title="Erasure.this.global.Tree" class="keyword">if</span> (<a href="#49946" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; Erasure.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30366" title="(x$1: AnyRef)Boolean">typeSymbol</a> == <a href="../symtab/Definitions.scala.html#28453" title="=&gt; Erasure.this.global.Symbol">ObjectClass</a>) {
        <span title="Erasure.this.global.Tree" class="keyword">if</span> (<a href="#49947" title="Erasure.this.global.Type">pt</a>.<a href="../symtab/Types.scala.html#30366" title="(x$1: AnyRef)Boolean">typeSymbol</a> == <a href="../symtab/Definitions.scala.html#28579" title="=&gt; Erasure.this.global.Symbol">ArrayClass</a>) <a href="#49950" title="(within: (() =&gt; Erasure.this.global.Tree) =&gt; Erasure.this.global.Tree)Erasure.this.global.Tree">once</a> (<a title="() =&gt; Erasure.this.global.Tree" id="50032">x</a> =&gt;
          (<a href="../ast/TreeDSL.scala.html#42756" title="(tree: Erasure.this.global.Tree)Erasure.this.CODE.IfStart">IF</a> <a href="../ast/TreeDSL.scala.html#50041" title="(x: Erasure.this.global.Tree)Erasure.this.CODE.IfStart">(</a><a href="#50032" title="()Erasure.this.global.Tree">x</a><a href="../ast/TreeDSL.scala.html#45324" title="(tpe: Erasure.this.global.Type)Erasure.this.global.gen.global.Tree">(</a>) IS_OBJ <a href="../symtab/Definitions.scala.html#28729" title="=&gt; Erasure.this.global.Symbol">BoxedArrayClass</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; Erasure.this.global.Type">tpe</a>)
            <a href="../ast/TreeDSL.scala.html#50042" title="(elsep: Erasure.this.global.Tree)Erasure.this.global.If">THEN</a> (<a href="#48597" title="(tree: Erasure.this.global.Tree,pt: Erasure.this.global.Type)Erasure.this.global.Tree">unbox</a>(<a href="#50032" title="()Erasure.this.global.Tree">x</a><a href="../ast/TreeDSL.scala.html#45322" title="(tpe: Erasure.this.global.Type)Erasure.this.global.Tree">(</a>) AS_ATTR <a href="../symtab/Definitions.scala.html#28729" title="=&gt; Erasure.this.global.Symbol">BoxedArrayClass</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; Erasure.this.global.Type">tpe</a>, <a href="#49947" title="Erasure.this.global.Type">pt</a>))
            ELSE (<a href="#50032" title="()Erasure.this.global.Tree">x</a>())
          )
        )
        <span class="keyword">else</span> <span title="Erasure.this.global.Tree" class="keyword">if</span> (<a href="#49947" title="Erasure.this.global.Type">pt</a>.<a href="../symtab/Symbols.scala.html#27182" title="(that: Erasure.this.global.Symbol)Boolean">typeSymbol</a> isNonBottomSubClass <a href="../symtab/Definitions.scala.html#28729" title="=&gt; Erasure.this.global.Symbol">BoxedArrayClass</a>) 
          <a href="#49950" title="(within: (() =&gt; Erasure.this.global.Tree) =&gt; Erasure.this.global.Tree)Erasure.this.global.Tree">once</a> (<a title="() =&gt; Erasure.this.global.Tree" id="50179">x</a> =&gt;
            (<a href="../ast/TreeDSL.scala.html#42756" title="(tree: Erasure.this.global.Tree)Erasure.this.CODE.IfStart">IF</a> <a href="../ast/TreeDSL.scala.html#50041" title="(x: Erasure.this.global.Tree)Erasure.this.CODE.IfStart">(</a><a href="#50179" title="()Erasure.this.global.Tree">x</a><a href="../ast/TreeDSL.scala.html#45324" title="(tpe: Erasure.this.global.Type)Erasure.this.global.gen.global.Tree">(</a>) IS_OBJ <a href="../symtab/Definitions.scala.html#28729" title="=&gt; Erasure.this.global.Symbol">BoxedArrayClass</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; Erasure.this.global.Type">tpe</a>) <a href="../ast/TreeDSL.scala.html#50042" title="(elsep: Erasure.this.global.Tree)Erasure.this.global.If">THEN</a> (<a href="#50179" title="()Erasure.this.global.Tree">x</a>()) ELSE <a href="#48596" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">boxArray</a>(<a href="#50179" title="()Erasure.this.global.Tree">x</a>())))
        <span class="keyword">else</span> <span title="Erasure.this.global.Tree" class="keyword">if</span> (<a href="#42694" title="(sym: Erasure.this.global.Symbol)Boolean">isSeqClass</a>(<a href="#49947" title="Erasure.this.global.Type">pt</a>.<a href="../symtab/Types.scala.html#30366" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a>)) 
          <a href="#49950" title="(within: (() =&gt; Erasure.this.global.Tree) =&gt; Erasure.this.global.Tree)Erasure.this.global.Tree">once</a> (<a title="() =&gt; Erasure.this.global.Tree" id="50220">x</a> =&gt;
            (<a href="../ast/TreeDSL.scala.html#42756" title="(tree: Erasure.this.global.Tree)Erasure.this.CODE.IfStart">IF</a> <a href="../ast/TreeDSL.scala.html#50041" title="(x: Erasure.this.global.Tree)Erasure.this.CODE.IfStart">(</a><a href="#50220" title="()Erasure.this.global.Tree">x</a><a href="../ast/TreeDSL.scala.html#45324" title="(tpe: Erasure.this.global.Type)Erasure.this.global.gen.global.Tree">(</a>) IS_OBJ <a href="#49947" title="Erasure.this.global.Type">pt</a>) <a href="../ast/TreeDSL.scala.html#50042" title="(elsep: Erasure.this.global.Tree)Erasure.this.global.If">THEN</a> (<a href="#50220" title="()Erasure.this.global.Tree">x</a>()) ELSE (<a href="#48596" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">boxArray</a>(<a href="#50220" title="()Erasure.this.global.Tree">x</a>()))))
        <span class="keyword">else</span> <a href="#49949" title="(t: Erasure.this.global.Tree)Erasure.this.global.Tree">asPt</a>(<a href="#49946" title="Erasure.this.global.Tree">tree</a>)
      } <span class="keyword">else</span> <a href="#49949" title="(t: Erasure.this.global.Tree)Erasure.this.global.Tree">asPt</a>(<a href="#49946" title="Erasure.this.global.Tree">tree</a>)
    }
    
    /** Is symbol a member of unboxed arrays (which will be expanded directly
     *  later)?
     *
     *  @param sym ..
     *  @return    &lt;code&gt;true&lt;/code&gt; if .. 
     */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: Erasure.this.global.Symbol)Boolean" id="48599">isUnboxedArrayMember</a>(<a title="Erasure.this.global.Symbol" id="50262">sym</a>: <a href="../symtab/Symbols.scala.html#26286" title="Erasure.this.global.Symbol">Symbol</a>) = <a href="#50262" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27147" title="=&gt; Erasure.this.global.Name">name</a> <span title="Boolean" class="keyword">match</span> {
      <span title="Boolean(true)" class="keyword">case</span> <a href="../symtab/StdNames.scala.html#26690" title="object Erasure.this.global.nme">nme</a>.<a href="../symtab/StdNames.scala.html#30014" title="=&gt; Erasure.this.global.Name">apply</a> | <a href="../symtab/StdNames.scala.html#26690" title="object Erasure.this.global.nme">nme</a>.<a href="../symtab/StdNames.scala.html#30104" title="=&gt; Erasure.this.global.Name">length</a> | <a href="../symtab/StdNames.scala.html#26690" title="object Erasure.this.global.nme">nme</a>.<a href="../symtab/StdNames.scala.html#30170" title="=&gt; Erasure.this.global.Name">update</a>  =&gt; <span title="Boolean(true)" class="keyword">true</span>
      <span title="Boolean" class="keyword">case</span> _                                    =&gt; <a href="#50262" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27142" title="(x$1: AnyRef)Boolean">owner</a> == <a href="../symtab/Definitions.scala.html#28453" title="=&gt; Erasure.this.global.Symbol">ObjectClass</a>
    }

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: Erasure.this.global.Symbol)Boolean" id="48600">isUnboxedValueMember</a>(<a title="Erasure.this.global.Symbol" id="50277">sym</a>: <a href="../symtab/Symbols.scala.html#26286" title="Erasure.this.global.Symbol">Symbol</a>) =
      <a href="#50277" title="(x$1: AnyRef)Boolean">sym</a> <span title="(x$1: Boolean)Boolean">!=</span> <a href="../symtab/Symbols.scala.html#26293" title="object Erasure.this.global.NoSymbol">NoSymbol</a> &amp;&amp; <a href="../symtab/Definitions.scala.html#28792" title="(sym: Erasure.this.global.Symbol)Boolean">isValueClass</a>(<a href="#50277" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27142" title="=&gt; Erasure.this.global.Symbol">owner</a>)

    /** Adapt &lt;code&gt;tree&lt;/code&gt; to expected type &lt;code&gt;pt&lt;/code&gt;.
     *
     *  @param tree the given tree
     *  @param pt   the expected type.
     *  @return     the adapted tree
     */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tree: Erasure.this.global.Tree,pt: Erasure.this.global.Type)Erasure.this.global.Tree" id="48601">adaptToType</a>(<a title="Erasure.this.global.Tree" id="49849">tree</a>: <a href="../ast/Trees.scala.html#26752" title="Erasure.this.global.Tree">Tree</a>, <a title="Erasure.this.global.Type" id="49850">pt</a>: <a href="../symtab/Types.scala.html#26364" title="Erasure.this.global.Type">Type</a>): <a href="../ast/Trees.scala.html#26752" title="Erasure.this.global.Tree">Tree</a> = {
      <span title="Unit" class="keyword">if</span> (<a href="../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../Settings.scala.html#37988" title="(x$1: Boolean)Boolean">value</a> &amp;&amp; <a href="#49850" title="(x$1: AnyRef)Boolean">pt</a> != <a href="../symtab/Types.scala.html#26378" title="object Erasure.this.global.WildcardType">WildcardType</a>)
        <a href="../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;adapting &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#49849" title="Erasure.this.global.Tree">tree</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;:&quot;)" class="string">&quot;:&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#49849" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; Erasure.this.global.Type">tpe</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; : &quot;)" class="string">&quot; : &quot;</span> <span title="(x$1: Any)java.lang.String">+</span>  <a href="#49849" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; Erasure.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30375" title="=&gt; List[Erasure.this.global.Type]">parents</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; to &quot;)" class="string">&quot; to &quot;</span> + <a href="#49850" title="Erasure.this.global.Type">pt</a>)//debug
      <span title="Erasure.this.global.Tree" class="keyword">if</span> (<a href="#49849" title="Erasure.this.global.Tree">tree</a>.<a href="../symtab/Types.scala.html#30421" title="(that: Erasure.this.global.Type)Boolean">tpe</a> &lt;:&lt; <a href="#49850" title="Erasure.this.global.Type">pt</a>)
        <a href="#49849" title="Erasure.this.global.Tree">tree</a>
      <span class="keyword">else</span> <span title="Erasure.this.global.Tree" class="keyword">if</span> (<a href="../symtab/Definitions.scala.html#28795" title="(sym: Erasure.this.global.Symbol)Boolean">isUnboxedClass</a><span title="(x$1: Boolean)Boolean">(</span><a href="#49849" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; Erasure.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30366" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a>) &amp;&amp; <span title="=&gt; Boolean">!</span><a href="../symtab/Definitions.scala.html#28795" title="(sym: Erasure.this.global.Symbol)Boolean">isUnboxedClass</a>(<a href="#49850" title="Erasure.this.global.Type">pt</a>.<a href="../symtab/Types.scala.html#30366" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a>))
        <a href="#48601" title="(tree: Erasure.this.global.Tree,pt: Erasure.this.global.Type)Erasure.this.global.Tree">adaptToType</a>(<a href="#48595" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">box</a>(<a href="#49849" title="Erasure.this.global.Tree">tree</a>), <a href="#49850" title="Erasure.this.global.Type">pt</a>)
      <span class="keyword">else</span> <span title="Erasure.this.global.Tree" class="keyword">if</span> (<a href="#49849" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; Erasure.this.global.Type">tpe</a>.<span title="[T0]Boolean">isInstanceOf</span><span title="(x$1: Boolean)Boolean">[</span><a href="../symtab/Types.scala.html#26416" title="Erasure.this.global.MethodType">MethodType</a>] &amp;&amp; <a href="#49849" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; Erasure.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30386" title="=&gt; List[Erasure.this.global.Type]">paramTypes</a>.<span title="=&gt; Boolean">isEmpty</span>) {
        <span title="Unit" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="#49849" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; Erasure.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27111" title="=&gt; Boolean">isStable</a>) <span title="(assertion: Boolean,message: =&gt; Any)Unit">assert</span>(<span title="Boolean(false)" class="keyword">false</span>, <span title="(x$1: Any)java.lang.String" class="string">&quot;adapt &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#49849" title="Erasure.this.global.Tree">tree</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot;:&quot;)" class="string">&quot;:&quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#49849" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; Erasure.this.global.Type">tpe</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot; to &quot;)" class="string">&quot; to &quot;</span>+<a href="#49850" title="Erasure.this.global.Type">pt</a>)
        <a href="#48601" title="(tree: Erasure.this.global.Tree,pt: Erasure.this.global.Type)Erasure.this.global.Tree">adaptToType</a>(<a href="../ast/Trees.scala.html#49378" title="(fun: Erasure.this.global.Tree,args: List[Erasure.this.global.Tree])Erasure.this.global.Apply">Apply</a><a href="../ast/Trees.scala.html#29551" title="(pos: scala.tools.nsc.util.Position)Erasure.this.global.Apply">(</a><a href="#49849" title="Erasure.this.global.Tree">tree</a>, List<span title="object Nil">(</span>)) <a href="../ast/Trees.scala.html#29552" title="(tp: Erasure.this.global.Type)Erasure.this.global.Apply">setPos</a> <a href="#49849" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29547" title="=&gt; scala.tools.nsc.util.Position">pos</a> setType <a href="#49849" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; Erasure.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30379" title="=&gt; Erasure.this.global.Type">resultType</a>, <a href="#49850" title="Erasure.this.global.Type">pt</a>)
      } <span class="keyword">else</span> <span title="Erasure.this.global.Tree" class="keyword">if</span> (<a href="../symtab/Types.scala.html#30421" title="(that: Erasure.this.global.Type)Boolean">pt</a> &lt;:&lt; <a href="#49849" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; Erasure.this.global.Type">tpe</a>) 
        <a href="#48598" title="(tree: Erasure.this.global.Tree,pt: Erasure.this.global.Type)Erasure.this.global.Tree">cast</a>(<a href="#49849" title="Erasure.this.global.Tree">tree</a>, <a href="#49850" title="Erasure.this.global.Type">pt</a>)
      <span class="keyword">else</span> <span title="Erasure.this.global.Tree" class="keyword">if</span> (<a href="../symtab/Definitions.scala.html#28795" title="(sym: Erasure.this.global.Symbol)Boolean">isUnboxedClass</a><span title="(x$1: Boolean)Boolean">(</span><a href="#49850" title="Erasure.this.global.Type">pt</a>.<a href="../symtab/Types.scala.html#30366" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a>) &amp;&amp; <span title="=&gt; Boolean">!</span><a href="../symtab/Definitions.scala.html#28795" title="(sym: Erasure.this.global.Symbol)Boolean">isUnboxedClass</a>(<a href="#49849" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; Erasure.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30366" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a>))
        <a href="#48601" title="(tree: Erasure.this.global.Tree,pt: Erasure.this.global.Type)Erasure.this.global.Tree">adaptToType</a>(<a href="#48597" title="(tree: Erasure.this.global.Tree,pt: Erasure.this.global.Type)Erasure.this.global.Tree">unbox</a>(<a href="#49849" title="Erasure.this.global.Tree">tree</a>, <a href="#49850" title="Erasure.this.global.Type">pt</a>), <a href="#49850" title="Erasure.this.global.Type">pt</a>)
      <span class="keyword">else</span> 
        <a href="#48598" title="(tree: Erasure.this.global.Tree,pt: Erasure.this.global.Type)Erasure.this.global.Tree">cast</a>(<a href="#49849" title="Erasure.this.global.Tree">tree</a>, <a href="#49850" title="Erasure.this.global.Type">pt</a>)
    }

    /** &lt;p&gt;
     *    Replace member references as follows:
     *  &lt;/p&gt;
     *  &lt;ul&gt;
     *    &lt;li&gt;
     *      &lt;code&gt;x == y&lt;/code&gt; for &lt;code&gt;==&lt;/code&gt; in class &lt;code&gt;Any&lt;/code&gt;
     *      becomes &lt;code&gt;x equals y&lt;/code&gt; with &lt;code&gt;equals&lt;/code&gt; in class
     *      &lt;code&gt;Object&lt;/code&gt;.
     *    &lt;/li&gt;
     *    &lt;li&gt;
     *      &lt;code&gt;x != y&lt;/code&gt; for &lt;code&gt;!=&lt;/code&gt; in class &lt;code&gt;Any&lt;/code&gt;
     *      becomes &lt;code&gt;!(x equals y)&lt;/code&gt; with &lt;code&gt;equals&lt;/code&gt; in
     *      class &lt;code&gt;Object&lt;/code&gt;.
     *    &lt;/li&gt;
     *    &lt;li&gt;
     *      &lt;code&gt;new BoxedArray.&amp;lt;init&amp;gt;(len)&lt;/code&gt; becomes
     *      &lt;code&gt;new BoxedAnyArray.&amp;lt;init&amp;gt;(len): BoxedArray&lt;/code&gt;
     *      (the widening typing is necessary so that subsequent member
     *      symbols stay the same)
     *    &lt;/li&gt;
     *    &lt;li&gt;
     *      &lt;code&gt;x.asInstanceOf[T]&lt;/code&gt; and &lt;code&gt;x.asInstanceOf$erased[T]&lt;/code&gt;
     *      become &lt;code&gt;x.$asInstanceOf[T]&lt;/code&gt;
     *    &lt;/li&gt;
     *    &lt;li&gt;
     *      &lt;code&gt;x.isInstanceOf[T]&lt;/code&gt; and &lt;code&gt;x.isInstanceOf$erased[T]&lt;/code&gt;
     *      become &lt;code&gt;x.$isInstanceOf[T]&lt;/code&gt;
     *    &lt;/li&gt;
     *    &lt;li&gt;
     *      &lt;code&gt;x.m&lt;/code&gt; where &lt;code&gt;m&lt;/code&gt; is some other member of
     *      &lt;code&gt;Any&lt;/code&gt; becomes &lt;code&gt;x.m&lt;/code&gt; where m is a member
     *      of class &lt;code&gt;Object&lt;/code&gt;
     *    &lt;/li&gt;
     *    &lt;li&gt;
     *      &lt;code&gt;x.m&lt;/code&gt; where &lt;code&gt;x&lt;/code&gt; has unboxed value type
     *      &lt;code&gt;T&lt;/code&gt; and &lt;code&gt;m&lt;/code&gt; is not a directly translated
     *      member of &lt;code&gt;T&lt;/code&gt; becomes &lt;code&gt;T.box(x).m&lt;/code&gt;
     *    &lt;/li&gt;
     *    &lt;li&gt;
     *      &lt;code&gt;x.m&lt;/code&gt; where &lt;code&gt;x&lt;/code&gt; has type &lt;code&gt;Array[T]&lt;/code&gt;
     *      and &lt;code&gt;m&lt;/code&gt; is not a directly translated member of
     *      &lt;code&gt;Array&lt;/code&gt; becomes &lt;code&gt;new BoxedTArray.&lt;init&gt;(x).m&lt;/code&gt;
     *    &lt;/li&gt;
     *    &lt;li&gt;
     *      &lt;code&gt;x.m&lt;/code&gt; where &lt;code&gt;x&lt;/code&gt; is a reference type and
     *      &lt;code&gt;m&lt;/code&gt; is a directly translated member of value type
     *      &lt;code&gt;T&lt;/code&gt; becomes &lt;code&gt;x.TValue().m&lt;/code&gt;
     *    &lt;/li&gt;
     *    &lt;li&gt;
     *      All forms of &lt;code&gt;x.m&lt;/code&gt; where &lt;code&gt;x&lt;/code&gt; is a boxed type
     *      and &lt;code&gt;m&lt;/code&gt; is a member of an unboxed class become
     *      &lt;code&gt;x.m&lt;/code&gt; where &lt;code&gt;m&lt;/code&gt; is the corresponding member
     *      of the boxed class.
     *    &lt;/li&gt;
     *  &lt;/ul&gt;
     */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree" id="48602">adaptMember</a>(<a title="Erasure.this.global.Tree" id="50500">tree</a>: <a href="../ast/Trees.scala.html#26752" title="Erasure.this.global.Tree">Tree</a>): <a href="../ast/Trees.scala.html#26752" title="Erasure.this.global.Tree">Tree</a> = {
      //Console.println(&quot;adaptMember: &quot; + tree);
      <a href="#50500" title="Erasure.this.global.Tree">tree</a> <span title="Erasure.this.global.Tree" class="keyword">match</span> {
        <span title="Erasure.this.global.Tree" class="keyword">case</span> Apply(Select(New(<a title="Erasure.this.global.Tree" id="50588">tpt</a>), <a title="Erasure.this.global.Name" id="50591">name</a>), <a title="List[Erasure.this.global.Tree]" id="50594">args</a>) <span class="keyword">if</span> (<a href="#50588" title="Erasure.this.global.Tree">tpt</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; Erasure.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30366" title="(x$1: AnyRef)Boolean">typeSymbol</a> == <a href="../symtab/Definitions.scala.html#28729" title="=&gt; Erasure.this.global.Symbol">BoxedArrayClass</a>) =&gt;
          <span title="(assertion: Boolean)Unit">assert</span>(<a href="#50591" title="(x$1: AnyRef)Boolean">name</a> == <a href="../symtab/StdNames.scala.html#26690" title="object Erasure.this.global.nme">nme</a>.<a href="../symtab/StdNames.scala.html#29905" title="=&gt; Erasure.this.global.Name">CONSTRUCTOR</a>);
          <span title="(assertion: Boolean)Unit">assert</span>(<a href="#50594" title="List[Erasure.this.global.Tree]">args</a>.<a title="(x$1: Int)Boolean" id="2977">length</a> &lt; <span title="Int(2)" class="int">2</span>)
          <a href="../typechecker/Typers.scala.html#42873" title="(pos: scala.tools.nsc.util.Position)(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">typedPos</a>(<a href="#50500" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29547" title="=&gt; scala.tools.nsc.util.Position">pos</a>) {
            <a href="../ast/Trees.scala.html#50628" title="(expr: Erasure.this.global.Tree,tpt: Erasure.this.global.Tree)Erasure.this.global.Typed">Typed</a>(<a href="../ast/Trees.scala.html#49378" title="(fun: Erasure.this.global.Tree,args: List[Erasure.this.global.Tree])Erasure.this.global.Apply">Apply</a>(<a href="../ast/TreeDSL.scala.html#42752" title="(sym: Erasure.this.global.Symbol,args: Erasure.this.global.Tree*)Erasure.this.global.Tree">NEW</a><a href="../ast/TreeDSL.scala.html#45316" title="(member: Erasure.this.global.Name)Erasure.this.CODE.SelectStart">(</a><a href="../symtab/Definitions.scala.html#28731" title="=&gt; Erasure.this.global.Symbol">BoxedAnyArrayClass</a>) <a href="../ast/TreeDSL.scala.html#42777" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeFromSelectStart : (ss: Erasure.this.CODE.SelectStart)Erasure.this.global.Select">DOT</a> <a href="#50591" title="Erasure.this.global.Name">name</a>, <a href="#50594" title="List[Erasure.this.global.Tree]">args</a>), <a href="#50588" title="Erasure.this.global.Tree">tpt</a>)
          }
        <span title="Erasure.this.global.Tree" class="keyword">case</span> Apply(TypeApply(<a title="Erasure.this.global.Select" id="51002">sel</a> @ Select(<a title="Erasure.this.global.Tree" id="51007">qual</a>, <a title="Erasure.this.global.Name" id="51008">name</a>), <a href="#51012" title="(x: List[Erasure.this.global.Tree])Some[List[Erasure.this.global.Tree]]">List</a>(<a title="Erasure.this.global.Tree" id="51021">targ</a>)), <a href="#51026" title="(x: List[Erasure.this.global.Tree])Some[List[Erasure.this.global.Tree]]">List</a>()) <span class="keyword">if</span> <a href="#50500" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="(x$1: AnyRef)Boolean">symbol</a> == <a href="../symtab/Definitions.scala.html#28690" title="=&gt; Erasure.this.global.Symbol">Any_asInstanceOf</a> =&gt;
          <span class="keyword">val</span> <a title="Erasure.this.global.Tree" id="51045">qual1</a> = <a href="../typechecker/Typers.scala.html#42876" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">typedQualifier</a>(<a href="#51007" title="Erasure.this.global.Tree">qual</a>)
          <span class="keyword">val</span> <a title="Erasure.this.global.Symbol" id="51046">qualClass</a> = <a href="#51045" title="Erasure.this.global.Tree">qual1</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; Erasure.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30366" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a>
          <span class="keyword">val</span> <a title="Erasure.this.global.Symbol" id="51047">targClass</a> = <a href="#51021" title="Erasure.this.global.Tree">targ</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; Erasure.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30366" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a>
/*
          if (isNumericValueClass(qualClass) &amp;&amp; isNumericValueClass(targClass))
            // convert numeric type casts
            atPos(tree.pos)(Apply(Select(qual1, &quot;to&quot; + targClass.name), List()))
          else 
*/
          <span title="Erasure.this.global.Tree" class="keyword">if</span> (<a href="../symtab/Definitions.scala.html#28794" title="(sym: Erasure.this.global.Symbol)Boolean">isValueType</a><span title="(x$1: Boolean)Boolean">(</span><a href="#51047" title="Erasure.this.global.Symbol">targClass</a>) ||
                   (<a href="#51047" title="(x$1: AnyRef)Boolean">targClass</a> <span title="(x$1: Boolean)Boolean">==</span> <a href="../symtab/Definitions.scala.html#28579" title="=&gt; Erasure.this.global.Symbol">ArrayClass</a> &amp;&amp; (<a href="../symtab/Symbols.scala.html#27182" title="(that: Erasure.this.global.Symbol)Boolean">qualClass</a> isNonBottomSubClass <a href="../symtab/Definitions.scala.html#28729" title="=&gt; Erasure.this.global.Symbol">BoxedArrayClass</a>)))
            <a href="#48597" title="(tree: Erasure.this.global.Tree,pt: Erasure.this.global.Type)Erasure.this.global.Tree">unbox</a>(<a href="#51045" title="Erasure.this.global.Tree">qual1</a>, <a href="#51021" title="Erasure.this.global.Tree">targ</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; Erasure.this.global.Type">tpe</a>)
          <span class="keyword">else</span> <span title="Erasure.this.global.Tree" class="keyword">if</span> (<a href="#51047" title="(x$1: AnyRef)Boolean">targClass</a> <span title="(x$1: Boolean)Boolean">==</span> <a href="../symtab/Definitions.scala.html#28579" title="=&gt; Erasure.this.global.Symbol">ArrayClass</a> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> <a href="#51046" title="(x$1: AnyRef)Boolean">qualClass</a> == <a href="../symtab/Definitions.scala.html#28453" title="=&gt; Erasure.this.global.Symbol">ObjectClass</a> || <a href="#42694" title="(sym: Erasure.this.global.Symbol)Boolean">isSeqClass</a>(<a href="#51047" title="Erasure.this.global.Symbol">targClass</a>))
            <a href="#48598" title="(tree: Erasure.this.global.Tree,pt: Erasure.this.global.Type)Erasure.this.global.Tree">cast</a>(<a href="#51045" title="Erasure.this.global.Tree">qual1</a>, <a href="#51021" title="Erasure.this.global.Tree">targ</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; Erasure.this.global.Type">tpe</a>)
          <span class="keyword">else</span> 
            <a href="#50500" title="Erasure.this.global.Tree">tree</a>
        <span title="Erasure.this.global.Tree" class="keyword">case</span> Select(<a title="Erasure.this.global.Tree" id="51104">qual</a>, <a title="Erasure.this.global.Name" id="51105">name</a>) <span class="keyword">if</span> (<a href="#51105" title="(x$1: AnyRef)Boolean">name</a> != <a href="../symtab/StdNames.scala.html#26690" title="object Erasure.this.global.nme">nme</a>.<a href="../symtab/StdNames.scala.html#29905" title="=&gt; Erasure.this.global.Name">CONSTRUCTOR</a>) =&gt;
          <span title="Erasure.this.global.Tree" class="keyword">if</span> (<a href="#50500" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="(x$1: AnyRef)Boolean">symbol</a> == <a href="../symtab/Symbols.scala.html#26293" title="object Erasure.this.global.NoSymbol">NoSymbol</a>)
            <a href="#50500" title="Erasure.this.global.Tree">tree</a>
          <span class="keyword">else</span> <span title="Erasure.this.global.Tree" class="keyword">if</span> (<a href="#50500" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="(x$1: AnyRef)Boolean">symbol</a> == <a href="../symtab/Definitions.scala.html#28690" title="=&gt; Erasure.this.global.Symbol">Any_asInstanceOf</a>)
            <a href="#48602" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">adaptMember</a>(<a href="../ast/Trees.scala.html#26943" title="(pos: scala.tools.nsc.util.Position)(tree: Erasure.this.global.Select)Erasure.this.global.Select">atPos</a>(<a href="#50500" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29547" title="=&gt; scala.tools.nsc.util.Position">pos</a>)(<a href="../ast/Trees.scala.html#26890" title="(qualifier: Erasure.this.global.Tree,sym: Erasure.this.global.Symbol)Erasure.this.global.Select">Select</a>(<a href="#51104" title="Erasure.this.global.Tree">qual</a>, <a href="../symtab/Definitions.scala.html#28711" title="=&gt; Erasure.this.global.Symbol">Object_asInstanceOf</a>)))
          <span class="keyword">else</span> <span title="Erasure.this.global.Tree" class="keyword">if</span> (<a href="#50500" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="(x$1: AnyRef)Boolean">symbol</a> == <a href="../symtab/Definitions.scala.html#28687" title="=&gt; Erasure.this.global.Symbol">Any_isInstanceOf</a>)
            <a href="#48602" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">adaptMember</a>(<a href="../ast/Trees.scala.html#26943" title="(pos: scala.tools.nsc.util.Position)(tree: Erasure.this.global.Select)Erasure.this.global.Select">atPos</a>(<a href="#50500" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29547" title="=&gt; scala.tools.nsc.util.Position">pos</a>)(<a href="../ast/Trees.scala.html#26890" title="(qualifier: Erasure.this.global.Tree,sym: Erasure.this.global.Symbol)Erasure.this.global.Select">Select</a>(<a href="#51104" title="Erasure.this.global.Tree">qual</a>, <a href="../symtab/Definitions.scala.html#28708" title="=&gt; Erasure.this.global.Symbol">Object_isInstanceOf</a>)))
          <span class="keyword">else</span> <span title="Erasure.this.global.Tree" class="keyword">if</span> (<a href="#50500" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; Erasure.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27142" title="(x$1: AnyRef)Boolean">owner</a> == <a href="../symtab/Definitions.scala.html#28447" title="=&gt; Erasure.this.global.Symbol">AnyClass</a>)
            <a href="#48602" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">adaptMember</a>(<a href="../ast/Trees.scala.html#26943" title="(pos: scala.tools.nsc.util.Position)(tree: Erasure.this.global.Select)Erasure.this.global.Select">atPos</a>(<a href="#50500" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29547" title="=&gt; scala.tools.nsc.util.Position">pos</a>)(<a href="../ast/Trees.scala.html#26890" title="(qualifier: Erasure.this.global.Tree,sym: Erasure.this.global.Symbol)Erasure.this.global.Select">Select</a>(<a href="#51104" title="Erasure.this.global.Tree">qual</a>, <a href="../symtab/Definitions.scala.html#28764" title="(owner: Erasure.this.global.Symbol,name: Erasure.this.global.Name)Erasure.this.global.Symbol">getMember</a>(<a href="../symtab/Definitions.scala.html#28453" title="=&gt; Erasure.this.global.Symbol">ObjectClass</a>, <a href="#51105" title="Erasure.this.global.Name">name</a>))))
          <span class="keyword">else</span> {
            <span class="keyword">var</span> <a title="Erasure.this.global.Tree" id="51266">qual1</a> = <a href="../typechecker/Typers.scala.html#42876" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">typedQualifier</a>(<a href="#51104" title="Erasure.this.global.Tree">qual</a>);
            <span title="Unit" class="keyword">if</span> (<span title="(x$1: Boolean)Boolean">(</span><a href="../symtab/Definitions.scala.html#28794" title="(sym: Erasure.this.global.Symbol)Boolean">isValueType</a><span title="(x$1: Boolean)Boolean">(</span><a href="#51266" title="Erasure.this.global.Tree">qual1</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; Erasure.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30366" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a>) &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#48600" title="(sym: Erasure.this.global.Symbol)Boolean">isUnboxedValueMember</a>(<a href="#50500" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; Erasure.this.global.Symbol">symbol</a>)) || 
                (<a href="#51266" title="Erasure.this.global.Tree">qual1</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; Erasure.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30366" title="(x$1: AnyRef)Boolean">typeSymbol</a> <span title="(x$1: Boolean)Boolean">==</span> <a href="../symtab/Definitions.scala.html#28579" title="=&gt; Erasure.this.global.Symbol">ArrayClass</a> &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#48599" title="(sym: Erasure.this.global.Symbol)Boolean">isUnboxedArrayMember</a>(<a href="#50500" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; Erasure.this.global.Symbol">symbol</a>)))
              <a href="#51266" title="Erasure.this.global.Tree">qual1</a> = <a href="#48595" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">box</a>(<a href="#51266" title="Erasure.this.global.Tree">qual1</a>);
            <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<span title="(x$1: Boolean)Boolean">!</span><a href="../symtab/Definitions.scala.html#28794" title="(sym: Erasure.this.global.Symbol)Boolean">isValueType</a>(<a href="#51266" title="Erasure.this.global.Tree">qual1</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; Erasure.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30366" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a>) &amp;&amp; <a href="#48600" title="(sym: Erasure.this.global.Symbol)Boolean">isUnboxedValueMember</a>(<a href="#50500" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; Erasure.this.global.Symbol">symbol</a>))
              <a href="#51266" title="Erasure.this.global.Tree">qual1</a> = <a href="#48597" title="(tree: Erasure.this.global.Tree,pt: Erasure.this.global.Type)Erasure.this.global.Tree">unbox</a>(<a href="#51266" title="Erasure.this.global.Tree">qual1</a>, <a href="#50500" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; Erasure.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27142" title="=&gt; Erasure.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; Erasure.this.global.Type">tpe</a>)
            <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<a href="#50500" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; Erasure.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27142" title="(x$1: AnyRef)Boolean">owner</a> <span title="(x$1: Boolean)Boolean">==</span> <a href="../symtab/Definitions.scala.html#28579" title="=&gt; Erasure.this.global.Symbol">ArrayClass</a> &amp;&amp; (<a href="../symtab/Symbols.scala.html#27183" title="(that: Erasure.this.global.Symbol)Boolean">BoxedArrayClass</a> isSubClass <a href="#51266" title="Erasure.this.global.Tree">qual1</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; Erasure.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30366" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a>))
              <a href="#51266" title="Erasure.this.global.Tree">qual1</a> = <a href="#48598" title="(tree: Erasure.this.global.Tree,pt: Erasure.this.global.Type)Erasure.this.global.Tree">cast</a>(<a href="#51266" title="Erasure.this.global.Tree">qual1</a>, <a href="../symtab/Definitions.scala.html#28729" title="=&gt; Erasure.this.global.Symbol">BoxedArrayClass</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; Erasure.this.global.Type">tpe</a>)
            
            <span title="Unit" class="keyword">if</span> (<a href="../symtab/Definitions.scala.html#28795" title="(sym: Erasure.this.global.Symbol)Boolean">isUnboxedClass</a><span title="(x$1: Boolean)Boolean">(</span><a href="#50500" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; Erasure.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27142" title="=&gt; Erasure.this.global.Symbol">owner</a>) &amp;&amp; <span title="=&gt; Boolean">!</span><a href="../symtab/Definitions.scala.html#28795" title="(sym: Erasure.this.global.Symbol)Boolean">isUnboxedClass</a>(<a href="#51266" title="Erasure.this.global.Tree">qual1</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; Erasure.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30366" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a>))
              <a href="#50500" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29554" title="(sym: Erasure.this.global.Symbol)Unit">symbol</a> = <a href="../symtab/Symbols.scala.html#26293" title="object Erasure.this.global.NoSymbol">NoSymbol</a>
            <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<a href="#51266" title="Erasure.this.global.Tree">qual1</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; Erasure.this.global.Type">tpe</a>.<span title="[T0]Boolean">isInstanceOf</span><span title="(x$1: Boolean)Boolean">[</span><a href="../symtab/Types.scala.html#26416" title="Erasure.this.global.MethodType">MethodType</a>] &amp;&amp; <a href="#51266" title="Erasure.this.global.Tree">qual1</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; Erasure.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30386" title="=&gt; List[Erasure.this.global.Type]">paramTypes</a>.<span title="=&gt; Boolean">isEmpty</span>) {
              <span title="(assertion: Boolean,message: =&gt; Any)Unit">assert</span>(<a href="#51266" title="Erasure.this.global.Tree">qual1</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; Erasure.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27111" title="=&gt; Boolean">isStable</a>, <a href="#51266" title="Erasure.this.global.Tree">qual1</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; Erasure.this.global.Symbol">symbol</a>);
              <a href="#51266" title="Erasure.this.global.Tree">qual1</a> = <a href="../ast/Trees.scala.html#49378" title="(fun: Erasure.this.global.Tree,args: List[Erasure.this.global.Tree])Erasure.this.global.Apply">Apply</a><a href="../ast/Trees.scala.html#29551" title="(pos: scala.tools.nsc.util.Position)Erasure.this.global.Apply">(</a><a href="#51266" title="Erasure.this.global.Tree">qual1</a>, List<span title="object Nil">(</span>)) <a href="../ast/Trees.scala.html#29552" title="(tp: Erasure.this.global.Type)Erasure.this.global.Apply">setPos</a> <a href="#51266" title="Erasure.this.global.Tree">qual1</a>.<a href="../ast/Trees.scala.html#29547" title="=&gt; scala.tools.nsc.util.Position">pos</a> setType <a href="#51266" title="Erasure.this.global.Tree">qual1</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; Erasure.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30379" title="=&gt; Erasure.this.global.Type">resultType</a>
            } <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<span title="=&gt; Boolean">!</span>(<a href="#51266" title="Erasure.this.global.Tree">qual1</a>.<span title="[T0]Boolean">isInstanceOf</span><span title="(x$1: Boolean)Boolean">[</span><a href="../ast/Trees.scala.html#26879" title="Erasure.this.global.Super">Super</a>] || (<a href="#51266" title="Erasure.this.global.Tree">qual1</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; Erasure.this.global.Type">tpe</a>.<a href="../symtab/Symbols.scala.html#27183" title="(that: Erasure.this.global.Symbol)Boolean">typeSymbol</a> isSubClass <a href="#50500" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; Erasure.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27142" title="=&gt; Erasure.this.global.Symbol">owner</a>))) {
              // println(&quot;member cast &quot;+tree.symbol+&quot; &quot;+tree.symbol.ownerChain+&quot; &quot;+qual1+&quot; &quot;+qual1.tpe)
              <a href="#51266" title="Erasure.this.global.Tree">qual1</a> = <a href="#48598" title="(tree: Erasure.this.global.Tree,pt: Erasure.this.global.Type)Erasure.this.global.Tree">cast</a>(<a href="#51266" title="Erasure.this.global.Tree">qual1</a>, <a href="#50500" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; Erasure.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27142" title="=&gt; Erasure.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; Erasure.this.global.Type">tpe</a>)
            }
            <a href="../ast/Trees.scala.html#26743" title="=&gt; Erasure.this.global.LazyTreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#48875" title="(tree: Erasure.this.global.Tree,qualifier: Erasure.this.global.Tree,selector: Erasure.this.global.Name)Erasure.this.global.Select">Select</a>(<a href="#50500" title="Erasure.this.global.Tree">tree</a>, <a href="#51266" title="Erasure.this.global.Tree">qual1</a>, <a href="#51105" title="Erasure.this.global.Name">name</a>)
          }
        <span title="Erasure.this.global.Tree" class="keyword">case</span> _ =&gt;
          <a href="#50500" title="Erasure.this.global.Tree">tree</a>
      }
    }

    /** A replacement for the standard typer's &lt;code&gt;adapt&lt;/code&gt; method.
     *
     *  @param tree ...
     *  @param mode ...
     *  @param pt   ...
     *  @return     the adapted tree
     */
    <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(tree: Erasure.this.global.Tree,mode: Int,pt: Erasure.this.global.Type)Erasure.this.global.Tree" id="48603">adapt</a>(<a title="Erasure.this.global.Tree" id="51446">tree</a>: <a href="../ast/Trees.scala.html#26752" title="Erasure.this.global.Tree">Tree</a>, <a title="Int" id="51447">mode</a>: <span title="Int">Int</span>, <a title="Erasure.this.global.Type" id="51448">pt</a>: <a href="../symtab/Types.scala.html#26364" title="Erasure.this.global.Type">Type</a>): <a href="../ast/Trees.scala.html#26752" title="Erasure.this.global.Tree">Tree</a> =
      <a href="#48601" title="(tree: Erasure.this.global.Tree,pt: Erasure.this.global.Type)Erasure.this.global.Tree">adaptToType</a>(<a href="#51446" title="Erasure.this.global.Tree">tree</a>, <a href="#51448" title="Erasure.this.global.Type">pt</a>)

    /** A replacement for the standard typer's `typed1' method */
    <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(tree: Erasure.this.global.Tree,mode: Int,pt: Erasure.this.global.Type)Erasure.this.global.Tree" id="48604">typed1</a>(<a title="Erasure.this.global.Tree" id="51459">tree</a>: <a href="../ast/Trees.scala.html#26752" title="Erasure.this.global.Tree">Tree</a>, <a title="Int" id="51460">mode</a>: <span title="Int">Int</span>, <a title="Erasure.this.global.Type" id="51461">pt</a>: <a href="../symtab/Types.scala.html#26364" title="Erasure.this.global.Type">Type</a>): <a href="../ast/Trees.scala.html#26752" title="Erasure.this.global.Tree">Tree</a> = {
      <span class="keyword">var</span> <a title="Erasure.this.global.Tree" id="51470">tree1</a> = <span class="keyword">try</span> { 
        <span class="keyword">super</span>.<a href="../typechecker/Typers.scala.html#42868" title="(tree: Erasure.this.global.Tree,mode: Int,pt: Erasure.this.global.Type)Erasure.this.global.Tree">typed1</a>(<a href="#48602" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">adaptMember</a>(<a href="#51459" title="Erasure.this.global.Tree">tree</a>), <a href="#51460" title="Int">mode</a>, <a href="#51461" title="Erasure.this.global.Type">pt</a>)
      } <span class="keyword">catch</span> {
        <span title="Nothing" class="keyword">case</span> <a title="Exception" id="51481">ex</a>: <a title="Exception" id="1896">Exception</a> =&gt;
          //if (settings.debug.value) 
          <span title="object Console">Console</span>.<span title="(x: Any)Unit">println</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;exception when typing &quot;</span> + <a href="#51459" title="Erasure.this.global.Tree">tree</a>);
          <span title="Nothing" class="keyword">throw</span> <a href="#51481" title="Exception">ex</a>
        <span title="Nothing" class="keyword">case</span> <a title="Erasure.this.global.TypeError" id="51614">er</a>: <a href="../symtab/Types.scala.html#26618" title="Erasure.this.global.TypeError">TypeError</a> =&gt;
          <span title="object Console">Console</span>.<span title="(x: Any)Unit">println</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;exception when typing &quot;</span> + <a href="#51459" title="Erasure.this.global.Tree">tree</a>)
          <span title="object Console">Console</span>.<span title="(x: Any)Unit">println</span>(<a href="#51614" title="Erasure.this.global.TypeError">er</a>.<a href="../symtab/Types.scala.html#51619" title="(x$1: Any)java.lang.String">msg</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; in file &quot;)" class="string">&quot; in file &quot;</span> + <a href="#48605" title="Erasure.this.Context">context</a>.<a href="../typechecker/Contexts.scala.html#48615" title="=&gt; Erasure.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27236" title="=&gt; scala.tools.nsc.io.AbstractFile">sourceFile</a>)
          <a href="#51614" title="Erasure.this.global.TypeError">er</a>.<a title="()Unit" id="26091">printStackTrace</a>
          <span title="Nothing" class="keyword">throw</span> <span title="java.lang.Error" class="keyword">new</span> <span title="java.lang.Error">Error</span>
      }
      <span class="keyword">def</span> <a title="(cdef: Erasure.this.global.CaseDef)Erasure.this.global.CaseDef" id="51471">adaptCase</a>(<a title="Erasure.this.global.CaseDef" id="51681">cdef</a>: <a href="../ast/Trees.scala.html#26815" title="Erasure.this.global.CaseDef">CaseDef</a>): <a href="../ast/Trees.scala.html#26815" title="Erasure.this.global.CaseDef">CaseDef</a> = {
        <span class="keyword">val</span> <a title="Erasure.this.global.Tree" id="51694">body1</a> = <a href="#48601" title="(tree: Erasure.this.global.Tree,pt: Erasure.this.global.Type)Erasure.this.global.Tree">adaptToType</a>(<a href="#51681" title="Erasure.this.global.CaseDef">cdef</a>.<a href="../ast/Trees.scala.html#51689" title="=&gt; Erasure.this.global.Tree">body</a>, <a href="#51470" title="Erasure.this.global.Tree">tree1</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; Erasure.this.global.Type">tpe</a>)
        <a href="../ast/Trees.scala.html#26743" title="=&gt; Erasure.this.global.LazyTreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#48853" title="(tree: Erasure.this.global.Tree,pat: Erasure.this.global.Tree,guard: Erasure.this.global.Tree,body: Erasure.this.global.Tree)Erasure.this.global.CaseDef">CaseDef</a><a href="../ast/Trees.scala.html#29552" title="(tp: Erasure.this.global.Type)Erasure.this.global.CaseDef">(</a><a href="#51681" title="Erasure.this.global.CaseDef">cdef</a>, <a href="#51681" title="Erasure.this.global.CaseDef">cdef</a>.<a href="../ast/Trees.scala.html#51685" title="=&gt; Erasure.this.global.Tree">pat</a>, <a href="#51681" title="Erasure.this.global.CaseDef">cdef</a>.<a href="../ast/Trees.scala.html#51687" title="=&gt; Erasure.this.global.Tree">guard</a>, <a href="#51694" title="Erasure.this.global.Tree">body1</a>) setType <a href="#51694" title="Erasure.this.global.Tree">body1</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; Erasure.this.global.Type">tpe</a>
      }
      <span class="keyword">def</span> <a title="(branch: Erasure.this.global.Tree)Erasure.this.global.Tree" id="51472">adaptBranch</a>(<a title="Erasure.this.global.Tree" id="51784">branch</a>: <a href="../ast/Trees.scala.html#26752" title="Erasure.this.global.Tree">Tree</a>): <a href="../ast/Trees.scala.html#26752" title="Erasure.this.global.Tree">Tree</a> =
        <span title="Erasure.this.global.Tree" class="keyword">if</span> (<a href="#51784" title="(x$1: AnyRef)Boolean">branch</a> == <a href="../ast/Trees.scala.html#26761" title="object Erasure.this.global.EmptyTree">EmptyTree</a>) <a href="#51784" title="Erasure.this.global.Tree">branch</a> <span class="keyword">else</span> <a href="#48601" title="(tree: Erasure.this.global.Tree,pt: Erasure.this.global.Type)Erasure.this.global.Tree">adaptToType</a>(<a href="#51784" title="Erasure.this.global.Tree">branch</a>, <a href="#51470" title="Erasure.this.global.Tree">tree1</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; Erasure.this.global.Type">tpe</a>);
      <a href="#51470" title="Erasure.this.global.Tree">tree1</a> <span title="Erasure.this.global.Tree" class="keyword">match</span> {
        <span title="Erasure.this.global.If" class="keyword">case</span> If(<a title="Erasure.this.global.Tree" id="51818">cond</a>, <a title="Erasure.this.global.Tree" id="51819">thenp</a>, <a title="Erasure.this.global.Tree" id="51820">elsep</a>) =&gt;
          <a href="../ast/Trees.scala.html#26743" title="=&gt; Erasure.this.global.LazyTreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#48863" title="(tree: Erasure.this.global.Tree,cond: Erasure.this.global.Tree,thenp: Erasure.this.global.Tree,elsep: Erasure.this.global.Tree)Erasure.this.global.If">If</a>(<a href="#51470" title="Erasure.this.global.Tree">tree1</a>, <a href="#51818" title="Erasure.this.global.Tree">cond</a>, <a href="#51472" title="(branch: Erasure.this.global.Tree)Erasure.this.global.Tree">adaptBranch</a>(<a href="#51819" title="Erasure.this.global.Tree">thenp</a>), <a href="#51472" title="(branch: Erasure.this.global.Tree)Erasure.this.global.Tree">adaptBranch</a>(<a href="#51820" title="Erasure.this.global.Tree">elsep</a>))
        <span title="Erasure.this.global.Match" class="keyword">case</span> Match(<a title="Erasure.this.global.Tree" id="51913">selector</a>, <a title="List[Erasure.this.global.CaseDef]" id="51914">cases</a>) =&gt;
          <a href="../ast/Trees.scala.html#26743" title="=&gt; Erasure.this.global.LazyTreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#48864" title="(tree: Erasure.this.global.Tree,selector: Erasure.this.global.Tree,cases: List[Erasure.this.global.CaseDef])Erasure.this.global.Match">Match</a>(<a href="#51470" title="Erasure.this.global.Tree">tree1</a>, <a href="#51913" title="Erasure.this.global.Tree">selector</a>, <a href="#51914" title="(f: (Erasure.this.global.CaseDef) =&gt; Erasure.this.global.CaseDef)(implicit bf: scala.collection.generic.BuilderFactory[Erasure.this.global.CaseDef,List[Erasure.this.global.CaseDef],List[Erasure.this.global.CaseDef]])List[Erasure.this.global.CaseDef]">cases</a> <span title="scala.collection.generic.BuilderFactory[Erasure.this.global.CaseDef,List[Erasure.this.global.CaseDef],List#Coll]">map</span> <a href="#51471" title="(cdef: Erasure.this.global.CaseDef)Erasure.this.global.CaseDef">adaptCase</a>)
        <span title="Erasure.this.global.Try" class="keyword">case</span> Try(<a title="Erasure.this.global.Tree" id="52044">block</a>, <a title="List[Erasure.this.global.CaseDef]" id="52045">catches</a>, <a title="Erasure.this.global.Tree" id="52046">finalizer</a>) =&gt;
          <a href="../ast/Trees.scala.html#26743" title="=&gt; Erasure.this.global.LazyTreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#48866" title="(tree: Erasure.this.global.Tree,block: Erasure.this.global.Tree,catches: List[Erasure.this.global.CaseDef],finalizer: Erasure.this.global.Tree)Erasure.this.global.Try">Try</a>(<a href="#51470" title="Erasure.this.global.Tree">tree1</a>, <a href="#51472" title="(branch: Erasure.this.global.Tree)Erasure.this.global.Tree">adaptBranch</a>(<a href="#52044" title="Erasure.this.global.Tree">block</a>), <a href="#52045" title="(f: (Erasure.this.global.CaseDef) =&gt; Erasure.this.global.CaseDef)(implicit bf: scala.collection.generic.BuilderFactory[Erasure.this.global.CaseDef,List[Erasure.this.global.CaseDef],List[Erasure.this.global.CaseDef]])List[Erasure.this.global.CaseDef]">catches</a> <span title="scala.collection.generic.BuilderFactory[Erasure.this.global.CaseDef,List[Erasure.this.global.CaseDef],List#Coll]">map</span> <a href="#51471" title="(cdef: Erasure.this.global.CaseDef)Erasure.this.global.CaseDef">adaptCase</a>, <a href="#52046" title="Erasure.this.global.Tree">finalizer</a>)
        <span title="Erasure.this.global.Tree" class="keyword">case</span> Ident(_) | Select(_, _) =&gt;
          <span title="Unit" class="keyword">if</span> (<a href="#51470" title="Erasure.this.global.Tree">tree1</a>.<a href="../symtab/Symbols.scala.html#27155" title="(mask: Long)Boolean">symbol</a> hasFlag <span title="Long(8589934592L)">OVERLOADED</span>) {
            <span class="keyword">val</span> <a title="Erasure.this.global.Symbol" id="52163">first</a> = <a href="#51470" title="Erasure.this.global.Tree">tree1</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; Erasure.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27184" title="=&gt; List[Erasure.this.global.Symbol]">alternatives</a>.<span title="=&gt; Erasure.this.global.Symbol">head</span>
            <span class="keyword">val</span> <a title="Erasure.this.global.Symbol" id="52164">sym1</a> = <a href="#51470" title="Erasure.this.global.Tree">tree1</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; Erasure.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27185" title="(cond: (Erasure.this.global.Symbol) =&gt; Boolean)Erasure.this.global.Symbol">filter</a> { 
              <a title="Erasure.this.global.Symbol" id="52172">alt</a> =&gt; <a href="#52172" title="(x$1: AnyRef)Boolean">alt</a> <span title="(x$1: Boolean)Boolean">==</span> <a href="#52163" title="Erasure.this.global.Symbol">first</a> || <span title="=&gt; Boolean">!</span>(<a href="#52163" title="Erasure.this.global.Symbol">first</a>.<a href="../symtab/Types.scala.html#30425" title="(that: Erasure.this.global.Type)Boolean">tpe</a> looselyMatches <a href="#52172" title="Erasure.this.global.Symbol">alt</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; Erasure.this.global.Type">tpe</a>)
            }
            <span title="Unit" class="keyword">if</span> (<a href="#51459" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="(x$1: AnyRef)Boolean">symbol</a> ne <a href="#52164" title="Erasure.this.global.Symbol">sym1</a>) {
              <a href="#51470" title="Erasure.this.global.Tree">tree1</a>.<a href="../ast/Trees.scala.html#29554" title="(sym: Erasure.this.global.Symbol)Unit">symbol</a> = <a href="#52164" title="Erasure.this.global.Symbol">sym1</a>
              <a href="#51470" title="Erasure.this.global.Tree">tree1</a>.<a href="../ast/Trees.scala.html#29550" title="(t: Erasure.this.global.Type)Unit">tpe</a> = <a href="#52164" title="Erasure.this.global.Symbol">sym1</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; Erasure.this.global.Type">tpe</a>
            }
          }
          <a href="#51470" title="Erasure.this.global.Tree">tree1</a>
        <span title="Erasure.this.global.Tree" class="keyword">case</span> _ =&gt;
          <a href="#51470" title="Erasure.this.global.Tree">tree1</a>
      }
    }
  }

  /** The erasure transformer */
  <span class="keyword">class</span> <a title="class ErasureTransformer extends Erasure.this.global.Transformer with ScalaObject" id="42698">ErasureTransformer</a><span title="ScalaObject">(</span><a title="Erasure.this.global.CompilationUnit" id="45729">unit</a>: <a href="../CompilationUnits.scala.html#39428" title="Erasure.this.global.CompilationUnit">CompilationUnit</a>) <span class="keyword">extends</span> <a href="../ast/Trees.scala.html#26932" title="Erasure.this.global.Transformer">Transformer</a> {

    /** &lt;p&gt;
     *    Emit an error if there is a double definition. This can happen in
     *    the following circumstances:
     *  &lt;/p&gt;
     *  &lt;ul&gt;
     *    &lt;li&gt;
     *      A template defines two members with the same name and erased type.
     *    &lt;/li&gt;
     *    &lt;li&gt;
     *      A template defines and inherits two members &lt;code&gt;m&lt;/code&gt; with
     *      different types, but their erased types are the same.
     *    &lt;/li&gt;
     *    &lt;li&gt;
     *      A template inherits two members &lt;code&gt;m&lt;/code&gt; with different
     *      types, but their erased types are the same.
     *    &lt;/li&gt;
     *  &lt;/ul&gt;
     */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(root: Erasure.this.global.Symbol)Unit" id="45723">checkNoDoubleDefs</a>(<a title="Erasure.this.global.Symbol" id="53813">root</a>: <a href="../symtab/Symbols.scala.html#26286" title="Erasure.this.global.Symbol">Symbol</a>) {
      <span class="keyword">def</span> <a title="(sym1: Erasure.this.global.Symbol,sym2: Erasure.this.global.Symbol)Unit" id="54177">doubleDefError</a>(<a title="Erasure.this.global.Symbol" id="54182">sym1</a>: <a href="../symtab/Symbols.scala.html#26286" title="Erasure.this.global.Symbol">Symbol</a>, <a title="Erasure.this.global.Symbol" id="54183">sym2</a>: <a href="../symtab/Symbols.scala.html#26286" title="Erasure.this.global.Symbol">Symbol</a>) {
        // the .toString must also be computed at the earlier phase
        <span class="keyword">def</span> <a title="[T](op: =&gt; T)T" id="54184">atRefc</a>[<a title="&gt;: Nothing &lt;: Any" id="54186">T</a>](<a title="=&gt; T" id="54189">op</a>: =&gt; T) = <a href="../symtab/SymbolTable.scala.html#26256" title="[T](ph: scala.tools.nsc.Phase)(op: =&gt; T)T">atPhase</a><span title="(ph: scala.tools.nsc.Phase)(op: =&gt; T)T">[</span><a href="#54186" title="T">T</a>](<a href="../Global.scala.html#39408" title="=&gt; Erasure.this.global.Run">currentRun</a>.<a href="../Global.scala.html#40424" title="=&gt; scala.tools.nsc.Phase">refchecksPhase</a>.<a href="../Phase.scala.html#23302" title="=&gt; scala.tools.nsc.Phase">next</a>)(<a href="#54189" title="=&gt; T">op</a>)
        <span class="keyword">val</span> <a title="Erasure.this.global.Type" id="54187">tpe1</a> = <a href="#54184" title="(op: =&gt; Erasure.this.global.Type)Erasure.this.global.Type">atRefc</a>(<a href="#53813" title="Erasure.this.global.Symbol">root</a>.<a href="../symtab/Symbols.scala.html#27196" title="=&gt; Erasure.this.global.Type">thisType</a>.<a href="../symtab/Types.scala.html#30409" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.Type">memberType</a>(<a href="#54182" title="Erasure.this.global.Symbol">sym1</a>))
        <span class="keyword">val</span> <a title="Erasure.this.global.Type" id="54188">tpe2</a> = <a href="#54184" title="(op: =&gt; Erasure.this.global.Type)Erasure.this.global.Type">atRefc</a>(<a href="#53813" title="Erasure.this.global.Symbol">root</a>.<a href="../symtab/Symbols.scala.html#27196" title="=&gt; Erasure.this.global.Type">thisType</a>.<a href="../symtab/Types.scala.html#30409" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.Type">memberType</a>(<a href="#54183" title="Erasure.this.global.Symbol">sym2</a>))
        <span title="Unit" class="keyword">if</span> (<span title="(x$1: Boolean)Boolean">!</span><a href="#54187" title="Erasure.this.global.Type">tpe1</a>.<a href="../symtab/Types.scala.html#30395" title="=&gt; Boolean">isErroneous</a> &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#54188" title="Erasure.this.global.Type">tpe2</a>.<a href="../symtab/Types.scala.html#30395" title="=&gt; Boolean">isErroneous</a>)
          <a href="#45729" title="Erasure.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#45687" title="(pos: scala.tools.nsc.util.Position,msg: String)Unit">error</a>(
          <span title="scala.tools.nsc.util.Position" class="keyword">if</span> (<a href="#54182" title="Erasure.this.global.Symbol">sym1</a>.<a href="../symtab/Symbols.scala.html#27142" title="(x$1: AnyRef)Boolean">owner</a> == <a href="#53813" title="Erasure.this.global.Symbol">root</a>) <a href="#54182" title="Erasure.this.global.Symbol">sym1</a>.<a href="../symtab/Symbols.scala.html#27006" title="=&gt; scala.tools.nsc.util.Position">pos</a> <span class="keyword">else</span> <a href="#53813" title="Erasure.this.global.Symbol">root</a>.<a href="../symtab/Symbols.scala.html#27006" title="=&gt; scala.tools.nsc.util.Position">pos</a>,
          <span title="(x$1: Any)java.lang.String">(</span><span title="java.lang.String" class="keyword">if</span> (<a href="#54182" title="Erasure.this.global.Symbol">sym1</a>.<a href="../symtab/Symbols.scala.html#27142" title="(x$1: AnyRef)Boolean">owner</a> == <a href="#54183" title="Erasure.this.global.Symbol">sym2</a>.<a href="../symtab/Symbols.scala.html#27142" title="=&gt; Erasure.this.global.Symbol">owner</a>) <span title="java.lang.String(&quot;double definition:\012&quot;)" class="string">&quot;double definition:\n&quot;</span>
           <span class="keyword">else</span> <span title="java.lang.String" class="keyword">if</span> (<a href="#54182" title="Erasure.this.global.Symbol">sym1</a>.<a href="../symtab/Symbols.scala.html#27142" title="(x$1: AnyRef)Boolean">owner</a> == <a href="#53813" title="Erasure.this.global.Symbol">root</a>) <span title="java.lang.String(&quot;name clash between defined and inherited member:\012&quot;)" class="string">&quot;name clash between defined and inherited member:\n&quot;</span>
           <span class="keyword">else</span> <span title="java.lang.String(&quot;name clash between inherited members:\012&quot;)" class="string">&quot;name clash between inherited members:\n&quot;</span>) <span title="(x$1: Any)java.lang.String">+</span>
          <a href="#54182" title="Erasure.this.global.Symbol">sym1</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;:&quot;)" class="string">&quot;:&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#54184" title="(op: =&gt; String)String">atRefc</a>(<a href="#54187" title="Erasure.this.global.Type">tpe1</a>.<a href="../symtab/Types.scala.html#30453" title="()String">toString</a>) <span title="(x$1: Any)java.lang.String">+</span>
            (<span title="Any" class="keyword">if</span> (<a href="#54182" title="Erasure.this.global.Symbol">sym1</a>.<a href="../symtab/Symbols.scala.html#27142" title="(x$1: AnyRef)Boolean">owner</a> == <a href="#53813" title="Erasure.this.global.Symbol">root</a>) <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span> <span class="keyword">else</span> <a href="#54182" title="Erasure.this.global.Symbol">sym1</a>.<a href="../symtab/Symbols.scala.html#27251" title="=&gt; String">locationString</a>) <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; and\012&quot;)" class="string">&quot; and\n&quot;</span> <span title="(x$1: Any)java.lang.String">+</span>
          <a href="#54183" title="Erasure.this.global.Symbol">sym2</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;:&quot;)" class="string">&quot;:&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#54184" title="(op: =&gt; String)String">atRefc</a>(<a href="#54188" title="Erasure.this.global.Type">tpe2</a>.<a href="../symtab/Types.scala.html#30453" title="()String">toString</a>) <span title="(x$1: Any)java.lang.String">+</span>
            (<span title="Any" class="keyword">if</span> (<a href="#54183" title="Erasure.this.global.Symbol">sym2</a>.<a href="../symtab/Symbols.scala.html#27142" title="(x$1: AnyRef)Boolean">owner</a> == <a href="#53813" title="Erasure.this.global.Symbol">root</a>) <span title="(x$1: Any)java.lang.String" class="string">&quot; at line &quot;</span> + (<a href="#54183" title="Erasure.this.global.Symbol">sym2</a>.<a href="../symtab/Symbols.scala.html#27006" title="=&gt; scala.tools.nsc.util.Position">pos</a>).<a href="../util/Position.scala.html#30490" title="=&gt; Int">line</a> <span class="keyword">else</span> <a href="#54183" title="Erasure.this.global.Symbol">sym2</a>.<a href="../symtab/Symbols.scala.html#27251" title="=&gt; String">locationString</a>) <span title="(x$1: Any)java.lang.String">+</span>
          <span title="java.lang.String(&quot;\012have same type&quot;)" class="string">&quot;\nhave same type&quot;</span> +
          (<span title="Any" class="keyword">if</span> (<a href="#54184" title="(op: =&gt; Boolean)Boolean">atRefc</a>(<a href="../symtab/Types.scala.html#30422" title="(that: Erasure.this.global.Type)Boolean">tpe1</a> =:= <a href="#54188" title="Erasure.this.global.Type">tpe2</a>)) <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span> <span class="keyword">else</span> <span title="(x$1: Any)java.lang.String" class="string">&quot; after erasure: &quot;</span> + <a href="../symtab/SymbolTable.scala.html#26256" title="(ph: scala.tools.nsc.Phase)(op: =&gt; Erasure.this.global.Type)Erasure.this.global.Type">atPhase</a>(<a href="../symtab/SymbolTable.scala.html#26247" title="=&gt; scala.tools.nsc.Phase">phase</a>.<a href="../Phase.scala.html#23302" title="=&gt; scala.tools.nsc.Phase">next</a>)(<a href="#54182" title="Erasure.this.global.Symbol">sym1</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; Erasure.this.global.Type">tpe</a>)))
        <a href="#54182" title="Erasure.this.global.Symbol">sym1</a>.<a href="../symtab/Symbols.scala.html#27164" title="(info: Erasure.this.global.Type)sym1.type">setInfo</a><span title="Unit">(</span><a href="../symtab/Types.scala.html#26376" title="object Erasure.this.global.ErrorType">ErrorType</a>)
      }

      <span class="keyword">val</span> <a title="Erasure.this.global.Scope" id="54178">decls</a> = <a href="#53813" title="Erasure.this.global.Symbol">root</a>.<a href="../symtab/Symbols.scala.html#27163" title="=&gt; Erasure.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#30396" title="=&gt; Erasure.this.global.Scope">decls</a>
      <span class="keyword">var</span> <a title="Erasure.this.global.ScopeEntry" id="54179">e</a> = <a href="#54178" title="Erasure.this.global.Scope">decls</a>.<a href="../symtab/Scopes.scala.html#27264" title="=&gt; Erasure.this.global.ScopeEntry">elems</a>
      <span title="Unit" class="keyword">while</span> (<a href="#54179" title="(x$1: AnyRef)Boolean">e</a> ne <span title="Null(null)" class="keyword">null</span>) <a href="#54181" title="()Unit">{</a>
        <span title="Unit" class="keyword">if</span> (<a href="#54179" title="Erasure.this.global.ScopeEntry">e</a>.<a href="../symtab/Scopes.scala.html#26966" title="=&gt; Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27054" title="=&gt; Boolean">isTerm</a>) {
          <span class="keyword">var</span> <a title="Erasure.this.global.ScopeEntry" id="54352">e1</a> = <a href="#54178" title="Erasure.this.global.Scope">decls</a>.<a href="../symtab/Scopes.scala.html#27302" title="(entry: Erasure.this.global.ScopeEntry)Erasure.this.global.ScopeEntry">lookupNextEntry</a>(<a href="#54179" title="Erasure.this.global.ScopeEntry">e</a>)
          <span title="Unit" class="keyword">while</span> (<a href="#54352" title="(x$1: AnyRef)Boolean">e1</a> ne <span title="Null(null)" class="keyword">null</span>) <a href="#54356" title="()Unit">{</a>
            <span title="Unit" class="keyword">if</span> (<a href="../symtab/SymbolTable.scala.html#26256" title="(ph: scala.tools.nsc.Phase)(op: =&gt; Boolean)Boolean">atPhase</a>(<a href="../symtab/SymbolTable.scala.html#26247" title="=&gt; scala.tools.nsc.Phase">phase</a>.<a href="../Phase.scala.html#23302" title="=&gt; scala.tools.nsc.Phase">next</a>)(<a href="#54352" title="Erasure.this.global.ScopeEntry">e1</a>.<a href="../symtab/Scopes.scala.html#26966" title="=&gt; Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Types.scala.html#30422" title="(that: Erasure.this.global.Type)Boolean">info</a> =:= <a href="#54179" title="Erasure.this.global.ScopeEntry">e</a>.<a href="../symtab/Scopes.scala.html#26966" title="=&gt; Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27163" title="=&gt; Erasure.this.global.Type">info</a>)) <a href="#54177" title="(sym1: Erasure.this.global.Symbol,sym2: Erasure.this.global.Symbol)Unit">doubleDefError</a>(<a href="#54179" title="Erasure.this.global.ScopeEntry">e</a>.<a href="../symtab/Scopes.scala.html#26966" title="=&gt; Erasure.this.global.Symbol">sym</a>, <a href="#54352" title="Erasure.this.global.ScopeEntry">e1</a>.<a href="../symtab/Scopes.scala.html#26966" title="=&gt; Erasure.this.global.Symbol">sym</a>)
            <a href="#54352" title="Erasure.this.global.ScopeEntry">e1</a> = <a href="#54178" title="Erasure.this.global.Scope">decls</a>.<a href="../symtab/Scopes.scala.html#27302" title="(entry: Erasure.this.global.ScopeEntry)Erasure.this.global.ScopeEntry">lookupNextEntry</a>(<a href="#54352" title="Erasure.this.global.ScopeEntry">e1</a>)
          }
        }
        <a href="#54179" title="Erasure.this.global.ScopeEntry">e</a> = <a href="#54179" title="Erasure.this.global.ScopeEntry">e</a>.<a href="../symtab/Scopes.scala.html#26974" title="=&gt; Erasure.this.global.ScopeEntry">next</a>
      }

      <span class="keyword">val</span> <a title="Erasure.this.global.overridingPairs.Cursor" id="54180">opc</a> = <a href="#54381" title="Erasure.this.global.overridingPairs.Cursor{ ... }" class="keyword">new</a> <a href="../Global.scala.html#39279" title="anonymous class $anon extends Erasure.this.global.overridingPairs.Cursor" id="54381">overridingPairs</a>.<a href="OverridingPairs.scala.html#54385" title="Erasure.this.global.overridingPairs.Cursor">Cursor</a>(<a href="#53813" title="Erasure.this.global.Symbol">root</a>) {
        <span class="keyword">override</span> <span class="keyword">def</span> <a title="(sym: Erasure.this.global.Symbol)Boolean" id="54429">exclude</a>(<a title="Erasure.this.global.Symbol" id="54436">sym</a>: <a href="../symtab/Symbols.scala.html#26286" title="Erasure.this.global.Symbol">Symbol</a>): <span title="Boolean">Boolean</span> =
          (<span title="(x$1: Boolean)Boolean">!</span><a href="#54436" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27054" title="=&gt; Boolean">isTerm</a> <span title="(x$1: Boolean)Boolean">||</span> <a href="#54436" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27155" title="(mask: Long)Boolean">hasFlag</a>(<span title="Long(4L)">PRIVATE</span>) <span title="(x$1: Boolean)Boolean">||</span> <span class="keyword">super</span>.<a href="OverridingPairs.scala.html#54396" title="(sym: Erasure.this.global.overridingPairs.global.Symbol)Boolean">exclude</a>(<a href="#54436" title="Erasure.this.global.Symbol">sym</a>) 
           // specialized members have no type history before 'specialize', causing duble def errors for curried defs
           || <span title="=&gt; Boolean">!</span><a href="#54436" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27171" title="(pid: Int)Boolean">hasTypeAt</a>(<a href="../Global.scala.html#39408" title="=&gt; Erasure.this.global.Run">currentRun</a>.<a href="../Global.scala.html#40424" title="=&gt; scala.tools.nsc.Phase">refchecksPhase</a>.<a href="../Phase.scala.html#23291" title="=&gt; Int">id</a>)) 

        <span class="keyword">override</span> <span class="keyword">def</span> <a title="(sym1: Erasure.this.global.Symbol,sym2: Erasure.this.global.Symbol)Boolean" id="54430">matches</a>(<a title="Erasure.this.global.Symbol" id="54459">sym1</a>: <a href="../symtab/Symbols.scala.html#26286" title="Erasure.this.global.Symbol">Symbol</a>, <a title="Erasure.this.global.Symbol" id="54460">sym2</a>: <a href="../symtab/Symbols.scala.html#26286" title="Erasure.this.global.Symbol">Symbol</a>): <span title="Boolean">Boolean</span> =
          <a href="../symtab/SymbolTable.scala.html#26256" title="(ph: scala.tools.nsc.Phase)(op: =&gt; Boolean)Boolean">atPhase</a>(<a href="../symtab/SymbolTable.scala.html#26247" title="=&gt; scala.tools.nsc.Phase">phase</a>.<a href="../Phase.scala.html#23302" title="=&gt; scala.tools.nsc.Phase">next</a>)(<a href="#54459" title="Erasure.this.global.Symbol">sym1</a>.<a href="../symtab/Types.scala.html#30422" title="(that: Erasure.this.global.Type)Boolean">tpe</a> =:= <a href="#54460" title="Erasure.this.global.Symbol">sym2</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; Erasure.this.global.Type">tpe</a>)
      }
      <span title="Unit" class="keyword">while</span> (<a href="#54180" title="Erasure.this.global.overridingPairs.Cursor">opc</a>.<a href="OverridingPairs.scala.html#54426" title="=&gt; Boolean">hasNext</a>) <a href="#54500" title="()Unit">{</a>
        <span title="Unit" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="../symtab/SymbolTable.scala.html#26256" title="(ph: scala.tools.nsc.Phase)(op: =&gt; Boolean)Boolean">atPhase</a>(<a href="../Global.scala.html#39408" title="=&gt; Erasure.this.global.Run">currentRun</a>.<a href="../Global.scala.html#40424" title="=&gt; scala.tools.nsc.Phase">refchecksPhase</a>.<a href="../Phase.scala.html#23302" title="=&gt; scala.tools.nsc.Phase">next</a>)(
              <a href="#53813" title="Erasure.this.global.Symbol">root</a>.<a href="../symtab/Symbols.scala.html#27196" title="=&gt; Erasure.this.global.Type">thisType</a>.<a href="../symtab/Types.scala.html#30409" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.Type">memberType</a><a href="../symtab/Types.scala.html#30424" title="(that: Erasure.this.global.Type)Boolean">(</a><a href="#54180" title="Erasure.this.global.overridingPairs.Cursor">opc</a>.<a href="OverridingPairs.scala.html#54420" title="=&gt; Erasure.this.global.overridingPairs.global.Symbol">overriding</a>) matches
              <a href="#53813" title="Erasure.this.global.Symbol">root</a>.<a href="../symtab/Symbols.scala.html#27196" title="=&gt; Erasure.this.global.Type">thisType</a>.<a href="../symtab/Types.scala.html#30409" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.Type">memberType</a>(<a href="#54180" title="Erasure.this.global.overridingPairs.Cursor">opc</a>.<a href="OverridingPairs.scala.html#54423" title="=&gt; Erasure.this.global.overridingPairs.global.Symbol">overridden</a>))) {
          <span title="Unit" class="keyword">if</span> (<a href="../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../Settings.scala.html#37988" title="=&gt; Boolean">value</a>)
            <a href="../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#54180" title="Erasure.this.global.overridingPairs.Cursor">opc</a>.<a href="OverridingPairs.scala.html#54420" title="=&gt; Erasure.this.global.overridingPairs.global.Symbol">overriding</a>.<a href="../symtab/Symbols.scala.html#27251" title="=&gt; String">locationString</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; &quot;)" class="string">&quot; &quot;</span> <span title="(x$1: Any)java.lang.String">+</span>
                     <a href="#54180" title="Erasure.this.global.overridingPairs.Cursor">opc</a>.<a href="OverridingPairs.scala.html#54420" title="=&gt; Erasure.this.global.overridingPairs.global.Symbol">overriding</a>.<a href="../symtab/Symbols.scala.html#27253" title="=&gt; java.lang.String">infosString</a> <span title="(x$1: Any)java.lang.String">+</span>
                     <a href="#54180" title="Erasure.this.global.overridingPairs.Cursor">opc</a>.<a href="OverridingPairs.scala.html#54423" title="=&gt; Erasure.this.global.overridingPairs.global.Symbol">overridden</a>.<a href="../symtab/Symbols.scala.html#27251" title="=&gt; String">locationString</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; &quot;)" class="string">&quot; &quot;</span> +
                     <a href="#54180" title="Erasure.this.global.overridingPairs.Cursor">opc</a>.<a href="OverridingPairs.scala.html#54423" title="=&gt; Erasure.this.global.overridingPairs.global.Symbol">overridden</a>.<a href="../symtab/Symbols.scala.html#27253" title="=&gt; java.lang.String">infosString</a>)
          <a href="#54177" title="(sym1: Erasure.this.global.Symbol,sym2: Erasure.this.global.Symbol)Unit">doubleDefError</a>(<a href="#54180" title="Erasure.this.global.overridingPairs.Cursor">opc</a>.<a href="OverridingPairs.scala.html#54420" title="=&gt; Erasure.this.global.overridingPairs.global.Symbol">overriding</a>, <a href="#54180" title="Erasure.this.global.overridingPairs.Cursor">opc</a>.<a href="OverridingPairs.scala.html#54423" title="=&gt; Erasure.this.global.overridingPairs.global.Symbol">overridden</a>)
        }
        <a href="#54180" title="Erasure.this.global.overridingPairs.Cursor">opc</a>.<a href="OverridingPairs.scala.html#54427" title="=&gt; Unit">next</a>
      }
    }

/*
      for (bc &lt;- root.info.baseClasses.tail; other &lt;- bc.info.decls.toList) {
        if (other.isTerm &amp;&amp; !other.isConstructor &amp;&amp; !(other hasFlag (PRIVATE | BRIDGE))) {
          for (member &lt;- root.info.nonPrivateMember(other.name).alternatives) {
            if (member != other &amp;&amp; 
                !(member hasFlag BRIDGE) &amp;&amp; 
                atPhase(phase.next)(member.tpe =:= other.tpe) &amp;&amp; 
                !atPhase(refchecksPhase.next)(
                  root.thisType.memberType(member) matches root.thisType.memberType(other))) {
              if (settings.debug.value) log(&quot;&quot; + member.locationString + &quot; &quot; + member.infosString + other.locationString + &quot; &quot; + other.infosString);
              doubleDefError(member, other)
            }
          }
        }
      }
*/

    /** &lt;p&gt;
     *    Add bridge definitions to a template. This means:
     *  &lt;/p&gt;
     *  &lt;p&gt;
     *    If there is a concrete member &lt;code&gt;m&lt;/code&gt; which overrides a
     *    member in a base class of the template, and the erased types of
     *    the two members differ, and the two members are not inherited or
     *    defined by some parent class of the template, then a bridge from
     *    the overridden member &lt;code&gt;m1&lt;/code&gt; to the member &lt;code&gt;m0&lt;/code&gt;
     *    is added. The bridge has the erased type of &lt;code&gt;m1&lt;/code&gt; and
     *    forwards to &lt;code&gt;m0&lt;/code&gt;.
     *  &lt;/p&gt;
     *  &lt;p&gt;
     *    No bridge is added if there is already a bridge to &lt;code&gt;m0&lt;/code&gt;
     *    with the erased type of &lt;code&gt;m1&lt;/code&gt; in the template.
     *  &lt;/p&gt;
     */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(owner: Erasure.this.global.Symbol)(List[Erasure.this.global.Tree], scala.collection.immutable.Set[Erasure.this.global.Symbol])" id="45724">bridgeDefs</a>(<a title="Erasure.this.global.Symbol" id="54593">owner</a>: <a href="../symtab/Symbols.scala.html#26286" title="Erasure.this.global.Symbol">Symbol</a>): <span title="(List[Erasure.this.global.Tree], scala.collection.immutable.Set[Erasure.this.global.Symbol])">(</span>List[Tree], Set[Symbol]) = {  
      <span class="keyword">var</span> <a title="scala.collection.immutable.Set[Erasure.this.global.Symbol]" id="54696">toBeRemoved</a>: <a title="scala.collection.immutable.Set[Erasure.this.global.Symbol]" id="7612">Set</a>[Symbol] = <a title="(args: Erasure.this.global.Symbol*)scala.collection.immutable.Set[Erasure.this.global.Symbol]" id="7613">Set</a>()
      //println(&quot;computing bridges for &quot; + owner)//DEBUG
      <span title="(assertion: Boolean)Unit">assert</span>(<a href="../symtab/SymbolTable.scala.html#26247" title="(x$1: AnyRef)Boolean">phase</a> == <a href="../Global.scala.html#39408" title="=&gt; Erasure.this.global.Run">currentRun</a>.<a href="../Global.scala.html#40428" title="=&gt; scala.tools.nsc.Phase">erasurePhase</a>)
      <span class="keyword">val</span> <a title="Erasure.this.global.Type" id="54697">site</a> = <a href="#54593" title="Erasure.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27196" title="=&gt; Erasure.this.global.Type">thisType</a>
      <span class="keyword">val</span> <a title="Erasure.this.global.Scope" id="54698">bridgesScope</a> = <a href="../symtab/Scopes.scala.html#26125" title="=&gt; Erasure.this.global.Scope">newScope</a>
      <span class="keyword">val</span> <a title="scala.collection.mutable.HashMap[Erasure.this.global.Symbol,Erasure.this.global.Symbol]" id="54699">bridgeTarget</a> = <span title="scala.collection.mutable.HashMap[Erasure.this.global.Symbol,Erasure.this.global.Symbol]" class="keyword">new</span> <a title="scala.collection.mutable.HashMap[Erasure.this.global.Symbol,Erasure.this.global.Symbol]" id="25113">HashMap</a>[Symbol, Symbol]
      <span class="keyword">var</span> <a title="List[Erasure.this.global.Tree]" id="54700">bridges</a>: <span title="List[Erasure.this.global.Tree]">List</span>[Tree] = List<span title="object Nil">(</span>)
      <span class="keyword">val</span> <a title="Erasure.this.global.overridingPairs.Cursor" id="54701">opc</a> = <a href="../symtab/SymbolTable.scala.html#26256" title="(ph: scala.tools.nsc.Phase)(op: =&gt; Erasure.this.global.overridingPairs.Cursor{ ... })Erasure.this.global.overridingPairs.Cursor{ ... }">atPhase</a>(<a href="../Global.scala.html#39408" title="=&gt; Erasure.this.global.Run">currentRun</a>.<a href="../Global.scala.html#40426" title="=&gt; scala.tools.nsc.Phase">explicitOuterPhase</a>) {     
        <a href="#54764" title="Erasure.this.global.overridingPairs.Cursor{ ... }" class="keyword">new</a> <a href="../Global.scala.html#39279" title="anonymous class $anon extends Erasure.this.global.overridingPairs.Cursor" id="54764">overridingPairs</a>.<a href="OverridingPairs.scala.html#54385" title="Erasure.this.global.overridingPairs.Cursor">Cursor</a>(<a href="#54593" title="Erasure.this.global.Symbol">owner</a>) {    
          <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; List[Erasure.this.global.Type]" id="54766">parents</a>: <span title="List[Erasure.this.global.Type]">List</span>[Type] = <span title="(xs: Erasure.this.global.Type*)List[Erasure.this.global.Type]">List</span>(<a href="#54593" title="Erasure.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27163" title="=&gt; Erasure.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#30375" title="=&gt; List[Erasure.this.global.Type]">parents</a>.<span title="=&gt; Erasure.this.global.Type">head</span>)
          <span class="keyword">override</span> <span class="keyword">def</span> <a title="(sym: Erasure.this.global.Symbol)Boolean" id="54767">exclude</a>(<a title="Erasure.this.global.Symbol" id="54784">sym</a>: <a href="../symtab/Symbols.scala.html#26286" title="Erasure.this.global.Symbol">Symbol</a>): <span title="Boolean">Boolean</span> =
            <span title="(x$1: Boolean)Boolean">!</span><a href="#54784" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27069" title="=&gt; Boolean">isMethod</a> <span title="(x$1: Boolean)Boolean">||</span> <a href="#54784" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27155" title="(mask: Long)Boolean">hasFlag</a>(<span title="Long(4L)">PRIVATE</span>) || <span class="keyword">super</span>.<a href="OverridingPairs.scala.html#54396" title="(sym: Erasure.this.global.overridingPairs.global.Symbol)Boolean">exclude</a>(<a href="#54784" title="Erasure.this.global.Symbol">sym</a>)
        }
      }
      <span title="Unit" class="keyword">while</span> (<a href="#54701" title="Erasure.this.global.overridingPairs.Cursor">opc</a>.<a href="OverridingPairs.scala.html#54426" title="=&gt; Boolean">hasNext</a>) <a href="#54702" title="()Unit">{</a>
        <span class="keyword">val</span> <a title="Erasure.this.global.overridingPairs.global.Symbol" id="54812">member</a> = <a href="#54701" title="Erasure.this.global.overridingPairs.Cursor">opc</a>.<a href="OverridingPairs.scala.html#54420" title="=&gt; Erasure.this.global.overridingPairs.global.Symbol">overriding</a>
        <span class="keyword">val</span> <a title="Erasure.this.global.overridingPairs.global.Symbol" id="54813">other</a> = <a href="#54701" title="Erasure.this.global.overridingPairs.Cursor">opc</a>.<a href="OverridingPairs.scala.html#54423" title="=&gt; Erasure.this.global.overridingPairs.global.Symbol">overridden</a>
        //Console.println(&quot;bridge? &quot; + member + &quot;:&quot; + member.tpe + member.locationString + &quot; to &quot; + other + &quot;:&quot; + other.tpe + other.locationString);//DEBUG
        <span title="Unit" class="keyword">if</span> (<a href="../symtab/SymbolTable.scala.html#26256" title="(ph: scala.tools.nsc.Phase)(op: =&gt; Boolean)Boolean">atPhase</a>(<a href="../Global.scala.html#39408" title="=&gt; Erasure.this.global.Run">currentRun</a>.<a href="../Global.scala.html#40426" title="=&gt; scala.tools.nsc.Phase">explicitOuterPhase</a>)(<span title="=&gt; Boolean">!</span><a href="#54812" title="Erasure.this.global.overridingPairs.global.Symbol">member</a>.<a href="../symtab/Symbols.scala.html#27112" title="=&gt; Boolean">isDeferred</a>)) {
          <span class="keyword">val</span> <a title="Erasure.this.global.Type" id="54831">otpe</a> = <a href="#42680" title="(v1: Erasure.this.global.Type)Erasure.this.global.Type">erasure</a>(<a href="#54813" title="Erasure.this.global.overridingPairs.global.Symbol">other</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; Erasure.this.global.overridingPairs.global.Type">tpe</a>);
          <span class="keyword">val</span> <a title="Boolean" id="54832">bridgeNeeded</a> = <a href="../symtab/SymbolTable.scala.html#26256" title="(ph: scala.tools.nsc.Phase)(op: =&gt; Boolean)Boolean">atPhase</a>(<a href="../symtab/SymbolTable.scala.html#26247" title="=&gt; scala.tools.nsc.Phase">phase</a>.<a href="../Phase.scala.html#23302" title="=&gt; scala.tools.nsc.Phase">next</a>) (
            <span title="(x$1: Boolean)Boolean">!</span>(<a href="#54813" title="Erasure.this.global.overridingPairs.global.Symbol">other</a>.<a href="../symtab/Types.scala.html#30422" title="(that: Erasure.this.global.overridingPairs.global.Type)Boolean">tpe</a> =:= <a href="#54812" title="Erasure.this.global.overridingPairs.global.Symbol">member</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; Erasure.this.global.overridingPairs.global.Type">tpe</a>) <span title="(x$1: Boolean)Boolean">&amp;&amp;</span>
            <span title="=&gt; Boolean">!</span>(<a href="#42692" title="(v1: Erasure.this.global.Type)Erasure.this.global.Type">deconstMap</a><a href="../symtab/Types.scala.html#30422" title="(that: Erasure.this.global.Type)Boolean">(</a><a href="#54813" title="Erasure.this.global.overridingPairs.global.Symbol">other</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; Erasure.this.global.overridingPairs.global.Type">tpe</a>) =:= <a href="#42692" title="(v1: Erasure.this.global.Type)Erasure.this.global.Type">deconstMap</a>(<a href="#54812" title="Erasure.this.global.overridingPairs.global.Symbol">member</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; Erasure.this.global.overridingPairs.global.Type">tpe</a>)) &amp;&amp;
            { <span class="keyword">var</span> <a title="Erasure.this.global.ScopeEntry" id="54856">e</a> = <a href="#54698" title="Erasure.this.global.Scope">bridgesScope</a>.<a href="../symtab/Scopes.scala.html#27301" title="(name: Erasure.this.global.Name)Erasure.this.global.ScopeEntry">lookupEntry</a>(<a href="#54812" title="Erasure.this.global.overridingPairs.global.Symbol">member</a>.<a href="../symtab/Symbols.scala.html#27147" title="=&gt; Erasure.this.global.overridingPairs.global.Name">name</a>)
              <span title="Unit" class="keyword">while</span> (<span title="(x$1: Boolean)Boolean">(</span><a href="#54856" title="(x$1: AnyRef)Boolean">e</a> ne <span title="Null(null)" class="keyword">null</span>) &amp;&amp; <span title="=&gt; Boolean">!</span>(<span title="(x$1: Boolean)Boolean">(</span><a href="#54856" title="Erasure.this.global.ScopeEntry">e</a>.<a href="../symtab/Scopes.scala.html#26966" title="=&gt; Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Types.scala.html#30422" title="(that: Erasure.this.global.Type)Boolean">tpe</a> =:= <a href="#54831" title="Erasure.this.global.Type">otpe</a>) &amp;&amp; (<a href="#54699" title="(key: Erasure.this.global.Symbol)Erasure.this.global.Symbol">bridgeTarget</a><span title="(x$1: AnyRef)Boolean">(</span><a href="#54856" title="Erasure.this.global.ScopeEntry">e</a>.<a href="../symtab/Scopes.scala.html#26966" title="=&gt; Erasure.this.global.Symbol">sym</a>) == <a href="#54812" title="Erasure.this.global.overridingPairs.global.Symbol">member</a>)))
                <a href="#54856" title="Erasure.this.global.ScopeEntry">e</a> = <a href="#54698" title="Erasure.this.global.Scope">bridgesScope</a>.<a href="../symtab/Scopes.scala.html#27302" title="(entry: Erasure.this.global.ScopeEntry)Erasure.this.global.ScopeEntry">lookupNextEntry</a>(<a href="#54856" title="Erasure.this.global.ScopeEntry">e</a>);
              (<a href="#54856" title="(x$1: AnyRef)Boolean">e</a> eq <span title="Null(null)" class="keyword">null</span>)
            }
          );
          <span title="Unit" class="keyword">if</span> (<a href="#54832" title="Boolean">bridgeNeeded</a>) {
            <span class="keyword">val</span> <a title="Erasure.this.global.overridingPairs.global.Symbol" id="54904">bridge</a> = <a href="#54813" title="Erasure.this.global.overridingPairs.global.Symbol">other</a>.<a href="../symtab/Symbols.scala.html#27189" title="(owner: Erasure.this.global.overridingPairs.global.Symbol)Erasure.this.global.overridingPairs.global.Symbol">cloneSymbolImpl</a>(<a href="#54593" title="Erasure.this.global.Symbol">owner</a>)
              .<a href="../symtab/Symbols.scala.html#27007" title="(pos: scala.tools.nsc.util.Position)Erasure.this.global.overridingPairs.global.Symbol">setPos</a>(<a href="#54593" title="Erasure.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27006" title="=&gt; scala.tools.nsc.util.Position">pos</a>)
              .<a href="../symtab/Symbols.scala.html#27152" title="(mask: Long)Erasure.this.global.overridingPairs.global.Symbol">setFlag</a>(<a href="#54812" title="Erasure.this.global.overridingPairs.global.Symbol">member</a>.<a href="../symtab/Symbols.scala.html#27150" title="(x$1: Int)Long" id="3203">flags</a> | <span title="Int(67108864)">BRIDGE</span>)
              .<a href="../symtab/Symbols.scala.html#27153" title="(mask: Long)Erasure.this.global.overridingPairs.global.Symbol">resetFlag</a>(ACCESSOR | DEFERRED <a title="(x$1: Long)Long" id="3231">|</a> LAZY | <a href="../symtab/Flags.scala.html#28923" title="=&gt; Long">lateDEFERRED</a>)
            // the parameter symbols need to have the new owner
            <a href="#54904" title="Erasure.this.global.overridingPairs.global.Symbol">bridge</a>.<a href="../symtab/Symbols.scala.html#27164" title="(info: Erasure.this.global.overridingPairs.global.Type)bridge.type">setInfo</a>(<a href="#54831" title="Erasure.this.global.Type">otpe</a>.<a href="../symtab/Types.scala.html#30430" title="(owner: Erasure.this.global.Symbol)Erasure.this.global.Type">cloneInfo</a>(<a href="#54904" title="Erasure.this.global.overridingPairs.global.Symbol">bridge</a>))
            <a href="#54699" title="(key: Erasure.this.global.Symbol,value: Erasure.this.global.Symbol)Unit" id="44618">bridgeTarget</a>(<a href="#54904" title="Erasure.this.global.overridingPairs.global.Symbol">bridge</a>) = <a href="#54812" title="Erasure.this.global.overridingPairs.global.Symbol">member</a>
            <a href="../symtab/SymbolTable.scala.html#26256" title="(ph: scala.tools.nsc.Phase)(op: =&gt; Erasure.this.global.Symbol)Erasure.this.global.Symbol">atPhase</a>(<a href="../symtab/SymbolTable.scala.html#26247" title="=&gt; scala.tools.nsc.Phase">phase</a>.<a href="../Phase.scala.html#23302" title="=&gt; scala.tools.nsc.Phase">next</a>) { <a href="#54593" title="Erasure.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27163" title="=&gt; Erasure.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#30396" title="=&gt; Erasure.this.global.Scope">decls</a>.<a href="../symtab/Scopes.scala.html#27290" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.Symbol">enter</a>(<a href="#54904" title="Erasure.this.global.overridingPairs.global.Symbol">bridge</a>) }
            <span title="Unit" class="keyword">if</span> (<a href="#54813" title="Erasure.this.global.overridingPairs.global.Symbol">other</a>.<a href="../symtab/Symbols.scala.html#27142" title="(x$1: AnyRef)Boolean">owner</a> == <a href="#54593" title="Erasure.this.global.Symbol">owner</a>) {
              //println(&quot;bridge to same: &quot;+other+other.locationString)//DEBUG
              <a href="../symtab/SymbolTable.scala.html#26256" title="(ph: scala.tools.nsc.Phase)(op: =&gt; Unit)Unit">atPhase</a>(<a href="../symtab/SymbolTable.scala.html#26247" title="=&gt; scala.tools.nsc.Phase">phase</a>.<a href="../Phase.scala.html#23302" title="=&gt; scala.tools.nsc.Phase">next</a>) { <a href="#54593" title="Erasure.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27163" title="=&gt; Erasure.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#30396" title="=&gt; Erasure.this.global.Scope">decls</a>.<a href="../symtab/Scopes.scala.html#27296" title="(sym: Erasure.this.global.Symbol)Unit">unlink</a>(<a href="#54813" title="Erasure.this.global.overridingPairs.global.Symbol">other</a>) }
              <a href="#54696" title="scala.collection.immutable.Set[Erasure.this.global.Symbol]" id="39566">toBeRemoved</a> += <a href="#54813" title="Erasure.this.global.overridingPairs.global.Symbol">other</a>
            }
            <a href="../symtab/Scopes.scala.html#27290" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.Symbol">bridgesScope</a> enter <a href="#54904" title="Erasure.this.global.overridingPairs.global.Symbol">bridge</a>
            <a href="#54700" title="List[Erasure.this.global.Tree]">bridges</a> =
              <a href="../symtab/SymbolTable.scala.html#26256" title="(ph: scala.tools.nsc.Phase)(op: =&gt; Erasure.this.global.DefDef)Erasure.this.global.DefDef">atPhase</a>(<a href="../symtab/SymbolTable.scala.html#26247" title="=&gt; scala.tools.nsc.Phase">phase</a>.<a href="../Phase.scala.html#23302" title="=&gt; scala.tools.nsc.Phase">next</a>) {
                <a href="../ast/Trees.scala.html#26943" title="(pos: scala.tools.nsc.util.Position)(tree: Erasure.this.global.DefDef)Erasure.this.global.DefDef">atPos</a>(<a href="#54904" title="Erasure.this.global.overridingPairs.global.Symbol">bridge</a>.<a href="../symtab/Symbols.scala.html#27006" title="=&gt; scala.tools.nsc.util.Position">pos</a>) {
                  <span class="keyword">val</span> <a title="Erasure.this.global.DefDef" id="55104">bridgeDef</a> =
                    <a href="../ast/Trees.scala.html#26791" title="(sym: Erasure.this.global.Symbol,rhs: Erasure.this.global.Tree)Erasure.this.global.DefDef">DefDef</a>(<a href="#54904" title="Erasure.this.global.overridingPairs.global.Symbol">bridge</a>,
                      <a href="#54812" title="Erasure.this.global.overridingPairs.global.Symbol">member</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; Erasure.this.global.overridingPairs.global.Type">tpe</a> <span title="Erasure.this.global.Tree" class="keyword">match</span> {
                        <span title="Erasure.this.global.Literal" class="keyword">case</span> MethodType(<a href="#55157" title="(x: List[Erasure.this.global.Symbol])Some[List[Erasure.this.global.Symbol]]">List</a>(), ConstantType(<a title="Erasure.this.global.Constant" id="55168">c</a>)) =&gt; <a href="../ast/Trees.scala.html#49595" title="(value: Erasure.this.global.Constant)Erasure.this.global.Literal">Literal</a>(<a href="#55168" title="Erasure.this.global.Constant">c</a>)
                        <span title="Erasure.this.global.Tree" class="keyword">case</span> _ =&gt; 
                          (((<a href="../ast/Trees.scala.html#26890" title="(qualifier: Erasure.this.global.Tree,sym: Erasure.this.global.Symbol)Erasure.this.global.Select">Select</a>(<a href="../ast/Trees.scala.html#26886" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.Tree">This</a>(<a href="#54593" title="Erasure.this.global.Symbol">owner</a>), <a href="#54812" title="Erasure.this.global.overridingPairs.global.Symbol">member</a>): <a href="../ast/Trees.scala.html#26752" title="Erasure.this.global.Tree">Tree</a>) <a href="#55204" title="Erasure.this.global.Tree">/:</a> <a href="#54904" title="Erasure.this.global.overridingPairs.global.Symbol">bridge</a>.<a href="../symtab/Symbols.scala.html#27176" title="(z: Erasure.this.global.Tree)(op: (Erasure.this.global.Tree, List[Erasure.this.global.overridingPairs.global.Symbol]) =&gt; Erasure.this.global.Tree)Erasure.this.global.Tree" id="25451">paramss</a>)
                             ((<a title="Erasure.this.global.Tree" id="55273">fun</a>, <a title="List[Erasure.this.global.overridingPairs.global.Symbol]" id="55274">vparams</a>) =&gt; <a href="../ast/Trees.scala.html#49378" title="(fun: Erasure.this.global.Tree,args: List[Erasure.this.global.Tree])Erasure.this.global.Apply">Apply</a>(<a href="#55273" title="Erasure.this.global.Tree">fun</a>, <a href="#55274" title="(f: (Erasure.this.global.overridingPairs.global.Symbol) =&gt; Erasure.this.global.Ident)(implicit bf: scala.collection.generic.BuilderFactory[Erasure.this.global.Ident,List[Erasure.this.global.Tree],List[Erasure.this.global.overridingPairs.global.Symbol]])List[Erasure.this.global.Tree]">vparams</a> <span title="scala.collection.generic.BuilderFactory[Erasure.this.global.Ident,List[Erasure.this.global.Ident],List#Coll]">map</span> <a href="../ast/Trees.scala.html#26895" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.Ident">Ident</a>)))
                      });
                  <span title="Unit" class="keyword">if</span> (<a href="../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../Settings.scala.html#37988" title="=&gt; Boolean">value</a>)
                    <a href="../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;generating bridge from &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#54813" title="Erasure.this.global.overridingPairs.global.Symbol">other</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;(&quot;)" class="string">&quot;(&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="../symtab/Flags.scala.html#10482" title="object scala.tools.nsc.symtab.Flags">Flags</a>.<a href="../symtab/Flags.scala.html#29000" title="(flags: Long)String">flagsToString</a>(<a href="#54904" title="Erasure.this.global.overridingPairs.global.Symbol">bridge</a>.<a href="../symtab/Symbols.scala.html#27150" title="=&gt; Long">flags</a>)  <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;)&quot;)" class="string">&quot;)&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;:&quot;)" class="string">&quot;:&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#54831" title="Erasure.this.global.Type">otpe</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="#54813" title="Erasure.this.global.overridingPairs.global.Symbol">other</a>.<a href="../symtab/Symbols.scala.html#27251" title="=&gt; String">locationString</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; to &quot;)" class="string">&quot; to &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#54812" title="Erasure.this.global.overridingPairs.global.Symbol">member</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;:&quot;)" class="string">&quot;:&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#42680" title="(v1: Erasure.this.global.Type)Erasure.this.global.Type">erasure</a>(<a href="#54812" title="Erasure.this.global.overridingPairs.global.Symbol">member</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; Erasure.this.global.overridingPairs.global.Type">tpe</a>) <span title="(x$1: Any)java.lang.String">+</span> <a href="#54812" title="Erasure.this.global.overridingPairs.global.Symbol">member</a>.<a href="../symtab/Symbols.scala.html#27251" title="=&gt; String">locationString</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; =\012 &quot;)" class="string">&quot; =\n &quot;</span> + <a href="#55104" title="Erasure.this.global.DefDef">bridgeDef</a>);
                  <a href="#55104" title="Erasure.this.global.DefDef">bridgeDef</a>
                }
              } <a href="#55089" title="Erasure.this.global.DefDef">::</a> <a href="#54700" title="(x: Erasure.this.global.Tree)List[Erasure.this.global.Tree]">bridges</a>;
          }
        }
        <a href="#54701" title="Erasure.this.global.overridingPairs.Cursor">opc</a>.<a href="OverridingPairs.scala.html#54427" title="=&gt; Unit">next</a>
      }
      <span title="(_1: List[Erasure.this.global.Tree],_2: scala.collection.immutable.Set[Erasure.this.global.Symbol])(List[Erasure.this.global.Tree], scala.collection.immutable.Set[Erasure.this.global.Symbol])">(</span><a href="#54700" title="List[Erasure.this.global.Tree]">bridges</a>, <a href="#54696" title="scala.collection.immutable.Set[Erasure.this.global.Symbol]">toBeRemoved</a>)
    }
/*
      for (bc &lt;- site.baseClasses.tail; other &lt;- bc.info.decls.toList) {
        if (other.isMethod &amp;&amp; !other.isConstructor) {
          for (member &lt;- site.nonPrivateMember(other.name).alternatives) {
            if (member != other &amp;&amp;
                !(member hasFlag DEFERRED) &amp;&amp; 
                (site.memberType(member) matches site.memberType(other)) &amp;&amp;
                !(site.parents exists (p =&gt; 
                  (p.symbol isSubClass member.owner) &amp;&amp; (p.symbol isSubClass other.owner)))) {
...
             }
          }
*/

    <span class="keyword">def</span> <a title="(stats: List[Erasure.this.global.Tree],base: Erasure.this.global.Symbol)List[Erasure.this.global.Tree]" id="45725">addBridges</a>(<a title="List[Erasure.this.global.Tree]" id="53829">stats</a>: <span title="List[Erasure.this.global.Tree]">List</span>[Tree], <a title="Erasure.this.global.Symbol" id="53830">base</a>: <a href="../symtab/Symbols.scala.html#26286" title="Erasure.this.global.Symbol">Symbol</a>): <span title="List[Erasure.this.global.Tree]">List</span>[Tree] =
      <span title="List[Erasure.this.global.Tree]" class="keyword">if</span> (<a href="#53830" title="Erasure.this.global.Symbol">base</a>.<a href="../symtab/Symbols.scala.html#27082" title="=&gt; Boolean">isTrait</a>) <a href="#53829" title="List[Erasure.this.global.Tree]">stats</a>
      <span class="keyword">else</span> {
        <span class="keyword">val</span> <a href="#36621" title="(List[Erasure.this.global.Tree], scala.collection.immutable.Set[Erasure.this.global.Symbol])">(</a><a href="#55433" title="List[Erasure.this.global.Tree]" id="36621">bridges</a>, <a href="#55433" title="scala.collection.immutable.Set[Erasure.this.global.Symbol]" id="36623">toBeRemoved</a>) = <a href="#45724" title="(owner: Erasure.this.global.Symbol)(List[Erasure.this.global.Tree], scala.collection.immutable.Set[Erasure.this.global.Symbol])">bridgeDefs</a><span title="(List[Erasure.this.global.Tree], scala.collection.immutable.Set[Erasure.this.global.Symbol]) @unchecked">(</span><a href="#53830" title="Erasure.this.global.Symbol">base</a>)
        <span title="List[Erasure.this.global.Tree]" class="keyword">if</span> (<a href="#36621" title="List[Erasure.this.global.Tree]">bridges</a>.<span title="=&gt; Boolean">isEmpty</span>) <a href="#53829" title="List[Erasure.this.global.Tree]">stats</a> 
        <span class="keyword">else</span> (<a href="#53829" title="(p: (Erasure.this.global.Tree) =&gt; Boolean)List[Erasure.this.global.Tree]" id="25430">stats</a> filterNot (<a title="Erasure.this.global.Tree" id="55457">stat</a> =&gt; <a href="#36623" title="(elem: Erasure.this.global.Symbol)Boolean" id="39564">toBeRemoved</a> contains <a href="#55457" title="Erasure.this.global.Tree">stat</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; Erasure.this.global.Symbol">symbol</a>)) <a href="#55454" title="List[Erasure.this.global.Tree]">:::</a> <a href="#36621" title="(prefix: List[Erasure.this.global.Tree])List[Erasure.this.global.Tree]" id="24420">bridges</a>
      }

    /** &lt;p&gt;
     *    Transform tree at phase &lt;code&gt;erasure&lt;/code&gt; before retyping it.
     *    This entails the following:
     *  &lt;/p&gt;
     *  &lt;ul&gt;
     *    &lt;li&gt;Remove all type parameters in class and method definitions.&lt;/li&gt;
     *    &lt;li&gt;Remove all abstract and alias type definitions.&lt;/li&gt;
     *    &lt;li&gt;
     *      Remove all type applications other than those involving a type
     *      test or cast.
     *    &lt;/li&gt;
     *    &lt;li&gt;
     *      Remove all empty trees in statements and definitions in a
     *      &lt;code&gt;PackageDef&lt;/code&gt;.
     *    &lt;/li&gt;
     *    &lt;li&gt;Check that there are no double definitions in a template.&lt;/li&gt;
     *    &lt;li&gt;Add bridge definitions to a template.&lt;/li&gt;
     *    &lt;li&gt;
     *      Replace all types in type nodes and the &lt;code&gt;EmptyTree&lt;/code&gt;
     *      object by their erasure. Type nodes of type &lt;code&gt;Unit&lt;/code&gt;
     *      representing result types of methods are left alone.
     *    &lt;/li&gt;
     *    &lt;li&gt;
     *      Reset all other type attributes to &lt;code&gt;null&lt;/code&gt;, thus
     *      enforcing a retyping.
     *    &lt;/li&gt;
     *  &lt;/ul&gt;
     */
    <span class="keyword">private</span> <span class="keyword">val</span> <a title="Erasure.this.global.Transformer" id="45726">preTransformer</a> = <a href="#52201" title="Erasure.this.global.Transformer{ ... }" class="keyword">new</a> <a href="../ast/Trees.scala.html#26932" title="anonymous class $anon extends Erasure.this.global.Transformer" id="52201">Transformer</a> {
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree" id="52203">transform</a>(<a title="Erasure.this.global.Tree" id="52207">tree</a>: <a href="../ast/Trees.scala.html#26752" title="Erasure.this.global.Tree">Tree</a>): <a href="../ast/Trees.scala.html#26752" title="Erasure.this.global.Tree">Tree</a> = {
        <span title="Unit" class="keyword">if</span> (<a href="#52207" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="(x$1: AnyRef)Boolean">symbol</a> <span title="(x$1: Boolean)Boolean">==</span> <a href="../symtab/Definitions.scala.html#28579" title="=&gt; Erasure.this.global.Symbol">ArrayClass</a> &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#52207" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29559" title="=&gt; Boolean">isType</a>) <span title="Nothing" class="keyword">return</span> <a href="#52207" title="Erasure.this.global.Tree">tree</a>
        <span class="keyword">val</span> <a title="Erasure.this.global.Tree" id="52211">tree1</a> = <a href="#52207" title="Erasure.this.global.Tree">tree</a> <span title="Erasure.this.global.Tree" class="keyword">match</span> {
          <span title="Erasure.this.global.ClassDef" class="keyword">case</span> ClassDef(<a title="Erasure.this.global.Modifiers" id="52336">mods</a>, <a title="Erasure.this.global.Name" id="52337">name</a>, <a title="List[Erasure.this.global.TypeDef]" id="52338">tparams</a>, <a title="Erasure.this.global.Template" id="52339">impl</a>) =&gt;
            <span title="Unit" class="keyword">if</span> (<a href="../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../Settings.scala.html#37988" title="=&gt; Boolean">value</a>)
              <a href="../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;defs of &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#52207" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; Erasure.this.global.Symbol">symbol</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; = &quot;)" class="string">&quot; = &quot;</span> + <a href="#52207" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; Erasure.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27163" title="=&gt; Erasure.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#30396" title="=&gt; Erasure.this.global.Scope">decls</a>)
            <a href="../ast/Trees.scala.html#45697" title="=&gt; Erasure.this.global.TreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#48794" title="(tree: Erasure.this.global.Tree,mods: Erasure.this.global.Modifiers,name: Erasure.this.global.Name,tparams: List[Erasure.this.global.TypeDef],impl: Erasure.this.global.Template)Erasure.this.global.ClassDef">ClassDef</a>(<a href="#52207" title="Erasure.this.global.Tree">tree</a>, <a href="#52336" title="Erasure.this.global.Modifiers">mods</a>, <a href="#52337" title="Erasure.this.global.Name">name</a>, List<span title="object Nil">(</span>), <a href="#52339" title="Erasure.this.global.Template">impl</a>)
          <span title="Erasure.this.global.DefDef" class="keyword">case</span> DefDef(<a title="Erasure.this.global.Modifiers" id="52631">mods</a>, <a title="Erasure.this.global.Name" id="52632">name</a>, <a title="List[Erasure.this.global.TypeDef]" id="52633">tparams</a>, <a title="List[List[Erasure.this.global.ValDef]]" id="52634">vparamss</a>, <a title="Erasure.this.global.Tree" id="52635">tpt</a>, <a title="Erasure.this.global.Tree" id="52636">rhs</a>) =&gt;
            <a href="../ast/Trees.scala.html#45697" title="=&gt; Erasure.this.global.TreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#48798" title="(tree: Erasure.this.global.Tree,mods: Erasure.this.global.Modifiers,name: Erasure.this.global.Name,tparams: List[Erasure.this.global.TypeDef],vparamss: List[List[Erasure.this.global.ValDef]],tpt: Erasure.this.global.Tree,rhs: Erasure.this.global.Tree)Erasure.this.global.DefDef">DefDef</a>(<a href="#52207" title="Erasure.this.global.Tree">tree</a>, <a href="#52631" title="Erasure.this.global.Modifiers">mods</a>, <a href="#52632" title="Erasure.this.global.Name">name</a>, List<span title="object Nil">(</span>), <a href="#52634" title="List[List[Erasure.this.global.ValDef]]">vparamss</a>, <a href="#52635" title="Erasure.this.global.Tree">tpt</a>, <a href="#52636" title="Erasure.this.global.Tree">rhs</a>)
          <span title="Erasure.this.global.EmptyTree.type" class="keyword">case</span> TypeDef(_, _, _, _) =&gt;
            <a href="../ast/Trees.scala.html#26761" title="object Erasure.this.global.EmptyTree">EmptyTree</a>
          <span title="Erasure.this.global.Tree" class="keyword">case</span> TypeApply(<a title="Erasure.this.global.Tree" id="52710">fun</a>, <a title="List[Erasure.this.global.Tree]" id="52711">args</a>) <span class="keyword">if</span> (<a href="#52710" title="Erasure.this.global.Tree">fun</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; Erasure.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27142" title="(x$1: AnyRef)Boolean">owner</a> <span title="(x$1: Boolean)Boolean">!=</span> <a href="../symtab/Definitions.scala.html#28447" title="=&gt; Erasure.this.global.Symbol">AnyClass</a> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> 
                                        <a href="#52710" title="Erasure.this.global.Tree">fun</a>.<a href="../ast/Trees.scala.html#29553" title="(x$1: AnyRef)Boolean">symbol</a> != <a href="../symtab/Definitions.scala.html#28711" title="=&gt; Erasure.this.global.Symbol">Object_asInstanceOf</a> &amp;&amp;
                                        <a href="#52710" title="Erasure.this.global.Tree">fun</a>.<a href="../ast/Trees.scala.html#29553" title="(x$1: AnyRef)Boolean">symbol</a> != <a href="../symtab/Definitions.scala.html#28708" title="=&gt; Erasure.this.global.Symbol">Object_isInstanceOf</a>) =&gt;
            // leave all other type tests/type casts, remove all other type applications
            <a href="#52710" title="Erasure.this.global.Tree">fun</a>
          <span title="Erasure.this.global.Tree" class="keyword">case</span> Apply(<a title="Erasure.this.global.Tree" id="52741">fn</a>, <a title="List[Erasure.this.global.Tree]" id="52742">args</a>) =&gt;
            <span class="keyword">def</span> <a title="(tpe: Erasure.this.global.Type)Boolean" id="52745">isGenericArray</a>(<a title="Erasure.this.global.Type" id="52746">tpe</a>: <a href="../symtab/Types.scala.html#26364" title="Erasure.this.global.Type">Type</a>): <span title="Boolean">Boolean</span> = <a href="#42680" title="(v1: Erasure.this.global.Type)Erasure.this.global.Type">erasure</a>(<a href="#52746" title="Erasure.this.global.Type">tpe</a>).<a href="../symtab/Types.scala.html#30366" title="(x$1: AnyRef)Boolean">typeSymbol</a> == <a href="../symtab/Definitions.scala.html#28729" title="=&gt; Erasure.this.global.Symbol">BoxedArrayClass</a>
            <span title="Unit" class="keyword">if</span> (<a href="#52741" title="Erasure.this.global.Tree">fn</a>.<a href="../ast/Trees.scala.html#29556" title="(x$1: Boolean)Boolean">hasSymbol</a> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span>
                <a href="#52741" title="Erasure.this.global.Tree">fn</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; Erasure.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27147" title="(x$1: AnyRef)Boolean">name</a> == <a href="../symtab/StdNames.scala.html#26690" title="object Erasure.this.global.nme">nme</a>.<a href="../symtab/StdNames.scala.html#30018" title="=&gt; Erasure.this.global.Name">arraycopy</a> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> 
                <a href="#52741" title="Erasure.this.global.Tree">fn</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; Erasure.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27142" title="=&gt; Erasure.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27147" title="(x$1: AnyRef)Boolean">name</a> == <a href="../symtab/StdNames.scala.html#26690" title="object Erasure.this.global.nme">nme</a>.<a href="../symtab/StdNames.scala.html#30002" title="=&gt; Erasure.this.global.Name">System</a>.<a href="../symtab/Names.scala.html#28388" title="=&gt; Erasure.this.global.Name">toTypeName</a> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> 
                <a href="#52741" title="Erasure.this.global.Tree">fn</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; Erasure.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27142" title="=&gt; Erasure.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27142" title="(x$1: AnyRef)Boolean">owner</a> == <a href="../symtab/Definitions.scala.html#28431" title="=&gt; Erasure.this.global.Symbol">JavaLangPackage</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; Erasure.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30366" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span>
                <a href="#52742" title="List[Erasure.this.global.Tree]">args</a>.<span title="(x$1: Int)Boolean">length</span> == <span title="Int(5)" class="int">5</span> &amp;&amp;
                (<a href="#52745" title="(tpe: Erasure.this.global.Type)Boolean">isGenericArray</a><span title="(x$1: Boolean)Boolean">(</span><a href="#52742" title="(n: Int)Erasure.this.global.Tree">args</a>(<span title="Int(0)" class="int">0</span>).<a href="../ast/Trees.scala.html#29549" title="=&gt; Erasure.this.global.Type">tpe</a>) || <a href="#52745" title="(tpe: Erasure.this.global.Type)Boolean">isGenericArray</a>(<a href="#52742" title="(n: Int)Erasure.this.global.Tree">args</a>(<span title="Int(2)" class="int">2</span>).<a href="../ast/Trees.scala.html#29549" title="=&gt; Erasure.this.global.Type">tpe</a>))) 
              <a href="#45729" title="Erasure.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#45688" title="(pos: scala.tools.nsc.util.Position,msg: String)Unit">warning</a>(<a href="#52207" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29547" title="=&gt; scala.tools.nsc.util.Position">pos</a>, 
                           <span class="string">&quot;System.arraycopy should be applied only to arrays with fixed element types;\n&quot;</span> <span title="java.lang.String(&quot;System.arraycopy should be applied only to arrays with fixed element types;\012use Array.copy instead&quot;)">+</span> 
                           <span class="string">&quot;use Array.copy instead&quot;</span>)
            <span title="Erasure.this.global.Tree" class="keyword">if</span> (<a href="#52741" title="Erasure.this.global.Tree">fn</a>.<a href="../ast/Trees.scala.html#29553" title="(x$1: AnyRef)Boolean">symbol</a> == <a href="../symtab/Definitions.scala.html#28690" title="=&gt; Erasure.this.global.Symbol">Any_asInstanceOf</a>)
              <a href="#52741" title="Erasure.this.global.Tree">fn</a> <span title="Erasure.this.global.Tree" class="keyword">match</span> {
                <span title="Erasure.this.global.Tree" class="keyword">case</span> TypeApply(Select(<a title="Erasure.this.global.Tree" id="52862">qual</a>, _), <a href="#52866" title="(x: List[Erasure.this.global.Tree])Some[List[Erasure.this.global.Tree]]">List</a>(<a title="Erasure.this.global.Tree" id="52875">targ</a>)) =&gt;
                  <span title="Erasure.this.global.Tree" class="keyword">if</span> (<a href="#52862" title="Erasure.this.global.Tree">qual</a>.<a href="../symtab/Types.scala.html#30421" title="(that: Erasure.this.global.Type)Boolean">tpe</a> &lt;:&lt; <a href="#52875" title="Erasure.this.global.Tree">targ</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; Erasure.this.global.Type">tpe</a>) {
                    <a href="../ast/Trees.scala.html#26943" title="(pos: scala.tools.nsc.util.Position)(tree: Erasure.this.global.Typed)Erasure.this.global.Typed">atPos</a>(<a href="#52207" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29547" title="=&gt; scala.tools.nsc.util.Position">pos</a>) { <a href="../ast/Trees.scala.html#50628" title="(expr: Erasure.this.global.Tree,tpt: Erasure.this.global.Tree)Erasure.this.global.Typed">Typed</a>(<a href="#52862" title="Erasure.this.global.Tree">qual</a>, <a href="../ast/Trees.scala.html#26903" title="(tp: Erasure.this.global.Type)Erasure.this.global.TypeTree">TypeTree</a>(<a href="#52875" title="Erasure.this.global.Tree">targ</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; Erasure.this.global.Type">tpe</a>)) }
                  } <span class="keyword">else</span> <span title="Erasure.this.global.Tree" class="keyword">if</span> (<a href="../symtab/Definitions.scala.html#28793" title="(sym: Erasure.this.global.Symbol)Boolean">isNumericValueClass</a><span title="(x$1: Boolean)Boolean">(</span><a href="#52862" title="Erasure.this.global.Tree">qual</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; Erasure.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30366" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a>) &amp;&amp; 
                             <a href="../symtab/Definitions.scala.html#28793" title="(sym: Erasure.this.global.Symbol)Boolean">isNumericValueClass</a>(<a href="#52875" title="Erasure.this.global.Tree">targ</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; Erasure.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30366" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a>)) {
                    // convert numeric type casts
                    <span class="keyword">val</span> <a title="Erasure.this.global.Name" id="52930">cname</a> = <a href="../symtab/Names.scala.html#26207" title="(s: String)Erasure.this.global.Name">newTermName</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;to&quot;</span> + <a href="#52875" title="Erasure.this.global.Tree">targ</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; Erasure.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30366" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a>.<a href="../symtab/Symbols.scala.html#27147" title="=&gt; Erasure.this.global.Name">name</a>)
                    <span class="keyword">val</span> <a title="Erasure.this.global.Symbol" id="52931">csym</a> = <a href="#52862" title="Erasure.this.global.Tree">qual</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; Erasure.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30403" title="(name: Erasure.this.global.Name)Erasure.this.global.Symbol">member</a>(<a href="#52930" title="Erasure.this.global.Name">cname</a>)
                    <span title="(assertion: Boolean)Unit">assert</span>(<a href="#52931" title="(x$1: AnyRef)Boolean">csym</a> != <a href="../symtab/Symbols.scala.html#26293" title="object Erasure.this.global.NoSymbol">NoSymbol</a>)
                    <a href="../ast/Trees.scala.html#26943" title="(pos: scala.tools.nsc.util.Position)(tree: Erasure.this.global.Apply)Erasure.this.global.Apply">atPos</a>(<a href="#52207" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29547" title="=&gt; scala.tools.nsc.util.Position">pos</a>) { <a href="../ast/Trees.scala.html#49378" title="(fun: Erasure.this.global.Tree,args: List[Erasure.this.global.Tree])Erasure.this.global.Apply">Apply</a>(<a href="../ast/Trees.scala.html#26890" title="(qualifier: Erasure.this.global.Tree,sym: Erasure.this.global.Symbol)Erasure.this.global.Select">Select</a>(<a href="#52862" title="Erasure.this.global.Tree">qual</a>, <a href="#52931" title="Erasure.this.global.Symbol">csym</a>), List<span title="object Nil">(</span>)) }
                  } <span class="keyword">else</span> 
                    <a href="#52207" title="Erasure.this.global.Tree">tree</a>
              }
              // todo: also handle the case where the singleton type is buried in a compound
            <span class="keyword">else</span> <span title="Erasure.this.global.gen.global.Tree" class="keyword">if</span> (<a href="#52741" title="Erasure.this.global.Tree">fn</a>.<a href="../ast/Trees.scala.html#29553" title="(x$1: AnyRef)Boolean">symbol</a> == <a href="../symtab/Definitions.scala.html#28687" title="=&gt; Erasure.this.global.Symbol">Any_isInstanceOf</a>)
              <a href="#52741" title="Erasure.this.global.Tree">fn</a> <span title="Erasure.this.global.gen.global.Tree" class="keyword">match</span> {
                <span title="Erasure.this.global.gen.global.Tree" class="keyword">case</span> TypeApply(<a title="Erasure.this.global.Select" id="53029">sel</a> @ Select(<a title="Erasure.this.global.Tree" id="53034">qual</a>, <a title="Erasure.this.global.Name" id="53035">name</a>), <a href="#53039" title="(x: List[Erasure.this.global.Tree])Some[List[Erasure.this.global.Tree]]">List</a>(<a title="Erasure.this.global.Tree" id="53048">targ</a>)) =&gt;
                  <span class="keyword">def</span> <a title="(q: () =&gt; Erasure.this.global.Tree)(tp: Erasure.this.global.Type)Erasure.this.global.Tree" id="53052">mkIsInstanceOf</a>(<a title="() =&gt; Erasure.this.global.Tree" id="53053">q</a>: () =&gt; Tree)(<a title="Erasure.this.global.Type" id="53054">tp</a>: <a href="../symtab/Types.scala.html#26364" title="Erasure.this.global.Type">Type</a>): <a href="../ast/Trees.scala.html#26752" title="Erasure.this.global.Tree">Tree</a> =
                    <a href="../ast/Trees.scala.html#49378" title="(fun: Erasure.this.global.Tree,args: List[Erasure.this.global.Tree])Erasure.this.global.Apply">Apply</a><a href="../ast/Trees.scala.html#29551" title="(pos: scala.tools.nsc.util.Position)Erasure.this.global.Apply">(</a>
                      <a href="../ast/Trees.scala.html#50970" title="(fun: Erasure.this.global.Tree,args: List[Erasure.this.global.Tree])Erasure.this.global.TypeApply">TypeApply</a><a href="../ast/Trees.scala.html#29551" title="(pos: scala.tools.nsc.util.Position)Erasure.this.global.TypeApply">(</a>
                        <a href="../ast/Trees.scala.html#26890" title="(qualifier: Erasure.this.global.Tree,sym: Erasure.this.global.Symbol)Erasure.this.global.Select">Select</a><a href="../ast/Trees.scala.html#29551" title="(pos: scala.tools.nsc.util.Position)Erasure.this.global.Select">(</a><a href="#53053" title="()Erasure.this.global.Tree">q</a>(), <a href="../symtab/Definitions.scala.html#28708" title="=&gt; Erasure.this.global.Symbol">Object_isInstanceOf</a>) setPos <a href="#53029" title="Erasure.this.global.Select">sel</a>.<a href="../ast/Trees.scala.html#29547" title="=&gt; scala.tools.nsc.util.Position">pos</a>, 
                        <span title="(xs: Erasure.this.global.TypeTree*)List[Erasure.this.global.TypeTree]">List</span>(<a href="../ast/Trees.scala.html#26903" title="(tp: Erasure.this.global.Type)Erasure.this.global.TypeTree">TypeTree</a><a href="../ast/Trees.scala.html#29551" title="(pos: scala.tools.nsc.util.Position)Erasure.this.global.TypeTree">(</a><a href="#53054" title="Erasure.this.global.Type">tp</a>) setPos <a href="#53048" title="Erasure.this.global.Tree">targ</a>.<a href="../ast/Trees.scala.html#29547" title="=&gt; scala.tools.nsc.util.Position">pos</a>)) setPos <a href="#52741" title="Erasure.this.global.Tree">fn</a>.<a href="../ast/Trees.scala.html#29547" title="=&gt; scala.tools.nsc.util.Position">pos</a>,
                      List<span title="object Nil">(</span>)) setPos <a href="#52207" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29547" title="=&gt; scala.tools.nsc.util.Position">pos</a>
                  <a href="#53048" title="Erasure.this.global.Tree">targ</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; Erasure.this.global.Type">tpe</a> <span title="Erasure.this.global.gen.global.Tree" class="keyword">match</span> {
                    <span title="Erasure.this.global.Apply" class="keyword">case</span> SingleType(_, _) | ThisType(_) | SuperType(_, _) =&gt;
                      <span class="keyword">val</span> <a title="Erasure.this.global.Symbol" id="53288">cmpOp</a> = <span title="Erasure.this.global.Symbol" class="keyword">if</span> (<a href="#53048" title="Erasure.this.global.Tree">targ</a>.<a href="../symtab/Types.scala.html#30421" title="(that: Erasure.this.global.Type)Boolean">tpe</a> &lt;:&lt; <a href="../symtab/Definitions.scala.html#28449" title="=&gt; Erasure.this.global.Symbol">AnyValClass</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; Erasure.this.global.Type">tpe</a>) <a href="../symtab/Definitions.scala.html#28678" title="=&gt; Erasure.this.global.Symbol">Any_equals</a> <span class="keyword">else</span> <a href="../symtab/Definitions.scala.html#28693" title="=&gt; Erasure.this.global.Symbol">Object_eq</a>
                      <a href="../ast/Trees.scala.html#26943" title="(pos: scala.tools.nsc.util.Position)(tree: Erasure.this.global.Apply)Erasure.this.global.Apply">atPos</a>(<a href="#52207" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29547" title="=&gt; scala.tools.nsc.util.Position">pos</a>) {
                        <a href="../ast/Trees.scala.html#49378" title="(fun: Erasure.this.global.Tree,args: List[Erasure.this.global.Tree])Erasure.this.global.Apply">Apply</a>(<a href="../ast/Trees.scala.html#26890" title="(qualifier: Erasure.this.global.Tree,sym: Erasure.this.global.Symbol)Erasure.this.global.Select">Select</a>(<a href="#53034" title="Erasure.this.global.Tree">qual</a>, <a href="#53288" title="Erasure.this.global.Symbol">cmpOp</a>), <span title="(xs: Erasure.this.global.gen.global.Tree*)List[Erasure.this.global.gen.global.Tree]">List</span>(<a href="../Global.scala.html#39263" title="object Erasure.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#42905" title="(tpe: Erasure.this.global.gen.global.Type)Erasure.this.global.gen.global.Tree">mkAttributedQualifier</a>(<a href="#53048" title="Erasure.this.global.Tree">targ</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; Erasure.this.global.Type">tpe</a>)))
                      }
                    <span title="Erasure.this.global.gen.global.Tree" class="keyword">case</span> RefinedType(<a title="List[Erasure.this.global.Type]" id="53375">parents</a>, <a title="Erasure.this.global.Scope" id="53376">decls</a>) <span class="keyword">if</span> (<a href="#53375" title="List[Erasure.this.global.Type]">parents</a>.<a title="(x$1: Int)Boolean" id="2983">length</a> &gt;= <span title="Int(2)" class="int">2</span>) =&gt;
                      <a href="../Global.scala.html#39263" title="object Erasure.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#42938" title="(expr: Erasure.this.global.gen.global.Tree,owner: Erasure.this.global.gen.global.Symbol,unit: Erasure.this.global.gen.global.CompilationUnit)(within: (() =&gt; Erasure.this.global.gen.global.Tree) =&gt; Erasure.this.global.gen.global.Tree)Erasure.this.global.gen.global.Tree">evalOnce</a>(<a href="#53034" title="Erasure.this.global.Tree">qual</a>, <a href="../ast/Trees.scala.html#45699" title="=&gt; Erasure.this.global.Symbol">currentOwner</a>, <a href="#45729" title="Erasure.this.global.CompilationUnit">unit</a>) { <a title="() =&gt; Erasure.this.global.gen.global.Tree" id="53393">q</a> =&gt;
                        <a href="../ast/Trees.scala.html#26943" title="(pos: scala.tools.nsc.util.Position)(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">atPos</a>(<a href="#52207" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29547" title="=&gt; scala.tools.nsc.util.Position">pos</a>) {
                          <a href="#53375" title="(f: (Erasure.this.global.Type) =&gt; Erasure.this.global.Tree)(implicit bf: scala.collection.generic.BuilderFactory[Erasure.this.global.Tree,List[Erasure.this.global.Tree],List[Erasure.this.global.Type]])List[Erasure.this.global.Tree]">parents</a> <a title="(op: (Erasure.this.global.Tree, Erasure.this.global.Tree) =&gt; Erasure.this.global.Tree)Erasure.this.global.Tree" id="29140">map</a> <a href="#53052" title="(q: () =&gt; Erasure.this.global.Tree)(tp: Erasure.this.global.Type)Erasure.this.global.Tree">mkIsInstanceOf</a><a href="#53412" title="Erasure.this.global.Type">(</a><a href="#53393" title="() =&gt; Erasure.this.global.gen.global.Tree">q</a>) reduceRight <a href="../Global.scala.html#39263" title="object Erasure.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#42924" title="(tree1: Erasure.this.global.gen.global.Tree,tree2: Erasure.this.global.gen.global.Tree)Erasure.this.global.gen.global.Tree">mkAnd</a>
                        }
                      }
                    <span title="Erasure.this.global.gen.global.Tree" class="keyword">case</span> _ =&gt;
                      <span title="Erasure.this.global.gen.global.Tree" class="keyword">if</span> (<a href="#42694" title="(sym: Erasure.this.global.Symbol)Boolean">isSeqClass</a>(<a href="#53048" title="Erasure.this.global.Tree">targ</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; Erasure.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30366" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a>)) { 
                        <a href="../ast/Trees.scala.html#26943" title="(pos: scala.tools.nsc.util.Position)(tree: Erasure.this.global.gen.global.Tree)Erasure.this.global.gen.global.Tree">atPos</a>(<a href="#52207" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29547" title="=&gt; scala.tools.nsc.util.Position">pos</a>) {
                          <a href="../Global.scala.html#39263" title="object Erasure.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#42938" title="(expr: Erasure.this.global.gen.global.Tree,owner: Erasure.this.global.gen.global.Symbol,unit: Erasure.this.global.gen.global.CompilationUnit)(within: (() =&gt; Erasure.this.global.gen.global.Tree) =&gt; Erasure.this.global.gen.global.Tree)Erasure.this.global.gen.global.Tree">evalOnce</a>(<a href="#53034" title="Erasure.this.global.Tree">qual</a>, <a href="../ast/Trees.scala.html#45699" title="=&gt; Erasure.this.global.Symbol">currentOwner</a>, <a href="#45729" title="Erasure.this.global.CompilationUnit">unit</a>) { <a title="() =&gt; Erasure.this.global.gen.global.Tree" id="53557">q</a> =&gt;
                            <a href="../Global.scala.html#39263" title="object Erasure.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#42925" title="(tree1: Erasure.this.global.gen.global.Tree,tree2: Erasure.this.global.gen.global.Tree)Erasure.this.global.gen.global.Tree">mkOr</a>(
                              <a href="#53052" title="(q: () =&gt; Erasure.this.global.Tree)(tp: Erasure.this.global.Type)Erasure.this.global.Tree">mkIsInstanceOf</a>(<a href="#53557" title="() =&gt; Erasure.this.global.gen.global.Tree">q</a>)(<a href="#53048" title="Erasure.this.global.Tree">targ</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; Erasure.this.global.Type">tpe</a>), 
                              <a href="../ast/Trees.scala.html#26943" title="(pos: scala.tools.nsc.util.Position)(tree: Erasure.this.global.Apply)Erasure.this.global.Apply">atPos</a>(<a href="#52207" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29547" title="=&gt; scala.tools.nsc.util.Position">pos</a>) { <a href="../ast/TreeDSL.scala.html#42765" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.gen.global.Tree">REF</a><a href="../ast/TreeDSL.scala.html#45313" title="(params: Erasure.this.global.Tree*)Erasure.this.global.Apply">(</a><a href="../symtab/Definitions.scala.html#28537" title="=&gt; Erasure.this.global.Symbol">isArrayMethod</a>) APPLY (<a href="#53557" title="()Erasure.this.global.gen.global.Tree">q</a>()) }
                            )
                          }
                        }
                      } <span class="keyword">else</span> <a href="#52207" title="Erasure.this.global.Tree">tree</a>
                  }
                <span title="Erasure.this.global.Tree" class="keyword">case</span> _ =&gt; <a href="#52207" title="Erasure.this.global.Tree">tree</a>
              }
            <span class="keyword">else</span> {
              <span class="keyword">def</span> <a title="(fn: Erasure.this.global.Tree,qual: Erasure.this.global.Tree)Erasure.this.global.Tree" id="53637">doDynamic</a>(<a title="Erasure.this.global.Tree" id="53638">fn</a>: <a href="../ast/Trees.scala.html#26752" title="Erasure.this.global.Tree">Tree</a>, <a title="Erasure.this.global.Tree" id="53639">qual</a>: <a href="../ast/Trees.scala.html#26752" title="Erasure.this.global.Tree">Tree</a>): <a href="../ast/Trees.scala.html#26752" title="Erasure.this.global.Tree">Tree</a> = {
                <span title="Erasure.this.global.Tree" class="keyword">if</span> (<a href="#53638" title="Erasure.this.global.Tree">fn</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; Erasure.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27142" title="=&gt; Erasure.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27092" title="(x$1: Boolean)Boolean">isRefinementClass</a> &amp;&amp; <a href="#53638" title="Erasure.this.global.Tree">fn</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; Erasure.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27223" title="=&gt; List[Erasure.this.global.Symbol]">allOverriddenSymbols</a>.<span title="=&gt; Boolean">isEmpty</span>)
                  <a href="../ast/Trees.scala.html#53663" title="(qual: Erasure.this.global.Tree,args: List[Erasure.this.global.Tree])Erasure.this.global.ApplyDynamic">ApplyDynamic</a><a href="../ast/Trees.scala.html#29555" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.ApplyDynamic">(</a><a href="#53639" title="Erasure.this.global.Tree">qual</a>, <a href="#52742" title="List[Erasure.this.global.Tree]">args</a>) <a href="../ast/Trees.scala.html#29551" title="(pos: scala.tools.nsc.util.Position)Erasure.this.global.ApplyDynamic">setSymbol</a> <a href="#53638" title="Erasure.this.global.Tree">fn</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; Erasure.this.global.Symbol">symbol</a> setPos <a href="#52207" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29547" title="=&gt; scala.tools.nsc.util.Position">pos</a>
                <span class="keyword">else</span> <a href="#52207" title="Erasure.this.global.Tree">tree</a>
              }
              <a href="#52741" title="Erasure.this.global.Tree">fn</a> <span title="Erasure.this.global.Tree" class="keyword">match</span> {
                <span title="Erasure.this.global.Tree" class="keyword">case</span> Select(<a title="Erasure.this.global.Tree" id="53713">qual</a>, _) =&gt; <a href="#53637" title="(fn: Erasure.this.global.Tree,qual: Erasure.this.global.Tree)Erasure.this.global.Tree">doDynamic</a>(<a href="#52741" title="Erasure.this.global.Tree">fn</a>, <a href="#53713" title="Erasure.this.global.Tree">qual</a>)
                <span title="Erasure.this.global.Tree" class="keyword">case</span> TypeApply(<a title="Erasure.this.global.Select" id="53720">fni</a>@Select(<a title="Erasure.this.global.Tree" id="53725">qual</a>, _), _) =&gt; <a href="#53637" title="(fn: Erasure.this.global.Tree,qual: Erasure.this.global.Tree)Erasure.this.global.Tree">doDynamic</a>(<a href="#53720" title="Erasure.this.global.Select">fni</a>, <a href="#53725" title="Erasure.this.global.Tree">qual</a>)// type parameters are irrelevant in case of dynamic call
                <span title="Erasure.this.global.Tree" class="keyword">case</span> _ =&gt;    
                  <a href="#52207" title="Erasure.this.global.Tree">tree</a>
              }
            }

          <span title="Erasure.this.global.Tree" class="keyword">case</span> Select(_, _) =&gt;
            <span title="Unit" class="keyword">if</span> (<a href="#52207" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; Erasure.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27142" title="=&gt; Erasure.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27092" title="=&gt; Boolean">isRefinementClass</a>) {
              <span class="keyword">val</span> <a title="List[Erasure.this.global.Symbol]" id="53738">overridden</a> = <a href="#52207" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; Erasure.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27223" title="=&gt; List[Erasure.this.global.Symbol]">allOverriddenSymbols</a>
              <span title="(assertion: Boolean,message: =&gt; Any)Unit">assert</span>(<span title="=&gt; Boolean">!</span><a href="#53738" title="List[Erasure.this.global.Symbol]">overridden</a>.<span title="=&gt; Boolean">isEmpty</span>, <a href="#52207" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; Erasure.this.global.Symbol">symbol</a>)
              <a href="#52207" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29554" title="(sym: Erasure.this.global.Symbol)Unit">symbol</a> = <a href="#53738" title="List[Erasure.this.global.Symbol]">overridden</a>.<span title="=&gt; Erasure.this.global.Symbol">head</span>
            }
            <a href="#52207" title="Erasure.this.global.Tree">tree</a>

          <span title="Erasure.this.global.Template" class="keyword">case</span> Template(<a title="List[Erasure.this.global.Tree]" id="53804">parents</a>, <a title="Erasure.this.global.ValDef" id="53805">self</a>, <a title="List[Erasure.this.global.Tree]" id="53806">body</a>) =&gt;
            <span title="(assertion: Boolean)Unit">assert</span>(<span title="=&gt; Boolean">!</span><a href="../ast/Trees.scala.html#45699" title="=&gt; Erasure.this.global.Symbol">currentOwner</a>.<a href="../symtab/Symbols.scala.html#27120" title="=&gt; Boolean">isImplClass</a>)
            //Console.println(&quot;checking no dble defs &quot; + tree)//DEBUG
            <a href="#45723" title="(root: Erasure.this.global.Symbol)Unit">checkNoDoubleDefs</a>(<a href="#52207" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; Erasure.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27142" title="=&gt; Erasure.this.global.Symbol">owner</a>)
            <a href="../ast/Trees.scala.html#45697" title="=&gt; Erasure.this.global.TreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#48803" title="(tree: Erasure.this.global.Tree,parents: List[Erasure.this.global.Tree],self: Erasure.this.global.ValDef,body: List[Erasure.this.global.Tree])Erasure.this.global.Template">Template</a>(<a href="#52207" title="Erasure.this.global.Tree">tree</a>, <a href="#53804" title="List[Erasure.this.global.Tree]">parents</a>, <a href="../ast/Trees.scala.html#26783" title="object Erasure.this.global.emptyValDef">emptyValDef</a>, <a href="#45725" title="(stats: List[Erasure.this.global.Tree],base: Erasure.this.global.Symbol)List[Erasure.this.global.Tree]">addBridges</a>(<a href="#53806" title="List[Erasure.this.global.Tree]">body</a>, <a href="../ast/Trees.scala.html#45699" title="=&gt; Erasure.this.global.Symbol">currentOwner</a>))

          <span title="Erasure.this.global.Match" class="keyword">case</span> Match(<a title="Erasure.this.global.Tree" id="53838">selector</a>, <a title="List[Erasure.this.global.CaseDef]" id="53839">cases</a>) =&gt;
            <a href="../ast/Trees.scala.html#51883" title="(selector: Erasure.this.global.Tree,cases: List[Erasure.this.global.CaseDef])Erasure.this.global.Match">Match</a>(<a href="../ast/Trees.scala.html#50628" title="(expr: Erasure.this.global.Tree,tpt: Erasure.this.global.Tree)Erasure.this.global.Typed">Typed</a>(<a href="#53838" title="Erasure.this.global.Tree">selector</a>, <a href="../ast/Trees.scala.html#26903" title="(tp: Erasure.this.global.Type)Erasure.this.global.TypeTree">TypeTree</a>(<a href="#53838" title="Erasure.this.global.Tree">selector</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; Erasure.this.global.Type">tpe</a>)), <a href="#53839" title="List[Erasure.this.global.CaseDef]">cases</a>)

          <span title="Erasure.this.global.Literal" class="keyword">case</span> Literal(<a title="Erasure.this.global.Constant" id="53905">ct</a>) <span class="keyword">if</span> <a href="#53905" title="Erasure.this.global.Constant">ct</a>.<a href="../symtab/Constants.scala.html#43041" title="(x$1: Int)Boolean">tag</a> <span title="(x$1: Boolean)Boolean">==</span> <span title="Int(12)">ClassTag</span> 
                           &amp;&amp; <a href="#53905" title="Erasure.this.global.Constant">ct</a>.<a href="../symtab/Constants.scala.html#43056" title="=&gt; Erasure.this.global.Type">typeValue</a>.<a href="../symtab/Types.scala.html#30366" title="(x$1: AnyRef)Boolean">typeSymbol</a> != <a href="../symtab/Definitions.scala.html#26638" title="object Erasure.this.global.definitions">definitions</a>.<a href="../symtab/Definitions.scala.html#28463" title="=&gt; Erasure.this.global.Symbol">UnitClass</a> =&gt;
            <a href="../ast/Trees.scala.html#45697" title="=&gt; Erasure.this.global.TreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#48829" title="(tree: Erasure.this.global.Tree,value: Erasure.this.global.Constant)Erasure.this.global.Literal">Literal</a>(<a href="#52207" title="Erasure.this.global.Tree">tree</a>, <a href="../symtab/Constants.scala.html#49805" title="(value: Any)Erasure.this.global.Constant">Constant</a>(<a href="#42680" title="(v1: Erasure.this.global.Type)Erasure.this.global.Type">erasure</a>(<a href="#53905" title="Erasure.this.global.Constant">ct</a>.<a href="../symtab/Constants.scala.html#43056" title="=&gt; Erasure.this.global.Type">typeValue</a>)))
            
          <span title="Erasure.this.global.Tree" class="keyword">case</span> _ =&gt;
            <a href="#52207" title="Erasure.this.global.Tree">tree</a>
        }
        <a href="#52211" title="Erasure.this.global.Tree">tree1</a> <span title="Erasure.this.global.Tree" class="keyword">match</span> {
          <span title="tree1.type" class="keyword">case</span> <a href="../ast/Trees.scala.html#26761" title="object Erasure.this.global.EmptyTree">EmptyTree</a> | TypeTree() =&gt;
            <a href="../ast/Trees.scala.html#29552" title="(tp: Erasure.this.global.Type)tree1.type">tree1</a> setType <a href="#42680" title="(v1: Erasure.this.global.Type)Erasure.this.global.Type">erasure</a>(<a href="#52211" title="Erasure.this.global.Tree">tree1</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; Erasure.this.global.Type">tpe</a>)
          <span title="Erasure.this.global.Tree" class="keyword">case</span> DefDef(<a title="Erasure.this.global.Modifiers" id="53968">mods</a>, <a title="Erasure.this.global.Name" id="53969">name</a>, <a title="List[Erasure.this.global.TypeDef]" id="53970">tparams</a>, <a title="List[List[Erasure.this.global.ValDef]]" id="53971">vparamss</a>, <a title="Erasure.this.global.Tree" id="53972">tpt</a>, <a title="Erasure.this.global.Tree" id="53973">rhs</a>) =&gt;
            <span class="keyword">val</span> <a title="Erasure.this.global.Tree" id="53976">result</a> = <span class="keyword">super</span>.<a href="../ast/Trees.scala.html#45705" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">transform</a><a href="../ast/Trees.scala.html#29552" title="(tp: Erasure.this.global.Type)Erasure.this.global.Tree">(</a><a href="#52211" title="Erasure.this.global.Tree">tree1</a>) setType <span title="Null(null)" class="keyword">null</span>
            <a href="#53972" title="Erasure.this.global.Tree">tpt</a>.<a href="../ast/Trees.scala.html#29550" title="(t: Erasure.this.global.Type)Unit">tpe</a> = <a href="#42680" title="(v1: Erasure.this.global.Type)Erasure.this.global.Type">erasure</a>(<a href="#52207" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; Erasure.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; Erasure.this.global.Type">tpe</a>).<a href="../symtab/Types.scala.html#30379" title="=&gt; Erasure.this.global.Type">resultType</a>
            <a href="#53976" title="Erasure.this.global.Tree">result</a>
          <span title="Erasure.this.global.Tree" class="keyword">case</span> _ =&gt;
            case <span class="keyword">class</span> <a title="class MyError extends java.lang.Error with ScalaObject with Product" id="54041">MyError</a><a title="ScalaObject" id="26070">(</a><a title="Int" id="54098">count</a> : <span title="Int">Int</span>, <a title="java.lang.AssertionError" id="54099">ex</a> : <a title="java.lang.AssertionError" id="1827">AssertionError</a>) <span class="keyword">extends</span> <span title="java.lang.Error">Error</span>(<a href="#54099" title="java.lang.AssertionError">ex</a>.<a title="()java.lang.String" id="26085">getMessage</a>)
            <span class="keyword">try</span> {
              <span class="keyword">super</span>.<a href="../ast/Trees.scala.html#45705" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">transform</a><a href="../ast/Trees.scala.html#29552" title="(tp: Erasure.this.global.Type)Erasure.this.global.Tree">(</a><a href="#52211" title="Erasure.this.global.Tree">tree1</a>) setType <span title="Null(null)" class="keyword">null</span>
            } <span class="keyword">catch</span> {
              <span title="Nothing" class="keyword">case</span> <a title="MyError" id="54113">e</a> @ MyError(<a title="Int" id="54114">n</a>, <a title="java.lang.AssertionError" id="54115">ex</a>) <span class="keyword">if</span> <a href="#54114" title="(x$1: Int)Boolean" id="2981">n</a> &gt; <span title="Int(5)" class="int">5</span> =&gt;  <span title="Nothing" class="keyword">throw</span> <a href="#54113" title="MyError">e</a>
              <span title="Nothing" class="keyword">case</span> MyError(<a title="Int" id="54124">n</a>,<a title="java.lang.AssertionError" id="54125">ex</a>) =&gt;
                <span title="object Console">Console</span>.<span title="(x: Any)Unit">println</span>(<a href="#52211" title="Erasure.this.global.Tree">tree1</a>)
                <span title="Nothing" class="keyword">throw</span> <a href="#54041" title="(count: Int,ex: java.lang.AssertionError)MyError">MyError</a>(<a href="#54124" title="(x$1: Int)Int" id="2985">n</a> + <span title="Int(1)" class="int">1</span>, <a href="#54125" title="java.lang.AssertionError">ex</a>)
//              case ex : AssertionError =&gt; 
//                Console.println(tree1)
//                throw MyError(0, ex)
//              case ex =&gt; throw ex
            }
        }
      }
    }

    /** The main transform function: Pretransfom the tree, and then
     *  re-type it at phase erasure.next.
     */
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree" id="45728">transform</a>(<a title="Erasure.this.global.Tree" id="55470">tree</a>: <a href="../ast/Trees.scala.html#26752" title="Erasure.this.global.Tree">Tree</a>): <a href="../ast/Trees.scala.html#26752" title="Erasure.this.global.Tree">Tree</a> = {
      <span class="keyword">val</span> <a title="Erasure.this.global.Tree" id="55473">tree1</a> = <a href="#45726" title="=&gt; Erasure.this.global.Transformer">preTransformer</a>.<a href="../ast/Trees.scala.html#45705" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">transform</a>(<a href="#55470" title="Erasure.this.global.Tree">tree</a>)
      <a href="../symtab/SymbolTable.scala.html#26256" title="(ph: scala.tools.nsc.Phase)(op: =&gt; Erasure.this.global.Tree)Erasure.this.global.Tree">atPhase</a>(<a href="../symtab/SymbolTable.scala.html#26247" title="=&gt; scala.tools.nsc.Phase">phase</a>.<a href="../Phase.scala.html#23302" title="=&gt; scala.tools.nsc.Phase">next</a>) {
        <span class="keyword">val</span> <a title="Erasure.this.global.Tree" id="55483">tree2</a> = <a href="AddInterfaces.scala.html#42668" title="=&gt; Erasure.this.global.Transformer">mixinTransformer</a>.<a href="../ast/Trees.scala.html#45705" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">transform</a>(<a href="#55473" title="Erasure.this.global.Tree">tree1</a>)
        <span title="Unit" class="keyword">if</span> (<a href="../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../Settings.scala.html#37988" title="=&gt; Boolean">value</a>) <a href="../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;tree after addinterfaces: \n&quot;</span> + <a href="#55483" title="Erasure.this.global.Tree">tree2</a>)
        <a href="#42696" title="(context: Erasure.this.Context)Erasure.this.Eraser">newTyper</a>(<a href="../typechecker/Contexts.scala.html#40051" title="(unit: Erasure.this.global.CompilationUnit,tree: Erasure.this.global.Tree,erasedTypes: Boolean)Erasure.this.Context">rootContext</a>(<a href="#45729" title="Erasure.this.global.CompilationUnit">unit</a>, <a href="#55470" title="Erasure.this.global.Tree">tree</a>, <span title="Boolean(true)" class="keyword">true</span>)).<a href="../typechecker/Typers.scala.html#42872" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">typed</a>(<a href="#55483" title="Erasure.this.global.Tree">tree2</a>)
      }
    }
  }
}

        </pre>
    </body>
</html>