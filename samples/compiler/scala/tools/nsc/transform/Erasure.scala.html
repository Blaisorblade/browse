<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/transform/Erasure.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style">
    </head>
    <body>
        <pre>
/* NSC -- new Scala compiler
 * Copyright 2005-2009 LAMP/EPFL
 * @author Martin Odersky
 */
// $Id: Erasure.scala 18618 2009-08-31 16:27:39Z dragos $

<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> transform

<span class="keyword">import</span> scala.tools.nsc.symtab.classfile.ClassfileConstants._
<span class="keyword">import</span> scala.collection.mutable.{HashMap,ListBuffer}
<span class="keyword">import</span> scala.collection.immutable.Set
<span class="keyword">import</span> scala.tools.nsc.util.Position
<span class="keyword">import</span> symtab._
<span class="keyword">import</span> Flags._

<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class Erasure extends scala.tools.nsc.transform.AddInterfaces with scala.tools.nsc.typechecker.Analyzer with scala.tools.nsc.ast.TreeDSL with ScalaObject" id="14275">Erasure</a> <span title="ScalaObject" class="keyword">extends</span> <a href="AddInterfaces.scala.html#14053" title="scala.tools.nsc.transform.AddInterfaces">AddInterfaces</a> <span class="keyword">with</span> typechecker.<a href="../typechecker/Analyzer.scala.html#17112" title="scala.tools.nsc.typechecker.Analyzer">Analyzer</a> <span class="keyword">with</span> ast.<a href="../ast/TreeDSL.scala.html#11895" title="scala.tools.nsc.ast.TreeDSL">TreeDSL</a>
{
  <span class="keyword">import</span> global._                  // the global environment
  <span class="keyword">import</span> definitions._             // standard classes and methods
  // @S: XXX: why is this here? earsure is a typer, if you comment this
  //          out erasure still works, uses its own typed methods.
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Erasure.this.Typer" id="42442">typerXXX</a> = <a href="#14275" title="Erasure.this.type" class="keyword">this</a>.<a href="../typechecker/SyntheticMethods.scala.html#40040" title="=&gt; Erasure.this.Typer">typer</a>
  <span class="keyword">import</span> typerXXX.{typed, typedPos}             // methods to type trees
  
  <span class="keyword">import</span> CODE._

  <span class="keyword">val</span> <a title="String" id="42445">phaseName</a>: <span title="String">String</span> = <span title="java.lang.String(&quot;erasure&quot;)" class="string">&quot;erasure&quot;</span>

  <span class="keyword">def</span> <a title="(unit: Erasure.this.global.CompilationUnit)Erasure.this.global.Transformer" id="42447">newTransformer</a>(<a title="Erasure.this.global.CompilationUnit" id="45421">unit</a>: <a href="../CompilationUnits.scala.html#39196" title="Erasure.this.global.CompilationUnit">CompilationUnit</a>): <a href="../ast/Trees.scala.html#26773" title="Erasure.this.global.Transformer">Transformer</a> =
    <span title="Erasure.this.ErasureTransformer" class="keyword">new</span> <a href="#42466" title="Erasure.this.ErasureTransformer">ErasureTransformer</a>(<a href="#45421" title="Erasure.this.global.CompilationUnit">unit</a>)

// -------- erasure on types --------------------------------------------------------

  /** &lt;p&gt;
   *    The erasure &lt;code&gt;|T|&lt;/code&gt; of a type &lt;code&gt;T&lt;/code&gt;. This is:
   *  &lt;/p&gt;
   *  &lt;ul&gt;
   *    &lt;li&gt;For a constant type, itself.&lt;/li&gt;
   *    &lt;li&gt;For a type-bounds structure, the erasure of its upper bound.&lt;/li&gt;
   *    &lt;li&gt;For every other singleton type, the erasure of its supertype.&lt;/li&gt;
   *    &lt;li&gt;
   *      For a typeref &lt;code&gt;scala.Array+[T]&lt;/code&gt; where &lt;code&gt;T&lt;/code&gt; is
   *      an abstract type, &lt;code&gt;scala.runtime.BoxedArray[T]&lt;/code&gt;.
   *    &lt;/li&gt;
   *    &lt;li&gt;
   *   - For a typeref scala.Array+[T] where T is not an abstract type, scala.Array+[|T|].
   *   - For a typeref scala.Any or scala.AnyVal, java.lang.Object.
   *   - For a typeref scala.Unit, scala.runtime.BoxedUnit.
   *   - For a typeref P.C[Ts] where C refers to a class, |P|.C.
   *   - For a typeref P.C[Ts] where C refers to an alias type, the erasure of C's alias.
   *   - For a typeref P.C[Ts] where C refers to an abstract type, the
   *     erasure of C's upper bound.
   *   - For a non-empty type intersection (possibly with refinement),
   *     the erasure of its first parent.
   *   - For an empty type intersection, java.lang.Object
   *   - For a method type (Fs)scala.Unit, (|Fs|)scala#Unit.
   *   - For any other method type (Fs)Y, (|Fs|)|T|.
   *   - For a polymorphic type, the erasure of its result type
   *   - For the class info type of java.lang.Object, the same type without any parents
   *   - For a class info type of a value class, the same type without any parents
   *   - For any other class info type with parents Ps, the same type with
   *     parents |Ps|, but with duplicate references of Object removed.
   *   - for all other types, the type itself (with any sub-components erased)
   *    &lt;/li&gt;
   *  &lt;/ul&gt;
   */
  <span class="keyword">val</span> <a title="Erasure.this.global.TypeMap" id="42448">erasure</a> = <a href="#42660" title="Erasure.this.global.TypeMap{ ... }" class="keyword">new</a> <a href="../symtab/Types.scala.html#26320" title="anonymous class $anon extends Erasure.this.global.TypeMap" id="42660">TypeMap</a> {
    <span class="keyword">def</span> <a title="(tp: Erasure.this.global.Type)Erasure.this.global.Type" id="42733">apply</a>(<a title="Erasure.this.global.Type" id="42737">tp</a>: <a href="../symtab/Types.scala.html#26205" title="Erasure.this.global.Type">Type</a>): <a href="../symtab/Types.scala.html#26205" title="Erasure.this.global.Type">Type</a> = {
      <a href="#42737" title="Erasure.this.global.Type">tp</a> <span title="Erasure.this.global.Type" class="keyword">match</span> {
        <span title="Erasure.this.global.Type" class="keyword">case</span> ConstantType(_) =&gt;
          <a href="#42737" title="Erasure.this.global.Type">tp</a>
        <span title="Erasure.this.global.Type" class="keyword">case</span> <a title="Erasure.this.global.SubType" id="42835">st</a>: <a href="../symtab/Types.scala.html#26212" title="Erasure.this.global.SubType">SubType</a> =&gt;
          <a href="#42733" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">apply</a>(<a href="#42835" title="Erasure.this.global.SubType">st</a>.<a href="../symtab/Types.scala.html#42742" title="=&gt; Erasure.this.global.Type">supertype</a>)
        <span title="Erasure.this.global.Type" class="keyword">case</span> TypeRef(<a title="Erasure.this.global.Type" id="42931">pre</a>, <a title="Erasure.this.global.Symbol" id="42932">sym</a>, <a title="List[Erasure.this.global.Type]" id="42933">args</a>) =&gt;
          <span class="keyword">def</span> <a title="(tp: Erasure.this.global.Type)Boolean" id="42936">isGeneric</a>(<a title="Erasure.this.global.Type" id="42937">tp</a>: <a href="../symtab/Types.scala.html#26205" title="Erasure.this.global.Type">Type</a>): <span title="Boolean">Boolean</span> = <a href="#42937" title="Erasure.this.global.Type">tp</a> <span title="Boolean" class="keyword">match</span> {
            <span title="Boolean" class="keyword">case</span> TypeRef(<a title="Erasure.this.global.Type" id="42941">pre</a>, <a title="Erasure.this.global.Symbol" id="42942">sym</a>, <a title="List[Erasure.this.global.Type]" id="42943">args</a>) =&gt;
              <a href="#42942" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26900" title="(x$1: Boolean)Boolean">isAbstractType</a> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span>(<a href="#42942" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26996" title="(mask: Long)Boolean">owner</a> hasFlag <span title="Long(1048576L)">JAVA</span>) ||
              <a href="#42942" title="(x$1: AnyRef)Boolean">sym</a> <span title="(x$1: Boolean)Boolean">==</span> <a href="../symtab/Definitions.scala.html#28393" title="=&gt; Erasure.this.global.Symbol">ArrayClass</a> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> <a href="#42943" title="List[Erasure.this.global.Type]">args</a>.<span title="(x$1: Int)Boolean">length</span> == <span title="Int(1)" class="int">1</span> &amp;&amp; <a href="#42936" title="(tp: Erasure.this.global.Type)Boolean">isGeneric</a>(<a href="#42943" title="List[Erasure.this.global.Type]">args</a>.<span title="=&gt; Erasure.this.global.Type">head</span>) 
            <span title="Boolean" class="keyword">case</span> ExistentialType(<a title="List[Erasure.this.global.Symbol]" id="43446">tparams</a>, <a title="Erasure.this.global.Type" id="43447">restp</a>) =&gt;
              <a href="#42936" title="(tp: Erasure.this.global.Type)Boolean">isGeneric</a>(<a href="#43447" title="Erasure.this.global.Type">restp</a>)
            <span title="Boolean(false)" class="keyword">case</span> _ =&gt;
              <span title="Boolean(false)" class="keyword">false</span>
          }
          <span title="Erasure.this.global.Type" class="keyword">if</span> (<a href="#42932" title="(x$1: AnyRef)Boolean">sym</a> == <a href="../symtab/Definitions.scala.html#28393" title="=&gt; Erasure.this.global.Symbol">ArrayClass</a>)
            <span title="Erasure.this.global.Type" class="keyword">if</span> (<a href="#42936" title="(tp: Erasure.this.global.Type)Boolean">isGeneric</a>(<a href="#42737" title="Erasure.this.global.Type">tp</a>)) <a href="#42457" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.Type">erasedTypeRef</a>(<a href="../symtab/Definitions.scala.html#28543" title="=&gt; Erasure.this.global.Symbol">BoxedArrayClass</a>)
            <span class="keyword">else</span> <a href="../symtab/Types.scala.html#26295" title="(pre: Erasure.this.global.Type,sym: Erasure.this.global.Symbol,args: List[Erasure.this.global.Type])Erasure.this.global.Type">typeRef</a>(<a href="#42733" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">apply</a>(<a href="#42931" title="Erasure.this.global.Type">pre</a>), <a href="#42932" title="Erasure.this.global.Symbol">sym</a>, <a href="#42933" title="(f: (Erasure.this.global.Type) =&gt; Erasure.this.global.Type)(implicit bf: scala.collection.generic.BuilderFactory[Erasure.this.global.Type,List[Erasure.this.global.Type],List[Erasure.this.global.Type]])List[Erasure.this.global.Type]">args</a> <span title="scala.collection.generic.BuilderFactory[Erasure.this.global.Type,List[Erasure.this.global.Type],List#Coll]">map</span> <a href="#42660" title="Erasure.this.global.TypeMap{ ... }" class="keyword">this</a>)
          <span class="keyword">else</span> <span title="Erasure.this.global.Type" class="keyword">if</span> (<a href="#42932" title="(x$1: AnyRef)Boolean">sym</a> <span title="(x$1: Boolean)Boolean">==</span> <a href="../symtab/Definitions.scala.html#28261" title="=&gt; Erasure.this.global.Symbol">AnyClass</a> <span title="(x$1: Boolean)Boolean">||</span> <a href="#42932" title="(x$1: AnyRef)Boolean">sym</a> == <a href="../symtab/Definitions.scala.html#28263" title="=&gt; Erasure.this.global.Symbol">AnyValClass</a> || <a href="#42932" title="(x$1: AnyRef)Boolean">sym</a> == <a href="../symtab/Definitions.scala.html#28356" title="=&gt; Erasure.this.global.Symbol">SingletonClass</a>) <a href="#42457" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.Type">erasedTypeRef</a>(<a href="../symtab/Definitions.scala.html#28267" title="=&gt; Erasure.this.global.Symbol">ObjectClass</a>)
          <span class="keyword">else</span> <span title="Erasure.this.global.Type" class="keyword">if</span> (<a href="#42932" title="(x$1: AnyRef)Boolean">sym</a> == <a href="../symtab/Definitions.scala.html#28277" title="=&gt; Erasure.this.global.Symbol">UnitClass</a>) <a href="#42457" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.Type">erasedTypeRef</a>(<a href="../symtab/Definitions.scala.html#28555" title="=&gt; Erasure.this.global.Symbol">BoxedUnitClass</a>)
          <span class="keyword">else</span> <span title="Erasure.this.global.Type" class="keyword">if</span> (<a href="#42932" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26897" title="=&gt; Boolean">isClass</a>) 
            <a href="../symtab/Types.scala.html#26295" title="(pre: Erasure.this.global.Type,sym: Erasure.this.global.Symbol,args: List[Erasure.this.global.Type])Erasure.this.global.Type">typeRef</a>(<a href="#42733" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">apply</a>(<span title="Erasure.this.global.Type" class="keyword">if</span> (<a href="#42932" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26983" title="=&gt; Erasure.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#26897" title="=&gt; Boolean">isClass</a>) <a href="#42932" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26983" title="=&gt; Erasure.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; Erasure.this.global.Type">tpe</a> <span class="keyword">else</span> <a href="#42931" title="Erasure.this.global.Type">pre</a>), <a href="#42932" title="Erasure.this.global.Symbol">sym</a>, List<span title="object Nil">(</span>))
          <span class="keyword">else</span> <a href="#42733" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">apply</a>(<a href="#42932" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27004" title="=&gt; Erasure.this.global.Type">info</a>)
        <span title="Erasure.this.global.Type" class="keyword">case</span> PolyType(<a title="List[Erasure.this.global.Symbol]" id="43877">tparams</a>, <a title="Erasure.this.global.Type" id="43878">restpe</a>) =&gt;
          <a href="#42733" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">apply</a>(<a href="#43878" title="Erasure.this.global.Type">restpe</a>)
        <span title="Erasure.this.global.Type" class="keyword">case</span> ExistentialType(<a title="List[Erasure.this.global.Symbol]" id="43886">tparams</a>, <a title="Erasure.this.global.Type" id="43887">restpe</a>) =&gt;
          <a href="#42733" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">apply</a>(<a href="#43887" title="Erasure.this.global.Type">restpe</a>)
        <span title="Erasure.this.global.MethodType" class="keyword">case</span> <a title="Erasure.this.global.MethodType" id="43893">mt</a> @ MethodType(<a title="List[Erasure.this.global.Symbol]" id="43937">params</a>, <a title="Erasure.this.global.Type" id="43938">restpe</a>) =&gt;
          <a href="../symtab/Types.scala.html#43895" title="(params: List[Erasure.this.global.Symbol],resultType: Erasure.this.global.Type)Erasure.this.global.MethodType">MethodType</a>(
            <a href="../symtab/Symbols.scala.html#26136" title="(syms: List[Erasure.this.global.Symbol])List[Erasure.this.global.Symbol]">cloneSymbols</a><span title="(f: (Erasure.this.global.Symbol) =&gt; Erasure.this.global.Symbol)(implicit bf: scala.collection.generic.BuilderFactory[Erasure.this.global.Symbol,List[Erasure.this.global.Symbol],List[Erasure.this.global.Symbol]])List[Erasure.this.global.Symbol]">(</span><a href="#43937" title="List[Erasure.this.global.Symbol]">params</a>) <span title="scala.collection.generic.BuilderFactory[Erasure.this.global.Symbol,List[Erasure.this.global.Symbol],List#Coll]">map</span> (<a title="Erasure.this.global.Symbol" id="43985">p</a> =&gt; <a href="#43985" title="Erasure.this.global.Symbol">p</a>.<a href="../symtab/Symbols.scala.html#27005" title="(info: Erasure.this.global.Type)p.type">setInfo</a>(<a href="#42733" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">apply</a>(<a href="#43985" title="Erasure.this.global.Symbol">p</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; Erasure.this.global.Type">tpe</a>))),
            <span title="Erasure.this.global.Type" class="keyword">if</span> (<a href="#43938" title="Erasure.this.global.Type">restpe</a>.<a href="../symtab/Types.scala.html#30180" title="(x$1: AnyRef)Boolean">typeSymbol</a> == <a href="../symtab/Definitions.scala.html#28277" title="=&gt; Erasure.this.global.Symbol">UnitClass</a>) 
              <a href="#42457" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.Type">erasedTypeRef</a>(<a href="../symtab/Definitions.scala.html#28277" title="=&gt; Erasure.this.global.Symbol">UnitClass</a>) 
            <span class="keyword">else</span> <span title="Erasure.this.global.Type" class="keyword">if</span> (<a href="../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../Settings.scala.html#37086" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">Xexperimental</a>.<a href="../Settings.scala.html#37759" title="=&gt; Boolean">value</a>)
              <a href="#42733" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">apply</a>(<a href="#43893" title="Erasure.this.global.MethodType">mt</a>.<a href="../symtab/Types.scala.html#43909" title="(actuals: List[Erasure.this.global.Type])Erasure.this.global.Type">resultType</a>(<a href="#43937" title="(f: (Erasure.this.global.Symbol) =&gt; Erasure.this.global.Type)(implicit bf: scala.collection.generic.BuilderFactory[Erasure.this.global.Type,List[Erasure.this.global.Type],List[Erasure.this.global.Symbol]])List[Erasure.this.global.Type]">params</a> <span title="scala.collection.generic.BuilderFactory[Erasure.this.global.Type,List[Erasure.this.global.Type],List#Coll]">map</span> (<a href="#44100" title="Erasure.this.global.Symbol">_</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; Erasure.this.global.Type">tpe</a>))) // this gets rid of DeBruijnTypes
            <span class="keyword">else</span>
              <a href="#42733" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">apply</a>(<a href="#43938" title="Erasure.this.global.Type">restpe</a>))
        <span title="Erasure.this.global.Type" class="keyword">case</span> RefinedType(<a title="List[Erasure.this.global.Type]" id="44194">parents</a>, <a title="Erasure.this.global.Scope" id="44195">decls</a>) =&gt;
          <span title="Erasure.this.global.Type" class="keyword">if</span> (<a href="#44194" title="List[Erasure.this.global.Type]">parents</a>.<span title="=&gt; Boolean">isEmpty</span>) <a href="#42457" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.Type">erasedTypeRef</a>(<a href="../symtab/Definitions.scala.html#28267" title="=&gt; Erasure.this.global.Symbol">ObjectClass</a>) 
          <span class="keyword">else</span> <a href="#42733" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">apply</a>(<a href="#44194" title="List[Erasure.this.global.Type]">parents</a>.<span title="=&gt; Erasure.this.global.Type">head</span>)
        <span title="Erasure.this.global.Type" class="keyword">case</span> AnnotatedType(_, <a title="Erasure.this.global.Type" id="44252">atp</a>, _) =&gt;
          <a href="#42733" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">apply</a>(<a href="#44252" title="Erasure.this.global.Type">atp</a>)
        <span title="Erasure.this.global.ClassInfoType" class="keyword">case</span> ClassInfoType(<a title="List[Erasure.this.global.Type]" id="44322">parents</a>, <a title="Erasure.this.global.Scope" id="44323">decls</a>, <a title="Erasure.this.global.Symbol" id="44324">clazz</a>) =&gt;
          <a href="../symtab/Types.scala.html#44259" title="(parents: List[Erasure.this.global.Type],decls: Erasure.this.global.Scope,typeSymbol: Erasure.this.global.Symbol)Erasure.this.global.ClassInfoType">ClassInfoType</a>(
            <span title="List[Erasure.this.global.Type]" class="keyword">if</span> (<span title="(x$1: Boolean)Boolean">(</span><a href="#44324" title="(x$1: AnyRef)Boolean">clazz</a> == <a href="../symtab/Definitions.scala.html#28267" title="=&gt; Erasure.this.global.Symbol">ObjectClass</a>) || (<a href="../symtab/Definitions.scala.html#28608" title="(sym: Erasure.this.global.Symbol)Boolean">isValueType</a>(<a href="#44324" title="Erasure.this.global.Symbol">clazz</a>))) List<span title="object Nil">(</span>) 
            <span class="keyword">else</span> <span title="List[Erasure.this.global.Type]" class="keyword">if</span> (<a href="#44324" title="(x$1: AnyRef)Boolean">clazz</a> == <a href="../symtab/Definitions.scala.html#28393" title="=&gt; Erasure.this.global.Symbol">ArrayClass</a>) <span title="(xs: Erasure.this.global.Type*)List[Erasure.this.global.Type]">List</span>(<a href="#42457" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.Type">erasedTypeRef</a>(<a href="../symtab/Definitions.scala.html#28267" title="=&gt; Erasure.this.global.Symbol">ObjectClass</a>))
            <span class="keyword">else</span> <a href="#42458" title="(tps: List[Erasure.this.global.Type])List[Erasure.this.global.Type]">removeDoubleObject</a>(<a href="#44322" title="(f: (Erasure.this.global.Type) =&gt; Erasure.this.global.Type)(implicit bf: scala.collection.generic.BuilderFactory[Erasure.this.global.Type,List[Erasure.this.global.Type],List[Erasure.this.global.Type]])List[Erasure.this.global.Type]">parents</a> <span title="scala.collection.generic.BuilderFactory[Erasure.this.global.Type,List[Erasure.this.global.Type],List#Coll]">map</span> <a href="#42660" title="Erasure.this.global.TypeMap{ ... }" class="keyword">this</a>),
            <a href="#44323" title="Erasure.this.global.Scope">decls</a>, <a href="#44324" title="Erasure.this.global.Symbol">clazz</a>)
        <span title="Erasure.this.global.Type" class="keyword">case</span> _ =&gt;
          <a href="../symtab/Types.scala.html#42722" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">mapOver</a>(<a href="#42737" title="Erasure.this.global.Type">tp</a>)
      }
    }
  }

  <span class="keyword">private</span> <span class="keyword">object</span> <a title="object Erasure.this.NeedsSigCollector" id="42450">NeedsSigCollector</a> <span title="ScalaObject" class="keyword">extends</span> <a href="../symtab/Types.scala.html#26324" title="Erasure.this.global.TypeCollector[Boolean]">TypeCollector</a>(<span title="Boolean(false)" class="keyword">false</span>) {
    <span class="keyword">def</span> <a title="(tp: Erasure.this.global.Type)Unit" id="45517">traverse</a>(<a title="Erasure.this.global.Type" id="45527">tp</a>: <a href="../symtab/Types.scala.html#26205" title="Erasure.this.global.Type">Type</a>) { 
      <span title="Unit" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="../symtab/Types.scala.html#45506" title="=&gt; Boolean">result</a>) { 
        <a href="#45527" title="Erasure.this.global.Type">tp</a> <span title="Unit" class="keyword">match</span> {
          <span title="Unit" class="keyword">case</span> <a title="Erasure.this.global.SubType" id="45532">st</a>: <a href="../symtab/Types.scala.html#26212" title="Erasure.this.global.SubType">SubType</a> =&gt;
            <a href="#45517" title="(tp: Erasure.this.global.Type)Unit">traverse</a>(<a href="#45532" title="Erasure.this.global.SubType">st</a>.<a href="../symtab/Types.scala.html#42742" title="=&gt; Erasure.this.global.Type">supertype</a>)
          <span title="Unit" class="keyword">case</span> TypeRef(<a title="Erasure.this.global.Type" id="45539">pre</a>, <a title="Erasure.this.global.Symbol" id="45540">sym</a>, <a title="List[Erasure.this.global.Type]" id="45541">args</a>) =&gt;
            <span title="Unit" class="keyword">if</span> (<a href="#45540" title="(x$1: AnyRef)Boolean">sym</a> == <a href="../symtab/Definitions.scala.html#28393" title="=&gt; Erasure.this.global.Symbol">ArrayClass</a>) <a href="#45541" title="(f: (Erasure.this.global.Type) =&gt; Unit)Unit">args</a> foreach <a href="#45517" title="(tp: Erasure.this.global.Type)Unit">traverse</a>
            <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<a href="#45540" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26924" title="(x$1: Boolean)Boolean">isTypeParameterOrSkolem</a> <span title="(x$1: Boolean)Boolean">||</span> <a href="#45540" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26927" title="=&gt; Boolean">isExistential</a> || <span title="=&gt; Boolean">!</span><a href="#45541" title="List[Erasure.this.global.Type]">args</a>.<span title="=&gt; Boolean">isEmpty</span>) <a href="../symtab/Types.scala.html#45507" title="(x$1: Boolean)Unit">result</a> = <span title="Boolean(true)" class="keyword">true</span>
            <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="#45540" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26983" title="=&gt; Erasure.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#26935" title="=&gt; Boolean">isPackageClass</a>) <a href="#45517" title="(tp: Erasure.this.global.Type)Unit">traverse</a>(<a href="#45539" title="Erasure.this.global.Type">pre</a>)
          <span title="Unit" class="keyword">case</span> PolyType(_, _) | ExistentialType(_, _) =&gt;
            <a href="../symtab/Types.scala.html#45507" title="(x$1: Boolean)Unit">result</a> = <span title="Boolean(true)" class="keyword">true</span>
          <span title="Unit" class="keyword">case</span> RefinedType(<a title="List[Erasure.this.global.Type]" id="45622">parents</a>, <a title="Erasure.this.global.Scope" id="45623">decls</a>) =&gt;
            <span title="Unit" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="#45622" title="List[Erasure.this.global.Type]">parents</a>.<span title="=&gt; Boolean">isEmpty</span>) <a href="#45517" title="(tp: Erasure.this.global.Type)Unit">traverse</a>(<a href="#45622" title="List[Erasure.this.global.Type]">parents</a>.<span title="=&gt; Erasure.this.global.Type">head</span>)
          <span title="Unit" class="keyword">case</span> ClassInfoType(<a title="List[Erasure.this.global.Type]" id="45632">parents</a>, _, _) =&gt;
            <a href="#45632" title="(f: (Erasure.this.global.Type) =&gt; Unit)Unit">parents</a> foreach <a href="#45517" title="(tp: Erasure.this.global.Type)Unit">traverse</a>
	  <span title="Unit" class="keyword">case</span> AnnotatedType(_, <a title="Erasure.this.global.Type" id="45662">atp</a>, _) =&gt;
	    <a href="#45517" title="(tp: Erasure.this.global.Type)Unit">traverse</a>(<a href="#45662" title="Erasure.this.global.Type">atp</a>)
          <span title="Unit" class="keyword">case</span> _ =&gt;
            <a href="../symtab/Types.scala.html#42722" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">mapOver</a><span title="Unit">(</span><a href="#45527" title="Erasure.this.global.Type">tp</a>)
        }
      }
    }
  }

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tp: Erasure.this.global.Type)Boolean" id="42452">needsJavaSig</a>(<a title="Erasure.this.global.Type" id="45686">tp</a>: <a href="../symtab/Types.scala.html#26205" title="Erasure.this.global.Type">Type</a>) = <span title="(x$1: Boolean)Boolean">!</span><a href="../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../Settings.scala.html#37160" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">Ynogenericsig</a>.<a href="../Settings.scala.html#37759" title="=&gt; Boolean">value</a> &amp;&amp; <a href="#42450" title="object Erasure.this.NeedsSigCollector">NeedsSigCollector</a>.<a href="../symtab/Types.scala.html#45509" title="(tp: Erasure.this.global.Type)Boolean">collect</a>(<a href="#45686" title="Erasure.this.global.Type">tp</a>)

  <span class="keyword">private</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="scala.collection.immutable.Map[Erasure.this.global.Symbol,Char]" id="42454">tagOfClass</a> = <a title="[A, B](elems: (A, B)*)scala.collection.immutable.Map[A,B]" id="7849">Map</a><span title="(elems: (Erasure.this.global.Symbol, Char)*)scala.collection.immutable.Map[Erasure.this.global.Symbol,Char]">[</span><a href="../symtab/Symbols.scala.html#26127" title="Erasure.this.global.Symbol">Symbol</a>,<a title="Char" id="2163">Char</a>](
    <a href="../symtab/Definitions.scala.html#28279" title="(y: Char)(Erasure.this.global.Symbol, Char)">ByteClass</a> -&gt; <span title="Char('B')">BYTE_TAG</span>,
    <a href="../symtab/Definitions.scala.html#28283" title="(y: Char)(Erasure.this.global.Symbol, Char)">CharClass</a> -&gt; <span title="Char('C')">CHAR_TAG</span>,
    <a href="../symtab/Definitions.scala.html#28291" title="(y: Char)(Erasure.this.global.Symbol, Char)">DoubleClass</a> -&gt; <span title="Char('D')">DOUBLE_TAG</span>,
    <a href="../symtab/Definitions.scala.html#28289" title="(y: Char)(Erasure.this.global.Symbol, Char)">FloatClass</a> -&gt; <span title="Char('F')">FLOAT_TAG</span>,
    <a href="../symtab/Definitions.scala.html#28285" title="(y: Char)(Erasure.this.global.Symbol, Char)">IntClass</a> -&gt; <span title="Char('I')">INT_TAG</span>,
    <a href="../symtab/Definitions.scala.html#28287" title="(y: Char)(Erasure.this.global.Symbol, Char)">LongClass</a> -&gt; <span title="Char('J')">LONG_TAG</span>,
    <a href="../symtab/Definitions.scala.html#28281" title="(y: Char)(Erasure.this.global.Symbol, Char)">ShortClass</a> -&gt; <span title="Char('S')">SHORT_TAG</span>,
    <a href="../symtab/Definitions.scala.html#28293" title="(y: Char)(Erasure.this.global.Symbol, Char)">BooleanClass</a> -&gt; <span title="Char('Z')">BOOL_TAG</span>,
    <a href="../symtab/Definitions.scala.html#28277" title="(y: Char)(Erasure.this.global.Symbol, Char)">UnitClass</a> -&gt; <span title="Char('V')">VOID_TAG</span>
  )

  /** The Java signature of type 'info', for symbol sym. The symbol is used to give the right return
   *  type for constructors.
   */
  <span class="keyword">def</span> <a title="(sym: Erasure.this.global.Symbol,info: Erasure.this.global.Type)Option[String]" id="42455">javaSig</a>(<a title="Erasure.this.global.Symbol" id="45707">sym</a>: <a href="../symtab/Symbols.scala.html#26127" title="Erasure.this.global.Symbol">Symbol</a>, <a title="Erasure.this.global.Type" id="45708">info</a>: <a href="../symtab/Types.scala.html#26205" title="Erasure.this.global.Type">Type</a>): <a title="Option[String]" id="782">Option</a>[String] = <a href="../symtab/SymbolTable.scala.html#26097" title="(ph: scala.tools.nsc.Phase)(op: =&gt; Option[String])Option[String]">atPhase</a>(<a href="../Global.scala.html#39176" title="=&gt; Erasure.this.global.Run">currentRun</a>.<a href="../Global.scala.html#40196" title="=&gt; scala.tools.nsc.Phase">erasurePhase</a>) {

    <span class="keyword">def</span> <a title="(tp: Erasure.this.global.Type)String" id="45726">jsig</a>(<a title="Erasure.this.global.Type" id="45728">tp</a>: <a href="../symtab/Types.scala.html#26205" title="Erasure.this.global.Type">Type</a>): <span title="String">String</span> = <a href="#45727" title="(toplevel: Boolean,tparams: List[Erasure.this.global.Symbol],tp0: Erasure.this.global.Type)String">jsig2</a>(<span title="Boolean(false)" class="keyword">false</span>, List<span title="object Nil">(</span>), <a href="#45728" title="Erasure.this.global.Type">tp</a>)

    <span class="keyword">def</span> <a title="(toplevel: Boolean,tparams: List[Erasure.this.global.Symbol],tp0: Erasure.this.global.Type)String" id="45727">jsig2</a>(<a title="Boolean" id="45729">toplevel</a>: <span title="Boolean">Boolean</span>, <a title="List[Erasure.this.global.Symbol]" id="45730">tparams</a>: <span title="List[Erasure.this.global.Symbol]">List</span>[Symbol], <a title="Erasure.this.global.Type" id="45731">tp0</a>: <a href="../symtab/Types.scala.html#26205" title="Erasure.this.global.Type">Type</a>): <span title="String">String</span> = {
      <span class="keyword">val</span> <a title="Erasure.this.global.Type" id="45743">tp</a> = <a href="#45731" title="Erasure.this.global.Type">tp0</a>.<a href="../symtab/Types.scala.html#30207" title="=&gt; Erasure.this.global.Type">dealias</a> 
      <a href="#45743" title="Erasure.this.global.Type">tp</a> <span title="String" class="keyword">match</span> {
        <span title="String" class="keyword">case</span> <a title="Erasure.this.global.SubType" id="45747">st</a>: <a href="../symtab/Types.scala.html#26212" title="Erasure.this.global.SubType">SubType</a> =&gt;
          <a href="#45727" title="(toplevel: Boolean,tparams: List[Erasure.this.global.Symbol],tp0: Erasure.this.global.Type)String">jsig2</a>(<a href="#45729" title="Boolean">toplevel</a>, <a href="#45730" title="List[Erasure.this.global.Symbol]">tparams</a>, <a href="#45747" title="Erasure.this.global.SubType">st</a>.<a href="../symtab/Types.scala.html#42742" title="=&gt; Erasure.this.global.Type">supertype</a>)
        <span title="String" class="keyword">case</span> ExistentialType(<a title="List[Erasure.this.global.Symbol]" id="45752">tparams</a>, <a title="Erasure.this.global.Type" id="45753">tpe</a>) =&gt;
          <a href="#45727" title="(toplevel: Boolean,tparams: List[Erasure.this.global.Symbol],tp0: Erasure.this.global.Type)String">jsig2</a>(<a href="#45729" title="Boolean">toplevel</a>, <a href="#45752" title="List[Erasure.this.global.Symbol]">tparams</a>, <a href="#45753" title="Erasure.this.global.Type">tpe</a>)
        <span title="String" class="keyword">case</span> TypeRef(<a title="Erasure.this.global.Type" id="45761">pre</a>, <a title="Erasure.this.global.Symbol" id="45762">sym</a>, <a title="List[Erasure.this.global.Type]" id="45763">args</a>) =&gt;
          <span class="keyword">def</span> <a title="(tp: Erasure.this.global.Type)java.lang.String" id="45766">argSig</a>(<a title="Erasure.this.global.Type" id="45769">tp</a>: <a href="../symtab/Types.scala.html#26205" title="Erasure.this.global.Type">Type</a>) =
            <span title="java.lang.String" class="keyword">if</span> (<a href="#45730" title="(elem: Any)Boolean" id="25609">tparams</a> contains <a href="#45769" title="Erasure.this.global.Type">tp</a>.<a href="../symtab/Types.scala.html#30180" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a>) {
              <span class="keyword">val</span> <a title="Erasure.this.global.TypeBounds" id="45772">bounds</a> = <a href="#45769" title="Erasure.this.global.Type">tp</a>.<a href="../symtab/Types.scala.html#30180" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a>.<a href="../symtab/Symbols.scala.html#27004" title="=&gt; Erasure.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#30188" title="=&gt; Erasure.this.global.TypeBounds">bounds</a>
              <span title="java.lang.String" class="keyword">if</span> (<span title="=&gt; Boolean">!</span>(<a href="../symtab/Definitions.scala.html#28265" title="=&gt; Erasure.this.global.Symbol">AnyRefClass</a>.<a href="../symtab/Types.scala.html#30235" title="(that: Erasure.this.global.Type)Boolean">tpe</a> &lt;:&lt; <a href="#45772" title="Erasure.this.global.TypeBounds">bounds</a>.<a href="../symtab/Types.scala.html#45779" title="=&gt; Erasure.this.global.Type">hi</a>)) <span title="(x$1: Any)java.lang.String" class="string">&quot;+&quot;</span>+<a href="#45726" title="(tp: Erasure.this.global.Type)String">jsig</a>(<a href="#45772" title="Erasure.this.global.TypeBounds">bounds</a>.<a href="../symtab/Types.scala.html#45779" title="=&gt; Erasure.this.global.Type">hi</a>)
              <span class="keyword">else</span> <span title="java.lang.String" class="keyword">if</span> (<span title="=&gt; Boolean">!</span>(<a href="#45772" title="Erasure.this.global.TypeBounds">bounds</a>.<a href="../symtab/Types.scala.html#30235" title="(that: Erasure.this.global.Type)Boolean">lo</a> &lt;:&lt; <a href="../symtab/Definitions.scala.html#28269" title="=&gt; Erasure.this.global.Symbol">NullClass</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; Erasure.this.global.Type">tpe</a>)) <span title="(x$1: Any)java.lang.String" class="string">&quot;-&quot;</span>+<a href="#45726" title="(tp: Erasure.this.global.Type)String">jsig</a>(<a href="#45772" title="Erasure.this.global.TypeBounds">bounds</a>.<a href="../symtab/Types.scala.html#45777" title="=&gt; Erasure.this.global.Type">lo</a>)
              <span class="keyword">else</span> <span title="java.lang.String(&quot;*&quot;)" class="string">&quot;*&quot;</span>
            } <span class="keyword">else</span> <span title="String" class="keyword">if</span> (<a href="#45769" title="Erasure.this.global.Type">tp</a>.<a href="../symtab/Types.scala.html#30180" title="(x$1: AnyRef)Boolean">typeSymbol</a> == <a href="../symtab/Definitions.scala.html#28277" title="=&gt; Erasure.this.global.Symbol">UnitClass</a>) {
              <a href="#45726" title="(tp: Erasure.this.global.Type)String">jsig</a>(<a href="../symtab/Definitions.scala.html#28267" title="=&gt; Erasure.this.global.Symbol">ObjectClass</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; Erasure.this.global.Type">tpe</a>)
            } <span class="keyword">else</span> {
              <a href="../symtab/Definitions.scala.html#28589" title="(key: Erasure.this.global.Symbol)Option[Erasure.this.global.Symbol]" id="44381">boxedClass</a> get <a href="#45769" title="Erasure.this.global.Type">tp</a>.<a href="../symtab/Types.scala.html#30180" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a> <span title="String" class="keyword">match</span> {
                <span title="String" class="keyword">case</span> Some(<a title="Erasure.this.global.Symbol" id="45882">boxed</a>) =&gt; <a href="#45726" title="(tp: Erasure.this.global.Type)String">jsig</a>(<a href="#45882" title="Erasure.this.global.Symbol">boxed</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; Erasure.this.global.Type">tpe</a>)
                <span title="String" class="keyword">case</span> <span title="object None">None</span> =&gt; <a href="#45726" title="(tp: Erasure.this.global.Type)String">jsig</a>(<a href="#45769" title="Erasure.this.global.Type">tp</a>)
              }
            }
          <span class="keyword">def</span> <a title="=&gt; String" id="45767">classSig</a>: <span title="String">String</span> = 
            <span title="(x$1: Any)java.lang.String" class="string">&quot;L&quot;</span>+<a href="../symtab/SymbolTable.scala.html#26097" title="(ph: scala.tools.nsc.Phase)(op: =&gt; java.lang.String)java.lang.String">atPhase</a>(<a href="../Global.scala.html#39176" title="=&gt; Erasure.this.global.Run">currentRun</a>.<a href="../Global.scala.html#40202" title="=&gt; scala.tools.nsc.Phase">icodePhase</a>)(<a href="#45762" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27089" title="(x$1: Any)java.lang.String">fullNameString</a> + <a href="../typechecker/Analyzer.scala.html#39796" title="=&gt; scala.tools.nsc.Global">global</a>.<a href="../Global.scala.html#39147" title="object Erasure.this.global.genJVM">genJVM</a>.<a href="../backend/jvm/GenJVM.scala.html#46116" title="(sym: Erasure.this.global.genJVM.global.Symbol)java.lang.String">moduleSuffix</a>(<a href="#45762" title="Erasure.this.global.Symbol">sym</a>)).<a title="(x$1: Char,x$2: Char)java.lang.String" id="7024">replace</a>(<span title="Char('.')" class="char">'.'</span>, <span title="Char('/')" class="char">'/'</span>)
          <span class="keyword">def</span> <a title="=&gt; String" id="45768">classSigSuffix</a>: <span title="String">String</span> = 
            <span title="(x$1: Any)java.lang.String" class="string">&quot;.&quot;</span>+<a href="#45762" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26988" title="=&gt; Erasure.this.global.Name">name</a>
          <span title="String" class="keyword">if</span> (<a href="#45762" title="(x$1: AnyRef)Boolean">sym</a> == <a href="../symtab/Definitions.scala.html#28393" title="=&gt; Erasure.this.global.Symbol">ArrayClass</a>)
            <span title="Char('[')">ARRAY_TAG</span>.<span title="(x$1: Any)java.lang.String">toString</span>+(<a href="#45763" title="(f: (Erasure.this.global.Type) =&gt; String)(implicit bf: scala.collection.generic.BuilderFactory[String,List[String],List[Erasure.this.global.Type]])List[String]">args</a> <span title="scala.collection.generic.BuilderFactory[String,List[String],List#Coll]">map</span> <a href="#45726" title="(tp: Erasure.this.global.Type)String">jsig</a>).<span title="=&gt; String">mkString</span>
          <span class="keyword">else</span> <span title="String" class="keyword">if</span> (<a href="#45762" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26924" title="(x$1: Boolean)Boolean">isTypeParameterOrSkolem</a> &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#45762" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26983" title="=&gt; Erasure.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#26924" title="=&gt; Boolean">isTypeParameterOrSkolem</a> /*not a higher-order type parameter, as these are suppressed*/)
            <span title="Char('T')">TVAR_TAG</span>.<span title="(x$1: Any)java.lang.String">toString</span><span title="(x$1: Any)java.lang.String">+</span><a href="#45762" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26988" title="=&gt; Erasure.this.global.Name">name</a>+<span title="java.lang.String(&quot;;&quot;)" class="string">&quot;;&quot;</span>
          <span class="keyword">else</span> <span title="String" class="keyword">if</span> (<a href="#45762" title="(x$1: AnyRef)Boolean">sym</a> <span title="(x$1: Boolean)Boolean">==</span> <a href="../symtab/Definitions.scala.html#28261" title="=&gt; Erasure.this.global.Symbol">AnyClass</a> <span title="(x$1: Boolean)Boolean">||</span> <a href="#45762" title="(x$1: AnyRef)Boolean">sym</a> == <a href="../symtab/Definitions.scala.html#28263" title="=&gt; Erasure.this.global.Symbol">AnyValClass</a> || <a href="#45762" title="(x$1: AnyRef)Boolean">sym</a> == <a href="../symtab/Definitions.scala.html#28356" title="=&gt; Erasure.this.global.Symbol">SingletonClass</a>) 
            <a href="#45726" title="(tp: Erasure.this.global.Type)String">jsig</a>(<a href="../symtab/Definitions.scala.html#28267" title="=&gt; Erasure.this.global.Symbol">ObjectClass</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; Erasure.this.global.Type">tpe</a>)
          <span class="keyword">else</span> <span title="String" class="keyword">if</span> (<a href="#45762" title="(x$1: AnyRef)Boolean">sym</a> == <a href="../symtab/Definitions.scala.html#28277" title="=&gt; Erasure.this.global.Symbol">UnitClass</a>) 
            <a href="#45726" title="(tp: Erasure.this.global.Type)String">jsig</a>(<a href="../symtab/Definitions.scala.html#28555" title="=&gt; Erasure.this.global.Symbol">BoxedUnitClass</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; Erasure.this.global.Type">tpe</a>)
          <span class="keyword">else</span> <span title="String" class="keyword">if</span> (<a href="#45762" title="(x$1: AnyRef)Boolean">sym</a> == <a href="../symtab/Definitions.scala.html#28271" title="=&gt; Erasure.this.global.Symbol">NothingClass</a>)
            <a href="#45726" title="(tp: Erasure.this.global.Type)String">jsig</a>(<a href="../symtab/Definitions.scala.html#28273" title="=&gt; Erasure.this.global.Symbol">RuntimeNothingClass</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; Erasure.this.global.Type">tpe</a>)
          <span class="keyword">else</span> <span title="String" class="keyword">if</span> (<a href="#45762" title="(x$1: AnyRef)Boolean">sym</a> == <a href="../symtab/Definitions.scala.html#28269" title="=&gt; Erasure.this.global.Symbol">NullClass</a>)
            <a href="#45726" title="(tp: Erasure.this.global.Type)String">jsig</a>(<a href="../symtab/Definitions.scala.html#28275" title="=&gt; Erasure.this.global.Symbol">RuntimeNullClass</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; Erasure.this.global.Type">tpe</a>)
          <span class="keyword">else</span> <span title="String" class="keyword">if</span> (<a href="../symtab/Definitions.scala.html#28606" title="(sym: Erasure.this.global.Symbol)Boolean">isValueClass</a>(<a href="#45762" title="Erasure.this.global.Symbol">sym</a>)) 
            <a href="#42453" title="(key: Erasure.this.global.Symbol)Char">tagOfClass</a>(<a href="#45762" title="Erasure.this.global.Symbol">sym</a>).<span title="()java.lang.String">toString</span>
          <span class="keyword">else</span> <span title="String" class="keyword">if</span> (<a href="#45762" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26897" title="=&gt; Boolean">isClass</a>)
            { 
              <span title="(x$1: Any)java.lang.String" class="keyword">if</span> (<a href="#42452" title="(tp: Erasure.this.global.Type)Boolean">needsJavaSig</a>(<a href="#45761" title="Erasure.this.global.Type">pre</a>)) {
                <span class="keyword">val</span> <a title="String" id="46793">s</a> = <a href="#45726" title="(tp: Erasure.this.global.Type)String">jsig</a>(<a href="#45761" title="Erasure.this.global.Type">pre</a>) 
                <span title="java.lang.String" class="keyword">if</span> (<a href="#46793" title="String">s</a>.<a title="(x$1: Int)Char" id="6917">charAt</a><a title="(x$1: Char)Boolean" id="2716">(</a><span title="Int(0)" class="int">0</span>) == <span title="Char('L')" class="char">'L'</span>) <a href="#46793" title="String">s</a>.<a title="(x$1: Int,x$2: Int)java.lang.String" id="7016">substring</a><span title="(x$1: Any)java.lang.String">(</span><span title="Int(0)" class="int">0</span>, <a href="#46793" title="String">s</a>.<a title="(x$1: Int)Int" id="6915">length</a> - <span title="Int(1)" class="int">1</span>) + <a href="#45768" title="=&gt; String">classSigSuffix</a>
                <span class="keyword">else</span> <a href="#45767" title="=&gt; String">classSig</a>
              } <span class="keyword">else</span> <a href="#45767" title="=&gt; String">classSig</a>
            } <span title="(x$1: Any)java.lang.String">+</span> {
              <span title="Any" class="keyword">if</span> (<a href="#45763" title="List[Erasure.this.global.Type]">args</a>.<span title="=&gt; Boolean">isEmpty</span>) <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span> <span class="keyword">else</span> <span title="(x$1: Any)java.lang.String" class="string">&quot;&lt;&quot;</span><span title="(x$1: Any)java.lang.String">+</span>(<a href="#45763" title="(f: (Erasure.this.global.Type) =&gt; java.lang.String)(implicit bf: scala.collection.generic.BuilderFactory[java.lang.String,List[java.lang.String],List[Erasure.this.global.Type]])List[java.lang.String]">args</a> <span title="scala.collection.generic.BuilderFactory[java.lang.String,List[java.lang.String],List#Coll]">map</span> <a href="#45766" title="(tp: Erasure.this.global.Type)java.lang.String">argSig</a>).<span title="=&gt; String">mkString</span>+<span title="java.lang.String(&quot;&gt;&quot;)" class="string">&quot;&gt;&quot;</span>
            } + <span title="java.lang.String(&quot;;&quot;)" class="string">&quot;;&quot;</span>
          <span class="keyword">else</span> <a href="#45726" title="(tp: Erasure.this.global.Type)String">jsig</a>(<a href="#42448" title="(v1: Erasure.this.global.Type)Erasure.this.global.Type">erasure</a>(<a href="#45743" title="Erasure.this.global.Type">tp</a>))
        <span title="java.lang.String" class="keyword">case</span> PolyType(<a title="List[Erasure.this.global.Symbol]" id="46949">tparams</a>, <a title="Erasure.this.global.Type" id="46950">restpe</a>) =&gt;
          <span class="keyword">def</span> <a title="(bounds: Erasure.this.global.TypeBounds)List[Erasure.this.global.Type]" id="46953">hiBounds</a>(<a title="Erasure.this.global.TypeBounds" id="46956">bounds</a>: <a href="../symtab/Types.scala.html#26240" title="Erasure.this.global.TypeBounds">TypeBounds</a>): <span title="List[Erasure.this.global.Type]">List</span>[Type] = <a href="#46956" title="Erasure.this.global.TypeBounds">bounds</a>.<a href="../symtab/Types.scala.html#45779" title="=&gt; Erasure.this.global.Type">hi</a>.<a href="../symtab/Types.scala.html#30206" title="=&gt; Erasure.this.global.Type">normalize</a> <span title="List[Erasure.this.global.Type]" class="keyword">match</span> {
            <span title="List[Erasure.this.global.Type]" class="keyword">case</span> RefinedType(<a title="List[Erasure.this.global.Type]" id="46962">parents</a>, _) =&gt; <a href="#46962" title="(f: (Erasure.this.global.Type) =&gt; Erasure.this.global.Type)(implicit bf: scala.collection.generic.BuilderFactory[Erasure.this.global.Type,List[Erasure.this.global.Type],List[Erasure.this.global.Type]])List[Erasure.this.global.Type]">parents</a> <span title="scala.collection.generic.BuilderFactory[Erasure.this.global.Type,List[Erasure.this.global.Type],List#Coll]">map</span> <a href="../typechecker/Infer.scala.html#39951" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">normalize</a>
            <span title="List[Erasure.this.global.Type]" class="keyword">case</span> <a title="Erasure.this.global.Type" id="47098">tp</a> =&gt; <span title="(xs: Erasure.this.global.Type*)List[Erasure.this.global.Type]">List</span>(<a href="#47098" title="Erasure.this.global.Type">tp</a>)
          }
          <span class="keyword">def</span> <a title="(bounds: List[Erasure.this.global.Type])java.lang.String" id="46954">boundSig</a>(<a title="List[Erasure.this.global.Type]" id="47108">bounds</a>: <span title="List[Erasure.this.global.Type]">List</span>[Type]) = {
            <span class="keyword">def</span> <a title="(t: Erasure.this.global.Type)Boolean" id="47109">isClassBound</a>(<a title="Erasure.this.global.Type" id="47111">t</a>: <a href="../symtab/Types.scala.html#26205" title="Erasure.this.global.Type">Type</a>) = <span title="=&gt; Boolean">!</span><a href="#47111" title="Erasure.this.global.Type">t</a>.<a href="../symtab/Types.scala.html#30180" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a>.<a href="../symtab/Symbols.scala.html#26923" title="=&gt; Boolean">isTrait</a>
            <span class="keyword">val</span> <a title="String" id="47110">classBound</a> = <a href="#47108" title="(p: (Erasure.this.global.Type) =&gt; Boolean)Option[Erasure.this.global.Type]" id="28941">bounds</a> find <a href="#47109" title="(t: Erasure.this.global.Type)Boolean">isClassBound</a> <span title="String" class="keyword">match</span> {
              <span title="String" class="keyword">case</span> Some(<a title="Erasure.this.global.Type" id="47160">t</a>) =&gt; <a href="#45726" title="(tp: Erasure.this.global.Type)String">jsig</a>(<a href="#47160" title="Erasure.this.global.Type">t</a>)
              <span title="java.lang.String(&quot;&quot;)" class="keyword">case</span> <span title="object None">None</span> =&gt; <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>
            }
            <span title="(x$1: Any)java.lang.String" class="string">&quot;:&quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#47110" title="String">classBound</a>+(<span class="keyword">for</span> (<a title="Erasure.this.global.Type" id="47182">t</a> &lt;- <a href="#47108" title="(f: (Erasure.this.global.Type) =&gt; java.lang.String)(implicit bf: scala.collection.generic.BuilderFactory[java.lang.String,List[java.lang.String],List[Erasure.this.global.Type]])List[java.lang.String]">bounds</a> <span class="keyword">if</span> <span title="=&gt; Boolean">!</span><a href="#47109" title="(t: Erasure.this.global.Type)Boolean">isClassBound</a>(<a href="#47182" title="Erasure.this.global.Type">t</a>)) <span class="keyword">yield</span> <span title="(x$1: Any)java.lang.String" class="string">&quot;:&quot;</span>+<a href="#45726" title="(tp: Erasure.this.global.Type)String">jsig</a>(<a href="#47182" title="Erasure.this.global.Type">t</a>)).<span title="=&gt; String">mkString</span>
          }
          <span title="(assertion: Boolean)Unit">assert</span>(<span title="=&gt; Boolean">!</span><a href="#46949" title="List[Erasure.this.global.Symbol]">tparams</a>.<span title="=&gt; Boolean">isEmpty</span>)
          <span class="keyword">def</span> <a title="(tsym: Erasure.this.global.Symbol)java.lang.String" id="46955">paramSig</a>(<a title="Erasure.this.global.Symbol" id="47273">tsym</a>: <a href="../symtab/Symbols.scala.html#26127" title="Erasure.this.global.Symbol">Symbol</a>) = <a href="#47273" title="Erasure.this.global.Symbol">tsym</a>.<a href="../symtab/Symbols.scala.html#26988" title="(other: String)java.lang.String" id="8103">name</a>+<a href="#46954" title="(bounds: List[Erasure.this.global.Type])java.lang.String">boundSig</a>(<a href="#46953" title="(bounds: Erasure.this.global.TypeBounds)List[Erasure.this.global.Type]">hiBounds</a>(<a href="#47273" title="Erasure.this.global.Symbol">tsym</a>.<a href="../symtab/Symbols.scala.html#27004" title="=&gt; Erasure.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#30188" title="=&gt; Erasure.this.global.TypeBounds">bounds</a>))
          <span title="(x$1: Any)java.lang.String">(</span><span title="java.lang.String" class="keyword">if</span> (<a href="#45729" title="Boolean">toplevel</a>) <span title="(x$1: Any)java.lang.String" class="string">&quot;&lt;&quot;</span><span title="(x$1: Any)java.lang.String">+</span>(<a href="#46949" title="(f: (Erasure.this.global.Symbol) =&gt; java.lang.String)(implicit bf: scala.collection.generic.BuilderFactory[java.lang.String,List[java.lang.String],List[Erasure.this.global.Symbol]])List[java.lang.String]">tparams</a> <span title="scala.collection.generic.BuilderFactory[java.lang.String,List[java.lang.String],List#Coll]">map</span> <a href="#46955" title="(tsym: Erasure.this.global.Symbol)java.lang.String">paramSig</a>).<span title="=&gt; String">mkString</span>+<span title="java.lang.String(&quot;&gt;&quot;)" class="string">&quot;&gt;&quot;</span> <span class="keyword">else</span> <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>)+<a href="#45726" title="(tp: Erasure.this.global.Type)String">jsig</a>(<a href="#46950" title="Erasure.this.global.Type">restpe</a>) 
        <span title="java.lang.String" class="keyword">case</span> MethodType(<a title="List[Erasure.this.global.Symbol]" id="47397">params</a>, <a title="Erasure.this.global.Type" id="47398">restpe</a>) =&gt;
          <span title="(x$1: Any)java.lang.String" class="string">&quot;(&quot;</span><span title="(x$1: Any)java.lang.String">+</span>(<a href="#47397" title="(f: (Erasure.this.global.Symbol) =&gt; Erasure.this.global.Type)(implicit bf: scala.collection.generic.BuilderFactory[Erasure.this.global.Type,List[Erasure.this.global.Type],List[Erasure.this.global.Symbol]])List[Erasure.this.global.Type]">params</a> <span title="(f: (Erasure.this.global.Type) =&gt; String)(implicit bf: scala.collection.generic.BuilderFactory[String,List[String],List[Erasure.this.global.Type]])List[String]">map</span> (<a href="#47409" title="Erasure.this.global.Symbol">_</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; Erasure.this.global.Type">tpe</a>) <span title="scala.collection.generic.BuilderFactory[String,List[String],List#Coll]">map</span> <a href="#45726" title="(tp: Erasure.this.global.Type)String">jsig</a>).<span title="=&gt; String">mkString</span><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot;)&quot;)" class="string">&quot;)&quot;</span>+
          (<span title="Any" class="keyword">if</span> (<a href="#47398" title="Erasure.this.global.Type">restpe</a>.<a href="../symtab/Types.scala.html#30180" title="(x$1: AnyRef)Boolean">typeSymbol</a> <span title="(x$1: Boolean)Boolean">==</span> <a href="../symtab/Definitions.scala.html#28277" title="=&gt; Erasure.this.global.Symbol">UnitClass</a> || <a href="#45707" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26916" title="=&gt; Boolean">isConstructor</a>) <span title="Char('V')">VOID_TAG</span>.<span title="()java.lang.String">toString</span> <span class="keyword">else</span> <a href="#45726" title="(tp: Erasure.this.global.Type)String">jsig</a>(<a href="#47398" title="Erasure.this.global.Type">restpe</a>))
        <span title="String" class="keyword">case</span> RefinedType(<a title="List[Erasure.this.global.Type]" id="47630">parents</a>, <a title="Erasure.this.global.Scope" id="47631">decls</a>) <span class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="#47630" title="List[Erasure.this.global.Type]">parents</a>.<span title="=&gt; Boolean">isEmpty</span>) =&gt;
          <a href="#45726" title="(tp: Erasure.this.global.Type)String">jsig</a>(<a href="#47630" title="List[Erasure.this.global.Type]">parents</a>.<span title="=&gt; Erasure.this.global.Type">head</span>)
        <span title="String" class="keyword">case</span> ClassInfoType(<a title="List[Erasure.this.global.Type]" id="47639">parents</a>, _, _) =&gt;
          (<a href="#47639" title="(f: (Erasure.this.global.Type) =&gt; String)(implicit bf: scala.collection.generic.BuilderFactory[String,List[String],List[Erasure.this.global.Type]])List[String]">parents</a> <span title="scala.collection.generic.BuilderFactory[String,List[String],List#Coll]">map</span> <a href="#45726" title="(tp: Erasure.this.global.Type)String">jsig</a>).<span title="=&gt; String">mkString</span>
        <span title="String" class="keyword">case</span> AnnotatedType(_, <a title="Erasure.this.global.Type" id="47736">atp</a>, _) =&gt;
          <a href="#45726" title="(tp: Erasure.this.global.Type)String">jsig</a>(<a href="#47736" title="Erasure.this.global.Type">atp</a>)
        <span title="String" class="keyword">case</span> _ =&gt;
          <span class="keyword">val</span> <a title="Erasure.this.global.Type" id="47741">etp</a> = <a href="#42448" title="(v1: Erasure.this.global.Type)Erasure.this.global.Type">erasure</a>(<a href="#45743" title="Erasure.this.global.Type">tp</a>)
          <span title="String" class="keyword">if</span> (<a href="#47741" title="(x$1: AnyRef)Boolean">etp</a> eq <a href="#45743" title="Erasure.this.global.Type">tp</a>) <span title="Nothing" class="keyword">throw</span> <span title="Erasure.this.UnknownSig" class="keyword">new</span> <a href="#42456" title="Erasure.this.UnknownSig">UnknownSig</a>
          <span class="keyword">else</span> <a href="#45726" title="(tp: Erasure.this.global.Type)String">jsig</a>(<a href="#47741" title="Erasure.this.global.Type">etp</a>)
      }
    }
    <span title="Option[String]" class="keyword">if</span> (<a href="#42452" title="(tp: Erasure.this.global.Type)Boolean">needsJavaSig</a>(<a href="#45708" title="Erasure.this.global.Type">info</a>)) {
      <span class="keyword">try</span> {
        //println(&quot;Java sig of &quot;+sym+&quot; is &quot;+jsig2(true, List(), sym.info))//DEBUG
        <a title="(x: String)Some[String]" id="258">Some</a>(<a href="#45727" title="(toplevel: Boolean,tparams: List[Erasure.this.global.Symbol],tp0: Erasure.this.global.Type)String">jsig2</a>(<span title="Boolean(true)" class="keyword">true</span>, List<span title="object Nil">(</span>), <a href="#45708" title="Erasure.this.global.Type">info</a>))
      } <span class="keyword">catch</span> {
        <span title="None.type" class="keyword">case</span> <a title="Erasure.this.UnknownSig" id="47770">ex</a>: <a href="#42456" title="Erasure.this.UnknownSig">UnknownSig</a> =&gt; <span title="object None">None</span>
      }
    }
    <span class="keyword">else</span> <span title="object None">None</span>
  }

  <span class="keyword">class</span> <a title="class UnknownSig extends java.lang.Exception with ScalaObject" id="42456">UnknownSig</a> <span title="ScalaObject" class="keyword">extends</span> <a title="java.lang.Exception" id="7820">Exception</a>

  /** Type reference after erasure */
  <span class="keyword">def</span> <a title="(sym: Erasure.this.global.Symbol)Erasure.this.global.Type" id="42457">erasedTypeRef</a>(<a title="Erasure.this.global.Symbol" id="43460">sym</a>: <a href="../symtab/Symbols.scala.html#26127" title="Erasure.this.global.Symbol">Symbol</a>): <a href="../symtab/Types.scala.html#26205" title="Erasure.this.global.Type">Type</a> =
    <a href="../symtab/Types.scala.html#26295" title="(pre: Erasure.this.global.Type,sym: Erasure.this.global.Symbol,args: List[Erasure.this.global.Type])Erasure.this.global.Type">typeRef</a>(<a href="#42448" title="(v1: Erasure.this.global.Type)Erasure.this.global.Type">erasure</a>(<a href="#43460" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26983" title="=&gt; Erasure.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; Erasure.this.global.Type">tpe</a>), <a href="#43460" title="Erasure.this.global.Symbol">sym</a>, List<span title="object Nil">(</span>))

  /** Remove duplicate references to class Object in a list of parent classes
   * todo: needed?
   */
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tps: List[Erasure.this.global.Type])List[Erasure.this.global.Type]" id="42458">removeDoubleObject</a>(<a title="List[Erasure.this.global.Type]" id="44681">tps</a>: <span title="List[Erasure.this.global.Type]">List</span>[Type]): <span title="List[Erasure.this.global.Type]">List</span>[Type] = <a href="#44681" title="List[Erasure.this.global.Type]">tps</a> <span title="List[Erasure.this.global.Type]" class="keyword">match</span> {
    <span title="List[Nothing]" class="keyword">case</span> <a href="#47810" title="(x: List[Erasure.this.global.Type])Some[List[Erasure.this.global.Type]]">List</a>() =&gt; List<span title="object Nil">(</span>)
    <span title="List[Erasure.this.global.Type]" class="keyword">case</span> <a title="Erasure.this.global.Type" id="47876">tp</a> :: <a title="List[Erasure.this.global.Type]" id="47877">tps1</a> =&gt; 
      <span title="List[Erasure.this.global.Type]" class="keyword">if</span> (<a href="#47876" title="Erasure.this.global.Type">tp</a>.<a href="../symtab/Types.scala.html#30180" title="(x$1: AnyRef)Boolean">typeSymbol</a> == <a href="../symtab/Definitions.scala.html#28267" title="=&gt; Erasure.this.global.Symbol">ObjectClass</a>) <a href="#47876" title="Erasure.this.global.Type">tp</a> <a href="#47887" title="Erasure.this.global.Type">::</a> <a href="#47877" title="List[Erasure.this.global.Type]">tps1</a>.<span title="(p: (Erasure.this.global.Type) =&gt; Boolean)List[Erasure.this.global.Type]">filter</span><span title="(x: Erasure.this.global.Type)List[Erasure.this.global.Type]">(</span><a href="#47890" title="Erasure.this.global.Type">_</a>.<a href="../symtab/Types.scala.html#30180" title="(x$1: AnyRef)Boolean">typeSymbol</a> != <a href="../symtab/Definitions.scala.html#28267" title="=&gt; Erasure.this.global.Symbol">ObjectClass</a>)
      <span class="keyword">else</span> <a href="#47876" title="Erasure.this.global.Type">tp</a> <a href="#47907" title="Erasure.this.global.Type">::</a> <a href="#42458" title="(tps: List[Erasure.this.global.Type])List[Erasure.this.global.Type]">removeDoubleObject</a><span title="(x: Erasure.this.global.Type)List[Erasure.this.global.Type]">(</span><a href="#47877" title="List[Erasure.this.global.Type]">tps1</a>)
  }

  /** &lt;p&gt;
   *    The symbol's erased info. This is the type's erasure, except for the
   *    following symbols:
   *  &lt;/p&gt;
   *  &lt;ul&gt;
   *    &lt;li&gt;
   *      For &lt;code&gt;$asInstanceOf&lt;/code&gt; : &lt;code&gt;[T]T&lt;/code&gt;
   *    &lt;/li&gt;
   *    &lt;li&gt;
   *      For &lt;code&gt;$isInstanceOf&lt;/code&gt; : &lt;code&gt;[T]scala#Boolean&lt;/code&gt;
   *    &lt;/li&gt;
   *    &lt;li&gt;
   *      For class &lt;code&gt;Array&lt;/code&gt; : &lt;code&gt;[T]C&lt;/code&gt; where
   *      &lt;code&gt;C&lt;/code&gt; is the erased classinfo of the &lt;code&gt;Array&lt;/code&gt; class
   *    &lt;/li&gt;
   *    &lt;li&gt;
   *      For &lt;code&gt;Array[T].&amp;lt;init&amp;gt;&lt;/code&gt; : &lt;code&gt;{scala#Int)Array[T]&lt;/code&gt;
   *    &lt;/li&gt;
   *    &lt;li&gt;
   *      For a type parameter : A type bounds type consisting of the erasures
   *      of its bounds.
   *    &lt;/li&gt;
   *  &lt;/ul&gt;
   */
  <span class="keyword">def</span> <a title="(sym: Erasure.this.global.Symbol,tp: Erasure.this.global.Type)Erasure.this.global.Type" id="42459">transformInfo</a>(<a title="Erasure.this.global.Symbol" id="47917">sym</a>: <a href="../symtab/Symbols.scala.html#26127" title="Erasure.this.global.Symbol">Symbol</a>, <a title="Erasure.this.global.Type" id="47918">tp</a>: <a href="../symtab/Types.scala.html#26205" title="Erasure.this.global.Type">Type</a>): <a href="../symtab/Types.scala.html#26205" title="Erasure.this.global.Type">Type</a> =
    <span title="Erasure.this.global.Type" class="keyword">if</span> (<a href="#47917" title="(x$1: AnyRef)Boolean">sym</a> == <a href="../symtab/Definitions.scala.html#28525" title="=&gt; Erasure.this.global.Symbol">Object_asInstanceOf</a>)
      <a href="#47917" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27004" title="=&gt; Erasure.this.global.Type">info</a>
    <span class="keyword">else</span> <span title="Erasure.this.global.Type" class="keyword">if</span> (<a href="#47917" title="(x$1: AnyRef)Boolean">sym</a> <span title="(x$1: Boolean)Boolean">==</span> <a href="../symtab/Definitions.scala.html#28522" title="=&gt; Erasure.this.global.Symbol">Object_isInstanceOf</a> || <a href="#47917" title="(x$1: AnyRef)Boolean">sym</a> == <a href="../symtab/Definitions.scala.html#28393" title="=&gt; Erasure.this.global.Symbol">ArrayClass</a>) 
      <a href="../symtab/Types.scala.html#43825" title="(typeParams: List[Erasure.this.global.Symbol],resultType: Erasure.this.global.Type)Erasure.this.global.PolyType">PolyType</a>(<a href="#47917" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27004" title="=&gt; Erasure.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#30201" title="=&gt; List[Erasure.this.global.Symbol]">typeParams</a>, <a href="#42448" title="(v1: Erasure.this.global.Type)Erasure.this.global.Type">erasure</a>(<a href="#47917" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27004" title="=&gt; Erasure.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#30193" title="=&gt; Erasure.this.global.Type">resultType</a>))
    <span class="keyword">else</span> <span title="Erasure.this.global.Type" class="keyword">if</span> (<a href="#47917" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26900" title="=&gt; Boolean">isAbstractType</a>) 
      <a href="../symtab/Types.scala.html#26289" title="(lo: Erasure.this.global.Type,hi: Erasure.this.global.Type)Erasure.this.global.TypeBounds">mkTypeBounds</a>(<a href="../symtab/Types.scala.html#26219" title="object Erasure.this.global.WildcardType">WildcardType</a>, <a href="../symtab/Types.scala.html#26219" title="object Erasure.this.global.WildcardType">WildcardType</a>)
    <span class="keyword">else</span> <span title="Erasure.this.global.Type" class="keyword">if</span> (<a href="#47917" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26895" title="(x$1: Boolean)Boolean">isTerm</a> &amp;&amp; <a href="#47917" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26983" title="(x$1: AnyRef)Boolean">owner</a> == <a href="../symtab/Definitions.scala.html#28393" title="=&gt; Erasure.this.global.Symbol">ArrayClass</a>) {
      <span title="Erasure.this.global.Type" class="keyword">if</span> (<a href="#47917" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26914" title="=&gt; Boolean">isClassConstructor</a>)
        <a href="#47918" title="Erasure.this.global.Type">tp</a> <span title="Erasure.this.global.Type" class="keyword">match</span> {
          <span title="Erasure.this.global.MethodType" class="keyword">case</span> MethodType(<a title="List[Erasure.this.global.Symbol]" id="48011">params</a>, TypeRef(<a title="Erasure.this.global.Type" id="48015">pre</a>, <a title="Erasure.this.global.Symbol" id="48016">sym</a>, <a title="List[Erasure.this.global.Type]" id="48017">args</a>)) =&gt;
            <a href="../symtab/Types.scala.html#43895" title="(params: List[Erasure.this.global.Symbol],resultType: Erasure.this.global.Type)Erasure.this.global.MethodType">MethodType</a>(<a href="../symtab/Symbols.scala.html#26136" title="(syms: List[Erasure.this.global.Symbol])List[Erasure.this.global.Symbol]">cloneSymbols</a><span title="(f: (Erasure.this.global.Symbol) =&gt; Erasure.this.global.Symbol)(implicit bf: scala.collection.generic.BuilderFactory[Erasure.this.global.Symbol,List[Erasure.this.global.Symbol],List[Erasure.this.global.Symbol]])List[Erasure.this.global.Symbol]">(</span><a href="#48011" title="List[Erasure.this.global.Symbol]">params</a>) <span title="scala.collection.generic.BuilderFactory[Erasure.this.global.Symbol,List[Erasure.this.global.Symbol],List#Coll]">map</span> (<a title="Erasure.this.global.Symbol" id="48056">p</a> =&gt; <a href="#48056" title="Erasure.this.global.Symbol">p</a>.<a href="../symtab/Symbols.scala.html#27005" title="(info: Erasure.this.global.Type)p.type">setInfo</a>(<a href="#42448" title="(v1: Erasure.this.global.Type)Erasure.this.global.Type">erasure</a>(<a href="#48056" title="Erasure.this.global.Symbol">p</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; Erasure.this.global.Type">tpe</a>))),
                       <a href="../symtab/Types.scala.html#26295" title="(pre: Erasure.this.global.Type,sym: Erasure.this.global.Symbol,args: List[Erasure.this.global.Type])Erasure.this.global.Type">typeRef</a>(<a href="#42448" title="(v1: Erasure.this.global.Type)Erasure.this.global.Type">erasure</a>(<a href="#48015" title="Erasure.this.global.Type">pre</a>), <a href="#48016" title="Erasure.this.global.Symbol">sym</a>, <a href="#48017" title="List[Erasure.this.global.Type]">args</a>))
        }
      <span class="keyword">else</span> <span title="Erasure.this.global.Type" class="keyword">if</span> (<a href="#47917" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26988" title="(x$1: AnyRef)Boolean">name</a> == <a href="../symtab/StdNames.scala.html#26531" title="object Erasure.this.global.nme">nme</a>.<a href="../symtab/StdNames.scala.html#29828" title="=&gt; Erasure.this.global.Name">apply</a>) 
        <a href="#47918" title="Erasure.this.global.Type">tp</a>
      <span class="keyword">else</span> <span title="Erasure.this.global.Type" class="keyword">if</span> (<a href="#47917" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26988" title="(x$1: AnyRef)Boolean">name</a> == <a href="../symtab/StdNames.scala.html#26531" title="object Erasure.this.global.nme">nme</a>.<a href="../symtab/StdNames.scala.html#29984" title="=&gt; Erasure.this.global.Name">update</a>)
        <a href="#47918" title="Erasure.this.global.Type">tp</a> <span title="Erasure.this.global.Type" class="keyword">match</span> {
          <span title="Erasure.this.global.MethodType" class="keyword">case</span> MethodType(<a href="#48113" title="(x: List[Erasure.this.global.Symbol])Some[List[Erasure.this.global.Symbol]]">List</a>(<a title="Erasure.this.global.Symbol" id="48122">index</a>, <a title="Erasure.this.global.Symbol" id="48123">tvar</a>), <a title="Erasure.this.global.Type" id="48125">restpe</a>) =&gt;
            <a href="../symtab/Types.scala.html#43895" title="(params: List[Erasure.this.global.Symbol],resultType: Erasure.this.global.Type)Erasure.this.global.MethodType">MethodType</a>(<span title="(xs: Erasure.this.global.Symbol*)List[Erasure.this.global.Symbol]">List</span>(<a href="#48122" title="Erasure.this.global.Symbol">index</a>.<a href="../symtab/Symbols.scala.html#27028" title="=&gt; Erasure.this.global.Symbol">cloneSymbol</a>.<a href="../symtab/Symbols.scala.html#27005" title="(info: Erasure.this.global.Type)Erasure.this.global.Symbol">setInfo</a>(<a href="#42448" title="(v1: Erasure.this.global.Type)Erasure.this.global.Type">erasure</a>(<a href="#48122" title="Erasure.this.global.Symbol">index</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; Erasure.this.global.Type">tpe</a>)), <a href="#48123" title="Erasure.this.global.Symbol">tvar</a>),
                       <a href="#42457" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.Type">erasedTypeRef</a>(<a href="../symtab/Definitions.scala.html#28277" title="=&gt; Erasure.this.global.Symbol">UnitClass</a>))
        }
      <span class="keyword">else</span> <a href="#42448" title="(v1: Erasure.this.global.Type)Erasure.this.global.Type">erasure</a>(<a href="#47918" title="Erasure.this.global.Type">tp</a>)
    } <span class="keyword">else</span> <span title="Erasure.this.global.Type" class="keyword">if</span> (
      <a href="#47917" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26983" title="(x$1: AnyRef)Boolean">owner</a> <span title="(x$1: Boolean)Boolean">!=</span> <a href="../symtab/Symbols.scala.html#26134" title="object Erasure.this.global.NoSymbol">NoSymbol</a> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span>
      <a href="#47917" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26983" title="=&gt; Erasure.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#26983" title="(x$1: AnyRef)Boolean">owner</a> == <a href="../symtab/Definitions.scala.html#28393" title="=&gt; Erasure.this.global.Symbol">ArrayClass</a> &amp;&amp;
      <a href="#47917" title="(x$1: AnyRef)Boolean">sym</a> == <a href="../symtab/Definitions.scala.html#28396" title="=&gt; Erasure.this.global.Symbol">Array_update</a>.<a href="../symtab/Symbols.scala.html#27017" title="=&gt; List[List[Erasure.this.global.Symbol]]">paramss</a>.<span title="(n: Int)Erasure.this.global.Symbol">head</span>(<span title="Int(1)" class="int">1</span>)) {
      // special case for Array.update: the non-erased type remains, i.e. (Int,A)Unit
      // since the erasure type map gets applied to every symbol, we have to catch the
      // symbol here
      <a href="#47918" title="Erasure.this.global.Type">tp</a>
    } <span class="keyword">else</span> {
/*
      val erased = 
        if (sym.isGetter &amp;&amp; sym.tpe.isInstanceOf[MethodType]) 
          erasure mapOver sym.tpe // for getters, unlike for normal methods, always convert Unit to BoxedUnit.
        else 
          erasure(tp)
*/
      <a href="AddInterfaces.scala.html#42426" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">transformMixinInfo</a>(<a href="#42448" title="(v1: Erasure.this.global.Type)Erasure.this.global.Type">erasure</a>(<a href="#47918" title="Erasure.this.global.Type">tp</a>))
    }

  <span class="keyword">val</span> <a title="Erasure.this.global.TypeMap" id="42460">deconstMap</a> = <a href="#45342" title="Erasure.this.global.TypeMap{ ... }" class="keyword">new</a> <a href="../symtab/Types.scala.html#26320" title="anonymous class $anon extends Erasure.this.global.TypeMap" id="45342">TypeMap</a> {
   <span class="keyword">def</span> <a title="(tp: Erasure.this.global.Type)Erasure.this.global.Type" id="45344">apply</a>(<a title="Erasure.this.global.Type" id="45348">tp</a>: <a href="../symtab/Types.scala.html#26205" title="Erasure.this.global.Type">Type</a>): <a href="../symtab/Types.scala.html#26205" title="Erasure.this.global.Type">Type</a> = <a href="#45348" title="Erasure.this.global.Type">tp</a> <span title="Erasure.this.global.Type" class="keyword">match</span> {
     <span title="Erasure.this.global.Type" class="keyword">case</span> PolyType(_, _) =&gt; <a href="../symtab/Types.scala.html#42722" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">mapOver</a>(<a href="#45348" title="Erasure.this.global.Type">tp</a>)
     <span title="Erasure.this.global.Type" class="keyword">case</span> MethodType(_, _) =&gt; <a href="../symtab/Types.scala.html#42722" title="(tp: Erasure.this.global.Type)Erasure.this.global.Type">mapOver</a>(<a href="#45348" title="Erasure.this.global.Type">tp</a>)
     <span title="Erasure.this.global.Type" class="keyword">case</span> _ =&gt; <a href="#45348" title="Erasure.this.global.Type">tp</a>.<a href="../symtab/Types.scala.html#30185" title="=&gt; Erasure.this.global.Type">deconst</a>
   }
  }

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: Erasure.this.global.Symbol)Boolean" id="42462">isSeqClass</a>(<a title="Erasure.this.global.Symbol" id="48233">sym</a>: <a href="../symtab/Symbols.scala.html#26127" title="Erasure.this.global.Symbol">Symbol</a>) =
    <span title="(x$1: Boolean)Boolean">(</span><a href="../symtab/Symbols.scala.html#27023" title="(that: Erasure.this.global.Symbol)Boolean">SeqClass</a> isNonBottomSubClass <a href="#48233" title="Erasure.this.global.Symbol">sym</a>) &amp;&amp; (<a href="#48233" title="(x$1: AnyRef)Boolean">sym</a> != <a href="../symtab/Definitions.scala.html#28267" title="=&gt; Erasure.this.global.Symbol">ObjectClass</a>)

  /** The symbol which is called by a bridge;
   *  @pre phase &gt; erasure
   */
  <span class="keyword">def</span> <a title="(bridge: Erasure.this.global.Symbol)Erasure.this.global.Symbol" id="42463">bridgedSym</a>(<a title="Erasure.this.global.Symbol" id="48290">bridge</a>: <a href="../symtab/Symbols.scala.html#26127" title="Erasure.this.global.Symbol">Symbol</a>) = 
    <a href="#48290" title="Erasure.this.global.Symbol">bridge</a>.<a href="../symtab/Symbols.scala.html#26983" title="=&gt; Erasure.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27004" title="=&gt; Erasure.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#30212" title="(name: Erasure.this.global.Name)Erasure.this.global.Symbol">nonPrivateDecl</a><a href="../symtab/Symbols.scala.html#27027" title="(cond: (Erasure.this.global.Symbol) =&gt; Boolean)Erasure.this.global.Symbol">(</a><a href="#48290" title="Erasure.this.global.Symbol">bridge</a>.<a href="../symtab/Symbols.scala.html#26988" title="=&gt; Erasure.this.global.Name">name</a>) suchThat {
      <a title="Erasure.this.global.Symbol" id="48302">sym</a> =&gt; <span title="(x$1: Boolean)Boolean">!</span>(<a href="../symtab/Symbols.scala.html#26996" title="(mask: Long)Boolean">sym</a> hasFlag <span title="Long(67108864L)">BRIDGE</span>) <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> 
             <a href="../symtab/Types.scala.html#26418" title="(tp1: Erasure.this.global.Type,tp2: Erasure.this.global.Type,alwaysMatchSimple: Boolean)Boolean">matchesType</a>(<a href="#48302" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; Erasure.this.global.Type">tpe</a>, <a href="#48290" title="Erasure.this.global.Symbol">bridge</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; Erasure.this.global.Type">tpe</a>, <span title="Boolean(true)" class="keyword">true</span>) &amp;&amp; 
             <a href="#48302" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; Erasure.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30235" title="(that: Erasure.this.global.Type)Boolean">resultType</a> &lt;:&lt; <a href="#48290" title="Erasure.this.global.Symbol">bridge</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; Erasure.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30193" title="=&gt; Erasure.this.global.Type">resultType</a>
    }

// -------- boxing/unboxing --------------------------------------------------------

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(context: Erasure.this.Context)Erasure.this.Eraser" id="42464">newTyper</a>(<a title="Erasure.this.Context" id="48331">context</a>: <a href="../typechecker/Contexts.scala.html#39821" title="Erasure.this.Context">Context</a>) = <span title="Erasure.this.Eraser" class="keyword">new</span> <a href="#42465" title="Erasure.this.Eraser">Eraser</a>(<a href="#48331" title="Erasure.this.Context">context</a>)

  /** The modifier typer which retypes with erased types. */
  <span class="keyword">class</span> <a title="class Eraser extends Erasure.this.Typer with ScalaObject" id="42465">Eraser</a><span title="ScalaObject">(</span><a title="Erasure.this.Context" id="48352">context</a>: <a href="../typechecker/Contexts.scala.html#39821" title="Erasure.this.Context">Context</a>) <span class="keyword">extends</span> <a href="../typechecker/Typers.scala.html#39921" title="Erasure.this.Typer">Typer</a>(<a href="#48352" title="Erasure.this.Context">context</a>) {
  
    /** Box `tree' of unboxed type */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree" id="48342">box</a>(<a title="Erasure.this.global.Tree" id="48473">tree</a>: <a href="../ast/Trees.scala.html#26593" title="Erasure.this.global.Tree">Tree</a>): <a href="../ast/Trees.scala.html#26593" title="Erasure.this.global.Tree">Tree</a> = <a href="#48473" title="Erasure.this.global.Tree">tree</a> <span title="Erasure.this.global.Tree" class="keyword">match</span> {
      <span title="Erasure.this.global.LabelDef" class="keyword">case</span> LabelDef(<a title="Erasure.this.global.Name" id="48532">name</a>, <a title="List[Erasure.this.global.Ident]" id="48533">params</a>, <a title="Erasure.this.global.Tree" id="48534">rhs</a>) =&gt;
        <span class="keyword">val</span> <a title="Erasure.this.global.Tree" id="48537">rhs1</a> = <a href="#48342" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">box</a>(<a href="#48534" title="Erasure.this.global.Tree">rhs</a>)
        <a href="../ast/Trees.scala.html#26584" title="=&gt; Erasure.this.global.LazyTreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#48595" title="(tree: Erasure.this.global.Tree,name: Erasure.this.global.Name,params: List[Erasure.this.global.Ident],rhs: Erasure.this.global.Tree)Erasure.this.global.LabelDef">LabelDef</a><a href="../ast/Trees.scala.html#29366" title="(tp: Erasure.this.global.Type)Erasure.this.global.LabelDef">(</a><a href="#48473" title="Erasure.this.global.Tree">tree</a>, <a href="#48532" title="Erasure.this.global.Name">name</a>, <a href="#48533" title="List[Erasure.this.global.Ident]">params</a>, <a href="#48537" title="Erasure.this.global.Tree">rhs1</a>) setType <a href="#48537" title="Erasure.this.global.Tree">rhs1</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; Erasure.this.global.Type">tpe</a>
      <span title="Erasure.this.global.Tree" class="keyword">case</span> _ =&gt;
        <a href="../typechecker/Typers.scala.html#42641" title="(pos: scala.tools.nsc.util.Position)(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">typedPos</a>(<a href="#48473" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29361" title="=&gt; scala.tools.nsc.util.Position">pos</a>)(<a href="#48473" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; Erasure.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30180" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a> <span title="Erasure.this.global.Tree" class="keyword">match</span> {
          <span title="Erasure.this.global.Tree" class="keyword">case</span> <a href="../symtab/Definitions.scala.html#28277" title="=&gt; Erasure.this.global.Symbol">UnitClass</a>  =&gt;
            <span title="Erasure.this.global.Tree" class="keyword">if</span> (<a href="../ast/TreeInfo.scala.html#48908" title="(tree: Erasure.this.global.treeInfo.trees.Tree)Boolean">treeInfo</a> isPureExpr <a href="#48473" title="Erasure.this.global.Tree">tree</a>) <a href="../ast/TreeDSL.scala.html#42533" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.gen.global.Tree">REF</a>(<a href="../symtab/Definitions.scala.html#28559" title="=&gt; Erasure.this.global.Symbol">BoxedUnit_UNIT</a>)
            <span class="keyword">else</span> <a href="../ast/TreeDSL.scala.html#42526" title="(xs: Erasure.this.global.Tree*)Erasure.this.global.Block">BLOCK</a>(<a href="#48473" title="Erasure.this.global.Tree">tree</a>, <a href="../ast/TreeDSL.scala.html#42533" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.gen.global.Tree">REF</a>(<a href="../symtab/Definitions.scala.html#28559" title="=&gt; Erasure.this.global.Symbol">BoxedUnit_UNIT</a>))
          <span title="Erasure.this.global.Tree" class="keyword">case</span> <a href="../symtab/Definitions.scala.html#28393" title="=&gt; Erasure.this.global.Symbol">ArrayClass</a> =&gt;
            <a href="#48343" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">boxArray</a>(<a href="#48473" title="Erasure.this.global.Tree">tree</a>)
          <span title="Erasure.this.global.Apply" class="keyword">case</span> <a title="Erasure.this.global.Symbol" id="49076">x</a>          =&gt;
            <a href="../ast/Trees.scala.html#29365" title="(pos: scala.tools.nsc.util.Position)Erasure.this.global.Apply">(</a><a href="../ast/TreeDSL.scala.html#42533" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.gen.global.Tree">REF</a><a href="../ast/TreeDSL.scala.html#45081" title="(params: Erasure.this.global.Tree*)Erasure.this.global.Apply">(</a><a href="../symtab/Definitions.scala.html#28593" title="(key: Erasure.this.global.Symbol)Erasure.this.global.Symbol">boxMethod</a>(<a href="#49076" title="Erasure.this.global.Symbol">x</a>)) APPLY <a href="#48473" title="Erasure.this.global.Tree">tree</a>) <a href="../ast/Trees.scala.html#29366" title="(tp: Erasure.this.global.Type)Erasure.this.global.Apply">setPos</a> (<a href="#48473" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29361" title="=&gt; scala.tools.nsc.util.Position">pos</a>) setType (<a href="../symtab/Definitions.scala.html#28267" title="=&gt; Erasure.this.global.Symbol">ObjectClass</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; Erasure.this.global.Type">tpe</a>)
        })
    }

    /** generate  ScalaRuntime.boxArray(tree)
     *  !!! todo: optimize this in case the runtime type is known
     */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree" id="48343">boxArray</a>(<a title="Erasure.this.global.Tree" id="49072">tree</a>: <a href="../ast/Trees.scala.html#26593" title="Erasure.this.global.Tree">Tree</a>): <a href="../ast/Trees.scala.html#26593" title="Erasure.this.global.Tree">Tree</a> = <a href="#49072" title="Erasure.this.global.Tree">tree</a> <span title="Erasure.this.global.Tree" class="keyword">match</span> {
      <span title="Erasure.this.global.LabelDef" class="keyword">case</span> LabelDef(<a title="Erasure.this.global.Name" id="49230">name</a>, <a title="List[Erasure.this.global.Ident]" id="49231">params</a>, <a title="Erasure.this.global.Tree" id="49232">rhs</a>) =&gt;
        <span class="keyword">val</span> <a title="Erasure.this.global.Tree" id="49235">rhs1</a> = <a href="#48343" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">boxArray</a>(<a href="#49232" title="Erasure.this.global.Tree">rhs</a>)
        <a href="../ast/Trees.scala.html#26584" title="=&gt; Erasure.this.global.LazyTreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#48595" title="(tree: Erasure.this.global.Tree,name: Erasure.this.global.Name,params: List[Erasure.this.global.Ident],rhs: Erasure.this.global.Tree)Erasure.this.global.LabelDef">LabelDef</a><a href="../ast/Trees.scala.html#29366" title="(tp: Erasure.this.global.Type)Erasure.this.global.LabelDef">(</a><a href="#49072" title="Erasure.this.global.Tree">tree</a>, <a href="#49230" title="Erasure.this.global.Name">name</a>, <a href="#49231" title="List[Erasure.this.global.Ident]">params</a>, <a href="#49235" title="Erasure.this.global.Tree">rhs1</a>) setType <a href="#49235" title="Erasure.this.global.Tree">rhs1</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; Erasure.this.global.Type">tpe</a>
      <span title="Erasure.this.global.Tree" class="keyword">case</span> _ =&gt;
        <a href="../typechecker/Typers.scala.html#42641" title="(pos: scala.tools.nsc.util.Position)(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">typedPos</a>(<a href="#49072" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29361" title="=&gt; scala.tools.nsc.util.Position">pos</a>) { <a href="../Global.scala.html#39031" title="object Erasure.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#42700" title="(meth: Erasure.this.global.gen.global.Name,args: List[Erasure.this.global.gen.global.Tree])Erasure.this.global.gen.global.Tree">mkRuntimeCall</a>(<a href="../symtab/StdNames.scala.html#26531" title="object Erasure.this.global.nme">nme</a>.<a href="../symtab/StdNames.scala.html#29842" title="=&gt; Erasure.this.global.Name">boxArray</a>, <span title="(xs: Erasure.this.global.Tree*)List[Erasure.this.global.Tree]">List</span>(<a href="#49072" title="Erasure.this.global.Tree">tree</a>)) }
    }

    /** Unbox &lt;code&gt;tree&lt;/code&gt; of boxed type to expected type &lt;code&gt;pt&lt;/code&gt;.
     *
     *  @param tree the given tree
     *  @param pt   the expected type.
     *  @return     the unboxed tree
     */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tree: Erasure.this.global.Tree,pt: Erasure.this.global.Type)Erasure.this.global.Tree" id="48344">unbox</a>(<a title="Erasure.this.global.Tree" id="49284">tree</a>: <a href="../ast/Trees.scala.html#26593" title="Erasure.this.global.Tree">Tree</a>, <a title="Erasure.this.global.Type" id="49285">pt</a>: <a href="../symtab/Types.scala.html#26205" title="Erasure.this.global.Type">Type</a>): <a href="../ast/Trees.scala.html#26593" title="Erasure.this.global.Tree">Tree</a> = <a href="#49284" title="Erasure.this.global.Tree">tree</a> <span title="Erasure.this.global.Tree" class="keyword">match</span> {
      <span title="Erasure.this.global.LabelDef" class="keyword">case</span> LabelDef(<a title="Erasure.this.global.Name" id="49292">name</a>, <a title="List[Erasure.this.global.Ident]" id="49293">params</a>, <a title="Erasure.this.global.Tree" id="49294">rhs</a>) =&gt;
        <span class="keyword">val</span> <a title="Erasure.this.global.Tree" id="49297">rhs1</a> = <a href="#48344" title="(tree: Erasure.this.global.Tree,pt: Erasure.this.global.Type)Erasure.this.global.Tree">unbox</a>(<a href="#49294" title="Erasure.this.global.Tree">rhs</a>, <a href="#49285" title="Erasure.this.global.Type">pt</a>)
        <a href="../ast/Trees.scala.html#26584" title="=&gt; Erasure.this.global.LazyTreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#48595" title="(tree: Erasure.this.global.Tree,name: Erasure.this.global.Name,params: List[Erasure.this.global.Ident],rhs: Erasure.this.global.Tree)Erasure.this.global.LabelDef">LabelDef</a><a href="../ast/Trees.scala.html#29366" title="(tp: Erasure.this.global.Type)Erasure.this.global.LabelDef">(</a><a href="#49284" title="Erasure.this.global.Tree">tree</a>, <a href="#49292" title="Erasure.this.global.Name">name</a>, <a href="#49293" title="List[Erasure.this.global.Ident]">params</a>, <a href="#49297" title="Erasure.this.global.Tree">rhs1</a>) setType <a href="#49297" title="Erasure.this.global.Tree">rhs1</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; Erasure.this.global.Type">tpe</a>
      <span title="Erasure.this.global.Tree" class="keyword">case</span> _ =&gt;
        <a href="../typechecker/Typers.scala.html#42641" title="(pos: scala.tools.nsc.util.Position)(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">typedPos</a>(<a href="#49284" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29361" title="=&gt; scala.tools.nsc.util.Position">pos</a>)(<a href="#49285" title="Erasure.this.global.Type">pt</a>.<a href="../symtab/Types.scala.html#30180" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a> <span title="Erasure.this.global.Tree" class="keyword">match</span> {
          <span title="Erasure.this.global.Tree" class="keyword">case</span> <a href="../symtab/Definitions.scala.html#28277" title="=&gt; Erasure.this.global.Symbol">UnitClass</a>  =&gt;
            <span title="Erasure.this.global.Tree" class="keyword">if</span> (<a href="../ast/TreeInfo.scala.html#48908" title="(tree: Erasure.this.global.treeInfo.trees.Tree)Boolean">treeInfo</a> isPureExpr <a href="#49284" title="Erasure.this.global.Tree">tree</a>) <a href="../ast/TreeDSL.scala.html#42499" title="=&gt; Erasure.this.global.Literal">UNIT</a>
            <span class="keyword">else</span> <a href="../ast/TreeDSL.scala.html#42526" title="(xs: Erasure.this.global.Tree*)Erasure.this.global.Block">BLOCK</a>(<a href="#49284" title="Erasure.this.global.Tree">tree</a>, <a href="../ast/TreeDSL.scala.html#42499" title="=&gt; Erasure.this.global.Literal">UNIT</a>)
          <span title="Erasure.this.global.gen.global.Tree" class="keyword">case</span> <a href="../symtab/Definitions.scala.html#28393" title="=&gt; Erasure.this.global.Symbol">ArrayClass</a> =&gt;
            <span class="keyword">val</span> <a title="Erasure.this.global.Tree" id="49595">tree1</a> = <a href="#48348" title="(tree: Erasure.this.global.Tree,pt: Erasure.this.global.Type)Erasure.this.global.Tree">adaptToType</a>(<a href="#49284" title="Erasure.this.global.Tree">tree</a>, <a href="../symtab/Definitions.scala.html#28543" title="=&gt; Erasure.this.global.Symbol">BoxedArrayClass</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; Erasure.this.global.Type">tpe</a>)
            <a href="../Global.scala.html#39031" title="object Erasure.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#42700" title="(meth: Erasure.this.global.gen.global.Name,args: List[Erasure.this.global.gen.global.Tree])Erasure.this.global.gen.global.Tree">mkRuntimeCall</a>(<a href="../symtab/StdNames.scala.html#26531" title="object Erasure.this.global.nme">nme</a>.<a href="../symtab/StdNames.scala.html#29830" title="=&gt; Erasure.this.global.Name">arrayValue</a>, <span title="(xs: Erasure.this.global.Tree*)List[Erasure.this.global.Tree]">List</span>(<a href="#49595" title="Erasure.this.global.Tree">tree1</a>, <a href="../ast/Trees.scala.html#26740" title="(value: Any)Erasure.this.global.Literal">Literal</a>(<a href="#49285" title="Erasure.this.global.Type">pt</a>.<a href="../symtab/Types.scala.html#30192" title="=&gt; List[Erasure.this.global.Type]">typeArgs</a>.<span title="=&gt; Erasure.this.global.Type">head</span>)))
          <span title="Erasure.this.global.Apply" class="keyword">case</span> _          =&gt;
            <a href="../ast/Trees.scala.html#29366" title="(tp: Erasure.this.global.Type)Erasure.this.global.Apply">(</a><a href="../ast/TreeDSL.scala.html#42533" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.gen.global.Tree">REF</a><a href="../ast/TreeDSL.scala.html#45081" title="(params: Erasure.this.global.Tree*)Erasure.this.global.Apply">(</a><a href="../symtab/Definitions.scala.html#28591" title="(key: Erasure.this.global.Symbol)Erasure.this.global.Symbol">unboxMethod</a>(<a href="#49285" title="Erasure.this.global.Type">pt</a>.<a href="../symtab/Types.scala.html#30180" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a>)) APPLY <a href="#49284" title="Erasure.this.global.Tree">tree</a>) setType <a href="#49285" title="Erasure.this.global.Type">pt</a>
        })
    }

    /** &lt;p&gt;
     *    Generate a cast operation from &lt;code&gt;tree.tpe&lt;/code&gt; to &lt;code&gt;pt&lt;/code&gt;.
     *    The following cases need to be treated specially:
     *  &lt;/p&gt;
     *  &lt;table&gt;
     *    &lt;tr&gt;
     *      &lt;td&gt;&lt;code&gt;Object -&gt; Array&lt;/code&gt;&lt;/td&gt;
     *      &lt;td&gt;(might be a boxedarray)&lt;/td&gt;
     *    &lt;/tr&gt;
     *    &lt;tr&gt;
     *      &lt;td&gt;&lt;code&gt;Object -&gt; Boxed*Array&lt;/code&gt;&lt;/td&gt;
     *      &lt;td&gt;(might be an array, which nees to be boxed)&lt;/td&gt;
     *    &lt;/tr&gt;
     *    &lt;tr&gt;
     *      &lt;td&gt;&lt;code&gt;Object -&gt; Seq, Iterable&lt;/code&gt;&lt;/td&gt;
     *      &lt;td&gt;(might be an array, which needs to be boxed)&lt;/td&gt;
     *    &lt;/tr&gt;
     *  &lt;/table&gt;
     */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tree: Erasure.this.global.Tree,pt: Erasure.this.global.Type)Erasure.this.global.Tree" id="48345">cast</a>(<a title="Erasure.this.global.Tree" id="49693">tree</a>: <a href="../ast/Trees.scala.html#26593" title="Erasure.this.global.Tree">Tree</a>, <a title="Erasure.this.global.Type" id="49694">pt</a>: <a href="../symtab/Types.scala.html#26205" title="Erasure.this.global.Type">Type</a>): <a href="../ast/Trees.scala.html#26593" title="Erasure.this.global.Tree">Tree</a> = {
      <span title="(assertion: Boolean)Unit">assert</span>(<a href="#49694" title="(x$1: AnyRef)Boolean">pt</a> eq <a href="#49694" title="Erasure.this.global.Type">pt</a>.<a href="../symtab/Types.scala.html#30206" title="=&gt; Erasure.this.global.Type">normalize</a>)
      <span class="keyword">def</span> <a title="(t: Erasure.this.global.Tree)Erasure.this.global.Tree" id="49696">asPt</a>(<a title="Erasure.this.global.Tree" id="49704">t</a>: <a href="../ast/Trees.scala.html#26593" title="Erasure.this.global.Tree">Tree</a>) = <a href="../ast/TreeDSL.scala.html#45090" title="(tpe: Erasure.this.global.Type)Erasure.this.global.Tree">t</a> AS_ATTR <a href="#49694" title="Erasure.this.global.Type">pt</a>
      <span class="keyword">def</span> <a title="(within: (() =&gt; Erasure.this.global.Tree) =&gt; Erasure.this.global.Tree)Erasure.this.global.Tree" id="49697">once</a>(<a title="(() =&gt; Erasure.this.global.Tree) =&gt; Erasure.this.global.Tree" id="49734">within</a>: (() =&gt; Tree) =&gt; Tree) =
        <a href="../typechecker/Typers.scala.html#42641" title="(pos: scala.tools.nsc.util.Position)(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">typedPos</a>(<a href="#49693" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29361" title="=&gt; scala.tools.nsc.util.Position">pos</a>)(<a href="../Global.scala.html#39031" title="object Erasure.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#42706" title="(expr: Erasure.this.global.gen.global.Tree,owner: Erasure.this.global.gen.global.Symbol,unit: Erasure.this.global.gen.global.CompilationUnit)(within: (() =&gt; Erasure.this.global.gen.global.Tree) =&gt; Erasure.this.global.gen.global.Tree)Erasure.this.global.gen.global.Tree">evalOnce</a>(<a href="#49693" title="Erasure.this.global.Tree">tree</a>, <a href="#48352" title="Erasure.this.Context">context</a>.<a href="../typechecker/Contexts.scala.html#48362" title="=&gt; Erasure.this.global.Symbol">owner</a>, <a href="#48352" title="Erasure.this.Context">context</a>.<a href="../typechecker/Contexts.scala.html#48356" title="=&gt; Erasure.this.global.CompilationUnit">unit</a>)(<a href="#49734" title="(g: (Erasure.this.global.Tree) =&gt; Erasure.this.global.Tree)(() =&gt; Erasure.this.global.Tree) =&gt; Erasure.this.global.Tree" id="25537">within</a> andThen <a href="#49696" title="(t: Erasure.this.global.Tree)Erasure.this.global.Tree">asPt</a>))

      <span title="Erasure.this.global.Tree" class="keyword">if</span> (<a href="#49693" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; Erasure.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30180" title="(x$1: AnyRef)Boolean">typeSymbol</a> == <a href="../symtab/Definitions.scala.html#28267" title="=&gt; Erasure.this.global.Symbol">ObjectClass</a>) {
        <span title="Erasure.this.global.Tree" class="keyword">if</span> (<a href="#49694" title="Erasure.this.global.Type">pt</a>.<a href="../symtab/Types.scala.html#30180" title="(x$1: AnyRef)Boolean">typeSymbol</a> == <a href="../symtab/Definitions.scala.html#28393" title="=&gt; Erasure.this.global.Symbol">ArrayClass</a>) <a href="#49697" title="(within: (() =&gt; Erasure.this.global.Tree) =&gt; Erasure.this.global.Tree)Erasure.this.global.Tree">once</a> (<a title="() =&gt; Erasure.this.global.Tree" id="49779">x</a> =&gt;
          (<a href="../ast/TreeDSL.scala.html#42524" title="(tree: Erasure.this.global.Tree)Erasure.this.CODE.IfStart">IF</a> <a href="../ast/TreeDSL.scala.html#49788" title="(x: Erasure.this.global.Tree)Erasure.this.CODE.IfStart">(</a><a href="#49779" title="()Erasure.this.global.Tree">x</a><a href="../ast/TreeDSL.scala.html#45092" title="(tpe: Erasure.this.global.Type)Erasure.this.global.gen.global.Tree">(</a>) IS_OBJ <a href="../symtab/Definitions.scala.html#28543" title="=&gt; Erasure.this.global.Symbol">BoxedArrayClass</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; Erasure.this.global.Type">tpe</a>)
            <a href="../ast/TreeDSL.scala.html#49789" title="(elsep: Erasure.this.global.Tree)Erasure.this.global.If">THEN</a> (<a href="#48344" title="(tree: Erasure.this.global.Tree,pt: Erasure.this.global.Type)Erasure.this.global.Tree">unbox</a>(<a href="#49779" title="()Erasure.this.global.Tree">x</a><a href="../ast/TreeDSL.scala.html#45090" title="(tpe: Erasure.this.global.Type)Erasure.this.global.Tree">(</a>) AS_ATTR <a href="../symtab/Definitions.scala.html#28543" title="=&gt; Erasure.this.global.Symbol">BoxedArrayClass</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; Erasure.this.global.Type">tpe</a>, <a href="#49694" title="Erasure.this.global.Type">pt</a>))
            ELSE (<a href="#49779" title="()Erasure.this.global.Tree">x</a>())
          )
        )
        <span class="keyword">else</span> <span title="Erasure.this.global.Tree" class="keyword">if</span> (<a href="#49694" title="Erasure.this.global.Type">pt</a>.<a href="../symtab/Symbols.scala.html#27023" title="(that: Erasure.this.global.Symbol)Boolean">typeSymbol</a> isNonBottomSubClass <a href="../symtab/Definitions.scala.html#28543" title="=&gt; Erasure.this.global.Symbol">BoxedArrayClass</a>) 
          <a href="#49697" title="(within: (() =&gt; Erasure.this.global.Tree) =&gt; Erasure.this.global.Tree)Erasure.this.global.Tree">once</a> (<a title="() =&gt; Erasure.this.global.Tree" id="49926">x</a> =&gt;
            (<a href="../ast/TreeDSL.scala.html#42524" title="(tree: Erasure.this.global.Tree)Erasure.this.CODE.IfStart">IF</a> <a href="../ast/TreeDSL.scala.html#49788" title="(x: Erasure.this.global.Tree)Erasure.this.CODE.IfStart">(</a><a href="#49926" title="()Erasure.this.global.Tree">x</a><a href="../ast/TreeDSL.scala.html#45092" title="(tpe: Erasure.this.global.Type)Erasure.this.global.gen.global.Tree">(</a>) IS_OBJ <a href="../symtab/Definitions.scala.html#28543" title="=&gt; Erasure.this.global.Symbol">BoxedArrayClass</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; Erasure.this.global.Type">tpe</a>) <a href="../ast/TreeDSL.scala.html#49789" title="(elsep: Erasure.this.global.Tree)Erasure.this.global.If">THEN</a> (<a href="#49926" title="()Erasure.this.global.Tree">x</a>()) ELSE <a href="#48343" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">boxArray</a>(<a href="#49926" title="()Erasure.this.global.Tree">x</a>())))
        <span class="keyword">else</span> <span title="Erasure.this.global.Tree" class="keyword">if</span> (<a href="#42462" title="(sym: Erasure.this.global.Symbol)Boolean">isSeqClass</a>(<a href="#49694" title="Erasure.this.global.Type">pt</a>.<a href="../symtab/Types.scala.html#30180" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a>)) 
          <a href="#49697" title="(within: (() =&gt; Erasure.this.global.Tree) =&gt; Erasure.this.global.Tree)Erasure.this.global.Tree">once</a> (<a title="() =&gt; Erasure.this.global.Tree" id="49967">x</a> =&gt;
            (<a href="../ast/TreeDSL.scala.html#42524" title="(tree: Erasure.this.global.Tree)Erasure.this.CODE.IfStart">IF</a> <a href="../ast/TreeDSL.scala.html#49788" title="(x: Erasure.this.global.Tree)Erasure.this.CODE.IfStart">(</a><a href="#49967" title="()Erasure.this.global.Tree">x</a><a href="../ast/TreeDSL.scala.html#45092" title="(tpe: Erasure.this.global.Type)Erasure.this.global.gen.global.Tree">(</a>) IS_OBJ <a href="#49694" title="Erasure.this.global.Type">pt</a>) <a href="../ast/TreeDSL.scala.html#49789" title="(elsep: Erasure.this.global.Tree)Erasure.this.global.If">THEN</a> (<a href="#49967" title="()Erasure.this.global.Tree">x</a>()) ELSE (<a href="#48343" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">boxArray</a>(<a href="#49967" title="()Erasure.this.global.Tree">x</a>()))))
        <span class="keyword">else</span> <a href="#49696" title="(t: Erasure.this.global.Tree)Erasure.this.global.Tree">asPt</a>(<a href="#49693" title="Erasure.this.global.Tree">tree</a>)
      } <span class="keyword">else</span> <a href="#49696" title="(t: Erasure.this.global.Tree)Erasure.this.global.Tree">asPt</a>(<a href="#49693" title="Erasure.this.global.Tree">tree</a>)
    }
    
    /** Is symbol a member of unboxed arrays (which will be expanded directly
     *  later)?
     *
     *  @param sym ..
     *  @return    &lt;code&gt;true&lt;/code&gt; if .. 
     */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: Erasure.this.global.Symbol)Boolean" id="48346">isUnboxedArrayMember</a>(<a title="Erasure.this.global.Symbol" id="50009">sym</a>: <a href="../symtab/Symbols.scala.html#26127" title="Erasure.this.global.Symbol">Symbol</a>) = <a href="#50009" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26988" title="=&gt; Erasure.this.global.Name">name</a> <span title="Boolean" class="keyword">match</span> {
      <span title="Boolean(true)" class="keyword">case</span> <a href="../symtab/StdNames.scala.html#26531" title="object Erasure.this.global.nme">nme</a>.<a href="../symtab/StdNames.scala.html#29828" title="=&gt; Erasure.this.global.Name">apply</a> | <a href="../symtab/StdNames.scala.html#26531" title="object Erasure.this.global.nme">nme</a>.<a href="../symtab/StdNames.scala.html#29918" title="=&gt; Erasure.this.global.Name">length</a> | <a href="../symtab/StdNames.scala.html#26531" title="object Erasure.this.global.nme">nme</a>.<a href="../symtab/StdNames.scala.html#29984" title="=&gt; Erasure.this.global.Name">update</a>  =&gt; <span title="Boolean(true)" class="keyword">true</span>
      <span title="Boolean" class="keyword">case</span> _                                    =&gt; <a href="#50009" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26983" title="(x$1: AnyRef)Boolean">owner</a> == <a href="../symtab/Definitions.scala.html#28267" title="=&gt; Erasure.this.global.Symbol">ObjectClass</a>
    }

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: Erasure.this.global.Symbol)Boolean" id="48347">isUnboxedValueMember</a>(<a title="Erasure.this.global.Symbol" id="50024">sym</a>: <a href="../symtab/Symbols.scala.html#26127" title="Erasure.this.global.Symbol">Symbol</a>) =
      <a href="#50024" title="(x$1: AnyRef)Boolean">sym</a> <span title="(x$1: Boolean)Boolean">!=</span> <a href="../symtab/Symbols.scala.html#26134" title="object Erasure.this.global.NoSymbol">NoSymbol</a> &amp;&amp; <a href="../symtab/Definitions.scala.html#28606" title="(sym: Erasure.this.global.Symbol)Boolean">isValueClass</a>(<a href="#50024" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26983" title="=&gt; Erasure.this.global.Symbol">owner</a>)

    /** Adapt &lt;code&gt;tree&lt;/code&gt; to expected type &lt;code&gt;pt&lt;/code&gt;.
     *
     *  @param tree the given tree
     *  @param pt   the expected type.
     *  @return     the adapted tree
     */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tree: Erasure.this.global.Tree,pt: Erasure.this.global.Type)Erasure.this.global.Tree" id="48348">adaptToType</a>(<a title="Erasure.this.global.Tree" id="49596">tree</a>: <a href="../ast/Trees.scala.html#26593" title="Erasure.this.global.Tree">Tree</a>, <a title="Erasure.this.global.Type" id="49597">pt</a>: <a href="../symtab/Types.scala.html#26205" title="Erasure.this.global.Type">Type</a>): <a href="../ast/Trees.scala.html#26593" title="Erasure.this.global.Tree">Tree</a> = {
      <span title="Unit" class="keyword">if</span> (<a href="../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../Settings.scala.html#37759" title="(x$1: Boolean)Boolean">value</a> &amp;&amp; <a href="#49597" title="(x$1: AnyRef)Boolean">pt</a> != <a href="../symtab/Types.scala.html#26219" title="object Erasure.this.global.WildcardType">WildcardType</a>)
        <a href="../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;adapting &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#49596" title="Erasure.this.global.Tree">tree</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;:&quot;)" class="string">&quot;:&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#49596" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; Erasure.this.global.Type">tpe</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; : &quot;)" class="string">&quot; : &quot;</span> <span title="(x$1: Any)java.lang.String">+</span>  <a href="#49596" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; Erasure.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30189" title="=&gt; List[Erasure.this.global.Type]">parents</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; to &quot;)" class="string">&quot; to &quot;</span> + <a href="#49597" title="Erasure.this.global.Type">pt</a>)//debug
      <span title="Erasure.this.global.Tree" class="keyword">if</span> (<a href="#49596" title="Erasure.this.global.Tree">tree</a>.<a href="../symtab/Types.scala.html#30235" title="(that: Erasure.this.global.Type)Boolean">tpe</a> &lt;:&lt; <a href="#49597" title="Erasure.this.global.Type">pt</a>)
        <a href="#49596" title="Erasure.this.global.Tree">tree</a>
      <span class="keyword">else</span> <span title="Erasure.this.global.Tree" class="keyword">if</span> (<a href="../symtab/Definitions.scala.html#28609" title="(sym: Erasure.this.global.Symbol)Boolean">isUnboxedClass</a><span title="(x$1: Boolean)Boolean">(</span><a href="#49596" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; Erasure.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30180" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a>) &amp;&amp; <span title="=&gt; Boolean">!</span><a href="../symtab/Definitions.scala.html#28609" title="(sym: Erasure.this.global.Symbol)Boolean">isUnboxedClass</a>(<a href="#49597" title="Erasure.this.global.Type">pt</a>.<a href="../symtab/Types.scala.html#30180" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a>))
        <a href="#48348" title="(tree: Erasure.this.global.Tree,pt: Erasure.this.global.Type)Erasure.this.global.Tree">adaptToType</a>(<a href="#48342" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">box</a>(<a href="#49596" title="Erasure.this.global.Tree">tree</a>), <a href="#49597" title="Erasure.this.global.Type">pt</a>)
      <span class="keyword">else</span> <span title="Erasure.this.global.Tree" class="keyword">if</span> (<a href="#49596" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; Erasure.this.global.Type">tpe</a>.<span title="[T0]Boolean">isInstanceOf</span><span title="(x$1: Boolean)Boolean">[</span><a href="../symtab/Types.scala.html#26257" title="Erasure.this.global.MethodType">MethodType</a>] &amp;&amp; <a href="#49596" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; Erasure.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30200" title="=&gt; List[Erasure.this.global.Type]">paramTypes</a>.<span title="=&gt; Boolean">isEmpty</span>) {
        <span title="Unit" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="#49596" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; Erasure.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#26952" title="=&gt; Boolean">isStable</a>) <span title="(assertion: Boolean,message: =&gt; Any)Unit">assert</span>(<span title="Boolean(false)" class="keyword">false</span>, <span title="(x$1: Any)java.lang.String" class="string">&quot;adapt &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#49596" title="Erasure.this.global.Tree">tree</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot;:&quot;)" class="string">&quot;:&quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#49596" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; Erasure.this.global.Type">tpe</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot; to &quot;)" class="string">&quot; to &quot;</span>+<a href="#49597" title="Erasure.this.global.Type">pt</a>)
        <a href="#48348" title="(tree: Erasure.this.global.Tree,pt: Erasure.this.global.Type)Erasure.this.global.Tree">adaptToType</a>(<a href="../ast/Trees.scala.html#49125" title="(fun: Erasure.this.global.Tree,args: List[Erasure.this.global.Tree])Erasure.this.global.Apply">Apply</a><a href="../ast/Trees.scala.html#29365" title="(pos: scala.tools.nsc.util.Position)Erasure.this.global.Apply">(</a><a href="#49596" title="Erasure.this.global.Tree">tree</a>, List<span title="object Nil">(</span>)) <a href="../ast/Trees.scala.html#29366" title="(tp: Erasure.this.global.Type)Erasure.this.global.Apply">setPos</a> <a href="#49596" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29361" title="=&gt; scala.tools.nsc.util.Position">pos</a> setType <a href="#49596" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; Erasure.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30193" title="=&gt; Erasure.this.global.Type">resultType</a>, <a href="#49597" title="Erasure.this.global.Type">pt</a>)
      } <span class="keyword">else</span> <span title="Erasure.this.global.Tree" class="keyword">if</span> (<a href="../symtab/Types.scala.html#30235" title="(that: Erasure.this.global.Type)Boolean">pt</a> &lt;:&lt; <a href="#49596" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; Erasure.this.global.Type">tpe</a>) 
        <a href="#48345" title="(tree: Erasure.this.global.Tree,pt: Erasure.this.global.Type)Erasure.this.global.Tree">cast</a>(<a href="#49596" title="Erasure.this.global.Tree">tree</a>, <a href="#49597" title="Erasure.this.global.Type">pt</a>)
      <span class="keyword">else</span> <span title="Erasure.this.global.Tree" class="keyword">if</span> (<a href="../symtab/Definitions.scala.html#28609" title="(sym: Erasure.this.global.Symbol)Boolean">isUnboxedClass</a><span title="(x$1: Boolean)Boolean">(</span><a href="#49597" title="Erasure.this.global.Type">pt</a>.<a href="../symtab/Types.scala.html#30180" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a>) &amp;&amp; <span title="=&gt; Boolean">!</span><a href="../symtab/Definitions.scala.html#28609" title="(sym: Erasure.this.global.Symbol)Boolean">isUnboxedClass</a>(<a href="#49596" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; Erasure.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30180" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a>))
        <a href="#48348" title="(tree: Erasure.this.global.Tree,pt: Erasure.this.global.Type)Erasure.this.global.Tree">adaptToType</a>(<a href="#48344" title="(tree: Erasure.this.global.Tree,pt: Erasure.this.global.Type)Erasure.this.global.Tree">unbox</a>(<a href="#49596" title="Erasure.this.global.Tree">tree</a>, <a href="#49597" title="Erasure.this.global.Type">pt</a>), <a href="#49597" title="Erasure.this.global.Type">pt</a>)
      <span class="keyword">else</span> 
        <a href="#48345" title="(tree: Erasure.this.global.Tree,pt: Erasure.this.global.Type)Erasure.this.global.Tree">cast</a>(<a href="#49596" title="Erasure.this.global.Tree">tree</a>, <a href="#49597" title="Erasure.this.global.Type">pt</a>)
    }

    /** &lt;p&gt;
     *    Replace member references as follows:
     *  &lt;/p&gt;
     *  &lt;ul&gt;
     *    &lt;li&gt;
     *      &lt;code&gt;x == y&lt;/code&gt; for &lt;code&gt;==&lt;/code&gt; in class &lt;code&gt;Any&lt;/code&gt;
     *      becomes &lt;code&gt;x equals y&lt;/code&gt; with &lt;code&gt;equals&lt;/code&gt; in class
     *      &lt;code&gt;Object&lt;/code&gt;.
     *    &lt;/li&gt;
     *    &lt;li&gt;
     *      &lt;code&gt;x != y&lt;/code&gt; for &lt;code&gt;!=&lt;/code&gt; in class &lt;code&gt;Any&lt;/code&gt;
     *      becomes &lt;code&gt;!(x equals y)&lt;/code&gt; with &lt;code&gt;equals&lt;/code&gt; in
     *      class &lt;code&gt;Object&lt;/code&gt;.
     *    &lt;/li&gt;
     *    &lt;li&gt;
     *      &lt;code&gt;new BoxedArray.&amp;lt;init&amp;gt;(len)&lt;/code&gt; becomes
     *      &lt;code&gt;new BoxedAnyArray.&amp;lt;init&amp;gt;(len): BoxedArray&lt;/code&gt;
     *      (the widening typing is necessary so that subsequent member
     *      symbols stay the same)
     *    &lt;/li&gt;
     *    &lt;li&gt;
     *      &lt;code&gt;x.asInstanceOf[T]&lt;/code&gt; and &lt;code&gt;x.asInstanceOf$erased[T]&lt;/code&gt;
     *      become &lt;code&gt;x.$asInstanceOf[T]&lt;/code&gt;
     *    &lt;/li&gt;
     *    &lt;li&gt;
     *      &lt;code&gt;x.isInstanceOf[T]&lt;/code&gt; and &lt;code&gt;x.isInstanceOf$erased[T]&lt;/code&gt;
     *      become &lt;code&gt;x.$isInstanceOf[T]&lt;/code&gt;
     *    &lt;/li&gt;
     *    &lt;li&gt;
     *      &lt;code&gt;x.m&lt;/code&gt; where &lt;code&gt;m&lt;/code&gt; is some other member of
     *      &lt;code&gt;Any&lt;/code&gt; becomes &lt;code&gt;x.m&lt;/code&gt; where m is a member
     *      of class &lt;code&gt;Object&lt;/code&gt;
     *    &lt;/li&gt;
     *    &lt;li&gt;
     *      &lt;code&gt;x.m&lt;/code&gt; where &lt;code&gt;x&lt;/code&gt; has unboxed value type
     *      &lt;code&gt;T&lt;/code&gt; and &lt;code&gt;m&lt;/code&gt; is not a directly translated
     *      member of &lt;code&gt;T&lt;/code&gt; becomes &lt;code&gt;T.box(x).m&lt;/code&gt;
     *    &lt;/li&gt;
     *    &lt;li&gt;
     *      &lt;code&gt;x.m&lt;/code&gt; where &lt;code&gt;x&lt;/code&gt; has type &lt;code&gt;Array[T]&lt;/code&gt;
     *      and &lt;code&gt;m&lt;/code&gt; is not a directly translated member of
     *      &lt;code&gt;Array&lt;/code&gt; becomes &lt;code&gt;new BoxedTArray.&lt;init&gt;(x).m&lt;/code&gt;
     *    &lt;/li&gt;
     *    &lt;li&gt;
     *      &lt;code&gt;x.m&lt;/code&gt; where &lt;code&gt;x&lt;/code&gt; is a reference type and
     *      &lt;code&gt;m&lt;/code&gt; is a directly translated member of value type
     *      &lt;code&gt;T&lt;/code&gt; becomes &lt;code&gt;x.TValue().m&lt;/code&gt;
     *    &lt;/li&gt;
     *    &lt;li&gt;
     *      All forms of &lt;code&gt;x.m&lt;/code&gt; where &lt;code&gt;x&lt;/code&gt; is a boxed type
     *      and &lt;code&gt;m&lt;/code&gt; is a member of an unboxed class become
     *      &lt;code&gt;x.m&lt;/code&gt; where &lt;code&gt;m&lt;/code&gt; is the corresponding member
     *      of the boxed class.
     *    &lt;/li&gt;
     *  &lt;/ul&gt;
     */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree" id="48349">adaptMember</a>(<a title="Erasure.this.global.Tree" id="50247">tree</a>: <a href="../ast/Trees.scala.html#26593" title="Erasure.this.global.Tree">Tree</a>): <a href="../ast/Trees.scala.html#26593" title="Erasure.this.global.Tree">Tree</a> = {
      //Console.println(&quot;adaptMember: &quot; + tree);
      <a href="#50247" title="Erasure.this.global.Tree">tree</a> <span title="Erasure.this.global.Tree" class="keyword">match</span> {
        <span title="Erasure.this.global.Tree" class="keyword">case</span> Apply(Select(New(<a title="Erasure.this.global.Tree" id="50335">tpt</a>), <a title="Erasure.this.global.Name" id="50338">name</a>), <a title="List[Erasure.this.global.Tree]" id="50341">args</a>) <span class="keyword">if</span> (<a href="#50335" title="Erasure.this.global.Tree">tpt</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; Erasure.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30180" title="(x$1: AnyRef)Boolean">typeSymbol</a> == <a href="../symtab/Definitions.scala.html#28543" title="=&gt; Erasure.this.global.Symbol">BoxedArrayClass</a>) =&gt;
          <span title="(assertion: Boolean)Unit">assert</span>(<a href="#50338" title="(x$1: AnyRef)Boolean">name</a> == <a href="../symtab/StdNames.scala.html#26531" title="object Erasure.this.global.nme">nme</a>.<a href="../symtab/StdNames.scala.html#29719" title="=&gt; Erasure.this.global.Name">CONSTRUCTOR</a>);
          <span title="(assertion: Boolean)Unit">assert</span>(<a href="#50341" title="List[Erasure.this.global.Tree]">args</a>.<a title="(x$1: Int)Boolean" id="2956">length</a> &lt; <span title="Int(2)" class="int">2</span>)
          <a href="../typechecker/Typers.scala.html#42641" title="(pos: scala.tools.nsc.util.Position)(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">typedPos</a>(<a href="#50247" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29361" title="=&gt; scala.tools.nsc.util.Position">pos</a>) {
            <a href="../ast/Trees.scala.html#50375" title="(expr: Erasure.this.global.Tree,tpt: Erasure.this.global.Tree)Erasure.this.global.Typed">Typed</a>(<a href="../ast/Trees.scala.html#49125" title="(fun: Erasure.this.global.Tree,args: List[Erasure.this.global.Tree])Erasure.this.global.Apply">Apply</a>(<a href="../ast/TreeDSL.scala.html#42520" title="(sym: Erasure.this.global.Symbol,args: Erasure.this.global.Tree*)Erasure.this.global.Tree">NEW</a><a href="../ast/TreeDSL.scala.html#45084" title="(member: Erasure.this.global.Name)Erasure.this.CODE.SelectStart">(</a><a href="../symtab/Definitions.scala.html#28545" title="=&gt; Erasure.this.global.Symbol">BoxedAnyArrayClass</a>) <a href="../ast/TreeDSL.scala.html#42545" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeFromSelectStart : (ss: Erasure.this.CODE.SelectStart)Erasure.this.global.Select">DOT</a> <a href="#50338" title="Erasure.this.global.Name">name</a>, <a href="#50341" title="List[Erasure.this.global.Tree]">args</a>), <a href="#50335" title="Erasure.this.global.Tree">tpt</a>)
          }
        <span title="Erasure.this.global.Tree" class="keyword">case</span> Apply(TypeApply(<a title="Erasure.this.global.Select" id="50749">sel</a> @ Select(<a title="Erasure.this.global.Tree" id="50754">qual</a>, <a title="Erasure.this.global.Name" id="50755">name</a>), <a href="#50759" title="(x: List[Erasure.this.global.Tree])Some[List[Erasure.this.global.Tree]]">List</a>(<a title="Erasure.this.global.Tree" id="50768">targ</a>)), <a href="#50773" title="(x: List[Erasure.this.global.Tree])Some[List[Erasure.this.global.Tree]]">List</a>()) <span class="keyword">if</span> <a href="#50247" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="(x$1: AnyRef)Boolean">symbol</a> == <a href="../symtab/Definitions.scala.html#28504" title="=&gt; Erasure.this.global.Symbol">Any_asInstanceOf</a> =&gt;
          <span class="keyword">val</span> <a title="Erasure.this.global.Tree" id="50792">qual1</a> = <a href="../typechecker/Typers.scala.html#42644" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">typedQualifier</a>(<a href="#50754" title="Erasure.this.global.Tree">qual</a>)
          <span class="keyword">val</span> <a title="Erasure.this.global.Symbol" id="50793">qualClass</a> = <a href="#50792" title="Erasure.this.global.Tree">qual1</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; Erasure.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30180" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a>
          <span class="keyword">val</span> <a title="Erasure.this.global.Symbol" id="50794">targClass</a> = <a href="#50768" title="Erasure.this.global.Tree">targ</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; Erasure.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30180" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a>
/*
          if (isNumericValueClass(qualClass) &amp;&amp; isNumericValueClass(targClass))
            // convert numeric type casts
            atPos(tree.pos)(Apply(Select(qual1, &quot;to&quot; + targClass.name), List()))
          else 
*/
          <span title="Erasure.this.global.Tree" class="keyword">if</span> (<a href="../symtab/Definitions.scala.html#28608" title="(sym: Erasure.this.global.Symbol)Boolean">isValueType</a><span title="(x$1: Boolean)Boolean">(</span><a href="#50794" title="Erasure.this.global.Symbol">targClass</a>) ||
                   (<a href="#50794" title="(x$1: AnyRef)Boolean">targClass</a> <span title="(x$1: Boolean)Boolean">==</span> <a href="../symtab/Definitions.scala.html#28393" title="=&gt; Erasure.this.global.Symbol">ArrayClass</a> &amp;&amp; (<a href="../symtab/Symbols.scala.html#27023" title="(that: Erasure.this.global.Symbol)Boolean">qualClass</a> isNonBottomSubClass <a href="../symtab/Definitions.scala.html#28543" title="=&gt; Erasure.this.global.Symbol">BoxedArrayClass</a>)))
            <a href="#48344" title="(tree: Erasure.this.global.Tree,pt: Erasure.this.global.Type)Erasure.this.global.Tree">unbox</a>(<a href="#50792" title="Erasure.this.global.Tree">qual1</a>, <a href="#50768" title="Erasure.this.global.Tree">targ</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; Erasure.this.global.Type">tpe</a>)
          <span class="keyword">else</span> <span title="Erasure.this.global.Tree" class="keyword">if</span> (<a href="#50794" title="(x$1: AnyRef)Boolean">targClass</a> <span title="(x$1: Boolean)Boolean">==</span> <a href="../symtab/Definitions.scala.html#28393" title="=&gt; Erasure.this.global.Symbol">ArrayClass</a> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> <a href="#50793" title="(x$1: AnyRef)Boolean">qualClass</a> == <a href="../symtab/Definitions.scala.html#28267" title="=&gt; Erasure.this.global.Symbol">ObjectClass</a> || <a href="#42462" title="(sym: Erasure.this.global.Symbol)Boolean">isSeqClass</a>(<a href="#50794" title="Erasure.this.global.Symbol">targClass</a>))
            <a href="#48345" title="(tree: Erasure.this.global.Tree,pt: Erasure.this.global.Type)Erasure.this.global.Tree">cast</a>(<a href="#50792" title="Erasure.this.global.Tree">qual1</a>, <a href="#50768" title="Erasure.this.global.Tree">targ</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; Erasure.this.global.Type">tpe</a>)
          <span class="keyword">else</span> 
            <a href="#50247" title="Erasure.this.global.Tree">tree</a>
        <span title="Erasure.this.global.Tree" class="keyword">case</span> Select(<a title="Erasure.this.global.Tree" id="50851">qual</a>, <a title="Erasure.this.global.Name" id="50852">name</a>) <span class="keyword">if</span> (<a href="#50852" title="(x$1: AnyRef)Boolean">name</a> != <a href="../symtab/StdNames.scala.html#26531" title="object Erasure.this.global.nme">nme</a>.<a href="../symtab/StdNames.scala.html#29719" title="=&gt; Erasure.this.global.Name">CONSTRUCTOR</a>) =&gt;
          <span title="Erasure.this.global.Tree" class="keyword">if</span> (<a href="#50247" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="(x$1: AnyRef)Boolean">symbol</a> == <a href="../symtab/Symbols.scala.html#26134" title="object Erasure.this.global.NoSymbol">NoSymbol</a>)
            <a href="#50247" title="Erasure.this.global.Tree">tree</a>
          <span class="keyword">else</span> <span title="Erasure.this.global.Tree" class="keyword">if</span> (<a href="#50247" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="(x$1: AnyRef)Boolean">symbol</a> == <a href="../symtab/Definitions.scala.html#28504" title="=&gt; Erasure.this.global.Symbol">Any_asInstanceOf</a>)
            <a href="#48349" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">adaptMember</a>(<a href="../ast/Trees.scala.html#26784" title="(pos: scala.tools.nsc.util.Position)(tree: Erasure.this.global.Select)Erasure.this.global.Select">atPos</a>(<a href="#50247" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29361" title="=&gt; scala.tools.nsc.util.Position">pos</a>)(<a href="../ast/Trees.scala.html#26731" title="(qualifier: Erasure.this.global.Tree,sym: Erasure.this.global.Symbol)Erasure.this.global.Select">Select</a>(<a href="#50851" title="Erasure.this.global.Tree">qual</a>, <a href="../symtab/Definitions.scala.html#28525" title="=&gt; Erasure.this.global.Symbol">Object_asInstanceOf</a>)))
          <span class="keyword">else</span> <span title="Erasure.this.global.Tree" class="keyword">if</span> (<a href="#50247" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="(x$1: AnyRef)Boolean">symbol</a> == <a href="../symtab/Definitions.scala.html#28501" title="=&gt; Erasure.this.global.Symbol">Any_isInstanceOf</a>)
            <a href="#48349" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">adaptMember</a>(<a href="../ast/Trees.scala.html#26784" title="(pos: scala.tools.nsc.util.Position)(tree: Erasure.this.global.Select)Erasure.this.global.Select">atPos</a>(<a href="#50247" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29361" title="=&gt; scala.tools.nsc.util.Position">pos</a>)(<a href="../ast/Trees.scala.html#26731" title="(qualifier: Erasure.this.global.Tree,sym: Erasure.this.global.Symbol)Erasure.this.global.Select">Select</a>(<a href="#50851" title="Erasure.this.global.Tree">qual</a>, <a href="../symtab/Definitions.scala.html#28522" title="=&gt; Erasure.this.global.Symbol">Object_isInstanceOf</a>)))
          <span class="keyword">else</span> <span title="Erasure.this.global.Tree" class="keyword">if</span> (<a href="#50247" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; Erasure.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#26983" title="(x$1: AnyRef)Boolean">owner</a> == <a href="../symtab/Definitions.scala.html#28261" title="=&gt; Erasure.this.global.Symbol">AnyClass</a>)
            <a href="#48349" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">adaptMember</a>(<a href="../ast/Trees.scala.html#26784" title="(pos: scala.tools.nsc.util.Position)(tree: Erasure.this.global.Select)Erasure.this.global.Select">atPos</a>(<a href="#50247" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29361" title="=&gt; scala.tools.nsc.util.Position">pos</a>)(<a href="../ast/Trees.scala.html#26731" title="(qualifier: Erasure.this.global.Tree,sym: Erasure.this.global.Symbol)Erasure.this.global.Select">Select</a>(<a href="#50851" title="Erasure.this.global.Tree">qual</a>, <a href="../symtab/Definitions.scala.html#28578" title="(owner: Erasure.this.global.Symbol,name: Erasure.this.global.Name)Erasure.this.global.Symbol">getMember</a>(<a href="../symtab/Definitions.scala.html#28267" title="=&gt; Erasure.this.global.Symbol">ObjectClass</a>, <a href="#50852" title="Erasure.this.global.Name">name</a>))))
          <span class="keyword">else</span> {
            <span class="keyword">var</span> <a title="Erasure.this.global.Tree" id="51013">qual1</a> = <a href="../typechecker/Typers.scala.html#42644" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">typedQualifier</a>(<a href="#50851" title="Erasure.this.global.Tree">qual</a>);
            <span title="Unit" class="keyword">if</span> (<span title="(x$1: Boolean)Boolean">(</span><a href="../symtab/Definitions.scala.html#28608" title="(sym: Erasure.this.global.Symbol)Boolean">isValueType</a><span title="(x$1: Boolean)Boolean">(</span><a href="#51013" title="Erasure.this.global.Tree">qual1</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; Erasure.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30180" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a>) &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#48347" title="(sym: Erasure.this.global.Symbol)Boolean">isUnboxedValueMember</a>(<a href="#50247" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; Erasure.this.global.Symbol">symbol</a>)) || 
                (<a href="#51013" title="Erasure.this.global.Tree">qual1</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; Erasure.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30180" title="(x$1: AnyRef)Boolean">typeSymbol</a> <span title="(x$1: Boolean)Boolean">==</span> <a href="../symtab/Definitions.scala.html#28393" title="=&gt; Erasure.this.global.Symbol">ArrayClass</a> &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#48346" title="(sym: Erasure.this.global.Symbol)Boolean">isUnboxedArrayMember</a>(<a href="#50247" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; Erasure.this.global.Symbol">symbol</a>)))
              <a href="#51013" title="Erasure.this.global.Tree">qual1</a> = <a href="#48342" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">box</a>(<a href="#51013" title="Erasure.this.global.Tree">qual1</a>);
            <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<span title="(x$1: Boolean)Boolean">!</span><a href="../symtab/Definitions.scala.html#28608" title="(sym: Erasure.this.global.Symbol)Boolean">isValueType</a>(<a href="#51013" title="Erasure.this.global.Tree">qual1</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; Erasure.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30180" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a>) &amp;&amp; <a href="#48347" title="(sym: Erasure.this.global.Symbol)Boolean">isUnboxedValueMember</a>(<a href="#50247" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; Erasure.this.global.Symbol">symbol</a>))
              <a href="#51013" title="Erasure.this.global.Tree">qual1</a> = <a href="#48344" title="(tree: Erasure.this.global.Tree,pt: Erasure.this.global.Type)Erasure.this.global.Tree">unbox</a>(<a href="#51013" title="Erasure.this.global.Tree">qual1</a>, <a href="#50247" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; Erasure.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#26983" title="=&gt; Erasure.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; Erasure.this.global.Type">tpe</a>)
            <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<a href="#50247" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; Erasure.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#26983" title="(x$1: AnyRef)Boolean">owner</a> <span title="(x$1: Boolean)Boolean">==</span> <a href="../symtab/Definitions.scala.html#28393" title="=&gt; Erasure.this.global.Symbol">ArrayClass</a> &amp;&amp; (<a href="../symtab/Symbols.scala.html#27024" title="(that: Erasure.this.global.Symbol)Boolean">BoxedArrayClass</a> isSubClass <a href="#51013" title="Erasure.this.global.Tree">qual1</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; Erasure.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30180" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a>))
              <a href="#51013" title="Erasure.this.global.Tree">qual1</a> = <a href="#48345" title="(tree: Erasure.this.global.Tree,pt: Erasure.this.global.Type)Erasure.this.global.Tree">cast</a>(<a href="#51013" title="Erasure.this.global.Tree">qual1</a>, <a href="../symtab/Definitions.scala.html#28543" title="=&gt; Erasure.this.global.Symbol">BoxedArrayClass</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; Erasure.this.global.Type">tpe</a>)
            
            <span title="Unit" class="keyword">if</span> (<a href="../symtab/Definitions.scala.html#28609" title="(sym: Erasure.this.global.Symbol)Boolean">isUnboxedClass</a><span title="(x$1: Boolean)Boolean">(</span><a href="#50247" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; Erasure.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#26983" title="=&gt; Erasure.this.global.Symbol">owner</a>) &amp;&amp; <span title="=&gt; Boolean">!</span><a href="../symtab/Definitions.scala.html#28609" title="(sym: Erasure.this.global.Symbol)Boolean">isUnboxedClass</a>(<a href="#51013" title="Erasure.this.global.Tree">qual1</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; Erasure.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30180" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a>))
              <a href="#50247" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29368" title="(sym: Erasure.this.global.Symbol)Unit">symbol</a> = <a href="../symtab/Symbols.scala.html#26134" title="object Erasure.this.global.NoSymbol">NoSymbol</a>
            <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<a href="#51013" title="Erasure.this.global.Tree">qual1</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; Erasure.this.global.Type">tpe</a>.<span title="[T0]Boolean">isInstanceOf</span><span title="(x$1: Boolean)Boolean">[</span><a href="../symtab/Types.scala.html#26257" title="Erasure.this.global.MethodType">MethodType</a>] &amp;&amp; <a href="#51013" title="Erasure.this.global.Tree">qual1</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; Erasure.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30200" title="=&gt; List[Erasure.this.global.Type]">paramTypes</a>.<span title="=&gt; Boolean">isEmpty</span>) {
              <span title="(assertion: Boolean,message: =&gt; Any)Unit">assert</span>(<a href="#51013" title="Erasure.this.global.Tree">qual1</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; Erasure.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#26952" title="=&gt; Boolean">isStable</a>, <a href="#51013" title="Erasure.this.global.Tree">qual1</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; Erasure.this.global.Symbol">symbol</a>);
              <a href="#51013" title="Erasure.this.global.Tree">qual1</a> = <a href="../ast/Trees.scala.html#49125" title="(fun: Erasure.this.global.Tree,args: List[Erasure.this.global.Tree])Erasure.this.global.Apply">Apply</a><a href="../ast/Trees.scala.html#29365" title="(pos: scala.tools.nsc.util.Position)Erasure.this.global.Apply">(</a><a href="#51013" title="Erasure.this.global.Tree">qual1</a>, List<span title="object Nil">(</span>)) <a href="../ast/Trees.scala.html#29366" title="(tp: Erasure.this.global.Type)Erasure.this.global.Apply">setPos</a> <a href="#51013" title="Erasure.this.global.Tree">qual1</a>.<a href="../ast/Trees.scala.html#29361" title="=&gt; scala.tools.nsc.util.Position">pos</a> setType <a href="#51013" title="Erasure.this.global.Tree">qual1</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; Erasure.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30193" title="=&gt; Erasure.this.global.Type">resultType</a>
            } <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<span title="=&gt; Boolean">!</span>(<a href="#51013" title="Erasure.this.global.Tree">qual1</a>.<span title="[T0]Boolean">isInstanceOf</span><span title="(x$1: Boolean)Boolean">[</span><a href="../ast/Trees.scala.html#26720" title="Erasure.this.global.Super">Super</a>] || (<a href="#51013" title="Erasure.this.global.Tree">qual1</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; Erasure.this.global.Type">tpe</a>.<a href="../symtab/Symbols.scala.html#27024" title="(that: Erasure.this.global.Symbol)Boolean">typeSymbol</a> isSubClass <a href="#50247" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; Erasure.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#26983" title="=&gt; Erasure.this.global.Symbol">owner</a>))) {
              // println(&quot;member cast &quot;+tree.symbol+&quot; &quot;+tree.symbol.ownerChain+&quot; &quot;+qual1+&quot; &quot;+qual1.tpe)
              <a href="#51013" title="Erasure.this.global.Tree">qual1</a> = <a href="#48345" title="(tree: Erasure.this.global.Tree,pt: Erasure.this.global.Type)Erasure.this.global.Tree">cast</a>(<a href="#51013" title="Erasure.this.global.Tree">qual1</a>, <a href="#50247" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; Erasure.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#26983" title="=&gt; Erasure.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; Erasure.this.global.Type">tpe</a>)
            }
            <a href="../ast/Trees.scala.html#26584" title="=&gt; Erasure.this.global.LazyTreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#48622" title="(tree: Erasure.this.global.Tree,qualifier: Erasure.this.global.Tree,selector: Erasure.this.global.Name)Erasure.this.global.Select">Select</a>(<a href="#50247" title="Erasure.this.global.Tree">tree</a>, <a href="#51013" title="Erasure.this.global.Tree">qual1</a>, <a href="#50852" title="Erasure.this.global.Name">name</a>)
          }
        <span title="Erasure.this.global.Tree" class="keyword">case</span> _ =&gt;
          <a href="#50247" title="Erasure.this.global.Tree">tree</a>
      }
    }

    /** A replacement for the standard typer's &lt;code&gt;adapt&lt;/code&gt; method.
     *
     *  @param tree ...
     *  @param mode ...
     *  @param pt   ...
     *  @return     the adapted tree
     */
    <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(tree: Erasure.this.global.Tree,mode: Int,pt: Erasure.this.global.Type)Erasure.this.global.Tree" id="48350">adapt</a>(<a title="Erasure.this.global.Tree" id="51193">tree</a>: <a href="../ast/Trees.scala.html#26593" title="Erasure.this.global.Tree">Tree</a>, <a title="Int" id="51194">mode</a>: <span title="Int">Int</span>, <a title="Erasure.this.global.Type" id="51195">pt</a>: <a href="../symtab/Types.scala.html#26205" title="Erasure.this.global.Type">Type</a>): <a href="../ast/Trees.scala.html#26593" title="Erasure.this.global.Tree">Tree</a> =
      <a href="#48348" title="(tree: Erasure.this.global.Tree,pt: Erasure.this.global.Type)Erasure.this.global.Tree">adaptToType</a>(<a href="#51193" title="Erasure.this.global.Tree">tree</a>, <a href="#51195" title="Erasure.this.global.Type">pt</a>)

    /** A replacement for the standard typer's `typed1' method */
    <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(tree: Erasure.this.global.Tree,mode: Int,pt: Erasure.this.global.Type)Erasure.this.global.Tree" id="48351">typed1</a>(<a title="Erasure.this.global.Tree" id="51206">tree</a>: <a href="../ast/Trees.scala.html#26593" title="Erasure.this.global.Tree">Tree</a>, <a title="Int" id="51207">mode</a>: <span title="Int">Int</span>, <a title="Erasure.this.global.Type" id="51208">pt</a>: <a href="../symtab/Types.scala.html#26205" title="Erasure.this.global.Type">Type</a>): <a href="../ast/Trees.scala.html#26593" title="Erasure.this.global.Tree">Tree</a> = {
      <span class="keyword">var</span> <a title="Erasure.this.global.Tree" id="51217">tree1</a> = <span class="keyword">try</span> { 
        <span class="keyword">super</span>.<a href="../typechecker/Typers.scala.html#42636" title="(tree: Erasure.this.global.Tree,mode: Int,pt: Erasure.this.global.Type)Erasure.this.global.Tree">typed1</a>(<a href="#48349" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">adaptMember</a>(<a href="#51206" title="Erasure.this.global.Tree">tree</a>), <a href="#51207" title="Int">mode</a>, <a href="#51208" title="Erasure.this.global.Type">pt</a>)
      } <span class="keyword">catch</span> {
        <span title="Nothing" class="keyword">case</span> <a title="Exception" id="51228">ex</a>: <a title="Exception" id="1875">Exception</a> =&gt;
          //if (settings.debug.value) 
          <span title="object Console">Console</span>.<span title="(x: Any)Unit">println</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;exception when typing &quot;</span> + <a href="#51206" title="Erasure.this.global.Tree">tree</a>);
          <span title="Nothing" class="keyword">throw</span> <a href="#51228" title="Exception">ex</a>
        <span title="Nothing" class="keyword">case</span> <a title="Erasure.this.global.TypeError" id="51361">er</a>: <a href="../symtab/Types.scala.html#26459" title="Erasure.this.global.TypeError">TypeError</a> =&gt;
          <span title="object Console">Console</span>.<span title="(x: Any)Unit">println</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;exception when typing &quot;</span> + <a href="#51206" title="Erasure.this.global.Tree">tree</a>)
          <span title="object Console">Console</span>.<span title="(x: Any)Unit">println</span>(<a href="#51361" title="Erasure.this.global.TypeError">er</a>.<a href="../symtab/Types.scala.html#51366" title="(x$1: Any)java.lang.String">msg</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; in file &quot;)" class="string">&quot; in file &quot;</span> + <a href="#48352" title="Erasure.this.Context">context</a>.<a href="../typechecker/Contexts.scala.html#48362" title="=&gt; Erasure.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27077" title="=&gt; scala.tools.nsc.io.AbstractFile">sourceFile</a>)
          <a href="#51361" title="Erasure.this.global.TypeError">er</a>.<a title="()Unit" id="25932">printStackTrace</a>
          <span title="Nothing" class="keyword">throw</span> <span title="java.lang.Error" class="keyword">new</span> <span title="java.lang.Error">Error</span>
      }
      <span class="keyword">def</span> <a title="(cdef: Erasure.this.global.CaseDef)Erasure.this.global.CaseDef" id="51218">adaptCase</a>(<a title="Erasure.this.global.CaseDef" id="51427">cdef</a>: <a href="../ast/Trees.scala.html#26656" title="Erasure.this.global.CaseDef">CaseDef</a>): <a href="../ast/Trees.scala.html#26656" title="Erasure.this.global.CaseDef">CaseDef</a> = {
        <span class="keyword">val</span> <a title="Erasure.this.global.Tree" id="51440">body1</a> = <a href="#48348" title="(tree: Erasure.this.global.Tree,pt: Erasure.this.global.Type)Erasure.this.global.Tree">adaptToType</a>(<a href="#51427" title="Erasure.this.global.CaseDef">cdef</a>.<a href="../ast/Trees.scala.html#51435" title="=&gt; Erasure.this.global.Tree">body</a>, <a href="#51217" title="Erasure.this.global.Tree">tree1</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; Erasure.this.global.Type">tpe</a>)
        <a href="../ast/Trees.scala.html#26584" title="=&gt; Erasure.this.global.LazyTreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#48600" title="(tree: Erasure.this.global.Tree,pat: Erasure.this.global.Tree,guard: Erasure.this.global.Tree,body: Erasure.this.global.Tree)Erasure.this.global.CaseDef">CaseDef</a><a href="../ast/Trees.scala.html#29366" title="(tp: Erasure.this.global.Type)Erasure.this.global.CaseDef">(</a><a href="#51427" title="Erasure.this.global.CaseDef">cdef</a>, <a href="#51427" title="Erasure.this.global.CaseDef">cdef</a>.<a href="../ast/Trees.scala.html#51431" title="=&gt; Erasure.this.global.Tree">pat</a>, <a href="#51427" title="Erasure.this.global.CaseDef">cdef</a>.<a href="../ast/Trees.scala.html#51433" title="=&gt; Erasure.this.global.Tree">guard</a>, <a href="#51440" title="Erasure.this.global.Tree">body1</a>) setType <a href="#51440" title="Erasure.this.global.Tree">body1</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; Erasure.this.global.Type">tpe</a>
      }
      <span class="keyword">def</span> <a title="(branch: Erasure.this.global.Tree)Erasure.this.global.Tree" id="51219">adaptBranch</a>(<a title="Erasure.this.global.Tree" id="51530">branch</a>: <a href="../ast/Trees.scala.html#26593" title="Erasure.this.global.Tree">Tree</a>): <a href="../ast/Trees.scala.html#26593" title="Erasure.this.global.Tree">Tree</a> =
        <span title="Erasure.this.global.Tree" class="keyword">if</span> (<a href="#51530" title="(x$1: AnyRef)Boolean">branch</a> == <a href="../ast/Trees.scala.html#26602" title="object Erasure.this.global.EmptyTree">EmptyTree</a>) <a href="#51530" title="Erasure.this.global.Tree">branch</a> <span class="keyword">else</span> <a href="#48348" title="(tree: Erasure.this.global.Tree,pt: Erasure.this.global.Type)Erasure.this.global.Tree">adaptToType</a>(<a href="#51530" title="Erasure.this.global.Tree">branch</a>, <a href="#51217" title="Erasure.this.global.Tree">tree1</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; Erasure.this.global.Type">tpe</a>);
      <a href="#51217" title="Erasure.this.global.Tree">tree1</a> <span title="Erasure.this.global.Tree" class="keyword">match</span> {
        <span title="Erasure.this.global.If" class="keyword">case</span> If(<a title="Erasure.this.global.Tree" id="51564">cond</a>, <a title="Erasure.this.global.Tree" id="51565">thenp</a>, <a title="Erasure.this.global.Tree" id="51566">elsep</a>) =&gt;
          <a href="../ast/Trees.scala.html#26584" title="=&gt; Erasure.this.global.LazyTreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#48610" title="(tree: Erasure.this.global.Tree,cond: Erasure.this.global.Tree,thenp: Erasure.this.global.Tree,elsep: Erasure.this.global.Tree)Erasure.this.global.If">If</a>(<a href="#51217" title="Erasure.this.global.Tree">tree1</a>, <a href="#51564" title="Erasure.this.global.Tree">cond</a>, <a href="#51219" title="(branch: Erasure.this.global.Tree)Erasure.this.global.Tree">adaptBranch</a>(<a href="#51565" title="Erasure.this.global.Tree">thenp</a>), <a href="#51219" title="(branch: Erasure.this.global.Tree)Erasure.this.global.Tree">adaptBranch</a>(<a href="#51566" title="Erasure.this.global.Tree">elsep</a>))
        <span title="Erasure.this.global.Match" class="keyword">case</span> Match(<a title="Erasure.this.global.Tree" id="51659">selector</a>, <a title="List[Erasure.this.global.CaseDef]" id="51660">cases</a>) =&gt;
          <a href="../ast/Trees.scala.html#26584" title="=&gt; Erasure.this.global.LazyTreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#48611" title="(tree: Erasure.this.global.Tree,selector: Erasure.this.global.Tree,cases: List[Erasure.this.global.CaseDef])Erasure.this.global.Match">Match</a>(<a href="#51217" title="Erasure.this.global.Tree">tree1</a>, <a href="#51659" title="Erasure.this.global.Tree">selector</a>, <a href="#51660" title="(f: (Erasure.this.global.CaseDef) =&gt; Erasure.this.global.CaseDef)(implicit bf: scala.collection.generic.BuilderFactory[Erasure.this.global.CaseDef,List[Erasure.this.global.CaseDef],List[Erasure.this.global.CaseDef]])List[Erasure.this.global.CaseDef]">cases</a> <span title="scala.collection.generic.BuilderFactory[Erasure.this.global.CaseDef,List[Erasure.this.global.CaseDef],List#Coll]">map</span> <a href="#51218" title="(cdef: Erasure.this.global.CaseDef)Erasure.this.global.CaseDef">adaptCase</a>)
        <span title="Erasure.this.global.Try" class="keyword">case</span> Try(<a title="Erasure.this.global.Tree" id="51790">block</a>, <a title="List[Erasure.this.global.CaseDef]" id="51791">catches</a>, <a title="Erasure.this.global.Tree" id="51792">finalizer</a>) =&gt;
          <a href="../ast/Trees.scala.html#26584" title="=&gt; Erasure.this.global.LazyTreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#48613" title="(tree: Erasure.this.global.Tree,block: Erasure.this.global.Tree,catches: List[Erasure.this.global.CaseDef],finalizer: Erasure.this.global.Tree)Erasure.this.global.Try">Try</a>(<a href="#51217" title="Erasure.this.global.Tree">tree1</a>, <a href="#51219" title="(branch: Erasure.this.global.Tree)Erasure.this.global.Tree">adaptBranch</a>(<a href="#51790" title="Erasure.this.global.Tree">block</a>), <a href="#51791" title="(f: (Erasure.this.global.CaseDef) =&gt; Erasure.this.global.CaseDef)(implicit bf: scala.collection.generic.BuilderFactory[Erasure.this.global.CaseDef,List[Erasure.this.global.CaseDef],List[Erasure.this.global.CaseDef]])List[Erasure.this.global.CaseDef]">catches</a> <span title="scala.collection.generic.BuilderFactory[Erasure.this.global.CaseDef,List[Erasure.this.global.CaseDef],List#Coll]">map</span> <a href="#51218" title="(cdef: Erasure.this.global.CaseDef)Erasure.this.global.CaseDef">adaptCase</a>, <a href="#51792" title="Erasure.this.global.Tree">finalizer</a>)
        <span title="Erasure.this.global.Tree" class="keyword">case</span> Ident(_) | Select(_, _) =&gt;
          <span title="Unit" class="keyword">if</span> (<a href="#51217" title="Erasure.this.global.Tree">tree1</a>.<a href="../symtab/Symbols.scala.html#26996" title="(mask: Long)Boolean">symbol</a> hasFlag <span title="Long(8589934592L)">OVERLOADED</span>) {
            <span class="keyword">val</span> <a title="Erasure.this.global.Symbol" id="51909">first</a> = <a href="#51217" title="Erasure.this.global.Tree">tree1</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; Erasure.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27025" title="=&gt; List[Erasure.this.global.Symbol]">alternatives</a>.<span title="=&gt; Erasure.this.global.Symbol">head</span>
            <span class="keyword">val</span> <a title="Erasure.this.global.Symbol" id="51910">sym1</a> = <a href="#51217" title="Erasure.this.global.Tree">tree1</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; Erasure.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27026" title="(cond: (Erasure.this.global.Symbol) =&gt; Boolean)Erasure.this.global.Symbol">filter</a> { 
              <a title="Erasure.this.global.Symbol" id="51918">alt</a> =&gt; <a href="#51918" title="(x$1: AnyRef)Boolean">alt</a> <span title="(x$1: Boolean)Boolean">==</span> <a href="#51909" title="Erasure.this.global.Symbol">first</a> || <span title="=&gt; Boolean">!</span>(<a href="#51909" title="Erasure.this.global.Symbol">first</a>.<a href="../symtab/Types.scala.html#30239" title="(that: Erasure.this.global.Type)Boolean">tpe</a> looselyMatches <a href="#51918" title="Erasure.this.global.Symbol">alt</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; Erasure.this.global.Type">tpe</a>)
            }
            <span title="Unit" class="keyword">if</span> (<a href="#51206" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="(x$1: AnyRef)Boolean">symbol</a> ne <a href="#51910" title="Erasure.this.global.Symbol">sym1</a>) {
              <a href="#51217" title="Erasure.this.global.Tree">tree1</a>.<a href="../ast/Trees.scala.html#29368" title="(sym: Erasure.this.global.Symbol)Unit">symbol</a> = <a href="#51910" title="Erasure.this.global.Symbol">sym1</a>
              <a href="#51217" title="Erasure.this.global.Tree">tree1</a>.<a href="../ast/Trees.scala.html#29364" title="(t: Erasure.this.global.Type)Unit">tpe</a> = <a href="#51910" title="Erasure.this.global.Symbol">sym1</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; Erasure.this.global.Type">tpe</a>
            }
          }
          <a href="#51217" title="Erasure.this.global.Tree">tree1</a>
        <span title="Erasure.this.global.Tree" class="keyword">case</span> _ =&gt;
          <a href="#51217" title="Erasure.this.global.Tree">tree1</a>
      }
    }
  }

  /** The erasure transformer */
  <span class="keyword">class</span> <a title="class ErasureTransformer extends Erasure.this.global.Transformer with ScalaObject" id="42466">ErasureTransformer</a><span title="ScalaObject">(</span><a title="Erasure.this.global.CompilationUnit" id="45497">unit</a>: <a href="../CompilationUnits.scala.html#39196" title="Erasure.this.global.CompilationUnit">CompilationUnit</a>) <span class="keyword">extends</span> <a href="../ast/Trees.scala.html#26773" title="Erasure.this.global.Transformer">Transformer</a> {

    /** &lt;p&gt;
     *    Emit an error if there is a double definition. This can happen in
     *    the following circumstances:
     *  &lt;/p&gt;
     *  &lt;ul&gt;
     *    &lt;li&gt;
     *      A template defines two members with the same name and erased type.
     *    &lt;/li&gt;
     *    &lt;li&gt;
     *      A template defines and inherits two members &lt;code&gt;m&lt;/code&gt; with
     *      different types, but their erased types are the same.
     *    &lt;/li&gt;
     *    &lt;li&gt;
     *      A template inherits two members &lt;code&gt;m&lt;/code&gt; with different
     *      types, but their erased types are the same.
     *    &lt;/li&gt;
     *  &lt;/ul&gt;
     */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(root: Erasure.this.global.Symbol)Unit" id="45491">checkNoDoubleDefs</a>(<a title="Erasure.this.global.Symbol" id="53556">root</a>: <a href="../symtab/Symbols.scala.html#26127" title="Erasure.this.global.Symbol">Symbol</a>) {
      <span class="keyword">def</span> <a title="(sym1: Erasure.this.global.Symbol,sym2: Erasure.this.global.Symbol)Unit" id="53920">doubleDefError</a>(<a title="Erasure.this.global.Symbol" id="53925">sym1</a>: <a href="../symtab/Symbols.scala.html#26127" title="Erasure.this.global.Symbol">Symbol</a>, <a title="Erasure.this.global.Symbol" id="53926">sym2</a>: <a href="../symtab/Symbols.scala.html#26127" title="Erasure.this.global.Symbol">Symbol</a>) {
        // the .toString must also be computed at the earlier phase
        <span class="keyword">def</span> <a title="[T](op: =&gt; T)T" id="53927">atRefc</a>[<a title="&gt;: Nothing &lt;: Any" id="53929">T</a>](<a title="=&gt; T" id="53932">op</a>: =&gt; T) = <a href="../symtab/SymbolTable.scala.html#26097" title="[T](ph: scala.tools.nsc.Phase)(op: =&gt; T)T">atPhase</a><span title="(ph: scala.tools.nsc.Phase)(op: =&gt; T)T">[</span><a href="#53929" title="T">T</a>](<a href="../Global.scala.html#39176" title="=&gt; Erasure.this.global.Run">currentRun</a>.<a href="../Global.scala.html#40192" title="=&gt; scala.tools.nsc.Phase">refchecksPhase</a>.<a href="../Phase.scala.html#23158" title="=&gt; scala.tools.nsc.Phase">next</a>)(<a href="#53932" title="=&gt; T">op</a>)
        <span class="keyword">val</span> <a title="Erasure.this.global.Type" id="53930">tpe1</a> = <a href="#53927" title="(op: =&gt; Erasure.this.global.Type)Erasure.this.global.Type">atRefc</a>(<a href="#53556" title="Erasure.this.global.Symbol">root</a>.<a href="../symtab/Symbols.scala.html#27037" title="=&gt; Erasure.this.global.Type">thisType</a>.<a href="../symtab/Types.scala.html#30223" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.Type">memberType</a>(<a href="#53925" title="Erasure.this.global.Symbol">sym1</a>))
        <span class="keyword">val</span> <a title="Erasure.this.global.Type" id="53931">tpe2</a> = <a href="#53927" title="(op: =&gt; Erasure.this.global.Type)Erasure.this.global.Type">atRefc</a>(<a href="#53556" title="Erasure.this.global.Symbol">root</a>.<a href="../symtab/Symbols.scala.html#27037" title="=&gt; Erasure.this.global.Type">thisType</a>.<a href="../symtab/Types.scala.html#30223" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.Type">memberType</a>(<a href="#53926" title="Erasure.this.global.Symbol">sym2</a>))
        <span title="Unit" class="keyword">if</span> (<span title="(x$1: Boolean)Boolean">!</span><a href="#53930" title="Erasure.this.global.Type">tpe1</a>.<a href="../symtab/Types.scala.html#30209" title="=&gt; Boolean">isErroneous</a> &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#53931" title="Erasure.this.global.Type">tpe2</a>.<a href="../symtab/Types.scala.html#30209" title="=&gt; Boolean">isErroneous</a>)
          <a href="#45497" title="Erasure.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#45455" title="(pos: scala.tools.nsc.util.Position,msg: String)Unit">error</a>(
          <span title="scala.tools.nsc.util.Position" class="keyword">if</span> (<a href="#53925" title="Erasure.this.global.Symbol">sym1</a>.<a href="../symtab/Symbols.scala.html#26983" title="(x$1: AnyRef)Boolean">owner</a> == <a href="#53556" title="Erasure.this.global.Symbol">root</a>) <a href="#53925" title="Erasure.this.global.Symbol">sym1</a>.<a href="../symtab/Symbols.scala.html#26847" title="=&gt; scala.tools.nsc.util.Position">pos</a> <span class="keyword">else</span> <a href="#53556" title="Erasure.this.global.Symbol">root</a>.<a href="../symtab/Symbols.scala.html#26847" title="=&gt; scala.tools.nsc.util.Position">pos</a>,
          <span title="(x$1: Any)java.lang.String">(</span><span title="java.lang.String" class="keyword">if</span> (<a href="#53925" title="Erasure.this.global.Symbol">sym1</a>.<a href="../symtab/Symbols.scala.html#26983" title="(x$1: AnyRef)Boolean">owner</a> == <a href="#53926" title="Erasure.this.global.Symbol">sym2</a>.<a href="../symtab/Symbols.scala.html#26983" title="=&gt; Erasure.this.global.Symbol">owner</a>) <span title="java.lang.String(&quot;double definition:\012&quot;)" class="string">&quot;double definition:\n&quot;</span>
           <span class="keyword">else</span> <span title="java.lang.String" class="keyword">if</span> (<a href="#53925" title="Erasure.this.global.Symbol">sym1</a>.<a href="../symtab/Symbols.scala.html#26983" title="(x$1: AnyRef)Boolean">owner</a> == <a href="#53556" title="Erasure.this.global.Symbol">root</a>) <span title="java.lang.String(&quot;name clash between defined and inherited member:\012&quot;)" class="string">&quot;name clash between defined and inherited member:\n&quot;</span>
           <span class="keyword">else</span> <span title="java.lang.String(&quot;name clash between inherited members:\012&quot;)" class="string">&quot;name clash between inherited members:\n&quot;</span>) <span title="(x$1: Any)java.lang.String">+</span>
          <a href="#53925" title="Erasure.this.global.Symbol">sym1</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;:&quot;)" class="string">&quot;:&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#53927" title="(op: =&gt; String)String">atRefc</a>(<a href="#53930" title="Erasure.this.global.Type">tpe1</a>.<a href="../symtab/Types.scala.html#30267" title="()String">toString</a>) <span title="(x$1: Any)java.lang.String">+</span>
            (<span title="Any" class="keyword">if</span> (<a href="#53925" title="Erasure.this.global.Symbol">sym1</a>.<a href="../symtab/Symbols.scala.html#26983" title="(x$1: AnyRef)Boolean">owner</a> == <a href="#53556" title="Erasure.this.global.Symbol">root</a>) <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span> <span class="keyword">else</span> <a href="#53925" title="Erasure.this.global.Symbol">sym1</a>.<a href="../symtab/Symbols.scala.html#27092" title="=&gt; String">locationString</a>) <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; and\012&quot;)" class="string">&quot; and\n&quot;</span> <span title="(x$1: Any)java.lang.String">+</span>
          <a href="#53926" title="Erasure.this.global.Symbol">sym2</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;:&quot;)" class="string">&quot;:&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#53927" title="(op: =&gt; String)String">atRefc</a>(<a href="#53931" title="Erasure.this.global.Type">tpe2</a>.<a href="../symtab/Types.scala.html#30267" title="()String">toString</a>) <span title="(x$1: Any)java.lang.String">+</span>
            (<span title="Any" class="keyword">if</span> (<a href="#53926" title="Erasure.this.global.Symbol">sym2</a>.<a href="../symtab/Symbols.scala.html#26983" title="(x$1: AnyRef)Boolean">owner</a> == <a href="#53556" title="Erasure.this.global.Symbol">root</a>) <span title="(x$1: Any)java.lang.String" class="string">&quot; at line &quot;</span> + (<a href="#53926" title="Erasure.this.global.Symbol">sym2</a>.<a href="../symtab/Symbols.scala.html#26847" title="=&gt; scala.tools.nsc.util.Position">pos</a>).<a href="../util/Position.scala.html#30304" title="=&gt; Int">line</a> <span class="keyword">else</span> <a href="#53926" title="Erasure.this.global.Symbol">sym2</a>.<a href="../symtab/Symbols.scala.html#27092" title="=&gt; String">locationString</a>) <span title="(x$1: Any)java.lang.String">+</span>
          <span title="java.lang.String(&quot;\012have same type&quot;)" class="string">&quot;\nhave same type&quot;</span> +
          (<span title="Any" class="keyword">if</span> (<a href="#53927" title="(op: =&gt; Boolean)Boolean">atRefc</a>(<a href="../symtab/Types.scala.html#30236" title="(that: Erasure.this.global.Type)Boolean">tpe1</a> =:= <a href="#53931" title="Erasure.this.global.Type">tpe2</a>)) <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span> <span class="keyword">else</span> <span title="(x$1: Any)java.lang.String" class="string">&quot; after erasure: &quot;</span> + <a href="../symtab/SymbolTable.scala.html#26097" title="(ph: scala.tools.nsc.Phase)(op: =&gt; Erasure.this.global.Type)Erasure.this.global.Type">atPhase</a>(<a href="../symtab/SymbolTable.scala.html#26088" title="=&gt; scala.tools.nsc.Phase">phase</a>.<a href="../Phase.scala.html#23158" title="=&gt; scala.tools.nsc.Phase">next</a>)(<a href="#53925" title="Erasure.this.global.Symbol">sym1</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; Erasure.this.global.Type">tpe</a>)))
        <a href="#53925" title="Erasure.this.global.Symbol">sym1</a>.<a href="../symtab/Symbols.scala.html#27005" title="(info: Erasure.this.global.Type)sym1.type">setInfo</a><span title="Unit">(</span><a href="../symtab/Types.scala.html#26217" title="object Erasure.this.global.ErrorType">ErrorType</a>)
      }

      <span class="keyword">val</span> <a title="Erasure.this.global.Scope" id="53921">decls</a> = <a href="#53556" title="Erasure.this.global.Symbol">root</a>.<a href="../symtab/Symbols.scala.html#27004" title="=&gt; Erasure.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#30210" title="=&gt; Erasure.this.global.Scope">decls</a>
      <span class="keyword">var</span> <a title="Erasure.this.global.ScopeEntry" id="53922">e</a> = <a href="#53921" title="Erasure.this.global.Scope">decls</a>.<a href="../symtab/Scopes.scala.html#27105" title="=&gt; Erasure.this.global.ScopeEntry">elems</a>
      <span title="Unit" class="keyword">while</span> (<a href="#53922" title="(x$1: AnyRef)Boolean">e</a> ne <span title="Null(null)" class="keyword">null</span>) <a href="#53924" title="()Unit">{</a>
        <span title="Unit" class="keyword">if</span> (<a href="#53922" title="Erasure.this.global.ScopeEntry">e</a>.<a href="../symtab/Scopes.scala.html#26807" title="=&gt; Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26895" title="=&gt; Boolean">isTerm</a>) {
          <span class="keyword">var</span> <a title="Erasure.this.global.ScopeEntry" id="54095">e1</a> = <a href="#53921" title="Erasure.this.global.Scope">decls</a>.<a href="../symtab/Scopes.scala.html#27143" title="(entry: Erasure.this.global.ScopeEntry)Erasure.this.global.ScopeEntry">lookupNextEntry</a>(<a href="#53922" title="Erasure.this.global.ScopeEntry">e</a>)
          <span title="Unit" class="keyword">while</span> (<a href="#54095" title="(x$1: AnyRef)Boolean">e1</a> ne <span title="Null(null)" class="keyword">null</span>) <a href="#54099" title="()Unit">{</a>
            <span title="Unit" class="keyword">if</span> (<a href="../symtab/SymbolTable.scala.html#26097" title="(ph: scala.tools.nsc.Phase)(op: =&gt; Boolean)Boolean">atPhase</a>(<a href="../symtab/SymbolTable.scala.html#26088" title="=&gt; scala.tools.nsc.Phase">phase</a>.<a href="../Phase.scala.html#23158" title="=&gt; scala.tools.nsc.Phase">next</a>)(<a href="#54095" title="Erasure.this.global.ScopeEntry">e1</a>.<a href="../symtab/Scopes.scala.html#26807" title="=&gt; Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Types.scala.html#30236" title="(that: Erasure.this.global.Type)Boolean">info</a> =:= <a href="#53922" title="Erasure.this.global.ScopeEntry">e</a>.<a href="../symtab/Scopes.scala.html#26807" title="=&gt; Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27004" title="=&gt; Erasure.this.global.Type">info</a>)) <a href="#53920" title="(sym1: Erasure.this.global.Symbol,sym2: Erasure.this.global.Symbol)Unit">doubleDefError</a>(<a href="#53922" title="Erasure.this.global.ScopeEntry">e</a>.<a href="../symtab/Scopes.scala.html#26807" title="=&gt; Erasure.this.global.Symbol">sym</a>, <a href="#54095" title="Erasure.this.global.ScopeEntry">e1</a>.<a href="../symtab/Scopes.scala.html#26807" title="=&gt; Erasure.this.global.Symbol">sym</a>)
            <a href="#54095" title="Erasure.this.global.ScopeEntry">e1</a> = <a href="#53921" title="Erasure.this.global.Scope">decls</a>.<a href="../symtab/Scopes.scala.html#27143" title="(entry: Erasure.this.global.ScopeEntry)Erasure.this.global.ScopeEntry">lookupNextEntry</a>(<a href="#54095" title="Erasure.this.global.ScopeEntry">e1</a>)
          }
        }
        <a href="#53922" title="Erasure.this.global.ScopeEntry">e</a> = <a href="#53922" title="Erasure.this.global.ScopeEntry">e</a>.<a href="../symtab/Scopes.scala.html#26815" title="=&gt; Erasure.this.global.ScopeEntry">next</a>
      }

      <span class="keyword">val</span> <a title="Erasure.this.global.overridingPairs.Cursor" id="53923">opc</a> = <a href="#54124" title="Erasure.this.global.overridingPairs.Cursor{ ... }" class="keyword">new</a> <a href="../Global.scala.html#39047" title="anonymous class $anon extends Erasure.this.global.overridingPairs.Cursor" id="54124">overridingPairs</a>.<a href="OverridingPairs.scala.html#54128" title="Erasure.this.global.overridingPairs.Cursor">Cursor</a>(<a href="#53556" title="Erasure.this.global.Symbol">root</a>) {
        <span class="keyword">override</span> <span class="keyword">def</span> <a title="(sym: Erasure.this.global.Symbol)Boolean" id="54172">exclude</a>(<a title="Erasure.this.global.Symbol" id="54179">sym</a>: <a href="../symtab/Symbols.scala.html#26127" title="Erasure.this.global.Symbol">Symbol</a>): <span title="Boolean">Boolean</span> =
          (<span title="(x$1: Boolean)Boolean">!</span><a href="#54179" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26895" title="=&gt; Boolean">isTerm</a> <span title="(x$1: Boolean)Boolean">||</span> <a href="#54179" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26996" title="(mask: Long)Boolean">hasFlag</a>(<span title="Long(4L)">PRIVATE</span>) <span title="(x$1: Boolean)Boolean">||</span> <span class="keyword">super</span>.<a href="OverridingPairs.scala.html#54139" title="(sym: Erasure.this.global.overridingPairs.global.Symbol)Boolean">exclude</a>(<a href="#54179" title="Erasure.this.global.Symbol">sym</a>) 
           // specialized members have no type history before 'specialize', causing duble def errors for curried defs
           || <span title="=&gt; Boolean">!</span><a href="#54179" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27012" title="(pid: Int)Boolean">hasTypeAt</a>(<a href="../Global.scala.html#39176" title="=&gt; Erasure.this.global.Run">currentRun</a>.<a href="../Global.scala.html#40192" title="=&gt; scala.tools.nsc.Phase">refchecksPhase</a>.<a href="../Phase.scala.html#23147" title="=&gt; Int">id</a>)) 

        <span class="keyword">override</span> <span class="keyword">def</span> <a title="(sym1: Erasure.this.global.Symbol,sym2: Erasure.this.global.Symbol)Boolean" id="54173">matches</a>(<a title="Erasure.this.global.Symbol" id="54202">sym1</a>: <a href="../symtab/Symbols.scala.html#26127" title="Erasure.this.global.Symbol">Symbol</a>, <a title="Erasure.this.global.Symbol" id="54203">sym2</a>: <a href="../symtab/Symbols.scala.html#26127" title="Erasure.this.global.Symbol">Symbol</a>): <span title="Boolean">Boolean</span> =
          <a href="../symtab/SymbolTable.scala.html#26097" title="(ph: scala.tools.nsc.Phase)(op: =&gt; Boolean)Boolean">atPhase</a>(<a href="../symtab/SymbolTable.scala.html#26088" title="=&gt; scala.tools.nsc.Phase">phase</a>.<a href="../Phase.scala.html#23158" title="=&gt; scala.tools.nsc.Phase">next</a>)(<a href="#54202" title="Erasure.this.global.Symbol">sym1</a>.<a href="../symtab/Types.scala.html#30236" title="(that: Erasure.this.global.Type)Boolean">tpe</a> =:= <a href="#54203" title="Erasure.this.global.Symbol">sym2</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; Erasure.this.global.Type">tpe</a>)
      }
      <span title="Unit" class="keyword">while</span> (<a href="#53923" title="Erasure.this.global.overridingPairs.Cursor">opc</a>.<a href="OverridingPairs.scala.html#54169" title="=&gt; Boolean">hasNext</a>) <a href="#54243" title="()Unit">{</a>
        <span title="Unit" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="../symtab/SymbolTable.scala.html#26097" title="(ph: scala.tools.nsc.Phase)(op: =&gt; Boolean)Boolean">atPhase</a>(<a href="../Global.scala.html#39176" title="=&gt; Erasure.this.global.Run">currentRun</a>.<a href="../Global.scala.html#40192" title="=&gt; scala.tools.nsc.Phase">refchecksPhase</a>.<a href="../Phase.scala.html#23158" title="=&gt; scala.tools.nsc.Phase">next</a>)(
              <a href="#53556" title="Erasure.this.global.Symbol">root</a>.<a href="../symtab/Symbols.scala.html#27037" title="=&gt; Erasure.this.global.Type">thisType</a>.<a href="../symtab/Types.scala.html#30223" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.Type">memberType</a><a href="../symtab/Types.scala.html#30238" title="(that: Erasure.this.global.Type)Boolean">(</a><a href="#53923" title="Erasure.this.global.overridingPairs.Cursor">opc</a>.<a href="OverridingPairs.scala.html#54163" title="=&gt; Erasure.this.global.overridingPairs.global.Symbol">overriding</a>) matches
              <a href="#53556" title="Erasure.this.global.Symbol">root</a>.<a href="../symtab/Symbols.scala.html#27037" title="=&gt; Erasure.this.global.Type">thisType</a>.<a href="../symtab/Types.scala.html#30223" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.Type">memberType</a>(<a href="#53923" title="Erasure.this.global.overridingPairs.Cursor">opc</a>.<a href="OverridingPairs.scala.html#54166" title="=&gt; Erasure.this.global.overridingPairs.global.Symbol">overridden</a>))) {
          <span title="Unit" class="keyword">if</span> (<a href="../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../Settings.scala.html#37759" title="=&gt; Boolean">value</a>)
            <a href="../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#53923" title="Erasure.this.global.overridingPairs.Cursor">opc</a>.<a href="OverridingPairs.scala.html#54163" title="=&gt; Erasure.this.global.overridingPairs.global.Symbol">overriding</a>.<a href="../symtab/Symbols.scala.html#27092" title="=&gt; String">locationString</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; &quot;)" class="string">&quot; &quot;</span> <span title="(x$1: Any)java.lang.String">+</span>
                     <a href="#53923" title="Erasure.this.global.overridingPairs.Cursor">opc</a>.<a href="OverridingPairs.scala.html#54163" title="=&gt; Erasure.this.global.overridingPairs.global.Symbol">overriding</a>.<a href="../symtab/Symbols.scala.html#27094" title="=&gt; java.lang.String">infosString</a> <span title="(x$1: Any)java.lang.String">+</span>
                     <a href="#53923" title="Erasure.this.global.overridingPairs.Cursor">opc</a>.<a href="OverridingPairs.scala.html#54166" title="=&gt; Erasure.this.global.overridingPairs.global.Symbol">overridden</a>.<a href="../symtab/Symbols.scala.html#27092" title="=&gt; String">locationString</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; &quot;)" class="string">&quot; &quot;</span> +
                     <a href="#53923" title="Erasure.this.global.overridingPairs.Cursor">opc</a>.<a href="OverridingPairs.scala.html#54166" title="=&gt; Erasure.this.global.overridingPairs.global.Symbol">overridden</a>.<a href="../symtab/Symbols.scala.html#27094" title="=&gt; java.lang.String">infosString</a>)
          <a href="#53920" title="(sym1: Erasure.this.global.Symbol,sym2: Erasure.this.global.Symbol)Unit">doubleDefError</a>(<a href="#53923" title="Erasure.this.global.overridingPairs.Cursor">opc</a>.<a href="OverridingPairs.scala.html#54163" title="=&gt; Erasure.this.global.overridingPairs.global.Symbol">overriding</a>, <a href="#53923" title="Erasure.this.global.overridingPairs.Cursor">opc</a>.<a href="OverridingPairs.scala.html#54166" title="=&gt; Erasure.this.global.overridingPairs.global.Symbol">overridden</a>)
        }
        <a href="#53923" title="Erasure.this.global.overridingPairs.Cursor">opc</a>.<a href="OverridingPairs.scala.html#54170" title="=&gt; Unit">next</a>
      }
    }

/*
      for (bc &lt;- root.info.baseClasses.tail; other &lt;- bc.info.decls.toList) {
        if (other.isTerm &amp;&amp; !other.isConstructor &amp;&amp; !(other hasFlag (PRIVATE | BRIDGE))) {
          for (member &lt;- root.info.nonPrivateMember(other.name).alternatives) {
            if (member != other &amp;&amp; 
                !(member hasFlag BRIDGE) &amp;&amp; 
                atPhase(phase.next)(member.tpe =:= other.tpe) &amp;&amp; 
                !atPhase(refchecksPhase.next)(
                  root.thisType.memberType(member) matches root.thisType.memberType(other))) {
              if (settings.debug.value) log(&quot;&quot; + member.locationString + &quot; &quot; + member.infosString + other.locationString + &quot; &quot; + other.infosString);
              doubleDefError(member, other)
            }
          }
        }
      }
*/

    /** &lt;p&gt;
     *    Add bridge definitions to a template. This means:
     *  &lt;/p&gt;
     *  &lt;p&gt;
     *    If there is a concrete member &lt;code&gt;m&lt;/code&gt; which overrides a
     *    member in a base class of the template, and the erased types of
     *    the two members differ, and the two members are not inherited or
     *    defined by some parent class of the template, then a bridge from
     *    the overridden member &lt;code&gt;m1&lt;/code&gt; to the member &lt;code&gt;m0&lt;/code&gt;
     *    is added. The bridge has the erased type of &lt;code&gt;m1&lt;/code&gt; and
     *    forwards to &lt;code&gt;m0&lt;/code&gt;.
     *  &lt;/p&gt;
     *  &lt;p&gt;
     *    No bridge is added if there is already a bridge to &lt;code&gt;m0&lt;/code&gt;
     *    with the erased type of &lt;code&gt;m1&lt;/code&gt; in the template.
     *  &lt;/p&gt;
     */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(owner: Erasure.this.global.Symbol)(List[Erasure.this.global.Tree], scala.collection.immutable.Set[Erasure.this.global.Symbol])" id="45492">bridgeDefs</a>(<a title="Erasure.this.global.Symbol" id="54336">owner</a>: <a href="../symtab/Symbols.scala.html#26127" title="Erasure.this.global.Symbol">Symbol</a>): <span title="(List[Erasure.this.global.Tree], scala.collection.immutable.Set[Erasure.this.global.Symbol])">(</span>List[Tree], Set[Symbol]) = {  
      <span class="keyword">var</span> <a title="scala.collection.immutable.Set[Erasure.this.global.Symbol]" id="54439">toBeRemoved</a>: <a title="scala.collection.immutable.Set[Erasure.this.global.Symbol]" id="7543">Set</a>[Symbol] = <a title="(args: Erasure.this.global.Symbol*)scala.collection.immutable.Set[Erasure.this.global.Symbol]" id="7544">Set</a>()
      //println(&quot;computing bridges for &quot; + owner)//DEBUG
      <span title="(assertion: Boolean)Unit">assert</span>(<a href="../symtab/SymbolTable.scala.html#26088" title="(x$1: AnyRef)Boolean">phase</a> == <a href="../Global.scala.html#39176" title="=&gt; Erasure.this.global.Run">currentRun</a>.<a href="../Global.scala.html#40196" title="=&gt; scala.tools.nsc.Phase">erasurePhase</a>)
      <span class="keyword">val</span> <a title="Erasure.this.global.Type" id="54440">site</a> = <a href="#54336" title="Erasure.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27037" title="=&gt; Erasure.this.global.Type">thisType</a>
      <span class="keyword">val</span> <a title="Erasure.this.global.Scope" id="54441">bridgesScope</a> = <a href="../symtab/Scopes.scala.html#25966" title="=&gt; Erasure.this.global.Scope">newScope</a>
      <span class="keyword">val</span> <a title="scala.collection.mutable.HashMap[Erasure.this.global.Symbol,Erasure.this.global.Symbol]" id="54442">bridgeTarget</a> = <span title="scala.collection.mutable.HashMap[Erasure.this.global.Symbol,Erasure.this.global.Symbol]" class="keyword">new</span> <a title="scala.collection.mutable.HashMap[Erasure.this.global.Symbol,Erasure.this.global.Symbol]" id="24954">HashMap</a>[Symbol, Symbol]
      <span class="keyword">var</span> <a title="List[Erasure.this.global.Tree]" id="54443">bridges</a>: <span title="List[Erasure.this.global.Tree]">List</span>[Tree] = List<span title="object Nil">(</span>)
      <span class="keyword">val</span> <a title="Erasure.this.global.overridingPairs.Cursor" id="54444">opc</a> = <a href="../symtab/SymbolTable.scala.html#26097" title="(ph: scala.tools.nsc.Phase)(op: =&gt; Erasure.this.global.overridingPairs.Cursor{ ... })Erasure.this.global.overridingPairs.Cursor{ ... }">atPhase</a>(<a href="../Global.scala.html#39176" title="=&gt; Erasure.this.global.Run">currentRun</a>.<a href="../Global.scala.html#40194" title="=&gt; scala.tools.nsc.Phase">explicitOuterPhase</a>) {     
        <a href="#54507" title="Erasure.this.global.overridingPairs.Cursor{ ... }" class="keyword">new</a> <a href="../Global.scala.html#39047" title="anonymous class $anon extends Erasure.this.global.overridingPairs.Cursor" id="54507">overridingPairs</a>.<a href="OverridingPairs.scala.html#54128" title="Erasure.this.global.overridingPairs.Cursor">Cursor</a>(<a href="#54336" title="Erasure.this.global.Symbol">owner</a>) {    
          <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; List[Erasure.this.global.Type]" id="54509">parents</a>: <span title="List[Erasure.this.global.Type]">List</span>[Type] = <span title="(xs: Erasure.this.global.Type*)List[Erasure.this.global.Type]">List</span>(<a href="#54336" title="Erasure.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27004" title="=&gt; Erasure.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#30189" title="=&gt; List[Erasure.this.global.Type]">parents</a>.<span title="=&gt; Erasure.this.global.Type">head</span>)
          <span class="keyword">override</span> <span class="keyword">def</span> <a title="(sym: Erasure.this.global.Symbol)Boolean" id="54510">exclude</a>(<a title="Erasure.this.global.Symbol" id="54527">sym</a>: <a href="../symtab/Symbols.scala.html#26127" title="Erasure.this.global.Symbol">Symbol</a>): <span title="Boolean">Boolean</span> =
            <span title="(x$1: Boolean)Boolean">!</span><a href="#54527" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26910" title="=&gt; Boolean">isMethod</a> <span title="(x$1: Boolean)Boolean">||</span> <a href="#54527" title="Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26996" title="(mask: Long)Boolean">hasFlag</a>(<span title="Long(4L)">PRIVATE</span>) || <span class="keyword">super</span>.<a href="OverridingPairs.scala.html#54139" title="(sym: Erasure.this.global.overridingPairs.global.Symbol)Boolean">exclude</a>(<a href="#54527" title="Erasure.this.global.Symbol">sym</a>)
        }
      }
      <span title="Unit" class="keyword">while</span> (<a href="#54444" title="Erasure.this.global.overridingPairs.Cursor">opc</a>.<a href="OverridingPairs.scala.html#54169" title="=&gt; Boolean">hasNext</a>) <a href="#54445" title="()Unit">{</a>
        <span class="keyword">val</span> <a title="Erasure.this.global.overridingPairs.global.Symbol" id="54555">member</a> = <a href="#54444" title="Erasure.this.global.overridingPairs.Cursor">opc</a>.<a href="OverridingPairs.scala.html#54163" title="=&gt; Erasure.this.global.overridingPairs.global.Symbol">overriding</a>
        <span class="keyword">val</span> <a title="Erasure.this.global.overridingPairs.global.Symbol" id="54556">other</a> = <a href="#54444" title="Erasure.this.global.overridingPairs.Cursor">opc</a>.<a href="OverridingPairs.scala.html#54166" title="=&gt; Erasure.this.global.overridingPairs.global.Symbol">overridden</a>
        //Console.println(&quot;bridge? &quot; + member + &quot;:&quot; + member.tpe + member.locationString + &quot; to &quot; + other + &quot;:&quot; + other.tpe + other.locationString);//DEBUG
        <span title="Unit" class="keyword">if</span> (<a href="../symtab/SymbolTable.scala.html#26097" title="(ph: scala.tools.nsc.Phase)(op: =&gt; Boolean)Boolean">atPhase</a>(<a href="../Global.scala.html#39176" title="=&gt; Erasure.this.global.Run">currentRun</a>.<a href="../Global.scala.html#40194" title="=&gt; scala.tools.nsc.Phase">explicitOuterPhase</a>)(<span title="=&gt; Boolean">!</span><a href="#54555" title="Erasure.this.global.overridingPairs.global.Symbol">member</a>.<a href="../symtab/Symbols.scala.html#26953" title="=&gt; Boolean">isDeferred</a>)) {
          <span class="keyword">val</span> <a title="Erasure.this.global.Type" id="54574">otpe</a> = <a href="#42448" title="(v1: Erasure.this.global.Type)Erasure.this.global.Type">erasure</a>(<a href="#54556" title="Erasure.this.global.overridingPairs.global.Symbol">other</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; Erasure.this.global.overridingPairs.global.Type">tpe</a>);
          <span class="keyword">val</span> <a title="Boolean" id="54575">bridgeNeeded</a> = <a href="../symtab/SymbolTable.scala.html#26097" title="(ph: scala.tools.nsc.Phase)(op: =&gt; Boolean)Boolean">atPhase</a>(<a href="../symtab/SymbolTable.scala.html#26088" title="=&gt; scala.tools.nsc.Phase">phase</a>.<a href="../Phase.scala.html#23158" title="=&gt; scala.tools.nsc.Phase">next</a>) (
            <span title="(x$1: Boolean)Boolean">!</span>(<a href="#54556" title="Erasure.this.global.overridingPairs.global.Symbol">other</a>.<a href="../symtab/Types.scala.html#30236" title="(that: Erasure.this.global.overridingPairs.global.Type)Boolean">tpe</a> =:= <a href="#54555" title="Erasure.this.global.overridingPairs.global.Symbol">member</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; Erasure.this.global.overridingPairs.global.Type">tpe</a>) <span title="(x$1: Boolean)Boolean">&amp;&amp;</span>
            <span title="=&gt; Boolean">!</span>(<a href="#42460" title="(v1: Erasure.this.global.Type)Erasure.this.global.Type">deconstMap</a><a href="../symtab/Types.scala.html#30236" title="(that: Erasure.this.global.Type)Boolean">(</a><a href="#54556" title="Erasure.this.global.overridingPairs.global.Symbol">other</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; Erasure.this.global.overridingPairs.global.Type">tpe</a>) =:= <a href="#42460" title="(v1: Erasure.this.global.Type)Erasure.this.global.Type">deconstMap</a>(<a href="#54555" title="Erasure.this.global.overridingPairs.global.Symbol">member</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; Erasure.this.global.overridingPairs.global.Type">tpe</a>)) &amp;&amp;
            { <span class="keyword">var</span> <a title="Erasure.this.global.ScopeEntry" id="54599">e</a> = <a href="#54441" title="Erasure.this.global.Scope">bridgesScope</a>.<a href="../symtab/Scopes.scala.html#27142" title="(name: Erasure.this.global.Name)Erasure.this.global.ScopeEntry">lookupEntry</a>(<a href="#54555" title="Erasure.this.global.overridingPairs.global.Symbol">member</a>.<a href="../symtab/Symbols.scala.html#26988" title="=&gt; Erasure.this.global.overridingPairs.global.Name">name</a>)
              <span title="Unit" class="keyword">while</span> (<span title="(x$1: Boolean)Boolean">(</span><a href="#54599" title="(x$1: AnyRef)Boolean">e</a> ne <span title="Null(null)" class="keyword">null</span>) &amp;&amp; <span title="=&gt; Boolean">!</span>(<span title="(x$1: Boolean)Boolean">(</span><a href="#54599" title="Erasure.this.global.ScopeEntry">e</a>.<a href="../symtab/Scopes.scala.html#26807" title="=&gt; Erasure.this.global.Symbol">sym</a>.<a href="../symtab/Types.scala.html#30236" title="(that: Erasure.this.global.Type)Boolean">tpe</a> =:= <a href="#54574" title="Erasure.this.global.Type">otpe</a>) &amp;&amp; (<a href="#54442" title="(key: Erasure.this.global.Symbol)Erasure.this.global.Symbol">bridgeTarget</a><span title="(x$1: AnyRef)Boolean">(</span><a href="#54599" title="Erasure.this.global.ScopeEntry">e</a>.<a href="../symtab/Scopes.scala.html#26807" title="=&gt; Erasure.this.global.Symbol">sym</a>) == <a href="#54555" title="Erasure.this.global.overridingPairs.global.Symbol">member</a>)))
                <a href="#54599" title="Erasure.this.global.ScopeEntry">e</a> = <a href="#54441" title="Erasure.this.global.Scope">bridgesScope</a>.<a href="../symtab/Scopes.scala.html#27143" title="(entry: Erasure.this.global.ScopeEntry)Erasure.this.global.ScopeEntry">lookupNextEntry</a>(<a href="#54599" title="Erasure.this.global.ScopeEntry">e</a>);
              (<a href="#54599" title="(x$1: AnyRef)Boolean">e</a> eq <span title="Null(null)" class="keyword">null</span>)
            }
          );
          <span title="Unit" class="keyword">if</span> (<a href="#54575" title="Boolean">bridgeNeeded</a>) {
            <span class="keyword">val</span> <a title="Erasure.this.global.overridingPairs.global.Symbol" id="54647">bridge</a> = <a href="#54556" title="Erasure.this.global.overridingPairs.global.Symbol">other</a>.<a href="../symtab/Symbols.scala.html#27030" title="(owner: Erasure.this.global.overridingPairs.global.Symbol)Erasure.this.global.overridingPairs.global.Symbol">cloneSymbolImpl</a>(<a href="#54336" title="Erasure.this.global.Symbol">owner</a>)
              .<a href="../symtab/Symbols.scala.html#26848" title="(pos: scala.tools.nsc.util.Position)Erasure.this.global.overridingPairs.global.Symbol">setPos</a>(<a href="#54336" title="Erasure.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#26847" title="=&gt; scala.tools.nsc.util.Position">pos</a>)
              .<a href="../symtab/Symbols.scala.html#26993" title="(mask: Long)Erasure.this.global.overridingPairs.global.Symbol">setFlag</a>(<a href="#54555" title="Erasure.this.global.overridingPairs.global.Symbol">member</a>.<a href="../symtab/Symbols.scala.html#26991" title="(x$1: Int)Long" id="3182">flags</a> | <span title="Int(67108864)">BRIDGE</span>)
              .<a href="../symtab/Symbols.scala.html#26994" title="(mask: Long)Erasure.this.global.overridingPairs.global.Symbol">resetFlag</a>(ACCESSOR | DEFERRED <a title="(x$1: Long)Long" id="3210">|</a> LAZY | <a href="../symtab/Flags.scala.html#28737" title="=&gt; Long">lateDEFERRED</a>)
            // the parameter symbols need to have the new owner
            <a href="#54647" title="Erasure.this.global.overridingPairs.global.Symbol">bridge</a>.<a href="../symtab/Symbols.scala.html#27005" title="(info: Erasure.this.global.overridingPairs.global.Type)bridge.type">setInfo</a>(<a href="#54574" title="Erasure.this.global.Type">otpe</a>.<a href="../symtab/Types.scala.html#30244" title="(owner: Erasure.this.global.Symbol)Erasure.this.global.Type">cloneInfo</a>(<a href="#54647" title="Erasure.this.global.overridingPairs.global.Symbol">bridge</a>))
            <a href="#54442" title="(key: Erasure.this.global.Symbol,value: Erasure.this.global.Symbol)Unit" id="44386">bridgeTarget</a>(<a href="#54647" title="Erasure.this.global.overridingPairs.global.Symbol">bridge</a>) = <a href="#54555" title="Erasure.this.global.overridingPairs.global.Symbol">member</a>
            <a href="../symtab/SymbolTable.scala.html#26097" title="(ph: scala.tools.nsc.Phase)(op: =&gt; Erasure.this.global.Symbol)Erasure.this.global.Symbol">atPhase</a>(<a href="../symtab/SymbolTable.scala.html#26088" title="=&gt; scala.tools.nsc.Phase">phase</a>.<a href="../Phase.scala.html#23158" title="=&gt; scala.tools.nsc.Phase">next</a>) { <a href="#54336" title="Erasure.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27004" title="=&gt; Erasure.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#30210" title="=&gt; Erasure.this.global.Scope">decls</a>.<a href="../symtab/Scopes.scala.html#27131" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.Symbol">enter</a>(<a href="#54647" title="Erasure.this.global.overridingPairs.global.Symbol">bridge</a>) }
            <span title="Unit" class="keyword">if</span> (<a href="#54556" title="Erasure.this.global.overridingPairs.global.Symbol">other</a>.<a href="../symtab/Symbols.scala.html#26983" title="(x$1: AnyRef)Boolean">owner</a> == <a href="#54336" title="Erasure.this.global.Symbol">owner</a>) {
              //println(&quot;bridge to same: &quot;+other+other.locationString)//DEBUG
              <a href="../symtab/SymbolTable.scala.html#26097" title="(ph: scala.tools.nsc.Phase)(op: =&gt; Unit)Unit">atPhase</a>(<a href="../symtab/SymbolTable.scala.html#26088" title="=&gt; scala.tools.nsc.Phase">phase</a>.<a href="../Phase.scala.html#23158" title="=&gt; scala.tools.nsc.Phase">next</a>) { <a href="#54336" title="Erasure.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27004" title="=&gt; Erasure.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#30210" title="=&gt; Erasure.this.global.Scope">decls</a>.<a href="../symtab/Scopes.scala.html#27137" title="(sym: Erasure.this.global.Symbol)Unit">unlink</a>(<a href="#54556" title="Erasure.this.global.overridingPairs.global.Symbol">other</a>) }
              <a href="#54439" title="scala.collection.immutable.Set[Erasure.this.global.Symbol]" id="39334">toBeRemoved</a> += <a href="#54556" title="Erasure.this.global.overridingPairs.global.Symbol">other</a>
            }
            <a href="../symtab/Scopes.scala.html#27131" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.Symbol">bridgesScope</a> enter <a href="#54647" title="Erasure.this.global.overridingPairs.global.Symbol">bridge</a>
            <a href="#54443" title="List[Erasure.this.global.Tree]">bridges</a> =
              <a href="../symtab/SymbolTable.scala.html#26097" title="(ph: scala.tools.nsc.Phase)(op: =&gt; Erasure.this.global.DefDef)Erasure.this.global.DefDef">atPhase</a>(<a href="../symtab/SymbolTable.scala.html#26088" title="=&gt; scala.tools.nsc.Phase">phase</a>.<a href="../Phase.scala.html#23158" title="=&gt; scala.tools.nsc.Phase">next</a>) {
                <a href="../ast/Trees.scala.html#26784" title="(pos: scala.tools.nsc.util.Position)(tree: Erasure.this.global.DefDef)Erasure.this.global.DefDef">atPos</a>(<a href="#54647" title="Erasure.this.global.overridingPairs.global.Symbol">bridge</a>.<a href="../symtab/Symbols.scala.html#26847" title="=&gt; scala.tools.nsc.util.Position">pos</a>) {
                  <span class="keyword">val</span> <a title="Erasure.this.global.DefDef" id="54847">bridgeDef</a> =
                    <a href="../ast/Trees.scala.html#26632" title="(sym: Erasure.this.global.Symbol,rhs: Erasure.this.global.Tree)Erasure.this.global.DefDef">DefDef</a>(<a href="#54647" title="Erasure.this.global.overridingPairs.global.Symbol">bridge</a>,
                      <a href="#54555" title="Erasure.this.global.overridingPairs.global.Symbol">member</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; Erasure.this.global.overridingPairs.global.Type">tpe</a> <span title="Erasure.this.global.Tree" class="keyword">match</span> {
                        <span title="Erasure.this.global.Literal" class="keyword">case</span> MethodType(<a href="#54900" title="(x: List[Erasure.this.global.Symbol])Some[List[Erasure.this.global.Symbol]]">List</a>(), ConstantType(<a title="Erasure.this.global.Constant" id="54911">c</a>)) =&gt; <a href="../ast/Trees.scala.html#49342" title="(value: Erasure.this.global.Constant)Erasure.this.global.Literal">Literal</a>(<a href="#54911" title="Erasure.this.global.Constant">c</a>)
                        <span title="Erasure.this.global.Tree" class="keyword">case</span> _ =&gt; 
                          (((<a href="../ast/Trees.scala.html#26731" title="(qualifier: Erasure.this.global.Tree,sym: Erasure.this.global.Symbol)Erasure.this.global.Select">Select</a>(<a href="../ast/Trees.scala.html#26727" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.Tree">This</a>(<a href="#54336" title="Erasure.this.global.Symbol">owner</a>), <a href="#54555" title="Erasure.this.global.overridingPairs.global.Symbol">member</a>): <a href="../ast/Trees.scala.html#26593" title="Erasure.this.global.Tree">Tree</a>) <a href="#54947" title="Erasure.this.global.Tree">/:</a> <a href="#54647" title="Erasure.this.global.overridingPairs.global.Symbol">bridge</a>.<a href="../symtab/Symbols.scala.html#27017" title="(z: Erasure.this.global.Tree)(op: (Erasure.this.global.Tree, List[Erasure.this.global.overridingPairs.global.Symbol]) =&gt; Erasure.this.global.Tree)Erasure.this.global.Tree" id="25292">paramss</a>)
                             ((<a title="Erasure.this.global.Tree" id="55016">fun</a>, <a title="List[Erasure.this.global.overridingPairs.global.Symbol]" id="55017">vparams</a>) =&gt; <a href="../ast/Trees.scala.html#49125" title="(fun: Erasure.this.global.Tree,args: List[Erasure.this.global.Tree])Erasure.this.global.Apply">Apply</a>(<a href="#55016" title="Erasure.this.global.Tree">fun</a>, <a href="#55017" title="(f: (Erasure.this.global.overridingPairs.global.Symbol) =&gt; Erasure.this.global.Ident)(implicit bf: scala.collection.generic.BuilderFactory[Erasure.this.global.Ident,List[Erasure.this.global.Tree],List[Erasure.this.global.overridingPairs.global.Symbol]])List[Erasure.this.global.Tree]">vparams</a> <span title="scala.collection.generic.BuilderFactory[Erasure.this.global.Ident,List[Erasure.this.global.Ident],List#Coll]">map</span> <a href="../ast/Trees.scala.html#26736" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.Ident">Ident</a>)))
                      });
                  <span title="Unit" class="keyword">if</span> (<a href="../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../Settings.scala.html#37759" title="=&gt; Boolean">value</a>)
                    <a href="../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;generating bridge from &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#54556" title="Erasure.this.global.overridingPairs.global.Symbol">other</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;(&quot;)" class="string">&quot;(&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="../symtab/Flags.scala.html#10413" title="object scala.tools.nsc.symtab.Flags">Flags</a>.<a href="../symtab/Flags.scala.html#28814" title="(flags: Long)String">flagsToString</a>(<a href="#54647" title="Erasure.this.global.overridingPairs.global.Symbol">bridge</a>.<a href="../symtab/Symbols.scala.html#26991" title="=&gt; Long">flags</a>)  <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;)&quot;)" class="string">&quot;)&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;:&quot;)" class="string">&quot;:&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#54574" title="Erasure.this.global.Type">otpe</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="#54556" title="Erasure.this.global.overridingPairs.global.Symbol">other</a>.<a href="../symtab/Symbols.scala.html#27092" title="=&gt; String">locationString</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; to &quot;)" class="string">&quot; to &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#54555" title="Erasure.this.global.overridingPairs.global.Symbol">member</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;:&quot;)" class="string">&quot;:&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#42448" title="(v1: Erasure.this.global.Type)Erasure.this.global.Type">erasure</a>(<a href="#54555" title="Erasure.this.global.overridingPairs.global.Symbol">member</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; Erasure.this.global.overridingPairs.global.Type">tpe</a>) <span title="(x$1: Any)java.lang.String">+</span> <a href="#54555" title="Erasure.this.global.overridingPairs.global.Symbol">member</a>.<a href="../symtab/Symbols.scala.html#27092" title="=&gt; String">locationString</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; =\012 &quot;)" class="string">&quot; =\n &quot;</span> + <a href="#54847" title="Erasure.this.global.DefDef">bridgeDef</a>);
                  <a href="#54847" title="Erasure.this.global.DefDef">bridgeDef</a>
                }
              } <a href="#54832" title="Erasure.this.global.DefDef">::</a> <a href="#54443" title="(x: Erasure.this.global.Tree)List[Erasure.this.global.Tree]">bridges</a>;
          }
        }
        <a href="#54444" title="Erasure.this.global.overridingPairs.Cursor">opc</a>.<a href="OverridingPairs.scala.html#54170" title="=&gt; Unit">next</a>
      }
      <span title="(_1: List[Erasure.this.global.Tree],_2: scala.collection.immutable.Set[Erasure.this.global.Symbol])(List[Erasure.this.global.Tree], scala.collection.immutable.Set[Erasure.this.global.Symbol])">(</span><a href="#54443" title="List[Erasure.this.global.Tree]">bridges</a>, <a href="#54439" title="scala.collection.immutable.Set[Erasure.this.global.Symbol]">toBeRemoved</a>)
    }
/*
      for (bc &lt;- site.baseClasses.tail; other &lt;- bc.info.decls.toList) {
        if (other.isMethod &amp;&amp; !other.isConstructor) {
          for (member &lt;- site.nonPrivateMember(other.name).alternatives) {
            if (member != other &amp;&amp;
                !(member hasFlag DEFERRED) &amp;&amp; 
                (site.memberType(member) matches site.memberType(other)) &amp;&amp;
                !(site.parents exists (p =&gt; 
                  (p.symbol isSubClass member.owner) &amp;&amp; (p.symbol isSubClass other.owner)))) {
...
             }
          }
*/

    <span class="keyword">def</span> <a title="(stats: List[Erasure.this.global.Tree],base: Erasure.this.global.Symbol)List[Erasure.this.global.Tree]" id="45493">addBridges</a>(<a title="List[Erasure.this.global.Tree]" id="53572">stats</a>: <span title="List[Erasure.this.global.Tree]">List</span>[Tree], <a title="Erasure.this.global.Symbol" id="53573">base</a>: <a href="../symtab/Symbols.scala.html#26127" title="Erasure.this.global.Symbol">Symbol</a>): <span title="List[Erasure.this.global.Tree]">List</span>[Tree] =
      <span title="List[Erasure.this.global.Tree]" class="keyword">if</span> (<a href="#53573" title="Erasure.this.global.Symbol">base</a>.<a href="../symtab/Symbols.scala.html#26923" title="=&gt; Boolean">isTrait</a>) <a href="#53572" title="List[Erasure.this.global.Tree]">stats</a>
      <span class="keyword">else</span> {
        <span class="keyword">val</span> <a href="#36432" title="(List[Erasure.this.global.Tree], scala.collection.immutable.Set[Erasure.this.global.Symbol])">(</a><a href="#55176" title="List[Erasure.this.global.Tree]" id="36432">bridges</a>, <a href="#55176" title="scala.collection.immutable.Set[Erasure.this.global.Symbol]" id="36434">toBeRemoved</a>) = <a href="#45492" title="(owner: Erasure.this.global.Symbol)(List[Erasure.this.global.Tree], scala.collection.immutable.Set[Erasure.this.global.Symbol])">bridgeDefs</a><span title="(List[Erasure.this.global.Tree], scala.collection.immutable.Set[Erasure.this.global.Symbol]) @unchecked">(</span><a href="#53573" title="Erasure.this.global.Symbol">base</a>)
        <span title="List[Erasure.this.global.Tree]" class="keyword">if</span> (<a href="#36432" title="List[Erasure.this.global.Tree]">bridges</a>.<span title="=&gt; Boolean">isEmpty</span>) <a href="#53572" title="List[Erasure.this.global.Tree]">stats</a> 
        <span class="keyword">else</span> (<a href="#53572" title="(p: (Erasure.this.global.Tree) =&gt; Boolean)List[Erasure.this.global.Tree]" id="25271">stats</a> filterNot (<a title="Erasure.this.global.Tree" id="55200">stat</a> =&gt; <a href="#36434" title="(elem: Erasure.this.global.Symbol)Boolean" id="39332">toBeRemoved</a> contains <a href="#55200" title="Erasure.this.global.Tree">stat</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; Erasure.this.global.Symbol">symbol</a>)) <a href="#55197" title="List[Erasure.this.global.Tree]">:::</a> <a href="#36432" title="(prefix: List[Erasure.this.global.Tree])List[Erasure.this.global.Tree]" id="24261">bridges</a>
      }

    /** &lt;p&gt;
     *    Transform tree at phase &lt;code&gt;erasure&lt;/code&gt; before retyping it.
     *    This entails the following:
     *  &lt;/p&gt;
     *  &lt;ul&gt;
     *    &lt;li&gt;Remove all type parameters in class and method definitions.&lt;/li&gt;
     *    &lt;li&gt;Remove all abstract and alias type definitions.&lt;/li&gt;
     *    &lt;li&gt;
     *      Remove all type applications other than those involving a type
     *      test or cast.
     *    &lt;/li&gt;
     *    &lt;li&gt;
     *      Remove all empty trees in statements and definitions in a
     *      &lt;code&gt;PackageDef&lt;/code&gt;.
     *    &lt;/li&gt;
     *    &lt;li&gt;Check that there are no double definitions in a template.&lt;/li&gt;
     *    &lt;li&gt;Add bridge definitions to a template.&lt;/li&gt;
     *    &lt;li&gt;
     *      Replace all types in type nodes and the &lt;code&gt;EmptyTree&lt;/code&gt;
     *      object by their erasure. Type nodes of type &lt;code&gt;Unit&lt;/code&gt;
     *      representing result types of methods are left alone.
     *    &lt;/li&gt;
     *    &lt;li&gt;
     *      Reset all other type attributes to &lt;code&gt;null&lt;/code&gt;, thus
     *      enforcing a retyping.
     *    &lt;/li&gt;
     *  &lt;/ul&gt;
     */
    <span class="keyword">private</span> <span class="keyword">val</span> <a title="Erasure.this.global.Transformer" id="45494">preTransformer</a> = <a href="#51947" title="Erasure.this.global.Transformer{ ... }" class="keyword">new</a> <a href="../ast/Trees.scala.html#26773" title="anonymous class $anon extends Erasure.this.global.Transformer" id="51947">Transformer</a> {
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree" id="51949">transform</a>(<a title="Erasure.this.global.Tree" id="51953">tree</a>: <a href="../ast/Trees.scala.html#26593" title="Erasure.this.global.Tree">Tree</a>): <a href="../ast/Trees.scala.html#26593" title="Erasure.this.global.Tree">Tree</a> = {
        <span title="Unit" class="keyword">if</span> (<a href="#51953" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="(x$1: AnyRef)Boolean">symbol</a> <span title="(x$1: Boolean)Boolean">==</span> <a href="../symtab/Definitions.scala.html#28393" title="=&gt; Erasure.this.global.Symbol">ArrayClass</a> &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#51953" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29373" title="=&gt; Boolean">isType</a>) <span title="Nothing" class="keyword">return</span> <a href="#51953" title="Erasure.this.global.Tree">tree</a>
        <span class="keyword">val</span> <a title="Erasure.this.global.Tree" id="51957">tree1</a> = <a href="#51953" title="Erasure.this.global.Tree">tree</a> <span title="Erasure.this.global.Tree" class="keyword">match</span> {
          <span title="Erasure.this.global.ClassDef" class="keyword">case</span> ClassDef(<a title="Erasure.this.global.Modifiers" id="52082">mods</a>, <a title="Erasure.this.global.Name" id="52083">name</a>, <a title="List[Erasure.this.global.TypeDef]" id="52084">tparams</a>, <a title="Erasure.this.global.Template" id="52085">impl</a>) =&gt;
            <span title="Unit" class="keyword">if</span> (<a href="../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../Settings.scala.html#37759" title="=&gt; Boolean">value</a>)
              <a href="../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;defs of &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#51953" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; Erasure.this.global.Symbol">symbol</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; = &quot;)" class="string">&quot; = &quot;</span> + <a href="#51953" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; Erasure.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27004" title="=&gt; Erasure.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#30210" title="=&gt; Erasure.this.global.Scope">decls</a>)
            <a href="../ast/Trees.scala.html#45465" title="=&gt; Erasure.this.global.TreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#48541" title="(tree: Erasure.this.global.Tree,mods: Erasure.this.global.Modifiers,name: Erasure.this.global.Name,tparams: List[Erasure.this.global.TypeDef],impl: Erasure.this.global.Template)Erasure.this.global.ClassDef">ClassDef</a>(<a href="#51953" title="Erasure.this.global.Tree">tree</a>, <a href="#52082" title="Erasure.this.global.Modifiers">mods</a>, <a href="#52083" title="Erasure.this.global.Name">name</a>, List<span title="object Nil">(</span>), <a href="#52085" title="Erasure.this.global.Template">impl</a>)
          <span title="Erasure.this.global.DefDef" class="keyword">case</span> DefDef(<a title="Erasure.this.global.Modifiers" id="52377">mods</a>, <a title="Erasure.this.global.Name" id="52378">name</a>, <a title="List[Erasure.this.global.TypeDef]" id="52379">tparams</a>, <a title="List[List[Erasure.this.global.ValDef]]" id="52380">vparamss</a>, <a title="Erasure.this.global.Tree" id="52381">tpt</a>, <a title="Erasure.this.global.Tree" id="52382">rhs</a>) =&gt;
            <a href="../ast/Trees.scala.html#45465" title="=&gt; Erasure.this.global.TreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#48545" title="(tree: Erasure.this.global.Tree,mods: Erasure.this.global.Modifiers,name: Erasure.this.global.Name,tparams: List[Erasure.this.global.TypeDef],vparamss: List[List[Erasure.this.global.ValDef]],tpt: Erasure.this.global.Tree,rhs: Erasure.this.global.Tree)Erasure.this.global.DefDef">DefDef</a>(<a href="#51953" title="Erasure.this.global.Tree">tree</a>, <a href="#52377" title="Erasure.this.global.Modifiers">mods</a>, <a href="#52378" title="Erasure.this.global.Name">name</a>, List<span title="object Nil">(</span>), <a href="#52380" title="List[List[Erasure.this.global.ValDef]]">vparamss</a>, <a href="#52381" title="Erasure.this.global.Tree">tpt</a>, <a href="#52382" title="Erasure.this.global.Tree">rhs</a>)
          <span title="Erasure.this.global.EmptyTree.type" class="keyword">case</span> TypeDef(_, _, _, _) =&gt;
            <a href="../ast/Trees.scala.html#26602" title="object Erasure.this.global.EmptyTree">EmptyTree</a>
          <span title="Erasure.this.global.Tree" class="keyword">case</span> TypeApply(<a title="Erasure.this.global.Tree" id="52456">fun</a>, <a title="List[Erasure.this.global.Tree]" id="52457">args</a>) <span class="keyword">if</span> (<a href="#52456" title="Erasure.this.global.Tree">fun</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; Erasure.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#26983" title="(x$1: AnyRef)Boolean">owner</a> <span title="(x$1: Boolean)Boolean">!=</span> <a href="../symtab/Definitions.scala.html#28261" title="=&gt; Erasure.this.global.Symbol">AnyClass</a> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> 
                                        <a href="#52456" title="Erasure.this.global.Tree">fun</a>.<a href="../ast/Trees.scala.html#29367" title="(x$1: AnyRef)Boolean">symbol</a> != <a href="../symtab/Definitions.scala.html#28525" title="=&gt; Erasure.this.global.Symbol">Object_asInstanceOf</a> &amp;&amp;
                                        <a href="#52456" title="Erasure.this.global.Tree">fun</a>.<a href="../ast/Trees.scala.html#29367" title="(x$1: AnyRef)Boolean">symbol</a> != <a href="../symtab/Definitions.scala.html#28522" title="=&gt; Erasure.this.global.Symbol">Object_isInstanceOf</a>) =&gt;
            // leave all other type tests/type casts, remove all other type applications
            <a href="#52456" title="Erasure.this.global.Tree">fun</a>
          <span title="Erasure.this.global.Tree" class="keyword">case</span> Apply(<a title="Erasure.this.global.Tree" id="52487">fn</a>, <a title="List[Erasure.this.global.Tree]" id="52488">args</a>) =&gt;
            <span class="keyword">def</span> <a title="(tpe: Erasure.this.global.Type)Boolean" id="52491">isGenericArray</a>(<a title="Erasure.this.global.Type" id="52492">tpe</a>: <a href="../symtab/Types.scala.html#26205" title="Erasure.this.global.Type">Type</a>): <span title="Boolean">Boolean</span> = <a href="#42448" title="(v1: Erasure.this.global.Type)Erasure.this.global.Type">erasure</a>(<a href="#52492" title="Erasure.this.global.Type">tpe</a>).<a href="../symtab/Types.scala.html#30180" title="(x$1: AnyRef)Boolean">typeSymbol</a> == <a href="../symtab/Definitions.scala.html#28543" title="=&gt; Erasure.this.global.Symbol">BoxedArrayClass</a>
            <span title="Unit" class="keyword">if</span> (<a href="#52487" title="Erasure.this.global.Tree">fn</a>.<a href="../ast/Trees.scala.html#29370" title="(x$1: Boolean)Boolean">hasSymbol</a> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span>
                <a href="#52487" title="Erasure.this.global.Tree">fn</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; Erasure.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#26988" title="(x$1: AnyRef)Boolean">name</a> == <a href="../symtab/StdNames.scala.html#26531" title="object Erasure.this.global.nme">nme</a>.<a href="../symtab/StdNames.scala.html#29832" title="=&gt; Erasure.this.global.Name">arraycopy</a> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> 
                <a href="#52487" title="Erasure.this.global.Tree">fn</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; Erasure.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#26983" title="=&gt; Erasure.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#26988" title="(x$1: AnyRef)Boolean">name</a> == <a href="../symtab/StdNames.scala.html#26531" title="object Erasure.this.global.nme">nme</a>.<a href="../symtab/StdNames.scala.html#29816" title="=&gt; Erasure.this.global.Name">System</a>.<a href="../symtab/Names.scala.html#28202" title="=&gt; Erasure.this.global.Name">toTypeName</a> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> 
                <a href="#52487" title="Erasure.this.global.Tree">fn</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; Erasure.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#26983" title="=&gt; Erasure.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#26983" title="(x$1: AnyRef)Boolean">owner</a> == <a href="../symtab/Definitions.scala.html#28245" title="=&gt; Erasure.this.global.Symbol">JavaLangPackage</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; Erasure.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30180" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span>
                <a href="#52488" title="List[Erasure.this.global.Tree]">args</a>.<span title="(x$1: Int)Boolean">length</span> == <span title="Int(5)" class="int">5</span> &amp;&amp;
                (<a href="#52491" title="(tpe: Erasure.this.global.Type)Boolean">isGenericArray</a><span title="(x$1: Boolean)Boolean">(</span><a href="#52488" title="(n: Int)Erasure.this.global.Tree">args</a>(<span title="Int(0)" class="int">0</span>).<a href="../ast/Trees.scala.html#29363" title="=&gt; Erasure.this.global.Type">tpe</a>) || <a href="#52491" title="(tpe: Erasure.this.global.Type)Boolean">isGenericArray</a>(<a href="#52488" title="(n: Int)Erasure.this.global.Tree">args</a>(<span title="Int(2)" class="int">2</span>).<a href="../ast/Trees.scala.html#29363" title="=&gt; Erasure.this.global.Type">tpe</a>))) 
              <a href="#45497" title="Erasure.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#45456" title="(pos: scala.tools.nsc.util.Position,msg: String)Unit">warning</a>(<a href="#51953" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29361" title="=&gt; scala.tools.nsc.util.Position">pos</a>, 
                           <span class="string">&quot;System.arraycopy should be applied only to arrays with fixed element types;\n&quot;</span> <span title="java.lang.String(&quot;System.arraycopy should be applied only to arrays with fixed element types;\012use Array.copy instead&quot;)">+</span> 
                           <span class="string">&quot;use Array.copy instead&quot;</span>)
            <span title="Erasure.this.global.Tree" class="keyword">if</span> (<a href="#52487" title="Erasure.this.global.Tree">fn</a>.<a href="../ast/Trees.scala.html#29367" title="(x$1: AnyRef)Boolean">symbol</a> == <a href="../symtab/Definitions.scala.html#28504" title="=&gt; Erasure.this.global.Symbol">Any_asInstanceOf</a>)
              <a href="#52487" title="Erasure.this.global.Tree">fn</a> <span title="Erasure.this.global.Tree" class="keyword">match</span> {
                <span title="Erasure.this.global.Tree" class="keyword">case</span> TypeApply(Select(<a title="Erasure.this.global.Tree" id="52608">qual</a>, _), <a href="#52612" title="(x: List[Erasure.this.global.Tree])Some[List[Erasure.this.global.Tree]]">List</a>(<a title="Erasure.this.global.Tree" id="52621">targ</a>)) =&gt;
                  <span title="Erasure.this.global.Tree" class="keyword">if</span> (<a href="#52608" title="Erasure.this.global.Tree">qual</a>.<a href="../symtab/Types.scala.html#30235" title="(that: Erasure.this.global.Type)Boolean">tpe</a> &lt;:&lt; <a href="#52621" title="Erasure.this.global.Tree">targ</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; Erasure.this.global.Type">tpe</a>) {
                    <a href="../ast/Trees.scala.html#26784" title="(pos: scala.tools.nsc.util.Position)(tree: Erasure.this.global.Typed)Erasure.this.global.Typed">atPos</a>(<a href="#51953" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29361" title="=&gt; scala.tools.nsc.util.Position">pos</a>) { <a href="../ast/Trees.scala.html#50375" title="(expr: Erasure.this.global.Tree,tpt: Erasure.this.global.Tree)Erasure.this.global.Typed">Typed</a>(<a href="#52608" title="Erasure.this.global.Tree">qual</a>, <a href="../ast/Trees.scala.html#26744" title="(tp: Erasure.this.global.Type)Erasure.this.global.TypeTree">TypeTree</a>(<a href="#52621" title="Erasure.this.global.Tree">targ</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; Erasure.this.global.Type">tpe</a>)) }
                  } <span class="keyword">else</span> <span title="Erasure.this.global.Tree" class="keyword">if</span> (<a href="../symtab/Definitions.scala.html#28607" title="(sym: Erasure.this.global.Symbol)Boolean">isNumericValueClass</a><span title="(x$1: Boolean)Boolean">(</span><a href="#52608" title="Erasure.this.global.Tree">qual</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; Erasure.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30180" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a>) &amp;&amp; 
                             <a href="../symtab/Definitions.scala.html#28607" title="(sym: Erasure.this.global.Symbol)Boolean">isNumericValueClass</a>(<a href="#52621" title="Erasure.this.global.Tree">targ</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; Erasure.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30180" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a>)) {
                    // convert numeric type casts
                    <span class="keyword">val</span> <a title="Erasure.this.global.Name" id="52676">cname</a> = <a href="../symtab/Names.scala.html#26048" title="(s: String)Erasure.this.global.Name">newTermName</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;to&quot;</span> + <a href="#52621" title="Erasure.this.global.Tree">targ</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; Erasure.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30180" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a>.<a href="../symtab/Symbols.scala.html#26988" title="=&gt; Erasure.this.global.Name">name</a>)
                    <span class="keyword">val</span> <a title="Erasure.this.global.Symbol" id="52677">csym</a> = <a href="#52608" title="Erasure.this.global.Tree">qual</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; Erasure.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30217" title="(name: Erasure.this.global.Name)Erasure.this.global.Symbol">member</a>(<a href="#52676" title="Erasure.this.global.Name">cname</a>)
                    <span title="(assertion: Boolean)Unit">assert</span>(<a href="#52677" title="(x$1: AnyRef)Boolean">csym</a> != <a href="../symtab/Symbols.scala.html#26134" title="object Erasure.this.global.NoSymbol">NoSymbol</a>)
                    <a href="../ast/Trees.scala.html#26784" title="(pos: scala.tools.nsc.util.Position)(tree: Erasure.this.global.Apply)Erasure.this.global.Apply">atPos</a>(<a href="#51953" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29361" title="=&gt; scala.tools.nsc.util.Position">pos</a>) { <a href="../ast/Trees.scala.html#49125" title="(fun: Erasure.this.global.Tree,args: List[Erasure.this.global.Tree])Erasure.this.global.Apply">Apply</a>(<a href="../ast/Trees.scala.html#26731" title="(qualifier: Erasure.this.global.Tree,sym: Erasure.this.global.Symbol)Erasure.this.global.Select">Select</a>(<a href="#52608" title="Erasure.this.global.Tree">qual</a>, <a href="#52677" title="Erasure.this.global.Symbol">csym</a>), List<span title="object Nil">(</span>)) }
                  } <span class="keyword">else</span> 
                    <a href="#51953" title="Erasure.this.global.Tree">tree</a>
              }
              // todo: also handle the case where the singleton type is buried in a compound
            <span class="keyword">else</span> <span title="Erasure.this.global.gen.global.Tree" class="keyword">if</span> (<a href="#52487" title="Erasure.this.global.Tree">fn</a>.<a href="../ast/Trees.scala.html#29367" title="(x$1: AnyRef)Boolean">symbol</a> == <a href="../symtab/Definitions.scala.html#28501" title="=&gt; Erasure.this.global.Symbol">Any_isInstanceOf</a>)
              <a href="#52487" title="Erasure.this.global.Tree">fn</a> <span title="Erasure.this.global.gen.global.Tree" class="keyword">match</span> {
                <span title="Erasure.this.global.gen.global.Tree" class="keyword">case</span> TypeApply(<a title="Erasure.this.global.Select" id="52775">sel</a> @ Select(<a title="Erasure.this.global.Tree" id="52780">qual</a>, <a title="Erasure.this.global.Name" id="52781">name</a>), <a href="#52785" title="(x: List[Erasure.this.global.Tree])Some[List[Erasure.this.global.Tree]]">List</a>(<a title="Erasure.this.global.Tree" id="52794">targ</a>)) =&gt;
                  <span class="keyword">def</span> <a title="(q: () =&gt; Erasure.this.global.Tree)(tp: Erasure.this.global.Type)Erasure.this.global.Tree" id="52798">mkIsInstanceOf</a>(<a title="() =&gt; Erasure.this.global.Tree" id="52799">q</a>: () =&gt; Tree)(<a title="Erasure.this.global.Type" id="52800">tp</a>: <a href="../symtab/Types.scala.html#26205" title="Erasure.this.global.Type">Type</a>): <a href="../ast/Trees.scala.html#26593" title="Erasure.this.global.Tree">Tree</a> =
                    <a href="../ast/Trees.scala.html#49125" title="(fun: Erasure.this.global.Tree,args: List[Erasure.this.global.Tree])Erasure.this.global.Apply">Apply</a><a href="../ast/Trees.scala.html#29365" title="(pos: scala.tools.nsc.util.Position)Erasure.this.global.Apply">(</a>
                      <a href="../ast/Trees.scala.html#50717" title="(fun: Erasure.this.global.Tree,args: List[Erasure.this.global.Tree])Erasure.this.global.TypeApply">TypeApply</a><a href="../ast/Trees.scala.html#29365" title="(pos: scala.tools.nsc.util.Position)Erasure.this.global.TypeApply">(</a>
                        <a href="../ast/Trees.scala.html#26731" title="(qualifier: Erasure.this.global.Tree,sym: Erasure.this.global.Symbol)Erasure.this.global.Select">Select</a><a href="../ast/Trees.scala.html#29365" title="(pos: scala.tools.nsc.util.Position)Erasure.this.global.Select">(</a><a href="#52799" title="()Erasure.this.global.Tree">q</a>(), <a href="../symtab/Definitions.scala.html#28522" title="=&gt; Erasure.this.global.Symbol">Object_isInstanceOf</a>) setPos <a href="#52775" title="Erasure.this.global.Select">sel</a>.<a href="../ast/Trees.scala.html#29361" title="=&gt; scala.tools.nsc.util.Position">pos</a>, 
                        <span title="(xs: Erasure.this.global.TypeTree*)List[Erasure.this.global.TypeTree]">List</span>(<a href="../ast/Trees.scala.html#26744" title="(tp: Erasure.this.global.Type)Erasure.this.global.TypeTree">TypeTree</a><a href="../ast/Trees.scala.html#29365" title="(pos: scala.tools.nsc.util.Position)Erasure.this.global.TypeTree">(</a><a href="#52800" title="Erasure.this.global.Type">tp</a>) setPos <a href="#52794" title="Erasure.this.global.Tree">targ</a>.<a href="../ast/Trees.scala.html#29361" title="=&gt; scala.tools.nsc.util.Position">pos</a>)) setPos <a href="#52487" title="Erasure.this.global.Tree">fn</a>.<a href="../ast/Trees.scala.html#29361" title="=&gt; scala.tools.nsc.util.Position">pos</a>,
                      List<span title="object Nil">(</span>)) setPos <a href="#51953" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29361" title="=&gt; scala.tools.nsc.util.Position">pos</a>
                  <a href="#52794" title="Erasure.this.global.Tree">targ</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; Erasure.this.global.Type">tpe</a> <span title="Erasure.this.global.gen.global.Tree" class="keyword">match</span> {
                    <span title="Erasure.this.global.Apply" class="keyword">case</span> SingleType(_, _) | ThisType(_) | SuperType(_, _) =&gt;
                      <span class="keyword">val</span> <a title="Erasure.this.global.Symbol" id="53034">cmpOp</a> = <span title="Erasure.this.global.Symbol" class="keyword">if</span> (<a href="#52794" title="Erasure.this.global.Tree">targ</a>.<a href="../symtab/Types.scala.html#30235" title="(that: Erasure.this.global.Type)Boolean">tpe</a> &lt;:&lt; <a href="../symtab/Definitions.scala.html#28263" title="=&gt; Erasure.this.global.Symbol">AnyValClass</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; Erasure.this.global.Type">tpe</a>) <a href="../symtab/Definitions.scala.html#28492" title="=&gt; Erasure.this.global.Symbol">Any_equals</a> <span class="keyword">else</span> <a href="../symtab/Definitions.scala.html#28507" title="=&gt; Erasure.this.global.Symbol">Object_eq</a>
                      <a href="../ast/Trees.scala.html#26784" title="(pos: scala.tools.nsc.util.Position)(tree: Erasure.this.global.Apply)Erasure.this.global.Apply">atPos</a>(<a href="#51953" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29361" title="=&gt; scala.tools.nsc.util.Position">pos</a>) {
                        <a href="../ast/Trees.scala.html#49125" title="(fun: Erasure.this.global.Tree,args: List[Erasure.this.global.Tree])Erasure.this.global.Apply">Apply</a>(<a href="../ast/Trees.scala.html#26731" title="(qualifier: Erasure.this.global.Tree,sym: Erasure.this.global.Symbol)Erasure.this.global.Select">Select</a>(<a href="#52780" title="Erasure.this.global.Tree">qual</a>, <a href="#53034" title="Erasure.this.global.Symbol">cmpOp</a>), <span title="(xs: Erasure.this.global.gen.global.Tree*)List[Erasure.this.global.gen.global.Tree]">List</span>(<a href="../Global.scala.html#39031" title="object Erasure.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#42673" title="(tpe: Erasure.this.global.gen.global.Type)Erasure.this.global.gen.global.Tree">mkAttributedQualifier</a>(<a href="#52794" title="Erasure.this.global.Tree">targ</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; Erasure.this.global.Type">tpe</a>)))
                      }
                    <span title="Erasure.this.global.gen.global.Tree" class="keyword">case</span> RefinedType(<a title="List[Erasure.this.global.Type]" id="53121">parents</a>, <a title="Erasure.this.global.Scope" id="53122">decls</a>) <span class="keyword">if</span> (<a href="#53121" title="List[Erasure.this.global.Type]">parents</a>.<a title="(x$1: Int)Boolean" id="2962">length</a> &gt;= <span title="Int(2)" class="int">2</span>) =&gt;
                      <a href="../Global.scala.html#39031" title="object Erasure.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#42706" title="(expr: Erasure.this.global.gen.global.Tree,owner: Erasure.this.global.gen.global.Symbol,unit: Erasure.this.global.gen.global.CompilationUnit)(within: (() =&gt; Erasure.this.global.gen.global.Tree) =&gt; Erasure.this.global.gen.global.Tree)Erasure.this.global.gen.global.Tree">evalOnce</a>(<a href="#52780" title="Erasure.this.global.Tree">qual</a>, <a href="../ast/Trees.scala.html#45467" title="=&gt; Erasure.this.global.Symbol">currentOwner</a>, <a href="#45497" title="Erasure.this.global.CompilationUnit">unit</a>) { <a title="() =&gt; Erasure.this.global.gen.global.Tree" id="53139">q</a> =&gt;
                        <a href="../ast/Trees.scala.html#26784" title="(pos: scala.tools.nsc.util.Position)(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">atPos</a>(<a href="#51953" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29361" title="=&gt; scala.tools.nsc.util.Position">pos</a>) {
                          <a href="#53121" title="(f: (Erasure.this.global.Type) =&gt; Erasure.this.global.Tree)(implicit bf: scala.collection.generic.BuilderFactory[Erasure.this.global.Tree,List[Erasure.this.global.Tree],List[Erasure.this.global.Type]])List[Erasure.this.global.Tree]">parents</a> <a title="(op: (Erasure.this.global.Tree, Erasure.this.global.Tree) =&gt; Erasure.this.global.Tree)Erasure.this.global.Tree" id="28954">map</a> <a href="#52798" title="(q: () =&gt; Erasure.this.global.Tree)(tp: Erasure.this.global.Type)Erasure.this.global.Tree">mkIsInstanceOf</a><a href="#53158" title="Erasure.this.global.Type">(</a><a href="#53139" title="() =&gt; Erasure.this.global.gen.global.Tree">q</a>) reduceRight <a href="../Global.scala.html#39031" title="object Erasure.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#42692" title="(tree1: Erasure.this.global.gen.global.Tree,tree2: Erasure.this.global.gen.global.Tree)Erasure.this.global.gen.global.Tree">mkAnd</a>
                        }
                      }
                    <span title="Erasure.this.global.gen.global.Tree" class="keyword">case</span> _ =&gt;
                      <span title="Erasure.this.global.gen.global.Tree" class="keyword">if</span> (<a href="#42462" title="(sym: Erasure.this.global.Symbol)Boolean">isSeqClass</a>(<a href="#52794" title="Erasure.this.global.Tree">targ</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; Erasure.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30180" title="=&gt; Erasure.this.global.Symbol">typeSymbol</a>)) { 
                        <a href="../ast/Trees.scala.html#26784" title="(pos: scala.tools.nsc.util.Position)(tree: Erasure.this.global.gen.global.Tree)Erasure.this.global.gen.global.Tree">atPos</a>(<a href="#51953" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29361" title="=&gt; scala.tools.nsc.util.Position">pos</a>) {
                          <a href="../Global.scala.html#39031" title="object Erasure.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#42706" title="(expr: Erasure.this.global.gen.global.Tree,owner: Erasure.this.global.gen.global.Symbol,unit: Erasure.this.global.gen.global.CompilationUnit)(within: (() =&gt; Erasure.this.global.gen.global.Tree) =&gt; Erasure.this.global.gen.global.Tree)Erasure.this.global.gen.global.Tree">evalOnce</a>(<a href="#52780" title="Erasure.this.global.Tree">qual</a>, <a href="../ast/Trees.scala.html#45467" title="=&gt; Erasure.this.global.Symbol">currentOwner</a>, <a href="#45497" title="Erasure.this.global.CompilationUnit">unit</a>) { <a title="() =&gt; Erasure.this.global.gen.global.Tree" id="53300">q</a> =&gt;
                            <a href="../Global.scala.html#39031" title="object Erasure.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#42693" title="(tree1: Erasure.this.global.gen.global.Tree,tree2: Erasure.this.global.gen.global.Tree)Erasure.this.global.gen.global.Tree">mkOr</a>(
                              <a href="#52798" title="(q: () =&gt; Erasure.this.global.Tree)(tp: Erasure.this.global.Type)Erasure.this.global.Tree">mkIsInstanceOf</a>(<a href="#53300" title="() =&gt; Erasure.this.global.gen.global.Tree">q</a>)(<a href="#52794" title="Erasure.this.global.Tree">targ</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; Erasure.this.global.Type">tpe</a>), 
                              <a href="../ast/Trees.scala.html#26784" title="(pos: scala.tools.nsc.util.Position)(tree: Erasure.this.global.Apply)Erasure.this.global.Apply">atPos</a>(<a href="#51953" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29361" title="=&gt; scala.tools.nsc.util.Position">pos</a>) { <a href="../ast/TreeDSL.scala.html#42533" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.gen.global.Tree">REF</a><a href="../ast/TreeDSL.scala.html#45081" title="(params: Erasure.this.global.Tree*)Erasure.this.global.Apply">(</a><a href="../symtab/Definitions.scala.html#28351" title="=&gt; Erasure.this.global.Symbol">isArrayMethod</a>) APPLY (<a href="#53300" title="()Erasure.this.global.gen.global.Tree">q</a>()) }
                            )
                          }
                        }
                      } <span class="keyword">else</span> <a href="#51953" title="Erasure.this.global.Tree">tree</a>
                  }
                <span title="Erasure.this.global.Tree" class="keyword">case</span> _ =&gt; <a href="#51953" title="Erasure.this.global.Tree">tree</a>
              }
            <span class="keyword">else</span> {
              <span class="keyword">def</span> <a title="(fn: Erasure.this.global.Tree,qual: Erasure.this.global.Tree)Erasure.this.global.Tree" id="53380">doDynamic</a>(<a title="Erasure.this.global.Tree" id="53381">fn</a>: <a href="../ast/Trees.scala.html#26593" title="Erasure.this.global.Tree">Tree</a>, <a title="Erasure.this.global.Tree" id="53382">qual</a>: <a href="../ast/Trees.scala.html#26593" title="Erasure.this.global.Tree">Tree</a>): <a href="../ast/Trees.scala.html#26593" title="Erasure.this.global.Tree">Tree</a> = {
                <span title="Erasure.this.global.Tree" class="keyword">if</span> (<a href="#53381" title="Erasure.this.global.Tree">fn</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; Erasure.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#26983" title="=&gt; Erasure.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#26933" title="(x$1: Boolean)Boolean">isRefinementClass</a> &amp;&amp; <a href="#53381" title="Erasure.this.global.Tree">fn</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; Erasure.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27064" title="=&gt; List[Erasure.this.global.Symbol]">allOverriddenSymbols</a>.<span title="=&gt; Boolean">isEmpty</span>)
                  <a href="../ast/Trees.scala.html#53406" title="(qual: Erasure.this.global.Tree,args: List[Erasure.this.global.Tree])Erasure.this.global.ApplyDynamic">ApplyDynamic</a><a href="../ast/Trees.scala.html#29369" title="(sym: Erasure.this.global.Symbol)Erasure.this.global.ApplyDynamic">(</a><a href="#53382" title="Erasure.this.global.Tree">qual</a>, <a href="#52488" title="List[Erasure.this.global.Tree]">args</a>) <a href="../ast/Trees.scala.html#29365" title="(pos: scala.tools.nsc.util.Position)Erasure.this.global.ApplyDynamic">setSymbol</a> <a href="#53381" title="Erasure.this.global.Tree">fn</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; Erasure.this.global.Symbol">symbol</a> setPos <a href="#51953" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29361" title="=&gt; scala.tools.nsc.util.Position">pos</a>
                <span class="keyword">else</span> <a href="#51953" title="Erasure.this.global.Tree">tree</a>
              }
              <a href="#52487" title="Erasure.this.global.Tree">fn</a> <span title="Erasure.this.global.Tree" class="keyword">match</span> {
                <span title="Erasure.this.global.Tree" class="keyword">case</span> Select(<a title="Erasure.this.global.Tree" id="53456">qual</a>, _) =&gt; <a href="#53380" title="(fn: Erasure.this.global.Tree,qual: Erasure.this.global.Tree)Erasure.this.global.Tree">doDynamic</a>(<a href="#52487" title="Erasure.this.global.Tree">fn</a>, <a href="#53456" title="Erasure.this.global.Tree">qual</a>)
                <span title="Erasure.this.global.Tree" class="keyword">case</span> TypeApply(<a title="Erasure.this.global.Select" id="53463">fni</a>@Select(<a title="Erasure.this.global.Tree" id="53468">qual</a>, _), _) =&gt; <a href="#53380" title="(fn: Erasure.this.global.Tree,qual: Erasure.this.global.Tree)Erasure.this.global.Tree">doDynamic</a>(<a href="#53463" title="Erasure.this.global.Select">fni</a>, <a href="#53468" title="Erasure.this.global.Tree">qual</a>)// type parameters are irrelevant in case of dynamic call
                <span title="Erasure.this.global.Tree" class="keyword">case</span> _ =&gt;    
                  <a href="#51953" title="Erasure.this.global.Tree">tree</a>
              }
            }

          <span title="Erasure.this.global.Tree" class="keyword">case</span> Select(_, _) =&gt;
            <span title="Unit" class="keyword">if</span> (<a href="#51953" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; Erasure.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#26983" title="=&gt; Erasure.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#26933" title="=&gt; Boolean">isRefinementClass</a>) {
              <span class="keyword">val</span> <a title="List[Erasure.this.global.Symbol]" id="53481">overridden</a> = <a href="#51953" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; Erasure.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27064" title="=&gt; List[Erasure.this.global.Symbol]">allOverriddenSymbols</a>
              <span title="(assertion: Boolean,message: =&gt; Any)Unit">assert</span>(<span title="=&gt; Boolean">!</span><a href="#53481" title="List[Erasure.this.global.Symbol]">overridden</a>.<span title="=&gt; Boolean">isEmpty</span>, <a href="#51953" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; Erasure.this.global.Symbol">symbol</a>)
              <a href="#51953" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29368" title="(sym: Erasure.this.global.Symbol)Unit">symbol</a> = <a href="#53481" title="List[Erasure.this.global.Symbol]">overridden</a>.<span title="=&gt; Erasure.this.global.Symbol">head</span>
            }
            <a href="#51953" title="Erasure.this.global.Tree">tree</a>

          <span title="Erasure.this.global.Template" class="keyword">case</span> Template(<a title="List[Erasure.this.global.Tree]" id="53547">parents</a>, <a title="Erasure.this.global.ValDef" id="53548">self</a>, <a title="List[Erasure.this.global.Tree]" id="53549">body</a>) =&gt;
            <span title="(assertion: Boolean)Unit">assert</span>(<span title="=&gt; Boolean">!</span><a href="../ast/Trees.scala.html#45467" title="=&gt; Erasure.this.global.Symbol">currentOwner</a>.<a href="../symtab/Symbols.scala.html#26961" title="=&gt; Boolean">isImplClass</a>)
            //Console.println(&quot;checking no dble defs &quot; + tree)//DEBUG
            <a href="#45491" title="(root: Erasure.this.global.Symbol)Unit">checkNoDoubleDefs</a>(<a href="#51953" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; Erasure.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#26983" title="=&gt; Erasure.this.global.Symbol">owner</a>)
            <a href="../ast/Trees.scala.html#45465" title="=&gt; Erasure.this.global.TreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#48550" title="(tree: Erasure.this.global.Tree,parents: List[Erasure.this.global.Tree],self: Erasure.this.global.ValDef,body: List[Erasure.this.global.Tree])Erasure.this.global.Template">Template</a>(<a href="#51953" title="Erasure.this.global.Tree">tree</a>, <a href="#53547" title="List[Erasure.this.global.Tree]">parents</a>, <a href="../ast/Trees.scala.html#26624" title="object Erasure.this.global.emptyValDef">emptyValDef</a>, <a href="#45493" title="(stats: List[Erasure.this.global.Tree],base: Erasure.this.global.Symbol)List[Erasure.this.global.Tree]">addBridges</a>(<a href="#53549" title="List[Erasure.this.global.Tree]">body</a>, <a href="../ast/Trees.scala.html#45467" title="=&gt; Erasure.this.global.Symbol">currentOwner</a>))

          <span title="Erasure.this.global.Match" class="keyword">case</span> Match(<a title="Erasure.this.global.Tree" id="53581">selector</a>, <a title="List[Erasure.this.global.CaseDef]" id="53582">cases</a>) =&gt;
            <a href="../ast/Trees.scala.html#51629" title="(selector: Erasure.this.global.Tree,cases: List[Erasure.this.global.CaseDef])Erasure.this.global.Match">Match</a>(<a href="../ast/Trees.scala.html#50375" title="(expr: Erasure.this.global.Tree,tpt: Erasure.this.global.Tree)Erasure.this.global.Typed">Typed</a>(<a href="#53581" title="Erasure.this.global.Tree">selector</a>, <a href="../ast/Trees.scala.html#26744" title="(tp: Erasure.this.global.Type)Erasure.this.global.TypeTree">TypeTree</a>(<a href="#53581" title="Erasure.this.global.Tree">selector</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; Erasure.this.global.Type">tpe</a>)), <a href="#53582" title="List[Erasure.this.global.CaseDef]">cases</a>)

          <span title="Erasure.this.global.Literal" class="keyword">case</span> Literal(<a title="Erasure.this.global.Constant" id="53648">ct</a>) <span class="keyword">if</span> <a href="#53648" title="Erasure.this.global.Constant">ct</a>.<a href="../symtab/Constants.scala.html#42809" title="(x$1: Int)Boolean">tag</a> <span title="(x$1: Boolean)Boolean">==</span> <span title="Int(12)">ClassTag</span> 
                           &amp;&amp; <a href="#53648" title="Erasure.this.global.Constant">ct</a>.<a href="../symtab/Constants.scala.html#42824" title="=&gt; Erasure.this.global.Type">typeValue</a>.<a href="../symtab/Types.scala.html#30180" title="(x$1: AnyRef)Boolean">typeSymbol</a> != <a href="../symtab/Definitions.scala.html#26479" title="object Erasure.this.global.definitions">definitions</a>.<a href="../symtab/Definitions.scala.html#28277" title="=&gt; Erasure.this.global.Symbol">UnitClass</a> =&gt;
            <a href="../ast/Trees.scala.html#45465" title="=&gt; Erasure.this.global.TreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#48576" title="(tree: Erasure.this.global.Tree,value: Erasure.this.global.Constant)Erasure.this.global.Literal">Literal</a>(<a href="#51953" title="Erasure.this.global.Tree">tree</a>, <a href="../symtab/Constants.scala.html#49552" title="(value: Any)Erasure.this.global.Constant">Constant</a>(<a href="#42448" title="(v1: Erasure.this.global.Type)Erasure.this.global.Type">erasure</a>(<a href="#53648" title="Erasure.this.global.Constant">ct</a>.<a href="../symtab/Constants.scala.html#42824" title="=&gt; Erasure.this.global.Type">typeValue</a>)))
            
          <span title="Erasure.this.global.Tree" class="keyword">case</span> _ =&gt;
            <a href="#51953" title="Erasure.this.global.Tree">tree</a>
        }
        <a href="#51957" title="Erasure.this.global.Tree">tree1</a> <span title="Erasure.this.global.Tree" class="keyword">match</span> {
          <span title="tree1.type" class="keyword">case</span> <a href="../ast/Trees.scala.html#26602" title="object Erasure.this.global.EmptyTree">EmptyTree</a> | TypeTree() =&gt;
            <a href="../ast/Trees.scala.html#29366" title="(tp: Erasure.this.global.Type)tree1.type">tree1</a> setType <a href="#42448" title="(v1: Erasure.this.global.Type)Erasure.this.global.Type">erasure</a>(<a href="#51957" title="Erasure.this.global.Tree">tree1</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; Erasure.this.global.Type">tpe</a>)
          <span title="Erasure.this.global.Tree" class="keyword">case</span> DefDef(<a title="Erasure.this.global.Modifiers" id="53711">mods</a>, <a title="Erasure.this.global.Name" id="53712">name</a>, <a title="List[Erasure.this.global.TypeDef]" id="53713">tparams</a>, <a title="List[List[Erasure.this.global.ValDef]]" id="53714">vparamss</a>, <a title="Erasure.this.global.Tree" id="53715">tpt</a>, <a title="Erasure.this.global.Tree" id="53716">rhs</a>) =&gt;
            <span class="keyword">val</span> <a title="Erasure.this.global.Tree" id="53719">result</a> = <span class="keyword">super</span>.<a href="../ast/Trees.scala.html#45473" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">transform</a><a href="../ast/Trees.scala.html#29366" title="(tp: Erasure.this.global.Type)Erasure.this.global.Tree">(</a><a href="#51957" title="Erasure.this.global.Tree">tree1</a>) setType <span title="Null(null)" class="keyword">null</span>
            <a href="#53715" title="Erasure.this.global.Tree">tpt</a>.<a href="../ast/Trees.scala.html#29364" title="(t: Erasure.this.global.Type)Unit">tpe</a> = <a href="#42448" title="(v1: Erasure.this.global.Type)Erasure.this.global.Type">erasure</a>(<a href="#51953" title="Erasure.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; Erasure.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; Erasure.this.global.Type">tpe</a>).<a href="../symtab/Types.scala.html#30193" title="=&gt; Erasure.this.global.Type">resultType</a>
            <a href="#53719" title="Erasure.this.global.Tree">result</a>
          <span title="Erasure.this.global.Tree" class="keyword">case</span> _ =&gt;
            case <span class="keyword">class</span> <a title="class MyError extends java.lang.Error with ScalaObject with Product" id="53784">MyError</a><a title="ScalaObject" id="25911">(</a><a title="Int" id="53841">count</a> : <span title="Int">Int</span>, <a title="java.lang.AssertionError" id="53842">ex</a> : <a title="java.lang.AssertionError" id="1806">AssertionError</a>) <span class="keyword">extends</span> <span title="java.lang.Error">Error</span>(<a href="#53842" title="java.lang.AssertionError">ex</a>.<a title="()java.lang.String" id="25926">getMessage</a>)
            <span class="keyword">try</span> {
              <span class="keyword">super</span>.<a href="../ast/Trees.scala.html#45473" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">transform</a><a href="../ast/Trees.scala.html#29366" title="(tp: Erasure.this.global.Type)Erasure.this.global.Tree">(</a><a href="#51957" title="Erasure.this.global.Tree">tree1</a>) setType <span title="Null(null)" class="keyword">null</span>
            } <span class="keyword">catch</span> {
              <span title="Nothing" class="keyword">case</span> <a title="MyError" id="53856">e</a> @ MyError(<a title="Int" id="53857">n</a>, <a title="java.lang.AssertionError" id="53858">ex</a>) <span class="keyword">if</span> <a href="#53857" title="(x$1: Int)Boolean" id="2960">n</a> &gt; <span title="Int(5)" class="int">5</span> =&gt;  <span title="Nothing" class="keyword">throw</span> <a href="#53856" title="MyError">e</a>
              <span title="Nothing" class="keyword">case</span> MyError(<a title="Int" id="53867">n</a>,<a title="java.lang.AssertionError" id="53868">ex</a>) =&gt;
                <span title="object Console">Console</span>.<span title="(x: Any)Unit">println</span>(<a href="#51957" title="Erasure.this.global.Tree">tree1</a>)
                <span title="Nothing" class="keyword">throw</span> <a href="#53784" title="(count: Int,ex: java.lang.AssertionError)MyError">MyError</a>(<a href="#53867" title="(x$1: Int)Int" id="2964">n</a> + <span title="Int(1)" class="int">1</span>, <a href="#53868" title="java.lang.AssertionError">ex</a>)
//              case ex : AssertionError =&gt; 
//                Console.println(tree1)
//                throw MyError(0, ex)
//              case ex =&gt; throw ex
            }
        }
      }
    }

    /** The main transform function: Pretransfom the tree, and then
     *  re-type it at phase erasure.next.
     */
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree" id="45496">transform</a>(<a title="Erasure.this.global.Tree" id="55213">tree</a>: <a href="../ast/Trees.scala.html#26593" title="Erasure.this.global.Tree">Tree</a>): <a href="../ast/Trees.scala.html#26593" title="Erasure.this.global.Tree">Tree</a> = {
      <span class="keyword">val</span> <a title="Erasure.this.global.Tree" id="55216">tree1</a> = <a href="#45494" title="=&gt; Erasure.this.global.Transformer">preTransformer</a>.<a href="../ast/Trees.scala.html#45473" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">transform</a>(<a href="#55213" title="Erasure.this.global.Tree">tree</a>)
      <a href="../symtab/SymbolTable.scala.html#26097" title="(ph: scala.tools.nsc.Phase)(op: =&gt; Erasure.this.global.Tree)Erasure.this.global.Tree">atPhase</a>(<a href="../symtab/SymbolTable.scala.html#26088" title="=&gt; scala.tools.nsc.Phase">phase</a>.<a href="../Phase.scala.html#23158" title="=&gt; scala.tools.nsc.Phase">next</a>) {
        <span class="keyword">val</span> <a title="Erasure.this.global.Tree" id="55226">tree2</a> = <a href="AddInterfaces.scala.html#42436" title="=&gt; Erasure.this.global.Transformer">mixinTransformer</a>.<a href="../ast/Trees.scala.html#45473" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">transform</a>(<a href="#55216" title="Erasure.this.global.Tree">tree1</a>)
        <span title="Unit" class="keyword">if</span> (<a href="../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../Settings.scala.html#37759" title="=&gt; Boolean">value</a>) <a href="../Global.scala.html#39068" title="(msg: AnyRef)Unit">log</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;tree after addinterfaces: \n&quot;</span> + <a href="#55226" title="Erasure.this.global.Tree">tree2</a>)
        <a href="#42464" title="(context: Erasure.this.Context)Erasure.this.Eraser">newTyper</a>(<a href="../typechecker/Contexts.scala.html#39819" title="(unit: Erasure.this.global.CompilationUnit,tree: Erasure.this.global.Tree,erasedTypes: Boolean)Erasure.this.Context">rootContext</a>(<a href="#45497" title="Erasure.this.global.CompilationUnit">unit</a>, <a href="#55213" title="Erasure.this.global.Tree">tree</a>, <span title="Boolean(true)" class="keyword">true</span>)).<a href="../typechecker/Typers.scala.html#42640" title="(tree: Erasure.this.global.Tree)Erasure.this.global.Tree">typed</a>(<a href="#55226" title="Erasure.this.global.Tree">tree2</a>)
      }
    }
  }
}

        </pre>
    </body>
</html>