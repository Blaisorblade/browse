<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/io/ZipArchive.scala</title>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style">
    </head>
    <body onload="initializeLinked()">
        <pre>
<span class="comment">/* NSC -- new Scala compiler
 * Copyright 2005-2009 LAMP/EPFL
 * @author  Martin Odersky
 */</span>
<span class="comment">// $Id: ZipArchive.scala 16893 2009-01-13 13:09:22Z cunei $</span>


<span class="keyword">package</span> scala.tools.nsc.io

<span class="keyword">import</span> java.io.{File, IOException, InputStream}
<span class="keyword">import</span> java.net.URL
<span class="keyword">import</span> java.util.Enumeration
<span class="keyword">import</span> java.util.zip.{ZipEntry, ZipFile, ZipInputStream}

<span class="keyword">import</span> scala.collection.mutable.{Map, HashMap}

<span class="comment">/**
 * @author  Philippe Altherr
 * @version 1.0, 23/03/2004
 */</span>
<span class="keyword">object</span> <span class="typed"><span class="type">object scala.tools.nsc.io.ZipArchive</span><a id="12670">ZipArchive</a></span> {

  <span class="comment">//########################################################################</span>

  <span class="comment">/**
   * ...
   *
   * @param path ...
   *  @return     ...
   */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">(String)scala.tools.nsc.io.AbstractFile</span><a id="40667">fromPath</a></span>(<span class="typed"><span class="type">String</span><a id="40672">path</a></span>: <span class="typed"><span class="type">String</span><a id="1861">String</a></span>): <span class="typed"><span class="type">scala.tools.nsc.io.AbstractFile</span><a href="AbstractFile.scala.html#12693">AbstractFile</a></span> = <span class="typed"><span class="type">(java.io.File)scala.tools.nsc.io.AbstractFile</span><a href="#40668">fromFile</a></span>(<span class="typed"><span class="type">java.io.File</span><span class="keyword">new</span></span> <span class="typed"><span class="type">java.io.File</span><a id="3669">File</a></span>(<span class="typed"><span class="type">String</span><a href="#40672">path</a></span>))

  <span class="comment">/**
   * If the specified file &lt;code&gt;file&lt;/code&gt; exists and is a readable
   * zip archive, returns an abstract file backed by it. Otherwise,
   * returns &lt;code&gt;null&lt;/code&gt;.
   *
   * @param file ...
   * @return     ...
   */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">(java.io.File)scala.tools.nsc.io.AbstractFile</span><a id="40668">fromFile</a></span>(<span class="typed"><span class="type">java.io.File</span><a id="40673">file</a></span>: <span class="typed"><span class="type">java.io.File</span><a id="3669">File</a></span>): <span class="typed"><span class="type">scala.tools.nsc.io.AbstractFile</span><a href="AbstractFile.scala.html#12693">AbstractFile</a></span> =
    <span class="keyword">try</span> { <span class="typed"><span class="type">scala.tools.nsc.io.ZipArchive</span><span class="keyword">new</span></span> <span class="typed"><span class="type">scala.tools.nsc.io.ZipArchive</span><a href="#12669">ZipArchive</a></span>(<span class="typed"><span class="type">java.io.File</span><a href="#40673">file</a></span>, <span class="typed"><span class="type">(java.io.File)java.util.zip.ZipFile</span><a id="40853" class="keyword">new</a></span> <span class="typed"><span class="type">java.util.zip.ZipFile</span><a id="40663">ZipFile</a></span>(<span class="typed"><span class="type">java.io.File</span><a href="#40673">file</a></span>)) }
    <span class="keyword">catch</span> { <span class="typed"><span class="type">Null(null)</span><span class="keyword">case</span></span> _: <span class="typed"><span class="type">java.io.IOException</span><a id="3519">IOException</a></span> =&gt; <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span> }

  <span class="comment">/**
   * Returns an abstract directory backed by the specified archive.
   *
   * @param archive ...
   * @return        ...
   */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">(java.util.zip.ZipFile)scala.tools.nsc.io.AbstractFile</span><a id="40669">fromArchive</a></span>(<span class="typed"><span class="type">java.util.zip.ZipFile</span><a id="40930">archive</a></span>: <span class="typed"><span class="type">java.util.zip.ZipFile</span><a id="40663">ZipFile</a></span>): <span class="typed"><span class="type">scala.tools.nsc.io.AbstractFile</span><a href="AbstractFile.scala.html#12693">AbstractFile</a></span> =
    <span class="typed"><span class="type">scala.tools.nsc.io.ZipArchive</span><span class="keyword">new</span></span> <span class="typed"><span class="type">scala.tools.nsc.io.ZipArchive</span><a href="#12669">ZipArchive</a></span>(<span class="typed"><span class="type">java.io.File</span><span class="keyword">new</span></span> <span class="typed"><span class="type">java.io.File</span><a id="3669">File</a></span>(<span class="typed"><span class="type">java.util.zip.ZipFile</span><a href="#40930">archive</a></span>.<span class="typed"><span class="type">()java.lang.String</span><a id="40856">getName</a></span>()), <span class="typed"><span class="type">java.util.zip.ZipFile</span><a href="#40930">archive</a></span>)

  <span class="comment">/**
   * Returns an abstract directory backed by the specified archive.
   *
   * @param url ...
   * @return    ...
   */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">(java.net.URL)scala.tools.nsc.io.AbstractFile</span><a id="40670">fromURL</a></span>(<span class="typed"><span class="type">java.net.URL</span><a id="40933">url</a></span>: <span class="typed"><span class="type">java.net.URL</span><a id="4391">URL</a></span>): <span class="typed"><span class="type">scala.tools.nsc.io.AbstractFile</span><a href="AbstractFile.scala.html#12693">AbstractFile</a></span> =
    <span class="typed"><span class="type">scala.tools.nsc.io.URLZipArchive</span><span class="keyword">new</span></span> <span class="typed"><span class="type">scala.tools.nsc.io.URLZipArchive</span><a href="#12723">URLZipArchive</a></span>(<span class="typed"><span class="type">java.net.URL</span><a href="#40933">url</a></span>)
}

<span class="comment">/**
 * This class implements an abstract directory backed by a zip
 * archive. We let the encoding be &lt;code&gt;null&lt;/code&gt;, because we behave like
 * a directory.
 *
 * @author  Philippe Altherr
 * @version 1.0, 23/03/2004
 */</span>
<span class="keyword">final</span> <span class="keyword">class</span> <span class="typed"><span class="type">class ZipArchive extends scala.tools.nsc.io.PlainFile with ScalaObject</span><a id="12669">ZipArchive</a></span>(<span class="typed"><span class="type">java.io.File</span><span id="40823"><a id="40838">file</a></span></span>: <span class="typed"><span class="type">java.io.File</span><a id="3669">File</a></span>, <span class="keyword">val</span> <span class="typed"><span class="type">java.util.zip.ZipFile</span><span id="40825"><span id="40824"><a id="40839">archive</a></span></span></span>: <span class="typed"><span class="type">java.util.zip.ZipFile</span><a id="40663">ZipFile</a></span>) <span class="keyword">extends</span> <span class="typed"><span class="type">scala.tools.nsc.io.PlainFile</span><a href="PlainFile.scala.html#12720">PlainFile</a></span>(<span class="typed"><span class="type">java.io.File</span><a href="#40838">file</a></span>) {

  <span class="typed"><span class="type">(Boolean)Unit</span><span id="6003"><a id="821">assert</a></span></span>(<span class="typed"><span class="type">=&gt; java.util.zip.ZipFile</span><a href="#40824">archive</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5795">ne</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>)
  <span class="comment">//########################################################################</span>
  <span class="comment">// Private Fields</span>

  <span class="comment">/** The root directory or null if not yet initialized */</span>
  <span class="keyword">private</span> <span class="keyword">var</span> <span class="typed"><span class="type">ZipArchive.this.DirEntry</span><span id="40829"><span id="40827"><span id="40828"><a id="40997">root</a></span></span></span></span>: <span class="typed"><span class="type">ZipArchive.this.DirEntry</span><a href="#40836">DirEntry</a></span> = _

  <span class="comment">//########################################################################</span>
  <span class="comment">// Public Methods</span>

  <span class="comment">/** Returns true. */</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Boolean</span><a id="40830">isDirectory</a></span> = <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>

  <span class="comment">/** Returns all abstract subfiles of this abstract directory. */</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Iterator[scala.tools.nsc.io.AbstractFile]</span><a id="40831">elements</a></span>: <span class="typed"><span class="type">Iterator[scala.tools.nsc.io.AbstractFile]</span><a id="1339">Iterator</a></span>[AbstractFile] = {
    <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; ZipArchive.this.DirEntry</span><a href="#40827">root</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5794">eq</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>) <span class="typed"><span class="type">()Unit</span><a href="#40833">load</a></span>()
    <span class="typed"><span class="type">=&gt; ZipArchive.this.DirEntry</span><a href="#40827">root</a></span>.<span class="typed"><span class="type">=&gt; Iterator[scala.tools.nsc.io.AbstractFile]</span><a href="#41051">elements</a></span>
  }

  <span class="comment">/**
   * Returns the abstract file in this abstract directory with the
   * specified name. If there is no such file, returns null. The
   * argument &quot;directory&quot; tells whether to look for a directory or
   * or a regular file.
   */</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">(String,Boolean)scala.tools.nsc.io.AbstractFile</span><a id="40832">lookupName</a></span>(<span class="typed"><span class="type">String</span><a id="41062">name</a></span>: <span class="typed"><span class="type">String</span><a id="1861">String</a></span>, <span class="typed"><span class="type">Boolean</span><a id="41063">directory</a></span>: <span class="typed"><span class="type">Boolean</span><a id="2170">Boolean</a></span>): <span class="typed"><span class="type">scala.tools.nsc.io.AbstractFile</span><a href="AbstractFile.scala.html#12693">AbstractFile</a></span> = {
    <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; ZipArchive.this.DirEntry</span><a href="#40827">root</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5794">eq</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>) <span class="typed"><span class="type">()Unit</span><a href="#40833">load</a></span>()
    <span class="typed"><span class="type">=&gt; ZipArchive.this.DirEntry</span><a href="#40827">root</a></span>.<span class="typed"><span class="type">(String,Boolean)scala.tools.nsc.io.AbstractFile</span><a href="#41052">lookupName</a></span>(<span class="typed"><span class="type">String</span><a href="#41062">name</a></span>, <span class="typed"><span class="type">Boolean</span><a href="#41063">directory</a></span>)
  }

  <span class="comment">//########################################################################</span>
  <span class="comment">// Private Methods</span>

  <span class="comment">/** Loads the archive and creates the root directory. */</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">()Unit</span><a id="40833">load</a></span>() {
    <span class="typed"><span class="type">ZipArchive.this.type</span><a href="#12669" class="keyword">this</a></span>.<span class="typed"><span class="type">(ZipArchive.this.DirEntry)Unit</span><a href="#40828">root</a></span> = <span class="typed"><span class="type">ZipArchive.this.DirEntry</span><span class="keyword">new</span></span> <span class="typed"><span class="type">ZipArchive.this.DirEntry</span><a href="#40836">DirEntry</a></span>(<span class="typed"><span class="type">scala.tools.nsc.io.ZipArchive</span><a href="#12669" class="keyword">this</a></span>, <span class="typed"><span class="type">java.lang.String(&quot;&lt;root&gt;&quot;)</span><span class="string">&quot;&lt;root&gt;&quot;</span></span>, <span class="typed"><span class="type">java.lang.String(&quot;/&quot;)</span><span class="string">&quot;/&quot;</span></span>)
    <span class="comment">// A path to DirEntry map</span>
    <span class="keyword">val</span> <span class="typed"><span class="type">scala.collection.mutable.Map[String,ZipArchive.this.DirEntry]</span><a id="41071">dirs</a></span>: <span class="typed"><span class="type">scala.collection.mutable.Map[String,ZipArchive.this.DirEntry]</span><a id="19880">Map</a></span>[String, DirEntry] = <span class="typed"><span class="type">scala.collection.mutable.HashMap[String,ZipArchive.this.DirEntry]</span><span class="keyword">new</span></span> <span class="typed"><span class="type">scala.collection.mutable.HashMap[String,ZipArchive.this.DirEntry]</span><a id="20081">HashMap</a></span>()
    <span class="typed"><span class="type">scala.collection.mutable.Map[String,ZipArchive.this.DirEntry]</span><a href="#41071">dirs</a></span>.<span class="typed"><span class="type">(String,ZipArchive.this.DirEntry)Unit</span><a id="24188">update</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;/&quot;)</span><span class="string">&quot;/&quot;</span></span>, <span class="typed"><span class="type">=&gt; ZipArchive.this.DirEntry</span><a href="#40827">root</a></span>)
    <span class="keyword">val</span> <span class="typed"><span class="type">java.util.Enumeration[_ &lt;: java.util.zip.ZipEntry]</span><a id="41072">entries</a></span> = <span class="typed"><span class="type">=&gt; java.util.zip.ZipFile</span><a href="#40824">archive</a></span>.<span class="typed"><span class="type">()java.util.Enumeration[_ &lt;: java.util.zip.ZipEntry]</span><a id="40857">entries</a></span>()
    <span class="typed"><span class="type">Unit</span><a href="#41117" class="keyword">while</a></span> (<span class="typed"><span class="type">java.util.Enumeration[_ &lt;: java.util.zip.ZipEntry]</span><a href="#41072">entries</a></span>.<span class="typed"><span class="type">()Boolean</span><a id="40860">hasMoreElements</a></span>()) {
      <span class="keyword">val</span> <span class="typed"><span class="type">java.util.zip.ZipEntry</span><a id="41118">entry</a></span> = <span class="typed"><span class="type">java.util.Enumeration[_ &lt;: java.util.zip.ZipEntry]</span><a href="#41072">entries</a></span>.<span class="typed"><span class="type">()java.util.zip.ZipEntry</span><a id="40861">nextElement</a></span>().<span class="typed"><span class="type">java.util.zip.ZipEntry</span><a id="3503">asInstanceOf</a></span>[<span class="typed"><span class="type">java.util.zip.ZipEntry</span><a id="40603">ZipEntry</a></span>]
      <span class="keyword">val</span> <span class="typed"><span class="type">java.lang.String</span><a id="41119">path</a></span> = <span class="typed"><span class="type">java.util.zip.ZipEntry</span><a href="#41118">entry</a></span>.<span class="typed"><span class="type">()java.lang.String</span><a id="41095">getName</a></span>()
      <span class="typed"><span class="type">(Boolean,=&gt; Any)Unit</span><span id="6004"><a id="821">assert</a></span></span>(<span class="typed"><span class="type">java.util.zip.ZipEntry</span><a href="#41118">entry</a></span>.<span class="typed"><span class="type">()Boolean</span><a id="41110">isDirectory</a></span>() <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2748">==</a></span> <span class="typed"><span class="type">java.lang.String</span><a href="#41119">path</a></span>.<span class="typed"><span class="type">(java.lang.String)Boolean</span><a id="5842">endsWith</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;/&quot;)</span><span class="string">&quot;/&quot;</span></span>),
             <span class="typed"><span class="type">ZipArchive.this.type</span><a href="#12669" class="keyword">this</a></span>.<span class="typed"><span class="type">()String</span><a href="AbstractFile.scala.html#25455">toString</a></span>() <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot; - &quot;)</span><span class="string">&quot; - &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String</span><a href="#41119">path</a></span>);
      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">java.util.zip.ZipEntry</span><a href="#41118">entry</a></span>.<span class="typed"><span class="type">()Boolean</span><a id="41110">isDirectory</a></span>()) {
        <span class="keyword">val</span> <span class="typed"><span class="type">ZipArchive.this.DirEntry</span><a id="41130">dir</a></span>: <span class="typed"><span class="type">ZipArchive.this.DirEntry</span><a href="#40836">DirEntry</a></span> = <span class="typed"><span class="type">(scala.collection.mutable.Map[String,ZipArchive.this.DirEntry],String)ZipArchive.this.DirEntry</span><a href="#40834">getDir</a></span>(<span class="typed"><span class="type">scala.collection.mutable.Map[String,ZipArchive.this.DirEntry]</span><a href="#41071">dirs</a></span>, <span class="typed"><span class="type">java.lang.String</span><a href="#41119">path</a></span>)
        <span class="comment">// this assertion causes an unnecessary bomb if a directory is twice listed in the jar</span>
        <span class="comment">// assert(dir.entry eq null, this.toString() + &quot; - &quot; + path)</span>
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">ZipArchive.this.DirEntry</span><a href="#41130">dir</a></span>.<span class="typed"><span class="type">=&gt; java.util.zip.ZipEntry</span><a href="#41045">entry</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5794">eq</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>) <span class="typed"><span class="type">ZipArchive.this.DirEntry</span><a href="#41130">dir</a></span>.<span class="typed"><span class="type">(java.util.zip.ZipEntry)Unit</span><a href="#41046">entry</a></span> = <span class="typed"><span class="type">java.util.zip.ZipEntry</span><a href="#41118">entry</a></span>
      } <span class="keyword">else</span> {
        <span class="keyword">val</span> <span class="typed"><span class="type">Int</span><a id="41133">index</a></span> = <span class="typed"><span class="type">java.lang.String</span><a href="#41119">path</a></span>.<span class="typed"><span class="type">(Int)Int</span><a id="5846">lastIndexOf</a></span>(<span class="typed"><span class="type">Int(47)</span><span class="char">'/'</span></span>)
        <span class="keyword">val</span> <span class="typed"><span class="type">java.lang.String</span><a id="41134">name</a></span> = <span class="typed"><span class="type">java.lang.String</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#41133">index</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&lt;</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>) <span class="typed"><span class="type">java.lang.String</span><a href="#41119">path</a></span> <span class="keyword">else</span> <span class="typed"><span class="type">java.lang.String</span><a href="#41119">path</a></span>.<span class="typed"><span class="type">(Int)java.lang.String</span><a id="5854">substring</a></span>(<span class="typed"><span class="type">Int</span><a href="#41133">index</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">+</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>)
        <span class="keyword">val</span> <span class="typed"><span class="type">java.lang.String</span><a id="41135">home</a></span> = <span class="typed"><span class="type">java.lang.String</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#41133">index</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&lt;</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>) <span class="typed"><span class="type">java.lang.String(&quot;/&quot;)</span><span class="string">&quot;/&quot;</span></span>  <span class="keyword">else</span> <span class="typed"><span class="type">java.lang.String</span><a href="#41119">path</a></span>.<span class="typed"><span class="type">(Int,Int)java.lang.String</span><a id="5855">substring</a></span>(<span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>, <span class="typed"><span class="type">Int</span><a href="#41133">index</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">+</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>)
        <span class="keyword">val</span> <span class="typed"><span class="type">ZipArchive.this.DirEntry</span><a id="41136">parent</a></span>: <span class="typed"><span class="type">ZipArchive.this.DirEntry</span><a href="#40836">DirEntry</a></span> = <span class="typed"><span class="type">(scala.collection.mutable.Map[String,ZipArchive.this.DirEntry],String)ZipArchive.this.DirEntry</span><a href="#40834">getDir</a></span>(<span class="typed"><span class="type">scala.collection.mutable.Map[String,ZipArchive.this.DirEntry]</span><a href="#41071">dirs</a></span>, <span class="typed"><span class="type">java.lang.String</span><a href="#41135">home</a></span>)
        <span class="comment">// OLD: assert(!parent.entries.contains(path))</span>
        <span class="comment">// MAYBE: assert(!parent.entries.contains(name))</span>
        <span class="comment">//if (parent.entries.contains(name))</span>
        <span class="comment">//  Console.println(&quot;XXX: &quot; + this.toString() + &quot; - &quot; + home + &quot;/&quot; + name)</span>
        <span class="typed"><span class="type">ZipArchive.this.DirEntry</span><a href="#41136">parent</a></span>.<span class="typed"><span class="type">=&gt; scala.collection.mutable.Map[String,ZipArchive.this.Entry]</span><a href="#41043">entries</a></span>.<span class="typed"><span class="type">(String,ZipArchive.this.Entry)Unit</span><a id="24188">update</a></span>(<span class="typed"><span class="type">java.lang.String</span><a href="#41134">name</a></span>, <span class="typed"><span class="type">ZipArchive.this.FileEntry</span><span class="keyword">new</span></span> <span class="typed"><span class="type">ZipArchive.this.FileEntry</span><a href="#40837">FileEntry</a></span>(<span class="typed"><span class="type">ZipArchive.this.DirEntry</span><a href="#41136">parent</a></span>, <span class="typed"><span class="type">java.lang.String</span><a href="#41134">name</a></span>, <span class="typed"><span class="type">java.lang.String</span><a href="#41119">path</a></span>, <span class="typed"><span class="type">java.util.zip.ZipEntry</span><a href="#41118">entry</a></span>))
      }
    }
  }

  <span class="comment">/**
   * Lookups the specified table for a DirEntry with the specified
   * path. If successful, returns the found DirEntry. Otherwise
   * creates a new DirEntry, enters it into the table and in the
   * table of its parent ZipDir and returns it.
   */</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(scala.collection.mutable.Map[String,ZipArchive.this.DirEntry],String)ZipArchive.this.DirEntry</span><a id="40834">getDir</a></span>(<span class="typed"><span class="type">scala.collection.mutable.Map[String,ZipArchive.this.DirEntry]</span><a id="41131">dirs</a></span>: <span class="typed"><span class="type">scala.collection.mutable.Map[String,ZipArchive.this.DirEntry]</span><a id="19880">Map</a></span>[String,DirEntry], <span class="typed"><span class="type">String</span><a id="41132">path</a></span>: <span class="typed"><span class="type">String</span><a id="1861">String</a></span>): <span class="typed"><span class="type">ZipArchive.this.DirEntry</span><a href="#40836">DirEntry</a></span> =
    <span class="typed"><span class="type">scala.collection.mutable.Map[String,ZipArchive.this.DirEntry]</span><a href="#41131">dirs</a></span>.<span class="typed"><span class="type">(String)Option[ZipArchive.this.DirEntry]</span><a id="24235">get</a></span>(<span class="typed"><span class="type">String</span><a href="#41132">path</a></span>) <span class="typed"><span class="type">ZipArchive.this.DirEntry</span><span class="keyword">match</span></span> {
      <span class="typed"><span class="type">ZipArchive.this.DirEntry</span><span class="keyword">case</span></span> <a id="1">Some</a>(<span class="typed"><span class="type">ZipArchive.this.DirEntry</span><a id="41207">dir</a></span>) =&gt; <span class="typed"><span class="type">ZipArchive.this.DirEntry</span><a href="#41207">dir</a></span>
      <span class="typed"><span class="type">ZipArchive.this.DirEntry</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object None</span><a id="536">None</a></span> =&gt; 
        <span class="keyword">val</span> <span class="typed"><span class="type">Int</span><a id="41208">index</a></span> = <span class="typed"><span class="type">String</span><a href="#41132">path</a></span>.<span class="typed"><span class="type">(Int,Int)Int</span><a id="5847">lastIndexOf</a></span>(<span class="typed"><span class="type">Int(47)</span><span class="char">'/'</span></span>, <span class="typed"><span class="type">String</span><a href="#41132">path</a></span>.<span class="typed"><span class="type">()Int</span><a id="5821">length</a></span>() <span class="typed"><span class="type">(Int)Int</span><a id="3148">-</a></span> <span class="typed"><span class="type">Int(2)</span><span class="int">2</span></span>);
        <span class="keyword">val</span> <span class="typed"><span class="type">String</span><a id="41209">name</a></span> = <span class="typed"><span class="type">String</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#41208">index</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&lt;</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>) <span class="typed"><span class="type">String</span><a href="#41132">path</a></span> <span class="keyword">else</span> <span class="typed"><span class="type">String</span><a href="#41132">path</a></span>.<span class="typed"><span class="type">(Int)java.lang.String</span><a id="5854">substring</a></span>(<span class="typed"><span class="type">Int</span><a href="#41208">index</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">+</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>);
        <span class="keyword">val</span> <span class="typed"><span class="type">java.lang.String</span><a id="41210">home</a></span> = <span class="typed"><span class="type">java.lang.String</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#41208">index</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&lt;</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>) <span class="typed"><span class="type">java.lang.String(&quot;/&quot;)</span><span class="string">&quot;/&quot;</span></span>  <span class="keyword">else</span> <span class="typed"><span class="type">String</span><a href="#41132">path</a></span>.<span class="typed"><span class="type">(Int,Int)java.lang.String</span><a id="5855">substring</a></span>(<span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>, <span class="typed"><span class="type">Int</span><a href="#41208">index</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">+</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>);
        <span class="keyword">val</span> <span class="typed"><span class="type">ZipArchive.this.DirEntry</span><a id="41211">parent</a></span>: <span class="typed"><span class="type">ZipArchive.this.DirEntry</span><a href="#40836">DirEntry</a></span> = <span class="typed"><span class="type">(scala.collection.mutable.Map[String,ZipArchive.this.DirEntry],String)ZipArchive.this.DirEntry</span><a href="#40834">getDir</a></span>(<span class="typed"><span class="type">scala.collection.mutable.Map[String,ZipArchive.this.DirEntry]</span><a href="#41131">dirs</a></span>, <span class="typed"><span class="type">java.lang.String</span><a href="#41210">home</a></span>);
        <span class="keyword">val</span> <span class="typed"><span class="type">ZipArchive.this.DirEntry</span><a id="41212">dir</a></span> = <span class="typed"><span class="type">ZipArchive.this.DirEntry</span><span class="keyword">new</span></span> <span class="typed"><span class="type">ZipArchive.this.DirEntry</span><a href="#40836">DirEntry</a></span>(<span class="typed"><span class="type">ZipArchive.this.DirEntry</span><a href="#41211">parent</a></span>, <span class="typed"><span class="type">String</span><a href="#41209">name</a></span>.<span class="typed"><span class="type">(Int,Int)java.lang.String</span><a id="5855">substring</a></span>(<span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>, <span class="typed"><span class="type">String</span><a href="#41209">name</a></span>.<span class="typed"><span class="type">()Int</span><a id="5821">length</a></span>() <span class="typed"><span class="type">(Int)Int</span><a id="3148">-</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>), <span class="typed"><span class="type">String</span><a href="#41132">path</a></span>);
        <span class="typed"><span class="type">ZipArchive.this.DirEntry</span><a href="#41211">parent</a></span>.<span class="typed"><span class="type">=&gt; scala.collection.mutable.Map[String,ZipArchive.this.Entry]</span><a href="#41043">entries</a></span>.<span class="typed"><span class="type">(String,ZipArchive.this.Entry)Unit</span><a id="24188">update</a></span>(<span class="typed"><span class="type">String</span><a href="#41209">name</a></span>, <span class="typed"><span class="type">ZipArchive.this.DirEntry</span><a href="#41212">dir</a></span>);
        <span class="typed"><span class="type">scala.collection.mutable.Map[String,ZipArchive.this.DirEntry]</span><a href="#41131">dirs</a></span>.<span class="typed"><span class="type">(String,ZipArchive.this.DirEntry)Unit</span><a id="24188">update</a></span>(<span class="typed"><span class="type">String</span><a href="#41132">path</a></span>, <span class="typed"><span class="type">ZipArchive.this.DirEntry</span><a href="#41212">dir</a></span>);
        <span class="typed"><span class="type">ZipArchive.this.DirEntry</span><a href="#41212">dir</a></span>
   }
  
  <span class="comment">//########################################################################</span>
  <span class="comment">// Private Class - Entry</span>

  <span class="comment">/** Superclass of archive entries */</span>
  <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="typed"><span class="type">class Entry extends scala.tools.nsc.io.VirtualFile with ScalaObject</span><a id="40835">Entry</a></span>(<span class="keyword">override</span> <span class="keyword">val</span> <span class="typed"><span class="type">scala.tools.nsc.io.AbstractFile</span><span id="41027"><span id="41026"><a id="41303">container</a></span></span></span> : <span class="typed"><span class="type">scala.tools.nsc.io.AbstractFile</span><a href="AbstractFile.scala.html#12693">AbstractFile</a></span>, <span class="typed"><span class="type">String</span><span id="41028"><a id="41304">name</a></span></span>: <span class="typed"><span class="type">String</span><a id="1861">String</a></span>, <span class="typed"><span class="type">String</span><span id="41029"><a id="41305">path</a></span></span>: <span class="typed"><span class="type">String</span><a id="1861">String</a></span>) 
    <span class="keyword">extends</span> <span class="typed"><span class="type">scala.tools.nsc.io.VirtualFile</span><a href="VirtualFile.scala.html#12744">VirtualFile</a></span>(<span class="typed"><span class="type">String</span><a href="#41304">name</a></span>, <span class="typed"><span class="type">String</span><a href="#41305">path</a></span>) {
    <span class="keyword">final</span> <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; java.lang.String</span><a id="41031">path</a></span> = <span class="typed"><span class="type">ZipArchive.this.type</span><a href="#12669">ZipArchive</a></span>.<span class="keyword">this</span>.<span class="typed"><span class="type">()String</span><a href="AbstractFile.scala.html#25455">toString</a></span>() <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;(&quot;)</span><span class="string">&quot;(&quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">=&gt; String</span><a href="#41033">pathInArchive</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;)&quot;)</span><span class="string">&quot;)&quot;</span></span>
    <span class="keyword">final</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; java.util.zip.ZipFile</span><a id="41032">getArchive</a></span> = <span class="typed"><span class="type">ZipArchive.this.type</span><a href="#12669">ZipArchive</a></span>.<span class="keyword">this</span>.<span class="typed"><span class="type">=&gt; java.util.zip.ZipFile</span><a href="#40824">archive</a></span>
    <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; String</span><a id="41033">pathInArchive</a></span> = <span class="keyword">super</span>.<span class="typed"><span class="type">=&gt; String</span><a href="VirtualFile.scala.html#41013">path</a></span>
    <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">()Int</span><a id="41034">hashCode</a></span> = <span class="keyword">super</span>.<span class="typed"><span class="type">()Int</span><a href="VirtualFile.scala.html#41008">hashCode</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">+</a></span> <span class="typed"><span class="type">=&gt; scala.tools.nsc.io.AbstractFile</span><a href="#41026">container</a></span>.<span class="typed"><span class="type">()Int</span><a id="5782">hashCode</a></span>
    <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">(Any)Boolean</span><a id="41035">equals</a></span>(<span class="typed"><span class="type">Any</span><a id="41350">that</a></span> : <span class="typed"><span class="type">Any</span><a id="51">Any</a></span>) = <span class="keyword">super</span>.<span class="typed"><span class="type">(Any)Boolean</span><a href="VirtualFile.scala.html#41009">equals</a></span>(<span class="typed"><span class="type">Any</span><a href="#41350">that</a></span>) <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> (<span class="typed"><span class="type">Any</span><a href="#41350">that</a></span> <span class="typed"><span class="type">Boolean</span><span class="keyword">match</span></span> {
    <span class="typed"><span class="type">Boolean</span><span class="keyword">case</span></span> <span class="typed"><span class="type">ZipArchive.this.Entry</span><a id="41357">entry</a></span> : <span class="typed"><span class="type">ZipArchive.this.Entry</span><a href="#40835">Entry</a></span> =&gt; <span class="typed"><span class="type">=&gt; scala.tools.nsc.io.AbstractFile</span><a href="#41026">container</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">ZipArchive.this.Entry</span><a href="#41357">entry</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.io.AbstractFile</span><a href="#41026">container</a></span>
    <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">case</span></span> _ =&gt; <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>
    })
  }

  <span class="comment">//########################################################################</span>
  <span class="comment">// Private Class - DirEntry</span>

  <span class="comment">/** A directory archive entry */</span>
  <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="typed"><span class="type">class DirEntry extends ZipArchive.this.Entry with ScalaObject</span><a id="40836">DirEntry</a></span>(<span class="typed"><span class="type">scala.tools.nsc.io.AbstractFile</span><span id="41039"><a id="41073">container</a></span></span> : <span class="typed"><span class="type">scala.tools.nsc.io.AbstractFile</span><a href="AbstractFile.scala.html#12693">AbstractFile</a></span>, <span class="typed"><span class="type">String</span><span id="41040"><a id="41074">name</a></span></span>: <span class="typed"><span class="type">String</span><a id="1861">String</a></span>, <span class="typed"><span class="type">String</span><span id="41041"><a id="41075">path</a></span></span>: <span class="typed"><span class="type">String</span><a id="1861">String</a></span>)
                <span class="keyword">extends</span> <span class="typed"><span class="type">ZipArchive.this.Entry</span><a href="#40835">Entry</a></span>(<span class="typed"><span class="type">scala.tools.nsc.io.AbstractFile</span><a href="#41073">container</a></span>, <span class="typed"><span class="type">String</span><a href="#41074">name</a></span>, <span class="typed"><span class="type">String</span><a href="#41075">path</a></span>)
  {

    <span class="keyword">val</span> <span class="typed"><span class="type">scala.collection.mutable.Map[String,ZipArchive.this.Entry]</span><span id="41044"><a id="41043">entries</a></span></span>: <span class="typed"><span class="type">scala.collection.mutable.Map[String,ZipArchive.this.Entry]</span><a id="19880">Map</a></span>[String, Entry] = <span class="typed"><span class="type">scala.collection.mutable.HashMap[String,ZipArchive.this.Entry]</span><span class="keyword">new</span></span> <span class="typed"><span class="type">scala.collection.mutable.HashMap[String,ZipArchive.this.Entry]</span><a id="20081">HashMap</a></span>()

    <span class="keyword">var</span> <span class="typed"><span class="type">java.util.zip.ZipEntry</span><span id="41047"><span id="41045"><span id="41046"><a id="41363">entry</a></span></span></span></span>: <span class="typed"><span class="type">java.util.zip.ZipEntry</span><a id="40603">ZipEntry</a></span> = _

    <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Boolean</span><a id="41048">isDirectory</a></span> = <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>
    <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Nothing</span><a id="41049">input</a></span> = <span class="typed"><span class="type">Nothing</span><span class="keyword">throw</span></span> <span class="typed"><span class="type">(java.lang.String)java.lang.Error</span><a id="27228" class="keyword">new</a></span> <span class="typed"><span class="type">java.lang.Error</span><span id="5975"><a id="821">Error</a></span></span>(<span class="typed"><span class="type">java.lang.String(&quot;cannot read directories&quot;)</span><span class="string">&quot;cannot read directories&quot;</span></span>)

    <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Long</span><a id="41050">lastModified</a></span>: <span class="typed"><span class="type">Long</span><a id="2399">Long</a></span> =
      <span class="typed"><span class="type">Long</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; java.util.zip.ZipEntry</span><a href="#41045">entry</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5795">ne</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>) <span class="typed"><span class="type">=&gt; java.util.zip.ZipEntry</span><a href="#41045">entry</a></span>.<span class="typed"><span class="type">()Long</span><a id="41097">getTime</a></span>() <span class="keyword">else</span> <span class="keyword">super</span>.<span class="typed"><span class="type">=&gt; Long</span><a href="VirtualFile.scala.html#41020">lastModified</a></span>

    <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Iterator[scala.tools.nsc.io.AbstractFile]</span><a id="41051">elements</a></span>: <span class="typed"><span class="type">Iterator[scala.tools.nsc.io.AbstractFile]</span><a id="1339">Iterator</a></span>[AbstractFile] = <span class="typed"><span class="type">=&gt; scala.collection.mutable.Map[String,ZipArchive.this.Entry]</span><a href="#41043">entries</a></span>.<span class="typed"><span class="type">=&gt; Iterator[ZipArchive.this.Entry]</span><a id="24244">values</a></span>

    <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">(String,Boolean)scala.tools.nsc.io.AbstractFile</span><a id="41052">lookupName</a></span>(<span class="typed"><span class="type">String</span><a id="41065">name</a></span>: <span class="typed"><span class="type">String</span><a id="1861">String</a></span>, <span class="typed"><span class="type">Boolean</span><a id="41066">directory</a></span>: <span class="typed"><span class="type">Boolean</span><a id="2170">Boolean</a></span>): <span class="typed"><span class="type">scala.tools.nsc.io.AbstractFile</span><a href="AbstractFile.scala.html#12693">AbstractFile</a></span> =
      <span class="typed"><span class="type">=&gt; scala.collection.mutable.Map[String,ZipArchive.this.Entry]</span><a href="#41043">entries</a></span>.<span class="typed"><span class="type">(String)Option[ZipArchive.this.Entry]</span><a id="24235">get</a></span>(<span class="typed"><span class="type">String</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Boolean</span><a href="#41066">directory</a></span>) <span class="typed"><span class="type">String</span><a href="#41065">name</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;/&quot;)</span><span class="string">&quot;/&quot;</span></span> <span class="keyword">else</span> <span class="typed"><span class="type">String</span><a href="#41065">name</a></span>) <span class="typed"><span class="type">scala.tools.nsc.io.AbstractFile</span><span class="keyword">match</span></span> {
        <span class="typed"><span class="type">ZipArchive.this.Entry</span><span class="keyword">case</span></span> <a id="1">Some</a>(<span class="typed"><span class="type">ZipArchive.this.Entry</span><a id="41389">dir</a></span>) =&gt; <span class="typed"><span class="type">ZipArchive.this.Entry</span><a href="#41389">dir</a></span>
        <span class="typed"><span class="type">Null(null)</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object None</span><a id="536">None</a></span> =&gt; <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>
    }
  }

  <span class="comment">//########################################################################</span>
  <span class="comment">// Private Class - FileEntry</span>

  <span class="comment">/** A regular file archive entry */</span>
  <span class="keyword">final</span> <span class="keyword">class</span> <span class="typed"><span class="type">class FileEntry extends ZipArchive.this.Entry with ScalaObject</span><a id="40837">FileEntry</a></span>(<span class="typed"><span class="type">scala.tools.nsc.io.AbstractFile</span><span id="41193"><a id="41203">container</a></span></span> : <span class="typed"><span class="type">scala.tools.nsc.io.AbstractFile</span><a href="AbstractFile.scala.html#12693">AbstractFile</a></span>, <span class="typed"><span class="type">String</span><span id="41194"><a id="41204">name</a></span></span>: <span class="typed"><span class="type">String</span><a id="1861">String</a></span>, <span class="typed"><span class="type">String</span><span id="41195"><a id="41205">path</a></span></span>: <span class="typed"><span class="type">String</span><a id="1861">String</a></span>, <span class="keyword">val</span> <span class="typed"><span class="type">java.util.zip.ZipEntry</span><span id="41197"><span id="41196"><a id="41206">entry</a></span></span></span>: <span class="typed"><span class="type">java.util.zip.ZipEntry</span><a id="40603">ZipEntry</a></span>)
        <span class="keyword">extends</span> <span class="typed"><span class="type">ZipArchive.this.Entry</span><a href="#40835">Entry</a></span>(<span class="typed"><span class="type">scala.tools.nsc.io.AbstractFile</span><a href="#41203">container</a></span>, <span class="typed"><span class="type">String</span><a href="#41204">name</a></span>, <span class="typed"><span class="type">String</span><a href="#41205">path</a></span>) {
    <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; java.util.zip.ZipFile</span><a id="41199">archive</a></span> = <span class="typed"><span class="type">ZipArchive.this.type</span><a href="#12669">ZipArchive</a></span>.<span class="keyword">this</span>.<span class="typed"><span class="type">=&gt; java.util.zip.ZipFile</span><a href="#40824">archive</a></span>
    <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Long</span><a id="41200">lastModified</a></span>: <span class="typed"><span class="type">Long</span><a id="2399">Long</a></span> = <span class="typed"><span class="type">=&gt; java.util.zip.ZipEntry</span><a href="#41196">entry</a></span>.<span class="typed"><span class="type">()Long</span><a id="41097">getTime</a></span>()
    <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; java.io.InputStream</span><a id="41201">input</a></span> = <span class="typed"><span class="type">=&gt; java.util.zip.ZipFile</span><a href="#41199">archive</a></span>.<span class="typed"><span class="type">(java.util.zip.ZipEntry)java.io.InputStream</span><a id="40855">getInputStream</a></span>(<span class="typed"><span class="type">=&gt; java.util.zip.ZipEntry</span><a href="#41196">entry</a></span>)
    <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Some[Int]</span><a id="41202">sizeOption</a></span> = <span class="typed"><span class="type">(Int)Some[Int]</span><span id="29737"><a id="308">Some</a></span></span>(<span class="typed"><span class="type">=&gt; java.util.zip.ZipEntry</span><a href="#41196">entry</a></span>.<span class="typed"><span class="type">()Long</span><a id="41099">getSize</a></span>().<span class="typed"><span class="type">=&gt; Int</span><a id="3194">toInt</a></span>)
  }
}

<span class="comment">/**
 * This class implements an abstract directory backed by a specified
 * zip archive.
 *
 * @author  Stephane Micheloud
 * @version 1.0, 29/05/2007
 */</span>
<span class="keyword">final</span> <span class="keyword">class</span> <span class="typed"><span class="type">class URLZipArchive extends scala.tools.nsc.io.AbstractFile with ScalaObject</span><a id="12723">URLZipArchive</a></span>(<span class="typed"><span class="type">java.net.URL</span><span id="40973"><a id="40993">url</a></span></span>: <span class="typed"><span class="type">java.net.URL</span><a id="4391">URL</a></span>) <span class="keyword">extends</span> <span class="typed"><span class="type">scala.tools.nsc.io.AbstractFile</span><a href="AbstractFile.scala.html#12693">AbstractFile</a></span> {
  <span class="typed"><span class="type">(Boolean)Unit</span><span id="6003"><a id="821">assert</a></span></span>(<span class="typed"><span class="type">java.net.URL</span><a href="#40973">url</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5795">ne</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>)

  <span class="keyword">private</span> <span class="keyword">var</span> <span class="typed"><span class="type">URLZipArchive.this.DirEntry</span><span id="40977"><span id="40975"><span id="40976"><a id="41408">root</a></span></span></span></span>: <span class="typed"><span class="type">URLZipArchive.this.DirEntry</span><a href="#40991">DirEntry</a></span> = _

  <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Nothing</span><a id="40978">container</a></span> = <span class="typed"><span class="type">Nothing</span><span class="keyword">throw</span></span> <span class="typed"><span class="type">(java.lang.String)java.lang.Error</span><a id="27228" class="keyword">new</a></span> <span class="typed"><span class="type">java.lang.Error</span><span id="5975"><a id="821">Error</a></span></span>(<span class="typed"><span class="type">java.lang.String(&quot;unsupported&quot;)</span><span class="string">&quot;unsupported&quot;</span></span>)

  <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; String</span><a id="40979">name</a></span>: <span class="typed"><span class="type">String</span><a id="1861">String</a></span> = <span class="typed"><span class="type">java.net.URL</span><a href="#40973">url</a></span>.<span class="typed"><span class="type">()java.lang.String</span><a id="40955">getFile</a></span>()

  <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; String</span><a id="40980">path</a></span>: <span class="typed"><span class="type">String</span><a id="1861">String</a></span> = <span class="typed"><span class="type">java.net.URL</span><a href="#40973">url</a></span>.<span class="typed"><span class="type">()java.lang.String</span><a id="40948">getPath</a></span>()

  <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; java.io.File</span><a id="40981">file</a></span>: <span class="typed"><span class="type">java.io.File</span><a id="3669">File</a></span> = <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>

  <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Boolean</span><a id="40982">isDirectory</a></span>: <span class="typed"><span class="type">Boolean</span><a id="2170">Boolean</a></span> = <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>

  <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Long</span><a id="40983">lastModified</a></span>: <span class="typed"><span class="type">Long</span><a id="2399">Long</a></span> =
    <span class="keyword">try</span> { <span class="typed"><span class="type">java.net.URL</span><a href="#40973">url</a></span>.<span class="typed"><span class="type">()java.net.URLConnection</span><a id="40963">openConnection</a></span>().<span class="typed"><span class="type">()Long</span><a id="41474">getLastModified</a></span>() }
    <span class="keyword">catch</span> { <span class="typed"><span class="type">Long(0L)</span><span class="keyword">case</span></span> _ =&gt; <span class="typed"><span class="type">Long(0L)</span><span class="int">0</span></span> }

  <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; java.io.InputStream</span><a id="40984">input</a></span>: <span class="typed"><span class="type">java.io.InputStream</span><a id="3744">InputStream</a></span> = <span class="typed"><span class="type">java.net.URL</span><a href="#40973">url</a></span>.<span class="typed"><span class="type">()java.io.InputStream</span><a id="40965">openStream</a></span>()
  
  <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Nothing</span><a id="40985">output</a></span> = <span class="typed"><span class="type">Nothing</span><span class="keyword">throw</span></span> <span class="typed"><span class="type">(java.lang.String)java.lang.Error</span><a id="27228" class="keyword">new</a></span> <span class="typed"><span class="type">java.lang.Error</span><span id="5975"><a id="821">Error</a></span></span>(<span class="typed"><span class="type">java.lang.String(&quot;unsupported&quot;)</span><span class="string">&quot;unsupported&quot;</span></span>)

  <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Iterator[scala.tools.nsc.io.AbstractFile]</span><a id="40986">elements</a></span>: <span class="typed"><span class="type">Iterator[scala.tools.nsc.io.AbstractFile]</span><a id="1339">Iterator</a></span>[AbstractFile] = {
    <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; URLZipArchive.this.DirEntry</span><a href="#40975">root</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5794">eq</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>) <span class="typed"><span class="type">()Unit</span><a href="#40988">load</a></span>()
    <span class="typed"><span class="type">=&gt; URLZipArchive.this.DirEntry</span><a href="#40975">root</a></span>.<span class="typed"><span class="type">=&gt; Iterator[scala.tools.nsc.io.AbstractFile]</span><a href="#41429">elements</a></span>
  }

  <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">(String,Boolean)scala.tools.nsc.io.AbstractFile</span><a id="40987">lookupName</a></span>(<span class="typed"><span class="type">String</span><a id="41529">name</a></span>: <span class="typed"><span class="type">String</span><a id="1861">String</a></span>, <span class="typed"><span class="type">Boolean</span><a id="41530">directory</a></span>: <span class="typed"><span class="type">Boolean</span><a id="2170">Boolean</a></span>): <span class="typed"><span class="type">scala.tools.nsc.io.AbstractFile</span><a href="AbstractFile.scala.html#12693">AbstractFile</a></span> = {
    <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; URLZipArchive.this.DirEntry</span><a href="#40975">root</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5794">eq</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>) <span class="typed"><span class="type">()Unit</span><a href="#40988">load</a></span>()
    <span class="typed"><span class="type">=&gt; URLZipArchive.this.DirEntry</span><a href="#40975">root</a></span>.<span class="typed"><span class="type">(String,Boolean)scala.tools.nsc.io.AbstractFile</span><a href="#41430">lookupName</a></span>(<span class="typed"><span class="type">String</span><a href="#41529">name</a></span>, <span class="typed"><span class="type">Boolean</span><a href="#41530">directory</a></span>)
  }

  <span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">()Unit</span><a id="40988">load</a></span>() {
    <span class="keyword">def</span> <span class="typed"><span class="type">(java.io.InputStream)java.io.InputStream</span><a id="41534">getEntryInputStream</a></span>(<span class="typed"><span class="type">java.io.InputStream</span><a id="41538">in</a></span>: <span class="typed"><span class="type">java.io.InputStream</span><a id="3744">InputStream</a></span>): <span class="typed"><span class="type">java.io.InputStream</span><a id="3744">InputStream</a></span> = {
      <span class="keyword">val</span> <span class="typed"><span class="type">scala.collection.mutable.ArrayBuffer[Byte]</span><a id="41539">buf</a></span> = <span class="typed"><span class="type">scala.collection.mutable.ArrayBuffer[Byte]</span><span class="keyword">new</span></span> scala.collection.mutable.<span class="typed"><span class="type">scala.collection.mutable.ArrayBuffer[Byte]</span><a id="20132">ArrayBuffer</a></span>[Byte]
      <span class="keyword">val</span> <span class="typed"><span class="type">Array[Byte]</span><a id="41540">data</a></span> = <span class="typed"><span class="type">Array[Byte]</span><span class="keyword">new</span></span> <span class="typed"><span class="type">Array[Byte]</span><a id="1072">Array</a></span>[Byte](<span class="typed"><span class="type">Int(1024)</span><span class="int">1024</span></span>)
      <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="41541">n</a></span> = <span class="typed"><span class="type">java.io.InputStream</span><a href="#41538">in</a></span>.<span class="typed"><span class="type">(Array[Byte])Int</span><a id="41373">read</a></span>(<span class="typed"><span class="type">Array[Byte]</span><a href="#41540">data</a></span>)
      <span class="typed"><span class="type">Unit</span><a href="#41542" class="keyword">while</a></span> (<span class="typed"><span class="type">Int</span><a href="#41541">n</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3145">&gt;</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>) {
        <span class="typed"><span class="type">scala.collection.mutable.ArrayBuffer[Byte]</span><a href="#41539">buf</a></span>.<span class="typed"><span class="type">(Array[Byte],Int,Int)Unit</span><a id="41549">++=</a></span>(<span class="typed"><span class="type">Array[Byte]</span><a href="#41540">data</a></span>, <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>, <span class="typed"><span class="type">Int</span><a href="#41541">n</a></span>)
        <span class="typed"><span class="type">Int</span><a href="#41541">n</a></span> = <span class="typed"><span class="type">java.io.InputStream</span><a href="#41538">in</a></span>.<span class="typed"><span class="type">(Array[Byte])Int</span><a id="41373">read</a></span>(<span class="typed"><span class="type">Array[Byte]</span><a href="#41540">data</a></span>)
      }
      <span class="typed"><span class="type">java.io.ByteArrayInputStream</span><span class="keyword">new</span></span> java.io.<span class="typed"><span class="type">java.io.ByteArrayInputStream</span><a id="3558">ByteArrayInputStream</a></span>(<span class="typed"><span class="type">scala.collection.mutable.ArrayBuffer[Byte]</span><a href="#41539">buf</a></span>.<span class="typed"><span class="type">Array[Byte]</span><a id="21675">toArray</a></span>)
    }
    <span class="typed"><span class="type">URLZipArchive.this.type</span><a href="#12723" class="keyword">this</a></span>.<span class="typed"><span class="type">(URLZipArchive.this.DirEntry)Unit</span><a href="#40976">root</a></span> = <span class="typed"><span class="type">URLZipArchive.this.DirEntry</span><span class="keyword">new</span></span> <span class="typed"><span class="type">URLZipArchive.this.DirEntry</span><a href="#40991">DirEntry</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;&lt;root&gt;&quot;)</span><span class="string">&quot;&lt;root&gt;&quot;</span></span>, <span class="typed"><span class="type">java.lang.String(&quot;/&quot;)</span><span class="string">&quot;/&quot;</span></span>)
    <span class="comment">// A path to DirEntry map</span>
    <span class="keyword">val</span> <span class="typed"><span class="type">scala.collection.mutable.Map[String,URLZipArchive.this.DirEntry]</span><a id="41535">dirs</a></span>: <span class="typed"><span class="type">scala.collection.mutable.Map[String,URLZipArchive.this.DirEntry]</span><a id="19880">Map</a></span>[String, DirEntry] = <span class="typed"><span class="type">scala.collection.mutable.HashMap[String,URLZipArchive.this.DirEntry]</span><span class="keyword">new</span></span> <span class="typed"><span class="type">scala.collection.mutable.HashMap[String,URLZipArchive.this.DirEntry]</span><a id="20081">HashMap</a></span>()
    <span class="typed"><span class="type">scala.collection.mutable.Map[String,URLZipArchive.this.DirEntry]</span><a href="#41535">dirs</a></span>.<span class="typed"><span class="type">(String,URLZipArchive.this.DirEntry)Unit</span><a id="24188">update</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;/&quot;)</span><span class="string">&quot;/&quot;</span></span>, <span class="typed"><span class="type">=&gt; URLZipArchive.this.DirEntry</span><a href="#40975">root</a></span>)
    <span class="keyword">val</span> <span class="typed"><span class="type">java.util.zip.ZipInputStream</span><a id="41536">zis</a></span> = <span class="typed"><span class="type">java.util.zip.ZipInputStream</span><span class="keyword">new</span></span> <span class="typed"><span class="type">java.util.zip.ZipInputStream</span><a id="40615">ZipInputStream</a></span>(<span class="typed"><span class="type">=&gt; java.io.InputStream</span><a href="#40984">input</a></span>)
    <span class="keyword">var</span> <span class="typed"><span class="type">java.util.zip.ZipEntry</span><a id="41537">entry</a></span> = <span class="typed"><span class="type">java.util.zip.ZipInputStream</span><a href="#41536">zis</a></span>.<span class="typed"><span class="type">()java.util.zip.ZipEntry</span><a id="41627">getNextEntry</a></span>()
    <span class="typed"><span class="type">Unit</span><a href="#41661" class="keyword">while</a></span> (<span class="typed"><span class="type">java.util.zip.ZipEntry</span><a href="#41537">entry</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5795">ne</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>) {
      <span class="keyword">val</span> <span class="typed"><span class="type">java.lang.String</span><a id="41662">path</a></span> = <span class="typed"><span class="type">java.util.zip.ZipEntry</span><a href="#41537">entry</a></span>.<span class="typed"><span class="type">()java.lang.String</span><a id="41095">getName</a></span>()
      <span class="typed"><span class="type">(Boolean,=&gt; Any)Unit</span><span id="6004"><a id="821">assert</a></span></span>(<span class="typed"><span class="type">java.util.zip.ZipEntry</span><a href="#41537">entry</a></span>.<span class="typed"><span class="type">()Boolean</span><a id="41110">isDirectory</a></span>() <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2748">==</a></span> <span class="typed"><span class="type">java.lang.String</span><a href="#41662">path</a></span>.<span class="typed"><span class="type">(java.lang.String)Boolean</span><a id="5842">endsWith</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;/&quot;)</span><span class="string">&quot;/&quot;</span></span>),
             <span class="typed"><span class="type">URLZipArchive.this.type</span><a href="#12723" class="keyword">this</a></span>.<span class="typed"><span class="type">()String</span><a href="AbstractFile.scala.html#25455">toString</a></span>() <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot; - &quot;)</span><span class="string">&quot; - &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String</span><a href="#41662">path</a></span>);
      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">java.util.zip.ZipEntry</span><a href="#41537">entry</a></span>.<span class="typed"><span class="type">()Boolean</span><a id="41110">isDirectory</a></span>()) {
        <span class="keyword">val</span> <span class="typed"><span class="type">URLZipArchive.this.DirEntry</span><a id="41672">dir</a></span>: <span class="typed"><span class="type">URLZipArchive.this.DirEntry</span><a href="#40991">DirEntry</a></span> = <span class="typed"><span class="type">(scala.collection.mutable.Map[String,URLZipArchive.this.DirEntry],String)URLZipArchive.this.DirEntry</span><a href="#40989">getDir</a></span>(<span class="typed"><span class="type">scala.collection.mutable.Map[String,URLZipArchive.this.DirEntry]</span><a href="#41535">dirs</a></span>, <span class="typed"><span class="type">java.lang.String</span><a href="#41662">path</a></span>)
        <span class="typed"><span class="type">(Boolean,=&gt; Any)Unit</span><span id="6004"><a id="821">assert</a></span></span>(<span class="typed"><span class="type">URLZipArchive.this.DirEntry</span><a href="#41672">dir</a></span>.<span class="typed"><span class="type">=&gt; java.util.zip.ZipEntry</span><a href="#41423">entry</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5794">eq</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>, <span class="typed"><span class="type">URLZipArchive.this.type</span><a href="#12723" class="keyword">this</a></span>.<span class="typed"><span class="type">()String</span><a href="AbstractFile.scala.html#25455">toString</a></span>() <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot; - &quot;)</span><span class="string">&quot; - &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String</span><a href="#41662">path</a></span>)
        <span class="typed"><span class="type">URLZipArchive.this.DirEntry</span><a href="#41672">dir</a></span>.<span class="typed"><span class="type">(java.util.zip.ZipEntry)Unit</span><a href="#41424">entry</a></span> = <span class="typed"><span class="type">java.util.zip.ZipEntry</span><a href="#41537">entry</a></span>
      } <span class="keyword">else</span> {
        <span class="keyword">val</span> <span class="typed"><span class="type">Int</span><a id="41682">index</a></span> = <span class="typed"><span class="type">java.lang.String</span><a href="#41662">path</a></span>.<span class="typed"><span class="type">(Int)Int</span><a id="5846">lastIndexOf</a></span>(<span class="typed"><span class="type">Int(47)</span><span class="char">'/'</span></span>)
        <span class="keyword">val</span> <span class="typed"><span class="type">java.lang.String</span><a id="41683">name</a></span> = <span class="typed"><span class="type">java.lang.String</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#41682">index</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&lt;</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>) <span class="typed"><span class="type">java.lang.String</span><a href="#41662">path</a></span> <span class="keyword">else</span> <span class="typed"><span class="type">java.lang.String</span><a href="#41662">path</a></span>.<span class="typed"><span class="type">(Int)java.lang.String</span><a id="5854">substring</a></span>(<span class="typed"><span class="type">Int</span><a href="#41682">index</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">+</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>)
        <span class="keyword">val</span> <span class="typed"><span class="type">java.lang.String</span><a id="41684">home</a></span> = <span class="typed"><span class="type">java.lang.String</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#41682">index</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&lt;</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>) <span class="typed"><span class="type">java.lang.String(&quot;/&quot;)</span><span class="string">&quot;/&quot;</span></span>  <span class="keyword">else</span> <span class="typed"><span class="type">java.lang.String</span><a href="#41662">path</a></span>.<span class="typed"><span class="type">(Int,Int)java.lang.String</span><a id="5855">substring</a></span>(<span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>, <span class="typed"><span class="type">Int</span><a href="#41682">index</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">+</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>)
        <span class="keyword">val</span> <span class="typed"><span class="type">URLZipArchive.this.DirEntry</span><a id="41685">parent</a></span>: <span class="typed"><span class="type">URLZipArchive.this.DirEntry</span><a href="#40991">DirEntry</a></span> = <span class="typed"><span class="type">(scala.collection.mutable.Map[String,URLZipArchive.this.DirEntry],String)URLZipArchive.this.DirEntry</span><a href="#40989">getDir</a></span>(<span class="typed"><span class="type">scala.collection.mutable.Map[String,URLZipArchive.this.DirEntry]</span><a href="#41535">dirs</a></span>, <span class="typed"><span class="type">java.lang.String</span><a href="#41684">home</a></span>)
        <span class="typed"><span class="type">(Boolean,=&gt; Any)Unit</span><span id="6004"><a id="821">assert</a></span></span>(<span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">URLZipArchive.this.DirEntry</span><a href="#41685">parent</a></span>.<span class="typed"><span class="type">=&gt; scala.collection.mutable.Map[String,URLZipArchive.this.Entry]</span><a href="#41421">entries</a></span>.<span class="typed"><span class="type">(String)Boolean</span><a id="24240">contains</a></span>(<span class="typed"><span class="type">java.lang.String</span><a href="#41662">path</a></span>), <span class="typed"><span class="type">URLZipArchive.this.type</span><a href="#12723" class="keyword">this</a></span>.<span class="typed"><span class="type">()String</span><a href="AbstractFile.scala.html#25455">toString</a></span>() <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot; - &quot;)</span><span class="string">&quot; - &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String</span><a href="#41662">path</a></span>)
        <span class="keyword">val</span> <span class="typed"><span class="type">java.io.InputStream</span><a id="41686">in</a></span> = <span class="typed"><span class="type">(java.io.InputStream)java.io.InputStream</span><a href="#41534">getEntryInputStream</a></span>(<span class="typed"><span class="type">java.util.zip.ZipInputStream</span><a href="#41536">zis</a></span>)
        <span class="typed"><span class="type">URLZipArchive.this.DirEntry</span><a href="#41685">parent</a></span>.<span class="typed"><span class="type">=&gt; scala.collection.mutable.Map[String,URLZipArchive.this.Entry]</span><a href="#41421">entries</a></span>.<span class="typed"><span class="type">(String,URLZipArchive.this.Entry)Unit</span><a id="24188">update</a></span>(<span class="typed"><span class="type">java.lang.String</span><a href="#41683">name</a></span>, <span class="typed"><span class="type">URLZipArchive.this.FileEntry</span><span class="keyword">new</span></span> <span class="typed"><span class="type">URLZipArchive.this.FileEntry</span><a href="#40992">FileEntry</a></span>(<span class="typed"><span class="type">java.lang.String</span><a href="#41683">name</a></span>, <span class="typed"><span class="type">java.lang.String</span><a href="#41662">path</a></span>, <span class="typed"><span class="type">java.util.zip.ZipEntry</span><a href="#41537">entry</a></span>, <span class="typed"><span class="type">java.io.InputStream</span><a href="#41686">in</a></span>))
      }
      <span class="typed"><span class="type">java.util.zip.ZipInputStream</span><a href="#41536">zis</a></span>.<span class="typed"><span class="type">()Unit</span><a id="41628">closeEntry</a></span>()
      <span class="typed"><span class="type">java.util.zip.ZipEntry</span><a href="#41537">entry</a></span> = <span class="typed"><span class="type">java.util.zip.ZipInputStream</span><a href="#41536">zis</a></span>.<span class="typed"><span class="type">()java.util.zip.ZipEntry</span><a id="41627">getNextEntry</a></span>()
    }
  }

  <span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(scala.collection.mutable.Map[String,URLZipArchive.this.DirEntry],String)URLZipArchive.this.DirEntry</span><a id="40989">getDir</a></span>(<span class="typed"><span class="type">scala.collection.mutable.Map[String,URLZipArchive.this.DirEntry]</span><a id="41673">dirs</a></span>: <span class="typed"><span class="type">scala.collection.mutable.Map[String,URLZipArchive.this.DirEntry]</span><a id="19880">Map</a></span>[String, DirEntry], <span class="typed"><span class="type">String</span><a id="41674">path</a></span>: <span class="typed"><span class="type">String</span><a id="1861">String</a></span>): <span class="typed"><span class="type">URLZipArchive.this.DirEntry</span><a href="#40991">DirEntry</a></span> =
    <span class="typed"><span class="type">scala.collection.mutable.Map[String,URLZipArchive.this.DirEntry]</span><a href="#41673">dirs</a></span>.<span class="typed"><span class="type">(String)Option[URLZipArchive.this.DirEntry]</span><a id="24235">get</a></span>(<span class="typed"><span class="type">String</span><a href="#41674">path</a></span>) <span class="typed"><span class="type">URLZipArchive.this.DirEntry</span><span class="keyword">match</span></span> {
      <span class="typed"><span class="type">URLZipArchive.this.DirEntry</span><span class="keyword">case</span></span> <a id="1">Some</a>(<span class="typed"><span class="type">URLZipArchive.this.DirEntry</span><a id="41764">dir</a></span>) =&gt; <span class="typed"><span class="type">URLZipArchive.this.DirEntry</span><a href="#41764">dir</a></span>
      <span class="typed"><span class="type">URLZipArchive.this.DirEntry</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object None</span><a id="536">None</a></span> =&gt;
        <span class="keyword">val</span> <span class="typed"><span class="type">Int</span><a id="41765">index</a></span> = <span class="typed"><span class="type">String</span><a href="#41674">path</a></span>.<span class="typed"><span class="type">(Int,Int)Int</span><a id="5847">lastIndexOf</a></span>(<span class="typed"><span class="type">Int(47)</span><span class="char">'/'</span></span>, <span class="typed"><span class="type">String</span><a href="#41674">path</a></span>.<span class="typed"><span class="type">()Int</span><a id="5821">length</a></span>() <span class="typed"><span class="type">(Int)Int</span><a id="3148">-</a></span> <span class="typed"><span class="type">Int(2)</span><span class="int">2</span></span>)
        <span class="keyword">val</span> <span class="typed"><span class="type">String</span><a id="41766">name</a></span> = <span class="typed"><span class="type">String</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#41765">index</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&lt;</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>) <span class="typed"><span class="type">String</span><a href="#41674">path</a></span> <span class="keyword">else</span> <span class="typed"><span class="type">String</span><a href="#41674">path</a></span>.<span class="typed"><span class="type">(Int)java.lang.String</span><a id="5854">substring</a></span>(<span class="typed"><span class="type">Int</span><a href="#41765">index</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">+</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>)
        <span class="keyword">val</span> <span class="typed"><span class="type">java.lang.String</span><a id="41767">home</a></span> = <span class="typed"><span class="type">java.lang.String</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#41765">index</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&lt;</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>) <span class="typed"><span class="type">java.lang.String(&quot;/&quot;)</span><span class="string">&quot;/&quot;</span></span>  <span class="keyword">else</span> <span class="typed"><span class="type">String</span><a href="#41674">path</a></span>.<span class="typed"><span class="type">(Int,Int)java.lang.String</span><a id="5855">substring</a></span>(<span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>, <span class="typed"><span class="type">Int</span><a href="#41765">index</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">+</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>)
        <span class="keyword">val</span> <span class="typed"><span class="type">URLZipArchive.this.DirEntry</span><a id="41768">parent</a></span>: <span class="typed"><span class="type">URLZipArchive.this.DirEntry</span><a href="#40991">DirEntry</a></span> = <span class="typed"><span class="type">(scala.collection.mutable.Map[String,URLZipArchive.this.DirEntry],String)URLZipArchive.this.DirEntry</span><a href="#40989">getDir</a></span>(<span class="typed"><span class="type">scala.collection.mutable.Map[String,URLZipArchive.this.DirEntry]</span><a href="#41673">dirs</a></span>, <span class="typed"><span class="type">java.lang.String</span><a href="#41767">home</a></span>)
        <span class="keyword">val</span> <span class="typed"><span class="type">URLZipArchive.this.DirEntry</span><a id="41769">dir</a></span> = <span class="typed"><span class="type">URLZipArchive.this.DirEntry</span><span class="keyword">new</span></span> <span class="typed"><span class="type">URLZipArchive.this.DirEntry</span><a href="#40991">DirEntry</a></span>(<span class="typed"><span class="type">String</span><a href="#41766">name</a></span>.<span class="typed"><span class="type">(Int,Int)java.lang.String</span><a id="5855">substring</a></span>(<span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>, <span class="typed"><span class="type">String</span><a href="#41766">name</a></span>.<span class="typed"><span class="type">()Int</span><a id="5821">length</a></span>() <span class="typed"><span class="type">(Int)Int</span><a id="3148">-</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>), <span class="typed"><span class="type">String</span><a href="#41674">path</a></span>)
        <span class="typed"><span class="type">URLZipArchive.this.DirEntry</span><a href="#41768">parent</a></span>.<span class="typed"><span class="type">=&gt; scala.collection.mutable.Map[String,URLZipArchive.this.Entry]</span><a href="#41421">entries</a></span>.<span class="typed"><span class="type">(String,URLZipArchive.this.Entry)Unit</span><a id="24188">update</a></span>(<span class="typed"><span class="type">String</span><a href="#41766">name</a></span>, <span class="typed"><span class="type">URLZipArchive.this.DirEntry</span><a href="#41769">dir</a></span>)
        <span class="typed"><span class="type">scala.collection.mutable.Map[String,URLZipArchive.this.DirEntry]</span><a href="#41673">dirs</a></span>.<span class="typed"><span class="type">(String,URLZipArchive.this.DirEntry)Unit</span><a id="24188">update</a></span>(<span class="typed"><span class="type">String</span><a href="#41674">path</a></span>, <span class="typed"><span class="type">URLZipArchive.this.DirEntry</span><a href="#41769">dir</a></span>)
        <span class="typed"><span class="type">URLZipArchive.this.DirEntry</span><a href="#41769">dir</a></span>
    }

  <span class="comment">/** Superclass of archive entries */</span>
  <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="typed"><span class="type">class Entry extends scala.tools.nsc.io.VirtualFile with ScalaObject</span><a id="40990">Entry</a></span>(<span class="typed"><span class="type">String</span><span id="41412"><a id="41859">name</a></span></span>: <span class="typed"><span class="type">String</span><a id="1861">String</a></span>, <span class="typed"><span class="type">String</span><span id="41413"><a id="41860">path</a></span></span>: <span class="typed"><span class="type">String</span><a id="1861">String</a></span>)
  <span class="keyword">extends</span> <span class="typed"><span class="type">scala.tools.nsc.io.VirtualFile</span><a href="VirtualFile.scala.html#12744">VirtualFile</a></span>(<span class="typed"><span class="type">String</span><a href="#41859">name</a></span>, <span class="typed"><span class="type">String</span><a href="#41860">path</a></span>) {
    <span class="keyword">final</span> <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; java.lang.String</span><a id="41415">path</a></span> = <span class="typed"><span class="type">URLZipArchive.this.type</span><a href="#12723">URLZipArchive</a></span>.<span class="keyword">this</span>.<span class="typed"><span class="type">()String</span><a href="AbstractFile.scala.html#25455">toString</a></span>() <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;(&quot;)</span><span class="string">&quot;(&quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="keyword">super</span>.<span class="typed"><span class="type">=&gt; String</span><a href="VirtualFile.scala.html#41013">path</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;)&quot;)</span><span class="string">&quot;)&quot;</span></span>
    <span class="comment">//final def getArchive = URLZipArchive.this.archive</span>
  }

  <span class="comment">/** A directory archive entry */</span>
  <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="typed"><span class="type">class DirEntry extends URLZipArchive.this.Entry with ScalaObject</span><a id="40991">DirEntry</a></span>(<span class="typed"><span class="type">String</span><span id="41418"><a id="41622">name</a></span></span>: <span class="typed"><span class="type">String</span><a id="1861">String</a></span>, <span class="typed"><span class="type">String</span><span id="41419"><a id="41623">path</a></span></span>: <span class="typed"><span class="type">String</span><a id="1861">String</a></span>)
  <span class="keyword">extends</span> <span class="typed"><span class="type">URLZipArchive.this.Entry</span><a href="#40990">Entry</a></span>(<span class="typed"><span class="type">String</span><a href="#41622">name</a></span>, <span class="typed"><span class="type">String</span><a href="#41623">path</a></span>)
  {
    <span class="keyword">val</span> <span class="typed"><span class="type">scala.collection.mutable.Map[String,URLZipArchive.this.Entry]</span><span id="41422"><a id="41421">entries</a></span></span>: <span class="typed"><span class="type">scala.collection.mutable.Map[String,URLZipArchive.this.Entry]</span><a id="19880">Map</a></span>[String, Entry] = <span class="typed"><span class="type">scala.collection.mutable.HashMap[String,URLZipArchive.this.Entry]</span><span class="keyword">new</span></span> <span class="typed"><span class="type">scala.collection.mutable.HashMap[String,URLZipArchive.this.Entry]</span><a id="20081">HashMap</a></span>()
    <span class="keyword">var</span> <span class="typed"><span class="type">java.util.zip.ZipEntry</span><span id="41425"><span id="41423"><span id="41424"><a id="41873">entry</a></span></span></span></span>: <span class="typed"><span class="type">java.util.zip.ZipEntry</span><a id="40603">ZipEntry</a></span> = _

    <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Boolean</span><a id="41426">isDirectory</a></span> = <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>
    <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Nothing</span><a id="41427">input</a></span> = <span class="typed"><span class="type">Nothing</span><span class="keyword">throw</span></span> <span class="typed"><span class="type">(java.lang.String)java.lang.Error</span><a id="27228" class="keyword">new</a></span> <span class="typed"><span class="type">java.lang.Error</span><span id="5975"><a id="821">Error</a></span></span>(<span class="typed"><span class="type">java.lang.String(&quot;cannot read directories&quot;)</span><span class="string">&quot;cannot read directories&quot;</span></span>)

    <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Long</span><a id="41428">lastModified</a></span>: <span class="typed"><span class="type">Long</span><a id="2399">Long</a></span> =
      <span class="typed"><span class="type">Long</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; java.util.zip.ZipEntry</span><a href="#41423">entry</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5795">ne</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>) <span class="typed"><span class="type">=&gt; java.util.zip.ZipEntry</span><a href="#41423">entry</a></span>.<span class="typed"><span class="type">()Long</span><a id="41097">getTime</a></span>() <span class="keyword">else</span> <span class="keyword">super</span>.<span class="typed"><span class="type">=&gt; Long</span><a href="VirtualFile.scala.html#41020">lastModified</a></span>

    <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Iterator[scala.tools.nsc.io.AbstractFile]</span><a id="41429">elements</a></span>: <span class="typed"><span class="type">Iterator[scala.tools.nsc.io.AbstractFile]</span><a id="1339">Iterator</a></span>[AbstractFile] = <span class="typed"><span class="type">=&gt; scala.collection.mutable.Map[String,URLZipArchive.this.Entry]</span><a href="#41421">entries</a></span>.<span class="typed"><span class="type">=&gt; Iterator[URLZipArchive.this.Entry]</span><a id="24244">values</a></span>

    <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">(String,Boolean)scala.tools.nsc.io.AbstractFile</span><a id="41430">lookupName</a></span>(<span class="typed"><span class="type">String</span><a id="41532">name</a></span>: <span class="typed"><span class="type">String</span><a id="1861">String</a></span>, <span class="typed"><span class="type">Boolean</span><a id="41533">directory</a></span>: <span class="typed"><span class="type">Boolean</span><a id="2170">Boolean</a></span>): <span class="typed"><span class="type">scala.tools.nsc.io.AbstractFile</span><a href="AbstractFile.scala.html#12693">AbstractFile</a></span> =
      <span class="typed"><span class="type">=&gt; scala.collection.mutable.Map[String,URLZipArchive.this.Entry]</span><a href="#41421">entries</a></span>.<span class="typed"><span class="type">(String)Option[URLZipArchive.this.Entry]</span><a id="24235">get</a></span>(<span class="typed"><span class="type">String</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Boolean</span><a href="#41533">directory</a></span>) <span class="typed"><span class="type">String</span><a href="#41532">name</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;/&quot;)</span><span class="string">&quot;/&quot;</span></span> <span class="keyword">else</span> <span class="typed"><span class="type">String</span><a href="#41532">name</a></span>) <span class="typed"><span class="type">scala.tools.nsc.io.AbstractFile</span><span class="keyword">match</span></span> {
        <span class="typed"><span class="type">URLZipArchive.this.Entry</span><span class="keyword">case</span></span> <a id="1">Some</a>(<span class="typed"><span class="type">URLZipArchive.this.Entry</span><a id="41885">dir</a></span>) =&gt; <span class="typed"><span class="type">URLZipArchive.this.Entry</span><a href="#41885">dir</a></span>
        <span class="typed"><span class="type">Null(null)</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object None</span><a id="536">None</a></span> =&gt; <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>
      }
  }

  <span class="keyword">final</span> <span class="keyword">class</span> <span class="typed"><span class="type">class FileEntry extends URLZipArchive.this.Entry with ScalaObject</span><a id="40992">FileEntry</a></span>(<span class="typed"><span class="type">String</span><span id="41750"><a id="41760">name</a></span></span>: <span class="typed"><span class="type">String</span><a id="1861">String</a></span>, <span class="typed"><span class="type">String</span><span id="41751"><a id="41761">path</a></span></span>: <span class="typed"><span class="type">String</span><a id="1861">String</a></span>,
                        <span class="keyword">val</span> <span class="typed"><span class="type">java.util.zip.ZipEntry</span><span id="41753"><span id="41752"><a id="41762">entry</a></span></span></span>: <span class="typed"><span class="type">java.util.zip.ZipEntry</span><a id="40603">ZipEntry</a></span>, <span class="keyword">val</span> <span class="typed"><span class="type">java.io.InputStream</span><span id="41755"><span id="41754"><a id="41763">in</a></span></span></span>: <span class="typed"><span class="type">java.io.InputStream</span><a id="3744">InputStream</a></span>)
        <span class="keyword">extends</span> <span class="typed"><span class="type">URLZipArchive.this.Entry</span><a href="#40990">Entry</a></span>(<span class="typed"><span class="type">String</span><a href="#41760">name</a></span>, <span class="typed"><span class="type">String</span><a href="#41761">path</a></span>) {
    <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Long</span><a id="41757">lastModified</a></span>: <span class="typed"><span class="type">Long</span><a id="2399">Long</a></span> = <span class="typed"><span class="type">=&gt; java.util.zip.ZipEntry</span><a href="#41752">entry</a></span>.<span class="typed"><span class="type">()Long</span><a id="41097">getTime</a></span>()
    <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; java.io.InputStream</span><a id="41758">input</a></span> = <span class="typed"><span class="type">=&gt; java.io.InputStream</span><a href="#41754">in</a></span>
    <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Some[Int]</span><a id="41759">sizeOption</a></span> = <span class="typed"><span class="type">(Int)Some[Int]</span><span id="29737"><a id="308">Some</a></span></span>(<span class="typed"><span class="type">=&gt; java.util.zip.ZipEntry</span><a href="#41752">entry</a></span>.<span class="typed"><span class="type">()Long</span><a id="41099">getSize</a></span>().<span class="typed"><span class="type">=&gt; Int</span><a id="3194">toInt</a></span>)
  }
}

        </pre>
    </body>
</html>