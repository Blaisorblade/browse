<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/io/ZipArchive.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style">
    </head>
    <body>
        <pre>
/* NSC -- new Scala compiler
 * Copyright 2005-2009 LAMP/EPFL
 * @author  Martin Odersky
 */
// $Id: ZipArchive.scala 18617 2009-08-31 15:46:46Z extempore $


<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> io

<span class="keyword">import</span> scala.io.File
<span class="keyword">import</span> java.net.URL
<span class="keyword">import</span> java.util.Enumeration
<span class="keyword">import</span> java.io.{ File =&gt; JFile, IOException, InputStream, BufferedInputStream }
<span class="keyword">import</span> java.util.zip.{ ZipEntry, ZipFile, ZipInputStream }
<span class="keyword">import</span> PartialFunction._

<span class="keyword">import</span> scala.collection.mutable.{ Map, HashMap }
<span class="keyword">import</span> scala.collection.immutable.{ StringVector =&gt; SV }
<span class="keyword">import</span> scala.collection.JavaConversions.asIterator

/**
 * @author  Philippe Altherr
 * @version 1.0, 23/03/2004
 */
<span class="keyword">object</span> <a title="object scala.tools.nsc.io.ZipArchive" id="20516">ZipArchive</a> <span title="ScalaObject">{</span>

  //########################################################################

  /**
   * ...
   *
   * @param path ...
   *  @return     ...
   */
  <span class="keyword">def</span> <a title="(path: String)scala.tools.nsc.io.AbstractFile" id="636811">fromPath</a>(<a title="String" id="636820">path</a>: <span title="String">String</span>): <a href="AbstractFile.scala.html#20548" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a> = <a href="#636812" title="(file: scala.io.File)scala.tools.nsc.io.AbstractFile">fromFile</a>(<span title="object scala.io.File">File</span><a title="scala.io.Codec" id="636840">(</a><a href="#636820" title="scala.io.Path" id="636835">path</a>))

  /**
   * If the specified file &lt;code&gt;file&lt;/code&gt; exists and is a readable
   * zip archive, returns an abstract file backed by it. Otherwise,
   * returns &lt;code&gt;null&lt;/code&gt;.
   *
   * @param file ...
   * @return     ...
   */
  <span class="keyword">def</span> <a title="(file: scala.io.File)scala.tools.nsc.io.AbstractFile" id="636812">fromFile</a>(<a title="scala.io.File" id="636822">file</a>: <span title="scala.io.File">File</span>): <a href="AbstractFile.scala.html#20548" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a> =
    <span class="keyword">try</span> { <span title="scala.tools.nsc.io.ZipArchive" class="keyword">new</span> <a href="#20515" title="scala.tools.nsc.io.ZipArchive">ZipArchive</a>(<a href="#636822" title="scala.io.File">file</a>, <a title="(x$1: java.io.File)java.util.zip.ZipFile" id="112508" class="keyword">new</a> <span title="java.util.zip.ZipFile">ZipFile</span>(<a href="#636822" title="scala.io.File">file</a>.<a title="=&gt; java.io.File" id="111830">jfile</a>)) }
    <span class="keyword">catch</span> { <span title="Null(null)" class="keyword">case</span> _: <span title="java.io.IOException">IOException</span> =&gt; <span title="Null(null)" class="keyword">null</span> }

  /**
   * Returns an abstract directory backed by the specified archive.
   *
   * @param archive ...
   * @return        ...
   */
  <span class="keyword">def</span> <a title="(archive: java.util.zip.ZipFile)scala.tools.nsc.io.AbstractFile" id="636813">fromArchive</a>(<a title="java.util.zip.ZipFile" id="636853">archive</a>: <span title="java.util.zip.ZipFile">ZipFile</span>): <a href="AbstractFile.scala.html#20548" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a> =
    <span title="scala.tools.nsc.io.ZipArchive" class="keyword">new</span> <a href="#20515" title="scala.tools.nsc.io.ZipArchive">ZipArchive</a>(<span title="object scala.io.File">File</span><a title="scala.io.Codec" id="636869">(</a><a href="#636853" title="java.util.zip.ZipFile">archive</a>.<a title="()java.lang.String" id="112514">getName</a><a title="scala.io.Path" id="636864">(</a>)), <a href="#636853" title="java.util.zip.ZipFile">archive</a>)

  /**
   * Returns an abstract directory backed by the specified archive.
   *
   * @param url ...
   * @return    ...
   */
  <span class="keyword">def</span> <a title="(url: java.net.URL)scala.tools.nsc.io.AbstractFile" id="636814">fromURL</a>(<a title="java.net.URL" id="636874">url</a>: <span title="java.net.URL">URL</span>): <a href="AbstractFile.scala.html#20548" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a> =
    <span title="scala.tools.nsc.io.URLZipArchive" class="keyword">new</span> <a href="#20572" title="scala.tools.nsc.io.URLZipArchive">URLZipArchive</a>(<a href="#636874" title="java.net.URL">url</a>)
}

<span class="keyword">private</span>[io] <span class="keyword">trait</span> <a title="trait ZipFileCommon extends java.lang.Object with ScalaObject" id="22440">ZipFileCommon</a>
<span title="ScalaObject">{</span>
  <span class="keyword">import</span> SV.{ splitAt }
  
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(path: String)(String, String)" id="111921">splitPath</a>(<a title="String" id="636991">path</a>: <span title="String">String</span>): <span title="(String, String)">(</span>String, String) = {
    (<a href="#636991" title="(x$1: Int)Int">path</a> lastIndexOf <span title="Int(47)" class="char">'/'</span>) <span title="(String, String)" class="keyword">match</span> {
      <span title="(java.lang.String, String)" class="keyword">case</span> <span title="Int(-1)">-</span><span class="int">1</span>   =&gt; <span title="(_1: java.lang.String,_2: String)(java.lang.String, String)">(</span><span title="java.lang.String(&quot;/&quot;)" class="string">&quot;/&quot;</span>, <a href="#636991" title="String">path</a>)
      <span title="(String, String)" class="keyword">case</span> <a title="Int" id="637015">idx</a>  =&gt; <a title="(s: String,index: Int)(String, String)" id="636932">splitAt</a>(<a href="#636991" title="String">path</a>, <a href="#637015" title="(x$1: Int)Int">idx</a> + <span title="Int(1)" class="int">1</span>)
    }
  }
    
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(in: java.io.InputStream)java.io.InputStream" id="111922">byteInputStream</a>(<a title="java.io.InputStream" id="637040">in</a>: <span title="java.io.InputStream">InputStream</span>): <span title="java.io.InputStream">InputStream</span> = {
    <span class="keyword">val</span> <a title="java.io.BufferedInputStream" id="637042">buf</a> = <span title="java.io.BufferedInputStream" class="keyword">new</span> <a title="java.io.BufferedInputStream" id="3879">BufferedInputStream</a>(<a href="#637040" title="java.io.InputStream">in</a>)
    <span class="keyword">val</span> <a title="Iterator[Byte]" id="637043">bytes</a> = <span title="(elem: =&gt; Byte)Iterator[Byte]">Iterator</span> <span title="(p: (Byte) =&gt; Boolean)Iterator[Byte]">continually</span> <a href="#637040" title="java.io.InputStream">in</a>.<a title="()Int" id="83981">read</a>().<a title="=&gt; Byte" id="2844">toByte</a> takeWhile (<a href="#637087" title="(x$1: Int)Boolean" id="2330">_</a> != <span title="Int(-1)">-</span><span class="int">1</span>)
    <span title="java.io.ByteArrayInputStream" class="keyword">new</span> java.io.<a title="java.io.ByteArrayInputStream" id="3681">ByteArrayInputStream</a>(<a href="#637043" title="Iterator[Byte]">bytes</a>.<a title="=&gt; Sequence[Byte]" id="32278">toSequence</a>.<a title="(implicit evidence$1: scala.reflect.ClassManifest[Byte])Array[Byte]" id="27603">toArray</a>)
  }

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(zis: java.util.zip.ZipInputStream)Iterator[java.util.zip.ZipEntry]" id="111923">zipEntryIterator</a>(<a title="java.util.zip.ZipInputStream" id="637110">zis</a>: <span title="java.util.zip.ZipInputStream">ZipInputStream</span>): <span title="Iterator[java.util.zip.ZipEntry]">Iterator</span>[ZipEntry] = {
    <span title="(elem: =&gt; java.util.zip.ZipEntry)Iterator[java.util.zip.ZipEntry]">Iterator</span> <span title="(p: (java.util.zip.ZipEntry) =&gt; Boolean)Iterator[java.util.zip.ZipEntry]">continually</span> <a href="#637110" title="java.util.zip.ZipInputStream">zis</a>.<a title="()java.util.zip.ZipEntry" id="637114">getNextEntry</a>() takeWhile (<a href="#637162" title="(x$1: AnyRef)Boolean" id="6540">_</a> != <span title="Null(null)" class="keyword">null</span>)
  }  
}

/**
 * This class implements an abstract directory backed by a zip
 * archive. We let the encoding be &lt;code&gt;null&lt;/code&gt;, because we behave like
 * a directory.
 *
 * @author  Philippe Altherr
 * @version 1.0, 23/03/2004
 */
<span class="keyword">final</span> <span class="keyword">class</span> <a title="class ZipArchive extends scala.tools.nsc.io.PlainFile with scala.tools.nsc.io.ZipFileCommon with ScalaObject" id="20515">ZipArchive</a><span title="ScalaObject">(</span><a title="scala.io.File" id="636815">file</a>: <span title="scala.io.File">File</span>, <span class="keyword">val</span> <a title="java.util.zip.ZipFile" id="636816">archive</a>: <span title="java.util.zip.ZipFile">ZipFile</span>) <span class="keyword">extends</span> <a href="PlainFile.scala.html#20566" title="scala.tools.nsc.io.PlainFile">PlainFile</a>(<a href="#636815" title="scala.io.File">file</a>) <span class="keyword">with</span> <a href="#22440" title="scala.tools.nsc.io.ZipFileCommon">ZipFileCommon</a>
{
  <span title="(assertion: Boolean)Unit">assert</span>(<a href="#636816" title="(x$1: AnyRef)Boolean">archive</a> ne <span title="Null(null)" class="keyword">null</span>)

  /** The root directory  */
  <span class="keyword">private</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="ZipArchive.this.DirEntry" id="111910">root</a> = {
    <span class="keyword">val</span> <a title="ZipArchive.this.DirEntry" id="637174">root</a> = <span title="ZipArchive.this.DirEntry" class="keyword">new</span> <a href="#111917" title="ZipArchive.this.DirEntry">DirEntry</a>(<a href="#20515" title="scala.tools.nsc.io.ZipArchive" class="keyword">this</a>, <span title="java.lang.String(&quot;&lt;root&gt;&quot;)" class="string">&quot;&lt;root&gt;&quot;</span>, <span title="java.lang.String(&quot;/&quot;)" class="string">&quot;/&quot;</span>)

    // A path to DirEntry map
    <span class="keyword">val</span> <a title="scala.collection.mutable.Map[String,ZipArchive.this.DirEntry]" id="637175">dirs</a>: <span title="scala.collection.mutable.Map[String,ZipArchive.this.DirEntry]">Map</span>[String, DirEntry] = <span title="scala.collection.mutable.HashMap[String,ZipArchive.this.DirEntry]" class="keyword">new</span> <span title="scala.collection.mutable.HashMap[String,ZipArchive.this.DirEntry]">HashMap</span>()
    <a href="#637175" title="(key: String,value: ZipArchive.this.DirEntry)Unit">dirs</a>(<span title="java.lang.String(&quot;/&quot;)" class="string">&quot;/&quot;</span>) = <a href="#637174" title="ZipArchive.this.DirEntry">root</a>
    <span class="keyword">val</span> <a title="Iterator[java.util.zip.ZipEntry]" id="637176">entries</a> = <a title="(i: java.util.Enumeration[?0])Iterator[?0]" id="4415">asIterator</a>(<a href="#636816" title="=&gt; java.util.zip.ZipFile">archive</a>.<a title="()java.util.Enumeration[_ &lt;: java.util.zip.ZipEntry]" id="112515">entries</a>())
    
    <a href="#637176" title="(f: (java.util.zip.ZipEntry) =&gt; Unit)Unit">entries</a> foreach <a href="#637240" title="Unit">{</a> <span title="Unit" class="keyword">case</span> <a title="java.util.zip.ZipEntry" id="637241">entry</a>: <span title="java.util.zip.ZipEntry">ZipEntry</span> =&gt;
      <span class="keyword">val</span> <a title="java.lang.String" id="637242">path</a> = <a href="#637241" title="java.util.zip.ZipEntry">entry</a>.<span title="()java.lang.String">getName</span>
      <span title="Unit" class="keyword">if</span> (<a href="#637241" title="java.util.zip.ZipEntry">entry</a>.<span title="()Boolean">isDirectory</span>) {
        <span class="keyword">val</span> <a title="ZipArchive.this.DirEntry" id="637247">dir</a>: <a href="#111917" title="ZipArchive.this.DirEntry">DirEntry</a> = <a href="#111915" title="(dirs: scala.collection.mutable.Map[String,ZipArchive.this.DirEntry],path: String)ZipArchive.this.DirEntry">getDir</a>(<a href="#637175" title="scala.collection.mutable.Map[String,ZipArchive.this.DirEntry]">dirs</a>, <a href="#637242" title="java.lang.String">path</a>)
        <span title="Unit" class="keyword">if</span> (<a href="#637247" title="ZipArchive.this.DirEntry">dir</a>.<a href="#637187" title="(x$1: AnyRef)Boolean">entry</a> == <span title="Null(null)" class="keyword">null</span>) <a href="#637247" title="ZipArchive.this.DirEntry">dir</a>.<a href="#637187" title="(x$1: java.util.zip.ZipEntry)Unit">entry</a> = <a href="#637241" title="java.util.zip.ZipEntry">entry</a>
      }
      <span class="keyword">else</span> {
        <span class="keyword">val</span> <a href="#637264" title="(String, String)">(</a><a href="#637263" title="String" id="637264">home</a>, <a href="#637263" title="String" id="637265">name</a>) = <a href="#111921" title="(path: String)(String, String)">splitPath</a><span title="(String, String) @unchecked">(</span><a href="#637242" title="java.lang.String">path</a>)
        <span class="keyword">val</span> <a title="ZipArchive.this.DirEntry" id="637266">parent</a>: <a href="#111917" title="ZipArchive.this.DirEntry">DirEntry</a> = <a href="#111915" title="(dirs: scala.collection.mutable.Map[String,ZipArchive.this.DirEntry],path: String)ZipArchive.this.DirEntry">getDir</a>(<a href="#637175" title="scala.collection.mutable.Map[String,ZipArchive.this.DirEntry]">dirs</a>, <a href="#637264" title="String">home</a>)
        <a href="#637266" title="ZipArchive.this.DirEntry">parent</a>.<a href="#637184" title="=&gt; scala.collection.mutable.Map[String,ZipArchive.this.Entry]">entries</a>.<span title="(key: String,value: ZipArchive.this.Entry)Unit">update</span>(<a href="#637265" title="String">name</a>, <span title="ZipArchive.this.FileEntry" class="keyword">new</span> <a href="#111918" title="ZipArchive.this.FileEntry">FileEntry</a>(<a href="#637266" title="ZipArchive.this.DirEntry">parent</a>, <a href="#637265" title="String">name</a>, <a href="#637242" title="java.lang.String">path</a>, <a href="#637241" title="java.util.zip.ZipEntry">entry</a>))
      }
    }
    
    <a href="#637174" title="ZipArchive.this.DirEntry">root</a>
  }

  /** Returns true. */
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Boolean" id="111911">isDirectory</a> = <span title="Boolean(true)" class="keyword">true</span>

  /** Returns all abstract subfiles of this abstract directory. */
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Iterator[scala.tools.nsc.io.AbstractFile]" id="111912">iterator</a>: <span title="Iterator[scala.tools.nsc.io.AbstractFile]">Iterator</span>[AbstractFile] = <a href="#111909" title="=&gt; ZipArchive.this.DirEntry">root</a>.<a href="#637192" title="=&gt; Iterator[scala.tools.nsc.io.AbstractFile]">iterator</a>

  /**
   * Returns the abstract file in this abstract directory with the
   * specified name. If there is no such file, returns null. The
   * argument &quot;directory&quot; tells whether to look for a directory or
   * or a regular file.
   */
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(name: String,directory: Boolean)scala.tools.nsc.io.AbstractFile" id="111913">lookupName</a>(<a title="String" id="637315">name</a>: <span title="String">String</span>, <a title="Boolean" id="637316">directory</a>: <span title="Boolean">Boolean</span>): <a href="AbstractFile.scala.html#20548" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a> =
    <a href="#111909" title="=&gt; ZipArchive.this.DirEntry">root</a>.<a href="#637193" title="(name: String,directory: Boolean)scala.tools.nsc.io.AbstractFile">lookupName</a>(<a href="#637315" title="String">name</a>, <a href="#637316" title="Boolean">directory</a>)

  /** Returns an abstract file with the given name. It does not
   *  check that it exists.
   */
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(name: String,directory: Boolean)scala.tools.nsc.io.AbstractFile" id="111914">lookupNameUnchecked</a>(<a title="String" id="637323">name</a>: <span title="String">String</span>, <a title="Boolean" id="637324">directory</a>: <span title="Boolean">Boolean</span>): <a href="AbstractFile.scala.html#20548" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a> =
    <span title="Nothing" class="keyword">throw</span> <span title="java.lang.UnsupportedOperationException" class="keyword">new</span> <span title="java.lang.UnsupportedOperationException">UnsupportedOperationException</span>()

  /**
   * Lookups the specified table for a DirEntry with the specified
   * path. If successful, returns the found DirEntry. Otherwise
   * creates a new DirEntry, enters it into the table and in the
   * table of its parent ZipDir and returns it.
   */
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(dirs: scala.collection.mutable.Map[String,ZipArchive.this.DirEntry],path: String)ZipArchive.this.DirEntry" id="111915">getDir</a>(<a title="scala.collection.mutable.Map[String,ZipArchive.this.DirEntry]" id="637248">dirs</a>: <span title="scala.collection.mutable.Map[String,ZipArchive.this.DirEntry]">Map</span>[String, DirEntry], <a title="String" id="637249">path</a>: <span title="String">String</span>): <a href="#111917" title="ZipArchive.this.DirEntry">DirEntry</a> =
    <a title="(default: =&gt; ZipArchive.this.DirEntry)ZipArchive.this.DirEntry" id="35047">(</a><a href="#637248" title="(key: String)Option[ZipArchive.this.DirEntry]">dirs</a> get <a href="#637249" title="String">path</a>) getOrElse {
      <span class="keyword">val</span> <a href="#637346" title="(String, String)">(</a><a href="#637345" title="String" id="637346">home</a>, <a href="#637345" title="String" id="637347">name</a>) = <a href="#111921" title="(path: String)(String, String)">splitPath</a><span title="(String, String) @unchecked">(</span><span title="object scala.collection.immutable.StringVector">SV</span>.<a title="(s: String,len: Int)String" id="636929">dropRight</a>(<a href="#637249" title="String">path</a>, <span title="Int(1)" class="int">1</span>))
      <span class="keyword">val</span> <a title="ZipArchive.this.DirEntry" id="637348">parent</a>: <a href="#111917" title="ZipArchive.this.DirEntry">DirEntry</a> = <a href="#111915" title="(dirs: scala.collection.mutable.Map[String,ZipArchive.this.DirEntry],path: String)ZipArchive.this.DirEntry">getDir</a>(<a href="#637248" title="scala.collection.mutable.Map[String,ZipArchive.this.DirEntry]">dirs</a>, <a href="#637346" title="String">home</a>)
      <span class="keyword">val</span> <a title="ZipArchive.this.DirEntry" id="637349">dir</a> = <span title="ZipArchive.this.DirEntry" class="keyword">new</span> <a href="#111917" title="ZipArchive.this.DirEntry">DirEntry</a>(<a href="#637348" title="ZipArchive.this.DirEntry">parent</a>, <a href="#637347" title="String">name</a>, <a href="#637249" title="String">path</a>)
      <a href="#637348" title="ZipArchive.this.DirEntry">parent</a>.<a href="#637184" title="=&gt; scala.collection.mutable.Map[String,ZipArchive.this.Entry]">entries</a>.<span title="(key: String,value: ZipArchive.this.Entry)Unit">update</span>(<a href="#637347" title="(x$1: Any)java.lang.String">name</a> + <span title="object scala.collection.immutable.StringVector">SV</span>.<a title="(s: String)Char" id="636939">last</a>(<a href="#637249" title="String">path</a>), <a href="#637349" title="ZipArchive.this.DirEntry">dir</a>)
      <a href="#637248" title="scala.collection.mutable.Map[String,ZipArchive.this.DirEntry]">dirs</a>.<span title="(key: String,value: ZipArchive.this.DirEntry)Unit">update</span>(<a href="#637249" title="String">path</a>, <a href="#637349" title="ZipArchive.this.DirEntry">dir</a>)
      <a href="#637349" title="ZipArchive.this.DirEntry">dir</a>      
    }
  
  //########################################################################
  // Private Class - Entry

  /** Superclass of archive entries */
  <span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class Entry extends scala.tools.nsc.io.VirtualFile with ScalaObject" id="111916">Entry</a><span title="ScalaObject">(</span>
    <span class="keyword">override</span> <span class="keyword">val</span> <a title="scala.tools.nsc.io.AbstractFile" id="637393">container</a>: <a href="AbstractFile.scala.html#20548" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a>,
    <a title="String" id="637394">name</a>: <span title="String">String</span>,
    <a title="String" id="637395">path</a>: <span title="String">String</span>
  ) <span class="keyword">extends</span> <a href="VirtualFile.scala.html#20587" title="scala.tools.nsc.io.VirtualFile">VirtualFile</a>(<a href="#637394" title="String">name</a>, <a href="#637395" title="String">path</a>)
  {
    <span class="keyword">final</span> <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; String" id="111934">path</a> = <span title="implicit scala.Predef.stringWrapper : (x: String)scala.runtime.RichString" class="string">&quot;%s(%s)&quot;</span>.<span title="(args: Any*)String">format</span>(<a href="#20515" title="scala.tools.nsc.io.ZipArchive">ZipArchive</a>.<span class="keyword">this</span>, <a href="#111936" title="=&gt; String">pathInArchive</a>)    
    <span class="keyword">final</span> <span class="keyword">def</span> <a title="=&gt; java.util.zip.ZipFile" id="111935">getArchive</a> = <a href="#20515" title="ZipArchive.this.type">ZipArchive</a>.<span class="keyword">this</span>.<a href="#636816" title="=&gt; java.util.zip.ZipFile">archive</a>
    <span class="keyword">def</span> <a title="=&gt; String" id="111936">pathInArchive</a> = <span class="keyword">super</span>.<a href="VirtualFile.scala.html#110697" title="=&gt; String">path</a>
    
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Int" id="111937">hashCode</a> = <span class="keyword">super</span>.<a href="VirtualFile.scala.html#110692" title="(x$1: Int)Int">hashCode</a> + <a href="#637393" title="=&gt; scala.tools.nsc.io.AbstractFile">container</a>.<a title="()Int" id="6524">hashCode</a>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(that: Any)Boolean" id="111938">equals</a>(<a title="Any" id="637467">that</a> : <a title="Any" id="49">Any</a>) =
      <span class="keyword">super</span>.<a href="VirtualFile.scala.html#110693" title="(that: Any)Boolean">equals</a><a title="(x$1: Boolean)Boolean" id="2212">(</a><a href="#637467" title="Any">that</a>) &amp;&amp; (<a title="(x: Any)(pf: PartialFunction[Any,Boolean])Boolean" id="1086">cond</a>(<a href="#637467" title="Any">that</a>) <a href="#637483" title="Boolean">{</a>
        <span title="Boolean" class="keyword">case</span> <a title="ZipArchive.this.Entry" id="637484">e</a>: <a href="#111916" title="ZipArchive.this.Entry">Entry</a> =&gt; <a href="#637393" title="(x$1: AnyRef)Boolean">container</a> == <a href="#637484" title="ZipArchive.this.Entry">e</a>.<a href="#637393" title="=&gt; scala.tools.nsc.io.AbstractFile">container</a>
      })
  }

  //########################################################################
  // Private Class - DirEntry

  /** A directory archive entry */
  <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">class</span> <a title="class DirEntry extends ZipArchive.this.Entry with ScalaObject" id="111917">DirEntry</a><span title="ScalaObject">(</span>
    <a title="scala.tools.nsc.io.AbstractFile" id="637194">container</a>: <a href="AbstractFile.scala.html#20548" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a>,
    <a title="String" id="637195">name</a>: <span title="String">String</span>,
    <a title="String" id="637196">path</a>: <span title="String">String</span>
  ) <span class="keyword">extends</span> <a href="#111916" title="ZipArchive.this.Entry">Entry</a>(<a href="#637194" title="scala.tools.nsc.io.AbstractFile">container</a>, <a href="#637195" title="String">name</a>, <a href="#637196" title="String">path</a>)
  {
    <span class="keyword">val</span> <a title="scala.collection.mutable.Map[String,ZipArchive.this.Entry]" id="637184">entries</a>: <span title="scala.collection.mutable.Map[String,ZipArchive.this.Entry]">Map</span>[String, Entry] = <span title="scala.collection.mutable.HashMap[String,ZipArchive.this.Entry]" class="keyword">new</span> <span title="scala.collection.mutable.HashMap[String,ZipArchive.this.Entry]">HashMap</span>()
    <span class="keyword">var</span> <a title="java.util.zip.ZipEntry" id="637187">entry</a>: <span title="java.util.zip.ZipEntry">ZipEntry</span> = _

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Boolean" id="637189">isDirectory</a> = <span title="Boolean(true)" class="keyword">true</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Nothing" id="637190">input</a> = <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.Error" class="keyword">new</span> <span title="java.lang.Error">Error</span>(<span title="java.lang.String(&quot;cannot read directories&quot;)" class="string">&quot;cannot read directories&quot;</span>)

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Long" id="637191">lastModified</a>: <span title="Long">Long</span> =
      <span title="Long" class="keyword">if</span> (<a href="#637187" title="(x$1: AnyRef)Boolean">entry</a> ne <span title="Null(null)" class="keyword">null</span>) <a href="#637187" title="=&gt; java.util.zip.ZipEntry">entry</a>.<span title="()Long">getTime</span>() <span class="keyword">else</span> <span class="keyword">super</span>.<a href="VirtualFile.scala.html#110705" title="=&gt; Long">lastModified</a>

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Iterator[scala.tools.nsc.io.AbstractFile]" id="637192">iterator</a>: <span title="Iterator[scala.tools.nsc.io.AbstractFile]">Iterator</span>[AbstractFile] = <a href="#637184" title="=&gt; scala.collection.mutable.Map[String,ZipArchive.this.Entry]">entries</a>.<span title="=&gt; Iterator[ZipArchive.this.Entry]">valuesIterator</span>

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(name: String,directory: Boolean)scala.tools.nsc.io.AbstractFile" id="637193">lookupName</a>(<a title="String" id="637318">name</a>: <span title="String">String</span>, <a title="Boolean" id="637319">directory</a>: <span title="Boolean">Boolean</span>): <a href="AbstractFile.scala.html#20548" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a> = {
      <span class="keyword">def</span> <a title="=&gt; java.lang.String" id="637525">slashName</a> = <span title="java.lang.String" class="keyword">if</span> (<a href="#637319" title="Boolean">directory</a>) <a href="#637318" title="(x$1: Any)java.lang.String">name</a> + <span title="java.lang.String(&quot;/&quot;)" class="string">&quot;/&quot;</span> <span class="keyword">else</span> <a href="#637318" title="String">name</a>
      <a href="#637184" title="=&gt; scala.collection.mutable.Map[String,ZipArchive.this.Entry]">entries</a>.<a title="(key: String,default: =&gt; ZipArchive.this.Entry)ZipArchive.this.Entry" id="44440">getOrElse</a>(<a href="#637525" title="=&gt; java.lang.String">slashName</a>, <span title="Null(null)" class="keyword">null</span>)
    }
  }

  /** A regular file archive entry */
  <span class="keyword">final</span> <span class="keyword">class</span> <a title="class FileEntry extends ZipArchive.this.Entry with ScalaObject" id="111918">FileEntry</a><span title="ScalaObject">(</span>
    <a title="scala.tools.nsc.io.AbstractFile" id="637289">container</a>: <a href="AbstractFile.scala.html#20548" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a>,
    <a title="String" id="637290">name</a>: <span title="String">String</span>,
    <a title="String" id="637291">path</a>: <span title="String">String</span>,
    <span class="keyword">val</span> <a title="java.util.zip.ZipEntry" id="637292">entry</a>: <span title="java.util.zip.ZipEntry">ZipEntry</span>
  ) <span class="keyword">extends</span> <a href="#111916" title="ZipArchive.this.Entry">Entry</a>(<a href="#637289" title="scala.tools.nsc.io.AbstractFile">container</a>, <a href="#637290" title="String">name</a>, <a href="#637291" title="String">path</a>)
  {
    <span class="keyword">def</span> <a title="=&gt; java.util.zip.ZipFile" id="111949">archive</a> = <a href="#20515" title="ZipArchive.this.type">ZipArchive</a>.<span class="keyword">this</span>.<a href="#636816" title="=&gt; java.util.zip.ZipFile">archive</a>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Long" id="111950">lastModified</a>: <span title="Long">Long</span> = <a href="#637292" title="=&gt; java.util.zip.ZipEntry">entry</a>.<span title="()Long">getTime</span>()
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; java.io.InputStream" id="111951">input</a> = <a href="#111949" title="=&gt; java.util.zip.ZipFile">archive</a>.<a title="(x$1: java.util.zip.ZipEntry)java.io.InputStream" id="112512">getInputStream</a>(<a href="#637292" title="=&gt; java.util.zip.ZipEntry">entry</a>)
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Some[Int]" id="111952">sizeOption</a> = <span title="(x: Int)Some[Int]">Some</span>(<a href="#637292" title="=&gt; java.util.zip.ZipEntry">entry</a>.<span title="()Long">getSize</span>().<span title="=&gt; Int">toInt</span>)
  }
}

/**
 * This class implements an abstract directory backed by a specified
 * zip archive.
 *
 * @author  Stephane Micheloud
 * @version 1.0, 29/05/2007
 */
<span class="keyword">final</span> <span class="keyword">class</span> <a title="class URLZipArchive extends scala.tools.nsc.io.AbstractFile with scala.tools.nsc.io.ZipFileCommon with ScalaObject" id="20572">URLZipArchive</a><span title="ScalaObject">(</span><a title="java.net.URL" id="636899">url</a>: <span title="java.net.URL">URL</span>) <span class="keyword">extends</span> <a href="AbstractFile.scala.html#20548" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a> <span class="keyword">with</span> <a href="#22440" title="scala.tools.nsc.io.ZipFileCommon">ZipFileCommon</a> {
  <span title="(assertion: Boolean)Unit">assert</span>(<a href="#636899" title="(x$1: AnyRef)Boolean">url</a> ne <span title="Null(null)" class="keyword">null</span>)

  <span class="keyword">private</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="URLZipArchive.this.DirEntry" id="636880">root</a>: <a href="#636897" title="URLZipArchive.this.DirEntry">DirEntry</a> = {
    <span class="keyword">val</span> <a title="URLZipArchive.this.DirEntry" id="637601">root</a> = <span title="URLZipArchive.this.DirEntry" class="keyword">new</span> <a href="#636897" title="URLZipArchive.this.DirEntry">DirEntry</a>(<span title="java.lang.String(&quot;&lt;root&gt;&quot;)" class="string">&quot;&lt;root&gt;&quot;</span>, <span title="java.lang.String(&quot;/&quot;)" class="string">&quot;/&quot;</span>)
    
    // A path to DirEntry map
    <span class="keyword">val</span> <a title="scala.collection.mutable.Map[String,URLZipArchive.this.DirEntry]" id="637602">dirs</a>: <span title="scala.collection.mutable.Map[String,URLZipArchive.this.DirEntry]">Map</span>[String, DirEntry] = <span title="scala.collection.mutable.HashMap[String,URLZipArchive.this.DirEntry]" class="keyword">new</span> <span title="scala.collection.mutable.HashMap[String,URLZipArchive.this.DirEntry]">HashMap</span>()
    <a href="#637602" title="(key: String,value: URLZipArchive.this.DirEntry)Unit">dirs</a>(<span title="java.lang.String(&quot;/&quot;)" class="string">&quot;/&quot;</span>) = <a href="#637601" title="URLZipArchive.this.DirEntry">root</a>
    
    <span class="keyword">val</span> <a title="java.util.zip.ZipInputStream" id="637603">zis</a> = <span title="java.util.zip.ZipInputStream" class="keyword">new</span> <span title="java.util.zip.ZipInputStream">ZipInputStream</span>(<a href="#636890" title="=&gt; java.io.InputStream">input</a>)
    <a href="#111923" title="(zis: java.util.zip.ZipInputStream)Iterator[java.util.zip.ZipEntry]">zipEntryIterator</a><span title="(f: (java.util.zip.ZipEntry) =&gt; Unit)Unit">(</span><a href="#637603" title="java.util.zip.ZipInputStream">zis</a>) foreach <a href="#637626" title="Unit">{</a> <span title="Unit" class="keyword">case</span> <a title="java.util.zip.ZipEntry" id="637627">entry</a> =&gt;
      <span class="keyword">val</span> <a title="java.lang.String" id="637628">path</a> = <a href="#637627" title="java.util.zip.ZipEntry">entry</a>.<span title="()java.lang.String">getName</span>()
      <span title="(assertion: Boolean,message: =&gt; Any)Unit">assert</span>(<a href="#637627" title="java.util.zip.ZipEntry">entry</a>.<span title="()Boolean">isDirectory</span><a title="(x$1: Boolean)Boolean" id="2206">(</a>) == <a href="#637628" title="java.lang.String">path</a>.<a title="(x$1: java.lang.String)Boolean" id="6975">endsWith</a>(<span title="java.lang.String(&quot;/&quot;)" class="string">&quot;/&quot;</span>),
             <a href="#20572" title="URLZipArchive.this.type" class="keyword">this</a>.<a href="AbstractFile.scala.html#51406" title="()String">toString</a><span title="(x$1: Any)java.lang.String">(</span>) <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; - &quot;)" class="string">&quot; - &quot;</span> + <a href="#637628" title="java.lang.String">path</a>);
      <span title="Unit" class="keyword">if</span> (<a href="#637627" title="java.util.zip.ZipEntry">entry</a>.<span title="()Boolean">isDirectory</span>()) {
        <span class="keyword">val</span> <a title="URLZipArchive.this.DirEntry" id="637658">dir</a>: <a href="#636897" title="URLZipArchive.this.DirEntry">DirEntry</a> = <a href="#636895" title="(dirs: scala.collection.mutable.Map[String,URLZipArchive.this.DirEntry],path: String)URLZipArchive.this.DirEntry">getDir</a>(<a href="#637602" title="scala.collection.mutable.Map[String,URLZipArchive.this.DirEntry]">dirs</a>, <a href="#637628" title="java.lang.String">path</a>)
        <span title="(assertion: Boolean,message: =&gt; Any)Unit">assert</span>(<a href="#637658" title="URLZipArchive.this.DirEntry">dir</a>.<a href="#637594" title="(x$1: AnyRef)Boolean" id="6542">entry</a> eq <span title="Null(null)" class="keyword">null</span>, <a href="#20572" title="URLZipArchive.this.type" class="keyword">this</a>.<a href="AbstractFile.scala.html#51406" title="()String">toString</a><span title="(x$1: Any)java.lang.String">(</span>) <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; - &quot;)" class="string">&quot; - &quot;</span> + <a href="#637628" title="java.lang.String">path</a>)
        <a href="#637658" title="URLZipArchive.this.DirEntry">dir</a>.<a href="#637594" title="(x$1: java.util.zip.ZipEntry)Unit">entry</a> = <a href="#637627" title="java.util.zip.ZipEntry">entry</a>
      } <span class="keyword">else</span> {
        <span class="keyword">val</span> <a title="Int" id="637683">index</a> = <a href="#637628" title="java.lang.String">path</a>.<span title="(x$1: Int)Int">lastIndexOf</span>(<span title="Int(47)" class="char">'/'</span>)
        <span class="keyword">val</span> <a title="java.lang.String" id="637684">name</a> = <span title="java.lang.String" class="keyword">if</span> (<a href="#637683" title="(x$1: Int)Boolean">index</a> &lt; <span title="Int(0)" class="int">0</span>) <a href="#637628" title="java.lang.String">path</a> <span class="keyword">else</span> <a href="#637628" title="java.lang.String">path</a>.<span title="(x$1: Int)java.lang.String">substring</span>(<a href="#637683" title="(x$1: Int)Int">index</a> + <span title="Int(1)" class="int">1</span>)
        <span class="keyword">val</span> <a title="java.lang.String" id="637685">home</a> = <span title="java.lang.String" class="keyword">if</span> (<a href="#637683" title="(x$1: Int)Boolean">index</a> &lt; <span title="Int(0)" class="int">0</span>) <span title="java.lang.String(&quot;/&quot;)" class="string">&quot;/&quot;</span>  <span class="keyword">else</span> <a href="#637628" title="java.lang.String">path</a>.<span title="(x$1: Int,x$2: Int)java.lang.String">substring</span>(<span title="Int(0)" class="int">0</span>, <a href="#637683" title="(x$1: Int)Int">index</a> + <span title="Int(1)" class="int">1</span>)
        <span class="keyword">val</span> <a title="URLZipArchive.this.DirEntry" id="637686">parent</a>: <a href="#636897" title="URLZipArchive.this.DirEntry">DirEntry</a> = <a href="#636895" title="(dirs: scala.collection.mutable.Map[String,URLZipArchive.this.DirEntry],path: String)URLZipArchive.this.DirEntry">getDir</a>(<a href="#637602" title="scala.collection.mutable.Map[String,URLZipArchive.this.DirEntry]">dirs</a>, <a href="#637685" title="java.lang.String">home</a>)
        <span title="(assertion: Boolean,message: =&gt; Any)Unit">assert</span>(<a title="=&gt; Boolean" id="2205">!</a><a href="#637686" title="URLZipArchive.this.DirEntry">parent</a>.<a href="#637591" title="=&gt; scala.collection.mutable.Map[String,URLZipArchive.this.Entry]">entries</a>.<a title="(key: String)Boolean" id="44446">contains</a>(<a href="#637628" title="java.lang.String">path</a>), <a href="#20572" title="URLZipArchive.this.type" class="keyword">this</a>.<a href="AbstractFile.scala.html#51406" title="()String">toString</a><span title="(x$1: Any)java.lang.String">(</span>) <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; - &quot;)" class="string">&quot; - &quot;</span> + <a href="#637628" title="java.lang.String">path</a>)
        <span class="keyword">val</span> <a title="java.io.InputStream" id="637687">in</a> = <a href="#111922" title="(in: java.io.InputStream)java.io.InputStream">byteInputStream</a>(<a href="#637603" title="java.util.zip.ZipInputStream">zis</a>)
        <a href="#637686" title="URLZipArchive.this.DirEntry">parent</a>.<a href="#637591" title="=&gt; scala.collection.mutable.Map[String,URLZipArchive.this.Entry]">entries</a>.<span title="(key: String,value: URLZipArchive.this.Entry)Unit">update</span>(<a href="#637684" title="java.lang.String">name</a>, <span title="URLZipArchive.this.FileEntry" class="keyword">new</span> <a href="#636898" title="URLZipArchive.this.FileEntry">FileEntry</a>(<a href="#637684" title="java.lang.String">name</a>, <a href="#637628" title="java.lang.String">path</a>, <a href="#637627" title="java.util.zip.ZipEntry">entry</a>, <a href="#637687" title="java.io.InputStream">in</a>))
      }
      <a href="#637603" title="java.util.zip.ZipInputStream">zis</a>.<a title="()Unit" id="637115">closeEntry</a>()
    }
    <a href="#637601" title="URLZipArchive.this.DirEntry">root</a>
  }

  <span class="keyword">def</span> <a title="=&gt; Nothing" id="636881">container</a> = <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.Error" class="keyword">new</span> <span title="java.lang.Error">Error</span>(<span title="java.lang.String(&quot;unsupported&quot;)" class="string">&quot;unsupported&quot;</span>)

  <span class="keyword">def</span> <a title="=&gt; String" id="636882">name</a>: <span title="String">String</span> = <a href="#636899" title="java.net.URL">url</a>.<a title="()java.lang.String" id="117395">getFile</a>()
  <span class="keyword">def</span> <a title="=&gt; String" id="636883">path</a>: <span title="String">String</span> = <a href="#636899" title="java.net.URL">url</a>.<a title="()java.lang.String" id="117388">getPath</a>()
  <span class="keyword">def</span> <a title="=&gt; java.io.File" id="636884">file</a>: <a title="java.io.File" id="3807">JFile</a> = <span title="Null(null)" class="keyword">null</span>
  <span class="keyword">def</span> <a title="=&gt; scala.tools.nsc.io.AbstractFile" id="636885">absolute</a>: <a href="AbstractFile.scala.html#20548" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a> = <a href="#20572" title="scala.tools.nsc.io.URLZipArchive" class="keyword">this</a>
  <span class="keyword">def</span> <a title="=&gt; Boolean" id="636886">isDirectory</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(true)" class="keyword">true</span>

  <span class="keyword">def</span> <a title="=&gt; Long" id="636887">lastModified</a>: <span title="Long">Long</span> =
    <span class="keyword">try</span> <a href="#636899" title="java.net.URL">url</a>.<a title="()java.net.URLConnection" id="117405">openConnection</a>().<a title="()Long" id="637873">getLastModified</a>()
    <span class="keyword">catch</span> { <span title="Long(0L)" class="keyword">case</span> _: <span title="java.io.IOException">IOException</span> =&gt; <span title="Long(0L)" class="int">0</span> }

  <span class="keyword">def</span> <a title="=&gt; Unit" id="636888">create</a>: <span title="Unit">Unit</span> = <span title="Nothing" class="keyword">throw</span> <span title="java.lang.UnsupportedOperationException" class="keyword">new</span> <span title="java.lang.UnsupportedOperationException">UnsupportedOperationException</span>
  <span class="keyword">def</span> <a title="=&gt; Unit" id="636889">delete</a>: <span title="Unit">Unit</span> = <span title="Nothing" class="keyword">throw</span> <span title="java.lang.UnsupportedOperationException" class="keyword">new</span> <span title="java.lang.UnsupportedOperationException">UnsupportedOperationException</span>

  <span class="keyword">def</span> <a title="=&gt; java.io.InputStream" id="636890">input</a>: <span title="java.io.InputStream">InputStream</span> = <a href="#636899" title="java.net.URL">url</a>.<a title="()java.io.InputStream" id="117408">openStream</a>()
  <span class="keyword">def</span> <a title="=&gt; Nothing" id="636891">output</a> = <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.Error" class="keyword">new</span> <span title="java.lang.Error">Error</span>(<span title="java.lang.String(&quot;unsupported&quot;)" class="string">&quot;unsupported&quot;</span>)

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Iterator[scala.tools.nsc.io.AbstractFile]" id="636892">iterator</a>: <span title="Iterator[scala.tools.nsc.io.AbstractFile]">Iterator</span>[AbstractFile] = <a href="#636879" title="=&gt; URLZipArchive.this.DirEntry">root</a>.<a href="#637599" title="=&gt; Iterator[scala.tools.nsc.io.AbstractFile]">iterator</a>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(name: String,directory: Boolean)scala.tools.nsc.io.AbstractFile" id="636893">lookupName</a>(<a title="String" id="637996">name</a>: <span title="String">String</span>, <a title="Boolean" id="637997">directory</a>: <span title="Boolean">Boolean</span>): <a href="AbstractFile.scala.html#20548" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a> =
    <a href="#636879" title="=&gt; URLZipArchive.this.DirEntry">root</a>.<a href="#637600" title="(name: String,directory: Boolean)scala.tools.nsc.io.AbstractFile">lookupName</a>(<a href="#637996" title="String">name</a>, <a href="#637997" title="Boolean">directory</a>)

  /** Returns an abstract file with the given name. It does not
   *  check that it exists.
   */
  <span class="keyword">def</span> <a title="(name: String,directory: Boolean)scala.tools.nsc.io.AbstractFile" id="636894">lookupNameUnchecked</a>(<a title="String" id="638004">name</a>: <span title="String">String</span>, <a title="Boolean" id="638005">directory</a>: <span title="Boolean">Boolean</span>): <a href="AbstractFile.scala.html#20548" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a> =
    <span title="Nothing" class="keyword">throw</span> <span title="java.lang.UnsupportedOperationException" class="keyword">new</span> <span title="java.lang.UnsupportedOperationException">UnsupportedOperationException</span>()

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(dirs: scala.collection.mutable.Map[String,URLZipArchive.this.DirEntry],path: String)URLZipArchive.this.DirEntry" id="636895">getDir</a>(<a title="scala.collection.mutable.Map[String,URLZipArchive.this.DirEntry]" id="637659">dirs</a>: <span title="scala.collection.mutable.Map[String,URLZipArchive.this.DirEntry]">Map</span>[String, DirEntry], <a title="String" id="637660">path</a>: <span title="String">String</span>): <a href="#636897" title="URLZipArchive.this.DirEntry">DirEntry</a> =
    <a href="#637659" title="scala.collection.mutable.Map[String,URLZipArchive.this.DirEntry]">dirs</a>.<span title="(key: String)Option[URLZipArchive.this.DirEntry]">get</span>(<a href="#637660" title="String">path</a>) <span title="URLZipArchive.this.DirEntry" class="keyword">match</span> {
      <span title="URLZipArchive.this.DirEntry" class="keyword">case</span> Some(<a title="URLZipArchive.this.DirEntry" id="638023">dir</a>) =&gt; <a href="#638023" title="URLZipArchive.this.DirEntry">dir</a>
      <span title="URLZipArchive.this.DirEntry" class="keyword">case</span> <span title="object None">None</span> =&gt;
        <span class="keyword">val</span> <a title="Int" id="638026">index</a> = <a href="#637660" title="String">path</a>.<a title="(x$1: Int,x$2: Int)Int" id="6985">lastIndexOf</a>(<span title="Int(47)" class="char">'/'</span>, <a href="#637660" title="String">path</a>.<span title="()Int">length</span><span title="(x$1: Int)Int">(</span>) - <span title="Int(2)" class="int">2</span>)
        <span class="keyword">val</span> <a title="String" id="638027">name</a> = <span title="String" class="keyword">if</span> (<a href="#638026" title="(x$1: Int)Boolean">index</a> &lt; <span title="Int(0)" class="int">0</span>) <a href="#637660" title="String">path</a> <span class="keyword">else</span> <a href="#637660" title="String">path</a>.<span title="(x$1: Int)java.lang.String">substring</span>(<a href="#638026" title="(x$1: Int)Int">index</a> + <span title="Int(1)" class="int">1</span>)
        <span class="keyword">val</span> <a title="java.lang.String" id="638028">home</a> = <span title="java.lang.String" class="keyword">if</span> (<a href="#638026" title="(x$1: Int)Boolean">index</a> &lt; <span title="Int(0)" class="int">0</span>) <span title="java.lang.String(&quot;/&quot;)" class="string">&quot;/&quot;</span>  <span class="keyword">else</span> <a href="#637660" title="String">path</a>.<span title="(x$1: Int,x$2: Int)java.lang.String">substring</span>(<span title="Int(0)" class="int">0</span>, <a href="#638026" title="(x$1: Int)Int">index</a> + <span title="Int(1)" class="int">1</span>)
        <span class="keyword">val</span> <a title="URLZipArchive.this.DirEntry" id="638029">parent</a>: <a href="#636897" title="URLZipArchive.this.DirEntry">DirEntry</a> = <a href="#636895" title="(dirs: scala.collection.mutable.Map[String,URLZipArchive.this.DirEntry],path: String)URLZipArchive.this.DirEntry">getDir</a>(<a href="#637659" title="scala.collection.mutable.Map[String,URLZipArchive.this.DirEntry]">dirs</a>, <a href="#638028" title="java.lang.String">home</a>)
        <span class="keyword">val</span> <a title="URLZipArchive.this.DirEntry" id="638030">dir</a> = <span title="URLZipArchive.this.DirEntry" class="keyword">new</span> <a href="#636897" title="URLZipArchive.this.DirEntry">DirEntry</a>(<a href="#638027" title="String">name</a>.<span title="(x$1: Int,x$2: Int)java.lang.String">substring</span>(<span title="Int(0)" class="int">0</span>, <a href="#638027" title="String">name</a>.<span title="()Int">length</span><span title="(x$1: Int)Int">(</span>) - <span title="Int(1)" class="int">1</span>), <a href="#637660" title="String">path</a>)
        <a href="#638029" title="URLZipArchive.this.DirEntry">parent</a>.<a href="#637591" title="=&gt; scala.collection.mutable.Map[String,URLZipArchive.this.Entry]">entries</a>.<span title="(key: String,value: URLZipArchive.this.Entry)Unit">update</span>(<a href="#638027" title="String">name</a>, <a href="#638030" title="URLZipArchive.this.DirEntry">dir</a>)
        <a href="#637659" title="scala.collection.mutable.Map[String,URLZipArchive.this.DirEntry]">dirs</a>.<span title="(key: String,value: URLZipArchive.this.DirEntry)Unit">update</span>(<a href="#637660" title="String">path</a>, <a href="#638030" title="URLZipArchive.this.DirEntry">dir</a>)
        <a href="#638030" title="URLZipArchive.this.DirEntry">dir</a>
    }

  /** Superclass of archive entries */
  <span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class Entry extends scala.tools.nsc.io.VirtualFile with ScalaObject" id="636896">Entry</a><span title="ScalaObject">(</span><a title="String" id="638172">name</a>: <span title="String">String</span>, <a title="String" id="638173">path</a>: <span title="String">String</span>) <span class="keyword">extends</span> <a href="VirtualFile.scala.html#20587" title="scala.tools.nsc.io.VirtualFile">VirtualFile</a>(<a href="#638172" title="String">name</a>, <a href="#638173" title="String">path</a>) {
    <span class="keyword">final</span> <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; String" id="637585">path</a> = <span title="implicit scala.Predef.stringWrapper : (x: String)scala.runtime.RichString" class="string">&quot;%s(%s)&quot;</span>.<span title="(args: Any*)String">format</span>(<a href="#20572" title="scala.tools.nsc.io.URLZipArchive">URLZipArchive</a>.<span class="keyword">this</span>, <span class="keyword">super</span>.<a href="VirtualFile.scala.html#110697" title="=&gt; String">path</a>)    
  }

  /** A directory archive entry */
  <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">class</span> <a title="class DirEntry extends URLZipArchive.this.Entry with ScalaObject" id="636897">DirEntry</a><span title="ScalaObject">(</span><a title="String" id="637604">name</a>: <span title="String">String</span>, <a title="String" id="637605">path</a>: <span title="String">String</span>) <span class="keyword">extends</span> <a href="#636896" title="URLZipArchive.this.Entry">Entry</a>(<a href="#637604" title="String">name</a>, <a href="#637605" title="String">path</a>) {
    <span class="keyword">val</span> <a title="scala.collection.mutable.Map[String,URLZipArchive.this.Entry]" id="637591">entries</a>: <span title="scala.collection.mutable.Map[String,URLZipArchive.this.Entry]">Map</span>[String, Entry] = <span title="scala.collection.mutable.HashMap[String,URLZipArchive.this.Entry]" class="keyword">new</span> <span title="scala.collection.mutable.HashMap[String,URLZipArchive.this.Entry]">HashMap</span>()
    <span class="keyword">var</span> <a title="java.util.zip.ZipEntry" id="637594">entry</a>: <span title="java.util.zip.ZipEntry">ZipEntry</span> = _

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Boolean" id="637596">isDirectory</a> = <span title="Boolean(true)" class="keyword">true</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Nothing" id="637597">input</a> = <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String)java.lang.Error" class="keyword">new</span> <span title="java.lang.Error">Error</span>(<span title="java.lang.String(&quot;cannot read directories&quot;)" class="string">&quot;cannot read directories&quot;</span>)

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Long" id="637598">lastModified</a>: <span title="Long">Long</span> =
      <span title="Long" class="keyword">if</span> (<a href="#637594" title="(x$1: AnyRef)Boolean">entry</a> ne <span title="Null(null)" class="keyword">null</span>) <a href="#637594" title="=&gt; java.util.zip.ZipEntry">entry</a>.<span title="()Long">getTime</span>() <span class="keyword">else</span> <span class="keyword">super</span>.<a href="VirtualFile.scala.html#110705" title="=&gt; Long">lastModified</a>

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Iterator[scala.tools.nsc.io.AbstractFile]" id="637599">iterator</a>: <span title="Iterator[scala.tools.nsc.io.AbstractFile]">Iterator</span>[AbstractFile] = <a href="#637591" title="=&gt; scala.collection.mutable.Map[String,URLZipArchive.this.Entry]">entries</a>.<span title="=&gt; Iterator[URLZipArchive.this.Entry]">valuesIterator</span>

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(name: String,directory: Boolean)scala.tools.nsc.io.AbstractFile" id="637600">lookupName</a>(<a title="String" id="637999">name</a>: <span title="String">String</span>, <a title="Boolean" id="638000">directory</a>: <span title="Boolean">Boolean</span>): <a href="AbstractFile.scala.html#20548" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a> =
      <a href="#637591" title="=&gt; scala.collection.mutable.Map[String,URLZipArchive.this.Entry]">entries</a>.<span title="(key: String)Option[URLZipArchive.this.Entry]">get</span>(<span title="String" class="keyword">if</span> (<a href="#638000" title="Boolean">directory</a>) <a href="#637999" title="(x$1: Any)java.lang.String">name</a> + <span title="java.lang.String(&quot;/&quot;)" class="string">&quot;/&quot;</span> <span class="keyword">else</span> <a href="#637999" title="String">name</a>) <span title="scala.tools.nsc.io.AbstractFile" class="keyword">match</span> {
        <span title="URLZipArchive.this.Entry" class="keyword">case</span> Some(<a title="URLZipArchive.this.Entry" id="638243">dir</a>) =&gt; <a href="#638243" title="URLZipArchive.this.Entry">dir</a>
        <span title="Null(null)" class="keyword">case</span> <span title="object None">None</span> =&gt; <span title="Null(null)" class="keyword">null</span>
      }
  }

  <span class="keyword">final</span> <span class="keyword">class</span> <a title="class FileEntry extends URLZipArchive.this.Entry with ScalaObject" id="636898">FileEntry</a><span title="ScalaObject">(</span><a title="String" id="637807">name</a>: <span title="String">String</span>, <a title="String" id="637808">path</a>: <span title="String">String</span>,
                        <span class="keyword">val</span> <a title="java.util.zip.ZipEntry" id="637809">entry</a>: <span title="java.util.zip.ZipEntry">ZipEntry</span>, <span class="keyword">val</span> <a title="java.io.InputStream" id="637810">in</a>: <span title="java.io.InputStream">InputStream</span>)
        <span class="keyword">extends</span> <a href="#636896" title="URLZipArchive.this.Entry">Entry</a>(<a href="#637807" title="String">name</a>, <a href="#637808" title="String">path</a>) {
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Long" id="637804">lastModified</a>: <span title="Long">Long</span> = <a href="#637809" title="=&gt; java.util.zip.ZipEntry">entry</a>.<span title="()Long">getTime</span>()
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; java.io.InputStream" id="637805">input</a> = <a href="#637810" title="=&gt; java.io.InputStream">in</a>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Some[Int]" id="637806">sizeOption</a> = <span title="(x: Int)Some[Int]">Some</span>(<a href="#637809" title="=&gt; java.util.zip.ZipEntry">entry</a>.<span title="()Long">getSize</span>().<span title="=&gt; Int">toInt</span>)
  }
}

        </pre>
    </body>
</html>