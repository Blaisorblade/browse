<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/io/PlainFile.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style">
    </head>
    <body>
        <pre>
/* NSC -- new Scala compiler
 * Copyright 2005-2009 LAMP/EPFL
 * @author  Martin Odersky
 */
// $Id: PlainFile.scala 18626 2009-09-01 16:05:38Z extempore $


<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> io

<span class="keyword">import</span> java.io.{ File =&gt; JFile, FileInputStream, FileOutputStream, IOException }
<span class="keyword">import</span> scala.io.{ File, Path }
<span class="keyword">import</span> PartialFunction._

<span class="keyword">object</span> <a title="object scala.tools.nsc.io.PlainFile" id="20708">PlainFile</a>
<span title="ScalaObject">{</span>
  /**
   * If the specified File exists, returns an abstract file backed
   * by it. Otherwise, returns null.
   */
  <span class="keyword">def</span> <a title="(file: scala.io.Path)scala.tools.nsc.io.PlainFile" id="132080">fromPath</a>(<a title="scala.io.Path" id="132081">file</a>: <span title="scala.io.Path">Path</span>): <a href="#20707" title="scala.tools.nsc.io.PlainFile">PlainFile</a> =
    <span title="scala.tools.nsc.io.PlainFile" class="keyword">if</span> (<a href="#132081" title="scala.io.Path">file</a>.<span title="=&gt; Boolean">exists</span>) <span title="scala.tools.nsc.io.PlainFile" class="keyword">new</span> <a href="#20707" title="scala.tools.nsc.io.PlainFile">PlainFile</a>(<a href="#132081" title="scala.io.Path">file</a>) <span class="keyword">else</span> <span title="Null(null)" class="keyword">null</span>
}

/** This class implements an abstract file backed by a File. 
 */
<span class="keyword">class</span> <a title="class PlainFile extends scala.tools.nsc.io.AbstractFile with ScalaObject" id="20707">PlainFile</a><span title="ScalaObject">(</span><span class="keyword">val</span> <a title="scala.io.Path" id="155079">givenPath</a>: <span title="scala.io.Path">Path</span>) <span class="keyword">extends</span> <a href="AbstractFile.scala.html#20689" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a> {
  <a title="(assertion: Boolean)Unit" id="7943">assert</a>(<a href="#112254" title="(x$1: AnyRef)Boolean" id="6613">path</a> ne <span title="Null(null)" class="keyword">null</span>)

  <span class="keyword">val</span> <a title="java.io.File" id="112249">file</a> = <a href="#155079" title="=&gt; scala.io.Path">givenPath</a>.<a title="=&gt; java.io.File" id="112276">jfile</a>
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.io.Path" id="112251">fpath</a> = <span class="keyword">try</span> <a href="#155079" title="=&gt; scala.io.Path">givenPath</a>.<span title="=&gt; scala.io.Path">normalize</span> <span class="keyword">catch</span> { <span title="scala.io.Path" class="keyword">case</span> _: <a title="java.io.IOException" id="3657">IOException</a> =&gt; <a href="#155079" title="=&gt; scala.io.Path">givenPath</a>.<a title="=&gt; scala.io.Path" id="112285">toAbsolute</a> }

  /** Returns the name of this abstract file. */
  <span class="keyword">def</span> <a title="=&gt; String" id="112253">name</a> = <a href="#155079" title="=&gt; scala.io.Path">givenPath</a>.<a title="=&gt; String" id="112294">name</a>

  /** Returns the path of this abstract file. */
  <span class="keyword">def</span> <a title="=&gt; String" id="112254">path</a> = <a href="#155079" title="=&gt; scala.io.Path">givenPath</a>.<a title="=&gt; String" id="112295">path</a>

  /** The absolute file. */
  <span class="keyword">def</span> <a title="=&gt; scala.tools.nsc.io.PlainFile" id="112255">absolute</a> = <span title="scala.tools.nsc.io.PlainFile" class="keyword">new</span> <a href="#20707" title="scala.tools.nsc.io.PlainFile">PlainFile</a>(<a href="#155079" title="=&gt; scala.io.Path">givenPath</a>.<span title="=&gt; scala.io.Path">normalize</span>)
    
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; scala.tools.nsc.io.AbstractFile" id="112256">container</a>: <a href="AbstractFile.scala.html#20689" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a> = <span title="scala.tools.nsc.io.PlainFile" class="keyword">new</span> <a href="#20707" title="scala.tools.nsc.io.PlainFile">PlainFile</a>(<a href="#155079" title="=&gt; scala.io.Path">givenPath</a>.<a title="=&gt; Option[scala.io.Path]" id="112299">parent</a>.<a title="=&gt; scala.io.Path" id="35232">get</a>)
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; java.io.FileInputStream" id="112257">input</a> = <a href="#155079" title="=&gt; scala.io.Path">givenPath</a>.<span title="=&gt; scala.io.File">toFile</span>.<a title="()java.io.FileInputStream" id="131262">inputStream</a>()
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; java.io.FileOutputStream" id="112258">output</a> = <a href="#155079" title="=&gt; scala.io.Path">givenPath</a>.<a title="scala.io.File" id="155123">toFile</a>.<a href="#155123" title="Boolean" id="131263">outputStream</a>()
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Some[Int]" id="112259">sizeOption</a> = <a title="(x: Int)Some[Int]" id="267">Some</a>(<a href="#155079" title="=&gt; scala.io.Path">givenPath</a>.<a title="=&gt; Long" id="112314">length</a>.<a title="=&gt; Int" id="3076">toInt</a>)
  
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Int" id="112260">hashCode</a>(): <a title="Int" id="2198">Int</a> = <a href="#112251" title="=&gt; scala.io.Path">fpath</a>.<a title="()Int" id="112336">hashCode</a>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(that: Any)Boolean" id="112261">equals</a>(<a title="Any" id="155139">that</a>: <a title="Any" id="49">Any</a>): <span title="Boolean">Boolean</span> =
    <a title="(x: Any)(pf: PartialFunction[Any,Boolean])Boolean" id="1107">cond</a>(<a href="#155139" title="Any">that</a>) <a href="#155151" title="Boolean">{</a> <span title="Boolean" class="keyword">case</span> <a title="scala.tools.nsc.io.PlainFile" id="155152">other</a>: <a href="#20707" title="scala.tools.nsc.io.PlainFile">PlainFile</a>  =&gt; <a href="#112251" title="(x$1: AnyRef)Boolean" id="3647">fpath</a> == <a href="#155152" title="scala.tools.nsc.io.PlainFile">other</a>.<a href="#112251" title="=&gt; scala.io.Path">fpath</a> }

  /** Is this abstract file a directory? */
  <span class="keyword">def</span> <a title="=&gt; Boolean" id="112262">isDirectory</a>: <span title="Boolean">Boolean</span> = <a href="#155079" title="=&gt; scala.io.Path">givenPath</a>.<span title="=&gt; Boolean">isDirectory</span>

  /** Returns the time that this abstract file was last modified. */
  <span class="keyword">def</span> <a title="=&gt; Long" id="112263">lastModified</a>: <a title="Long" id="2205">Long</a> = <a href="#155079" title="=&gt; scala.io.Path">givenPath</a>.<a title="=&gt; Long" id="112311">lastModified</a>

  /** Returns all abstract subfiles of this abstract directory. */
  <span class="keyword">def</span> <a title="=&gt; Iterator[scala.tools.nsc.io.AbstractFile]" id="112264">iterator</a>: <a title="Iterator[scala.tools.nsc.io.AbstractFile]" id="4309">Iterator</a>[AbstractFile] = {
    <a title="(assertion: Boolean,message: =&gt; Any)Unit" id="7945">assert</a>(<a href="#112262" title="=&gt; Boolean">isDirectory</a>, <a title="(args: Any*)String" id="8170" class="string">&quot;not a directory '%s'&quot;</a> format <a href="#20707" title="scala.tools.nsc.io.PlainFile" class="keyword">this</a>)
    <a href="#155079" title="=&gt; scala.io.Path">givenPath</a>.<span title="=&gt; scala.io.Directory">toDirectory</span>.<a title="(p: (scala.io.Path) =&gt; Boolean)Iterator[scala.io.Path]" id="131507">list</a> <a title="(f: (scala.io.Path) =&gt; scala.tools.nsc.io.PlainFile)Iterator[scala.tools.nsc.io.PlainFile]" id="32316">filter</a> (<a href="#155201" title="scala.io.Path">_</a>.<span title="=&gt; Boolean">exists</span>) map (<span title="scala.tools.nsc.io.PlainFile" class="keyword">new</span> <a href="#20707" title="scala.tools.nsc.io.PlainFile">PlainFile</a>(<a href="#155208" title="scala.io.Path">_</a>))
  }

  /**
   * Returns the abstract file in this abstract directory with the
   * specified name. If there is no such file, returns null. The
   * argument &quot;directory&quot; tells whether to look for a directory or
   * or a regular file.
   *
   * @param name      ...
   * @param directory ...
   * @return          ...
   */
  <span class="keyword">def</span> <a title="(name: String,directory: Boolean)scala.tools.nsc.io.AbstractFile" id="112265">lookupName</a>(<a title="String" id="155214">name</a>: <span title="String">String</span>, <a title="Boolean" id="155215">directory</a>: <span title="Boolean">Boolean</span>): <a href="AbstractFile.scala.html#20689" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a> = {
    <span class="keyword">val</span> <a title="scala.io.Path" id="155217">child</a> = <a href="#155079" title="(child: scala.io.Path)scala.io.Path">givenPath</a> / <a href="#155214" title="implicit scala.io.Path.string2path : (s: String)scala.io.Path">name</a>
    <span title="scala.tools.nsc.io.AbstractFile" class="keyword">if</span> (<a title="(x$1: Boolean)Boolean" id="2231">(</a><a href="#155217" title="scala.io.Path">child</a>.<span title="(x$1: Boolean)Boolean">isDirectory</span> &amp;&amp; <a href="#155215" title="Boolean">directory</a>) || (<a href="#155217" title="scala.io.Path">child</a>.<span title="(x$1: Boolean)Boolean">isFile</span> &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#155215" title="Boolean">directory</a>)) <span title="scala.tools.nsc.io.PlainFile" class="keyword">new</span> <a href="#20707" title="scala.tools.nsc.io.PlainFile">PlainFile</a>(<a href="#155217" title="scala.io.Path">child</a>)
    <span class="keyword">else</span> <span title="Null(null)" class="keyword">null</span>
  }

  /** Does this abstract file denote an existing file? */
  <span class="keyword">def</span> <a title="=&gt; Unit" id="112266">create</a>: <span title="Unit">Unit</span> = <span title="Unit" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="AbstractFile.scala.html#51642" title="=&gt; Boolean">exists</a>) <a href="#155079" title="=&gt; scala.io.Path">givenPath</a>.<a title="(failIfExists: Boolean)scala.io.File" id="112329">createFile</a><span title="Unit">(</span>)

  /** Delete the underlying file or directory (recursively). */
  <span class="keyword">def</span> <a title="=&gt; Unit" id="112267">delete</a>: <span title="Unit">Unit</span> =
    <span title="Unit" class="keyword">if</span> (<a href="#155079" title="=&gt; scala.io.Path">givenPath</a>.<span title="=&gt; Boolean">isFile</span>) <a href="#155079" title="=&gt; scala.io.Path">givenPath</a>.<a title="()Boolean" id="112331">delete</a><span title="Unit">(</span>)
    <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<a href="#155079" title="=&gt; scala.io.Path">givenPath</a>.<span title="=&gt; Boolean">isDirectory</span>) <a href="#155079" title="=&gt; scala.io.Path">givenPath</a>.<span title="=&gt; scala.io.Directory">toDirectory</span>.<a title="()Boolean" id="131516">deleteRecursively</a><span title="Unit">(</span>)

  /** Returns a plain file with the given name. It does not
   *  check that it exists.
   */
  <span class="keyword">def</span> <a title="(name: String,directory: Boolean)scala.tools.nsc.io.AbstractFile" id="112268">lookupNameUnchecked</a>(<a title="String" id="155280">name</a>: <span title="String">String</span>, <a title="Boolean" id="155281">directory</a>: <span title="Boolean">Boolean</span>): <a href="AbstractFile.scala.html#20689" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a> =
    <span title="scala.tools.nsc.io.PlainFile" class="keyword">new</span> <a href="#20707" title="scala.tools.nsc.io.PlainFile">PlainFile</a>(<a href="#155079" title="(child: scala.io.Path)scala.io.Path">givenPath</a> / <a href="#155280" title="implicit scala.io.Path.string2path : (s: String)scala.io.Path">name</a>)
}

        </pre>
    </body>
</html>