<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/io/PlainFile.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style">
    </head>
    <body>
        <pre>
/* NSC -- new Scala compiler
 * Copyright 2005-2009 LAMP/EPFL
 * @author  Martin Odersky
 */
// $Id: PlainFile.scala 18620 2009-08-31 20:19:46Z extempore $


<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> io

<span class="keyword">import</span> java.io.{ File =&gt; JFile, FileInputStream, FileOutputStream, IOException }
<span class="keyword">import</span> scala.io.{ File, Path }
<span class="keyword">import</span> PartialFunction._

<span class="keyword">object</span> <a title="object scala.tools.nsc.io.PlainFile" id="20567">PlainFile</a>
<span title="ScalaObject">{</span>
  /**
   * If the specified File exists, returns an abstract file backed
   * by it. Otherwise, returns null.
   */
  <span class="keyword">def</span> <a title="(file: scala.io.Path)scala.tools.nsc.io.PlainFile" id="131511">fromPath</a>(<a title="scala.io.Path" id="131512">file</a>: <span title="scala.io.Path">Path</span>): <a href="#20566" title="scala.tools.nsc.io.PlainFile">PlainFile</a> =
    <span title="scala.tools.nsc.io.PlainFile" class="keyword">if</span> (<a href="#131512" title="scala.io.Path">file</a>.<span title="=&gt; Boolean">exists</span>) <span title="scala.tools.nsc.io.PlainFile" class="keyword">new</span> <a href="#20566" title="scala.tools.nsc.io.PlainFile">PlainFile</a>(<a href="#131512" title="scala.io.Path">file</a>) <span class="keyword">else</span> <span title="Null(null)" class="keyword">null</span>
}

/** This class implements an abstract file backed by a File. 
 */
<span class="keyword">class</span> <a title="class PlainFile extends scala.tools.nsc.io.AbstractFile with ScalaObject" id="20566">PlainFile</a><span title="ScalaObject">(</span><span class="keyword">val</span> <a title="scala.io.Path" id="154463">givenPath</a>: <span title="scala.io.Path">Path</span>) <span class="keyword">extends</span> <a href="AbstractFile.scala.html#20548" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a> {
  <a title="(assertion: Boolean)Unit" id="7874">assert</a>(<a href="#111808" title="(x$1: AnyRef)Boolean" id="6544">path</a> ne <span title="Null(null)" class="keyword">null</span>)

  <span class="keyword">val</span> <a title="java.io.File" id="111803">file</a> = <a href="#154463" title="=&gt; scala.io.Path">givenPath</a>.<a title="=&gt; java.io.File" id="111830">jfile</a>
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.io.Path" id="111805">fpath</a> = <span class="keyword">try</span> <a href="#154463" title="=&gt; scala.io.Path">givenPath</a>.<span title="=&gt; scala.io.Path">normalize</span> <span class="keyword">catch</span> { <span title="scala.io.Path" class="keyword">case</span> _: <a title="java.io.IOException" id="3636">IOException</a> =&gt; <a href="#154463" title="=&gt; scala.io.Path">givenPath</a>.<a title="=&gt; scala.io.Path" id="111839">toAbsolute</a> }

  /** Returns the name of this abstract file. */
  <span class="keyword">def</span> <a title="=&gt; String" id="111807">name</a> = <a href="#154463" title="=&gt; scala.io.Path">givenPath</a>.<a title="=&gt; String" id="111848">name</a>

  /** Returns the path of this abstract file. */
  <span class="keyword">def</span> <a title="=&gt; String" id="111808">path</a> = <a href="#154463" title="=&gt; scala.io.Path">givenPath</a>.<a title="=&gt; String" id="111849">path</a>

  /** The absolute file. */
  <span class="keyword">def</span> <a title="=&gt; scala.tools.nsc.io.PlainFile" id="111809">absolute</a> = <span title="scala.tools.nsc.io.PlainFile" class="keyword">new</span> <a href="#20566" title="scala.tools.nsc.io.PlainFile">PlainFile</a>(<a href="#154463" title="=&gt; scala.io.Path">givenPath</a>.<span title="=&gt; scala.io.Path">normalize</span>)
    
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; scala.tools.nsc.io.AbstractFile" id="111810">container</a>: <a href="AbstractFile.scala.html#20548" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a> = <span title="scala.tools.nsc.io.PlainFile" class="keyword">new</span> <a href="#20566" title="scala.tools.nsc.io.PlainFile">PlainFile</a>(<a href="#154463" title="=&gt; scala.io.Path">givenPath</a>.<a title="=&gt; Option[scala.io.Path]" id="111853">parent</a>.<a title="=&gt; scala.io.Path" id="35043">get</a>)
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; java.io.FileInputStream" id="111811">input</a> = <a href="#154463" title="=&gt; scala.io.Path">givenPath</a>.<span title="=&gt; scala.io.File">toFile</span>.<a title="()java.io.FileInputStream" id="130727">inputStream</a>()
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; java.io.FileOutputStream" id="111812">output</a> = <a href="#154463" title="=&gt; scala.io.Path">givenPath</a>.<a title="scala.io.File" id="154506">toFile</a>.<a href="#154506" title="Boolean" id="130729">outputStream</a>()
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Some[Int]" id="111813">sizeOption</a> = <a title="(x: Int)Some[Int]" id="258">Some</a>(<a href="#154463" title="=&gt; scala.io.Path">givenPath</a>.<a title="=&gt; Long" id="111865">length</a>.<a title="=&gt; Int" id="3055">toInt</a>)
  
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Int" id="111814">hashCode</a>(): <a title="Int" id="2177">Int</a> = <a href="#111805" title="=&gt; scala.io.Path">fpath</a>.<a title="()Int" id="111888">hashCode</a>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(that: Any)Boolean" id="111815">equals</a>(<a title="Any" id="154522">that</a>: <a title="Any" id="49">Any</a>): <span title="Boolean">Boolean</span> =
    <a title="(x: Any)(pf: PartialFunction[Any,Boolean])Boolean" id="1086">cond</a>(<a href="#154522" title="Any">that</a>) <a href="#154534" title="Boolean">{</a> <span title="Boolean" class="keyword">case</span> <a title="scala.tools.nsc.io.PlainFile" id="154535">other</a>: <a href="#20566" title="scala.tools.nsc.io.PlainFile">PlainFile</a>  =&gt; <a href="#111805" title="(x$1: AnyRef)Boolean" id="3626">fpath</a> == <a href="#154535" title="scala.tools.nsc.io.PlainFile">other</a>.<a href="#111805" title="=&gt; scala.io.Path">fpath</a> }

  /** Is this abstract file a directory? */
  <span class="keyword">def</span> <a title="=&gt; Boolean" id="111816">isDirectory</a>: <span title="Boolean">Boolean</span> = <a href="#154463" title="=&gt; scala.io.Path">givenPath</a>.<span title="=&gt; Boolean">isDirectory</span>

  /** Returns the time that this abstract file was last modified. */
  <span class="keyword">def</span> <a title="=&gt; Long" id="111817">lastModified</a>: <a title="Long" id="2184">Long</a> = <a href="#154463" title="=&gt; scala.io.Path">givenPath</a>.<a title="=&gt; Long" id="111864">lastModified</a>

  /** Returns all abstract subfiles of this abstract directory. */
  <span class="keyword">def</span> <a title="=&gt; Iterator[scala.tools.nsc.io.AbstractFile]" id="111818">iterator</a>: <a title="Iterator[scala.tools.nsc.io.AbstractFile]" id="4276">Iterator</a>[AbstractFile] = {
    <a title="(assertion: Boolean,message: =&gt; Any)Unit" id="7876">assert</a>(<a href="#111816" title="=&gt; Boolean">isDirectory</a>, <a title="(args: Any*)String" id="8101" class="string">&quot;not a directory '%s'&quot;</a> format <a href="#20566" title="scala.tools.nsc.io.PlainFile" class="keyword">this</a>)
    <a href="#154463" title="=&gt; scala.io.Path">givenPath</a>.<span title="=&gt; scala.io.Directory">toDirectory</span>.<a title="(p: (scala.io.Path) =&gt; Boolean)Iterator[scala.io.Path]" id="130938">list</a> <a title="(f: (scala.io.Path) =&gt; scala.tools.nsc.io.PlainFile)Iterator[scala.tools.nsc.io.PlainFile]" id="32130">filter</a> (<a href="#154584" title="scala.io.Path">_</a>.<span title="=&gt; Boolean">exists</span>) map (<span title="scala.tools.nsc.io.PlainFile" class="keyword">new</span> <a href="#20566" title="scala.tools.nsc.io.PlainFile">PlainFile</a>(<a href="#154591" title="scala.io.Path">_</a>))
  }

  /**
   * Returns the abstract file in this abstract directory with the
   * specified name. If there is no such file, returns null. The
   * argument &quot;directory&quot; tells whether to look for a directory or
   * or a regular file.
   *
   * @param name      ...
   * @param directory ...
   * @return          ...
   */
  <span class="keyword">def</span> <a title="(name: String,directory: Boolean)scala.tools.nsc.io.AbstractFile" id="111819">lookupName</a>(<a title="String" id="154597">name</a>: <span title="String">String</span>, <a title="Boolean" id="154598">directory</a>: <span title="Boolean">Boolean</span>): <a href="AbstractFile.scala.html#20548" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a> = {
    <span class="keyword">val</span> <a title="scala.io.Path" id="154600">child</a> = <a href="#154463" title="(child: scala.io.Path)scala.io.Path">givenPath</a> / <a href="#154597" title="implicit scala.io.Path.string2path : (s: String)scala.io.Path">name</a>
    <span title="scala.tools.nsc.io.AbstractFile" class="keyword">if</span> (<a title="(x$1: Boolean)Boolean" id="2210">(</a><a href="#154600" title="scala.io.Path">child</a>.<span title="(x$1: Boolean)Boolean">isDirectory</span> &amp;&amp; <a href="#154598" title="Boolean">directory</a>) || (<a href="#154600" title="scala.io.Path">child</a>.<span title="(x$1: Boolean)Boolean">isFile</span> &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#154598" title="Boolean">directory</a>)) <span title="scala.tools.nsc.io.PlainFile" class="keyword">new</span> <a href="#20566" title="scala.tools.nsc.io.PlainFile">PlainFile</a>(<a href="#154600" title="scala.io.Path">child</a>)
    <span class="keyword">else</span> <span title="Null(null)" class="keyword">null</span>
  }

  /** Does this abstract file denote an existing file? */
  <span class="keyword">def</span> <a title="=&gt; Unit" id="111820">create</a>: <span title="Unit">Unit</span> = <span title="Unit" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="AbstractFile.scala.html#51388" title="=&gt; Boolean">exists</a>) <a href="#154463" title="=&gt; scala.io.Path">givenPath</a>.<a title="()scala.io.File" id="111882">ensureFile</a><span title="Unit">(</span>)

  /** Delete the underlying file or directory (recursively). */
  <span class="keyword">def</span> <a title="=&gt; Unit" id="111821">delete</a>: <span title="Unit">Unit</span> =
    <span title="Unit" class="keyword">if</span> (<a href="#154463" title="=&gt; scala.io.Path">givenPath</a>.<span title="=&gt; Boolean">isFile</span>) <a href="#154463" title="=&gt; scala.io.Path">givenPath</a>.<a title="()Boolean" id="111883">delete</a><span title="Unit">(</span>)
    <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<a href="#154463" title="=&gt; scala.io.Path">givenPath</a>.<span title="=&gt; Boolean">isDirectory</span>) <a href="#154463" title="=&gt; scala.io.Path">givenPath</a>.<span title="=&gt; scala.io.Directory">toDirectory</span>.<a title="()Boolean" id="130947">deleteRecursively</a><span title="Unit">(</span>)

  /** Returns a plain file with the given name. It does not
   *  check that it exists.
   */
  <span class="keyword">def</span> <a title="(name: String,directory: Boolean)scala.tools.nsc.io.AbstractFile" id="111822">lookupNameUnchecked</a>(<a title="String" id="154663">name</a>: <span title="String">String</span>, <a title="Boolean" id="154664">directory</a>: <span title="Boolean">Boolean</span>): <a href="AbstractFile.scala.html#20548" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a> =
    <span title="scala.tools.nsc.io.PlainFile" class="keyword">new</span> <a href="#20566" title="scala.tools.nsc.io.PlainFile">PlainFile</a>(<a href="#154463" title="(child: scala.io.Path)scala.io.Path">givenPath</a> / <a href="#154663" title="implicit scala.io.Path.string2path : (s: String)scala.io.Path">name</a>)
}

        </pre>
    </body>
</html>