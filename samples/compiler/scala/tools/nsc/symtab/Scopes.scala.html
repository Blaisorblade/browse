<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/symtab/Scopes.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style">
    </head>
    <body>
        <pre>
/* NSC -- new Scala compiler
 * Copyright 2005-2009 LAMP/EPFL
 * @author  Martin Odersky
 */
// $Id: Scopes.scala 18431 2009-08-02 18:22:20Z odersky $

<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> symtab

// Martin: I am about 1/4 way on a cleanup of scopes.
// The most important change is that scopes are now Iterables.
// This removed the need for the various iterators on ScopeEntries.
// ScopeEntries are conceptually an internal representation detail,
// so it's better not to return them in public iterators.
// It's true that other code also references ScopeEntries but that's
// done for performance (and could be reviewed).
// Another addition is a lookupAll method that returns all symbols with
// a name in a scopein an iterator.
// I still have to remove all the cruft about PackageScope's and the like
// that's a leftover from the old Eclipse plugin days.
//
<span class="keyword">trait</span> <a title="trait Scopes extends java.lang.Object with ScalaObject" id="11099">Scopes</a> <span title="ScalaObject">{</span>
  self: SymbolTable =&gt;

  <span class="keyword">class</span> <a title="class ScopeEntry extends java.lang.Object with ScalaObject" id="26122">ScopeEntry</a><span title="ScalaObject">(</span><span class="keyword">val</span> <a title="Scopes.this.Symbol" id="27816">sym</a>: <a href="Symbols.scala.html#26286" title="Scopes.this.Symbol">Symbol</a>, <span class="keyword">val</span> <a title="Scopes.this.Scope" id="27817">owner</a>: <a href="#26171" title="Scopes.this.Scope">Scope</a>) {
    /** the next entry in the hash bucket
     */
    <span class="keyword">var</span> <a title="Scopes.this.ScopeEntry" id="26972">tail</a>: <a href="#26122" title="Scopes.this.ScopeEntry">ScopeEntry</a> = <span title="Null(null)" class="keyword">null</span>

    /** the next entry in this scope
     */
    <span class="keyword">var</span> <a title="Scopes.this.ScopeEntry" id="26975">next</a>: <a href="#26122" title="Scopes.this.ScopeEntry">ScopeEntry</a> = <span title="Null(null)" class="keyword">null</span>

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Int" id="26977">hashCode</a>(): <span title="Int">Int</span> = <a href="#27816" title="=&gt; Scopes.this.Symbol">sym</a>.<a href="Symbols.scala.html#27147" title="=&gt; Scopes.this.Name">name</a>.<a href="Names.scala.html#28379" title="=&gt; Int">start</a>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="26978">toString</a>(): <span title="String">String</span> = <a href="#27816" title="=&gt; Scopes.this.Symbol">sym</a>.<a href="Symbols.scala.html#27250" title="()String">toString</a>()
  }

  /**
   *  @param sym   ...
   *  @param owner ...
   *  @return      ...
   */
  <span class="keyword">def</span> <a title="(sym: Scopes.this.Symbol,owner: Scopes.this.Scope)Scopes.this.ScopeEntry" id="26123">newScopeEntry</a>(<a title="Scopes.this.Symbol" id="29007">sym</a>: <a href="Symbols.scala.html#26286" title="Scopes.this.Symbol">Symbol</a>, <a title="Scopes.this.Scope" id="29008">owner</a>: <a href="#26171" title="Scopes.this.Scope">Scope</a>): <a href="#26122" title="Scopes.this.ScopeEntry">ScopeEntry</a> = {
    <span class="keyword">val</span> <a title="Scopes.this.ScopeEntry" id="29010">e</a> = <span title="Scopes.this.ScopeEntry" class="keyword">new</span> <a href="#26122" title="Scopes.this.ScopeEntry">ScopeEntry</a>(<a href="#29007" title="Scopes.this.Symbol">sym</a>, <a href="#29008" title="Scopes.this.Scope">owner</a>)
    <a href="#29010" title="Scopes.this.ScopeEntry">e</a>.<a href="#26975" title="(x$1: Scopes.this.ScopeEntry)Unit">next</a> = <a href="#29008" title="Scopes.this.Scope">owner</a>.<a href="#27265" title="=&gt; Scopes.this.ScopeEntry">elems</a>
    <a href="#29008" title="Scopes.this.Scope">owner</a>.<a href="#27265" title="(x$1: Scopes.this.ScopeEntry)Unit">elems</a> = <a href="#29010" title="Scopes.this.ScopeEntry">e</a>
    <a href="#29010" title="Scopes.this.ScopeEntry">e</a>
  }

  // Martin: This code contains a lot of stuff for the old Eclipse plugin.
  // Now it's just needless complexity, which should be eleminated.
  // We should make the elems list doubly-linked,
  // and have scopes inherit from LinearSequence,
  // that way, we need to do way fewer toList than before.

  /**
   *  @param initElems ...
   *  @return          ...
   */
  <span class="keyword">def</span> <a title="(initElems: Scopes.this.ScopeEntry)Scopes.this.Scope" id="26124">newScope</a>(<a title="Scopes.this.ScopeEntry" id="29022">initElems</a>: <a href="#26122" title="Scopes.this.ScopeEntry">ScopeEntry</a>): <a href="#26171" title="Scopes.this.Scope">Scope</a> = <span title="Scopes.this.NormalScope" class="keyword">new</span> <a href="#26169" title="Scopes.this.NormalScope">NormalScope</a>(<a href="#29022" title="Scopes.this.ScopeEntry">initElems</a>)

  <span class="keyword">final</span> <span class="keyword">def</span> <a title="=&gt; Scopes.this.Scope" id="26125">newScope</a>: <a href="#26171" title="Scopes.this.Scope">Scope</a> = <a href="#26124" title="(initElems: Scopes.this.ScopeEntry)Scopes.this.Scope">newScope</a>(<span title="Null(null)" class="keyword">null</span>: <a href="#26122" title="Scopes.this.ScopeEntry">ScopeEntry</a>)

  <span class="keyword">trait</span> <a title="trait PackageScopeDependMap extends java.lang.Object" id="26126">PackageScopeDependMap</a> <a title="java.lang.Object" id="3646">{</a>
    <span class="keyword">def</span> <a title="(from: Scopes.this.Symbol,name: Scopes.this.Name)Unit" id="29213">createDepend</a>(<a title="Scopes.this.Symbol" id="29215">from</a> : <a href="Symbols.scala.html#26286" title="Scopes.this.Symbol">Symbol</a>, <a title="Scopes.this.Name" id="29216">name</a> : <a href="Names.scala.html#26214" title="Scopes.this.Name">Name</a>) : <span title="Unit">Unit</span>
  }
  
  <span class="keyword">def</span> <a title="(depends0: Scopes.this.PackageScopeDependMap)Scopes.this.PackageScope" id="26127">newPackageScope</a>(<a title="Scopes.this.PackageScopeDependMap" id="29217">depends0</a> : <a href="#26126" title="Scopes.this.PackageScopeDependMap">PackageScopeDependMap</a>) : <a href="#26170" title="Scopes.this.PackageScope">PackageScope</a> = {
    <span class="keyword">object</span> <a title="object MyPackageScope" id="29223">MyPackageScope</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#26169" title="Scopes.this.NormalScope">NormalScope</a>(<span title="Null(null)" class="keyword">null</span> : <a href="#26122" title="Scopes.this.ScopeEntry">ScopeEntry</a>) <span class="keyword">with</span> <a href="#26170" title="Scopes.this.PackageScope">PackageScope</a> {
      <span class="keyword">val</span> <a title="Scopes.this.PackageScopeDependMap" id="29226">depends</a> = <a href="#29217" title="Scopes.this.PackageScopeDependMap">depends0</a>
    }
    <a href="#29223" title="object MyPackageScope">MyPackageScope</a>
  }
   
  <span class="keyword">def</span> <a title="=&gt; Scopes.this.Scope" id="26128">newTempScope</a> = <a href="#26124" title="(initElems: Scopes.this.ScopeEntry)Scopes.this.Scope">newScope</a>(<span title="Null(null)" class="keyword">null</span> : <a href="#26122" title="Scopes.this.ScopeEntry">ScopeEntry</a>)
  <span class="keyword">class</span> <a title="class ScopeKind extends java.lang.Object with ScalaObject" id="26129">ScopeKind</a><span title="ScalaObject">(</span><a title="String" id="29249">name</a> : <span title="String">String</span>) { <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="29246">toString</a> = <a href="#29249" title="String">name</a> }
  <span class="keyword">def</span> <a title="(name: String)Scopes.this.ScopeKind" id="26130">allocateScopeKind</a>(<a title="String" id="29255">name</a> : <span title="String">String</span>) = <span title="Scopes.this.ScopeKind" class="keyword">new</span> <a href="#26129" title="Scopes.this.ScopeKind">ScopeKind</a>(<a href="#29255" title="String">name</a>)
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Scopes.this.ScopeKind" id="26132">Constructor0ScopeKind</a> : <a href="#26129" title="Scopes.this.ScopeKind">ScopeKind</a> = <a href="#26130" title="(name: String)Scopes.this.ScopeKind">allocateScopeKind</a>(<span title="java.lang.String(&quot;constructors0&quot;)" class="string">&quot;constructors0&quot;</span>)
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Scopes.this.ScopeKind" id="26134">Constructor1ScopeKind</a> : <a href="#26129" title="Scopes.this.ScopeKind">ScopeKind</a> = <a href="#26130" title="(name: String)Scopes.this.ScopeKind">allocateScopeKind</a>(<span title="java.lang.String(&quot;constructors1&quot;)" class="string">&quot;constructors1&quot;</span>)
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Scopes.this.ScopeKind" id="26136">InnerScopeKind</a> : <a href="#26129" title="Scopes.this.ScopeKind">ScopeKind</a> = <a href="#26130" title="(name: String)Scopes.this.ScopeKind">allocateScopeKind</a>(<span title="java.lang.String(&quot;inner&quot;)" class="string">&quot;inner&quot;</span>)
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Scopes.this.ScopeKind" id="26138">FinishWithScopeKind</a> : <a href="#26129" title="Scopes.this.ScopeKind">ScopeKind</a> = <a href="#26130" title="(name: String)Scopes.this.ScopeKind">allocateScopeKind</a>(<span title="java.lang.String(&quot;finishWith&quot;)" class="string">&quot;finishWith&quot;</span>)
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Scopes.this.ScopeKind" id="26140">TypeSigScopeKind</a> : <a href="#26129" title="Scopes.this.ScopeKind">ScopeKind</a> = <a href="#26130" title="(name: String)Scopes.this.ScopeKind">allocateScopeKind</a>(<span title="java.lang.String(&quot;typeSig&quot;)" class="string">&quot;typeSig&quot;</span>)
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Scopes.this.ScopeKind" id="26142">PolyTypeCompleterScopeKind</a> : <a href="#26129" title="Scopes.this.ScopeKind">ScopeKind</a> = <a href="#26130" title="(name: String)Scopes.this.ScopeKind">allocateScopeKind</a>(<span title="java.lang.String(&quot;polyType&quot;)" class="string">&quot;polyType&quot;</span>)
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Scopes.this.ScopeKind" id="26144">CompoundTreeScopeKind</a> : <a href="#26129" title="Scopes.this.ScopeKind">ScopeKind</a> = <a href="#26130" title="(name: String)Scopes.this.ScopeKind">allocateScopeKind</a>(<span title="java.lang.String(&quot;compoundTree&quot;)" class="string">&quot;compoundTree&quot;</span>)
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Scopes.this.ScopeKind" id="26146">FreshArgScopeKind</a> : <a href="#26129" title="Scopes.this.ScopeKind">ScopeKind</a> = <a href="#26130" title="(name: String)Scopes.this.ScopeKind">allocateScopeKind</a>(<span title="java.lang.String(&quot;freshArgs&quot;)" class="string">&quot;freshArgs&quot;</span>)
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Scopes.this.ScopeKind" id="26148">LabelScopeKind</a> : <a href="#26129" title="Scopes.this.ScopeKind">ScopeKind</a> = <a href="#26130" title="(name: String)Scopes.this.ScopeKind">allocateScopeKind</a>(<span title="java.lang.String(&quot;label&quot;)" class="string">&quot;label&quot;</span>)
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Scopes.this.ScopeKind" id="26150">TypedCasesScopeKind</a> : <a href="#26129" title="Scopes.this.ScopeKind">ScopeKind</a> = <a href="#26130" title="(name: String)Scopes.this.ScopeKind">allocateScopeKind</a>(<span title="java.lang.String(&quot;typedCases&quot;)" class="string">&quot;typedCases&quot;</span>)
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Scopes.this.ScopeKind" id="26152">TypedDefScopeKind</a> : <a href="#26129" title="Scopes.this.ScopeKind">ScopeKind</a> = <a href="#26130" title="(name: String)Scopes.this.ScopeKind">allocateScopeKind</a>(<span title="java.lang.String(&quot;typedDef&quot;)" class="string">&quot;typedDef&quot;</span>)
  //lazy val ParentTypesScopeKind : ScopeKind = allocateScopeKind(&quot;parentType&quot;)
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Scopes.this.ScopeKind" id="26154">TypedScopeKind</a> : <a href="#26129" title="Scopes.this.ScopeKind">ScopeKind</a> = <a href="#26130" title="(name: String)Scopes.this.ScopeKind">allocateScopeKind</a>(<span title="java.lang.String(&quot;typed&quot;)" class="string">&quot;typed&quot;</span>)
  // have to sometimes use constructor depth unfortunately.
  case <span class="keyword">class</span> <a title="class ParentTypesScopeKind extends Scopes.this.ScopeKind with ScalaObject with Product" id="29371">ParentTypesScopeKind</a><span title="ScalaObject">(</span><a title="Scopes.this.Symbol" id="33021">clazz</a> : <a href="Symbols.scala.html#26286" title="Scopes.this.Symbol">Symbol</a>) <span class="keyword">extends</span> <a href="#26129" title="Scopes.this.ScopeKind">ScopeKind</a>(<span title="java.lang.String(&quot;parentType&quot;)" class="string">&quot;parentType&quot;</span>) { <span class="keyword">override</span> <span class="keyword">def</span> <a title="()java.lang.String" id="29288">toString</a> = <span class="keyword">super</span>.<a href="#29246" title="(x$1: Any)java.lang.String">toString</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;-&quot;)" class="string">&quot;-&quot;</span> + <a href="#33021" title="=&gt; Scopes.this.Symbol">clazz</a> }
  case <span class="keyword">class</span> <a title="class BlockScopeKind extends Scopes.this.ScopeKind with ScalaObject with Product" id="29495">BlockScopeKind</a><span title="ScalaObject">(</span><a title="Int" id="33013">depth</a> : <span title="Int">Int</span>) <span class="keyword">extends</span> <a href="#26129" title="Scopes.this.ScopeKind">ScopeKind</a>(<span title="java.lang.String(&quot;block&quot;)" class="string">&quot;block&quot;</span>) { <span class="keyword">override</span> <span class="keyword">def</span> <a title="()java.lang.String" id="29462">toString</a> = <span class="keyword">super</span>.<a href="#29246" title="(x$1: Any)java.lang.String">toString</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;-&quot;)" class="string">&quot;-&quot;</span> + <a href="#33013" title="=&gt; Int">depth</a> }
  
  <span class="keyword">def</span> <a title="(clazz: Scopes.this.Symbol)Scopes.this.Scope" id="26161">newClassScope</a>(<a title="Scopes.this.Symbol" id="29532">clazz</a> : <a href="Symbols.scala.html#26286" title="Scopes.this.Symbol">Symbol</a>) = <a href="#26125" title="=&gt; Scopes.this.Scope">newScope</a> // for use in ClassInfoType creation
  <span class="keyword">def</span> <a title="(tree: Scopes.this.Tree,kind: Scopes.this.ScopeKind)Scopes.this.Scope" id="26162">scopeFor</a>(             <a title="Scopes.this.Tree" id="29538">tree</a> : <a href="../ast/Trees.scala.html#26752" title="Scopes.this.Tree">Tree</a>, <a title="Scopes.this.ScopeKind" id="29539">kind</a> : <a href="#26129" title="Scopes.this.ScopeKind">ScopeKind</a>) : <a href="#26171" title="Scopes.this.Scope">Scope</a> = <a href="#26125" title="=&gt; Scopes.this.Scope">newScope</a>
  <span class="keyword">def</span> <a title="(old: Scopes.this.Scope,tree: Scopes.this.Tree,kind: Scopes.this.ScopeKind)Scopes.this.Scope" id="26163">scopeFor</a>(<a title="Scopes.this.Scope" id="29579">old</a> : <a href="#26171" title="Scopes.this.Scope">Scope</a>, <a title="Scopes.this.Tree" id="29580">tree</a> : <a href="../ast/Trees.scala.html#26752" title="Scopes.this.Tree">Tree</a>, <a title="Scopes.this.ScopeKind" id="29581">kind</a> : <a href="#26129" title="Scopes.this.ScopeKind">ScopeKind</a>) : <a href="#26171" title="Scopes.this.Scope">Scope</a> = <a href="#26164" title="(base: Scopes.this.Scope)Scopes.this.Scope">newScope</a>(<a href="#29579" title="Scopes.this.Scope">old</a>)
  
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(base: Scopes.this.Scope)Scopes.this.Scope" id="26164">newScope</a>(<a title="Scopes.this.Scope" id="29207">base</a>: <a href="#26171" title="Scopes.this.Scope">Scope</a>) : <a href="#26171" title="Scopes.this.Scope">Scope</a> = <a href="#26124" title="(initElems: Scopes.this.ScopeEntry)Scopes.this.Scope">newScope</a>(<a href="#29207" title="Scopes.this.Scope">base</a>.<a href="#27265" title="=&gt; Scopes.this.ScopeEntry">elems</a>)
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(decls: List[Scopes.this.Symbol])Scopes.this.Scope" id="26165">newScope</a>(<a title="List[Scopes.this.Symbol]" id="29037">decls</a>: <span title="List[Scopes.this.Symbol]">List</span>[Symbol]) : <a href="#26171" title="Scopes.this.Scope">Scope</a> = {
    <span class="keyword">val</span> <a title="Scopes.this.Scope" id="29597">ret</a> = <a href="#26125" title="=&gt; Scopes.this.Scope">newScope</a>
    <a href="#29037" title="(f: (Scopes.this.Symbol) =&gt; Scopes.this.Symbol)Unit">decls</a> foreach <a href="#29597" title="Scopes.this.Scope">ret</a>.<a href="#27290" title="(sym: Scopes.this.Symbol)Scopes.this.Symbol">enter</a>
    <a href="#29597" title="Scopes.this.Scope">ret</a>
  }
  <span class="keyword">def</span> <a title="(decls: List[Scopes.this.Symbol])Scopes.this.Scope" id="26166">newThrowAwayScope</a>(<a title="List[Scopes.this.Symbol]" id="29642">decls</a> : <span title="List[Scopes.this.Symbol]">List</span>[Symbol]) : <a href="#26171" title="Scopes.this.Scope">Scope</a> = <a href="#26165" title="(decls: List[Scopes.this.Symbol])Scopes.this.Scope">newScope</a>(<a href="#29642" title="List[Scopes.this.Symbol]">decls</a>)
  // for symbols that don't exist in scopes! 
  <span class="keyword">def</span> <a title="(sym: Scopes.this.Symbol)Scopes.this.Symbol" id="26167">recycle</a>(<a title="Scopes.this.Symbol" id="29651">sym</a> : <a href="Symbols.scala.html#26286" title="Scopes.this.Symbol">Symbol</a>) : <a href="Symbols.scala.html#26286" title="Scopes.this.Symbol">Symbol</a> = <a href="#29651" title="Scopes.this.Symbol">sym</a>
  <span class="keyword">def</span> <a title="(clazz: Scopes.this.Symbol,pos: scala.tools.nsc.util.Position)Scopes.this.TermSymbol" id="26168">newLocalDummy</a>(<a title="Scopes.this.Symbol" id="29653">clazz</a> : <a href="Symbols.scala.html#26286" title="Scopes.this.Symbol">Symbol</a>, <a title="scala.tools.nsc.util.Position" id="29654">pos</a> : util.<a href="../util/Position.scala.html#14785" title="scala.tools.nsc.util.Position">Position</a>) = <a href="#29653" title="Scopes.this.Symbol">clazz</a>.<a href="Symbols.scala.html#27025" title="(pos: scala.tools.nsc.util.Position)Scopes.this.TermSymbol">newLocalDummy</a>(<a href="#29654" title="scala.tools.nsc.util.Position">pos</a>)

  <span class="keyword">private</span> <span class="keyword">class</span> <a title="class NormalScope extends Scopes.this.Scope with ScalaObject" id="26169">NormalScope</a><span title="ScalaObject">(</span><a title="Scopes.this.ScopeEntry" id="29027">initElems</a>: <a href="#26122" title="Scopes.this.ScopeEntry">ScopeEntry</a>) <span class="keyword">extends</span> <a href="#26171" title="Scopes.this.Scope">Scope</a>(<a href="#29027" title="Scopes.this.ScopeEntry">initElems</a>)

  <span class="keyword">trait</span> <a title="trait PackageScope extends Scopes.this.Scope with ScalaObject" id="26170">PackageScope</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#26171" title="Scopes.this.Scope">Scope</a> {
    <span class="keyword">val</span> <a title="=&gt; Scopes.this.PackageScopeDependMap" id="29220">depends</a> : <a href="#26126" title="Scopes.this.PackageScopeDependMap">PackageScopeDependMap</a>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(name: Scopes.this.Name)(from: Scopes.this.Symbol)Scopes.this.ScopeEntry" id="29221">lookupEntryWithContext</a>(<a title="Scopes.this.Name" id="30510">name</a> : <a href="Names.scala.html#26214" title="Scopes.this.Name">Name</a>)(<a title="Scopes.this.Symbol" id="30511">from</a> : <a href="Symbols.scala.html#26286" title="Scopes.this.Symbol">Symbol</a>) = {
      <span title="Unit" class="keyword">if</span> (<a href="#30511" title="(x$1: AnyRef)Boolean">from</a> <span title="(x$1: Boolean)Boolean">!=</span> <a href="Symbols.scala.html#26293" title="object Scopes.this.NoSymbol">NoSymbol</a> &amp;&amp; <a href="#29220" title="(x$1: AnyRef)Boolean">depends</a> != <span title="Null(null)" class="keyword">null</span>) {
        <a href="#29220" title="=&gt; Scopes.this.PackageScopeDependMap">depends</a>.<a href="#29213" title="(from: Scopes.this.Symbol,name: Scopes.this.Name)Unit">createDepend</a>(<a href="#30511" title="Scopes.this.Symbol">from</a>,<a href="#30510" title="Scopes.this.Name">name</a>)
      }
      <a href="#785395" title="(name: Scopes.this.Name)(from: Scopes.this.Symbol)Scopes.this.ScopeEntry" class="keyword">super</a>.<a title="(name: Scopes.this.Name)(from: Scopes.this.Symbol)Scopes.this.ScopeEntry" id="785395">lookupEntryWithContext</a>(<a href="#30510" title="Scopes.this.Name">name</a>)(<a href="#30511" title="Scopes.this.Symbol">from</a>)
    }
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(name: Scopes.this.Name)(from: Scopes.this.Symbol)Scopes.this.Symbol" id="29222">lookupWithContext</a>(<a title="Scopes.this.Name" id="30555">name</a> : <a href="Names.scala.html#26214" title="Scopes.this.Name">Name</a>)(<a title="Scopes.this.Symbol" id="30556">from</a> : <a href="Symbols.scala.html#26286" title="Scopes.this.Symbol">Symbol</a>) = {
      <span title="Unit" class="keyword">if</span> (<a href="#30556" title="(x$1: AnyRef)Boolean">from</a> <span title="(x$1: Boolean)Boolean">!=</span> <a href="Symbols.scala.html#26293" title="object Scopes.this.NoSymbol">NoSymbol</a> &amp;&amp; <a href="#29220" title="(x$1: AnyRef)Boolean">depends</a> != <span title="Null(null)" class="keyword">null</span>) {
        <a href="#29220" title="=&gt; Scopes.this.PackageScopeDependMap">depends</a>.<a href="#29213" title="(from: Scopes.this.Symbol,name: Scopes.this.Name)Unit">createDepend</a>(<a href="#30556" title="Scopes.this.Symbol">from</a>,<a href="#30555" title="Scopes.this.Name">name</a>)
      }
      <a href="#785398" title="(name: Scopes.this.Name)(from: Scopes.this.Symbol)Scopes.this.Symbol" class="keyword">super</a>.<a title="(name: Scopes.this.Name)(from: Scopes.this.Symbol)Scopes.this.Symbol" id="785398">lookupWithContext</a>(<a href="#30555" title="Scopes.this.Name">name</a>)(<a href="#30556" title="Scopes.this.Symbol">from</a>)
    }
  }
  
  <span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class Scope extends java.lang.Object with Iterable[Scopes.this.Symbol] with ScalaObject" id="26171">Scope</a><span title="ScalaObject">(</span><a title="Scopes.this.ScopeEntry" id="30502">initElems</a>: <a href="#26122" title="Scopes.this.ScopeEntry">ScopeEntry</a>) <span class="keyword">extends</span> <a title="Iterable[Scopes.this.Symbol]" id="4537">Iterable</a>[Symbol] {

    <span class="keyword">var</span> <a title="Scopes.this.ScopeEntry" id="27265">elems</a>: <a href="#26122" title="Scopes.this.ScopeEntry">ScopeEntry</a> = <a href="#30502" title="Scopes.this.ScopeEntry">initElems</a>

    /** The number of times this scope is neted in another
     */
    <span class="keyword">private</span> <span class="keyword">var</span> <a title="Int" id="27268">nestinglevel</a> = <span title="Int(0)" class="int">0</span>

    /** the hash table
     */
    <span class="keyword">private</span> <span class="keyword">var</span> <a title="Array[Scopes.this.ScopeEntry]" id="27271">hashtable</a>: <span title="Array[Scopes.this.ScopeEntry]">Array</span>[ScopeEntry] = <span title="Null(null)" class="keyword">null</span>

    /** a cache for all elements, to be used by symbol iterator.
     */
    <span class="keyword">private</span> <span class="keyword">var</span> <a title="List[Scopes.this.Symbol]" id="27274">elemsCache</a>: <span title="List[Scopes.this.Symbol]">List</span>[Symbol] = <span title="Null(null)" class="keyword">null</span>

    /** size and mask of hash tables
     *  todo: make hashtables grow?
     */
    <span class="keyword">private</span> <span class="keyword">val</span> <a title="Int" id="27276">HASHSIZE</a> = <span title="Int(128)" class="int">0x80</span>
    <span class="keyword">private</span> <span class="keyword">val</span> <a title="Int" id="27278">HASHMASK</a> = <span title="Int(127)" class="int">0x7f</span>

    /** the threshold number of entries from which a hashtable is constructed.
     */
    <span class="keyword">private</span> <span class="keyword">val</span> <a title="Int" id="27280">MIN_HASH</a> = <span title="Int(8)" class="int">8</span>

    <span title="Unit" class="keyword">if</span> (<a href="#27288" title="(x$1: Int)Boolean">size</a> &gt;= <a href="#27280" title="=&gt; Int">MIN_HASH</a>) <a href="#27292" title="()Unit">createHash</a>()

    <span class="keyword">def</span> <a title="()Scopes.this.Scope" id="27282" class="keyword">this</a>() = <a href="#26171" title="Scope.this.type" class="keyword">this</a>(<span title="Null(null)" class="keyword">null</span>: <a href="#26122" title="Scopes.this.ScopeEntry">ScopeEntry</a>)

    <span class="keyword">def</span> <a title="(base: Scopes.this.Scope)Scopes.this.Scope" id="27283" class="keyword">this</a>(<a title="Scopes.this.Scope" id="30501">base</a>: <a href="#26171" title="Scopes.this.Scope">Scope</a>) = <span title="Unit">{</span>
      <a href="#26171" title="Scope.this.type" class="keyword">this</a>(<a href="#30501" title="Scopes.this.Scope">base</a>.<a href="#27265" title="=&gt; Scopes.this.ScopeEntry">elems</a>)
      <a href="#27268" title="(x$1: Int)Unit">nestinglevel</a> = <a href="#30501" title="Scopes.this.Scope">base</a>.<a href="#27268" title="(x$1: Int)Int">nestinglevel</a> + <span title="Int(1)" class="int">1</span>
    }

    <span class="keyword">def</span> <a title="(decls: List[Scopes.this.Symbol])Scopes.this.Scope" id="27284" class="keyword">this</a>(<a title="List[Scopes.this.Symbol]" id="30500">decls</a>: <span title="List[Scopes.this.Symbol]">List</span>[Symbol]) = <span title="Unit">{</span>
      <a href="#27282" title="()Scopes.this.Scope" class="keyword">this</a>()
      <a href="#30500" title="(f: (Scopes.this.Symbol) =&gt; Scopes.this.Symbol)Unit">decls</a> foreach <a href="#27290" title="(sym: Scopes.this.Symbol)Scopes.this.Symbol">enter</a>
    }

    /** Returns a new scope with the same content as this one. */
    <span class="keyword">def</span> <a title="=&gt; Scopes.this.Scope" id="27285">cloneScope</a>: <a href="#26171" title="Scopes.this.Scope">Scope</a> = {
      <span class="keyword">val</span> <a title="Scopes.this.Scope" id="31703">clone</a> = <a href="#26125" title="=&gt; Scopes.this.Scope">newScope</a>
      <a href="#26171" title="Scope.this.type" class="keyword">this</a>.<a href="#27303" title="(f: (Scopes.this.Symbol) =&gt; Scopes.this.Symbol)Unit">toList</a> foreach (<a href="#27290" title="(sym: Scopes.this.Symbol)Scopes.this.Symbol">clone</a> enter <a href="#31726" title="Scopes.this.Symbol">_</a>)
      <a href="#31703" title="Scopes.this.Scope">clone</a>
    }
    /* clear the contents of this scope */
    <span class="keyword">def</span> <a title="=&gt; Unit" id="27286">clear</a> = {
      <a href="#27265" title="(x$1: Scopes.this.ScopeEntry)Unit">elems</a> = <span title="Null(null)" class="keyword">null</span>
      <a href="#27274" title="(x$1: List[Scopes.this.Symbol])Unit">elemsCache</a> = <span title="Null(null)" class="keyword">null</span>
      <a href="#27271" title="(x$1: Array[Scopes.this.ScopeEntry])Unit">hashtable</a> = <span title="Null(null)" class="keyword">null</span>
    }
    

    /** is the scope empty? */
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Boolean" id="27287">isEmpty</a>: <span title="Boolean">Boolean</span> = <a href="#27265" title="(x$1: AnyRef)Boolean">elems</a> eq <span title="Null(null)" class="keyword">null</span>

    /** the number of entries in this scope */
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Int" id="27288">size</a>: <span title="Int">Int</span> = {
      <span class="keyword">var</span> <a title="Int" id="31777">s</a> = <span title="Int(0)" class="int">0</span>
      <span class="keyword">var</span> <a title="Scopes.this.ScopeEntry" id="31778">e</a> = <a href="#27265" title="=&gt; Scopes.this.ScopeEntry">elems</a>
      <span title="Unit" class="keyword">while</span> (<a href="#31778" title="(x$1: AnyRef)Boolean">e</a> ne <span title="Null(null)" class="keyword">null</span>) <a href="#31779" title="()Unit">{</a>
        <a href="#31777" title="Int">s</a> += <span title="Int(1)" class="int">1</span>
        <a href="#31778" title="Scopes.this.ScopeEntry">e</a> = <a href="#31778" title="Scopes.this.ScopeEntry">e</a>.<a href="#26975" title="=&gt; Scopes.this.ScopeEntry">next</a>
      }
      <a href="#31777" title="Int">s</a>
    }

    /** enter a scope entry
     *
     *  @param e ...
     */
    <span class="keyword">def</span> <a title="(e: Scopes.this.ScopeEntry)Unit" id="27289">enter</a>(<a title="Scopes.this.ScopeEntry" id="29620">e</a>: <a href="#26122" title="Scopes.this.ScopeEntry">ScopeEntry</a>) {
      <a href="#27274" title="(x$1: List[Scopes.this.Symbol])Unit">elemsCache</a> = <span title="Null(null)" class="keyword">null</span>
      <span title="Unit" class="keyword">if</span> (<a href="#27271" title="(x$1: AnyRef)Boolean">hashtable</a> ne <span title="Null(null)" class="keyword">null</span>) {
        <span class="keyword">val</span> <a title="Int" id="31943">i</a> = <a href="#29620" title="Scopes.this.ScopeEntry">e</a>.<a href="#27816" title="=&gt; Scopes.this.Symbol">sym</a>.<a href="Symbols.scala.html#27147" title="=&gt; Scopes.this.Name">name</a>.<a href="Names.scala.html#28379" title="(x$1: Int)Int">start</a> &amp; <a href="#27278" title="=&gt; Int">HASHMASK</a>
        <a href="#27265" title="=&gt; Scopes.this.ScopeEntry">elems</a>.<a href="#26972" title="(x$1: Scopes.this.ScopeEntry)Unit">tail</a> = <a href="#27271" title="(i: Int)Scopes.this.ScopeEntry">hashtable</a>(<a href="#31943" title="Int">i</a>)
        <a href="#27271" title="(i: Int,x: Scopes.this.ScopeEntry)Unit">hashtable</a>(<a href="#31943" title="Int">i</a>) = <a href="#27265" title="=&gt; Scopes.this.ScopeEntry">elems</a>
      } <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<a href="#27288" title="(x$1: Int)Boolean">size</a> &gt;= <a href="#27280" title="=&gt; Int">MIN_HASH</a>) {
        <a href="#27292" title="()Unit">createHash</a>()
      }
    }

    /** enter a symbol
     *
     *  @param sym ...
     */
    <span class="keyword">def</span> <a title="(sym: Scopes.this.Symbol)Scopes.this.Symbol" id="27290">enter</a>(<a title="Scopes.this.Symbol" id="29618">sym</a>: <a href="Symbols.scala.html#26286" title="Scopes.this.Symbol">Symbol</a>) : <a href="Symbols.scala.html#26286" title="Scopes.this.Symbol">Symbol</a> = { <a href="#27289" title="(e: Scopes.this.ScopeEntry)Unit">enter</a>(<a href="#26123" title="(sym: Scopes.this.Symbol,owner: Scopes.this.Scope)Scopes.this.ScopeEntry">newScopeEntry</a>(<a href="#29618" title="Scopes.this.Symbol">sym</a>, <a href="#26171" title="Scopes.this.Scope" class="keyword">this</a>)); <a href="#29618" title="Scopes.this.Symbol">sym</a> }

    /** enter a symbol, asserting that no symbol with same name exists in scope
     *
     *  @param sym ...
     */
    <span class="keyword">def</span> <a title="(sym: Scopes.this.Symbol)Unit" id="27291">enterUnique</a>(<a title="Scopes.this.Symbol" id="32000">sym</a>: <a href="Symbols.scala.html#26286" title="Scopes.this.Symbol">Symbol</a>) {
      <a title="(assertion: Boolean)Unit" id="7943">assert</a>(<a href="#27297" title="(name: Scopes.this.Name)Scopes.this.Symbol">lookup</a><span title="(x$1: AnyRef)Boolean">(</span><a href="#32000" title="Scopes.this.Symbol">sym</a>.<a href="Symbols.scala.html#27147" title="=&gt; Scopes.this.Name">name</a>) == <a href="Symbols.scala.html#26293" title="object Scopes.this.NoSymbol">NoSymbol</a>)
      <a href="#27290" title="(sym: Scopes.this.Symbol)Scopes.this.Symbol">enter</a><span title="Unit">(</span><a href="#32000" title="Scopes.this.Symbol">sym</a>)
    }

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="()Unit" id="27292">createHash</a>() {
      <a href="#27271" title="(x$1: Array[Scopes.this.ScopeEntry])Unit">hashtable</a> = <span title="Array[Scopes.this.ScopeEntry]" class="keyword">new</span> <span title="Array[Scopes.this.ScopeEntry]">Array</span>[ScopeEntry](<a href="#27276" title="=&gt; Int">HASHSIZE</a>)
      <a href="#27293" title="(e: Scopes.this.ScopeEntry)Unit">enterInHash</a>(<a href="#27265" title="=&gt; Scopes.this.ScopeEntry">elems</a>)
    }

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(e: Scopes.this.ScopeEntry)Unit" id="27293">enterInHash</a>(<a title="Scopes.this.ScopeEntry" id="32030">e</a>: <a href="#26122" title="Scopes.this.ScopeEntry">ScopeEntry</a>) {
      <span title="Unit" class="keyword">if</span> (<a href="#32030" title="(x$1: AnyRef)Boolean">e</a> ne <span title="Null(null)" class="keyword">null</span>) {
        <a href="#27293" title="(e: Scopes.this.ScopeEntry)Unit">enterInHash</a>(<a href="#32030" title="Scopes.this.ScopeEntry">e</a>.<a href="#26975" title="=&gt; Scopes.this.ScopeEntry">next</a>)
        <span class="keyword">val</span> <a title="Int" id="32036">i</a> = <a href="#32030" title="Scopes.this.ScopeEntry">e</a>.<a href="#27816" title="=&gt; Scopes.this.Symbol">sym</a>.<a href="Symbols.scala.html#27147" title="=&gt; Scopes.this.Name">name</a>.<a href="Names.scala.html#28379" title="(x$1: Int)Int">start</a> &amp; <a href="#27278" title="=&gt; Int">HASHMASK</a>
        <a href="#32030" title="Scopes.this.ScopeEntry">e</a>.<a href="#26972" title="(x$1: Scopes.this.ScopeEntry)Unit">tail</a> = <a href="#27271" title="(i: Int)Scopes.this.ScopeEntry">hashtable</a>(<a href="#32036" title="Int">i</a>)
        <a href="#27271" title="(i: Int,x: Scopes.this.ScopeEntry)Unit">hashtable</a>(<a href="#32036" title="Int">i</a>) = <a href="#32030" title="Scopes.this.ScopeEntry">e</a>
      }
    }

    <span class="keyword">def</span> <a title="(sym: Scopes.this.Symbol,newname: Scopes.this.Name)Unit" id="27294">rehash</a>(<a title="Scopes.this.Symbol" id="32070">sym</a>: <a href="Symbols.scala.html#26286" title="Scopes.this.Symbol">Symbol</a>, <a title="Scopes.this.Name" id="32071">newname</a>: <a href="Names.scala.html#26214" title="Scopes.this.Name">Name</a>) {
      <span title="Unit" class="keyword">if</span> (<a href="#27271" title="(x$1: AnyRef)Boolean">hashtable</a> ne <span title="Null(null)" class="keyword">null</span>) {
        <span class="keyword">val</span> <a title="Int" id="32075">index</a> = <a href="#32070" title="Scopes.this.Symbol">sym</a>.<a href="Symbols.scala.html#27147" title="=&gt; Scopes.this.Name">name</a>.<a href="Names.scala.html#28379" title="(x$1: Int)Int">start</a> &amp; <a href="#27278" title="=&gt; Int">HASHMASK</a>
        <span class="keyword">var</span> <a title="Scopes.this.ScopeEntry" id="32076">e1</a> = <a href="#27271" title="(i: Int)Scopes.this.ScopeEntry">hashtable</a>(<a href="#32075" title="Int">index</a>)
        <span class="keyword">var</span> <a title="Scopes.this.ScopeEntry" id="32077">e</a>: <a href="#26122" title="Scopes.this.ScopeEntry">ScopeEntry</a> = <span title="Null(null)" class="keyword">null</span>
        <span title="Unit" class="keyword">if</span> (<a href="#32076" title="(x$1: AnyRef)Boolean">e1</a> != <span title="Null(null)" class="keyword">null</span>) {
          <span title="Unit" class="keyword">if</span> (<a href="#32076" title="Scopes.this.ScopeEntry">e1</a>.<a href="#27816" title="(x$1: AnyRef)Boolean">sym</a> == <a href="#32070" title="Scopes.this.Symbol">sym</a>) {
            <a href="#27271" title="(i: Int,x: Scopes.this.ScopeEntry)Unit">hashtable</a>(<a href="#32075" title="Int">index</a>) = <a href="#32076" title="Scopes.this.ScopeEntry">e1</a>.<a href="#26972" title="=&gt; Scopes.this.ScopeEntry">tail</a>
            <a href="#32077" title="Scopes.this.ScopeEntry">e</a> = <a href="#32076" title="Scopes.this.ScopeEntry">e1</a>
          } <span class="keyword">else</span> {
            <span title="Unit" class="keyword">while</span> (<a href="#32076" title="Scopes.this.ScopeEntry">e1</a>.<a href="#26972" title="(x$1: AnyRef)Boolean">tail</a> <span title="(x$1: Boolean)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span> &amp;&amp; <a href="#32076" title="Scopes.this.ScopeEntry">e1</a>.<a href="#26972" title="=&gt; Scopes.this.ScopeEntry">tail</a>.<a href="#27816" title="(x$1: AnyRef)Boolean">sym</a> != <a href="#32070" title="Scopes.this.Symbol">sym</a>) <a href="#32076" title="Scopes.this.ScopeEntry">e1</a> = <a href="#32076" title="Scopes.this.ScopeEntry">e1</a>.<a href="#26972" title="=&gt; Scopes.this.ScopeEntry">tail</a>
            <span title="Unit" class="keyword">if</span> (<a href="#32076" title="Scopes.this.ScopeEntry">e1</a>.<a href="#26972" title="(x$1: AnyRef)Boolean">tail</a> != <span title="Null(null)" class="keyword">null</span>) {
              <a href="#32077" title="Scopes.this.ScopeEntry">e</a> = <a href="#32076" title="Scopes.this.ScopeEntry">e1</a>.<a href="#26972" title="=&gt; Scopes.this.ScopeEntry">tail</a>
              <a href="#32076" title="Scopes.this.ScopeEntry">e1</a>.<a href="#26972" title="(x$1: Scopes.this.ScopeEntry)Unit">tail</a> = <a href="#32077" title="Scopes.this.ScopeEntry">e</a>.<a href="#26972" title="=&gt; Scopes.this.ScopeEntry">tail</a>
            }
          }
        }
        <span title="Unit" class="keyword">if</span> (<a href="#32077" title="(x$1: AnyRef)Boolean">e</a> != <span title="Null(null)" class="keyword">null</span>) {
          <span class="keyword">val</span> <a title="Int" id="32156">newindex</a> = <a href="#32071" title="Scopes.this.Name">newname</a>.<a href="Names.scala.html#28379" title="(x$1: Int)Int">start</a> &amp; <a href="#27278" title="=&gt; Int">HASHMASK</a>
          <a href="#32077" title="Scopes.this.ScopeEntry">e</a>.<a href="#26972" title="(x$1: Scopes.this.ScopeEntry)Unit">tail</a> = <a href="#27271" title="(i: Int)Scopes.this.ScopeEntry">hashtable</a>(<a href="#32156" title="Int">newindex</a>)
          <a href="#27271" title="(i: Int,x: Scopes.this.ScopeEntry)Unit">hashtable</a>(<a href="#32156" title="Int">newindex</a>) = <a href="#32077" title="Scopes.this.ScopeEntry">e</a>
        }
      }
    }

    /** remove entry
     *
     *  @param e ...
     */
    <span class="keyword">def</span> <a title="(e: Scopes.this.ScopeEntry)Unit" id="27295">unlink</a>(<a title="Scopes.this.ScopeEntry" id="32188">e</a>: <a href="#26122" title="Scopes.this.ScopeEntry">ScopeEntry</a>) {
      <span title="Unit" class="keyword">if</span> (<a href="#27265" title="(x$1: AnyRef)Boolean">elems</a> == <a href="#32188" title="Scopes.this.ScopeEntry">e</a>) {
        <a href="#27265" title="(x$1: Scopes.this.ScopeEntry)Unit">elems</a> = <a href="#32188" title="Scopes.this.ScopeEntry">e</a>.<a href="#26975" title="=&gt; Scopes.this.ScopeEntry">next</a>
      } <span class="keyword">else</span> {
        <span class="keyword">var</span> <a title="Scopes.this.ScopeEntry" id="32199">e1</a> = <a href="#27265" title="=&gt; Scopes.this.ScopeEntry">elems</a>
        <span title="Unit" class="keyword">while</span> (<a href="#32199" title="Scopes.this.ScopeEntry">e1</a>.<a href="#26975" title="(x$1: AnyRef)Boolean">next</a> != <a href="#32188" title="Scopes.this.ScopeEntry">e</a>) <a href="#32199" title="Scopes.this.ScopeEntry">e1</a> = <a href="#32199" title="Scopes.this.ScopeEntry">e1</a>.<a href="#26975" title="=&gt; Scopes.this.ScopeEntry">next</a>
        <a href="#32199" title="Scopes.this.ScopeEntry">e1</a>.<a href="#26975" title="(x$1: Scopes.this.ScopeEntry)Unit">next</a> = <a href="#32188" title="Scopes.this.ScopeEntry">e</a>.<a href="#26975" title="=&gt; Scopes.this.ScopeEntry">next</a>
      }
      <span title="Unit" class="keyword">if</span> (<a href="#27271" title="(x$1: AnyRef)Boolean">hashtable</a> ne <span title="Null(null)" class="keyword">null</span>) {
        <span class="keyword">val</span> <a title="Int" id="32214">index</a> = <a href="#32188" title="Scopes.this.ScopeEntry">e</a>.<a href="#27816" title="=&gt; Scopes.this.Symbol">sym</a>.<a href="Symbols.scala.html#27147" title="=&gt; Scopes.this.Name">name</a>.<a href="Names.scala.html#28379" title="(x$1: Int)Int">start</a> &amp; <a href="#27278" title="=&gt; Int">HASHMASK</a>
        <span class="keyword">var</span> <a title="Scopes.this.ScopeEntry" id="32215">e1</a> = <a href="#27271" title="(i: Int)Scopes.this.ScopeEntry">hashtable</a>(<a href="#32214" title="Int">index</a>)
        <span title="Unit" class="keyword">if</span> (<a href="#32215" title="(x$1: AnyRef)Boolean">e1</a> == <a href="#32188" title="Scopes.this.ScopeEntry">e</a>) {
          <a href="#27271" title="(i: Int,x: Scopes.this.ScopeEntry)Unit">hashtable</a>(<a href="#32214" title="Int">index</a>) = <a href="#32188" title="Scopes.this.ScopeEntry">e</a>.<a href="#26972" title="=&gt; Scopes.this.ScopeEntry">tail</a>
        } <span class="keyword">else</span> {
          <span title="Unit" class="keyword">while</span> (<a href="#32215" title="Scopes.this.ScopeEntry">e1</a>.<a href="#26972" title="(x$1: AnyRef)Boolean">tail</a> != <a href="#32188" title="Scopes.this.ScopeEntry">e</a>) <a href="#32215" title="Scopes.this.ScopeEntry">e1</a> = <a href="#32215" title="Scopes.this.ScopeEntry">e1</a>.<a href="#26972" title="=&gt; Scopes.this.ScopeEntry">tail</a>;
          <a href="#32215" title="Scopes.this.ScopeEntry">e1</a>.<a href="#26972" title="(x$1: Scopes.this.ScopeEntry)Unit">tail</a> = <a href="#32188" title="Scopes.this.ScopeEntry">e</a>.<a href="#26972" title="=&gt; Scopes.this.ScopeEntry">tail</a>
        }
      }
      <a href="#27274" title="(x$1: List[Scopes.this.Symbol])Unit">elemsCache</a> = <span title="Null(null)" class="keyword">null</span>
    }

    /** remove symbol */
    <span class="keyword">def</span> <a title="(sym: Scopes.this.Symbol)Unit" id="27296">unlink</a>(<a title="Scopes.this.Symbol" id="32266">sym</a>: <a href="Symbols.scala.html#26286" title="Scopes.this.Symbol">Symbol</a>) {
      <span class="keyword">var</span> <a title="Scopes.this.ScopeEntry" id="32268">e</a> = <a href="#27301" title="(name: Scopes.this.Name)Scopes.this.ScopeEntry">lookupEntry</a>(<a href="#32266" title="Scopes.this.Symbol">sym</a>.<a href="Symbols.scala.html#27147" title="=&gt; Scopes.this.Name">name</a>)
      <span title="Unit" class="keyword">while</span> (<a href="#32268" title="(x$1: AnyRef)Boolean">e</a> ne <span title="Null(null)" class="keyword">null</span>) <a href="#32273" title="()Unit">{</a>
        <span title="Unit" class="keyword">if</span> (<a href="#32268" title="Scopes.this.ScopeEntry">e</a>.<a href="#27816" title="(x$1: AnyRef)Boolean">sym</a> == <a href="#32266" title="Scopes.this.Symbol">sym</a>) <a href="#27295" title="(e: Scopes.this.ScopeEntry)Unit">unlink</a>(<a href="#32268" title="Scopes.this.ScopeEntry">e</a>);
        <a href="#32268" title="Scopes.this.ScopeEntry">e</a> = <a href="#27302" title="(entry: Scopes.this.ScopeEntry)Scopes.this.ScopeEntry">lookupNextEntry</a>(<a href="#32268" title="Scopes.this.ScopeEntry">e</a>)
      }
    }

    /** lookup a symbol
     *
     *  @param name ...
     *  @return     ...
     */
    <span class="keyword">def</span> <a title="(name: Scopes.this.Name)Scopes.this.Symbol" id="27297">lookup</a>(<a title="Scopes.this.Name" id="32004">name</a>: <a href="Names.scala.html#26214" title="Scopes.this.Name">Name</a>): <a href="Symbols.scala.html#26286" title="Scopes.this.Symbol">Symbol</a> = {
      <span class="keyword">val</span> <a title="Scopes.this.ScopeEntry" id="32296">e</a> = <a href="#27301" title="(name: Scopes.this.Name)Scopes.this.ScopeEntry">lookupEntry</a>(<a href="#32004" title="Scopes.this.Name">name</a>)
      <span title="Scopes.this.Symbol" class="keyword">if</span> (<a href="#32296" title="(x$1: AnyRef)Boolean">e</a> eq <span title="Null(null)" class="keyword">null</span>) <a href="Symbols.scala.html#26293" title="object Scopes.this.NoSymbol">NoSymbol</a> <span class="keyword">else</span> <a href="#32296" title="Scopes.this.ScopeEntry">e</a>.<a href="#27816" title="=&gt; Scopes.this.Symbol">sym</a>
    }

    /** Returns an iterator eidling every symbol with given name in this scope.
     */
    <span class="keyword">def</span> <a title="(name: Scopes.this.Name)Iterator[Scopes.this.Symbol]" id="27298">lookupAll</a>(<a title="Scopes.this.Name" id="32301">name</a>: <a href="Names.scala.html#26214" title="Scopes.this.Name">Name</a>): <span title="Iterator[Scopes.this.Symbol]">Iterator</span>[Symbol] = <a href="#32573" title="java.lang.Object with Iterator[Scopes.this.Symbol]{ ... }" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with Iterator[Scopes.this.Symbol]" id="32573">Iterator</a>[Symbol] {
      <span class="keyword">var</span> <a title="Scopes.this.ScopeEntry" id="32576">e</a> = <a href="#27301" title="(name: Scopes.this.Name)Scopes.this.ScopeEntry">lookupEntry</a>(<a href="#32301" title="Scopes.this.Name">name</a>)
      <span class="keyword">def</span> <a title="=&gt; Boolean" id="32578">hasNext</a>: <span title="Boolean">Boolean</span> = <a href="#32576" title="(x$1: AnyRef)Boolean">e</a> ne <span title="Null(null)" class="keyword">null</span>
      <span class="keyword">def</span> <a title="()Scopes.this.Symbol" id="32579">next</a>: <a href="Symbols.scala.html#26286" title="Scopes.this.Symbol">Symbol</a> = { <span class="keyword">val</span> <a title="Scopes.this.Symbol" id="32593">r</a> = <a href="#32576" title="=&gt; Scopes.this.ScopeEntry">e</a>.<a href="#27816" title="=&gt; Scopes.this.Symbol">sym</a>; <a href="#32576" title="(x$1: Scopes.this.ScopeEntry)Unit">e</a> = <a href="#27302" title="(entry: Scopes.this.ScopeEntry)Scopes.this.ScopeEntry">lookupNextEntry</a>(<a href="#32576" title="=&gt; Scopes.this.ScopeEntry">e</a>); <a href="#32593" title="Scopes.this.Symbol">r</a> }
    }

    /** Can lookup symbols and trace who the client is. 
     */
    <span class="keyword">def</span> <a title="(name: Scopes.this.Name)(from: Scopes.this.Symbol)Scopes.this.ScopeEntry" id="27299">lookupEntryWithContext</a>(<a title="Scopes.this.Name" id="30513">name</a> : <a href="Names.scala.html#26214" title="Scopes.this.Name">Name</a>)(<a title="Scopes.this.Symbol" id="30514">from</a> : <a href="Symbols.scala.html#26286" title="Scopes.this.Symbol">Symbol</a>) : <a href="#26122" title="Scopes.this.ScopeEntry">ScopeEntry</a> = <a href="#27301" title="(name: Scopes.this.Name)Scopes.this.ScopeEntry">lookupEntry</a>(<a href="#30513" title="Scopes.this.Name">name</a>)
    <span class="keyword">def</span> <a title="(name: Scopes.this.Name)(from: Scopes.this.Symbol)Scopes.this.Symbol" id="27300">lookupWithContext</a>(<a title="Scopes.this.Name" id="30558">name</a> : <a href="Names.scala.html#26214" title="Scopes.this.Name">Name</a>)(<a title="Scopes.this.Symbol" id="30559">from</a> : <a href="Symbols.scala.html#26286" title="Scopes.this.Symbol">Symbol</a>) : <a href="Symbols.scala.html#26286" title="Scopes.this.Symbol">Symbol</a> = <a href="#27297" title="(name: Scopes.this.Name)Scopes.this.Symbol">lookup</a>(<a href="#30558" title="Scopes.this.Name">name</a>)

    /** lookup a symbol entry matching given name.
     *  @note from Martin: I believe this is a hotspot or will be one
     *  in future versions of the type system. I have reverted the previous
     *  change to use iterators as too costly.
     */
    <span class="keyword">def</span> <a title="(name: Scopes.this.Name)Scopes.this.ScopeEntry" id="27301">lookupEntry</a>(<a title="Scopes.this.Name" id="32269">name</a>: <a href="Names.scala.html#26214" title="Scopes.this.Name">Name</a>): <a href="#26122" title="Scopes.this.ScopeEntry">ScopeEntry</a> = {
      <span class="keyword">var</span> <a title="Scopes.this.ScopeEntry" id="32604">e</a>: <a href="#26122" title="Scopes.this.ScopeEntry">ScopeEntry</a> = <span title="Null(null)" class="keyword">null</span>
      <span title="Unit" class="keyword">if</span> (<a href="#27271" title="(x$1: AnyRef)Boolean">hashtable</a> ne <span title="Null(null)" class="keyword">null</span>) {
        <a href="#32604" title="Scopes.this.ScopeEntry">e</a> = <a href="#27271" title="(i: Int)Scopes.this.ScopeEntry">hashtable</a>(<a href="#32269" title="Scopes.this.Name">name</a>.<a href="Names.scala.html#28379" title="(x$1: Int)Int">start</a> &amp; <a href="#27278" title="=&gt; Int">HASHMASK</a>)
        <span title="Unit" class="keyword">while</span> (<span title="(x$1: Boolean)Boolean">(</span><a href="#32604" title="(x$1: AnyRef)Boolean">e</a> ne <span title="Null(null)" class="keyword">null</span>) &amp;&amp; <a href="#32604" title="Scopes.this.ScopeEntry">e</a>.<a href="#27816" title="=&gt; Scopes.this.Symbol">sym</a>.<a href="Symbols.scala.html#27147" title="(x$1: AnyRef)Boolean">name</a> != <a href="#32269" title="Scopes.this.Name">name</a>) {
          <a href="#32604" title="Scopes.this.ScopeEntry">e</a> = <a href="#32604" title="Scopes.this.ScopeEntry">e</a>.<a href="#26972" title="=&gt; Scopes.this.ScopeEntry">tail</a>
        }
      } <span class="keyword">else</span> {
        <a href="#32604" title="Scopes.this.ScopeEntry">e</a> = <a href="#27265" title="=&gt; Scopes.this.ScopeEntry">elems</a>
        <span title="Unit" class="keyword">while</span> (<span title="(x$1: Boolean)Boolean">(</span><a href="#32604" title="(x$1: AnyRef)Boolean">e</a> ne <span title="Null(null)" class="keyword">null</span>) &amp;&amp; <a href="#32604" title="Scopes.this.ScopeEntry">e</a>.<a href="#27816" title="=&gt; Scopes.this.Symbol">sym</a>.<a href="Symbols.scala.html#27147" title="(x$1: AnyRef)Boolean">name</a> != <a href="#32269" title="Scopes.this.Name">name</a>) {
          <a href="#32604" title="Scopes.this.ScopeEntry">e</a> = <a href="#32604" title="Scopes.this.ScopeEntry">e</a>.<a href="#26975" title="=&gt; Scopes.this.ScopeEntry">next</a>
        }
      }
      <a href="#32604" title="Scopes.this.ScopeEntry">e</a>
    }

    /** lookup next entry with same name as this one 
     *  @note from Martin: I believe this is a hotspot or will be one
     *  in future versions of the type system. I have reverted the previous
     *  change to use iterators as too costly.
     */
    <span class="keyword">def</span> <a title="(entry: Scopes.this.ScopeEntry)Scopes.this.ScopeEntry" id="27302">lookupNextEntry</a>(<a title="Scopes.this.ScopeEntry" id="32290">entry</a>: <a href="#26122" title="Scopes.this.ScopeEntry">ScopeEntry</a>): <a href="#26122" title="Scopes.this.ScopeEntry">ScopeEntry</a> = {      
      <span class="keyword">var</span> <a title="Scopes.this.ScopeEntry" id="32655">e</a> = <a href="#32290" title="Scopes.this.ScopeEntry">entry</a>
      <span title="Unit" class="keyword">if</span> (<a href="#27271" title="(x$1: AnyRef)Boolean">hashtable</a> ne <span title="Null(null)" class="keyword">null</span>)
        <a href="#32658" title="Unit" class="keyword">do</a> { <a href="#32655" title="Scopes.this.ScopeEntry">e</a> = <a href="#32655" title="Scopes.this.ScopeEntry">e</a>.<a href="#26972" title="=&gt; Scopes.this.ScopeEntry">tail</a> } <span class="keyword">while</span> (<span title="(x$1: Boolean)Boolean">(</span><a href="#32655" title="(x$1: AnyRef)Boolean">e</a> ne <span title="Null(null)" class="keyword">null</span>) &amp;&amp; <a href="#32655" title="Scopes.this.ScopeEntry">e</a>.<a href="#27816" title="=&gt; Scopes.this.Symbol">sym</a>.<a href="Symbols.scala.html#27147" title="(x$1: AnyRef)Boolean">name</a> != <a href="#32290" title="Scopes.this.ScopeEntry">entry</a>.<a href="#27816" title="=&gt; Scopes.this.Symbol">sym</a>.<a href="Symbols.scala.html#27147" title="=&gt; Scopes.this.Name">name</a>)
      <span class="keyword">else</span>
        <a href="#32672" title="Unit" class="keyword">do</a> { <a href="#32655" title="Scopes.this.ScopeEntry">e</a> = <a href="#32655" title="Scopes.this.ScopeEntry">e</a>.<a href="#26975" title="=&gt; Scopes.this.ScopeEntry">next</a> } <span class="keyword">while</span> (<span title="(x$1: Boolean)Boolean">(</span><a href="#32655" title="(x$1: AnyRef)Boolean">e</a> ne <span title="Null(null)" class="keyword">null</span>) &amp;&amp; <a href="#32655" title="Scopes.this.ScopeEntry">e</a>.<a href="#27816" title="=&gt; Scopes.this.Symbol">sym</a>.<a href="Symbols.scala.html#27147" title="(x$1: AnyRef)Boolean">name</a> != <a href="#32290" title="Scopes.this.ScopeEntry">entry</a>.<a href="#27816" title="=&gt; Scopes.this.Symbol">sym</a>.<a href="Symbols.scala.html#27147" title="=&gt; Scopes.this.Name">name</a>);
      <a href="#32655" title="Scopes.this.ScopeEntry">e</a>
    }

    /** Return all symbols as a list in the order they were entered in this scope.
     */
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; List[Scopes.this.Symbol]" id="27303">toList</a>: <span title="List[Scopes.this.Symbol]">List</span>[Symbol] = {
      <span title="Unit" class="keyword">if</span> (<a href="#27274" title="(x$1: AnyRef)Boolean">elemsCache</a> eq <span title="Null(null)" class="keyword">null</span>) {
        <a href="#27274" title="(x$1: List[Scopes.this.Symbol])Unit">elemsCache</a> = <a title="object Nil" id="7700">Nil</a>
        <span class="keyword">var</span> <a title="Scopes.this.ScopeEntry" id="32688">e</a> = <a href="#27265" title="=&gt; Scopes.this.ScopeEntry">elems</a>
        <span title="Unit" class="keyword">while</span> (<span title="(x$1: Boolean)Boolean">(</span><a href="#32688" title="(x$1: AnyRef)Boolean">e</a> ne <span title="Null(null)" class="keyword">null</span>) &amp;&amp; <a href="#32688" title="Scopes.this.ScopeEntry">e</a>.<a href="#27817" title="(x$1: AnyRef)Boolean">owner</a> == <a href="#26171" title="Scopes.this.Scope" class="keyword">this</a>) <a href="#32691" title="()Unit">{</a>
          <a href="#27274" title="(x$1: List[Scopes.this.Symbol])Unit">elemsCache</a> = <a href="#32688" title="Scopes.this.ScopeEntry">e</a>.<a href="#27816" title="=&gt; Scopes.this.Symbol">sym</a> <a href="#32703" title="Scopes.this.Symbol">::</a> <a href="#27274" title="(x: Scopes.this.Symbol)List[Scopes.this.Symbol]" id="24417">elemsCache</a>
          <a href="#32688" title="Scopes.this.ScopeEntry">e</a> = <a href="#32688" title="Scopes.this.ScopeEntry">e</a>.<a href="#26975" title="=&gt; Scopes.this.ScopeEntry">next</a>
        }
      }
      <a href="#27274" title="=&gt; List[Scopes.this.Symbol]">elemsCache</a>
    }

    /** Return all symbols as an interator in the order they were entered in this scope.
     */
    <span class="keyword">def</span> <a title="=&gt; Iterator[Scopes.this.Symbol]" id="27304">iterator</a>: <span title="Iterator[Scopes.this.Symbol]">Iterator</span>[Symbol] = <a href="#27303" title="=&gt; List[Scopes.this.Symbol]">toList</a>.<a title="=&gt; Iterator[Scopes.this.Symbol]" id="29117">iterator</a>
    
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="[U](p: (Scopes.this.Symbol) =&gt; U)Unit" id="27305">foreach</a>[<a title="&gt;: Nothing &lt;: Any" id="27307">U</a><a id="1">]</a>(<a title="(Scopes.this.Symbol) =&gt; U" id="32718">p</a>: Symbol =&gt; U): <span title="Unit">Unit</span> = <a href="#27303" title="(f: (Scopes.this.Symbol) =&gt; U)Unit">toList</a> foreach <a href="#32718" title="(Scopes.this.Symbol) =&gt; U">p</a>

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(p: (Scopes.this.Symbol) =&gt; Boolean)Scopes.this.Scope" id="27308">filter</a>(<a title="(Scopes.this.Symbol) =&gt; Boolean" id="32749">p</a>: Symbol =&gt; Boolean): <a href="#26171" title="Scopes.this.Scope">Scope</a> =
      <span title="Scopes.this.Scope" class="keyword">if</span> (<a title="=&gt; Boolean" id="2226">!</a>(<a href="#27303" title="(p: (Scopes.this.Symbol) =&gt; Boolean)Boolean" id="29121">toList</a> forall <a href="#32749" title="(Scopes.this.Symbol) =&gt; Boolean">p</a>)) <a href="#26165" title="(decls: List[Scopes.this.Symbol])Scopes.this.Scope">newScope</a>(<a href="#27303" title="(p: (Scopes.this.Symbol) =&gt; Boolean)List[Scopes.this.Symbol]" id="25412">toList</a> filter <a href="#32749" title="(Scopes.this.Symbol) =&gt; Boolean">p</a>) <span class="keyword">else</span> <a href="#26171" title="Scopes.this.Scope" class="keyword">this</a>

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(start: String,sep: String,end: String)String" id="27309">mkString</a>(<a title="String" id="32768">start</a>: <span title="String">String</span>, <a title="String" id="32769">sep</a>: <span title="String">String</span>, <a title="String" id="32770">end</a>: <span title="String">String</span>) =
      <a href="#27303" title="=&gt; List[Scopes.this.Symbol]">toList</a>.<a title="(f: (Scopes.this.Symbol) =&gt; String)(implicit bf: scala.collection.generic.BuilderFactory[String,List[String],List[Scopes.this.Symbol]])List[String]" id="25402">map</a><a title="scala.collection.generic.BuilderFactory[String,List[String],List#Coll]" id="7415">(</a><a href="#32783" title="Scopes.this.Symbol">_</a>.<a href="Symbols.scala.html#27255" title="=&gt; String">defString</a>).<a title="(start: String,sep: String,end: String)String" id="25519">mkString</a>(<a href="#32768" title="String">start</a>, <a href="#32769" title="String">sep</a>, <a href="#32770" title="String">end</a>)

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="27310">toString</a>(): <span title="String">String</span> = <a href="#27309" title="(start: String,sep: String,end: String)String">mkString</a>(<span title="java.lang.String(&quot;{\012  &quot;)" class="string">&quot;{\n  &quot;</span>, <span title="java.lang.String(&quot;;\012  &quot;)" class="string">&quot;;\n  &quot;</span>, <span title="java.lang.String(&quot;\012}&quot;)" class="string">&quot;\n}&quot;</span>)

    /** Return the nesting level of this scope, i.e. the number of times this scope
     *  was nested in another */
    <span class="keyword">def</span> <a title="=&gt; Int" id="27311">nestingLevel</a> = <a href="#27268" title="=&gt; Int">nestinglevel</a>
    
    <span class="keyword">def</span> <a title="(name: Scopes.this.Name)Unit" id="27312">invalidate</a>(<a title="Scopes.this.Name" id="32965">name</a> : <a href="Names.scala.html#26214" title="Scopes.this.Name">Name</a>) = <span title="Unit">{</span>}
  }

  /** The empty scope (immutable).
   */
  <span class="keyword">object</span> <a title="object Scopes.this.EmptyScope" id="26172">EmptyScope</a> <a href="#27282" title="ScalaObject" class="keyword">extends</a> <a href="#26171" title="Scopes.this.Scope">Scope</a> {
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(e: Scopes.this.ScopeEntry)Unit" id="32969">enter</a>(<a title="Scopes.this.ScopeEntry" id="32988">e</a>: <a href="#26122" title="Scopes.this.ScopeEntry">ScopeEntry</a>) {
      <span title="Nothing" class="keyword">throw</span> <a title="(x$1: java.lang.String)java.lang.Error" id="26070" class="keyword">new</a> <a title="java.lang.Error" id="7890">Error</a>(<span title="java.lang.String(&quot;EmptyScope.enter&quot;)" class="string">&quot;EmptyScope.enter&quot;</span>)
    }
  }

  /** The error scope.
   */
  <span class="keyword">class</span> <a title="class ErrorScope extends Scopes.this.Scope with ScalaObject" id="26174">ErrorScope</a><span title="ScalaObject">(</span><a title="Scopes.this.Symbol" id="33002">owner</a>: <a href="Symbols.scala.html#26286" title="Scopes.this.Symbol">Symbol</a>) <span class="keyword">extends</span> <a href="#26171" title="Scopes.this.Scope">Scope</a>(<span title="Null(null)" class="keyword">null</span>: <a href="#26122" title="Scopes.this.ScopeEntry">ScopeEntry</a>) {
    /* The following method was intended to be here,
     * but it was written (in two different iterations!) so that
     * it was actually a no-op. That's why I am leaving it comment-out
     * for now.
    override def lookupEntry(name: Name): ScopeEntry = {
      def errorSym = 
        if (name.isTermName) owner newErrorValue name
        else owner newErrorClass name

       super.lookupEntry(name) match {
        case null =&gt; enter(errorSym); lookupEntry(name)
        case e    =&gt; e
      }
    }
     */
  }
}


        </pre>
    </body>
</html>