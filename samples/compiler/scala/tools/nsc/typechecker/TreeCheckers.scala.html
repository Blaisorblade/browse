<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/typechecker/TreeCheckers.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style">
    </head>
    <body>
        <pre>
/* NSC -- new Scala compiler
 * Copyright 2005-2009 LAMP/EPFL
 * @author  Martin Odersky
 */
// $Id: TreeCheckers.scala 18387 2009-07-24 15:28:37Z odersky $

<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> typechecker

<span class="keyword">import</span> scala.tools.nsc.symtab.Flags._
<span class="keyword">import</span> scala.tools.nsc.util.{Position, NoPosition}

<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class TreeCheckers extends java.lang.Object with scala.tools.nsc.typechecker.Analyzer with ScalaObject" id="16896">TreeCheckers</a> <span title="ScalaObject" class="keyword">extends</span> <a href="Analyzer.scala.html#17208" title="scala.tools.nsc.typechecker.Analyzer">Analyzer</a> {

  <span class="keyword">import</span> global._

  <span class="keyword">val</span> <a title="scala.collection.mutable.HashMap[TreeCheckers.this.global.Tree,TreeCheckers.this.global.Type]" id="130366">tpeOfTree</a> = <span title="scala.collection.mutable.HashMap[TreeCheckers.this.global.Tree,TreeCheckers.this.global.Type]" class="keyword">new</span> scala.collection.mutable.<a title="scala.collection.mutable.HashMap[TreeCheckers.this.global.Tree,TreeCheckers.this.global.Type]" id="25113">HashMap</a>[Tree, Type]

  <span class="keyword">def</span> <a title="=&gt; Unit" id="130368">checkTrees</a> {
    <span title="Unit" class="keyword">if</span> (<a href="../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../Settings.scala.html#37265" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">verbose</a>.<a href="../Settings.scala.html#37988" title="=&gt; Boolean">value</a>)
      <span title="object Console">Console</span>.<span title="(x: Any)Unit">println</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;[consistency check at the beginning of phase &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="../symtab/SymbolTable.scala.html#26247" title="=&gt; scala.tools.nsc.Phase">phase</a> + <span title="java.lang.String(&quot;]&quot;)" class="string">&quot;]&quot;</span>)
    <span class="keyword">for</span> (<a title="TreeCheckers.this.global.CompilationUnit" id="130393">unit</a> &lt;- <a href="../Global.scala.html#39408" title="=&gt; TreeCheckers.this.global.Run">currentRun</a>.<a href="../Global.scala.html#40444" title="(f: (TreeCheckers.this.global.CompilationUnit) =&gt; Unit)Unit" id="32359">units</a>) <a href="#130369" title="(unit: TreeCheckers.this.global.CompilationUnit)Unit">check</a>(<a href="#130393" title="TreeCheckers.this.global.CompilationUnit">unit</a>)
  }

  <span class="keyword">def</span> <a title="(unit: TreeCheckers.this.global.CompilationUnit)Unit" id="130369">check</a>(<a title="TreeCheckers.this.global.CompilationUnit" id="130394">unit</a>: <a href="../CompilationUnits.scala.html#39428" title="TreeCheckers.this.global.CompilationUnit">CompilationUnit</a>) {
    <a href="../Global.scala.html#39298" title="(msg: String)Unit">informProgress</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;checking &quot;</span>+<a href="#130394" title="TreeCheckers.this.global.CompilationUnit">unit</a>)
    <span class="keyword">val</span> <a title="TreeCheckers.this.Context" id="130401">context</a> = <a href="Contexts.scala.html#40050" title="(unit: TreeCheckers.this.global.CompilationUnit)TreeCheckers.this.Context">rootContext</a>(<a href="#130394" title="TreeCheckers.this.global.CompilationUnit">unit</a>)
    <a href="#130401" title="TreeCheckers.this.Context">context</a>.<a href="Contexts.scala.html#48670" title="(x$1: Boolean)Unit">checking</a> = <span title="Boolean(true)" class="keyword">true</span>
    <a href="#130366" title="=&gt; scala.collection.mutable.HashMap[TreeCheckers.this.global.Tree,TreeCheckers.this.global.Type]">tpeOfTree</a>.<a title="()Unit" id="44610">clear</a>
    <span class="keyword">val</span> <a title="TreeCheckers.this.TreeChecker" id="130402">checker</a> = <span title="TreeCheckers.this.TreeChecker" class="keyword">new</span> <a href="#130371" title="TreeCheckers.this.TreeChecker">TreeChecker</a>(<a href="#130401" title="TreeCheckers.this.Context">context</a>)

    <span class="keyword">val</span> <a title="TreeCheckers.this.global.CompilationUnit" id="130403">unit0</a> = <a href="../Global.scala.html#39408" title="=&gt; TreeCheckers.this.global.Run">currentRun</a>.<a href="../Global.scala.html#40397" title="=&gt; TreeCheckers.this.global.CompilationUnit">currentUnit</a>
    <a href="../Global.scala.html#39408" title="=&gt; TreeCheckers.this.global.Run">currentRun</a>.<a href="../Global.scala.html#40398" title="(x$1: TreeCheckers.this.global.CompilationUnit)Unit">currentUnit</a> = <a href="#130394" title="TreeCheckers.this.global.CompilationUnit">unit</a>
    <a href="#130402" title="TreeCheckers.this.TreeChecker">checker</a>.<a href="#130428" title="object checker.precheck">precheck</a>.<a href="#130440" title="(tree: TreeCheckers.this.global.Tree)Unit">traverse</a>(<a href="#130394" title="TreeCheckers.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#45669" title="=&gt; TreeCheckers.this.global.Tree">body</a>)
    <a href="#130402" title="TreeCheckers.this.TreeChecker">checker</a>.<a href="Typers.scala.html#42872" title="(tree: TreeCheckers.this.global.Tree)TreeCheckers.this.global.Tree">typed</a>(<a href="#130394" title="TreeCheckers.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#45669" title="=&gt; TreeCheckers.this.global.Tree">body</a>)
    <a href="#130402" title="TreeCheckers.this.TreeChecker">checker</a>.<a href="#130430" title="object checker.postcheck">postcheck</a>.<a href="#130473" title="(tree: TreeCheckers.this.global.Tree)Unit">traverse</a>(<a href="#130394" title="TreeCheckers.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#45669" title="=&gt; TreeCheckers.this.global.Tree">body</a>)
    <a href="../Global.scala.html#39408" title="=&gt; TreeCheckers.this.global.Run">currentRun</a>.<a href="../Global.scala.html#40415" title="=&gt; Unit">advanceUnit</a>
    <span title="(assertion: Boolean)Unit">assert</span>(<a href="../Global.scala.html#39408" title="=&gt; TreeCheckers.this.global.Run">currentRun</a>.<a href="../Global.scala.html#40397" title="(x$1: AnyRef)Boolean">currentUnit</a> == <a href="#130394" title="TreeCheckers.this.global.CompilationUnit">unit</a>)
    <a href="../Global.scala.html#39408" title="=&gt; TreeCheckers.this.global.Run">currentRun</a>.<a href="../Global.scala.html#40398" title="(x$1: TreeCheckers.this.global.CompilationUnit)Unit">currentUnit</a> = <a href="#130403" title="TreeCheckers.this.global.CompilationUnit">unit0</a>
  }

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(context: TreeCheckers.this.Context)TreeCheckers.this.Typer" id="130370">newTyper</a>(<a title="TreeCheckers.this.Context" id="130496">context</a>: <a href="Contexts.scala.html#40053" title="TreeCheckers.this.Context">Context</a>): <a href="Typers.scala.html#40153" title="TreeCheckers.this.Typer">Typer</a> = <span title="TreeCheckers.this.TreeChecker" class="keyword">new</span> <a href="#130371" title="TreeCheckers.this.TreeChecker">TreeChecker</a>(<a href="#130496" title="TreeCheckers.this.Context">context</a>)

  <span class="keyword">class</span> <a title="class TreeChecker extends TreeCheckers.this.Typer with ScalaObject" id="130371">TreeChecker</a><span title="ScalaObject">(</span><a title="TreeCheckers.this.Context" id="130432">context0</a>: <a href="Contexts.scala.html#40053" title="TreeCheckers.this.Context">Context</a>) <span class="keyword">extends</span> <a href="Typers.scala.html#40153" title="TreeCheckers.this.Typer">Typer</a>(<a href="#130432" title="TreeCheckers.this.Context">context0</a>) {

    <span class="keyword">import</span> infer._

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: TreeCheckers.this.global.Tree,mode: Int,pt: TreeCheckers.this.global.Type)TreeCheckers.this.global.Tree" id="130427">typed</a>(<a title="TreeCheckers.this.global.Tree" id="130447">tree</a>: <a href="../ast/Trees.scala.html#26752" title="TreeCheckers.this.global.Tree">Tree</a>, <a title="Int" id="130448">mode</a>: <a title="Int" id="2198">Int</a>, <a title="TreeCheckers.this.global.Type" id="130449">pt</a>: <a href="../symtab/Types.scala.html#26364" title="TreeCheckers.this.global.Type">Type</a>): <a href="../ast/Trees.scala.html#26752" title="TreeCheckers.this.global.Tree">Tree</a> = {
      <a href="#130447" title="TreeCheckers.this.global.Tree">tree</a> <span title="Unit" class="keyword">match</span> {
        <span title="Unit" class="keyword">case</span> <a href="../ast/Trees.scala.html#26761" title="object TreeCheckers.this.global.EmptyTree">EmptyTree</a> | TypeTree() =&gt;
          ;
        <span title="Unit" class="keyword">case</span> _ =&gt;
          <span class="keyword">try</span> {
            <span title="Unit" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="#130366" title="=&gt; scala.collection.mutable.HashMap[TreeCheckers.this.global.Tree,TreeCheckers.this.global.Type]">tpeOfTree</a>.<a title="(key: TreeCheckers.this.global.Tree)Boolean" id="44678">contains</a>(<a href="#130447" title="TreeCheckers.this.global.Tree">tree</a>)) {
              <a href="#130366" title="=&gt; scala.collection.mutable.HashMap[TreeCheckers.this.global.Tree,TreeCheckers.this.global.Type]">tpeOfTree</a>.<a title="(key: TreeCheckers.this.global.Tree,value: TreeCheckers.this.global.Type)Unit" id="44618">update</a>(<a href="#130447" title="TreeCheckers.this.global.Tree">tree</a>, <a href="#130447" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; TreeCheckers.this.global.Type">tpe</a>)
              <a href="#130447" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29550" title="(t: TreeCheckers.this.global.Type)Unit">tpe</a> = <span title="Null(null)" class="keyword">null</span>
            }
            <span class="keyword">val</span> <a title="TreeCheckers.this.global.Tree" id="130510">newtree</a> = <span class="keyword">super</span>.<a href="Typers.scala.html#42869" title="(tree: TreeCheckers.this.global.Tree,mode: Int,pt: TreeCheckers.this.global.Type)TreeCheckers.this.global.Tree">typed</a>(<a href="#130447" title="TreeCheckers.this.global.Tree">tree</a>, <a href="#130448" title="Int">mode</a>, <a href="#130449" title="TreeCheckers.this.global.Type">pt</a>);
            <span title="Unit" class="keyword">if</span> (<span title="(x$1: Boolean)Boolean">(</span><a href="#130510" title="(x$1: AnyRef)Boolean" id="6613">newtree</a> ne <a href="#130447" title="TreeCheckers.this.global.Tree">tree</a>) &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#130510" title="TreeCheckers.this.global.Tree">newtree</a>.<span title="[T0]Boolean">isInstanceOf</span><span title="Boolean">[</span><a href="../ast/Trees.scala.html#26896" title="TreeCheckers.this.global.Literal">Literal</a>])
              <a href="Infer.scala.html#48993" title="(pos: scala.tools.nsc.util.Position,msg: String)Unit">error</a>(<a href="#130447" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29547" title="=&gt; scala.tools.nsc.util.Position">pos</a>, <span title="(x$1: Any)java.lang.String" class="string">&quot;trees differ\n old: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#130447" title="TreeCheckers.this.global.Tree">tree</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; [&quot;)" class="string">&quot; [&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#130447" title="TreeCheckers.this.global.Tree">tree</a>.<span title="()java.lang.Class[_]">getClass</span>() <span title="(x$1: Any)java.lang.String">+</span>
                    <span title="java.lang.String(&quot;]\012 new: &quot;)" class="string">&quot;]\n new: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#130510" title="TreeCheckers.this.global.Tree">newtree</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; [&quot;)" class="string">&quot; [&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#130510" title="TreeCheckers.this.global.Tree">newtree</a>.<span title="()java.lang.Class[_]">getClass</span>() + <span title="java.lang.String(&quot;]&quot;)" class="string">&quot;]&quot;</span>)
          } <span class="keyword">catch</span> {
            <span title="Nothing" class="keyword">case</span> <a title="java.lang.Throwable" id="130581">ex</a>: <span title="Throwable">Throwable</span> =&gt;
              <span title="object Console">Console</span>.<span title="(x: Any)Unit">println</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;exception while typing &quot;</span>+<a href="#130447" title="TreeCheckers.this.global.Tree">tree</a>)
              <span title="Nothing" class="keyword">throw</span> <a href="#130581" title="java.lang.Throwable">ex</a>
          }
      }
      <a href="#130447" title="TreeCheckers.this.global.Tree">tree</a>
    }

    <span class="keyword">object</span> <a title="object TreeChecker.this.precheck" id="130428">precheck</a> <span title="ScalaObject" class="keyword">extends</span> <a href="../ast/Trees.scala.html#26933" title="TreeCheckers.this.global.Traverser">Traverser</a> {
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: TreeCheckers.this.global.Tree)Unit" id="130440">traverse</a>(<a title="TreeCheckers.this.global.Tree" id="130441">tree</a>: <a href="../ast/Trees.scala.html#26752" title="TreeCheckers.this.global.Tree">Tree</a>) {
        <span class="keyword">try</span> {
          <a href="#130441" title="TreeCheckers.this.global.Tree">tree</a> <span title="Unit" class="keyword">match</span> {
            <span title="Unit" class="keyword">case</span> DefDef(_, _, _, _, _, _) =&gt;
              <span title="Unit" class="keyword">if</span> (<a href="#130441" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; TreeCheckers.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27155" title="(mask: Long)Boolean">hasFlag</a><span title="(x$1: Boolean)Boolean">(</span><span title="Long(134217728L)">ACCESSOR</span>) <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> 
                  <span title="=&gt; Boolean">!</span><a href="#130441" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; TreeCheckers.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27112" title="=&gt; Boolean">isDeferred</a> &amp;&amp;
                  <span title="=&gt; Boolean">!</span><a href="#130441" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; TreeCheckers.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; TreeCheckers.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30379" title="=&gt; TreeCheckers.this.global.Type">resultType</a>.<span title="[T0]Boolean">isInstanceOf</span><span title="Boolean">[</span><a href="../symtab/Types.scala.html#26410" title="TreeCheckers.this.global.ConstantType">ConstantType</a>]) {
                <span title="(assertion: Boolean,message: =&gt; Any)Unit">assert</span>(<a href="#130441" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; TreeCheckers.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27199" title="(x$1: AnyRef)Boolean">accessed</a> != <a href="../symtab/Symbols.scala.html#26293" title="object TreeCheckers.this.global.NoSymbol">NoSymbol</a>, <a href="#130441" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; TreeCheckers.this.global.Symbol">symbol</a>)
                <span title="(assertion: Boolean)Unit">assert</span>(<a href="#130441" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; TreeCheckers.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27199" title="=&gt; TreeCheckers.this.global.Symbol">accessed</a>.<a href="../symtab/Symbols.scala.html#27226" title="(base: TreeCheckers.this.global.Symbol)TreeCheckers.this.global.Symbol">getter</a><span title="(x$1: AnyRef)Boolean">(</span><a href="#130441" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; TreeCheckers.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27142" title="=&gt; TreeCheckers.this.global.Symbol">owner</a>) <a title="(x$1: Boolean)Boolean" id="2231">==</a> <a href="#130441" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; TreeCheckers.this.global.Symbol">symbol</a> ||
                       <a href="#130441" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; TreeCheckers.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27199" title="=&gt; TreeCheckers.this.global.Symbol">accessed</a>.<a href="../symtab/Symbols.scala.html#27227" title="(base: TreeCheckers.this.global.Symbol)TreeCheckers.this.global.Symbol">setter</a><span title="(x$1: AnyRef)Boolean">(</span><a href="#130441" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; TreeCheckers.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27142" title="=&gt; TreeCheckers.this.global.Symbol">owner</a>) == <a href="#130441" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; TreeCheckers.this.global.Symbol">symbol</a>)
              }
            <span title="Unit" class="keyword">case</span> ValDef(_, _, _, _) =&gt;
              <span title="Unit" class="keyword">if</span> (<a href="#130441" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; TreeCheckers.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27066" title="=&gt; Boolean">hasGetter</a>) {
                <span title="(assertion: Boolean,message: =&gt; Any)Unit">assert</span>(<a href="#130441" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; TreeCheckers.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27226" title="(base: TreeCheckers.this.global.Symbol)TreeCheckers.this.global.Symbol">getter</a><span title="(x$1: AnyRef)Boolean">(</span><a href="#130441" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; TreeCheckers.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27142" title="=&gt; TreeCheckers.this.global.Symbol">owner</a>) != <a href="../symtab/Symbols.scala.html#26293" title="object TreeCheckers.this.global.NoSymbol">NoSymbol</a>, <a href="#130441" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; TreeCheckers.this.global.Symbol">symbol</a>)
              }
            <span title="Unit" class="keyword">case</span> Apply(_, <a title="List[TreeCheckers.this.global.Tree]" id="130686">args</a>) =&gt;
              <span title="(assertion: Boolean)Unit">assert</span>(<a href="#130686" title="(p: (TreeCheckers.this.global.Tree) =&gt; Boolean)Boolean" id="29121">args</a> forall (<a href="../ast/Trees.scala.html#26761" title="object TreeCheckers.this.global.EmptyTree">EmptyTree</a> <a href="#130697" title="(x$1: AnyRef)Boolean">!=</a>))
            <span title="Unit" class="keyword">case</span> Select(_, _) =&gt;
              <span title="(assertion: Boolean,message: =&gt; Any)Unit">assert</span>(<a href="#130441" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="(x$1: AnyRef)Boolean">symbol</a> != <a href="../symtab/Symbols.scala.html#26293" title="object TreeCheckers.this.global.NoSymbol">NoSymbol</a>, <a href="#130441" title="TreeCheckers.this.global.Tree">tree</a>)
            <span title="Unit" class="keyword">case</span> This(_) =&gt;
              <span title="Unit" class="keyword">if</span> (<span title="=&gt; Boolean">!</span>(<a href="#130441" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; TreeCheckers.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27125" title="(x$1: Boolean)Boolean">isStatic</a> &amp;&amp; (<a href="#130441" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../symtab/Symbols.scala.html#27155" title="(mask: Long)Boolean">symbol</a> hasFlag <span title="Long(256L)">MODULE</span>))) {
                <span class="keyword">var</span> <a title="TreeCheckers.this.global.Symbol" id="130738">o</a> = <a href="../ast/Trees.scala.html#71106" title="=&gt; TreeCheckers.this.global.Symbol">currentOwner</a>
                <span title="Unit" class="keyword">while</span> (<a href="#130738" title="(x$1: AnyRef)Boolean">o</a> != <a href="#130441" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; TreeCheckers.this.global.Symbol">symbol</a>) <a href="#130739" title="()Unit">{</a>
                  <a href="#130738" title="TreeCheckers.this.global.Symbol">o</a> = <a href="#130738" title="TreeCheckers.this.global.Symbol">o</a>.<a href="../symtab/Symbols.scala.html#27142" title="=&gt; TreeCheckers.this.global.Symbol">owner</a>
                  <span title="Unit" class="keyword">if</span> (<a href="#130738" title="(x$1: AnyRef)Boolean">o</a> == <a href="../symtab/Symbols.scala.html#26293" title="object TreeCheckers.this.global.NoSymbol">NoSymbol</a>) {
                    <a href="Infer.scala.html#48993" title="(pos: scala.tools.nsc.util.Position,msg: String)Unit">error</a>(<a href="#130441" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29547" title="=&gt; scala.tools.nsc.util.Position">pos</a>, <span title="(x$1: Any)java.lang.String" class="string">&quot;tree symbol &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#130441" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; TreeCheckers.this.global.Symbol">symbol</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot; does not point to enclosing class; tree = &quot;)" class="string">&quot; does not point to enclosing class; tree = &quot;</span>+<a href="#130441" title="TreeCheckers.this.global.Tree">tree</a>)
                    <span title="Nothing" class="keyword">return</span>
                  }
                }
              }
            <span title="Unit" class="keyword">case</span> _ =&gt;
          }
          <span title="Unit" class="keyword">if</span> (<a href="#130441" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29547" title="(x$1: AnyRef)Boolean">pos</a> <span title="(x$1: Boolean)Boolean">==</span> <a href="../util/Position.scala.html#14615" title="object scala.tools.nsc.util.NoPosition">NoPosition</a> &amp;&amp; <a href="#130441" title="(x$1: AnyRef)Boolean">tree</a> != <a href="../ast/Trees.scala.html#26761" title="object TreeCheckers.this.global.EmptyTree">EmptyTree</a>) {
            <a href="Infer.scala.html#48993" title="(pos: scala.tools.nsc.util.Position,msg: String)Unit">error</a>(<a href="#130441" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29547" title="=&gt; scala.tools.nsc.util.Position">pos</a>, <span title="(x$1: Any)java.lang.String" class="string">&quot;tree without position: &quot;</span> + <a href="#130441" title="TreeCheckers.this.global.Tree">tree</a>)
          } <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<span title="(x$1: Boolean)Boolean">(</span><a href="#130441" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29549" title="(x$1: AnyRef)Boolean" id="6611">tpe</a> eq <span title="Null(null)" class="keyword">null</span>) &amp;&amp; <a href="../symtab/SymbolTable.scala.html#26247" title="=&gt; scala.tools.nsc.Phase">phase</a>.<a href="../Phase.scala.html#23291" title="(x$1: Int)Boolean" id="2983">id</a> &gt;= <a href="../Global.scala.html#39408" title="=&gt; TreeCheckers.this.global.Run">currentRun</a>.<a href="../Global.scala.html#40420" title="=&gt; scala.tools.nsc.Phase">typerPhase</a>.<a href="../Phase.scala.html#23291" title="=&gt; Int">id</a>) {
            <a href="Infer.scala.html#48993" title="(pos: scala.tools.nsc.util.Position,msg: String)Unit">error</a>(<a href="#130441" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29547" title="=&gt; scala.tools.nsc.util.Position">pos</a>, <span title="(x$1: Any)java.lang.String" class="string">&quot;tree without type: &quot;</span> + <a href="#130441" title="TreeCheckers.this.global.Tree">tree</a>)
          } <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<a href="#130441" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29557" title="(x$1: Boolean)Boolean">isDef</a> &amp;&amp; <a href="#130441" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; TreeCheckers.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27142" title="(x$1: AnyRef)Boolean">owner</a> != <a href="../ast/Trees.scala.html#71106" title="=&gt; TreeCheckers.this.global.Symbol">currentOwner</a>) {
            <span class="keyword">var</span> <a title="TreeCheckers.this.global.Symbol" id="130810">owner</a> = <a href="../ast/Trees.scala.html#71106" title="=&gt; TreeCheckers.this.global.Symbol">currentOwner</a>
            <span title="Unit" class="keyword">while</span> (<a href="#130810" title="TreeCheckers.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27054" title="(x$1: Boolean)Boolean">isTerm</a> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#130810" title="TreeCheckers.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27069" title="=&gt; Boolean">isMethod</a> &amp;&amp; <a href="#130441" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; TreeCheckers.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27142" title="(x$1: AnyRef)Boolean">owner</a> != <a href="#130810" title="TreeCheckers.this.global.Symbol">owner</a>)
              <a href="#130810" title="TreeCheckers.this.global.Symbol">owner</a> = <a href="#130810" title="TreeCheckers.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27142" title="=&gt; TreeCheckers.this.global.Symbol">owner</a>;
            <span title="Unit" class="keyword">if</span> (<a href="#130441" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; TreeCheckers.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27142" title="(x$1: AnyRef)Boolean">owner</a> != <a href="#130810" title="TreeCheckers.this.global.Symbol">owner</a>) {
              <a href="Infer.scala.html#48993" title="(pos: scala.tools.nsc.util.Position,msg: String)Unit">error</a>(<a href="#130441" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29547" title="=&gt; scala.tools.nsc.util.Position">pos</a>, <span title="(x$1: Any)java.lang.String" class="string">&quot;&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#130441" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; TreeCheckers.this.global.Symbol">symbol</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; has wrong owner: &quot;)" class="string">&quot; has wrong owner: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#130441" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; TreeCheckers.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27142" title="=&gt; TreeCheckers.this.global.Symbol">owner</a> <span title="(x$1: Any)java.lang.String">+</span>
                    <a href="#130441" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; TreeCheckers.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27142" title="=&gt; TreeCheckers.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27251" title="=&gt; String">locationString</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;, should be: &quot;)" class="string">&quot;, should be: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span>
                    <a href="../ast/Trees.scala.html#71106" title="=&gt; TreeCheckers.this.global.Symbol">currentOwner</a> + <a href="../ast/Trees.scala.html#71106" title="=&gt; TreeCheckers.this.global.Symbol">currentOwner</a>.<a href="../symtab/Symbols.scala.html#27251" title="=&gt; String">locationString</a>)
            }
          } <span class="keyword">else</span> {
            <span class="keyword">super</span>.<a href="../ast/Trees.scala.html#71109" title="(tree: TreeCheckers.this.global.Tree)Unit">traverse</a>(<a href="#130441" title="TreeCheckers.this.global.Tree">tree</a>)
          }
        } <span class="keyword">catch</span> {
          <span title="Nothing" class="keyword">case</span> <a title="java.lang.Throwable" id="130852">ex</a>: <span title="Throwable">Throwable</span> =&gt;
            <span title="Unit" class="keyword">if</span> (<a href="../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../Settings.scala.html#37988" title="=&gt; Boolean">value</a>)
              <span title="object Console">Console</span>.<span title="(x: Any)Unit">println</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;exception when traversing &quot;</span> + <a href="#130441" title="TreeCheckers.this.global.Tree">tree</a>);
            <span title="Nothing" class="keyword">throw</span>(<a href="#130852" title="java.lang.Throwable">ex</a>)
        }
      }
    }

    <span class="keyword">object</span> <a title="object TreeChecker.this.postcheck" id="130430">postcheck</a> <span title="ScalaObject" class="keyword">extends</span> <a href="../ast/Trees.scala.html#26933" title="TreeCheckers.this.global.Traverser">Traverser</a> {
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: TreeCheckers.this.global.Tree)Unit" id="130473">traverse</a>(<a title="TreeCheckers.this.global.Tree" id="130474">tree</a>: <a href="../ast/Trees.scala.html#26752" title="TreeCheckers.this.global.Tree">Tree</a>) {
        <span class="keyword">try</span> {
          <a href="#130474" title="TreeCheckers.this.global.Tree">tree</a> <span title="Unit" class="keyword">match</span> {
            <span title="Unit" class="keyword">case</span> <a href="../ast/Trees.scala.html#26761" title="object TreeCheckers.this.global.EmptyTree">EmptyTree</a> | TypeTree() =&gt;
              ;
            <span title="Unit" class="keyword">case</span> _ =&gt;
              <a href="#130366" title="=&gt; scala.collection.mutable.HashMap[TreeCheckers.this.global.Tree,TreeCheckers.this.global.Type]">tpeOfTree</a>.<a title="(key: TreeCheckers.this.global.Tree)Option[TreeCheckers.this.global.Type]" id="44613">get</a>(<a href="#130474" title="TreeCheckers.this.global.Tree">tree</a>) <span title="Unit" class="keyword">match</span> {
                <span title="Unit" class="keyword">case</span> Some(<a title="TreeCheckers.this.global.Type" id="130874">oldtpe</a>) =&gt;
                  <span title="Unit" class="keyword">if</span> (<span title="=&gt; Boolean">!</span>(<a href="../symtab/Types.scala.html#30422" title="(that: TreeCheckers.this.global.Type)Boolean">oldtpe</a> =:= <a href="#130474" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; TreeCheckers.this.global.Type">tpe</a>))
                    <a href="Infer.scala.html#48993" title="(pos: scala.tools.nsc.util.Position,msg: String)Unit">error</a>(<a href="#130474" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29547" title="=&gt; scala.tools.nsc.util.Position">pos</a>, <span title="(x$1: Any)java.lang.String" class="string">&quot;types differ\n old: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#130874" title="TreeCheckers.this.global.Type">oldtpe</a> <span title="(x$1: Any)java.lang.String">+</span>
                          <span title="java.lang.String(&quot;\012 new: &quot;)" class="string">&quot;\n new: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#130474" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; TreeCheckers.this.global.Type">tpe</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;\012 tree: &quot;)" class="string">&quot;\n tree: &quot;</span> + <a href="#130474" title="TreeCheckers.this.global.Tree">tree</a>)
                  <a href="#130474" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29550" title="(t: TreeCheckers.this.global.Type)Unit">tpe</a> = <a href="#130874" title="TreeCheckers.this.global.Type">oldtpe</a>
                  <span class="keyword">super</span>.<a href="../ast/Trees.scala.html#71109" title="(tree: TreeCheckers.this.global.Tree)Unit">traverse</a>(<a href="#130474" title="TreeCheckers.this.global.Tree">tree</a>)
                <span title="Unit" class="keyword">case</span> <a title="object None" id="477">None</a> =&gt;
              }
          }
        } <span class="keyword">catch</span> {
          <span title="Nothing" class="keyword">case</span> <a title="java.lang.Throwable" id="130899">ex</a>: <span title="Throwable">Throwable</span> =&gt;
            <span title="Unit" class="keyword">if</span> (<a href="../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../Settings.scala.html#37988" title="=&gt; Boolean">value</a>)
              <span title="object Console">Console</span>.<span title="(x: Any)Unit">println</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;exception when traversing &quot;</span> + <a href="#130474" title="TreeCheckers.this.global.Tree">tree</a>);
            <span title="Nothing" class="keyword">throw</span>(<a href="#130899" title="java.lang.Throwable">ex</a>)
        }
      }
    }
  }
}

        </pre>
    </body>
</html>