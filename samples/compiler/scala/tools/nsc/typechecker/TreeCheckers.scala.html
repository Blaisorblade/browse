<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/typechecker/TreeCheckers.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style">
    </head>
    <body>
        <pre>
/* NSC -- new Scala compiler
 * Copyright 2005-2009 LAMP/EPFL
 * @author  Martin Odersky
 */
// $Id: TreeCheckers.scala 18387 2009-07-24 15:28:37Z odersky $

<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> typechecker

<span class="keyword">import</span> scala.tools.nsc.symtab.Flags._
<span class="keyword">import</span> scala.tools.nsc.util.{Position, NoPosition}

<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class TreeCheckers extends java.lang.Object with scala.tools.nsc.typechecker.Analyzer with ScalaObject" id="16809">TreeCheckers</a> <span title="ScalaObject" class="keyword">extends</span> <a href="Analyzer.scala.html#17112" title="scala.tools.nsc.typechecker.Analyzer">Analyzer</a> {

  <span class="keyword">import</span> global._

  <span class="keyword">val</span> <a title="scala.collection.mutable.HashMap[TreeCheckers.this.global.Tree,TreeCheckers.this.global.Type]" id="129819">tpeOfTree</a> = <span title="scala.collection.mutable.HashMap[TreeCheckers.this.global.Tree,TreeCheckers.this.global.Type]" class="keyword">new</span> scala.collection.mutable.<a title="scala.collection.mutable.HashMap[TreeCheckers.this.global.Tree,TreeCheckers.this.global.Type]" id="24954">HashMap</a>[Tree, Type]

  <span class="keyword">def</span> <a title="=&gt; Unit" id="129821">checkTrees</a> {
    <span title="Unit" class="keyword">if</span> (<a href="../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../Settings.scala.html#37070" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">verbose</a>.<a href="../Settings.scala.html#37759" title="=&gt; Boolean">value</a>)
      <span title="object Console">Console</span>.<span title="(x: Any)Unit">println</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;[consistency check at the beginning of phase &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="../symtab/SymbolTable.scala.html#26088" title="=&gt; scala.tools.nsc.Phase">phase</a> + <span title="java.lang.String(&quot;]&quot;)" class="string">&quot;]&quot;</span>)
    <span class="keyword">for</span> (<a title="TreeCheckers.this.global.CompilationUnit" id="129846">unit</a> &lt;- <a href="../Global.scala.html#39176" title="=&gt; TreeCheckers.this.global.Run">currentRun</a>.<a href="../Global.scala.html#40212" title="(f: (TreeCheckers.this.global.CompilationUnit) =&gt; Unit)Unit" id="32173">units</a>) <a href="#129822" title="(unit: TreeCheckers.this.global.CompilationUnit)Unit">check</a>(<a href="#129846" title="TreeCheckers.this.global.CompilationUnit">unit</a>)
  }

  <span class="keyword">def</span> <a title="(unit: TreeCheckers.this.global.CompilationUnit)Unit" id="129822">check</a>(<a title="TreeCheckers.this.global.CompilationUnit" id="129847">unit</a>: <a href="../CompilationUnits.scala.html#39196" title="TreeCheckers.this.global.CompilationUnit">CompilationUnit</a>) {
    <a href="../Global.scala.html#39066" title="(msg: String)Unit">informProgress</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;checking &quot;</span>+<a href="#129847" title="TreeCheckers.this.global.CompilationUnit">unit</a>)
    <span class="keyword">val</span> <a title="TreeCheckers.this.Context" id="129854">context</a> = <a href="Contexts.scala.html#39818" title="(unit: TreeCheckers.this.global.CompilationUnit)TreeCheckers.this.Context">rootContext</a>(<a href="#129847" title="TreeCheckers.this.global.CompilationUnit">unit</a>)
    <a href="#129854" title="TreeCheckers.this.Context">context</a>.<a href="Contexts.scala.html#48417" title="(x$1: Boolean)Unit">checking</a> = <span title="Boolean(true)" class="keyword">true</span>
    <a href="#129819" title="=&gt; scala.collection.mutable.HashMap[TreeCheckers.this.global.Tree,TreeCheckers.this.global.Type]">tpeOfTree</a>.<a title="()Unit" id="44378">clear</a>
    <span class="keyword">val</span> <a title="TreeCheckers.this.TreeChecker" id="129855">checker</a> = <span title="TreeCheckers.this.TreeChecker" class="keyword">new</span> <a href="#129824" title="TreeCheckers.this.TreeChecker">TreeChecker</a>(<a href="#129854" title="TreeCheckers.this.Context">context</a>)

    <span class="keyword">val</span> <a title="TreeCheckers.this.global.CompilationUnit" id="129856">unit0</a> = <a href="../Global.scala.html#39176" title="=&gt; TreeCheckers.this.global.Run">currentRun</a>.<a href="../Global.scala.html#40165" title="=&gt; TreeCheckers.this.global.CompilationUnit">currentUnit</a>
    <a href="../Global.scala.html#39176" title="=&gt; TreeCheckers.this.global.Run">currentRun</a>.<a href="../Global.scala.html#40166" title="(x$1: TreeCheckers.this.global.CompilationUnit)Unit">currentUnit</a> = <a href="#129847" title="TreeCheckers.this.global.CompilationUnit">unit</a>
    <a href="#129855" title="TreeCheckers.this.TreeChecker">checker</a>.<a href="#129881" title="object checker.precheck">precheck</a>.<a href="#129893" title="(tree: TreeCheckers.this.global.Tree)Unit">traverse</a>(<a href="#129847" title="TreeCheckers.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#45437" title="=&gt; TreeCheckers.this.global.Tree">body</a>)
    <a href="#129855" title="TreeCheckers.this.TreeChecker">checker</a>.<a href="Typers.scala.html#42640" title="(tree: TreeCheckers.this.global.Tree)TreeCheckers.this.global.Tree">typed</a>(<a href="#129847" title="TreeCheckers.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#45437" title="=&gt; TreeCheckers.this.global.Tree">body</a>)
    <a href="#129855" title="TreeCheckers.this.TreeChecker">checker</a>.<a href="#129883" title="object checker.postcheck">postcheck</a>.<a href="#129926" title="(tree: TreeCheckers.this.global.Tree)Unit">traverse</a>(<a href="#129847" title="TreeCheckers.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#45437" title="=&gt; TreeCheckers.this.global.Tree">body</a>)
    <a href="../Global.scala.html#39176" title="=&gt; TreeCheckers.this.global.Run">currentRun</a>.<a href="../Global.scala.html#40183" title="=&gt; Unit">advanceUnit</a>
    <span title="(assertion: Boolean)Unit">assert</span>(<a href="../Global.scala.html#39176" title="=&gt; TreeCheckers.this.global.Run">currentRun</a>.<a href="../Global.scala.html#40165" title="(x$1: AnyRef)Boolean">currentUnit</a> == <a href="#129847" title="TreeCheckers.this.global.CompilationUnit">unit</a>)
    <a href="../Global.scala.html#39176" title="=&gt; TreeCheckers.this.global.Run">currentRun</a>.<a href="../Global.scala.html#40166" title="(x$1: TreeCheckers.this.global.CompilationUnit)Unit">currentUnit</a> = <a href="#129856" title="TreeCheckers.this.global.CompilationUnit">unit0</a>
  }

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(context: TreeCheckers.this.Context)TreeCheckers.this.Typer" id="129823">newTyper</a>(<a title="TreeCheckers.this.Context" id="129949">context</a>: <a href="Contexts.scala.html#39821" title="TreeCheckers.this.Context">Context</a>): <a href="Typers.scala.html#39921" title="TreeCheckers.this.Typer">Typer</a> = <span title="TreeCheckers.this.TreeChecker" class="keyword">new</span> <a href="#129824" title="TreeCheckers.this.TreeChecker">TreeChecker</a>(<a href="#129949" title="TreeCheckers.this.Context">context</a>)

  <span class="keyword">class</span> <a title="class TreeChecker extends TreeCheckers.this.Typer with ScalaObject" id="129824">TreeChecker</a><span title="ScalaObject">(</span><a title="TreeCheckers.this.Context" id="129885">context0</a>: <a href="Contexts.scala.html#39821" title="TreeCheckers.this.Context">Context</a>) <span class="keyword">extends</span> <a href="Typers.scala.html#39921" title="TreeCheckers.this.Typer">Typer</a>(<a href="#129885" title="TreeCheckers.this.Context">context0</a>) {

    <span class="keyword">import</span> infer._

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: TreeCheckers.this.global.Tree,mode: Int,pt: TreeCheckers.this.global.Type)TreeCheckers.this.global.Tree" id="129880">typed</a>(<a title="TreeCheckers.this.global.Tree" id="129900">tree</a>: <a href="../ast/Trees.scala.html#26593" title="TreeCheckers.this.global.Tree">Tree</a>, <a title="Int" id="129901">mode</a>: <a title="Int" id="2177">Int</a>, <a title="TreeCheckers.this.global.Type" id="129902">pt</a>: <a href="../symtab/Types.scala.html#26205" title="TreeCheckers.this.global.Type">Type</a>): <a href="../ast/Trees.scala.html#26593" title="TreeCheckers.this.global.Tree">Tree</a> = {
      <a href="#129900" title="TreeCheckers.this.global.Tree">tree</a> <span title="Unit" class="keyword">match</span> {
        <span title="Unit" class="keyword">case</span> <a href="../ast/Trees.scala.html#26602" title="object TreeCheckers.this.global.EmptyTree">EmptyTree</a> | TypeTree() =&gt;
          ;
        <span title="Unit" class="keyword">case</span> _ =&gt;
          <span class="keyword">try</span> {
            <span title="Unit" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="#129819" title="=&gt; scala.collection.mutable.HashMap[TreeCheckers.this.global.Tree,TreeCheckers.this.global.Type]">tpeOfTree</a>.<a title="(key: TreeCheckers.this.global.Tree)Boolean" id="44446">contains</a>(<a href="#129900" title="TreeCheckers.this.global.Tree">tree</a>)) {
              <a href="#129819" title="=&gt; scala.collection.mutable.HashMap[TreeCheckers.this.global.Tree,TreeCheckers.this.global.Type]">tpeOfTree</a>.<a title="(key: TreeCheckers.this.global.Tree,value: TreeCheckers.this.global.Type)Unit" id="44386">update</a>(<a href="#129900" title="TreeCheckers.this.global.Tree">tree</a>, <a href="#129900" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; TreeCheckers.this.global.Type">tpe</a>)
              <a href="#129900" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29364" title="(t: TreeCheckers.this.global.Type)Unit">tpe</a> = <span title="Null(null)" class="keyword">null</span>
            }
            <span class="keyword">val</span> <a title="TreeCheckers.this.global.Tree" id="129963">newtree</a> = <span class="keyword">super</span>.<a href="Typers.scala.html#42637" title="(tree: TreeCheckers.this.global.Tree,mode: Int,pt: TreeCheckers.this.global.Type)TreeCheckers.this.global.Tree">typed</a>(<a href="#129900" title="TreeCheckers.this.global.Tree">tree</a>, <a href="#129901" title="Int">mode</a>, <a href="#129902" title="TreeCheckers.this.global.Type">pt</a>);
            <span title="Unit" class="keyword">if</span> (<span title="(x$1: Boolean)Boolean">(</span><a href="#129963" title="(x$1: AnyRef)Boolean" id="6544">newtree</a> ne <a href="#129900" title="TreeCheckers.this.global.Tree">tree</a>) &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#129963" title="TreeCheckers.this.global.Tree">newtree</a>.<span title="[T0]Boolean">isInstanceOf</span><span title="Boolean">[</span><a href="../ast/Trees.scala.html#26737" title="TreeCheckers.this.global.Literal">Literal</a>])
              <a href="Infer.scala.html#48740" title="(pos: scala.tools.nsc.util.Position,msg: String)Unit">error</a>(<a href="#129900" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29361" title="=&gt; scala.tools.nsc.util.Position">pos</a>, <span title="(x$1: Any)java.lang.String" class="string">&quot;trees differ\n old: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#129900" title="TreeCheckers.this.global.Tree">tree</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; [&quot;)" class="string">&quot; [&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#129900" title="TreeCheckers.this.global.Tree">tree</a>.<span title="()java.lang.Class[_]">getClass</span>() <span title="(x$1: Any)java.lang.String">+</span>
                    <span title="java.lang.String(&quot;]\012 new: &quot;)" class="string">&quot;]\n new: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#129963" title="TreeCheckers.this.global.Tree">newtree</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; [&quot;)" class="string">&quot; [&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#129963" title="TreeCheckers.this.global.Tree">newtree</a>.<span title="()java.lang.Class[_]">getClass</span>() + <span title="java.lang.String(&quot;]&quot;)" class="string">&quot;]&quot;</span>)
          } <span class="keyword">catch</span> {
            <span title="Nothing" class="keyword">case</span> <a title="java.lang.Throwable" id="130034">ex</a>: <span title="Throwable">Throwable</span> =&gt;
              <span title="object Console">Console</span>.<span title="(x: Any)Unit">println</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;exception while typing &quot;</span>+<a href="#129900" title="TreeCheckers.this.global.Tree">tree</a>)
              <span title="Nothing" class="keyword">throw</span> <a href="#130034" title="java.lang.Throwable">ex</a>
          }
      }
      <a href="#129900" title="TreeCheckers.this.global.Tree">tree</a>
    }

    <span class="keyword">object</span> <a title="object TreeChecker.this.precheck" id="129881">precheck</a> <span title="ScalaObject" class="keyword">extends</span> <a href="../ast/Trees.scala.html#26774" title="TreeCheckers.this.global.Traverser">Traverser</a> {
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: TreeCheckers.this.global.Tree)Unit" id="129893">traverse</a>(<a title="TreeCheckers.this.global.Tree" id="129894">tree</a>: <a href="../ast/Trees.scala.html#26593" title="TreeCheckers.this.global.Tree">Tree</a>) {
        <span class="keyword">try</span> {
          <a href="#129894" title="TreeCheckers.this.global.Tree">tree</a> <span title="Unit" class="keyword">match</span> {
            <span title="Unit" class="keyword">case</span> DefDef(_, _, _, _, _, _) =&gt;
              <span title="Unit" class="keyword">if</span> (<a href="#129894" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; TreeCheckers.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#26996" title="(mask: Long)Boolean">hasFlag</a><span title="(x$1: Boolean)Boolean">(</span><span title="Long(134217728L)">ACCESSOR</span>) <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> 
                  <span title="=&gt; Boolean">!</span><a href="#129894" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; TreeCheckers.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#26953" title="=&gt; Boolean">isDeferred</a> &amp;&amp;
                  <span title="=&gt; Boolean">!</span><a href="#129894" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; TreeCheckers.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; TreeCheckers.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30193" title="=&gt; TreeCheckers.this.global.Type">resultType</a>.<span title="[T0]Boolean">isInstanceOf</span><span title="Boolean">[</span><a href="../symtab/Types.scala.html#26251" title="TreeCheckers.this.global.ConstantType">ConstantType</a>]) {
                <span title="(assertion: Boolean,message: =&gt; Any)Unit">assert</span>(<a href="#129894" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; TreeCheckers.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27040" title="(x$1: AnyRef)Boolean">accessed</a> != <a href="../symtab/Symbols.scala.html#26134" title="object TreeCheckers.this.global.NoSymbol">NoSymbol</a>, <a href="#129894" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; TreeCheckers.this.global.Symbol">symbol</a>)
                <span title="(assertion: Boolean)Unit">assert</span>(<a href="#129894" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; TreeCheckers.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27040" title="=&gt; TreeCheckers.this.global.Symbol">accessed</a>.<a href="../symtab/Symbols.scala.html#27067" title="(base: TreeCheckers.this.global.Symbol)TreeCheckers.this.global.Symbol">getter</a><span title="(x$1: AnyRef)Boolean">(</span><a href="#129894" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; TreeCheckers.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#26983" title="=&gt; TreeCheckers.this.global.Symbol">owner</a>) <a title="(x$1: Boolean)Boolean" id="2210">==</a> <a href="#129894" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; TreeCheckers.this.global.Symbol">symbol</a> ||
                       <a href="#129894" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; TreeCheckers.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27040" title="=&gt; TreeCheckers.this.global.Symbol">accessed</a>.<a href="../symtab/Symbols.scala.html#27068" title="(base: TreeCheckers.this.global.Symbol)TreeCheckers.this.global.Symbol">setter</a><span title="(x$1: AnyRef)Boolean">(</span><a href="#129894" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; TreeCheckers.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#26983" title="=&gt; TreeCheckers.this.global.Symbol">owner</a>) == <a href="#129894" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; TreeCheckers.this.global.Symbol">symbol</a>)
              }
            <span title="Unit" class="keyword">case</span> ValDef(_, _, _, _) =&gt;
              <span title="Unit" class="keyword">if</span> (<a href="#129894" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; TreeCheckers.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#26907" title="=&gt; Boolean">hasGetter</a>) {
                <span title="(assertion: Boolean,message: =&gt; Any)Unit">assert</span>(<a href="#129894" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; TreeCheckers.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27067" title="(base: TreeCheckers.this.global.Symbol)TreeCheckers.this.global.Symbol">getter</a><span title="(x$1: AnyRef)Boolean">(</span><a href="#129894" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; TreeCheckers.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#26983" title="=&gt; TreeCheckers.this.global.Symbol">owner</a>) != <a href="../symtab/Symbols.scala.html#26134" title="object TreeCheckers.this.global.NoSymbol">NoSymbol</a>, <a href="#129894" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; TreeCheckers.this.global.Symbol">symbol</a>)
              }
            <span title="Unit" class="keyword">case</span> Apply(_, <a title="List[TreeCheckers.this.global.Tree]" id="130139">args</a>) =&gt;
              <span title="(assertion: Boolean)Unit">assert</span>(<a href="#130139" title="(p: (TreeCheckers.this.global.Tree) =&gt; Boolean)Boolean" id="28935">args</a> forall (<a href="../ast/Trees.scala.html#26602" title="object TreeCheckers.this.global.EmptyTree">EmptyTree</a> <a href="#130150" title="(x$1: AnyRef)Boolean">!=</a>))
            <span title="Unit" class="keyword">case</span> Select(_, _) =&gt;
              <span title="(assertion: Boolean,message: =&gt; Any)Unit">assert</span>(<a href="#129894" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="(x$1: AnyRef)Boolean">symbol</a> != <a href="../symtab/Symbols.scala.html#26134" title="object TreeCheckers.this.global.NoSymbol">NoSymbol</a>, <a href="#129894" title="TreeCheckers.this.global.Tree">tree</a>)
            <span title="Unit" class="keyword">case</span> This(_) =&gt;
              <span title="Unit" class="keyword">if</span> (<span title="=&gt; Boolean">!</span>(<a href="#129894" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; TreeCheckers.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#26966" title="(x$1: Boolean)Boolean">isStatic</a> &amp;&amp; (<a href="#129894" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../symtab/Symbols.scala.html#26996" title="(mask: Long)Boolean">symbol</a> hasFlag <span title="Long(256L)">MODULE</span>))) {
                <span class="keyword">var</span> <a title="TreeCheckers.this.global.Symbol" id="130191">o</a> = <a href="../ast/Trees.scala.html#70822" title="=&gt; TreeCheckers.this.global.Symbol">currentOwner</a>
                <span title="Unit" class="keyword">while</span> (<a href="#130191" title="(x$1: AnyRef)Boolean">o</a> != <a href="#129894" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; TreeCheckers.this.global.Symbol">symbol</a>) <a href="#130192" title="()Unit">{</a>
                  <a href="#130191" title="TreeCheckers.this.global.Symbol">o</a> = <a href="#130191" title="TreeCheckers.this.global.Symbol">o</a>.<a href="../symtab/Symbols.scala.html#26983" title="=&gt; TreeCheckers.this.global.Symbol">owner</a>
                  <span title="Unit" class="keyword">if</span> (<a href="#130191" title="(x$1: AnyRef)Boolean">o</a> == <a href="../symtab/Symbols.scala.html#26134" title="object TreeCheckers.this.global.NoSymbol">NoSymbol</a>) {
                    <a href="Infer.scala.html#48740" title="(pos: scala.tools.nsc.util.Position,msg: String)Unit">error</a>(<a href="#129894" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29361" title="=&gt; scala.tools.nsc.util.Position">pos</a>, <span title="(x$1: Any)java.lang.String" class="string">&quot;tree symbol &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#129894" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; TreeCheckers.this.global.Symbol">symbol</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot; does not point to enclosing class; tree = &quot;)" class="string">&quot; does not point to enclosing class; tree = &quot;</span>+<a href="#129894" title="TreeCheckers.this.global.Tree">tree</a>)
                    <span title="Nothing" class="keyword">return</span>
                  }
                }
              }
            <span title="Unit" class="keyword">case</span> _ =&gt;
          }
          <span title="Unit" class="keyword">if</span> (<a href="#129894" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29361" title="(x$1: AnyRef)Boolean">pos</a> <span title="(x$1: Boolean)Boolean">==</span> <a href="../util/Position.scala.html#14540" title="object scala.tools.nsc.util.NoPosition">NoPosition</a> &amp;&amp; <a href="#129894" title="(x$1: AnyRef)Boolean">tree</a> != <a href="../ast/Trees.scala.html#26602" title="object TreeCheckers.this.global.EmptyTree">EmptyTree</a>) {
            <a href="Infer.scala.html#48740" title="(pos: scala.tools.nsc.util.Position,msg: String)Unit">error</a>(<a href="#129894" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29361" title="=&gt; scala.tools.nsc.util.Position">pos</a>, <span title="(x$1: Any)java.lang.String" class="string">&quot;tree without position: &quot;</span> + <a href="#129894" title="TreeCheckers.this.global.Tree">tree</a>)
          } <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<span title="(x$1: Boolean)Boolean">(</span><a href="#129894" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29363" title="(x$1: AnyRef)Boolean" id="6542">tpe</a> eq <span title="Null(null)" class="keyword">null</span>) &amp;&amp; <a href="../symtab/SymbolTable.scala.html#26088" title="=&gt; scala.tools.nsc.Phase">phase</a>.<a href="../Phase.scala.html#23147" title="(x$1: Int)Boolean" id="2962">id</a> &gt;= <a href="../Global.scala.html#39176" title="=&gt; TreeCheckers.this.global.Run">currentRun</a>.<a href="../Global.scala.html#40188" title="=&gt; scala.tools.nsc.Phase">typerPhase</a>.<a href="../Phase.scala.html#23147" title="=&gt; Int">id</a>) {
            <a href="Infer.scala.html#48740" title="(pos: scala.tools.nsc.util.Position,msg: String)Unit">error</a>(<a href="#129894" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29361" title="=&gt; scala.tools.nsc.util.Position">pos</a>, <span title="(x$1: Any)java.lang.String" class="string">&quot;tree without type: &quot;</span> + <a href="#129894" title="TreeCheckers.this.global.Tree">tree</a>)
          } <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<a href="#129894" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29371" title="(x$1: Boolean)Boolean">isDef</a> &amp;&amp; <a href="#129894" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; TreeCheckers.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#26983" title="(x$1: AnyRef)Boolean">owner</a> != <a href="../ast/Trees.scala.html#70822" title="=&gt; TreeCheckers.this.global.Symbol">currentOwner</a>) {
            <span class="keyword">var</span> <a title="TreeCheckers.this.global.Symbol" id="130263">owner</a> = <a href="../ast/Trees.scala.html#70822" title="=&gt; TreeCheckers.this.global.Symbol">currentOwner</a>
            <span title="Unit" class="keyword">while</span> (<a href="#130263" title="TreeCheckers.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#26895" title="(x$1: Boolean)Boolean">isTerm</a> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#130263" title="TreeCheckers.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#26910" title="=&gt; Boolean">isMethod</a> &amp;&amp; <a href="#129894" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; TreeCheckers.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#26983" title="(x$1: AnyRef)Boolean">owner</a> != <a href="#130263" title="TreeCheckers.this.global.Symbol">owner</a>)
              <a href="#130263" title="TreeCheckers.this.global.Symbol">owner</a> = <a href="#130263" title="TreeCheckers.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#26983" title="=&gt; TreeCheckers.this.global.Symbol">owner</a>;
            <span title="Unit" class="keyword">if</span> (<a href="#129894" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; TreeCheckers.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#26983" title="(x$1: AnyRef)Boolean">owner</a> != <a href="#130263" title="TreeCheckers.this.global.Symbol">owner</a>) {
              <a href="Infer.scala.html#48740" title="(pos: scala.tools.nsc.util.Position,msg: String)Unit">error</a>(<a href="#129894" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29361" title="=&gt; scala.tools.nsc.util.Position">pos</a>, <span title="(x$1: Any)java.lang.String" class="string">&quot;&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#129894" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; TreeCheckers.this.global.Symbol">symbol</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; has wrong owner: &quot;)" class="string">&quot; has wrong owner: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#129894" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; TreeCheckers.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#26983" title="=&gt; TreeCheckers.this.global.Symbol">owner</a> <span title="(x$1: Any)java.lang.String">+</span>
                    <a href="#129894" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; TreeCheckers.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#26983" title="=&gt; TreeCheckers.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27092" title="=&gt; String">locationString</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;, should be: &quot;)" class="string">&quot;, should be: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span>
                    <a href="../ast/Trees.scala.html#70822" title="=&gt; TreeCheckers.this.global.Symbol">currentOwner</a> + <a href="../ast/Trees.scala.html#70822" title="=&gt; TreeCheckers.this.global.Symbol">currentOwner</a>.<a href="../symtab/Symbols.scala.html#27092" title="=&gt; String">locationString</a>)
            }
          } <span class="keyword">else</span> {
            <span class="keyword">super</span>.<a href="../ast/Trees.scala.html#70825" title="(tree: TreeCheckers.this.global.Tree)Unit">traverse</a>(<a href="#129894" title="TreeCheckers.this.global.Tree">tree</a>)
          }
        } <span class="keyword">catch</span> {
          <span title="Nothing" class="keyword">case</span> <a title="java.lang.Throwable" id="130305">ex</a>: <span title="Throwable">Throwable</span> =&gt;
            <span title="Unit" class="keyword">if</span> (<a href="../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../Settings.scala.html#37759" title="=&gt; Boolean">value</a>)
              <span title="object Console">Console</span>.<span title="(x: Any)Unit">println</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;exception when traversing &quot;</span> + <a href="#129894" title="TreeCheckers.this.global.Tree">tree</a>);
            <span title="Nothing" class="keyword">throw</span>(<a href="#130305" title="java.lang.Throwable">ex</a>)
        }
      }
    }

    <span class="keyword">object</span> <a title="object TreeChecker.this.postcheck" id="129883">postcheck</a> <span title="ScalaObject" class="keyword">extends</span> <a href="../ast/Trees.scala.html#26774" title="TreeCheckers.this.global.Traverser">Traverser</a> {
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: TreeCheckers.this.global.Tree)Unit" id="129926">traverse</a>(<a title="TreeCheckers.this.global.Tree" id="129927">tree</a>: <a href="../ast/Trees.scala.html#26593" title="TreeCheckers.this.global.Tree">Tree</a>) {
        <span class="keyword">try</span> {
          <a href="#129927" title="TreeCheckers.this.global.Tree">tree</a> <span title="Unit" class="keyword">match</span> {
            <span title="Unit" class="keyword">case</span> <a href="../ast/Trees.scala.html#26602" title="object TreeCheckers.this.global.EmptyTree">EmptyTree</a> | TypeTree() =&gt;
              ;
            <span title="Unit" class="keyword">case</span> _ =&gt;
              <a href="#129819" title="=&gt; scala.collection.mutable.HashMap[TreeCheckers.this.global.Tree,TreeCheckers.this.global.Type]">tpeOfTree</a>.<a title="(key: TreeCheckers.this.global.Tree)Option[TreeCheckers.this.global.Type]" id="44381">get</a>(<a href="#129927" title="TreeCheckers.this.global.Tree">tree</a>) <span title="Unit" class="keyword">match</span> {
                <span title="Unit" class="keyword">case</span> Some(<a title="TreeCheckers.this.global.Type" id="130327">oldtpe</a>) =&gt;
                  <span title="Unit" class="keyword">if</span> (<span title="=&gt; Boolean">!</span>(<a href="../symtab/Types.scala.html#30236" title="(that: TreeCheckers.this.global.Type)Boolean">oldtpe</a> =:= <a href="#129927" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; TreeCheckers.this.global.Type">tpe</a>))
                    <a href="Infer.scala.html#48740" title="(pos: scala.tools.nsc.util.Position,msg: String)Unit">error</a>(<a href="#129927" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29361" title="=&gt; scala.tools.nsc.util.Position">pos</a>, <span title="(x$1: Any)java.lang.String" class="string">&quot;types differ\n old: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#130327" title="TreeCheckers.this.global.Type">oldtpe</a> <span title="(x$1: Any)java.lang.String">+</span>
                          <span title="java.lang.String(&quot;\012 new: &quot;)" class="string">&quot;\n new: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#129927" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; TreeCheckers.this.global.Type">tpe</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;\012 tree: &quot;)" class="string">&quot;\n tree: &quot;</span> + <a href="#129927" title="TreeCheckers.this.global.Tree">tree</a>)
                  <a href="#129927" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29364" title="(t: TreeCheckers.this.global.Type)Unit">tpe</a> = <a href="#130327" title="TreeCheckers.this.global.Type">oldtpe</a>
                  <span class="keyword">super</span>.<a href="../ast/Trees.scala.html#70825" title="(tree: TreeCheckers.this.global.Tree)Unit">traverse</a>(<a href="#129927" title="TreeCheckers.this.global.Tree">tree</a>)
                <span title="Unit" class="keyword">case</span> <a title="object None" id="465">None</a> =&gt;
              }
          }
        } <span class="keyword">catch</span> {
          <span title="Nothing" class="keyword">case</span> <a title="java.lang.Throwable" id="130352">ex</a>: <span title="Throwable">Throwable</span> =&gt;
            <span title="Unit" class="keyword">if</span> (<a href="../Global.scala.html#39018" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../Settings.scala.html#37150" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../Settings.scala.html#37759" title="=&gt; Boolean">value</a>)
              <span title="object Console">Console</span>.<span title="(x: Any)Unit">println</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;exception when traversing &quot;</span> + <a href="#129927" title="TreeCheckers.this.global.Tree">tree</a>);
            <span title="Nothing" class="keyword">throw</span>(<a href="#130352" title="java.lang.Throwable">ex</a>)
        }
      }
    }
  }
}

        </pre>
    </body>
</html>