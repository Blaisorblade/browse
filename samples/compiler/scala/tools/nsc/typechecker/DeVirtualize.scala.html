<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/typechecker/DeVirtualize.scala</title>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style">
    </head>
    <body onload="initializeLinked()">
        <pre>
<span class="comment">/* NSC -- new Scala compiler
 * Copyright 2005-2009 LAMP/EPFL
 * @author  Martin Odersky
 */</span>
<span class="comment">// $Id: RefChecks.scala 13735 2008-01-18 17:18:58Z odersky $</span>

<span class="keyword">package</span> scala.tools.nsc.typechecker

<span class="keyword">import</span> symtab.Flags._
<span class="keyword">import</span> transform.{InfoTransform, TypingTransformers}
<span class="keyword">import</span> scala.tools.nsc.util.{Position, NoPosition}
<span class="keyword">import</span> scala.collection.mutable.ListBuffer

<span class="keyword">abstract</span> <span class="keyword">class</span> <span class="typed"><span class="type">class DeVirtualize extends scala.tools.nsc.SubComponent with scala.tools.nsc.transform.InfoTransform with scala.tools.nsc.transform.TypingTransformers with ScalaObject</span><a id="15080">DeVirtualize</a></span> <span class="keyword">extends</span> <span class="typed"><span class="type">scala.tools.nsc.transform.InfoTransform</span><a href="../transform/InfoTransform.scala.html#12961">InfoTransform</a></span> <span class="keyword">with</span> <span class="typed"><span class="type">scala.tools.nsc.transform.TypingTransformers</span><a href="../transform/TypingTransformers.scala.html#13471">TypingTransformers</a></span> {

  <span class="keyword">import</span> global._
  <span class="keyword">import</span> definitions._
  <span class="keyword">import</span> typer.{typed, typedOperator, atOwner}
  <span class="keyword">import</span> posAssigner.atPos    

  <span class="comment">/** the following two members override abstract members in Transform */</span>
  <span class="keyword">val</span> <span class="typed"><span class="type">String</span><span id="47753"><a id="47752">phaseName</a></span></span>: <span class="typed"><span class="type">String</span><a id="1861">String</a></span> = <span class="typed"><span class="type">java.lang.String(&quot;devirtualize&quot;)</span><span class="string">&quot;devirtualize&quot;</span></span>

  <span class="comment">/** The phase might set the following new flags: */</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Long</span><a id="47754">phaseNextFlags</a></span>: <span class="typed"><span class="type">Long</span><a id="2399">Long</a></span> = <span class="typed"><span class="type">=&gt; Long</span><a href="../symtab/Flags.scala.html#20574">notDEFERRED</a></span> <span class="typed"><span class="type">(Long)Long</span><a id="3275">|</a></span> <span class="typed"><span class="type">=&gt; Long</span><a href="../symtab/Flags.scala.html#20580">notOVERRIDE</a></span> <span class="typed"><span class="type">(Long)Long</span><a id="3275">|</a></span> <span class="typed"><span class="type">=&gt; Long</span><a href="../symtab/Flags.scala.html#20570">notFINAL</a></span> <span class="typed"><span class="type">(Long)Long</span><a id="3275">|</a></span> <span class="typed"><span class="type">=&gt; Long</span><a href="../symtab/Flags.scala.html#20558">lateABSTRACT</a></span>

  <span class="keyword">def</span> <span class="typed"><span class="type">(DeVirtualize.this.global.CompilationUnit)DeVirtualize.this.DeVirtualizeTransformer</span><a id="47755">newTransformer</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.CompilationUnit</span><a id="47800">unit</a></span>: <span class="typed"><span class="type">DeVirtualize.this.global.CompilationUnit</span><a href="../CompilationUnits.scala.html#22571">CompilationUnit</a></span>): <span class="typed"><span class="type">DeVirtualize.this.DeVirtualizeTransformer</span><a href="#47785">DeVirtualizeTransformer</a></span> =
    <span class="typed"><span class="type">DeVirtualize.this.DeVirtualizeTransformer</span><span class="keyword">new</span></span> <span class="typed"><span class="type">DeVirtualize.this.DeVirtualizeTransformer</span><a href="#47785">DeVirtualizeTransformer</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.CompilationUnit</span><a href="#47800">unit</a></span>)
 
  <span class="comment">/** The class does not change base-classes of existing classes */</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Boolean</span><a id="47756">changesBaseClasses</a></span> = <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span> 

  <span class="keyword">def</span> <span class="typed"><span class="type">(DeVirtualize.this.global.Symbol,DeVirtualize.this.global.Type)DeVirtualize.this.global.Type</span><a id="47757">transformInfo</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a id="47835">sym</a></span>: <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#21866">Symbol</a></span>, <span class="typed"><span class="type">DeVirtualize.this.global.Type</span><a id="47836">tp</a></span>: <span class="typed"><span class="type">DeVirtualize.this.global.Type</span><a href="../symtab/Types.scala.html#21944">Type</a></span>): <span class="typed"><span class="type">DeVirtualize.this.global.Type</span><a href="../symtab/Types.scala.html#21944">Type</a></span> = 
    <span class="typed"><span class="type">DeVirtualize.this.global.Type</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47835">sym</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../symtab/Symbols.scala.html#25152">isThisSym</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47835">sym</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#25211">owner</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../symtab/Symbols.scala.html#25182">isVirtualClass</a></span>) {
      <span class="keyword">val</span> <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a id="47844">clazz</a></span> = <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47835">sym</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#25211">owner</a></span>
      <span class="typed"><span class="type">(List[DeVirtualize.this.global.Type])DeVirtualize.this.global.Type</span><a href="../symtab/Types.scala.html#22036">intersectionType</a></span>(
        <span class="typed"><span class="type">(DeVirtualize.this.global.Type*)List[DeVirtualize.this.global.Type]</span><span id="21328"><a id="527">List</a></span></span>(
          <span class="typed"><span class="type">(DeVirtualize.this.global.Type,List[DeVirtualize.this.global.Type])DeVirtualize.this.global.Type</span><a href="../symtab/Types.scala.html#22037">appliedType</a></span>(<span class="typed"><span class="type">(DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol</span><a href="#47765">abstractType</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47844">clazz</a></span>).<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Type</span><a href="../symtab/Symbols.scala.html#25239">typeConstructor</a></span>, <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47844">clazz</a></span>.<span class="typed"><span class="type">=&gt; List[DeVirtualize.this.global.Symbol]</span><a href="../symtab/Symbols.scala.html#25242">typeParams</a></span> <span class="typed"><span class="type">((DeVirtualize.this.global.Symbol) =&gt; DeVirtualize.this.global.Type)List[DeVirtualize.this.global.Type]</span><a id="21362">map</a></span> (<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47858">_</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Type</span><a href="../symtab/Symbols.scala.html#25230">tpe</a></span>)),
          <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47844">clazz</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Type</span><a href="../symtab/Symbols.scala.html#25230">tpe</a></span>))
    } <span class="keyword">else</span> <span class="typed"><span class="type">(DeVirtualize.this.global.Type)DeVirtualize.this.global.Type</span><a href="#47860">devirtualizeMap</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Type</span><a href="#47836">tp</a></span>)

  <span class="comment">/* todo:
     handle constructor arguments
     check: overriding classes must have same type params
     virtual classes cannot have self types
   */</span>

  <span class="comment">/** Do the following transformations everywhere in a type:
   *
   * 1. Replace a virtual class
   *
   *  attrs mods class VC[Ts] &lt;: Ps { decls }
   *  
   * by the following symbols
   *
   *  attrs mods1 type VC[Ts] &lt;: dvm(Ps) with VC$trait[Ts]
   *  attrs mods2 trait VC$trait[Ts] extends AnyRef with ScalaObject { 
   *    this: VC[Ts] with VC$trait[Ts] =&gt; decls1
   *  }
   *  
   * The class symbol VC becomes the symbol of the workertrait.
   * 
   *  dvm    is the devirtalization mapping which converts refs to 
   *         virtual classes to refs to their abstract types (@see devirtualize)
   *  mods1  are the modifiers inherited to abstract types
   *  mods2  are the modifiers inherited to worker traits
   *  decls1 is decls but members that have an override modifier 
   *         lose it and any final modifier as well. 
   *
   * 2. For all virtual member classes VC which
   *    are not abstract and which are or inherit from a virtual class defined in current class
   *    add a factory (@see mkFactory)
   * 3. Convert TypeRef's to VC where VC is a virtual class to TypeRef's to AT, where AT
   *    is the abstract type corresponding to VC.
   *
   *  Note: If a class inherits vc's from two different paths, a vc in the 
   *  inheriting class has to be created beforehand. This is done in phase ??? (NOT YET DONE!)
   *
   *  Note: subclasses of virtual classes are treated as if they are virtual.
   *  isVirtualClass returns true for them also. 
   */</span>
  <span class="keyword">object</span> <span class="typed"><span class="type">object DeVirtualize.this.devirtualizeMap</span><a id="47758">devirtualizeMap</a></span> <span class="keyword">extends</span> <span class="typed"><span class="type">DeVirtualize.this.global.TypeMap</span><a href="../symtab/Types.scala.html#22053">TypeMap</a></span> {
    <span class="keyword">def</span> <span class="typed"><span class="type">(DeVirtualize.this.global.Type)DeVirtualize.this.global.Type</span><a id="47860">apply</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Type</span><a id="47861">tp</a></span>: <span class="typed"><span class="type">DeVirtualize.this.global.Type</span><a href="../symtab/Types.scala.html#21944">Type</a></span>): <span class="typed"><span class="type">DeVirtualize.this.global.Type</span><a href="../symtab/Types.scala.html#21944">Type</a></span> = <span class="typed"><span class="type">(DeVirtualize.this.global.Type)DeVirtualize.this.global.Type</span><a href="../symtab/Types.scala.html#27743">mapOver</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Type</span><a href="#47861">tp</a></span>) <span class="typed"><span class="type">DeVirtualize.this.global.Type</span><span class="keyword">match</span></span> { 
      <span class="typed"><span class="type">DeVirtualize.this.global.Type</span><span class="keyword">case</span></span> <span class="typed"><span class="type">DeVirtualize.this.global.ClassInfoType</span><a id="47899">tp1</a></span> @ <a id="1">ClassInfoType</a>(<span class="typed"><span class="type">List[DeVirtualize.this.global.Type]</span><a id="47900">parents</a></span>, <span class="typed"><span class="type">DeVirtualize.this.global.Scope</span><a id="47901">decls0</a></span>, <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a id="47902">clazz</a></span>) =&gt;
        <span class="keyword">var</span> <span class="typed"><span class="type">DeVirtualize.this.global.Scope</span><a id="47903">decls</a></span> = <span class="typed"><span class="type">DeVirtualize.this.global.Scope</span><a href="#47901">decls0</a></span>
        <span class="keyword">def</span> <span class="typed"><span class="type">(DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol</span><a id="47904">enter</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a id="47905">sym</a></span>: <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#21866">Symbol</a></span>) = <span class="comment">// at next phase because names of worker traits change</span>
          <span class="typed"><span class="type">(scala.tools.nsc.Phase)(=&gt; DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol</span><a href="../symtab/SymbolTable.scala.html#21147">atPhase</a></span>(<span class="typed"><span class="type">=&gt; scala.tools.nsc.Phase</span><a href="../SubComponent.scala.html#29467">ownPhase</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Phase</span><a href="../Phase.scala.html#27787">next</a></span>) { <span class="typed"><span class="type">DeVirtualize.this.global.Scope</span><a href="#47903">decls</a></span>.<span class="typed"><span class="type">(DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol</span><a href="../symtab/Scopes.scala.html#34617">enter</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47905">sym</a></span>) } 
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">(DeVirtualize.this.global.Symbol)Boolean</span><a href="#47763">containsVirtuals</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47902">clazz</a></span>)) {
          <span class="typed"><span class="type">DeVirtualize.this.global.Scope</span><a href="#47903">decls</a></span> = <span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Scope</span><a href="../symtab/Scopes.scala.html#22207">newScope</a></span>
          <span class="keyword">for</span> (<span class="typed"><span class="type">((DeVirtualize.this.global.Symbol) =&gt; Unit)Unit</span><span id="21366"><a id="47917">m</a></span></span> &lt;- <span class="typed"><span class="type">DeVirtualize.this.global.Scope</span><a href="#47901">decls0</a></span>.<span class="typed"><span class="type">=&gt; List[DeVirtualize.this.global.Symbol]</span><a href="../symtab/Scopes.scala.html#34629">toList</a></span>) {
            <span class="typed"><span class="type">Any</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47917">m</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../symtab/Symbols.scala.html#25182">isVirtualClass</a></span>) {
              <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47917">m</a></span>.<span class="typed"><span class="type">(Long)m.type</span><a href="../symtab/Symbols.scala.html#25220">setFlag</a></span>(<span class="typed"><span class="type">=&gt; Long</span><a href="../symtab/Flags.scala.html#20574">notDEFERRED</a></span> <span class="typed"><span class="type">(Long)Long</span><a id="3275">|</a></span> <span class="typed"><span class="type">=&gt; Long</span><a href="../symtab/Flags.scala.html#20570">notFINAL</a></span> <span class="typed"><span class="type">(Long)Long</span><a id="3275">|</a></span> <span class="typed"><span class="type">=&gt; Long</span><a href="../symtab/Flags.scala.html#20558">lateABSTRACT</a></span>)
              <span class="typed"><span class="type">(DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol</span><a href="#47904">enter</a></span>(<span class="typed"><span class="type">(DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol</span><a href="#47780">mkAbstractType</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47917">m</a></span>))
            }
            <span class="typed"><span class="type">(DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol</span><a href="#47904">enter</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47917">m</a></span>)
          }
          <span class="keyword">for</span> (<span class="typed"><span class="type">((DeVirtualize.this.global.Symbol) =&gt; Unit)Unit</span><span id="21366"><a id="47951">m</a></span></span> &lt;- <span class="typed"><span class="type">(DeVirtualize.this.global.Symbol)List[DeVirtualize.this.global.Symbol]</span><a href="#47764">classesInNeedOfFactories</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47902">clazz</a></span>))
            <span class="typed"><span class="type">(DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol</span><a href="#47904">enter</a></span>(<span class="typed"><span class="type">(DeVirtualize.this.global.Symbol,DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol</span><a href="#47782">mkFactory</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47951">m</a></span>, <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47902">clazz</a></span>))
        }
        <span class="typed"><span class="type">DeVirtualize.this.global.Type</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47902">clazz</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../symtab/Symbols.scala.html#25182">isVirtualClass</a></span>) {
          <span class="typed"><span class="type">(Any)Unit</span><span id="6112"><a id="821">println</a></span></span>(<span class="typed"><span class="type">java.lang.String(&quot;virtual class: &quot;)</span><span class="string">&quot;virtual class: &quot;</span></span><span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span><span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47902">clazz</a></span><span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span><span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47902">clazz</a></span>.<span class="typed"><span class="type">=&gt; String</span><a href="../symtab/Symbols.scala.html#25316">locationString</a></span>)
          <span class="typed"><span class="type">(DeVirtualize.this.global.Symbol)Unit</span><a href="#47760">transformOwnerInfo</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47902">clazz</a></span>) 
          <span class="typed"><span class="type">DeVirtualize.this.global.Scope</span><a href="#47903">decls</a></span> = <span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Scope</span><a href="../symtab/Scopes.scala.html#22207">newScope</a></span>
          
          <span class="comment">// add virtual fields for all primary constructor parameters</span>
          <span class="keyword">for</span> (<span class="typed"><span class="type">((List[(DeVirtualize.this.global.Type, Int)]) =&gt; Unit)Unit</span><span id="21366"><a id="47962">row</a></span></span> &lt;- <span class="typed"><span class="type">(DeVirtualize.this.global.Type,Int)List[List[(DeVirtualize.this.global.Type, Int)]]</span><a href="#47781">paramTypesAndIndices</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47902">clazz</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#25259">primaryConstructor</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Type</span><a href="../symtab/Symbols.scala.html#25230">tpe</a></span>, <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>))
            <span class="keyword">for</span> (<span class="typed"><span class="type">(((DeVirtualize.this.global.Type, Int)) =&gt; Unit)Unit</span><span id="21366"><a href="#47964" id="21367">(</a></span></span><span class="typed"><span class="type">DeVirtualize.this.global.Type</span><span id="47965"><a id="47970">pt</a></span></span>, <span class="typed"><span class="type">Int</span><span id="47966"><a id="47971">i</a></span></span>) &lt;- <span class="typed"><span class="type">List[(DeVirtualize.this.global.Type, Int)]</span><a href="#47962">row</a></span>) 
              <span class="typed"><span class="type">(DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol</span><a href="#47904">enter</a></span>(<span class="typed"><span class="type">(DeVirtualize.this.global.Symbol,Int,DeVirtualize.this.global.Type)DeVirtualize.this.global.Symbol</span><a href="#47779">mkParamField</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47902">clazz</a></span>, <span class="typed"><span class="type">Int</span><a href="#47971">i</a></span>, <span class="typed"><span class="type">(DeVirtualize.this.global.Type)DeVirtualize.this.global.Type</span><a href="#47860">devirtualizeMap</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Type</span><a href="#47970">pt</a></span>)))

          <span class="comment">// remove OVERRIDE from all workertrait members, except if they override a member in Object</span>
          <span class="keyword">for</span> (<span class="typed"><span class="type">((DeVirtualize.this.global.Symbol) =&gt; Unit)Unit</span><span id="21366"><a id="47977">m</a></span></span> &lt;- <span class="typed"><span class="type">DeVirtualize.this.global.Scope</span><a href="#47901">decls0</a></span>.<span class="typed"><span class="type">=&gt; List[DeVirtualize.this.global.Symbol]</span><a href="../symtab/Scopes.scala.html#34629">toList</a></span>) {
            <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47977">m</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../symtab/Symbols.scala.html#25148">isConstructor</a></span>) {
              <span class="typed"><span class="type">Any</span><span class="keyword">if</span></span> ((<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47977">m</a></span> <span class="typed"><span class="type">(Long)Boolean</span><a href="../symtab/Symbols.scala.html#25223">hasFlag</a></span> <span class="typed"><span class="type">Long(2L)</span><span >OVERRIDE</span></span>) <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47977">m</a></span>.<span class="typed"><span class="type">(DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#25286">overriddenSymbol</a></span>(<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Symbol</span><a href="../symtab/Definitions.scala.html#25778">ObjectClass</a></span>) <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">object DeVirtualize.this.global.NoSymbol</span><a href="../symtab/Symbols.scala.html#21873">NoSymbol</a></span>)
                <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47977">m</a></span> <span class="typed"><span class="type">(Long)m.type</span><a href="../symtab/Symbols.scala.html#25220">setFlag</a></span> (<span class="typed"><span class="type">=&gt; Long</span><a href="../symtab/Flags.scala.html#20580">notOVERRIDE</a></span> <span class="typed"><span class="type">(Long)Long</span><a id="3275">|</a></span> <span class="typed"><span class="type">=&gt; Long</span><a href="../symtab/Flags.scala.html#20570">notFINAL</a></span>)
              <span class="typed"><span class="type">(DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol</span><a href="#47904">enter</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47977">m</a></span>)
            }
          }
          <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47902">clazz</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#25260">thisSym</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47902">clazz</a></span>) <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47902">clazz</a></span>.<span class="typed"><span class="type">(DeVirtualize.this.global.Type)Unit</span><a href="../symtab/Symbols.scala.html#25262">typeOfThis</a></span> = <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47902">clazz</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Type</span><a href="../symtab/Symbols.scala.html#25263">thisType</a></span>
            <span class="comment">// ... to give a hook on which we can hang selftype transformers</span>
          <span class="typed"><span class="type">(List[DeVirtualize.this.global.Type],DeVirtualize.this.global.Scope,DeVirtualize.this.global.Symbol)DeVirtualize.this.global.ClassInfoType</span><a href="../symtab/Types.scala.html#43446">ClassInfoType</a></span>(<span class="typed"><span class="type">(DeVirtualize.this.global.Type*)List[DeVirtualize.this.global.Type]</span><span id="21328"><a id="527">List</a></span></span>(<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Symbol</span><a href="../symtab/Definitions.scala.html#25778">ObjectClass</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Type</span><a href="../symtab/Symbols.scala.html#25230">tpe</a></span>, <span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Symbol</span><a href="../symtab/Definitions.scala.html#25855">ScalaObjectClass</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Type</span><a href="../symtab/Symbols.scala.html#25230">tpe</a></span>), <span class="typed"><span class="type">DeVirtualize.this.global.Scope</span><a href="#47903">decls</a></span>, <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47902">clazz</a></span>)
        } <span class="keyword">else</span> {
          <span class="typed"><span class="type">(List[DeVirtualize.this.global.Type],DeVirtualize.this.global.Scope,DeVirtualize.this.global.Symbol)DeVirtualize.this.global.ClassInfoType</span><a href="../symtab/Types.scala.html#43446">ClassInfoType</a></span>(<span class="typed"><span class="type">List[DeVirtualize.this.global.Type]</span><a href="#47900">parents</a></span> <span class="typed"><span class="type">((DeVirtualize.this.global.Type) =&gt; DeVirtualize.this.global.Type)List[DeVirtualize.this.global.Type]</span><a id="21362">map</a></span> <span class="keyword">this</span>, <span class="typed"><span class="type">DeVirtualize.this.global.Scope</span><a href="#47903">decls</a></span>, <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47902">clazz</a></span>)
        }
      <span class="typed"><span class="type">DeVirtualize.this.global.TypeRef</span><span class="keyword">case</span></span> <span class="typed"><span class="type">DeVirtualize.this.global.TypeRef</span><a id="47995">tp1</a></span> @ <a id="1">TypeRef</a>(<span class="typed"><span class="type">DeVirtualize.this.global.Type</span><a id="47996">pre</a></span>, <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a id="47997">clazz</a></span>, <span class="typed"><span class="type">List[DeVirtualize.this.global.Type]</span><a id="47998">args</a></span>) <span class="keyword">if</span> <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47997">clazz</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../symtab/Symbols.scala.html#25182">isVirtualClass</a></span> =&gt;
        <span class="typed"><span class="type">(DeVirtualize.this.global.Type,DeVirtualize.this.global.Symbol,List[DeVirtualize.this.global.Type])DeVirtualize.this.global.TypeRef</span><a href="../symtab/Types.scala.html#29720">TypeRef</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Type</span><a href="#47996">pre</a></span>, <span class="typed"><span class="type">(DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol</span><a href="#47765">abstractType</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47997">clazz</a></span>), <span class="typed"><span class="type">List[DeVirtualize.this.global.Type]</span><a href="#47998">args</a></span>)
      <span class="typed"><span class="type">DeVirtualize.this.global.Type</span><span class="keyword">case</span></span> <span class="typed"><span class="type">DeVirtualize.this.global.Type</span><a id="47999">tp1</a></span> =&gt;
        <span class="typed"><span class="type">DeVirtualize.this.global.Type</span><a href="#47999">tp1</a></span>
    }
  }

  <span class="comment">/** Transform owner of given clazz symbol */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <span class="typed"><span class="type">(DeVirtualize.this.global.Symbol)Unit</span><a id="47760">transformOwnerInfo</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a id="47956">clazz</a></span>: <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#21866">Symbol</a></span>) { <span class="typed"><span class="type">(scala.tools.nsc.Phase)(=&gt; DeVirtualize.this.global.Type)DeVirtualize.this.global.Type</span><a href="../symtab/SymbolTable.scala.html#21147">atPhase</a></span>(<span class="typed"><span class="type">=&gt; scala.tools.nsc.Phase</span><a href="../SubComponent.scala.html#29467">ownPhase</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Phase</span><a href="../Phase.scala.html#27787">next</a></span>) { <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47956">clazz</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#25211">owner</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Type</span><a href="../symtab/Symbols.scala.html#25231">info</a></span> } }

  <span class="comment">/** Names of derived classes and factories */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <span class="typed"><span class="type">(DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Name</span><a id="47761">concreteClassName</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a id="48001">clazz</a></span>: <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#21866">Symbol</a></span>) = 
    <span class="typed"><span class="type">(scala.tools.nsc.Phase)(=&gt; DeVirtualize.this.global.Name)DeVirtualize.this.global.Name</span><a href="../symtab/SymbolTable.scala.html#21147">atPhase</a></span>(<span class="typed"><span class="type">=&gt; scala.tools.nsc.Phase</span><a href="../SubComponent.scala.html#29467">ownPhase</a></span>) { <span class="typed"><span class="type">(String)DeVirtualize.this.global.Name</span><a href="../symtab/Names.scala.html#21099">newTypeName</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48001">clazz</a></span>.<span class="typed"><span class="type">implicit scala.Predef.any2stringadd : (Any)scala.runtime.StringAdd</span><span id="6142"><a href="../symtab/Symbols.scala.html#25215" id="821">name</a></span></span><span class="typed"><span class="type">(String)java.lang.String</span><a id="23659">+</a></span><span class="typed"><span class="type">java.lang.String(&quot;$fix&quot;)</span><span class="string">&quot;$fix&quot;</span></span>) }
  <span class="keyword">protected</span> <span class="keyword">def</span> <span class="typed"><span class="type">(DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Name</span><a id="47762">factoryName</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a id="48019">clazz</a></span>: <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#21866">Symbol</a></span>) = 
    <span class="typed"><span class="type">(scala.tools.nsc.Phase)(=&gt; DeVirtualize.this.global.Name)DeVirtualize.this.global.Name</span><a href="../symtab/SymbolTable.scala.html#21147">atPhase</a></span>(<span class="typed"><span class="type">=&gt; scala.tools.nsc.Phase</span><a href="../SubComponent.scala.html#29467">ownPhase</a></span>) { <span class="typed"><span class="type">(String)DeVirtualize.this.global.Name</span><a href="../symtab/Names.scala.html#21096">newTermName</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;new$&quot;)</span><span class="string">&quot;new$&quot;</span></span><span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span><span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48019">clazz</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Name</span><a href="../symtab/Symbols.scala.html#25215">name</a></span>) }

  <span class="comment">/** Does `clazz' contaion virtual classes? */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <span class="typed"><span class="type">(DeVirtualize.this.global.Symbol)Boolean</span><a id="47763">containsVirtuals</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a id="47908">clazz</a></span>: <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#21866">Symbol</a></span>) = <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47908">clazz</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Type</span><a href="../symtab/Symbols.scala.html#25231">info</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Scope</span><a href="../symtab/Types.scala.html#25677">decls</a></span>.<span class="typed"><span class="type">=&gt; List[DeVirtualize.this.global.Symbol]</span><a href="../symtab/Scopes.scala.html#34629">toList</a></span> <span class="typed"><span class="type">((DeVirtualize.this.global.Symbol) =&gt; Boolean)Boolean</span><a id="21373">exists</a></span> (<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47913">_</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../symtab/Symbols.scala.html#25182">isVirtualClass</a></span>)

  <span class="comment">/** The inner classes that need factory methods in `clazz' 
   *  This is intended to catch situations like the following
   *
   *  abstract class C { 
   *    class V &lt;: {...}
   *    class W extends V 
   *  }
   *  class D extends C {
   *    class V &lt;: {...}
   *    // factories needed for V and W!
   *  }
   */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <span class="typed"><span class="type">(DeVirtualize.this.global.Symbol)List[DeVirtualize.this.global.Symbol]</span><a id="47764">classesInNeedOfFactories</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a id="47927">clazz</a></span>: <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#21866">Symbol</a></span>) = <span class="typed"><span class="type">(scala.tools.nsc.Phase)(=&gt; List[DeVirtualize.this.global.Symbol])List[DeVirtualize.this.global.Symbol]</span><a href="../symtab/SymbolTable.scala.html#21147">atPhase</a></span>(<span class="typed"><span class="type">=&gt; scala.tools.nsc.Phase</span><a href="../SubComponent.scala.html#29467">ownPhase</a></span>) {
    <span class="keyword">def</span> <span class="typed"><span class="type">(DeVirtualize.this.global.Symbol)Boolean</span><a id="47930">isOverriddenVirtual</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a id="47932">c</a></span>: <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#21866">Symbol</a></span>) = 
      <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47932">c</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../symtab/Symbols.scala.html#25182">isVirtualClass</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47927">clazz</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Type</span><a href="../symtab/Symbols.scala.html#25231">info</a></span>.<span class="typed"><span class="type">(DeVirtualize.this.global.Name)DeVirtualize.this.global.Symbol</span><a href="../symtab/Types.scala.html#25678">decl</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47932">c</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Name</span><a href="../symtab/Symbols.scala.html#25215">name</a></span>).<span class="typed"><span class="type">=&gt; Boolean</span><a href="../symtab/Symbols.scala.html#25182">isVirtualClass</a></span>
    <span class="keyword">val</span> <span class="typed"><span class="type">List[DeVirtualize.this.global.Symbol]</span><a id="47931">xs</a></span> = <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47927">clazz</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Type</span><a href="../symtab/Symbols.scala.html#25231">info</a></span>.<span class="typed"><span class="type">=&gt; List[DeVirtualize.this.global.Symbol]</span><a href="../symtab/Types.scala.html#25680">members</a></span>.<span class="typed"><span class="type">=&gt; List[DeVirtualize.this.global.Symbol]</span><a id="21348">toList</a></span> <span class="typed"><span class="type">((DeVirtualize.this.global.Symbol) =&gt; Boolean)List[DeVirtualize.this.global.Symbol]</span><a id="21367">filter</a></span> (<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a id="47937">x</a></span> =&gt; <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47937">x</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../symtab/Symbols.scala.html#25182">isVirtualClass</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47937">x</a></span>.<span class="typed"><span class="type">(Long)Boolean</span><a href="../symtab/Symbols.scala.html#25223">hasFlag</a></span>(<span class="typed"><span class="type">Long(8L)</span><span >ABSTRACT</span></span>))
    <span class="keyword">for</span> (<span class="typed"><span class="type">((DeVirtualize.this.global.Symbol) =&gt; DeVirtualize.this.global.Symbol)List[DeVirtualize.this.global.Symbol]</span><span id="21362"><span id="21367"><span id="47941"><a id="47948">m</a></span></span></span></span> &lt;- <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47927">clazz</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Type</span><a href="../symtab/Symbols.scala.html#25231">info</a></span>.<span class="typed"><span class="type">=&gt; List[DeVirtualize.this.global.Symbol]</span><a href="../symtab/Types.scala.html#25680">members</a></span>.<span class="typed"><span class="type">=&gt; List[DeVirtualize.this.global.Symbol]</span><a id="21348">toList</a></span>; 
         <span class="keyword">if</span> (<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47941">m</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../symtab/Symbols.scala.html#25182">isVirtualClass</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47941">m</a></span> <span class="typed"><span class="type">(Long)Boolean</span><a href="../symtab/Symbols.scala.html#25223">hasFlag</a></span> <span class="typed"><span class="type">Long(8L)</span><span >ABSTRACT</span></span>) <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> 
             (<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47941">m</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Type</span><a href="../symtab/Symbols.scala.html#25231">info</a></span>.<span class="typed"><span class="type">=&gt; List[DeVirtualize.this.global.Symbol]</span><a href="../symtab/Types.scala.html#25708">baseClasses</a></span> <span class="typed"><span class="type">((DeVirtualize.this.global.Symbol) =&gt; Boolean)Boolean</span><a id="21373">exists</a></span> <span class="typed"><span class="type">(DeVirtualize.this.global.Symbol)Boolean</span><a href="#47930">isOverriddenVirtual</a></span>))) <span class="keyword">yield</span> <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47948">m</a></span>
  }

  <span class="comment">/** The abstract type corresponding to a virtual class. */</span>  
  <span class="keyword">protected</span> <span class="keyword">def</span> <span class="typed"><span class="type">(DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol</span><a id="47765">abstractType</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a id="47852">clazz</a></span>: <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#21866">Symbol</a></span>): <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#21866">Symbol</a></span> =  <span class="typed"><span class="type">(scala.tools.nsc.Phase)(=&gt; DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol</span><a href="../symtab/SymbolTable.scala.html#21147">atPhase</a></span>(<span class="typed"><span class="type">=&gt; scala.tools.nsc.Phase</span><a href="../SubComponent.scala.html#29467">ownPhase</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Phase</span><a href="../Phase.scala.html#27787">next</a></span>) {
    <span class="keyword">val</span> <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a id="48024">abstpe</a></span> = <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47852">clazz</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#25211">owner</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Type</span><a href="../symtab/Symbols.scala.html#25231">info</a></span>.<span class="typed"><span class="type">(DeVirtualize.this.global.Name)DeVirtualize.this.global.Symbol</span><a href="../symtab/Types.scala.html#25678">decl</a></span>(<span class="typed"><span class="type">(scala.tools.nsc.Phase)(=&gt; DeVirtualize.this.global.Name)DeVirtualize.this.global.Name</span><a href="../symtab/SymbolTable.scala.html#21147">atPhase</a></span>(<span class="typed"><span class="type">=&gt; scala.tools.nsc.Phase</span><a href="../SubComponent.scala.html#29467">ownPhase</a></span>) { <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47852">clazz</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Name</span><a href="../symtab/Symbols.scala.html#25215">name</a></span> })
    <span class="typed"><span class="type">(Boolean)Unit</span><span id="6003"><a id="821">assert</a></span></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48024">abstpe</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../symtab/Symbols.scala.html#25132">isAbstractType</a></span>)
    <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48024">abstpe</a></span>
  }

  <span class="comment">/** The factory corresponding to a virtual class. */</span>  
  <span class="keyword">protected</span> <span class="keyword">def</span> <span class="typed"><span class="type">(DeVirtualize.this.global.Symbol,DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol</span><a id="47766">factory</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a id="48029">clazz</a></span>: <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#21866">Symbol</a></span>, <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a id="48030">owner</a></span>: <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#21866">Symbol</a></span>) = <span class="typed"><span class="type">(scala.tools.nsc.Phase)(=&gt; DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol</span><a href="../symtab/SymbolTable.scala.html#21147">atPhase</a></span>(<span class="typed"><span class="type">=&gt; scala.tools.nsc.Phase</span><a href="../SubComponent.scala.html#29467">ownPhase</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Phase</span><a href="../Phase.scala.html#27787">next</a></span>) {
    <span class="keyword">val</span> <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a id="48033">fsym</a></span> = <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48030">owner</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Type</span><a href="../symtab/Symbols.scala.html#25231">info</a></span>.<span class="typed"><span class="type">(DeVirtualize.this.global.Name)DeVirtualize.this.global.Symbol</span><a href="../symtab/Types.scala.html#25684">member</a></span>(<span class="typed"><span class="type">(DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Name</span><a href="#47762">factoryName</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48029">clazz</a></span>))
    <span class="typed"><span class="type">(Boolean,=&gt; Any)Unit</span><span id="6004"><a id="821">assert</a></span></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48033">fsym</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../symtab/Symbols.scala.html#25142">isMethod</a></span>, <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48029">clazz</a></span>)
    <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48033">fsym</a></span>
  }

  <span class="comment">/** The name of the field representing a constructor parameter of a virtual class */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <span class="typed"><span class="type">(DeVirtualize.this.global.Symbol,Int)DeVirtualize.this.global.Name</span><a id="47767">paramFieldName</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a id="48041">clazz</a></span>: <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#21866">Symbol</a></span>, <span class="typed"><span class="type">Int</span><a id="48042">index</a></span>: <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span>) = <span class="typed"><span class="type">(scala.tools.nsc.Phase)(=&gt; DeVirtualize.this.global.Name)DeVirtualize.this.global.Name</span><a href="../symtab/SymbolTable.scala.html#21147">atPhase</a></span>(<span class="typed"><span class="type">=&gt; scala.tools.nsc.Phase</span><a href="../SubComponent.scala.html#29467">ownPhase</a></span>) {
    <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48041">clazz</a></span>.<span class="typed"><span class="type">(DeVirtualize.this.global.Name)DeVirtualize.this.global.Name</span><a href="../symtab/Symbols.scala.html#25300">expandedName</a></span>(<span class="typed"><span class="type">(String)DeVirtualize.this.global.Name</span><a href="../symtab/Names.scala.html#21096">newTermName</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;param$&quot;)</span><span class="string">&quot;param$&quot;</span></span><span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span><span class="typed"><span class="type">Int</span><a href="#48042">index</a></span>))
  }

  <span class="comment">/** The name of the field representing a constructor parameter of a virtual class */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <span class="typed"><span class="type">(Int)DeVirtualize.this.global.Name</span><a id="47768">fixParamName</a></span>(<span class="typed"><span class="type">Int</span><a id="48047">index</a></span>: <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span>) = <span class="typed"><span class="type">(String)DeVirtualize.this.global.Name</span><a href="../symtab/Names.scala.html#21096">newTermName</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;fix$&quot;)</span><span class="string">&quot;fix$&quot;</span></span><span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span><span class="typed"><span class="type">Int</span><a href="#48047">index</a></span>)

  <span class="comment">/** The field representing a constructor parameter of a virtual class */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <span class="typed"><span class="type">(DeVirtualize.this.global.Symbol,Int)DeVirtualize.this.global.Symbol</span><a id="47769">paramField</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a id="48050">clazz</a></span>: <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#21866">Symbol</a></span>, <span class="typed"><span class="type">Int</span><a id="48051">index</a></span>: <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span>) = <span class="typed"><span class="type">(scala.tools.nsc.Phase)(=&gt; DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol</span><a href="../symtab/SymbolTable.scala.html#21147">atPhase</a></span>(<span class="typed"><span class="type">=&gt; scala.tools.nsc.Phase</span><a href="../SubComponent.scala.html#29467">ownPhase</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Phase</span><a href="../Phase.scala.html#27787">next</a></span>) {
    <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48050">clazz</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Type</span><a href="../symtab/Symbols.scala.html#25231">info</a></span>.<span class="typed"><span class="type">(DeVirtualize.this.global.Name)DeVirtualize.this.global.Symbol</span><a href="../symtab/Types.scala.html#25678">decl</a></span>(<span class="typed"><span class="type">(DeVirtualize.this.global.Symbol,Int)DeVirtualize.this.global.Name</span><a href="#47767">paramFieldName</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48050">clazz</a></span>, <span class="typed"><span class="type">Int</span><a href="#48051">index</a></span>))
  }

  <span class="comment">/** The flags that an abstract type can inherit from its virtual class */</span>
  <span class="keyword">protected</span> <span class="keyword">val</span> <span class="typed"><span class="type">Long</span><span id="47771"><a id="47770">absTypeFlagMask</a></span></span> = <span class="typed"><span class="type">=&gt; Long</span><a href="../symtab/Flags.scala.html#20626">AccessFlags</a></span> <span class="typed"><span class="type">(Int)Long</span><a id="3261">|</a></span> <span class="typed"><span class="type">Int(16)</span><span >DEFERRED</span></span>

  <span class="comment">/** The flags that a factory method can inherit from its virtual class */</span>
  <span class="keyword">protected</span> <span class="keyword">val</span> <span class="typed"><span class="type">Long</span><span id="47773"><a id="47772">factoryFlagMask</a></span></span> = <span class="typed"><span class="type">=&gt; Long</span><a href="../symtab/Flags.scala.html#20626">AccessFlags</a></span>

  <span class="comment">/** Create a polytype with given type parameters and given type, or return just the type
   *  if type params is empty. */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <span class="typed"><span class="type">(List[DeVirtualize.this.global.Symbol],DeVirtualize.this.global.Type)DeVirtualize.this.global.Type</span><a id="47774">mkPolyType</a></span>(<span class="typed"><span class="type">List[DeVirtualize.this.global.Symbol]</span><a id="48054">tparams</a></span>: <span class="typed"><span class="type">List[DeVirtualize.this.global.Symbol]</span><a id="526">List</a></span>[Symbol], <span class="typed"><span class="type">DeVirtualize.this.global.Type</span><a id="48055">tp</a></span>: <span class="typed"><span class="type">DeVirtualize.this.global.Type</span><a href="../symtab/Types.scala.html#21944">Type</a></span>) = 
    <span class="typed"><span class="type">DeVirtualize.this.global.Type</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">List[DeVirtualize.this.global.Symbol]</span><a href="#48054">tparams</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a id="21645">isEmpty</a></span>) <span class="typed"><span class="type">DeVirtualize.this.global.Type</span><a href="#48055">tp</a></span> <span class="keyword">else</span> <span class="typed"><span class="type">(List[DeVirtualize.this.global.Symbol],DeVirtualize.this.global.Type)DeVirtualize.this.global.PolyType</span><a href="../symtab/Types.scala.html#43484">PolyType</a></span>(<span class="typed"><span class="type">List[DeVirtualize.this.global.Symbol]</span><a href="#48054">tparams</a></span>, <span class="typed"><span class="type">DeVirtualize.this.global.Type</span><a href="#48055">tp</a></span>)

  <span class="comment">/** A lazy type to complete `sym', which is is generated for virtual class
   *  `clazz'. 
   *  The info of the symbol is computed by method `getInfo'.
   *  It is wrapped in copies of the type parameters of `clazz'.
   */</span>
  <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="typed"><span class="type">class PolyTypeCompleter extends DeVirtualize.this.global.LazyType with ScalaObject</span><a id="47775">PolyTypeCompleter</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><span id="48061"><a id="48085">sym</a></span></span>: <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#21866">Symbol</a></span>, <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><span id="48062"><a id="48086">clazz</a></span></span>: <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#21866">Symbol</a></span>) <span class="keyword">extends</span> <span class="typed"><span class="type">DeVirtualize.this.global.LazyType</span><a href="../symtab/Types.scala.html#22019">LazyType</a></span> {
    <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Type</span><a id="48064">getInfo</a></span>: <span class="typed"><span class="type">DeVirtualize.this.global.Type</span><a href="../symtab/Types.scala.html#21944">Type</a></span>
    <span class="keyword">override</span> <span class="keyword">val</span> <span class="typed"><span class="type">List[DeVirtualize.this.global.Symbol]</span><span id="48066"><a id="48065">typeParams</a></span></span> = <span class="typed"><span class="type">(List[DeVirtualize.this.global.Symbol],DeVirtualize.this.global.Symbol)List[DeVirtualize.this.global.Symbol]</span><a href="../symtab/Symbols.scala.html#21876">cloneSymbols</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48062">clazz</a></span>.<span class="typed"><span class="type">=&gt; List[DeVirtualize.this.global.Symbol]</span><a href="../symtab/Symbols.scala.html#25242">typeParams</a></span>, <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48061">sym</a></span>)
    <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">(DeVirtualize.this.global.Symbol)Unit</span><a id="48067">complete</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a id="48088">sym</a></span>: <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#21866">Symbol</a></span>) {
      <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48088">sym</a></span>.<span class="typed"><span class="type">(DeVirtualize.this.global.Type)sym.type</span><a href="../symtab/Symbols.scala.html#25232">setInfo</a></span>(
        <span class="typed"><span class="type">(List[DeVirtualize.this.global.Symbol],DeVirtualize.this.global.Type)DeVirtualize.this.global.Type</span><a href="#47774">mkPolyType</a></span>(<span class="typed"><span class="type">=&gt; List[DeVirtualize.this.global.Symbol]</span><a href="#48065">typeParams</a></span>, <span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Type</span><a href="#48064">getInfo</a></span>.<span class="typed"><span class="type">(List[DeVirtualize.this.global.Symbol],List[DeVirtualize.this.global.Symbol])DeVirtualize.this.global.Type</span><a href="../symtab/Types.scala.html#25692">substSym</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48062">clazz</a></span>.<span class="typed"><span class="type">=&gt; List[DeVirtualize.this.global.Symbol]</span><a href="../symtab/Symbols.scala.html#25242">typeParams</a></span>, <span class="typed"><span class="type">=&gt; List[DeVirtualize.this.global.Symbol]</span><a href="#48065">typeParams</a></span>)))
    }
  }

  <span class="keyword">protected</span> <span class="keyword">def</span> <span class="typed"><span class="type">(DeVirtualize.this.global.Symbol)Boolean</span><a id="47776">wasVirtualClass</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a id="48092">sym</a></span>: <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#21866">Symbol</a></span>) = { 
    <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48092">sym</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../symtab/Symbols.scala.html#25182">isVirtualClass</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2750">||</a></span> {
      <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48092">sym</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Type</span><a href="../symtab/Symbols.scala.html#25231">info</a></span>
      <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48092">sym</a></span> <span class="typed"><span class="type">(Long)Boolean</span><a href="../symtab/Symbols.scala.html#25223">hasFlag</a></span> <span class="typed"><span class="type">=&gt; Long</span><a href="../symtab/Flags.scala.html#20574">notDEFERRED</a></span> 
    }
  }

  <span class="keyword">protected</span> <span class="keyword">def</span> <span class="typed"><span class="type">(DeVirtualize.this.global.Symbol)List[DeVirtualize.this.global.Symbol]</span><a id="47777">addOverriddenVirtuals</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a id="48094">clazz</a></span>: <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#21866">Symbol</a></span>) = {
    (<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48094">clazz</a></span>.<span class="typed"><span class="type">=&gt; List[DeVirtualize.this.global.Symbol]</span><a href="../symtab/Symbols.scala.html#25288">allOverriddenSymbols</a></span> <span class="typed"><span class="type">((DeVirtualize.this.global.Symbol) =&gt; Boolean)List[DeVirtualize.this.global.Symbol]</span><a id="21367">filter</a></span> <span class="typed"><span class="type">(DeVirtualize.this.global.Symbol)Boolean</span><a href="#47776">wasVirtualClass</a></span>) <span class="typed"><span class="type">(List[DeVirtualize.this.global.Symbol])List[DeVirtualize.this.global.Symbol]</span><a href="#48096" id="21339">:::</a></span> <span class="typed"><span class="type">(DeVirtualize.this.global.Symbol*)List[DeVirtualize.this.global.Symbol]</span><span id="21328"><a id="527">List</a></span></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48094">clazz</a></span>)
  }

  <span class="keyword">protected</span> <span class="keyword">def</span> <span class="typed"><span class="type">(DeVirtualize.this.global.Type)List[DeVirtualize.this.global.Type]</span><a id="47778">addOverriddenVirtuals</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Type</span><a id="48104">tpe</a></span>: <span class="typed"><span class="type">DeVirtualize.this.global.Type</span><a href="../symtab/Types.scala.html#21944">Type</a></span>) = <span class="typed"><span class="type">DeVirtualize.this.global.Type</span><a href="#48104">tpe</a></span> <span class="typed"><span class="type">List[DeVirtualize.this.global.Type]</span><span class="keyword">match</span></span> {
    <span class="typed"><span class="type">List[DeVirtualize.this.global.Type]</span><span class="keyword">case</span></span> <a id="1">TypeRef</a>(<span class="typed"><span class="type">DeVirtualize.this.global.Type</span><a id="48106">pre</a></span>, <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a id="48107">sym</a></span>, <span class="typed"><span class="type">List[DeVirtualize.this.global.Type]</span><a id="48108">args</a></span>) =&gt;
      { <span class="keyword">for</span> (<span class="typed"><span class="type">((DeVirtualize.this.global.Symbol) =&gt; DeVirtualize.this.global.Type)List[DeVirtualize.this.global.Type]</span><span id="21362"><span id="21367"><span id="48112"><a id="48116">vc</a></span></span></span></span> &lt;- <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48107">sym</a></span>.<span class="typed"><span class="type">=&gt; List[DeVirtualize.this.global.Symbol]</span><a href="../symtab/Symbols.scala.html#25288">allOverriddenSymbols</a></span> <span class="keyword">if</span> <span class="typed"><span class="type">(DeVirtualize.this.global.Symbol)Boolean</span><a href="#47776">wasVirtualClass</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48112">vc</a></span>))
        <span class="keyword">yield</span> <span class="typed"><span class="type">(DeVirtualize.this.global.Type,DeVirtualize.this.global.Symbol,List[DeVirtualize.this.global.Type])DeVirtualize.this.global.Type</span><a href="../symtab/Types.scala.html#22031">typeRef</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Type</span><a href="#48106">pre</a></span>, <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48116">vc</a></span>, <span class="typed"><span class="type">List[DeVirtualize.this.global.Type]</span><a href="#48108">args</a></span>) }.<span class="typed"><span class="type">=&gt; List[DeVirtualize.this.global.Type]</span><a id="21385">reverse</a></span> <span class="typed"><span class="type">(List[DeVirtualize.this.global.Type])List[DeVirtualize.this.global.Type]</span><a href="#48109" id="21339">:::</a></span> <span class="typed"><span class="type">(DeVirtualize.this.global.Type*)List[DeVirtualize.this.global.Type]</span><span id="21328"><a id="527">List</a></span></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Type</span><a href="#48104">tpe</a></span>)
  }

  <span class="keyword">protected</span> <span class="keyword">def</span> <span class="typed"><span class="type">(DeVirtualize.this.global.Symbol,Int,DeVirtualize.this.global.Type)DeVirtualize.this.global.Symbol</span><a id="47779">mkParamField</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a id="47972">clazz</a></span>: <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#21866">Symbol</a></span>, <span class="typed"><span class="type">Int</span><a id="47973">index</a></span>: <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span>, <span class="typed"><span class="type">DeVirtualize.this.global.Type</span><a id="47974">tpe</a></span>: <span class="typed"><span class="type">DeVirtualize.this.global.Type</span><a href="../symtab/Types.scala.html#21944">Type</a></span>): <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#21866">Symbol</a></span> = {
    <span class="keyword">val</span> <span class="typed"><span class="type">DeVirtualize.this.global.TermSymbol</span><a id="48121">param</a></span> = <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47972">clazz</a></span>.<span class="typed"><span class="type">(scala.tools.nsc.util.Position,DeVirtualize.this.global.Name)DeVirtualize.this.global.TermSymbol</span><a href="../symtab/Symbols.scala.html#25102">newMethod</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47972">clazz</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.util.Position</span><a href="../symtab/Symbols.scala.html#25087">pos</a></span>, <span class="typed"><span class="type">(DeVirtualize.this.global.Symbol,Int)DeVirtualize.this.global.Name</span><a href="#47767">paramFieldName</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47972">clazz</a></span>, <span class="typed"><span class="type">Int</span><a href="#47973">index</a></span>))
      .<span class="typed"><span class="type">(Long)DeVirtualize.this.global.TermSymbol</span><a href="../symtab/Symbols.scala.html#25220">setFlag</a></span>(PROTECTED | LOCAL | DEFERRED | EXPANDEDNAME | SYNTHETIC <span class="typed"><span class="type">Long(68726292497L)</span><span >|</span></span> STABLE)
    <span class="typed"><span class="type">(scala.tools.nsc.Phase)(=&gt; DeVirtualize.this.global.TermSymbol)DeVirtualize.this.global.TermSymbol</span><a href="../symtab/SymbolTable.scala.html#21147">atPhase</a></span>(<span class="typed"><span class="type">=&gt; scala.tools.nsc.Phase</span><a href="../SubComponent.scala.html#29467">ownPhase</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Phase</span><a href="../Phase.scala.html#27787">next</a></span>) {
      <span class="typed"><span class="type">DeVirtualize.this.global.TermSymbol</span><a href="#48121">param</a></span>.<span class="typed"><span class="type">(DeVirtualize.this.global.Type)param.type</span><a href="../symtab/Symbols.scala.html#25232">setInfo</a></span>(<span class="typed"><span class="type">(List[DeVirtualize.this.global.Symbol],DeVirtualize.this.global.Type)DeVirtualize.this.global.PolyType</span><a href="../symtab/Types.scala.html#43484">PolyType</a></span>(<span class="typed"><span class="type">object Nil</span><a id="335">List</a></span>(), <span class="typed"><span class="type">DeVirtualize.this.global.Type</span><a href="#47974">tpe</a></span>))
    }
    <span class="typed"><span class="type">DeVirtualize.this.global.TermSymbol</span><a href="#48121">param</a></span>
  }

  <span class="keyword">protected</span> <span class="keyword">def</span> <span class="typed"><span class="type">(DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol</span><a id="47780">mkAbstractType</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a id="47920">clazz</a></span>: <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#21866">Symbol</a></span>): <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#21866">Symbol</a></span> = {
    <span class="keyword">val</span> <span class="typed"><span class="type">DeVirtualize.this.global.TypeSymbol</span><a id="48131">cabstype</a></span> = <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47920">clazz</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#25211">owner</a></span>.<span class="typed"><span class="type">(scala.tools.nsc.util.Position,DeVirtualize.this.global.Name)DeVirtualize.this.global.TypeSymbol</span><a href="../symtab/Symbols.scala.html#25114">newAbstractType</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47920">clazz</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.util.Position</span><a href="../symtab/Symbols.scala.html#25087">pos</a></span>, <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47920">clazz</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Name</span><a href="../symtab/Symbols.scala.html#25215">name</a></span>)
      .<span class="typed"><span class="type">(Long)DeVirtualize.this.global.TypeSymbol</span><a href="../symtab/Symbols.scala.html#25220">setFlag</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47920">clazz</a></span>.<span class="typed"><span class="type">=&gt; Long</span><a href="../symtab/Symbols.scala.html#25218">flags</a></span> <span class="typed"><span class="type">(Long)Long</span><a id="3276">&amp;</a></span> <span class="typed"><span class="type">=&gt; Long</span><a href="#47770">absTypeFlagMask</a></span> <span class="typed"><span class="type">(Int)Long</span><a id="3261">|</a></span> <span class="typed"><span class="type">Int(2097152)</span><span >SYNTHETIC</span></span>)
      .<span class="typed"><span class="type">(List[DeVirtualize.this.global.AnnotationInfo])DeVirtualize.this.global.TypeSymbol</span><a href="../symtab/Symbols.scala.html#25093">setAttributes</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47920">clazz</a></span>.<span class="typed"><span class="type">=&gt; List[DeVirtualize.this.global.AnnotationInfo]</span><a href="../symtab/Symbols.scala.html#25090">attributes</a></span>)
    <span class="typed"><span class="type">(scala.tools.nsc.Phase)(=&gt; DeVirtualize.this.global.TypeSymbol)DeVirtualize.this.global.TypeSymbol</span><a href="../symtab/SymbolTable.scala.html#21147">atPhase</a></span>(<span class="typed"><span class="type">=&gt; scala.tools.nsc.Phase</span><a href="../SubComponent.scala.html#29467">ownPhase</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Phase</span><a href="../Phase.scala.html#27787">next</a></span>) {
      <span class="typed"><span class="type">DeVirtualize.this.global.TypeSymbol</span><a href="#48131">cabstype</a></span> <span class="typed"><span class="type">(DeVirtualize.this.global.Type)cabstype.type</span><a href="../symtab/Symbols.scala.html#34732">setInfo</a></span> <span class="typed"><span class="type">template $anon extends DeVirtualize.this.PolyTypeCompleter</span><a id="48148" class="keyword">new</a></span> <span class="typed"><span class="type">DeVirtualize.this.PolyTypeCompleter</span><a href="#47775">PolyTypeCompleter</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.TypeSymbol</span><a href="#48131">cabstype</a></span>, <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47920">clazz</a></span>) {
        <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; DeVirtualize.this.global.TypeBounds</span><a id="48150">getInfo</a></span> = {
          <span class="keyword">val</span> <span class="typed"><span class="type">List[DeVirtualize.this.global.Type]</span><a id="48152">parents1</a></span> = <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47920">clazz</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Type</span><a href="../symtab/Symbols.scala.html#25231">info</a></span>.<span class="typed"><span class="type">=&gt; List[DeVirtualize.this.global.Type]</span><a href="../symtab/Types.scala.html#25659">parents</a></span> <span class="typed"><span class="type">((DeVirtualize.this.global.Type) =&gt; DeVirtualize.this.global.Type)List[DeVirtualize.this.global.Type]</span><a id="21362">map</a></span> {
            <span class="typed"><span class="type">DeVirtualize.this.global.Type</span><a id="48157">p</a></span> =&gt; <span class="typed"><span class="type">(DeVirtualize.this.global.Type)DeVirtualize.this.global.Type</span><a href="#47860">devirtualizeMap</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Type</span><a href="#48157">p</a></span>.<span class="typed"><span class="type">(List[DeVirtualize.this.global.Symbol],List[DeVirtualize.this.global.Symbol])DeVirtualize.this.global.Type</span><a href="../symtab/Types.scala.html#25692">substSym</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47920">clazz</a></span>.<span class="typed"><span class="type">=&gt; List[DeVirtualize.this.global.Symbol]</span><a href="../symtab/Symbols.scala.html#25242">typeParams</a></span>, <span class="typed"><span class="type">=&gt; List[DeVirtualize.this.global.Symbol]</span><a href="#48065">typeParams</a></span>))
          }
          <span class="keyword">val</span> <span class="typed"><span class="type">List[DeVirtualize.this.global.Type]</span><a id="48153">parents2</a></span> = <span class="typed"><span class="type">(DeVirtualize.this.global.Symbol)List[DeVirtualize.this.global.Symbol]</span><a href="#47777">addOverriddenVirtuals</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47920">clazz</a></span>) <span class="typed"><span class="type">((DeVirtualize.this.global.Symbol) =&gt; DeVirtualize.this.global.Type)List[DeVirtualize.this.global.Type]</span><a id="21362">map</a></span> {
            <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a id="48162">c</a></span> =&gt; <span class="typed"><span class="type">(DeVirtualize.this.global.Type,DeVirtualize.this.global.Symbol,List[DeVirtualize.this.global.Type])DeVirtualize.this.global.Type</span><a href="../symtab/Types.scala.html#22031">typeRef</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47920">clazz</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#25211">owner</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Type</span><a href="../symtab/Symbols.scala.html#25263">thisType</a></span>, <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48162">c</a></span>, <span class="typed"><span class="type">=&gt; List[DeVirtualize.this.global.Symbol]</span><a href="#48065">typeParams</a></span> <span class="typed"><span class="type">((DeVirtualize.this.global.Symbol) =&gt; DeVirtualize.this.global.Type)List[DeVirtualize.this.global.Type]</span><a id="21362">map</a></span> (<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48165">_</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Type</span><a href="../symtab/Symbols.scala.html#25230">tpe</a></span>))
          }
          <span class="typed"><span class="type">(DeVirtualize.this.global.Type,DeVirtualize.this.global.Type)DeVirtualize.this.global.TypeBounds</span><a href="../symtab/Types.scala.html#22025">mkTypeBounds</a></span>(<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Symbol</span><a href="../symtab/Definitions.scala.html#25785">NothingClass</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Type</span><a href="../symtab/Symbols.scala.html#25230">tpe</a></span>, <span class="typed"><span class="type">(List[DeVirtualize.this.global.Type])DeVirtualize.this.global.Type</span><a href="../symtab/Types.scala.html#22036">intersectionType</a></span>(<span class="typed"><span class="type">List[DeVirtualize.this.global.Type]</span><a href="#48152">parents1</a></span> <span class="typed"><span class="type">(List[DeVirtualize.this.global.Type])List[DeVirtualize.this.global.Type]</span><a href="#48169" id="21339">:::</a></span> <span class="typed"><span class="type">List[DeVirtualize.this.global.Type]</span><a href="#48153">parents2</a></span>))
        }
      }
    }
  }

  <span class="keyword">protected</span> <span class="keyword">def</span> <span class="typed"><span class="type">(DeVirtualize.this.global.Type,Int)List[List[(DeVirtualize.this.global.Type, Int)]]</span><a id="47781">paramTypesAndIndices</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Type</span><a id="47958">tpe</a></span>: <span class="typed"><span class="type">DeVirtualize.this.global.Type</span><a href="../symtab/Types.scala.html#21944">Type</a></span>, <span class="typed"><span class="type">Int</span><a id="47959">start</a></span>: <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span>): <span class="typed"><span class="type">List[List[(DeVirtualize.this.global.Type, Int)]]</span><a id="526">List</a></span>[List[(Type, Int)]] = <span class="typed"><span class="type">DeVirtualize.this.global.Type</span><a href="#47958">tpe</a></span> <span class="typed"><span class="type">List[List[(DeVirtualize.this.global.Type, Int)]]</span><span class="keyword">match</span></span> {
    <span class="typed"><span class="type">List[List[(DeVirtualize.this.global.Type, Int)]]</span><span class="keyword">case</span></span> <a id="1">PolyType</a>(_, <span class="typed"><span class="type">DeVirtualize.this.global.Type</span><a id="48172">restpe</a></span>) =&gt; <span class="typed"><span class="type">(DeVirtualize.this.global.Type,Int)List[List[(DeVirtualize.this.global.Type, Int)]]</span><a href="#47781">paramTypesAndIndices</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Type</span><a href="#48172">restpe</a></span>, <span class="typed"><span class="type">Int</span><a href="#47959">start</a></span>)
    <span class="typed"><span class="type">List[List[(DeVirtualize.this.global.Type, Int)]]</span><span class="keyword">case</span></span> <a id="1">MethodType</a>(<span class="typed"><span class="type">List[DeVirtualize.this.global.Type]</span><a id="48173">formals</a></span>, <span class="typed"><span class="type">DeVirtualize.this.global.Type</span><a id="48174">restpe</a></span>) =&gt;
      <span class="keyword">val</span> <span class="typed"><span class="type">Int</span><a id="48175">end</a></span> = <span class="typed"><span class="type">Int</span><a href="#47959">start</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">+</a></span> <span class="typed"><span class="type">List[DeVirtualize.this.global.Type]</span><a href="#48173">formals</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a id="21345">length</a></span>
      (<span class="typed"><span class="type">List[DeVirtualize.this.global.Type]</span><a href="#48173">formals</a></span> <span class="typed"><span class="type">(List[Int])List[(DeVirtualize.this.global.Type, Int)]</span><a id="21386">zip</a></span> <span class="typed"><span class="type">object List</span><a id="527">List</a></span>.<span class="typed"><span class="type">(Int,Int)List[Int]</span><a id="21412">range</a></span>(<span class="typed"><span class="type">Int</span><a href="#47959">start</a></span>, <span class="typed"><span class="type">Int</span><a href="#48175">end</a></span>)) <span class="typed"><span class="type">(List[(DeVirtualize.this.global.Type, Int)])List[List[(DeVirtualize.this.global.Type, Int)]]</span><a href="#48177" id="21335">::</a></span> <span class="typed"><span class="type">(DeVirtualize.this.global.Type,Int)List[List[(DeVirtualize.this.global.Type, Int)]]</span><a href="#47781">paramTypesAndIndices</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Type</span><a href="#48174">restpe</a></span>, <span class="typed"><span class="type">Int</span><a href="#48175">end</a></span>)
    <span class="typed"><span class="type">List[Nothing]</span><span class="keyword">case</span></span> _ =&gt;
      <span class="typed"><span class="type">object Nil</span><a id="335">List</a></span>()
  }
    
  <span class="comment">/* Add a factory symbol for a virtual class  
   *
   *  attrs mods class VC[Ts] &lt;: Ps { decls }
   *  with base classes BC[Us]'s
   *
   * which corresponds to the following definition :
   *
   *  attrs mods3 def new$VC[Ts](): VC[Ts] = {
   *    class VC$fix extends v2w(BC's[Ts]) with VC$trait[Ts] { ... }
   *    new VC$fix
   *  }
   *
   * where
   *  
   *  mods3  are the modifiers inherited to factories
   *  v2w maps every virtual class to its workertrait and leaves other types alone.
   *
   *  @param  clazz    The virtual class for which factory is added
   *  @param  owner    The owner for which factory is added as a member
   *  @param  scope    The scope into which factory is entered
   */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">(DeVirtualize.this.global.Symbol,DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol</span><a id="47782">mkFactory</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a id="47952">clazz</a></span>: <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#21866">Symbol</a></span>, <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a id="47953">owner</a></span>: <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#21866">Symbol</a></span>): <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#21866">Symbol</a></span> = {
    <span class="keyword">val</span> <span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a id="48183">pos</a></span> = <span class="typed"><span class="type">scala.tools.nsc.util.Position</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47952">clazz</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#25211">owner</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47953">owner</a></span>) <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47952">clazz</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.util.Position</span><a href="../symtab/Symbols.scala.html#25087">pos</a></span> <span class="keyword">else</span> <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47953">owner</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.util.Position</span><a href="../symtab/Symbols.scala.html#25087">pos</a></span>
    <span class="keyword">val</span> <span class="typed"><span class="type">DeVirtualize.this.global.TermSymbol</span><a id="48184">factory</a></span> = <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47953">owner</a></span>.<span class="typed"><span class="type">(scala.tools.nsc.util.Position,DeVirtualize.this.global.Name)DeVirtualize.this.global.TermSymbol</span><a href="../symtab/Symbols.scala.html#25102">newMethod</a></span>(<span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a href="#48183">pos</a></span>, <span class="typed"><span class="type">(DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Name</span><a href="#47762">factoryName</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47952">clazz</a></span>))
      .<span class="typed"><span class="type">(Long)DeVirtualize.this.global.TermSymbol</span><a href="../symtab/Symbols.scala.html#25220">setFlag</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47952">clazz</a></span>.<span class="typed"><span class="type">=&gt; Long</span><a href="../symtab/Symbols.scala.html#25218">flags</a></span> <span class="typed"><span class="type">(Long)Long</span><a id="3276">&amp;</a></span> <span class="typed"><span class="type">=&gt; Long</span><a href="#47772">factoryFlagMask</a></span> <span class="typed"><span class="type">(Int)Long</span><a id="3261">|</a></span> <span class="typed"><span class="type">Int(2097152)</span><span >SYNTHETIC</span></span>)
      .<span class="typed"><span class="type">(List[DeVirtualize.this.global.AnnotationInfo])DeVirtualize.this.global.TermSymbol</span><a href="../symtab/Symbols.scala.html#25093">setAttributes</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47952">clazz</a></span>.<span class="typed"><span class="type">=&gt; List[DeVirtualize.this.global.AnnotationInfo]</span><a href="../symtab/Symbols.scala.html#25090">attributes</a></span>)
    <span class="typed"><span class="type">DeVirtualize.this.global.TermSymbol</span><a href="#48184">factory</a></span> <span class="typed"><span class="type">(DeVirtualize.this.global.Type)factory.type</span><a href="../symtab/Symbols.scala.html#25232">setInfo</a></span> <span class="typed"><span class="type">template $anon extends DeVirtualize.this.PolyTypeCompleter</span><a id="48193" class="keyword">new</a></span> <span class="typed"><span class="type">DeVirtualize.this.PolyTypeCompleter</span><a href="#47775">PolyTypeCompleter</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.TermSymbol</span><a href="#48184">factory</a></span>, <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47952">clazz</a></span>) {
      <span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(DeVirtualize.this.global.Type)DeVirtualize.this.global.Type</span><a id="48195">copyType</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Type</span><a id="48198">tpe</a></span>: <span class="typed"><span class="type">DeVirtualize.this.global.Type</span><a href="../symtab/Types.scala.html#21944">Type</a></span>): <span class="typed"><span class="type">DeVirtualize.this.global.Type</span><a href="../symtab/Types.scala.html#21944">Type</a></span> = <span class="typed"><span class="type">DeVirtualize.this.global.Type</span><a href="#48198">tpe</a></span> <span class="typed"><span class="type">DeVirtualize.this.global.Type</span><span class="keyword">match</span></span> {
        <span class="typed"><span class="type">DeVirtualize.this.global.MethodType</span><span class="keyword">case</span></span> <a id="1">MethodType</a>(<span class="typed"><span class="type">List[DeVirtualize.this.global.Type]</span><a id="48199">formals</a></span>, <span class="typed"><span class="type">DeVirtualize.this.global.Type</span><a id="48200">restpe</a></span>) =&gt; <span class="typed"><span class="type">(List[DeVirtualize.this.global.Type],DeVirtualize.this.global.Type)DeVirtualize.this.global.MethodType</span><a href="../symtab/Types.scala.html#31175">MethodType</a></span>(<span class="typed"><span class="type">List[DeVirtualize.this.global.Type]</span><a href="#48199">formals</a></span>, <span class="typed"><span class="type">(DeVirtualize.this.global.Type)DeVirtualize.this.global.Type</span><a href="#48195">copyType</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Type</span><a href="#48200">restpe</a></span>))
        <span class="typed"><span class="type">DeVirtualize.this.global.PolyType</span><span class="keyword">case</span></span> <a id="1">PolyType</a>(<span class="typed"><span class="type">(List[DeVirtualize.this.global.Symbol])Some[List[DeVirtualize.this.global.Symbol]]</span><span id="21410"><a href="#48201" id="527">List</a></span></span>(), <span class="typed"><span class="type">DeVirtualize.this.global.Type</span><a id="48204">restpe</a></span>) =&gt; <span class="typed"><span class="type">(List[DeVirtualize.this.global.Symbol],DeVirtualize.this.global.Type)DeVirtualize.this.global.PolyType</span><a href="../symtab/Types.scala.html#43484">PolyType</a></span>(<span class="typed"><span class="type">object Nil</span><a id="335">List</a></span>(), <span class="typed"><span class="type">(DeVirtualize.this.global.Type)DeVirtualize.this.global.Type</span><a href="#48195">copyType</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Type</span><a href="#48204">restpe</a></span>))
        <span class="typed"><span class="type">Nothing</span><span class="keyword">case</span></span> <a id="1">PolyType</a>(_, _) =&gt; <span class="typed"><span class="type">Nothing</span><span class="keyword">throw</span></span> <span class="typed"><span class="type">(java.lang.String)java.lang.Error</span><a id="27228" class="keyword">new</a></span> <span class="typed"><span class="type">java.lang.Error</span><span id="5975"><a id="821">Error</a></span></span>(<span class="typed"><span class="type">java.lang.String(&quot;bad case: &quot;)</span><span class="string">&quot;bad case: &quot;</span></span><span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span><span class="typed"><span class="type">DeVirtualize.this.global.Type</span><a href="#48198">tpe</a></span>)
        <span class="typed"><span class="type">DeVirtualize.this.global.Type</span><span class="keyword">case</span></span> _ =&gt; <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47953">owner</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Type</span><a href="../symtab/Symbols.scala.html#25263">thisType</a></span>.<span class="typed"><span class="type">(DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Type</span><a href="../symtab/Types.scala.html#25690">memberType</a></span>(<span class="typed"><span class="type">(DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol</span><a href="#47765">abstractType</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47952">clazz</a></span>))
      }
      <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Type</span><a id="48196">getInfo</a></span> = <span class="typed"><span class="type">(DeVirtualize.this.global.Type)DeVirtualize.this.global.Type</span><a href="#48195">copyType</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#47952">clazz</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#25259">primaryConstructor</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Type</span><a href="../symtab/Symbols.scala.html#25230">tpe</a></span>)
    }
    <span class="typed"><span class="type">DeVirtualize.this.global.TermSymbol</span><a href="#48184">factory</a></span>
  }

  <span class="keyword">def</span> <span class="typed"><span class="type">(List[DeVirtualize.this.global.Type])List[DeVirtualize.this.global.Type]</span><a id="47783">removeDuplicates</a></span>(<span class="typed"><span class="type">List[DeVirtualize.this.global.Type]</span><a id="48208">ts</a></span>: <span class="typed"><span class="type">List[DeVirtualize.this.global.Type]</span><a id="526">List</a></span>[Type]): <span class="typed"><span class="type">List[DeVirtualize.this.global.Type]</span><a id="526">List</a></span>[Type] = <span class="typed"><span class="type">List[DeVirtualize.this.global.Type]</span><a href="#48208">ts</a></span> <span class="typed"><span class="type">List[DeVirtualize.this.global.Type]</span><span class="keyword">match</span></span> {
    <span class="typed"><span class="type">List[Nothing]</span><span class="keyword">case</span></span> <span class="typed"><span class="type">(List[DeVirtualize.this.global.Type])Some[List[DeVirtualize.this.global.Type]]</span><span id="21410"><a href="#48209" id="527">List</a></span></span>() =&gt; <span class="typed"><span class="type">object Nil</span><a id="335">List</a></span>()
    <span class="typed"><span class="type">List[DeVirtualize.this.global.Type]</span><span class="keyword">case</span></span> <span class="typed"><span class="type">DeVirtualize.this.global.Type</span><a id="48213">t</a></span> <a id="1">::</a> <span class="typed"><span class="type">List[DeVirtualize.this.global.Type]</span><a id="48214">ts1</a></span> =&gt; <span class="typed"><span class="type">DeVirtualize.this.global.Type</span><a href="#48213">t</a></span> <span class="typed"><span class="type">(DeVirtualize.this.global.Type)List[DeVirtualize.this.global.Type]</span><a href="#48215" id="21335">::</a></span> <span class="typed"><span class="type">(List[DeVirtualize.this.global.Type])List[DeVirtualize.this.global.Type]</span><a href="#47783">removeDuplicates</a></span>(<span class="typed"><span class="type">List[DeVirtualize.this.global.Type]</span><a href="#48214">ts1</a></span> <span class="typed"><span class="type">((DeVirtualize.this.global.Type) =&gt; Boolean)List[DeVirtualize.this.global.Type]</span><a id="21367">filter</a></span> (<span class="typed"><span class="type">DeVirtualize.this.global.Type</span><a href="#48217">_</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Symbol</span><a href="../symtab/Types.scala.html#25650">typeSymbol</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5793">!=</a></span> <span class="typed"><span class="type">DeVirtualize.this.global.Type</span><a href="#48213">t</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Symbol</span><a href="../symtab/Types.scala.html#25650">typeSymbol</a></span>))
  }

  <span class="comment">/** The concrete class symbol VC$fix in the factory symbol (@see mkFactory)
   *  @param clazz    the virtual class
   *  @param factory  the factory which returns an instance of this class
   */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <span class="typed"><span class="type">(DeVirtualize.this.global.Symbol,DeVirtualize.this.global.Symbol)DeVirtualize.this.global.ClassSymbol</span><a id="47784">mkConcreteClass</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a id="48222">clazz</a></span>: <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#21866">Symbol</a></span>, <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a id="48223">factory</a></span>: <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#21866">Symbol</a></span>) = {
    <span class="keyword">val</span> <span class="typed"><span class="type">DeVirtualize.this.global.ClassSymbol</span><a id="48225">cclazz</a></span> = <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48223">factory</a></span>.<span class="typed"><span class="type">(scala.tools.nsc.util.Position,DeVirtualize.this.global.Name)DeVirtualize.this.global.ClassSymbol</span><a href="../symtab/Symbols.scala.html#25117">newClass</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48222">clazz</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.util.Position</span><a href="../symtab/Symbols.scala.html#25087">pos</a></span>, <span class="typed"><span class="type">(DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Name</span><a href="#47761">concreteClassName</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48222">clazz</a></span>))
      .<span class="typed"><span class="type">(Long)DeVirtualize.this.global.ClassSymbol</span><a href="../symtab/Symbols.scala.html#25220">setFlag</a></span>(FINAL <span class="typed"><span class="type">Long(2097184L)</span><span >|</span></span> SYNTHETIC)
      .<span class="typed"><span class="type">(List[DeVirtualize.this.global.AnnotationInfo])DeVirtualize.this.global.ClassSymbol</span><a href="../symtab/Symbols.scala.html#25093">setAttributes</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48222">clazz</a></span>.<span class="typed"><span class="type">=&gt; List[DeVirtualize.this.global.AnnotationInfo]</span><a href="../symtab/Symbols.scala.html#25090">attributes</a></span>)
      
    <span class="typed"><span class="type">DeVirtualize.this.global.ClassSymbol</span><a href="#48225">cclazz</a></span> <span class="typed"><span class="type">(DeVirtualize.this.global.Type)cclazz.type</span><a href="../symtab/Symbols.scala.html#34732">setInfo</a></span> <span class="typed"><span class="type">template $anon extends DeVirtualize.this.global.LazyType</span><a id="48231" class="keyword">new</a></span> <span class="typed"><span class="type">DeVirtualize.this.global.LazyType</span><a href="../symtab/Types.scala.html#22019">LazyType</a></span> {
      <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">(DeVirtualize.this.global.Symbol)Unit</span><a id="48233">complete</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a id="48235">sym</a></span>: <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#21866">Symbol</a></span>) {
        <span class="keyword">val</span> <span class="typed"><span class="type">List[DeVirtualize.this.global.Type]</span><a id="48236">parents1</a></span> = <span class="typed"><span class="type">(scala.tools.nsc.Phase)(=&gt; List[DeVirtualize.this.global.Type])List[DeVirtualize.this.global.Type]</span><a href="../symtab/SymbolTable.scala.html#21147">atPhase</a></span>(<span class="typed"><span class="type">=&gt; scala.tools.nsc.Phase</span><a href="../SubComponent.scala.html#29467">ownPhase</a></span>) {
          <span class="keyword">var</span> <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a id="48238">superclazz</a></span> = <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48222">clazz</a></span>
          <span class="typed"><span class="type">Unit</span><a href="#48240" class="keyword">do</a></span> {
            <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48238">superclazz</a></span> = <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48238">superclazz</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Type</span><a href="../symtab/Symbols.scala.html#25231">info</a></span>.<span class="typed"><span class="type">=&gt; List[DeVirtualize.this.global.Type]</span><a href="../symtab/Types.scala.html#25659">parents</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Type</span><a id="21332">head</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Symbol</span><a href="../symtab/Types.scala.html#25650">typeSymbol</a></span>
          } <span class="keyword">while</span> (<span class="typed"><span class="type">(DeVirtualize.this.global.Symbol)Boolean</span><a href="#47776">wasVirtualClass</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48238">superclazz</a></span>)) 
          <span class="keyword">val</span> <span class="typed"><span class="type">List[DeVirtualize.this.global.Symbol]</span><a id="48239">bcs</a></span> = <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48238">superclazz</a></span> <span class="typed"><span class="type">(DeVirtualize.this.global.Symbol)List[DeVirtualize.this.global.Symbol]</span><a href="#48241" id="21335">::</a></span> (<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48222">clazz</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Type</span><a href="../symtab/Symbols.scala.html#25231">info</a></span>.<span class="typed"><span class="type">=&gt; List[DeVirtualize.this.global.Symbol]</span><a href="../symtab/Types.scala.html#25708">baseClasses</a></span> <span class="typed"><span class="type">((DeVirtualize.this.global.Symbol) =&gt; Boolean)List[DeVirtualize.this.global.Symbol]</span><a id="21357">takeWhile</a></span> (<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48238">superclazz</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a href="#48247" id="5793">!=</a></span> )).<span class="typed"><span class="type">=&gt; List[DeVirtualize.this.global.Symbol]</span><a id="21385">reverse</a></span>
          <span class="typed"><span class="type">(Any)Unit</span><span id="6112"><a id="821">println</a></span></span>(<span class="typed"><span class="type">java.lang.String(&quot;MKConcrete1 &quot;)</span><span class="string">&quot;MKConcrete1 &quot;</span></span><span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span><span class="typed"><span class="type">DeVirtualize.this.global.ClassSymbol</span><a href="#48225">cclazz</a></span><span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span><span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48223">factory</a></span>.<span class="typed"><span class="type">=&gt; String</span><a href="../symtab/Symbols.scala.html#25316">locationString</a></span><span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span><span class="typed"><span class="type">java.lang.String(&quot; &quot;)</span><span class="string">&quot; &quot;</span></span><span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span><span class="typed"><span class="type">List[DeVirtualize.this.global.Symbol]</span><a href="#48239">bcs</a></span><span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span><span class="typed"><span class="type">java.lang.String(&quot; from &quot;)</span><span class="string">&quot; from &quot;</span></span><span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span><span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48222">clazz</a></span><span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span><span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48222">clazz</a></span>.<span class="typed"><span class="type">=&gt; String</span><a href="../symtab/Symbols.scala.html#25316">locationString</a></span>)
          <span class="typed"><span class="type">(Any)Unit</span><span id="6112"><a id="821">println</a></span></span>(<span class="typed"><span class="type">java.lang.String(&quot;MKConcrete2 &quot;)</span><span class="string">&quot;MKConcrete2 &quot;</span></span><span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span><span class="typed"><span class="type">DeVirtualize.this.global.ClassSymbol</span><a href="#48225">cclazz</a></span><span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span><span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48223">factory</a></span>.<span class="typed"><span class="type">=&gt; String</span><a href="../symtab/Symbols.scala.html#25316">locationString</a></span><span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span><span class="typed"><span class="type">java.lang.String(&quot; &quot;)</span><span class="string">&quot; &quot;</span></span><span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span>(<span class="typed"><span class="type">List[DeVirtualize.this.global.Symbol]</span><a href="#48239">bcs</a></span> <span class="typed"><span class="type">((DeVirtualize.this.global.Symbol) =&gt; DeVirtualize.this.global.Type)List[DeVirtualize.this.global.Type]</span><a id="21362">map</a></span> <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48223">factory</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#25211">owner</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Type</span><a href="../symtab/Symbols.scala.html#25263">thisType</a></span>.<span class="typed"><span class="type">(DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Type</span><a href="../symtab/Types.scala.html#25690">memberType</a></span>))
          <span class="typed"><span class="type">List[DeVirtualize.this.global.Symbol]</span><a href="#48239">bcs</a></span> <span class="typed"><span class="type">((DeVirtualize.this.global.Symbol) =&gt; DeVirtualize.this.global.Type)List[DeVirtualize.this.global.Type]</span><a id="21362">map</a></span> <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48223">factory</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#25211">owner</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Type</span><a href="../symtab/Symbols.scala.html#25263">thisType</a></span>.<span class="typed"><span class="type">(DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Type</span><a href="../symtab/Types.scala.html#25690">memberType</a></span>
        }
        <span class="typed"><span class="type">(scala.tools.nsc.Phase)(=&gt; DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol</span><a href="../symtab/SymbolTable.scala.html#21147">atPhase</a></span>(<span class="typed"><span class="type">=&gt; scala.tools.nsc.Phase</span><a href="../SubComponent.scala.html#29467">ownPhase</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Phase</span><a href="../Phase.scala.html#27787">next</a></span>) {
          <span class="keyword">val</span> <span class="typed"><span class="type">List[DeVirtualize.this.global.Type]</span><a id="48263">parents2</a></span> = 
            <span class="typed"><span class="type">(List[DeVirtualize.this.global.Type])List[DeVirtualize.this.global.Type]</span><a href="#47783">removeDuplicates</a></span>(<span class="typed"><span class="type">List[DeVirtualize.this.global.Type]</span><a href="#48236">parents1</a></span>.<span class="typed"><span class="type">((DeVirtualize.this.global.Type) =&gt; Iterable[DeVirtualize.this.global.Type])List[DeVirtualize.this.global.Type]</span><a id="21383">flatMap</a></span>(<span class="typed"><span class="type">(DeVirtualize.this.global.Type)List[DeVirtualize.this.global.Type]</span><a href="#47778">addOverriddenVirtuals</a></span>))
            .<span class="typed"><span class="type">((DeVirtualize.this.global.Type) =&gt; DeVirtualize.this.global.Type)List[DeVirtualize.this.global.Type]</span><a id="21362">map</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Type</span><a href="#48280">_</a></span>.<span class="typed"><span class="type">(List[DeVirtualize.this.global.Symbol],List[DeVirtualize.this.global.Symbol])DeVirtualize.this.global.Type</span><a href="../symtab/Types.scala.html#25692">substSym</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48222">clazz</a></span>.<span class="typed"><span class="type">=&gt; List[DeVirtualize.this.global.Symbol]</span><a href="../symtab/Symbols.scala.html#25242">typeParams</a></span>, <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48223">factory</a></span>.<span class="typed"><span class="type">=&gt; List[DeVirtualize.this.global.Symbol]</span><a href="../symtab/Symbols.scala.html#25242">typeParams</a></span>))
          <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48235">sym</a></span> <span class="typed"><span class="type">(DeVirtualize.this.global.Type)sym.type</span><a href="../symtab/Symbols.scala.html#25232">setInfo</a></span> <span class="typed"><span class="type">(List[DeVirtualize.this.global.Type],DeVirtualize.this.global.Scope,DeVirtualize.this.global.Symbol)DeVirtualize.this.global.ClassInfoType</span><a href="../symtab/Types.scala.html#43446">ClassInfoType</a></span>(<span class="typed"><span class="type">List[DeVirtualize.this.global.Type]</span><a href="#48263">parents2</a></span>, <span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Scope</span><a href="../symtab/Scopes.scala.html#22207">newScope</a></span>, <span class="typed"><span class="type">DeVirtualize.this.global.ClassSymbol</span><a href="#48225">cclazz</a></span>)
        }
      }
    }

    <span class="typed"><span class="type">DeVirtualize.this.global.ClassSymbol</span><a href="#48225">cclazz</a></span>
  }

  <span class="comment">/** Perform the following tree transformations:
   *  
   *  1. Add trees for abstract types (@see devirtualize),
   *     worker traits (@see devirtualize)
   *     and factories (@see mkFactory)
   *  
   *  2. Replace a new VC().init(...) where VC is a virtual class with new$VC(...)
   *  
   *  3. Replace references to VC.this and VC.super where VC is a virtual class
   *     with VC$trait.this and VC$trait.super
   *
   *  4. Transform type references to virtual classes to type references of corresponding
   *     abstract types.
   */</span>
  <span class="keyword">class</span> <span class="typed"><span class="type">class DeVirtualizeTransformer extends DeVirtualize.this.TypingTransformer with ScalaObject</span><a id="47785">DeVirtualizeTransformer</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.CompilationUnit</span><span id="47821"><a id="47830">unit</a></span></span>: <span class="typed"><span class="type">DeVirtualize.this.global.CompilationUnit</span><a href="../CompilationUnits.scala.html#22571">CompilationUnit</a></span>) <span class="keyword">extends</span> <span class="typed"><span class="type">DeVirtualize.this.TypingTransformer</span><a href="../transform/TypingTransformers.scala.html#29603">TypingTransformer</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.CompilationUnit</span><a href="#47830">unit</a></span>) { 
    <span class="comment">// all code is executed at phase ownPhase.next</span>
    
    <span class="comment">/** Add trees for abstract types, worker traits, and factories (@see mkFactory)
     *  to template body `stats'
     */</span>  
    <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">(List[DeVirtualize.this.global.Tree],DeVirtualize.this.global.Symbol)List[DeVirtualize.this.global.Tree]</span><a id="47823">transformStats</a></span>(<span class="typed"><span class="type">List[DeVirtualize.this.global.Tree]</span><a id="48285">stats</a></span>: <span class="typed"><span class="type">List[DeVirtualize.this.global.Tree]</span><a id="526">List</a></span>[Tree], <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a id="48286">exprOwner</a></span>: <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#21866">Symbol</a></span>): <span class="typed"><span class="type">List[DeVirtualize.this.global.Tree]</span><a id="526">List</a></span>[Tree] = {
      <span class="keyword">val</span> <span class="typed"><span class="type">List[DeVirtualize.this.global.Tree]</span><a id="48287">stats1</a></span> = <span class="typed"><span class="type">List[DeVirtualize.this.global.Tree]</span><a href="#48285">stats</a></span> <span class="typed"><span class="type">((DeVirtualize.this.global.Tree) =&gt; Iterable[DeVirtualize.this.global.Tree])List[DeVirtualize.this.global.Tree]</span><a id="21383">flatMap</a></span> <span class="typed"><span class="type">(DeVirtualize.this.global.Tree)List[DeVirtualize.this.global.Tree]</span><a href="#47827">transformStat</a></span>
      <span class="keyword">val</span> <span class="typed"><span class="type">List[DeVirtualize.this.global.Symbol]</span><a id="48288">fclasses</a></span> = <span class="typed"><span class="type">(scala.tools.nsc.Phase)(=&gt; List[DeVirtualize.this.global.Symbol])List[DeVirtualize.this.global.Symbol]</span><a href="../symtab/SymbolTable.scala.html#21147">atPhase</a></span>(<span class="typed"><span class="type">=&gt; scala.tools.nsc.Phase</span><a href="../SubComponent.scala.html#29467">ownPhase</a></span>) {
        <span class="typed"><span class="type">List[DeVirtualize.this.global.Symbol]</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; (DeVirtualizeTransformer.this.type)DeVirtualize.this.global.Symbol</span><span id="170526"><a href="../ast/Trees.scala.html#43090" id="170527">currentOwner</a></span></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../symtab/Symbols.scala.html#25129">isClass</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">(DeVirtualize.this.global.Symbol)Boolean</span><a href="#47763">containsVirtuals</a></span>(<span class="typed"><span class="type">=&gt; (DeVirtualizeTransformer.this.type)DeVirtualize.this.global.Symbol</span><a href="#170526">currentOwner</a></span>)) <span class="typed"><span class="type">(DeVirtualize.this.global.Symbol)List[DeVirtualize.this.global.Symbol]</span><a href="#47764">classesInNeedOfFactories</a></span>(<span class="typed"><span class="type">=&gt; (DeVirtualizeTransformer.this.type)DeVirtualize.this.global.Symbol</span><a href="#170526">currentOwner</a></span>)  
        <span class="keyword">else</span> <span class="typed"><span class="type">object Nil</span><a id="335">List</a></span>()
      }
      <span class="keyword">val</span> <span class="typed"><span class="type">List[DeVirtualize.this.global.Tree]</span><a id="48289">newDefs</a></span> = <span class="typed"><span class="type">List[DeVirtualize.this.global.Symbol]</span><a href="#48288">fclasses</a></span> <span class="typed"><span class="type">((DeVirtualize.this.global.Symbol) =&gt; DeVirtualize.this.global.Tree)List[DeVirtualize.this.global.Tree]</span><a id="21362">map</a></span> <span class="typed"><span class="type">(DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Tree</span><a href="#47825">factoryDef</a></span>
      <span class="typed"><span class="type">List[DeVirtualize.this.global.Tree]</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">List[DeVirtualize.this.global.Tree]</span><a href="#48289">newDefs</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a id="21645">isEmpty</a></span>) <span class="typed"><span class="type">List[DeVirtualize.this.global.Tree]</span><a href="#48287">stats1</a></span> <span class="keyword">else</span> <span class="typed"><span class="type">List[DeVirtualize.this.global.Tree]</span><a href="#48287">stats1</a></span> <span class="typed"><span class="type">(List[DeVirtualize.this.global.Tree])List[DeVirtualize.this.global.Tree]</span><a href="#48300" id="21339">:::</a></span> <span class="typed"><span class="type">List[DeVirtualize.this.global.Tree]</span><a href="#48289">newDefs</a></span>
    }

    <span class="keyword">def</span> <span class="typed"><span class="type">(DeVirtualize.this.global.Symbol,DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Tree</span><a id="47824">fixClassDef</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a id="48303">clazz</a></span>: <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#21866">Symbol</a></span>, <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a id="48304">factory</a></span>: <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#21866">Symbol</a></span>): <span class="typed"><span class="type">DeVirtualize.this.global.Tree</span><a href="../ast/Trees.scala.html#22371">Tree</a></span> = {
      <span class="keyword">val</span> <span class="typed"><span class="type">DeVirtualize.this.global.ClassSymbol</span><a id="48305">cclazz</a></span> = <span class="typed"><span class="type">(DeVirtualize.this.global.Symbol,DeVirtualize.this.global.Symbol)DeVirtualize.this.global.ClassSymbol</span><a href="#47784">mkConcreteClass</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48303">clazz</a></span>, <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48304">factory</a></span>) 
      <span class="keyword">val</span> <span class="typed"><span class="type">List[DeVirtualize.this.global.DefDef]</span><a id="48306">overrideBridges</a></span> = 
        <span class="keyword">for</span> (<span class="typed"><span class="type">((DeVirtualize.this.global.Symbol) =&gt; DeVirtualize.this.global.DefDef)List[DeVirtualize.this.global.DefDef]</span><span id="21362"><span id="21367"><span id="48311"><a id="48315">m</a></span></span></span></span> &lt;- <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48303">clazz</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Type</span><a href="../symtab/Symbols.scala.html#25231">info</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Scope</span><a href="../symtab/Types.scala.html#25677">decls</a></span>.<span class="typed"><span class="type">=&gt; List[DeVirtualize.this.global.Symbol]</span><a href="../symtab/Scopes.scala.html#34629">toList</a></span> <span class="keyword">if</span> <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48311">m</a></span> <span class="typed"><span class="type">(Long)Boolean</span><a href="../symtab/Symbols.scala.html#25223">hasFlag</a></span> <span class="typed"><span class="type">=&gt; Long</span><a href="../symtab/Flags.scala.html#20580">notOVERRIDE</a></span>) 
        <span class="keyword">yield</span> <span class="typed"><span class="type">(DeVirtualize.this.global.Symbol,DeVirtualize.this.global.Symbol)DeVirtualize.this.global.DefDef</span><a href="#47826">overrideBridge</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48315">m</a></span>, <span class="typed"><span class="type">DeVirtualize.this.global.ClassSymbol</span><a href="#48305">cclazz</a></span>)
      
      <span class="keyword">val</span> <span class="typed"><span class="type">List[List[DeVirtualize.this.global.ValDef]]</span><a id="48307">vparamss</a></span>: <span class="typed"><span class="type">List[List[DeVirtualize.this.global.ValDef]]</span><a id="526">List</a></span>[List[ValDef]] = <span class="typed"><span class="type">(scala.tools.nsc.Phase)(=&gt; List[List[DeVirtualize.this.global.ValDef]])List[List[DeVirtualize.this.global.ValDef]]</span><a href="../symtab/SymbolTable.scala.html#21147">atPhase</a></span>(<span class="typed"><span class="type">=&gt; scala.tools.nsc.Phase</span><a href="../SubComponent.scala.html#29467">ownPhase</a></span>) {
        <span class="typed"><span class="type">(DeVirtualize.this.global.Type,Int)List[List[(DeVirtualize.this.global.Type, Int)]]</span><a href="#47781">paramTypesAndIndices</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48303">clazz</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#25259">primaryConstructor</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Type</span><a href="../symtab/Symbols.scala.html#25230">tpe</a></span>, <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>) <span class="typed"><span class="type">((List[(DeVirtualize.this.global.Type, Int)]) =&gt; List[DeVirtualize.this.global.ValDef])List[List[DeVirtualize.this.global.ValDef]]</span><a id="21362">map</a></span> {
          <span class="typed"><span class="type">List[(DeVirtualize.this.global.Type, Int)]</span><a href="#48425">_</a></span> <span class="typed"><span class="type">(((DeVirtualize.this.global.Type, Int)) =&gt; DeVirtualize.this.global.ValDef)List[DeVirtualize.this.global.ValDef]</span><a id="21362">map</a></span> <span class="typed"><span class="type">DeVirtualize.this.global.ValDef</span><a href="#48428">{</a></span>
          <span class="typed"><span class="type">DeVirtualize.this.global.ValDef</span><span class="keyword">case</span></span> <a id="1">(</a><span class="typed"><span class="type">DeVirtualize.this.global.Type</span><a id="48429">pt</a></span>, <span class="typed"><span class="type">Int</span><a id="48430">i</a></span>) =&gt;
            <span class="typed"><span class="type">(scala.tools.nsc.util.Position)(DeVirtualize.this.global.ValDef)DeVirtualize.this.global.ValDef</span><a href="../ast/Trees.scala.html#28572">atPos</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48304">factory</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.util.Position</span><a href="../symtab/Symbols.scala.html#25087">pos</a></span>) {
              <span class="typed"><span class="type">(DeVirtualize.this.global.Modifiers,DeVirtualize.this.global.Name,DeVirtualize.this.global.Tree,DeVirtualize.this.global.Tree)DeVirtualize.this.global.ValDef</span><a href="../ast/Trees.scala.html#31860">ValDef</a></span>(<span class="typed"><span class="type">(Long)DeVirtualize.this.global.Modifiers</span><a href="../ast/Trees.scala.html#22368">Modifiers</a></span>(PARAMACCESSOR | PRIVATE <span class="typed"><span class="type">Long(537395204L)</span><span >|</span></span> LOCAL), <span class="typed"><span class="type">(Int)DeVirtualize.this.global.Name</span><a href="#47768">fixParamName</a></span>(<span class="typed"><span class="type">Int</span><a href="#48430">i</a></span>), 
                     <span class="typed"><span class="type">(DeVirtualize.this.global.Type)DeVirtualize.this.global.TypeTree</span><a href="../ast/Trees.scala.html#22522">TypeTree</a></span>(<span class="typed"><span class="type">(DeVirtualize.this.global.Type)DeVirtualize.this.global.Type</span><a href="#47860">devirtualizeMap</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Type</span><a href="#48429">pt</a></span>)), <span class="typed"><span class="type">object DeVirtualize.this.global.EmptyTree</span><a href="../ast/Trees.scala.html#22380">EmptyTree</a></span>)
            }
          }
        }
      }
      <span class="keyword">val</span> <span class="typed"><span class="type">List[DeVirtualize.this.global.DefDef]</span><a id="48308">pfields</a></span>: <span class="typed"><span class="type">List[DeVirtualize.this.global.DefDef]</span><a id="526">List</a></span>[DefDef] = <span class="typed"><span class="type">(scala.tools.nsc.Phase)(=&gt; List[DeVirtualize.this.global.DefDef])List[DeVirtualize.this.global.DefDef]</span><a href="../symtab/SymbolTable.scala.html#21147">atPhase</a></span>(<span class="typed"><span class="type">=&gt; scala.tools.nsc.Phase</span><a href="../SubComponent.scala.html#29467">ownPhase</a></span>) {
        <span class="typed"><span class="type">(DeVirtualize.this.global.Type,Int)List[List[(DeVirtualize.this.global.Type, Int)]]</span><a href="#47781">paramTypesAndIndices</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48303">clazz</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#25259">primaryConstructor</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Type</span><a href="../symtab/Symbols.scala.html#25230">tpe</a></span>, <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>) <span class="typed"><span class="type">((List[(DeVirtualize.this.global.Type, Int)]) =&gt; Iterable[DeVirtualize.this.global.DefDef])List[DeVirtualize.this.global.DefDef]</span><a id="21383">flatMap</a></span> {
          <span class="typed"><span class="type">List[(DeVirtualize.this.global.Type, Int)]</span><a href="#48449">_</a></span> <span class="typed"><span class="type">(((DeVirtualize.this.global.Type, Int)) =&gt; DeVirtualize.this.global.DefDef)List[DeVirtualize.this.global.DefDef]</span><a id="21362">map</a></span> <span class="typed"><span class="type">DeVirtualize.this.global.DefDef</span><a href="#48452">{</a></span>
          <span class="typed"><span class="type">DeVirtualize.this.global.DefDef</span><span class="keyword">case</span></span> <a id="1">(</a><span class="typed"><span class="type">DeVirtualize.this.global.Type</span><a id="48453">pt</a></span>, <span class="typed"><span class="type">Int</span><a id="48454">i</a></span>) =&gt;
            <span class="keyword">val</span> <span class="typed"><span class="type">DeVirtualize.this.global.TermSymbol</span><a id="48455">pfield</a></span> = <span class="typed"><span class="type">DeVirtualize.this.global.ClassSymbol</span><a href="#48305">cclazz</a></span>.<span class="typed"><span class="type">(scala.tools.nsc.util.Position,DeVirtualize.this.global.Name)DeVirtualize.this.global.TermSymbol</span><a href="../symtab/Symbols.scala.html#25102">newMethod</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.ClassSymbol</span><a href="#48305">cclazz</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.util.Position</span><a href="../symtab/Symbols.scala.html#25087">pos</a></span>, <span class="typed"><span class="type">(DeVirtualize.this.global.Symbol,Int)DeVirtualize.this.global.Name</span><a href="#47767">paramFieldName</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48303">clazz</a></span>, <span class="typed"><span class="type">Int</span><a href="#48454">i</a></span>))
              .<span class="typed"><span class="type">(Long)DeVirtualize.this.global.TermSymbol</span><a href="../symtab/Symbols.scala.html#25220">setFlag</a></span>(PROTECTED | LOCAL | EXPANDEDNAME | SYNTHETIC <span class="typed"><span class="type">Long(68726292481L)</span><span >|</span></span> STABLE)
              .<span class="typed"><span class="type">(DeVirtualize.this.global.Type)DeVirtualize.this.global.TermSymbol</span><a href="../symtab/Symbols.scala.html#25232">setInfo</a></span>(<span class="typed"><span class="type">(List[DeVirtualize.this.global.Symbol],DeVirtualize.this.global.Type)DeVirtualize.this.global.PolyType</span><a href="../symtab/Types.scala.html#43484">PolyType</a></span>(<span class="typed"><span class="type">object Nil</span><a id="335">List</a></span>(), <span class="typed"><span class="type">DeVirtualize.this.global.Type</span><a href="#48453">pt</a></span>))
            <span class="typed"><span class="type">DeVirtualize.this.global.ClassSymbol</span><a href="#48305">cclazz</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Type</span><a href="../symtab/Symbols.scala.html#25231">info</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Scope</span><a href="../symtab/Types.scala.html#25677">decls</a></span> <span class="typed"><span class="type">(DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol</span><a href="../symtab/Scopes.scala.html#34617">enter</a></span> <span class="typed"><span class="type">DeVirtualize.this.global.TermSymbol</span><a href="#48455">pfield</a></span>
            <span class="typed"><span class="type">(scala.tools.nsc.util.Position)(DeVirtualize.this.global.DefDef)DeVirtualize.this.global.DefDef</span><a href="../ast/Trees.scala.html#28572">atPos</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48304">factory</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.util.Position</span><a href="../symtab/Symbols.scala.html#25087">pos</a></span>) {
              <span class="typed"><span class="type">(DeVirtualize.this.global.Symbol,(List[List[DeVirtualize.this.global.Symbol]]) =&gt; DeVirtualize.this.global.Tree)DeVirtualize.this.global.DefDef</span><a href="../ast/Trees.scala.html#22411">DefDef</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.TermSymbol</span><a href="#48455">pfield</a></span>, <span class="typed"><span class="type">List[List[DeVirtualize.this.global.Symbol]]</span><a id="48470">vparamss</a></span> =&gt; <span class="typed"><span class="type">(DeVirtualize.this.global.Name)DeVirtualize.this.global.Ident</span><a href="../ast/Trees.scala.html#30408">Ident</a></span>(<span class="typed"><span class="type">(Int)DeVirtualize.this.global.Name</span><a href="#47768">fixParamName</a></span>(<span class="typed"><span class="type">Int</span><a href="#48454">i</a></span>)))
            }
          }
        }
      }
      <span class="typed"><span class="type">(DeVirtualize.this.global.Symbol,DeVirtualize.this.global.Modifiers,List[List[DeVirtualize.this.global.ValDef]],List[List[DeVirtualize.this.global.Tree]],List[DeVirtualize.this.global.Tree])DeVirtualize.this.global.ClassDef</span><a href="../ast/Trees.scala.html#22392">ClassDef</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.ClassSymbol</span><a href="#48305">cclazz</a></span>, <span class="typed"><span class="type">(Long)DeVirtualize.this.global.Modifiers</span><a href="../ast/Trees.scala.html#22368">Modifiers</a></span>(<span class="typed"><span class="type">Long(0L)</span><span class="int">0</span></span>), <span class="typed"><span class="type">List[List[DeVirtualize.this.global.ValDef]]</span><a href="#48307">vparamss</a></span>, <span class="typed"><span class="type">(List[Nothing]*)List[List[Nothing]]</span><span id="21328"><a id="527">List</a></span></span>(<span class="typed"><span class="type">object Nil</span><a id="335">List</a></span>()), <span class="typed"><span class="type">List[DeVirtualize.this.global.DefDef]</span><a href="#48308">pfields</a></span> <span class="typed"><span class="type">(List[DeVirtualize.this.global.DefDef])List[DeVirtualize.this.global.DefDef]</span><a href="#48476" id="21339">:::</a></span> <span class="typed"><span class="type">List[DeVirtualize.this.global.DefDef]</span><a href="#48306">overrideBridges</a></span>)
    }
      

    <span class="comment">/** The factory definition for virtual class `clazz' (@see mkFactory)
     *  For a virtual class  
     *
     *  attrs mods class VC[Ts] &lt;: Ps { decls }
     *  with overridden classes _VC[Us]'s
     *
     * we need the following factory:
     *
     *  attrs mods3 def new$VC[Ts](): VC[Ts] = {
     *    class VC$fix extends _VC$trait's[Ts] with VC$trait[Ts] {
     *      override-bridges
     *    }
     *    new VC$fix.asInstanceOf[VC[Ts]]
     *  }
     *
     * where
     *  
     *  mods3  are the modifiers inherited to factories
     *  override-bridges are definitions that link every symbol in a worker trait
     *                   that was overriding something to the overridden symbol
     *                   //todo: not sure what happens with abstract override?
     */</span>
    <span class="keyword">def</span> <span class="typed"><span class="type">(DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Tree</span><a id="47825">factoryDef</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a id="48297">clazz</a></span>: <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#21866">Symbol</a></span>): <span class="typed"><span class="type">DeVirtualize.this.global.Tree</span><a href="../ast/Trees.scala.html#22371">Tree</a></span> = {
      <span class="keyword">val</span> <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a id="48479">factorySym</a></span> = <span class="typed"><span class="type">(DeVirtualize.this.global.Symbol,DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol</span><a href="#47766">factory</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48297">clazz</a></span>, <span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Symbol</span><a href="../ast/Trees.scala.html#43090">currentOwner</a></span>)
      <span class="keyword">val</span> <span class="typed"><span class="type">DeVirtualize.this.global.Tree</span><a id="48480">cclazzDef</a></span> = <span class="typed"><span class="type">(DeVirtualize.this.global.Symbol,DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Tree</span><a href="#47824">fixClassDef</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48297">clazz</a></span>, <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48479">factorySym</a></span>)
      <span class="typed"><span class="type">(Any)Unit</span><span id="6112"><a id="821">println</a></span></span>(<span class="typed"><span class="type">java.lang.String(&quot;Concrete: &quot;)</span><span class="string">&quot;Concrete: &quot;</span></span><span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span><span class="typed"><span class="type">DeVirtualize.this.global.Tree</span><a href="#48480">cclazzDef</a></span>)
      <span class="keyword">val</span> <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a id="48481">abstpeSym</a></span> = <span class="typed"><span class="type">(DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol</span><a href="#47765">abstractType</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48297">clazz</a></span>)
      <span class="typed"><span class="type">=&gt; DeVirtualize.this.global.analyzer.Typer</span><a href="../transform/TypingTransformers.scala.html#47804">localTyper</a></span>.<span class="typed"><span class="type">(DeVirtualize.this.global.analyzer.global.Tree)DeVirtualize.this.global.analyzer.global.Tree</span><a href="Typers.scala.html#31830">typed</a></span> {
        <span class="typed"><span class="type">(scala.tools.nsc.util.Position)(DeVirtualize.this.global.DefDef)DeVirtualize.this.global.DefDef</span><a href="../ast/Trees.scala.html#28572">atPos</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48479">factorySym</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.util.Position</span><a href="../symtab/Symbols.scala.html#25087">pos</a></span>) {
          <span class="typed"><span class="type">(DeVirtualize.this.global.Symbol,(List[List[DeVirtualize.this.global.Symbol]]) =&gt; DeVirtualize.this.global.Tree)DeVirtualize.this.global.DefDef</span><a href="../ast/Trees.scala.html#22411">DefDef</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48479">factorySym</a></span>, <span class="typed"><span class="type">List[List[DeVirtualize.this.global.Symbol]]</span><a id="48488">vparamss</a></span> =&gt; 
            <span class="typed"><span class="type">(List[DeVirtualize.this.global.Tree],DeVirtualize.this.global.Tree)DeVirtualize.this.global.Block</span><a href="../ast/Trees.scala.html#42662">Block</a></span>(
              <span class="typed"><span class="type">(DeVirtualize.this.global.Tree*)List[DeVirtualize.this.global.Tree]</span><span id="21328"><a id="527">List</a></span></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Tree</span><a href="#48480">cclazzDef</a></span>), 
              <span class="typed"><span class="type">(DeVirtualize.this.global.Tree,List[DeVirtualize.this.global.Tree])DeVirtualize.this.global.TypeApply</span><a href="../ast/Trees.scala.html#31344">TypeApply</a></span>(
                <span class="typed"><span class="type">(DeVirtualize.this.global.Tree,DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Select</span><a href="../ast/Trees.scala.html#22509">Select</a></span>(
                  <span class="typed"><span class="type">object DeVirtualize.this.global.gen</span><a href="../Global.scala.html#21170">gen</a></span>.<span class="typed"><span class="type">(DeVirtualize.this.global.gen.global.Tree,List[List[DeVirtualize.this.global.gen.global.Symbol]])DeVirtualize.this.global.gen.global.Tree</span><a href="../ast/TreeGen.scala.html#27634">mkForwarder</a></span>(
                    <span class="typed"><span class="type">(DeVirtualize.this.global.Tree,DeVirtualize.this.global.Name)DeVirtualize.this.global.Select</span><a href="../ast/Trees.scala.html#31358">Select</a></span>(<span class="typed"><span class="type">(DeVirtualize.this.global.Tree)DeVirtualize.this.global.New</span><a href="../ast/Trees.scala.html#48499">New</a></span>(<span class="typed"><span class="type">(DeVirtualize.this.global.Type)DeVirtualize.this.global.TypeTree</span><a href="../ast/Trees.scala.html#22522">TypeTree</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Tree</span><a href="#48480">cclazzDef</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Symbol</span><a href="../ast/Trees.scala.html#25358">symbol</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Type</span><a href="../symtab/Symbols.scala.html#25230">tpe</a></span>)), <span class="typed"><span class="type">object DeVirtualize.this.global.nme</span><a href="../symtab/StdNames.scala.html#22317">nme</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Name</span><a href="../symtab/StdNames.scala.html#30639">CONSTRUCTOR</a></span>),
                    <span class="typed"><span class="type">List[List[DeVirtualize.this.global.Symbol]]</span><a href="#48488">vparamss</a></span>),
                  <span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Symbol</span><a href="../symtab/Definitions.scala.html#26024">Any_asInstanceOf</a></span>),
             <span class="typed"><span class="type">(DeVirtualize.this.global.TypeTree*)List[DeVirtualize.this.global.TypeTree]</span><span id="21328"><a id="527">List</a></span></span>(
               <span class="typed"><span class="type">(DeVirtualize.this.global.Type)DeVirtualize.this.global.TypeTree</span><a href="../ast/Trees.scala.html#22522">TypeTree</a></span>(
                 <span class="typed"><span class="type">=&gt; (DeVirtualizeTransformer.this.type)DeVirtualize.this.global.Symbol</span><a href="#170526">currentOwner</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Type</span><a href="../symtab/Symbols.scala.html#25263">thisType</a></span>.<span class="typed"><span class="type">(DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Type</span><a href="../symtab/Types.scala.html#25690">memberType</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48481">abstpeSym</a></span>)
                 .<span class="typed"><span class="type">(List[DeVirtualize.this.global.Symbol],List[DeVirtualize.this.global.Symbol])DeVirtualize.this.global.Type</span><a href="../symtab/Types.scala.html#25692">substSym</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48481">abstpeSym</a></span>.<span class="typed"><span class="type">=&gt; List[DeVirtualize.this.global.Symbol]</span><a href="../symtab/Symbols.scala.html#25242">typeParams</a></span>, <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48479">factorySym</a></span>.<span class="typed"><span class="type">=&gt; List[DeVirtualize.this.global.Symbol]</span><a href="../symtab/Symbols.scala.html#25242">typeParams</a></span>))))))
        }
      }
    }

    <span class="comment">/** Create an override bridge for method `meth' in concrete class `cclazz'.
     *  An override bridge has the form
     *
     *   override f(xs1)...(xsN) = super.f(xs)...(xsN)
     */</span>
    <span class="keyword">def</span> <span class="typed"><span class="type">(DeVirtualize.this.global.Symbol,DeVirtualize.this.global.Symbol)DeVirtualize.this.global.DefDef</span><a id="47826">overrideBridge</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a id="48316">meth</a></span>: <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#21866">Symbol</a></span>, <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a id="48317">cclazz</a></span>: <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#21866">Symbol</a></span>) = <span class="typed"><span class="type">(scala.tools.nsc.util.Position)(DeVirtualize.this.global.DefDef)DeVirtualize.this.global.DefDef</span><a href="../ast/Trees.scala.html#28572">atPos</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48316">meth</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.util.Position</span><a href="../symtab/Symbols.scala.html#25087">pos</a></span>) {
      <span class="keyword">val</span> <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a id="48321">bridge</a></span> = <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48316">meth</a></span>.<span class="typed"><span class="type">(DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#25255">cloneSymbol</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48317">cclazz</a></span>)
        .<span class="typed"><span class="type">(Long)DeVirtualize.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#25221">resetFlag</a></span>(<span class="typed"><span class="type">=&gt; Long</span><a href="../symtab/Flags.scala.html#20580">notOVERRIDE</a></span> <span class="typed"><span class="type">(Long)Long</span><a id="3275">|</a></span> <span class="typed"><span class="type">=&gt; Long</span><a href="../symtab/Flags.scala.html#20570">notFINAL</a></span>)
      <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48317">cclazz</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Type</span><a href="../symtab/Symbols.scala.html#25231">info</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Scope</span><a href="../symtab/Types.scala.html#25677">decls</a></span>.<span class="typed"><span class="type">(DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol</span><a href="../symtab/Scopes.scala.html#34617">enter</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48321">bridge</a></span>)
      <span class="keyword">val</span> <span class="typed"><span class="type">DeVirtualize.this.global.Tree</span><a id="48322">superRef</a></span>: <span class="typed"><span class="type">DeVirtualize.this.global.Tree</span><a href="../ast/Trees.scala.html#22371">Tree</a></span> = <span class="typed"><span class="type">(DeVirtualize.this.global.Tree,DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Select</span><a href="../ast/Trees.scala.html#22509">Select</a></span>(<span class="typed"><span class="type">(DeVirtualize.this.global.Symbol,DeVirtualize.this.global.Name)DeVirtualize.this.global.Tree</span><a href="../ast/Trees.scala.html#22501">Super</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48317">cclazz</a></span>, <span class="typed"><span class="type">object DeVirtualize.this.global.nme</span><a href="../symtab/StdNames.scala.html#22317">nme</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Name</span><a href="../symtab/StdNames.scala.html#30591">EMPTY</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Name</span><a href="../symtab/Names.scala.html#23895">toTypeName</a></span>), <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48316">meth</a></span>)
      <span class="typed"><span class="type">(DeVirtualize.this.global.Symbol,(List[List[DeVirtualize.this.global.Symbol]]) =&gt; DeVirtualize.this.global.Tree)DeVirtualize.this.global.DefDef</span><a href="../ast/Trees.scala.html#22411">DefDef</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48321">bridge</a></span>, <span class="typed"><span class="type">List[List[DeVirtualize.this.global.Symbol]]</span><a id="48340">vparamss</a></span> =&gt; <span class="typed"><span class="type">object DeVirtualize.this.global.gen</span><a href="../Global.scala.html#21170">gen</a></span>.<span class="typed"><span class="type">(DeVirtualize.this.global.gen.global.Tree,List[List[DeVirtualize.this.global.gen.global.Symbol]])DeVirtualize.this.global.gen.global.Tree</span><a href="../ast/TreeGen.scala.html#27634">mkForwarder</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Tree</span><a href="#48322">superRef</a></span>, <span class="typed"><span class="type">List[List[DeVirtualize.this.global.Symbol]]</span><a href="#48340">vparamss</a></span>))
    }

    <span class="comment">/** Replace definitions of virtual classes by definitions of corresponding
     *  abstract type and worker traits.
     *  Eliminate constructors of former virtual classes because these are now traits.
     */</span>
    <span class="keyword">protected</span> <span class="keyword">def</span> <span class="typed"><span class="type">(DeVirtualize.this.global.Tree)List[DeVirtualize.this.global.Tree]</span><a id="47827">transformStat</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Tree</span><a id="48291">tree</a></span>: <span class="typed"><span class="type">DeVirtualize.this.global.Tree</span><a href="../ast/Trees.scala.html#22371">Tree</a></span>): <span class="typed"><span class="type">List[DeVirtualize.this.global.Tree]</span><a id="526">List</a></span>[Tree] = {
      <span class="keyword">val</span> <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a id="48505">sym</a></span> = <span class="typed"><span class="type">DeVirtualize.this.global.Tree</span><a href="#48291">tree</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Symbol</span><a href="../ast/Trees.scala.html#25358">symbol</a></span>
      <span class="typed"><span class="type">DeVirtualize.this.global.Tree</span><a href="#48291">tree</a></span> <span class="typed"><span class="type">List[DeVirtualize.this.global.Tree]</span><span class="keyword">match</span></span> {
        <span class="typed"><span class="type">List[DeVirtualize.this.global.Tree]</span><span class="keyword">case</span></span> <a id="1">ClassDef</a>(<span class="typed"><span class="type">DeVirtualize.this.global.Modifiers</span><a id="48507">mods</a></span>, <span class="typed"><span class="type">DeVirtualize.this.global.Name</span><a id="48508">name</a></span>, <span class="typed"><span class="type">List[DeVirtualize.this.global.TypeDef]</span><a id="48509">tparams</a></span>, <span class="typed"><span class="type">DeVirtualize.this.global.Template</span><a id="48510">templ</a></span>) 
        <span class="keyword">if</span> (<span class="typed"><span class="type">(DeVirtualize.this.global.Symbol)Boolean</span><a href="#47776">wasVirtualClass</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48505">sym</a></span>)) =&gt;
          <span class="keyword">val</span> <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a id="48511">clazz</a></span> = <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48505">sym</a></span>
          <span class="keyword">val</span> <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a id="48512">absTypeSym</a></span> = <span class="typed"><span class="type">(DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol</span><a href="#47765">abstractType</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48511">clazz</a></span>)
          <span class="keyword">val</span> <span class="typed"><span class="type">DeVirtualize.this.global.TypeDef</span><a id="48513">abstypeDef</a></span> = <span class="typed"><span class="type">(DeVirtualize.this.global.Symbol)DeVirtualize.this.global.TypeDef</span><a href="../ast/Trees.scala.html#22416">TypeDef</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48512">absTypeSym</a></span>)
          <span class="typed"><span class="type">(DeVirtualize.this.global.Tree*)List[DeVirtualize.this.global.Tree]</span><span id="21328"><a id="527">List</a></span></span>(<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.analyzer.Typer</span><a href="../transform/TypingTransformers.scala.html#47804">localTyper</a></span>.<span class="typed"><span class="type">(DeVirtualize.this.global.analyzer.global.Tree)DeVirtualize.this.global.analyzer.global.Tree</span><a href="Typers.scala.html#31830">typed</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.TypeDef</span><a href="#48513">abstypeDef</a></span>), <span class="typed"><span class="type">(DeVirtualize.this.global.Tree)DeVirtualize.this.global.Tree</span><a href="#47828">transform</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Tree</span><a href="#48291">tree</a></span>))
        <span class="typed"><span class="type">List[Nothing]</span><span class="keyword">case</span></span> <a id="1">DefDef</a>(_, <span class="typed"><span class="type">object DeVirtualize.this.global.nme</span><a href="../symtab/StdNames.scala.html#22317">nme</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Name</span><a href="../symtab/StdNames.scala.html#30639">CONSTRUCTOR</a></span>, _, _, _, _) 
        <span class="keyword">if</span> (<span class="typed"><span class="type">(DeVirtualize.this.global.Symbol)Boolean</span><a href="#47776">wasVirtualClass</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48505">sym</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#25211">owner</a></span>)) =&gt;
          <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">(scala.tools.nsc.Phase)(=&gt; Boolean)Boolean</span><a href="../symtab/SymbolTable.scala.html#21147">atPhase</a></span>(<span class="typed"><span class="type">=&gt; scala.tools.nsc.Phase</span><a href="../SubComponent.scala.html#29467">ownPhase</a></span>)(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48505">sym</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5793">!=</a></span> <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48505">sym</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#25211">owner</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#25259">primaryConstructor</a></span>))
            <span class="typed"><span class="type">DeVirtualize.this.global.CompilationUnit</span><a href="#47821">unit</a></span>.<span class="typed"><span class="type">(scala.tools.nsc.util.Position,String)Unit</span><a href="../CompilationUnits.scala.html#24150">error</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Tree</span><a href="#48291">tree</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.util.Position</span><a href="../ast/Trees.scala.html#25352">pos</a></span>, <span class="typed"><span class="type">java.lang.String(&quot;virtual classes cannot have auxiliary constructors&quot;)</span><span class="string">&quot;virtual classes cannot have auxiliary constructors&quot;</span></span>)
          <span class="typed"><span class="type">object Nil</span><a id="335">List</a></span>()
        <span class="typed"><span class="type">List[DeVirtualize.this.global.Tree]</span><span class="keyword">case</span></span> _ =&gt;
          <span class="typed"><span class="type">(DeVirtualize.this.global.Tree*)List[DeVirtualize.this.global.Tree]</span><span id="21328"><a id="527">List</a></span></span>(<span class="typed"><span class="type">(DeVirtualize.this.global.Tree)DeVirtualize.this.global.Tree</span><a href="#47828">transform</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Tree</span><a href="#48291">tree</a></span>))
      }
    }

    <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">(DeVirtualize.this.global.Tree)DeVirtualize.this.global.Tree</span><a id="47828">transform</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Tree</span><a id="48521">tree0</a></span>: <span class="typed"><span class="type">DeVirtualize.this.global.Tree</span><a href="../ast/Trees.scala.html#22371">Tree</a></span>): <span class="typed"><span class="type">DeVirtualize.this.global.Tree</span><a href="../ast/Trees.scala.html#22371">Tree</a></span> = {
      <span class="keyword">val</span> <span class="typed"><span class="type">DeVirtualize.this.global.Tree</span><a id="48528">tree</a></span> = <span class="keyword">super</span>.<span class="typed"><span class="type">(DeVirtualize.this.global.Tree)DeVirtualize.this.global.Tree</span><a href="../transform/TypingTransformers.scala.html#47819">transform</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Tree</span><a href="#48521">tree0</a></span>)
      <span class="keyword">val</span> <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a id="48529">sym</a></span> = <span class="typed"><span class="type">DeVirtualize.this.global.Tree</span><a href="#48528">tree</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Symbol</span><a href="../ast/Trees.scala.html#25358">symbol</a></span>
      <span class="typed"><span class="type">DeVirtualize.this.global.Tree</span><a href="#48528">tree</a></span> <span class="typed"><span class="type">DeVirtualize.this.global.Tree</span><span class="keyword">match</span></span> {
        <span class="comment">// Replace a new VC().init() where VC is a virtual class with new$VC</span>
        <span class="typed"><span class="type">DeVirtualize.this.global.analyzer.global.Tree</span><span class="keyword">case</span></span> <a id="1">Apply</a>(<a id="1">Select</a>(<a id="1">New</a>(<span class="typed"><span class="type">DeVirtualize.this.global.Tree</span><a id="48537">tpt</a></span>), <span class="typed"><span class="type">DeVirtualize.this.global.Name</span><a id="48538">name</a></span>), <span class="typed"><span class="type">List[DeVirtualize.this.global.Tree]</span><a id="48539">args</a></span>) <span class="keyword">if</span> (<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48529">sym</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../symtab/Symbols.scala.html#25148">isConstructor</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">(DeVirtualize.this.global.Symbol)Boolean</span><a href="#47776">wasVirtualClass</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48529">sym</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#25211">owner</a></span>)) =&gt;
          <span class="keyword">val</span> <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a id="48540">clazz</a></span> = <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48529">sym</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#25211">owner</a></span>
          <span class="keyword">val</span> <span class="typed"><span class="type">DeVirtualize.this.global.Select</span><a id="48541">fn</a></span> = 
            <span class="typed"><span class="type">(DeVirtualize.this.global.Tree,DeVirtualize.this.global.Name)DeVirtualize.this.global.Select</span><a href="../ast/Trees.scala.html#31358">Select</a></span>(
              <span class="typed"><span class="type">object DeVirtualize.this.global.gen</span><a href="../Global.scala.html#21170">gen</a></span>.<span class="typed"><span class="type">(DeVirtualize.this.global.gen.global.Type)DeVirtualize.this.global.gen.global.Tree</span><a href="../ast/TreeGen.scala.html#27601">mkAttributedQualifier</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Tree</span><a href="#48537">tpt</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Type</span><a href="../ast/Trees.scala.html#25354">tpe</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Type</span><a href="../symtab/Types.scala.html#25660">prefix</a></span>),
              <span class="typed"><span class="type">(DeVirtualize.this.global.Symbol,DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol</span><a href="#47766">factory</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48540">clazz</a></span>, <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48540">clazz</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#25211">owner</a></span>).<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Name</span><a href="../symtab/Symbols.scala.html#25215">name</a></span>)
          <span class="typed"><span class="type">(Any)Unit</span><span id="6112"><a id="821">println</a></span></span>(<span class="typed"><span class="type">java.lang.String(&quot;fac &quot;)</span><span class="string">&quot;fac &quot;</span></span><span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span><span class="typed"><span class="type">(DeVirtualize.this.global.Symbol,DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol</span><a href="#47766">factory</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48540">clazz</a></span>, <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48540">clazz</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#25211">owner</a></span>).<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Type</span><a href="../symtab/Symbols.scala.html#25230">tpe</a></span>)
          <span class="keyword">val</span> <span class="typed"><span class="type">List[DeVirtualize.this.global.Type]</span><a id="48542">targs</a></span> = <span class="typed"><span class="type">DeVirtualize.this.global.Tree</span><a href="#48537">tpt</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Type</span><a href="../ast/Trees.scala.html#25354">tpe</a></span>.<span class="typed"><span class="type">=&gt; List[DeVirtualize.this.global.Type]</span><a href="../symtab/Types.scala.html#25662">typeArgs</a></span>
          <span class="typed"><span class="type">(scala.tools.nsc.util.Position)(DeVirtualize.this.global.analyzer.global.Tree)DeVirtualize.this.global.analyzer.global.Tree</span><a href="../ast/Trees.scala.html#28572">atPos</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Tree</span><a href="#48528">tree</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.util.Position</span><a href="../ast/Trees.scala.html#25352">pos</a></span>) {
            <span class="typed"><span class="type">=&gt; DeVirtualize.this.global.analyzer.Typer</span><a href="../transform/TypingTransformers.scala.html#47804">localTyper</a></span>.<span class="typed"><span class="type">(DeVirtualize.this.global.analyzer.global.Tree)DeVirtualize.this.global.analyzer.global.Tree</span><a href="Typers.scala.html#31830">typed</a></span> {
              <span class="keyword">val</span> <span class="typed"><span class="type">DeVirtualize.this.global.Apply</span><a id="48554">res</a></span> = 
                <span class="typed"><span class="type">(DeVirtualize.this.global.Tree,List[DeVirtualize.this.global.Tree])DeVirtualize.this.global.Apply</span><a href="../ast/Trees.scala.html#31199">Apply</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Tree</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">List[DeVirtualize.this.global.Type]</span><a href="#48542">targs</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a id="21645">isEmpty</a></span>) <span class="typed"><span class="type">DeVirtualize.this.global.Select</span><a href="#48541">fn</a></span> <span class="keyword">else</span> <span class="typed"><span class="type">(DeVirtualize.this.global.Tree,List[DeVirtualize.this.global.Tree])DeVirtualize.this.global.TypeApply</span><a href="../ast/Trees.scala.html#31344">TypeApply</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Select</span><a href="#48541">fn</a></span>, <span class="typed"><span class="type">List[DeVirtualize.this.global.Type]</span><a href="#48542">targs</a></span> <span class="typed"><span class="type">((DeVirtualize.this.global.Type) =&gt; DeVirtualize.this.global.TypeTree)List[DeVirtualize.this.global.TypeTree]</span><a id="21362">map</a></span> <span class="typed"><span class="type">(DeVirtualize.this.global.Type)DeVirtualize.this.global.TypeTree</span><a href="../ast/Trees.scala.html#22522">TypeTree</a></span>), <span class="typed"><span class="type">List[DeVirtualize.this.global.Tree]</span><a href="#48539">args</a></span>)
                <span class="typed"><span class="type">(Any)Unit</span><span id="6112"><a id="821">println</a></span></span>(<span class="typed"><span class="type">java.lang.String(&quot;typing &quot;)</span><span class="string">&quot;typing &quot;</span></span><span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span><span class="typed"><span class="type">DeVirtualize.this.global.Apply</span><a href="#48554">res</a></span><span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span><span class="typed"><span class="type">java.lang.String(&quot; from &quot;)</span><span class="string">&quot; from &quot;</span></span><span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span><span class="typed"><span class="type">List[DeVirtualize.this.global.Tree]</span><a href="#48539">args</a></span>)
                <span class="typed"><span class="type">DeVirtualize.this.global.Apply</span><a href="#48554">res</a></span>
              }
            }
        
        <span class="typed"><span class="type">DeVirtualize.this.global.Template</span><span class="keyword">case</span></span> <a id="1">Template</a>(<span class="typed"><span class="type">List[DeVirtualize.this.global.Tree]</span><a id="48562">parents</a></span>, <span class="typed"><span class="type">DeVirtualize.this.global.ValDef</span><a id="48563">self</a></span>, <span class="typed"><span class="type">List[DeVirtualize.this.global.Tree]</span><a id="48564">body</a></span>) <span class="keyword">if</span> (<span class="typed"><span class="type">(DeVirtualize.this.global.Symbol)Boolean</span><a href="#47776">wasVirtualClass</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48529">sym</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#25211">owner</a></span>)) =&gt;
          <span class="comment">// add param field accessors</span>
          <span class="keyword">val</span> <span class="typed"><span class="type">scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]</span><a id="48565">paramFieldAccessors</a></span> = <span class="typed"><span class="type">scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]</span><span class="keyword">new</span></span> <span class="typed"><span class="type">scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]</span><a id="19925">ListBuffer</a></span>[Tree]
          <span class="keyword">val</span> <span class="typed"><span class="type">scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]</span><a id="48566">paramFields</a></span> = <span class="typed"><span class="type">scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]</span><span class="keyword">new</span></span> <span class="typed"><span class="type">scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]</span><a id="19925">ListBuffer</a></span>[Tree]
          <span class="keyword">val</span> <span class="typed"><span class="type">scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]</span><a id="48567">presupers</a></span> = <span class="typed"><span class="type">scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]</span><span class="keyword">new</span></span> <span class="typed"><span class="type">scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]</span><a id="19925">ListBuffer</a></span>[Tree]
          <span class="keyword">val</span> <span class="typed"><span class="type">scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]</span><a id="48568">others</a></span> = <span class="typed"><span class="type">scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]</span><span class="keyword">new</span></span> <span class="typed"><span class="type">scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]</span><a id="19925">ListBuffer</a></span>[Tree]
          <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="48569">paramFieldCount</a></span> = <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>
          <span class="keyword">for</span> (<span class="typed"><span class="type">((DeVirtualize.this.global.Tree) =&gt; Unit)Unit</span><span id="21366"><a id="48571">stat</a></span></span> &lt;- <span class="typed"><span class="type">List[DeVirtualize.this.global.Tree]</span><a href="#48564">body</a></span>) {
            <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">DeVirtualize.this.global.Tree</span><a href="#48571">stat</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Symbol</span><a href="../ast/Trees.scala.html#25358">symbol</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5793">!=</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> (<span class="typed"><span class="type">DeVirtualize.this.global.Tree</span><a href="#48571">stat</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Symbol</span><a href="../ast/Trees.scala.html#25358">symbol</a></span> <span class="typed"><span class="type">(Long)Boolean</span><a href="../symtab/Symbols.scala.html#25223">hasFlag</a></span> <span class="typed"><span class="type">Long(536870912L)</span><span >PARAMACCESSOR</span></span>))
              <span class="typed"><span class="type">DeVirtualize.this.global.Tree</span><a href="#48571">stat</a></span> <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
                <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">DeVirtualize.this.global.ValDef</span><a id="48574">pacc</a></span> @ <a id="1">ValDef</a>(<span class="typed"><span class="type">DeVirtualize.this.global.Modifiers</span><a id="48587">mods</a></span>, <span class="typed"><span class="type">DeVirtualize.this.global.Name</span><a id="48588">name</a></span>, <span class="typed"><span class="type">DeVirtualize.this.global.Tree</span><a id="48589">tpt</a></span>, <span class="typed"><span class="type">DeVirtualize.this.global.Tree</span><a id="48590">rhs</a></span>) =&gt;
                  <span class="typed"><span class="type">DeVirtualize.this.global.ValDef</span><a href="#48574">pacc</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Symbol</span><a href="../ast/Trees.scala.html#26908">symbol</a></span> <span class="typed"><span class="type">(Long)DeVirtualize.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#25221">resetFlag</a></span> <span class="typed"><span class="type">Long(536870912L)</span><span >PARAMACCESSOR</span></span> <span class="typed"><span class="type">(Long)DeVirtualize.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#25220">setFlag</a></span> <span class="typed"><span class="type">Long(137438953472L)</span><span >PRESUPER</span></span>
                  <span class="keyword">val</span> <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a id="48591">pfield</a></span> = <span class="typed"><span class="type">(DeVirtualize.this.global.Symbol,Int)DeVirtualize.this.global.Symbol</span><a href="#47769">paramField</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48529">sym</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#25211">owner</a></span>, <span class="typed"><span class="type">Int</span><a href="#48569">paramFieldCount</a></span>)
                  <span class="typed"><span class="type">Int</span><a href="#48569">paramFieldCount</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">+=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
                  <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48591">pfield</a></span> <span class="typed"><span class="type">(scala.tools.nsc.util.Position)pfield.type</span><a href="../symtab/Symbols.scala.html#25088">setPos</a></span> <span class="typed"><span class="type">DeVirtualize.this.global.ValDef</span><a href="#48574">pacc</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.util.Position</span><a href="../ast/Trees.scala.html#25352">pos</a></span>
                  <span class="typed"><span class="type">scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]</span><a href="#48566">paramFields</a></span> <span class="typed"><span class="type">(DeVirtualize.this.global.Tree)Unit</span><a id="33306">+=</a></span> <span class="typed"><span class="type">=&gt; DeVirtualize.this.global.analyzer.Typer</span><a href="../transform/TypingTransformers.scala.html#47804">localTyper</a></span>.<span class="typed"><span class="type">(DeVirtualize.this.global.analyzer.global.Tree)DeVirtualize.this.global.analyzer.global.Tree</span><a href="Typers.scala.html#31830">typed</a></span>(<span class="typed"><span class="type">(DeVirtualize.this.global.Symbol,(List[List[DeVirtualize.this.global.Symbol]]) =&gt; DeVirtualize.this.global.Tree)DeVirtualize.this.global.DefDef</span><a href="../ast/Trees.scala.html#22411">DefDef</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48591">pfield</a></span>, <span class="typed"><span class="type">List[List[DeVirtualize.this.global.Symbol]]</span><a id="48622">vparamss</a></span> =&gt; <span class="typed"><span class="type">object DeVirtualize.this.global.EmptyTree</span><a href="../ast/Trees.scala.html#22380">EmptyTree</a></span>))
                  <span class="keyword">val</span> <span class="typed"><span class="type">DeVirtualize.this.global.analyzer.global.Tree</span><a id="48592">pfieldRef</a></span> = <span class="typed"><span class="type">=&gt; DeVirtualize.this.global.analyzer.Typer</span><a href="../transform/TypingTransformers.scala.html#47804">localTyper</a></span>.<span class="typed"><span class="type">(DeVirtualize.this.global.analyzer.global.Tree)DeVirtualize.this.global.analyzer.global.Tree</span><a href="Typers.scala.html#31830">typed</a></span> { 
                    <span class="typed"><span class="type">(scala.tools.nsc.util.Position)(DeVirtualize.this.global.Select)DeVirtualize.this.global.Select</span><a href="../ast/Trees.scala.html#28572">atPos</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.ValDef</span><a href="#48574">pacc</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.util.Position</span><a href="../ast/Trees.scala.html#25352">pos</a></span>) { 
                      <span class="typed"><span class="type">(DeVirtualize.this.global.Tree,DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Select</span><a href="../ast/Trees.scala.html#22509">Select</a></span>(<span class="typed"><span class="type">(DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Tree</span><a href="../ast/Trees.scala.html#22505">This</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48529">sym</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#25211">owner</a></span>), <span class="typed"><span class="type">DeVirtualize.this.global.Symbol</span><a href="#48591">pfield</a></span>) 
                    } 
                  }
                  <span class="typed"><span class="type">scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]</span><a href="#48565">paramFieldAccessors</a></span> <span class="typed"><span class="type">(DeVirtualize.this.global.Tree)Unit</span><a id="33306">+=</a></span> <span class="typed"><span class="type">=&gt; DeVirtualize.this.global.TreeCopier</span><a href="../ast/Trees.scala.html#43088">copy</a></span>.<span class="typed"><span class="type">(DeVirtualize.this.global.Tree,DeVirtualize.this.global.Modifiers,DeVirtualize.this.global.Name,DeVirtualize.this.global.Tree,DeVirtualize.this.global.Tree)DeVirtualize.this.global.ValDef</span><a href="../ast/Trees.scala.html#43159">ValDef</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.ValDef</span><a href="#48574">pacc</a></span>, <span class="typed"><span class="type">DeVirtualize.this.global.Modifiers</span><a href="#48587">mods</a></span>, <span class="typed"><span class="type">DeVirtualize.this.global.Name</span><a href="#48588">name</a></span>, <span class="typed"><span class="type">DeVirtualize.this.global.Tree</span><a href="#48589">tpt</a></span>, <span class="typed"><span class="type">DeVirtualize.this.global.analyzer.global.Tree</span><a href="#48592">pfieldRef</a></span>)
                <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> _ =&gt;
                  <span class="typed"><span class="type">DeVirtualize.this.global.Tree</span><a href="#48571">stat</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Symbol</span><a href="../ast/Trees.scala.html#25358">symbol</a></span> <span class="typed"><span class="type">(Long)DeVirtualize.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#25221">resetFlag</a></span> <span class="typed"><span class="type">Long(536870912L)</span><span >PARAMACCESSOR</span></span> <span class="comment">// ??? can we do this                  </span>
                  <span class="typed"><span class="type">scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]</span><a href="#48568">others</a></span> <span class="typed"><span class="type">(DeVirtualize.this.global.Tree)Unit</span><a id="33306">+=</a></span> <span class="typed"><span class="type">DeVirtualize.this.global.Tree</span><a href="#48571">stat</a></span>
              }
            <span class="keyword">else</span> 
              (<span class="typed"><span class="type">scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">DeVirtualize.this.global.Tree</span><a href="#48571">stat</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Symbol</span><a href="../ast/Trees.scala.html#25358">symbol</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5793">!=</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> (<span class="typed"><span class="type">DeVirtualize.this.global.Tree</span><a href="#48571">stat</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Symbol</span><a href="../ast/Trees.scala.html#25358">symbol</a></span> <span class="typed"><span class="type">(Long)Boolean</span><a href="../symtab/Symbols.scala.html#25223">hasFlag</a></span> <span class="typed"><span class="type">Long(137438953472L)</span><span >PRESUPER</span></span>)) <span class="typed"><span class="type">scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]</span><a href="#48567">presupers</a></span> <span class="keyword">else</span> <span class="typed"><span class="type">scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]</span><a href="#48568">others</a></span>) <span class="typed"><span class="type">(DeVirtualize.this.global.Tree)Unit</span><a id="33306">+=</a></span> <span class="typed"><span class="type">DeVirtualize.this.global.Tree</span><a href="#48571">stat</a></span>
          }
          <span class="typed"><span class="type">=&gt; DeVirtualize.this.global.TreeCopier</span><a href="../ast/Trees.scala.html#43088">copy</a></span>.<span class="typed"><span class="type">(DeVirtualize.this.global.Tree,List[DeVirtualize.this.global.Tree],DeVirtualize.this.global.ValDef,List[DeVirtualize.this.global.Tree])DeVirtualize.this.global.Template</span><a href="../ast/Trees.scala.html#43166">Template</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Tree</span><a href="#48528">tree</a></span>, <span class="typed"><span class="type">List[DeVirtualize.this.global.Tree]</span><a href="#48562">parents</a></span>, <span class="typed"><span class="type">DeVirtualize.this.global.ValDef</span><a href="#48563">self</a></span>, 
                        <span class="typed"><span class="type">scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]</span><a href="#48565">paramFieldAccessors</a></span>.<span class="typed"><span class="type">=&gt; List[DeVirtualize.this.global.Tree]</span><a id="33309">toList</a></span> <span class="typed"><span class="type">(List[DeVirtualize.this.global.Tree])List[DeVirtualize.this.global.Tree]</span><a href="#48638" id="21339">:::</a></span> 
                        <span class="typed"><span class="type">scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]</span><a href="#48567">presupers</a></span>.<span class="typed"><span class="type">=&gt; List[DeVirtualize.this.global.Tree]</span><a id="33309">toList</a></span> <span class="typed"><span class="type">(List[DeVirtualize.this.global.Tree])List[DeVirtualize.this.global.Tree]</span><a href="#48639" id="21339">:::</a></span> 
                        <span class="typed"><span class="type">scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]</span><a href="#48566">paramFields</a></span>.<span class="typed"><span class="type">=&gt; List[DeVirtualize.this.global.Tree]</span><a id="33309">toList</a></span> <span class="typed"><span class="type">(List[DeVirtualize.this.global.Tree])List[DeVirtualize.this.global.Tree]</span><a href="#48640" id="21339">:::</a></span>
                        <span class="typed"><span class="type">scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]</span><a href="#48568">others</a></span>.<span class="typed"><span class="type">=&gt; List[DeVirtualize.this.global.Tree]</span><a id="33309">toList</a></span>)
        <span class="typed"><span class="type">tree.type</span><span class="keyword">case</span></span> _ =&gt;
          <span class="typed"><span class="type">DeVirtualize.this.global.Tree</span><a href="#48528">tree</a></span> <span class="typed"><span class="type">(DeVirtualize.this.global.Type)tree.type</span><a href="../ast/Trees.scala.html#25357">setType</a></span> <span class="typed"><span class="type">(scala.tools.nsc.Phase)(=&gt; DeVirtualize.this.global.Type)DeVirtualize.this.global.Type</span><a href="../symtab/SymbolTable.scala.html#21147">atPhase</a></span>(<span class="typed"><span class="type">=&gt; scala.tools.nsc.Phase</span><a href="../SubComponent.scala.html#29467">ownPhase</a></span>)(<span class="typed"><span class="type">(DeVirtualize.this.global.Type)DeVirtualize.this.global.Type</span><a href="#47860">devirtualizeMap</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.Tree</span><a href="#48528">tree</a></span>.<span class="typed"><span class="type">=&gt; DeVirtualize.this.global.Type</span><a href="../ast/Trees.scala.html#25354">tpe</a></span>))
      }
    }
    <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">(DeVirtualize.this.global.CompilationUnit)Unit</span><a id="47829">transformUnit</a></span>(<span class="typed"><span class="type">DeVirtualize.this.global.CompilationUnit</span><a id="48648">unit</a></span>: <span class="typed"><span class="type">DeVirtualize.this.global.CompilationUnit</span><a href="../CompilationUnits.scala.html#22571">CompilationUnit</a></span>) = <span class="typed"><span class="type">(scala.tools.nsc.Phase)(=&gt; Unit)Unit</span><a href="../symtab/SymbolTable.scala.html#21147">atPhase</a></span>(<span class="typed"><span class="type">=&gt; scala.tools.nsc.Phase</span><a href="../SubComponent.scala.html#29467">ownPhase</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Phase</span><a href="../Phase.scala.html#27787">next</a></span>) { 
      <span class="typed"><span class="type">(DeVirtualize.this.global.CompilationUnit)Unit</span><a href="#170528" class="keyword">super</a></span>.<span class="typed"><span class="type">(DeVirtualize.this.global.CompilationUnit)Unit</span><span id="170528"><a id="170529">transformUnit</a></span></span>(<span class="typed"><span class="type">DeVirtualize.this.global.CompilationUnit</span><a href="#48648">unit</a></span>)
    }
  }
}

    

<span class="comment">/*
    class A {
      trait C[X, Y] &lt;: { 
        var x: X
        def f(y: Y): X = { println(&quot;A.T&quot;); x } 
      }
      class D[X](xp: X) extends C[X, Int] { 
        var x: X = xp
        override def f(y: Int) = { println(y); super.f(y) } 
      }
    }
    class B extends A {
      override trait C[X, Y] &lt;: { 
        override def f(y: Y): X = { println(&quot;B.T&quot;); super.f(y) } 
        def g: X = x
      }
    }
    object Test extends B {
      val c = new D[String](&quot;OK&quot;)
      println(c.g)
      println(c.f(42))
    }

maps to:

  class A {
    type C[X, Y] &lt;: C$trait[X, Y]

    trait C$trait[X, Y] { this: C with C$trait =&gt; 
      var x: X
      def f(y: Y): X = { println(&quot;A.T&quot;); x }
    } 

    class D[X](xp: X) extends C[X, Int] { 
      var x: X = xp
      override def f(y: Int) = { println(y); super.f(y) } 
    }

      protected[this] val x: Int; val y = x; def f(z:Int) = z + 1 }

    type D &lt;: C with DT

    trait DT extends { self: D =&gt; def f(z:Int) = z + 2 }

    trait preDT extends { self: D =&gt; val z: Int; val x = f(z) }

    def newC(x: Int): C
    def newD(x: Int): D

    //type C = CT
    //type D = C with DT

    class CC(_x:Int) extends { val x = _x } with CT

    def newC[X, Y](x:Int): C = 
      new CC(x).asInstanceOf[C]

    class DC(_z:Int) extends { val z = _z } with preDT with CT with DT {
      override def f(z:Int) = super.f(z)
    }

    def newD(z:Int):D = new DC(z).asInstanceOf[D]
  }

  class B extends A {
    type C &lt;: CT with CT2

    trait CT2 { self : C =&gt; def g = 2 }

    //type C = CT with CT2
    //type D = C with DT

    class CC2(_x:Int) extends { val x = _x } with CT with CT2

    def newC(x:Int): C = new CC2(x).asInstanceOf[C]

    class DC2(_z:Int) extends { val z = _z } with preDT with CT with CT2
      with DT { override def f(z:Int) = super.f(z) }

    def newD(z:Int): D = new DC2(z).asInstanceOf[D]
  }

*/</span>

        </pre>
    </body>
</html>