<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/typechecker/DeVirtualize.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style">
    </head>
    <body>
        <pre>
/* NSC -- new Scala compiler
 * Copyright 2005-2009 LAMP/EPFL
 * @author  Martin Odersky
 */
// $Id: RefChecks.scala 13735 2008-01-18 17:18:58Z odersky $

<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> typechecker

<span class="keyword">import</span> symtab.Flags._
<span class="keyword">import</span> transform.{InfoTransform, TypingTransformers}
<span class="keyword">import</span> scala.tools.nsc.util.{Position, NoPosition}
<span class="keyword">import</span> scala.collection.mutable.ListBuffer

<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class DeVirtualize extends scala.tools.nsc.SubComponent with scala.tools.nsc.transform.InfoTransform with scala.tools.nsc.transform.TypingTransformers with ScalaObject" id="17463">DeVirtualize</a> <span title="ScalaObject" class="keyword">extends</span> <a href="../transform/InfoTransform.scala.html#13951" title="scala.tools.nsc.transform.InfoTransform">InfoTransform</a> <span class="keyword">with</span> <a href="../transform/TypingTransformers.scala.html#14308" title="scala.tools.nsc.transform.TypingTransformers">TypingTransformers</a> {

  <span class="keyword">import</span> global._
  <span class="keyword">import</span> definitions._
  <span class="keyword">import</span> typer.{typed, typedOperator, atOwner}

  /** the following two members override abstract members in Transform */
  <span class="keyword">val</span> <a title="String" id="569640">phaseName</a>: <a title="String" id="1605">String</a> = <span title="java.lang.String(&quot;devirtualize&quot;)" class="string">&quot;devirtualize&quot;</span>

  /** The phase might set the following new flags: */
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Long" id="569642">phaseNextFlags</a>: <a title="Long" id="2184">Long</a> = <a href="../symtab/Flags.scala.html#28751" title="(x$1: Long)Long">notDEFERRED</a> <span title="(x$1: Long)Long">|</span> <a href="../symtab/Flags.scala.html#28757" title="=&gt; Long">notOVERRIDE</a> <span title="(x$1: Long)Long">|</span> <a href="../symtab/Flags.scala.html#28747" title="=&gt; Long">notFINAL</a> | <a href="../symtab/Flags.scala.html#28735" title="=&gt; Long">lateABSTRACT</a>

  <span class="keyword">def</span> <a title="(unit: DeVirtualize.this.global.CompilationUnit)DeVirtualize.this.DeVirtualizeTransformer" id="569643">newTransformer</a>(<a title="DeVirtualize.this.global.CompilationUnit" id="569707">unit</a>: <a href="../CompilationUnits.scala.html#39196" title="DeVirtualize.this.global.CompilationUnit">CompilationUnit</a>): <a href="#569673" title="DeVirtualize.this.DeVirtualizeTransformer">DeVirtualizeTransformer</a> =
    <span title="DeVirtualize.this.DeVirtualizeTransformer" class="keyword">new</span> <a href="#569673" title="DeVirtualize.this.DeVirtualizeTransformer">DeVirtualizeTransformer</a>(<a href="#569707" title="DeVirtualize.this.global.CompilationUnit">unit</a>)
 
  /** The class does not change base-classes of existing classes */
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Boolean" id="569644">changesBaseClasses</a> = <span title="Boolean(false)" class="keyword">false</span> 

  <span class="keyword">def</span> <a title="(sym: DeVirtualize.this.global.Symbol,tp: DeVirtualize.this.global.Type)DeVirtualize.this.global.Type" id="569645">transformInfo</a>(<a title="DeVirtualize.this.global.Symbol" id="569726">sym</a>: <a href="../symtab/Symbols.scala.html#26127" title="DeVirtualize.this.global.Symbol">Symbol</a>, <a title="DeVirtualize.this.global.Type" id="569727">tp</a>: <a href="../symtab/Types.scala.html#26205" title="DeVirtualize.this.global.Type">Type</a>): <a href="../symtab/Types.scala.html#26205" title="DeVirtualize.this.global.Type">Type</a> = 
    <span title="DeVirtualize.this.global.Type" class="keyword">if</span> (<a href="#569726" title="DeVirtualize.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26920" title="(x$1: Boolean)Boolean">isThisSym</a> &amp;&amp; <a href="#569726" title="DeVirtualize.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26983" title="=&gt; DeVirtualize.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#26954" title="=&gt; Boolean">isVirtualClass</a>) {
      <span class="keyword">val</span> <a title="DeVirtualize.this.global.Symbol" id="569740">clazz</a> = <a href="#569726" title="DeVirtualize.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26983" title="=&gt; DeVirtualize.this.global.Symbol">owner</a>
      <a href="../symtab/Types.scala.html#26301" title="(tps: List[DeVirtualize.this.global.Type])DeVirtualize.this.global.Type">intersectionType</a>(
        <span title="(xs: DeVirtualize.this.global.Type*)List[DeVirtualize.this.global.Type]">List</span>(
          <a href="../symtab/Types.scala.html#26302" title="(tycon: DeVirtualize.this.global.Type,args: List[DeVirtualize.this.global.Type])DeVirtualize.this.global.Type">appliedType</a>(<a href="#569653" title="(clazz: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol">abstractType</a>(<a href="#569740" title="DeVirtualize.this.global.Symbol">clazz</a>).<a href="../symtab/Symbols.scala.html#27013" title="=&gt; DeVirtualize.this.global.Type">typeConstructor</a>, <a href="#569740" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27016" title="(f: (DeVirtualize.this.global.Symbol) =&gt; DeVirtualize.this.global.Type)(implicit bf: scala.collection.generic.BuilderFactory[DeVirtualize.this.global.Type,List[DeVirtualize.this.global.Type],List[DeVirtualize.this.global.Symbol]])List[DeVirtualize.this.global.Type]">typeParams</a> <span title="scala.collection.generic.BuilderFactory[DeVirtualize.this.global.Type,List[DeVirtualize.this.global.Type],List#Coll]">map</span> (<a href="#569767" title="DeVirtualize.this.global.Symbol">_</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; DeVirtualize.this.global.Type">tpe</a>)),
          <a href="#569740" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; DeVirtualize.this.global.Type">tpe</a>))
    } <span class="keyword">else</span> <a href="#569805" title="(tp: DeVirtualize.this.global.Type)DeVirtualize.this.global.Type">devirtualizeMap</a>(<a href="#569727" title="DeVirtualize.this.global.Type">tp</a>)

  /* todo:
     handle constructor arguments
     check: overriding classes must have same type params
     virtual classes cannot have self types
   */

  /** Do the following transformations everywhere in a type:
   *
   * 1. Replace a virtual class
   *
   *  attrs mods class VC[Ts] &lt;: Ps { decls }
   *  
   * by the following symbols
   *
   *  attrs mods1 type VC[Ts] &lt;: dvm(Ps) with VC$trait[Ts]
   *  attrs mods2 trait VC$trait[Ts] extends AnyRef with ScalaObject { 
   *    this: VC[Ts] with VC$trait[Ts] =&gt; decls1
   *  }
   *  
   * The class symbol VC becomes the symbol of the workertrait.
   * 
   *  dvm    is the devirtalization mapping which converts refs to 
   *         virtual classes to refs to their abstract types (@see devirtualize)
   *  mods1  are the modifiers inherited to abstract types
   *  mods2  are the modifiers inherited to worker traits
   *  decls1 is decls but members that have an override modifier 
   *         lose it and any final modifier as well. 
   *
   * 2. For all virtual member classes VC which
   *    are not abstract and which are or inherit from a virtual class defined in current class
   *    add a factory (@see mkFactory)
   * 3. Convert TypeRef's to VC where VC is a virtual class to TypeRef's to AT, where AT
   *    is the abstract type corresponding to VC.
   *
   *  Note: If a class inherits vc's from two different paths, a vc in the 
   *  inheriting class has to be created beforehand. This is done in phase ??? (NOT YET DONE!)
   *
   *  Note: subclasses of virtual classes are treated as if they are virtual.
   *  isVirtualClass returns true for them also. 
   */
  <span class="keyword">object</span> <a title="object DeVirtualize.this.devirtualizeMap" id="569646">devirtualizeMap</a> <span title="ScalaObject" class="keyword">extends</span> <a href="../symtab/Types.scala.html#26320" title="DeVirtualize.this.global.TypeMap">TypeMap</a> {
    <span class="keyword">def</span> <a title="(tp: DeVirtualize.this.global.Type)DeVirtualize.this.global.Type" id="569805">apply</a>(<a title="DeVirtualize.this.global.Type" id="569806">tp</a>: <a href="../symtab/Types.scala.html#26205" title="DeVirtualize.this.global.Type">Type</a>): <a href="../symtab/Types.scala.html#26205" title="DeVirtualize.this.global.Type">Type</a> = <a href="../symtab/Types.scala.html#42722" title="(tp: DeVirtualize.this.global.Type)DeVirtualize.this.global.Type">mapOver</a>(<a href="#569806" title="DeVirtualize.this.global.Type">tp</a>) <span title="DeVirtualize.this.global.Type" class="keyword">match</span> { 
      <span title="DeVirtualize.this.global.Type" class="keyword">case</span> <a title="DeVirtualize.this.global.ClassInfoType" id="569836">tp1</a> @ ClassInfoType(<a title="List[DeVirtualize.this.global.Type]" id="569840">parents</a>, <a title="DeVirtualize.this.global.Scope" id="569841">decls0</a>, <a title="DeVirtualize.this.global.Symbol" id="569842">clazz</a>) =&gt;
        <span class="keyword">var</span> <a title="DeVirtualize.this.global.Scope" id="569845">decls</a> = <a href="#569841" title="DeVirtualize.this.global.Scope">decls0</a>
        <span class="keyword">def</span> <a title="(sym: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol" id="569846">enter</a>(<a title="DeVirtualize.this.global.Symbol" id="569847">sym</a>: <a href="../symtab/Symbols.scala.html#26127" title="DeVirtualize.this.global.Symbol">Symbol</a>) = // at next phase because names of worker traits change
          <a href="../symtab/SymbolTable.scala.html#26097" title="(ph: scala.tools.nsc.Phase)(op: =&gt; DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol">atPhase</a>(<a href="../SubComponent.scala.html#39639" title="=&gt; scala.tools.nsc.Phase">ownPhase</a>.<a href="../Phase.scala.html#23158" title="=&gt; scala.tools.nsc.Phase">next</a>) { <a href="#569845" title="DeVirtualize.this.global.Scope">decls</a>.<a href="../symtab/Scopes.scala.html#27131" title="(sym: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol">enter</a>(<a href="#569847" title="DeVirtualize.this.global.Symbol">sym</a>) } 
        <span title="Unit" class="keyword">if</span> (<a href="#569651" title="(clazz: DeVirtualize.this.global.Symbol)Boolean">containsVirtuals</a>(<a href="#569842" title="DeVirtualize.this.global.Symbol">clazz</a>)) {
          <a href="#569845" title="DeVirtualize.this.global.Scope">decls</a> = <a href="../symtab/Scopes.scala.html#25966" title="=&gt; DeVirtualize.this.global.Scope">newScope</a>
          <span class="keyword">for</span> (<a title="DeVirtualize.this.global.Symbol" id="569905">m</a> &lt;- <a href="#569841" title="DeVirtualize.this.global.Scope">decls0</a>.<a href="../symtab/Scopes.scala.html#27144" title="(f: (DeVirtualize.this.global.Symbol) =&gt; DeVirtualize.this.global.Symbol)Unit">toList</a>) {
            <span title="Any" class="keyword">if</span> (<a href="#569905" title="DeVirtualize.this.global.Symbol">m</a>.<a href="../symtab/Symbols.scala.html#26954" title="=&gt; Boolean">isVirtualClass</a>) {
              <a href="#569905" title="DeVirtualize.this.global.Symbol">m</a>.<a href="../symtab/Symbols.scala.html#26993" title="(mask: Long)m.type">setFlag</a>(<a href="../symtab/Flags.scala.html#28751" title="(x$1: Long)Long">notDEFERRED</a> <span title="(x$1: Long)Long">|</span> <a href="../symtab/Flags.scala.html#28747" title="=&gt; Long">notFINAL</a> | <a href="../symtab/Flags.scala.html#28735" title="=&gt; Long">lateABSTRACT</a>)
              <a href="#569846" title="(sym: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol">enter</a>(<a href="#569668" title="(clazz: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol">mkAbstractType</a>(<a href="#569905" title="DeVirtualize.this.global.Symbol">m</a>))
            }
            <a href="#569846" title="(sym: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol">enter</a>(<a href="#569905" title="DeVirtualize.this.global.Symbol">m</a>)
          }
          <span class="keyword">for</span> (<a title="DeVirtualize.this.global.Symbol" id="570100">m</a> &lt;- <a href="#569652" title="(clazz: DeVirtualize.this.global.Symbol)List[DeVirtualize.this.global.Symbol]">classesInNeedOfFactories</a><span title="(f: (DeVirtualize.this.global.Symbol) =&gt; DeVirtualize.this.global.Symbol)Unit">(</span><a href="#569842" title="DeVirtualize.this.global.Symbol">clazz</a>))
            <a href="#569846" title="(sym: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol">enter</a>(<a href="#569670" title="(clazz: DeVirtualize.this.global.Symbol,owner: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol">mkFactory</a>(<a href="#570100" title="DeVirtualize.this.global.Symbol">m</a>, <a href="#569842" title="DeVirtualize.this.global.Symbol">clazz</a>))
        }
        <span title="DeVirtualize.this.global.Type" class="keyword">if</span> (<a href="#569842" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#26954" title="=&gt; Boolean">isVirtualClass</a>) {
          <span title="(x: Any)Unit">println</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;virtual class: &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#569842" title="DeVirtualize.this.global.Symbol">clazz</a>+<a href="#569842" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27092" title="=&gt; String">locationString</a>)
          <a href="#569648" title="(clazz: DeVirtualize.this.global.Symbol)Unit">transformOwnerInfo</a>(<a href="#569842" title="DeVirtualize.this.global.Symbol">clazz</a>) 
          <a href="#569845" title="DeVirtualize.this.global.Scope">decls</a> = <a href="../symtab/Scopes.scala.html#25966" title="=&gt; DeVirtualize.this.global.Scope">newScope</a>
          
          // add virtual fields for all primary constructor parameters
          <span class="keyword">for</span> (<a title="List[(DeVirtualize.this.global.Type, Int)]" id="570150">row</a> &lt;- <a href="#569669" title="(tpe: DeVirtualize.this.global.Type,start: Int)List[List[(DeVirtualize.this.global.Type, Int)]]">paramTypesAndIndices</a><span title="(f: (List[(DeVirtualize.this.global.Type, Int)]) =&gt; Unit)Unit">(</span><a href="#569842" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27033" title="=&gt; DeVirtualize.this.global.Symbol">primaryConstructor</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; DeVirtualize.this.global.Type">tpe</a>, <span title="Int(0)" class="int">0</span>))
            <span class="keyword">for</span> ((<a title="DeVirtualize.this.global.Type" id="570186">pt</a>, <a title="Int" id="570187">i</a>) &lt;- <a href="#570150" title="(f: ((DeVirtualize.this.global.Type, Int)) =&gt; DeVirtualize.this.global.Symbol)Unit">row</a>) 
              <a href="#569846" title="(sym: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol">enter</a>(<a href="#569667" title="(clazz: DeVirtualize.this.global.Symbol,index: Int,tpe: DeVirtualize.this.global.Type)DeVirtualize.this.global.Symbol">mkParamField</a>(<a href="#569842" title="DeVirtualize.this.global.Symbol">clazz</a>, <a href="#570187" title="Int">i</a>, <a href="#569805" title="(tp: DeVirtualize.this.global.Type)DeVirtualize.this.global.Type">devirtualizeMap</a>(<a href="#570186" title="DeVirtualize.this.global.Type">pt</a>)))

          // remove OVERRIDE from all workertrait members, except if they override a member in Object
          <span class="keyword">for</span> (<a title="DeVirtualize.this.global.Symbol" id="570227">m</a> &lt;- <a href="#569841" title="DeVirtualize.this.global.Scope">decls0</a>.<a href="../symtab/Scopes.scala.html#27144" title="(f: (DeVirtualize.this.global.Symbol) =&gt; Any)Unit">toList</a>) {
            <span title="Any" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="#570227" title="DeVirtualize.this.global.Symbol">m</a>.<a href="../symtab/Symbols.scala.html#26916" title="=&gt; Boolean">isConstructor</a>) {
              <span title="Any" class="keyword">if</span> (<span title="(x$1: Boolean)Boolean">(</span><a href="../symtab/Symbols.scala.html#26996" title="(mask: Long)Boolean">m</a> hasFlag <span title="Long(2L)">OVERRIDE</span>) &amp;&amp; <a href="#570227" title="DeVirtualize.this.global.Symbol">m</a>.<a href="../symtab/Symbols.scala.html#27062" title="(ofclazz: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol">overriddenSymbol</a><span title="(x$1: AnyRef)Boolean">(</span><a href="../symtab/Definitions.scala.html#28267" title="=&gt; DeVirtualize.this.global.Symbol">ObjectClass</a>) == <a href="../symtab/Symbols.scala.html#26134" title="object DeVirtualize.this.global.NoSymbol">NoSymbol</a>)
                <a href="../symtab/Symbols.scala.html#26993" title="(mask: Long)m.type">m</a> setFlag (<a href="../symtab/Flags.scala.html#28757" title="(x$1: Long)Long">notOVERRIDE</a> | <a href="../symtab/Flags.scala.html#28747" title="=&gt; Long">notFINAL</a>)
              <a href="#569846" title="(sym: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol">enter</a>(<a href="#570227" title="DeVirtualize.this.global.Symbol">m</a>)
            }
          }
          <span title="Unit" class="keyword">if</span> (<a href="#569842" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27034" title="(x$1: AnyRef)Boolean">thisSym</a> == <a href="#569842" title="DeVirtualize.this.global.Symbol">clazz</a>) <a href="#569842" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27036" title="(tp: DeVirtualize.this.global.Type)Unit">typeOfThis</a> = <a href="#569842" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27037" title="=&gt; DeVirtualize.this.global.Type">thisType</a>
            // ... to give a hook on which we can hang selftype transformers
          <a href="../symtab/Types.scala.html#44259" title="(parents: List[DeVirtualize.this.global.Type],decls: DeVirtualize.this.global.Scope,typeSymbol: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.ClassInfoType">ClassInfoType</a>(<span title="(xs: DeVirtualize.this.global.Type*)List[DeVirtualize.this.global.Type]">List</span>(<a href="../symtab/Definitions.scala.html#28267" title="=&gt; DeVirtualize.this.global.Symbol">ObjectClass</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; DeVirtualize.this.global.Type">tpe</a>, <a href="../symtab/Definitions.scala.html#28329" title="=&gt; DeVirtualize.this.global.Symbol">ScalaObjectClass</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; DeVirtualize.this.global.Type">tpe</a>), <a href="#569845" title="DeVirtualize.this.global.Scope">decls</a>, <a href="#569842" title="DeVirtualize.this.global.Symbol">clazz</a>)
        } <span class="keyword">else</span> {
          <a href="../symtab/Types.scala.html#44259" title="(parents: List[DeVirtualize.this.global.Type],decls: DeVirtualize.this.global.Scope,typeSymbol: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.ClassInfoType">ClassInfoType</a>(<a href="#569840" title="(f: (DeVirtualize.this.global.Type) =&gt; DeVirtualize.this.global.Type)(implicit bf: scala.collection.generic.BuilderFactory[DeVirtualize.this.global.Type,List[DeVirtualize.this.global.Type],List[DeVirtualize.this.global.Type]])List[DeVirtualize.this.global.Type]">parents</a> <span title="scala.collection.generic.BuilderFactory[DeVirtualize.this.global.Type,List[DeVirtualize.this.global.Type],List#Coll]">map</span> <span class="keyword">this</span>, <a href="#569845" title="DeVirtualize.this.global.Scope">decls</a>, <a href="#569842" title="DeVirtualize.this.global.Symbol">clazz</a>)
        }
      <span title="DeVirtualize.this.global.TypeRef" class="keyword">case</span> <a title="DeVirtualize.this.global.TypeRef" id="570377">tp1</a> @ TypeRef(<a title="DeVirtualize.this.global.Type" id="570381">pre</a>, <a title="DeVirtualize.this.global.Symbol" id="570382">clazz</a>, <a title="List[DeVirtualize.this.global.Type]" id="570383">args</a>) <span class="keyword">if</span> <a href="#570382" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#26954" title="=&gt; Boolean">isVirtualClass</a> =&gt;
        <a href="../symtab/Types.scala.html#42842" title="(pre: DeVirtualize.this.global.Type,sym: DeVirtualize.this.global.Symbol,args: List[DeVirtualize.this.global.Type])DeVirtualize.this.global.TypeRef">TypeRef</a>(<a href="#570381" title="DeVirtualize.this.global.Type">pre</a>, <a href="#569653" title="(clazz: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol">abstractType</a>(<a href="#570382" title="DeVirtualize.this.global.Symbol">clazz</a>), <a href="#570383" title="List[DeVirtualize.this.global.Type]">args</a>)
      <span title="DeVirtualize.this.global.Type" class="keyword">case</span> <a title="DeVirtualize.this.global.Type" id="570417">tp1</a> =&gt;
        <a href="#570417" title="DeVirtualize.this.global.Type">tp1</a>
    }
  }

  /** Transform owner of given clazz symbol */
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(clazz: DeVirtualize.this.global.Symbol)Unit" id="569648">transformOwnerInfo</a>(<a title="DeVirtualize.this.global.Symbol" id="570119">clazz</a>: <a href="../symtab/Symbols.scala.html#26127" title="DeVirtualize.this.global.Symbol">Symbol</a>) { <a href="../symtab/SymbolTable.scala.html#26097" title="(ph: scala.tools.nsc.Phase)(op: =&gt; DeVirtualize.this.global.Type)DeVirtualize.this.global.Type">atPhase</a>(<a href="../SubComponent.scala.html#39639" title="=&gt; scala.tools.nsc.Phase">ownPhase</a>.<a href="../Phase.scala.html#23158" title="=&gt; scala.tools.nsc.Phase">next</a>) <span title="Unit">{</span> <a href="#570119" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#26983" title="=&gt; DeVirtualize.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27004" title="=&gt; DeVirtualize.this.global.Type">info</a> } }

  /** Names of derived classes and factories */
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(clazz: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Name" id="569649">concreteClassName</a>(<a title="DeVirtualize.this.global.Symbol" id="570428">clazz</a>: <a href="../symtab/Symbols.scala.html#26127" title="DeVirtualize.this.global.Symbol">Symbol</a>) = 
    <a href="../symtab/SymbolTable.scala.html#26097" title="(ph: scala.tools.nsc.Phase)(op: =&gt; DeVirtualize.this.global.Name)DeVirtualize.this.global.Name">atPhase</a>(<a href="../SubComponent.scala.html#39639" title="=&gt; scala.tools.nsc.Phase">ownPhase</a>) { <a href="../symtab/Names.scala.html#26051" title="(s: String)DeVirtualize.this.global.Name">newTypeName</a>(<a href="#570428" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#26988" title="(other: String)java.lang.String" id="8103">name</a>+<span title="java.lang.String(&quot;$fix&quot;)" class="string">&quot;$fix&quot;</span>) }
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(clazz: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Name" id="569650">factoryName</a>(<a title="DeVirtualize.this.global.Symbol" id="570459">clazz</a>: <a href="../symtab/Symbols.scala.html#26127" title="DeVirtualize.this.global.Symbol">Symbol</a>) = 
    <a href="../symtab/SymbolTable.scala.html#26097" title="(ph: scala.tools.nsc.Phase)(op: =&gt; DeVirtualize.this.global.Name)DeVirtualize.this.global.Name">atPhase</a>(<a href="../SubComponent.scala.html#39639" title="=&gt; scala.tools.nsc.Phase">ownPhase</a>) { <a href="../symtab/Names.scala.html#26048" title="(s: String)DeVirtualize.this.global.Name">newTermName</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;new$&quot;</span>+<a href="#570459" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#26988" title="=&gt; DeVirtualize.this.global.Name">name</a>) }

  /** Does `clazz' contaion virtual classes? */
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(clazz: DeVirtualize.this.global.Symbol)Boolean" id="569651">containsVirtuals</a>(<a title="DeVirtualize.this.global.Symbol" id="569869">clazz</a>: <a href="../symtab/Symbols.scala.html#26127" title="DeVirtualize.this.global.Symbol">Symbol</a>) = <a href="#569869" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27004" title="=&gt; DeVirtualize.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#30210" title="=&gt; DeVirtualize.this.global.Scope">decls</a>.<a href="../symtab/Scopes.scala.html#27144" title="(p: (DeVirtualize.this.global.Symbol) =&gt; Boolean)Boolean">toList</a> exists (<a href="#569878" title="DeVirtualize.this.global.Symbol">_</a>.<a href="../symtab/Symbols.scala.html#26954" title="=&gt; Boolean">isVirtualClass</a>)

  /** The inner classes that need factory methods in `clazz' 
   *  This is intended to catch situations like the following
   *
   *  abstract class C { 
   *    class V &lt;: {...}
   *    class W extends V 
   *  }
   *  class D extends C {
   *    class V &lt;: {...}
   *    // factories needed for V and W!
   *  }
   */
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(clazz: DeVirtualize.this.global.Symbol)List[DeVirtualize.this.global.Symbol]" id="569652">classesInNeedOfFactories</a>(<a title="DeVirtualize.this.global.Symbol" id="569937">clazz</a>: <a href="../symtab/Symbols.scala.html#26127" title="DeVirtualize.this.global.Symbol">Symbol</a>) = <a href="../symtab/SymbolTable.scala.html#26097" title="(ph: scala.tools.nsc.Phase)(op: =&gt; List[DeVirtualize.this.global.Symbol])List[DeVirtualize.this.global.Symbol]">atPhase</a>(<a href="../SubComponent.scala.html#39639" title="=&gt; scala.tools.nsc.Phase">ownPhase</a>) {
    <span class="keyword">def</span> <a title="(c: DeVirtualize.this.global.Symbol)Boolean" id="569946">isOverriddenVirtual</a>(<a title="DeVirtualize.this.global.Symbol" id="569948">c</a>: <a href="../symtab/Symbols.scala.html#26127" title="DeVirtualize.this.global.Symbol">Symbol</a>) = 
      <a href="#569948" title="DeVirtualize.this.global.Symbol">c</a>.<a href="../symtab/Symbols.scala.html#26954" title="(x$1: Boolean)Boolean">isVirtualClass</a> &amp;&amp; <a href="#569937" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27004" title="=&gt; DeVirtualize.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#30211" title="(name: DeVirtualize.this.global.Name)DeVirtualize.this.global.Symbol">decl</a>(<a href="#569948" title="DeVirtualize.this.global.Symbol">c</a>.<a href="../symtab/Symbols.scala.html#26988" title="=&gt; DeVirtualize.this.global.Name">name</a>).<a href="../symtab/Symbols.scala.html#26954" title="=&gt; Boolean">isVirtualClass</a>
    <span class="keyword">val</span> <a title="List[DeVirtualize.this.global.Symbol]" id="569947">xs</a> = <a href="#569937" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27004" title="=&gt; DeVirtualize.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#30213" title="=&gt; List[DeVirtualize.this.global.Symbol]">members</a>.<span title="(p: (DeVirtualize.this.global.Symbol) =&gt; Boolean)List[DeVirtualize.this.global.Symbol]">toList</span> filter (<a title="DeVirtualize.this.global.Symbol" id="569957">x</a> =&gt; <a href="#569957" title="DeVirtualize.this.global.Symbol">x</a>.<a href="../symtab/Symbols.scala.html#26954" title="(x$1: Boolean)Boolean">isVirtualClass</a> &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#569957" title="DeVirtualize.this.global.Symbol">x</a>.<a href="../symtab/Symbols.scala.html#26996" title="(mask: Long)Boolean">hasFlag</a>(<span title="Long(8L)">ABSTRACT</span>))
    <span class="keyword">for</span> (<a title="DeVirtualize.this.global.Symbol" id="569994">m</a> &lt;- <a href="#569937" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27004" title="=&gt; DeVirtualize.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#30213" title="=&gt; List[DeVirtualize.this.global.Symbol]">members</a>.<span title="(f: (DeVirtualize.this.global.Symbol) =&gt; DeVirtualize.this.global.Symbol)(implicit bf: scala.collection.generic.BuilderFactory[DeVirtualize.this.global.Symbol,List[DeVirtualize.this.global.Symbol],List[DeVirtualize.this.global.Symbol]])List[DeVirtualize.this.global.Symbol]">toList</span>; 
         <span class="keyword">if</span> (<a href="#569994" title="DeVirtualize.this.global.Symbol">m</a>.<a href="../symtab/Symbols.scala.html#26954" title="(x$1: Boolean)Boolean">isVirtualClass</a> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span>(<a href="../symtab/Symbols.scala.html#26996" title="(mask: Long)Boolean">m</a> hasFlag <span title="Long(8L)">ABSTRACT</span>) &amp;&amp; 
             (<a href="#569994" title="DeVirtualize.this.global.Symbol">m</a>.<a href="../symtab/Symbols.scala.html#27004" title="=&gt; DeVirtualize.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#30242" title="(p: (DeVirtualize.this.global.Symbol) =&gt; Boolean)Boolean">baseClasses</a> exists <a href="#569946" title="(c: DeVirtualize.this.global.Symbol)Boolean">isOverriddenVirtual</a>))) <span class="keyword">yield</span> <a href="#569994" title="DeVirtualize.this.global.Symbol">m</a>
  }

  /** The abstract type corresponding to a virtual class. */  
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(clazz: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol" id="569653">abstractType</a>(<a title="DeVirtualize.this.global.Symbol" id="569755">clazz</a>: <a href="../symtab/Symbols.scala.html#26127" title="DeVirtualize.this.global.Symbol">Symbol</a>): <a href="../symtab/Symbols.scala.html#26127" title="DeVirtualize.this.global.Symbol">Symbol</a> =  <a href="../symtab/SymbolTable.scala.html#26097" title="(ph: scala.tools.nsc.Phase)(op: =&gt; DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol">atPhase</a>(<a href="../SubComponent.scala.html#39639" title="=&gt; scala.tools.nsc.Phase">ownPhase</a>.<a href="../Phase.scala.html#23158" title="=&gt; scala.tools.nsc.Phase">next</a>) {
    <span class="keyword">val</span> <a title="DeVirtualize.this.global.Symbol" id="570484">abstpe</a> = <a href="#569755" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#26983" title="=&gt; DeVirtualize.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27004" title="=&gt; DeVirtualize.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#30211" title="(name: DeVirtualize.this.global.Name)DeVirtualize.this.global.Symbol">decl</a>(<a href="../symtab/SymbolTable.scala.html#26097" title="(ph: scala.tools.nsc.Phase)(op: =&gt; DeVirtualize.this.global.Name)DeVirtualize.this.global.Name">atPhase</a>(<a href="../SubComponent.scala.html#39639" title="=&gt; scala.tools.nsc.Phase">ownPhase</a>) { <a href="#569755" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#26988" title="=&gt; DeVirtualize.this.global.Name">name</a> })
    <a title="(assertion: Boolean)Unit" id="7874">assert</a>(<a href="#570484" title="DeVirtualize.this.global.Symbol">abstpe</a>.<a href="../symtab/Symbols.scala.html#26900" title="=&gt; Boolean">isAbstractType</a>)
    <a href="#570484" title="DeVirtualize.this.global.Symbol">abstpe</a>
  }

  /** The factory corresponding to a virtual class. */  
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(clazz: DeVirtualize.this.global.Symbol,owner: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol" id="569654">factory</a>(<a title="DeVirtualize.this.global.Symbol" id="570506">clazz</a>: <a href="../symtab/Symbols.scala.html#26127" title="DeVirtualize.this.global.Symbol">Symbol</a>, <a title="DeVirtualize.this.global.Symbol" id="570507">owner</a>: <a href="../symtab/Symbols.scala.html#26127" title="DeVirtualize.this.global.Symbol">Symbol</a>) = <a href="../symtab/SymbolTable.scala.html#26097" title="(ph: scala.tools.nsc.Phase)(op: =&gt; DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol">atPhase</a>(<a href="../SubComponent.scala.html#39639" title="=&gt; scala.tools.nsc.Phase">ownPhase</a>.<a href="../Phase.scala.html#23158" title="=&gt; scala.tools.nsc.Phase">next</a>) {
    <span class="keyword">val</span> <a title="DeVirtualize.this.global.Symbol" id="570516">fsym</a> = <a href="#570507" title="DeVirtualize.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27004" title="=&gt; DeVirtualize.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#30217" title="(name: DeVirtualize.this.global.Name)DeVirtualize.this.global.Symbol">member</a>(<a href="#569650" title="(clazz: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Name">factoryName</a>(<a href="#570506" title="DeVirtualize.this.global.Symbol">clazz</a>))
    <a title="(assertion: Boolean,message: =&gt; Any)Unit" id="7876">assert</a>(<a href="#570516" title="DeVirtualize.this.global.Symbol">fsym</a>.<a href="../symtab/Symbols.scala.html#26910" title="=&gt; Boolean">isMethod</a>, <a href="#570506" title="DeVirtualize.this.global.Symbol">clazz</a>)
    <a href="#570516" title="DeVirtualize.this.global.Symbol">fsym</a>
  }

  /** The name of the field representing a constructor parameter of a virtual class */
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(clazz: DeVirtualize.this.global.Symbol,index: Int)DeVirtualize.this.global.Name" id="569655">paramFieldName</a>(<a title="DeVirtualize.this.global.Symbol" id="570534">clazz</a>: <a href="../symtab/Symbols.scala.html#26127" title="DeVirtualize.this.global.Symbol">Symbol</a>, <a title="Int" id="570535">index</a>: <span title="Int">Int</span>) = <a href="../symtab/SymbolTable.scala.html#26097" title="(ph: scala.tools.nsc.Phase)(op: =&gt; DeVirtualize.this.global.Name)DeVirtualize.this.global.Name">atPhase</a>(<a href="../SubComponent.scala.html#39639" title="=&gt; scala.tools.nsc.Phase">ownPhase</a>) {
    <a href="#570534" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27076" title="(name: DeVirtualize.this.global.Name)DeVirtualize.this.global.Name">expandedName</a>(<a href="../symtab/Names.scala.html#26048" title="(s: String)DeVirtualize.this.global.Name">newTermName</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;param$&quot;</span>+<a href="#570535" title="Int">index</a>))
  }

  /** The name of the field representing a constructor parameter of a virtual class */
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(index: Int)DeVirtualize.this.global.Name" id="569656">fixParamName</a>(<a title="Int" id="570557">index</a>: <span title="Int">Int</span>) = <a href="../symtab/Names.scala.html#26048" title="(s: String)DeVirtualize.this.global.Name">newTermName</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;fix$&quot;</span>+<a href="#570557" title="Int">index</a>)

  /** The field representing a constructor parameter of a virtual class */
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(clazz: DeVirtualize.this.global.Symbol,index: Int)DeVirtualize.this.global.Symbol" id="569657">paramField</a>(<a title="DeVirtualize.this.global.Symbol" id="570566">clazz</a>: <a href="../symtab/Symbols.scala.html#26127" title="DeVirtualize.this.global.Symbol">Symbol</a>, <a title="Int" id="570567">index</a>: <span title="Int">Int</span>) = <a href="../symtab/SymbolTable.scala.html#26097" title="(ph: scala.tools.nsc.Phase)(op: =&gt; DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol">atPhase</a>(<a href="../SubComponent.scala.html#39639" title="=&gt; scala.tools.nsc.Phase">ownPhase</a>.<a href="../Phase.scala.html#23158" title="=&gt; scala.tools.nsc.Phase">next</a>) {
    <a href="#570566" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27004" title="=&gt; DeVirtualize.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#30211" title="(name: DeVirtualize.this.global.Name)DeVirtualize.this.global.Symbol">decl</a>(<a href="#569655" title="(clazz: DeVirtualize.this.global.Symbol,index: Int)DeVirtualize.this.global.Name">paramFieldName</a>(<a href="#570566" title="DeVirtualize.this.global.Symbol">clazz</a>, <a href="#570567" title="Int">index</a>))
  }

  /** The flags that an abstract type can inherit from its virtual class */
  <span class="keyword">protected</span> <span class="keyword">val</span> <a title="Long" id="569658">absTypeFlagMask</a> = <a href="../symtab/Flags.scala.html#28803" title="(x$1: Int)Long">AccessFlags</a> | <span title="Int(16)">DEFERRED</span>

  /** The flags that a factory method can inherit from its virtual class */
  <span class="keyword">protected</span> <span class="keyword">val</span> <a title="Long" id="569660">factoryFlagMask</a> = <a href="../symtab/Flags.scala.html#28803" title="=&gt; Long">AccessFlags</a>

  /** Create a polytype with given type parameters and given type, or return just the type
   *  if type params is empty. */
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(tparams: List[DeVirtualize.this.global.Symbol],tp: DeVirtualize.this.global.Type)DeVirtualize.this.global.Type" id="569662">mkPolyType</a>(<a title="List[DeVirtualize.this.global.Symbol]" id="570585">tparams</a>: <span title="List[DeVirtualize.this.global.Symbol]">List</span>[Symbol], <a title="DeVirtualize.this.global.Type" id="570586">tp</a>: <a href="../symtab/Types.scala.html#26205" title="DeVirtualize.this.global.Type">Type</a>) = 
    <span title="DeVirtualize.this.global.Type" class="keyword">if</span> (<a href="#570585" title="List[DeVirtualize.this.global.Symbol]">tparams</a>.<span title="=&gt; Boolean">isEmpty</span>) <a href="#570586" title="DeVirtualize.this.global.Type">tp</a> <span class="keyword">else</span> <a href="../symtab/Types.scala.html#43825" title="(typeParams: List[DeVirtualize.this.global.Symbol],resultType: DeVirtualize.this.global.Type)DeVirtualize.this.global.PolyType">PolyType</a>(<a href="#570585" title="List[DeVirtualize.this.global.Symbol]">tparams</a>, <a href="#570586" title="DeVirtualize.this.global.Type">tp</a>)

  /** A lazy type to complete `sym', which is is generated for virtual class
   *  `clazz'. 
   *  The info of the symbol is computed by method `getInfo'.
   *  It is wrapped in copies of the type parameters of `clazz'.
   */
  <span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class PolyTypeCompleter extends DeVirtualize.this.global.LazyType with ScalaObject" id="569663">PolyTypeCompleter</a><span title="ScalaObject">(</span><a title="DeVirtualize.this.global.Symbol" id="570664">sym</a>: <a href="../symtab/Symbols.scala.html#26127" title="DeVirtualize.this.global.Symbol">Symbol</a>, <a title="DeVirtualize.this.global.Symbol" id="570665">clazz</a>: <a href="../symtab/Symbols.scala.html#26127" title="DeVirtualize.this.global.Symbol">Symbol</a>) <span class="keyword">extends</span> <a href="../symtab/Types.scala.html#26283" title="DeVirtualize.this.global.LazyType">LazyType</a> {
    <span class="keyword">def</span> <a title="=&gt; DeVirtualize.this.global.Type" id="570614">getInfo</a>: <a href="../symtab/Types.scala.html#26205" title="DeVirtualize.this.global.Type">Type</a>
    <span class="keyword">override</span> <span class="keyword">val</span> <a title="List[DeVirtualize.this.global.Symbol]" id="570615">typeParams</a> = <a href="../symtab/Symbols.scala.html#26137" title="(syms: List[DeVirtualize.this.global.Symbol],owner: DeVirtualize.this.global.Symbol)List[DeVirtualize.this.global.Symbol]">cloneSymbols</a>(<a href="#570665" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27016" title="=&gt; List[DeVirtualize.this.global.Symbol]">typeParams</a>, <a href="#570664" title="DeVirtualize.this.global.Symbol">sym</a>)
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(sym: DeVirtualize.this.global.Symbol)Unit" id="570617">complete</a>(<a title="DeVirtualize.this.global.Symbol" id="570670">sym</a>: <a href="../symtab/Symbols.scala.html#26127" title="DeVirtualize.this.global.Symbol">Symbol</a>) {
      <a href="#570670" title="DeVirtualize.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27005" title="(info: DeVirtualize.this.global.Type)sym.type">setInfo</a><span title="Unit">(</span>
        <a href="#569662" title="(tparams: List[DeVirtualize.this.global.Symbol],tp: DeVirtualize.this.global.Type)DeVirtualize.this.global.Type">mkPolyType</a>(<a href="#570615" title="=&gt; List[DeVirtualize.this.global.Symbol]">typeParams</a>, <a href="#570614" title="=&gt; DeVirtualize.this.global.Type">getInfo</a>.<a href="../symtab/Types.scala.html#30225" title="(from: List[DeVirtualize.this.global.Symbol],to: List[DeVirtualize.this.global.Symbol])DeVirtualize.this.global.Type">substSym</a>(<a href="#570665" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27016" title="=&gt; List[DeVirtualize.this.global.Symbol]">typeParams</a>, <a href="#570615" title="=&gt; List[DeVirtualize.this.global.Symbol]">typeParams</a>)))
    }
  }

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(sym: DeVirtualize.this.global.Symbol)Boolean" id="569664">wasVirtualClass</a>(<a title="DeVirtualize.this.global.Symbol" id="570684">sym</a>: <a href="../symtab/Symbols.scala.html#26127" title="DeVirtualize.this.global.Symbol">Symbol</a>) = { 
    <a href="#570684" title="DeVirtualize.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26954" title="(x$1: Boolean)Boolean" id="2210">isVirtualClass</a> || {
      <a href="#570684" title="DeVirtualize.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27004" title="=&gt; DeVirtualize.this.global.Type">info</a>
      <a href="../symtab/Symbols.scala.html#26996" title="(mask: Long)Boolean">sym</a> hasFlag <a href="../symtab/Flags.scala.html#28751" title="=&gt; Long">notDEFERRED</a> 
    }
  }

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(clazz: DeVirtualize.this.global.Symbol)List[DeVirtualize.this.global.Symbol]" id="569665">addOverriddenVirtuals</a>(<a title="DeVirtualize.this.global.Symbol" id="570691">clazz</a>: <a href="../symtab/Symbols.scala.html#26127" title="DeVirtualize.this.global.Symbol">Symbol</a>) = {
    (<a href="#570691" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27064" title="(p: (DeVirtualize.this.global.Symbol) =&gt; Boolean)List[DeVirtualize.this.global.Symbol]">allOverriddenSymbols</a> filter <a href="#569664" title="(sym: DeVirtualize.this.global.Symbol)Boolean">wasVirtualClass</a>) <a href="#570694" title="List[DeVirtualize.this.global.Symbol]">:::</a> <span title="(xs: DeVirtualize.this.global.Symbol*)List[DeVirtualize.this.global.Symbol]">List</span><span title="(prefix: List[DeVirtualize.this.global.Symbol])List[DeVirtualize.this.global.Symbol]">(</span><a href="#570691" title="DeVirtualize.this.global.Symbol">clazz</a>)
  }

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(tpe: DeVirtualize.this.global.Type)List[DeVirtualize.this.global.Type]" id="569666">addOverriddenVirtuals</a>(<a title="DeVirtualize.this.global.Type" id="570718">tpe</a>: <a href="../symtab/Types.scala.html#26205" title="DeVirtualize.this.global.Type">Type</a>) = <a href="#570718" title="DeVirtualize.this.global.Type">tpe</a> <span title="List[DeVirtualize.this.global.Type]" class="keyword">match</span> {
    <span title="List[DeVirtualize.this.global.Type]" class="keyword">case</span> TypeRef(<a title="DeVirtualize.this.global.Type" id="570724">pre</a>, <a title="DeVirtualize.this.global.Symbol" id="570725">sym</a>, <a title="List[DeVirtualize.this.global.Type]" id="570726">args</a>) =&gt;
      { <span class="keyword">for</span> (<a title="DeVirtualize.this.global.Symbol" id="570745">vc</a> &lt;- <a href="#570725" title="DeVirtualize.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27064" title="(f: (DeVirtualize.this.global.Symbol) =&gt; DeVirtualize.this.global.Type)(implicit bf: scala.collection.generic.BuilderFactory[DeVirtualize.this.global.Type,List[DeVirtualize.this.global.Type],List[DeVirtualize.this.global.Symbol]])List[DeVirtualize.this.global.Type]">allOverriddenSymbols</a> <span class="keyword">if</span> <a href="#569664" title="(sym: DeVirtualize.this.global.Symbol)Boolean">wasVirtualClass</a>(<a href="#570745" title="DeVirtualize.this.global.Symbol">vc</a>))
        <span class="keyword">yield</span> <a href="../symtab/Types.scala.html#26295" title="(pre: DeVirtualize.this.global.Type,sym: DeVirtualize.this.global.Symbol,args: List[DeVirtualize.this.global.Type])DeVirtualize.this.global.Type">typeRef</a>(<a href="#570724" title="DeVirtualize.this.global.Type">pre</a>, <a href="#570745" title="DeVirtualize.this.global.Symbol">vc</a>, <a href="#570726" title="List[DeVirtualize.this.global.Type]">args</a>) }.<span title="=&gt; List[DeVirtualize.this.global.Type]">reverse</span> <a href="#570729" title="List[DeVirtualize.this.global.Type]">:::</a> <span title="(xs: DeVirtualize.this.global.Type*)List[DeVirtualize.this.global.Type]">List</span><span title="(prefix: List[DeVirtualize.this.global.Type])List[DeVirtualize.this.global.Type]">(</span><a href="#570718" title="DeVirtualize.this.global.Type">tpe</a>)
  }

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(clazz: DeVirtualize.this.global.Symbol,index: Int,tpe: DeVirtualize.this.global.Type)DeVirtualize.this.global.Symbol" id="569667">mkParamField</a>(<a title="DeVirtualize.this.global.Symbol" id="570190">clazz</a>: <a href="../symtab/Symbols.scala.html#26127" title="DeVirtualize.this.global.Symbol">Symbol</a>, <a title="Int" id="570191">index</a>: <span title="Int">Int</span>, <a title="DeVirtualize.this.global.Type" id="570192">tpe</a>: <a href="../symtab/Types.scala.html#26205" title="DeVirtualize.this.global.Type">Type</a>): <a href="../symtab/Symbols.scala.html#26127" title="DeVirtualize.this.global.Symbol">Symbol</a> = {
    <span class="keyword">val</span> <a title="DeVirtualize.this.global.TermSymbol" id="570845">param</a> = <a href="#570190" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#26867" title="(pos: scala.tools.nsc.util.Position,name: DeVirtualize.this.global.Name)DeVirtualize.this.global.TermSymbol">newMethod</a>(<a href="#570190" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#26847" title="=&gt; scala.tools.nsc.util.Position">pos</a>, <a href="#569655" title="(clazz: DeVirtualize.this.global.Symbol,index: Int)DeVirtualize.this.global.Name">paramFieldName</a>(<a href="#570190" title="DeVirtualize.this.global.Symbol">clazz</a>, <a href="#570191" title="Int">index</a>))
      .<a href="../symtab/Symbols.scala.html#26993" title="(mask: Long)DeVirtualize.this.global.TermSymbol">setFlag</a>(PROTECTED | LOCAL | DEFERRED | EXPANDEDNAME | SYNTHETIC <span title="Long(68726292497L)">|</span> STABLE)
    <a href="../symtab/SymbolTable.scala.html#26097" title="(ph: scala.tools.nsc.Phase)(op: =&gt; DeVirtualize.this.global.TermSymbol)DeVirtualize.this.global.TermSymbol">atPhase</a>(<a href="../SubComponent.scala.html#39639" title="=&gt; scala.tools.nsc.Phase">ownPhase</a>.<a href="../Phase.scala.html#23158" title="=&gt; scala.tools.nsc.Phase">next</a>) {
      <a href="#570845" title="DeVirtualize.this.global.TermSymbol">param</a>.<a href="../symtab/Symbols.scala.html#27005" title="(info: DeVirtualize.this.global.Type)param.type">setInfo</a>(<a href="../symtab/Types.scala.html#43825" title="(typeParams: List[DeVirtualize.this.global.Symbol],resultType: DeVirtualize.this.global.Type)DeVirtualize.this.global.PolyType">PolyType</a>(List<span title="object Nil">(</span>), <a href="#570192" title="DeVirtualize.this.global.Type">tpe</a>))
    }
    <a href="#570845" title="DeVirtualize.this.global.TermSymbol">param</a>
  }

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(clazz: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol" id="569668">mkAbstractType</a>(<a title="DeVirtualize.this.global.Symbol" id="569920">clazz</a>: <a href="../symtab/Symbols.scala.html#26127" title="DeVirtualize.this.global.Symbol">Symbol</a>): <a href="../symtab/Symbols.scala.html#26127" title="DeVirtualize.this.global.Symbol">Symbol</a> = {
    <span class="keyword">val</span> <a title="DeVirtualize.this.global.TypeSymbol" id="570928">cabstype</a> = <a href="#569920" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#26983" title="=&gt; DeVirtualize.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#26879" title="(pos: scala.tools.nsc.util.Position,name: DeVirtualize.this.global.Name)DeVirtualize.this.global.TypeSymbol">newAbstractType</a>(<a href="#569920" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#26847" title="=&gt; scala.tools.nsc.util.Position">pos</a>, <a href="#569920" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#26988" title="=&gt; DeVirtualize.this.global.Name">name</a>)
      .<a href="../symtab/Symbols.scala.html#26993" title="(mask: Long)DeVirtualize.this.global.TypeSymbol">setFlag</a>(<a href="#569920" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#26991" title="(x$1: Long)Long">flags</a> <span title="(x$1: Int)Long">&amp;</span> <a href="#569658" title="=&gt; Long">absTypeFlagMask</a> | <span title="Int(2097152)">SYNTHETIC</span>)
      .<a href="../symtab/Symbols.scala.html#26855" title="(annots: List[DeVirtualize.this.global.AnnotationInfoBase])DeVirtualize.this.global.TypeSymbol">setAnnotations</a>(<a href="#569920" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#26854" title="=&gt; List[DeVirtualize.this.global.AnnotationInfo]">annotations</a>)
    <a href="../symtab/SymbolTable.scala.html#26097" title="(ph: scala.tools.nsc.Phase)(op: =&gt; DeVirtualize.this.global.TypeSymbol)DeVirtualize.this.global.TypeSymbol">atPhase</a>(<a href="../SubComponent.scala.html#39639" title="=&gt; scala.tools.nsc.Phase">ownPhase</a>.<a href="../Phase.scala.html#23158" title="=&gt; scala.tools.nsc.Phase">next</a>) {
      <a href="../symtab/Symbols.scala.html#97896" title="(tp: DeVirtualize.this.global.Type)cabstype.type">cabstype</a> setInfo <a href="#570964" title="DeVirtualize.this.PolyTypeCompleter{ ... }" class="keyword">new</a> <a href="#569663" title="anonymous class $anon extends DeVirtualize.this.PolyTypeCompleter" id="570964">PolyTypeCompleter</a>(<a href="#570928" title="DeVirtualize.this.global.TypeSymbol">cabstype</a>, <a href="#569920" title="DeVirtualize.this.global.Symbol">clazz</a>) {
        <span class="keyword">def</span> <a title="=&gt; DeVirtualize.this.global.TypeBounds" id="570966">getInfo</a> = {
          <span class="keyword">val</span> <a title="List[DeVirtualize.this.global.Type]" id="570970">parents1</a> = <a href="#569920" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27004" title="=&gt; DeVirtualize.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#30189" title="(f: (DeVirtualize.this.global.Type) =&gt; DeVirtualize.this.global.Type)(implicit bf: scala.collection.generic.BuilderFactory[DeVirtualize.this.global.Type,List[DeVirtualize.this.global.Type],List[DeVirtualize.this.global.Type]])List[DeVirtualize.this.global.Type]">parents</a> <span title="scala.collection.generic.BuilderFactory[DeVirtualize.this.global.Type,List[DeVirtualize.this.global.Type],List#Coll]">map</span> {
            <a title="DeVirtualize.this.global.Type" id="570980">p</a> =&gt; <a href="#569805" title="(tp: DeVirtualize.this.global.Type)DeVirtualize.this.global.Type">devirtualizeMap</a>(<a href="#570980" title="DeVirtualize.this.global.Type">p</a>.<a href="../symtab/Types.scala.html#30225" title="(from: List[DeVirtualize.this.global.Symbol],to: List[DeVirtualize.this.global.Symbol])DeVirtualize.this.global.Type">substSym</a>(<a href="#569920" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27016" title="=&gt; List[DeVirtualize.this.global.Symbol]">typeParams</a>, <a href="#570615" title="=&gt; List[DeVirtualize.this.global.Symbol]">typeParams</a>))
          }
          <span class="keyword">val</span> <a title="List[DeVirtualize.this.global.Type]" id="570971">parents2</a> = <a href="#569665" title="(clazz: DeVirtualize.this.global.Symbol)List[DeVirtualize.this.global.Symbol]">addOverriddenVirtuals</a><span title="(f: (DeVirtualize.this.global.Symbol) =&gt; DeVirtualize.this.global.Type)(implicit bf: scala.collection.generic.BuilderFactory[DeVirtualize.this.global.Type,List[DeVirtualize.this.global.Type],List[DeVirtualize.this.global.Symbol]])List[DeVirtualize.this.global.Type]">(</span><a href="#569920" title="DeVirtualize.this.global.Symbol">clazz</a>) <span title="scala.collection.generic.BuilderFactory[DeVirtualize.this.global.Type,List[DeVirtualize.this.global.Type],List#Coll]">map</span> {
            <a title="DeVirtualize.this.global.Symbol" id="571083">c</a> =&gt; <a href="../symtab/Types.scala.html#26295" title="(pre: DeVirtualize.this.global.Type,sym: DeVirtualize.this.global.Symbol,args: List[DeVirtualize.this.global.Type])DeVirtualize.this.global.Type">typeRef</a>(<a href="#569920" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#26983" title="=&gt; DeVirtualize.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27037" title="=&gt; DeVirtualize.this.global.Type">thisType</a>, <a href="#571083" title="DeVirtualize.this.global.Symbol">c</a>, <a href="#570615" title="(f: (DeVirtualize.this.global.Symbol) =&gt; DeVirtualize.this.global.Type)(implicit bf: scala.collection.generic.BuilderFactory[DeVirtualize.this.global.Type,List[DeVirtualize.this.global.Type],List[DeVirtualize.this.global.Symbol]])List[DeVirtualize.this.global.Type]">typeParams</a> <span title="scala.collection.generic.BuilderFactory[DeVirtualize.this.global.Type,List[DeVirtualize.this.global.Type],List#Coll]">map</span> (<a href="#571095" title="DeVirtualize.this.global.Symbol">_</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; DeVirtualize.this.global.Type">tpe</a>))
          }
          <a href="../symtab/Types.scala.html#26289" title="(lo: DeVirtualize.this.global.Type,hi: DeVirtualize.this.global.Type)DeVirtualize.this.global.TypeBounds">mkTypeBounds</a>(<a href="../symtab/Definitions.scala.html#28271" title="=&gt; DeVirtualize.this.global.Symbol">NothingClass</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; DeVirtualize.this.global.Type">tpe</a>, <a href="../symtab/Types.scala.html#26301" title="(tps: List[DeVirtualize.this.global.Type])DeVirtualize.this.global.Type">intersectionType</a>(<a href="#570970" title="List[DeVirtualize.this.global.Type]">parents1</a> <a href="#571193" title="List[DeVirtualize.this.global.Type]">:::</a> <a href="#570971" title="(prefix: List[DeVirtualize.this.global.Type])List[DeVirtualize.this.global.Type]">parents2</a>))
        }
      }
    }
  }

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(tpe: DeVirtualize.this.global.Type,start: Int)List[List[(DeVirtualize.this.global.Type, Int)]]" id="569669">paramTypesAndIndices</a>(<a title="DeVirtualize.this.global.Type" id="570128">tpe</a>: <a href="../symtab/Types.scala.html#26205" title="DeVirtualize.this.global.Type">Type</a>, <a title="Int" id="570129">start</a>: <span title="Int">Int</span>): <span title="List[List[(DeVirtualize.this.global.Type, Int)]]">List</span>[List[(Type, Int)]] = <a href="#570128" title="DeVirtualize.this.global.Type">tpe</a> <span title="List[List[(DeVirtualize.this.global.Type, Int)]]" class="keyword">match</span> {
    <span title="List[List[(DeVirtualize.this.global.Type, Int)]]" class="keyword">case</span> PolyType(_, <a title="DeVirtualize.this.global.Type" id="571215">restpe</a>) =&gt; <a href="#569669" title="(tpe: DeVirtualize.this.global.Type,start: Int)List[List[(DeVirtualize.this.global.Type, Int)]]">paramTypesAndIndices</a>(<a href="#571215" title="DeVirtualize.this.global.Type">restpe</a>, <a href="#570129" title="Int">start</a>)
    <span title="List[List[(DeVirtualize.this.global.Type, Int)]]" class="keyword">case</span> MethodType(<a title="List[DeVirtualize.this.global.Symbol]" id="571222">params</a>, <a title="DeVirtualize.this.global.Type" id="571223">restpe</a>) =&gt;
      <span class="keyword">val</span> <a title="Int" id="571226">end</a> = <a href="#570129" title="(x$1: Int)Int">start</a> + <a href="#571222" title="List[DeVirtualize.this.global.Symbol]">params</a>.<a title="=&gt; Int" id="28928">length</a>
      (<a href="#570128" title="DeVirtualize.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30200" title="(that: Iterable[Int])(implicit bf: scala.collection.generic.BuilderFactory[(DeVirtualize.this.global.Type, Int),List[(DeVirtualize.this.global.Type, Int)],List[DeVirtualize.this.global.Type]])List[(DeVirtualize.this.global.Type, Int)]" id="25448">paramTypes</a> <span title="scala.collection.generic.BuilderFactory[(DeVirtualize.this.global.Type, Int),List[(DeVirtualize.this.global.Type, Int)],List#Coll]">zip</span> <span title="object List">List</span>.<a title="(start: Int,end: Int)List[Int]" id="24484">range</a>(<a href="#570129" title="Int">start</a>, <a href="#571226" title="Int">end</a>)) <a href="#571233" title="List[(DeVirtualize.this.global.Type, Int)]">::</a> <a href="#569669" title="(tpe: DeVirtualize.this.global.Type,start: Int)List[List[(DeVirtualize.this.global.Type, Int)]]">paramTypesAndIndices</a><span title="(x: List[(DeVirtualize.this.global.Type, Int)])List[List[(DeVirtualize.this.global.Type, Int)]]">(</span><a href="#571223" title="DeVirtualize.this.global.Type">restpe</a>, <a href="#571226" title="Int">end</a>)
    <span title="List[Nothing]" class="keyword">case</span> _ =&gt;
      List<span title="object Nil">(</span>)
  }
    
  /* Add a factory symbol for a virtual class  
   *
   *  attrs mods class VC[Ts] &lt;: Ps { decls }
   *  with base classes BC[Us]'s
   *
   * which corresponds to the following definition :
   *
   *  attrs mods3 def new$VC[Ts](): VC[Ts] = {
   *    class VC$fix extends v2w(BC's[Ts]) with VC$trait[Ts] { ... }
   *    new VC$fix
   *  }
   *
   * where
   *  
   *  mods3  are the modifiers inherited to factories
   *  v2w maps every virtual class to its workertrait and leaves other types alone.
   *
   *  @param  clazz    The virtual class for which factory is added
   *  @param  owner    The owner for which factory is added as a member
   *  @param  scope    The scope into which factory is entered
   */
  <span class="keyword">def</span> <a title="(clazz: DeVirtualize.this.global.Symbol,owner: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol" id="569670">mkFactory</a>(<a title="DeVirtualize.this.global.Symbol" id="570101">clazz</a>: <a href="../symtab/Symbols.scala.html#26127" title="DeVirtualize.this.global.Symbol">Symbol</a>, <a title="DeVirtualize.this.global.Symbol" id="570102">owner</a>: <a href="../symtab/Symbols.scala.html#26127" title="DeVirtualize.this.global.Symbol">Symbol</a>): <a href="../symtab/Symbols.scala.html#26127" title="DeVirtualize.this.global.Symbol">Symbol</a> = {
    <span class="keyword">val</span> <a title="scala.tools.nsc.util.Position" id="571347">pos</a> = <span title="scala.tools.nsc.util.Position" class="keyword">if</span> (<a href="#570101" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#26983" title="(x$1: AnyRef)Boolean">owner</a> == <a href="#570102" title="DeVirtualize.this.global.Symbol">owner</a>) <a href="#570101" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#26847" title="=&gt; scala.tools.nsc.util.Position">pos</a> <span class="keyword">else</span> <a href="#570102" title="DeVirtualize.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#26847" title="=&gt; scala.tools.nsc.util.Position">pos</a>
    <span class="keyword">val</span> <a title="DeVirtualize.this.global.TermSymbol" id="571348">factory</a> = <a href="#570102" title="DeVirtualize.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#26867" title="(pos: scala.tools.nsc.util.Position,name: DeVirtualize.this.global.Name)DeVirtualize.this.global.TermSymbol">newMethod</a>(<a href="#571347" title="scala.tools.nsc.util.Position">pos</a>, <a href="#569650" title="(clazz: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Name">factoryName</a>(<a href="#570101" title="DeVirtualize.this.global.Symbol">clazz</a>))
      .<a href="../symtab/Symbols.scala.html#26993" title="(mask: Long)DeVirtualize.this.global.TermSymbol">setFlag</a>(<a href="#570101" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#26991" title="(x$1: Long)Long">flags</a> <span title="(x$1: Int)Long">&amp;</span> <a href="#569660" title="=&gt; Long">factoryFlagMask</a> | <span title="Int(2097152)">SYNTHETIC</span>)
      .<a href="../symtab/Symbols.scala.html#26855" title="(annots: List[DeVirtualize.this.global.AnnotationInfoBase])DeVirtualize.this.global.TermSymbol">setAnnotations</a>(<a href="#570101" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#26854" title="=&gt; List[DeVirtualize.this.global.AnnotationInfo]">annotations</a>)
    <a href="../symtab/Symbols.scala.html#27005" title="(info: DeVirtualize.this.global.Type)factory.type">factory</a> setInfo <a href="#571385" title="DeVirtualize.this.PolyTypeCompleter{ ... }" class="keyword">new</a> <a href="#569663" title="anonymous class $anon extends DeVirtualize.this.PolyTypeCompleter" id="571385">PolyTypeCompleter</a>(<a href="#571348" title="DeVirtualize.this.global.TermSymbol">factory</a>, <a href="#570101" title="DeVirtualize.this.global.Symbol">clazz</a>) {
      <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tpe: DeVirtualize.this.global.Type)DeVirtualize.this.global.Type" id="571387">copyType</a>(<a title="DeVirtualize.this.global.Type" id="571392">tpe</a>: <a href="../symtab/Types.scala.html#26205" title="DeVirtualize.this.global.Type">Type</a>): <a href="../symtab/Types.scala.html#26205" title="DeVirtualize.this.global.Type">Type</a> = <a href="#571392" title="DeVirtualize.this.global.Type">tpe</a> <span title="DeVirtualize.this.global.Type" class="keyword">match</span> {
        <span title="DeVirtualize.this.global.MethodType" class="keyword">case</span> MethodType(<a title="List[DeVirtualize.this.global.Symbol]" id="571395">formals</a>, <a title="DeVirtualize.this.global.Type" id="571396">restpe</a>) =&gt; <a href="../symtab/Types.scala.html#43895" title="(params: List[DeVirtualize.this.global.Symbol],resultType: DeVirtualize.this.global.Type)DeVirtualize.this.global.MethodType">MethodType</a>(<a href="#571395" title="List[DeVirtualize.this.global.Symbol]">formals</a>, <a href="#571387" title="(tpe: DeVirtualize.this.global.Type)DeVirtualize.this.global.Type">copyType</a>(<a href="#571396" title="DeVirtualize.this.global.Type">restpe</a>))
        <span title="DeVirtualize.this.global.PolyType" class="keyword">case</span> PolyType(<a href="#571424" title="(x: List[DeVirtualize.this.global.Symbol])Some[List[DeVirtualize.this.global.Symbol]]">List</a>(), <a title="DeVirtualize.this.global.Type" id="571434">restpe</a>) =&gt; <a href="../symtab/Types.scala.html#43825" title="(typeParams: List[DeVirtualize.this.global.Symbol],resultType: DeVirtualize.this.global.Type)DeVirtualize.this.global.PolyType">PolyType</a>(List<span title="object Nil">(</span>), <a href="#571387" title="(tpe: DeVirtualize.this.global.Type)DeVirtualize.this.global.Type">copyType</a>(<a href="#571434" title="DeVirtualize.this.global.Type">restpe</a>))
        <span title="Nothing" class="keyword">case</span> PolyType(_, _) =&gt; <span title="Nothing" class="keyword">throw</span> <a title="(x$1: java.lang.String)java.lang.Error" id="25911" class="keyword">new</a> <a title="java.lang.Error" id="7821">Error</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;bad case: &quot;</span>+<a href="#571392" title="DeVirtualize.this.global.Type">tpe</a>)
        <span title="DeVirtualize.this.global.Type" class="keyword">case</span> _ =&gt; <a href="#570102" title="DeVirtualize.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27037" title="=&gt; DeVirtualize.this.global.Type">thisType</a>.<a href="../symtab/Types.scala.html#30223" title="(sym: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Type">memberType</a>(<a href="#569653" title="(clazz: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol">abstractType</a>(<a href="#570101" title="DeVirtualize.this.global.Symbol">clazz</a>))
      }
      <span class="keyword">def</span> <a title="=&gt; DeVirtualize.this.global.Type" id="571388">getInfo</a> = <a href="#571387" title="(tpe: DeVirtualize.this.global.Type)DeVirtualize.this.global.Type">copyType</a>(<a href="#570101" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27033" title="=&gt; DeVirtualize.this.global.Symbol">primaryConstructor</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; DeVirtualize.this.global.Type">tpe</a>)
    }
    <a href="#571348" title="DeVirtualize.this.global.TermSymbol">factory</a>
  }

  <span class="keyword">def</span> <a title="(ts: List[DeVirtualize.this.global.Type])List[DeVirtualize.this.global.Type]" id="569671">removeDuplicates</a>(<a title="List[DeVirtualize.this.global.Type]" id="571491">ts</a>: <span title="List[DeVirtualize.this.global.Type]">List</span>[Type]): <span title="List[DeVirtualize.this.global.Type]">List</span>[Type] = <a href="#571491" title="List[DeVirtualize.this.global.Type]">ts</a> <span title="List[DeVirtualize.this.global.Type]" class="keyword">match</span> {
    <span title="List[Nothing]" class="keyword">case</span> <a href="#571494" title="(x: List[DeVirtualize.this.global.Type])Some[List[DeVirtualize.this.global.Type]]">List</a>() =&gt; List<span title="object Nil">(</span>)
    <span title="List[DeVirtualize.this.global.Type]" class="keyword">case</span> <a title="DeVirtualize.this.global.Type" id="571517">t</a> :: <a title="List[DeVirtualize.this.global.Type]" id="571518">ts1</a> =&gt; <a href="#571517" title="DeVirtualize.this.global.Type">t</a> <a href="#571521" title="DeVirtualize.this.global.Type">::</a> <a href="#569671" title="(ts: List[DeVirtualize.this.global.Type])List[DeVirtualize.this.global.Type]">removeDuplicates</a><span title="(x: DeVirtualize.this.global.Type)List[DeVirtualize.this.global.Type]">(</span><a href="#571518" title="(p: (DeVirtualize.this.global.Type) =&gt; Boolean)List[DeVirtualize.this.global.Type]">ts1</a> filter (<a href="#571524" title="DeVirtualize.this.global.Type">_</a>.<a href="../symtab/Types.scala.html#30180" title="(x$1: AnyRef)Boolean">typeSymbol</a> != <a href="#571517" title="DeVirtualize.this.global.Type">t</a>.<a href="../symtab/Types.scala.html#30180" title="=&gt; DeVirtualize.this.global.Symbol">typeSymbol</a>))
  }

  /** The concrete class symbol VC$fix in the factory symbol (@see mkFactory)
   *  @param clazz    the virtual class
   *  @param factory  the factory which returns an instance of this class
   */
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(clazz: DeVirtualize.this.global.Symbol,factory: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.ClassSymbol" id="569672">mkConcreteClass</a>(<a title="DeVirtualize.this.global.Symbol" id="571543">clazz</a>: <a href="../symtab/Symbols.scala.html#26127" title="DeVirtualize.this.global.Symbol">Symbol</a>, <a title="DeVirtualize.this.global.Symbol" id="571544">factory</a>: <a href="../symtab/Symbols.scala.html#26127" title="DeVirtualize.this.global.Symbol">Symbol</a>) = {
    <span class="keyword">val</span> <a title="DeVirtualize.this.global.ClassSymbol" id="571547">cclazz</a> = <a href="#571544" title="DeVirtualize.this.global.Symbol">factory</a>.<a href="../symtab/Symbols.scala.html#26885" title="(pos: scala.tools.nsc.util.Position,name: DeVirtualize.this.global.Name)DeVirtualize.this.global.ClassSymbol">newClass</a>(<a href="#571543" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#26847" title="=&gt; scala.tools.nsc.util.Position">pos</a>, <a href="#569649" title="(clazz: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Name">concreteClassName</a>(<a href="#571543" title="DeVirtualize.this.global.Symbol">clazz</a>))
      .<a href="../symtab/Symbols.scala.html#26993" title="(mask: Long)DeVirtualize.this.global.ClassSymbol">setFlag</a>(FINAL <span title="Long(2097184L)">|</span> SYNTHETIC)
      .<a href="../symtab/Symbols.scala.html#26855" title="(annots: List[DeVirtualize.this.global.AnnotationInfoBase])DeVirtualize.this.global.ClassSymbol">setAnnotations</a>(<a href="#571543" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#26854" title="=&gt; List[DeVirtualize.this.global.AnnotationInfo]">annotations</a>)
      
    <a href="../symtab/Symbols.scala.html#97896" title="(tp: DeVirtualize.this.global.Type)cclazz.type">cclazz</a> setInfo <a href="#571589" title="DeVirtualize.this.global.LazyType{ ... }" class="keyword">new</a> <a href="../symtab/Types.scala.html#26283" title="anonymous class $anon extends DeVirtualize.this.global.LazyType" id="571589">LazyType</a> {
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="(sym: DeVirtualize.this.global.Symbol)Unit" id="571591">complete</a>(<a title="DeVirtualize.this.global.Symbol" id="571595">sym</a>: <a href="../symtab/Symbols.scala.html#26127" title="DeVirtualize.this.global.Symbol">Symbol</a>) {
        <span class="keyword">val</span> <a title="List[DeVirtualize.this.global.Type]" id="571600">parents1</a> = <a href="../symtab/SymbolTable.scala.html#26097" title="(ph: scala.tools.nsc.Phase)(op: =&gt; List[DeVirtualize.this.global.Type])List[DeVirtualize.this.global.Type]">atPhase</a>(<a href="../SubComponent.scala.html#39639" title="=&gt; scala.tools.nsc.Phase">ownPhase</a>) {
          <span class="keyword">var</span> <a title="DeVirtualize.this.global.Symbol" id="571607">superclazz</a> = <a href="#571543" title="DeVirtualize.this.global.Symbol">clazz</a>
          <a href="#571609" title="Unit" class="keyword">do</a> {
            <a href="#571607" title="DeVirtualize.this.global.Symbol">superclazz</a> = <a href="#571607" title="DeVirtualize.this.global.Symbol">superclazz</a>.<a href="../symtab/Symbols.scala.html#27004" title="=&gt; DeVirtualize.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#30189" title="=&gt; List[DeVirtualize.this.global.Type]">parents</a>.<a title="=&gt; DeVirtualize.this.global.Type" id="25443">head</a>.<a href="../symtab/Types.scala.html#30180" title="=&gt; DeVirtualize.this.global.Symbol">typeSymbol</a>
          } <span class="keyword">while</span> (<a href="#569664" title="(sym: DeVirtualize.this.global.Symbol)Boolean">wasVirtualClass</a>(<a href="#571607" title="DeVirtualize.this.global.Symbol">superclazz</a>)) 
          <span class="keyword">val</span> <a title="List[DeVirtualize.this.global.Symbol]" id="571608">bcs</a> = <a href="#571607" title="DeVirtualize.this.global.Symbol">superclazz</a> <a href="#571615" title="DeVirtualize.this.global.Symbol">::</a> (<a href="#571543" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27004" title="=&gt; DeVirtualize.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#30242" title="(p: (DeVirtualize.this.global.Symbol) =&gt; Boolean)List[DeVirtualize.this.global.Symbol]" id="24295">baseClasses</a> takeWhile (<a href="#571607" title="DeVirtualize.this.global.Symbol">superclazz</a> <a href="#571625" title="(x$1: AnyRef)Boolean">!=</a> )).<span title="(x: DeVirtualize.this.global.Symbol)List[DeVirtualize.this.global.Symbol]">reverse</span>
          <span title="(x: Any)Unit">println</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;MKConcrete1 &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#571547" title="DeVirtualize.this.global.ClassSymbol">cclazz</a><span title="(x$1: Any)java.lang.String">+</span><a href="#571544" title="DeVirtualize.this.global.Symbol">factory</a>.<a href="../symtab/Symbols.scala.html#27092" title="=&gt; String">locationString</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot; &quot;)" class="string">&quot; &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#571608" title="List[DeVirtualize.this.global.Symbol]">bcs</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot; from &quot;)" class="string">&quot; from &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#571543" title="DeVirtualize.this.global.Symbol">clazz</a>+<a href="#571543" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27092" title="=&gt; String">locationString</a>)
          <span title="(x: Any)Unit">println</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;MKConcrete2 &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#571547" title="DeVirtualize.this.global.ClassSymbol">cclazz</a><span title="(x$1: Any)java.lang.String">+</span><a href="#571544" title="DeVirtualize.this.global.Symbol">factory</a>.<a href="../symtab/Symbols.scala.html#27092" title="=&gt; String">locationString</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot; &quot;)" class="string">&quot; &quot;</span>+(<a href="#571608" title="(f: (DeVirtualize.this.global.Symbol) =&gt; DeVirtualize.this.global.Type)(implicit bf: scala.collection.generic.BuilderFactory[DeVirtualize.this.global.Type,Any,List[DeVirtualize.this.global.Symbol]])Any">bcs</a> <span title="scala.collection.generic.BuilderFactory[DeVirtualize.this.global.Type,List[DeVirtualize.this.global.Type],List#Coll]">map</span> <a href="#571544" title="DeVirtualize.this.global.Symbol">factory</a>.<a href="../symtab/Symbols.scala.html#26983" title="=&gt; DeVirtualize.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27037" title="=&gt; DeVirtualize.this.global.Type">thisType</a>.<a href="../symtab/Types.scala.html#30223" title="(sym: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Type">memberType</a>))
          <a href="#571608" title="(f: (DeVirtualize.this.global.Symbol) =&gt; DeVirtualize.this.global.Type)(implicit bf: scala.collection.generic.BuilderFactory[DeVirtualize.this.global.Type,List[DeVirtualize.this.global.Type],List[DeVirtualize.this.global.Symbol]])List[DeVirtualize.this.global.Type]">bcs</a> <span title="scala.collection.generic.BuilderFactory[DeVirtualize.this.global.Type,List[DeVirtualize.this.global.Type],List#Coll]">map</span> <a href="#571544" title="DeVirtualize.this.global.Symbol">factory</a>.<a href="../symtab/Symbols.scala.html#26983" title="=&gt; DeVirtualize.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27037" title="=&gt; DeVirtualize.this.global.Type">thisType</a>.<a href="../symtab/Types.scala.html#30223" title="(sym: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Type">memberType</a>
        }
        <a href="../symtab/SymbolTable.scala.html#26097" title="(ph: scala.tools.nsc.Phase)(op: =&gt; DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol">atPhase</a>(<a href="../SubComponent.scala.html#39639" title="=&gt; scala.tools.nsc.Phase">ownPhase</a>.<a href="../Phase.scala.html#23158" title="=&gt; scala.tools.nsc.Phase">next</a>) <span title="Unit">{</span>
          <span class="keyword">val</span> <a title="List[DeVirtualize.this.global.Type]" id="571864">parents2</a> = 
            <a href="#569671" title="(ts: List[DeVirtualize.this.global.Type])List[DeVirtualize.this.global.Type]">removeDuplicates</a>(<a href="#571600" title="List[DeVirtualize.this.global.Type]">parents1</a>.<span title="(f: (DeVirtualize.this.global.Type) =&gt; Traversable[DeVirtualize.this.global.Type])(implicit bf: scala.collection.generic.BuilderFactory[DeVirtualize.this.global.Type,List[DeVirtualize.this.global.Type],List[DeVirtualize.this.global.Type]])List[DeVirtualize.this.global.Type]">flatMap</span><span title="scala.collection.generic.BuilderFactory[DeVirtualize.this.global.Type,List[DeVirtualize.this.global.Type],List#Coll]">(</span><a href="#569666" title="(tpe: DeVirtualize.this.global.Type)List[DeVirtualize.this.global.Type]">addOverriddenVirtuals</a>))
            .<span title="(f: (DeVirtualize.this.global.Type) =&gt; DeVirtualize.this.global.Type)(implicit bf: scala.collection.generic.BuilderFactory[DeVirtualize.this.global.Type,List[DeVirtualize.this.global.Type],List[DeVirtualize.this.global.Type]])List[DeVirtualize.this.global.Type]">map</span><span title="scala.collection.generic.BuilderFactory[DeVirtualize.this.global.Type,List[DeVirtualize.this.global.Type],List#Coll]">(</span><a href="#571903" title="DeVirtualize.this.global.Type">_</a>.<a href="../symtab/Types.scala.html#30225" title="(from: List[DeVirtualize.this.global.Symbol],to: List[DeVirtualize.this.global.Symbol])DeVirtualize.this.global.Type">substSym</a>(<a href="#571543" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27016" title="=&gt; List[DeVirtualize.this.global.Symbol]">typeParams</a>, <a href="#571544" title="DeVirtualize.this.global.Symbol">factory</a>.<a href="../symtab/Symbols.scala.html#27016" title="=&gt; List[DeVirtualize.this.global.Symbol]">typeParams</a>))
          <a href="../symtab/Symbols.scala.html#27005" title="(info: DeVirtualize.this.global.Type)sym.type">sym</a> setInfo <a href="../symtab/Types.scala.html#44259" title="(parents: List[DeVirtualize.this.global.Type],decls: DeVirtualize.this.global.Scope,typeSymbol: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.ClassInfoType">ClassInfoType</a>(<a href="#571864" title="List[DeVirtualize.this.global.Type]">parents2</a>, <a href="../symtab/Scopes.scala.html#25966" title="=&gt; DeVirtualize.this.global.Scope">newScope</a>, <a href="#571547" title="DeVirtualize.this.global.ClassSymbol">cclazz</a>)
        }
      }
    }

    <a href="#571547" title="DeVirtualize.this.global.ClassSymbol">cclazz</a>
  }

  /** Perform the following tree transformations:
   *  
   *  1. Add trees for abstract types (@see devirtualize),
   *     worker traits (@see devirtualize)
   *     and factories (@see mkFactory)
   *  
   *  2. Replace a new VC().init(...) where VC is a virtual class with new$VC(...)
   *  
   *  3. Replace references to VC.this and VC.super where VC is a virtual class
   *     with VC$trait.this and VC$trait.super
   *
   *  4. Transform type references to virtual classes to type references of corresponding
   *     abstract types.
   */
  <span class="keyword">class</span> <a title="class DeVirtualizeTransformer extends DeVirtualize.this.TypingTransformer with ScalaObject" id="569673">DeVirtualizeTransformer</a><span title="ScalaObject">(</span><a title="DeVirtualize.this.global.CompilationUnit" id="569720">unit</a>: <a href="../CompilationUnits.scala.html#39196" title="DeVirtualize.this.global.CompilationUnit">CompilationUnit</a>) <span class="keyword">extends</span> <a href="../transform/TypingTransformers.scala.html#79307" title="DeVirtualize.this.TypingTransformer">TypingTransformer</a>(<a href="#569720" title="DeVirtualize.this.global.CompilationUnit">unit</a>) { 
    // all code is executed at phase ownPhase.next
    
    /** Add trees for abstract types, worker traits, and factories (@see mkFactory)
     *  to template body `stats'
     */  
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(stats: List[DeVirtualize.this.global.Tree],exprOwner: DeVirtualize.this.global.Symbol)List[DeVirtualize.this.global.Tree]" id="569713">transformStats</a>(<a title="List[DeVirtualize.this.global.Tree]" id="572035">stats</a>: <span title="List[DeVirtualize.this.global.Tree]">List</span>[Tree], <a title="DeVirtualize.this.global.Symbol" id="572036">exprOwner</a>: <a href="../symtab/Symbols.scala.html#26127" title="DeVirtualize.this.global.Symbol">Symbol</a>): <span title="List[DeVirtualize.this.global.Tree]">List</span>[Tree] = {
      <span class="keyword">val</span> <a title="List[DeVirtualize.this.global.Tree]" id="572040">stats1</a> = <a href="#572035" title="(f: (DeVirtualize.this.global.Tree) =&gt; Traversable[DeVirtualize.this.global.Tree])(implicit bf: scala.collection.generic.BuilderFactory[DeVirtualize.this.global.Tree,List[DeVirtualize.this.global.Tree],List[DeVirtualize.this.global.Tree]])List[DeVirtualize.this.global.Tree]">stats</a> <span title="scala.collection.generic.BuilderFactory[DeVirtualize.this.global.Tree,List[DeVirtualize.this.global.Tree],List#Coll]">flatMap</span> <a href="#569717" title="(tree: DeVirtualize.this.global.Tree)List[DeVirtualize.this.global.Tree]">transformStat</a>
      <span class="keyword">val</span> <a title="List[DeVirtualize.this.global.Symbol]" id="572041">fclasses</a> = <a href="../symtab/SymbolTable.scala.html#26097" title="(ph: scala.tools.nsc.Phase)(op: =&gt; List[DeVirtualize.this.global.Symbol])List[DeVirtualize.this.global.Symbol]">atPhase</a>(<a href="../SubComponent.scala.html#39639" title="=&gt; scala.tools.nsc.Phase">ownPhase</a>) {
        <span title="List[DeVirtualize.this.global.Symbol]" class="keyword">if</span> (<a href="../ast/Trees.scala.html#45467" title="=&gt; (x$1: DeVirtualizeTransformer.this.type)DeVirtualize.this.global.Symbol" id="784356">currentOwner</a>.<a href="../symtab/Symbols.scala.html#26897" title="(x$1: Boolean)Boolean">isClass</a> &amp;&amp; <a href="#569651" title="(clazz: DeVirtualize.this.global.Symbol)Boolean">containsVirtuals</a>(<a href="#784356" title="=&gt; (x$1: DeVirtualizeTransformer.this.type)DeVirtualize.this.global.Symbol">currentOwner</a>)) <a href="#569652" title="(clazz: DeVirtualize.this.global.Symbol)List[DeVirtualize.this.global.Symbol]">classesInNeedOfFactories</a>(<a href="#784356" title="=&gt; (x$1: DeVirtualizeTransformer.this.type)DeVirtualize.this.global.Symbol">currentOwner</a>)  
        <span class="keyword">else</span> List<span title="object Nil">(</span>)
      }
      <span class="keyword">val</span> <a title="List[DeVirtualize.this.global.Tree]" id="572042">newDefs</a> = <a href="#572041" title="(f: (DeVirtualize.this.global.Symbol) =&gt; DeVirtualize.this.global.Tree)(implicit bf: scala.collection.generic.BuilderFactory[DeVirtualize.this.global.Tree,List[DeVirtualize.this.global.Tree],List[DeVirtualize.this.global.Symbol]])List[DeVirtualize.this.global.Tree]">fclasses</a> <span title="scala.collection.generic.BuilderFactory[DeVirtualize.this.global.Tree,List[DeVirtualize.this.global.Tree],List#Coll]">map</span> <a href="#569715" title="(clazz: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Tree">factoryDef</a>
      <span title="List[DeVirtualize.this.global.Tree]" class="keyword">if</span> (<a href="#572042" title="List[DeVirtualize.this.global.Tree]">newDefs</a>.<span title="=&gt; Boolean">isEmpty</span>) <a href="#572040" title="List[DeVirtualize.this.global.Tree]">stats1</a> <span class="keyword">else</span> <a href="#572040" title="List[DeVirtualize.this.global.Tree]">stats1</a> <a href="#572248" title="List[DeVirtualize.this.global.Tree]">:::</a> <a href="#572042" title="(prefix: List[DeVirtualize.this.global.Tree])List[DeVirtualize.this.global.Tree]">newDefs</a>
    }

    <span class="keyword">def</span> <a title="(clazz: DeVirtualize.this.global.Symbol,factory: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Tree" id="569714">fixClassDef</a>(<a title="DeVirtualize.this.global.Symbol" id="572256">clazz</a>: <a href="../symtab/Symbols.scala.html#26127" title="DeVirtualize.this.global.Symbol">Symbol</a>, <a title="DeVirtualize.this.global.Symbol" id="572257">factory</a>: <a href="../symtab/Symbols.scala.html#26127" title="DeVirtualize.this.global.Symbol">Symbol</a>): <a href="../ast/Trees.scala.html#26593" title="DeVirtualize.this.global.Tree">Tree</a> = {
      <span class="keyword">val</span> <a title="DeVirtualize.this.global.ClassSymbol" id="572259">cclazz</a> = <a href="#569672" title="(clazz: DeVirtualize.this.global.Symbol,factory: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.ClassSymbol">mkConcreteClass</a>(<a href="#572256" title="DeVirtualize.this.global.Symbol">clazz</a>, <a href="#572257" title="DeVirtualize.this.global.Symbol">factory</a>) 
      <span class="keyword">val</span> <a title="List[DeVirtualize.this.global.DefDef]" id="572260">overrideBridges</a> = 
        <span class="keyword">for</span> (<a title="DeVirtualize.this.global.Symbol" id="572281">m</a> &lt;- <a href="#572256" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27004" title="=&gt; DeVirtualize.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#30210" title="=&gt; DeVirtualize.this.global.Scope">decls</a>.<a href="../symtab/Scopes.scala.html#27144" title="(f: (DeVirtualize.this.global.Symbol) =&gt; DeVirtualize.this.global.DefDef)(implicit bf: scala.collection.generic.BuilderFactory[DeVirtualize.this.global.DefDef,List[DeVirtualize.this.global.DefDef],List[DeVirtualize.this.global.Symbol]])List[DeVirtualize.this.global.DefDef]">toList</a> <span class="keyword">if</span> <a href="../symtab/Symbols.scala.html#26996" title="(mask: Long)Boolean">m</a> hasFlag <a href="../symtab/Flags.scala.html#28757" title="=&gt; Long">notOVERRIDE</a>) 
        <span class="keyword">yield</span> <a href="#569716" title="(meth: DeVirtualize.this.global.Symbol,cclazz: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.DefDef">overrideBridge</a>(<a href="#572281" title="DeVirtualize.this.global.Symbol">m</a>, <a href="#572259" title="DeVirtualize.this.global.ClassSymbol">cclazz</a>)
      
      <span class="keyword">val</span> <a title="List[List[DeVirtualize.this.global.ValDef]]" id="572261">vparamss</a>: <span title="List[List[DeVirtualize.this.global.ValDef]]">List</span>[List[ValDef]] = <a href="../symtab/SymbolTable.scala.html#26097" title="(ph: scala.tools.nsc.Phase)(op: =&gt; List[List[DeVirtualize.this.global.ValDef]])List[List[DeVirtualize.this.global.ValDef]]">atPhase</a>(<a href="../SubComponent.scala.html#39639" title="=&gt; scala.tools.nsc.Phase">ownPhase</a>) {
        <a href="#569669" title="(tpe: DeVirtualize.this.global.Type,start: Int)List[List[(DeVirtualize.this.global.Type, Int)]]">paramTypesAndIndices</a><span title="(f: (List[(DeVirtualize.this.global.Type, Int)]) =&gt; List[DeVirtualize.this.global.ValDef])(implicit bf: scala.collection.generic.BuilderFactory[List[DeVirtualize.this.global.ValDef],List[List[DeVirtualize.this.global.ValDef]],List[List[(DeVirtualize.this.global.Type, Int)]]])List[List[DeVirtualize.this.global.ValDef]]">(</span><a href="#572256" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27033" title="=&gt; DeVirtualize.this.global.Symbol">primaryConstructor</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; DeVirtualize.this.global.Type">tpe</a>, <span title="Int(0)" class="int">0</span>) <span title="scala.collection.generic.BuilderFactory[List[DeVirtualize.this.global.ValDef],List[List[DeVirtualize.this.global.ValDef]],List#Coll]">map</span> {
          <a href="#572531" title="(f: ((DeVirtualize.this.global.Type, Int)) =&gt; DeVirtualize.this.global.ValDef)(implicit bf: scala.collection.generic.BuilderFactory[DeVirtualize.this.global.ValDef,List[DeVirtualize.this.global.ValDef],List[(DeVirtualize.this.global.Type, Int)]])List[DeVirtualize.this.global.ValDef]">_</a> <span title="scala.collection.generic.BuilderFactory[DeVirtualize.this.global.ValDef,List[DeVirtualize.this.global.ValDef],List#Coll]">map</span> <a href="#572540" title="DeVirtualize.this.global.ValDef">{</a>
          <span title="DeVirtualize.this.global.ValDef" class="keyword">case</span> (<a title="DeVirtualize.this.global.Type" id="572543">pt</a>, <a title="Int" id="572544">i</a>) =&gt;
            <a href="../ast/Trees.scala.html#26784" title="(pos: scala.tools.nsc.util.Position)(tree: DeVirtualize.this.global.ValDef)DeVirtualize.this.global.ValDef">atPos</a>(<a href="#572257" title="DeVirtualize.this.global.Symbol">factory</a>.<a href="../symtab/Symbols.scala.html#26847" title="=&gt; scala.tools.nsc.util.Position">pos</a>) {
              <a href="../ast/Trees.scala.html#73233" title="(mods: DeVirtualize.this.global.Modifiers,name: DeVirtualize.this.global.Name,tpt: DeVirtualize.this.global.Tree,rhs: DeVirtualize.this.global.Tree)DeVirtualize.this.global.ValDef">ValDef</a>(<a href="../ast/Trees.scala.html#26590" title="(flags: Long)DeVirtualize.this.global.Modifiers">Modifiers</a>(PARAMACCESSOR | PRIVATE <span title="Long(537395204L)">|</span> LOCAL), <a href="#569656" title="(index: Int)DeVirtualize.this.global.Name">fixParamName</a>(<a href="#572544" title="Int">i</a>), 
                     <a href="../ast/Trees.scala.html#26744" title="(tp: DeVirtualize.this.global.Type)DeVirtualize.this.global.TypeTree">TypeTree</a>(<a href="#569805" title="(tp: DeVirtualize.this.global.Type)DeVirtualize.this.global.Type">devirtualizeMap</a>(<a href="#572543" title="DeVirtualize.this.global.Type">pt</a>)), <a href="../ast/Trees.scala.html#26602" title="object DeVirtualize.this.global.EmptyTree">EmptyTree</a>)
            }
          }
        }
      }
      <span class="keyword">val</span> <a title="List[DeVirtualize.this.global.DefDef]" id="572262">pfields</a>: <span title="List[DeVirtualize.this.global.DefDef]">List</span>[DefDef] = <a href="../symtab/SymbolTable.scala.html#26097" title="(ph: scala.tools.nsc.Phase)(op: =&gt; List[DeVirtualize.this.global.DefDef])List[DeVirtualize.this.global.DefDef]">atPhase</a>(<a href="../SubComponent.scala.html#39639" title="=&gt; scala.tools.nsc.Phase">ownPhase</a>) {
        <a href="#569669" title="(tpe: DeVirtualize.this.global.Type,start: Int)List[List[(DeVirtualize.this.global.Type, Int)]]">paramTypesAndIndices</a><span title="(f: (List[(DeVirtualize.this.global.Type, Int)]) =&gt; Traversable[DeVirtualize.this.global.DefDef])(implicit bf: scala.collection.generic.BuilderFactory[DeVirtualize.this.global.DefDef,List[DeVirtualize.this.global.DefDef],List[List[(DeVirtualize.this.global.Type, Int)]]])List[DeVirtualize.this.global.DefDef]">(</span><a href="#572256" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27033" title="=&gt; DeVirtualize.this.global.Symbol">primaryConstructor</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; DeVirtualize.this.global.Type">tpe</a>, <span title="Int(0)" class="int">0</span>) <span title="scala.collection.generic.BuilderFactory[DeVirtualize.this.global.DefDef,List[DeVirtualize.this.global.DefDef],List#Coll]">flatMap</span> {
          <a href="#572816" title="(f: ((DeVirtualize.this.global.Type, Int)) =&gt; DeVirtualize.this.global.DefDef)(implicit bf: scala.collection.generic.BuilderFactory[DeVirtualize.this.global.DefDef,List[DeVirtualize.this.global.DefDef],List[(DeVirtualize.this.global.Type, Int)]])List[DeVirtualize.this.global.DefDef]">_</a> <span title="scala.collection.generic.BuilderFactory[DeVirtualize.this.global.DefDef,List[DeVirtualize.this.global.DefDef],List#Coll]">map</span> <a href="#572825" title="DeVirtualize.this.global.DefDef">{</a>
          <span title="DeVirtualize.this.global.DefDef" class="keyword">case</span> (<a title="DeVirtualize.this.global.Type" id="572828">pt</a>, <a title="Int" id="572829">i</a>) =&gt;
            <span class="keyword">val</span> <a title="DeVirtualize.this.global.TermSymbol" id="572832">pfield</a> = <a href="#572259" title="DeVirtualize.this.global.ClassSymbol">cclazz</a>.<a href="../symtab/Symbols.scala.html#26867" title="(pos: scala.tools.nsc.util.Position,name: DeVirtualize.this.global.Name)DeVirtualize.this.global.TermSymbol">newMethod</a>(<a href="#572259" title="DeVirtualize.this.global.ClassSymbol">cclazz</a>.<a href="../symtab/Symbols.scala.html#26847" title="=&gt; scala.tools.nsc.util.Position">pos</a>, <a href="#569655" title="(clazz: DeVirtualize.this.global.Symbol,index: Int)DeVirtualize.this.global.Name">paramFieldName</a>(<a href="#572256" title="DeVirtualize.this.global.Symbol">clazz</a>, <a href="#572829" title="Int">i</a>))
              .<a href="../symtab/Symbols.scala.html#26993" title="(mask: Long)DeVirtualize.this.global.TermSymbol">setFlag</a>(PROTECTED | LOCAL | EXPANDEDNAME | SYNTHETIC <span title="Long(68726292481L)">|</span> STABLE)
              .<a href="../symtab/Symbols.scala.html#27005" title="(info: DeVirtualize.this.global.Type)DeVirtualize.this.global.TermSymbol">setInfo</a>(<a href="../symtab/Types.scala.html#43825" title="(typeParams: List[DeVirtualize.this.global.Symbol],resultType: DeVirtualize.this.global.Type)DeVirtualize.this.global.PolyType">PolyType</a>(List<span title="object Nil">(</span>), <a href="#572828" title="DeVirtualize.this.global.Type">pt</a>))
            <a href="#572259" title="DeVirtualize.this.global.ClassSymbol">cclazz</a>.<a href="../symtab/Symbols.scala.html#27004" title="=&gt; DeVirtualize.this.global.Type">info</a>.<a href="../symtab/Scopes.scala.html#27131" title="(sym: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol">decls</a> enter <a href="#572832" title="DeVirtualize.this.global.TermSymbol">pfield</a>
            <a href="../ast/Trees.scala.html#26784" title="(pos: scala.tools.nsc.util.Position)(tree: DeVirtualize.this.global.DefDef)DeVirtualize.this.global.DefDef">atPos</a>(<a href="#572257" title="DeVirtualize.this.global.Symbol">factory</a>.<a href="../symtab/Symbols.scala.html#26847" title="=&gt; scala.tools.nsc.util.Position">pos</a>) {
              <a href="../ast/Trees.scala.html#26632" title="(sym: DeVirtualize.this.global.Symbol,rhs: DeVirtualize.this.global.Tree)DeVirtualize.this.global.DefDef">DefDef</a>(<a href="#572832" title="DeVirtualize.this.global.TermSymbol">pfield</a>, <a href="../ast/Trees.scala.html#51878" title="(name: DeVirtualize.this.global.Name)DeVirtualize.this.global.Ident">Ident</a>(<a href="#569656" title="(index: Int)DeVirtualize.this.global.Name">fixParamName</a>(<a href="#572829" title="Int">i</a>)))
            }
          }
        }
      }
      <a href="../ast/Trees.scala.html#26784" title="(pos: scala.tools.nsc.util.Position)(tree: DeVirtualize.this.global.ClassDef)DeVirtualize.this.global.ClassDef">atPos</a>(<a href="#572256" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#26847" title="=&gt; scala.tools.nsc.util.Position">pos</a>) {
        <a href="../ast/Trees.scala.html#26613" title="(sym: DeVirtualize.this.global.Symbol,constrMods: DeVirtualize.this.global.Modifiers,vparamss: List[List[DeVirtualize.this.global.ValDef]],argss: List[List[DeVirtualize.this.global.Tree]],body: List[DeVirtualize.this.global.Tree],superPos: scala.tools.nsc.util.Position)DeVirtualize.this.global.ClassDef">ClassDef</a>(<a href="#572259" title="DeVirtualize.this.global.ClassSymbol">cclazz</a>, <a href="../ast/Trees.scala.html#26590" title="(flags: Long)DeVirtualize.this.global.Modifiers">Modifiers</a>(<span title="Long(0L)" class="int">0</span>), <a href="#572261" title="List[List[DeVirtualize.this.global.ValDef]]">vparamss</a>, <span title="(xs: List[Nothing]*)List[List[Nothing]]">List</span>(List<span title="object Nil">(</span>)), <a href="#572262" title="List[DeVirtualize.this.global.DefDef]">pfields</a> <a href="#573188" title="List[DeVirtualize.this.global.DefDef]">:::</a> <a href="#572260" title="(prefix: List[DeVirtualize.this.global.DefDef])List[DeVirtualize.this.global.DefDef]">overrideBridges</a>, <a href="#572256" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#26847" title="=&gt; scala.tools.nsc.util.Position">pos</a>.<a href="../util/Position.scala.html#30296" title="=&gt; scala.tools.nsc.util.Position">focus</a>)
      }
    }
      

    /** The factory definition for virtual class `clazz' (@see mkFactory)
     *  For a virtual class  
     *
     *  attrs mods class VC[Ts] &lt;: Ps { decls }
     *  with overridden classes _VC[Us]'s
     *
     * we need the following factory:
     *
     *  attrs mods3 def new$VC[Ts](): VC[Ts] = {
     *    class VC$fix extends _VC$trait's[Ts] with VC$trait[Ts] {
     *      override-bridges
     *    }
     *    new VC$fix.asInstanceOf[VC[Ts]]
     *  }
     *
     * where
     *  
     *  mods3  are the modifiers inherited to factories
     *  override-bridges are definitions that link every symbol in a worker trait
     *                   that was overriding something to the overridden symbol
     *                   //todo: not sure what happens with abstract override?
     */
    <span class="keyword">def</span> <a title="(clazz: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Tree" id="569715">factoryDef</a>(<a title="DeVirtualize.this.global.Symbol" id="572165">clazz</a>: <a href="../symtab/Symbols.scala.html#26127" title="DeVirtualize.this.global.Symbol">Symbol</a>): <a href="../ast/Trees.scala.html#26593" title="DeVirtualize.this.global.Tree">Tree</a> = {
      <span class="keyword">val</span> <a title="DeVirtualize.this.global.Symbol" id="573202">factorySym</a> = <a href="#569654" title="(clazz: DeVirtualize.this.global.Symbol,owner: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol">factory</a>(<a href="#572165" title="DeVirtualize.this.global.Symbol">clazz</a>, <a href="../ast/Trees.scala.html#45467" title="=&gt; DeVirtualize.this.global.Symbol">currentOwner</a>)
      <span class="keyword">val</span> <a title="DeVirtualize.this.global.Tree" id="573203">cclazzDef</a> = <a href="#569714" title="(clazz: DeVirtualize.this.global.Symbol,factory: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Tree">fixClassDef</a>(<a href="#572165" title="DeVirtualize.this.global.Symbol">clazz</a>, <a href="#573202" title="DeVirtualize.this.global.Symbol">factorySym</a>)
      <span title="(x: Any)Unit">println</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Concrete: &quot;</span>+<a href="#573203" title="DeVirtualize.this.global.Tree">cclazzDef</a>)
      <span class="keyword">val</span> <a title="DeVirtualize.this.global.Symbol" id="573204">abstpeSym</a> = <a href="#569653" title="(clazz: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol">abstractType</a>(<a href="#572165" title="DeVirtualize.this.global.Symbol">clazz</a>)
      <a href="../transform/TypingTransformers.scala.html#98842" title="=&gt; DeVirtualize.this.global.analyzer.Typer">localTyper</a>.<a href="Typers.scala.html#42640" title="(tree: DeVirtualize.this.global.analyzer.global.Tree)DeVirtualize.this.global.analyzer.global.Tree">typed</a> {
        <a href="../ast/Trees.scala.html#26784" title="(pos: scala.tools.nsc.util.Position)(tree: DeVirtualize.this.global.DefDef)DeVirtualize.this.global.DefDef">atPos</a>(<a href="#573202" title="DeVirtualize.this.global.Symbol">factorySym</a>.<a href="../symtab/Symbols.scala.html#26847" title="=&gt; scala.tools.nsc.util.Position">pos</a>) {
          <a href="../ast/Trees.scala.html#26632" title="(sym: DeVirtualize.this.global.Symbol,rhs: DeVirtualize.this.global.Tree)DeVirtualize.this.global.DefDef">DefDef</a>(<a href="#573202" title="DeVirtualize.this.global.Symbol">factorySym</a>,
            <a href="../ast/Trees.scala.html#49026" title="(stats: List[DeVirtualize.this.global.Tree],expr: DeVirtualize.this.global.Tree)DeVirtualize.this.global.Block">Block</a>(
              <span title="(xs: DeVirtualize.this.global.Tree*)List[DeVirtualize.this.global.Tree]">List</span>(<a href="#573203" title="DeVirtualize.this.global.Tree">cclazzDef</a>), 
              <a href="../ast/Trees.scala.html#50717" title="(fun: DeVirtualize.this.global.Tree,args: List[DeVirtualize.this.global.Tree])DeVirtualize.this.global.TypeApply">TypeApply</a>(
                <a href="../ast/Trees.scala.html#26731" title="(qualifier: DeVirtualize.this.global.Tree,sym: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Select">Select</a>(
                  <a href="../Global.scala.html#39031" title="object DeVirtualize.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#42705" title="(target: DeVirtualize.this.global.gen.global.Tree,vparamss: List[List[DeVirtualize.this.global.gen.global.Symbol]])DeVirtualize.this.global.gen.global.Tree">mkForwarder</a>(
                    <a href="../ast/Trees.scala.html#50275" title="(qualifier: DeVirtualize.this.global.Tree,name: DeVirtualize.this.global.Name)DeVirtualize.this.global.Select">Select</a>(<a href="../ast/Trees.scala.html#50316" title="(tpt: DeVirtualize.this.global.Tree)DeVirtualize.this.global.New">New</a>(<a href="../ast/Trees.scala.html#26744" title="(tp: DeVirtualize.this.global.Type)DeVirtualize.this.global.TypeTree">TypeTree</a>(<a href="#573203" title="DeVirtualize.this.global.Tree">cclazzDef</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; DeVirtualize.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; DeVirtualize.this.global.Type">tpe</a>)), <a href="../symtab/StdNames.scala.html#26531" title="object DeVirtualize.this.global.nme">nme</a>.<a href="../symtab/StdNames.scala.html#29719" title="=&gt; DeVirtualize.this.global.Name">CONSTRUCTOR</a>),
                    <a href="#573202" title="DeVirtualize.this.global.Symbol">factorySym</a>.<a href="../symtab/Symbols.scala.html#27017" title="=&gt; List[List[DeVirtualize.this.global.Symbol]]">paramss</a>),
                  <a href="../symtab/Definitions.scala.html#28504" title="=&gt; DeVirtualize.this.global.Symbol">Any_asInstanceOf</a>),
             <span title="(xs: DeVirtualize.this.global.TypeTree*)List[DeVirtualize.this.global.TypeTree]">List</span>(
               <a href="../ast/Trees.scala.html#26744" title="(tp: DeVirtualize.this.global.Type)DeVirtualize.this.global.TypeTree">TypeTree</a>(
                 <a href="../ast/Trees.scala.html#45467" title="=&gt; DeVirtualize.this.global.Symbol">currentOwner</a>.<a href="../symtab/Symbols.scala.html#27037" title="=&gt; DeVirtualize.this.global.Type">thisType</a>.<a href="../symtab/Types.scala.html#30223" title="(sym: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Type">memberType</a>(<a href="#573204" title="DeVirtualize.this.global.Symbol">abstpeSym</a>)
                 .<a href="../symtab/Types.scala.html#30225" title="(from: List[DeVirtualize.this.global.Symbol],to: List[DeVirtualize.this.global.Symbol])DeVirtualize.this.global.Type">substSym</a>(<a href="#573204" title="DeVirtualize.this.global.Symbol">abstpeSym</a>.<a href="../symtab/Symbols.scala.html#27016" title="=&gt; List[DeVirtualize.this.global.Symbol]">typeParams</a>, <a href="#573202" title="DeVirtualize.this.global.Symbol">factorySym</a>.<a href="../symtab/Symbols.scala.html#27016" title="=&gt; List[DeVirtualize.this.global.Symbol]">typeParams</a>))))))
        }
      }
    }

    /** Create an override bridge for method `meth' in concrete class `cclazz'.
     *  An override bridge has the form
     *
     *   override f(xs1)...(xsN) = super.f(xs)...(xsN)
     */
    <span class="keyword">def</span> <a title="(meth: DeVirtualize.this.global.Symbol,cclazz: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.DefDef" id="569716">overrideBridge</a>(<a title="DeVirtualize.this.global.Symbol" id="572282">meth</a>: <a href="../symtab/Symbols.scala.html#26127" title="DeVirtualize.this.global.Symbol">Symbol</a>, <a title="DeVirtualize.this.global.Symbol" id="572283">cclazz</a>: <a href="../symtab/Symbols.scala.html#26127" title="DeVirtualize.this.global.Symbol">Symbol</a>) = <a href="../ast/Trees.scala.html#26784" title="(pos: scala.tools.nsc.util.Position)(tree: DeVirtualize.this.global.DefDef)DeVirtualize.this.global.DefDef">atPos</a>(<a href="#572282" title="DeVirtualize.this.global.Symbol">meth</a>.<a href="../symtab/Symbols.scala.html#26847" title="=&gt; scala.tools.nsc.util.Position">pos</a>) {
      <span class="keyword">val</span> <a title="DeVirtualize.this.global.Symbol" id="572294">bridge</a> = <a href="#572282" title="DeVirtualize.this.global.Symbol">meth</a>.<a href="../symtab/Symbols.scala.html#27029" title="(owner: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol">cloneSymbol</a>(<a href="#572283" title="DeVirtualize.this.global.Symbol">cclazz</a>)
        .<a href="../symtab/Symbols.scala.html#26994" title="(mask: Long)DeVirtualize.this.global.Symbol">resetFlag</a>(<a href="../symtab/Flags.scala.html#28757" title="(x$1: Long)Long">notOVERRIDE</a> | <a href="../symtab/Flags.scala.html#28747" title="=&gt; Long">notFINAL</a>)
      <a href="#572283" title="DeVirtualize.this.global.Symbol">cclazz</a>.<a href="../symtab/Symbols.scala.html#27004" title="=&gt; DeVirtualize.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#30210" title="=&gt; DeVirtualize.this.global.Scope">decls</a>.<a href="../symtab/Scopes.scala.html#27131" title="(sym: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol">enter</a>(<a href="#572294" title="DeVirtualize.this.global.Symbol">bridge</a>)
      <span class="keyword">val</span> <a title="DeVirtualize.this.global.Tree" id="572295">superRef</a>: <a href="../ast/Trees.scala.html#26593" title="DeVirtualize.this.global.Tree">Tree</a> = <a href="../ast/Trees.scala.html#26731" title="(qualifier: DeVirtualize.this.global.Tree,sym: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Select">Select</a>(<a href="../ast/Trees.scala.html#26723" title="(sym: DeVirtualize.this.global.Symbol,mix: DeVirtualize.this.global.Name)DeVirtualize.this.global.Tree">Super</a>(<a href="#572283" title="DeVirtualize.this.global.Symbol">cclazz</a>, <a href="../symtab/StdNames.scala.html#26531" title="object DeVirtualize.this.global.nme">nme</a>.<a href="../symtab/StdNames.scala.html#29685" title="=&gt; DeVirtualize.this.global.Name">EMPTY</a>.<a href="../symtab/Names.scala.html#28202" title="=&gt; DeVirtualize.this.global.Name">toTypeName</a>), <a href="#572282" title="DeVirtualize.this.global.Symbol">meth</a>)
      <a href="../ast/Trees.scala.html#26632" title="(sym: DeVirtualize.this.global.Symbol,rhs: DeVirtualize.this.global.Tree)DeVirtualize.this.global.DefDef">DefDef</a>(<a href="#572294" title="DeVirtualize.this.global.Symbol">bridge</a>, <a href="../Global.scala.html#39031" title="object DeVirtualize.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#42705" title="(target: DeVirtualize.this.global.gen.global.Tree,vparamss: List[List[DeVirtualize.this.global.gen.global.Symbol]])DeVirtualize.this.global.gen.global.Tree">mkForwarder</a>(<a href="#572295" title="DeVirtualize.this.global.Tree">superRef</a>, <a href="#572294" title="DeVirtualize.this.global.Symbol">bridge</a>.<a href="../symtab/Symbols.scala.html#27017" title="=&gt; List[List[DeVirtualize.this.global.Symbol]]">paramss</a>))
    }

    /** Replace definitions of virtual classes by definitions of corresponding
     *  abstract type and worker traits.
     *  Eliminate constructors of former virtual classes because these are now traits.
     */
    <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(tree: DeVirtualize.this.global.Tree)List[DeVirtualize.this.global.Tree]" id="569717">transformStat</a>(<a title="DeVirtualize.this.global.Tree" id="572050">tree</a>: <a href="../ast/Trees.scala.html#26593" title="DeVirtualize.this.global.Tree">Tree</a>): <span title="List[DeVirtualize.this.global.Tree]">List</span>[Tree] = {
      <span class="keyword">val</span> <a title="DeVirtualize.this.global.Symbol" id="573452">sym</a> = <a href="#572050" title="DeVirtualize.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; DeVirtualize.this.global.Symbol">symbol</a>
      <a href="#572050" title="DeVirtualize.this.global.Tree">tree</a> <span title="List[DeVirtualize.this.global.Tree]" class="keyword">match</span> {
        <span title="List[DeVirtualize.this.global.Tree]" class="keyword">case</span> ClassDef(<a title="DeVirtualize.this.global.Modifiers" id="573459">mods</a>, <a title="DeVirtualize.this.global.Name" id="573460">name</a>, <a title="List[DeVirtualize.this.global.TypeDef]" id="573461">tparams</a>, <a title="DeVirtualize.this.global.Template" id="573462">templ</a>) 
        <span class="keyword">if</span> (<a href="#569664" title="(sym: DeVirtualize.this.global.Symbol)Boolean">wasVirtualClass</a>(<a href="#573452" title="DeVirtualize.this.global.Symbol">sym</a>)) =&gt;
          <span class="keyword">val</span> <a title="DeVirtualize.this.global.Symbol" id="573467">clazz</a> = <a href="#573452" title="DeVirtualize.this.global.Symbol">sym</a>
          <span class="keyword">val</span> <a title="DeVirtualize.this.global.Symbol" id="573468">absTypeSym</a> = <a href="#569653" title="(clazz: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol">abstractType</a>(<a href="#573467" title="DeVirtualize.this.global.Symbol">clazz</a>)
          <span class="keyword">val</span> <a title="DeVirtualize.this.global.TypeDef" id="573469">abstypeDef</a> = <a href="../ast/Trees.scala.html#26638" title="(sym: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.TypeDef">TypeDef</a>(<a href="#573468" title="DeVirtualize.this.global.Symbol">absTypeSym</a>)
          <span title="(xs: DeVirtualize.this.global.Tree*)List[DeVirtualize.this.global.Tree]">List</span>(<a href="../transform/TypingTransformers.scala.html#98842" title="=&gt; DeVirtualize.this.global.analyzer.Typer">localTyper</a>.<a href="Typers.scala.html#42640" title="(tree: DeVirtualize.this.global.analyzer.global.Tree)DeVirtualize.this.global.analyzer.global.Tree">typed</a>(<a href="#573469" title="DeVirtualize.this.global.TypeDef">abstypeDef</a>), <a href="#569718" title="(tree0: DeVirtualize.this.global.Tree)DeVirtualize.this.global.Tree">transform</a>(<a href="#572050" title="DeVirtualize.this.global.Tree">tree</a>))
        <span title="List[Nothing]" class="keyword">case</span> DefDef(_, <a href="../symtab/StdNames.scala.html#26531" title="object DeVirtualize.this.global.nme">nme</a>.<a href="../symtab/StdNames.scala.html#29719" title="=&gt; DeVirtualize.this.global.Name">CONSTRUCTOR</a>, _, _, _, _) 
        <span class="keyword">if</span> (<a href="#569664" title="(sym: DeVirtualize.this.global.Symbol)Boolean">wasVirtualClass</a>(<a href="#573452" title="DeVirtualize.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26983" title="=&gt; DeVirtualize.this.global.Symbol">owner</a>)) =&gt;
          <span title="Unit" class="keyword">if</span> (<a href="../symtab/SymbolTable.scala.html#26097" title="(ph: scala.tools.nsc.Phase)(op: =&gt; Boolean)Boolean">atPhase</a>(<a href="../SubComponent.scala.html#39639" title="=&gt; scala.tools.nsc.Phase">ownPhase</a>)(<a href="#573452" title="(x$1: AnyRef)Boolean">sym</a> != <a href="#573452" title="DeVirtualize.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26983" title="=&gt; DeVirtualize.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27033" title="=&gt; DeVirtualize.this.global.Symbol">primaryConstructor</a>))
            <a href="#569720" title="DeVirtualize.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#45455" title="(pos: scala.tools.nsc.util.Position,msg: String)Unit">error</a>(<a href="#572050" title="DeVirtualize.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29361" title="=&gt; scala.tools.nsc.util.Position">pos</a>, <span title="java.lang.String(&quot;virtual classes cannot have auxiliary constructors&quot;)" class="string">&quot;virtual classes cannot have auxiliary constructors&quot;</span>)
          List<span title="object Nil">(</span>)
        <span title="List[DeVirtualize.this.global.Tree]" class="keyword">case</span> _ =&gt;
          <span title="(xs: DeVirtualize.this.global.Tree*)List[DeVirtualize.this.global.Tree]">List</span>(<a href="#569718" title="(tree0: DeVirtualize.this.global.Tree)DeVirtualize.this.global.Tree">transform</a>(<a href="#572050" title="DeVirtualize.this.global.Tree">tree</a>))
      }
    }

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree0: DeVirtualize.this.global.Tree)DeVirtualize.this.global.Tree" id="569718">transform</a>(<a title="DeVirtualize.this.global.Tree" id="573509">tree0</a>: <a href="../ast/Trees.scala.html#26593" title="DeVirtualize.this.global.Tree">Tree</a>): <a href="../ast/Trees.scala.html#26593" title="DeVirtualize.this.global.Tree">Tree</a> = {
      <span class="keyword">val</span> <a title="DeVirtualize.this.global.Tree" id="573573">tree</a> = <span class="keyword">super</span>.<a href="../transform/TypingTransformers.scala.html#98858" title="(tree: DeVirtualize.this.global.Tree)DeVirtualize.this.global.Tree">transform</a>(<a href="#573509" title="DeVirtualize.this.global.Tree">tree0</a>)
      <span class="keyword">val</span> <a title="DeVirtualize.this.global.Symbol" id="573574">sym</a> = <a href="#573573" title="DeVirtualize.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29367" title="=&gt; DeVirtualize.this.global.Symbol">symbol</a>
      <a href="#573573" title="DeVirtualize.this.global.Tree">tree</a> <span title="DeVirtualize.this.global.Tree" class="keyword">match</span> {
        // Replace a new VC().init() where VC is a virtual class with new$VC
        <span title="DeVirtualize.this.global.analyzer.global.Tree" class="keyword">case</span> Apply(Select(New(<a title="DeVirtualize.this.global.Tree" id="573590">tpt</a>), <a title="DeVirtualize.this.global.Name" id="573593">name</a>), <a title="List[DeVirtualize.this.global.Tree]" id="573596">args</a>) <span class="keyword">if</span> (<a href="#573574" title="DeVirtualize.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26916" title="(x$1: Boolean)Boolean">isConstructor</a> &amp;&amp; <a href="#569664" title="(sym: DeVirtualize.this.global.Symbol)Boolean">wasVirtualClass</a>(<a href="#573574" title="DeVirtualize.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26983" title="=&gt; DeVirtualize.this.global.Symbol">owner</a>)) =&gt;
          <span class="keyword">val</span> <a title="DeVirtualize.this.global.Symbol" id="573603">clazz</a> = <a href="#573574" title="DeVirtualize.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26983" title="=&gt; DeVirtualize.this.global.Symbol">owner</a>
          <span class="keyword">val</span> <a title="DeVirtualize.this.global.Select" id="573604">fn</a> = 
            <a href="../ast/Trees.scala.html#50275" title="(qualifier: DeVirtualize.this.global.Tree,name: DeVirtualize.this.global.Name)DeVirtualize.this.global.Select">Select</a>(
              <a href="../Global.scala.html#39031" title="object DeVirtualize.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#42673" title="(tpe: DeVirtualize.this.global.gen.global.Type)DeVirtualize.this.global.gen.global.Tree">mkAttributedQualifier</a>(<a href="#573590" title="DeVirtualize.this.global.Tree">tpt</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; DeVirtualize.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30190" title="=&gt; DeVirtualize.this.global.Type">prefix</a>),
              <a href="#569654" title="(clazz: DeVirtualize.this.global.Symbol,owner: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol">factory</a>(<a href="#573603" title="DeVirtualize.this.global.Symbol">clazz</a>, <a href="#573603" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#26983" title="=&gt; DeVirtualize.this.global.Symbol">owner</a>).<a href="../symtab/Symbols.scala.html#26988" title="=&gt; DeVirtualize.this.global.Name">name</a>)
          <span title="(x: Any)Unit">println</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;fac &quot;</span>+<a href="#569654" title="(clazz: DeVirtualize.this.global.Symbol,owner: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol">factory</a>(<a href="#573603" title="DeVirtualize.this.global.Symbol">clazz</a>, <a href="#573603" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#26983" title="=&gt; DeVirtualize.this.global.Symbol">owner</a>).<a href="../symtab/Symbols.scala.html#27003" title="=&gt; DeVirtualize.this.global.Type">tpe</a>)
          <span class="keyword">val</span> <a title="List[DeVirtualize.this.global.Type]" id="573605">targs</a> = <a href="#573590" title="DeVirtualize.this.global.Tree">tpt</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; DeVirtualize.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30192" title="=&gt; List[DeVirtualize.this.global.Type]">typeArgs</a>
          <a href="../ast/Trees.scala.html#26784" title="(pos: scala.tools.nsc.util.Position)(tree: DeVirtualize.this.global.analyzer.global.Tree)DeVirtualize.this.global.analyzer.global.Tree">atPos</a>(<a href="#573573" title="DeVirtualize.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29361" title="=&gt; scala.tools.nsc.util.Position">pos</a>) {
            <a href="../transform/TypingTransformers.scala.html#98842" title="=&gt; DeVirtualize.this.global.analyzer.Typer">localTyper</a>.<a href="Typers.scala.html#42640" title="(tree: DeVirtualize.this.global.analyzer.global.Tree)DeVirtualize.this.global.analyzer.global.Tree">typed</a> {
              <span class="keyword">val</span> <a title="DeVirtualize.this.global.Apply" id="573684">res</a> = 
                <a href="../ast/Trees.scala.html#49125" title="(fun: DeVirtualize.this.global.Tree,args: List[DeVirtualize.this.global.Tree])DeVirtualize.this.global.Apply">Apply</a>(<span title="DeVirtualize.this.global.Tree" class="keyword">if</span> (<a href="#573605" title="List[DeVirtualize.this.global.Type]">targs</a>.<span title="=&gt; Boolean">isEmpty</span>) <a href="#573604" title="DeVirtualize.this.global.Select">fn</a> <span class="keyword">else</span> <a href="../ast/Trees.scala.html#50717" title="(fun: DeVirtualize.this.global.Tree,args: List[DeVirtualize.this.global.Tree])DeVirtualize.this.global.TypeApply">TypeApply</a>(<a href="#573604" title="DeVirtualize.this.global.Select">fn</a>, <a href="#573605" title="(f: (DeVirtualize.this.global.Type) =&gt; DeVirtualize.this.global.TypeTree)(implicit bf: scala.collection.generic.BuilderFactory[DeVirtualize.this.global.TypeTree,List[DeVirtualize.this.global.Tree],List[DeVirtualize.this.global.Type]])List[DeVirtualize.this.global.Tree]">targs</a> <span title="scala.collection.generic.BuilderFactory[DeVirtualize.this.global.TypeTree,List[DeVirtualize.this.global.TypeTree],List#Coll]">map</span> <a href="../ast/Trees.scala.html#26744" title="(tp: DeVirtualize.this.global.Type)DeVirtualize.this.global.TypeTree">TypeTree</a>), <a href="#573596" title="List[DeVirtualize.this.global.Tree]">args</a>)
                <span title="(x: Any)Unit">println</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;typing &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#573684" title="DeVirtualize.this.global.Apply">res</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot; from &quot;)" class="string">&quot; from &quot;</span>+<a href="#573596" title="List[DeVirtualize.this.global.Tree]">args</a>)
                <a href="#573684" title="DeVirtualize.this.global.Apply">res</a>
              }
            }
        
        <span title="DeVirtualize.this.global.Template" class="keyword">case</span> Template(<a title="List[DeVirtualize.this.global.Tree]" id="573791">parents</a>, <a title="DeVirtualize.this.global.ValDef" id="573792">self</a>, <a title="List[DeVirtualize.this.global.Tree]" id="573793">body</a>) <span class="keyword">if</span> (<a href="#569664" title="(sym: DeVirtualize.this.global.Symbol)Boolean">wasVirtualClass</a>(<a href="#573574" title="DeVirtualize.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26983" title="=&gt; DeVirtualize.this.global.Symbol">owner</a>)) =&gt;
          // add param field accessors
          <span class="keyword">val</span> <a title="scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]" id="573798">paramFieldAccessors</a> = <span title="scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]" class="keyword">new</span> <span title="scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]">ListBuffer</span>[Tree]
          <span class="keyword">val</span> <a title="scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]" id="573799">paramFields</a> = <span title="scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]" class="keyword">new</span> <span title="scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]">ListBuffer</span>[Tree]
          <span class="keyword">val</span> <a title="scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]" id="573800">presupers</a> = <span title="scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]" class="keyword">new</span> <span title="scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]">ListBuffer</span>[Tree]
          <span class="keyword">val</span> <a title="scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]" id="573801">others</a> = <span title="scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]" class="keyword">new</span> <span title="scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]">ListBuffer</span>[Tree]
          <span class="keyword">var</span> <a title="Int" id="573802">paramFieldCount</a> = <span title="Int(0)" class="int">0</span>
          <span class="keyword">for</span> (<a title="DeVirtualize.this.global.Tree" id="573827">stat</a> &lt;- <a href="#573793" title="(f: (DeVirtualize.this.global.Tree) =&gt; scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree])Unit">body</a>) {
            <span title="scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]" class="keyword">if</span> (<a href="#573827" title="DeVirtualize.this.global.Tree">stat</a>.<a href="../ast/Trees.scala.html#29367" title="(x$1: AnyRef)Boolean">symbol</a> <span title="(x$1: Boolean)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span> &amp;&amp; (<a href="#573827" title="DeVirtualize.this.global.Tree">stat</a>.<a href="../symtab/Symbols.scala.html#26996" title="(mask: Long)Boolean">symbol</a> hasFlag <span title="Long(536870912L)">PARAMACCESSOR</span>))
              <a href="#573827" title="DeVirtualize.this.global.Tree">stat</a> <span title="scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]" class="keyword">match</span> {
                <span title="paramFieldAccessors.type" class="keyword">case</span> <a title="DeVirtualize.this.global.ValDef" id="573839">pacc</a> @ ValDef(<a title="DeVirtualize.this.global.Modifiers" id="573846">mods</a>, <a title="DeVirtualize.this.global.Name" id="573847">name</a>, <a title="DeVirtualize.this.global.Tree" id="573848">tpt</a>, <a title="DeVirtualize.this.global.Tree" id="573849">rhs</a>) =&gt;
                  <a href="#573839" title="DeVirtualize.this.global.ValDef">pacc</a>.<a href="../symtab/Symbols.scala.html#26994" title="(mask: Long)DeVirtualize.this.global.Symbol">symbol</a> <a href="../symtab/Symbols.scala.html#26993" title="(mask: Long)DeVirtualize.this.global.Symbol">resetFlag</a> <span title="Long(536870912L)">PARAMACCESSOR</span> setFlag <span title="Long(137438953472L)">PRESUPER</span>
                  <span class="keyword">val</span> <a title="DeVirtualize.this.global.Symbol" id="573852">pfield</a> = <a href="#569657" title="(clazz: DeVirtualize.this.global.Symbol,index: Int)DeVirtualize.this.global.Symbol">paramField</a>(<a href="#573574" title="DeVirtualize.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26983" title="=&gt; DeVirtualize.this.global.Symbol">owner</a>, <a href="#573802" title="Int">paramFieldCount</a>)
                  <a href="#573802" title="Int">paramFieldCount</a> += <span title="Int(1)" class="int">1</span>
                  <a href="../symtab/Symbols.scala.html#26848" title="(pos: scala.tools.nsc.util.Position)pfield.type">pfield</a> setPos <a href="#573839" title="DeVirtualize.this.global.ValDef">pacc</a>.<a href="../ast/Trees.scala.html#29361" title="=&gt; scala.tools.nsc.util.Position">pos</a>
                  <a href="#573799" title="(x: DeVirtualize.this.global.Tree)paramFields.type">paramFields</a> += <a href="../transform/TypingTransformers.scala.html#98842" title="=&gt; DeVirtualize.this.global.analyzer.Typer">localTyper</a>.<a href="Typers.scala.html#42640" title="(tree: DeVirtualize.this.global.analyzer.global.Tree)DeVirtualize.this.global.analyzer.global.Tree">typed</a>(<a href="../ast/Trees.scala.html#26632" title="(sym: DeVirtualize.this.global.Symbol,rhs: DeVirtualize.this.global.Tree)DeVirtualize.this.global.DefDef">DefDef</a>(<a href="#573852" title="DeVirtualize.this.global.Symbol">pfield</a>, <a href="../ast/Trees.scala.html#26602" title="object DeVirtualize.this.global.EmptyTree">EmptyTree</a>))
                  <span class="keyword">val</span> <a title="DeVirtualize.this.global.analyzer.global.Tree" id="573853">pfieldRef</a> = <a href="../transform/TypingTransformers.scala.html#98842" title="=&gt; DeVirtualize.this.global.analyzer.Typer">localTyper</a>.<a href="Typers.scala.html#42640" title="(tree: DeVirtualize.this.global.analyzer.global.Tree)DeVirtualize.this.global.analyzer.global.Tree">typed</a> { 
                    <a href="../ast/Trees.scala.html#26784" title="(pos: scala.tools.nsc.util.Position)(tree: DeVirtualize.this.global.Select)DeVirtualize.this.global.Select">atPos</a>(<a href="#573839" title="DeVirtualize.this.global.ValDef">pacc</a>.<a href="../ast/Trees.scala.html#29361" title="=&gt; scala.tools.nsc.util.Position">pos</a>) { 
                      <a href="../ast/Trees.scala.html#26731" title="(qualifier: DeVirtualize.this.global.Tree,sym: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Select">Select</a>(<a href="../ast/Trees.scala.html#26727" title="(sym: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Tree">This</a>(<a href="#573574" title="DeVirtualize.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26983" title="=&gt; DeVirtualize.this.global.Symbol">owner</a>), <a href="#573852" title="DeVirtualize.this.global.Symbol">pfield</a>) 
                    } 
                  }
                  <a href="#573798" title="(x: DeVirtualize.this.global.Tree)paramFieldAccessors.type">paramFieldAccessors</a> += <a href="../ast/Trees.scala.html#45465" title="=&gt; DeVirtualize.this.global.TreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#48544" title="(tree: DeVirtualize.this.global.Tree,mods: DeVirtualize.this.global.Modifiers,name: DeVirtualize.this.global.Name,tpt: DeVirtualize.this.global.Tree,rhs: DeVirtualize.this.global.Tree)DeVirtualize.this.global.ValDef">ValDef</a>(<a href="#573839" title="DeVirtualize.this.global.ValDef">pacc</a>, <a href="#573846" title="DeVirtualize.this.global.Modifiers">mods</a>, <a href="#573847" title="DeVirtualize.this.global.Name">name</a>, <a href="#573848" title="DeVirtualize.this.global.Tree">tpt</a>, <a href="#573853" title="DeVirtualize.this.global.analyzer.global.Tree">pfieldRef</a>)
                <span title="others.type" class="keyword">case</span> _ =&gt;
                  <a href="#573827" title="DeVirtualize.this.global.Tree">stat</a>.<a href="../symtab/Symbols.scala.html#26994" title="(mask: Long)DeVirtualize.this.global.Symbol">symbol</a> resetFlag <span title="Long(536870912L)">PARAMACCESSOR</span> // ??? can we do this                  
                  <a href="#573801" title="(x: DeVirtualize.this.global.Tree)others.type">others</a> += <a href="#573827" title="DeVirtualize.this.global.Tree">stat</a>
              }
            <span class="keyword">else</span> 
              <span title="(x: DeVirtualize.this.global.Tree)scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]">(</span><span title="scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]" class="keyword">if</span> (<a href="#573827" title="DeVirtualize.this.global.Tree">stat</a>.<a href="../ast/Trees.scala.html#29367" title="(x$1: AnyRef)Boolean">symbol</a> <span title="(x$1: Boolean)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span> &amp;&amp; (<a href="#573827" title="DeVirtualize.this.global.Tree">stat</a>.<a href="../symtab/Symbols.scala.html#26996" title="(mask: Long)Boolean">symbol</a> hasFlag <span title="Long(137438953472L)">PRESUPER</span>)) <a href="#573800" title="scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]">presupers</a> <span class="keyword">else</span> <a href="#573801" title="scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]">others</a>) += <a href="#573827" title="DeVirtualize.this.global.Tree">stat</a>
          }
          <a href="../ast/Trees.scala.html#45465" title="=&gt; DeVirtualize.this.global.TreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#48550" title="(tree: DeVirtualize.this.global.Tree,parents: List[DeVirtualize.this.global.Tree],self: DeVirtualize.this.global.ValDef,body: List[DeVirtualize.this.global.Tree])DeVirtualize.this.global.Template">Template</a>(<a href="#573573" title="DeVirtualize.this.global.Tree">tree</a>, <a href="#573791" title="List[DeVirtualize.this.global.Tree]">parents</a>, <a href="#573792" title="DeVirtualize.this.global.ValDef">self</a>, 
                            <a href="#573798" title="scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]">paramFieldAccessors</a>.<span title="=&gt; List[DeVirtualize.this.global.Tree]">toList</span> <a href="#574186" title="List[DeVirtualize.this.global.Tree]">:::</a> 
                            <a href="#573800" title="scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]">presupers</a>.<span title="=&gt; List[DeVirtualize.this.global.Tree]">toList</span> <a href="#574187" title="(prefix: List[DeVirtualize.this.global.Tree])List[DeVirtualize.this.global.Tree]">:::</a> 
                            <a href="#573799" title="scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]">paramFields</a>.<span title="=&gt; List[DeVirtualize.this.global.Tree]">toList</span> <a href="#574188" title="(prefix: List[DeVirtualize.this.global.Tree])List[DeVirtualize.this.global.Tree]">:::</a>
                            <a href="#573801" title="scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]">others</a>.<span title="(prefix: List[DeVirtualize.this.global.Tree])List[DeVirtualize.this.global.Tree]">toList</span>)
        <span title="tree.type" class="keyword">case</span> _ =&gt;
          <a href="../ast/Trees.scala.html#29366" title="(tp: DeVirtualize.this.global.Type)tree.type">tree</a> setType <a href="../symtab/SymbolTable.scala.html#26097" title="(ph: scala.tools.nsc.Phase)(op: =&gt; DeVirtualize.this.global.Type)DeVirtualize.this.global.Type">atPhase</a>(<a href="../SubComponent.scala.html#39639" title="=&gt; scala.tools.nsc.Phase">ownPhase</a>)(<a href="#569805" title="(tp: DeVirtualize.this.global.Type)DeVirtualize.this.global.Type">devirtualizeMap</a>(<a href="#573573" title="DeVirtualize.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; DeVirtualize.this.global.Type">tpe</a>))
      }
    }
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(unit: DeVirtualize.this.global.CompilationUnit)Unit" id="569719">transformUnit</a>(<a title="DeVirtualize.this.global.CompilationUnit" id="574231">unit</a>: <a href="../CompilationUnits.scala.html#39196" title="DeVirtualize.this.global.CompilationUnit">CompilationUnit</a>) = <a href="../symtab/SymbolTable.scala.html#26097" title="(ph: scala.tools.nsc.Phase)(op: =&gt; Unit)Unit">atPhase</a>(<a href="../SubComponent.scala.html#39639" title="=&gt; scala.tools.nsc.Phase">ownPhase</a>.<a href="../Phase.scala.html#23158" title="=&gt; scala.tools.nsc.Phase">next</a>) { 
      <a href="#784366" title="(unit: DeVirtualize.this.global.CompilationUnit)Unit" class="keyword">super</a>.<a title="(unit: DeVirtualize.this.global.CompilationUnit)Unit" id="784366">transformUnit</a>(<a href="#574231" title="DeVirtualize.this.global.CompilationUnit">unit</a>)
    }
  }
}

    

/*
    class A {
      trait C[X, Y] &lt;: { 
        var x: X
        def f(y: Y): X = { println(&quot;A.T&quot;); x } 
      }
      class D[X](xp: X) extends C[X, Int] { 
        var x: X = xp
        override def f(y: Int) = { println(y); super.f(y) } 
      }
    }
    class B extends A {
      override trait C[X, Y] &lt;: { 
        override def f(y: Y): X = { println(&quot;B.T&quot;); super.f(y) } 
        def g: X = x
      }
    }
    object Test extends B {
      val c = new D[String](&quot;OK&quot;)
      println(c.g)
      println(c.f(42))
    }

maps to:

  class A {
    type C[X, Y] &lt;: C$trait[X, Y]

    trait C$trait[X, Y] { this: C with C$trait =&gt; 
      var x: X
      def f(y: Y): X = { println(&quot;A.T&quot;); x }
    } 

    class D[X](xp: X) extends C[X, Int] { 
      var x: X = xp
      override def f(y: Int) = { println(y); super.f(y) } 
    }

      protected[this] val x: Int; val y = x; def f(z:Int) = z + 1 }

    type D &lt;: C with DT

    trait DT extends { self: D =&gt; def f(z:Int) = z + 2 }

    trait preDT extends { self: D =&gt; val z: Int; val x = f(z) }

    def newC(x: Int): C
    def newD(x: Int): D

    //type C = CT
    //type D = C with DT

    class CC(_x:Int) extends { val x = _x } with CT

    def newC[X, Y](x:Int): C = 
      new CC(x).asInstanceOf[C]

    class DC(_z:Int) extends { val z = _z } with preDT with CT with DT {
      override def f(z:Int) = super.f(z)
    }

    def newD(z:Int):D = new DC(z).asInstanceOf[D]
  }

  class B extends A {
    type C &lt;: CT with CT2

    trait CT2 { self : C =&gt; def g = 2 }

    //type C = CT with CT2
    //type D = C with DT

    class CC2(_x:Int) extends { val x = _x } with CT with CT2

    def newC(x:Int): C = new CC2(x).asInstanceOf[C]

    class DC2(_z:Int) extends { val z = _z } with preDT with CT with CT2
      with DT { override def f(z:Int) = super.f(z) }

    def newD(z:Int): D = new DC2(z).asInstanceOf[D]
  }

*/

        </pre>
    </body>
</html>