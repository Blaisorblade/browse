<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/typechecker/DeVirtualize.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style">
    </head>
    <body>
        <pre>
/* NSC -- new Scala compiler
 * Copyright 2005-2009 LAMP/EPFL
 * @author  Martin Odersky
 */
// $Id: RefChecks.scala 13735 2008-01-18 17:18:58Z odersky $

<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> typechecker

<span class="keyword">import</span> symtab.Flags._
<span class="keyword">import</span> transform.{InfoTransform, TypingTransformers}
<span class="keyword">import</span> scala.tools.nsc.util.{Position, NoPosition}
<span class="keyword">import</span> scala.collection.mutable.ListBuffer

<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class DeVirtualize extends scala.tools.nsc.SubComponent with scala.tools.nsc.transform.InfoTransform with scala.tools.nsc.transform.TypingTransformers with ScalaObject" id="17577">DeVirtualize</a> <span title="ScalaObject" class="keyword">extends</span> <a href="../transform/InfoTransform.scala.html#14026" title="scala.tools.nsc.transform.InfoTransform">InfoTransform</a> <span class="keyword">with</span> <a href="../transform/TypingTransformers.scala.html#14383" title="scala.tools.nsc.transform.TypingTransformers">TypingTransformers</a> {

  <span class="keyword">import</span> global._
  <span class="keyword">import</span> definitions._
  <span class="keyword">import</span> typer.{typed, typedOperator, atOwner}

  /** the following two members override abstract members in Transform */
  <span class="keyword">val</span> <a title="String" id="571104">phaseName</a>: <a title="String" id="1626">String</a> = <span title="java.lang.String(&quot;devirtualize&quot;)" class="string">&quot;devirtualize&quot;</span>

  /** The phase might set the following new flags: */
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Long" id="571106">phaseNextFlags</a>: <a title="Long" id="2205">Long</a> = <a href="../symtab/Flags.scala.html#28937" title="(x$1: Long)Long">notDEFERRED</a> <span title="(x$1: Long)Long">|</span> <a href="../symtab/Flags.scala.html#28943" title="=&gt; Long">notOVERRIDE</a> <span title="(x$1: Long)Long">|</span> <a href="../symtab/Flags.scala.html#28933" title="=&gt; Long">notFINAL</a> | <a href="../symtab/Flags.scala.html#28921" title="=&gt; Long">lateABSTRACT</a>

  <span class="keyword">def</span> <a title="(unit: DeVirtualize.this.global.CompilationUnit)DeVirtualize.this.DeVirtualizeTransformer" id="571107">newTransformer</a>(<a title="DeVirtualize.this.global.CompilationUnit" id="571171">unit</a>: <a href="../CompilationUnits.scala.html#39428" title="DeVirtualize.this.global.CompilationUnit">CompilationUnit</a>): <a href="#571137" title="DeVirtualize.this.DeVirtualizeTransformer">DeVirtualizeTransformer</a> =
    <span title="DeVirtualize.this.DeVirtualizeTransformer" class="keyword">new</span> <a href="#571137" title="DeVirtualize.this.DeVirtualizeTransformer">DeVirtualizeTransformer</a>(<a href="#571171" title="DeVirtualize.this.global.CompilationUnit">unit</a>)
 
  /** The class does not change base-classes of existing classes */
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Boolean" id="571108">changesBaseClasses</a> = <span title="Boolean(false)" class="keyword">false</span> 

  <span class="keyword">def</span> <a title="(sym: DeVirtualize.this.global.Symbol,tp: DeVirtualize.this.global.Type)DeVirtualize.this.global.Type" id="571109">transformInfo</a>(<a title="DeVirtualize.this.global.Symbol" id="571190">sym</a>: <a href="../symtab/Symbols.scala.html#26286" title="DeVirtualize.this.global.Symbol">Symbol</a>, <a title="DeVirtualize.this.global.Type" id="571191">tp</a>: <a href="../symtab/Types.scala.html#26364" title="DeVirtualize.this.global.Type">Type</a>): <a href="../symtab/Types.scala.html#26364" title="DeVirtualize.this.global.Type">Type</a> = 
    <span title="DeVirtualize.this.global.Type" class="keyword">if</span> (<a href="#571190" title="DeVirtualize.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27079" title="(x$1: Boolean)Boolean">isThisSym</a> &amp;&amp; <a href="#571190" title="DeVirtualize.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27142" title="=&gt; DeVirtualize.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27113" title="=&gt; Boolean">isVirtualClass</a>) {
      <span class="keyword">val</span> <a title="DeVirtualize.this.global.Symbol" id="571204">clazz</a> = <a href="#571190" title="DeVirtualize.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27142" title="=&gt; DeVirtualize.this.global.Symbol">owner</a>
      <a href="../symtab/Types.scala.html#26460" title="(tps: List[DeVirtualize.this.global.Type])DeVirtualize.this.global.Type">intersectionType</a>(
        <span title="(xs: DeVirtualize.this.global.Type*)List[DeVirtualize.this.global.Type]">List</span>(
          <a href="../symtab/Types.scala.html#26461" title="(tycon: DeVirtualize.this.global.Type,args: List[DeVirtualize.this.global.Type])DeVirtualize.this.global.Type">appliedType</a>(<a href="#571117" title="(clazz: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol">abstractType</a>(<a href="#571204" title="DeVirtualize.this.global.Symbol">clazz</a>).<a href="../symtab/Symbols.scala.html#27172" title="=&gt; DeVirtualize.this.global.Type">typeConstructor</a>, <a href="#571204" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27175" title="(f: (DeVirtualize.this.global.Symbol) =&gt; DeVirtualize.this.global.Type)(implicit bf: scala.collection.generic.BuilderFactory[DeVirtualize.this.global.Type,List[DeVirtualize.this.global.Type],List[DeVirtualize.this.global.Symbol]])List[DeVirtualize.this.global.Type]">typeParams</a> <span title="scala.collection.generic.BuilderFactory[DeVirtualize.this.global.Type,List[DeVirtualize.this.global.Type],List#Coll]">map</span> (<a href="#571231" title="DeVirtualize.this.global.Symbol">_</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; DeVirtualize.this.global.Type">tpe</a>)),
          <a href="#571204" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; DeVirtualize.this.global.Type">tpe</a>))
    } <span class="keyword">else</span> <a href="#571269" title="(tp: DeVirtualize.this.global.Type)DeVirtualize.this.global.Type">devirtualizeMap</a>(<a href="#571191" title="DeVirtualize.this.global.Type">tp</a>)

  /* todo:
     handle constructor arguments
     check: overriding classes must have same type params
     virtual classes cannot have self types
   */

  /** Do the following transformations everywhere in a type:
   *
   * 1. Replace a virtual class
   *
   *  attrs mods class VC[Ts] &lt;: Ps { decls }
   *  
   * by the following symbols
   *
   *  attrs mods1 type VC[Ts] &lt;: dvm(Ps) with VC$trait[Ts]
   *  attrs mods2 trait VC$trait[Ts] extends AnyRef with ScalaObject { 
   *    this: VC[Ts] with VC$trait[Ts] =&gt; decls1
   *  }
   *  
   * The class symbol VC becomes the symbol of the workertrait.
   * 
   *  dvm    is the devirtalization mapping which converts refs to 
   *         virtual classes to refs to their abstract types (@see devirtualize)
   *  mods1  are the modifiers inherited to abstract types
   *  mods2  are the modifiers inherited to worker traits
   *  decls1 is decls but members that have an override modifier 
   *         lose it and any final modifier as well. 
   *
   * 2. For all virtual member classes VC which
   *    are not abstract and which are or inherit from a virtual class defined in current class
   *    add a factory (@see mkFactory)
   * 3. Convert TypeRef's to VC where VC is a virtual class to TypeRef's to AT, where AT
   *    is the abstract type corresponding to VC.
   *
   *  Note: If a class inherits vc's from two different paths, a vc in the 
   *  inheriting class has to be created beforehand. This is done in phase ??? (NOT YET DONE!)
   *
   *  Note: subclasses of virtual classes are treated as if they are virtual.
   *  isVirtualClass returns true for them also. 
   */
  <span class="keyword">object</span> <a title="object DeVirtualize.this.devirtualizeMap" id="571110">devirtualizeMap</a> <span title="ScalaObject" class="keyword">extends</span> <a href="../symtab/Types.scala.html#26479" title="DeVirtualize.this.global.TypeMap">TypeMap</a> {
    <span class="keyword">def</span> <a title="(tp: DeVirtualize.this.global.Type)DeVirtualize.this.global.Type" id="571269">apply</a>(<a title="DeVirtualize.this.global.Type" id="571270">tp</a>: <a href="../symtab/Types.scala.html#26364" title="DeVirtualize.this.global.Type">Type</a>): <a href="../symtab/Types.scala.html#26364" title="DeVirtualize.this.global.Type">Type</a> = <a href="../symtab/Types.scala.html#42954" title="(tp: DeVirtualize.this.global.Type)DeVirtualize.this.global.Type">mapOver</a>(<a href="#571270" title="DeVirtualize.this.global.Type">tp</a>) <span title="DeVirtualize.this.global.Type" class="keyword">match</span> { 
      <span title="DeVirtualize.this.global.Type" class="keyword">case</span> <a title="DeVirtualize.this.global.ClassInfoType" id="571300">tp1</a> @ ClassInfoType(<a title="List[DeVirtualize.this.global.Type]" id="571304">parents</a>, <a title="DeVirtualize.this.global.Scope" id="571305">decls0</a>, <a title="DeVirtualize.this.global.Symbol" id="571306">clazz</a>) =&gt;
        <span class="keyword">var</span> <a title="DeVirtualize.this.global.Scope" id="571309">decls</a> = <a href="#571305" title="DeVirtualize.this.global.Scope">decls0</a>
        <span class="keyword">def</span> <a title="(sym: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol" id="571310">enter</a>(<a title="DeVirtualize.this.global.Symbol" id="571311">sym</a>: <a href="../symtab/Symbols.scala.html#26286" title="DeVirtualize.this.global.Symbol">Symbol</a>) = // at next phase because names of worker traits change
          <a href="../symtab/SymbolTable.scala.html#26256" title="(ph: scala.tools.nsc.Phase)(op: =&gt; DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol">atPhase</a>(<a href="../SubComponent.scala.html#39871" title="=&gt; scala.tools.nsc.Phase">ownPhase</a>.<a href="../Phase.scala.html#23302" title="=&gt; scala.tools.nsc.Phase">next</a>) { <a href="#571309" title="DeVirtualize.this.global.Scope">decls</a>.<a href="../symtab/Scopes.scala.html#27290" title="(sym: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol">enter</a>(<a href="#571311" title="DeVirtualize.this.global.Symbol">sym</a>) } 
        <span title="Unit" class="keyword">if</span> (<a href="#571115" title="(clazz: DeVirtualize.this.global.Symbol)Boolean">containsVirtuals</a>(<a href="#571306" title="DeVirtualize.this.global.Symbol">clazz</a>)) {
          <a href="#571309" title="DeVirtualize.this.global.Scope">decls</a> = <a href="../symtab/Scopes.scala.html#26125" title="=&gt; DeVirtualize.this.global.Scope">newScope</a>
          <span class="keyword">for</span> (<a title="DeVirtualize.this.global.Symbol" id="571369">m</a> &lt;- <a href="#571305" title="DeVirtualize.this.global.Scope">decls0</a>.<a href="../symtab/Scopes.scala.html#27303" title="(f: (DeVirtualize.this.global.Symbol) =&gt; DeVirtualize.this.global.Symbol)Unit">toList</a>) {
            <span title="Any" class="keyword">if</span> (<a href="#571369" title="DeVirtualize.this.global.Symbol">m</a>.<a href="../symtab/Symbols.scala.html#27113" title="=&gt; Boolean">isVirtualClass</a>) {
              <a href="#571369" title="DeVirtualize.this.global.Symbol">m</a>.<a href="../symtab/Symbols.scala.html#27152" title="(mask: Long)m.type">setFlag</a>(<a href="../symtab/Flags.scala.html#28937" title="(x$1: Long)Long">notDEFERRED</a> <span title="(x$1: Long)Long">|</span> <a href="../symtab/Flags.scala.html#28933" title="=&gt; Long">notFINAL</a> | <a href="../symtab/Flags.scala.html#28921" title="=&gt; Long">lateABSTRACT</a>)
              <a href="#571310" title="(sym: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol">enter</a>(<a href="#571132" title="(clazz: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol">mkAbstractType</a>(<a href="#571369" title="DeVirtualize.this.global.Symbol">m</a>))
            }
            <a href="#571310" title="(sym: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol">enter</a>(<a href="#571369" title="DeVirtualize.this.global.Symbol">m</a>)
          }
          <span class="keyword">for</span> (<a title="DeVirtualize.this.global.Symbol" id="571567">m</a> &lt;- <a href="#571116" title="(clazz: DeVirtualize.this.global.Symbol)List[DeVirtualize.this.global.Symbol]">classesInNeedOfFactories</a><span title="(f: (DeVirtualize.this.global.Symbol) =&gt; DeVirtualize.this.global.Symbol)Unit">(</span><a href="#571306" title="DeVirtualize.this.global.Symbol">clazz</a>))
            <a href="#571310" title="(sym: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol">enter</a>(<a href="#571134" title="(clazz: DeVirtualize.this.global.Symbol,owner: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol">mkFactory</a>(<a href="#571567" title="DeVirtualize.this.global.Symbol">m</a>, <a href="#571306" title="DeVirtualize.this.global.Symbol">clazz</a>))
        }
        <span title="DeVirtualize.this.global.Type" class="keyword">if</span> (<a href="#571306" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27113" title="=&gt; Boolean">isVirtualClass</a>) {
          <span title="(x: Any)Unit">println</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;virtual class: &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#571306" title="DeVirtualize.this.global.Symbol">clazz</a>+<a href="#571306" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27251" title="=&gt; String">locationString</a>)
          <a href="#571112" title="(clazz: DeVirtualize.this.global.Symbol)Unit">transformOwnerInfo</a>(<a href="#571306" title="DeVirtualize.this.global.Symbol">clazz</a>) 
          <a href="#571309" title="DeVirtualize.this.global.Scope">decls</a> = <a href="../symtab/Scopes.scala.html#26125" title="=&gt; DeVirtualize.this.global.Scope">newScope</a>
          
          // add virtual fields for all primary constructor parameters
          <span class="keyword">for</span> (<a title="List[(DeVirtualize.this.global.Type, Int)]" id="571617">row</a> &lt;- <a href="#571133" title="(tpe: DeVirtualize.this.global.Type,start: Int)List[List[(DeVirtualize.this.global.Type, Int)]]">paramTypesAndIndices</a><span title="(f: (List[(DeVirtualize.this.global.Type, Int)]) =&gt; Unit)Unit">(</span><a href="#571306" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27192" title="=&gt; DeVirtualize.this.global.Symbol">primaryConstructor</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; DeVirtualize.this.global.Type">tpe</a>, <span title="Int(0)" class="int">0</span>))
            <span class="keyword">for</span> ((<a title="DeVirtualize.this.global.Type" id="571653">pt</a>, <a title="Int" id="571654">i</a>) &lt;- <a href="#571617" title="(f: ((DeVirtualize.this.global.Type, Int)) =&gt; DeVirtualize.this.global.Symbol)Unit">row</a>) 
              <a href="#571310" title="(sym: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol">enter</a>(<a href="#571131" title="(clazz: DeVirtualize.this.global.Symbol,index: Int,tpe: DeVirtualize.this.global.Type)DeVirtualize.this.global.Symbol">mkParamField</a>(<a href="#571306" title="DeVirtualize.this.global.Symbol">clazz</a>, <a href="#571654" title="Int">i</a>, <a href="#571269" title="(tp: DeVirtualize.this.global.Type)DeVirtualize.this.global.Type">devirtualizeMap</a>(<a href="#571653" title="DeVirtualize.this.global.Type">pt</a>)))

          // remove OVERRIDE from all workertrait members, except if they override a member in Object
          <span class="keyword">for</span> (<a title="DeVirtualize.this.global.Symbol" id="571694">m</a> &lt;- <a href="#571305" title="DeVirtualize.this.global.Scope">decls0</a>.<a href="../symtab/Scopes.scala.html#27303" title="(f: (DeVirtualize.this.global.Symbol) =&gt; Any)Unit">toList</a>) {
            <span title="Any" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="#571694" title="DeVirtualize.this.global.Symbol">m</a>.<a href="../symtab/Symbols.scala.html#27075" title="=&gt; Boolean">isConstructor</a>) {
              <span title="Any" class="keyword">if</span> (<span title="(x$1: Boolean)Boolean">(</span><a href="../symtab/Symbols.scala.html#27155" title="(mask: Long)Boolean">m</a> hasFlag <span title="Long(2L)">OVERRIDE</span>) &amp;&amp; <a href="#571694" title="DeVirtualize.this.global.Symbol">m</a>.<a href="../symtab/Symbols.scala.html#27221" title="(ofclazz: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol">overriddenSymbol</a><span title="(x$1: AnyRef)Boolean">(</span><a href="../symtab/Definitions.scala.html#28453" title="=&gt; DeVirtualize.this.global.Symbol">ObjectClass</a>) == <a href="../symtab/Symbols.scala.html#26293" title="object DeVirtualize.this.global.NoSymbol">NoSymbol</a>)
                <a href="../symtab/Symbols.scala.html#27152" title="(mask: Long)m.type">m</a> setFlag (<a href="../symtab/Flags.scala.html#28943" title="(x$1: Long)Long">notOVERRIDE</a> | <a href="../symtab/Flags.scala.html#28933" title="=&gt; Long">notFINAL</a>)
              <a href="#571310" title="(sym: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol">enter</a>(<a href="#571694" title="DeVirtualize.this.global.Symbol">m</a>)
            }
          }
          <span title="Unit" class="keyword">if</span> (<a href="#571306" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27193" title="(x$1: AnyRef)Boolean">thisSym</a> == <a href="#571306" title="DeVirtualize.this.global.Symbol">clazz</a>) <a href="#571306" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27195" title="(tp: DeVirtualize.this.global.Type)Unit">typeOfThis</a> = <a href="#571306" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27196" title="=&gt; DeVirtualize.this.global.Type">thisType</a>
            // ... to give a hook on which we can hang selftype transformers
          <a href="../symtab/Types.scala.html#44491" title="(parents: List[DeVirtualize.this.global.Type],decls: DeVirtualize.this.global.Scope,typeSymbol: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.ClassInfoType">ClassInfoType</a>(<span title="(xs: DeVirtualize.this.global.Type*)List[DeVirtualize.this.global.Type]">List</span>(<a href="../symtab/Definitions.scala.html#28453" title="=&gt; DeVirtualize.this.global.Symbol">ObjectClass</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; DeVirtualize.this.global.Type">tpe</a>, <a href="../symtab/Definitions.scala.html#28515" title="=&gt; DeVirtualize.this.global.Symbol">ScalaObjectClass</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; DeVirtualize.this.global.Type">tpe</a>), <a href="#571309" title="DeVirtualize.this.global.Scope">decls</a>, <a href="#571306" title="DeVirtualize.this.global.Symbol">clazz</a>)
        } <span class="keyword">else</span> {
          <a href="../symtab/Types.scala.html#44491" title="(parents: List[DeVirtualize.this.global.Type],decls: DeVirtualize.this.global.Scope,typeSymbol: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.ClassInfoType">ClassInfoType</a>(<a href="#571304" title="(f: (DeVirtualize.this.global.Type) =&gt; DeVirtualize.this.global.Type)(implicit bf: scala.collection.generic.BuilderFactory[DeVirtualize.this.global.Type,List[DeVirtualize.this.global.Type],List[DeVirtualize.this.global.Type]])List[DeVirtualize.this.global.Type]">parents</a> <span title="scala.collection.generic.BuilderFactory[DeVirtualize.this.global.Type,List[DeVirtualize.this.global.Type],List#Coll]">map</span> <span class="keyword">this</span>, <a href="#571309" title="DeVirtualize.this.global.Scope">decls</a>, <a href="#571306" title="DeVirtualize.this.global.Symbol">clazz</a>)
        }
      <span title="DeVirtualize.this.global.TypeRef" class="keyword">case</span> <a title="DeVirtualize.this.global.TypeRef" id="571844">tp1</a> @ TypeRef(<a title="DeVirtualize.this.global.Type" id="571848">pre</a>, <a title="DeVirtualize.this.global.Symbol" id="571849">clazz</a>, <a title="List[DeVirtualize.this.global.Type]" id="571850">args</a>) <span class="keyword">if</span> <a href="#571849" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27113" title="=&gt; Boolean">isVirtualClass</a> =&gt;
        <a href="../symtab/Types.scala.html#43074" title="(pre: DeVirtualize.this.global.Type,sym: DeVirtualize.this.global.Symbol,args: List[DeVirtualize.this.global.Type])DeVirtualize.this.global.TypeRef">TypeRef</a>(<a href="#571848" title="DeVirtualize.this.global.Type">pre</a>, <a href="#571117" title="(clazz: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol">abstractType</a>(<a href="#571849" title="DeVirtualize.this.global.Symbol">clazz</a>), <a href="#571850" title="List[DeVirtualize.this.global.Type]">args</a>)
      <span title="DeVirtualize.this.global.Type" class="keyword">case</span> <a title="DeVirtualize.this.global.Type" id="571884">tp1</a> =&gt;
        <a href="#571884" title="DeVirtualize.this.global.Type">tp1</a>
    }
  }

  /** Transform owner of given clazz symbol */
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(clazz: DeVirtualize.this.global.Symbol)Unit" id="571112">transformOwnerInfo</a>(<a title="DeVirtualize.this.global.Symbol" id="571586">clazz</a>: <a href="../symtab/Symbols.scala.html#26286" title="DeVirtualize.this.global.Symbol">Symbol</a>) { <a href="../symtab/SymbolTable.scala.html#26256" title="(ph: scala.tools.nsc.Phase)(op: =&gt; DeVirtualize.this.global.Type)DeVirtualize.this.global.Type">atPhase</a>(<a href="../SubComponent.scala.html#39871" title="=&gt; scala.tools.nsc.Phase">ownPhase</a>.<a href="../Phase.scala.html#23302" title="=&gt; scala.tools.nsc.Phase">next</a>) <span title="Unit">{</span> <a href="#571586" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27142" title="=&gt; DeVirtualize.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27163" title="=&gt; DeVirtualize.this.global.Type">info</a> } }

  /** Names of derived classes and factories */
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(clazz: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Name" id="571113">concreteClassName</a>(<a title="DeVirtualize.this.global.Symbol" id="571895">clazz</a>: <a href="../symtab/Symbols.scala.html#26286" title="DeVirtualize.this.global.Symbol">Symbol</a>) = 
    <a href="../symtab/SymbolTable.scala.html#26256" title="(ph: scala.tools.nsc.Phase)(op: =&gt; DeVirtualize.this.global.Name)DeVirtualize.this.global.Name">atPhase</a>(<a href="../SubComponent.scala.html#39871" title="=&gt; scala.tools.nsc.Phase">ownPhase</a>) { <a href="../symtab/Names.scala.html#26210" title="(s: String)DeVirtualize.this.global.Name">newTypeName</a>(<a href="#571895" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27147" title="(other: String)java.lang.String" id="8172">name</a>+<span title="java.lang.String(&quot;$fix&quot;)" class="string">&quot;$fix&quot;</span>) }
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(clazz: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Name" id="571114">factoryName</a>(<a title="DeVirtualize.this.global.Symbol" id="571926">clazz</a>: <a href="../symtab/Symbols.scala.html#26286" title="DeVirtualize.this.global.Symbol">Symbol</a>) = 
    <a href="../symtab/SymbolTable.scala.html#26256" title="(ph: scala.tools.nsc.Phase)(op: =&gt; DeVirtualize.this.global.Name)DeVirtualize.this.global.Name">atPhase</a>(<a href="../SubComponent.scala.html#39871" title="=&gt; scala.tools.nsc.Phase">ownPhase</a>) { <a href="../symtab/Names.scala.html#26207" title="(s: String)DeVirtualize.this.global.Name">newTermName</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;new$&quot;</span>+<a href="#571926" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27147" title="=&gt; DeVirtualize.this.global.Name">name</a>) }

  /** Does `clazz' contaion virtual classes? */
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(clazz: DeVirtualize.this.global.Symbol)Boolean" id="571115">containsVirtuals</a>(<a title="DeVirtualize.this.global.Symbol" id="571333">clazz</a>: <a href="../symtab/Symbols.scala.html#26286" title="DeVirtualize.this.global.Symbol">Symbol</a>) = <a href="#571333" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27163" title="=&gt; DeVirtualize.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#30396" title="=&gt; DeVirtualize.this.global.Scope">decls</a>.<a href="../symtab/Scopes.scala.html#27303" title="(p: (DeVirtualize.this.global.Symbol) =&gt; Boolean)Boolean">toList</a> exists (<a href="#571342" title="DeVirtualize.this.global.Symbol">_</a>.<a href="../symtab/Symbols.scala.html#27113" title="=&gt; Boolean">isVirtualClass</a>)

  /** The inner classes that need factory methods in `clazz' 
   *  This is intended to catch situations like the following
   *
   *  abstract class C { 
   *    class V &lt;: {...}
   *    class W extends V 
   *  }
   *  class D extends C {
   *    class V &lt;: {...}
   *    // factories needed for V and W!
   *  }
   */
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(clazz: DeVirtualize.this.global.Symbol)List[DeVirtualize.this.global.Symbol]" id="571116">classesInNeedOfFactories</a>(<a title="DeVirtualize.this.global.Symbol" id="571401">clazz</a>: <a href="../symtab/Symbols.scala.html#26286" title="DeVirtualize.this.global.Symbol">Symbol</a>) = <a href="../symtab/SymbolTable.scala.html#26256" title="(ph: scala.tools.nsc.Phase)(op: =&gt; List[DeVirtualize.this.global.Symbol])List[DeVirtualize.this.global.Symbol]">atPhase</a>(<a href="../SubComponent.scala.html#39871" title="=&gt; scala.tools.nsc.Phase">ownPhase</a>) {
    <span class="keyword">def</span> <a title="(c: DeVirtualize.this.global.Symbol)Boolean" id="571410">isOverriddenVirtual</a>(<a title="DeVirtualize.this.global.Symbol" id="571412">c</a>: <a href="../symtab/Symbols.scala.html#26286" title="DeVirtualize.this.global.Symbol">Symbol</a>) = 
      <a href="#571412" title="DeVirtualize.this.global.Symbol">c</a>.<a href="../symtab/Symbols.scala.html#27113" title="(x$1: Boolean)Boolean">isVirtualClass</a> &amp;&amp; <a href="#571401" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27163" title="=&gt; DeVirtualize.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#30397" title="(name: DeVirtualize.this.global.Name)DeVirtualize.this.global.Symbol">decl</a>(<a href="#571412" title="DeVirtualize.this.global.Symbol">c</a>.<a href="../symtab/Symbols.scala.html#27147" title="=&gt; DeVirtualize.this.global.Name">name</a>).<a href="../symtab/Symbols.scala.html#27113" title="=&gt; Boolean">isVirtualClass</a>
    <span class="keyword">val</span> <a title="List[DeVirtualize.this.global.Symbol]" id="571411">xs</a> = <a href="#571401" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27163" title="=&gt; DeVirtualize.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#30399" title="=&gt; List[DeVirtualize.this.global.Symbol]">members</a>.<span title="(p: (DeVirtualize.this.global.Symbol) =&gt; Boolean)List[DeVirtualize.this.global.Symbol]">toList</span> filter (<a title="DeVirtualize.this.global.Symbol" id="571421">x</a> =&gt; <a href="#571421" title="DeVirtualize.this.global.Symbol">x</a>.<a href="../symtab/Symbols.scala.html#27113" title="(x$1: Boolean)Boolean">isVirtualClass</a> &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#571421" title="DeVirtualize.this.global.Symbol">x</a>.<a href="../symtab/Symbols.scala.html#27155" title="(mask: Long)Boolean">hasFlag</a>(<span title="Long(8L)">ABSTRACT</span>))
    <span class="keyword">for</span> (<a title="DeVirtualize.this.global.Symbol" id="571458">m</a> &lt;- <a href="#571401" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27163" title="=&gt; DeVirtualize.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#30399" title="=&gt; List[DeVirtualize.this.global.Symbol]">members</a>.<span title="(f: (DeVirtualize.this.global.Symbol) =&gt; DeVirtualize.this.global.Symbol)(implicit bf: scala.collection.generic.BuilderFactory[DeVirtualize.this.global.Symbol,List[DeVirtualize.this.global.Symbol],List[DeVirtualize.this.global.Symbol]])List[DeVirtualize.this.global.Symbol]">toList</span>; 
         <span class="keyword">if</span> (<a href="#571458" title="DeVirtualize.this.global.Symbol">m</a>.<a href="../symtab/Symbols.scala.html#27113" title="(x$1: Boolean)Boolean">isVirtualClass</a> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span>(<a href="../symtab/Symbols.scala.html#27155" title="(mask: Long)Boolean">m</a> hasFlag <span title="Long(8L)">ABSTRACT</span>) &amp;&amp; 
             (<a href="#571458" title="DeVirtualize.this.global.Symbol">m</a>.<a href="../symtab/Symbols.scala.html#27163" title="=&gt; DeVirtualize.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#30428" title="(p: (DeVirtualize.this.global.Symbol) =&gt; Boolean)Boolean">baseClasses</a> exists <a href="#571410" title="(c: DeVirtualize.this.global.Symbol)Boolean">isOverriddenVirtual</a>))) <span class="keyword">yield</span> <a href="#571458" title="DeVirtualize.this.global.Symbol">m</a>
  }

  /** The abstract type corresponding to a virtual class. */  
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(clazz: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol" id="571117">abstractType</a>(<a title="DeVirtualize.this.global.Symbol" id="571219">clazz</a>: <a href="../symtab/Symbols.scala.html#26286" title="DeVirtualize.this.global.Symbol">Symbol</a>): <a href="../symtab/Symbols.scala.html#26286" title="DeVirtualize.this.global.Symbol">Symbol</a> =  <a href="../symtab/SymbolTable.scala.html#26256" title="(ph: scala.tools.nsc.Phase)(op: =&gt; DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol">atPhase</a>(<a href="../SubComponent.scala.html#39871" title="=&gt; scala.tools.nsc.Phase">ownPhase</a>.<a href="../Phase.scala.html#23302" title="=&gt; scala.tools.nsc.Phase">next</a>) {
    <span class="keyword">val</span> <a title="DeVirtualize.this.global.Symbol" id="571951">abstpe</a> = <a href="#571219" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27142" title="=&gt; DeVirtualize.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27163" title="=&gt; DeVirtualize.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#30397" title="(name: DeVirtualize.this.global.Name)DeVirtualize.this.global.Symbol">decl</a>(<a href="../symtab/SymbolTable.scala.html#26256" title="(ph: scala.tools.nsc.Phase)(op: =&gt; DeVirtualize.this.global.Name)DeVirtualize.this.global.Name">atPhase</a>(<a href="../SubComponent.scala.html#39871" title="=&gt; scala.tools.nsc.Phase">ownPhase</a>) { <a href="#571219" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27147" title="=&gt; DeVirtualize.this.global.Name">name</a> })
    <a title="(assertion: Boolean)Unit" id="7943">assert</a>(<a href="#571951" title="DeVirtualize.this.global.Symbol">abstpe</a>.<a href="../symtab/Symbols.scala.html#27059" title="=&gt; Boolean">isAbstractType</a>)
    <a href="#571951" title="DeVirtualize.this.global.Symbol">abstpe</a>
  }

  /** The factory corresponding to a virtual class. */  
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(clazz: DeVirtualize.this.global.Symbol,owner: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol" id="571118">factory</a>(<a title="DeVirtualize.this.global.Symbol" id="571973">clazz</a>: <a href="../symtab/Symbols.scala.html#26286" title="DeVirtualize.this.global.Symbol">Symbol</a>, <a title="DeVirtualize.this.global.Symbol" id="571974">owner</a>: <a href="../symtab/Symbols.scala.html#26286" title="DeVirtualize.this.global.Symbol">Symbol</a>) = <a href="../symtab/SymbolTable.scala.html#26256" title="(ph: scala.tools.nsc.Phase)(op: =&gt; DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol">atPhase</a>(<a href="../SubComponent.scala.html#39871" title="=&gt; scala.tools.nsc.Phase">ownPhase</a>.<a href="../Phase.scala.html#23302" title="=&gt; scala.tools.nsc.Phase">next</a>) {
    <span class="keyword">val</span> <a title="DeVirtualize.this.global.Symbol" id="571983">fsym</a> = <a href="#571974" title="DeVirtualize.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27163" title="=&gt; DeVirtualize.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#30403" title="(name: DeVirtualize.this.global.Name)DeVirtualize.this.global.Symbol">member</a>(<a href="#571114" title="(clazz: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Name">factoryName</a>(<a href="#571973" title="DeVirtualize.this.global.Symbol">clazz</a>))
    <a title="(assertion: Boolean,message: =&gt; Any)Unit" id="7945">assert</a>(<a href="#571983" title="DeVirtualize.this.global.Symbol">fsym</a>.<a href="../symtab/Symbols.scala.html#27069" title="=&gt; Boolean">isMethod</a>, <a href="#571973" title="DeVirtualize.this.global.Symbol">clazz</a>)
    <a href="#571983" title="DeVirtualize.this.global.Symbol">fsym</a>
  }

  /** The name of the field representing a constructor parameter of a virtual class */
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(clazz: DeVirtualize.this.global.Symbol,index: Int)DeVirtualize.this.global.Name" id="571119">paramFieldName</a>(<a title="DeVirtualize.this.global.Symbol" id="572001">clazz</a>: <a href="../symtab/Symbols.scala.html#26286" title="DeVirtualize.this.global.Symbol">Symbol</a>, <a title="Int" id="572002">index</a>: <span title="Int">Int</span>) = <a href="../symtab/SymbolTable.scala.html#26256" title="(ph: scala.tools.nsc.Phase)(op: =&gt; DeVirtualize.this.global.Name)DeVirtualize.this.global.Name">atPhase</a>(<a href="../SubComponent.scala.html#39871" title="=&gt; scala.tools.nsc.Phase">ownPhase</a>) {
    <a href="#572001" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27235" title="(name: DeVirtualize.this.global.Name)DeVirtualize.this.global.Name">expandedName</a>(<a href="../symtab/Names.scala.html#26207" title="(s: String)DeVirtualize.this.global.Name">newTermName</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;param$&quot;</span>+<a href="#572002" title="Int">index</a>))
  }

  /** The name of the field representing a constructor parameter of a virtual class */
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(index: Int)DeVirtualize.this.global.Name" id="571120">fixParamName</a>(<a title="Int" id="572024">index</a>: <span title="Int">Int</span>) = <a href="../symtab/Names.scala.html#26207" title="(s: String)DeVirtualize.this.global.Name">newTermName</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;fix$&quot;</span>+<a href="#572024" title="Int">index</a>)

  /** The field representing a constructor parameter of a virtual class */
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(clazz: DeVirtualize.this.global.Symbol,index: Int)DeVirtualize.this.global.Symbol" id="571121">paramField</a>(<a title="DeVirtualize.this.global.Symbol" id="572033">clazz</a>: <a href="../symtab/Symbols.scala.html#26286" title="DeVirtualize.this.global.Symbol">Symbol</a>, <a title="Int" id="572034">index</a>: <span title="Int">Int</span>) = <a href="../symtab/SymbolTable.scala.html#26256" title="(ph: scala.tools.nsc.Phase)(op: =&gt; DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol">atPhase</a>(<a href="../SubComponent.scala.html#39871" title="=&gt; scala.tools.nsc.Phase">ownPhase</a>.<a href="../Phase.scala.html#23302" title="=&gt; scala.tools.nsc.Phase">next</a>) {
    <a href="#572033" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27163" title="=&gt; DeVirtualize.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#30397" title="(name: DeVirtualize.this.global.Name)DeVirtualize.this.global.Symbol">decl</a>(<a href="#571119" title="(clazz: DeVirtualize.this.global.Symbol,index: Int)DeVirtualize.this.global.Name">paramFieldName</a>(<a href="#572033" title="DeVirtualize.this.global.Symbol">clazz</a>, <a href="#572034" title="Int">index</a>))
  }

  /** The flags that an abstract type can inherit from its virtual class */
  <span class="keyword">protected</span> <span class="keyword">val</span> <a title="Long" id="571122">absTypeFlagMask</a> = <a href="../symtab/Flags.scala.html#28989" title="(x$1: Int)Long">AccessFlags</a> | <span title="Int(16)">DEFERRED</span>

  /** The flags that a factory method can inherit from its virtual class */
  <span class="keyword">protected</span> <span class="keyword">val</span> <a title="Long" id="571124">factoryFlagMask</a> = <a href="../symtab/Flags.scala.html#28989" title="=&gt; Long">AccessFlags</a>

  /** Create a polytype with given type parameters and given type, or return just the type
   *  if type params is empty. */
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(tparams: List[DeVirtualize.this.global.Symbol],tp: DeVirtualize.this.global.Type)DeVirtualize.this.global.Type" id="571126">mkPolyType</a>(<a title="List[DeVirtualize.this.global.Symbol]" id="572052">tparams</a>: <span title="List[DeVirtualize.this.global.Symbol]">List</span>[Symbol], <a title="DeVirtualize.this.global.Type" id="572053">tp</a>: <a href="../symtab/Types.scala.html#26364" title="DeVirtualize.this.global.Type">Type</a>) = 
    <span title="DeVirtualize.this.global.Type" class="keyword">if</span> (<a href="#572052" title="List[DeVirtualize.this.global.Symbol]">tparams</a>.<span title="=&gt; Boolean">isEmpty</span>) <a href="#572053" title="DeVirtualize.this.global.Type">tp</a> <span class="keyword">else</span> <a href="../symtab/Types.scala.html#44057" title="(typeParams: List[DeVirtualize.this.global.Symbol],resultType: DeVirtualize.this.global.Type)DeVirtualize.this.global.PolyType">PolyType</a>(<a href="#572052" title="List[DeVirtualize.this.global.Symbol]">tparams</a>, <a href="#572053" title="DeVirtualize.this.global.Type">tp</a>)

  /** A lazy type to complete `sym', which is is generated for virtual class
   *  `clazz'. 
   *  The info of the symbol is computed by method `getInfo'.
   *  It is wrapped in copies of the type parameters of `clazz'.
   */
  <span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class PolyTypeCompleter extends DeVirtualize.this.global.LazyType with ScalaObject" id="571127">PolyTypeCompleter</a><span title="ScalaObject">(</span><a title="DeVirtualize.this.global.Symbol" id="572131">sym</a>: <a href="../symtab/Symbols.scala.html#26286" title="DeVirtualize.this.global.Symbol">Symbol</a>, <a title="DeVirtualize.this.global.Symbol" id="572132">clazz</a>: <a href="../symtab/Symbols.scala.html#26286" title="DeVirtualize.this.global.Symbol">Symbol</a>) <span class="keyword">extends</span> <a href="../symtab/Types.scala.html#26442" title="DeVirtualize.this.global.LazyType">LazyType</a> {
    <span class="keyword">def</span> <a title="=&gt; DeVirtualize.this.global.Type" id="572081">getInfo</a>: <a href="../symtab/Types.scala.html#26364" title="DeVirtualize.this.global.Type">Type</a>
    <span class="keyword">override</span> <span class="keyword">val</span> <a title="List[DeVirtualize.this.global.Symbol]" id="572082">typeParams</a> = <a href="../symtab/Symbols.scala.html#26296" title="(syms: List[DeVirtualize.this.global.Symbol],owner: DeVirtualize.this.global.Symbol)List[DeVirtualize.this.global.Symbol]">cloneSymbols</a>(<a href="#572132" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27175" title="=&gt; List[DeVirtualize.this.global.Symbol]">typeParams</a>, <a href="#572131" title="DeVirtualize.this.global.Symbol">sym</a>)
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(sym: DeVirtualize.this.global.Symbol)Unit" id="572084">complete</a>(<a title="DeVirtualize.this.global.Symbol" id="572137">sym</a>: <a href="../symtab/Symbols.scala.html#26286" title="DeVirtualize.this.global.Symbol">Symbol</a>) {
      <a href="#572137" title="DeVirtualize.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27164" title="(info: DeVirtualize.this.global.Type)sym.type">setInfo</a><span title="Unit">(</span>
        <a href="#571126" title="(tparams: List[DeVirtualize.this.global.Symbol],tp: DeVirtualize.this.global.Type)DeVirtualize.this.global.Type">mkPolyType</a>(<a href="#572082" title="=&gt; List[DeVirtualize.this.global.Symbol]">typeParams</a>, <a href="#572081" title="=&gt; DeVirtualize.this.global.Type">getInfo</a>.<a href="../symtab/Types.scala.html#30411" title="(from: List[DeVirtualize.this.global.Symbol],to: List[DeVirtualize.this.global.Symbol])DeVirtualize.this.global.Type">substSym</a>(<a href="#572132" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27175" title="=&gt; List[DeVirtualize.this.global.Symbol]">typeParams</a>, <a href="#572082" title="=&gt; List[DeVirtualize.this.global.Symbol]">typeParams</a>)))
    }
  }

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(sym: DeVirtualize.this.global.Symbol)Boolean" id="571128">wasVirtualClass</a>(<a title="DeVirtualize.this.global.Symbol" id="572151">sym</a>: <a href="../symtab/Symbols.scala.html#26286" title="DeVirtualize.this.global.Symbol">Symbol</a>) = { 
    <a href="#572151" title="DeVirtualize.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27113" title="(x$1: Boolean)Boolean" id="2231">isVirtualClass</a> || {
      <a href="#572151" title="DeVirtualize.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27163" title="=&gt; DeVirtualize.this.global.Type">info</a>
      <a href="../symtab/Symbols.scala.html#27155" title="(mask: Long)Boolean">sym</a> hasFlag <a href="../symtab/Flags.scala.html#28937" title="=&gt; Long">notDEFERRED</a> 
    }
  }

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(clazz: DeVirtualize.this.global.Symbol)List[DeVirtualize.this.global.Symbol]" id="571129">addOverriddenVirtuals</a>(<a title="DeVirtualize.this.global.Symbol" id="572158">clazz</a>: <a href="../symtab/Symbols.scala.html#26286" title="DeVirtualize.this.global.Symbol">Symbol</a>) = {
    (<a href="#572158" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27223" title="(p: (DeVirtualize.this.global.Symbol) =&gt; Boolean)List[DeVirtualize.this.global.Symbol]">allOverriddenSymbols</a> filter <a href="#571128" title="(sym: DeVirtualize.this.global.Symbol)Boolean">wasVirtualClass</a>) <a href="#572161" title="List[DeVirtualize.this.global.Symbol]">:::</a> <span title="(xs: DeVirtualize.this.global.Symbol*)List[DeVirtualize.this.global.Symbol]">List</span><span title="(prefix: List[DeVirtualize.this.global.Symbol])List[DeVirtualize.this.global.Symbol]">(</span><a href="#572158" title="DeVirtualize.this.global.Symbol">clazz</a>)
  }

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(tpe: DeVirtualize.this.global.Type)List[DeVirtualize.this.global.Type]" id="571130">addOverriddenVirtuals</a>(<a title="DeVirtualize.this.global.Type" id="572185">tpe</a>: <a href="../symtab/Types.scala.html#26364" title="DeVirtualize.this.global.Type">Type</a>) = <a href="#572185" title="DeVirtualize.this.global.Type">tpe</a> <span title="List[DeVirtualize.this.global.Type]" class="keyword">match</span> {
    <span title="List[DeVirtualize.this.global.Type]" class="keyword">case</span> TypeRef(<a title="DeVirtualize.this.global.Type" id="572191">pre</a>, <a title="DeVirtualize.this.global.Symbol" id="572192">sym</a>, <a title="List[DeVirtualize.this.global.Type]" id="572193">args</a>) =&gt;
      { <span class="keyword">for</span> (<a title="DeVirtualize.this.global.Symbol" id="572212">vc</a> &lt;- <a href="#572192" title="DeVirtualize.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27223" title="(f: (DeVirtualize.this.global.Symbol) =&gt; DeVirtualize.this.global.Type)(implicit bf: scala.collection.generic.BuilderFactory[DeVirtualize.this.global.Type,List[DeVirtualize.this.global.Type],List[DeVirtualize.this.global.Symbol]])List[DeVirtualize.this.global.Type]">allOverriddenSymbols</a> <span class="keyword">if</span> <a href="#571128" title="(sym: DeVirtualize.this.global.Symbol)Boolean">wasVirtualClass</a>(<a href="#572212" title="DeVirtualize.this.global.Symbol">vc</a>))
        <span class="keyword">yield</span> <a href="../symtab/Types.scala.html#26454" title="(pre: DeVirtualize.this.global.Type,sym: DeVirtualize.this.global.Symbol,args: List[DeVirtualize.this.global.Type])DeVirtualize.this.global.Type">typeRef</a>(<a href="#572191" title="DeVirtualize.this.global.Type">pre</a>, <a href="#572212" title="DeVirtualize.this.global.Symbol">vc</a>, <a href="#572193" title="List[DeVirtualize.this.global.Type]">args</a>) }.<span title="=&gt; List[DeVirtualize.this.global.Type]">reverse</span> <a href="#572196" title="List[DeVirtualize.this.global.Type]">:::</a> <span title="(xs: DeVirtualize.this.global.Type*)List[DeVirtualize.this.global.Type]">List</span><span title="(prefix: List[DeVirtualize.this.global.Type])List[DeVirtualize.this.global.Type]">(</span><a href="#572185" title="DeVirtualize.this.global.Type">tpe</a>)
  }

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(clazz: DeVirtualize.this.global.Symbol,index: Int,tpe: DeVirtualize.this.global.Type)DeVirtualize.this.global.Symbol" id="571131">mkParamField</a>(<a title="DeVirtualize.this.global.Symbol" id="571657">clazz</a>: <a href="../symtab/Symbols.scala.html#26286" title="DeVirtualize.this.global.Symbol">Symbol</a>, <a title="Int" id="571658">index</a>: <span title="Int">Int</span>, <a title="DeVirtualize.this.global.Type" id="571659">tpe</a>: <a href="../symtab/Types.scala.html#26364" title="DeVirtualize.this.global.Type">Type</a>): <a href="../symtab/Symbols.scala.html#26286" title="DeVirtualize.this.global.Symbol">Symbol</a> = {
    <span class="keyword">val</span> <a title="DeVirtualize.this.global.TermSymbol" id="572315">param</a> = <a href="#571657" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27026" title="(pos: scala.tools.nsc.util.Position,name: DeVirtualize.this.global.Name)DeVirtualize.this.global.TermSymbol">newMethod</a>(<a href="#571657" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27006" title="=&gt; scala.tools.nsc.util.Position">pos</a>, <a href="#571119" title="(clazz: DeVirtualize.this.global.Symbol,index: Int)DeVirtualize.this.global.Name">paramFieldName</a>(<a href="#571657" title="DeVirtualize.this.global.Symbol">clazz</a>, <a href="#571658" title="Int">index</a>))
      .<a href="../symtab/Symbols.scala.html#27152" title="(mask: Long)DeVirtualize.this.global.TermSymbol">setFlag</a>(PROTECTED | LOCAL | DEFERRED | EXPANDEDNAME | SYNTHETIC <span title="Long(68726292497L)">|</span> STABLE)
    <a href="../symtab/SymbolTable.scala.html#26256" title="(ph: scala.tools.nsc.Phase)(op: =&gt; DeVirtualize.this.global.TermSymbol)DeVirtualize.this.global.TermSymbol">atPhase</a>(<a href="../SubComponent.scala.html#39871" title="=&gt; scala.tools.nsc.Phase">ownPhase</a>.<a href="../Phase.scala.html#23302" title="=&gt; scala.tools.nsc.Phase">next</a>) {
      <a href="#572315" title="DeVirtualize.this.global.TermSymbol">param</a>.<a href="../symtab/Symbols.scala.html#27164" title="(info: DeVirtualize.this.global.Type)param.type">setInfo</a>(<a href="../symtab/Types.scala.html#44057" title="(typeParams: List[DeVirtualize.this.global.Symbol],resultType: DeVirtualize.this.global.Type)DeVirtualize.this.global.PolyType">PolyType</a>(List<span title="object Nil">(</span>), <a href="#571659" title="DeVirtualize.this.global.Type">tpe</a>))
    }
    <a href="#572315" title="DeVirtualize.this.global.TermSymbol">param</a>
  }

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(clazz: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol" id="571132">mkAbstractType</a>(<a title="DeVirtualize.this.global.Symbol" id="571384">clazz</a>: <a href="../symtab/Symbols.scala.html#26286" title="DeVirtualize.this.global.Symbol">Symbol</a>): <a href="../symtab/Symbols.scala.html#26286" title="DeVirtualize.this.global.Symbol">Symbol</a> = {
    <span class="keyword">val</span> <a title="DeVirtualize.this.global.TypeSymbol" id="572398">cabstype</a> = <a href="#571384" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27142" title="=&gt; DeVirtualize.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27038" title="(pos: scala.tools.nsc.util.Position,name: DeVirtualize.this.global.Name)DeVirtualize.this.global.TypeSymbol">newAbstractType</a>(<a href="#571384" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27006" title="=&gt; scala.tools.nsc.util.Position">pos</a>, <a href="#571384" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27147" title="=&gt; DeVirtualize.this.global.Name">name</a>)
      .<a href="../symtab/Symbols.scala.html#27152" title="(mask: Long)DeVirtualize.this.global.TypeSymbol">setFlag</a>(<a href="#571384" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27150" title="(x$1: Long)Long">flags</a> <span title="(x$1: Int)Long">&amp;</span> <a href="#571122" title="=&gt; Long">absTypeFlagMask</a> | <span title="Int(2097152)">SYNTHETIC</span>)
      .<a href="../symtab/Symbols.scala.html#27014" title="(annots: List[DeVirtualize.this.global.AnnotationInfoBase])DeVirtualize.this.global.TypeSymbol">setAnnotations</a>(<a href="#571384" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27013" title="=&gt; List[DeVirtualize.this.global.AnnotationInfo]">annotations</a>)
    <a href="../symtab/SymbolTable.scala.html#26256" title="(ph: scala.tools.nsc.Phase)(op: =&gt; DeVirtualize.this.global.TypeSymbol)DeVirtualize.this.global.TypeSymbol">atPhase</a>(<a href="../SubComponent.scala.html#39871" title="=&gt; scala.tools.nsc.Phase">ownPhase</a>.<a href="../Phase.scala.html#23302" title="=&gt; scala.tools.nsc.Phase">next</a>) {
      <a href="../symtab/Symbols.scala.html#98274" title="(tp: DeVirtualize.this.global.Type)cabstype.type">cabstype</a> setInfo <a href="#572434" title="DeVirtualize.this.PolyTypeCompleter{ ... }" class="keyword">new</a> <a href="#571127" title="anonymous class $anon extends DeVirtualize.this.PolyTypeCompleter" id="572434">PolyTypeCompleter</a>(<a href="#572398" title="DeVirtualize.this.global.TypeSymbol">cabstype</a>, <a href="#571384" title="DeVirtualize.this.global.Symbol">clazz</a>) {
        <span class="keyword">def</span> <a title="=&gt; DeVirtualize.this.global.TypeBounds" id="572436">getInfo</a> = {
          <span class="keyword">val</span> <a title="List[DeVirtualize.this.global.Type]" id="572440">parents1</a> = <a href="#571384" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27163" title="=&gt; DeVirtualize.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#30375" title="(f: (DeVirtualize.this.global.Type) =&gt; DeVirtualize.this.global.Type)(implicit bf: scala.collection.generic.BuilderFactory[DeVirtualize.this.global.Type,List[DeVirtualize.this.global.Type],List[DeVirtualize.this.global.Type]])List[DeVirtualize.this.global.Type]">parents</a> <span title="scala.collection.generic.BuilderFactory[DeVirtualize.this.global.Type,List[DeVirtualize.this.global.Type],List#Coll]">map</span> {
            <a title="DeVirtualize.this.global.Type" id="572450">p</a> =&gt; <a href="#571269" title="(tp: DeVirtualize.this.global.Type)DeVirtualize.this.global.Type">devirtualizeMap</a>(<a href="#572450" title="DeVirtualize.this.global.Type">p</a>.<a href="../symtab/Types.scala.html#30411" title="(from: List[DeVirtualize.this.global.Symbol],to: List[DeVirtualize.this.global.Symbol])DeVirtualize.this.global.Type">substSym</a>(<a href="#571384" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27175" title="=&gt; List[DeVirtualize.this.global.Symbol]">typeParams</a>, <a href="#572082" title="=&gt; List[DeVirtualize.this.global.Symbol]">typeParams</a>))
          }
          <span class="keyword">val</span> <a title="List[DeVirtualize.this.global.Type]" id="572441">parents2</a> = <a href="#571129" title="(clazz: DeVirtualize.this.global.Symbol)List[DeVirtualize.this.global.Symbol]">addOverriddenVirtuals</a><span title="(f: (DeVirtualize.this.global.Symbol) =&gt; DeVirtualize.this.global.Type)(implicit bf: scala.collection.generic.BuilderFactory[DeVirtualize.this.global.Type,List[DeVirtualize.this.global.Type],List[DeVirtualize.this.global.Symbol]])List[DeVirtualize.this.global.Type]">(</span><a href="#571384" title="DeVirtualize.this.global.Symbol">clazz</a>) <span title="scala.collection.generic.BuilderFactory[DeVirtualize.this.global.Type,List[DeVirtualize.this.global.Type],List#Coll]">map</span> {
            <a title="DeVirtualize.this.global.Symbol" id="572556">c</a> =&gt; <a href="../symtab/Types.scala.html#26454" title="(pre: DeVirtualize.this.global.Type,sym: DeVirtualize.this.global.Symbol,args: List[DeVirtualize.this.global.Type])DeVirtualize.this.global.Type">typeRef</a>(<a href="#571384" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27142" title="=&gt; DeVirtualize.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27196" title="=&gt; DeVirtualize.this.global.Type">thisType</a>, <a href="#572556" title="DeVirtualize.this.global.Symbol">c</a>, <a href="#572082" title="(f: (DeVirtualize.this.global.Symbol) =&gt; DeVirtualize.this.global.Type)(implicit bf: scala.collection.generic.BuilderFactory[DeVirtualize.this.global.Type,List[DeVirtualize.this.global.Type],List[DeVirtualize.this.global.Symbol]])List[DeVirtualize.this.global.Type]">typeParams</a> <span title="scala.collection.generic.BuilderFactory[DeVirtualize.this.global.Type,List[DeVirtualize.this.global.Type],List#Coll]">map</span> (<a href="#572568" title="DeVirtualize.this.global.Symbol">_</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; DeVirtualize.this.global.Type">tpe</a>))
          }
          <a href="../symtab/Types.scala.html#26448" title="(lo: DeVirtualize.this.global.Type,hi: DeVirtualize.this.global.Type)DeVirtualize.this.global.TypeBounds">mkTypeBounds</a>(<a href="../symtab/Definitions.scala.html#28457" title="=&gt; DeVirtualize.this.global.Symbol">NothingClass</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; DeVirtualize.this.global.Type">tpe</a>, <a href="../symtab/Types.scala.html#26460" title="(tps: List[DeVirtualize.this.global.Type])DeVirtualize.this.global.Type">intersectionType</a>(<a href="#572440" title="List[DeVirtualize.this.global.Type]">parents1</a> <a href="#572669" title="List[DeVirtualize.this.global.Type]">:::</a> <a href="#572441" title="(prefix: List[DeVirtualize.this.global.Type])List[DeVirtualize.this.global.Type]">parents2</a>))
        }
      }
    }
  }

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(tpe: DeVirtualize.this.global.Type,start: Int)List[List[(DeVirtualize.this.global.Type, Int)]]" id="571133">paramTypesAndIndices</a>(<a title="DeVirtualize.this.global.Type" id="571595">tpe</a>: <a href="../symtab/Types.scala.html#26364" title="DeVirtualize.this.global.Type">Type</a>, <a title="Int" id="571596">start</a>: <span title="Int">Int</span>): <span title="List[List[(DeVirtualize.this.global.Type, Int)]]">List</span>[List[(Type, Int)]] = <a href="#571595" title="DeVirtualize.this.global.Type">tpe</a> <span title="List[List[(DeVirtualize.this.global.Type, Int)]]" class="keyword">match</span> {
    <span title="List[List[(DeVirtualize.this.global.Type, Int)]]" class="keyword">case</span> PolyType(_, <a title="DeVirtualize.this.global.Type" id="572691">restpe</a>) =&gt; <a href="#571133" title="(tpe: DeVirtualize.this.global.Type,start: Int)List[List[(DeVirtualize.this.global.Type, Int)]]">paramTypesAndIndices</a>(<a href="#572691" title="DeVirtualize.this.global.Type">restpe</a>, <a href="#571596" title="Int">start</a>)
    <span title="List[List[(DeVirtualize.this.global.Type, Int)]]" class="keyword">case</span> MethodType(<a title="List[DeVirtualize.this.global.Symbol]" id="572698">params</a>, <a title="DeVirtualize.this.global.Type" id="572699">restpe</a>) =&gt;
      <span class="keyword">val</span> <a title="Int" id="572702">end</a> = <a href="#571596" title="(x$1: Int)Int">start</a> + <a href="#572698" title="List[DeVirtualize.this.global.Symbol]">params</a>.<a title="=&gt; Int" id="29114">length</a>
      (<a href="#571595" title="DeVirtualize.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30386" title="(that: Iterable[Int])(implicit bf: scala.collection.generic.BuilderFactory[(DeVirtualize.this.global.Type, Int),List[(DeVirtualize.this.global.Type, Int)],List[DeVirtualize.this.global.Type]])List[(DeVirtualize.this.global.Type, Int)]" id="25607">paramTypes</a> <span title="scala.collection.generic.BuilderFactory[(DeVirtualize.this.global.Type, Int),List[(DeVirtualize.this.global.Type, Int)],List#Coll]">zip</span> <span title="object List">List</span>.<a title="(start: Int,end: Int)List[Int]" id="24643">range</a>(<a href="#571596" title="Int">start</a>, <a href="#572702" title="Int">end</a>)) <a href="#572709" title="List[(DeVirtualize.this.global.Type, Int)]">::</a> <a href="#571133" title="(tpe: DeVirtualize.this.global.Type,start: Int)List[List[(DeVirtualize.this.global.Type, Int)]]">paramTypesAndIndices</a><span title="(x: List[(DeVirtualize.this.global.Type, Int)])List[List[(DeVirtualize.this.global.Type, Int)]]">(</span><a href="#572699" title="DeVirtualize.this.global.Type">restpe</a>, <a href="#572702" title="Int">end</a>)
    <span title="List[Nothing]" class="keyword">case</span> _ =&gt;
      List<span title="object Nil">(</span>)
  }
    
  /* Add a factory symbol for a virtual class  
   *
   *  attrs mods class VC[Ts] &lt;: Ps { decls }
   *  with base classes BC[Us]'s
   *
   * which corresponds to the following definition :
   *
   *  attrs mods3 def new$VC[Ts](): VC[Ts] = {
   *    class VC$fix extends v2w(BC's[Ts]) with VC$trait[Ts] { ... }
   *    new VC$fix
   *  }
   *
   * where
   *  
   *  mods3  are the modifiers inherited to factories
   *  v2w maps every virtual class to its workertrait and leaves other types alone.
   *
   *  @param  clazz    The virtual class for which factory is added
   *  @param  owner    The owner for which factory is added as a member
   *  @param  scope    The scope into which factory is entered
   */
  <span class="keyword">def</span> <a title="(clazz: DeVirtualize.this.global.Symbol,owner: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol" id="571134">mkFactory</a>(<a title="DeVirtualize.this.global.Symbol" id="571568">clazz</a>: <a href="../symtab/Symbols.scala.html#26286" title="DeVirtualize.this.global.Symbol">Symbol</a>, <a title="DeVirtualize.this.global.Symbol" id="571569">owner</a>: <a href="../symtab/Symbols.scala.html#26286" title="DeVirtualize.this.global.Symbol">Symbol</a>): <a href="../symtab/Symbols.scala.html#26286" title="DeVirtualize.this.global.Symbol">Symbol</a> = {
    <span class="keyword">val</span> <a title="scala.tools.nsc.util.Position" id="572826">pos</a> = <span title="scala.tools.nsc.util.Position" class="keyword">if</span> (<a href="#571568" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27142" title="(x$1: AnyRef)Boolean">owner</a> == <a href="#571569" title="DeVirtualize.this.global.Symbol">owner</a>) <a href="#571568" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27006" title="=&gt; scala.tools.nsc.util.Position">pos</a> <span class="keyword">else</span> <a href="#571569" title="DeVirtualize.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27006" title="=&gt; scala.tools.nsc.util.Position">pos</a>
    <span class="keyword">val</span> <a title="DeVirtualize.this.global.TermSymbol" id="572827">factory</a> = <a href="#571569" title="DeVirtualize.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27026" title="(pos: scala.tools.nsc.util.Position,name: DeVirtualize.this.global.Name)DeVirtualize.this.global.TermSymbol">newMethod</a>(<a href="#572826" title="scala.tools.nsc.util.Position">pos</a>, <a href="#571114" title="(clazz: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Name">factoryName</a>(<a href="#571568" title="DeVirtualize.this.global.Symbol">clazz</a>))
      .<a href="../symtab/Symbols.scala.html#27152" title="(mask: Long)DeVirtualize.this.global.TermSymbol">setFlag</a>(<a href="#571568" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27150" title="(x$1: Long)Long">flags</a> <span title="(x$1: Int)Long">&amp;</span> <a href="#571124" title="=&gt; Long">factoryFlagMask</a> | <span title="Int(2097152)">SYNTHETIC</span>)
      .<a href="../symtab/Symbols.scala.html#27014" title="(annots: List[DeVirtualize.this.global.AnnotationInfoBase])DeVirtualize.this.global.TermSymbol">setAnnotations</a>(<a href="#571568" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27013" title="=&gt; List[DeVirtualize.this.global.AnnotationInfo]">annotations</a>)
    <a href="../symtab/Symbols.scala.html#27164" title="(info: DeVirtualize.this.global.Type)factory.type">factory</a> setInfo <a href="#572864" title="DeVirtualize.this.PolyTypeCompleter{ ... }" class="keyword">new</a> <a href="#571127" title="anonymous class $anon extends DeVirtualize.this.PolyTypeCompleter" id="572864">PolyTypeCompleter</a>(<a href="#572827" title="DeVirtualize.this.global.TermSymbol">factory</a>, <a href="#571568" title="DeVirtualize.this.global.Symbol">clazz</a>) {
      <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tpe: DeVirtualize.this.global.Type)DeVirtualize.this.global.Type" id="572866">copyType</a>(<a title="DeVirtualize.this.global.Type" id="572871">tpe</a>: <a href="../symtab/Types.scala.html#26364" title="DeVirtualize.this.global.Type">Type</a>): <a href="../symtab/Types.scala.html#26364" title="DeVirtualize.this.global.Type">Type</a> = <a href="#572871" title="DeVirtualize.this.global.Type">tpe</a> <span title="DeVirtualize.this.global.Type" class="keyword">match</span> {
        <span title="DeVirtualize.this.global.MethodType" class="keyword">case</span> MethodType(<a title="List[DeVirtualize.this.global.Symbol]" id="572874">formals</a>, <a title="DeVirtualize.this.global.Type" id="572875">restpe</a>) =&gt; <a href="../symtab/Types.scala.html#44127" title="(params: List[DeVirtualize.this.global.Symbol],resultType: DeVirtualize.this.global.Type)DeVirtualize.this.global.MethodType">MethodType</a>(<a href="#572874" title="List[DeVirtualize.this.global.Symbol]">formals</a>, <a href="#572866" title="(tpe: DeVirtualize.this.global.Type)DeVirtualize.this.global.Type">copyType</a>(<a href="#572875" title="DeVirtualize.this.global.Type">restpe</a>))
        <span title="DeVirtualize.this.global.PolyType" class="keyword">case</span> PolyType(<a href="#572903" title="(x: List[DeVirtualize.this.global.Symbol])Some[List[DeVirtualize.this.global.Symbol]]">List</a>(), <a title="DeVirtualize.this.global.Type" id="572913">restpe</a>) =&gt; <a href="../symtab/Types.scala.html#44057" title="(typeParams: List[DeVirtualize.this.global.Symbol],resultType: DeVirtualize.this.global.Type)DeVirtualize.this.global.PolyType">PolyType</a>(List<span title="object Nil">(</span>), <a href="#572866" title="(tpe: DeVirtualize.this.global.Type)DeVirtualize.this.global.Type">copyType</a>(<a href="#572913" title="DeVirtualize.this.global.Type">restpe</a>))
        <span title="Nothing" class="keyword">case</span> PolyType(_, _) =&gt; <span title="Nothing" class="keyword">throw</span> <a title="(x$1: java.lang.String)java.lang.Error" id="26070" class="keyword">new</a> <a title="java.lang.Error" id="7890">Error</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;bad case: &quot;</span>+<a href="#572871" title="DeVirtualize.this.global.Type">tpe</a>)
        <span title="DeVirtualize.this.global.Type" class="keyword">case</span> _ =&gt; <a href="#571569" title="DeVirtualize.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27196" title="=&gt; DeVirtualize.this.global.Type">thisType</a>.<a href="../symtab/Types.scala.html#30409" title="(sym: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Type">memberType</a>(<a href="#571117" title="(clazz: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol">abstractType</a>(<a href="#571568" title="DeVirtualize.this.global.Symbol">clazz</a>))
      }
      <span class="keyword">def</span> <a title="=&gt; DeVirtualize.this.global.Type" id="572867">getInfo</a> = <a href="#572866" title="(tpe: DeVirtualize.this.global.Type)DeVirtualize.this.global.Type">copyType</a>(<a href="#571568" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27192" title="=&gt; DeVirtualize.this.global.Symbol">primaryConstructor</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; DeVirtualize.this.global.Type">tpe</a>)
    }
    <a href="#572827" title="DeVirtualize.this.global.TermSymbol">factory</a>
  }

  <span class="keyword">def</span> <a title="(ts: List[DeVirtualize.this.global.Type])List[DeVirtualize.this.global.Type]" id="571135">removeDuplicates</a>(<a title="List[DeVirtualize.this.global.Type]" id="572970">ts</a>: <span title="List[DeVirtualize.this.global.Type]">List</span>[Type]): <span title="List[DeVirtualize.this.global.Type]">List</span>[Type] = <a href="#572970" title="List[DeVirtualize.this.global.Type]">ts</a> <span title="List[DeVirtualize.this.global.Type]" class="keyword">match</span> {
    <span title="List[Nothing]" class="keyword">case</span> <a href="#572973" title="(x: List[DeVirtualize.this.global.Type])Some[List[DeVirtualize.this.global.Type]]">List</a>() =&gt; List<span title="object Nil">(</span>)
    <span title="List[DeVirtualize.this.global.Type]" class="keyword">case</span> <a title="DeVirtualize.this.global.Type" id="572996">t</a> :: <a title="List[DeVirtualize.this.global.Type]" id="572997">ts1</a> =&gt; <a href="#572996" title="DeVirtualize.this.global.Type">t</a> <a href="#573000" title="DeVirtualize.this.global.Type">::</a> <a href="#571135" title="(ts: List[DeVirtualize.this.global.Type])List[DeVirtualize.this.global.Type]">removeDuplicates</a><span title="(x: DeVirtualize.this.global.Type)List[DeVirtualize.this.global.Type]">(</span><a href="#572997" title="(p: (DeVirtualize.this.global.Type) =&gt; Boolean)List[DeVirtualize.this.global.Type]">ts1</a> filter (<a href="#573003" title="DeVirtualize.this.global.Type">_</a>.<a href="../symtab/Types.scala.html#30366" title="(x$1: AnyRef)Boolean">typeSymbol</a> != <a href="#572996" title="DeVirtualize.this.global.Type">t</a>.<a href="../symtab/Types.scala.html#30366" title="=&gt; DeVirtualize.this.global.Symbol">typeSymbol</a>))
  }

  /** The concrete class symbol VC$fix in the factory symbol (@see mkFactory)
   *  @param clazz    the virtual class
   *  @param factory  the factory which returns an instance of this class
   */
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(clazz: DeVirtualize.this.global.Symbol,factory: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.ClassSymbol" id="571136">mkConcreteClass</a>(<a title="DeVirtualize.this.global.Symbol" id="573022">clazz</a>: <a href="../symtab/Symbols.scala.html#26286" title="DeVirtualize.this.global.Symbol">Symbol</a>, <a title="DeVirtualize.this.global.Symbol" id="573023">factory</a>: <a href="../symtab/Symbols.scala.html#26286" title="DeVirtualize.this.global.Symbol">Symbol</a>) = {
    <span class="keyword">val</span> <a title="DeVirtualize.this.global.ClassSymbol" id="573026">cclazz</a> = <a href="#573023" title="DeVirtualize.this.global.Symbol">factory</a>.<a href="../symtab/Symbols.scala.html#27044" title="(pos: scala.tools.nsc.util.Position,name: DeVirtualize.this.global.Name)DeVirtualize.this.global.ClassSymbol">newClass</a>(<a href="#573022" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27006" title="=&gt; scala.tools.nsc.util.Position">pos</a>, <a href="#571113" title="(clazz: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Name">concreteClassName</a>(<a href="#573022" title="DeVirtualize.this.global.Symbol">clazz</a>))
      .<a href="../symtab/Symbols.scala.html#27152" title="(mask: Long)DeVirtualize.this.global.ClassSymbol">setFlag</a>(FINAL <span title="Long(2097184L)">|</span> SYNTHETIC)
      .<a href="../symtab/Symbols.scala.html#27014" title="(annots: List[DeVirtualize.this.global.AnnotationInfoBase])DeVirtualize.this.global.ClassSymbol">setAnnotations</a>(<a href="#573022" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27013" title="=&gt; List[DeVirtualize.this.global.AnnotationInfo]">annotations</a>)
      
    <a href="../symtab/Symbols.scala.html#98274" title="(tp: DeVirtualize.this.global.Type)cclazz.type">cclazz</a> setInfo <a href="#573068" title="DeVirtualize.this.global.LazyType{ ... }" class="keyword">new</a> <a href="../symtab/Types.scala.html#26442" title="anonymous class $anon extends DeVirtualize.this.global.LazyType" id="573068">LazyType</a> {
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="(sym: DeVirtualize.this.global.Symbol)Unit" id="573070">complete</a>(<a title="DeVirtualize.this.global.Symbol" id="573074">sym</a>: <a href="../symtab/Symbols.scala.html#26286" title="DeVirtualize.this.global.Symbol">Symbol</a>) {
        <span class="keyword">val</span> <a title="List[DeVirtualize.this.global.Type]" id="573079">parents1</a> = <a href="../symtab/SymbolTable.scala.html#26256" title="(ph: scala.tools.nsc.Phase)(op: =&gt; List[DeVirtualize.this.global.Type])List[DeVirtualize.this.global.Type]">atPhase</a>(<a href="../SubComponent.scala.html#39871" title="=&gt; scala.tools.nsc.Phase">ownPhase</a>) {
          <span class="keyword">var</span> <a title="DeVirtualize.this.global.Symbol" id="573086">superclazz</a> = <a href="#573022" title="DeVirtualize.this.global.Symbol">clazz</a>
          <a href="#573088" title="Unit" class="keyword">do</a> {
            <a href="#573086" title="DeVirtualize.this.global.Symbol">superclazz</a> = <a href="#573086" title="DeVirtualize.this.global.Symbol">superclazz</a>.<a href="../symtab/Symbols.scala.html#27163" title="=&gt; DeVirtualize.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#30375" title="=&gt; List[DeVirtualize.this.global.Type]">parents</a>.<a title="=&gt; DeVirtualize.this.global.Type" id="25602">head</a>.<a href="../symtab/Types.scala.html#30366" title="=&gt; DeVirtualize.this.global.Symbol">typeSymbol</a>
          } <span class="keyword">while</span> (<a href="#571128" title="(sym: DeVirtualize.this.global.Symbol)Boolean">wasVirtualClass</a>(<a href="#573086" title="DeVirtualize.this.global.Symbol">superclazz</a>)) 
          <span class="keyword">val</span> <a title="List[DeVirtualize.this.global.Symbol]" id="573087">bcs</a> = <a href="#573086" title="DeVirtualize.this.global.Symbol">superclazz</a> <a href="#573094" title="DeVirtualize.this.global.Symbol">::</a> (<a href="#573022" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27163" title="=&gt; DeVirtualize.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#30428" title="(p: (DeVirtualize.this.global.Symbol) =&gt; Boolean)List[DeVirtualize.this.global.Symbol]" id="24454">baseClasses</a> takeWhile (<a href="#573086" title="DeVirtualize.this.global.Symbol">superclazz</a> <a href="#573104" title="(x$1: AnyRef)Boolean">!=</a> )).<span title="(x: DeVirtualize.this.global.Symbol)List[DeVirtualize.this.global.Symbol]">reverse</span>
          <span title="(x: Any)Unit">println</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;MKConcrete1 &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#573026" title="DeVirtualize.this.global.ClassSymbol">cclazz</a><span title="(x$1: Any)java.lang.String">+</span><a href="#573023" title="DeVirtualize.this.global.Symbol">factory</a>.<a href="../symtab/Symbols.scala.html#27251" title="=&gt; String">locationString</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot; &quot;)" class="string">&quot; &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#573087" title="List[DeVirtualize.this.global.Symbol]">bcs</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot; from &quot;)" class="string">&quot; from &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#573022" title="DeVirtualize.this.global.Symbol">clazz</a>+<a href="#573022" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27251" title="=&gt; String">locationString</a>)
          <span title="(x: Any)Unit">println</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;MKConcrete2 &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#573026" title="DeVirtualize.this.global.ClassSymbol">cclazz</a><span title="(x$1: Any)java.lang.String">+</span><a href="#573023" title="DeVirtualize.this.global.Symbol">factory</a>.<a href="../symtab/Symbols.scala.html#27251" title="=&gt; String">locationString</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot; &quot;)" class="string">&quot; &quot;</span>+(<a href="#573087" title="(f: (DeVirtualize.this.global.Symbol) =&gt; DeVirtualize.this.global.Type)(implicit bf: scala.collection.generic.BuilderFactory[DeVirtualize.this.global.Type,Any,List[DeVirtualize.this.global.Symbol]])Any">bcs</a> <span title="scala.collection.generic.BuilderFactory[DeVirtualize.this.global.Type,List[DeVirtualize.this.global.Type],List#Coll]">map</span> <a href="#573023" title="DeVirtualize.this.global.Symbol">factory</a>.<a href="../symtab/Symbols.scala.html#27142" title="=&gt; DeVirtualize.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27196" title="=&gt; DeVirtualize.this.global.Type">thisType</a>.<a href="../symtab/Types.scala.html#30409" title="(sym: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Type">memberType</a>))
          <a href="#573087" title="(f: (DeVirtualize.this.global.Symbol) =&gt; DeVirtualize.this.global.Type)(implicit bf: scala.collection.generic.BuilderFactory[DeVirtualize.this.global.Type,List[DeVirtualize.this.global.Type],List[DeVirtualize.this.global.Symbol]])List[DeVirtualize.this.global.Type]">bcs</a> <span title="scala.collection.generic.BuilderFactory[DeVirtualize.this.global.Type,List[DeVirtualize.this.global.Type],List#Coll]">map</span> <a href="#573023" title="DeVirtualize.this.global.Symbol">factory</a>.<a href="../symtab/Symbols.scala.html#27142" title="=&gt; DeVirtualize.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27196" title="=&gt; DeVirtualize.this.global.Type">thisType</a>.<a href="../symtab/Types.scala.html#30409" title="(sym: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Type">memberType</a>
        }
        <a href="../symtab/SymbolTable.scala.html#26256" title="(ph: scala.tools.nsc.Phase)(op: =&gt; DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol">atPhase</a>(<a href="../SubComponent.scala.html#39871" title="=&gt; scala.tools.nsc.Phase">ownPhase</a>.<a href="../Phase.scala.html#23302" title="=&gt; scala.tools.nsc.Phase">next</a>) <span title="Unit">{</span>
          <span class="keyword">val</span> <a title="List[DeVirtualize.this.global.Type]" id="573349">parents2</a> = 
            <a href="#571135" title="(ts: List[DeVirtualize.this.global.Type])List[DeVirtualize.this.global.Type]">removeDuplicates</a>(<a href="#573079" title="List[DeVirtualize.this.global.Type]">parents1</a>.<span title="(f: (DeVirtualize.this.global.Type) =&gt; Traversable[DeVirtualize.this.global.Type])(implicit bf: scala.collection.generic.BuilderFactory[DeVirtualize.this.global.Type,List[DeVirtualize.this.global.Type],List[DeVirtualize.this.global.Type]])List[DeVirtualize.this.global.Type]">flatMap</span><span title="scala.collection.generic.BuilderFactory[DeVirtualize.this.global.Type,List[DeVirtualize.this.global.Type],List#Coll]">(</span><a href="#571130" title="(tpe: DeVirtualize.this.global.Type)List[DeVirtualize.this.global.Type]">addOverriddenVirtuals</a>))
            .<span title="(f: (DeVirtualize.this.global.Type) =&gt; DeVirtualize.this.global.Type)(implicit bf: scala.collection.generic.BuilderFactory[DeVirtualize.this.global.Type,List[DeVirtualize.this.global.Type],List[DeVirtualize.this.global.Type]])List[DeVirtualize.this.global.Type]">map</span><span title="scala.collection.generic.BuilderFactory[DeVirtualize.this.global.Type,List[DeVirtualize.this.global.Type],List#Coll]">(</span><a href="#573388" title="DeVirtualize.this.global.Type">_</a>.<a href="../symtab/Types.scala.html#30411" title="(from: List[DeVirtualize.this.global.Symbol],to: List[DeVirtualize.this.global.Symbol])DeVirtualize.this.global.Type">substSym</a>(<a href="#573022" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27175" title="=&gt; List[DeVirtualize.this.global.Symbol]">typeParams</a>, <a href="#573023" title="DeVirtualize.this.global.Symbol">factory</a>.<a href="../symtab/Symbols.scala.html#27175" title="=&gt; List[DeVirtualize.this.global.Symbol]">typeParams</a>))
          <a href="../symtab/Symbols.scala.html#27164" title="(info: DeVirtualize.this.global.Type)sym.type">sym</a> setInfo <a href="../symtab/Types.scala.html#44491" title="(parents: List[DeVirtualize.this.global.Type],decls: DeVirtualize.this.global.Scope,typeSymbol: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.ClassInfoType">ClassInfoType</a>(<a href="#573349" title="List[DeVirtualize.this.global.Type]">parents2</a>, <a href="../symtab/Scopes.scala.html#26125" title="=&gt; DeVirtualize.this.global.Scope">newScope</a>, <a href="#573026" title="DeVirtualize.this.global.ClassSymbol">cclazz</a>)
        }
      }
    }

    <a href="#573026" title="DeVirtualize.this.global.ClassSymbol">cclazz</a>
  }

  /** Perform the following tree transformations:
   *  
   *  1. Add trees for abstract types (@see devirtualize),
   *     worker traits (@see devirtualize)
   *     and factories (@see mkFactory)
   *  
   *  2. Replace a new VC().init(...) where VC is a virtual class with new$VC(...)
   *  
   *  3. Replace references to VC.this and VC.super where VC is a virtual class
   *     with VC$trait.this and VC$trait.super
   *
   *  4. Transform type references to virtual classes to type references of corresponding
   *     abstract types.
   */
  <span class="keyword">class</span> <a title="class DeVirtualizeTransformer extends DeVirtualize.this.TypingTransformer with ScalaObject" id="571137">DeVirtualizeTransformer</a><span title="ScalaObject">(</span><a title="DeVirtualize.this.global.CompilationUnit" id="571184">unit</a>: <a href="../CompilationUnits.scala.html#39428" title="DeVirtualize.this.global.CompilationUnit">CompilationUnit</a>) <span class="keyword">extends</span> <a href="../transform/TypingTransformers.scala.html#79597" title="DeVirtualize.this.TypingTransformer">TypingTransformer</a>(<a href="#571184" title="DeVirtualize.this.global.CompilationUnit">unit</a>) { 
    // all code is executed at phase ownPhase.next
    
    /** Add trees for abstract types, worker traits, and factories (@see mkFactory)
     *  to template body `stats'
     */  
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(stats: List[DeVirtualize.this.global.Tree],exprOwner: DeVirtualize.this.global.Symbol)List[DeVirtualize.this.global.Tree]" id="571177">transformStats</a>(<a title="List[DeVirtualize.this.global.Tree]" id="573523">stats</a>: <span title="List[DeVirtualize.this.global.Tree]">List</span>[Tree], <a title="DeVirtualize.this.global.Symbol" id="573524">exprOwner</a>: <a href="../symtab/Symbols.scala.html#26286" title="DeVirtualize.this.global.Symbol">Symbol</a>): <span title="List[DeVirtualize.this.global.Tree]">List</span>[Tree] = {
      <span class="keyword">val</span> <a title="List[DeVirtualize.this.global.Tree]" id="573528">stats1</a> = <a href="#573523" title="(f: (DeVirtualize.this.global.Tree) =&gt; Traversable[DeVirtualize.this.global.Tree])(implicit bf: scala.collection.generic.BuilderFactory[DeVirtualize.this.global.Tree,List[DeVirtualize.this.global.Tree],List[DeVirtualize.this.global.Tree]])List[DeVirtualize.this.global.Tree]">stats</a> <span title="scala.collection.generic.BuilderFactory[DeVirtualize.this.global.Tree,List[DeVirtualize.this.global.Tree],List#Coll]">flatMap</span> <a href="#571181" title="(tree: DeVirtualize.this.global.Tree)List[DeVirtualize.this.global.Tree]">transformStat</a>
      <span class="keyword">val</span> <a title="List[DeVirtualize.this.global.Symbol]" id="573529">fclasses</a> = <a href="../symtab/SymbolTable.scala.html#26256" title="(ph: scala.tools.nsc.Phase)(op: =&gt; List[DeVirtualize.this.global.Symbol])List[DeVirtualize.this.global.Symbol]">atPhase</a>(<a href="../SubComponent.scala.html#39871" title="=&gt; scala.tools.nsc.Phase">ownPhase</a>) {
        <span title="List[DeVirtualize.this.global.Symbol]" class="keyword">if</span> (<a href="../ast/Trees.scala.html#45699" title="=&gt; (x$1: DeVirtualizeTransformer.this.type)DeVirtualize.this.global.Symbol" id="786314">currentOwner</a>.<a href="../symtab/Symbols.scala.html#27056" title="(x$1: Boolean)Boolean">isClass</a> &amp;&amp; <a href="#571115" title="(clazz: DeVirtualize.this.global.Symbol)Boolean">containsVirtuals</a>(<a href="#786314" title="=&gt; (x$1: DeVirtualizeTransformer.this.type)DeVirtualize.this.global.Symbol">currentOwner</a>)) <a href="#571116" title="(clazz: DeVirtualize.this.global.Symbol)List[DeVirtualize.this.global.Symbol]">classesInNeedOfFactories</a>(<a href="#786314" title="=&gt; (x$1: DeVirtualizeTransformer.this.type)DeVirtualize.this.global.Symbol">currentOwner</a>)  
        <span class="keyword">else</span> List<span title="object Nil">(</span>)
      }
      <span class="keyword">val</span> <a title="List[DeVirtualize.this.global.Tree]" id="573530">newDefs</a> = <a href="#573529" title="(f: (DeVirtualize.this.global.Symbol) =&gt; DeVirtualize.this.global.Tree)(implicit bf: scala.collection.generic.BuilderFactory[DeVirtualize.this.global.Tree,List[DeVirtualize.this.global.Tree],List[DeVirtualize.this.global.Symbol]])List[DeVirtualize.this.global.Tree]">fclasses</a> <span title="scala.collection.generic.BuilderFactory[DeVirtualize.this.global.Tree,List[DeVirtualize.this.global.Tree],List#Coll]">map</span> <a href="#571179" title="(clazz: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Tree">factoryDef</a>
      <span title="List[DeVirtualize.this.global.Tree]" class="keyword">if</span> (<a href="#573530" title="List[DeVirtualize.this.global.Tree]">newDefs</a>.<span title="=&gt; Boolean">isEmpty</span>) <a href="#573528" title="List[DeVirtualize.this.global.Tree]">stats1</a> <span class="keyword">else</span> <a href="#573528" title="List[DeVirtualize.this.global.Tree]">stats1</a> <a href="#573742" title="List[DeVirtualize.this.global.Tree]">:::</a> <a href="#573530" title="(prefix: List[DeVirtualize.this.global.Tree])List[DeVirtualize.this.global.Tree]">newDefs</a>
    }

    <span class="keyword">def</span> <a title="(clazz: DeVirtualize.this.global.Symbol,factory: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Tree" id="571178">fixClassDef</a>(<a title="DeVirtualize.this.global.Symbol" id="573750">clazz</a>: <a href="../symtab/Symbols.scala.html#26286" title="DeVirtualize.this.global.Symbol">Symbol</a>, <a title="DeVirtualize.this.global.Symbol" id="573751">factory</a>: <a href="../symtab/Symbols.scala.html#26286" title="DeVirtualize.this.global.Symbol">Symbol</a>): <a href="../ast/Trees.scala.html#26752" title="DeVirtualize.this.global.Tree">Tree</a> = {
      <span class="keyword">val</span> <a title="DeVirtualize.this.global.ClassSymbol" id="573753">cclazz</a> = <a href="#571136" title="(clazz: DeVirtualize.this.global.Symbol,factory: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.ClassSymbol">mkConcreteClass</a>(<a href="#573750" title="DeVirtualize.this.global.Symbol">clazz</a>, <a href="#573751" title="DeVirtualize.this.global.Symbol">factory</a>) 
      <span class="keyword">val</span> <a title="List[DeVirtualize.this.global.DefDef]" id="573754">overrideBridges</a> = 
        <span class="keyword">for</span> (<a title="DeVirtualize.this.global.Symbol" id="573775">m</a> &lt;- <a href="#573750" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27163" title="=&gt; DeVirtualize.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#30396" title="=&gt; DeVirtualize.this.global.Scope">decls</a>.<a href="../symtab/Scopes.scala.html#27303" title="(f: (DeVirtualize.this.global.Symbol) =&gt; DeVirtualize.this.global.DefDef)(implicit bf: scala.collection.generic.BuilderFactory[DeVirtualize.this.global.DefDef,List[DeVirtualize.this.global.DefDef],List[DeVirtualize.this.global.Symbol]])List[DeVirtualize.this.global.DefDef]">toList</a> <span class="keyword">if</span> <a href="../symtab/Symbols.scala.html#27155" title="(mask: Long)Boolean">m</a> hasFlag <a href="../symtab/Flags.scala.html#28943" title="=&gt; Long">notOVERRIDE</a>) 
        <span class="keyword">yield</span> <a href="#571180" title="(meth: DeVirtualize.this.global.Symbol,cclazz: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.DefDef">overrideBridge</a>(<a href="#573775" title="DeVirtualize.this.global.Symbol">m</a>, <a href="#573753" title="DeVirtualize.this.global.ClassSymbol">cclazz</a>)
      
      <span class="keyword">val</span> <a title="List[List[DeVirtualize.this.global.ValDef]]" id="573755">vparamss</a>: <span title="List[List[DeVirtualize.this.global.ValDef]]">List</span>[List[ValDef]] = <a href="../symtab/SymbolTable.scala.html#26256" title="(ph: scala.tools.nsc.Phase)(op: =&gt; List[List[DeVirtualize.this.global.ValDef]])List[List[DeVirtualize.this.global.ValDef]]">atPhase</a>(<a href="../SubComponent.scala.html#39871" title="=&gt; scala.tools.nsc.Phase">ownPhase</a>) {
        <a href="#571133" title="(tpe: DeVirtualize.this.global.Type,start: Int)List[List[(DeVirtualize.this.global.Type, Int)]]">paramTypesAndIndices</a><span title="(f: (List[(DeVirtualize.this.global.Type, Int)]) =&gt; List[DeVirtualize.this.global.ValDef])(implicit bf: scala.collection.generic.BuilderFactory[List[DeVirtualize.this.global.ValDef],List[List[DeVirtualize.this.global.ValDef]],List[List[(DeVirtualize.this.global.Type, Int)]]])List[List[DeVirtualize.this.global.ValDef]]">(</span><a href="#573750" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27192" title="=&gt; DeVirtualize.this.global.Symbol">primaryConstructor</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; DeVirtualize.this.global.Type">tpe</a>, <span title="Int(0)" class="int">0</span>) <span title="scala.collection.generic.BuilderFactory[List[DeVirtualize.this.global.ValDef],List[List[DeVirtualize.this.global.ValDef]],List#Coll]">map</span> {
          <a href="#574028" title="(f: ((DeVirtualize.this.global.Type, Int)) =&gt; DeVirtualize.this.global.ValDef)(implicit bf: scala.collection.generic.BuilderFactory[DeVirtualize.this.global.ValDef,List[DeVirtualize.this.global.ValDef],List[(DeVirtualize.this.global.Type, Int)]])List[DeVirtualize.this.global.ValDef]">_</a> <span title="scala.collection.generic.BuilderFactory[DeVirtualize.this.global.ValDef,List[DeVirtualize.this.global.ValDef],List#Coll]">map</span> <a href="#574037" title="DeVirtualize.this.global.ValDef">{</a>
          <span title="DeVirtualize.this.global.ValDef" class="keyword">case</span> (<a title="DeVirtualize.this.global.Type" id="574040">pt</a>, <a title="Int" id="574041">i</a>) =&gt;
            <a href="../ast/Trees.scala.html#26943" title="(pos: scala.tools.nsc.util.Position)(tree: DeVirtualize.this.global.ValDef)DeVirtualize.this.global.ValDef">atPos</a>(<a href="#573751" title="DeVirtualize.this.global.Symbol">factory</a>.<a href="../symtab/Symbols.scala.html#27006" title="=&gt; scala.tools.nsc.util.Position">pos</a>) {
              <a href="../ast/Trees.scala.html#73520" title="(mods: DeVirtualize.this.global.Modifiers,name: DeVirtualize.this.global.Name,tpt: DeVirtualize.this.global.Tree,rhs: DeVirtualize.this.global.Tree)DeVirtualize.this.global.ValDef">ValDef</a>(<a href="../ast/Trees.scala.html#26749" title="(flags: Long)DeVirtualize.this.global.Modifiers">Modifiers</a>(PARAMACCESSOR | PRIVATE <span title="Long(537395204L)">|</span> LOCAL), <a href="#571120" title="(index: Int)DeVirtualize.this.global.Name">fixParamName</a>(<a href="#574041" title="Int">i</a>), 
                     <a href="../ast/Trees.scala.html#26903" title="(tp: DeVirtualize.this.global.Type)DeVirtualize.this.global.TypeTree">TypeTree</a>(<a href="#571269" title="(tp: DeVirtualize.this.global.Type)DeVirtualize.this.global.Type">devirtualizeMap</a>(<a href="#574040" title="DeVirtualize.this.global.Type">pt</a>)), <a href="../ast/Trees.scala.html#26761" title="object DeVirtualize.this.global.EmptyTree">EmptyTree</a>)
            }
          }
        }
      }
      <span class="keyword">val</span> <a title="List[DeVirtualize.this.global.DefDef]" id="573756">pfields</a>: <span title="List[DeVirtualize.this.global.DefDef]">List</span>[DefDef] = <a href="../symtab/SymbolTable.scala.html#26256" title="(ph: scala.tools.nsc.Phase)(op: =&gt; List[DeVirtualize.this.global.DefDef])List[DeVirtualize.this.global.DefDef]">atPhase</a>(<a href="../SubComponent.scala.html#39871" title="=&gt; scala.tools.nsc.Phase">ownPhase</a>) {
        <a href="#571133" title="(tpe: DeVirtualize.this.global.Type,start: Int)List[List[(DeVirtualize.this.global.Type, Int)]]">paramTypesAndIndices</a><span title="(f: (List[(DeVirtualize.this.global.Type, Int)]) =&gt; Traversable[DeVirtualize.this.global.DefDef])(implicit bf: scala.collection.generic.BuilderFactory[DeVirtualize.this.global.DefDef,List[DeVirtualize.this.global.DefDef],List[List[(DeVirtualize.this.global.Type, Int)]]])List[DeVirtualize.this.global.DefDef]">(</span><a href="#573750" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27192" title="=&gt; DeVirtualize.this.global.Symbol">primaryConstructor</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; DeVirtualize.this.global.Type">tpe</a>, <span title="Int(0)" class="int">0</span>) <span title="scala.collection.generic.BuilderFactory[DeVirtualize.this.global.DefDef,List[DeVirtualize.this.global.DefDef],List#Coll]">flatMap</span> {
          <a href="#574316" title="(f: ((DeVirtualize.this.global.Type, Int)) =&gt; DeVirtualize.this.global.DefDef)(implicit bf: scala.collection.generic.BuilderFactory[DeVirtualize.this.global.DefDef,List[DeVirtualize.this.global.DefDef],List[(DeVirtualize.this.global.Type, Int)]])List[DeVirtualize.this.global.DefDef]">_</a> <span title="scala.collection.generic.BuilderFactory[DeVirtualize.this.global.DefDef,List[DeVirtualize.this.global.DefDef],List#Coll]">map</span> <a href="#574325" title="DeVirtualize.this.global.DefDef">{</a>
          <span title="DeVirtualize.this.global.DefDef" class="keyword">case</span> (<a title="DeVirtualize.this.global.Type" id="574328">pt</a>, <a title="Int" id="574329">i</a>) =&gt;
            <span class="keyword">val</span> <a title="DeVirtualize.this.global.TermSymbol" id="574332">pfield</a> = <a href="#573753" title="DeVirtualize.this.global.ClassSymbol">cclazz</a>.<a href="../symtab/Symbols.scala.html#27026" title="(pos: scala.tools.nsc.util.Position,name: DeVirtualize.this.global.Name)DeVirtualize.this.global.TermSymbol">newMethod</a>(<a href="#573753" title="DeVirtualize.this.global.ClassSymbol">cclazz</a>.<a href="../symtab/Symbols.scala.html#27006" title="=&gt; scala.tools.nsc.util.Position">pos</a>, <a href="#571119" title="(clazz: DeVirtualize.this.global.Symbol,index: Int)DeVirtualize.this.global.Name">paramFieldName</a>(<a href="#573750" title="DeVirtualize.this.global.Symbol">clazz</a>, <a href="#574329" title="Int">i</a>))
              .<a href="../symtab/Symbols.scala.html#27152" title="(mask: Long)DeVirtualize.this.global.TermSymbol">setFlag</a>(PROTECTED | LOCAL | EXPANDEDNAME | SYNTHETIC <span title="Long(68726292481L)">|</span> STABLE)
              .<a href="../symtab/Symbols.scala.html#27164" title="(info: DeVirtualize.this.global.Type)DeVirtualize.this.global.TermSymbol">setInfo</a>(<a href="../symtab/Types.scala.html#44057" title="(typeParams: List[DeVirtualize.this.global.Symbol],resultType: DeVirtualize.this.global.Type)DeVirtualize.this.global.PolyType">PolyType</a>(List<span title="object Nil">(</span>), <a href="#574328" title="DeVirtualize.this.global.Type">pt</a>))
            <a href="#573753" title="DeVirtualize.this.global.ClassSymbol">cclazz</a>.<a href="../symtab/Symbols.scala.html#27163" title="=&gt; DeVirtualize.this.global.Type">info</a>.<a href="../symtab/Scopes.scala.html#27290" title="(sym: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol">decls</a> enter <a href="#574332" title="DeVirtualize.this.global.TermSymbol">pfield</a>
            <a href="../ast/Trees.scala.html#26943" title="(pos: scala.tools.nsc.util.Position)(tree: DeVirtualize.this.global.DefDef)DeVirtualize.this.global.DefDef">atPos</a>(<a href="#573751" title="DeVirtualize.this.global.Symbol">factory</a>.<a href="../symtab/Symbols.scala.html#27006" title="=&gt; scala.tools.nsc.util.Position">pos</a>) {
              <a href="../ast/Trees.scala.html#26791" title="(sym: DeVirtualize.this.global.Symbol,rhs: DeVirtualize.this.global.Tree)DeVirtualize.this.global.DefDef">DefDef</a>(<a href="#574332" title="DeVirtualize.this.global.TermSymbol">pfield</a>, <a href="../ast/Trees.scala.html#52132" title="(name: DeVirtualize.this.global.Name)DeVirtualize.this.global.Ident">Ident</a>(<a href="#571120" title="(index: Int)DeVirtualize.this.global.Name">fixParamName</a>(<a href="#574329" title="Int">i</a>)))
            }
          }
        }
      }
      <a href="../ast/Trees.scala.html#26943" title="(pos: scala.tools.nsc.util.Position)(tree: DeVirtualize.this.global.ClassDef)DeVirtualize.this.global.ClassDef">atPos</a>(<a href="#573750" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27006" title="=&gt; scala.tools.nsc.util.Position">pos</a>) {
        <a href="../ast/Trees.scala.html#26772" title="(sym: DeVirtualize.this.global.Symbol,constrMods: DeVirtualize.this.global.Modifiers,vparamss: List[List[DeVirtualize.this.global.ValDef]],argss: List[List[DeVirtualize.this.global.Tree]],body: List[DeVirtualize.this.global.Tree],superPos: scala.tools.nsc.util.Position)DeVirtualize.this.global.ClassDef">ClassDef</a>(<a href="#573753" title="DeVirtualize.this.global.ClassSymbol">cclazz</a>, <a href="../ast/Trees.scala.html#26749" title="(flags: Long)DeVirtualize.this.global.Modifiers">Modifiers</a>(<span title="Long(0L)" class="int">0</span>), <a href="#573755" title="List[List[DeVirtualize.this.global.ValDef]]">vparamss</a>, <span title="(xs: List[Nothing]*)List[List[Nothing]]">List</span>(List<span title="object Nil">(</span>)), <a href="#573756" title="List[DeVirtualize.this.global.DefDef]">pfields</a> <a href="#574691" title="List[DeVirtualize.this.global.DefDef]">:::</a> <a href="#573754" title="(prefix: List[DeVirtualize.this.global.DefDef])List[DeVirtualize.this.global.DefDef]">overrideBridges</a>, <a href="#573750" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27006" title="=&gt; scala.tools.nsc.util.Position">pos</a>.<a href="../util/Position.scala.html#30482" title="=&gt; scala.tools.nsc.util.Position">focus</a>)
      }
    }
      

    /** The factory definition for virtual class `clazz' (@see mkFactory)
     *  For a virtual class  
     *
     *  attrs mods class VC[Ts] &lt;: Ps { decls }
     *  with overridden classes _VC[Us]'s
     *
     * we need the following factory:
     *
     *  attrs mods3 def new$VC[Ts](): VC[Ts] = {
     *    class VC$fix extends _VC$trait's[Ts] with VC$trait[Ts] {
     *      override-bridges
     *    }
     *    new VC$fix.asInstanceOf[VC[Ts]]
     *  }
     *
     * where
     *  
     *  mods3  are the modifiers inherited to factories
     *  override-bridges are definitions that link every symbol in a worker trait
     *                   that was overriding something to the overridden symbol
     *                   //todo: not sure what happens with abstract override?
     */
    <span class="keyword">def</span> <a title="(clazz: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Tree" id="571179">factoryDef</a>(<a title="DeVirtualize.this.global.Symbol" id="573656">clazz</a>: <a href="../symtab/Symbols.scala.html#26286" title="DeVirtualize.this.global.Symbol">Symbol</a>): <a href="../ast/Trees.scala.html#26752" title="DeVirtualize.this.global.Tree">Tree</a> = {
      <span class="keyword">val</span> <a title="DeVirtualize.this.global.Symbol" id="574705">factorySym</a> = <a href="#571118" title="(clazz: DeVirtualize.this.global.Symbol,owner: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol">factory</a>(<a href="#573656" title="DeVirtualize.this.global.Symbol">clazz</a>, <a href="../ast/Trees.scala.html#45699" title="=&gt; DeVirtualize.this.global.Symbol">currentOwner</a>)
      <span class="keyword">val</span> <a title="DeVirtualize.this.global.Tree" id="574706">cclazzDef</a> = <a href="#571178" title="(clazz: DeVirtualize.this.global.Symbol,factory: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Tree">fixClassDef</a>(<a href="#573656" title="DeVirtualize.this.global.Symbol">clazz</a>, <a href="#574705" title="DeVirtualize.this.global.Symbol">factorySym</a>)
      <span title="(x: Any)Unit">println</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Concrete: &quot;</span>+<a href="#574706" title="DeVirtualize.this.global.Tree">cclazzDef</a>)
      <span class="keyword">val</span> <a title="DeVirtualize.this.global.Symbol" id="574707">abstpeSym</a> = <a href="#571117" title="(clazz: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol">abstractType</a>(<a href="#573656" title="DeVirtualize.this.global.Symbol">clazz</a>)
      <a href="../transform/TypingTransformers.scala.html#99226" title="=&gt; DeVirtualize.this.global.analyzer.Typer">localTyper</a>.<a href="Typers.scala.html#42872" title="(tree: DeVirtualize.this.global.analyzer.global.Tree)DeVirtualize.this.global.analyzer.global.Tree">typed</a> {
        <a href="../ast/Trees.scala.html#26943" title="(pos: scala.tools.nsc.util.Position)(tree: DeVirtualize.this.global.DefDef)DeVirtualize.this.global.DefDef">atPos</a>(<a href="#574705" title="DeVirtualize.this.global.Symbol">factorySym</a>.<a href="../symtab/Symbols.scala.html#27006" title="=&gt; scala.tools.nsc.util.Position">pos</a>) {
          <a href="../ast/Trees.scala.html#26791" title="(sym: DeVirtualize.this.global.Symbol,rhs: DeVirtualize.this.global.Tree)DeVirtualize.this.global.DefDef">DefDef</a>(<a href="#574705" title="DeVirtualize.this.global.Symbol">factorySym</a>,
            <a href="../ast/Trees.scala.html#49279" title="(stats: List[DeVirtualize.this.global.Tree],expr: DeVirtualize.this.global.Tree)DeVirtualize.this.global.Block">Block</a>(
              <span title="(xs: DeVirtualize.this.global.Tree*)List[DeVirtualize.this.global.Tree]">List</span>(<a href="#574706" title="DeVirtualize.this.global.Tree">cclazzDef</a>), 
              <a href="../ast/Trees.scala.html#50970" title="(fun: DeVirtualize.this.global.Tree,args: List[DeVirtualize.this.global.Tree])DeVirtualize.this.global.TypeApply">TypeApply</a>(
                <a href="../ast/Trees.scala.html#26890" title="(qualifier: DeVirtualize.this.global.Tree,sym: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Select">Select</a>(
                  <a href="../Global.scala.html#39263" title="object DeVirtualize.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#42937" title="(target: DeVirtualize.this.global.gen.global.Tree,vparamss: List[List[DeVirtualize.this.global.gen.global.Symbol]])DeVirtualize.this.global.gen.global.Tree">mkForwarder</a>(
                    <a href="../ast/Trees.scala.html#50528" title="(qualifier: DeVirtualize.this.global.Tree,name: DeVirtualize.this.global.Name)DeVirtualize.this.global.Select">Select</a>(<a href="../ast/Trees.scala.html#50569" title="(tpt: DeVirtualize.this.global.Tree)DeVirtualize.this.global.New">New</a>(<a href="../ast/Trees.scala.html#26903" title="(tp: DeVirtualize.this.global.Type)DeVirtualize.this.global.TypeTree">TypeTree</a>(<a href="#574706" title="DeVirtualize.this.global.Tree">cclazzDef</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; DeVirtualize.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; DeVirtualize.this.global.Type">tpe</a>)), <a href="../symtab/StdNames.scala.html#26690" title="object DeVirtualize.this.global.nme">nme</a>.<a href="../symtab/StdNames.scala.html#29905" title="=&gt; DeVirtualize.this.global.Name">CONSTRUCTOR</a>),
                    <a href="#574705" title="DeVirtualize.this.global.Symbol">factorySym</a>.<a href="../symtab/Symbols.scala.html#27176" title="=&gt; List[List[DeVirtualize.this.global.Symbol]]">paramss</a>),
                  <a href="../symtab/Definitions.scala.html#28690" title="=&gt; DeVirtualize.this.global.Symbol">Any_asInstanceOf</a>),
             <span title="(xs: DeVirtualize.this.global.TypeTree*)List[DeVirtualize.this.global.TypeTree]">List</span>(
               <a href="../ast/Trees.scala.html#26903" title="(tp: DeVirtualize.this.global.Type)DeVirtualize.this.global.TypeTree">TypeTree</a>(
                 <a href="../ast/Trees.scala.html#45699" title="=&gt; DeVirtualize.this.global.Symbol">currentOwner</a>.<a href="../symtab/Symbols.scala.html#27196" title="=&gt; DeVirtualize.this.global.Type">thisType</a>.<a href="../symtab/Types.scala.html#30409" title="(sym: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Type">memberType</a>(<a href="#574707" title="DeVirtualize.this.global.Symbol">abstpeSym</a>)
                 .<a href="../symtab/Types.scala.html#30411" title="(from: List[DeVirtualize.this.global.Symbol],to: List[DeVirtualize.this.global.Symbol])DeVirtualize.this.global.Type">substSym</a>(<a href="#574707" title="DeVirtualize.this.global.Symbol">abstpeSym</a>.<a href="../symtab/Symbols.scala.html#27175" title="=&gt; List[DeVirtualize.this.global.Symbol]">typeParams</a>, <a href="#574705" title="DeVirtualize.this.global.Symbol">factorySym</a>.<a href="../symtab/Symbols.scala.html#27175" title="=&gt; List[DeVirtualize.this.global.Symbol]">typeParams</a>))))))
        }
      }
    }

    /** Create an override bridge for method `meth' in concrete class `cclazz'.
     *  An override bridge has the form
     *
     *   override f(xs1)...(xsN) = super.f(xs)...(xsN)
     */
    <span class="keyword">def</span> <a title="(meth: DeVirtualize.this.global.Symbol,cclazz: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.DefDef" id="571180">overrideBridge</a>(<a title="DeVirtualize.this.global.Symbol" id="573776">meth</a>: <a href="../symtab/Symbols.scala.html#26286" title="DeVirtualize.this.global.Symbol">Symbol</a>, <a title="DeVirtualize.this.global.Symbol" id="573777">cclazz</a>: <a href="../symtab/Symbols.scala.html#26286" title="DeVirtualize.this.global.Symbol">Symbol</a>) = <a href="../ast/Trees.scala.html#26943" title="(pos: scala.tools.nsc.util.Position)(tree: DeVirtualize.this.global.DefDef)DeVirtualize.this.global.DefDef">atPos</a>(<a href="#573776" title="DeVirtualize.this.global.Symbol">meth</a>.<a href="../symtab/Symbols.scala.html#27006" title="=&gt; scala.tools.nsc.util.Position">pos</a>) {
      <span class="keyword">val</span> <a title="DeVirtualize.this.global.Symbol" id="573788">bridge</a> = <a href="#573776" title="DeVirtualize.this.global.Symbol">meth</a>.<a href="../symtab/Symbols.scala.html#27188" title="(owner: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol">cloneSymbol</a>(<a href="#573777" title="DeVirtualize.this.global.Symbol">cclazz</a>)
        .<a href="../symtab/Symbols.scala.html#27153" title="(mask: Long)DeVirtualize.this.global.Symbol">resetFlag</a>(<a href="../symtab/Flags.scala.html#28943" title="(x$1: Long)Long">notOVERRIDE</a> | <a href="../symtab/Flags.scala.html#28933" title="=&gt; Long">notFINAL</a>)
      <a href="#573777" title="DeVirtualize.this.global.Symbol">cclazz</a>.<a href="../symtab/Symbols.scala.html#27163" title="=&gt; DeVirtualize.this.global.Type">info</a>.<a href="../symtab/Types.scala.html#30396" title="=&gt; DeVirtualize.this.global.Scope">decls</a>.<a href="../symtab/Scopes.scala.html#27290" title="(sym: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol">enter</a>(<a href="#573788" title="DeVirtualize.this.global.Symbol">bridge</a>)
      <span class="keyword">val</span> <a title="DeVirtualize.this.global.Tree" id="573789">superRef</a>: <a href="../ast/Trees.scala.html#26752" title="DeVirtualize.this.global.Tree">Tree</a> = <a href="../ast/Trees.scala.html#26890" title="(qualifier: DeVirtualize.this.global.Tree,sym: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Select">Select</a>(<a href="../ast/Trees.scala.html#26882" title="(sym: DeVirtualize.this.global.Symbol,mix: DeVirtualize.this.global.Name)DeVirtualize.this.global.Tree">Super</a>(<a href="#573777" title="DeVirtualize.this.global.Symbol">cclazz</a>, <a href="../symtab/StdNames.scala.html#26690" title="object DeVirtualize.this.global.nme">nme</a>.<a href="../symtab/StdNames.scala.html#29871" title="=&gt; DeVirtualize.this.global.Name">EMPTY</a>.<a href="../symtab/Names.scala.html#28388" title="=&gt; DeVirtualize.this.global.Name">toTypeName</a>), <a href="#573776" title="DeVirtualize.this.global.Symbol">meth</a>)
      <a href="../ast/Trees.scala.html#26791" title="(sym: DeVirtualize.this.global.Symbol,rhs: DeVirtualize.this.global.Tree)DeVirtualize.this.global.DefDef">DefDef</a>(<a href="#573788" title="DeVirtualize.this.global.Symbol">bridge</a>, <a href="../Global.scala.html#39263" title="object DeVirtualize.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#42937" title="(target: DeVirtualize.this.global.gen.global.Tree,vparamss: List[List[DeVirtualize.this.global.gen.global.Symbol]])DeVirtualize.this.global.gen.global.Tree">mkForwarder</a>(<a href="#573789" title="DeVirtualize.this.global.Tree">superRef</a>, <a href="#573788" title="DeVirtualize.this.global.Symbol">bridge</a>.<a href="../symtab/Symbols.scala.html#27176" title="=&gt; List[List[DeVirtualize.this.global.Symbol]]">paramss</a>))
    }

    /** Replace definitions of virtual classes by definitions of corresponding
     *  abstract type and worker traits.
     *  Eliminate constructors of former virtual classes because these are now traits.
     */
    <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(tree: DeVirtualize.this.global.Tree)List[DeVirtualize.this.global.Tree]" id="571181">transformStat</a>(<a title="DeVirtualize.this.global.Tree" id="573538">tree</a>: <a href="../ast/Trees.scala.html#26752" title="DeVirtualize.this.global.Tree">Tree</a>): <span title="List[DeVirtualize.this.global.Tree]">List</span>[Tree] = {
      <span class="keyword">val</span> <a title="DeVirtualize.this.global.Symbol" id="574955">sym</a> = <a href="#573538" title="DeVirtualize.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; DeVirtualize.this.global.Symbol">symbol</a>
      <a href="#573538" title="DeVirtualize.this.global.Tree">tree</a> <span title="List[DeVirtualize.this.global.Tree]" class="keyword">match</span> {
        <span title="List[DeVirtualize.this.global.Tree]" class="keyword">case</span> ClassDef(<a title="DeVirtualize.this.global.Modifiers" id="574962">mods</a>, <a title="DeVirtualize.this.global.Name" id="574963">name</a>, <a title="List[DeVirtualize.this.global.TypeDef]" id="574964">tparams</a>, <a title="DeVirtualize.this.global.Template" id="574965">templ</a>) 
        <span class="keyword">if</span> (<a href="#571128" title="(sym: DeVirtualize.this.global.Symbol)Boolean">wasVirtualClass</a>(<a href="#574955" title="DeVirtualize.this.global.Symbol">sym</a>)) =&gt;
          <span class="keyword">val</span> <a title="DeVirtualize.this.global.Symbol" id="574970">clazz</a> = <a href="#574955" title="DeVirtualize.this.global.Symbol">sym</a>
          <span class="keyword">val</span> <a title="DeVirtualize.this.global.Symbol" id="574971">absTypeSym</a> = <a href="#571117" title="(clazz: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol">abstractType</a>(<a href="#574970" title="DeVirtualize.this.global.Symbol">clazz</a>)
          <span class="keyword">val</span> <a title="DeVirtualize.this.global.TypeDef" id="574972">abstypeDef</a> = <a href="../ast/Trees.scala.html#26797" title="(sym: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.TypeDef">TypeDef</a>(<a href="#574971" title="DeVirtualize.this.global.Symbol">absTypeSym</a>)
          <span title="(xs: DeVirtualize.this.global.Tree*)List[DeVirtualize.this.global.Tree]">List</span>(<a href="../transform/TypingTransformers.scala.html#99226" title="=&gt; DeVirtualize.this.global.analyzer.Typer">localTyper</a>.<a href="Typers.scala.html#42872" title="(tree: DeVirtualize.this.global.analyzer.global.Tree)DeVirtualize.this.global.analyzer.global.Tree">typed</a>(<a href="#574972" title="DeVirtualize.this.global.TypeDef">abstypeDef</a>), <a href="#571182" title="(tree0: DeVirtualize.this.global.Tree)DeVirtualize.this.global.Tree">transform</a>(<a href="#573538" title="DeVirtualize.this.global.Tree">tree</a>))
        <span title="List[Nothing]" class="keyword">case</span> DefDef(_, <a href="../symtab/StdNames.scala.html#26690" title="object DeVirtualize.this.global.nme">nme</a>.<a href="../symtab/StdNames.scala.html#29905" title="=&gt; DeVirtualize.this.global.Name">CONSTRUCTOR</a>, _, _, _, _) 
        <span class="keyword">if</span> (<a href="#571128" title="(sym: DeVirtualize.this.global.Symbol)Boolean">wasVirtualClass</a>(<a href="#574955" title="DeVirtualize.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27142" title="=&gt; DeVirtualize.this.global.Symbol">owner</a>)) =&gt;
          <span title="Unit" class="keyword">if</span> (<a href="../symtab/SymbolTable.scala.html#26256" title="(ph: scala.tools.nsc.Phase)(op: =&gt; Boolean)Boolean">atPhase</a>(<a href="../SubComponent.scala.html#39871" title="=&gt; scala.tools.nsc.Phase">ownPhase</a>)(<a href="#574955" title="(x$1: AnyRef)Boolean">sym</a> != <a href="#574955" title="DeVirtualize.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27142" title="=&gt; DeVirtualize.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27192" title="=&gt; DeVirtualize.this.global.Symbol">primaryConstructor</a>))
            <a href="#571184" title="DeVirtualize.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#45687" title="(pos: scala.tools.nsc.util.Position,msg: String)Unit">error</a>(<a href="#573538" title="DeVirtualize.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29547" title="=&gt; scala.tools.nsc.util.Position">pos</a>, <span title="java.lang.String(&quot;virtual classes cannot have auxiliary constructors&quot;)" class="string">&quot;virtual classes cannot have auxiliary constructors&quot;</span>)
          List<span title="object Nil">(</span>)
        <span title="List[DeVirtualize.this.global.Tree]" class="keyword">case</span> _ =&gt;
          <span title="(xs: DeVirtualize.this.global.Tree*)List[DeVirtualize.this.global.Tree]">List</span>(<a href="#571182" title="(tree0: DeVirtualize.this.global.Tree)DeVirtualize.this.global.Tree">transform</a>(<a href="#573538" title="DeVirtualize.this.global.Tree">tree</a>))
      }
    }

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree0: DeVirtualize.this.global.Tree)DeVirtualize.this.global.Tree" id="571182">transform</a>(<a title="DeVirtualize.this.global.Tree" id="575012">tree0</a>: <a href="../ast/Trees.scala.html#26752" title="DeVirtualize.this.global.Tree">Tree</a>): <a href="../ast/Trees.scala.html#26752" title="DeVirtualize.this.global.Tree">Tree</a> = {
      <span class="keyword">val</span> <a title="DeVirtualize.this.global.Tree" id="575076">tree</a> = <span class="keyword">super</span>.<a href="../transform/TypingTransformers.scala.html#99242" title="(tree: DeVirtualize.this.global.Tree)DeVirtualize.this.global.Tree">transform</a>(<a href="#575012" title="DeVirtualize.this.global.Tree">tree0</a>)
      <span class="keyword">val</span> <a title="DeVirtualize.this.global.Symbol" id="575077">sym</a> = <a href="#575076" title="DeVirtualize.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; DeVirtualize.this.global.Symbol">symbol</a>
      <a href="#575076" title="DeVirtualize.this.global.Tree">tree</a> <span title="DeVirtualize.this.global.Tree" class="keyword">match</span> {
        // Replace a new VC().init() where VC is a virtual class with new$VC
        <span title="DeVirtualize.this.global.analyzer.global.Tree" class="keyword">case</span> Apply(Select(New(<a title="DeVirtualize.this.global.Tree" id="575093">tpt</a>), <a title="DeVirtualize.this.global.Name" id="575096">name</a>), <a title="List[DeVirtualize.this.global.Tree]" id="575099">args</a>) <span class="keyword">if</span> (<a href="#575077" title="DeVirtualize.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27075" title="(x$1: Boolean)Boolean">isConstructor</a> &amp;&amp; <a href="#571128" title="(sym: DeVirtualize.this.global.Symbol)Boolean">wasVirtualClass</a>(<a href="#575077" title="DeVirtualize.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27142" title="=&gt; DeVirtualize.this.global.Symbol">owner</a>)) =&gt;
          <span class="keyword">val</span> <a title="DeVirtualize.this.global.Symbol" id="575106">clazz</a> = <a href="#575077" title="DeVirtualize.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27142" title="=&gt; DeVirtualize.this.global.Symbol">owner</a>
          <span class="keyword">val</span> <a title="DeVirtualize.this.global.Select" id="575107">fn</a> = 
            <a href="../ast/Trees.scala.html#50528" title="(qualifier: DeVirtualize.this.global.Tree,name: DeVirtualize.this.global.Name)DeVirtualize.this.global.Select">Select</a>(
              <a href="../Global.scala.html#39263" title="object DeVirtualize.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#42905" title="(tpe: DeVirtualize.this.global.gen.global.Type)DeVirtualize.this.global.gen.global.Tree">mkAttributedQualifier</a>(<a href="#575093" title="DeVirtualize.this.global.Tree">tpt</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; DeVirtualize.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30376" title="=&gt; DeVirtualize.this.global.Type">prefix</a>),
              <a href="#571118" title="(clazz: DeVirtualize.this.global.Symbol,owner: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol">factory</a>(<a href="#575106" title="DeVirtualize.this.global.Symbol">clazz</a>, <a href="#575106" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27142" title="=&gt; DeVirtualize.this.global.Symbol">owner</a>).<a href="../symtab/Symbols.scala.html#27147" title="=&gt; DeVirtualize.this.global.Name">name</a>)
          <span title="(x: Any)Unit">println</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;fac &quot;</span>+<a href="#571118" title="(clazz: DeVirtualize.this.global.Symbol,owner: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Symbol">factory</a>(<a href="#575106" title="DeVirtualize.this.global.Symbol">clazz</a>, <a href="#575106" title="DeVirtualize.this.global.Symbol">clazz</a>.<a href="../symtab/Symbols.scala.html#27142" title="=&gt; DeVirtualize.this.global.Symbol">owner</a>).<a href="../symtab/Symbols.scala.html#27162" title="=&gt; DeVirtualize.this.global.Type">tpe</a>)
          <span class="keyword">val</span> <a title="List[DeVirtualize.this.global.Type]" id="575108">targs</a> = <a href="#575093" title="DeVirtualize.this.global.Tree">tpt</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; DeVirtualize.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30378" title="=&gt; List[DeVirtualize.this.global.Type]">typeArgs</a>
          <a href="../ast/Trees.scala.html#26943" title="(pos: scala.tools.nsc.util.Position)(tree: DeVirtualize.this.global.analyzer.global.Tree)DeVirtualize.this.global.analyzer.global.Tree">atPos</a>(<a href="#575076" title="DeVirtualize.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29547" title="=&gt; scala.tools.nsc.util.Position">pos</a>) {
            <a href="../transform/TypingTransformers.scala.html#99226" title="=&gt; DeVirtualize.this.global.analyzer.Typer">localTyper</a>.<a href="Typers.scala.html#42872" title="(tree: DeVirtualize.this.global.analyzer.global.Tree)DeVirtualize.this.global.analyzer.global.Tree">typed</a> {
              <span class="keyword">val</span> <a title="DeVirtualize.this.global.Apply" id="575187">res</a> = 
                <a href="../ast/Trees.scala.html#49378" title="(fun: DeVirtualize.this.global.Tree,args: List[DeVirtualize.this.global.Tree])DeVirtualize.this.global.Apply">Apply</a>(<span title="DeVirtualize.this.global.Tree" class="keyword">if</span> (<a href="#575108" title="List[DeVirtualize.this.global.Type]">targs</a>.<span title="=&gt; Boolean">isEmpty</span>) <a href="#575107" title="DeVirtualize.this.global.Select">fn</a> <span class="keyword">else</span> <a href="../ast/Trees.scala.html#50970" title="(fun: DeVirtualize.this.global.Tree,args: List[DeVirtualize.this.global.Tree])DeVirtualize.this.global.TypeApply">TypeApply</a>(<a href="#575107" title="DeVirtualize.this.global.Select">fn</a>, <a href="#575108" title="(f: (DeVirtualize.this.global.Type) =&gt; DeVirtualize.this.global.TypeTree)(implicit bf: scala.collection.generic.BuilderFactory[DeVirtualize.this.global.TypeTree,List[DeVirtualize.this.global.Tree],List[DeVirtualize.this.global.Type]])List[DeVirtualize.this.global.Tree]">targs</a> <span title="scala.collection.generic.BuilderFactory[DeVirtualize.this.global.TypeTree,List[DeVirtualize.this.global.TypeTree],List#Coll]">map</span> <a href="../ast/Trees.scala.html#26903" title="(tp: DeVirtualize.this.global.Type)DeVirtualize.this.global.TypeTree">TypeTree</a>), <a href="#575099" title="List[DeVirtualize.this.global.Tree]">args</a>)
                <span title="(x: Any)Unit">println</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;typing &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#575187" title="DeVirtualize.this.global.Apply">res</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot; from &quot;)" class="string">&quot; from &quot;</span>+<a href="#575099" title="List[DeVirtualize.this.global.Tree]">args</a>)
                <a href="#575187" title="DeVirtualize.this.global.Apply">res</a>
              }
            }
        
        <span title="DeVirtualize.this.global.Template" class="keyword">case</span> Template(<a title="List[DeVirtualize.this.global.Tree]" id="575294">parents</a>, <a title="DeVirtualize.this.global.ValDef" id="575295">self</a>, <a title="List[DeVirtualize.this.global.Tree]" id="575296">body</a>) <span class="keyword">if</span> (<a href="#571128" title="(sym: DeVirtualize.this.global.Symbol)Boolean">wasVirtualClass</a>(<a href="#575077" title="DeVirtualize.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27142" title="=&gt; DeVirtualize.this.global.Symbol">owner</a>)) =&gt;
          // add param field accessors
          <span class="keyword">val</span> <a title="scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]" id="575301">paramFieldAccessors</a> = <span title="scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]" class="keyword">new</span> <span title="scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]">ListBuffer</span>[Tree]
          <span class="keyword">val</span> <a title="scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]" id="575302">paramFields</a> = <span title="scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]" class="keyword">new</span> <span title="scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]">ListBuffer</span>[Tree]
          <span class="keyword">val</span> <a title="scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]" id="575303">presupers</a> = <span title="scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]" class="keyword">new</span> <span title="scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]">ListBuffer</span>[Tree]
          <span class="keyword">val</span> <a title="scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]" id="575304">others</a> = <span title="scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]" class="keyword">new</span> <span title="scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]">ListBuffer</span>[Tree]
          <span class="keyword">var</span> <a title="Int" id="575305">paramFieldCount</a> = <span title="Int(0)" class="int">0</span>
          <span class="keyword">for</span> (<a title="DeVirtualize.this.global.Tree" id="575330">stat</a> &lt;- <a href="#575296" title="(f: (DeVirtualize.this.global.Tree) =&gt; scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree])Unit">body</a>) {
            <span title="scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]" class="keyword">if</span> (<a href="#575330" title="DeVirtualize.this.global.Tree">stat</a>.<a href="../ast/Trees.scala.html#29553" title="(x$1: AnyRef)Boolean">symbol</a> <span title="(x$1: Boolean)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span> &amp;&amp; (<a href="#575330" title="DeVirtualize.this.global.Tree">stat</a>.<a href="../symtab/Symbols.scala.html#27155" title="(mask: Long)Boolean">symbol</a> hasFlag <span title="Long(536870912L)">PARAMACCESSOR</span>))
              <a href="#575330" title="DeVirtualize.this.global.Tree">stat</a> <span title="scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]" class="keyword">match</span> {
                <span title="paramFieldAccessors.type" class="keyword">case</span> <a title="DeVirtualize.this.global.ValDef" id="575342">pacc</a> @ ValDef(<a title="DeVirtualize.this.global.Modifiers" id="575349">mods</a>, <a title="DeVirtualize.this.global.Name" id="575350">name</a>, <a title="DeVirtualize.this.global.Tree" id="575351">tpt</a>, <a title="DeVirtualize.this.global.Tree" id="575352">rhs</a>) =&gt;
                  <a href="#575342" title="DeVirtualize.this.global.ValDef">pacc</a>.<a href="../symtab/Symbols.scala.html#27153" title="(mask: Long)DeVirtualize.this.global.Symbol">symbol</a> <a href="../symtab/Symbols.scala.html#27152" title="(mask: Long)DeVirtualize.this.global.Symbol">resetFlag</a> <span title="Long(536870912L)">PARAMACCESSOR</span> setFlag <span title="Long(137438953472L)">PRESUPER</span>
                  <span class="keyword">val</span> <a title="DeVirtualize.this.global.Symbol" id="575355">pfield</a> = <a href="#571121" title="(clazz: DeVirtualize.this.global.Symbol,index: Int)DeVirtualize.this.global.Symbol">paramField</a>(<a href="#575077" title="DeVirtualize.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27142" title="=&gt; DeVirtualize.this.global.Symbol">owner</a>, <a href="#575305" title="Int">paramFieldCount</a>)
                  <a href="#575305" title="Int">paramFieldCount</a> += <span title="Int(1)" class="int">1</span>
                  <a href="../symtab/Symbols.scala.html#27007" title="(pos: scala.tools.nsc.util.Position)pfield.type">pfield</a> setPos <a href="#575342" title="DeVirtualize.this.global.ValDef">pacc</a>.<a href="../ast/Trees.scala.html#29547" title="=&gt; scala.tools.nsc.util.Position">pos</a>
                  <a href="#575302" title="(x: DeVirtualize.this.global.Tree)paramFields.type">paramFields</a> += <a href="../transform/TypingTransformers.scala.html#99226" title="=&gt; DeVirtualize.this.global.analyzer.Typer">localTyper</a>.<a href="Typers.scala.html#42872" title="(tree: DeVirtualize.this.global.analyzer.global.Tree)DeVirtualize.this.global.analyzer.global.Tree">typed</a>(<a href="../ast/Trees.scala.html#26791" title="(sym: DeVirtualize.this.global.Symbol,rhs: DeVirtualize.this.global.Tree)DeVirtualize.this.global.DefDef">DefDef</a>(<a href="#575355" title="DeVirtualize.this.global.Symbol">pfield</a>, <a href="../ast/Trees.scala.html#26761" title="object DeVirtualize.this.global.EmptyTree">EmptyTree</a>))
                  <span class="keyword">val</span> <a title="DeVirtualize.this.global.analyzer.global.Tree" id="575356">pfieldRef</a> = <a href="../transform/TypingTransformers.scala.html#99226" title="=&gt; DeVirtualize.this.global.analyzer.Typer">localTyper</a>.<a href="Typers.scala.html#42872" title="(tree: DeVirtualize.this.global.analyzer.global.Tree)DeVirtualize.this.global.analyzer.global.Tree">typed</a> { 
                    <a href="../ast/Trees.scala.html#26943" title="(pos: scala.tools.nsc.util.Position)(tree: DeVirtualize.this.global.Select)DeVirtualize.this.global.Select">atPos</a>(<a href="#575342" title="DeVirtualize.this.global.ValDef">pacc</a>.<a href="../ast/Trees.scala.html#29547" title="=&gt; scala.tools.nsc.util.Position">pos</a>) { 
                      <a href="../ast/Trees.scala.html#26890" title="(qualifier: DeVirtualize.this.global.Tree,sym: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Select">Select</a>(<a href="../ast/Trees.scala.html#26886" title="(sym: DeVirtualize.this.global.Symbol)DeVirtualize.this.global.Tree">This</a>(<a href="#575077" title="DeVirtualize.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27142" title="=&gt; DeVirtualize.this.global.Symbol">owner</a>), <a href="#575355" title="DeVirtualize.this.global.Symbol">pfield</a>) 
                    } 
                  }
                  <a href="#575301" title="(x: DeVirtualize.this.global.Tree)paramFieldAccessors.type">paramFieldAccessors</a> += <a href="../ast/Trees.scala.html#45697" title="=&gt; DeVirtualize.this.global.TreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#48797" title="(tree: DeVirtualize.this.global.Tree,mods: DeVirtualize.this.global.Modifiers,name: DeVirtualize.this.global.Name,tpt: DeVirtualize.this.global.Tree,rhs: DeVirtualize.this.global.Tree)DeVirtualize.this.global.ValDef">ValDef</a>(<a href="#575342" title="DeVirtualize.this.global.ValDef">pacc</a>, <a href="#575349" title="DeVirtualize.this.global.Modifiers">mods</a>, <a href="#575350" title="DeVirtualize.this.global.Name">name</a>, <a href="#575351" title="DeVirtualize.this.global.Tree">tpt</a>, <a href="#575356" title="DeVirtualize.this.global.analyzer.global.Tree">pfieldRef</a>)
                <span title="others.type" class="keyword">case</span> _ =&gt;
                  <a href="#575330" title="DeVirtualize.this.global.Tree">stat</a>.<a href="../symtab/Symbols.scala.html#27153" title="(mask: Long)DeVirtualize.this.global.Symbol">symbol</a> resetFlag <span title="Long(536870912L)">PARAMACCESSOR</span> // ??? can we do this                  
                  <a href="#575304" title="(x: DeVirtualize.this.global.Tree)others.type">others</a> += <a href="#575330" title="DeVirtualize.this.global.Tree">stat</a>
              }
            <span class="keyword">else</span> 
              <span title="(x: DeVirtualize.this.global.Tree)scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]">(</span><span title="scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]" class="keyword">if</span> (<a href="#575330" title="DeVirtualize.this.global.Tree">stat</a>.<a href="../ast/Trees.scala.html#29553" title="(x$1: AnyRef)Boolean">symbol</a> <span title="(x$1: Boolean)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span> &amp;&amp; (<a href="#575330" title="DeVirtualize.this.global.Tree">stat</a>.<a href="../symtab/Symbols.scala.html#27155" title="(mask: Long)Boolean">symbol</a> hasFlag <span title="Long(137438953472L)">PRESUPER</span>)) <a href="#575303" title="scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]">presupers</a> <span class="keyword">else</span> <a href="#575304" title="scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]">others</a>) += <a href="#575330" title="DeVirtualize.this.global.Tree">stat</a>
          }
          <a href="../ast/Trees.scala.html#45697" title="=&gt; DeVirtualize.this.global.TreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#48803" title="(tree: DeVirtualize.this.global.Tree,parents: List[DeVirtualize.this.global.Tree],self: DeVirtualize.this.global.ValDef,body: List[DeVirtualize.this.global.Tree])DeVirtualize.this.global.Template">Template</a>(<a href="#575076" title="DeVirtualize.this.global.Tree">tree</a>, <a href="#575294" title="List[DeVirtualize.this.global.Tree]">parents</a>, <a href="#575295" title="DeVirtualize.this.global.ValDef">self</a>, 
                            <a href="#575301" title="scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]">paramFieldAccessors</a>.<span title="=&gt; List[DeVirtualize.this.global.Tree]">toList</span> <a href="#575689" title="List[DeVirtualize.this.global.Tree]">:::</a> 
                            <a href="#575303" title="scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]">presupers</a>.<span title="=&gt; List[DeVirtualize.this.global.Tree]">toList</span> <a href="#575690" title="(prefix: List[DeVirtualize.this.global.Tree])List[DeVirtualize.this.global.Tree]">:::</a> 
                            <a href="#575302" title="scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]">paramFields</a>.<span title="=&gt; List[DeVirtualize.this.global.Tree]">toList</span> <a href="#575691" title="(prefix: List[DeVirtualize.this.global.Tree])List[DeVirtualize.this.global.Tree]">:::</a>
                            <a href="#575304" title="scala.collection.mutable.ListBuffer[DeVirtualize.this.global.Tree]">others</a>.<span title="(prefix: List[DeVirtualize.this.global.Tree])List[DeVirtualize.this.global.Tree]">toList</span>)
        <span title="tree.type" class="keyword">case</span> _ =&gt;
          <a href="../ast/Trees.scala.html#29552" title="(tp: DeVirtualize.this.global.Type)tree.type">tree</a> setType <a href="../symtab/SymbolTable.scala.html#26256" title="(ph: scala.tools.nsc.Phase)(op: =&gt; DeVirtualize.this.global.Type)DeVirtualize.this.global.Type">atPhase</a>(<a href="../SubComponent.scala.html#39871" title="=&gt; scala.tools.nsc.Phase">ownPhase</a>)(<a href="#571269" title="(tp: DeVirtualize.this.global.Type)DeVirtualize.this.global.Type">devirtualizeMap</a>(<a href="#575076" title="DeVirtualize.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; DeVirtualize.this.global.Type">tpe</a>))
      }
    }
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(unit: DeVirtualize.this.global.CompilationUnit)Unit" id="571183">transformUnit</a>(<a title="DeVirtualize.this.global.CompilationUnit" id="575734">unit</a>: <a href="../CompilationUnits.scala.html#39428" title="DeVirtualize.this.global.CompilationUnit">CompilationUnit</a>) = <a href="../symtab/SymbolTable.scala.html#26256" title="(ph: scala.tools.nsc.Phase)(op: =&gt; Unit)Unit">atPhase</a>(<a href="../SubComponent.scala.html#39871" title="=&gt; scala.tools.nsc.Phase">ownPhase</a>.<a href="../Phase.scala.html#23302" title="=&gt; scala.tools.nsc.Phase">next</a>) { 
      <a href="#786324" title="(unit: DeVirtualize.this.global.CompilationUnit)Unit" class="keyword">super</a>.<a title="(unit: DeVirtualize.this.global.CompilationUnit)Unit" id="786324">transformUnit</a>(<a href="#575734" title="DeVirtualize.this.global.CompilationUnit">unit</a>)
    }
  }
}

    

/*
    class A {
      trait C[X, Y] &lt;: { 
        var x: X
        def f(y: Y): X = { println(&quot;A.T&quot;); x } 
      }
      class D[X](xp: X) extends C[X, Int] { 
        var x: X = xp
        override def f(y: Int) = { println(y); super.f(y) } 
      }
    }
    class B extends A {
      override trait C[X, Y] &lt;: { 
        override def f(y: Y): X = { println(&quot;B.T&quot;); super.f(y) } 
        def g: X = x
      }
    }
    object Test extends B {
      val c = new D[String](&quot;OK&quot;)
      println(c.g)
      println(c.f(42))
    }

maps to:

  class A {
    type C[X, Y] &lt;: C$trait[X, Y]

    trait C$trait[X, Y] { this: C with C$trait =&gt; 
      var x: X
      def f(y: Y): X = { println(&quot;A.T&quot;); x }
    } 

    class D[X](xp: X) extends C[X, Int] { 
      var x: X = xp
      override def f(y: Int) = { println(y); super.f(y) } 
    }

      protected[this] val x: Int; val y = x; def f(z:Int) = z + 1 }

    type D &lt;: C with DT

    trait DT extends { self: D =&gt; def f(z:Int) = z + 2 }

    trait preDT extends { self: D =&gt; val z: Int; val x = f(z) }

    def newC(x: Int): C
    def newD(x: Int): D

    //type C = CT
    //type D = C with DT

    class CC(_x:Int) extends { val x = _x } with CT

    def newC[X, Y](x:Int): C = 
      new CC(x).asInstanceOf[C]

    class DC(_z:Int) extends { val z = _z } with preDT with CT with DT {
      override def f(z:Int) = super.f(z)
    }

    def newD(z:Int):D = new DC(z).asInstanceOf[D]
  }

  class B extends A {
    type C &lt;: CT with CT2

    trait CT2 { self : C =&gt; def g = 2 }

    //type C = CT with CT2
    //type D = C with DT

    class CC2(_x:Int) extends { val x = _x } with CT with CT2

    def newC(x:Int): C = new CC2(x).asInstanceOf[C]

    class DC2(_z:Int) extends { val z = _z } with preDT with CT with CT2
      with DT { override def f(z:Int) = super.f(z) }

    def newD(z:Int): D = new DC2(z).asInstanceOf[D]
  }

*/

        </pre>
    </body>
</html>