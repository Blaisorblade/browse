<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/typechecker/EtaExpansion.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style">
    </head>
    <body>
        <pre>
/* NSC -- new Scala compiler
 * Copyright 2005-2009 LAMP/EPFL
 * @author  Martin Odersky
 */
// $Id: EtaExpansion.scala 18546 2009-08-22 18:48:25Z extempore $

<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> typechecker

<span class="keyword">import</span> scala.collection.mutable.ListBuffer
<span class="keyword">import</span> symtab.Flags._

/** This trait ...
 *
 *  @author  Martin Odersky
 *  @version 1.0
 */
<span class="keyword">trait</span> <a title="trait EtaExpansion extends java.lang.Object with ScalaObject" id="18390">EtaExpansion</a> <span title="ScalaObject">{</span> self: Analyzer =&gt;

  <span class="keyword">import</span> global._

  <span class="keyword">object</span> <a title="object EtaExpansion.this.etaExpansion" id="40026">etaExpansion</a> <span title="ScalaObject">{</span>
    <span class="keyword">def</span> <a title="(tree: EtaExpansion.this.global.Tree)Option[(List[EtaExpansion.this.global.ValDef], EtaExpansion.this.global.Tree, List[EtaExpansion.this.global.Tree])]" id="95403">unapply</a>(<a title="EtaExpansion.this.global.Tree" id="95407">tree</a>: <a href="../ast/Trees.scala.html#26593" title="EtaExpansion.this.global.Tree">Tree</a>): <a title="Option[(List[EtaExpansion.this.global.ValDef], EtaExpansion.this.global.Tree, List[EtaExpansion.this.global.Tree])]" id="782">Option</a>[(List[ValDef], Tree, List[Tree])] = <a href="#95407" title="EtaExpansion.this.global.Tree">tree</a> <span title="Option[(List[EtaExpansion.this.global.ValDef], EtaExpansion.this.global.Tree, List[EtaExpansion.this.global.Tree])]" class="keyword">match</span> {
      <span title="Some[(List[EtaExpansion.this.global.ValDef], EtaExpansion.this.global.Tree, List[EtaExpansion.this.global.Tree])]" class="keyword">case</span> Function(<a title="List[EtaExpansion.this.global.ValDef]" id="95440">vparams</a>, Apply(<a title="EtaExpansion.this.global.Tree" id="95443">fn</a>, <a title="List[EtaExpansion.this.global.Tree]" id="95444">args</a>)) 
      <span class="keyword">if</span> (<span title="object List">List</span>.<a title="(xs: List[EtaExpansion.this.global.ValDef],ys: List[EtaExpansion.this.global.Tree])(f: (EtaExpansion.this.global.ValDef, EtaExpansion.this.global.Tree) =&gt; Boolean)Boolean" id="24391">forall2</a>(<a href="#95440" title="List[EtaExpansion.this.global.ValDef]">vparams</a>, <a href="#95444" title="List[EtaExpansion.this.global.Tree]">args</a>) <a href="#95462" title="Boolean" id="1155">{</a>
        <span title="Boolean" class="keyword">case</span> (<a title="EtaExpansion.this.global.ValDef" id="95474">vparam</a>, Ident(<a title="EtaExpansion.this.global.Name" id="95478">name</a>)) =&gt; <a href="#95474" title="EtaExpansion.this.global.ValDef">vparam</a>.<a href="../ast/Trees.scala.html#53524" title="(x$1: AnyRef)Boolean" id="3626">name</a> == <a href="#95478" title="EtaExpansion.this.global.Name">name</a>
        <span title="Boolean(false)" class="keyword">case</span> _ =&gt; <span title="Boolean(false)" class="keyword">false</span>
      }) =&gt; 
        <a title="(x: (List[EtaExpansion.this.global.ValDef], EtaExpansion.this.global.Tree, List[EtaExpansion.this.global.Tree]))Some[(List[EtaExpansion.this.global.ValDef], EtaExpansion.this.global.Tree, List[EtaExpansion.this.global.Tree])]" id="258">Some</a>(<a title="(_1: List[EtaExpansion.this.global.ValDef],_2: EtaExpansion.this.global.Tree,_3: List[EtaExpansion.this.global.Tree])(List[EtaExpansion.this.global.ValDef], EtaExpansion.this.global.Tree, List[EtaExpansion.this.global.Tree])" id="396">(</a><a href="#95440" title="List[EtaExpansion.this.global.ValDef]">vparams</a>, <a href="#95443" title="EtaExpansion.this.global.Tree">fn</a>, <a href="#95444" title="List[EtaExpansion.this.global.Tree]">args</a>))
      <span title="None.type" class="keyword">case</span> _ =&gt;
        <a title="object None" id="465">None</a>
    }
  }

  /** &lt;p&gt;
   *    Expand partial function applications of type &lt;code&gt;type&lt;/code&gt;.
   *  &lt;/p&gt;&lt;pre&gt;
   *  p.f(es_1)...(es_n)
   *     ==&gt;  {
   *            &lt;b&gt;private synthetic val&lt;/b&gt; eta$f   = p.f   // if p is not stable
   *            ...
   *            &lt;b&gt;private synthetic val&lt;/b&gt; eta$e_i = e_i    // if e_i is not stable
   *            ...
   *            (ps_1 =&gt; ... =&gt; ps_m =&gt; eta$f([es_1])...([es_m])(ps_1)...(ps_m))
   *          }&lt;/pre&gt;
   *  &lt;p&gt;
   *    tree is already attributed
   *  &lt;/p&gt;
   */
  <span class="keyword">def</span> <a title="(unit: EtaExpansion.this.global.CompilationUnit,tree: EtaExpansion.this.global.Tree)EtaExpansion.this.global.Tree" id="40028">etaExpand</a>(<a title="EtaExpansion.this.global.CompilationUnit" id="95507">unit</a> : <a href="../CompilationUnits.scala.html#39196" title="EtaExpansion.this.global.CompilationUnit">CompilationUnit</a>, <a title="EtaExpansion.this.global.Tree" id="95508">tree</a>: <a href="../ast/Trees.scala.html#26593" title="EtaExpansion.this.global.Tree">Tree</a>): <a href="../ast/Trees.scala.html#26593" title="EtaExpansion.this.global.Tree">Tree</a> = {
    <span class="keyword">val</span> <a title="EtaExpansion.this.global.Type" id="95510">tpe</a> = <a href="#95508" title="EtaExpansion.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29363" title="=&gt; EtaExpansion.this.global.Type">tpe</a>
    <span class="keyword">val</span> <a title="java.lang.String" id="95511">symbolHash</a> = <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>
    <span class="keyword">var</span> <a title="Int" id="95512">cnt</a> = <span title="Int(0)" class="int">0</span> // for NoPosition
    <span class="keyword">def</span> <a title="(pos: scala.tools.nsc.util.Position,n: Int)EtaExpansion.this.global.Name" id="95513">freshName</a>(<a title="scala.tools.nsc.util.Position" id="95518">pos</a> : util.<a href="../util/Position.scala.html#14710" title="scala.tools.nsc.util.Position">Position</a>, <a title="Int" id="95519">n</a> : <a title="Int" id="2177">Int</a>) = {
      <a href="#95512" title="Int" id="2964">cnt</a> += <span title="Int(1)" class="int">1</span>
      <a href="../symtab/Names.scala.html#26048" title="(s: String)EtaExpansion.this.global.Name">newTermName</a>(<a href="#95507" title="EtaExpansion.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#45434" title="=&gt; scala.tools.nsc.util.FreshNameCreator">fresh</a>.<a href="../util/FreshNameCreator.scala.html#73998" title="(pos: scala.tools.nsc.util.Position,prefix: String)String">newName</a>(<a href="#95518" title="scala.tools.nsc.util.Position">pos</a>, <span title="(x$1: Any)java.lang.String" class="string">&quot;eta$&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> (<a href="#95512" title="(x$1: Int)Int" id="2966">cnt</a> - <span title="Int(1)" class="int">1</span>) + <span title="java.lang.String(&quot;$&quot;)" class="string">&quot;$&quot;</span>))
      // Note - the comment below made more sense before I ripped inIDE out -
      // I leave it in to give context to the todo: at the bottom.
      // Martin to Sean: I removed the 
      // else if (n == 0) branch and changed `n' in the line above to `(cnt - 1)'
      // this was necessary because otherwise curried eta-expansions would get the same
      // symbol. An example which failes test/files/run/Course-2002-02.scala
      // todo: review and get rid of the `n' argument (which is unused right now).
    }
    // { cnt = cnt + 1; newTermName(&quot;eta$&quot; + cnt) }
    <span class="keyword">val</span> <a title="scala.collection.mutable.ListBuffer[EtaExpansion.this.global.Tree]" id="95514">defs</a> = <span title="scala.collection.mutable.ListBuffer[EtaExpansion.this.global.Tree]" class="keyword">new</span> <a title="scala.collection.mutable.ListBuffer[EtaExpansion.this.global.Tree]" id="24819">ListBuffer</a>[Tree]

    /** Append to &lt;code&gt;defs&lt;/code&gt; value definitions for all non-stable
     *  subexpressions of the function application &lt;code&gt;tree&lt;/code&gt;.
     *
     *  @param tree ...
     *  @return     ...
     */
    <span class="keyword">def</span> <a title="(tree: EtaExpansion.this.global.Tree)EtaExpansion.this.global.Tree" id="95515">liftoutPrefix</a>(<a title="EtaExpansion.this.global.Tree" id="95585">tree</a>: <a href="../ast/Trees.scala.html#26593" title="EtaExpansion.this.global.Tree">Tree</a>): <a href="../ast/Trees.scala.html#26593" title="EtaExpansion.this.global.Tree">Tree</a> = {
      <span class="keyword">def</span> <a title="(tree: EtaExpansion.this.global.Tree)EtaExpansion.this.global.Tree" id="95586">liftout</a>(<a title="EtaExpansion.this.global.Tree" id="95588">tree</a>: <a href="../ast/Trees.scala.html#26593" title="EtaExpansion.this.global.Tree">Tree</a>): <a href="../ast/Trees.scala.html#26593" title="EtaExpansion.this.global.Tree">Tree</a> =
        <span title="EtaExpansion.this.global.Tree" class="keyword">if</span> (<a href="../ast/Trees.scala.html#26582" title="object EtaExpansion.this.global.treeInfo">treeInfo</a>.<a href="../ast/TreeInfo.scala.html#48908" title="(tree: EtaExpansion.this.global.treeInfo.trees.Tree)Boolean">isPureExpr</a>(<a href="#95588" title="EtaExpansion.this.global.Tree">tree</a>)) <a href="#95588" title="EtaExpansion.this.global.Tree">tree</a>
        <span class="keyword">else</span> {
          <span class="keyword">val</span> <a title="EtaExpansion.this.global.Name" id="95592">vname</a>: <a href="../symtab/Names.scala.html#26055" title="EtaExpansion.this.global.Name">Name</a> = <a href="#95513" title="(pos: scala.tools.nsc.util.Position,n: Int)EtaExpansion.this.global.Name">freshName</a>(<a href="#95588" title="EtaExpansion.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29361" title="=&gt; scala.tools.nsc.util.Position">pos</a>, <span title="Int(0)" class="int">0</span>)
          <a href="#95514" title="(x: EtaExpansion.this.global.Tree)defs.type" id="61580">defs</a> += <a href="../ast/Trees.scala.html#26784" title="(pos: scala.tools.nsc.util.Position)(tree: EtaExpansion.this.global.ValDef)EtaExpansion.this.global.ValDef">atPos</a>(<a href="#95588" title="EtaExpansion.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29361" title="=&gt; scala.tools.nsc.util.Position">pos</a>) {
            <a href="../ast/Trees.scala.html#73233" title="(mods: EtaExpansion.this.global.Modifiers,name: EtaExpansion.this.global.Name,tpt: EtaExpansion.this.global.Tree,rhs: EtaExpansion.this.global.Tree)EtaExpansion.this.global.ValDef">ValDef</a>(<a href="../ast/Trees.scala.html#26590" title="(flags: Long)EtaExpansion.this.global.Modifiers">Modifiers</a>(<span title="Long(2097152L)">SYNTHETIC</span>), <a href="#95592" title="EtaExpansion.this.global.Name">vname</a>, <a href="../ast/Trees.scala.html#50468" title="()EtaExpansion.this.global.TypeTree">TypeTree</a>(), <a href="#95588" title="EtaExpansion.this.global.Tree">tree</a>)
          }
          <a href="../ast/Trees.scala.html#51878" title="(name: EtaExpansion.this.global.Name)EtaExpansion.this.global.Ident">Ident</a><a href="../ast/Trees.scala.html#29365" title="(pos: scala.tools.nsc.util.Position)EtaExpansion.this.global.Ident">(</a><a href="#95592" title="EtaExpansion.this.global.Name">vname</a>) setPos <a href="#95588" title="EtaExpansion.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29361" title="=&gt; scala.tools.nsc.util.Position">pos</a>.<a href="../util/Position.scala.html#30296" title="=&gt; scala.tools.nsc.util.Position">focus</a>
        }
      <span class="keyword">val</span> <a title="EtaExpansion.this.global.Tree" id="95587">tree1</a> = <a href="#95585" title="EtaExpansion.this.global.Tree">tree</a> <span title="EtaExpansion.this.global.Tree" class="keyword">match</span> {
        // a partial application using named arguments has the following form:
        // { val qual$1 = qual
        //   val x$1 = arg1
        //   [...]
        //   val x$n = argn
        //   qual$1.fun(x$1, ..)..(.., x$n) }
        // Eta-expansion has to be performed on `fun'
        <span title="EtaExpansion.this.global.Tree" class="keyword">case</span> Block(<a title="List[EtaExpansion.this.global.Tree]" id="95771">stats</a>, <a title="EtaExpansion.this.global.Tree" id="95772">fun</a>) =&gt;
          <a href="#95514" title="(iter: Traversable[EtaExpansion.this.global.Tree])defs.type" id="39507">defs</a> ++= <a href="#95771" title="List[EtaExpansion.this.global.Tree]">stats</a>
          <a href="#95515" title="(tree: EtaExpansion.this.global.Tree)EtaExpansion.this.global.Tree">liftoutPrefix</a>(<a href="#95772" title="EtaExpansion.this.global.Tree">fun</a>)
        <span title="EtaExpansion.this.global.Apply" class="keyword">case</span> Apply(<a title="EtaExpansion.this.global.Tree" id="95801">fn</a>, <a title="List[EtaExpansion.this.global.Tree]" id="95802">args</a>) =&gt;
          <a href="../ast/Trees.scala.html#26584" title="=&gt; EtaExpansion.this.global.LazyTreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#48618" title="(tree: EtaExpansion.this.global.Tree,fun: EtaExpansion.this.global.Tree,args: List[EtaExpansion.this.global.Tree])EtaExpansion.this.global.Apply">Apply</a><a href="../ast/Trees.scala.html#29366" title="(tp: EtaExpansion.this.global.Type)EtaExpansion.this.global.Apply">(</a><a href="#95585" title="EtaExpansion.this.global.Tree">tree</a>, <a href="#95515" title="(tree: EtaExpansion.this.global.Tree)EtaExpansion.this.global.Tree">liftoutPrefix</a>(<a href="#95801" title="EtaExpansion.this.global.Tree">fn</a>), <a href="#95802" title="(f: (EtaExpansion.this.global.Tree) =&gt; EtaExpansion.this.global.Tree)List[EtaExpansion.this.global.Tree]" id="24270">args</a> mapConserve (<a href="#95586" title="(tree: EtaExpansion.this.global.Tree)EtaExpansion.this.global.Tree">liftout</a>)) setType <span title="Null(null)" class="keyword">null</span>
        <span title="EtaExpansion.this.global.TypeApply" class="keyword">case</span> TypeApply(<a title="EtaExpansion.this.global.Tree" id="95837">fn</a>, <a title="List[EtaExpansion.this.global.Tree]" id="95838">args</a>) =&gt;
          <a href="../ast/Trees.scala.html#26584" title="=&gt; EtaExpansion.this.global.LazyTreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#48617" title="(tree: EtaExpansion.this.global.Tree,fun: EtaExpansion.this.global.Tree,args: List[EtaExpansion.this.global.Tree])EtaExpansion.this.global.TypeApply">TypeApply</a><a href="../ast/Trees.scala.html#29366" title="(tp: EtaExpansion.this.global.Type)EtaExpansion.this.global.TypeApply">(</a><a href="#95585" title="EtaExpansion.this.global.Tree">tree</a>, <a href="#95515" title="(tree: EtaExpansion.this.global.Tree)EtaExpansion.this.global.Tree">liftoutPrefix</a>(<a href="#95837" title="EtaExpansion.this.global.Tree">fn</a>), <a href="#95838" title="List[EtaExpansion.this.global.Tree]">args</a>) setType <span title="Null(null)" class="keyword">null</span>
        <span title="EtaExpansion.this.global.Select" class="keyword">case</span> Select(<a title="EtaExpansion.this.global.Tree" id="95893">qual</a>, <a title="EtaExpansion.this.global.Name" id="95894">name</a>) =&gt;
          <a href="../ast/Trees.scala.html#26584" title="=&gt; EtaExpansion.this.global.LazyTreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#48622" title="(tree: EtaExpansion.this.global.Tree,qualifier: EtaExpansion.this.global.Tree,selector: EtaExpansion.this.global.Name)EtaExpansion.this.global.Select">Select</a><a href="../ast/Trees.scala.html#29369" title="(sym: EtaExpansion.this.global.Symbol)EtaExpansion.this.global.Select">(</a><a href="#95585" title="EtaExpansion.this.global.Tree">tree</a>, <a href="#95586" title="(tree: EtaExpansion.this.global.Tree)EtaExpansion.this.global.Tree">liftout</a>(<a href="#95893" title="EtaExpansion.this.global.Tree">qual</a>), <a href="#95894" title="EtaExpansion.this.global.Name">name</a>) <a href="../ast/Trees.scala.html#29366" title="(tp: EtaExpansion.this.global.Type)EtaExpansion.this.global.Select">setSymbol</a> <a href="../symtab/Symbols.scala.html#26134" title="object EtaExpansion.this.global.NoSymbol">NoSymbol</a> setType <span title="Null(null)" class="keyword">null</span>
        <span title="EtaExpansion.this.global.Tree" class="keyword">case</span> Ident(<a title="EtaExpansion.this.global.Name" id="95923">name</a>) =&gt;
          <a href="#95585" title="EtaExpansion.this.global.Tree">tree</a>
      }
      <span title="Any" class="keyword">if</span> (<a href="#95587" title="(x$1: AnyRef)Boolean" id="6544">tree1</a> ne <a href="#95585" title="EtaExpansion.this.global.Tree">tree</a>) <a href="../ast/Trees.scala.html#29365" title="(pos: scala.tools.nsc.util.Position)tree1.type">tree1</a> setPos <a href="#95587" title="EtaExpansion.this.global.Tree">tree1</a>.<a href="../ast/Trees.scala.html#29361" title="=&gt; scala.tools.nsc.util.Position">pos</a>.<a href="../util/Position.scala.html#30283" title="=&gt; scala.tools.nsc.util.Position">makeTransparent</a>
      <a href="#95587" title="EtaExpansion.this.global.Tree">tree1</a> 
    }

    /** Eta-expand lifted tree.
     *
     *  @param tree ...
     *  @param tpe  ...
     *  @return     ...
     */
    <span class="keyword">def</span> <a title="(tree: EtaExpansion.this.global.Tree,tpe: EtaExpansion.this.global.Type)EtaExpansion.this.global.Tree" id="95516">expand</a>(<a title="EtaExpansion.this.global.Tree" id="95936">tree</a>: <a href="../ast/Trees.scala.html#26593" title="EtaExpansion.this.global.Tree">Tree</a>, <a title="EtaExpansion.this.global.Type" id="95937">tpe</a>: <a href="../symtab/Types.scala.html#26205" title="EtaExpansion.this.global.Type">Type</a>): <a href="../ast/Trees.scala.html#26593" title="EtaExpansion.this.global.Tree">Tree</a> = <a href="#95937" title="EtaExpansion.this.global.Type">tpe</a> <span title="EtaExpansion.this.global.Tree" class="keyword">match</span> {
      <span title="EtaExpansion.this.global.Tree" class="keyword">case</span> <a title="EtaExpansion.this.global.ImplicitMethodType" id="95938">mt</a>: <a href="../symtab/Types.scala.html#26260" title="EtaExpansion.this.global.ImplicitMethodType">ImplicitMethodType</a> =&gt;
        <a href="#95936" title="EtaExpansion.this.global.Tree">tree</a>
      <span title="EtaExpansion.this.global.Function" class="keyword">case</span> MethodType(<a title="List[EtaExpansion.this.global.Symbol]" id="95946">paramSyms</a>, <a title="EtaExpansion.this.global.Type" id="95947">restpe</a>) =&gt;
        <span class="keyword">val</span> <a title="List[EtaExpansion.this.global.ValDef]" id="95950">params</a> = <a href="#95946" title="(f: (EtaExpansion.this.global.Symbol) =&gt; EtaExpansion.this.global.ValDef)(implicit bf: scala.collection.generic.BuilderFactory[EtaExpansion.this.global.ValDef,List[EtaExpansion.this.global.ValDef],List[EtaExpansion.this.global.Symbol]])List[EtaExpansion.this.global.ValDef]">paramSyms</a> <span title="scala.collection.generic.BuilderFactory[EtaExpansion.this.global.ValDef,List[EtaExpansion.this.global.ValDef],List#Coll]">map</span> (<a title="EtaExpansion.this.global.Symbol" id="95959">sym</a> =&gt;
          <a href="../ast/Trees.scala.html#73233" title="(mods: EtaExpansion.this.global.Modifiers,name: EtaExpansion.this.global.Name,tpt: EtaExpansion.this.global.Tree,rhs: EtaExpansion.this.global.Tree)EtaExpansion.this.global.ValDef">ValDef</a>(<a href="../ast/Trees.scala.html#26590" title="(flags: Long)EtaExpansion.this.global.Modifiers">Modifiers</a>(SYNTHETIC <span title="Long(2105344L)">|</span> PARAM), 
                 <a href="#95959" title="EtaExpansion.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#26988" title="=&gt; EtaExpansion.this.global.Name">name</a>, <a href="../ast/Trees.scala.html#26744" title="(tp: EtaExpansion.this.global.Type)EtaExpansion.this.global.TypeTree">TypeTree</a>(<a href="#95959" title="EtaExpansion.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27003" title="=&gt; EtaExpansion.this.global.Type">tpe</a>) , <a href="../ast/Trees.scala.html#26602" title="object EtaExpansion.this.global.EmptyTree">EmptyTree</a>))
        <a href="../ast/Trees.scala.html#26784" title="(pos: scala.tools.nsc.util.Position)(tree: EtaExpansion.this.global.Function)EtaExpansion.this.global.Function">atPos</a>(<a href="#95936" title="EtaExpansion.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29361" title="=&gt; scala.tools.nsc.util.Position">pos</a>.<a href="../util/Position.scala.html#30283" title="=&gt; scala.tools.nsc.util.Position">makeTransparent</a>) {
          <a href="../ast/Trees.scala.html#95410" title="(vparams: List[EtaExpansion.this.global.ValDef],body: EtaExpansion.this.global.Tree)EtaExpansion.this.global.Function">Function</a>(<a href="#95950" title="List[EtaExpansion.this.global.ValDef]">params</a>, <a href="#95516" title="(tree: EtaExpansion.this.global.Tree,tpe: EtaExpansion.this.global.Type)EtaExpansion.this.global.Tree">expand</a>(<a href="../ast/Trees.scala.html#49125" title="(fun: EtaExpansion.this.global.Tree,args: List[EtaExpansion.this.global.Tree])EtaExpansion.this.global.Apply">Apply</a>(<a href="#95936" title="EtaExpansion.this.global.Tree">tree</a>, <a href="#95950" title="(f: (EtaExpansion.this.global.ValDef) =&gt; EtaExpansion.this.global.gen.global.Tree)(implicit bf: scala.collection.generic.BuilderFactory[EtaExpansion.this.global.gen.global.Tree,List[EtaExpansion.this.global.Tree],List[EtaExpansion.this.global.ValDef]])List[EtaExpansion.this.global.Tree]">params</a> <span title="scala.collection.generic.BuilderFactory[EtaExpansion.this.global.gen.global.Tree,List[EtaExpansion.this.global.gen.global.Tree],List#Coll]">map</span> <a href="../Global.scala.html#39031" title="object EtaExpansion.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#42704" title="(vparam: EtaExpansion.this.global.gen.global.ValDef)EtaExpansion.this.global.gen.global.Tree">paramToArg</a>), <a href="#95947" title="EtaExpansion.this.global.Type">restpe</a>))
        }
      <span title="EtaExpansion.this.global.Tree" class="keyword">case</span> _ =&gt;
        <a href="#95936" title="EtaExpansion.this.global.Tree">tree</a>
    }

    <span class="keyword">val</span> <a title="EtaExpansion.this.global.Tree" id="95517">tree1</a> = <a href="#95515" title="(tree: EtaExpansion.this.global.Tree)EtaExpansion.this.global.Tree">liftoutPrefix</a>(<a href="#95508" title="EtaExpansion.this.global.Tree">tree</a>)
    <a href="../ast/Trees.scala.html#26784" title="(pos: scala.tools.nsc.util.Position)(tree: EtaExpansion.this.global.Block)EtaExpansion.this.global.Block">atPos</a>(<a href="#95508" title="EtaExpansion.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29361" title="=&gt; scala.tools.nsc.util.Position">pos</a>)(<a href="../ast/Trees.scala.html#49026" title="(stats: List[EtaExpansion.this.global.Tree],expr: EtaExpansion.this.global.Tree)EtaExpansion.this.global.Block">Block</a>(<a href="#95514" title="scala.collection.mutable.ListBuffer[EtaExpansion.this.global.Tree]">defs</a>.<a title="=&gt; List[EtaExpansion.this.global.Tree]" id="61592">toList</a>, <a href="#95516" title="(tree: EtaExpansion.this.global.Tree,tpe: EtaExpansion.this.global.Type)EtaExpansion.this.global.Tree">expand</a>(<a href="#95517" title="EtaExpansion.this.global.Tree">tree1</a>, <a href="#95510" title="EtaExpansion.this.global.Type">tpe</a>)))
  }
}

        </pre>
    </body>
</html>