<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/reporters/Reporter.scala</title>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style">
    </head>
    <body onload="initializeLinked()">
        <pre>
<span class="comment">/* NSC -- new Scala compiler
 * Copyright 2002-2009 LAMP/EPFL
 * @author Martin Odersky
 */</span>
<span class="comment">// $Id: Reporter.scala 17274 2009-03-10 11:39:04Z michelou $</span>

<span class="keyword">package</span> scala.tools.nsc.reporters

<span class="keyword">import</span> scala.tools.nsc.util._

<span class="comment">/**
 * This interface provides methods to issue information, warning and
 * error messages.
 */</span>
<span class="keyword">abstract</span> <span class="keyword">class</span> <span class="typed"><span class="type">class Reporter extends java.lang.Object with ScalaObject</span><a id="15905">Reporter</a></span> {
  <span class="keyword">object</span> <span class="typed"><span class="type">object Reporter.this.severity</span><a id="34447">severity</a></span> <span class="keyword">extends</span> <span class="typed"><span class="type">Enumeration</span><span id="1162"><a id="20339">Enumeration</a></span></span>
  <span class="keyword">class</span> <span class="typed"><span class="type">class Severity extends Reporter.this.severity.Value with ScalaObject</span><a id="34449">Severity</a></span>(<span class="typed"><span class="type">Int</span><span id="47091"><a id="47097">_id</a></span></span>: <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span>) <span class="keyword">extends</span> <span class="typed"><span class="type">object Reporter.this.severity</span><a href="#34447">severity</a></span>.<span class="typed"><span class="type">Reporter.this.severity.Value</span><a id="20343">Value</a></span> {
    <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><span id="47095"><span id="47093"><span id="47094"><a id="75007">count</a></span></span></span></span>: <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span> = <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>
    <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Int</span><a id="47096">id</a></span> = <span class="typed"><span class="type">Int</span><a href="#47091">_id</a></span>
  }
  <span class="keyword">val</span> <span class="typed"><span class="type">Reporter.this.Severity</span><span id="34451"><a id="34450">INFO</a></span></span> = <span class="typed"><span class="type">Reporter.this.Severity</span><span class="keyword">new</span></span> <span class="typed"><span class="type">Reporter.this.Severity</span><a href="#34449">Severity</a></span>(<span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>)
  <span class="keyword">val</span> <span class="typed"><span class="type">Reporter.this.Severity</span><span id="34453"><a id="34452">WARNING</a></span></span> = <span class="typed"><span class="type">Reporter.this.Severity</span><span class="keyword">new</span></span> <span class="typed"><span class="type">Reporter.this.Severity</span><a href="#34449">Severity</a></span>(<span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>)
  <span class="keyword">val</span> <span class="typed"><span class="type">Reporter.this.Severity</span><span id="34455"><a id="34454">ERROR</a></span></span> = <span class="typed"><span class="type">Reporter.this.Severity</span><span class="keyword">new</span></span> <span class="typed"><span class="type">Reporter.this.Severity</span><a href="#34449">Severity</a></span>(<span class="typed"><span class="type">Int(2)</span><span class="int">2</span></span>)

  <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Unit</span><a id="34456">reset</a></span> {
    <span class="typed"><span class="type">=&gt; Reporter.this.Severity</span><a href="#34450">INFO</a></span>.<span class="typed"><span class="type">(Int)Unit</span><a href="#47094">count</a></span> = <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>
    <span class="typed"><span class="type">=&gt; Reporter.this.Severity</span><a href="#34454">ERROR</a></span>.<span class="typed"><span class="type">(Int)Unit</span><a href="#47094">count</a></span>   = <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>
    <span class="typed"><span class="type">=&gt; Reporter.this.Severity</span><a href="#34452">WARNING</a></span>.<span class="typed"><span class="type">(Int)Unit</span><a href="#47094">count</a></span> = <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>
    <span class="typed"><span class="type">(Boolean)Unit</span><a href="#34458">cancelled</a></span> = <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>
  }

  <span class="keyword">var</span> <span class="typed"><span class="type">Boolean</span><span id="34459"><span id="34457"><span id="34458"><a id="74995">cancelled</a></span></span></span></span>: <span class="typed"><span class="type">Boolean</span><a id="2170">Boolean</a></span> = <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>
  <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Boolean</span><a id="34460">hasErrors</a></span>: <span class="typed"><span class="type">Boolean</span><a id="2170">Boolean</a></span> = <span class="typed"><span class="type">=&gt; Reporter.this.Severity</span><a href="#34454">ERROR</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a href="#47093">count</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3142">!=</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2750">||</a></span> <span class="typed"><span class="type">=&gt; Boolean</span><a href="#34457">cancelled</a></span>

  <span class="comment">/** Flush all output */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">()Unit</span><a id="34461">flush</a></span>() <span class="typed"><span class="type">Unit</span><span >{</span></span> }

  <span class="keyword">protected</span> <span class="keyword">def</span> <span class="typed"><span class="type">(scala.tools.nsc.util.Position,String,Reporter.this.Severity,Boolean)Unit</span><a id="34462">info0</a></span>(<span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a id="75012">pos</a></span>: <span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a href="../util/Position.scala.html#8480">Position</a></span>, <span class="typed"><span class="type">String</span><a id="75013">msg</a></span>: <span class="typed"><span class="type">String</span><a id="1861">String</a></span>, <span class="typed"><span class="type">Reporter.this.Severity</span><a id="75014">severity</a></span>: <span class="typed"><span class="type">Reporter.this.Severity</span><a href="#34449">Severity</a></span>, <span class="typed"><span class="type">Boolean</span><a id="75015">force</a></span>: <span class="typed"><span class="type">Boolean</span><a id="2170">Boolean</a></span>): <span class="typed"><span class="type">Unit</span><a id="2169">Unit</a></span>

  <span class="keyword">private</span> <span class="keyword">var</span> <span class="typed"><span class="type">scala.tools.nsc.util.SourceFile</span><span id="34465"><span id="34463"><span id="34464"><a id="74996">source</a></span></span></span></span>: <span class="typed"><span class="type">scala.tools.nsc.util.SourceFile</span><a href="../util/SourceFile.scala.html#8483">SourceFile</a></span> = _
  <span class="keyword">def</span> <span class="typed"><span class="type">(scala.tools.nsc.util.SourceFile)Unit</span><a id="34466">setSource</a></span>(<span class="typed"><span class="type">scala.tools.nsc.util.SourceFile</span><a id="75016">source</a></span>: <span class="typed"><span class="type">scala.tools.nsc.util.SourceFile</span><a href="../util/SourceFile.scala.html#8483">SourceFile</a></span>) { <span class="typed"><span class="type">Reporter.this.type</span><a href="#15905" class="keyword">this</a></span>.<span class="typed"><span class="type">(scala.tools.nsc.util.SourceFile)Unit</span><a href="#34464">source</a></span> = <span class="typed"><span class="type">scala.tools.nsc.util.SourceFile</span><a href="#75016">source</a></span> }
  <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; scala.tools.nsc.util.SourceFile</span><a id="34467">getSource</a></span>: <span class="typed"><span class="type">scala.tools.nsc.util.SourceFile</span><a href="../util/SourceFile.scala.html#8483">SourceFile</a></span> = <span class="typed"><span class="type">=&gt; scala.tools.nsc.util.SourceFile</span><a href="#34463">source</a></span>

  <span class="keyword">def</span>    <span class="typed"><span class="type">(scala.tools.nsc.util.Position,String,Boolean)Unit</span><a id="34468">info</a></span>(<span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a id="53220">pos</a></span>: <span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a href="../util/Position.scala.html#8480">Position</a></span>, <span class="typed"><span class="type">String</span><a id="53221">msg</a></span>: <span class="typed"><span class="type">String</span><a id="1861">String</a></span>, <span class="typed"><span class="type">Boolean</span><a id="53222">force</a></span>: <span class="typed"><span class="type">Boolean</span><a id="2170">Boolean</a></span>) { <span class="typed"><span class="type">(scala.tools.nsc.util.Position,String,Reporter.this.Severity,Boolean)Unit</span><a href="#34462">info0</a></span>(<span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a href="#53220">pos</a></span>, <span class="typed"><span class="type">String</span><a href="#53221">msg</a></span>,    <span class="typed"><span class="type">=&gt; Reporter.this.Severity</span><a href="#34450">INFO</a></span>, <span class="typed"><span class="type">Boolean</span><a href="#53222">force</a></span>) }
  <span class="keyword">def</span> <span class="typed"><span class="type">(scala.tools.nsc.util.Position,String)Unit</span><a id="34469">warning</a></span>(<span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a id="59465">pos</a></span>: <span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a href="../util/Position.scala.html#8480">Position</a></span>, <span class="typed"><span class="type">String</span><a id="59466">msg</a></span>: <span class="typed"><span class="type">String</span><a id="1861">String</a></span>                ) { <span class="typed"><span class="type">(scala.tools.nsc.util.Position,String,Reporter.this.Severity,Boolean)Unit</span><a href="#34462">info0</a></span>(<span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a href="#59465">pos</a></span>, <span class="typed"><span class="type">String</span><a href="#59466">msg</a></span>, <span class="typed"><span class="type">=&gt; Reporter.this.Severity</span><a href="#34452">WARNING</a></span>, <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>) }
  <span class="keyword">def</span>   <span class="typed"><span class="type">(scala.tools.nsc.util.Position,String)Unit</span><a id="34470">error</a></span>(<span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a id="34479">pos</a></span>: <span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a href="../util/Position.scala.html#8480">Position</a></span>, <span class="typed"><span class="type">String</span><a id="34480">msg</a></span>: <span class="typed"><span class="type">String</span><a id="1861">String</a></span>                ) { <span class="typed"><span class="type">(scala.tools.nsc.util.Position,String,Reporter.this.Severity,Boolean)Unit</span><a href="#34462">info0</a></span>(<span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a href="#34479">pos</a></span>, <span class="typed"><span class="type">String</span><a href="#34480">msg</a></span>,   <span class="typed"><span class="type">=&gt; Reporter.this.Severity</span><a href="#34454">ERROR</a></span>, <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>) }

  <span class="comment">/** An error that could possibly be fixed if the unit were longer.
   *  This is used only when the interpreter tries
   *  to distinguish fatal errors from those that are due to
   *  needing more lines of input from the user.
   *
   * Should be re-factored into a subclass.
   */</span>
  <span class="keyword">var</span> <span class="typed"><span class="type">(scala.tools.nsc.util.Position, String) =&gt; Unit</span><span id="34473"><span id="34471"><span id="34472"><a id="74997">incompleteInputError</a></span></span></span></span>: (Position, String) =&gt; Unit = <span class="typed"><span class="type">(scala.tools.nsc.util.Position,String)Unit</span><a href="#34470">error</a></span>
  
  <span class="keyword">def</span> <span class="typed"><span class="type">[T]((scala.tools.nsc.util.Position, String) =&gt; Unit)(=&gt; T)T</span><a id="34474">withIncompleteHandler</a></span>[<span class="typed"><span class="type">&gt;: Nothing &lt;: Any</span><a id="34476">T</a></span>](<span class="typed"><span class="type">(scala.tools.nsc.util.Position, String) =&gt; Unit</span><a id="75021">handler</a></span>: (Position, String) =&gt; Unit)(<span class="typed"><span class="type">=&gt; T</span><a id="75022">thunk</a></span>: =&gt; T) = {
    <span class="keyword">val</span> <span class="typed"><span class="type">(scala.tools.nsc.util.Position, String) =&gt; Unit</span><a id="75024">savedHandler</a></span> = <span class="typed"><span class="type">=&gt; (scala.tools.nsc.util.Position, String) =&gt; Unit</span><a href="#34471">incompleteInputError</a></span>
    <span class="keyword">try</span> {
      <span class="typed"><span class="type">((scala.tools.nsc.util.Position, String) =&gt; Unit)Unit</span><a href="#34472">incompleteInputError</a></span> = <span class="typed"><span class="type">(scala.tools.nsc.util.Position, String) =&gt; Unit</span><a href="#75021">handler</a></span>
      <span class="typed"><span class="type">=&gt; T</span><a href="#75022">thunk</a></span>
    } <span class="keyword">finally</span> {
      <span class="typed"><span class="type">((scala.tools.nsc.util.Position, String) =&gt; Unit)Unit</span><a href="#34472">incompleteInputError</a></span> = <span class="typed"><span class="type">(scala.tools.nsc.util.Position, String) =&gt; Unit</span><a href="#75024">savedHandler</a></span>
    }
  }
  
  <span class="comment">// @M: moved here from ConsoleReporter and made public -- also useful in e.g. Typers</span>
  <span class="comment">/** Returns a string meaning &quot;n elements&quot;.
   *
   *  @param n        ...
   *  @param elements ...
   *  @return         ...
   */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">(Int,String)String</span><a id="34477">countElementsAsString</a></span>(<span class="typed"><span class="type">Int</span><a id="60052">n</a></span>: <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span>, <span class="typed"><span class="type">String</span><a id="60053">elements</a></span>: <span class="typed"><span class="type">String</span><a id="1861">String</a></span>): <span class="typed"><span class="type">String</span><a id="1861">String</a></span> =
    <span class="typed"><span class="type">Int</span><a href="#60052">n</a></span> <span class="typed"><span class="type">String</span><span class="keyword">match</span></span> {
      <span class="typed"><span class="type">java.lang.String</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span> =&gt; <span class="typed"><span class="type">java.lang.String(&quot;no &quot;)</span><span class="string">&quot;no &quot;</span></span>    <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">String</span><a href="#60053">elements</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;s&quot;)</span><span class="string">&quot;s&quot;</span></span>
      <span class="typed"><span class="type">java.lang.String</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span> =&gt; <span class="typed"><span class="type">java.lang.String(&quot;one &quot;)</span><span class="string">&quot;one &quot;</span></span>   <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">String</span><a href="#60053">elements</a></span>
      <span class="typed"><span class="type">java.lang.String</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Int(2)</span><span class="int">2</span></span> =&gt; <span class="typed"><span class="type">java.lang.String(&quot;two &quot;)</span><span class="string">&quot;two &quot;</span></span>   <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">String</span><a href="#60053">elements</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;s&quot;)</span><span class="string">&quot;s&quot;</span></span>
      <span class="typed"><span class="type">java.lang.String</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Int(3)</span><span class="int">3</span></span> =&gt; <span class="typed"><span class="type">java.lang.String(&quot;three &quot;)</span><span class="string">&quot;three &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">String</span><a href="#60053">elements</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;s&quot;)</span><span class="string">&quot;s&quot;</span></span>
      <span class="typed"><span class="type">java.lang.String</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Int(4)</span><span class="int">4</span></span> =&gt; <span class="typed"><span class="type">java.lang.String(&quot;four &quot;)</span><span class="string">&quot;four &quot;</span></span>  <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">String</span><a href="#60053">elements</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;s&quot;)</span><span class="string">&quot;s&quot;</span></span>
      <span class="typed"><span class="type">java.lang.String</span><span class="keyword">case</span></span> _ =&gt; <span class="typed"><span class="type">java.lang.String(&quot;&quot;)</span><span class="string">&quot;&quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">Int</span><a href="#60052">n</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot; &quot;)</span><span class="string">&quot; &quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">String</span><a href="#60053">elements</a></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;s&quot;)</span><span class="string">&quot;s&quot;</span></span>
    }
    
  <span class="comment">/** Turns a count into a friendly English description if n&lt;=4. 
   *
   *  @param n        ...
   *  @return         ...
   */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">(Int)String</span><a id="34478">countAsString</a></span>(<span class="typed"><span class="type">Int</span><a id="75025">n</a></span>: <span class="typed"><span class="type">Int</span><a id="2394">Int</a></span>): <span class="typed"><span class="type">String</span><a id="1861">String</a></span> =
    <span class="typed"><span class="type">Int</span><a href="#75025">n</a></span> <span class="typed"><span class="type">String</span><span class="keyword">match</span></span> {
      <span class="typed"><span class="type">java.lang.String(&quot;none&quot;)</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span> =&gt; <span class="typed"><span class="type">java.lang.String(&quot;none&quot;)</span><span class="string">&quot;none&quot;</span></span>
      <span class="typed"><span class="type">java.lang.String(&quot;one&quot;)</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span> =&gt; <span class="typed"><span class="type">java.lang.String(&quot;one&quot;)</span><span class="string">&quot;one&quot;</span></span>
      <span class="typed"><span class="type">java.lang.String(&quot;two&quot;)</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Int(2)</span><span class="int">2</span></span> =&gt; <span class="typed"><span class="type">java.lang.String(&quot;two&quot;)</span><span class="string">&quot;two&quot;</span></span>
      <span class="typed"><span class="type">java.lang.String(&quot;three&quot;)</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Int(3)</span><span class="int">3</span></span> =&gt; <span class="typed"><span class="type">java.lang.String(&quot;three&quot;)</span><span class="string">&quot;three&quot;</span></span>
      <span class="typed"><span class="type">java.lang.String(&quot;four&quot;)</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Int(4)</span><span class="int">4</span></span> =&gt; <span class="typed"><span class="type">java.lang.String(&quot;four&quot;)</span><span class="string">&quot;four&quot;</span></span>
      <span class="typed"><span class="type">java.lang.String</span><span class="keyword">case</span></span> _ =&gt; <span class="typed"><span class="type">java.lang.String(&quot;&quot;)</span><span class="string">&quot;&quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span> <span class="typed"><span class="type">Int</span><a href="#75025">n</a></span> 
    }    
}

        </pre>
    </body>
</html>