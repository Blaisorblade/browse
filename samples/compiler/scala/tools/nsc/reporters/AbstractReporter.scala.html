<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/reporters/AbstractReporter.scala</title>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style">
    </head>
    <body onload="initializeLinked()">
        <pre>
<span class="comment">/* NSC -- new Scala compiler
 * Copyright 2002-2009 LAMP/EPFL
 * @author Martin Odersky
 */</span>
<span class="comment">// $Id: AbstractReporter.scala 17274 2009-03-10 11:39:04Z michelou $</span>

<span class="keyword">package</span> scala.tools.nsc.reporters

<span class="keyword">import</span> scala.collection.mutable.HashMap
<span class="keyword">import</span> scala.tools.nsc.Settings
<span class="keyword">import</span> scala.tools.nsc.util.Position

<span class="comment">/**
 * This reporter implements filtering.
 */</span>
<span class="keyword">abstract</span> <span class="keyword">class</span> <span class="typed"><span class="type">class AbstractReporter extends scala.tools.nsc.reporters.Reporter with ScalaObject</span><a id="15908">AbstractReporter</a></span> <span class="keyword">extends</span> <span class="typed"><span class="type">scala.tools.nsc.reporters.Reporter</span><a href="Reporter.scala.html#15905">Reporter</a></span> {
  <span class="keyword">private</span> <span class="keyword">val</span> <span class="typed"><span class="type">scala.collection.mutable.HashMap[scala.tools.nsc.util.Position,AbstractReporter.this.Severity]</span><span id="46736"><a id="46735">positions</a></span></span> = <span class="typed"><span class="type">scala.collection.mutable.HashMap[scala.tools.nsc.util.Position,AbstractReporter.this.Severity]</span><span class="keyword">new</span></span> <span class="typed"><span class="type">scala.collection.mutable.HashMap[scala.tools.nsc.util.Position,AbstractReporter.this.Severity]</span><a id="20081">HashMap</a></span>[Position, Severity]
  
  <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Unit</span><a id="46737">reset</a></span> {
    <span class="keyword">super</span>.<span class="typed"><span class="type">=&gt; Unit</span><a href="Reporter.scala.html#34456">reset</a></span>
    <span class="typed"><span class="type">=&gt; scala.collection.mutable.HashMap[scala.tools.nsc.util.Position,AbstractReporter.this.Severity]</span><a href="#46735">positions</a></span>.<span class="typed"><span class="type">()Unit</span><a id="24168">clear</a></span>
  }

  <span class="keyword">val</span> <span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a id="46738">settings</a></span>: <span class="typed"><span class="type">scala.tools.nsc.Settings</span><a href="../Settings.scala.html#6744">Settings</a></span>

  <span class="keyword">def</span> <span class="typed"><span class="type">(scala.tools.nsc.util.Position,String,AbstractReporter.this.Severity)Unit</span><a id="46739">display</a></span>(<span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a id="53079">pos</a></span>: <span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a href="../util/Position.scala.html#8480">Position</a></span>, <span class="typed"><span class="type">String</span><a id="53080">msg</a></span>: <span class="typed"><span class="type">String</span><a id="1861">String</a></span>, <span class="typed"><span class="type">AbstractReporter.this.Severity</span><a id="53081">severity</a></span>: <span class="typed"><span class="type">AbstractReporter.this.Severity</span><a href="Reporter.scala.html#34449">Severity</a></span>): <span class="typed"><span class="type">Unit</span><a id="2169">Unit</a></span>
  <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Unit</span><a id="46740">displayPrompt</a></span>: <span class="typed"><span class="type">Unit</span><a id="2169">Unit</a></span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <span class="typed"><span class="type">(scala.tools.nsc.util.Position,String,AbstractReporter.this.Severity,Boolean)Unit</span><a id="46741">info0</a></span>(<span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a id="53083">pos</a></span>: <span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a href="../util/Position.scala.html#8480">Position</a></span>, <span class="typed"><span class="type">String</span><a id="53084">msg</a></span>: <span class="typed"><span class="type">String</span><a id="1861">String</a></span>, <span class="typed"><span class="type">AbstractReporter.this.Severity</span><a id="53085">severity</a></span>: <span class="typed"><span class="type">AbstractReporter.this.Severity</span><a href="Reporter.scala.html#34449">Severity</a></span>, <span class="typed"><span class="type">Boolean</span><a id="53086">force</a></span>: <span class="typed"><span class="type">Boolean</span><a id="2170">Boolean</a></span>) {
    <span class="typed"><span class="type">AbstractReporter.this.Severity</span><a href="#53085">severity</a></span> <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
      <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">=&gt; AbstractReporter.this.Severity</span><a href="Reporter.scala.html#34450">INFO</a></span> =&gt;
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Boolean</span><a href="#53086">force</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2750">||</a></span> <span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="#46738">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting</span><a href="../Settings.scala.html#29986">verbose</a></span>.<span class="typed"><span class="type">=&gt; AbstractReporter.this.settings.verbose.T</span><a href="../Settings.scala.html#30301">value</a></span>) <span class="typed"><span class="type">(scala.tools.nsc.util.Position,String,AbstractReporter.this.Severity)Unit</span><a href="#46739">display</a></span>(<span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a href="#53083">pos</a></span>, <span class="typed"><span class="type">String</span><a href="#53084">msg</a></span>, <span class="typed"><span class="type">AbstractReporter.this.Severity</span><a href="#53085">severity</a></span>)
      <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">=&gt; AbstractReporter.this.Severity</span><a href="Reporter.scala.html#34452">WARNING</a></span> =&gt;
        <span class="keyword">val</span> <span class="typed"><span class="type">Boolean</span><a id="53087">hidden</a></span> = <span class="typed"><span class="type">(scala.tools.nsc.util.Position,AbstractReporter.this.Severity)Boolean</span><a href="#46742">testAndLog</a></span>(<span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a href="#53083">pos</a></span>, <span class="typed"><span class="type">AbstractReporter.this.Severity</span><a href="#53085">severity</a></span>)
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="#46738">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting</span><a href="../Settings.scala.html#29972">nowarnings</a></span>.<span class="typed"><span class="type">=&gt; AbstractReporter.this.settings.nowarnings.T</span><a href="../Settings.scala.html#30301">value</a></span>) {
	  <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">Boolean</span><a href="#53087">hidden</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2750">||</a></span> <span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="#46738">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting</span><a href="../Settings.scala.html#30036">prompt</a></span>.<span class="typed"><span class="type">=&gt; AbstractReporter.this.settings.prompt.T</span><a href="../Settings.scala.html#30301">value</a></span>) <span class="typed"><span class="type">(scala.tools.nsc.util.Position,String,AbstractReporter.this.Severity)Unit</span><a href="#46739">display</a></span>(<span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a href="#53083">pos</a></span>, <span class="typed"><span class="type">String</span><a href="#53084">msg</a></span>, <span class="typed"><span class="type">AbstractReporter.this.Severity</span><a href="#53085">severity</a></span>)
	  <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="#46738">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting</span><a href="../Settings.scala.html#30036">prompt</a></span>.<span class="typed"><span class="type">=&gt; AbstractReporter.this.settings.prompt.T</span><a href="../Settings.scala.html#30301">value</a></span>) <span class="typed"><span class="type">=&gt; Unit</span><a href="#46740">displayPrompt</a></span>
        }
      <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">=&gt; AbstractReporter.this.Severity</span><a href="Reporter.scala.html#34454">ERROR</a></span> =&gt;
        <span class="keyword">val</span> <span class="typed"><span class="type">Boolean</span><a id="53090">hidden</a></span> = <span class="typed"><span class="type">(scala.tools.nsc.util.Position,AbstractReporter.this.Severity)Boolean</span><a href="#46742">testAndLog</a></span>(<span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a href="#53083">pos</a></span>, <span class="typed"><span class="type">AbstractReporter.this.Severity</span><a href="#53085">severity</a></span>)
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">Boolean</span><a href="#53090">hidden</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2750">||</a></span> <span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="#46738">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting</span><a href="../Settings.scala.html#30036">prompt</a></span>.<span class="typed"><span class="type">=&gt; AbstractReporter.this.settings.prompt.T</span><a href="../Settings.scala.html#30301">value</a></span>) <span class="typed"><span class="type">(scala.tools.nsc.util.Position,String,AbstractReporter.this.Severity)Unit</span><a href="#46739">display</a></span>(<span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a href="#53083">pos</a></span>, <span class="typed"><span class="type">String</span><a href="#53084">msg</a></span>, <span class="typed"><span class="type">AbstractReporter.this.Severity</span><a href="#53085">severity</a></span>)
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="#46738">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting</span><a href="../Settings.scala.html#30036">prompt</a></span>.<span class="typed"><span class="type">=&gt; AbstractReporter.this.settings.prompt.T</span><a href="../Settings.scala.html#30301">value</a></span>) <span class="typed"><span class="type">=&gt; Unit</span><a href="#46740">displayPrompt</a></span>
    }
  }

  <span class="comment">/** Logs a position and returns &lt;code&gt;true&lt;/code&gt; if it was already logged.
   *
   *  @param pos ...
   *  @return    &lt;code&gt;true&lt;/code&gt; if &lt;code&gt;pos&lt;/code&gt; was already logged.
   */</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(scala.tools.nsc.util.Position,AbstractReporter.this.Severity)Boolean</span><a id="46742">testAndLog</a></span>(<span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a id="53088">pos</a></span>: <span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a href="../util/Position.scala.html#8480">Position</a></span>, <span class="typed"><span class="type">AbstractReporter.this.Severity</span><a id="53089">severity</a></span>: <span class="typed"><span class="type">AbstractReporter.this.Severity</span><a href="Reporter.scala.html#34449">Severity</a></span>): <span class="typed"><span class="type">Boolean</span><a id="2170">Boolean</a></span> = {
    <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a href="#53088">pos</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5794">eq</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>) <span class="typed"><span class="type">Nothing</span><span class="keyword">return</span></span> <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>
    <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a href="#53088">pos</a></span>.<span class="typed"><span class="type">=&gt; Option[Int]</span><a href="../util/Position.scala.html#25341">offset</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a id="25406">isEmpty</a></span>) <span class="typed"><span class="type">Nothing</span><span class="keyword">return</span></span> <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>
    <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> ((<span class="typed"><span class="type">=&gt; scala.collection.mutable.HashMap[scala.tools.nsc.util.Position,AbstractReporter.this.Severity]</span><a href="#46735">positions</a></span> <span class="typed"><span class="type">(scala.tools.nsc.util.Position)Boolean</span><a id="24240">contains</a></span> <span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a href="#53088">pos</a></span>) <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">(scala.tools.nsc.util.Position)AbstractReporter.this.Severity</span><a href="#46735" id="24239">positions</a></span>(<span class="typed"><span class="type">scala.tools.nsc.util.Position</span><a href="#53088">pos</a></span>) <span class="typed"><span class="type">(AbstractReporter.this.severity.Value)Boolean</span><a id="23141">&gt;=</a></span> <span class="typed"><span class="type">AbstractReporter.this.Severity</span><a href="#53089">severity</a></span>) <span class="typed"><span class="type">Nothing</span><span class="keyword">return</span></span> <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>
    <span class="typed"><span class="type">=&gt; scala.collection.mutable.HashMap[scala.tools.nsc.util.Position,AbstractReporter.this.Severity]</span><a href="#46735">positions</a></span> <span class="typed"><span class="type">((scala.tools.nsc.util.Position, AbstractReporter.this.Severity))Unit</span><a id="24189">+=</a></span> (<span class="typed"><span class="type">(scala.tools.nsc.util.Position)ArrowAssoc[scala.tools.nsc.util.Position]</span><span id="6054"><a href="#53088" id="821">pos</a></span></span> <span class="typed"><span class="type">(AbstractReporter.this.Severity)(scala.tools.nsc.util.Position, AbstractReporter.this.Severity)</span><a id="6050">-&gt;</a></span> <span class="typed"><span class="type">AbstractReporter.this.Severity</span><a href="#53089">severity</a></span>)
    <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>
  }

}

        </pre>
    </body>
</html>