<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/matching/ParallelMatching.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style">
    </head>
    <body>
        <pre>
/* NSC -- new Scala compiler
 * Copyright 2005-2009 LAMP/EPFL
 * Copyright 2007 Google Inc. All Rights Reserved.
 * Author: bqe@google.com (Burak Emir)
 */
// $Id: ParallelMatching.scala 18588 2009-08-27 13:21:36Z extempore $

<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> matching

<span class="keyword">import</span> util.Position
<span class="keyword">import</span> collection._
<span class="keyword">import</span> mutable.BitSet
<span class="keyword">import</span> immutable.IntMap
<span class="keyword">import</span> MatchUtil._

/** Translation of match expressions.
 *
 *  `p':  pattern
 *  `g':  guard
 *  `bx': body index
 *
 *   internal representation is (tvars:List[Symbol], rows:List[Row])
 *
 *         tmp1      tmp_n
 *    Row( p_11  ...  p_1n   g_1  b_1 ) + subst
 *
 *    Row( p_m1  ...  p_mn   g_m  b_m ) + subst
 *
 * Implementation based on the algorithm described in
 *
 *   &quot;A Term Pattern-Match Compiler Inspired by Finite Automata Theory&quot;
 *   Mikael Pettersson
 *   ftp://ftp.ida.liu.se/pub/labs/pelab/papers/cc92pmc.ps.gz
 *
 *  @author Burak Emir
 */
<span class="keyword">trait</span> <a title="trait ParallelMatching extends java.lang.Object with scala.tools.nsc.ast.TreeDSL with ScalaObject" id="19458">ParallelMatching</a> <span title="ScalaObject" class="keyword">extends</span> ast.<a href="../ast/TreeDSL.scala.html#11964" title="scala.tools.nsc.ast.TreeDSL">TreeDSL</a> {
  self: transform.ExplicitOuter <span class="keyword">with</span> PatternNodes =&gt;
  
  // debugging var, set to true to see how sausages are made
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Boolean" id="79561">trace</a> = <span title="Boolean(false)" class="keyword">false</span>

  <span class="keyword">import</span> global.{ typer =&gt; _, _ }
  <span class="keyword">import</span> definitions.{ AnyRefClass, EqualsPatternClass, IntClass, getProductArgs, productProj }
  <span class="keyword">import</span> symtab.Flags
  <span class="keyword">import</span> Types._
  <span class="keyword">import</span> CODE._
  <span class="keyword">import</span> scala.Function.tupled
 
  <span class="keyword">object</span> <a title="object ParallelMatching.this.Implicits" id="79569">Implicits</a> <span title="ScalaObject">{</span>
    <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit scala.tools.nsc.matching.ParallelMatching.Implicits.mkPattern : (t: ParallelMatching.this.global.Tree)ParallelMatching.this.Pattern" id="81448">mkPattern</a>(<a title="ParallelMatching.this.global.Tree" id="536940">t</a>: <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a>) = <a href="#536944" title="(tree: ParallelMatching.this.global.Tree)ParallelMatching.this.Pattern">Pattern</a>(<a href="#536940" title="ParallelMatching.this.global.Tree">t</a>)    
  }
  <span class="keyword">import</span> Implicits._
  
  <span class="keyword">def</span> <a title="(body: =&gt; Unit)Unit" id="79572">ifDebug</a>(<a title="=&gt; Unit" id="536977">body</a>: =&gt; Unit): <span title="Unit">Unit</span>          = { <span title="Unit" class="keyword">if</span> (<a href="../Global.scala.html#39250" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../Settings.scala.html#37345" title="=&gt; scala.tools.nsc.Settings.BooleanSetting">debug</a>.<a href="../Settings.scala.html#37988" title="=&gt; Boolean">value</a>) <a href="#536977" title="=&gt; Unit">body</a> }
  <span class="keyword">def</span> <a title="(msg: =&gt; String)Unit" id="79573">DBG</a>(<a title="=&gt; String" id="536981">msg</a>: =&gt; String): <span title="Unit">Unit</span>             = { <a href="#79572" title="(body: =&gt; Unit)Unit">ifDebug</a>(<span title="(x: Any)Unit">println</span>(<a href="#536981" title="=&gt; String">msg</a>)) }
  
  <span class="keyword">def</span> <a title="(f: String,xs: Any*)Unit" id="79574">TRACE</a>(<a title="String" id="536989">f</a>: <span title="String">String</span>, <a title="Any*" id="536990">xs</a>: <a title="Any*" id="4199">Any</a>*): <span title="Unit">Unit</span>      = { <span title="Unit" class="keyword">if</span> (<a href="#79561" title="=&gt; Boolean">trace</a>) <span title="(x: Any)Unit">println</span>(<span title="Any" class="keyword">if</span> (<a href="#536990" title="Any*">xs</a>.<span title="=&gt; Boolean">isEmpty</span>) <a href="#536989" title="String">f</a> <span class="keyword">else</span> <a href="#536989" title="implicit scala.Predef.stringWrapper : (x: String)scala.runtime.RichString">f</a>.<span title="(args: Any*)String">format</span>(<a href="#536990" title="Any*">xs</a> : _*)) }
  <span class="keyword">def</span> <a title="[T](s: String,x: T)T" id="79575">logAndReturn</a>[<a title="&gt;: Nothing &lt;: Any" id="79577">T</a>](<a title="String" id="537033">s</a>: <span title="String">String</span>, <a title="T" id="537034">x</a>: <a href="#79577" title="T">T</a>): <a href="#79577" title="T">T</a>   = { <a href="../Global.scala.html#39300" title="(msg: AnyRef)Unit">log</a>(<a href="#537033" title="(x$1: Any)java.lang.String">s</a> + <a href="#537034" title="T">x</a>.<span title="()java.lang.String">toString</span>) ; <a href="#537034" title="T">x</a> }
  <span class="keyword">def</span> <a title="[T](s: String,x: T)T" id="79578">traceAndReturn</a>[<a title="&gt;: Nothing &lt;: Any" id="79580">T</a>](<a title="String" id="537044">s</a>: <span title="String">String</span>, <a title="T" id="537045">x</a>: <a href="#79580" title="T">T</a>): <a href="#79580" title="T">T</a> = { <a href="#79574" title="(f: String,xs: Any*)Unit">TRACE</a>(<a href="#537044" title="(x$1: Any)java.lang.String">s</a> + <a href="#537045" title="T">x</a>.<span title="()java.lang.String">toString</span>) ; <a href="#537045" title="T">x</a> }
  
  // Tests on misc
  <span class="keyword">def</span> <a title="(tag: Int)Boolean" id="79581">isSwitchableTag</a>(<a title="Int" id="537055">tag</a>: <span title="Int">Int</span>)   = <a href="../ast/TreeDSL.scala.html#42709" title="(x: Int)(f: PartialFunction[Int,Boolean])Boolean">cond</a>(<a href="#537055" title="Int">tag</a>)       <a href="#537068" title="Boolean">{</a> <span title="Boolean(true)" class="keyword">case</span> <span title="Int(3)">ByteTag</span> | <span title="Int(4)">ShortTag</span> | <span title="Int(6)">IntTag</span> | <span title="Int(5)">CharTag</span> =&gt; <span title="Boolean(true)" class="keyword">true</span> }
  <span class="keyword">def</span> <a title="(t: ParallelMatching.this.global.Tree)Boolean" id="79582">isSwitchableConst</a>(<a title="ParallelMatching.this.global.Tree" id="537071">t</a>: <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a>)  = <a href="../ast/TreeDSL.scala.html#42709" title="(x: ParallelMatching.this.global.Tree)(f: PartialFunction[ParallelMatching.this.global.Tree,Boolean])Boolean">cond</a>(<a href="../ast/TreeDSL.scala.html#42720" title="(x: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">unbind</a>(<a href="#537071" title="ParallelMatching.this.global.Tree">t</a>)) <a href="#537089" title="Boolean">{</a> <span title="Boolean" class="keyword">case</span> Literal(<a title="ParallelMatching.this.global.Constant" id="537093">x</a>: <a href="../symtab/Constants.scala.html#26672" title="ParallelMatching.this.global.Constant">Constant</a>) =&gt; <a href="#79581" title="(tag: Int)Boolean">isSwitchableTag</a>(<a href="#537093" title="ParallelMatching.this.global.Constant">x</a>.<a href="../symtab/Constants.scala.html#43041" title="=&gt; Int">tag</a>) }

  // Tests on Trees
  <span class="keyword">def</span> <a title="(t: ParallelMatching.this.global.Tree)Boolean" id="79583">isStar</a>(<a title="ParallelMatching.this.global.Tree" id="537100">t</a>: <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a>)             = <a href="../ast/TreeDSL.scala.html#42709" title="(x: ParallelMatching.this.global.Tree)(f: PartialFunction[ParallelMatching.this.global.Tree,Boolean])Boolean">cond</a>(<a href="../ast/TreeDSL.scala.html#42720" title="(x: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">unbind</a>(<a href="#537100" title="ParallelMatching.this.global.Tree">t</a>)) <a href="#537116" title="Boolean">{</a> <span title="Boolean" class="keyword">case</span> Star(<a title="ParallelMatching.this.global.Tree" id="537118">q</a>) =&gt; <a href="#79586" title="(t: ParallelMatching.this.global.Tree)Boolean">isDefaultPattern</a>(<a href="#537118" title="ParallelMatching.this.global.Tree">q</a>) }
  <span class="keyword">def</span> <a title="(t: ParallelMatching.this.global.Tree)Boolean" id="79584">isAlternative</a>(<a title="ParallelMatching.this.global.Tree" id="537172">t</a>: <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a>)      = <a href="../ast/TreeDSL.scala.html#42709" title="(x: ParallelMatching.this.global.Tree)(f: PartialFunction[ParallelMatching.this.global.Tree,Boolean])Boolean">cond</a>(<a href="../ast/TreeDSL.scala.html#42720" title="(x: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">unbind</a>(<a href="#537172" title="ParallelMatching.this.global.Tree">t</a>)) <a href="#537188" title="Boolean">{</a> <span title="Boolean(true)" class="keyword">case</span> Alternative(_) =&gt; <span title="Boolean(true)" class="keyword">true</span> }
  <span class="keyword">def</span> <a title="(t: ParallelMatching.this.global.Tree)Boolean" id="79585">isRightIgnoring</a>(<a title="ParallelMatching.this.global.Tree" id="537194">t</a>: <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a>)    = <a href="../ast/TreeDSL.scala.html#42709" title="(x: ParallelMatching.this.global.Tree)(f: PartialFunction[ParallelMatching.this.global.Tree,Boolean])Boolean">cond</a>(<a href="../ast/TreeDSL.scala.html#42720" title="(x: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">unbind</a>(<a href="#537194" title="ParallelMatching.this.global.Tree">t</a>)) <a href="#537210" title="Boolean">{</a> <span title="Boolean" class="keyword">case</span> ArrayValue(_, <a title="List[ParallelMatching.this.global.Tree]" id="537213">xs</a>) <span class="keyword">if</span> <span title="=&gt; Boolean">!</span><a href="#537213" title="List[ParallelMatching.this.global.Tree]">xs</a>.<span title="=&gt; Boolean">isEmpty</span> =&gt; <a href="#79583" title="(t: ParallelMatching.this.global.Tree)Boolean">isStar</a>(<a href="#537213" title="List[ParallelMatching.this.global.Tree]">xs</a>.<span title="=&gt; ParallelMatching.this.global.Tree">last</span>) }
  <span class="keyword">def</span> <a title="(t: ParallelMatching.this.global.Tree)Boolean" id="79586">isDefaultPattern</a>(<a title="ParallelMatching.this.global.Tree" id="537121">t</a>: <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a>)   = <a href="../ast/TreeDSL.scala.html#42709" title="(x: ParallelMatching.this.global.Tree)(f: PartialFunction[ParallelMatching.this.global.Tree,Boolean])Boolean">cond</a>(<a href="../ast/TreeDSL.scala.html#42720" title="(x: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">unbind</a>(<a href="#537121" title="ParallelMatching.this.global.Tree">t</a>)) <a href="#537137" title="Boolean">{</a> <span title="Boolean(true)" class="keyword">case</span> <a href="../ast/Trees.scala.html#26761" title="object ParallelMatching.this.global.EmptyTree">EmptyTree</a> | <a href="../ast/TreeDSL.scala.html#537140" title="(other: Any)Boolean">WILD</a>() =&gt; <span title="Boolean(true)" class="keyword">true</span> }
  <span class="keyword">def</span> <a title="(t: ParallelMatching.this.global.Tree)Boolean" id="79587">isLabellable</a>(<a title="ParallelMatching.this.global.Tree" id="537220">t</a>: <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a>)       = <span title="=&gt; Boolean">!</span><a href="../ast/TreeDSL.scala.html#42709" title="(x: ParallelMatching.this.global.Tree)(f: PartialFunction[ParallelMatching.this.global.Tree,Boolean])Boolean">cond</a>(<a href="#537220" title="ParallelMatching.this.global.Tree">t</a>)        <a href="#537233" title="Boolean">{</a> <span title="Boolean(true)" class="keyword">case</span> _: <a href="../ast/Trees.scala.html#26859" title="ParallelMatching.this.global.Throw">Throw</a> | _: <a href="../ast/Trees.scala.html#26896" title="ParallelMatching.this.global.Literal">Literal</a> =&gt; <span title="Boolean(true)" class="keyword">true</span> }
  <span class="keyword">def</span> <a title="(t: ParallelMatching.this.global.Tree)Boolean" id="79588">isModule</a>(<a title="ParallelMatching.this.global.Tree" id="537236">t</a>: <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a>)           = <a href="#537236" title="ParallelMatching.this.global.Tree">t</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; ParallelMatching.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27076" title="(x$1: Boolean)Boolean">isModule</a> || <a href="#537236" title="ParallelMatching.this.global.Tree">t</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; ParallelMatching.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30365" title="=&gt; ParallelMatching.this.global.Symbol">termSymbol</a>.<a href="../symtab/Symbols.scala.html#27076" title="=&gt; Boolean">isModule</a>
  
  // For isDefaultPattern, to do?
  // cond(tree) { case Typed(WILD(), _) if tree.tpe &lt;:&lt; scrut.tpe  =&gt; true }
  // null check?

  // this won't compile in compiler, but works in REPL - ?
  // val List(isInt, isChar, isBoolean, isArray, isNothing) = {
  //   import definitions._
  //   def testFor(s: Symbol): Type =&gt; Boolean = (tpe: Type) =&gt; tpe.typeSymbol eq s
  // 
  //   List(IntClass, CharClass, BooleanClass, ArrayClass, NothingClass) map testFor
  // }
  
  case <span class="keyword">class</span> <a title="class Pattern extends java.lang.Object with ScalaObject with Product" id="536944">Pattern</a><span title="ScalaObject">(</span><a title="ParallelMatching.this.global.Tree" id="536968">tree</a>: <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a>) {
    <span class="keyword">import</span> definitions._
    <span class="keyword">lazy</span> <span class="keyword">val</span>    <a title="ParallelMatching.this.global.Symbol" id="536951">sym</a> = <a href="#536968" title="=&gt; ParallelMatching.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; ParallelMatching.this.global.Symbol">symbol</a>
    <span class="keyword">lazy</span> <span class="keyword">val</span>    <a title="ParallelMatching.this.global.Type" id="536953">tpe</a> = <a href="#536968" title="=&gt; ParallelMatching.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; ParallelMatching.this.global.Type">tpe</a>
    <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="ParallelMatching.this.global.Type" id="536955">prefix</a> = <a href="#536952" title="=&gt; ParallelMatching.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30376" title="=&gt; ParallelMatching.this.global.Type">prefix</a>
    <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="ParallelMatching.this.global.Type" id="536957">tpeIfHead</a>  = <a href="../ast/TreeDSL.scala.html#42720" title="(x: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">unbind</a>(<a href="#536968" title="=&gt; ParallelMatching.this.global.Tree">tree</a>) <span title="ParallelMatching.this.global.Type" class="keyword">match</span> {
      <span title="ParallelMatching.this.global.Type" class="keyword">case</span> <a title="ParallelMatching.this.global.Tree" id="537246">p</a> @ (_:<a href="../ast/Trees.scala.html#26891" title="ParallelMatching.this.global.Ident">Ident</a> | _:<a href="../ast/Trees.scala.html#26887" title="ParallelMatching.this.global.Select">Select</a>) =&gt; <a href="../symtab/Types.scala.html#26446" title="(pre: ParallelMatching.this.global.Type,sym: ParallelMatching.this.global.Symbol)ParallelMatching.this.global.Type">singleType</a>(<a href="#81448" title="implicit scala.tools.nsc.matching.ParallelMatching.Implicits.mkPattern : (t: ParallelMatching.this.global.Tree)ParallelMatching.this.Pattern">stripped</a>.<a href="#536954" title="=&gt; ParallelMatching.this.global.Type">prefix</a>, <a href="#81448" title="implicit scala.tools.nsc.matching.ParallelMatching.Implicits.mkPattern : (t: ParallelMatching.this.global.Tree)ParallelMatching.this.Pattern">stripped</a>.<a href="#536950" title="=&gt; ParallelMatching.this.global.Symbol">sym</a>) //should be singleton object
      <span title="ParallelMatching.this.global.Type" class="keyword">case</span> <a href="PatternNodes.scala.html#537314" title="(x: ParallelMatching.this.global.Tree)Option[(List[ParallelMatching.this.global.Symbol], ParallelMatching.this.global.Type, List[ParallelMatching.this.global.Tree])]">__UnApply</a>(_,<a title="ParallelMatching.this.global.Type" id="537377">argtpe</a>,_)    =&gt; <a href="#537377" title="ParallelMatching.this.global.Type">argtpe</a>
      <span title="ParallelMatching.this.global.Type" class="keyword">case</span> _                        =&gt; <a href="#536952" title="=&gt; ParallelMatching.this.global.Type">tpe</a>
    }

    <span class="keyword">final</span> <span class="keyword">def</span> <a title="=&gt; Boolean" id="536958">isDefault</a>       = <a href="#79586" title="(t: ParallelMatching.this.global.Tree)Boolean">isDefaultPattern</a>(<a href="#536968" title="=&gt; ParallelMatching.this.global.Tree">tree</a>)
    
    <span class="keyword">lazy</span> <span class="keyword">val</span> <a href="PatternNodes.scala.html#537253" title="(x: ParallelMatching.this.global.Tree)Option[(List[ParallelMatching.this.global.Symbol], ParallelMatching.this.global.Tree)]">Strip</a><a href="#536962" title="(List[ParallelMatching.this.global.Symbol], ParallelMatching.this.global.Tree)" id="536960">(</a><a href="#536959" title="List[ParallelMatching.this.global.Symbol]" id="536962">boundVariables</a>, <a href="#536959" title="ParallelMatching.this.global.Tree" id="536964">stripped</a>) = <a href="#536968" title="=&gt; ParallelMatching.this.global.Tree">tree</a>

    /** returns true if pattern tests an object */
    <span class="keyword">final</span> <span class="keyword">def</span> <a title="(head: ParallelMatching.this.global.Type)Boolean" id="536965">isObjectTest</a>(<a title="ParallelMatching.this.global.Type" id="537387">head</a>: <a href="../symtab/Types.scala.html#26364" title="ParallelMatching.this.global.Type">Type</a>) =
      <span title="(x$1: Boolean)Boolean">(</span><a href="#536950" title="(x$1: AnyRef)Boolean">sym</a> ne <span title="Null(null)" class="keyword">null</span>) <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> (<a href="#536950" title="(x$1: AnyRef)Boolean">sym</a> != <a href="../symtab/Symbols.scala.html#26293" title="object ParallelMatching.this.global.NoSymbol">NoSymbol</a>) <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> <a href="#536954" title="=&gt; ParallelMatching.this.global.Type">prefix</a>.<a href="../symtab/Types.scala.html#30361" title="=&gt; Boolean">isStable</a> &amp;&amp; (<a href="../symtab/Types.scala.html#30422" title="(that: ParallelMatching.this.global.Type)Boolean">head</a> =:= <a href="../symtab/Types.scala.html#26446" title="(pre: ParallelMatching.this.global.Type,sym: ParallelMatching.this.global.Symbol)ParallelMatching.this.global.Type">singleType</a>(<a href="#536954" title="=&gt; ParallelMatching.this.global.Type">prefix</a>, <a href="#536950" title="=&gt; ParallelMatching.this.global.Symbol">sym</a>))
  }

  <span class="keyword">import</span> collection.mutable.{ HashMap, ListBuffer }
  <span class="keyword">class</span> <a title="class MatchMatrix extends java.lang.Object with ScalaObject" id="79593">MatchMatrix</a><span title="ScalaObject">(</span><a title="ParallelMatching.this.MatchMatrixContext" id="81405">context</a>: <a href="TransMatcher.scala.html#79462" title="ParallelMatching.this.MatchMatrixContext">MatchMatrixContext</a>, <a title="ParallelMatching.this.MatchMatrixInit" id="81406">data</a>: <a href="TransMatcher.scala.html#79465" title="ParallelMatching.this.MatchMatrixInit">MatchMatrixInit</a>) {
    <span class="keyword">import</span> context._
    <span class="keyword">val</span> MatchMatrixInit<a href="#81322" title="(List[ParallelMatching.this.global.Symbol], List[ParallelMatching.this.global.CaseDef], ParallelMatching.this.global.Tree)">(</a><a href="#81321" title="List[ParallelMatching.this.global.Symbol]" id="81322">roots</a>, <a href="#81321" title="List[ParallelMatching.this.global.CaseDef]" id="81324">cases</a>, <a href="#81321" title="ParallelMatching.this.global.Tree" id="81326">failTree</a>) = <a href="#81406" title="ParallelMatching.this.MatchMatrixInit">data</a>
    
    <span class="keyword">val</span> <a title="scala.collection.mutable.HashMap[Int,ParallelMatching.this.global.Symbol]" id="81328">labels</a>    = <span title="scala.collection.mutable.HashMap[Int,ParallelMatching.this.global.Symbol]" class="keyword">new</span> <a title="scala.collection.mutable.HashMap[Int,ParallelMatching.this.global.Symbol]" id="25113">HashMap</a>[Int, Symbol]()
    <span class="keyword">val</span> <a title="scala.collection.mutable.ListBuffer[ParallelMatching.this.global.Symbol]" id="81330">shortCuts</a> = <span title="scala.collection.mutable.ListBuffer[ParallelMatching.this.global.Symbol]" class="keyword">new</span> <a title="scala.collection.mutable.ListBuffer[ParallelMatching.this.global.Symbol]" id="24978">ListBuffer</a>[Symbol]()
    <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="scala.collection.mutable.BitSet" id="81333">reached</a>   = <a title="(initSize: Int)scala.collection.mutable.BitSet" id="537497" class="keyword">new</a> <a title="scala.collection.mutable.BitSet" id="24987">BitSet</a>(<a href="#81336" title="=&gt; List[MatchMatrix.this.FinalState]">targets</a>.<span title="=&gt; Int">size</span>)
    
    <span class="keyword">private</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="(List[MatchMatrix.this.Row], List[MatchMatrix.this.FinalState], List[List[ParallelMatching.this.global.Symbol]])" id="81335">expandResult</a>       = <a href="#81401" title="(roots: List[ParallelMatching.this.global.Symbol],cases: List[ParallelMatching.this.global.Tree])(List[MatchMatrix.this.Row], List[MatchMatrix.this.FinalState], List[List[ParallelMatching.this.global.Symbol]])">expand</a>(<a href="#81322" title="=&gt; List[ParallelMatching.this.global.Symbol]">roots</a>, <a href="#81324" title="=&gt; List[ParallelMatching.this.global.CaseDef]">cases</a>)
    <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="List[MatchMatrix.this.FinalState]" id="81337">targets</a>: <span title="List[MatchMatrix.this.FinalState]">List</span>[FinalState]  = <a href="#81334" title="=&gt; (List[MatchMatrix.this.Row], List[MatchMatrix.this.FinalState], List[List[ParallelMatching.this.global.Symbol]])">expandResult</a>.<span title="=&gt; List[MatchMatrix.this.FinalState]">_2</span>
    <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="List[List[ParallelMatching.this.global.Symbol]]" id="81339">vss</a>: <span title="List[List[ParallelMatching.this.global.Symbol]]">List</span>[List[Symbol]]    = <a href="#81334" title="=&gt; (List[MatchMatrix.this.Row], List[MatchMatrix.this.FinalState], List[List[ParallelMatching.this.global.Symbol]])">expandResult</a>.<span title="=&gt; List[List[ParallelMatching.this.global.Symbol]]">_3</span>
    <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="MatchMatrix.this.Rep" id="81341">expansion</a>: <a href="#541300" title="MatchMatrix.this.Rep">Rep</a>             = <a href="#81349" title="(tvars: List[ParallelMatching.this.global.Symbol],row1: List[MatchMatrix.this.Row])MatchMatrix.this.Rep">make</a>(<a href="#81322" title="=&gt; List[ParallelMatching.this.global.Symbol]">roots</a>, <a href="#81334" title="=&gt; (List[MatchMatrix.this.Row], List[MatchMatrix.this.FinalState], List[List[ParallelMatching.this.global.Symbol]])">expandResult</a>.<span title="=&gt; List[MatchMatrix.this.Row]">_1</span>)

    <span class="keyword">final</span> <span class="keyword">def</span> <a title="(theLabel: ParallelMatching.this.global.Symbol)Int" id="81342">shortCut</a>(<a title="ParallelMatching.this.global.Symbol" id="537613">theLabel</a>: <a href="../symtab/Symbols.scala.html#26286" title="ParallelMatching.this.global.Symbol">Symbol</a>): <span title="Int">Int</span> = {
      <a href="#81330" title="(x: ParallelMatching.this.global.Symbol)MatchMatrix.this.shortCuts.type" id="61852">shortCuts</a> += <a href="#537613" title="ParallelMatching.this.global.Symbol">theLabel</a>
      <span title="=&gt; Int">-</span><a href="#81330" title="=&gt; scala.collection.mutable.ListBuffer[ParallelMatching.this.global.Symbol]">shortCuts</a>.<a title="=&gt; Int" id="61848">length</a>
    }

    <span class="keyword">final</span> <span class="keyword">def</span> <a title="(tree: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree" id="81343">cleanup</a>(<a title="ParallelMatching.this.global.Tree" id="81639">tree</a>: <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a>): <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a> = {
      // Extractors which can spot pure true/false expressions
      // even through the haze of braces
      <span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class SeeThroughBlocks[T] extends java.lang.Object with ScalaObject" id="537646">SeeThroughBlocks</a>[<a title="&gt;: Nothing &lt;: Any" id="537647">T</a>] <span title="ScalaObject">{</span>
        <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(x: ParallelMatching.this.global.Tree)T" id="537657">unapplyImpl</a>(<a title="ParallelMatching.this.global.Tree" id="537662">x</a>: <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a>): <a href="#537647" title="T">T</a>
        <span class="keyword">def</span> <a title="(x: ParallelMatching.this.global.Tree)T" id="537658">unapply</a>(<a title="ParallelMatching.this.global.Tree" id="537664">x</a>: <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a>): <a href="#537647" title="T">T</a> = <a href="#537664" title="ParallelMatching.this.global.Tree">x</a> <span title="T" class="keyword">match</span> {
          <span title="T" class="keyword">case</span> Block(<span title="object Nil">Nil</span>, <a title="ParallelMatching.this.global.Tree" id="537668">expr</a>)         =&gt; <a href="#537658" title="(x: ParallelMatching.this.global.Tree)T">unapply</a>(<a href="#537668" title="ParallelMatching.this.global.Tree">expr</a>)
          <span title="T" class="keyword">case</span> _                        =&gt; <a href="#537657" title="(x: ParallelMatching.this.global.Tree)T">unapplyImpl</a>(<a href="#537664" title="ParallelMatching.this.global.Tree">x</a>)
        }
      }
      <span class="keyword">object</span> <a title="object IsTrue" id="537648">IsTrue</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#537646" title="SeeThroughBlocks[Boolean]">SeeThroughBlocks</a>[Boolean] {
        <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(x: ParallelMatching.this.global.Tree)Boolean" id="537676">unapplyImpl</a>(<a title="ParallelMatching.this.global.Tree" id="537680">x</a>: <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a>): <span title="Boolean">Boolean</span> = <a href="../ast/Trees.scala.html#29571" title="(that: ParallelMatching.this.global.Tree)Boolean">x</a> equalsStructure <a href="../ast/TreeDSL.scala.html#42723" title="=&gt; ParallelMatching.this.global.Literal">TRUE</a>
      }
      <span class="keyword">object</span> <a title="object IsFalse" id="537650">IsFalse</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#537646" title="SeeThroughBlocks[Boolean]">SeeThroughBlocks</a>[Boolean] {
        <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(x: ParallelMatching.this.global.Tree)Boolean" id="537686">unapplyImpl</a>(<a title="ParallelMatching.this.global.Tree" id="537690">x</a>: <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a>): <span title="Boolean">Boolean</span> = <a href="../ast/Trees.scala.html#29571" title="(that: ParallelMatching.this.global.Tree)Boolean">x</a> equalsStructure <a href="../ast/TreeDSL.scala.html#42725" title="=&gt; ParallelMatching.this.global.Literal">FALSE</a>
      }
      <span class="keyword">object</span> <a title="object lxtt" id="537652">lxtt</a> <span title="ScalaObject" class="keyword">extends</span> <a href="../ast/Trees.scala.html#26932" title="ParallelMatching.this.global.Transformer">Transformer</a> {
        <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree" id="537702">transform</a>(<a title="ParallelMatching.this.global.Tree" id="537706">tree</a>: <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a>): <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a> = <a href="#537706" title="ParallelMatching.this.global.Tree">tree</a> <span title="ParallelMatching.this.global.Tree" class="keyword">match</span> {
          <span title="ParallelMatching.this.global.Tree" class="keyword">case</span> <a title="ParallelMatching.this.global.Block" id="537709">blck</a> @ Block(<a title="List[ParallelMatching.this.global.Tree]" id="537712">vdefs</a>, <a title="ParallelMatching.this.global.LabelDef" id="537713">ld</a> @ LabelDef(<a title="ParallelMatching.this.global.Name" id="537719">name</a>, <a title="List[ParallelMatching.this.global.Ident]" id="537720">params</a>, <a title="ParallelMatching.this.global.Tree" id="537721">body</a>)) =&gt;
            <span class="keyword">val</span> <a title="Int" id="537726">bx</a> = <a href="#81347" title="(label: ParallelMatching.this.global.Symbol)Int">labelIndex</a>(<a href="#537713" title="ParallelMatching.this.global.LabelDef">ld</a>.<a href="../ast/Trees.scala.html#48738" title="=&gt; ParallelMatching.this.global.Symbol">symbol</a>)
            <span title="ParallelMatching.this.global.Tree" class="keyword">if</span> (<a href="#537726" title="(x$1: Int)Boolean">bx</a> <span title="(x$1: Boolean)Boolean">&gt;=</span> <span title="Int(0)" class="int">0</span> &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#81346" title="(bx: Int)Boolean">isReachedTwice</a>(<a href="#537726" title="Int">bx</a>)) <a href="TransMatcher.scala.html#79677" title="(vds: List[ParallelMatching.this.global.Tree],exp: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">squeezedBlock</a>(<a href="#537712" title="List[ParallelMatching.this.global.Tree]">vdefs</a>, <a href="#537721" title="ParallelMatching.this.global.Tree">body</a>)
            <span class="keyword">else</span> <a href="#537709" title="ParallelMatching.this.global.Block">blck</a>

          <span title="ParallelMatching.this.global.Tree" class="keyword">case</span> <a title="ParallelMatching.this.global.Tree" id="537813">t</a> =&gt;
            <span class="keyword">super</span>.<a href="../ast/Trees.scala.html#45705" title="(tree: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">transform</a>(<a href="#537813" title="ParallelMatching.this.global.Tree">t</a> <span title="ParallelMatching.this.global.Tree" class="keyword">match</span> {
              // note - it is too early for any other true/false related optimizations
              <span title="ParallelMatching.this.global.Tree" class="keyword">case</span> If(<a title="ParallelMatching.this.global.Tree" id="537819">cond</a>, <a href="#537658" title="(x: ParallelMatching.this.global.Tree)Boolean">IsTrue</a>(), <a href="#537658" title="(x: ParallelMatching.this.global.Tree)Boolean">IsFalse</a>())  =&gt; <a href="#537819" title="ParallelMatching.this.global.Tree">cond</a>
                            
              <span title="ParallelMatching.this.global.If" class="keyword">case</span> If(<a title="ParallelMatching.this.global.Tree" id="537833">cond1</a>, If(<a title="ParallelMatching.this.global.Tree" id="537837">cond2</a>, <a title="ParallelMatching.this.global.Tree" id="537838">thenp</a>, <a title="ParallelMatching.this.global.Tree" id="537839">elsep1</a>), <a title="ParallelMatching.this.global.Tree" id="537842">elsep2</a>) <span class="keyword">if</span> (<a href="../ast/Trees.scala.html#29571" title="(that: ParallelMatching.this.global.Tree)Boolean">elsep1</a> equalsStructure <a href="#537842" title="ParallelMatching.this.global.Tree">elsep2</a>) =&gt; 
                <a href="../ast/TreeDSL.scala.html#42756" title="(tree: ParallelMatching.this.global.Tree)ParallelMatching.this.CODE.IfStart">IF</a> <a href="../ast/TreeDSL.scala.html#50041" title="(x: ParallelMatching.this.global.Tree)ParallelMatching.this.CODE.IfStart">(</a><a href="../ast/TreeDSL.scala.html#45300" title="(other: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">cond1</a> AND <a href="#537837" title="ParallelMatching.this.global.Tree">cond2</a>) <a href="../ast/TreeDSL.scala.html#50042" title="(elsep: ParallelMatching.this.global.Tree)ParallelMatching.this.global.If">THEN</a> <a href="#537838" title="ParallelMatching.this.global.Tree">thenp</a> ELSE <a href="#537839" title="ParallelMatching.this.global.Tree">elsep1</a>
              <span title="ParallelMatching.this.global.If" class="keyword">case</span> If(<a title="ParallelMatching.this.global.Tree" id="537898">cond1</a>, If(<a title="ParallelMatching.this.global.Tree" id="537902">cond2</a>, <a title="ParallelMatching.this.global.Tree" id="537903">thenp</a>, Apply(<a title="ParallelMatching.this.global.Tree" id="537906">jmp</a>, <span title="object Nil">Nil</span>)), <a title="ParallelMatching.this.global.LabelDef" id="537911">ld</a>: <a href="../ast/Trees.scala.html#26798" title="ParallelMatching.this.global.LabelDef">LabelDef</a>) <span class="keyword">if</span> <a href="#537906" title="ParallelMatching.this.global.Tree">jmp</a>.<a href="../ast/Trees.scala.html#29553" title="(x$1: AnyRef)Boolean">symbol</a> eq <a href="#537911" title="ParallelMatching.this.global.LabelDef">ld</a>.<a href="../ast/Trees.scala.html#48738" title="=&gt; ParallelMatching.this.global.Symbol">symbol</a> =&gt; 
                <a href="../ast/TreeDSL.scala.html#42756" title="(tree: ParallelMatching.this.global.Tree)ParallelMatching.this.CODE.IfStart">IF</a> <a href="../ast/TreeDSL.scala.html#50041" title="(x: ParallelMatching.this.global.Tree)ParallelMatching.this.CODE.IfStart">(</a><a href="../ast/TreeDSL.scala.html#45300" title="(other: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">cond1</a> AND <a href="#537902" title="ParallelMatching.this.global.Tree">cond2</a>) <a href="../ast/TreeDSL.scala.html#50042" title="(elsep: ParallelMatching.this.global.Tree)ParallelMatching.this.global.If">THEN</a> <a href="#537903" title="ParallelMatching.this.global.Tree">thenp</a> ELSE <a href="#537911" title="ParallelMatching.this.global.LabelDef">ld</a>
              <span title="ParallelMatching.this.global.Tree" class="keyword">case</span> <a title="ParallelMatching.this.global.Tree" id="537943">t</a> =&gt; <a href="#537943" title="ParallelMatching.this.global.Tree">t</a>
          })
        }
      }
      <span class="keyword">object</span> <a title="object resetTraverser" id="537654">resetTraverser</a> <span title="ScalaObject" class="keyword">extends</span> <a href="../ast/Trees.scala.html#26933" title="ParallelMatching.this.global.Traverser">Traverser</a> {
        <span class="keyword">import</span> Flags._
        <span class="keyword">def</span> <a title="(vd: ParallelMatching.this.global.ValDef)Any" id="537948">reset</a>(<a title="ParallelMatching.this.global.ValDef" id="537953">vd</a>: <a href="../ast/Trees.scala.html#26778" title="ParallelMatching.this.global.ValDef">ValDef</a>) =
          <span title="Any" class="keyword">if</span> (<a href="#537953" title="ParallelMatching.this.global.ValDef">vd</a>.<a href="../symtab/Symbols.scala.html#27155" title="(mask: Long)Boolean">symbol</a> hasFlag <span title="Long(2097152L)">SYNTHETIC</span>) <a href="#537953" title="ParallelMatching.this.global.ValDef">vd</a>.<a href="../symtab/Symbols.scala.html#27153" title="(mask: Long)ParallelMatching.this.global.Symbol">symbol</a> resetFlag (TRANS_FLAG<span title="Long(274877911040L)">|</span>MUTABLE)
            
        <span class="keyword">override</span> <span class="keyword">def</span> <a title="(x: ParallelMatching.this.global.Tree)Unit" id="537949">traverse</a>(<a title="ParallelMatching.this.global.Tree" id="537974">x</a>: <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a>): <span title="Unit">Unit</span> = <a href="#537974" title="ParallelMatching.this.global.Tree">x</a> <span title="Unit" class="keyword">match</span> {
          <span title="Unit" class="keyword">case</span> <a title="ParallelMatching.this.global.ValDef" id="537977">vd</a>: <a href="../ast/Trees.scala.html#26778" title="ParallelMatching.this.global.ValDef">ValDef</a> =&gt; <a href="#537948" title="(vd: ParallelMatching.this.global.ValDef)Any">reset</a><span title="Unit">(</span><a href="#537977" title="ParallelMatching.this.global.ValDef">vd</a>)
          <span title="Unit" class="keyword">case</span> _          =&gt; <span class="keyword">super</span>.<a href="../ast/Trees.scala.html#71109" title="(tree: ParallelMatching.this.global.Tree)Unit">traverse</a>(<a href="#537974" title="ParallelMatching.this.global.Tree">x</a>)
        }
      }

      <a href="../ast/TreeDSL.scala.html#42717" title="[T](f: (T) =&gt; Unit)(x: T)T">applyAndReturn</a><span title="(f: (ParallelMatching.this.global.Tree) =&gt; Unit)(x: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">[</span><a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a>](<a href="#537949" title="(x: ParallelMatching.this.global.Tree)Unit">resetTraverser</a> traverse <a href="#537987" title="ParallelMatching.this.global.Tree">_</a>)(<a href="#537702" title="(tree: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">lxtt</a> transform <a href="#81639" title="ParallelMatching.this.global.Tree">tree</a>)
    }
    
    <span class="keyword">final</span> <span class="keyword">def</span> <a title="(bx: Int)Boolean" id="81344">isReached</a>(<a title="Int" id="81624">bx</a>: <span title="Int">Int</span>)        = <a href="#81328" title="(key: Int)Boolean" id="44678">labels</a> contains <a href="#81624" title="Int">bx</a>
    <span class="keyword">final</span> <span class="keyword">def</span> <a title="(bx: Int)Unit" id="81345">markReachedTwice</a>(<a title="Int" id="537998">bx</a>: <span title="Int">Int</span>) { <a href="#81332" title="(elem: Int)MatchMatrix.this.reached.type" id="537512">reached</a> <span title="Unit">+=</span> <a href="#537998" title="Int">bx</a> }
    
    /** @pre bx &lt; 0 || labelIndex(bx) != -1 */
    <span class="keyword">final</span> <span class="keyword">def</span> <a title="(bx: Int)Boolean" id="81346">isReachedTwice</a>(<a title="Int" id="537760">bx</a>: <span title="Int">Int</span>) = <span title="(x$1: Boolean)Boolean">(</span><a href="#537760" title="(x$1: Int)Boolean">bx</a> &lt; <span title="Int(0)" class="int">0</span>) || <a href="#81332" title="(elem: Int)Boolean" id="39571">reached</a>(<a href="#537760" title="Int">bx</a>)
    
    /* @returns bx such that labels(bx) eq label, -1 if no such bx exists */
    <span class="keyword">final</span> <span class="keyword">def</span> <a title="(label: ParallelMatching.this.global.Symbol)Int" id="81347">labelIndex</a>(<a title="ParallelMatching.this.global.Symbol" id="537727">label</a>: <a href="../symtab/Symbols.scala.html#26286" title="ParallelMatching.this.global.Symbol">Symbol</a>) = <a href="#81328" title="(p: ((Int, ParallelMatching.this.global.Symbol)) =&gt; Boolean)Option[(Int, ParallelMatching.this.global.Symbol)]" id="25445">labels</a> <span title="(f: ((Int, ParallelMatching.this.global.Symbol)) =&gt; Int)Option[Int]">find</span> (<a href="#537732" title="(Int, ParallelMatching.this.global.Symbol)">_</a>.<span title="(x$1: AnyRef)Boolean">_2</span> eq <a href="#537727" title="ParallelMatching.this.global.Symbol">label</a>) <span title="(default: =&gt; Int)Int">map</span> (<a href="#537741" title="(Int, ParallelMatching.this.global.Symbol)">_</a>.<span title="=&gt; Int">_1</span>) getOrElse (<span title="Int(-1)">-</span><span class="int">1</span>)

    /** first time bx is requested, a LabelDef is returned. next time, a jump.
     *  the function takes care of binding
     */
    <span class="keyword">final</span> <span class="keyword">def</span> <a title="(bx: Int,subst: ParallelMatching.this.Bindings)ParallelMatching.this.global.Tree" id="81348">requestBody</a>(<a title="Int" id="538024">bx</a>: <span title="Int">Int</span>, <a title="ParallelMatching.this.Bindings" id="538025">subst</a>: <a href="PatternNodes.scala.html#79542" title="ParallelMatching.this.Bindings">Bindings</a>): <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a> = {
      <span title="Unit" class="keyword">if</span> (<a href="#538024" title="(x$1: Int)Boolean">bx</a> &lt; <span title="Int(0)" class="int">0</span>) { // is shortcut
        <span class="keyword">val</span> <a title="ParallelMatching.this.global.Symbol" id="538049">jlabel</a> = <a href="#81330" title="(i: Int)ParallelMatching.this.global.Symbol" id="61972">shortCuts</a>(<span title="(x$1: Int)Int">-</span><a href="#538024" title="Int">bx</a>-<span title="Int(1)" class="int">1</span>)
        <span title="Nothing" class="keyword">return</span> <a href="../ast/Trees.scala.html#49378" title="(fun: ParallelMatching.this.global.Tree,args: List[ParallelMatching.this.global.Tree])ParallelMatching.this.global.Apply">Apply</a>(<a href="../ast/TreeDSL.scala.html#42764" title="(sym: ParallelMatching.this.global.Symbol)ParallelMatching.this.global.gen.global.Tree">ID</a>(<a href="#538049" title="ParallelMatching.this.global.Symbol">jlabel</a>), <span title="object Nil">Nil</span>)
      }
      <span title="Unit" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="#81344" title="(bx: Int)Boolean">isReached</a>(<a href="#538024" title="Int">bx</a>)) { // first time this bx is requested
        // might be bound elsewhere
        <span class="keyword">val</span> <a href="#538109" title="(List[ParallelMatching.this.global.Symbol], List[ParallelMatching.this.global.Tree])">(</a><a href="#538108" title="List[ParallelMatching.this.global.Symbol]" id="538109">vsyms</a>, <a href="#538108" title="List[ParallelMatching.this.global.Tree]" id="538110">vdefs</a>) : <span title="(List[ParallelMatching.this.global.Symbol], List[ParallelMatching.this.global.Tree])">(</span>List[Symbol], List[Tree]) = <span title="object List">List</span>.<span title="(xs: List[(ParallelMatching.this.global.Symbol, ParallelMatching.this.global.analyzer.global.Tree)])(List[ParallelMatching.this.global.Symbol], List[ParallelMatching.this.global.analyzer.global.Tree])">unzip</span><span title="(List[ParallelMatching.this.global.Symbol], List[ParallelMatching.this.global.analyzer.global.Tree]) @unchecked">(</span>
          <span class="keyword">for</span> (<a title="ParallelMatching.this.global.Symbol" id="538142">v</a> &lt;- <a href="#81338" title="(n: Int)List[ParallelMatching.this.global.Symbol]">vss</a><span title="(f: (ParallelMatching.this.global.Symbol) =&gt; Traversable[(ParallelMatching.this.global.Symbol, ParallelMatching.this.global.analyzer.global.Tree)])(implicit bf: scala.collection.generic.BuilderFactory[(ParallelMatching.this.global.Symbol, ParallelMatching.this.global.analyzer.global.Tree),List[(ParallelMatching.this.global.Symbol, ParallelMatching.this.global.analyzer.global.Tree)],List[ParallelMatching.this.global.Symbol]])List[(ParallelMatching.this.global.Symbol, ParallelMatching.this.global.analyzer.global.Tree)]">(</span><a href="#538024" title="Int">bx</a>) ; <a title="ParallelMatching.this.global.Ident" id="538175">substv</a> &lt;- <a href="PatternNodes.scala.html#538033" title="(v: ParallelMatching.this.global.Symbol)Option[ParallelMatching.this.global.Ident]">subst</a><span title="(f: (ParallelMatching.this.global.Ident) =&gt; (ParallelMatching.this.global.Symbol, ParallelMatching.this.global.analyzer.global.Tree))Option[(ParallelMatching.this.global.Symbol, ParallelMatching.this.global.analyzer.global.Tree)]">(</span><a href="#538142" title="ParallelMatching.this.global.Symbol">v</a>)) <span class="keyword">yield</span> 
            <span title="(_1: ParallelMatching.this.global.Symbol,_2: ParallelMatching.this.global.analyzer.global.Tree)(ParallelMatching.this.global.Symbol, ParallelMatching.this.global.analyzer.global.Tree)">(</span><a href="#538142" title="ParallelMatching.this.global.Symbol">v</a>, <a href="TransMatcher.scala.html#79676" title="(x: ParallelMatching.this.global.Symbol,rhs: ParallelMatching.this.global.Tree)ParallelMatching.this.global.analyzer.global.Tree">typedValDef</a>(<a href="#538142" title="ParallelMatching.this.global.Symbol">v</a>, <a href="#538175" title="ParallelMatching.this.global.Ident">substv</a>))
        )
              
        <span class="keyword">val</span> <a title="ParallelMatching.this.global.Tree" id="538111">body</a>    = <a href="#81336" title="(n: Int)MatchMatrix.this.FinalState">targets</a>(<a href="#538024" title="Int">bx</a>).<a href="#538997" title="=&gt; ParallelMatching.this.global.Tree">body</a>
        // @bug: typer is not able to digest a body of type Nothing being assigned result type Unit
        <span class="keyword">val</span> <a title="ParallelMatching.this.global.Type" id="538112">tpe</a>     = <span title="ParallelMatching.this.global.Type" class="keyword">if</span> (<a href="#538111" title="ParallelMatching.this.global.Tree">body</a>.<a href="PatternNodes.scala.html#81451" title="implicit scala.tools.nsc.matching.PatternNodes.Types.enrichType : (_tpe: ParallelMatching.this.global.Type)ParallelMatching.this.Types.RichType">tpe</a>.<a href="PatternNodes.scala.html#538367" title="=&gt; Boolean">isNothing</a>) <a href="#538111" title="ParallelMatching.this.global.Tree">body</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; ParallelMatching.this.global.Type">tpe</a> <span class="keyword">else</span> <a href="TransMatcher.scala.html#79672" title="=&gt; ParallelMatching.this.global.Type">resultType</a>
        <span class="keyword">val</span> <a title="ParallelMatching.this.global.MethodType" id="538113">newType</a> = <a href="../symtab/Types.scala.html#44127" title="(params: List[ParallelMatching.this.global.Symbol],resultType: ParallelMatching.this.global.Type)ParallelMatching.this.global.MethodType">MethodType</a>(<a href="#538109" title="List[ParallelMatching.this.global.Symbol]">vsyms</a>, <a href="#538112" title="ParallelMatching.this.global.Type">tpe</a>)
        <span class="keyword">val</span> <a title="ParallelMatching.this.global.TermSymbol" id="538114">label</a>   = <a href="TransMatcher.scala.html#79670" title="=&gt; ParallelMatching.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27027" title="(pos: scala.tools.nsc.util.Position,name: ParallelMatching.this.global.Name)ParallelMatching.this.global.TermSymbol">newLabel</a><a href="../symtab/Symbols.scala.html#27164" title="(info: ParallelMatching.this.global.Type)ParallelMatching.this.global.TermSymbol">(</a><a href="#538111" title="ParallelMatching.this.global.Tree">body</a>.<a href="../ast/Trees.scala.html#29547" title="=&gt; scala.tools.nsc.util.Position">pos</a>, <span title="(x$1: Any)java.lang.String" class="string">&quot;body%&quot;</span><a href="../symtab/Names.scala.html#26213" title="implicit scala.tools.nsc.symtab.Names.view : (s: String)ParallelMatching.this.global.Name">+</a><a href="#538024" title="Int">bx</a>) setInfo <a href="#538113" title="ParallelMatching.this.global.MethodType">newType</a>
        <a href="#81328" title="(key: Int,value: ParallelMatching.this.global.Symbol)Unit" id="44618">labels</a>(<a href="#538024" title="Int">bx</a>)  = <a href="#538114" title="ParallelMatching.this.global.TermSymbol">label</a>

        <span title="Nothing" class="keyword">return</span> <a href="#79575" title="(s: String,x: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">logAndReturn</a>(<span title="implicit scala.Predef.stringWrapper : (x: String)scala.runtime.RichString" class="string">&quot;requestBody(%d) first time: &quot;</span>.<span title="(args: Any*)String">format</span>(<a href="#538024" title="Int">bx</a>), <a href="TransMatcher.scala.html#79677" title="(vds: List[ParallelMatching.this.global.Tree],exp: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">squeezedBlock</a>(<a href="#538110" title="List[ParallelMatching.this.global.Tree]">vdefs</a>, (
          <span title="ParallelMatching.this.global.Tree" class="keyword">if</span> (<a href="#79587" title="(t: ParallelMatching.this.global.Tree)Boolean">isLabellable</a>(<a href="#538111" title="ParallelMatching.this.global.Tree">body</a>)) <a href="../ast/Trees.scala.html#26801" title="(sym: ParallelMatching.this.global.Symbol,params: List[ParallelMatching.this.global.Symbol],rhs: ParallelMatching.this.global.Tree)ParallelMatching.this.global.LabelDef">LabelDef</a>(<a href="#538114" title="ParallelMatching.this.global.TermSymbol">label</a>, <a href="#538109" title="List[ParallelMatching.this.global.Symbol]">vsyms</a>, <a href="../ast/Trees.scala.html#29552" title="(tp: ParallelMatching.this.global.Type)body.type">body</a> setType <a href="#538112" title="ParallelMatching.this.global.Type">tpe</a>)
          <span class="keyword">else</span> <a href="#538111" title="ParallelMatching.this.global.Tree">body</a>.<a href="../ast/Trees.scala.html#29552" title="(tp: ParallelMatching.this.global.Type)body.type">duplicate</a> setType <a href="#538112" title="ParallelMatching.this.global.Type">tpe</a>
        )))
      }
 
      // if some bx is not reached twice, its LabelDef is replaced with body itself
      <a href="#81345" title="(bx: Int)Unit">markReachedTwice</a>(<a href="#538024" title="Int">bx</a>)
      
      <span class="keyword">val</span> <a title="List[ParallelMatching.this.global.Ident]" id="538036">args</a>  = <a href="#81338" title="(n: Int)List[ParallelMatching.this.global.Symbol]">vss</a><span title="(f: (ParallelMatching.this.global.Symbol) =&gt; Option[ParallelMatching.this.global.Ident])(implicit bf: scala.collection.generic.BuilderFactory[Option[ParallelMatching.this.global.Ident],List[Option[ParallelMatching.this.global.Ident]],List[ParallelMatching.this.global.Symbol]])List[Option[ParallelMatching.this.global.Ident]]">(</span><a href="#538024" title="Int">bx</a>) <span title="scala.collection.generic.BuilderFactory[Option[ParallelMatching.this.global.Ident],List[Option[ParallelMatching.this.global.Ident]],List#Coll]">map</span> <a href="#538025" title="ParallelMatching.this.Bindings">subst</a> <a href="#538664" title="(implicit asTraversable: (Option[ParallelMatching.this.global.Ident]) =&gt; Traversable[ParallelMatching.this.global.Ident])List[ParallelMatching.this.global.Ident]" id="25559">flatten</a>
      <span class="keyword">val</span> <a title="ParallelMatching.this.global.Symbol" id="538037">label</a> = <a href="#81328" title="(key: Int)ParallelMatching.this.global.Symbol" id="44676">labels</a>(<a href="#538024" title="Int">bx</a>)
      <span class="keyword">val</span> <a title="ParallelMatching.this.global.Tree" id="538038">body</a>  = <a href="#81336" title="(n: Int)MatchMatrix.this.FinalState">targets</a>(<a href="#538024" title="Int">bx</a>).<a href="#538997" title="=&gt; ParallelMatching.this.global.Tree">body</a>
      <span class="keyword">val</span> <a title="List[ParallelMatching.this.global.Type]" id="538039">fmls</a>  = <a href="#538037" title="ParallelMatching.this.global.Symbol">label</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; ParallelMatching.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30386" title="=&gt; List[ParallelMatching.this.global.Type]">paramTypes</a>
      
      <span class="keyword">def</span> <a title="()String" id="538040">debugConsistencyFailure</a>(): <span title="String">String</span> = {
        <span class="keyword">val</span> <a title="List[String]" id="538694">xs</a> = 
          <span title="(that: Traversable[String])(implicit bf: scala.collection.generic.BuilderFactory[String,List[String],List[String]])List[String]">(</span> <span class="keyword">for</span> ((<a title="List[ParallelMatching.this.global.Symbol]" id="538805">vs</a>, <a title="Int" id="538806">i</a>) &lt;- <a href="#81338" title="=&gt; List[List[ParallelMatching.this.global.Symbol]]">vss</a>.<a href="#538781" title="(f: ((List[ParallelMatching.this.global.Symbol], Int)) =&gt; String)(implicit bf: scala.collection.generic.BuilderFactory[String,List[String],List[(List[ParallelMatching.this.global.Symbol], Int)]])List[String]">zipWithIndex</a>) <span class="keyword">yield</span> <span title="implicit scala.Predef.stringWrapper : (x: String)scala.runtime.RichString" class="string">&quot;vss(%d) = %s\nargs = %s&quot;</span>.<span title="(args: Any*)String">format</span>(<a href="#538806" title="Int">i</a>, <a href="#538805" title="(sep: String)String">vs</a> mkString <span title="java.lang.String(&quot;, &quot;)" class="string">&quot;, &quot;</span>, <a href="#538036" title="List[ParallelMatching.this.global.Ident]">args</a>) ) <span title="(that: Traversable[String])(implicit bf: scala.collection.generic.BuilderFactory[String,List[String],List[String]])List[String]">++</span>
          ( <span class="keyword">for</span> ((<a title="MatchMatrix.this.FinalState" id="539103">t</a>, <a title="Int" id="539104">i</a>) &lt;- <a href="#81336" title="=&gt; List[MatchMatrix.this.FinalState]">targets</a>.<a href="#539079" title="(f: ((MatchMatrix.this.FinalState, Int)) =&gt; String)(implicit bf: scala.collection.generic.BuilderFactory[String,List[String],List[(MatchMatrix.this.FinalState, Int)]])List[String]">zipWithIndex</a>) <span class="keyword">yield</span> <span title="implicit scala.Predef.stringWrapper : (x: String)scala.runtime.RichString" class="string">&quot;targets(%d) = %s&quot;</span>.<span title="(args: Any*)String">format</span>(<a href="#539104" title="Int">i</a>, <a href="#539103" title="MatchMatrix.this.FinalState">t</a>) ) <span title="(that: Traversable[String])(implicit bf: scala.collection.generic.BuilderFactory[String,List[String],List[String]])List[String]">++</span>
          ( <span class="keyword">for</span> ((<a title="Int" id="539418">i</a>, <a title="ParallelMatching.this.global.Symbol" id="539419">l</a>) &lt;- <a href="#81328" title="(f: ((Int, ParallelMatching.this.global.Symbol)) =&gt; String)(implicit bf: scala.collection.generic.BuilderFactory[String,scala.collection.mutable.Iterable[String],scala.collection.mutable.HashMap[Int,ParallelMatching.this.global.Symbol]])scala.collection.mutable.Iterable[String]">labels</a>) <span class="keyword">yield</span> <span title="implicit scala.Predef.stringWrapper : (x: String)scala.runtime.RichString" class="string">&quot;labels(%d) = %s&quot;</span>.<span title="(args: Any*)String">format</span>(<a href="#539418" title="Int">i</a>, <a href="#539419" title="ParallelMatching.this.global.Symbol">l</a>) ) <span title="scala.collection.generic.BuilderFactory[String,List[String],List#Coll]">++</span>
          ( <span class="keyword">for</span> ((<a title="java.lang.String" id="539772">s</a>, <a title="Any" id="539773">v</a>) &lt;- <span title="(xs: (java.lang.String, Any)*)List[(java.lang.String, Any)]">List</span><a href="#539748" title="(f: ((java.lang.String, Any)) =&gt; String)(implicit bf: scala.collection.generic.BuilderFactory[String,List[String],List[(java.lang.String, Any)]])List[String]">(</a><span title="(y: Int)(java.lang.String, Int)" class="string">&quot;bx&quot;</span> -&gt; <a href="#538024" title="Int">bx</a>, <span title="(y: ParallelMatching.this.global.Type)(java.lang.String, ParallelMatching.this.global.Type)" class="string">&quot;label.tpe&quot;</span> -&gt; <a href="#538037" title="ParallelMatching.this.global.Symbol">label</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; ParallelMatching.this.global.Type">tpe</a>)) <span class="keyword">yield</span> <span title="implicit scala.Predef.stringWrapper : (x: String)scala.runtime.RichString" class="string">&quot;%s = %s&quot;</span>.<span title="(args: Any*)String">format</span>(<a href="#539772" title="java.lang.String">s</a>, <a href="#539773" title="Any">v</a>) )
        
        <a href="#538694" title="(sep: String)String">xs</a> mkString <span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span>
      }
      // sanity checks: same length lists and args are conformant with formals
      <span class="keyword">def</span> <a title="()Boolean" id="538041">isConsistent</a>() = <span title="(x$1: Boolean)Boolean">(</span><a href="#538039" title="List[ParallelMatching.this.global.Type]">fmls</a>.<span title="(x$1: Int)Boolean">length</span> == <a href="#538036" title="List[ParallelMatching.this.global.Ident]">args</a>.<span title="=&gt; Int">length</span>) &amp;&amp; <span title="object List">List</span>.<a title="(xs: List[ParallelMatching.this.global.Ident],ys: List[ParallelMatching.this.global.Type])(f: (ParallelMatching.this.global.Ident, ParallelMatching.this.global.Type) =&gt; Boolean)Boolean" id="24550">forall2</a>(<a href="#538036" title="List[ParallelMatching.this.global.Ident]">args</a>, <a href="#538039" title="List[ParallelMatching.this.global.Type]">fmls</a>)(<a href="#540017" title="ParallelMatching.this.global.Ident">_</a>.<a href="../symtab/Types.scala.html#30421" title="(that: ParallelMatching.this.global.Type)Boolean">tpe</a> &lt;:&lt; <a href="#540018" title="ParallelMatching.this.global.Type">_</a>)

      <span title="Unit" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="#538041" title="()Boolean">isConsistent</a>()) {
        <span class="keyword">val</span> <a title="String" id="540028">msg</a> = (
          <span title="implicit scala.Predef.stringWrapper : (x: String)scala.runtime.RichString" class="string">&quot;&quot;&quot;Consistency problem compiling %s!
            |Trying to call %s(%s) with arguments (%s)&quot;&quot;&quot;</span> .
            <a title="implicit scala.Predef.stringWrapper : (x: String)scala.runtime.RichString" id="30654">stripMargin</a>.<span title="(args: Any*)String">format</span>(<a href="TransMatcher.scala.html#79456" title="=&gt; ParallelMatching.this.global.CompilationUnit">cunit</a>.<a href="../CompilationUnits.scala.html#45663" title="=&gt; scala.tools.nsc.util.SourceFile">source</a>, <a href="#538037" title="ParallelMatching.this.global.Symbol">label</a>, <a href="#538039" title="List[ParallelMatching.this.global.Type]">fmls</a>, <a href="#538036" title="List[ParallelMatching.this.global.Ident]">args</a>)
        )
        <span title="(x: Any)Unit">println</span>(<a href="#538040" title="()String">debugConsistencyFailure</a>())
        // TRACE(debugConsistencyFailure())
        <a href="TransMatcher.scala.html#79456" title="=&gt; ParallelMatching.this.global.CompilationUnit">cunit</a>.<a href="../CompilationUnits.scala.html#45687" title="(pos: scala.tools.nsc.util.Position,msg: String)Unit">error</a>(<a href="#538038" title="ParallelMatching.this.global.Tree">body</a>.<a href="../ast/Trees.scala.html#29547" title="=&gt; scala.tools.nsc.util.Position">pos</a>, <a href="#540028" title="String">msg</a>)
      }
      
      <span class="keyword">def</span> <a title="=&gt; List[ParallelMatching.this.global.analyzer.global.Tree]" id="538042">vds</a> = <span class="keyword">for</span> (<a title="ParallelMatching.this.global.Symbol" id="540093">v</a> &lt;- <a href="#81338" title="(n: Int)List[ParallelMatching.this.global.Symbol]">vss</a><span title="(f: (ParallelMatching.this.global.Symbol) =&gt; Traversable[ParallelMatching.this.global.analyzer.global.Tree])(implicit bf: scala.collection.generic.BuilderFactory[ParallelMatching.this.global.analyzer.global.Tree,List[ParallelMatching.this.global.analyzer.global.Tree],List[ParallelMatching.this.global.Symbol]])List[ParallelMatching.this.global.analyzer.global.Tree]">(</span><a href="#538024" title="Int">bx</a>) ; <a title="ParallelMatching.this.global.Ident" id="540123">substv</a> &lt;- <a href="PatternNodes.scala.html#538033" title="(v: ParallelMatching.this.global.Symbol)Option[ParallelMatching.this.global.Ident]">subst</a><span title="(f: (ParallelMatching.this.global.Ident) =&gt; ParallelMatching.this.global.analyzer.global.Tree)Option[ParallelMatching.this.global.analyzer.global.Tree]">(</span><a href="#540093" title="ParallelMatching.this.global.Symbol">v</a>)) <span class="keyword">yield</span> <a href="TransMatcher.scala.html#79676" title="(x: ParallelMatching.this.global.Symbol,rhs: ParallelMatching.this.global.Tree)ParallelMatching.this.global.analyzer.global.Tree">typedValDef</a>(<a href="#540093" title="ParallelMatching.this.global.Symbol">v</a>, <a href="#540123" title="ParallelMatching.this.global.Ident">substv</a>)
        
      <span title="ParallelMatching.this.global.Tree" class="keyword">if</span> (<a href="#79587" title="(t: ParallelMatching.this.global.Tree)Boolean">isLabellable</a>(<a href="#538038" title="ParallelMatching.this.global.Tree">body</a>)) <a href="../ast/TreeDSL.scala.html#42764" title="(sym: ParallelMatching.this.global.Symbol)ParallelMatching.this.global.gen.global.Tree">ID</a><a href="../ast/TreeDSL.scala.html#45314" title="(params: List[ParallelMatching.this.global.Tree])ParallelMatching.this.global.Apply">(</a><a href="#538037" title="ParallelMatching.this.global.Symbol">label</a>) APPLY (<a href="#538036" title="List[ParallelMatching.this.global.Ident]">args</a>)
      <span class="keyword">else</span>                    <a href="TransMatcher.scala.html#79677" title="(vds: List[ParallelMatching.this.global.Tree],exp: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">squeezedBlock</a>(<a href="#538042" title="=&gt; List[ParallelMatching.this.global.analyzer.global.Tree]">vds</a>, <a href="#538038" title="ParallelMatching.this.global.Tree">body</a>.<a href="../ast/Trees.scala.html#29552" title="(tp: ParallelMatching.this.global.Type)body.type">duplicate</a> setType <a href="TransMatcher.scala.html#79672" title="=&gt; ParallelMatching.this.global.Type">resultType</a>)
    }

    /** the injection here handles alternatives and unapply type tests */
    <span class="keyword">final</span> <span class="keyword">def</span> <a title="(tvars: List[ParallelMatching.this.global.Symbol],row1: List[MatchMatrix.this.Row])MatchMatrix.this.Rep" id="81349">make</a>(<a title="List[ParallelMatching.this.global.Symbol]" id="537608">tvars</a>: <span title="List[ParallelMatching.this.global.Symbol]">List</span>[Symbol], <a title="List[MatchMatrix.this.Row]" id="537609">row1</a>: <span title="List[MatchMatrix.this.Row]">List</span>[Row]): <a href="#541300" title="MatchMatrix.this.Rep">Rep</a> = {
      // Martin: I am not really sure what stype is doing, but it caused aliases.scala to fail
      // The problem is if a val has a singleType of some other module. Then isModule is true and
      // sType is called. But it ends up mixing the prefix of the other module with the val symbol
      // which then causes erasure to be confused.
      <span class="keyword">def</span> <a title="(x: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Type" id="540274">mkSingletonType</a>(<a title="ParallelMatching.this.global.Tree" id="540278">x</a>: <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a>) = <a href="#540278" title="ParallelMatching.this.global.Tree">x</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; ParallelMatching.this.global.Type">tpe</a> <span title="ParallelMatching.this.global.Type" class="keyword">match</span> {
        <span title="ParallelMatching.this.global.SingleType" class="keyword">case</span> <a title="ParallelMatching.this.global.SingleType" id="540279">st</a>: <a href="../symtab/Types.scala.html#26393" title="ParallelMatching.this.global.SingleType">SingleType</a> =&gt; <a href="#540279" title="ParallelMatching.this.global.SingleType">st</a>
        <span title="ParallelMatching.this.global.Type" class="keyword">case</span> _              =&gt; <a href="../symtab/Types.scala.html#26446" title="(pre: ParallelMatching.this.global.Type,sym: ParallelMatching.this.global.Symbol)ParallelMatching.this.global.Type">singleType</a>(<a href="#540278" title="ParallelMatching.this.global.Tree">x</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; ParallelMatching.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30376" title="=&gt; ParallelMatching.this.global.Type">prefix</a>, <a href="#540278" title="ParallelMatching.this.global.Tree">x</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; ParallelMatching.this.global.Symbol">symbol</a>)
      }
      <span class="keyword">def</span> <a title="(x: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Type" id="540275">equalsCheck</a>(<a title="ParallelMatching.this.global.Tree" id="540284">x</a>: <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a>) =
        <span title="ParallelMatching.this.global.Type" class="keyword">if</span> (<a href="#540284" title="ParallelMatching.this.global.Tree">x</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; ParallelMatching.this.global.Symbol">symbol</a>.<a href="../symtab/Symbols.scala.html#27061" title="=&gt; Boolean">isValue</a>) <a href="../symtab/Types.scala.html#26446" title="(pre: ParallelMatching.this.global.Type,sym: ParallelMatching.this.global.Symbol)ParallelMatching.this.global.Type">singleType</a>(<a href="../symtab/Types.scala.html#26385" title="object ParallelMatching.this.global.NoPrefix">NoPrefix</a>, <a href="#540284" title="ParallelMatching.this.global.Tree">x</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; ParallelMatching.this.global.Symbol">symbol</a>)
        <span class="keyword">else</span> <a href="#540274" title="(x: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Type">mkSingletonType</a>(<a href="#540284" title="ParallelMatching.this.global.Tree">x</a>)
      
      <span class="keyword">def</span> <a title="(opat: ParallelMatching.this.global.Tree,j: Int)ParallelMatching.this.global.Tree" id="540276">classifyPat</a>(<a title="ParallelMatching.this.global.Tree" id="540291">opat</a>: <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a>, <a title="Int" id="540292">j</a>: <span title="Int">Int</span>): <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a> = {
        <span class="keyword">def</span> <a title="=&gt; List[ParallelMatching.this.global.Symbol]" id="540293">vars</a>                    = <a href="#81448" title="implicit scala.tools.nsc.matching.ParallelMatching.Implicits.mkPattern : (t: ParallelMatching.this.global.Tree)ParallelMatching.this.Pattern">opat</a>.<a href="#536961" title="=&gt; List[ParallelMatching.this.global.Symbol]">boundVariables</a>
        <span class="keyword">def</span> <a title="(t: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree" id="540294">rebind</a>(<a title="ParallelMatching.this.global.Tree" id="540315">t</a>: <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a>)         = <a href="PatternNodes.scala.html#79517" title="(vs: List[ParallelMatching.this.global.Symbol],pat: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">makeBind</a>(<a href="#540293" title="=&gt; List[ParallelMatching.this.global.Symbol]">vars</a>, <a href="#540315" title="ParallelMatching.this.global.Tree">t</a>)
        <span class="keyword">def</span> <a title="(tpe: ParallelMatching.this.global.Type)ParallelMatching.this.global.Tree" id="540295">rebindEmpty</a>(<a title="ParallelMatching.this.global.Type" id="540323">tpe</a>: <a href="../symtab/Types.scala.html#26364" title="ParallelMatching.this.global.Type">Type</a>)  = <a href="PatternNodes.scala.html#79520" title="(vs: List[ParallelMatching.this.global.Symbol],tpe: ParallelMatching.this.global.Type)ParallelMatching.this.global.Tree">mkEmptyTreeBind</a>(<a href="#540293" title="=&gt; List[ParallelMatching.this.global.Symbol]">vars</a>, <a href="#540323" title="ParallelMatching.this.global.Type">tpe</a>)
        <span class="keyword">def</span> <a title="()ParallelMatching.this.global.Tree" id="540296">rebindTyped</a>()           = <a href="PatternNodes.scala.html#79519" title="(vs: List[ParallelMatching.this.global.Symbol],tpe: ParallelMatching.this.global.Type)ParallelMatching.this.global.Tree">mkTypedBind</a>(<a href="#540293" title="=&gt; List[ParallelMatching.this.global.Symbol]">vars</a>, <a href="#540275" title="(x: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Type">equalsCheck</a>(<a href="../ast/TreeDSL.scala.html#42720" title="(x: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">unbind</a>(<a href="#540291" title="ParallelMatching.this.global.Tree">opat</a>)))
        
        // @pre for doUnapplySeq: is not right-ignoring (no star pattern) ; no exhaustivity check
        <span class="keyword">def</span> <a title="(tptArg: ParallelMatching.this.global.Tree,xs: List[ParallelMatching.this.global.Tree])ParallelMatching.this.global.Tree" id="540297">doUnapplySeq</a>(<a title="ParallelMatching.this.global.Tree" id="540453">tptArg</a>: <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a>, <a title="List[ParallelMatching.this.global.Tree]" id="540454">xs</a>: <span title="List[ParallelMatching.this.global.Tree]">List</span>[Tree]) = {
          <a href="#537608" title="(n: Int)ParallelMatching.this.global.Symbol">tvars</a><a href="../symtab/Symbols.scala.html#27152" title="(mask: Long)ParallelMatching.this.global.Symbol">(</a><a href="#540292" title="Int">j</a>) setFlag Flags.<span title="Long(274877906944L)">TRANS_FLAG</span>
          <a href="#540294" title="(t: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">rebind</a>(<a href="PatternNodes.scala.html#79523" title="(pats: List[ParallelMatching.this.global.Tree],tptArg: ParallelMatching.this.global.Type)ParallelMatching.this.global.Tree">normalizedListPattern</a>(<a href="#540454" title="List[ParallelMatching.this.global.Tree]">xs</a>, <a href="#540453" title="ParallelMatching.this.global.Tree">tptArg</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; ParallelMatching.this.global.Type">tpe</a>))
        }

        <span class="keyword">def</span> <a title="(ua: ParallelMatching.this.global.UnApply,fn: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree" id="540298">doUnapplyApply</a>(<a title="ParallelMatching.this.global.UnApply" id="540477">ua</a>: <a href="../ast/Trees.scala.html#26832" title="ParallelMatching.this.global.UnApply">UnApply</a>, <a title="ParallelMatching.this.global.Tree" id="540478">fn</a>: <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a>) = {
          <span class="keyword">val</span> MethodType<a href="#540495" title="ParallelMatching.this.global.Symbol" id="540479">(</a><a href="#540486" title="(x: List[ParallelMatching.this.global.Symbol])Some[List[ParallelMatching.this.global.Symbol]]">List</a>(<a title="ParallelMatching.this.global.Symbol" id="540495">arg</a>, _*), _) = <a href="#540478" title="ParallelMatching.this.global.Tree">fn</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; ParallelMatching.this.global.Type">tpe</a>
          <span class="keyword">val</span> <a title="ParallelMatching.this.global.TermTree" id="540480">npat</a> =
            <span title="ParallelMatching.this.global.TermTree" class="keyword">if</span> (<a href="#537608" title="(n: Int)ParallelMatching.this.global.Symbol">tvars</a>(<a href="#540292" title="Int">j</a>).<a href="../symtab/Types.scala.html#30421" title="(that: ParallelMatching.this.global.Type)Boolean">tpe</a> &lt;:&lt; <a href="#540479" title="ParallelMatching.this.global.Symbol">arg</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; ParallelMatching.this.global.Type">tpe</a>) <a href="#540477" title="ParallelMatching.this.global.UnApply">ua</a> 
            <span class="keyword">else</span> <a href="../ast/Trees.scala.html#50628" title="(expr: ParallelMatching.this.global.Tree,tpt: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Typed">Typed</a><a href="../ast/Trees.scala.html#29552" title="(tp: ParallelMatching.this.global.Type)ParallelMatching.this.global.Typed">(</a><a href="#540477" title="ParallelMatching.this.global.UnApply">ua</a>, <a href="../ast/Trees.scala.html#26903" title="(tp: ParallelMatching.this.global.Type)ParallelMatching.this.global.TypeTree">TypeTree</a>(<a href="#540479" title="ParallelMatching.this.global.Symbol">arg</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; ParallelMatching.this.global.Type">tpe</a>)) setType <a href="#540479" title="ParallelMatching.this.global.Symbol">arg</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; ParallelMatching.this.global.Type">tpe</a>
            
          // TRACE(&quot;doUnapplyApply: %s &lt;:&lt; %s == %s&quot;, tvars(j).tpe, argtpe, (tvars(j).tpe &lt;:&lt; argtpe))
          <a href="#79575" title="(s: String,x: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">logAndReturn</a>(<span title="java.lang.String(&quot;doUnapplyApply: &quot;)" class="string">&quot;doUnapplyApply: &quot;</span>, <a href="#540294" title="(t: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">rebind</a><a href="../ast/Trees.scala.html#29552" title="(tp: ParallelMatching.this.global.Type)ParallelMatching.this.global.Tree">(</a><a href="#540480" title="ParallelMatching.this.global.TermTree">npat</a>) setType <a href="#540479" title="ParallelMatching.this.global.Symbol">arg</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; ParallelMatching.this.global.Type">tpe</a>)
        }
        <span class="keyword">def</span> <a title="(x: ParallelMatching.this.global.Tree,fn: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree" id="540299">doValMatch</a>(<a title="ParallelMatching.this.global.Tree" id="540568">x</a>: <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a>, <a title="ParallelMatching.this.global.Tree" id="540569">fn</a>: <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a>) = {
          <span class="keyword">def</span> <a title="(path: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Type" id="540570">examinePrefix</a>(<a title="ParallelMatching.this.global.Tree" id="540573">path</a>: <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a>) = <span title="(_1: ParallelMatching.this.global.Tree,_2: ParallelMatching.this.global.Type)(ParallelMatching.this.global.Tree, ParallelMatching.this.global.Type)">(</span><a href="#540573" title="ParallelMatching.this.global.Tree">path</a>, <a href="#540573" title="ParallelMatching.this.global.Tree">path</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; ParallelMatching.this.global.Type">tpe</a>) <span title="ParallelMatching.this.global.Type" class="keyword">match</span> {
            <span title="ParallelMatching.this.global.Type" class="keyword">case</span> (_, <a title="ParallelMatching.this.global.ThisType" id="540584">t</a>: <a href="../symtab/Types.scala.html#26387" title="ParallelMatching.this.global.ThisType">ThisType</a>)     =&gt; <a href="../symtab/Types.scala.html#26446" title="(pre: ParallelMatching.this.global.Type,sym: ParallelMatching.this.global.Symbol)ParallelMatching.this.global.Type">singleType</a>(<a href="#540584" title="ParallelMatching.this.global.ThisType">t</a>, <a href="#540568" title="ParallelMatching.this.global.Tree">x</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; ParallelMatching.this.global.Symbol">symbol</a>)            // cases 2/3 are e.g. `case Some(p._2)' in s.c.jcl.Map
            <span title="ParallelMatching.this.Types.PseudoType" class="keyword">case</span> (_: <a href="../ast/Trees.scala.html#26873" title="ParallelMatching.this.global.Apply">Apply</a>, _)        =&gt; <a href="PatternNodes.scala.html#540596" title="(o: ParallelMatching.this.global.Tree)ParallelMatching.this.Types.PseudoType">PseudoType</a>(<a href="#540568" title="ParallelMatching.this.global.Tree">x</a>)                      // outer-matching: test/files/pos/t154.scala
            <span title="ParallelMatching.this.global.Type" class="keyword">case</span> _                    =&gt; <a href="../symtab/Types.scala.html#26446" title="(pre: ParallelMatching.this.global.Type,sym: ParallelMatching.this.global.Symbol)ParallelMatching.this.global.Type">singleType</a>(<a href="#540274" title="(x: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Type">mkSingletonType</a>(<a href="#540573" title="ParallelMatching.this.global.Tree">path</a>), <a href="#540568" title="ParallelMatching.this.global.Tree">x</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; ParallelMatching.this.global.Symbol">symbol</a>)  // old
          }    
          <span class="keyword">val</span> <a title="ParallelMatching.this.global.Type" id="540571">singletonType</a> =
            <span title="ParallelMatching.this.global.Type" class="keyword">if</span> (<a href="#79588" title="(t: ParallelMatching.this.global.Tree)Boolean">isModule</a>(<a href="#540568" title="ParallelMatching.this.global.Tree">x</a>)) <a href="#540274" title="(x: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Type">mkSingletonType</a>(<a href="#540568" title="ParallelMatching.this.global.Tree">x</a>) <span class="keyword">else</span> <a href="#540569" title="ParallelMatching.this.global.Tree">fn</a> <span title="ParallelMatching.this.global.Type" class="keyword">match</span> {
              <span title="ParallelMatching.this.global.Type" class="keyword">case</span> Select(<a title="ParallelMatching.this.global.Tree" id="540633">path</a>, _)  =&gt; <a href="#540570" title="(path: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Type">examinePrefix</a>(<a href="#540633" title="ParallelMatching.this.global.Tree">path</a>)
              <span title="ParallelMatching.this.global.Type" class="keyword">case</span> <a title="ParallelMatching.this.global.Ident" id="540638">x</a>: <a href="../ast/Trees.scala.html#26891" title="ParallelMatching.this.global.Ident">Ident</a>         =&gt; <a href="#540275" title="(x: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Type">equalsCheck</a>(<a href="#540638" title="ParallelMatching.this.global.Ident">x</a>)
            }
          <span class="keyword">val</span> <a title="ParallelMatching.this.global.Type" id="540572">typeToTest</a> = <a href="PatternNodes.scala.html#79521" title="(xs: List[ParallelMatching.this.global.Type])ParallelMatching.this.global.Type">mkEqualsRef</a>(<span title="(xs: ParallelMatching.this.global.Type*)List[ParallelMatching.this.global.Type]">List</span>(<a href="#540571" title="ParallelMatching.this.global.Type">singletonType</a>))
            
          <a href="#540294" title="(t: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">rebind</a>(<a href="../ast/Trees.scala.html#50628" title="(expr: ParallelMatching.this.global.Tree,tpt: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Typed">Typed</a><a href="../ast/Trees.scala.html#29552" title="(tp: ParallelMatching.this.global.Type)ParallelMatching.this.global.Typed">(</a><a href="../ast/TreeDSL.scala.html#537139" title="(tpe: ParallelMatching.this.global.Type)ParallelMatching.this.global.Ident">WILD</a>(<a href="#540572" title="ParallelMatching.this.global.Type">typeToTest</a>), <a href="../ast/Trees.scala.html#26903" title="(tp: ParallelMatching.this.global.Type)ParallelMatching.this.global.TypeTree">TypeTree</a>(<a href="#540571" title="ParallelMatching.this.global.Type">singletonType</a>)) setType <a href="#540572" title="ParallelMatching.this.global.Type">typeToTest</a>)
        }
        
        <span class="keyword">def</span> <a title="(t: ParallelMatching.this.global.Tree)Boolean" id="540300">doReturnOriginal</a>(<a title="ParallelMatching.this.global.Tree" id="540697">t</a>: <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a>) = <a href="../ast/TreeDSL.scala.html#42709" title="(x: ParallelMatching.this.global.Tree)(f: PartialFunction[ParallelMatching.this.global.Tree,Boolean])Boolean">cond</a>(<a href="#540697" title="ParallelMatching.this.global.Tree">t</a>) <a href="#540708" title="Boolean">{</a>
          <span title="Boolean(true)" class="keyword">case</span> <a href="../ast/Trees.scala.html#26761" title="object ParallelMatching.this.global.EmptyTree">EmptyTree</a> | <a href="../ast/TreeDSL.scala.html#537140" title="(other: Any)Boolean">WILD</a>() | _: <a href="../ast/Trees.scala.html#26896" title="ParallelMatching.this.global.Literal">Literal</a> | _: <a href="../ast/Trees.scala.html#26866" title="ParallelMatching.this.global.Typed">Typed</a> | _: <a href="../ast/Trees.scala.html#26835" title="ParallelMatching.this.global.ArrayValue">ArrayValue</a>   =&gt; <span title="Boolean(true)" class="keyword">true</span>
        }
        <span class="keyword">def</span> <a title="(t: ParallelMatching.this.global.Tree)Boolean" id="540301">doRebindTyped</a>(<a title="ParallelMatching.this.global.Tree" id="540715">t</a>: <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a>) = <a href="../ast/TreeDSL.scala.html#42709" title="(x: ParallelMatching.this.global.Tree)(f: PartialFunction[ParallelMatching.this.global.Tree,Boolean])Boolean">cond</a>(<a href="#540715" title="ParallelMatching.this.global.Tree">t</a>) <a href="#540726" title="Boolean">{</a> <span title="Boolean(true)" class="keyword">case</span> _: <a href="../ast/Trees.scala.html#26891" title="ParallelMatching.this.global.Ident">Ident</a> | _: <a href="../ast/Trees.scala.html#26887" title="ParallelMatching.this.global.Select">Select</a> =&gt; <span title="Boolean(true)" class="keyword">true</span> }
        
        // NOTE - this seemingly pointless representation has a point.  Until extractors
        // can be trusted, I only feel safe using them by using one to a match, because it is
        // in the transitions they are broken.  This will return to a more traditional
        // pattern match before the final curtain falls.
        <span class="keyword">val</span> <a title="PartialFunction[ParallelMatching.this.global.Tree,ParallelMatching.this.global.Tree]" id="540302">f</a> = <span title="[A](xs: A*)List[A]">List</span><span title="(xs: PartialFunction[ParallelMatching.this.global.Tree,ParallelMatching.this.global.Tree]*)List[PartialFunction[ParallelMatching.this.global.Tree,ParallelMatching.this.global.Tree]]">[</span><a title="PartialFunction[ParallelMatching.this.global.Tree,ParallelMatching.this.global.Tree]" id="1106">PartialFunction</a>[Tree, Tree]]<a title="(f: (PartialFunction[ParallelMatching.this.global.Tree,ParallelMatching.this.global.Tree], PartialFunction[ParallelMatching.this.global.Tree,ParallelMatching.this.global.Tree]) =&gt; PartialFunction[ParallelMatching.this.global.Tree,ParallelMatching.this.global.Tree])PartialFunction[ParallelMatching.this.global.Tree,ParallelMatching.this.global.Tree]" id="29137">(</a>
          <a href="#540735" title="ParallelMatching.this.global.Tree">{</a> <span title="ParallelMatching.this.global.Tree" class="keyword">case</span> _: <a href="../ast/Trees.scala.html#26822" title="ParallelMatching.this.global.Alternative">Alternative</a>                       =&gt; <a href="#540291" title="ParallelMatching.this.global.Tree">opat</a> } ,
          <a href="#540737" title="ParallelMatching.this.global.Tree">{</a> <span title="ParallelMatching.this.global.Tree" class="keyword">case</span> Typed(<a title="ParallelMatching.this.global.Tree" id="540740">p</a> @ <a href="PatternNodes.scala.html#540742" title="(x: ParallelMatching.this.global.Tree)Option[ParallelMatching.this.global.Tree]">Stripped</a>(_: <a href="../ast/Trees.scala.html#26832" title="ParallelMatching.this.global.UnApply">UnApply</a>), <a title="ParallelMatching.this.global.Tree" id="540751">tpt</a>) =&gt; <span title="ParallelMatching.this.global.Tree" class="keyword">if</span> (<a href="#537608" title="(n: Int)ParallelMatching.this.global.Symbol">tvars</a>(<a href="#540292" title="Int">j</a>).<a href="../symtab/Types.scala.html#30421" title="(that: ParallelMatching.this.global.Type)Boolean">tpe</a> &lt;:&lt; <a href="#540751" title="ParallelMatching.this.global.Tree">tpt</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; ParallelMatching.this.global.Type">tpe</a>) <a href="#540294" title="(t: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">rebind</a>(<a href="#540740" title="ParallelMatching.this.global.Tree">p</a>) <span class="keyword">else</span> <a href="#540291" title="ParallelMatching.this.global.Tree">opat</a> } ,
          <a href="#540769" title="ParallelMatching.this.global.Tree">{</a> <span title="ParallelMatching.this.global.Tree" class="keyword">case</span> <a title="ParallelMatching.this.global.Tree" id="540770">x</a> <span class="keyword">if</span> <a href="#540300" title="(t: ParallelMatching.this.global.Tree)Boolean">doReturnOriginal</a>(<a href="#540770" title="ParallelMatching.this.global.Tree">x</a>)             =&gt; <a href="#540291" title="ParallelMatching.this.global.Tree">opat</a> } ,
          <a href="#540774" title="ParallelMatching.this.global.Tree">{</a> <span title="ParallelMatching.this.global.Tree" class="keyword">case</span> <a title="ParallelMatching.this.global.Tree" id="540775">x</a> <span class="keyword">if</span> <a href="#540301" title="(t: ParallelMatching.this.global.Tree)Boolean">doRebindTyped</a>(<a href="#540775" title="ParallelMatching.this.global.Tree">x</a>)                =&gt; <a href="#540296" title="()ParallelMatching.this.global.Tree">rebindTyped</a>() } ,  // Ident(_) != nme.WILDCARD
          <a href="#540781" title="ParallelMatching.this.global.Tree">{</a> <span title="ParallelMatching.this.global.Tree" class="keyword">case</span> _: <a href="../ast/Trees.scala.html#26883" title="ParallelMatching.this.global.This">This</a>                              =&gt; <a href="#540291" title="ParallelMatching.this.global.Tree">opat</a> } ,
          <a href="#540783" title="ParallelMatching.this.global.Tree">{</a> <span title="ParallelMatching.this.global.Tree" class="keyword">case</span> <a href="PatternNodes.scala.html#540787" title="(x: ParallelMatching.this.global.UnApply)Option[(ParallelMatching.this.global.Tree, List[ParallelMatching.this.global.Tree])]">UnapplySeq</a>(<a title="ParallelMatching.this.global.Tree" id="540906">tptArg</a>, <a title="List[ParallelMatching.this.global.Tree]" id="540907">xs</a>)               =&gt; <a href="#540297" title="(tptArg: ParallelMatching.this.global.Tree,xs: List[ParallelMatching.this.global.Tree])ParallelMatching.this.global.Tree">doUnapplySeq</a>(<a href="#540906" title="ParallelMatching.this.global.Tree">tptArg</a>, <a href="#540907" title="List[ParallelMatching.this.global.Tree]">xs</a>) } ,
          <a href="#540912" title="ParallelMatching.this.global.Tree">{</a> <span title="ParallelMatching.this.global.Tree" class="keyword">case</span> <a title="ParallelMatching.this.global.UnApply" id="540913">ua</a> @ UnApply(Apply(<a title="ParallelMatching.this.global.Tree" id="540918">fn</a>, _), _)        =&gt; <a href="#540298" title="(ua: ParallelMatching.this.global.UnApply,fn: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">doUnapplyApply</a>(<a href="#540913" title="ParallelMatching.this.global.UnApply">ua</a>, <a href="#540918" title="ParallelMatching.this.global.Tree">fn</a>) } ,
          <a href="#540926" title="ParallelMatching.this.global.Tree">{</a> <span title="ParallelMatching.this.global.Tree" class="keyword">case</span> <a title="ParallelMatching.this.global.Tree" id="540927">x</a> @ <a href="PatternNodes.scala.html#540930" title="(x: Any)Option[ParallelMatching.this.global.Tree]">Apply_Function</a>(<a title="ParallelMatching.this.global.Tree" id="541024">fn</a>)               =&gt; <a href="#540299" title="(x: ParallelMatching.this.global.Tree,fn: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">doValMatch</a>(<a href="#540927" title="ParallelMatching.this.global.Tree">x</a>, <a href="#541024" title="ParallelMatching.this.global.Tree">fn</a>) } ,
          <a href="#541029" title="ParallelMatching.this.global.Tree">{</a> <span title="ParallelMatching.this.global.Tree" class="keyword">case</span> <a href="PatternNodes.scala.html#540967" title="(x: Any)Option[(ParallelMatching.this.global.Type, ParallelMatching.this.global.Symbol)]">Apply_Value</a>(<a title="ParallelMatching.this.global.Type" id="541033">pre</a>, <a title="ParallelMatching.this.global.Symbol" id="541034">sym</a>)                =&gt; <a href="#540295" title="(tpe: ParallelMatching.this.global.Type)ParallelMatching.this.global.Tree">rebindEmpty</a>(<a href="PatternNodes.scala.html#79521" title="(xs: List[ParallelMatching.this.global.Type])ParallelMatching.this.global.Type">mkEqualsRef</a>(<span title="(xs: ParallelMatching.this.global.Type*)List[ParallelMatching.this.global.Type]">List</span>(<a href="../symtab/Types.scala.html#26446" title="(pre: ParallelMatching.this.global.Type,sym: ParallelMatching.this.global.Symbol)ParallelMatching.this.global.Type">singleType</a>(<a href="#541033" title="ParallelMatching.this.global.Type">pre</a>, <a href="#541034" title="ParallelMatching.this.global.Symbol">sym</a>)))) } ,
          <a href="#541055" title="ParallelMatching.this.global.Tree">{</a> <span title="ParallelMatching.this.global.Tree" class="keyword">case</span> <a href="PatternNodes.scala.html#541057" title="(x: Any)Option[(ParallelMatching.this.global.Type, List[ParallelMatching.this.global.Tree])]">Apply_CaseClass</a>(<a title="ParallelMatching.this.global.Type" id="541095">tpe</a>, <a title="List[ParallelMatching.this.global.Tree]" id="541096">args</a>)           =&gt; <span title="ParallelMatching.this.global.Tree" class="keyword">if</span> (<a href="#541096" title="List[ParallelMatching.this.global.Tree]">args</a>.<span title="=&gt; Boolean">isEmpty</span>) <a href="#540295" title="(tpe: ParallelMatching.this.global.Type)ParallelMatching.this.global.Tree">rebindEmpty</a>(<a href="#541095" title="ParallelMatching.this.global.Type">tpe</a>) <span class="keyword">else</span> <a href="#540291" title="ParallelMatching.this.global.Tree">opat</a> } ,
          <a href="#541101" title="ParallelMatching.this.global.Tree">{</a> <span title="Nothing" class="keyword">case</span> <a title="ParallelMatching.this.global.Tree" id="541102">x</a>                                    =&gt; <a href="../Global.scala.html#39309" title="(msg: String)Nothing">abort</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;Unexpected pattern: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#541102" title="ParallelMatching.this.global.Tree">x</a>.<span title="()java.lang.Class[_]">getClass</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; =&gt; &quot;)" class="string">&quot; =&gt; &quot;</span> + <a href="#541102" title="ParallelMatching.this.global.Tree">x</a>) }
        ) reduceLeft (<a href="#541132" title="(that: PartialFunction[ParallelMatching.this.global.Tree,ParallelMatching.this.global.Tree])PartialFunction[ParallelMatching.this.global.Tree,ParallelMatching.this.global.Tree]" id="25670">_</a> orElse <a href="#541133" title="PartialFunction[ParallelMatching.this.global.Tree,ParallelMatching.this.global.Tree]">_</a>)
        
        <a href="#540302" title="(v1: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">f</a>(<a href="../ast/TreeDSL.scala.html#42720" title="(x: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">unbind</a>(<a href="#540291" title="ParallelMatching.this.global.Tree">opat</a>))
      }
    
      <span class="keyword">val</span> <a title="List[MatchMatrix.this.Row]" id="540277">rows</a> = <a href="#537609" title="(f: (MatchMatrix.this.Row) =&gt; Traversable[MatchMatrix.this.Row])(implicit bf: scala.collection.generic.BuilderFactory[MatchMatrix.this.Row,List[MatchMatrix.this.Row],List[MatchMatrix.this.Row]])List[MatchMatrix.this.Row]">row1</a> <span title="scala.collection.generic.BuilderFactory[MatchMatrix.this.Row,List[MatchMatrix.this.Row],List#Coll]">flatMap</span> (<a href="#541181" title="(classifyPat: (ParallelMatching.this.global.Tree, Int) =&gt; ParallelMatching.this.global.Tree)List[MatchMatrix.this.Row]">_</a> expandAlternatives <a href="#540276" title="(opat: ParallelMatching.this.global.Tree,j: Int)ParallelMatching.this.global.Tree">classifyPat</a>)
      <span title="MatchMatrix.this.Rep" class="keyword">if</span> (<a href="#540277" title="List[MatchMatrix.this.Row]">rows</a>.<a title="(x$1: Int)Boolean" id="2975">length</a> != <a href="#537609" title="List[MatchMatrix.this.Row]">row1</a>.<span title="=&gt; Int">length</span>) <a href="#81349" title="(tvars: List[ParallelMatching.this.global.Symbol],row1: List[MatchMatrix.this.Row])MatchMatrix.this.Rep">make</a>(<a href="#537608" title="List[ParallelMatching.this.global.Symbol]">tvars</a>, <a href="#540277" title="List[MatchMatrix.this.Row]">rows</a>)  // recursive call if any change
      <span class="keyword">else</span> <a href="#541300" title="(tvars: List[ParallelMatching.this.global.Symbol],rows: List[MatchMatrix.this.Row])MatchMatrix.this.Rep">Rep</a>(<a href="#537608" title="List[ParallelMatching.this.global.Symbol]">tvars</a>, <a href="#540277" title="List[MatchMatrix.this.Row]">rows</a>).<a href="#81428" title="=&gt; MatchMatrix.this.Rep">checkExhaustive</a>
    }
    
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="()java.lang.String" id="81350">toString</a>() = {
      <span class="keyword">val</span> <a title="List[(Any, Traversable[Any])]" id="541323">toPrint</a>: <span title="List[(Any, Traversable[Any])]">List</span>[(Any, Traversable[Any])] = (
        (<a href="#81338" title="=&gt; List[List[ParallelMatching.this.global.Symbol]]">vss</a>.<span title="(f: ((List[ParallelMatching.this.global.Symbol], Int)) =&gt; (Int, List[ParallelMatching.this.global.Symbol]))(implicit bf: scala.collection.generic.BuilderFactory[(Int, List[ParallelMatching.this.global.Symbol]),List[(Int, List[ParallelMatching.this.global.Symbol])],List[(List[ParallelMatching.this.global.Symbol], Int)]])List[(Int, List[ParallelMatching.this.global.Symbol])]">zipWithIndex</span> <span title="scala.collection.generic.BuilderFactory[(Int, List[ParallelMatching.this.global.Symbol]),List[(Int, List[ParallelMatching.this.global.Symbol])],List#Coll]">map</span> (<a href="#541418" title="(List[ParallelMatching.this.global.Symbol], Int)">_</a>.<a title="=&gt; (Int, List[ParallelMatching.this.global.Symbol])" id="36629">swap</a>)) <a href="#541325" title="(p: ((Any, Traversable[Any])) =&gt; Boolean)List[(Any, Traversable[Any])]" id="25430">:::</a>
        <span title="[A](xs: A*)List[A]">List</span><span title="(xs: (Any, Traversable[Any])*)List[(Any, Traversable[Any])]">[</span><span title="(Any, Traversable[Any])">(</span>Any, Traversable[Any])]<span title="(prefix: List[(Any, Traversable[Any])])List[(Any, Traversable[Any])]">(</span>
          <span title="(y: scala.collection.mutable.HashMap[Int,ParallelMatching.this.global.Symbol])(java.lang.String, scala.collection.mutable.HashMap[Int,ParallelMatching.this.global.Symbol])" class="string">&quot;labels&quot;</span> -&gt; <a href="#81328" title="=&gt; scala.collection.mutable.HashMap[Int,ParallelMatching.this.global.Symbol]">labels</a>,
          <span title="(y: List[MatchMatrix.this.FinalState])(java.lang.String, List[MatchMatrix.this.FinalState])" class="string">&quot;targets&quot;</span> -&gt; <a href="#81336" title="=&gt; List[MatchMatrix.this.FinalState]">targets</a>,
          <span title="(y: scala.collection.mutable.BitSet)(java.lang.String, scala.collection.mutable.BitSet)" class="string">&quot;reached&quot;</span> -&gt; <a href="#81332" title="=&gt; scala.collection.mutable.BitSet">reached</a>,
          <span title="(y: List[ParallelMatching.this.global.Symbol])(java.lang.String, List[ParallelMatching.this.global.Symbol])" class="string">&quot;shortCuts&quot;</span> -&gt; <a href="#81330" title="=&gt; scala.collection.mutable.ListBuffer[ParallelMatching.this.global.Symbol]">shortCuts</a>.<a title="=&gt; List[ParallelMatching.this.global.Symbol]" id="61864">toList</a>
        ) filterNot (<a href="#541605" title="(Any, Traversable[Any])">_</a>.<span title="=&gt; Traversable[Any]">_2</span>.<a title="=&gt; Boolean" id="25376">isEmpty</a>)
      )

      <span class="keyword">val</span> <a title="List[String]" id="541324">strs</a> = <a href="#541323" title="(f: ((Any, Traversable[Any])) =&gt; String)(implicit bf: scala.collection.generic.BuilderFactory[String,List[String],List[(Any, Traversable[Any])]])List[String]">toPrint</a> <span title="scala.collection.generic.BuilderFactory[String,List[String],List#Coll]">map</span> <a href="#541616" title="String">{</a> <span title="String" class="keyword">case</span> (<a title="Any" id="541619">k</a>, <a title="Traversable[Any]" id="541620">v</a>) =&gt; <span title="implicit scala.Predef.stringWrapper : (x: String)scala.runtime.RichString" class="string">&quot;    %s = %s\n&quot;</span>.<span title="(args: Any*)String">format</span>(<a href="#541619" title="Any">k</a>, <a href="#541620" title="Traversable[Any]">v</a>) }
      <span title="java.lang.String" class="keyword">if</span> (<a href="#541323" title="List[(Any, Traversable[Any])]">toPrint</a>.<span title="=&gt; Boolean">isEmpty</span>) <span title="java.lang.String(&quot;MatchMatrix()&quot;)" class="string">&quot;MatchMatrix()&quot;</span>
      <span class="keyword">else</span> <span title="implicit scala.Predef.stringWrapper : (x: String)scala.runtime.RichString" class="string">&quot;MatchMatrix(\n%s)&quot;</span>.<span title="(args: Any*)String">format</span>(<a href="#541324" title="List[String]">strs</a> <span title="=&gt; String">mkString</span>)
    }
    
    /**
     * Encapsulates a symbol being matched on.
     * 
     * sym match { ... }
     *
     * results in Scrutinee(sym).
     *
     * Note that we only ever match on Symbols, not Trees: a temporary variable
     * is created for any expressions being matched on. 
     */ 
    case <span class="keyword">class</span> <a title="class Scrutinee extends java.lang.Object with ScalaObject with Product" id="541915">Scrutinee</a><span title="ScalaObject">(</span><span class="keyword">val</span> <a title="ParallelMatching.this.global.Symbol" id="541917">sym</a>: <a href="../symtab/Symbols.scala.html#26286" title="ParallelMatching.this.global.Symbol">Symbol</a>) {
      <span class="keyword">import</span> definitions._

      // presenting a face of our symbol
      <span class="keyword">def</span> <a title="=&gt; ParallelMatching.this.global.Type" id="541755">tpe</a>       = <a href="#541917" title="=&gt; ParallelMatching.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; ParallelMatching.this.global.Type">tpe</a>
      <span class="keyword">def</span> <a title="=&gt; scala.tools.nsc.util.Position" id="541756">pos</a>       = <a href="#541917" title="=&gt; ParallelMatching.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27006" title="=&gt; scala.tools.nsc.util.Position">pos</a>
      <span class="keyword">def</span> <a title="=&gt; List[ParallelMatching.this.global.Symbol]" id="541757">accessors</a> = <a href="#541917" title="=&gt; ParallelMatching.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27197" title="=&gt; List[ParallelMatching.this.global.Symbol]">caseFieldAccessors</a>
      <span class="keyword">def</span> <a title="=&gt; ParallelMatching.this.global.gen.global.Tree" id="541758">id</a>        = <a href="../ast/TreeDSL.scala.html#42764" title="(sym: ParallelMatching.this.global.Symbol)ParallelMatching.this.global.gen.global.Tree">ID</a>(<a href="#541917" title="=&gt; ParallelMatching.this.global.Symbol">sym</a>)   // attributed ident

      // tests
      <span class="keyword">def</span> <a title="=&gt; Boolean" id="541759">isDefined</a> = <a href="#541917" title="(x$1: AnyRef)Boolean">sym</a> ne <a href="../symtab/Symbols.scala.html#26293" title="object ParallelMatching.this.global.NoSymbol">NoSymbol</a>
      <span class="keyword">def</span> <a title="=&gt; Boolean" id="541760">isSimple</a>  = <a href="PatternNodes.scala.html#81451" title="implicit scala.tools.nsc.matching.PatternNodes.Types.enrichType : (_tpe: ParallelMatching.this.global.Type)ParallelMatching.this.Types.RichType">tpe</a>.<a href="PatternNodes.scala.html#538365" title="(x$1: Boolean)Boolean">isChar</a> || <a href="PatternNodes.scala.html#81451" title="implicit scala.tools.nsc.matching.PatternNodes.Types.enrichType : (_tpe: ParallelMatching.this.global.Type)ParallelMatching.this.Types.RichType">tpe</a>.<a href="PatternNodes.scala.html#538364" title="=&gt; Boolean">isInt</a>

      // sequences
      <span class="keyword">def</span> <a title="=&gt; ParallelMatching.this.global.Type" id="541761">seqType</a>   = <a href="#541755" title="=&gt; ParallelMatching.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30406" title="(clazz: ParallelMatching.this.global.Symbol)ParallelMatching.this.global.Type">widen</a> baseType <a href="../symtab/Definitions.scala.html#28560" title="=&gt; ParallelMatching.this.global.Symbol">SeqClass</a>
      <span class="keyword">def</span> <a title="=&gt; ParallelMatching.this.global.Type" id="541762">elemType</a>  = <a href="../symtab/Types.scala.html#30378" title="(n: Int)ParallelMatching.this.global.Type">tpe</a> typeArgs <span title="Int(0)" class="int">0</span>  // can this happen? if (seqType == NoType) error(&quot;...&quot;)

      // for propagating &quot;unchecked&quot; to synthetic vars
      <span class="keyword">def</span> <a title="=&gt; List[Long]" id="541763">flags</a>: <span title="List[Long]">List</span>[Long] = <span title="(xs: Long*)List[Long]">List</span><span title="(p: (Long) =&gt; Boolean)List[Long]">(</span>Flags.<span title="Long(274877906944L)">TRANS_FLAG</span>) filter (<a href="../symtab/Symbols.scala.html#27155" title="(mask: Long)Boolean">sym</a> hasFlag <a href="#541865" title="Long">_</a>)

      <span class="keyword">def</span> <a title="(other: ParallelMatching.this.global.Type)Unit" id="541764">assertIsSubtype</a>(<a title="ParallelMatching.this.global.Type" id="541870">other</a>: <a href="../symtab/Types.scala.html#26364" title="ParallelMatching.this.global.Type">Type</a>) = <a title="(assertion: Boolean,message: =&gt; Any)Unit" id="7945">assert</a>(<a href="../symtab/Types.scala.html#26561" title="(tp1: ParallelMatching.this.global.Type,tp2: ParallelMatching.this.global.Type)Boolean">isSubType</a>(<a href="#541755" title="=&gt; ParallelMatching.this.global.Type">tpe</a>, <a href="#541870" title="ParallelMatching.this.global.Type">other</a>), <span title="(x$1: Any)java.lang.String" class="string">&quot;problem &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#541755" title="=&gt; ParallelMatching.this.global.Type">tpe</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot; not &lt;: &quot;)" class="string">&quot; not &lt;: &quot;</span>+<a href="#541870" title="ParallelMatching.this.global.Type">other</a>)
      <span class="keyword">def</span> <a title="(headType: ParallelMatching.this.global.Type)MatchMatrix.this.Scrutinee" id="541765">casted</a>(<a title="ParallelMatching.this.global.Type" id="541898">headType</a>: <a href="../symtab/Types.scala.html#26364" title="ParallelMatching.this.global.Type">Type</a>) =
        <span title="MatchMatrix.this.Scrutinee" class="keyword">if</span> (<a href="../symtab/Types.scala.html#30422" title="(that: ParallelMatching.this.global.Type)Boolean">tpe</a> =:= <a href="#541898" title="ParallelMatching.this.global.Type">headType</a>) <a href="#541915" title="MatchMatrix.this.Scrutinee" class="keyword">this</a>
        <span class="keyword">else</span> <span title="MatchMatrix.this.Scrutinee" class="keyword">new</span> <a href="#541915" title="MatchMatrix.this.Scrutinee">Scrutinee</a>(<a href="TransMatcher.scala.html#79675" title="(pos: scala.tools.nsc.util.Position,tpe: ParallelMatching.this.global.Type,flags: List[Long],name: ParallelMatching.this.global.Name)ParallelMatching.this.global.Symbol">newVar</a>(<a href="#541756" title="=&gt; scala.tools.nsc.util.Position">pos</a>, <a href="#541898" title="ParallelMatching.this.global.Type">headType</a>, flags = <a href="#541763" title="=&gt; List[Long]">flags</a>))
    }

    case <span class="keyword">class</span> <a title="class Patterns extends java.lang.Object with ScalaObject with Product" id="542117">Patterns</a><span title="ScalaObject">(</span><a title="MatchMatrix.this.Scrutinee" id="542119">scrut</a>: <a href="#541915" title="MatchMatrix.this.Scrutinee">Scrutinee</a>, <a title="List[ParallelMatching.this.Pattern]" id="542120">ps</a>: <span title="List[ParallelMatching.this.Pattern]">List</span>[Pattern]) {
      <span class="keyword">private</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="List[ParallelMatching.this.global.Tree]" id="541993">trees</a> = <a href="#542120" title="(f: (ParallelMatching.this.Pattern) =&gt; ParallelMatching.this.global.Tree)(implicit bf: scala.collection.generic.BuilderFactory[ParallelMatching.this.global.Tree,List[ParallelMatching.this.global.Tree],List[ParallelMatching.this.Pattern]])List[ParallelMatching.this.global.Tree]">ps</a> <span title="scala.collection.generic.BuilderFactory[ParallelMatching.this.global.Tree,List[ParallelMatching.this.global.Tree],List#Coll]">map</span> (<a href="#542033" title="ParallelMatching.this.Pattern">_</a>.<a href="#536968" title="=&gt; ParallelMatching.this.global.Tree">tree</a>)
      <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="ParallelMatching.this.Pattern" id="541995">head</a> = <a href="#542120" title="=&gt; List[ParallelMatching.this.Pattern]">ps</a>.<span title="=&gt; ParallelMatching.this.Pattern">head</span>
      <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="MatchMatrix.this.Patterns" id="541997">tail</a> = <a href="#542117" title="(scrut: MatchMatrix.this.Scrutinee,ps: List[ParallelMatching.this.Pattern])MatchMatrix.this.Patterns">Patterns</a>(<a href="#542119" title="=&gt; MatchMatrix.this.Scrutinee">scrut</a>, <a href="#542120" title="=&gt; List[ParallelMatching.this.Pattern]">ps</a>.<span title="=&gt; List[ParallelMatching.this.Pattern]">tail</span>)
      <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="ParallelMatching.this.global.Tree" id="541999">last</a> = <a href="#542120" title="=&gt; List[ParallelMatching.this.Pattern]">ps</a>.<span title="=&gt; ParallelMatching.this.Pattern">last</span>.<a href="#536968" title="=&gt; ParallelMatching.this.global.Tree">tree</a>
      <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="ParallelMatching.this.global.Type" id="542001">headType</a> = <a href="#541994" title="=&gt; ParallelMatching.this.Pattern">head</a>.<a href="#536956" title="=&gt; ParallelMatching.this.global.Type">tpeIfHead</a>
      <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Boolean" id="542003">isCaseHead</a> = <a href="PatternNodes.scala.html#79507" title="(t: ParallelMatching.this.global.Type)Boolean">isCaseClass</a>(<a href="#542000" title="=&gt; ParallelMatching.this.global.Type">headType</a>)
      <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="List[ParallelMatching.this.global.Tree]" id="542005">dummies</a> = <span title="List[ParallelMatching.this.global.Tree]" class="keyword">if</span> (<a href="#542002" title="=&gt; Boolean">isCaseHead</a>) <a href="PatternNodes.scala.html#79516" title="(i: Int)List[ParallelMatching.this.global.Tree]">getDummies</a>(<a href="#542000" title="=&gt; ParallelMatching.this.global.Type">headType</a>.<a href="../symtab/Types.scala.html#30366" title="=&gt; ParallelMatching.this.global.Symbol">typeSymbol</a>.<a href="../symtab/Symbols.scala.html#27197" title="=&gt; List[ParallelMatching.this.global.Symbol]">caseFieldAccessors</a>.<span title="=&gt; Int">length</span>) <span class="keyword">else</span> <span title="object Nil">Nil</span>
      <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Int" id="542007">size</a> = <a href="#542120" title="=&gt; List[ParallelMatching.this.Pattern]">ps</a>.<span title="=&gt; Int">length</span>

      <span class="keyword">def</span> <a title="(i: Int)ParallelMatching.this.global.Tree" id="542008">apply</a>(<a title="Int" id="542146">i</a>: <span title="Int">Int</span>): <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a> = <a href="#542120" title="(n: Int)ParallelMatching.this.Pattern">ps</a>(<a href="#542146" title="Int">i</a>).<a href="#536968" title="=&gt; ParallelMatching.this.global.Tree">tree</a>
      <span class="keyword">def</span> <a title="()List[(ParallelMatching.this.global.Tree, Int)]" id="542009">zip</a>() = <a href="#541992" title="=&gt; List[ParallelMatching.this.global.Tree]">trees</a>.<span title="(implicit bf: scala.collection.generic.BuilderFactory[(ParallelMatching.this.global.Tree, Int),List[(ParallelMatching.this.global.Tree, Int)],List[ParallelMatching.this.global.Tree]])List[(ParallelMatching.this.global.Tree, Int)]">zipWithIndex</span>
      <span class="keyword">def</span> <a title="[T](others: List[T])List[(ParallelMatching.this.global.Tree, T)]" id="542010">zip</a>[<a title="&gt;: Nothing &lt;: Any" id="542012">T</a>](<a title="List[T]" id="542243">others</a>: <span title="List[T]">List</span>[T]) = <a href="#541992" title="(that: Iterable[T])(implicit bf: scala.collection.generic.BuilderFactory[(ParallelMatching.this.global.Tree, T),List[(ParallelMatching.this.global.Tree, T)],List[ParallelMatching.this.global.Tree]])List[(ParallelMatching.this.global.Tree, T)]">trees</a> <span title="scala.collection.generic.BuilderFactory[(ParallelMatching.this.global.Tree, T),List[(ParallelMatching.this.global.Tree, T)],List#Coll]">zip</span> <a href="#542243" title="List[T]">others</a>

      <span class="keyword">def</span> <a title="(pat: ParallelMatching.this.Pattern)Boolean" id="542013">isObjectTest</a>(<a title="ParallelMatching.this.Pattern" id="542341">pat</a>: <a href="#536944" title="ParallelMatching.this.Pattern">Pattern</a>)  = <a href="#536965" title="(head: ParallelMatching.this.global.Type)Boolean">pat</a> isObjectTest <a href="#542000" title="=&gt; ParallelMatching.this.global.Type">headType</a>
      <span class="keyword">def</span> <a title="(pat: ParallelMatching.this.global.Tree)Boolean" id="542014">isObjectTest</a>(<a title="ParallelMatching.this.global.Tree" id="542346">pat</a>: <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a>)     = <a href="#536944" title="(tree: ParallelMatching.this.global.Tree)ParallelMatching.this.Pattern">Pattern</a><a href="#536965" title="(head: ParallelMatching.this.global.Type)Boolean">(</a><a href="#542346" title="ParallelMatching.this.global.Tree">pat</a>) isObjectTest <a href="#542000" title="=&gt; ParallelMatching.this.global.Type">headType</a>
      
      <span class="keyword">def</span> <a title="()Option[(List[ParallelMatching.this.global.Tree], Option[ParallelMatching.this.global.Tree])]" id="542015">extractSimpleSwitch</a>(): <span title="Option[(List[ParallelMatching.this.global.Tree], Option[ParallelMatching.this.global.Tree])]">Option</span>[(List[Tree], Option[Tree])] = {
        <span class="keyword">def</span> <a title="(x: ParallelMatching.this.global.Tree)Boolean" id="542358">isSwitchableDefault</a>(<a title="ParallelMatching.this.global.Tree" id="542362">x</a>: <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a>) = <a href="#79582" title="(t: ParallelMatching.this.global.Tree)Boolean">isSwitchableConst</a><span title="(x$1: Boolean)Boolean">(</span><a href="#542362" title="ParallelMatching.this.global.Tree">x</a>) || <a href="#79586" title="(t: ParallelMatching.this.global.Tree)Boolean">isDefaultPattern</a>(<a href="#542362" title="ParallelMatching.this.global.Tree">x</a>)
        <span class="keyword">val</span> <a href="#542360" title="(List[ParallelMatching.this.global.Tree], List[ParallelMatching.this.global.Tree])">(</a><a href="#542359" title="List[ParallelMatching.this.global.Tree]" id="542360">lits</a>, <a href="#542359" title="List[ParallelMatching.this.global.Tree]" id="542361">others</a>) = <a href="#541992" title="(p: (ParallelMatching.this.global.Tree) =&gt; Boolean)(List[ParallelMatching.this.global.Tree], List[ParallelMatching.this.global.Tree])">trees</a> <span title="(List[ParallelMatching.this.global.Tree], List[ParallelMatching.this.global.Tree]) @unchecked">span</span> <a href="#79582" title="(t: ParallelMatching.this.global.Tree)Boolean">isSwitchableConst</a>
        <a href="#542361" title="List[ParallelMatching.this.global.Tree]">others</a> <span title="Option[(List[ParallelMatching.this.global.Tree], Option[ParallelMatching.this.global.Tree])]" class="keyword">match</span> {
          <span title="Some[(List[ParallelMatching.this.global.Tree], object None)]" class="keyword">case</span> <span title="object Nil">Nil</span>                                =&gt; <span title="(x: (List[ParallelMatching.this.global.Tree], object None))Some[(List[ParallelMatching.this.global.Tree], object None)]">Some</span><span title="(_1: List[ParallelMatching.this.global.Tree],_2: object None)(List[ParallelMatching.this.global.Tree], object None)">(</span><a href="#542360" title="List[ParallelMatching.this.global.Tree]">lits</a>, <span title="object None">None</span>)
          // TODO: This needs to also allow the case that the last is a compatible type pattern.
          <span title="Some[(List[ParallelMatching.this.global.Tree], Some[ParallelMatching.this.global.Tree])]" class="keyword">case</span> <a href="#542410" title="(x: List[ParallelMatching.this.global.Tree])Some[List[ParallelMatching.this.global.Tree]]">List</a>(<a title="ParallelMatching.this.global.Tree" id="542419">x</a>) <span class="keyword">if</span> <a href="#542358" title="(x: ParallelMatching.this.global.Tree)Boolean">isSwitchableDefault</a>(<a href="#542419" title="ParallelMatching.this.global.Tree">x</a>)  =&gt; <span title="(x: (List[ParallelMatching.this.global.Tree], Some[ParallelMatching.this.global.Tree]))Some[(List[ParallelMatching.this.global.Tree], Some[ParallelMatching.this.global.Tree])]">Some</span><span title="(_1: List[ParallelMatching.this.global.Tree],_2: Some[ParallelMatching.this.global.Tree])(List[ParallelMatching.this.global.Tree], Some[ParallelMatching.this.global.Tree])">(</span><a href="#542360" title="List[ParallelMatching.this.global.Tree]">lits</a>, <span title="(x: ParallelMatching.this.global.Tree)Some[ParallelMatching.this.global.Tree]">Some</span>(<a href="#542419" title="ParallelMatching.this.global.Tree">x</a>))
          <span title="None.type" class="keyword">case</span> _                                  =&gt; <span title="object None">None</span>
        } 
      }
      
      // an unapply for which we don't need a type test (the scrutinee's static type conforms
      // to the unapply's argument type.)
      <span class="keyword">object</span> <a title="object Patterns.this.SafeUnapply" id="542016">SafeUnapply</a> <span title="ScalaObject">{</span>
        <span class="keyword">def</span> <a title="(x: ParallelMatching.this.global.Tree)Boolean" id="542442">unapply</a>(<a title="ParallelMatching.this.global.Tree" id="542446">x</a>: <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a>): <span title="Boolean">Boolean</span> = <a href="../ast/TreeDSL.scala.html#42709" title="(x: ParallelMatching.this.global.Tree)(f: PartialFunction[ParallelMatching.this.global.Tree,Boolean])Boolean">cond</a>(<a href="#542446" title="ParallelMatching.this.global.Tree">x</a>) <a href="#542458" title="Boolean">{</a> <span title="Boolean" class="keyword">case</span> <a href="PatternNodes.scala.html#537314" title="(x: ParallelMatching.this.global.Tree)Option[(List[ParallelMatching.this.global.Symbol], ParallelMatching.this.global.Type, List[ParallelMatching.this.global.Tree])]">__UnApply</a>(_,<a title="ParallelMatching.this.global.Type" id="542464">tpe</a>,_) =&gt; <a href="#542119" title="=&gt; MatchMatrix.this.Scrutinee">scrut</a>.<a href="../symtab/Types.scala.html#30421" title="(that: ParallelMatching.this.global.Type)Boolean">tpe</a> &lt;:&lt; <a href="#542464" title="ParallelMatching.this.global.Type">tpe</a> }
      }
      
      <span class="keyword">object</span> <a title="object Patterns.this.SimpleSwitch" id="542018">SimpleSwitch</a> <span title="ScalaObject">{</span>
        // TODO - scala&gt; (5: Any) match { case 5 =&gt; 5 ; case 6 =&gt; 7 }
        // ... should compile to a switch.  It doesn't because the scrut isn't Int/Char, but
        // that could be handle in an if/else since every pattern requires an Int.
        // More immediately, Byte and Short scruts should also work.
        <span class="keyword">def</span> <a title="(x: MatchMatrix.this.Patterns)Option[(List[ParallelMatching.this.global.Tree], Option[ParallelMatching.this.global.Tree])]" id="542472">unapply</a>(<a title="MatchMatrix.this.Patterns" id="542476">x</a>: <a href="#542117" title="MatchMatrix.this.Patterns">Patterns</a>) = <span title="Option[(List[ParallelMatching.this.global.Tree], Option[ParallelMatching.this.global.Tree])]" class="keyword">if</span> (<a href="#542476" title="MatchMatrix.this.Patterns">x</a>.<a href="#542119" title="=&gt; MatchMatrix.this.Scrutinee">scrut</a>.<a href="#541760" title="=&gt; Boolean">isSimple</a>) <a href="#542476" title="MatchMatrix.this.Patterns">x</a>.<a href="#542015" title="()Option[(List[ParallelMatching.this.global.Tree], Option[ParallelMatching.this.global.Tree])]">extractSimpleSwitch</a> <span class="keyword">else</span> <span title="object None">None</span>
      }

      <span class="keyword">def</span> <a title="(rest: MatchMatrix.this.Rep)MatchMatrix.this.RuleApplication" id="542020">mkRule</a>(<a title="MatchMatrix.this.Rep" id="542481">rest</a>: <a href="#541300" title="MatchMatrix.this.Rep">Rep</a>): <a href="#81363" title="MatchMatrix.this.RuleApplication">RuleApplication</a> =
        <a href="#79575" title="(s: String,x: MatchMatrix.this.RuleApplication)MatchMatrix.this.RuleApplication">logAndReturn</a>(<span title="java.lang.String(&quot;mkRule: &quot;)" class="string">&quot;mkRule: &quot;</span>, <a href="#541994" title="=&gt; ParallelMatching.this.Pattern">head</a>.<a href="#536968" title="=&gt; ParallelMatching.this.global.Tree">tree</a> <span title="MatchMatrix.this.RuleApplication" class="keyword">match</span> {
            <span title="MatchMatrix.this.MixEquals" class="keyword">case</span> <a title="ParallelMatching.this.global.Tree" id="542503">x</a> <span class="keyword">if</span> <a href="PatternNodes.scala.html#79505" title="(t: ParallelMatching.this.global.Type)Boolean">isEquals</a>(<a href="#542503" title="ParallelMatching.this.global.Tree">x</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; ParallelMatching.this.global.Type">tpe</a>)                 =&gt; <span title="MatchMatrix.this.MixEquals" class="keyword">new</span> <a href="#81374" title="MatchMatrix.this.MixEquals">MixEquals</a>(<a href="#542117" title="MatchMatrix.this.Patterns" class="keyword">this</a>, <a href="#542481" title="MatchMatrix.this.Rep">rest</a>)
            <span title="MatchMatrix.this.MixSequenceStar" class="keyword">case</span> <a title="ParallelMatching.this.global.ArrayValue" id="542541">x</a>: <a href="../ast/Trees.scala.html#26835" title="ParallelMatching.this.global.ArrayValue">ArrayValue</a> <span class="keyword">if</span> <a href="#79585" title="(t: ParallelMatching.this.global.Tree)Boolean">isRightIgnoring</a>(<a href="#542541" title="ParallelMatching.this.global.ArrayValue">x</a>)  =&gt; <span title="MatchMatrix.this.MixSequenceStar" class="keyword">new</span> <a href="#81373" title="MatchMatrix.this.MixSequenceStar">MixSequenceStar</a>(<a href="#542117" title="MatchMatrix.this.Patterns" class="keyword">this</a>, <a href="#542481" title="MatchMatrix.this.Rep">rest</a>)
            <span title="MatchMatrix.this.MixSequence" class="keyword">case</span> <a title="ParallelMatching.this.global.ArrayValue" id="542577">x</a>: <a href="../ast/Trees.scala.html#26835" title="ParallelMatching.this.global.ArrayValue">ArrayValue</a>                        =&gt; <span title="MatchMatrix.this.MixSequence" class="keyword">new</span> <a href="#81372" title="MatchMatrix.this.MixSequence">MixSequence</a>(<a href="#542117" title="MatchMatrix.this.Patterns" class="keyword">this</a>, <a href="#542481" title="MatchMatrix.this.Rep">rest</a>)
            <span title="MatchMatrix.this.MixUnapply" class="keyword">case</span> <a href="#542442" title="(x: ParallelMatching.this.global.Tree)Boolean">SafeUnapply</a>()                        =&gt; <span title="MatchMatrix.this.MixUnapply" class="keyword">new</span> <a href="#81371" title="MatchMatrix.this.MixUnapply">MixUnapply</a>(<a href="#542117" title="MatchMatrix.this.Patterns" class="keyword">this</a>, <a href="#542481" title="MatchMatrix.this.Rep">rest</a>)
            <span title="MatchMatrix.this.RuleApplication" class="keyword">case</span> _ =&gt; <a href="#542117" title="MatchMatrix.this.Patterns" class="keyword">this</a> <span title="MatchMatrix.this.RuleApplication" class="keyword">match</span> {
              <span title="MatchMatrix.this.MixLiteralInts" class="keyword">case</span> <a href="#542472" title="(x: MatchMatrix.this.Patterns)Option[(List[ParallelMatching.this.global.Tree], Option[ParallelMatching.this.global.Tree])]">SimpleSwitch</a>(<a title="List[ParallelMatching.this.global.Tree]" id="542620">lits</a>, <a title="Option[ParallelMatching.this.global.Tree]" id="542621">d</a>)              =&gt; <span title="MatchMatrix.this.MixLiteralInts" class="keyword">new</span> <a href="#81370" title="MatchMatrix.this.MixLiteralInts">MixLiteralInts</a>(<a href="#542117" title="MatchMatrix.this.Patterns" class="keyword">this</a>, <a href="#542481" title="MatchMatrix.this.Rep">rest</a>, <a href="#542620" title="List[ParallelMatching.this.global.Tree]">lits</a>, <a href="#542621" title="Option[ParallelMatching.this.global.Tree]">d</a>)
              <span title="MatchMatrix.this.MixTypes" class="keyword">case</span> _                                  =&gt; <span title="MatchMatrix.this.MixTypes" class="keyword">new</span> <a href="#81378" title="MatchMatrix.this.MixTypes">MixTypes</a>(<a href="#542117" title="MatchMatrix.this.Patterns" class="keyword">this</a>, <a href="#542481" title="MatchMatrix.this.Rep">rest</a>)
            }
          }
        )
    }

    /**
     * Class encapsulating a guard expression in a pattern match:
     *   case ... if(tree) =&gt; ...
     */ 
    case <span class="keyword">class</span> <a title="class Guard extends java.lang.Object with ScalaObject with Product" id="537587">Guard</a><span title="ScalaObject">(</span><a title="ParallelMatching.this.global.Tree" id="537597">tree</a>: <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a>) {
      <span class="keyword">def</span> <a title="=&gt; Boolean" id="537592">isEmpty</a>   = <a href="#537597" title="(x$1: AnyRef)Boolean">tree</a> eq <a href="../ast/Trees.scala.html#26761" title="object ParallelMatching.this.global.EmptyTree">EmptyTree</a>
      <span class="keyword">def</span> <a title="=&gt; MatchMatrix.this.Guard" id="537593">duplicate</a> = <a href="#537587" title="(tree: ParallelMatching.this.global.Tree)MatchMatrix.this.Guard">Guard</a>(<a href="#537597" title="=&gt; ParallelMatching.this.global.Tree">tree</a>.<a href="../ast/Trees.scala.html#29573" title="=&gt; Guard.this.tree.type">duplicate</a>)
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="()java.lang.String" id="537594">toString</a>() = <span title="java.lang.String" class="keyword">if</span> (<a href="#537592" title="=&gt; Boolean">isEmpty</a>) <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span> <span class="keyword">else</span> <span title="(args: Any*)String" class="string">&quot; // if %s&quot;</span> format <a href="#537597" title="=&gt; ParallelMatching.this.global.Tree">tree</a>
    }
    <span class="keyword">val</span> <a title="MatchMatrix.this.Guard" id="81360">NoGuard</a> = <a href="#537587" title="(tree: ParallelMatching.this.global.Tree)MatchMatrix.this.Guard">Guard</a>(<a href="../ast/Trees.scala.html#26761" title="object ParallelMatching.this.global.EmptyTree">EmptyTree</a>)

    /** &quot;The Mixture Rule&quot;

          {v=pat1, pats1 .. } {q1} 
    match {..               } {..} 
          {v=patn, patsn .. } {qn} 

    The is the real work-horse of the algorithm. There is some column whose top-most pattern is a 
    constructor. (Forsimplicity, itisdepicted above asthe left-most column, but anycolumn will do.) 
    The goal is to build a test state with the variablevand some outgoing arcs (one for each construc- 
    tor and possibly a default arc). Foreach constructorcin the selected column, its arc is deﬁned as 
    follows: 

    Let {i1,...,ij} be the rows-indices of the patterns in the column that match c. Since the pat- 
    terns are viewed as regular expressions, this will be the indices of the patterns that either 
    have the same constructor c, or are wildcards. 

    Let {pat1,...,patj} be the patterns in the column corresponding to the indices computed 
    above, and let nbe the arity of the constructor c, i.e. the number of sub-patterns it has. For 
    eachpati, its n sub-patterns are extracted; if pat i is a wildcard, nwildcards are produced 
    instead, each tagged with the right path variable. This results in a pattern matrix with n 
    columns and j rows. This matrix is then appended to the result of selecting, from each col- 
    umn in the rest of the original matrix, those rows whose indices are in {i1,...,ij}. Finally 
    the indices are used to select the corresponding ﬁnal states that go with these rows. Note 
    that the order of the indices is signiﬁcant; selected rows do not change their relative orders. 
    The arc for the constructor c is now deﬁned as (c’,state), where c’ is cwith any 
    immediate sub-patterns replaced by their path variables (thus c’ is a simple pattern), and 
    state is the result of recursively applying match to the new matrix and the new sequence 
    of ﬁnal states. 

    Finally, the possibility for matching failure is considered. If the set of constructors is exhaustive, 
    then no more arcs are computed. Otherwise, a default arc(_,state)is the last arc. If there are 
    any wildcard patterns in the selected column, then their rows are selected from the rest of the 
    matrix and the ﬁnal states, and the state is the result of applying match to the new matrix and 
    states. Otherwise,the error state is used after its reference count has been incremented. 
    **/

    /** picks which rewrite rule to apply
     *  @precondition: column does not contain alternatives
     */
    <span class="keyword">def</span> <a title="(scrut: MatchMatrix.this.Scrutinee,column: List[ParallelMatching.this.global.Tree],rest: MatchMatrix.this.Rep)MatchMatrix.this.RuleApplication" id="81362">MixtureRule</a>(<a title="MatchMatrix.this.Scrutinee" id="542851">scrut</a>: <a href="#541915" title="MatchMatrix.this.Scrutinee">Scrutinee</a>, <a title="List[ParallelMatching.this.global.Tree]" id="542852">column</a>: <span title="List[ParallelMatching.this.global.Tree]">List</span>[Tree], <a title="MatchMatrix.this.Rep" id="542853">rest</a>: <a href="#541300" title="MatchMatrix.this.Rep">Rep</a>): <a href="#81363" title="MatchMatrix.this.RuleApplication">RuleApplication</a> =
      <a href="#542117" title="(scrut: MatchMatrix.this.Scrutinee,ps: List[ParallelMatching.this.Pattern])MatchMatrix.this.Patterns">Patterns</a><a href="#542020" title="(rest: MatchMatrix.this.Rep)MatchMatrix.this.RuleApplication">(</a><a href="#542851" title="MatchMatrix.this.Scrutinee">scrut</a>, <a href="#542852" title="(f: (ParallelMatching.this.global.Tree) =&gt; ParallelMatching.this.Pattern)(implicit bf: scala.collection.generic.BuilderFactory[ParallelMatching.this.Pattern,List[ParallelMatching.this.Pattern],List[ParallelMatching.this.global.Tree]])List[ParallelMatching.this.Pattern]">column</a> <span title="scala.collection.generic.BuilderFactory[ParallelMatching.this.Pattern,List[ParallelMatching.this.Pattern],List#Coll]">map</span> <a href="#536944" title="object ParallelMatching.this.Pattern">Pattern</a>) mkRule <a href="#542853" title="MatchMatrix.this.Rep">rest</a>

    <span class="keyword">sealed</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class RuleApplication extends java.lang.Object with ScalaObject" id="81363">RuleApplication</a> <span title="ScalaObject">{</span>
      <span class="keyword">def</span> <a title="=&gt; MatchMatrix.this.Patterns" id="542484">pats</a>: <a href="#542117" title="MatchMatrix.this.Patterns">Patterns</a>
      <span class="keyword">def</span> <a title="=&gt; MatchMatrix.this.Rep" id="542485">rest</a>: <a href="#541300" title="MatchMatrix.this.Rep">Rep</a>
      <span class="keyword">lazy</span> <span class="keyword">val</span> Patterns<a href="#542489" title="(MatchMatrix.this.Scrutinee, List[ParallelMatching.this.Pattern])" id="542487">(</a><a href="#542486" title="MatchMatrix.this.Scrutinee" id="542489">scrut</a>, <a href="#542486" title="List[ParallelMatching.this.Pattern]" id="542491">patterns</a>) = <a href="#542484" title="=&gt; MatchMatrix.this.Patterns">pats</a>
      <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="ParallelMatching.this.Pattern" id="542493">head</a> = <a href="#542484" title="=&gt; MatchMatrix.this.Patterns">pats</a>.<a href="#541994" title="=&gt; ParallelMatching.this.Pattern">head</a>
      <span class="keyword">private</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="ParallelMatching.this.global.Symbol" id="542495">sym</a> = <a href="#542488" title="=&gt; MatchMatrix.this.Scrutinee">scrut</a>.<a href="#541917" title="=&gt; ParallelMatching.this.global.Symbol">sym</a>

      /** Creates Some(fail rule) even if xs == Nil. */
      <span class="keyword">def</span> <a title="(xs: List[MatchMatrix.this.Row])Option[MatchMatrix.this.Rep]" id="542496">mkFail</a>(<a title="List[MatchMatrix.this.Row]" id="542921">xs</a>: <span title="List[MatchMatrix.this.Row]">List</span>[Row]): <span title="Option[MatchMatrix.this.Rep]">Option</span>[Rep] = <span title="(x: MatchMatrix.this.Rep)Some[MatchMatrix.this.Rep]">Some</span>(<a href="#81349" title="(tvars: List[ParallelMatching.this.global.Symbol],row1: List[MatchMatrix.this.Row])MatchMatrix.this.Rep">make</a>(<a href="#542494" title="=&gt; ParallelMatching.this.global.Symbol">sym</a> <a href="#542925" title="ParallelMatching.this.global.Symbol">::</a> <a href="#542485" title="=&gt; MatchMatrix.this.Rep">rest</a>.<a href="#541302" title="(x: ParallelMatching.this.global.Symbol)List[ParallelMatching.this.global.Symbol]">tvars</a>, <a href="#542921" title="List[MatchMatrix.this.Row]">xs</a>))
      
      /** Returns None if xs == Nil, Some(fail rule) otherwise. */
      <span class="keyword">def</span> <a title="(xs: List[MatchMatrix.this.Row])Option[MatchMatrix.this.Rep]" id="542497">mkFailOpt</a>(<a title="List[MatchMatrix.this.Row]" id="542938">xs</a>: <span title="List[MatchMatrix.this.Row]">List</span>[Row]): <span title="Option[MatchMatrix.this.Rep]">Option</span>[Rep] = <span title="Option[MatchMatrix.this.Rep]" class="keyword">if</span> (<a href="#542938" title="List[MatchMatrix.this.Row]">xs</a>.<span title="=&gt; Boolean">isEmpty</span>) <span title="object None">None</span> <span class="keyword">else</span> <a href="#542496" title="(xs: List[MatchMatrix.this.Row])Option[MatchMatrix.this.Rep]">mkFail</a>(<a href="#542938" title="List[MatchMatrix.this.Row]">xs</a>)
        
      /** Splices scrutinee's symbol in between the given lists */
      <span class="keyword">def</span> <a title="(pre: List[ParallelMatching.this.global.Symbol],post: List[ParallelMatching.this.global.Symbol],rows: List[MatchMatrix.this.Row])MatchMatrix.this.Rep" id="542498">mkNewRep</a>(<a title="List[ParallelMatching.this.global.Symbol]" id="542942">pre</a>: <span title="List[ParallelMatching.this.global.Symbol]">List</span>[Symbol], <a title="List[ParallelMatching.this.global.Symbol]" id="542943">post</a>: <span title="List[ParallelMatching.this.global.Symbol]">List</span>[Symbol], <a title="List[MatchMatrix.this.Row]" id="542944">rows</a>: <span title="List[MatchMatrix.this.Row]">List</span>[Row]) =
        <a href="#81349" title="(tvars: List[ParallelMatching.this.global.Symbol],row1: List[MatchMatrix.this.Row])MatchMatrix.this.Rep">make</a>(<a href="#542942" title="List[ParallelMatching.this.global.Symbol]">pre</a> <a href="#542947" title="List[ParallelMatching.this.global.Symbol]">:::</a> <a href="#542494" title="=&gt; ParallelMatching.this.global.Symbol">sym</a> <a href="#542948" title="(prefix: List[ParallelMatching.this.global.Symbol])List[ParallelMatching.this.global.Symbol]">::</a> <a href="#542943" title="(x: ParallelMatching.this.global.Symbol)List[ParallelMatching.this.global.Symbol]">post</a>, <a href="#542944" title="List[MatchMatrix.this.Row]">rows</a>)

      /** translate outcome of the rule application into code (possible involving recursive application of rewriting) */
      <span class="keyword">def</span> <a title="()ParallelMatching.this.global.Tree" id="542499">tree</a>(): <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a> 
    }

    case <span class="keyword">class</span> <a title="class ErrorRule extends MatchMatrix.this.RuleApplication with ScalaObject with Product" id="542992">ErrorRule</a><span title="ScalaObject">(</span>) <span class="keyword">extends</span> <a href="#81363" title="MatchMatrix.this.RuleApplication">RuleApplication</a> {
      <span class="keyword">def</span> <a title="=&gt; MatchMatrix.this.Patterns" id="542967">pats</a>: <a href="#542117" title="MatchMatrix.this.Patterns">Patterns</a> = <a href="MatchUtil.scala.html#79549" title="=&gt; Nothing">impossible</a>
      <span class="keyword">def</span> <a title="=&gt; MatchMatrix.this.Rep" id="542968">rest</a>: <a href="#541300" title="MatchMatrix.this.Rep">Rep</a> = <a href="MatchUtil.scala.html#79549" title="=&gt; Nothing">impossible</a>
      <span class="keyword">final</span> <span class="keyword">def</span> <a title="()ParallelMatching.this.global.Tree" id="542969">tree</a>() = <a href="#81326" title="=&gt; ParallelMatching.this.global.Tree">failTree</a>
    }

    /** {case ... if guard =&gt; bx} else {guardedRest} */
    /** VariableRule: The top-most rows has only variable (non-constructor) patterns. */
    case <span class="keyword">class</span> <a title="class VariableRule extends MatchMatrix.this.RuleApplication with ScalaObject with Product" id="543119">VariableRule</a><span title="ScalaObject">(</span><a title="ParallelMatching.this.Bindings" id="552231">subst</a>: <a href="PatternNodes.scala.html#79542" title="ParallelMatching.this.Bindings">Bindings</a>, <a title="MatchMatrix.this.Guard" id="552232">guard</a>: <a href="#537587" title="MatchMatrix.this.Guard">Guard</a>, <a title="MatchMatrix.this.Rep" id="552233">guardedRest</a>: <a href="#541300" title="MatchMatrix.this.Rep">Rep</a>, <a title="Int" id="552234">bx</a>: <span title="Int">Int</span>) <span class="keyword">extends</span> <a href="#81363" title="MatchMatrix.this.RuleApplication">RuleApplication</a> {
      <span class="keyword">def</span> <a title="=&gt; MatchMatrix.this.Patterns" id="543030">pats</a>: <a href="#542117" title="MatchMatrix.this.Patterns">Patterns</a> = <a href="MatchUtil.scala.html#79549" title="=&gt; Nothing">impossible</a>
      <span class="keyword">def</span> <a title="=&gt; MatchMatrix.this.Rep" id="543031">rest</a>: <a href="#541300" title="MatchMatrix.this.Rep">Rep</a> = <a href="#552233" title="=&gt; MatchMatrix.this.Rep">guardedRest</a>

      <span class="keyword">final</span> <span class="keyword">def</span> <a title="()ParallelMatching.this.global.Tree" id="543032">tree</a>(): <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a> = {
        <span class="keyword">def</span> <a title="=&gt; ParallelMatching.this.global.Tree" id="543050">body</a>      = <a href="#81348" title="(bx: Int,subst: ParallelMatching.this.Bindings)ParallelMatching.this.global.Tree">requestBody</a>(<a href="#552234" title="=&gt; Int">bx</a>, <a href="#552231" title="=&gt; ParallelMatching.this.Bindings">subst</a>)
        <span class="keyword">def</span> <a title="=&gt; ParallelMatching.this.global.If" id="543051">guardTest</a> = <a href="../ast/TreeDSL.scala.html#42756" title="(tree: ParallelMatching.this.global.Tree)ParallelMatching.this.CODE.IfStart">IF</a> <a href="../ast/TreeDSL.scala.html#50041" title="(x: ParallelMatching.this.global.Tree)ParallelMatching.this.CODE.IfStart">(</a><a href="#552232" title="=&gt; MatchMatrix.this.Guard">guard</a>.<a href="#537593" title="=&gt; MatchMatrix.this.Guard">duplicate</a>.<a href="#537597" title="=&gt; ParallelMatching.this.global.Tree">tree</a>) <a href="../ast/TreeDSL.scala.html#50042" title="(elsep: ParallelMatching.this.global.Tree)ParallelMatching.this.global.If">THEN</a> <a href="#543050" title="=&gt; ParallelMatching.this.global.Tree">body</a> ELSE <a href="#552233" title="=&gt; MatchMatrix.this.Rep">guardedRest</a>.<a href="#81420" title="()ParallelMatching.this.global.Tree">toTree</a>

        <a href="../typechecker/Typers.scala.html#42872" title="(tree: ParallelMatching.this.global.analyzer.global.Tree)ParallelMatching.this.global.analyzer.global.Tree">typer</a> typed(
          <span title="ParallelMatching.this.global.analyzer.global.Tree" class="keyword">if</span> (<a href="#552232" title="=&gt; MatchMatrix.this.Guard">guard</a>.<a href="#537592" title="=&gt; Boolean">isEmpty</a>) <a href="#543050" title="=&gt; ParallelMatching.this.global.Tree">body</a>
          <span class="keyword">else</span> <a href="TransMatcher.scala.html#79677" title="(vds: List[ParallelMatching.this.global.Tree],exp: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">squeezedBlock</a>(<a href="PatternNodes.scala.html#538035" title="(implicit typer: ParallelMatching.this.global.analyzer.Typer)List[ParallelMatching.this.global.ValDef]">subst</a> targetParams <a href="TransMatcher.scala.html#79668" title="=&gt; ParallelMatching.this.global.analyzer.Typer">typer</a>, <a href="#543051" title="=&gt; ParallelMatching.this.global.If">guardTest</a>)
        )
      }
    } 

    /** Mixture rule for all literal ints (and chars) i.e. hopefully a switch
     *  will be emitted on the JVM.
     */
    <span class="keyword">class</span> <a title="class MixLiteralInts extends MatchMatrix.this.RuleApplication with ScalaObject" id="81370">MixLiteralInts</a><span title="ScalaObject">(</span>
      <span class="keyword">val</span> <a title="MatchMatrix.this.Patterns" id="542648">pats</a>: <a href="#542117" title="MatchMatrix.this.Patterns">Patterns</a>,
      <span class="keyword">val</span> <a title="MatchMatrix.this.Rep" id="542649">rest</a>: <a href="#541300" title="MatchMatrix.this.Rep">Rep</a>, 
      <a title="List[ParallelMatching.this.global.Tree]" id="542650">literals</a>: <span title="List[ParallelMatching.this.global.Tree]">List</span>[Tree],
      <a title="Option[ParallelMatching.this.global.Tree]" id="542651">defaultPattern</a>: <span title="Option[ParallelMatching.this.global.Tree]">Option</span>[Tree])
    <span class="keyword">extends</span> <a href="#81363" title="MatchMatrix.this.RuleApplication">RuleApplication</a>
    {
      <span class="keyword">private</span> <span class="keyword">object</span> <a title="object MixLiteralInts.this.NUM" id="542634">NUM</a> <span title="ScalaObject">{</span>
        <span class="keyword">def</span> <a title="(x: ParallelMatching.this.global.Tree)Option[Int]" id="543318">unapply</a>(<a title="ParallelMatching.this.global.Tree" id="543319">x</a>: <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a>): <span title="Option[Int]">Option</span>[Int] = <a href="../ast/TreeDSL.scala.html#42712" title="(x: ParallelMatching.this.global.Tree)(f: PartialFunction[ParallelMatching.this.global.Tree,Int])Option[Int]">condOpt</a>(<a href="../ast/TreeDSL.scala.html#42720" title="(x: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">unbind</a>(<a href="#543319" title="ParallelMatching.this.global.Tree">x</a>)) <a href="#544037" title="Int">{</a> <span title="Int" class="keyword">case</span> Literal(<a title="ParallelMatching.this.global.Constant" id="544041">c</a>) =&gt; <a href="#544041" title="ParallelMatching.this.global.Constant">c</a>.<a href="../symtab/Constants.scala.html#43049" title="=&gt; Int">intValue</a> }
      }
      // bound vars and rows for default pattern (only one row, but a list is easier to use later)
      <span class="keyword">val</span> <a href="#542637" title="(List[ParallelMatching.this.global.Symbol], List[MatchMatrix.this.Row])">(</a><a href="#542636" title="List[ParallelMatching.this.global.Symbol]" id="542637">defaultVars</a>, <a href="#542636" title="List[MatchMatrix.this.Row]" id="542639">defaultRows</a>) = <a href="#542651" title="Option[ParallelMatching.this.global.Tree]">defaultPattern</a> <span title="(List[ParallelMatching.this.global.Symbol], List[MatchMatrix.this.Row])" class="keyword">match</span> {
        <span title="(object Nil, object Nil)" class="keyword">case</span> <span title="object None">None</span>               =&gt; <span title="(_1: object Nil,_2: object Nil)(object Nil, object Nil)">(</span><span title="object Nil">Nil</span>, <span title="object Nil">Nil</span>)
        <span title="(List[ParallelMatching.this.global.Symbol], List[MatchMatrix.this.Row])" class="keyword">case</span> Some(<a href="PatternNodes.scala.html#537253" title="(x: ParallelMatching.this.global.Tree)Option[(List[ParallelMatching.this.global.Symbol], ParallelMatching.this.global.Tree)]">Strip</a>(<a title="List[ParallelMatching.this.global.Symbol]" id="543216">vs</a>, <a title="ParallelMatching.this.global.Tree" id="543217">p</a>)) =&gt; <span title="(_1: List[ParallelMatching.this.global.Symbol],_2: List[MatchMatrix.this.Row])(List[ParallelMatching.this.global.Symbol], List[MatchMatrix.this.Row])">(</span><a href="#543216" title="List[ParallelMatching.this.global.Symbol]">vs</a>, <span title="(xs: MatchMatrix.this.Row*)List[MatchMatrix.this.Row]">List</span>((<a href="#541303" title="(n: Int)MatchMatrix.this.Row">rest</a> rows <a href="#542650" title="List[ParallelMatching.this.global.Tree]">literals</a>.<span title="=&gt; Int">size</span>).<a href="#541177" title="(vs: Iterable[ParallelMatching.this.global.Symbol],tvars: ParallelMatching.this.global.Symbol)MatchMatrix.this.Row">rebind2</a>(<a href="#543216" title="List[ParallelMatching.this.global.Symbol]">vs</a>, <a href="#542488" title="=&gt; MatchMatrix.this.Scrutinee">scrut</a>.<a href="#541917" title="=&gt; ParallelMatching.this.global.Symbol">sym</a>)))
      }
      // literalMap is a map from each literal to a list of row indices.
      // varMap is a list from each literal to a list of the defined vars.
      <span class="keyword">val</span> <a href="#542642" title="(scala.collection.immutable.IntMap[List[Int]], List[(Int, List[ParallelMatching.this.global.Symbol])])">(</a><a href="#542641" title="scala.collection.immutable.IntMap[List[Int]]" id="542642">literalMap</a>, <a href="#542641" title="List[(Int, List[ParallelMatching.this.global.Symbol])]" id="542644">varMap</a>) = <span title="(scala.collection.immutable.IntMap[List[Int]], List[(Int, List[ParallelMatching.this.global.Symbol])]) @unchecked">{</span>
        <span class="keyword">val</span> <a title="List[Int]" id="543305">tags</a>    = <a href="#542650" title="(f: (ParallelMatching.this.global.Tree) =&gt; Int)(implicit bf: scala.collection.generic.BuilderFactory[Int,List[Int],List[ParallelMatching.this.global.Tree]])List[Int]">literals</a> <span title="scala.collection.generic.BuilderFactory[Int,List[Int],List#Coll]">map</span> <a href="#543316" title="Int">{</a> <span title="Int" class="keyword">case</span> <a href="#543318" title="(x: ParallelMatching.this.global.Tree)Option[Int]">NUM</a>(<a title="Int" id="543324">tag</a>) =&gt; <a href="#543324" title="Int">tag</a> }
        <span class="keyword">val</span> <a title="List[(Int, List[ParallelMatching.this.global.Symbol])]" id="543306">varMap</a>  = <a href="#543305" title="(that: Iterable[List[ParallelMatching.this.global.Symbol]])(implicit bf: scala.collection.generic.BuilderFactory[(Int, List[ParallelMatching.this.global.Symbol]),List[(Int, List[ParallelMatching.this.global.Symbol])],List[Int]])List[(Int, List[ParallelMatching.this.global.Symbol])]">tags</a> <span title="scala.collection.generic.BuilderFactory[(Int, List[ParallelMatching.this.global.Symbol]),List[(Int, List[ParallelMatching.this.global.Symbol])],List#Coll]">zip</span> (<a href="#542650" title="(f: (ParallelMatching.this.global.Tree) =&gt; List[ParallelMatching.this.global.Symbol])(implicit bf: scala.collection.generic.BuilderFactory[List[ParallelMatching.this.global.Symbol],List[List[ParallelMatching.this.global.Symbol]],List[ParallelMatching.this.global.Tree]])List[List[ParallelMatching.this.global.Symbol]]">literals</a> <span title="scala.collection.generic.BuilderFactory[List[ParallelMatching.this.global.Symbol],List[List[ParallelMatching.this.global.Symbol]],List#Coll]">map</span> <a href="PatternNodes.scala.html#79538" title="(x: ParallelMatching.this.global.Tree)List[ParallelMatching.this.global.Symbol]">definedVars</a>)
        <span class="keyword">val</span> <a title="scala.collection.immutable.IntMap[List[Int]]" id="543307">litMap</a>  = 
          <a href="#543305" title="List[Int]">tags</a>.<span title="(implicit bf: scala.collection.generic.BuilderFactory[(Int, Int),List[(Int, Int)],List[Int]])List[(Int, Int)]">zipWithIndex</span>.<a title="=&gt; List[(Int, Int)]" id="24460">reverse</a>.<span title="(z: scala.collection.immutable.IntMap[List[Int]])(f: (scala.collection.immutable.IntMap[List[Int]], (Int, Int)) =&gt; scala.collection.immutable.IntMap[List[Int]])scala.collection.immutable.IntMap[List[Int]]">foldLeft</span>(<a title="object scala.collection.immutable.IntMap" id="7367">IntMap</a>.<a title="[T]scala.collection.immutable.IntMap[T]" id="543691">empty</a><span title="scala.collection.immutable.IntMap[List[Int]]">[</span><span title="List[Int]">List</span>[Int]]) <a href="#543883" title="scala.collection.immutable.IntMap[List[Int]]">{</a>
            // we reverse before the fold so the list can be built with :: 
            <span title="scala.collection.immutable.IntMap[List[Int]]" class="keyword">case</span> (<a title="scala.collection.immutable.IntMap[List[Int]]" id="543895">map</a>, (<a title="Int" id="543898">tag</a>, <a title="Int" id="543899">index</a>)) =&gt; <a href="#543895" title="scala.collection.immutable.IntMap[List[Int]]">map</a>.<a title="(key: Int,value: List[Int])scala.collection.immutable.IntMap[List[Int]]" id="543725">updated</a>(<a href="#543898" title="Int">tag</a>, <a href="#543899" title="Int">index</a> <a href="#543960" title="Int">::</a> <a href="#543895" title="scala.collection.immutable.IntMap[List[Int]]">map</a>.<a title="(key: Int,default: =&gt; List[Int])List[Int]" id="543716">getOrElse</a><span title="(x: Int)List[Int]">(</span><a href="#543898" title="Int">tag</a>, <span title="object Nil">Nil</span>))
          }
        
        <span title="(_1: scala.collection.immutable.IntMap[List[Int]],_2: List[(Int, List[ParallelMatching.this.global.Symbol])])(scala.collection.immutable.IntMap[List[Int]], List[(Int, List[ParallelMatching.this.global.Symbol])])">(</span><a href="#543307" title="scala.collection.immutable.IntMap[List[Int]]">litMap</a>, <a href="#543306" title="List[(Int, List[ParallelMatching.this.global.Symbol])]">varMap</a>)
      }

      <span class="keyword">final</span> <span class="keyword">def</span> <a title="()ParallelMatching.this.global.Tree" id="542646">tree</a>(): <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a> = {
        // Just a demo of breakIf
        // Interpreter.breakIf(true, &quot;lits&quot; -&gt; literals, &quot;mixlit&quot; -&gt; this, literalMap)
        
        <span class="keyword">def</span> <a title="(Tag: Int,orig: ParallelMatching.this.Bindings)ParallelMatching.this.Bindings" id="544049">bindVars</a>(<a title="Int" id="544054">Tag</a>: <span title="Int">Int</span>, <a title="ParallelMatching.this.Bindings" id="544055">orig</a>: <a href="PatternNodes.scala.html#79542" title="ParallelMatching.this.Bindings">Bindings</a>): <a href="PatternNodes.scala.html#79542" title="ParallelMatching.this.Bindings">Bindings</a> = {
          <span class="keyword">def</span> <a title="(rest: List[(Int, List[ParallelMatching.this.global.Symbol])],bnd: ParallelMatching.this.Bindings)ParallelMatching.this.Bindings" id="544056">myBindVars</a>(<a title="List[(Int, List[ParallelMatching.this.global.Symbol])]" id="544057">rest</a>: <span title="List[(Int, List[ParallelMatching.this.global.Symbol])]">List</span>[(Int, List[Symbol])], <a title="ParallelMatching.this.Bindings" id="544058">bnd</a>: <a href="PatternNodes.scala.html#79542" title="ParallelMatching.this.Bindings">Bindings</a>): <a href="PatternNodes.scala.html#79542" title="ParallelMatching.this.Bindings">Bindings</a> = <a href="#544057" title="List[(Int, List[ParallelMatching.this.global.Symbol])]">rest</a> <span title="ParallelMatching.this.Bindings" class="keyword">match</span> {
            <span title="ParallelMatching.this.Bindings" class="keyword">case</span> <span title="object Nil">Nil</span> =&gt; <a href="#544058" title="ParallelMatching.this.Bindings">bnd</a>
            <span title="ParallelMatching.this.Bindings" class="keyword">case</span> (<a href="#544054" title="Int">Tag</a>,<a title="List[ParallelMatching.this.global.Symbol]" id="544065">vs</a>)::<a title="List[(Int, List[ParallelMatching.this.global.Symbol])]" id="544068">xs</a> =&gt; <a href="#544056" title="(rest: List[(Int, List[ParallelMatching.this.global.Symbol])],bnd: ParallelMatching.this.Bindings)ParallelMatching.this.Bindings">myBindVars</a>(<a href="#544068" title="List[(Int, List[ParallelMatching.this.global.Symbol])]">xs</a>, <a href="#544058" title="ParallelMatching.this.Bindings">bnd</a>.<a href="PatternNodes.scala.html#538032" title="(vs: Iterable[ParallelMatching.this.global.Symbol],tvar: ParallelMatching.this.global.Symbol)ParallelMatching.this.Bindings">add</a>(<a href="#544065" title="List[ParallelMatching.this.global.Symbol]">vs</a>, <a href="#542488" title="=&gt; MatchMatrix.this.Scrutinee">scrut</a>.<a href="#541917" title="=&gt; ParallelMatching.this.global.Symbol">sym</a>))
            <span title="ParallelMatching.this.Bindings" class="keyword">case</span> (_,  <a title="List[ParallelMatching.this.global.Symbol]" id="544083">vs</a>)::<a title="List[(Int, List[ParallelMatching.this.global.Symbol])]" id="544086">xs</a> =&gt; <a href="#544056" title="(rest: List[(Int, List[ParallelMatching.this.global.Symbol])],bnd: ParallelMatching.this.Bindings)ParallelMatching.this.Bindings">myBindVars</a>(<a href="#544086" title="List[(Int, List[ParallelMatching.this.global.Symbol])]">xs</a>, <a href="#544058" title="ParallelMatching.this.Bindings">bnd</a>)
          }
          <a href="#544056" title="(rest: List[(Int, List[ParallelMatching.this.global.Symbol])],bnd: ParallelMatching.this.Bindings)ParallelMatching.this.Bindings">myBindVars</a>(<a href="#542644" title="=&gt; List[(Int, List[ParallelMatching.this.global.Symbol])]">varMap</a>, <a href="#544055" title="ParallelMatching.this.Bindings">orig</a>)
        }
        
        // creates a row transformer for injecting the default case bindings at a given index
        <span class="keyword">def</span> <a title="(index: Int)(MatchMatrix.this.Row) =&gt; MatchMatrix.this.Row" id="544050">addDefaultVars</a>(<a title="Int" id="544093">index</a>: <span title="Int">Int</span>): Row =&gt; Row =
          <span title="(MatchMatrix.this.Row) =&gt; MatchMatrix.this.Row" class="keyword">if</span> (<a href="#542637" title="=&gt; List[ParallelMatching.this.global.Symbol]">defaultVars</a>.<span title="=&gt; Boolean">isEmpty</span>) <a href="#544099" title="(x: MatchMatrix.this.Row)MatchMatrix.this.Row">identity</a>
          <span class="keyword">else</span> (r: <a href="#541200" title="MatchMatrix.this.Row">Row</a>) =&gt; <a href="#544104" title="MatchMatrix.this.Row">r</a>.<a href="#541177" title="(vs: Iterable[ParallelMatching.this.global.Symbol],tvars: ParallelMatching.this.global.Symbol)MatchMatrix.this.Row">rebind2</a>(<a href="#542008" title="(i: Int)ParallelMatching.this.global.Tree">pats</a><a href="#81448" title="implicit scala.tools.nsc.matching.ParallelMatching.Implicits.mkPattern : (t: ParallelMatching.this.global.Tree)ParallelMatching.this.Pattern">(</a><a href="#544093" title="Int">index</a>).<a href="#536961" title="=&gt; List[ParallelMatching.this.global.Symbol]">boundVariables</a>, <a href="#542488" title="=&gt; MatchMatrix.this.Scrutinee">scrut</a>.<a href="#541917" title="=&gt; ParallelMatching.this.global.Symbol">sym</a>)
        
        <span class="keyword">val</span> <a title="List[ParallelMatching.this.global.CaseDef]" id="544051">cases</a> =
          <span class="keyword">for</span> ((<a title="Int" id="544147">tag</a>, <a title="List[Int]" id="544148">indices</a>) &lt;- <a href="#542642" title="=&gt; scala.collection.immutable.IntMap[List[Int]]">literalMap</a>.<a href="#544123" title="(f: ((Int, List[Int])) =&gt; ParallelMatching.this.global.CaseDef)(implicit bf: scala.collection.generic.BuilderFactory[ParallelMatching.this.global.CaseDef,List[ParallelMatching.this.global.CaseDef],List[(Int, List[Int])]])List[ParallelMatching.this.global.CaseDef]" id="543695">toList</a>) <span class="keyword">yield</span> {
            <span class="keyword">val</span> <a title="List[MatchMatrix.this.Row]" id="544151">newRows</a> = <a href="#544148" title="(f: (Int) =&gt; MatchMatrix.this.Row)(implicit bf: scala.collection.generic.BuilderFactory[MatchMatrix.this.Row,List[MatchMatrix.this.Row],List[Int]])List[MatchMatrix.this.Row]">indices</a> <span title="scala.collection.generic.BuilderFactory[MatchMatrix.this.Row,List[MatchMatrix.this.Row],List#Coll]">map</span> (<a title="Int" id="544162">i</a> =&gt; <a href="#544050" title="(index: Int)(MatchMatrix.this.Row) =&gt; MatchMatrix.this.Row">addDefaultVars</a><span title="(v1: MatchMatrix.this.Row)MatchMatrix.this.Row">(</span><a href="#544162" title="Int">i</a>)(<a href="#541303" title="(n: Int)MatchMatrix.this.Row">rest</a> rows <a href="#544162" title="Int">i</a>))
            <span class="keyword">val</span> <a title="MatchMatrix.this.Rep" id="544152">r</a>       = <a href="#81349" title="(tvars: List[ParallelMatching.this.global.Symbol],row1: List[MatchMatrix.this.Row])MatchMatrix.this.Rep">make</a>(<a href="#542649" title="=&gt; MatchMatrix.this.Rep">rest</a>.<a href="#541302" title="=&gt; List[ParallelMatching.this.global.Symbol]">tvars</a>, <a href="#544151" title="List[MatchMatrix.this.Row]">newRows</a> <a href="#544262" title="List[MatchMatrix.this.Row]">:::</a> <a href="#542639" title="(prefix: List[MatchMatrix.this.Row])List[MatchMatrix.this.Row]">defaultRows</a>)
            <span class="keyword">val</span> <a title="MatchMatrix.this.Rep" id="544153">r2</a>      = <a href="#81349" title="(tvars: List[ParallelMatching.this.global.Symbol],row1: List[MatchMatrix.this.Row])MatchMatrix.this.Rep">make</a>(<a href="#544152" title="MatchMatrix.this.Rep">r</a>.<a href="#541302" title="=&gt; List[ParallelMatching.this.global.Symbol]">tvars</a>, <a href="#544152" title="MatchMatrix.this.Rep">r</a>.<a href="#541303" title="(f: (MatchMatrix.this.Row) =&gt; MatchMatrix.this.Row)(implicit bf: scala.collection.generic.BuilderFactory[MatchMatrix.this.Row,List[MatchMatrix.this.Row],List[MatchMatrix.this.Row]])List[MatchMatrix.this.Row]">rows</a> <span title="scala.collection.generic.BuilderFactory[MatchMatrix.this.Row,List[MatchMatrix.this.Row],List#Coll]">map</span> (<a title="MatchMatrix.this.Row" id="544280">x</a> =&gt; <a href="#541176" title="(b: ParallelMatching.this.Bindings)MatchMatrix.this.Row">x</a> rebind <a href="#544049" title="(Tag: Int,orig: ParallelMatching.this.Bindings)ParallelMatching.this.Bindings">bindVars</a>(<a href="#544147" title="Int">tag</a>, <a href="#544280" title="MatchMatrix.this.Row">x</a>.<a href="#541203" title="=&gt; ParallelMatching.this.Bindings">subst</a>)))

            <a href="../ast/TreeDSL.scala.html#42746" title="(pat: ParallelMatching.this.global.Tree)ParallelMatching.this.CODE.CaseStart">CASE</a><a href="../ast/TreeDSL.scala.html#544350" title="(body: ParallelMatching.this.global.Tree)ParallelMatching.this.global.CaseDef">(</a><a href="../ast/Trees.scala.html#26899" title="(value: Any)ParallelMatching.this.global.Literal">Literal</a>(<a href="#544147" title="Int">tag</a>)) ==&gt; <a href="#544153" title="MatchMatrix.this.Rep">r2</a>.<a href="#81420" title="()ParallelMatching.this.global.Tree">toTree</a>
          }
        
        <span class="keyword">val</span> <a title="ParallelMatching.this.global.Tree" id="544052">defaultTree</a>       = <a href="#81349" title="(tvars: List[ParallelMatching.this.global.Symbol],row1: List[MatchMatrix.this.Row])MatchMatrix.this.Rep">make</a>(<a href="#542649" title="=&gt; MatchMatrix.this.Rep">rest</a>.<a href="#541302" title="=&gt; List[ParallelMatching.this.global.Symbol]">tvars</a>, <a href="#542639" title="=&gt; List[MatchMatrix.this.Row]">defaultRows</a>).<a href="#81420" title="()ParallelMatching.this.global.Tree">toTree</a>
        <span class="keyword">def</span> <a title="=&gt; List[ParallelMatching.this.global.CaseDef]" id="544053">casesWithDefault</a>  = <a href="#544051" title="List[ParallelMatching.this.global.CaseDef]">cases</a> <a href="#544449" title="List[ParallelMatching.this.global.CaseDef]">:::</a> <span title="(xs: ParallelMatching.this.global.CaseDef*)List[ParallelMatching.this.global.CaseDef]">List</span><span title="(prefix: List[ParallelMatching.this.global.CaseDef])List[ParallelMatching.this.global.CaseDef]">(</span><a href="../ast/TreeDSL.scala.html#42746" title="(pat: ParallelMatching.this.global.Tree)ParallelMatching.this.CODE.CaseStart">CASE</a><a href="../ast/TreeDSL.scala.html#544350" title="(body: ParallelMatching.this.global.Tree)ParallelMatching.this.global.CaseDef">(</a><a href="../ast/TreeDSL.scala.html#537139" title="(tpe: ParallelMatching.this.global.Type)ParallelMatching.this.global.Ident">WILD</a>(<a href="../symtab/Definitions.scala.html#28471" title="=&gt; ParallelMatching.this.global.Symbol">IntClass</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; ParallelMatching.this.global.Type">tpe</a>)) ==&gt; <a href="#544052" title="ParallelMatching.this.global.Tree">defaultTree</a>)

        <a href="#544051" title="List[ParallelMatching.this.global.CaseDef]">cases</a> <span title="ParallelMatching.this.global.Tree" class="keyword">match</span> {
          <span title="ParallelMatching.this.global.If" class="keyword">case</span> <a href="#544476" title="(x: List[ParallelMatching.this.global.CaseDef])Some[List[ParallelMatching.this.global.CaseDef]]">List</a>(CaseDef(<a title="ParallelMatching.this.global.Tree" id="544490">lit</a>, _, <a title="ParallelMatching.this.global.Tree" id="544491">body</a>))  =&gt;
            // only one case becomes if/else
            <a href="../ast/TreeDSL.scala.html#42756" title="(tree: ParallelMatching.this.global.Tree)ParallelMatching.this.CODE.IfStart">IF</a> <a href="../ast/TreeDSL.scala.html#50041" title="(x: ParallelMatching.this.global.Tree)ParallelMatching.this.CODE.IfStart">(</a><a href="#542488" title="=&gt; MatchMatrix.this.Scrutinee">scrut</a>.<a href="../ast/TreeDSL.scala.html#45303" title="(other: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Apply">id</a> ANY_== <a href="#544490" title="ParallelMatching.this.global.Tree">lit</a>) <a href="../ast/TreeDSL.scala.html#50042" title="(elsep: ParallelMatching.this.global.Tree)ParallelMatching.this.global.If">THEN</a> <a href="#544491" title="ParallelMatching.this.global.Tree">body</a> ELSE <a href="#544052" title="ParallelMatching.this.global.Tree">defaultTree</a>
          <span title="ParallelMatching.this.global.Match" class="keyword">case</span> _                            =&gt;
            // otherwise cast to an Int if necessary and run match
            <span class="keyword">val</span> <a title="ParallelMatching.this.global.Tree" id="544532">target</a>: <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a> = <span title="ParallelMatching.this.global.Tree" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="#542488" title="=&gt; MatchMatrix.this.Scrutinee">scrut</a>.<a href="PatternNodes.scala.html#81451" title="implicit scala.tools.nsc.matching.PatternNodes.Types.enrichType : (_tpe: ParallelMatching.this.global.Type)ParallelMatching.this.Types.RichType">tpe</a>.<a href="PatternNodes.scala.html#538364" title="=&gt; Boolean">isInt</a>) <a href="#542488" title="=&gt; MatchMatrix.this.Scrutinee">scrut</a>.<a href="../ast/TreeDSL.scala.html#45316" title="(member: ParallelMatching.this.global.Name)ParallelMatching.this.CODE.SelectStart">id</a> <a href="../ast/TreeDSL.scala.html#42777" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeFromSelectStart : (ss: ParallelMatching.this.CODE.SelectStart)ParallelMatching.this.global.Select">DOT</a> <a href="../symtab/StdNames.scala.html#26690" title="object ParallelMatching.this.global.nme">nme</a>.<a href="../symtab/StdNames.scala.html#30240" title="=&gt; ParallelMatching.this.global.Name">toInt</a> <span class="keyword">else</span> <a href="#542488" title="=&gt; MatchMatrix.this.Scrutinee">scrut</a>.<a href="#541758" title="=&gt; ParallelMatching.this.global.gen.global.Tree">id</a>
            <a href="../ast/TreeDSL.scala.html#45315" title="(cases: ParallelMatching.this.global.CaseDef*)ParallelMatching.this.global.Match">target</a> MATCH (<a href="#544053" title="=&gt; List[ParallelMatching.this.global.CaseDef]">casesWithDefault</a>: _*)
        }
      }
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="542647">toString</a> = {
        <span title="implicit scala.Predef.stringWrapper : (x: String)scala.runtime.RichString" class="string">&quot;MixLiteralInts {\n  pats: %s\n  varMap: %s\n}&quot;</span>.<span title="(args: Any*)String">format</span>(
          <a href="#542648" title="=&gt; MatchMatrix.this.Patterns">pats</a>, <a href="#542644" title="=&gt; List[(Int, List[ParallelMatching.this.global.Symbol])]">varMap</a>
        )
      }
    }

    /** mixture rule for unapply pattern
     */
    <span class="keyword">class</span> <a title="class MixUnapply extends MatchMatrix.this.RuleApplication with ScalaObject" id="81371">MixUnapply</a><span title="ScalaObject">(</span><span class="keyword">val</span> <a title="MatchMatrix.this.Patterns" id="542613">pats</a>: <a href="#542117" title="MatchMatrix.this.Patterns">Patterns</a>, <span class="keyword">val</span> <a title="MatchMatrix.this.Rep" id="542614">rest</a>: <a href="#541300" title="MatchMatrix.this.Rep">Rep</a>) <span class="keyword">extends</span> <a href="#81363" title="MatchMatrix.this.RuleApplication">RuleApplication</a> {
      <span class="keyword">lazy</span> <span class="keyword">val</span> <a href="PatternNodes.scala.html#537253" title="(x: ParallelMatching.this.global.Tree)Option[(List[ParallelMatching.this.global.Symbol], ParallelMatching.this.global.Tree)]">Strip</a><a href="#52468" title="(List[ParallelMatching.this.global.Symbol], ParallelMatching.this.global.UnApply, ParallelMatching.this.global.Apply, ParallelMatching.this.global.Tree, List[ParallelMatching.this.global.Tree], List[ParallelMatching.this.global.Tree])" id="1167">(</a><a href="#542593" title="List[ParallelMatching.this.global.Symbol]" id="52468">vs</a>, <a href="#542593" title="ParallelMatching.this.global.UnApply" id="52470">ua</a> @ UnApply(<a href="#542593" title="ParallelMatching.this.global.Apply" id="52472">app</a> @ Apply(<a href="#542593" title="ParallelMatching.this.global.Tree" id="52474">fxn</a>, _ :: <a href="#542593" title="List[ParallelMatching.this.global.Tree]" id="52476">applyTail</a>), <a href="#542593" title="List[ParallelMatching.this.global.Tree]" id="52478">args</a>)) = <a href="#542492" title="=&gt; ParallelMatching.this.Pattern">head</a>.<a href="#536968" title="=&gt; ParallelMatching.this.global.Tree">tree</a>

      <span class="keyword">object</span> <a title="object MixUnapply.this.sameUnapplyCall" id="542607">sameUnapplyCall</a> <span title="ScalaObject">{</span>
        <span class="keyword">def</span> <a title="(fn1: ParallelMatching.this.global.Tree)Boolean" id="544712">sameFunction</a>(<a title="ParallelMatching.this.global.Tree" id="544717">fn1</a>: <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a>) = <a href="#542601" title="=&gt; ParallelMatching.this.global.Tree">fxn</a>.<a href="../ast/Trees.scala.html#29553" title="(x$1: AnyRef)Boolean">symbol</a> <span title="(x$1: Boolean)Boolean">==</span> <a href="#544717" title="ParallelMatching.this.global.Tree">fn1</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; ParallelMatching.this.global.Symbol">symbol</a> &amp;&amp; (<a href="../ast/Trees.scala.html#29571" title="(that: ParallelMatching.this.global.Tree)Boolean">fxn</a> equalsStructure <a href="#544717" title="ParallelMatching.this.global.Tree">fn1</a>)
        <span class="keyword">def</span> <a title="(t: ParallelMatching.this.global.Tree)Option[List[ParallelMatching.this.global.Tree]]" id="544713">unapply</a>(<a title="ParallelMatching.this.global.Tree" id="544732">t</a>: <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a>) = <a href="../ast/TreeDSL.scala.html#42712" title="(x: ParallelMatching.this.global.Tree)(f: PartialFunction[ParallelMatching.this.global.Tree,List[ParallelMatching.this.global.Tree]])Option[List[ParallelMatching.this.global.Tree]]">condOpt</a>(<a href="#544732" title="ParallelMatching.this.global.Tree">t</a>) <a href="#544746" title="List[ParallelMatching.this.global.Tree]">{</a> <span title="List[ParallelMatching.this.global.Tree]" class="keyword">case</span> UnApply(Apply(<a title="ParallelMatching.this.global.Tree" id="544751">fn1</a>, _), <a title="List[ParallelMatching.this.global.Tree]" id="544754">args</a>) <span class="keyword">if</span> <a href="#544712" title="(fn1: ParallelMatching.this.global.Tree)Boolean">sameFunction</a>(<a href="#544751" title="ParallelMatching.this.global.Tree">fn1</a>)  =&gt; <a href="#544754" title="List[ParallelMatching.this.global.Tree]">args</a> }
      }

      <span class="keyword">def</span> <a title="(pos: scala.tools.nsc.util.Position,tpe: ParallelMatching.this.global.Type)ParallelMatching.this.global.Symbol" id="542609">newVarCapture</a>(<a title="scala.tools.nsc.util.Position" id="544763">pos</a>: <a href="../util/Position.scala.html#14785" title="scala.tools.nsc.util.Position">Position</a>, <a title="ParallelMatching.this.global.Type" id="544764">tpe</a>: <a href="../symtab/Types.scala.html#26364" title="ParallelMatching.this.global.Type">Type</a>) =
        <a href="TransMatcher.scala.html#79675" title="(pos: scala.tools.nsc.util.Position,tpe: ParallelMatching.this.global.Type,flags: List[Long],name: ParallelMatching.this.global.Name)ParallelMatching.this.global.Symbol">newVar</a>(<a href="#544763" title="scala.tools.nsc.util.Position">pos</a>, <a href="#544764" title="ParallelMatching.this.global.Type">tpe</a>, flags = <a href="#542488" title="=&gt; MatchMatrix.this.Scrutinee">scrut</a>.<a href="#541763" title="=&gt; List[Long]">flags</a>)

      /** returns (unapply-call, success-rep, optional fail-rep*/
      <span class="keyword">final</span> <span class="keyword">def</span> <a title="()MatchMatrix.this.Branch[MatchMatrix.this.UnapplyCall]" id="542610">getTransition</a>(): <a href="#545016" title="MatchMatrix.this.Branch[MatchMatrix.this.UnapplyCall]">Branch</a>[UnapplyCall] = {
        <span class="keyword">val</span> <a title="ParallelMatching.this.global.Symbol" id="544787">unapplyRes</a>  = <a href="#542609" title="(pos: scala.tools.nsc.util.Position,tpe: ParallelMatching.this.global.Type)ParallelMatching.this.global.Symbol">newVarCapture</a>(<a href="#542597" title="=&gt; ParallelMatching.this.global.UnApply">ua</a>.<a href="../ast/Trees.scala.html#29547" title="=&gt; scala.tools.nsc.util.Position">pos</a>, <a href="#542599" title="=&gt; ParallelMatching.this.global.Apply">app</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; ParallelMatching.this.global.Type">tpe</a>)
        <span class="keyword">val</span> <a title="ParallelMatching.this.global.Apply" id="544788">rhs</a>         = <a href="../ast/Trees.scala.html#49378" title="(fun: ParallelMatching.this.global.Tree,args: List[ParallelMatching.this.global.Tree])ParallelMatching.this.global.Apply">Apply</a><a href="../ast/Trees.scala.html#29552" title="(tp: ParallelMatching.this.global.Type)ParallelMatching.this.global.Apply">(</a><a href="#542601" title="=&gt; ParallelMatching.this.global.Tree">fxn</a>, <a href="#542488" title="=&gt; MatchMatrix.this.Scrutinee">scrut</a>.<a href="#541758" title="=&gt; ParallelMatching.this.global.gen.global.Tree">id</a> <a href="#544815" title="ParallelMatching.this.global.gen.global.Tree">::</a> <a href="#542603" title="(x: ParallelMatching.this.global.Tree)List[ParallelMatching.this.global.Tree]">applyTail</a>) setType <a href="#544787" title="ParallelMatching.this.global.Symbol">unapplyRes</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; ParallelMatching.this.global.Type">tpe</a>
        <span class="keyword">val</span> <a title="List[(ParallelMatching.this.global.Tree, MatchMatrix.this.Row)]" id="544789">zipped</a>      = <a href="#542010" title="(others: List[MatchMatrix.this.Row])List[(ParallelMatching.this.global.Tree, MatchMatrix.this.Row)]">pats</a> zip <a href="#542614" title="=&gt; MatchMatrix.this.Rep">rest</a>.<a href="#541303" title="=&gt; List[MatchMatrix.this.Row]">rows</a>
        <span class="keyword">val</span> <a title="List[MatchMatrix.this.Row]" id="544790">nrowsOther</a>  = <a href="#544789" title="List[(ParallelMatching.this.global.Tree, MatchMatrix.this.Row)]">zipped</a>.<span title="(f: ((ParallelMatching.this.global.Tree, MatchMatrix.this.Row)) =&gt; Traversable[MatchMatrix.this.Row])(implicit bf: scala.collection.generic.BuilderFactory[MatchMatrix.this.Row,List[MatchMatrix.this.Row],List[(ParallelMatching.this.global.Tree, MatchMatrix.this.Row)]])List[MatchMatrix.this.Row]">tail</span> <span title="scala.collection.generic.BuilderFactory[MatchMatrix.this.Row,List[MatchMatrix.this.Row],List#Coll]">flatMap</span> <a href="#544847" title="List[MatchMatrix.this.Row]">{</a> 
          <span title="scala.collection.immutable.Nil.type" class="keyword">case</span> (<a href="PatternNodes.scala.html#540742" title="(x: ParallelMatching.this.global.Tree)Option[ParallelMatching.this.global.Tree]">Stripped</a>(<a href="#544713" title="(t: ParallelMatching.this.global.Tree)Option[List[ParallelMatching.this.global.Tree]]">sameUnapplyCall</a>(_)), _)  =&gt; <span title="object Nil">Nil</span>
          <span title="List[MatchMatrix.this.Row]" class="keyword">case</span> (<a title="ParallelMatching.this.global.Tree" id="544864">pat</a>, <a title="MatchMatrix.this.Row" id="544865">r</a>)                           =&gt; <span title="(xs: MatchMatrix.this.Row*)List[MatchMatrix.this.Row]">List</span>(<a href="#541173" title="(h: ParallelMatching.this.global.Tree)MatchMatrix.this.Row">r</a> insert <a href="#544864" title="ParallelMatching.this.global.Tree">pat</a>)
        }

        <span class="keyword">def</span> <a title="(vdefs: List[ParallelMatching.this.global.Tree],ntemps: List[ParallelMatching.this.global.Symbol],nrows: List[MatchMatrix.this.Row])MatchMatrix.this.Branch[MatchMatrix.this.UnapplyCall]" id="544791">mkTransition</a>(<a title="List[ParallelMatching.this.global.Tree]" id="545012">vdefs</a>: <span title="List[ParallelMatching.this.global.Tree]">List</span>[Tree], <a title="List[ParallelMatching.this.global.Symbol]" id="545013">ntemps</a>: <span title="List[ParallelMatching.this.global.Symbol]">List</span>[Symbol], <a title="List[MatchMatrix.this.Row]" id="545014">nrows</a>: <span title="List[MatchMatrix.this.Row]">List</span>[Row]) =
          <a href="#545016" title="(action: MatchMatrix.this.UnapplyCall,succ: MatchMatrix.this.Rep,fail: Option[MatchMatrix.this.Rep])MatchMatrix.this.Branch[MatchMatrix.this.UnapplyCall]">Branch</a>(
            <a href="#545034" title="(ua: ParallelMatching.this.global.Tree,args: List[ParallelMatching.this.global.Tree])MatchMatrix.this.UnapplyCall">UnapplyCall</a>(<a href="TransMatcher.scala.html#79676" title="(x: ParallelMatching.this.global.Symbol,rhs: ParallelMatching.this.global.Tree)ParallelMatching.this.global.analyzer.global.Tree">typedValDef</a>(<a href="#544787" title="ParallelMatching.this.global.Symbol">unapplyRes</a>, <a href="#544788" title="ParallelMatching.this.global.Apply">rhs</a>), <a href="#545012" title="List[ParallelMatching.this.global.Tree]">vdefs</a>),
            <a href="#542498" title="(pre: List[ParallelMatching.this.global.Symbol],post: List[ParallelMatching.this.global.Symbol],rows: List[MatchMatrix.this.Row])MatchMatrix.this.Rep">mkNewRep</a>(<a href="#545013" title="List[ParallelMatching.this.global.Symbol]">ntemps</a>, <a href="#542614" title="=&gt; MatchMatrix.this.Rep">rest</a>.<a href="#541302" title="=&gt; List[ParallelMatching.this.global.Symbol]">tvars</a>, <a href="#545014" title="List[MatchMatrix.this.Row]">nrows</a>),
            <a href="#542497" title="(xs: List[MatchMatrix.this.Row])Option[MatchMatrix.this.Rep]">mkFailOpt</a>(<a href="#544790" title="List[MatchMatrix.this.Row]">nrowsOther</a>)
          )

        // Second argument is number of dummies to prepend in the default case
        <span class="keyword">def</span> <a title="(sameFilter: (List[ParallelMatching.this.global.Tree]) =&gt; List[ParallelMatching.this.global.Tree],dum: Int)List[MatchMatrix.this.Row]" id="544792">mkNewRows</a>(<a title="(List[ParallelMatching.this.global.Tree]) =&gt; List[ParallelMatching.this.global.Tree]" id="545072">sameFilter</a>: (List[Tree]) =&gt; List[Tree], <a title="Int" id="545073">dum</a>: <span title="Int">Int</span>) =
          <span class="keyword">for</span> ((<a title="ParallelMatching.this.global.Tree" id="545108">pat</a> @ <a href="PatternNodes.scala.html#537253" title="(x: ParallelMatching.this.global.Tree)Option[(List[ParallelMatching.this.global.Symbol], ParallelMatching.this.global.Tree)]">Strip</a>(<a title="List[ParallelMatching.this.global.Symbol]" id="545114">vs</a>, <a title="ParallelMatching.this.global.Tree" id="545115">p</a>), <a title="MatchMatrix.this.Row" id="545117">r</a>) &lt;- <a href="#544789" title="(f: ((ParallelMatching.this.global.Tree, MatchMatrix.this.Row)) =&gt; MatchMatrix.this.Row)(implicit bf: scala.collection.generic.BuilderFactory[MatchMatrix.this.Row,List[MatchMatrix.this.Row],List[(ParallelMatching.this.global.Tree, MatchMatrix.this.Row)]])List[MatchMatrix.this.Row]">zipped</a>) <span class="keyword">yield</span> <a href="#545115" title="ParallelMatching.this.global.Tree">p</a> <span title="MatchMatrix.this.Row" class="keyword">match</span> {
            <span title="MatchMatrix.this.Row" class="keyword">case</span> <a href="#544713" title="(t: ParallelMatching.this.global.Tree)Option[List[ParallelMatching.this.global.Tree]]">sameUnapplyCall</a>(<a title="List[ParallelMatching.this.global.Tree]" id="545123">args</a>)  =&gt; <a href="#545117" title="MatchMatrix.this.Row">r</a>.<a href="#541178" title="(hs: List[ParallelMatching.this.global.Tree],vs: Iterable[ParallelMatching.this.global.Symbol],tvars: ParallelMatching.this.global.Symbol)MatchMatrix.this.Row">insert2</a>(<a href="#545072" title="(v1: List[ParallelMatching.this.global.Tree])List[ParallelMatching.this.global.Tree]">sameFilter</a>(<a href="#545123" title="List[ParallelMatching.this.global.Tree]">args</a>) <a href="#545144" title="List[ParallelMatching.this.global.Tree]">:::</a> <span title="(xs: object ParallelMatching.this.global.EmptyTree*)List[object ParallelMatching.this.global.EmptyTree]">List</span><span title="(prefix: List[ParallelMatching.this.global.Tree])List[ParallelMatching.this.global.Tree]">(</span><a href="../ast/Trees.scala.html#26761" title="object ParallelMatching.this.global.EmptyTree">EmptyTree</a>), <a href="#545114" title="List[ParallelMatching.this.global.Symbol]">vs</a>, <a href="#542488" title="=&gt; MatchMatrix.this.Scrutinee">scrut</a>.<a href="#541917" title="=&gt; ParallelMatching.this.global.Symbol">sym</a>)
            <span title="MatchMatrix.this.Row" class="keyword">case</span> _                      =&gt; <a href="#541174" title="(hs: List[ParallelMatching.this.global.Tree])MatchMatrix.this.Row">r</a> insert (<a href="PatternNodes.scala.html#79516" title="(i: Int)List[ParallelMatching.this.global.Tree]">getDummies</a>(<a href="#545073" title="Int">dum</a>) <a href="#545170" title="List[ParallelMatching.this.global.Tree]">:::</a> <span title="(xs: ParallelMatching.this.global.Tree*)List[ParallelMatching.this.global.Tree]">List</span><span title="(prefix: List[ParallelMatching.this.global.Tree])List[ParallelMatching.this.global.Tree]">(</span><a href="#545108" title="ParallelMatching.this.global.Tree">pat</a>))
          }
        <span class="keyword">def</span> <a title="(s: ParallelMatching.this.global.Symbol)ParallelMatching.this.global.analyzer.global.Tree" id="544793">mkGet</a>(<a title="ParallelMatching.this.global.Symbol" id="545278">s</a>: <a href="../symtab/Symbols.scala.html#26286" title="ParallelMatching.this.global.Symbol">Symbol</a>) = <a href="TransMatcher.scala.html#79676" title="(x: ParallelMatching.this.global.Symbol,rhs: ParallelMatching.this.global.Tree)ParallelMatching.this.global.analyzer.global.Tree">typedValDef</a>(<a href="#545278" title="ParallelMatching.this.global.Symbol">s</a>, <a href="../ast/TreeDSL.scala.html#42734" title="(lhs: ParallelMatching.this.global.Tree,op: ParallelMatching.this.global.Name,args: ParallelMatching.this.global.Tree*)ParallelMatching.this.global.Apply">fn</a>(<a href="../ast/TreeDSL.scala.html#42764" title="(sym: ParallelMatching.this.global.Symbol)ParallelMatching.this.global.gen.global.Tree">ID</a>(<a href="#544787" title="ParallelMatching.this.global.Symbol">unapplyRes</a>), <a href="../symtab/StdNames.scala.html#26690" title="object ParallelMatching.this.global.nme">nme</a>.<a href="../symtab/StdNames.scala.html#30078" title="=&gt; ParallelMatching.this.global.Name">get</a>))
        <span class="keyword">def</span> <a title="(tpe: ParallelMatching.this.global.Type)ParallelMatching.this.global.Symbol" id="544794">mkVar</a>(<a title="ParallelMatching.this.global.Type" id="545312">tpe</a>: <a href="../symtab/Types.scala.html#26364" title="ParallelMatching.this.global.Type">Type</a>) = <a href="#542609" title="(pos: scala.tools.nsc.util.Position,tpe: ParallelMatching.this.global.Type)ParallelMatching.this.global.Symbol">newVarCapture</a>(<a href="#542597" title="=&gt; ParallelMatching.this.global.UnApply">ua</a>.<a href="../ast/Trees.scala.html#29547" title="=&gt; scala.tools.nsc.util.Position">pos</a>, <a href="#545312" title="ParallelMatching.this.global.Type">tpe</a>)

        // 0 args =&gt; Boolean, 1 =&gt; Option[T], &gt;1 =&gt; Option[? &lt;: ProductN[T1,...,Tn]]
        <a href="#542605" title="=&gt; List[ParallelMatching.this.global.Tree]">args</a>.<span title="=&gt; Int">length</span> <span title="MatchMatrix.this.Branch[MatchMatrix.this.UnapplyCall]" class="keyword">match</span> {
          <span title="MatchMatrix.this.Branch[MatchMatrix.this.UnapplyCall]" class="keyword">case</span> <span title="Int(0)" class="int">0</span>  =&gt;
            <a href="#544791" title="(vdefs: List[ParallelMatching.this.global.Tree],ntemps: List[ParallelMatching.this.global.Symbol],nrows: List[MatchMatrix.this.Row])MatchMatrix.this.Branch[MatchMatrix.this.UnapplyCall]">mkTransition</a>(<span title="object Nil">Nil</span>, <span title="object Nil">Nil</span>, <a href="#544792" title="(sameFilter: (List[ParallelMatching.this.global.Tree]) =&gt; List[ParallelMatching.this.global.Tree],dum: Int)List[MatchMatrix.this.Row]">mkNewRows</a>((<a title="List[ParallelMatching.this.global.Tree]" id="545316">xs</a>) =&gt; <span title="object Nil">Nil</span>, <span title="Int(0)" class="int">0</span>))

          <span title="MatchMatrix.this.Branch[MatchMatrix.this.UnapplyCall]" class="keyword">case</span> <span title="Int(1)" class="int">1</span> =&gt;
            <span class="keyword">val</span> <a title="ParallelMatching.this.global.Symbol" id="545321">vsym</a>  = <a href="#544794" title="(tpe: ParallelMatching.this.global.Type)ParallelMatching.this.global.Symbol">mkVar</a>(<a href="#542599" title="=&gt; ParallelMatching.this.global.Apply">app</a>.<a href="../symtab/Types.scala.html#30378" title="(n: Int)ParallelMatching.this.global.Type">tpe</a> typeArgs <span title="Int(0)" class="int">0</span>)
            <span class="keyword">val</span> <a title="List[MatchMatrix.this.Row]" id="545322">nrows</a> = <a href="#544792" title="(sameFilter: (List[ParallelMatching.this.global.Tree]) =&gt; List[ParallelMatching.this.global.Tree],dum: Int)List[MatchMatrix.this.Row]">mkNewRows</a>(<a title="List[ParallelMatching.this.global.Tree]" id="545337">xs</a> =&gt; <span title="(xs: ParallelMatching.this.global.Tree*)List[ParallelMatching.this.global.Tree]">List</span>(<a href="#545337" title="List[ParallelMatching.this.global.Tree]">xs</a>.<span title="=&gt; ParallelMatching.this.global.Tree">head</span>), <span title="Int(1)" class="int">1</span>)
            <span class="keyword">val</span> <a title="ParallelMatching.this.global.analyzer.global.Tree" id="545323">vdef</a>  = <a href="#544793" title="(s: ParallelMatching.this.global.Symbol)ParallelMatching.this.global.analyzer.global.Tree">mkGet</a>(<a href="#545321" title="ParallelMatching.this.global.Symbol">vsym</a>)

            <a href="#544791" title="(vdefs: List[ParallelMatching.this.global.Tree],ntemps: List[ParallelMatching.this.global.Symbol],nrows: List[MatchMatrix.this.Row])MatchMatrix.this.Branch[MatchMatrix.this.UnapplyCall]">mkTransition</a>(<span title="(xs: ParallelMatching.this.global.analyzer.global.Tree*)List[ParallelMatching.this.global.analyzer.global.Tree]">List</span>(<a href="#545323" title="ParallelMatching.this.global.analyzer.global.Tree">vdef</a>), <span title="(xs: ParallelMatching.this.global.Symbol*)List[ParallelMatching.this.global.Symbol]">List</span>(<a href="#545321" title="ParallelMatching.this.global.Symbol">vsym</a>), <a href="#545322" title="List[MatchMatrix.this.Row]">nrows</a>)

          <span title="MatchMatrix.this.Branch[MatchMatrix.this.UnapplyCall]" class="keyword">case</span> _ =&gt;
            <span class="keyword">val</span> <a title="ParallelMatching.this.global.Symbol" id="545371">uresGet</a>   = <a href="#544794" title="(tpe: ParallelMatching.this.global.Type)ParallelMatching.this.global.Symbol">mkVar</a>(<a href="#542599" title="=&gt; ParallelMatching.this.global.Apply">app</a>.<a href="../symtab/Types.scala.html#30378" title="(n: Int)ParallelMatching.this.global.Type">tpe</a> typeArgs <span title="Int(0)" class="int">0</span>)
            <span class="keyword">val</span> <a title="ParallelMatching.this.global.analyzer.global.Tree" id="545372">vdefHead</a>  = <a href="#544793" title="(s: ParallelMatching.this.global.Symbol)ParallelMatching.this.global.analyzer.global.Tree">mkGet</a>(<a href="#545371" title="ParallelMatching.this.global.Symbol">uresGet</a>)
            <span class="keyword">val</span> <a title="List[ParallelMatching.this.global.Type]" id="545373">ts</a>        = <a href="../symtab/Definitions.scala.html#28656" title="(tpe: ParallelMatching.this.global.Type)Option[List[ParallelMatching.this.global.Type]]">getProductArgs</a>(<a href="#545371" title="ParallelMatching.this.global.Symbol">uresGet</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; ParallelMatching.this.global.Type">tpe</a>).<a title="=&gt; List[ParallelMatching.this.global.Type]" id="35232">get</a>
            <span class="keyword">val</span> <a title="List[MatchMatrix.this.Row]" id="545374">nrows</a>     = <a href="#544792" title="(sameFilter: (List[ParallelMatching.this.global.Tree]) =&gt; List[ParallelMatching.this.global.Tree],dum: Int)List[MatchMatrix.this.Row]">mkNewRows</a>(<a href="#545408" title="(x: List[ParallelMatching.this.global.Tree])List[ParallelMatching.this.global.Tree]">identity</a>, <a href="#545373" title="List[ParallelMatching.this.global.Type]">ts</a>.<span title="=&gt; Int">size</span>)

            <span class="keyword">val</span> <a href="#545376" title="(List[ParallelMatching.this.global.analyzer.global.Tree], List[ParallelMatching.this.global.Symbol])">(</a><a href="#545375" title="List[ParallelMatching.this.global.analyzer.global.Tree]" id="545376">vdefs</a>: <span title="List[ParallelMatching.this.global.Tree]">List</span>[Tree], <a href="#545375" title="List[ParallelMatching.this.global.Symbol]" id="545377">vsyms</a>: <span title="List[ParallelMatching.this.global.Symbol]">List</span>[Symbol]) = <span title="object List">List</span>.<span title="(xs: List[(ParallelMatching.this.global.analyzer.global.Tree, ParallelMatching.this.global.Symbol)])(List[ParallelMatching.this.global.analyzer.global.Tree], List[ParallelMatching.this.global.Symbol])">unzip</span><span title="(List[ParallelMatching.this.global.analyzer.global.Tree], List[ParallelMatching.this.global.Symbol]) @unchecked">(</span>
              <span class="keyword">for</span> ((<a title="ParallelMatching.this.global.Type" id="545534">vtpe</a>, <a title="Int" id="545535">i</a>) &lt;- <a href="#545373" title="List[ParallelMatching.this.global.Type]">ts</a>.<a href="#545510" title="(f: ((ParallelMatching.this.global.Type, Int)) =&gt; (ParallelMatching.this.global.analyzer.global.Tree, ParallelMatching.this.global.Symbol))(implicit bf: scala.collection.generic.BuilderFactory[(ParallelMatching.this.global.analyzer.global.Tree, ParallelMatching.this.global.Symbol),List[(ParallelMatching.this.global.analyzer.global.Tree, ParallelMatching.this.global.Symbol)],List[(ParallelMatching.this.global.Type, Int)]])List[(ParallelMatching.this.global.analyzer.global.Tree, ParallelMatching.this.global.Symbol)]">zipWithIndex</a>) <span class="keyword">yield</span> {
                <span class="keyword">val</span> <a title="ParallelMatching.this.global.Symbol" id="545538">vchild</a>  = <a href="#544794" title="(tpe: ParallelMatching.this.global.Type)ParallelMatching.this.global.Symbol">mkVar</a>(<a href="#545534" title="ParallelMatching.this.global.Type">vtpe</a>)
                <span class="keyword">val</span> <a title="ParallelMatching.this.global.Symbol" id="545539">accSym</a>  = <a href="../symtab/Definitions.scala.html#28652" title="(z: ParallelMatching.this.global.Symbol,j: Int)ParallelMatching.this.global.Symbol">productProj</a>(<a href="#545371" title="ParallelMatching.this.global.Symbol">uresGet</a>, <a href="#545535" title="(x$1: Int)Int">i</a>+<span title="Int(1)" class="int">1</span>)
                <span class="keyword">val</span> <a title="ParallelMatching.this.global.analyzer.global.Tree" id="545540">rhs</a>     = <a href="../typechecker/Typers.scala.html#42872" title="(tree: ParallelMatching.this.global.analyzer.global.Tree)ParallelMatching.this.global.analyzer.global.Tree">typer</a> typed <a href="../ast/TreeDSL.scala.html#42735" title="(lhs: ParallelMatching.this.global.Tree,op: ParallelMatching.this.global.Symbol,args: ParallelMatching.this.global.Tree*)ParallelMatching.this.global.Apply">fn</a>(<a href="../ast/TreeDSL.scala.html#42764" title="(sym: ParallelMatching.this.global.Symbol)ParallelMatching.this.global.gen.global.Tree">ID</a>(<a href="#545371" title="ParallelMatching.this.global.Symbol">uresGet</a>), <a href="#545539" title="ParallelMatching.this.global.Symbol">accSym</a>)

                <span title="(_1: ParallelMatching.this.global.analyzer.global.Tree,_2: ParallelMatching.this.global.Symbol)(ParallelMatching.this.global.analyzer.global.Tree, ParallelMatching.this.global.Symbol)">(</span><a href="TransMatcher.scala.html#79676" title="(x: ParallelMatching.this.global.Symbol,rhs: ParallelMatching.this.global.Tree)ParallelMatching.this.global.analyzer.global.Tree">typedValDef</a>(<a href="#545538" title="ParallelMatching.this.global.Symbol">vchild</a>, <a href="#545540" title="ParallelMatching.this.global.analyzer.global.Tree">rhs</a>), <a href="#545538" title="ParallelMatching.this.global.Symbol">vchild</a>)
              })

            <a href="#544791" title="(vdefs: List[ParallelMatching.this.global.Tree],ntemps: List[ParallelMatching.this.global.Symbol],nrows: List[MatchMatrix.this.Row])MatchMatrix.this.Branch[MatchMatrix.this.UnapplyCall]">mkTransition</a>(<a href="#545372" title="ParallelMatching.this.global.analyzer.global.Tree">vdefHead</a> <a href="#545730" title="ParallelMatching.this.global.analyzer.global.Tree">::</a> <a href="#545376" title="(x: ParallelMatching.this.global.Tree)List[ParallelMatching.this.global.Tree]">vdefs</a>, <a href="#545377" title="List[ParallelMatching.this.global.Symbol]">vsyms</a>, <a href="#545374" title="List[MatchMatrix.this.Row]">nrows</a>)
        }
      } /* def getTransition(...) */

      <span class="keyword">final</span> <span class="keyword">def</span> <a title="()ParallelMatching.this.global.analyzer.global.Tree" id="542611">tree</a>() = {
        <span class="keyword">val</span> Branch<a href="#545743" title="(ParallelMatching.this.global.Tree, List[ParallelMatching.this.global.Tree], MatchMatrix.this.Rep, Option[MatchMatrix.this.Rep])">(</a>UnapplyCall(<a href="#545742" title="ParallelMatching.this.global.Tree" id="545743">uacall</a>, <a href="#545742" title="List[ParallelMatching.this.global.Tree]" id="545744">vdefs</a>), <a href="#545742" title="MatchMatrix.this.Rep" id="545745">srep</a>, <a href="#545742" title="Option[MatchMatrix.this.Rep]" id="545746">frep</a>) = <a href="#81371" title="MixUnapply.this.type" class="keyword">this</a>.<a href="#542610" title="()MatchMatrix.this.Branch[MatchMatrix.this.UnapplyCall]">getTransition</a>
        <span class="keyword">val</span> <a title="ParallelMatching.this.global.Tree" id="545747">succ</a> = <a href="#545745" title="MatchMatrix.this.Rep">srep</a>.<a href="#81420" title="()ParallelMatching.this.global.Tree">toTree</a>
        <span class="keyword">val</span> <a title="ParallelMatching.this.global.Tree" id="545748">fail</a> = <a href="#545746" title="(f: (MatchMatrix.this.Rep) =&gt; ParallelMatching.this.global.Tree)Option[ParallelMatching.this.global.Tree]">frep</a> <span title="(default: =&gt; ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">map</span> (<a href="#545826" title="MatchMatrix.this.Rep">_</a>.<a href="#81420" title="()ParallelMatching.this.global.Tree">toTree</a>) getOrElse (<a href="#81326" title="=&gt; ParallelMatching.this.global.Tree">failTree</a>)
        <span class="keyword">val</span> <a title="ParallelMatching.this.global.gen.global.Tree" id="545749">cond</a> = 
          <span title="ParallelMatching.this.global.gen.global.Tree" class="keyword">if</span> (<a href="#545743" title="ParallelMatching.this.global.Tree">uacall</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; ParallelMatching.this.global.Symbol">symbol</a>.<a href="PatternNodes.scala.html#81451" title="implicit scala.tools.nsc.matching.PatternNodes.Types.enrichType : (_tpe: ParallelMatching.this.global.Type)ParallelMatching.this.Types.RichType">tpe</a>.<a href="PatternNodes.scala.html#538366" title="=&gt; Boolean">isBoolean</a>) <a href="../ast/TreeDSL.scala.html#42764" title="(sym: ParallelMatching.this.global.Symbol)ParallelMatching.this.global.gen.global.Tree">ID</a>(<a href="#545743" title="ParallelMatching.this.global.Tree">uacall</a>.<a href="../ast/Trees.scala.html#29553" title="=&gt; ParallelMatching.this.global.Symbol">symbol</a>)
          <span class="keyword">else</span> <a href="#545743" title="ParallelMatching.this.global.Tree">uacall</a>.<a href="../ast/TreeDSL.scala.html#42776" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkSymbolMethodsFromSymbol : (target: ParallelMatching.this.global.Symbol)ParallelMatching.this.CODE.SymbolMethods">symbol</a> <a href="../ast/TreeDSL.scala.html#45291" title="()ParallelMatching.this.global.Tree">IS_DEFINED</a>

        <a href="../typechecker/Typers.scala.html#42872" title="(tree: ParallelMatching.this.global.analyzer.global.Tree)ParallelMatching.this.global.analyzer.global.Tree">typer</a> typed <a href="TransMatcher.scala.html#79677" title="(vds: List[ParallelMatching.this.global.Tree],exp: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">squeezedBlock</a>(
          <span title="(xs: ParallelMatching.this.global.Tree*)List[ParallelMatching.this.global.Tree]">List</span>(<a href="TransMatcher.scala.html#79666" title="(v1: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">handleOuter</a>(<a href="#545743" title="ParallelMatching.this.global.Tree">uacall</a>)),
          <a href="../ast/TreeDSL.scala.html#42756" title="(tree: ParallelMatching.this.global.Tree)ParallelMatching.this.CODE.IfStart">IF</a> <a href="../ast/TreeDSL.scala.html#50041" title="(x: ParallelMatching.this.global.Tree)ParallelMatching.this.CODE.IfStart">(</a><a href="#545749" title="ParallelMatching.this.global.gen.global.Tree">cond</a>) <a href="../ast/TreeDSL.scala.html#50042" title="(elsep: ParallelMatching.this.global.Tree)ParallelMatching.this.global.If">THEN</a> <a href="TransMatcher.scala.html#79677" title="(vds: List[ParallelMatching.this.global.Tree],exp: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">squeezedBlock</a>(<a href="#545744" title="List[ParallelMatching.this.global.Tree]">vdefs</a>, <a href="#545747" title="ParallelMatching.this.global.Tree">succ</a>) ELSE <a href="#545748" title="ParallelMatching.this.global.Tree">fail</a>
        )
      }
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="542612">toString</a> = {
        <span title="implicit scala.Predef.stringWrapper : (x: String)scala.runtime.RichString" class="string">&quot;MixUnapply {\n  pats: %s\n  ua: %s\n}&quot;</span>.<span title="(args: Any*)String">format</span>(
          <a href="#542613" title="=&gt; MatchMatrix.this.Patterns">pats</a>, <a href="#542597" title="=&gt; ParallelMatching.this.global.UnApply">ua</a>
        )
      }
    }

    /** handle sequence pattern and ArrayValue (but not star patterns)
     */
    <span class="keyword">sealed</span> <span class="keyword">class</span> <a title="class MixSequence extends MatchMatrix.this.RuleApplication with ScalaObject" id="81372">MixSequence</a><span title="ScalaObject">(</span><span class="keyword">val</span> <a title="MatchMatrix.this.Patterns" id="542578">pats</a>: <a href="#542117" title="MatchMatrix.this.Patterns">Patterns</a>, <span class="keyword">val</span> <a title="MatchMatrix.this.Rep" id="542579">rest</a>: <a href="#541300" title="MatchMatrix.this.Rep">Rep</a>) <span class="keyword">extends</span> <a href="#81363" title="MatchMatrix.this.RuleApplication">RuleApplication</a> {
      /** array elements except for star (if present) */
      <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(x: ParallelMatching.this.global.ArrayValue)List[ParallelMatching.this.global.Tree]" id="542551">nonStarElems</a>(<a title="ParallelMatching.this.global.ArrayValue" id="546036">x</a>: <a href="../ast/Trees.scala.html#26835" title="ParallelMatching.this.global.ArrayValue">ArrayValue</a>) =
        <span title="List[ParallelMatching.this.global.Tree]" class="keyword">if</span> (<a href="#79585" title="(t: ParallelMatching.this.global.Tree)Boolean">isRightIgnoring</a>(<a href="#546036" title="ParallelMatching.this.global.ArrayValue">x</a>)) <a href="#546036" title="ParallelMatching.this.global.ArrayValue">x</a>.<a href="../ast/Trees.scala.html#146122" title="=&gt; List[ParallelMatching.this.global.Tree]">elems</a>.<span title="=&gt; List[ParallelMatching.this.global.Tree]">init</span> <span class="keyword">else</span> <a href="#546036" title="ParallelMatching.this.global.ArrayValue">x</a>.<a href="../ast/Trees.scala.html#146122" title="=&gt; List[ParallelMatching.this.global.Tree]">elems</a>
        
      <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(x: ParallelMatching.this.global.ArrayValue)Int" id="542552">elemLength</a>(<a title="ParallelMatching.this.global.ArrayValue" id="546041">x</a>: <a href="../ast/Trees.scala.html#26835" title="ParallelMatching.this.global.ArrayValue">ArrayValue</a>)     = <a href="#542551" title="(x: ParallelMatching.this.global.ArrayValue)List[ParallelMatching.this.global.Tree]">nonStarElems</a>(<a href="#546041" title="ParallelMatching.this.global.ArrayValue">x</a>).<span title="=&gt; Int">length</span>
      <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(x: ParallelMatching.this.global.ArrayValue)Boolean" id="542553">isAllDefaults</a>(<a title="ParallelMatching.this.global.ArrayValue" id="546047">x</a>: <a href="../ast/Trees.scala.html#26835" title="ParallelMatching.this.global.ArrayValue">ArrayValue</a>)  = <a href="#542551" title="(x: ParallelMatching.this.global.ArrayValue)List[ParallelMatching.this.global.Tree]">nonStarElems</a><span title="(p: (ParallelMatching.this.global.Tree) =&gt; Boolean)Boolean">(</span><a href="#546047" title="ParallelMatching.this.global.ArrayValue">x</a>) forall <a href="#79586" title="(t: ParallelMatching.this.global.Tree)Boolean">isDefaultPattern</a>

      <span class="keyword">final</span> <span class="keyword">def</span> <a title="(xs: List[ParallelMatching.this.global.Tree])List[ParallelMatching.this.global.Tree]" id="542554">removeStar</a>(<a title="List[ParallelMatching.this.global.Tree]" id="546062">xs</a>: <span title="List[ParallelMatching.this.global.Tree]">List</span>[Tree]): <span title="List[ParallelMatching.this.global.Tree]">List</span>[Tree] = 
        <a href="#546062" title="List[ParallelMatching.this.global.Tree]">xs</a>.<span title="=&gt; List[ParallelMatching.this.global.Tree]">init</span> <a href="#546064" title="List[ParallelMatching.this.global.Tree]">:::</a> <span title="(xs: ParallelMatching.this.global.Tree*)List[ParallelMatching.this.global.Tree]">List</span><span title="(prefix: List[ParallelMatching.this.global.Tree])List[ParallelMatching.this.global.Tree]">(</span><a href="PatternNodes.scala.html#79517" title="(vs: List[ParallelMatching.this.global.Symbol],pat: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">makeBind</a>(<a href="#546062" title="List[ParallelMatching.this.global.Tree]">xs</a>.<a href="#81448" title="implicit scala.tools.nsc.matching.ParallelMatching.Implicits.mkPattern : (t: ParallelMatching.this.global.Tree)ParallelMatching.this.Pattern">last</a>.<a href="#536961" title="=&gt; List[ParallelMatching.this.global.Symbol]">boundVariables</a>, <a href="../ast/TreeDSL.scala.html#537139" title="(tpe: ParallelMatching.this.global.Type)ParallelMatching.this.global.Ident">WILD</a>(<a href="#542488" title="=&gt; MatchMatrix.this.Scrutinee">scrut</a>.<a href="#541761" title="=&gt; ParallelMatching.this.global.Type">seqType</a>)))

      <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(len: Int,x: ParallelMatching.this.global.Tree)Option[List[ParallelMatching.this.global.Tree]]" id="542555">getSubPatterns</a>(<a title="Int" id="546100">len</a>: <span title="Int">Int</span>, <a title="ParallelMatching.this.global.Tree" id="546101">x</a>: <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a>): <span title="Option[List[ParallelMatching.this.global.Tree]]">Option</span>[List[Tree]] = <a href="../ast/TreeDSL.scala.html#42712" title="(x: ParallelMatching.this.global.Tree)(f: PartialFunction[ParallelMatching.this.global.Tree,List[ParallelMatching.this.global.Tree]])Option[List[ParallelMatching.this.global.Tree]]">condOpt</a>(<a href="#546101" title="ParallelMatching.this.global.Tree">x</a>) <a href="#546114" title="List[ParallelMatching.this.global.Tree]">{</a>
        <span title="List[ParallelMatching.this.global.Tree]" class="keyword">case</span> <a title="ParallelMatching.this.global.ArrayValue" id="546115">av</a> @ ArrayValue(_,<a title="List[ParallelMatching.this.global.Tree]" id="546118">xs</a>) <span class="keyword">if</span> <span title="(x$1: Boolean)Boolean">!</span><a href="#79585" title="(t: ParallelMatching.this.global.Tree)Boolean">isRightIgnoring</a>(<a href="#546115" title="ParallelMatching.this.global.ArrayValue">av</a>) &amp;&amp; <a href="#546118" title="List[ParallelMatching.this.global.Tree]">xs</a>.<span title="(x$1: Int)Boolean">length</span> == <a href="#546100" title="Int">len</a>   =&gt; <a href="#546118" title="List[ParallelMatching.this.global.Tree]">xs</a> <a href="#546132" title="List[ParallelMatching.this.global.Tree]">:::</a> <span title="(xs: object ParallelMatching.this.global.EmptyTree*)List[object ParallelMatching.this.global.EmptyTree]">List</span><span title="(prefix: List[ParallelMatching.this.global.Tree])List[ParallelMatching.this.global.Tree]">(</span><a href="../ast/Trees.scala.html#26761" title="object ParallelMatching.this.global.EmptyTree">EmptyTree</a>)
        <span title="List[ParallelMatching.this.global.Tree]" class="keyword">case</span> <a title="ParallelMatching.this.global.ArrayValue" id="546149">av</a> @ ArrayValue(_,<a title="List[ParallelMatching.this.global.Tree]" id="546152">xs</a>) <span class="keyword">if</span>  <a href="#79585" title="(t: ParallelMatching.this.global.Tree)Boolean">isRightIgnoring</a><span title="(x$1: Boolean)Boolean">(</span><a href="#546149" title="ParallelMatching.this.global.ArrayValue">av</a>) &amp;&amp; <a href="#546152" title="List[ParallelMatching.this.global.Tree]">xs</a>.<span title="(x$1: Int)Boolean">length</span> == <a href="#546100" title="(x$1: Int)Int">len</a>+<span title="Int(1)" class="int">1</span> =&gt; <a href="#542554" title="(xs: List[ParallelMatching.this.global.Tree])List[ParallelMatching.this.global.Tree]">removeStar</a>(<a href="#546152" title="List[ParallelMatching.this.global.Tree]">xs</a>) // (*) 
        <span title="List[ParallelMatching.this.global.Tree]" class="keyword">case</span> <a href="../ast/Trees.scala.html#26761" title="object ParallelMatching.this.global.EmptyTree">EmptyTree</a> | <a href="../ast/TreeDSL.scala.html#537140" title="(other: Any)Boolean">WILD</a>()                                                  =&gt; <a href="PatternNodes.scala.html#79516" title="(i: Int)List[ParallelMatching.this.global.Tree]">getDummies</a>(<a href="#546100" title="(x$1: Int)Int">len</a> + <span title="Int(1)" class="int">1</span>)
      }

      <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(vs: List[ParallelMatching.this.global.Symbol],tail: ParallelMatching.this.global.Symbol,nrows: List[MatchMatrix.this.Row])MatchMatrix.this.Rep" id="542556">makeSuccRep</a>(<a title="List[ParallelMatching.this.global.Symbol]" id="546206">vs</a>: <span title="List[ParallelMatching.this.global.Symbol]">List</span>[Symbol], <a title="ParallelMatching.this.global.Symbol" id="546207">tail</a>: <a href="../symtab/Symbols.scala.html#26286" title="ParallelMatching.this.global.Symbol">Symbol</a>, <a title="List[MatchMatrix.this.Row]" id="546208">nrows</a>: <span title="List[MatchMatrix.this.Row]">List</span>[Row]) =
        <a href="#81349" title="(tvars: List[ParallelMatching.this.global.Symbol],row1: List[MatchMatrix.this.Row])MatchMatrix.this.Rep">make</a>(<a href="#546206" title="List[ParallelMatching.this.global.Symbol]">vs</a> <a href="#546211" title="List[ParallelMatching.this.global.Symbol]">:::</a> <a href="#546207" title="ParallelMatching.this.global.Symbol">tail</a> <a href="#546212" title="(prefix: List[ParallelMatching.this.global.Symbol])List[ParallelMatching.this.global.Symbol]">::</a> <a href="#542579" title="=&gt; MatchMatrix.this.Rep">rest</a>.<a href="#541302" title="(x: ParallelMatching.this.global.Symbol)List[ParallelMatching.this.global.Symbol]">tvars</a>, <a href="#546208" title="List[MatchMatrix.this.Row]">nrows</a>)

      /** True if 'next' must be checked even if 'first' failed to match after passing its length test
        * (the conditional supplied by getPrecondition.) This is an optimization to avoid checking sequences
        * which cannot match due to a length incompatibility.
        */
      <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(first: ParallelMatching.this.global.Tree,next: ParallelMatching.this.global.Tree)Boolean" id="542557">mustCheck</a>(<a title="ParallelMatching.this.global.Tree" id="546229">first</a>: <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a>, <a title="ParallelMatching.this.global.Tree" id="546230">next</a>: <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a>): <span title="Boolean">Boolean</span> =
        <span title="(x$1: Boolean)Boolean">(</span><a href="#546229" title="(x$1: AnyRef)Boolean">first</a> ne <a href="#546230" title="ParallelMatching.this.global.Tree">next</a>) &amp;&amp; (<a href="#79586" title="(t: ParallelMatching.this.global.Tree)Boolean">isDefaultPattern</a><span title="(x$1: Boolean)Boolean">(</span><a href="#546230" title="ParallelMatching.this.global.Tree">next</a>) || <a href="../ast/TreeDSL.scala.html#42709" title="(x: (ParallelMatching.this.global.Tree, ParallelMatching.this.global.Tree))(f: PartialFunction[(ParallelMatching.this.global.Tree, ParallelMatching.this.global.Tree),Boolean])Boolean">cond</a>(<span title="(_1: ParallelMatching.this.global.Tree,_2: ParallelMatching.this.global.Tree)(ParallelMatching.this.global.Tree, ParallelMatching.this.global.Tree)">(</span><a href="#546229" title="ParallelMatching.this.global.Tree">first</a>, <a href="#546230" title="ParallelMatching.this.global.Tree">next</a>)) <a href="#546254" title="Boolean">{</a>
          <span title="Boolean" class="keyword">case</span> (<a title="ParallelMatching.this.global.ArrayValue" id="546257">av</a>: <a href="../ast/Trees.scala.html#26835" title="ParallelMatching.this.global.ArrayValue">ArrayValue</a>, <a title="ParallelMatching.this.global.ArrayValue" id="546258">bv</a>: <a href="../ast/Trees.scala.html#26835" title="ParallelMatching.this.global.ArrayValue">ArrayValue</a>) =&gt;
            // number of non-star elements in each sequence
            <span class="keyword">val</span> <a href="#546262" title="(Int, Int)">(</a><a href="#546261" title="Int" id="546262">firstLen</a>, <a href="#546261" title="Int" id="546263">nextLen</a>) = <span title="(_1: Int,_2: Int)(Int, Int)">(</span><a href="#542552" title="(x: ParallelMatching.this.global.ArrayValue)Int">elemLength</a>(<a href="#546257" title="ParallelMatching.this.global.ArrayValue">av</a>), <a href="#542552" title="(x: ParallelMatching.this.global.ArrayValue)Int">elemLength</a>(<a href="#546258" title="ParallelMatching.this.global.ArrayValue">bv</a>))
            
            // !isAllDefaults(av) || 
            (<span title="(_1: Boolean,_2: Boolean)(Boolean, Boolean)">(</span><a href="#79585" title="(t: ParallelMatching.this.global.Tree)Boolean">isRightIgnoring</a>(<a href="#546257" title="ParallelMatching.this.global.ArrayValue">av</a>), <a href="#79585" title="(t: ParallelMatching.this.global.Tree)Boolean">isRightIgnoring</a>(<a href="#546258" title="ParallelMatching.this.global.ArrayValue">bv</a>)) <span title="Boolean" class="keyword">match</span> {
              <span title="Boolean" class="keyword">case</span> (<span title="Boolean(true)" class="keyword">true</span>, <span title="Boolean(true)" class="keyword">true</span>)   =&gt; <a href="#546263" title="(x$1: Int)Boolean">nextLen</a> &lt; <a href="#546262" title="Int">firstLen</a>   // Seq(a,b,c,_*) followed by Seq(a,b,_*) because of (a,b)
              <span title="Boolean" class="keyword">case</span> (<span title="Boolean(true)" class="keyword">true</span>, <span title="Boolean(false)" class="keyword">false</span>)  =&gt; 
                <a href="#542553" title="(x: ParallelMatching.this.global.ArrayValue)Boolean">isAllDefaults</a><span title="(x$1: Boolean)Boolean">(</span><a href="#546257" title="ParallelMatching.this.global.ArrayValue">av</a>) &amp;&amp; (<a href="#546263" title="(x$1: Int)Boolean">nextLen</a> &lt; <a href="#546262" title="Int">firstLen</a>)
                // nextLen &lt; firstLen   // Seq(a,b,c,_*) followed by Seq(a,b) because of (a,b)
              <span title="Boolean(true)" class="keyword">case</span> (<span title="Boolean(false)" class="keyword">false</span>, <span title="Boolean(true)" class="keyword">true</span>)  =&gt; <span title="Boolean(true)" class="keyword">true</span>
              // case (false, true)  =&gt; nextLen &lt;= firstLen  // Seq(a,b) followed by Seq(a,b,c,_*) cannot match since len == 2
              // however that conditional causes the following to fail with 2nd case unreachable:
              // def not_unreachable2(xs:Seq[Char]) = xs match {
              //   case Seq(x, y) =&gt; x::y::Nil
              //   case Seq(x, y, z, _*) =&gt; List(x,y)
              // }
              // ...which means this logic must be applied more broadly than I had inferred from the comment
              // &quot;...even if [x] failed to match *after* passing its length test.&quot; So one would think that means
              // the second case would only not be tried if scrut.length == 2, and reachable the rest of the time.
              // XXX note this used to say &quot;nextLen == firstLen&quot; and this caused #2187.  Rewrite this.
              <span title="Boolean" class="keyword">case</span> (<span title="Boolean(false)" class="keyword">false</span>, <span title="Boolean(false)" class="keyword">false</span>) =&gt; <a href="#546263" title="(x$1: Int)Boolean">nextLen</a> &gt;= <a href="#546262" title="Int">firstLen</a>   // same length (self compare ruled out up top)
            })
        })

      case <span class="keyword">class</span> <a title="class TransitionContext extends java.lang.Object with ScalaObject with Product" id="546377">TransitionContext</a><span title="ScalaObject">(</span><a title="(ParallelMatching.this.global.Tree, ParallelMatching.this.global.Tree) =&gt; ParallelMatching.this.global.Tree" id="547479">f</a>: <span title="(ParallelMatching.this.global.Tree, ParallelMatching.this.global.Tree) =&gt; ParallelMatching.this.global.Tree">TreeFunction2</span>)

      // context (to be used in IF), success and failure Rep 
      <span class="keyword">def</span> <a title="()MatchMatrix.this.Branch[MixSequence.this.TransitionContext]" id="542561">getTransition</a>(): <a href="#545016" title="MatchMatrix.this.Branch[MixSequence.this.TransitionContext]">Branch</a>[TransitionContext] = {
        <a href="#541764" title="(other: ParallelMatching.this.global.Type)Unit">scrut</a> assertIsSubtype <a href="#542492" title="=&gt; ParallelMatching.this.Pattern">head</a>.<a href="#536952" title="=&gt; ParallelMatching.this.global.Type">tpe</a>   // scrut.tpe &lt;:&lt; column.head.tpe confirmed by assertion
        <span class="keyword">val</span> <a title="(ParallelMatching.this.global.ArrayValue, List[ParallelMatching.this.global.Tree])" id="546416">av</a> @ ArrayValue(_, <a href="#546415" title="List[ParallelMatching.this.global.Tree]" id="546417">elems</a>)   = <a href="#542492" title="=&gt; ParallelMatching.this.Pattern">head</a>.<a href="#536968" title="=&gt; ParallelMatching.this.global.Tree">tree</a>
        <span class="keyword">val</span> <a title="List[ParallelMatching.this.global.Tree]" id="546418">ys</a>                          = <span title="List[ParallelMatching.this.global.Tree]" class="keyword">if</span> (<a href="#79585" title="(t: ParallelMatching.this.global.Tree)Boolean">isRightIgnoring</a>(<a href="#546416" title="ParallelMatching.this.global.ArrayValue">av</a>)) <a href="#546417" title="List[ParallelMatching.this.global.Tree]">elems</a>.<span title="=&gt; List[ParallelMatching.this.global.Tree]">init</span> <span class="keyword">else</span> <a href="#546417" title="List[ParallelMatching.this.global.Tree]">elems</a>
        <span class="keyword">val</span> <a title="List[ParallelMatching.this.global.Symbol]" id="546419">vs</a>                          = <a href="#546418" title="(f: (ParallelMatching.this.global.Tree) =&gt; ParallelMatching.this.global.Symbol)(implicit bf: scala.collection.generic.BuilderFactory[ParallelMatching.this.global.Symbol,List[ParallelMatching.this.global.Symbol],List[ParallelMatching.this.global.Tree]])List[ParallelMatching.this.global.Symbol]">ys</a> <span title="scala.collection.generic.BuilderFactory[ParallelMatching.this.global.Symbol,List[ParallelMatching.this.global.Symbol],List#Coll]">map</span> (<a title="ParallelMatching.this.global.Tree" id="546461">y</a> =&gt; <a href="TransMatcher.scala.html#79675" title="(pos: scala.tools.nsc.util.Position,tpe: ParallelMatching.this.global.Type,flags: List[Long],name: ParallelMatching.this.global.Name)ParallelMatching.this.global.Symbol">newVar</a>(<a href="../ast/TreeDSL.scala.html#42720" title="(x: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">unbind</a>(<a href="#546461" title="ParallelMatching.this.global.Tree">y</a>).<a href="../ast/Trees.scala.html#29547" title="=&gt; scala.tools.nsc.util.Position">pos</a>, <a href="#542488" title="=&gt; MatchMatrix.this.Scrutinee">scrut</a>.<a href="#541762" title="=&gt; ParallelMatching.this.global.Type">elemType</a>))
        <span class="keyword">def</span> <a title="=&gt; ParallelMatching.this.global.gen.global.Tree" id="546420">scrutCopy</a>                   = <a href="#542488" title="=&gt; MatchMatrix.this.Scrutinee">scrut</a>.<a href="#541758" title="=&gt; ParallelMatching.this.global.gen.global.Tree">id</a>.<a href="../ast/Trees.scala.html#29573" title="=&gt; ParallelMatching.this.global.gen.global.Tree">duplicate</a>

        <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="ParallelMatching.this.global.Symbol" id="546422">tail</a>                   = <a href="TransMatcher.scala.html#79675" title="(pos: scala.tools.nsc.util.Position,tpe: ParallelMatching.this.global.Type,flags: List[Long],name: ParallelMatching.this.global.Name)ParallelMatching.this.global.Symbol">newVar</a>(<a href="#542488" title="=&gt; MatchMatrix.this.Scrutinee">scrut</a>.<a href="#541756" title="=&gt; scala.tools.nsc.util.Position">pos</a>, <a href="#542488" title="=&gt; MatchMatrix.this.Scrutinee">scrut</a>.<a href="#541761" title="=&gt; ParallelMatching.this.global.Type">seqType</a>)
        <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="ParallelMatching.this.global.analyzer.global.Tree" id="546424">lastBinding</a>            = <a href="TransMatcher.scala.html#79676" title="(x: ParallelMatching.this.global.Symbol,rhs: ParallelMatching.this.global.Tree)ParallelMatching.this.global.analyzer.global.Tree">typedValDef</a>(<a href="#546421" title="=&gt; ParallelMatching.this.global.Symbol">tail</a>, <a href="../ast/TreeDSL.scala.html#45319" title="(count: Int)ParallelMatching.this.global.Tree">scrutCopy</a> DROP <a href="#546418" title="List[ParallelMatching.this.global.Tree]">ys</a>.<span title="=&gt; Int">size</span>)
        <span class="keyword">def</span> <a title="(i: Int)ParallelMatching.this.global.analyzer.global.Tree" id="546425">elemAt</a>(<a title="Int" id="546580">i</a>: <span title="Int">Int</span>)              = <a href="../typechecker/Typers.scala.html#42872" title="(tree: ParallelMatching.this.global.analyzer.global.Tree)ParallelMatching.this.global.analyzer.global.Tree">typer</a> typed ((<a href="../ast/TreeDSL.scala.html#45317" title="(sym: ParallelMatching.this.global.Symbol)ParallelMatching.this.CODE.SelectStart">scrutCopy</a> <a href="../ast/TreeDSL.scala.html#44955" title="(args: ParallelMatching.this.global.Tree*)ParallelMatching.this.global.Apply">DOT</a> (<a href="#546420" title="=&gt; ParallelMatching.this.global.gen.global.Tree">scrutCopy</a>.<a href="../symtab/Types.scala.html#30403" title="(name: ParallelMatching.this.global.gen.global.Name)ParallelMatching.this.global.gen.global.Symbol">tpe</a> member <a href="../symtab/StdNames.scala.html#26690" title="object ParallelMatching.this.global.nme">nme</a>.<a href="../symtab/StdNames.scala.html#30014" title="=&gt; ParallelMatching.this.global.Name">apply</a>))(<a href="../ast/TreeDSL.scala.html#49582" title="(x: Any)ParallelMatching.this.global.Literal">LIT</a>(<a href="#546580" title="Int">i</a>)))

        <span class="keyword">val</span> <a title="List[ParallelMatching.this.global.analyzer.global.Tree]" id="546426">bindings</a> =
          (<a href="#546419" title="List[ParallelMatching.this.global.Symbol]">vs</a>.<span title="(f: ((ParallelMatching.this.global.Symbol, Int)) =&gt; ParallelMatching.this.global.analyzer.global.Tree)(implicit bf: scala.collection.generic.BuilderFactory[ParallelMatching.this.global.analyzer.global.Tree,List[ParallelMatching.this.global.analyzer.global.Tree],List[(ParallelMatching.this.global.Symbol, Int)]])List[ParallelMatching.this.global.analyzer.global.Tree]">zipWithIndex</span> <span title="scala.collection.generic.BuilderFactory[ParallelMatching.this.global.analyzer.global.Tree,List[ParallelMatching.this.global.analyzer.global.Tree],List#Coll]">map</span> <span title="(f: (ParallelMatching.this.global.Symbol, Int) =&gt; ParallelMatching.this.global.analyzer.global.Tree)((ParallelMatching.this.global.Symbol, Int)) =&gt; ParallelMatching.this.global.analyzer.global.Tree">tupled</span>((<a title="ParallelMatching.this.global.Symbol" id="546830">v</a>, <a title="Int" id="546831">i</a>) =&gt; <a href="TransMatcher.scala.html#79676" title="(x: ParallelMatching.this.global.Symbol,rhs: ParallelMatching.this.global.Tree)ParallelMatching.this.global.analyzer.global.Tree">typedValDef</a>(<a href="#546830" title="ParallelMatching.this.global.Symbol">v</a>, <a href="#546425" title="(i: Int)ParallelMatching.this.global.analyzer.global.Tree">elemAt</a>(<a href="#546831" title="Int">i</a>)))) <a href="#546655" title="List[ParallelMatching.this.global.analyzer.global.Tree]">:::</a> <span title="(xs: ParallelMatching.this.global.analyzer.global.Tree*)List[ParallelMatching.this.global.analyzer.global.Tree]">List</span><span title="(prefix: List[ParallelMatching.this.global.analyzer.global.Tree])List[ParallelMatching.this.global.analyzer.global.Tree]">(</span><a href="#546423" title="=&gt; ParallelMatching.this.global.analyzer.global.Tree">lastBinding</a>)

        <span class="keyword">val</span> <a href="#546428" title="(List[Option[MatchMatrix.this.Row]], List[Option[MatchMatrix.this.Row]])">(</a><a href="#546427" title="List[Option[MatchMatrix.this.Row]]" id="546428">nrows</a>, <a href="#546427" title="List[Option[MatchMatrix.this.Row]]" id="546429">frows</a>) = <span title="object List">List</span>.<span title="(xs: List[(Option[MatchMatrix.this.Row], Option[MatchMatrix.this.Row])])(List[Option[MatchMatrix.this.Row]], List[Option[MatchMatrix.this.Row]])">unzip</span><span title="(List[Option[MatchMatrix.this.Row]], List[Option[MatchMatrix.this.Row]]) @unchecked">(</span>
          <span class="keyword">for</span> ((<a title="ParallelMatching.this.global.Tree" id="546984">c</a>, <a title="MatchMatrix.this.Row" id="546985">rows</a>) &lt;- <a href="#542010" title="(others: List[MatchMatrix.this.Row])List[(ParallelMatching.this.global.Tree, MatchMatrix.this.Row)]">pats</a> <a href="#546960" title="(f: ((ParallelMatching.this.global.Tree, MatchMatrix.this.Row)) =&gt; (Option[MatchMatrix.this.Row], Option[MatchMatrix.this.Row]))(implicit bf: scala.collection.generic.BuilderFactory[(Option[MatchMatrix.this.Row], Option[MatchMatrix.this.Row]),List[(Option[MatchMatrix.this.Row], Option[MatchMatrix.this.Row])],List[(ParallelMatching.this.global.Tree, MatchMatrix.this.Row)]])List[(Option[MatchMatrix.this.Row], Option[MatchMatrix.this.Row])]">zip</a> <a href="#542579" title="=&gt; MatchMatrix.this.Rep">rest</a>.<a href="#541303" title="=&gt; List[MatchMatrix.this.Row]">rows</a>) <span class="keyword">yield</span> <a href="#542555" title="(len: Int,x: ParallelMatching.this.global.Tree)Option[List[ParallelMatching.this.global.Tree]]">getSubPatterns</a>(<a href="#546418" title="List[ParallelMatching.this.global.Tree]">ys</a>.<span title="=&gt; Int">size</span>, <a href="#546984" title="ParallelMatching.this.global.Tree">c</a>) <span title="(Option[MatchMatrix.this.Row], Option[MatchMatrix.this.Row])" class="keyword">match</span> {
            <span title="(Some[MatchMatrix.this.Row], Option[MatchMatrix.this.Row])" class="keyword">case</span> Some(<a title="List[ParallelMatching.this.global.Tree]" id="546991">ps</a>) =&gt; <span title="(_1: Some[MatchMatrix.this.Row],_2: Option[MatchMatrix.this.Row])(Some[MatchMatrix.this.Row], Option[MatchMatrix.this.Row])">(</span><span title="(x: MatchMatrix.this.Row)Some[MatchMatrix.this.Row]">Some</span>(<a href="#541174" title="(hs: List[ParallelMatching.this.global.Tree])MatchMatrix.this.Row">rows</a> insert <a href="#546991" title="List[ParallelMatching.this.global.Tree]">ps</a>), <span title="Option[MatchMatrix.this.Row]" class="keyword">if</span> (<a href="#542557" title="(first: ParallelMatching.this.global.Tree,next: ParallelMatching.this.global.Tree)Boolean">mustCheck</a>(<a href="#546416" title="ParallelMatching.this.global.ArrayValue">av</a>, <a href="#546984" title="ParallelMatching.this.global.Tree">c</a>)) <span title="(x: MatchMatrix.this.Row)Some[MatchMatrix.this.Row]">Some</span>(<a href="#541173" title="(h: ParallelMatching.this.global.Tree)MatchMatrix.this.Row">rows</a> insert <a href="#546984" title="ParallelMatching.this.global.Tree">c</a>) <span class="keyword">else</span> <span title="object None">None</span>)
            <span title="(object None, Some[MatchMatrix.this.Row])" class="keyword">case</span> <span title="object None">None</span>     =&gt; <span title="(_1: object None,_2: Some[MatchMatrix.this.Row])(object None, Some[MatchMatrix.this.Row])">(</span><span title="object None">None</span>, <span title="(x: MatchMatrix.this.Row)Some[MatchMatrix.this.Row]">Some</span>(<a href="#541173" title="(h: ParallelMatching.this.global.Tree)MatchMatrix.this.Row">rows</a> insert <a href="#546984" title="ParallelMatching.this.global.Tree">c</a>))
          })

        <span class="keyword">val</span> <a title="MatchMatrix.this.Rep" id="546430">succ</a> = <a href="#542556" title="(vs: List[ParallelMatching.this.global.Symbol],tail: ParallelMatching.this.global.Symbol,nrows: List[MatchMatrix.this.Row])MatchMatrix.this.Rep">makeSuccRep</a>(<a href="#546419" title="List[ParallelMatching.this.global.Symbol]">vs</a>, <a href="#546421" title="=&gt; ParallelMatching.this.global.Symbol">tail</a>, <a href="#546428" title="(f: (Option[MatchMatrix.this.Row]) =&gt; Traversable[MatchMatrix.this.Row])(implicit bf: scala.collection.generic.BuilderFactory[MatchMatrix.this.Row,List[MatchMatrix.this.Row],List[Option[MatchMatrix.this.Row]]])List[MatchMatrix.this.Row]">nrows</a> <span title="scala.collection.generic.BuilderFactory[MatchMatrix.this.Row,List[MatchMatrix.this.Row],List#Coll]">flatMap</span> (<a title="Option[MatchMatrix.this.Row]" id="547266">x</a> =&gt; <a href="#547266" title="(xo: Option[MatchMatrix.this.Row])Iterable[MatchMatrix.this.Row]">x</a>))
        <span class="keyword">val</span> <a title="Option[MatchMatrix.this.Rep]" id="546431">fail</a> = <a href="#542496" title="(xs: List[MatchMatrix.this.Row])Option[MatchMatrix.this.Rep]">mkFail</a>(<a href="#546429" title="(f: (Option[MatchMatrix.this.Row]) =&gt; Traversable[MatchMatrix.this.Row])(implicit bf: scala.collection.generic.BuilderFactory[MatchMatrix.this.Row,List[MatchMatrix.this.Row],List[Option[MatchMatrix.this.Row]]])List[MatchMatrix.this.Row]">frows</a> <span title="scala.collection.generic.BuilderFactory[MatchMatrix.this.Row,List[MatchMatrix.this.Row],List#Coll]">flatMap</span> (<a title="Option[MatchMatrix.this.Row]" id="547324">x</a> =&gt; <a href="#547324" title="(xo: Option[MatchMatrix.this.Row])Iterable[MatchMatrix.this.Row]">x</a>))
        <span class="keyword">def</span> <a title="=&gt; (ParallelMatching.this.global.Tree, ParallelMatching.this.global.Tree) =&gt; ParallelMatching.this.global.If" id="546432">transition</a> = (thenp: <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a>, elsep: <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a>) =&gt;
          <a href="../ast/TreeDSL.scala.html#42756" title="(tree: ParallelMatching.this.global.Tree)ParallelMatching.this.CODE.IfStart">IF</a> <a href="../ast/TreeDSL.scala.html#50041" title="(x: ParallelMatching.this.global.Tree)ParallelMatching.this.CODE.IfStart">(</a><a href="#542563" title="(tree: ParallelMatching.this.global.Tree,lengthArg: Int)ParallelMatching.this.global.analyzer.global.Tree">getPrecondition</a>(<a href="#546420" title="=&gt; ParallelMatching.this.global.gen.global.Tree">scrutCopy</a>, <a href="#542552" title="(x: ParallelMatching.this.global.ArrayValue)Int">elemLength</a>(<a href="#546416" title="ParallelMatching.this.global.ArrayValue">av</a>))) <a href="../ast/TreeDSL.scala.html#50042" title="(elsep: ParallelMatching.this.global.Tree)ParallelMatching.this.global.If">THEN</a> <a href="TransMatcher.scala.html#79677" title="(vds: List[ParallelMatching.this.global.Tree],exp: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">squeezedBlock</a>(<a href="#546426" title="List[ParallelMatching.this.global.analyzer.global.Tree]">bindings</a>, <a href="#547342" title="ParallelMatching.this.global.Tree">thenp</a>) ELSE <a href="#547343" title="ParallelMatching.this.global.Tree">elsep</a>

        <a href="#545016" title="(action: MixSequence.this.TransitionContext,succ: MatchMatrix.this.Rep,fail: Option[MatchMatrix.this.Rep])MatchMatrix.this.Branch[MixSequence.this.TransitionContext]">Branch</a>(<a href="#546377" title="(f: (ParallelMatching.this.global.Tree, ParallelMatching.this.global.Tree) =&gt; ParallelMatching.this.global.Tree)MixSequence.this.TransitionContext">TransitionContext</a>(<a href="#546432" title="=&gt; (ParallelMatching.this.global.Tree, ParallelMatching.this.global.Tree) =&gt; ParallelMatching.this.global.If">transition</a>), <a href="#546430" title="MatchMatrix.this.Rep">succ</a>, <a href="#546431" title="Option[MatchMatrix.this.Rep]">fail</a>)
      }

      <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(tree: ParallelMatching.this.global.Tree,len: Int,op: (ParallelMatching.this.global.Tree, ParallelMatching.this.global.Tree) =&gt; ParallelMatching.this.global.Tree)ParallelMatching.this.global.analyzer.global.Tree" id="542562">lengthCheck</a>(<a title="ParallelMatching.this.global.Tree" id="547349">tree</a>: <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a>, <a title="Int" id="547350">len</a>: <span title="Int">Int</span>, <a title="(ParallelMatching.this.global.Tree, ParallelMatching.this.global.Tree) =&gt; ParallelMatching.this.global.Tree" id="547351">op</a>: <span title="(ParallelMatching.this.global.Tree, ParallelMatching.this.global.Tree) =&gt; ParallelMatching.this.global.Tree">TreeFunction2</span>) = {
        <span class="keyword">def</span> <a title="=&gt; ParallelMatching.this.global.Symbol" id="547354">compareOp</a> = <a href="#542492" title="=&gt; ParallelMatching.this.Pattern">head</a>.<a href="../symtab/Types.scala.html#30403" title="(name: ParallelMatching.this.global.Name)ParallelMatching.this.global.Symbol">tpe</a> member <a href="../symtab/StdNames.scala.html#26690" title="object ParallelMatching.this.global.nme">nme</a>.<a href="../symtab/StdNames.scala.html#30106" title="=&gt; ParallelMatching.this.global.Name">lengthCompare</a>  // symbol for &quot;lengthCompare&quot; method
        <span class="keyword">def</span> <a title="(t1: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree" id="547355">cmpFunction</a>(<a title="ParallelMatching.this.global.Tree" id="547364">t1</a>: <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a>) = <a href="#547351" title="(v1: ParallelMatching.this.global.Tree,v2: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">op</a>((<a href="#547364" title="ParallelMatching.this.global.Tree">t1</a>.<a href="../ast/TreeDSL.scala.html#45317" title="(sym: ParallelMatching.this.global.Symbol)ParallelMatching.this.CODE.SelectStart">duplicate</a> <a href="../ast/TreeDSL.scala.html#44955" title="(args: ParallelMatching.this.global.Tree*)ParallelMatching.this.global.Apply">DOT</a> <a href="#547354" title="=&gt; ParallelMatching.this.global.Symbol">compareOp</a>)(<a href="../ast/TreeDSL.scala.html#49582" title="(x: Any)ParallelMatching.this.global.Literal">LIT</a>(<a href="#547350" title="Int">len</a>)), <a href="../ast/TreeDSL.scala.html#42729" title="=&gt; ParallelMatching.this.global.Literal">ZERO</a>)
        // first ascertain lhs is not null: bug #2241
        <a href="../typechecker/Typers.scala.html#42872" title="(tree: ParallelMatching.this.global.analyzer.global.Tree)ParallelMatching.this.global.analyzer.global.Tree">typer</a> typed <a href="../ast/TreeDSL.scala.html#42706" title="(f: (ParallelMatching.this.global.Tree) =&gt; ParallelMatching.this.global.Tree)(ParallelMatching.this.global.Tree) =&gt; ParallelMatching.this.global.Tree">nullSafe</a><span title="(v1: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">(</span><a href="#547355" title="(t1: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">cmpFunction</a> _)(<a href="#547349" title="ParallelMatching.this.global.Tree">tree</a>)
      }

      // precondition for matching: sequence is exactly length of arg
      <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(tree: ParallelMatching.this.global.Tree,lengthArg: Int)ParallelMatching.this.global.analyzer.global.Tree" id="542563">getPrecondition</a>(<a title="ParallelMatching.this.global.Tree" id="547345">tree</a>: <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a>, <a title="Int" id="547346">lengthArg</a>: <span title="Int">Int</span>) =
        <a href="#542562" title="(tree: ParallelMatching.this.global.Tree,len: Int,op: (ParallelMatching.this.global.Tree, ParallelMatching.this.global.Tree) =&gt; ParallelMatching.this.global.Tree)ParallelMatching.this.global.analyzer.global.Tree">lengthCheck</a>(<a href="#547345" title="ParallelMatching.this.global.Tree">tree</a>, <a href="#547346" title="Int">lengthArg</a>, <a href="../ast/TreeDSL.scala.html#45303" title="(other: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Apply">_</a> ANY_== <a href="#547438" title="ParallelMatching.this.global.Tree">_</a>)

      <span class="keyword">final</span> <span class="keyword">def</span> <a title="()ParallelMatching.this.global.Tree" id="542564">tree</a>() = {
        <span class="keyword">val</span> Branch<a href="#547496" title="((ParallelMatching.this.global.Tree, ParallelMatching.this.global.Tree) =&gt; ParallelMatching.this.global.Tree, MatchMatrix.this.Rep, MatchMatrix.this.Rep)">(</a>TransitionContext(<a href="#547495" title="(ParallelMatching.this.global.Tree, ParallelMatching.this.global.Tree) =&gt; ParallelMatching.this.global.Tree" id="547496">transition</a>), <a href="#547495" title="MatchMatrix.this.Rep" id="547497">succ</a>, Some(<a href="#547495" title="MatchMatrix.this.Rep" id="547498">fail</a>)) = <a href="#81372" title="MixSequence.this.type" class="keyword">this</a>.<a href="#542561" title="()MatchMatrix.this.Branch[MixSequence.this.TransitionContext]">getTransition</a>
        <a href="#547496" title="(v1: ParallelMatching.this.global.Tree,v2: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">transition</a>(<a href="#547497" title="MatchMatrix.this.Rep">succ</a>.<a href="#81420" title="()ParallelMatching.this.global.Tree">toTree</a>, <a href="#547498" title="MatchMatrix.this.Rep">fail</a>.<a href="#81420" title="()ParallelMatching.this.global.Tree">toTree</a>)
      }
    }

    /** handle sequence pattern and ArrayValue with star patterns
     */
    <span class="keyword">final</span> <span class="keyword">class</span> <a title="class MixSequenceStar extends MatchMatrix.this.MixSequence with ScalaObject" id="81373">MixSequenceStar</a><span title="ScalaObject">(</span><a title="MatchMatrix.this.Patterns" id="542573">pats</a>: <a href="#542117" title="MatchMatrix.this.Patterns">Patterns</a>, <a title="MatchMatrix.this.Rep" id="542574">rest</a>: <a href="#541300" title="MatchMatrix.this.Rep">Rep</a>) <span class="keyword">extends</span> <a href="#81372" title="MatchMatrix.this.MixSequence">MixSequence</a>(<a href="#542573" title="MatchMatrix.this.Patterns">pats</a>, <a href="#542574" title="MatchMatrix.this.Rep">rest</a>) {
      // in principle, we could optimize more, but variable binding gets complicated (@todo use finite state methods instead)
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="(minlen: Int,x: ParallelMatching.this.global.Tree)Option[List[ParallelMatching.this.global.Tree]]" id="542570">getSubPatterns</a>(<a title="Int" id="547545">minlen</a>: <span title="Int">Int</span>, <a title="ParallelMatching.this.global.Tree" id="547546">x</a>: <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a>) = <a href="../ast/TreeDSL.scala.html#42712" title="(x: ParallelMatching.this.global.Tree)(f: PartialFunction[ParallelMatching.this.global.Tree,List[ParallelMatching.this.global.Tree]])Option[List[ParallelMatching.this.global.Tree]]">condOpt</a>(<a href="#547546" title="ParallelMatching.this.global.Tree">x</a>) <a href="#547560" title="List[ParallelMatching.this.global.Tree]">{</a>
        <span title="List[ParallelMatching.this.global.gen.global.Tree]" class="keyword">case</span> <a title="ParallelMatching.this.global.ArrayValue" id="547561">av</a> @ ArrayValue(_,<a title="List[ParallelMatching.this.global.Tree]" id="547564">xs</a>) <span class="keyword">if</span> (<span title="(x$1: Boolean)Boolean">!</span><a href="#79585" title="(t: ParallelMatching.this.global.Tree)Boolean">isRightIgnoring</a>(<a href="#547561" title="ParallelMatching.this.global.ArrayValue">av</a>) &amp;&amp; <a href="#547564" title="List[ParallelMatching.this.global.Tree]">xs</a>.<span title="(x$1: Int)Boolean">length</span>   == <a href="#547545" title="Int">minlen</a>) =&gt;  // Seq(p1,...,pN)
          <a href="#547564" title="List[ParallelMatching.this.global.Tree]">xs</a> <a href="#547578" title="List[ParallelMatching.this.global.Tree]">:::</a> <span title="(xs: ParallelMatching.this.global.gen.global.Tree*)List[ParallelMatching.this.global.gen.global.Tree]">List</span><span title="(prefix: List[ParallelMatching.this.global.gen.global.Tree])List[ParallelMatching.this.global.gen.global.Tree]">(</span><a href="../Global.scala.html#39263" title="object ParallelMatching.this.global.gen">gen</a>.<a href="../ast/TreeGen.scala.html#42922" title="=&gt; ParallelMatching.this.global.gen.global.Tree">mkNil</a>, <a href="../ast/Trees.scala.html#26761" title="object ParallelMatching.this.global.EmptyTree">EmptyTree</a>)
        <span title="List[ParallelMatching.this.global.Tree]" class="keyword">case</span> <a title="ParallelMatching.this.global.ArrayValue" id="547596">av</a> @ ArrayValue(_,<a title="List[ParallelMatching.this.global.Tree]" id="547599">xs</a>) <span class="keyword">if</span> ( <a href="#79585" title="(t: ParallelMatching.this.global.Tree)Boolean">isRightIgnoring</a><span title="(x$1: Boolean)Boolean">(</span><a href="#547596" title="ParallelMatching.this.global.ArrayValue">av</a>) &amp;&amp; <a href="#547599" title="List[ParallelMatching.this.global.Tree]">xs</a>.<span title="(x$1: Int)Int">length</span><span title="(x$1: Int)Boolean">-</span><span title="Int(1)" class="int">1</span> == <a href="#547545" title="Int">minlen</a>) =&gt;  // Seq(p1,...,pN,_*)
          <a href="#542554" title="(xs: List[ParallelMatching.this.global.Tree])List[ParallelMatching.this.global.Tree]">removeStar</a>(<a href="#547599" title="List[ParallelMatching.this.global.Tree]">xs</a>) <a href="#547619" title="List[ParallelMatching.this.global.Tree]">:::</a> <span title="(xs: object ParallelMatching.this.global.EmptyTree*)List[object ParallelMatching.this.global.EmptyTree]">List</span><span title="(prefix: List[ParallelMatching.this.global.Tree])List[ParallelMatching.this.global.Tree]">(</span><a href="../ast/Trees.scala.html#26761" title="object ParallelMatching.this.global.EmptyTree">EmptyTree</a>)
        <span title="List[ParallelMatching.this.global.Tree]" class="keyword">case</span> <a title="ParallelMatching.this.global.ArrayValue" id="547638">av</a> @ ArrayValue(_,<a title="List[ParallelMatching.this.global.Tree]" id="547641">xs</a>) <span class="keyword">if</span> ( <a href="#79585" title="(t: ParallelMatching.this.global.Tree)Boolean">isRightIgnoring</a><span title="(x$1: Boolean)Boolean">(</span><a href="#547638" title="ParallelMatching.this.global.ArrayValue">av</a>) &amp;&amp; <a href="#547641" title="List[ParallelMatching.this.global.Tree]">xs</a>.<span title="(x$1: Int)Int">length</span><span title="(x$1: Int)Boolean">-</span><span title="Int(1)" class="int">1</span>  &lt; <a href="#547545" title="Int">minlen</a>) =&gt;  // Seq(p1..,pJ,_*)   J &lt; N
          <a href="PatternNodes.scala.html#79516" title="(i: Int)List[ParallelMatching.this.global.Tree]">getDummies</a>(<a href="#547545" title="(x$1: Int)Int">minlen</a> + <span title="Int(1)" class="int">1</span>) <a href="#547660" title="List[ParallelMatching.this.global.Tree]">:::</a> <span title="(xs: ParallelMatching.this.global.Tree*)List[ParallelMatching.this.global.Tree]">List</span><span title="(prefix: List[ParallelMatching.this.global.Tree])List[ParallelMatching.this.global.Tree]">(</span><a href="#547546" title="ParallelMatching.this.global.Tree">x</a>)
        <span title="List[ParallelMatching.this.global.Tree]" class="keyword">case</span> <a href="../ast/Trees.scala.html#26761" title="object ParallelMatching.this.global.EmptyTree">EmptyTree</a> | <a href="../ast/TreeDSL.scala.html#537140" title="(other: Any)Boolean">WILD</a>()                   =&gt; 
          <a href="PatternNodes.scala.html#79516" title="(i: Int)List[ParallelMatching.this.global.Tree]">getDummies</a>(<a href="#547545" title="(x$1: Int)Int">minlen</a> <span title="(x$1: Int)Int">+</span> <span title="Int(1)" class="int">1</span>          + <span title="Int(1)" class="int">1</span>)
      }

      <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(vs: List[ParallelMatching.this.global.Symbol],tail: ParallelMatching.this.global.Symbol,nrows: List[MatchMatrix.this.Row])MatchMatrix.this.Rep" id="542571">makeSuccRep</a>(<a title="List[ParallelMatching.this.global.Symbol]" id="547739">vs</a>: <span title="List[ParallelMatching.this.global.Symbol]">List</span>[Symbol], <a title="ParallelMatching.this.global.Symbol" id="547740">tail</a>: <a href="../symtab/Symbols.scala.html#26286" title="ParallelMatching.this.global.Symbol">Symbol</a>, <a title="List[MatchMatrix.this.Row]" id="547741">nrows</a>: <span title="List[MatchMatrix.this.Row]">List</span>[Row]) =
        <a href="#542498" title="(pre: List[ParallelMatching.this.global.Symbol],post: List[ParallelMatching.this.global.Symbol],rows: List[MatchMatrix.this.Row])MatchMatrix.this.Rep">mkNewRep</a>(<a href="#547739" title="List[ParallelMatching.this.global.Symbol]">vs</a> <a href="#547744" title="List[ParallelMatching.this.global.Symbol]">:::</a> <span title="(xs: ParallelMatching.this.global.Symbol*)List[ParallelMatching.this.global.Symbol]">List</span><span title="(prefix: List[ParallelMatching.this.global.Symbol])List[ParallelMatching.this.global.Symbol]">(</span><a href="#547740" title="ParallelMatching.this.global.Symbol">tail</a>), <a href="#542579" title="=&gt; MatchMatrix.this.Rep">rest</a>.<a href="#541302" title="=&gt; List[ParallelMatching.this.global.Symbol]">tvars</a>, <a href="#547741" title="List[MatchMatrix.this.Row]">nrows</a>)

      // precondition for matching
      <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(tree: ParallelMatching.this.global.Tree,lengthArg: Int)ParallelMatching.this.global.analyzer.global.Tree" id="542572">getPrecondition</a>(<a title="ParallelMatching.this.global.Tree" id="547763">tree</a>: <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a>, <a title="Int" id="547764">lengthArg</a>: <span title="Int">Int</span>) =
        <a href="#542562" title="(tree: ParallelMatching.this.global.Tree,len: Int,op: (ParallelMatching.this.global.Tree, ParallelMatching.this.global.Tree) =&gt; ParallelMatching.this.global.Tree)ParallelMatching.this.global.analyzer.global.Tree">lengthCheck</a>(<a href="#547763" title="ParallelMatching.this.global.Tree">tree</a>, <a href="#547764" title="Int">lengthArg</a>, <a href="../ast/TreeDSL.scala.html#45304" title="(other: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Apply">_</a> ANY_&gt;= <a href="#547769" title="ParallelMatching.this.global.Tree">_</a>)
    }

    // @todo: equals test for same constant
    <span class="keyword">class</span> <a title="class MixEquals extends MatchMatrix.this.RuleApplication with ScalaObject" id="81374">MixEquals</a><span title="ScalaObject">(</span><span class="keyword">val</span> <a title="MatchMatrix.this.Patterns" id="542537">pats</a>: <a href="#542117" title="MatchMatrix.this.Patterns">Patterns</a>, <span class="keyword">val</span> <a title="MatchMatrix.this.Rep" id="542538">rest</a>: <a href="#541300" title="MatchMatrix.this.Rep">Rep</a>) <span class="keyword">extends</span> <a href="#81363" title="MatchMatrix.this.RuleApplication">RuleApplication</a> {    
      /** condition (to be used in IF), success and failure Rep */
      <span class="keyword">final</span> <span class="keyword">def</span> <a title="()(MatchMatrix.this.Branch[ParallelMatching.this.global.Tree], ParallelMatching.this.global.Symbol)" id="542535">getTransition</a>(): <span title="(MatchMatrix.this.Branch[ParallelMatching.this.global.Tree], ParallelMatching.this.global.Symbol)">(</span>Branch[Tree], Symbol) = {
        <span class="keyword">val</span> <a title="ParallelMatching.this.global.gen.global.Tree" id="547806">value</a> = {
          // how is it known these are the only possible typerefs here?
          <span class="keyword">val</span> TypeRef<a href="#547827" title="ParallelMatching.this.global.Type" id="547811">(</a>_,_,<a href="#547818" title="(x: List[ParallelMatching.this.global.Type])Some[List[ParallelMatching.this.global.Type]]">List</a>(<a title="ParallelMatching.this.global.Type" id="547827">arg</a>)) = <a href="#542492" title="=&gt; ParallelMatching.this.Pattern">head</a>.<a href="#536952" title="=&gt; ParallelMatching.this.global.Type">tpe</a>
          <a href="#547811" title="ParallelMatching.this.global.Type">arg</a> <span title="ParallelMatching.this.global.gen.global.Tree" class="keyword">match</span> {
            <span title="ParallelMatching.this.global.gen.global.Tree" class="keyword">case</span> SingleType(<a title="ParallelMatching.this.global.Type" id="547833">pre</a>, <a title="ParallelMatching.this.global.Symbol" id="547834">sym</a>) =&gt; <a href="../ast/TreeDSL.scala.html#42766" title="(pre: ParallelMatching.this.global.Type,sym: ParallelMatching.this.global.Symbol)ParallelMatching.this.global.gen.global.Tree">REF</a>(<a href="#547833" title="ParallelMatching.this.global.Type">pre</a>, <a href="#547834" title="ParallelMatching.this.global.Symbol">sym</a>)
            <span title="o.type" class="keyword">case</span> PseudoType(<a title="ParallelMatching.this.global.Tree" id="547864">o</a>)        =&gt; <a href="#547864" title="ParallelMatching.this.global.Tree">o</a>.<a href="../ast/Trees.scala.html#29573" title="=&gt; o.type">duplicate</a>
          }
        }

        <span class="keyword">val</span> <a title="ParallelMatching.this.global.TermSymbol" id="547807">label</a>       = <a href="TransMatcher.scala.html#79670" title="=&gt; ParallelMatching.this.global.Symbol">owner</a>.<a href="../symtab/Symbols.scala.html#27027" title="(pos: scala.tools.nsc.util.Position,name: ParallelMatching.this.global.Name)ParallelMatching.this.global.TermSymbol">newLabel</a>(<a href="#542488" title="=&gt; MatchMatrix.this.Scrutinee">scrut</a>.<a href="#541756" title="=&gt; scala.tools.nsc.util.Position">pos</a>, <a href="TransMatcher.scala.html#79459" title="(pos: scala.tools.nsc.util.Position,s: String)String">newName</a><a href="../symtab/Names.scala.html#26213" title="implicit scala.tools.nsc.symtab.Names.view : (s: String)ParallelMatching.this.global.Name">(</a><a href="#542488" title="=&gt; MatchMatrix.this.Scrutinee">scrut</a>.<a href="#541756" title="=&gt; scala.tools.nsc.util.Position">pos</a>, <span title="java.lang.String(&quot;failCont%&quot;)" class="string">&quot;failCont%&quot;</span>)) // warning, untyped
        <span class="keyword">val</span> <a title="List[MatchMatrix.this.Row]" id="547808">succ</a>        = <span title="(xs: MatchMatrix.this.Row*)List[MatchMatrix.this.Row]">List</span>(
          <a href="#542538" title="=&gt; MatchMatrix.this.Rep">rest</a>.<a href="#541303" title="=&gt; List[MatchMatrix.this.Row]">rows</a>.<span title="=&gt; MatchMatrix.this.Row">head</span>.<a href="#541178" title="(hs: List[ParallelMatching.this.global.Tree],vs: Iterable[ParallelMatching.this.global.Symbol],tvars: ParallelMatching.this.global.Symbol)MatchMatrix.this.Row">insert2</a>(<span title="(xs: object ParallelMatching.this.global.EmptyTree*)List[object ParallelMatching.this.global.EmptyTree]">List</span>(<a href="../ast/Trees.scala.html#26761" title="object ParallelMatching.this.global.EmptyTree">EmptyTree</a>), <a href="#542492" title="=&gt; ParallelMatching.this.Pattern">head</a>.<a href="#536961" title="=&gt; List[ParallelMatching.this.global.Symbol]">boundVariables</a>, <a href="#542488" title="=&gt; MatchMatrix.this.Scrutinee">scrut</a>.<a href="#541917" title="=&gt; ParallelMatching.this.global.Symbol">sym</a>),
          <a href="#541200" title="(pat: List[ParallelMatching.this.global.Tree],subst: ParallelMatching.this.Bindings,guard: MatchMatrix.this.Guard,bx: Int)MatchMatrix.this.Row">Row</a>(<a href="PatternNodes.scala.html#79516" title="(i: Int)List[ParallelMatching.this.global.Tree]">getDummies</a>(<span title="(x$1: Int)Int" class="int">1</span> + <a href="#542538" title="=&gt; MatchMatrix.this.Rep">rest</a>.<a href="#541302" title="=&gt; List[ParallelMatching.this.global.Symbol]">tvars</a>.<span title="=&gt; Int">length</span>), <a href="PatternNodes.scala.html#79545" title="=&gt; ParallelMatching.this.Bindings">NoBinding</a>, <a href="#81360" title="=&gt; MatchMatrix.this.Guard">NoGuard</a>, <a href="#81342" title="(theLabel: ParallelMatching.this.global.Symbol)Int">shortCut</a>(<a href="#547807" title="ParallelMatching.this.global.TermSymbol">label</a>))
        )

        // todo: optimize if no guard, and no further tests
        <span class="keyword">val</span> <a title="Option[MatchMatrix.this.Rep]" id="547809">fail</a>    = <a href="#542496" title="(xs: List[MatchMatrix.this.Row])Option[MatchMatrix.this.Rep]">mkFail</a>(<span title="object List">List</span>.<span title="(xs: List[MatchMatrix.this.Row],ys: List[ParallelMatching.this.Pattern])(f: (MatchMatrix.this.Row, ParallelMatching.this.Pattern) =&gt; MatchMatrix.this.Row)List[MatchMatrix.this.Row]">map2</span>(<a href="#542538" title="=&gt; MatchMatrix.this.Rep">rest</a>.<a href="#541303" title="=&gt; List[MatchMatrix.this.Row]">rows</a>.<span title="=&gt; List[MatchMatrix.this.Row]">tail</span>, <a href="#542537" title="=&gt; MatchMatrix.this.Patterns">pats</a>.<a href="#541996" title="=&gt; MatchMatrix.this.Patterns">tail</a>.<a href="#542120" title="=&gt; List[ParallelMatching.this.Pattern]">ps</a>)(<a href="#541179" title="(p: ParallelMatching.this.Pattern)MatchMatrix.this.Row">_</a> insert <a href="#547958" title="ParallelMatching.this.Pattern">_</a>))
        <span class="keyword">val</span> <a title="ParallelMatching.this.global.analyzer.global.Tree" id="547810">action</a>  = <a href="../typechecker/Typers.scala.html#42872" title="(tree: ParallelMatching.this.global.analyzer.global.Tree)ParallelMatching.this.global.analyzer.global.Tree">typer</a> typed (<a href="#542488" title="=&gt; MatchMatrix.this.Scrutinee">scrut</a>.<a href="../ast/TreeDSL.scala.html#45303" title="(other: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Apply">id</a> ANY_== <a href="#547806" title="ParallelMatching.this.global.gen.global.Tree">value</a>)

        <span title="(_1: MatchMatrix.this.Branch[ParallelMatching.this.global.analyzer.global.Tree],_2: ParallelMatching.this.global.TermSymbol)(MatchMatrix.this.Branch[ParallelMatching.this.global.analyzer.global.Tree], ParallelMatching.this.global.TermSymbol)">(</span><a href="#545016" title="(action: ParallelMatching.this.global.analyzer.global.Tree,succ: MatchMatrix.this.Rep,fail: Option[MatchMatrix.this.Rep])MatchMatrix.this.Branch[ParallelMatching.this.global.analyzer.global.Tree]">Branch</a>(<a href="#547810" title="ParallelMatching.this.global.analyzer.global.Tree">action</a>, <a href="#542498" title="(pre: List[ParallelMatching.this.global.Symbol],post: List[ParallelMatching.this.global.Symbol],rows: List[MatchMatrix.this.Row])MatchMatrix.this.Rep">mkNewRep</a>(<span title="object Nil">Nil</span>, <a href="#542538" title="=&gt; MatchMatrix.this.Rep">rest</a>.<a href="#541302" title="=&gt; List[ParallelMatching.this.global.Symbol]">tvars</a>, <a href="#547808" title="List[MatchMatrix.this.Row]">succ</a>), <a href="#547809" title="Option[MatchMatrix.this.Rep]">fail</a>), <a href="#547807" title="ParallelMatching.this.global.TermSymbol">label</a>)
      }

      <span class="keyword">final</span> <span class="keyword">def</span> <a title="()ParallelMatching.this.global.analyzer.global.Tree" id="542536">tree</a>() = {
        <span class="keyword">val</span> <a href="#548022" title="(ParallelMatching.this.global.Tree, MatchMatrix.this.Rep, MatchMatrix.this.Rep, ParallelMatching.this.global.Symbol)">(</a>Branch(<a href="#548021" title="ParallelMatching.this.global.Tree" id="548022">cond</a>, <a href="#548021" title="MatchMatrix.this.Rep" id="548023">srep</a>, Some(<a href="#548021" title="MatchMatrix.this.Rep" id="548024">frep</a>)), <a href="#548021" title="ParallelMatching.this.global.Symbol" id="548025">failLabel</a>) = <a href="#81374" title="MixEquals.this.type" class="keyword">this</a>.<a href="#542535" title="()(MatchMatrix.this.Branch[ParallelMatching.this.global.Tree], ParallelMatching.this.global.Symbol)">getTransition</a>
        <span class="keyword">val</span> <a title="ParallelMatching.this.global.analyzer.global.Tree" id="548026">fail</a>  = <a href="../typechecker/Typers.scala.html#42872" title="(tree: ParallelMatching.this.global.analyzer.global.Tree)ParallelMatching.this.global.analyzer.global.Tree">typer</a> typed <a href="#548024" title="MatchMatrix.this.Rep">frep</a>.<a href="#81420" title="()ParallelMatching.this.global.Tree">toTree</a>
        <a href="../symtab/Symbols.scala.html#27164" title="(info: ParallelMatching.this.global.Type)failLabel.type">failLabel</a> setInfo <a href="../symtab/Types.scala.html#44127" title="(params: List[ParallelMatching.this.global.Symbol],resultType: ParallelMatching.this.global.Type)ParallelMatching.this.global.MethodType">MethodType</a>(<span title="object Nil">Nil</span>, <a href="#548026" title="ParallelMatching.this.global.analyzer.global.Tree">fail</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; ParallelMatching.this.global.analyzer.global.Type">tpe</a>)

        <a href="../typechecker/Typers.scala.html#42872" title="(tree: ParallelMatching.this.global.analyzer.global.Tree)ParallelMatching.this.global.analyzer.global.Tree">typer</a> typed(
          <a href="../ast/TreeDSL.scala.html#42756" title="(tree: ParallelMatching.this.global.Tree)ParallelMatching.this.CODE.IfStart">IF</a> <a href="../ast/TreeDSL.scala.html#50041" title="(x: ParallelMatching.this.global.Tree)ParallelMatching.this.CODE.IfStart">(</a><a href="TransMatcher.scala.html#79666" title="(v1: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">handleOuter</a>(<a href="#548022" title="ParallelMatching.this.global.Tree">cond</a>)) <a href="../ast/TreeDSL.scala.html#50042" title="(elsep: ParallelMatching.this.global.Tree)ParallelMatching.this.global.If">THEN</a> <a href="#548023" title="MatchMatrix.this.Rep">srep</a>.<a href="#81420" title="()ParallelMatching.this.global.Tree">toTree</a> ELSE <a href="../ast/Trees.scala.html#26801" title="(sym: ParallelMatching.this.global.Symbol,params: List[ParallelMatching.this.global.Symbol],rhs: ParallelMatching.this.global.Tree)ParallelMatching.this.global.LabelDef">LabelDef</a>(<a href="#548025" title="ParallelMatching.this.global.Symbol">failLabel</a>, <span title="object Nil">Nil</span>, <a href="#548026" title="ParallelMatching.this.global.analyzer.global.Tree">fail</a>)
        )
      }
    }
    
    case <span class="keyword">class</span> <a title="class PatPair extends java.lang.Object with ScalaObject with Product" id="548207">PatPair</a><span title="ScalaObject">(</span><a title="ParallelMatching.this.global.Tree" id="554487">moreSpecific</a>: <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a>, <a title="ParallelMatching.this.global.Tree" id="554488">moreGeneral</a>: <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a>, <a title="Int" id="554489">index</a>: <span title="Int">Int</span>)

    /** mixture rule for type tests
    **/
    <span class="keyword">class</span> <a title="class MixTypes extends MatchMatrix.this.RuleApplication with ScalaObject" id="81378">MixTypes</a><span title="ScalaObject">(</span><span class="keyword">val</span> <a title="MatchMatrix.this.Patterns" id="542676">pats</a>: <a href="#542117" title="MatchMatrix.this.Patterns">Patterns</a>, <span class="keyword">val</span> <a title="MatchMatrix.this.Rep" id="542677">rest</a>: <a href="#541300" title="MatchMatrix.this.Rep">Rep</a>) <span class="keyword">extends</span> <a href="#81363" title="MatchMatrix.this.RuleApplication">RuleApplication</a> {  
      <span class="keyword">private</span> <span class="keyword">def</span> <a title="(p: ParallelMatching.this.global.Tree)List[ParallelMatching.this.global.Tree]" id="542661">subpatterns</a>(<a title="ParallelMatching.this.global.Tree" id="548384">p</a>: <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a>): <span title="List[ParallelMatching.this.global.Tree]">List</span>[Tree] = <a href="#548384" title="ParallelMatching.this.global.Tree">p</a> <span title="List[ParallelMatching.this.global.Tree]" class="keyword">match</span> {
        <span title="List[ParallelMatching.this.global.Tree]" class="keyword">case</span> Bind(_, <a title="ParallelMatching.this.global.Tree" id="549077">p</a>)                                                 =&gt; <a href="#542661" title="(p: ParallelMatching.this.global.Tree)List[ParallelMatching.this.global.Tree]">subpatterns</a>(<a href="#549077" title="ParallelMatching.this.global.Tree">p</a>)
        <span title="List[ParallelMatching.this.global.Tree]" class="keyword">case</span> <a title="ParallelMatching.this.global.Apply" id="549082">app</a> @ Apply(<a title="ParallelMatching.this.global.Tree" id="549085">fn</a>, <a title="List[ParallelMatching.this.global.Tree]" id="549086">ps</a>) <span class="keyword">if</span> <a href="PatternNodes.scala.html#79507" title="(t: ParallelMatching.this.global.Type)Boolean">isCaseClass</a><span title="(x$1: Boolean)Boolean">(</span><a href="#549082" title="ParallelMatching.this.global.Apply">app</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; ParallelMatching.this.global.Type">tpe</a>) &amp;&amp; <a href="#549085" title="ParallelMatching.this.global.Tree">fn</a>.<a href="../ast/Trees.scala.html#29559" title="=&gt; Boolean">isType</a>   =&gt; <span title="List[ParallelMatching.this.global.Tree]" class="keyword">if</span> (<a href="#542676" title="=&gt; MatchMatrix.this.Patterns">pats</a>.<a href="#542002" title="=&gt; Boolean">isCaseHead</a>) <a href="#549086" title="List[ParallelMatching.this.global.Tree]">ps</a> <span class="keyword">else</span> <a href="#542676" title="=&gt; MatchMatrix.this.Patterns">pats</a>.<a href="#542004" title="=&gt; List[ParallelMatching.this.global.Tree]">dummies</a>
        <span title="Nothing" class="keyword">case</span> Apply(<a title="ParallelMatching.this.global.Tree" id="549096">fn</a>, <a title="List[ParallelMatching.this.global.Tree]" id="549097">xs</a>) <span class="keyword">if</span> <span title="(x$1: Boolean)Boolean">!</span><a href="#549097" title="List[ParallelMatching.this.global.Tree]">xs</a>.<span title="=&gt; Boolean">isEmpty</span> || <a href="#549096" title="ParallelMatching.this.global.Tree">fn</a>.<a href="../ast/Trees.scala.html#29559" title="=&gt; Boolean">isType</a>                  =&gt; <a href="../Global.scala.html#39309" title="(msg: String)Nothing">abort</a>(<span title="java.lang.String(&quot;strange Apply&quot;)" class="string">&quot;strange Apply&quot;</span>)
        <span title="List[ParallelMatching.this.global.Tree]" class="keyword">case</span> _                                                          =&gt; <a href="#542676" title="=&gt; MatchMatrix.this.Patterns">pats</a>.<a href="#542004" title="=&gt; List[ParallelMatching.this.global.Tree]">dummies</a>
      }

      // moreSpecific: more specific patterns
      //     subsumed: more general patterns (subsuming current), rows index and subpatterns
      //    remaining: remaining, rows index and pattern
      <span class="keyword">def</span> <a title="[T](xs: List[Option[T]])List[T]" id="542662">join</a>[<a title="&gt;: Nothing &lt;: Any" id="542664">T</a>](<a title="List[Option[T]]" id="549027">xs</a>: <span title="List[Option[T]]">List</span>[Option[T]]): <span title="List[T]">List</span>[T] = <a href="#549027" title="List[Option[T]]">xs</a>.<span title="(f: (Option[T]) =&gt; Traversable[T])(implicit bf: scala.collection.generic.BuilderFactory[T,List[T],List[Option[T]]])List[T]">flatMap</span><span title="scala.collection.generic.BuilderFactory[T,List[T],List#Coll]">(</span><a title="Option[T]" id="549112">x</a> =&gt; <a href="#549112" title="(xo: Option[T])Iterable[T]">x</a>)
      <span class="keyword">val</span> <a href="#542666" title="(List[ParallelMatching.this.global.Tree], List[(Int, List[ParallelMatching.this.global.Tree])], List[(Int, ParallelMatching.this.global.Tree)])">(</a><a href="#542665" title="List[ParallelMatching.this.global.Tree]" id="542666">moreSpecific</a>, <a href="#542665" title="List[(Int, List[ParallelMatching.this.global.Tree])]" id="542668">subsumed</a>, <a href="#542665" title="List[(Int, ParallelMatching.this.global.Tree)]" id="542670">remaining</a>) : <span title="(List[ParallelMatching.this.global.Tree], List[(Int, List[ParallelMatching.this.global.Tree])], List[(Int, ParallelMatching.this.global.Tree)])">(</span>List[Tree], List[(Int, List[Tree])], List[(Int, Tree)]) = <a href="MatchUtil.scala.html#79551" title="(xs: List[(Option[ParallelMatching.this.global.Tree], Option[(Int, List[ParallelMatching.this.global.Tree])], Option[(Int, ParallelMatching.this.global.Tree)])])(List[Option[ParallelMatching.this.global.Tree]], List[Option[(Int, List[ParallelMatching.this.global.Tree])]], List[Option[(Int, ParallelMatching.this.global.Tree)]])">unzip3</a>(
        <span class="keyword">for</span> ((<a title="ParallelMatching.this.global.Tree" id="548320">pat</a> @ <a href="PatternNodes.scala.html#540742" title="(x: ParallelMatching.this.global.Tree)Option[ParallelMatching.this.global.Tree]">Stripped</a>(<a title="ParallelMatching.this.global.Tree" id="548326">spat</a>), <a title="Int" id="548328">j</a>) &lt;- <a href="#542676" title="=&gt; MatchMatrix.this.Patterns">pats</a>.<a href="#542009" title="(f: ((ParallelMatching.this.global.Tree, Int)) =&gt; (Option[ParallelMatching.this.global.Tree], Option[(Int, List[ParallelMatching.this.global.Tree])], Option[(Int, ParallelMatching.this.global.Tree)]))(implicit bf: scala.collection.generic.BuilderFactory[(Option[ParallelMatching.this.global.Tree], Option[(Int, List[ParallelMatching.this.global.Tree])], Option[(Int, ParallelMatching.this.global.Tree)]),List[(Option[ParallelMatching.this.global.Tree], Option[(Int, List[ParallelMatching.this.global.Tree])], Option[(Int, ParallelMatching.this.global.Tree)])],List[(ParallelMatching.this.global.Tree, Int)]])List[(Option[ParallelMatching.this.global.Tree], Option[(Int, List[ParallelMatching.this.global.Tree])], Option[(Int, ParallelMatching.this.global.Tree)])]">zip</a>) <span class="keyword">yield</span> {
          <span class="keyword">def</span> <a title="(tpe: ParallelMatching.this.global.Type)Boolean" id="548331">eqHead</a>(<a title="ParallelMatching.this.global.Type" id="548354">tpe</a>: <a href="../symtab/Types.scala.html#26364" title="ParallelMatching.this.global.Type">Type</a>)         = <a href="#542676" title="=&gt; MatchMatrix.this.Patterns">pats</a>.<a href="../symtab/Types.scala.html#30422" title="(that: ParallelMatching.this.global.Type)Boolean">headType</a> =:= <a href="#548354" title="ParallelMatching.this.global.Type">tpe</a>
          <span class="keyword">def</span> <a title="(yes: ParallelMatching.this.global.Tree,no: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree" id="548332">alts</a>(<a title="ParallelMatching.this.global.Tree" id="548358">yes</a>: <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a>, <a title="ParallelMatching.this.global.Tree" id="548359">no</a>: <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a>) = <span title="ParallelMatching.this.global.Tree" class="keyword">if</span> (<a href="#548331" title="(tpe: ParallelMatching.this.global.Type)Boolean">eqHead</a>(<a href="#548320" title="ParallelMatching.this.global.Tree">pat</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; ParallelMatching.this.global.Type">tpe</a>)) <a href="#548358" title="ParallelMatching.this.global.Tree">yes</a> <span class="keyword">else</span> <a href="#548359" title="ParallelMatching.this.global.Tree">no</a>

          <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Boolean" id="548334">isDef</a>                = <a href="#79586" title="(t: ParallelMatching.this.global.Tree)Boolean">isDefaultPattern</a>(<a href="#548320" title="ParallelMatching.this.global.Tree">pat</a>)
          <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="(Int, List[ParallelMatching.this.global.Tree])" id="548336">dummy</a>                = <span title="(_1: Int,_2: List[ParallelMatching.this.global.Tree])(Int, List[ParallelMatching.this.global.Tree])">(</span><a href="#548328" title="Int">j</a>, <a href="#542676" title="=&gt; MatchMatrix.this.Patterns">pats</a>.<a href="#542004" title="=&gt; List[ParallelMatching.this.global.Tree]">dummies</a>)
          <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="(Int, ParallelMatching.this.global.Tree)" id="548338">pass</a>                 = <span title="(_1: Int,_2: ParallelMatching.this.global.Tree)(Int, ParallelMatching.this.global.Tree)">(</span><a href="#548328" title="Int">j</a>, <a href="#548320" title="ParallelMatching.this.global.Tree">pat</a>)
          <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="(Int, List[ParallelMatching.this.global.Tree])" id="548340">subs</a>                 = <span title="(_1: Int,_2: List[ParallelMatching.this.global.Tree])(Int, List[ParallelMatching.this.global.Tree])">(</span><a href="#548328" title="Int">j</a>, <a href="#542661" title="(p: ParallelMatching.this.global.Tree)List[ParallelMatching.this.global.Tree]">subpatterns</a>(<a href="#548320" title="ParallelMatching.this.global.Tree">pat</a>))

          <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="ParallelMatching.this.TypeComp" id="548342">cmpOld</a>: <a href="PatternNodes.scala.html#79511" title="ParallelMatching.this.TypeComp">TypeComp</a>  = <a href="#548326" title="ParallelMatching.this.global.Tree">spat</a>.<a href="PatternNodes.scala.html#538369" title="(other: ParallelMatching.this.global.Type)ParallelMatching.this.TypeComp">tpe</a> cmp <a href="#542676" title="=&gt; MatchMatrix.this.Patterns">pats</a>.<a href="#542000" title="=&gt; ParallelMatching.this.global.Type">headType</a>  // contains type info about pattern's type vs. head pattern
          <span class="keyword">import</span> cmpOld.{ erased }
          
          <span class="keyword">def</span> <a title="=&gt; Boolean" id="548344">erased_xIsaY</a> = <a href="PatternNodes.scala.html#548403" title="object cmpOld.erased">erased</a>.<a href="PatternNodes.scala.html#548432" title="=&gt; Boolean">xIsaY</a>
          <span class="keyword">def</span> <a title="=&gt; Boolean" id="548345">erased_yIsaX</a> = <a href="PatternNodes.scala.html#548403" title="object cmpOld.erased">erased</a>.<a href="PatternNodes.scala.html#548433" title="=&gt; Boolean">yIsaX</a>
          
          // scrutinee, pattern
          <span class="keyword">val</span> <a href="#548347" title="(ParallelMatching.this.global.Type, ParallelMatching.this.global.Type)">(</a><a href="#548346" title="ParallelMatching.this.global.Type" id="548347">s</a>, <a href="#548346" title="ParallelMatching.this.global.Type" id="548348">p</a>)  = <span title="(_1: ParallelMatching.this.global.Type,_2: ParallelMatching.this.global.Type)(ParallelMatching.this.global.Type, ParallelMatching.this.global.Type)">(</span><a href="PatternNodes.scala.html#79508" title="(tpe: ParallelMatching.this.global.Type)ParallelMatching.this.global.Type">decodedEqualsType</a>(<a href="#548326" title="ParallelMatching.this.global.Tree">spat</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; ParallelMatching.this.global.Type">tpe</a>), <a href="PatternNodes.scala.html#79508" title="(tpe: ParallelMatching.this.global.Type)ParallelMatching.this.global.Type">decodedEqualsType</a>(<a href="#542676" title="=&gt; MatchMatrix.this.Patterns">pats</a>.<a href="#542000" title="=&gt; ParallelMatching.this.global.Type">headType</a>))
          <span class="keyword">def</span> <a title="=&gt; Boolean" id="548349">xIsaY</a>   = <a href="../symtab/Types.scala.html#30421" title="(that: ParallelMatching.this.global.Type)Boolean">s</a> &lt;:&lt; <a href="#548348" title="ParallelMatching.this.global.Type">p</a>
          <span class="keyword">def</span> <a title="=&gt; Boolean" id="548350">yIsaX</a>   = <a href="../symtab/Types.scala.html#30421" title="(that: ParallelMatching.this.global.Type)Boolean">p</a> &lt;:&lt; <a href="#548347" title="ParallelMatching.this.global.Type">s</a>

          // XXX exploring what breaks things and what doesn't
          // def dummyIsOk = {
          //   val old = erased.yIsaX || yIsaX || isDef
          //   println(&quot;Old logic: %s || %s || %s == %s&quot;.format(erased.yIsaX, yIsaX, isDef, erased.yIsaX || yIsaX || isDef))
          //   println(&quot;isCaseClass(spat.tpe) = %s, isCaseClass(pats.headType) = %s&quot;.format(
          //     isCaseClass(spat.tpe), isCaseClass(pats.headType)))
          //   println(&quot;spat.tpe = %s, pats.head = %s, pats.headType = %s&quot;.format(
          //     spat.tpe, pats.head, pats.headType))
          //   
          //   (erased.yIsaX || yIsaX || isDef)
          //   // (!isCaseClass(spat.tpe) || !isCaseClass(pats.headType))
          // }

          // each pattern will yield a triple of options corresponding to the three lists,
          // which will be flattened down to the values
          <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[T](x: T)Option[T]" id="548351">mkOpt</a>[<a title="&gt;: Nothing &lt;: Any" id="548353">T</a>](<a title="T" id="548408">x</a>: <a href="#548353" title="T">T</a>): <span title="Option[T]">Option</span>[T] = <span title="(x: T)Some[T]">Some</span>(<a href="#548408" title="T">x</a>)    // limits noise from Some(value)
          (<a href="#548326" title="ParallelMatching.this.global.Tree">spat</a> <span title="(Option[ParallelMatching.this.global.Tree], Option[(Int, List[ParallelMatching.this.global.Tree])], Option[(Int, ParallelMatching.this.global.Tree)])" class="keyword">match</span> {
            <span title="(object None, object None, Option[(Int, ParallelMatching.this.global.Tree)])" class="keyword">case</span> <a href="../ast/TreeDSL.scala.html#49583" title="(x: Any)Option[Any]">LIT</a>(<span title="Null(null)" class="keyword">null</span>) <span class="keyword">if</span> <span title="=&gt; Boolean">!</span><a href="#548331" title="(tpe: ParallelMatching.this.global.Type)Boolean">eqHead</a>(<a href="#548326" title="ParallelMatching.this.global.Tree">spat</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; ParallelMatching.this.global.Type">tpe</a>)               =&gt; <span title="(_1: object None,_2: object None,_3: Option[(Int, ParallelMatching.this.global.Tree)])(object None, object None, Option[(Int, ParallelMatching.this.global.Tree)])">(</span><span title="object None">None</span>, <span title="object None">None</span>, <a href="#548351" title="(x: (Int, ParallelMatching.this.global.Tree))Option[(Int, ParallelMatching.this.global.Tree)]">pass</a>)           // special case for constant null
            <span title="(Option[object ParallelMatching.this.global.EmptyTree], Option[(Int, List[ParallelMatching.this.global.Tree])], object None)" class="keyword">case</span> _ <span class="keyword">if</span> <a href="#542676" title="=&gt; MatchMatrix.this.Patterns">pats</a>.<a href="#542014" title="(pat: ParallelMatching.this.global.Tree)Boolean">isObjectTest</a>(<a href="#548320" title="ParallelMatching.this.global.Tree">pat</a>)                  =&gt; <span title="(_1: Option[object ParallelMatching.this.global.EmptyTree],_2: Option[(Int, List[ParallelMatching.this.global.Tree])],_3: object None)(Option[object ParallelMatching.this.global.EmptyTree], Option[(Int, List[ParallelMatching.this.global.Tree])], object None)">(</span><a href="#548351" title="(x: object ParallelMatching.this.global.EmptyTree)Option[object ParallelMatching.this.global.EmptyTree]">EmptyTree</a>, <a href="#548351" title="(x: (Int, List[ParallelMatching.this.global.Tree]))Option[(Int, List[ParallelMatching.this.global.Tree])]">dummy</a>, <span title="object None">None</span>)     // matching an object
            <span title="(Option[ParallelMatching.this.global.Tree], Option[(Int, List[ParallelMatching.this.global.Tree])], object None)" class="keyword">case</span> Typed(<a title="ParallelMatching.this.global.Tree" id="548701">p</a> @ <a href="PatternNodes.scala.html#540742" title="(x: ParallelMatching.this.global.Tree)Option[ParallelMatching.this.global.Tree]">Stripped</a>(_: <a href="../ast/Trees.scala.html#26832" title="ParallelMatching.this.global.UnApply">UnApply</a>), _) <span class="keyword">if</span> <a href="#548349" title="=&gt; Boolean">xIsaY</a>  =&gt; <span title="(_1: Option[ParallelMatching.this.global.Tree],_2: Option[(Int, List[ParallelMatching.this.global.Tree])],_3: object None)(Option[ParallelMatching.this.global.Tree], Option[(Int, List[ParallelMatching.this.global.Tree])], object None)">(</span><a href="#548351" title="(x: ParallelMatching.this.global.Tree)Option[ParallelMatching.this.global.Tree]">p</a>, <a href="#548351" title="(x: (Int, List[ParallelMatching.this.global.Tree]))Option[(Int, List[ParallelMatching.this.global.Tree])]">dummy</a>, <span title="object None">None</span>)             // &lt;:&lt; is never &lt;equals&gt;            
            <span title="(Option[ParallelMatching.this.global.Tree], Option[(Int, List[ParallelMatching.this.global.Tree])], object None)" class="keyword">case</span> <a title="ParallelMatching.this.global.Typed" id="548741">q</a> @ Typed(<a title="ParallelMatching.this.global.Tree" id="548744">pp</a>, _) <span class="keyword">if</span> <a href="#548349" title="=&gt; Boolean">xIsaY</a>                    =&gt; <span title="(_1: Option[ParallelMatching.this.global.Tree],_2: Option[(Int, List[ParallelMatching.this.global.Tree])],_3: object None)(Option[ParallelMatching.this.global.Tree], Option[(Int, List[ParallelMatching.this.global.Tree])], object None)">(</span><a href="#548332" title="(yes: ParallelMatching.this.global.Tree,no: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">alts</a><a href="#548351" title="(x: ParallelMatching.this.global.Tree)Option[ParallelMatching.this.global.Tree]">(</a><a href="#548744" title="ParallelMatching.this.global.Tree">pp</a>, <a href="#548741" title="ParallelMatching.this.global.Typed">q</a>), <a href="#548351" title="(x: (Int, List[ParallelMatching.this.global.Tree]))Option[(Int, List[ParallelMatching.this.global.Tree])]">dummy</a>, <span title="object None">None</span>)   // never =:= for &lt;equals&gt;
            // case z: UnApply                                   =&gt; (None, None, pass)
            <span title="(Option[object ParallelMatching.this.global.EmptyTree], Option[(Int, List[ParallelMatching.this.global.Tree])], Option[(Int, ParallelMatching.this.global.Tree)])" class="keyword">case</span> <a title="ParallelMatching.this.global.UnApply" id="548780">z</a>: <a href="../ast/Trees.scala.html#26832" title="ParallelMatching.this.global.UnApply">UnApply</a>                                   =&gt; <span title="(_1: Option[object ParallelMatching.this.global.EmptyTree],_2: Option[(Int, List[ParallelMatching.this.global.Tree])],_3: Option[(Int, ParallelMatching.this.global.Tree)])(Option[object ParallelMatching.this.global.EmptyTree], Option[(Int, List[ParallelMatching.this.global.Tree])], Option[(Int, ParallelMatching.this.global.Tree)])">(</span><a href="#548351" title="(x: object ParallelMatching.this.global.EmptyTree)Option[object ParallelMatching.this.global.EmptyTree]">EmptyTree</a>, <a href="#548351" title="(x: (Int, List[ParallelMatching.this.global.Tree]))Option[(Int, List[ParallelMatching.this.global.Tree])]">dummy</a>, <a href="#548351" title="(x: (Int, ParallelMatching.this.global.Tree))Option[(Int, ParallelMatching.this.global.Tree)]">pass</a>)
            <span title="(Option[ParallelMatching.this.global.Tree], Option[(Int, List[ParallelMatching.this.global.Tree])], object None)" class="keyword">case</span> _ <span class="keyword">if</span> <a href="PatternNodes.scala.html#548403" title="object cmpOld.erased">erased</a>.<a href="PatternNodes.scala.html#548432" title="(x$1: Boolean)Boolean">xIsaY</a> || <a href="#548349" title="(x$1: Boolean)Boolean">xIsaY</a> &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#548333" title="=&gt; Boolean">isDef</a>         =&gt; <span title="(_1: Option[ParallelMatching.this.global.Tree],_2: Option[(Int, List[ParallelMatching.this.global.Tree])],_3: object None)(Option[ParallelMatching.this.global.Tree], Option[(Int, List[ParallelMatching.this.global.Tree])], object None)">(</span><a href="#548332" title="(yes: ParallelMatching.this.global.Tree,no: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">alts</a><a href="#548351" title="(x: ParallelMatching.this.global.Tree)Option[ParallelMatching.this.global.Tree]">(</a><a href="../ast/Trees.scala.html#26761" title="object ParallelMatching.this.global.EmptyTree">EmptyTree</a>, <a href="#548320" title="ParallelMatching.this.global.Tree">pat</a>), <a href="#548351" title="(x: (Int, List[ParallelMatching.this.global.Tree]))Option[(Int, List[ParallelMatching.this.global.Tree])]">subs</a>, <span title="object None">None</span>) // never =:= for &lt;e
            <span title="(Option[object ParallelMatching.this.global.EmptyTree], Option[(Int, List[ParallelMatching.this.global.Tree])], Option[(Int, ParallelMatching.this.global.Tree)])" class="keyword">case</span> _ <span class="keyword">if</span> <a href="PatternNodes.scala.html#548403" title="object cmpOld.erased">erased</a>.<a href="PatternNodes.scala.html#548433" title="(x$1: Boolean)Boolean">yIsaX</a> <span title="(x$1: Boolean)Boolean">||</span> <a href="#548350" title="=&gt; Boolean">yIsaX</a> || <a href="#548333" title="=&gt; Boolean">isDef</a>          =&gt; <span title="(_1: Option[object ParallelMatching.this.global.EmptyTree],_2: Option[(Int, List[ParallelMatching.this.global.Tree])],_3: Option[(Int, ParallelMatching.this.global.Tree)])(Option[object ParallelMatching.this.global.EmptyTree], Option[(Int, List[ParallelMatching.this.global.Tree])], Option[(Int, ParallelMatching.this.global.Tree)])">(</span><a href="#548351" title="(x: object ParallelMatching.this.global.EmptyTree)Option[object ParallelMatching.this.global.EmptyTree]">EmptyTree</a>, <a href="#548351" title="(x: (Int, List[ParallelMatching.this.global.Tree]))Option[(Int, List[ParallelMatching.this.global.Tree])]">dummy</a>, <a href="#548351" title="(x: (Int, ParallelMatching.this.global.Tree))Option[(Int, ParallelMatching.this.global.Tree)]">pass</a>)     // subsuming (matched *an
            <span title="(object None, object None, Option[(Int, ParallelMatching.this.global.Tree)])" class="keyword">case</span> _                                            =&gt; <span title="(_1: object None,_2: object None,_3: Option[(Int, ParallelMatching.this.global.Tree)])(object None, object None, Option[(Int, ParallelMatching.this.global.Tree)])">(</span><span title="object None">None</span>, <span title="object None">None</span>, <a href="#548351" title="(x: (Int, ParallelMatching.this.global.Tree))Option[(Int, ParallelMatching.this.global.Tree)]">pass</a>)            
            // The below fixes bugs 425 and 816 with only the small downside
            // of causing 60 other tests to fail.
            // case _ =&gt;
            //   if (erased_xIsaY || xIsaY &amp;&amp; !isDef)  (alts(EmptyTree, pat), subs, None) // never =:= for &lt;equals&gt;
            //   else if (isDef)                       (EmptyTree,           dummy, pass)
            //   else                                  (None,                 None, pass)
              
          }) : <span title="(Option[ParallelMatching.this.global.Tree], Option[(Int, List[ParallelMatching.this.global.Tree])], Option[(Int, ParallelMatching.this.global.Tree)])">(</span>Option[Tree], Option[(Int, List[Tree])], Option[(Int, Tree)])
        }
      ) <span title="(List[ParallelMatching.this.global.Tree], List[(Int, List[ParallelMatching.this.global.Tree])], List[(Int, ParallelMatching.this.global.Tree)])" class="keyword">match</span> { <span title="(List[ParallelMatching.this.global.Tree], List[(Int, List[ParallelMatching.this.global.Tree])], List[(Int, ParallelMatching.this.global.Tree)])" class="keyword">case</span> (<a title="List[Option[ParallelMatching.this.global.Tree]]" id="549016">x</a>,<a title="List[Option[(Int, List[ParallelMatching.this.global.Tree])]]" id="549017">y</a>,<a title="List[Option[(Int, ParallelMatching.this.global.Tree)]]" id="549018">z</a>) =&gt; <span title="(_1: List[ParallelMatching.this.global.Tree],_2: List[(Int, List[ParallelMatching.this.global.Tree])],_3: List[(Int, ParallelMatching.this.global.Tree)])(List[ParallelMatching.this.global.Tree], List[(Int, List[ParallelMatching.this.global.Tree])], List[(Int, ParallelMatching.this.global.Tree)])">(</span><a href="#542662" title="(xs: List[Option[ParallelMatching.this.global.Tree]])List[ParallelMatching.this.global.Tree]">join</a>(<a href="#549016" title="List[Option[ParallelMatching.this.global.Tree]]">x</a>), <a href="#542662" title="(xs: List[Option[(Int, List[ParallelMatching.this.global.Tree])]])List[(Int, List[ParallelMatching.this.global.Tree])]">join</a>(<a href="#549017" title="List[Option[(Int, List[ParallelMatching.this.global.Tree])]]">y</a>), <a href="#542662" title="(xs: List[Option[(Int, ParallelMatching.this.global.Tree)]])List[(Int, ParallelMatching.this.global.Tree)]">join</a>(<a href="#549018" title="List[Option[(Int, ParallelMatching.this.global.Tree)]]">z</a>)) }

      <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="542672">toString</a> = {
        <span title="implicit scala.Predef.stringWrapper : (x: String)scala.runtime.RichString" class="string">&quot;MixTypes(%s: %s) {\n  moreSpecific: %s\n  subsumed: %s\n  remaining: %s\n}&quot;</span>.<span title="(args: Any*)String">format</span>(
          <a href="#542488" title="=&gt; MatchMatrix.this.Scrutinee">scrut</a>, <a href="#542488" title="=&gt; MatchMatrix.this.Scrutinee">scrut</a>.<a href="#541755" title="=&gt; ParallelMatching.this.global.Type">tpe</a>, <a href="#542666" title="=&gt; List[ParallelMatching.this.global.Tree]">moreSpecific</a>, <a href="#542668" title="=&gt; List[(Int, List[ParallelMatching.this.global.Tree])]">subsumed</a>, <a href="#542670" title="=&gt; List[(Int, ParallelMatching.this.global.Tree)]">remaining</a>
        )
      }

      /** returns casted symbol, success matrix and optionally fail matrix for type test on the top of this column */
      <span class="keyword">final</span> <span class="keyword">def</span> <a title="()MatchMatrix.this.Branch[MatchMatrix.this.Scrutinee]" id="542673">getTransition</a>(): <a href="#545016" title="MatchMatrix.this.Branch[MatchMatrix.this.Scrutinee]">Branch</a>[Scrutinee] = {
        <span class="keyword">val</span> <a title="MatchMatrix.this.Scrutinee" id="549175">casted</a> = <a href="#541765" title="(headType: ParallelMatching.this.global.Type)MatchMatrix.this.Scrutinee">scrut</a> casted <a href="#542676" title="=&gt; MatchMatrix.this.Patterns">pats</a>.<a href="#542000" title="=&gt; ParallelMatching.this.global.Type">headType</a>
        <span class="keyword">val</span> <a title="Boolean" id="549176">isAnyMoreSpecific</a> = <a href="#542666" title="(p: (ParallelMatching.this.global.Tree) =&gt; Boolean)Boolean">moreSpecific</a> exists (<a href="#549190" title="(x$1: AnyRef)Boolean">_</a> != <a href="../ast/Trees.scala.html#26761" title="object ParallelMatching.this.global.EmptyTree">EmptyTree</a>)
        
        <span class="keyword">def</span> <a title="=&gt; List[(Int, List[ParallelMatching.this.global.Tree])]" id="549177">mkZipped</a>    = <a href="#542666" title="(that: Iterable[(Int, List[ParallelMatching.this.global.Tree])])(implicit bf: scala.collection.generic.BuilderFactory[(ParallelMatching.this.global.Tree, (Int, List[ParallelMatching.this.global.Tree])),List[(ParallelMatching.this.global.Tree, (Int, List[ParallelMatching.this.global.Tree]))],List[ParallelMatching.this.global.Tree]])List[(ParallelMatching.this.global.Tree, (Int, List[ParallelMatching.this.global.Tree]))]">moreSpecific</a> <span title="(f: ((ParallelMatching.this.global.Tree, (Int, List[ParallelMatching.this.global.Tree]))) =&gt; (Int, List[ParallelMatching.this.global.Tree]))(implicit bf: scala.collection.generic.BuilderFactory[(Int, List[ParallelMatching.this.global.Tree]),List[(Int, List[ParallelMatching.this.global.Tree])],List[(ParallelMatching.this.global.Tree, (Int, List[ParallelMatching.this.global.Tree]))]])List[(Int, List[ParallelMatching.this.global.Tree])]">zip</span> <a href="#542668" title="=&gt; List[(Int, List[ParallelMatching.this.global.Tree])]">subsumed</a> <span title="scala.collection.generic.BuilderFactory[(Int, List[ParallelMatching.this.global.Tree]),List[(Int, List[ParallelMatching.this.global.Tree])],List#Coll]">map</span> <a href="#549301" title="(Int, List[ParallelMatching.this.global.Tree])">{</a> <span title="(Int, List[ParallelMatching.this.global.Tree])" class="keyword">case</span> (<a title="ParallelMatching.this.global.Tree" id="549304">mspat</a>, (<a title="Int" id="549307">j</a>, <a title="List[ParallelMatching.this.global.Tree]" id="549308">pats</a>)) =&gt; <span title="(_1: Int,_2: List[ParallelMatching.this.global.Tree])(Int, List[ParallelMatching.this.global.Tree])">(</span><a href="#549307" title="Int">j</a>, <a href="#549304" title="ParallelMatching.this.global.Tree">mspat</a> <a href="#549317" title="ParallelMatching.this.global.Tree">::</a> <a href="#549308" title="(x: ParallelMatching.this.global.Tree)List[ParallelMatching.this.global.Tree]">pats</a>) }
        <span class="keyword">def</span> <a title="=&gt; List[ParallelMatching.this.global.Symbol]" id="549178">mkAccessors</a> = <a href="#549175" title="MatchMatrix.this.Scrutinee">casted</a>.<a href="#541757" title="(f: (ParallelMatching.this.global.Symbol) =&gt; ParallelMatching.this.global.Symbol)(implicit bf: scala.collection.generic.BuilderFactory[ParallelMatching.this.global.Symbol,List[ParallelMatching.this.global.Symbol],List[ParallelMatching.this.global.Symbol]])List[ParallelMatching.this.global.Symbol]">accessors</a> <span title="scala.collection.generic.BuilderFactory[ParallelMatching.this.global.Symbol,List[ParallelMatching.this.global.Symbol],List#Coll]">map</span> (<a title="ParallelMatching.this.global.Symbol" id="549419">m</a> =&gt; <a href="TransMatcher.scala.html#79675" title="(pos: scala.tools.nsc.util.Position,tpe: ParallelMatching.this.global.Type,flags: List[Long],name: ParallelMatching.this.global.Name)ParallelMatching.this.global.Symbol">newVar</a>(<a href="#542488" title="=&gt; MatchMatrix.this.Scrutinee">scrut</a>.<a href="#541756" title="=&gt; scala.tools.nsc.util.Position">pos</a>, (<a href="#549175" title="MatchMatrix.this.Scrutinee">casted</a>.<a href="../symtab/Types.scala.html#30409" title="(sym: ParallelMatching.this.global.Symbol)ParallelMatching.this.global.Type">tpe</a> memberType <a href="#549419" title="ParallelMatching.this.global.Symbol">m</a>).<a href="../symtab/Types.scala.html#30379" title="=&gt; ParallelMatching.this.global.Type">resultType</a>, <a href="#542488" title="=&gt; MatchMatrix.this.Scrutinee">scrut</a>.<a href="#541763" title="=&gt; List[Long]">flags</a>)) 

        <span class="keyword">val</span> <a href="#549180" title="(List[(Int, List[ParallelMatching.this.global.Tree])], List[ParallelMatching.this.global.Symbol])">(</a><a href="#549179" title="List[(Int, List[ParallelMatching.this.global.Tree])]" id="549180">subtests</a>, <a href="#549179" title="List[ParallelMatching.this.global.Symbol]" id="549181">subtestVars</a>) =
          <span title="(List[(Int, List[ParallelMatching.this.global.Tree])], List[ParallelMatching.this.global.Symbol])" class="keyword">if</span> (<a href="#549176" title="Boolean">isAnyMoreSpecific</a>)  <span title="(_1: List[(Int, List[ParallelMatching.this.global.Tree])],_2: List[ParallelMatching.this.global.Symbol])(List[(Int, List[ParallelMatching.this.global.Tree])], List[ParallelMatching.this.global.Symbol])">(</span><a href="#549177" title="=&gt; List[(Int, List[ParallelMatching.this.global.Tree])]">mkZipped</a>, <span title="(xs: ParallelMatching.this.global.Symbol*)List[ParallelMatching.this.global.Symbol]">List</span>(<a href="#549175" title="MatchMatrix.this.Scrutinee">casted</a>.<a href="#541917" title="=&gt; ParallelMatching.this.global.Symbol">sym</a>))
          <span class="keyword">else</span>                    <span title="(_1: List[(Int, List[ParallelMatching.this.global.Tree])],_2: object Nil)(List[(Int, List[ParallelMatching.this.global.Tree])], object Nil)">(</span><a href="#542668" title="=&gt; List[(Int, List[ParallelMatching.this.global.Tree])]">subsumed</a>, <span title="object Nil">Nil</span>)
                  
        <span class="keyword">val</span> <a title="List[ParallelMatching.this.global.Symbol]" id="549182">accessorVars</a> = <span title="List[ParallelMatching.this.global.Symbol]" class="keyword">if</span> (<a href="#542676" title="=&gt; MatchMatrix.this.Patterns">pats</a>.<a href="#542002" title="=&gt; Boolean">isCaseHead</a>) <a href="#549178" title="=&gt; List[ParallelMatching.this.global.Symbol]">mkAccessors</a> <span class="keyword">else</span> <span title="object Nil">Nil</span>
        <span class="keyword">val</span> <a title="List[MatchMatrix.this.Row]" id="549183">newRows</a> =
          <span class="keyword">for</span> ((<a title="Int" id="549579">j</a>, <a title="List[ParallelMatching.this.global.Tree]" id="549580">ps</a>) &lt;- <a href="#549180" title="(f: ((Int, List[ParallelMatching.this.global.Tree])) =&gt; MatchMatrix.this.Row)(implicit bf: scala.collection.generic.BuilderFactory[MatchMatrix.this.Row,List[MatchMatrix.this.Row],List[(Int, List[ParallelMatching.this.global.Tree])]])List[MatchMatrix.this.Row]">subtests</a>) <span class="keyword">yield</span> {
            <span class="keyword">val</span> <a href="PatternNodes.scala.html#537253" title="(x: ParallelMatching.this.global.Tree)Option[(List[ParallelMatching.this.global.Symbol], ParallelMatching.this.global.Tree)]">Strip</a><a href="#549584" title="(List[ParallelMatching.this.global.Symbol], ParallelMatching.this.global.Tree)">(</a><a href="#549583" title="List[ParallelMatching.this.global.Symbol]" id="549584">vs</a>, <a href="#549583" title="ParallelMatching.this.global.Tree" id="549585">thePat</a>) = <a href="#542008" title="(i: Int)ParallelMatching.this.global.Tree">pats</a><a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree @unchecked">(</a><a href="#549579" title="Int">j</a>)
            (<a href="#541303" title="(n: Int)MatchMatrix.this.Row">rest</a> rows <a href="#549579" title="Int">j</a>).<a href="#541178" title="(hs: List[ParallelMatching.this.global.Tree],vs: Iterable[ParallelMatching.this.global.Symbol],tvars: ParallelMatching.this.global.Symbol)MatchMatrix.this.Row">insert2</a>(<a href="#549580" title="List[ParallelMatching.this.global.Tree]">ps</a>, <a href="#549584" title="List[ParallelMatching.this.global.Symbol]">vs</a>, <a href="#549175" title="MatchMatrix.this.Scrutinee">casted</a>.<a href="#541917" title="=&gt; ParallelMatching.this.global.Symbol">sym</a>)
          }
          
        <a href="#545016" title="(action: MatchMatrix.this.Scrutinee,succ: MatchMatrix.this.Rep,fail: Option[MatchMatrix.this.Rep])MatchMatrix.this.Branch[MatchMatrix.this.Scrutinee]">Branch</a>(
          <a href="#549175" title="MatchMatrix.this.Scrutinee">casted</a>,
          // succeeding =&gt; transition to translate(subsumed) (taking into account more specific)
          <a href="#81349" title="(tvars: List[ParallelMatching.this.global.Symbol],row1: List[MatchMatrix.this.Row])MatchMatrix.this.Rep">make</a>(<a href="#549181" title="List[ParallelMatching.this.global.Symbol]">subtestVars</a> <a href="#549708" title="List[ParallelMatching.this.global.Symbol]">:::</a> <a href="#549182" title="List[ParallelMatching.this.global.Symbol]">accessorVars</a> <a href="#549709" title="(prefix: List[ParallelMatching.this.global.Symbol])List[ParallelMatching.this.global.Symbol]">:::</a> <a href="#542677" title="=&gt; MatchMatrix.this.Rep">rest</a>.<a href="#541302" title="(prefix: List[ParallelMatching.this.global.Symbol])List[ParallelMatching.this.global.Symbol]">tvars</a>, <a href="#549183" title="List[MatchMatrix.this.Row]">newRows</a>),
          // fails      =&gt; transition to translate(remaining)
          <a href="#542497" title="(xs: List[MatchMatrix.this.Row])Option[MatchMatrix.this.Rep]">mkFailOpt</a>(<a href="#542670" title="(f: ((Int, ParallelMatching.this.global.Tree)) =&gt; MatchMatrix.this.Row)(implicit bf: scala.collection.generic.BuilderFactory[MatchMatrix.this.Row,List[MatchMatrix.this.Row],List[(Int, ParallelMatching.this.global.Tree)]])List[MatchMatrix.this.Row]">remaining</a> <span title="scala.collection.generic.BuilderFactory[MatchMatrix.this.Row,List[MatchMatrix.this.Row],List#Coll]">map</span> <span title="(f: (Int, ParallelMatching.this.global.Tree) =&gt; MatchMatrix.this.Row)((Int, ParallelMatching.this.global.Tree)) =&gt; MatchMatrix.this.Row">tupled</span>(<a href="#541303" title="(n: Int)MatchMatrix.this.Row">rest</a> <a href="#541173" title="(h: ParallelMatching.this.global.Tree)MatchMatrix.this.Row">rows</a> <a href="#549816" title="Int">_</a> insert <a href="#549817" title="ParallelMatching.this.global.Tree">_</a>))
        )
      }
      
      // temporary checks so we're less crashy while we determine what to implement.
      <span class="keyword">def</span> <a title="(scrut: MatchMatrix.this.Scrutinee)ParallelMatching.this.global.Type" id="542674">checkErroneous</a>(<a title="MatchMatrix.this.Scrutinee" id="549874">scrut</a>: <a href="#541915" title="MatchMatrix.this.Scrutinee">Scrutinee</a>): <a href="../symtab/Types.scala.html#26364" title="ParallelMatching.this.global.Type">Type</a> = {
        <a href="#549874" title="MatchMatrix.this.Scrutinee">scrut</a>.<a href="#541755" title="=&gt; ParallelMatching.this.global.Type">tpe</a> <span title="ParallelMatching.this.global.Type" class="keyword">match</span> {
          <span title="ParallelMatching.this.global.ErrorType.type" class="keyword">case</span> <a title="ParallelMatching.this.global.ThisType" id="549876">tpe</a> @ ThisType(_) <span class="keyword">if</span> <a href="#549876" title="ParallelMatching.this.global.ThisType">tpe</a>.<a href="../symtab/Types.scala.html#43014" title="(x$1: AnyRef)Boolean">termSymbol</a> == <a href="../symtab/Symbols.scala.html#26293" title="object ParallelMatching.this.global.NoSymbol">NoSymbol</a>        =&gt;
            <a href="TransMatcher.scala.html#79456" title="=&gt; ParallelMatching.this.global.CompilationUnit">cunit</a>.<a href="../CompilationUnits.scala.html#45687" title="(pos: scala.tools.nsc.util.Position,msg: String)Unit">error</a>(<a href="#549874" title="MatchMatrix.this.Scrutinee">scrut</a>.<a href="#541756" title="=&gt; scala.tools.nsc.util.Position">pos</a>, <span title="java.lang.String(&quot;self type test in anonymous class forbidden by implementation.&quot;)" class="string">&quot;self type test in anonymous class forbidden by implementation.&quot;</span>)
            <a href="../symtab/Types.scala.html#26376" title="object ParallelMatching.this.global.ErrorType">ErrorType</a>
          <span title="ParallelMatching.this.global.Type" class="keyword">case</span> <a title="ParallelMatching.this.global.Type" id="549892">x</a> =&gt; <a href="#549892" title="ParallelMatching.this.global.Type">x</a>
        }
      }

      <span class="keyword">final</span> <span class="keyword">def</span> <a title="()ParallelMatching.this.global.Tree" id="542675">tree</a>(): <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a> = {
        <span class="keyword">val</span> Branch<a href="#549895" title="(MatchMatrix.this.Scrutinee, MatchMatrix.this.Rep, Option[MatchMatrix.this.Rep])">(</a><a href="#549894" title="MatchMatrix.this.Scrutinee" id="549895">casted</a>, <a href="#549894" title="MatchMatrix.this.Rep" id="549896">srep</a>, <a href="#549894" title="Option[MatchMatrix.this.Rep]" id="549897">frep</a>) = <a href="#81378" title="MixTypes.this.type" class="keyword">this</a>.<a href="#542673" title="()MatchMatrix.this.Branch[MatchMatrix.this.Scrutinee]">getTransition</a>
        <span class="keyword">val</span> <a title="ParallelMatching.this.global.Type" id="549898">castedTpe</a> = <a href="#542674" title="(scrut: MatchMatrix.this.Scrutinee)ParallelMatching.this.global.Type">checkErroneous</a>(<a href="#549895" title="MatchMatrix.this.Scrutinee">casted</a>)
        <span class="keyword">val</span> <a title="ParallelMatching.this.global.Tree" id="549899">cond</a> = <a href="#81402" title="(tpe: ParallelMatching.this.global.Type,scrut: MatchMatrix.this.Scrutinee)ParallelMatching.this.global.Tree">condition</a>(<a href="#549898" title="ParallelMatching.this.global.Type">castedTpe</a>, <a href="#542488" title="=&gt; MatchMatrix.this.Scrutinee">scrut</a>)
        <span class="keyword">val</span> <a title="ParallelMatching.this.global.Tree" id="549900">succ</a> = <a href="#549896" title="MatchMatrix.this.Rep">srep</a>.<a href="#81420" title="()ParallelMatching.this.global.Tree">toTree</a>
        <span class="keyword">val</span> <a title="ParallelMatching.this.global.Tree" id="549901">fail</a> = <a href="#549897" title="(f: (MatchMatrix.this.Rep) =&gt; ParallelMatching.this.global.Tree)Option[ParallelMatching.this.global.Tree]">frep</a> <span title="(default: =&gt; ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">map</span> (<a href="#549951" title="MatchMatrix.this.Rep">_</a>.<a href="#81420" title="()ParallelMatching.this.global.Tree">toTree</a>) getOrElse (<a href="#81326" title="=&gt; ParallelMatching.this.global.Tree">failTree</a>)

        // dig out case field accessors that were buried in (***)
        <span class="keyword">val</span> <a title="List[ParallelMatching.this.global.Symbol]" id="549902">cfa</a>         = <span title="List[ParallelMatching.this.global.Symbol]" class="keyword">if</span> (<a href="#542676" title="=&gt; MatchMatrix.this.Patterns">pats</a>.<a href="#542002" title="=&gt; Boolean">isCaseHead</a>) <a href="#549895" title="MatchMatrix.this.Scrutinee">casted</a>.<a href="#541757" title="=&gt; List[ParallelMatching.this.global.Symbol]">accessors</a> <span class="keyword">else</span> <span title="object Nil">Nil</span>
        <span class="keyword">val</span> <a title="List[ParallelMatching.this.global.Symbol]" id="549903">caseTemps</a>   = <a href="#549896" title="MatchMatrix.this.Rep">srep</a>.<a href="#541302" title="=&gt; List[ParallelMatching.this.global.Symbol]">tvars</a> <span title="List[ParallelMatching.this.global.Symbol]" class="keyword">match</span> { <span title="List[ParallelMatching.this.global.Symbol]" class="keyword">case</span> <a title="ParallelMatching.this.global.Symbol" id="549968">x</a> :: <a title="List[ParallelMatching.this.global.Symbol]" id="549969">xs</a> <span class="keyword">if</span> <a href="#549968" title="(x$1: AnyRef)Boolean">x</a> == <a href="#549895" title="MatchMatrix.this.Scrutinee">casted</a>.<a href="#541917" title="=&gt; ParallelMatching.this.global.Symbol">sym</a> =&gt; <a href="#549969" title="List[ParallelMatching.this.global.Symbol]">xs</a> ; <span title="List[ParallelMatching.this.global.Symbol]" class="keyword">case</span> <a title="List[ParallelMatching.this.global.Symbol]" id="549978">x</a> =&gt; <a href="#549978" title="List[ParallelMatching.this.global.Symbol]">x</a> }
        <span class="keyword">def</span> <a title="=&gt; ParallelMatching.this.global.analyzer.global.Tree" id="549904">castedScrut</a> = <a href="TransMatcher.scala.html#79676" title="(x: ParallelMatching.this.global.Symbol,rhs: ParallelMatching.this.global.Tree)ParallelMatching.this.global.analyzer.global.Tree">typedValDef</a>(<a href="#549895" title="MatchMatrix.this.Scrutinee">casted</a>.<a href="#541917" title="=&gt; ParallelMatching.this.global.Symbol">sym</a>, <a href="#542488" title="=&gt; MatchMatrix.this.Scrutinee">scrut</a>.<a href="../ast/TreeDSL.scala.html#45321" title="(tpe: ParallelMatching.this.global.Type)ParallelMatching.this.global.gen.global.Tree">id</a> AS_ANY <a href="#549898" title="ParallelMatching.this.global.Type">castedTpe</a>)
        <span class="keyword">def</span> <a title="=&gt; List[ParallelMatching.this.global.analyzer.global.Tree]" id="549905">needCast</a>    = <span title="List[ParallelMatching.this.global.analyzer.global.Tree]" class="keyword">if</span> (<a href="#549895" title="MatchMatrix.this.Scrutinee">casted</a>.<a href="#541917" title="(x$1: AnyRef)Boolean">sym</a> ne <a href="#542488" title="=&gt; MatchMatrix.this.Scrutinee">scrut</a>.<a href="#541917" title="=&gt; ParallelMatching.this.global.Symbol">sym</a>) <span title="(xs: ParallelMatching.this.global.analyzer.global.Tree*)List[ParallelMatching.this.global.analyzer.global.Tree]">List</span>(<a href="#549904" title="=&gt; ParallelMatching.this.global.analyzer.global.Tree">castedScrut</a>) <span class="keyword">else</span> <span title="object Nil">Nil</span> 
        
        
        <span class="keyword">val</span> <a title="List[ParallelMatching.this.global.analyzer.global.Tree]" id="549906">vdefs</a>       = <a href="#549905" title="=&gt; List[ParallelMatching.this.global.analyzer.global.Tree]">needCast</a> <a href="#550021" title="List[ParallelMatching.this.global.analyzer.global.Tree]">:::</a> <span title="(prefix: List[ParallelMatching.this.global.analyzer.global.Tree])List[ParallelMatching.this.global.analyzer.global.Tree]">(</span>
          <span class="keyword">for</span> ((<a title="ParallelMatching.this.global.Symbol" id="550142">tmp</a>, <a title="ParallelMatching.this.global.Symbol" id="550143">accessor</a>) &lt;- <a href="#549903" title="(that: Iterable[ParallelMatching.this.global.Symbol])(implicit bf: scala.collection.generic.BuilderFactory[(ParallelMatching.this.global.Symbol, ParallelMatching.this.global.Symbol),List[(ParallelMatching.this.global.Symbol, ParallelMatching.this.global.Symbol)],List[ParallelMatching.this.global.Symbol]])List[(ParallelMatching.this.global.Symbol, ParallelMatching.this.global.Symbol)]">caseTemps</a> <a href="#550118" title="(f: ((ParallelMatching.this.global.Symbol, ParallelMatching.this.global.Symbol)) =&gt; ParallelMatching.this.global.analyzer.global.Tree)(implicit bf: scala.collection.generic.BuilderFactory[ParallelMatching.this.global.analyzer.global.Tree,List[ParallelMatching.this.global.analyzer.global.Tree],List[(ParallelMatching.this.global.Symbol, ParallelMatching.this.global.Symbol)]])List[ParallelMatching.this.global.analyzer.global.Tree]">zip</a> <a href="#549902" title="List[ParallelMatching.this.global.Symbol]">cfa</a>) <span class="keyword">yield</span>
            <a href="TransMatcher.scala.html#79676" title="(x: ParallelMatching.this.global.Symbol,rhs: ParallelMatching.this.global.Tree)ParallelMatching.this.global.analyzer.global.Tree">typedValDef</a>(<a href="#550142" title="ParallelMatching.this.global.Symbol">tmp</a>, <a href="../typechecker/Typers.scala.html#42872" title="(tree: ParallelMatching.this.global.analyzer.global.Tree)ParallelMatching.this.global.analyzer.global.Tree">typer</a> typed <a href="../ast/TreeDSL.scala.html#42735" title="(lhs: ParallelMatching.this.global.Tree,op: ParallelMatching.this.global.Symbol,args: ParallelMatching.this.global.Tree*)ParallelMatching.this.global.Apply">fn</a>(<a href="#549895" title="MatchMatrix.this.Scrutinee">casted</a>.<a href="#541758" title="=&gt; ParallelMatching.this.global.gen.global.Tree">id</a>, <a href="#550143" title="ParallelMatching.this.global.Symbol">accessor</a>))
        )

        <a href="../typechecker/Typers.scala.html#42872" title="(tree: ParallelMatching.this.global.analyzer.global.Tree)ParallelMatching.this.global.analyzer.global.Tree">typer</a> typed (<a href="../ast/TreeDSL.scala.html#42756" title="(tree: ParallelMatching.this.global.Tree)ParallelMatching.this.CODE.IfStart">IF</a> <a href="../ast/TreeDSL.scala.html#50041" title="(x: ParallelMatching.this.global.Tree)ParallelMatching.this.CODE.IfStart">(</a><a href="#549899" title="ParallelMatching.this.global.Tree">cond</a>) <a href="../ast/TreeDSL.scala.html#50042" title="(elsep: ParallelMatching.this.global.Tree)ParallelMatching.this.global.If">THEN</a> <a href="TransMatcher.scala.html#79677" title="(vds: List[ParallelMatching.this.global.Tree],exp: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">squeezedBlock</a>(<a href="#549906" title="List[ParallelMatching.this.global.analyzer.global.Tree]">vdefs</a>, <a href="#549900" title="ParallelMatching.this.global.Tree">succ</a>) ELSE <a href="#549901" title="ParallelMatching.this.global.Tree">fail</a>)
      }
    }

    case <span class="keyword">class</span> <a title="class Row extends java.lang.Object with ScalaObject with Product" id="541200">Row</a><span title="ScalaObject">(</span><a title="List[ParallelMatching.this.global.Tree]" id="541202">pat</a>: <span title="List[ParallelMatching.this.global.Tree]">List</span>[Tree], <a title="ParallelMatching.this.Bindings" id="541203">subst</a>: <a href="PatternNodes.scala.html#79542" title="ParallelMatching.this.Bindings">Bindings</a>, <a title="MatchMatrix.this.Guard" id="541204">guard</a>: <a href="#537587" title="MatchMatrix.this.Guard">Guard</a>, <a title="Int" id="541205">bx</a>: <span title="Int">Int</span>) {
      <span class="keyword">def</span> <a title="(h: ParallelMatching.this.global.Tree)MatchMatrix.this.Row" id="541173">insert</a>(<a title="ParallelMatching.this.global.Tree" id="544905">h</a>: <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a>)                               = <a href="#541200" title="(pat: List[ParallelMatching.this.global.Tree],subst: ParallelMatching.this.Bindings,guard: MatchMatrix.this.Guard,bx: Int)MatchMatrix.this.Row">copy</a>(pat = <a href="#544905" title="ParallelMatching.this.global.Tree">h</a> <a href="#544908" title="ParallelMatching.this.global.Tree">::</a> <a href="#541202" title="(x: ParallelMatching.this.global.Tree)List[ParallelMatching.this.global.Tree]">pat</a>)
      <span class="keyword">def</span> <a title="(hs: List[ParallelMatching.this.global.Tree])MatchMatrix.this.Row" id="541174">insert</a>(<a title="List[ParallelMatching.this.global.Tree]" id="544892">hs</a>: <span title="List[ParallelMatching.this.global.Tree]">List</span>[Tree])                        = <a href="#541200" title="(pat: List[ParallelMatching.this.global.Tree],subst: ParallelMatching.this.Bindings,guard: MatchMatrix.this.Guard,bx: Int)MatchMatrix.this.Row">copy</a>(pat = <a href="#544892" title="List[ParallelMatching.this.global.Tree]">hs</a> <a href="#544895" title="List[ParallelMatching.this.global.Tree]">:::</a> <a href="#541202" title="(prefix: List[ParallelMatching.this.global.Tree])List[ParallelMatching.this.global.Tree]">pat</a>)    // prepends supplied tree
      <span class="keyword">def</span> <a title="(hs: List[ParallelMatching.this.global.Tree])MatchMatrix.this.Row" id="541175">replace</a>(<a title="List[ParallelMatching.this.global.Tree]" id="550302">hs</a>: <span title="List[ParallelMatching.this.global.Tree]">List</span>[Tree])                       = <a href="#541200" title="(pat: List[ParallelMatching.this.global.Tree],subst: ParallelMatching.this.Bindings,guard: MatchMatrix.this.Guard,bx: Int)MatchMatrix.this.Row">copy</a>(pat = <a href="#550302" title="List[ParallelMatching.this.global.Tree]">hs</a>)            // substitutes for patterns
      <span class="keyword">def</span> <a title="(b: ParallelMatching.this.Bindings)MatchMatrix.this.Row" id="541176">rebind</a>(<a title="ParallelMatching.this.Bindings" id="544281">b</a>: <a href="PatternNodes.scala.html#79542" title="ParallelMatching.this.Bindings">Bindings</a>)                           = <a href="#541202" title="List[ParallelMatching.this.global.Tree]" id="544288">copy</a>(subst = <a href="#544281" title="ParallelMatching.this.Bindings" id="544285">b</a>)           // substitutes for bindings
      
      <span class="keyword">def</span> <a title="(vs: Iterable[ParallelMatching.this.global.Symbol],tvars: ParallelMatching.this.global.Symbol)MatchMatrix.this.Row" id="541177">rebind2</a>(<a title="Iterable[ParallelMatching.this.global.Symbol]" id="543240">vs</a>: <span title="Iterable[ParallelMatching.this.global.Symbol]">Iterable</span>[Symbol], <a title="ParallelMatching.this.global.Symbol" id="543241">tvars</a>: <a href="../symtab/Symbols.scala.html#26286" title="ParallelMatching.this.global.Symbol">Symbol</a>) =
        <a href="#541202" title="List[ParallelMatching.this.global.Tree]" id="543277">copy</a>(subst = <a href="#541203" title="=&gt; ParallelMatching.this.Bindings">subst</a>.<a href="PatternNodes.scala.html#538032" title="(vs: Iterable[ParallelMatching.this.global.Symbol],tvar: ParallelMatching.this.global.Symbol)ParallelMatching.this.Bindings">add</a><a title="ParallelMatching.this.Bindings" id="543274">(</a><a href="#543240" title="Iterable[ParallelMatching.this.global.Symbol]">vs</a>, <a href="#543241" title="ParallelMatching.this.global.Symbol">tvars</a>))
      <span class="keyword">def</span> <a title="(hs: List[ParallelMatching.this.global.Tree],vs: Iterable[ParallelMatching.this.global.Symbol],tvars: ParallelMatching.this.global.Symbol)MatchMatrix.this.Row" id="541178">insert2</a>(<a title="List[ParallelMatching.this.global.Tree]" id="545125">hs</a>: <span title="List[ParallelMatching.this.global.Tree]">List</span>[Tree], <a title="Iterable[ParallelMatching.this.global.Symbol]" id="545126">vs</a>: <span title="Iterable[ParallelMatching.this.global.Symbol]">Iterable</span>[Symbol], <a title="ParallelMatching.this.global.Symbol" id="545127">tvars</a>: <a href="../symtab/Symbols.scala.html#26286" title="ParallelMatching.this.global.Symbol">Symbol</a>) =             // prepends and prepends
        <a href="#541200" title="(pat: List[ParallelMatching.this.global.Tree],subst: ParallelMatching.this.Bindings,guard: MatchMatrix.this.Guard,bx: Int)MatchMatrix.this.Row">copy</a>(pat = <a href="#545125" title="List[ParallelMatching.this.global.Tree]">hs</a> <a href="#545130" title="List[ParallelMatching.this.global.Tree]">:::</a> <a href="#541202" title="(prefix: List[ParallelMatching.this.global.Tree])List[ParallelMatching.this.global.Tree]">pat</a>, subst = <a href="#541203" title="=&gt; ParallelMatching.this.Bindings">subst</a>.<a href="PatternNodes.scala.html#538032" title="(vs: Iterable[ParallelMatching.this.global.Symbol],tvar: ParallelMatching.this.global.Symbol)ParallelMatching.this.Bindings">add</a>(<a href="#545126" title="Iterable[ParallelMatching.this.global.Symbol]">vs</a>, <a href="#545127" title="ParallelMatching.this.global.Symbol">tvars</a>))

      <span class="keyword">def</span> <a title="(p: ParallelMatching.this.Pattern)MatchMatrix.this.Row" id="541179">insert</a>(<a title="ParallelMatching.this.Pattern" id="544876">p</a>: <a href="#536944" title="ParallelMatching.this.Pattern">Pattern</a>)                            = <a href="#541200" title="(pat: List[ParallelMatching.this.global.Tree],subst: ParallelMatching.this.Bindings,guard: MatchMatrix.this.Guard,bx: Int)MatchMatrix.this.Row">copy</a>(pat = <a href="#544876" title="ParallelMatching.this.Pattern">p</a>.<a href="#536968" title="=&gt; ParallelMatching.this.global.Tree">tree</a> <a href="#544882" title="ParallelMatching.this.global.Tree">::</a> <a href="#541202" title="(x: ParallelMatching.this.global.Tree)List[ParallelMatching.this.global.Tree]">pat</a>) // transitioning to patterns

      /** returns true if the patterns in this rows cover a type symbols &quot;combination&quot; and there is no guard
       *  @param comb pairs of (column index, type symbol)
       */
      <span class="keyword">def</span> <a title="(combos: List[MatchMatrix.this.Combo])Boolean" id="541180">covers</a>(<a title="List[MatchMatrix.this.Combo]" id="550307">combos</a>: <span title="List[MatchMatrix.this.Combo]">List</span>[Combo]) =
        <a href="#541204" title="=&gt; MatchMatrix.this.Guard">guard</a>.<a href="#537592" title="(x$1: Boolean)Boolean">isEmpty</a> &amp;&amp; (<a href="#550307" title="(p: (MatchMatrix.this.Combo) =&gt; Boolean)Boolean">combos</a> forall (<a title="MatchMatrix.this.Combo" id="550314">c</a> =&gt; <a href="#550322" title="(p: ParallelMatching.this.global.Tree)Boolean">c</a> isCovered <a href="#541202" title="(n: Int)ParallelMatching.this.global.Tree">pat</a>(<a href="#550314" title="MatchMatrix.this.Combo">c</a>.<a href="#551706" title="=&gt; Int">index</a>)))

      // returns this rows with alternatives expanded
      <span class="keyword">def</span> <a title="(classifyPat: (ParallelMatching.this.global.Tree, Int) =&gt; ParallelMatching.this.global.Tree)List[MatchMatrix.this.Row]" id="541181">expandAlternatives</a>(<a title="(ParallelMatching.this.global.Tree, Int) =&gt; ParallelMatching.this.global.Tree" id="541184">classifyPat</a>: (Tree, Int) =&gt; Tree): <span title="List[MatchMatrix.this.Row]">List</span>[Row] = {
        // If the given pattern contains alternatives, return it as a list of patterns.
        // Makes typed copies of any bindings found so all alternatives point to final state.
        <span class="keyword">def</span> <a title="(b: ParallelMatching.this.global.Bind)(ParallelMatching.this.global.Tree) =&gt; ParallelMatching.this.global.Tree" id="550428">newPrev</a>(<a title="ParallelMatching.this.global.Bind" id="550431">b</a>: <a href="../ast/Trees.scala.html#26828" title="ParallelMatching.this.global.Bind">Bind</a>): <span title="(ParallelMatching.this.global.Tree) =&gt; ParallelMatching.this.global.Tree">TreeFunction1</span> = (x: <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a>) =&gt; <a href="../ast/Trees.scala.html#26743" title="=&gt; ParallelMatching.this.global.LazyTreeCopier">treeCopy</a>.<a href="../ast/Trees.scala.html#48857" title="(tree: ParallelMatching.this.global.Tree,name: ParallelMatching.this.global.Name,body: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Bind">Bind</a><a href="../ast/Trees.scala.html#29552" title="(tp: ParallelMatching.this.global.Type)ParallelMatching.this.global.Bind">(</a><a href="#550431" title="ParallelMatching.this.global.Bind">b</a>, <a href="#550431" title="ParallelMatching.this.global.Bind">b</a>.<a href="../ast/Trees.scala.html#98681" title="=&gt; ParallelMatching.this.global.Name">name</a>, <a href="#550433" title="ParallelMatching.this.global.Tree">x</a>) setType <a href="#550433" title="ParallelMatching.this.global.Tree">x</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; ParallelMatching.this.global.Type">tpe</a>
        <span class="keyword">def</span> <a title="(p: ParallelMatching.this.global.Tree,prevBindings: (ParallelMatching.this.global.Tree) =&gt; ParallelMatching.this.global.Tree)List[ParallelMatching.this.global.Tree]" id="550429">extractBindings</a>(<a title="ParallelMatching.this.global.Tree" id="550450">p</a>: <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a>, <a title="(ParallelMatching.this.global.Tree) =&gt; ParallelMatching.this.global.Tree" id="550452">prevBindings</a>: <span title="(ParallelMatching.this.global.Tree) =&gt; ParallelMatching.this.global.Tree">TreeFunction1</span> = <span title="[A](x: A)A">identity</span><a href="#550455" title="(x: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">[</a><a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a>] _): <span title="List[ParallelMatching.this.global.Tree]">List</span>[Tree] = <a href="#550450" title="ParallelMatching.this.global.Tree">p</a> <span title="List[ParallelMatching.this.global.Tree]" class="keyword">match</span> {
          <span title="List[ParallelMatching.this.global.Tree]" class="keyword">case</span> <a title="ParallelMatching.this.global.Bind" id="550459">b</a> @ Bind(_, <a title="ParallelMatching.this.global.Tree" id="550464">body</a>)    =&gt; <a href="#550429" title="(p: ParallelMatching.this.global.Tree,prevBindings: (ParallelMatching.this.global.Tree) =&gt; ParallelMatching.this.global.Tree)List[ParallelMatching.this.global.Tree]">extractBindings</a>(<a href="#550464" title="ParallelMatching.this.global.Tree">body</a>, <a href="#550428" title="(b: ParallelMatching.this.global.Bind)(ParallelMatching.this.global.Tree) =&gt; ParallelMatching.this.global.Tree">newPrev</a>(<a href="#550459" title="ParallelMatching.this.global.Bind">b</a>))
          <span title="List[ParallelMatching.this.global.Tree]" class="keyword">case</span> Alternative(<a title="List[ParallelMatching.this.global.Tree]" id="550472">ps</a>)      =&gt; <a href="#550472" title="(f: (ParallelMatching.this.global.Tree) =&gt; ParallelMatching.this.global.Tree)(implicit bf: scala.collection.generic.BuilderFactory[ParallelMatching.this.global.Tree,List[ParallelMatching.this.global.Tree],List[ParallelMatching.this.global.Tree]])List[ParallelMatching.this.global.Tree]">ps</a> <span title="scala.collection.generic.BuilderFactory[ParallelMatching.this.global.Tree,List[ParallelMatching.this.global.Tree],List#Coll]">map</span> <a href="#550452" title="(ParallelMatching.this.global.Tree) =&gt; ParallelMatching.this.global.Tree">prevBindings</a>
          <span title="List[ParallelMatching.this.global.Tree]" class="keyword">case</span> <a title="ParallelMatching.this.global.Tree" id="550506">x</a>                    =&gt; <span title="(xs: ParallelMatching.this.global.Tree*)List[ParallelMatching.this.global.Tree]">List</span>(<a href="#550506" title="ParallelMatching.this.global.Tree">x</a>)  // this shouldn't happen
        }

        // classify all the top level patterns - alternatives come back unaltered
        <span class="keyword">val</span> <a title="List[ParallelMatching.this.global.Tree]" id="550430">newPats</a>: <span title="List[ParallelMatching.this.global.Tree]">List</span>[Tree] = <span title="object List">List</span>.<span title="(xs: List[ParallelMatching.this.global.Tree],ys: List[Int])(f: (ParallelMatching.this.global.Tree, Int) =&gt; ParallelMatching.this.global.Tree)List[ParallelMatching.this.global.Tree]">map2</span>(<a href="#541202" title="=&gt; List[ParallelMatching.this.global.Tree]">pat</a>, <a href="#541202" title="=&gt; List[ParallelMatching.this.global.Tree]">pat</a>.<span title="=&gt; Range">indices</span>.<span title="=&gt; List[Int]">toList</span>)(<a href="#541184" title="(ParallelMatching.this.global.Tree, Int) =&gt; ParallelMatching.this.global.Tree">classifyPat</a>)
        
        // expand alternatives if any are present
        (<a href="#550430" title="(p: (ParallelMatching.this.global.Tree) =&gt; Boolean)Int" id="25715">newPats</a> indexWhere <a href="#79584" title="(t: ParallelMatching.this.global.Tree)Boolean">isAlternative</a>) <span title="List[MatchMatrix.this.Row]" class="keyword">match</span> {
          <span title="List[MatchMatrix.this.Row]" class="keyword">case</span> <span title="Int(-1)">-</span><span class="int">1</span>     =&gt; <span title="(xs: MatchMatrix.this.Row*)List[MatchMatrix.this.Row]">List</span>(<a href="#541175" title="(hs: List[ParallelMatching.this.global.Tree])MatchMatrix.this.Row">replace</a>(<a href="#550430" title="List[ParallelMatching.this.global.Tree]">newPats</a>))
          <span title="List[MatchMatrix.this.Row]" class="keyword">case</span> <a title="Int" id="550569">index</a>  =&gt;
            <span class="keyword">val</span> <a href="#550571" title="(List[ParallelMatching.this.global.Tree], ParallelMatching.this.global.Tree, List[ParallelMatching.this.global.Tree])">(</a><a href="#550570" title="List[ParallelMatching.this.global.Tree]" id="550571">prefix</a>, <a href="#550570" title="ParallelMatching.this.global.Tree" id="550572">alts</a> :: <a href="#550570" title="List[ParallelMatching.this.global.Tree]" id="550573">suffix</a>) = <a href="#550430" title="(n: Int)(List[ParallelMatching.this.global.Tree], List[ParallelMatching.this.global.Tree])" id="24452">newPats</a> <span title="(List[ParallelMatching.this.global.Tree], List[ParallelMatching.this.global.Tree]) @unchecked">splitAt</span> <a href="#550569" title="Int">index</a>
            // make a new row for each alternative, with it spliced into the original position
            <a href="#550429" title="(p: ParallelMatching.this.global.Tree,prevBindings: (ParallelMatching.this.global.Tree) =&gt; ParallelMatching.this.global.Tree)List[ParallelMatching.this.global.Tree]">extractBindings</a><span title="(f: (ParallelMatching.this.global.Tree) =&gt; MatchMatrix.this.Row)(implicit bf: scala.collection.generic.BuilderFactory[MatchMatrix.this.Row,List[MatchMatrix.this.Row],List[ParallelMatching.this.global.Tree]])List[MatchMatrix.this.Row]">(</span><a href="#550572" title="ParallelMatching.this.global.Tree">alts</a>) <span title="scala.collection.generic.BuilderFactory[MatchMatrix.this.Row,List[MatchMatrix.this.Row],List#Coll]">map</span> (<a title="ParallelMatching.this.global.Tree" id="550612">x</a> =&gt; <a href="#541175" title="(hs: List[ParallelMatching.this.global.Tree])MatchMatrix.this.Row">replace</a>(<a href="#550571" title="List[ParallelMatching.this.global.Tree]">prefix</a> <a href="#550613" title="List[ParallelMatching.this.global.Tree]">:::</a> <a href="#550612" title="ParallelMatching.this.global.Tree">x</a> <a href="#550614" title="(prefix: List[ParallelMatching.this.global.Tree])List[ParallelMatching.this.global.Tree]">::</a> <a href="#550573" title="(x: ParallelMatching.this.global.Tree)List[ParallelMatching.this.global.Tree]">suffix</a>))
        }
      }
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="541182">toString</a>() = {
        <span class="keyword">val</span> <a title="String" id="550663">patStr</a> = <a href="#541202" title="=&gt; List[ParallelMatching.this.global.Tree]">pat</a>.<span title="=&gt; String">mkString</span>
        <span class="keyword">val</span> <a title="List[java.lang.String]" id="550664">others</a> = <span title="(xs: Product*)List[Product]">List</span><span title="(f: (Product) =&gt; java.lang.String)(implicit bf: scala.collection.generic.BuilderFactory[java.lang.String,List[java.lang.String],List[Product]])List[java.lang.String]">(</span><a href="#541203" title="=&gt; ParallelMatching.this.Bindings">subst</a>, <a href="#541204" title="=&gt; MatchMatrix.this.Guard">guard</a>) <span title="(p: (java.lang.String) =&gt; Boolean)List[java.lang.String]">map</span> (<a href="#550697" title="Product">_</a>.<a title="()java.lang.String" id="6597">toString</a>) filter (<a href="#550783" title="(x$1: AnyRef)Boolean">_</a> != <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>)
        <span class="keyword">val</span> <a title="java.lang.String" id="550665">otherStr</a> = <span title="java.lang.String" class="keyword">if</span> (<a href="#550664" title="List[java.lang.String]">others</a>.<span title="=&gt; Boolean">isEmpty</span>) <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span> <span class="keyword">else</span> <span title="(x$1: Any)java.lang.String" class="string">&quot; // &quot;</span> + <a href="#550664" title="List[java.lang.String]">others</a>.<span title="(sep: String)String">mkString</span>(<span title="java.lang.String(&quot; &quot;)" class="string">&quot; &quot;</span>)

        <span title="implicit scala.Predef.stringWrapper : (x: String)scala.runtime.RichString" class="string">&quot;Row(%d) %s%s&quot;</span>.<span title="(args: Any*)String">format</span>(<a href="#541205" title="=&gt; Int">bx</a>, <a href="#550663" title="String">patStr</a>, <a href="#550665" title="java.lang.String">otherStr</a>)
      }
    }
    
    case <span class="keyword">class</span> <a title="class FinalState extends java.lang.Object with ScalaObject with Product" id="538994">FinalState</a><span title="ScalaObject">(</span><a title="ParallelMatching.this.Bindings" id="538996">subst</a>: <a href="PatternNodes.scala.html#79542" title="ParallelMatching.this.Bindings">Bindings</a>, <a title="ParallelMatching.this.global.Tree" id="538997">body</a>: <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a>)
    
    case <span class="keyword">class</span> <a title="class Combo extends java.lang.Object with ScalaObject with Product" id="551017">Combo</a><span title="ScalaObject">(</span><a title="Int" id="551706">index</a>: <span title="Int">Int</span>, <a title="ParallelMatching.this.global.Symbol" id="551707">sym</a>: <a href="../symtab/Symbols.scala.html#26286" title="ParallelMatching.this.global.Symbol">Symbol</a>) {
      // is this combination covered by the given pattern?
      <span class="keyword">def</span> <a title="(p: ParallelMatching.this.global.Tree)Boolean" id="550322">isCovered</a>(<a title="ParallelMatching.this.global.Tree" id="550324">p</a>: <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a>) = <a href="../ast/TreeDSL.scala.html#42709" title="(x: ParallelMatching.this.global.Tree)(f: PartialFunction[ParallelMatching.this.global.Tree,Boolean])Boolean">cond</a>(<a href="../ast/TreeDSL.scala.html#42720" title="(x: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">unbind</a>(<a href="#550324" title="ParallelMatching.this.global.Tree">p</a>)) <a href="#550340" title="Boolean">{</a>
        <span title="Boolean(true)" class="keyword">case</span> _: <a href="../ast/Trees.scala.html#26832" title="ParallelMatching.this.global.UnApply">UnApply</a> | _: <a href="../ast/Trees.scala.html#26835" title="ParallelMatching.this.global.ArrayValue">ArrayValue</a> =&gt; <span title="Boolean(true)" class="keyword">true</span>
        <span title="Boolean" class="keyword">case</span> _                          =&gt; <a href="#79586" title="(t: ParallelMatching.this.global.Tree)Boolean">isDefaultPattern</a><span title="(x$1: Boolean)Boolean">(</span><a href="#550324" title="ParallelMatching.this.global.Tree">p</a>) || (<a href="#550324" title="ParallelMatching.this.global.Tree">p</a>.<a href="PatternNodes.scala.html#538370" title="(sym: ParallelMatching.this.global.Symbol)Boolean">tpe</a> coversSym <a href="#551707" title="=&gt; ParallelMatching.this.global.Symbol">sym</a>) // typeCoversSym(p.tpe, sym)
      }
    }
    case <span class="keyword">class</span> <a title="class SetCombo extends java.lang.Object with ScalaObject with Product" id="551110">SetCombo</a><span title="ScalaObject">(</span><a title="Int" id="554462">index</a>: <span title="Int">Int</span>, <a title="scala.collection.Set[ParallelMatching.this.global.Symbol]" id="554463">syms</a>: <span title="scala.collection.Set[ParallelMatching.this.global.Symbol]">Set</span>[Symbol]) {}
    case <span class="keyword">class</span> <a title="class Branch[T] extends java.lang.Object with ScalaObject with Product" id="545016">Branch</a>[<a title="&gt;: Nothing &lt;: Any" id="545018">T</a>]<span title="ScalaObject">(</span><a title="T" id="545022">action</a>: <a href="#545018" title="T">T</a>, <a title="MatchMatrix.this.Rep" id="545023">succ</a>: <a href="#541300" title="MatchMatrix.this.Rep">Rep</a>, <a title="Option[MatchMatrix.this.Rep]" id="545024">fail</a>: <span title="Option[MatchMatrix.this.Rep]">Option</span>[Rep])
    case <span class="keyword">class</span> <a title="class UnapplyCall extends java.lang.Object with ScalaObject with Product" id="545034">UnapplyCall</a><span title="ScalaObject">(</span><a title="ParallelMatching.this.global.Tree" id="545044">ua</a>: <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a>, <a title="List[ParallelMatching.this.global.Tree]" id="545045">args</a>: <span title="List[ParallelMatching.this.global.Tree]">List</span>[Tree])
    
    // sealed abstract class Pat {
    //   def isSimple: Boolean
    // }
    // case class SimplePat(pat: Tree) extends Pat {
    //   val isSimple = true
    // }
    // case class ComplexPat(pat: Tree) extends Pat {
    //   val isSimple = false
    // }

    case <span class="keyword">class</span> <a title="class Rep extends java.lang.Object with ScalaObject with Product" id="541300">Rep</a><span title="ScalaObject">(</span><span class="keyword">val</span> <a title="List[ParallelMatching.this.global.Symbol]" id="541302">tvars</a>: <span title="List[ParallelMatching.this.global.Symbol]">List</span>[Symbol], <span class="keyword">val</span> <a title="List[MatchMatrix.this.Row]" id="541303">rows</a>: <span title="List[MatchMatrix.this.Row]">List</span>[Row]) {
      <span class="keyword">import</span> Flags._
      
      /** Converts this to a tree - recursively acquires subreps. */
      <span class="keyword">final</span> <span class="keyword">def</span> <a title="()ParallelMatching.this.global.Tree" id="81420">toTree</a>(): <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a> = <a href="#541300" title="Rep.this.type" class="keyword">this</a>.<a href="#81427" title="()MatchMatrix.this.RuleApplication">applyRule</a>.<a href="#542499" title="()ParallelMatching.this.global.Tree">tree</a>

      <span class="keyword">private</span> <span class="keyword">def</span> <a title="(s: ParallelMatching.this.global.Symbol)Boolean" id="81421">toUse</a>(<a title="ParallelMatching.this.global.Symbol" id="551330">s</a>: <a href="../symtab/Symbols.scala.html#26286" title="ParallelMatching.this.global.Symbol">Symbol</a>) =
         <span title="(x$1: Boolean)Boolean">(</span><a href="../symtab/Symbols.scala.html#27155" title="(mask: Long)Boolean">s</a> hasFlag <span title="Long(4096L)">MUTABLE</span>) <span title="(x$1: Boolean)Boolean">&amp;&amp;</span>                 // indicates that have not yet checked exhaustivity
        <span title="=&gt; Boolean">!</span>(<a href="../symtab/Symbols.scala.html#27155" title="(mask: Long)Boolean">s</a> hasFlag <span title="Long(274877906944L)">TRANS_FLAG</span>) &amp;&amp;              // indicates @unchecked
         (<a href="#551330" title="ParallelMatching.this.global.Symbol">s</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; ParallelMatching.this.global.Type">tpe</a>.<a href="../symtab/Symbols.scala.html#27155" title="(mask: Long)Boolean">typeSymbol</a> hasFlag <span title="Long(1024L)">SEALED</span>)

      // the superclass is taken if it is not abstract
      <span class="keyword">private</span> <span class="keyword">def</span> <a title="(s: ParallelMatching.this.global.Symbol)scala.collection.Set[ParallelMatching.this.global.Symbol]" id="81422">countSuper</a>(<a title="ParallelMatching.this.global.Symbol" id="551343">s</a>: <a href="../symtab/Symbols.scala.html#26286" title="ParallelMatching.this.global.Symbol">Symbol</a>): <span title="scala.collection.Set[ParallelMatching.this.global.Symbol]">Set</span>[Symbol]  = <span title="scala.collection.Set[ParallelMatching.this.global.Symbol]" class="keyword">if</span> (<a href="../symtab/Symbols.scala.html#27155" title="(mask: Long)Boolean">s</a> hasFlag <span title="Long(8L)">ABSTRACT</span>) <a href="../symtab/Symbols.scala.html#26278" title="=&gt; scala.collection.immutable.Set[ParallelMatching.this.global.Symbol]">emptySymbolSet</a> <span class="keyword">else</span> <a title="(args: ParallelMatching.this.global.Symbol*)scala.collection.Set[ParallelMatching.this.global.Symbol]" id="4409">Set</a>(<a href="#551343" title="ParallelMatching.this.global.Symbol">s</a>)
      <span class="keyword">private</span> <span class="keyword">def</span> <a title="(s: ParallelMatching.this.global.Symbol)scala.collection.Set[ParallelMatching.this.global.Symbol]" id="81423">countSymbol</a>(<a title="ParallelMatching.this.global.Symbol" id="551352">s</a>: <a href="../symtab/Symbols.scala.html#26286" title="ParallelMatching.this.global.Symbol">Symbol</a>): <span title="scala.collection.Set[ParallelMatching.this.global.Symbol]">Set</span>[Symbol] = <a href="#81424" title="(s: ParallelMatching.this.global.Symbol)scala.collection.Set[ParallelMatching.this.global.Symbol]">candidates</a><a title="(elems: Traversable[ParallelMatching.this.global.Symbol])scala.collection.Set[ParallelMatching.this.global.Symbol]" id="39603">(</a><a href="#551352" title="ParallelMatching.this.global.Symbol">s</a>) ++ <a href="#81422" title="(s: ParallelMatching.this.global.Symbol)scala.collection.Set[ParallelMatching.this.global.Symbol]">countSuper</a>(<a href="#551352" title="ParallelMatching.this.global.Symbol">s</a>)      
      <span class="keyword">private</span> <span class="keyword">def</span> <a title="(s: ParallelMatching.this.global.Symbol)scala.collection.Set[ParallelMatching.this.global.Symbol]" id="81424">candidates</a>(<a title="ParallelMatching.this.global.Symbol" id="551354">s</a>: <a href="../symtab/Symbols.scala.html#26286" title="ParallelMatching.this.global.Symbol">Symbol</a>): <span title="scala.collection.Set[ParallelMatching.this.global.Symbol]">Set</span>[Symbol]  =
        <span title="scala.collection.Set[ParallelMatching.this.global.Symbol]" class="keyword">if</span> (<a href="../symtab/Symbols.scala.html#27155" title="(mask: Long)Boolean">s</a> hasFlag <span title="Long(1024L)">SEALED</span>) <a href="#551354" title="ParallelMatching.this.global.Symbol">s</a>.<a href="../symtab/Symbols.scala.html#27239" title="(f: (ParallelMatching.this.global.Symbol) =&gt; Traversable[ParallelMatching.this.global.Symbol])(implicit bf: scala.collection.generic.BuilderFactory[ParallelMatching.this.global.Symbol,scala.collection.Set[ParallelMatching.this.global.Symbol],scala.collection.immutable.Set[ParallelMatching.this.global.Symbol]])scala.collection.Set[ParallelMatching.this.global.Symbol]">children</a> <a title="scala.collection.generic.BuilderFactory[ParallelMatching.this.global.Symbol,scala.collection.immutable.Set[ParallelMatching.this.global.Symbol],scala.collection.immutable.Set#Coll]" id="7613">flatMap</a> <a href="#81423" title="(s: ParallelMatching.this.global.Symbol)scala.collection.Set[ParallelMatching.this.global.Symbol]">countSymbol</a>
        <span class="keyword">else</span> <a href="../symtab/Symbols.scala.html#26278" title="=&gt; scala.collection.immutable.Set[ParallelMatching.this.global.Symbol]">emptySymbolSet</a>

      <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; List[(Int, scala.collection.Set[ParallelMatching.this.global.Symbol])]" id="81425">setsToCombine</a>: <span title="List[(Int, scala.collection.Set[ParallelMatching.this.global.Symbol])]">List</span>[(Int, Set[Symbol])] =
        <span class="keyword">for</span> ((<a title="ParallelMatching.this.global.Symbol" id="551633">sym</a>, <a title="Int" id="551634">i</a>) &lt;- <a href="#541302" title="=&gt; List[ParallelMatching.this.global.Symbol]">tvars</a>.<a href="#551594" title="(f: ((ParallelMatching.this.global.Symbol, Int)) =&gt; (Int, scala.collection.Set[ParallelMatching.this.global.Symbol]))(implicit bf: scala.collection.generic.BuilderFactory[(Int, scala.collection.Set[ParallelMatching.this.global.Symbol]),List[(Int, scala.collection.Set[ParallelMatching.this.global.Symbol])],List[(ParallelMatching.this.global.Symbol, Int)]])List[(Int, scala.collection.Set[ParallelMatching.this.global.Symbol])]">zipWithIndex</a> ; <span class="keyword">if</span> <a href="#81421" title="(s: ParallelMatching.this.global.Symbol)Boolean">toUse</a>(<a href="#551633" title="ParallelMatching.this.global.Symbol">sym</a>)) <span class="keyword">yield</span> {
          <a href="../symtab/Symbols.scala.html#27153" title="(mask: Long)sym.type">sym</a> resetFlag <span title="Long(4096L)">MUTABLE</span>
          <span title="(_1: Int,_2: scala.collection.Set[ParallelMatching.this.global.Symbol])(Int, scala.collection.Set[ParallelMatching.this.global.Symbol])">(</span><a href="#551634" title="Int">i</a>, <a href="#81424" title="(s: ParallelMatching.this.global.Symbol)scala.collection.Set[ParallelMatching.this.global.Symbol]">candidates</a>(<a href="#551633" title="ParallelMatching.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27162" title="=&gt; ParallelMatching.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30366" title="=&gt; ParallelMatching.this.global.Symbol">typeSymbol</a>))
        }

      // computes cartesian product, keeps indices available    
      <span class="keyword">private</span> <span class="keyword">def</span> <a title="(colcom: List[(Int, scala.collection.Set[ParallelMatching.this.global.Symbol])])List[List[MatchMatrix.this.Combo]]" id="81426">combine</a>(<a title="List[(Int, scala.collection.Set[ParallelMatching.this.global.Symbol])]" id="551677">colcom</a>: <span title="List[(Int, scala.collection.Set[ParallelMatching.this.global.Symbol])]">List</span>[(Int, Set[Symbol])]): <span title="List[List[MatchMatrix.this.Combo]]">List</span>[List[Combo]] = <a href="#551677" title="List[(Int, scala.collection.Set[ParallelMatching.this.global.Symbol])]">colcom</a> <span title="List[List[MatchMatrix.this.Combo]]" class="keyword">match</span> {
        <span title="scala.collection.immutable.Nil.type" class="keyword">case</span> <span title="object Nil">Nil</span>              =&gt; <span title="object Nil">Nil</span>
        <span title="List[List[MatchMatrix.this.Combo]]" class="keyword">case</span> (<a title="Int" id="551685">i</a>, <a title="scala.collection.Set[ParallelMatching.this.global.Symbol]" id="551686">syms</a>) :: <span title="object Nil">Nil</span> =&gt; <a href="#551686" title="scala.collection.Set[ParallelMatching.this.global.Symbol]">syms</a>.<span title="(f: (ParallelMatching.this.global.Symbol) =&gt; List[MatchMatrix.this.Combo])(implicit bf: scala.collection.generic.BuilderFactory[List[MatchMatrix.this.Combo],List[List[MatchMatrix.this.Combo]],List[ParallelMatching.this.global.Symbol]])List[List[MatchMatrix.this.Combo]]">toList</span> <span title="scala.collection.generic.BuilderFactory[List[MatchMatrix.this.Combo],List[List[MatchMatrix.this.Combo]],List#Coll]">map</span> (<a title="ParallelMatching.this.global.Symbol" id="551699">s</a> =&gt; <span title="(xs: MatchMatrix.this.Combo*)List[MatchMatrix.this.Combo]">List</span>(<a href="#551017" title="(index: Int,sym: ParallelMatching.this.global.Symbol)MatchMatrix.this.Combo">Combo</a>(<a href="#551685" title="Int">i</a>, <a href="#551699" title="ParallelMatching.this.global.Symbol">s</a>)))
        <span title="List[List[MatchMatrix.this.Combo]]" class="keyword">case</span> (<a title="Int" id="551757">i</a>, <a title="scala.collection.Set[ParallelMatching.this.global.Symbol]" id="551758">syms</a>) :: <a title="List[(Int, scala.collection.Set[ParallelMatching.this.global.Symbol])]" id="551761">cs</a>  =&gt; <span class="keyword">for</span> (<a title="ParallelMatching.this.global.Symbol" id="551772">s</a> &lt;- <a href="#551758" title="scala.collection.Set[ParallelMatching.this.global.Symbol]">syms</a>.<span title="(f: (ParallelMatching.this.global.Symbol) =&gt; Traversable[List[MatchMatrix.this.Combo]])(implicit bf: scala.collection.generic.BuilderFactory[List[MatchMatrix.this.Combo],List[List[MatchMatrix.this.Combo]],List[ParallelMatching.this.global.Symbol]])List[List[MatchMatrix.this.Combo]]">toList</span>; <a title="List[MatchMatrix.this.Combo]" id="551783">rest</a> &lt;- <a href="#81426" title="(colcom: List[(Int, scala.collection.Set[ParallelMatching.this.global.Symbol])])List[List[MatchMatrix.this.Combo]]">combine</a><span title="(f: (List[MatchMatrix.this.Combo]) =&gt; List[MatchMatrix.this.Combo])(implicit bf: scala.collection.generic.BuilderFactory[List[MatchMatrix.this.Combo],List[List[MatchMatrix.this.Combo]],List[List[MatchMatrix.this.Combo]]])List[List[MatchMatrix.this.Combo]]">(</span><a href="#551761" title="List[(Int, scala.collection.Set[ParallelMatching.this.global.Symbol])]">cs</a>)) <span class="keyword">yield</span> <a href="#551017" title="(index: Int,sym: ParallelMatching.this.global.Symbol)MatchMatrix.this.Combo">Combo</a>(<a href="#551757" title="Int">i</a>, <a href="#551772" title="ParallelMatching.this.global.Symbol">s</a>) <a href="#551784" title="MatchMatrix.this.Combo">::</a> <a href="#551783" title="(x: MatchMatrix.this.Combo)List[MatchMatrix.this.Combo]">rest</a>
      }

      /*   internal representation is (tvars:List[Symbol], rows:List[Row])
       *   
       *         tmp1       tmp_m
       */
      <span class="keyword">final</span> <span class="keyword">def</span> <a title="()MatchMatrix.this.RuleApplication" id="81427">applyRule</a>(): <a href="#81363" title="MatchMatrix.this.RuleApplication">RuleApplication</a> = {
        <span class="keyword">def</span> <a title="[T](xs: List[T],n: Int)List[T]" id="551895">dropIndex</a>[<a title="&gt;: Nothing &lt;: Any" id="551897">T</a>](<a title="List[T]" id="551916">xs</a>: <span title="List[T]">List</span>[T], <a title="Int" id="551917">n</a>: <span title="Int">Int</span>) = (<a href="#551916" title="(n: Int)List[T]" id="24443">xs</a> take <a href="#551917" title="Int">n</a>) <a href="#551918" title="List[T]">:::</a> <span title="(prefix: List[T])List[T]">(</span><a href="#551916" title="(n: Int)List[T]" id="24445">xs</a> drop (<a href="#551917" title="(x$1: Int)Int">n</a> + <span title="Int(1)" class="int">1</span>))   
           
        <span class="keyword">lazy</span> <span class="keyword">val</span> Row<a href="#551901" title="(List[ParallelMatching.this.global.Tree], ParallelMatching.this.Bindings, MatchMatrix.this.Guard, Int)">(</a><a href="#551898" title="List[ParallelMatching.this.global.Tree]" id="551901">pats</a>, <a href="#551898" title="ParallelMatching.this.Bindings" id="551903">subst</a>, <a href="#551898" title="MatchMatrix.this.Guard" id="551905">guard</a>, <a href="#551898" title="Int" id="551907">index</a>) = <a href="#541303" title="=&gt; List[MatchMatrix.this.Row]">rows</a>.<span title="=&gt; MatchMatrix.this.Row">head</span>
        <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="MatchMatrix.this.Rep" id="551909">guardedRest</a>        = <span title="MatchMatrix.this.Rep" class="keyword">if</span> (<a href="#551904" title="=&gt; MatchMatrix.this.Guard">guard</a>.<a href="#537592" title="=&gt; Boolean">isEmpty</a>) <span title="Null(null)" class="keyword">null</span> <span class="keyword">else</span> <a href="#81349" title="(tvars: List[ParallelMatching.this.global.Symbol],row1: List[MatchMatrix.this.Row])MatchMatrix.this.Rep">make</a>(<a href="#541302" title="=&gt; List[ParallelMatching.this.global.Symbol]">tvars</a>, <a href="#541303" title="=&gt; List[MatchMatrix.this.Row]">rows</a>.<span title="=&gt; List[MatchMatrix.this.Row]">tail</span>)
        <span class="keyword">lazy</span> <span class="keyword">val</span> <a href="#551913" title="(List[ParallelMatching.this.global.Tree], List[ParallelMatching.this.global.Tree])">(</a><a href="#551910" title="List[ParallelMatching.this.global.Tree]" id="551913">defaults</a>, <a href="#551910" title="List[ParallelMatching.this.global.Tree]" id="551915">others</a>) = <a href="#551900" title="(p: (ParallelMatching.this.global.Tree) =&gt; Boolean)(List[ParallelMatching.this.global.Tree], List[ParallelMatching.this.global.Tree])">pats</a> <span title="(List[ParallelMatching.this.global.Tree], List[ParallelMatching.this.global.Tree]) @unchecked">span</span> (<a title="ParallelMatching.this.global.Tree" id="551984">p</a> =&gt; <a href="#79586" title="(t: ParallelMatching.this.global.Tree)Boolean">isDefaultPattern</a>(<a href="../ast/TreeDSL.scala.html#42720" title="(x: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">unbind</a>(<a href="#551984" title="ParallelMatching.this.global.Tree">p</a>)))
        
        <span title="MatchMatrix.this.RuleApplication" class="keyword">if</span> (<a href="#541303" title="=&gt; List[MatchMatrix.this.Row]">rows</a>.<span title="=&gt; Boolean">isEmpty</span>) <a href="#542992" title="()MatchMatrix.this.ErrorRule">ErrorRule</a>()
        <span class="keyword">else</span> <a href="#551914" title="=&gt; List[ParallelMatching.this.global.Tree]">others</a> <span title="MatchMatrix.this.RuleApplication" class="keyword">match</span> {
          /** top-most rows contains only variables/wildcards */
          <span title="MatchMatrix.this.VariableRule" class="keyword">case</span> <span title="object Nil">Nil</span>          =&gt;
            <span class="keyword">val</span> <a title="ParallelMatching.this.Bindings" id="552011">binding</a> = (<a href="#551912" title="(f: (ParallelMatching.this.global.Tree) =&gt; List[ParallelMatching.this.global.Symbol])(implicit bf: scala.collection.generic.BuilderFactory[List[ParallelMatching.this.global.Symbol],List[List[ParallelMatching.this.global.Symbol]],List[ParallelMatching.this.global.Tree]])List[List[ParallelMatching.this.global.Symbol]]">defaults</a> <span title="(that: Iterable[ParallelMatching.this.global.Symbol])(implicit bf: scala.collection.generic.BuilderFactory[(List[ParallelMatching.this.global.Symbol], ParallelMatching.this.global.Symbol),List[(List[ParallelMatching.this.global.Symbol], ParallelMatching.this.global.Symbol)],List[List[ParallelMatching.this.global.Symbol]]])List[(List[ParallelMatching.this.global.Symbol], ParallelMatching.this.global.Symbol)]">map</span> (<a href="#81448" title="implicit scala.tools.nsc.matching.ParallelMatching.Implicits.mkPattern : (t: ParallelMatching.this.global.Tree)ParallelMatching.this.Pattern">_</a>.<a href="#536961" title="=&gt; List[ParallelMatching.this.global.Symbol]">boundVariables</a>) <span title="scala.collection.generic.BuilderFactory[(List[ParallelMatching.this.global.Symbol], ParallelMatching.this.global.Symbol),List[(List[ParallelMatching.this.global.Symbol], ParallelMatching.this.global.Symbol)],List#Coll]">zip</span> <a href="#541302" title="=&gt; List[ParallelMatching.this.global.Symbol]">tvars</a>) .
              <span title="(z: ParallelMatching.this.Bindings)(f: (ParallelMatching.this.Bindings, (List[ParallelMatching.this.global.Symbol], ParallelMatching.this.global.Symbol)) =&gt; ParallelMatching.this.Bindings)ParallelMatching.this.Bindings">foldLeft</span>(<a href="#551902" title="=&gt; ParallelMatching.this.Bindings">subst</a>)((<a title="ParallelMatching.this.Bindings" id="552223">b</a>, <a title="(List[ParallelMatching.this.global.Symbol], ParallelMatching.this.global.Symbol)" id="552224">pair</a>) =&gt; <a href="#552223" title="ParallelMatching.this.Bindings">b</a>.<a href="PatternNodes.scala.html#538032" title="(vs: Iterable[ParallelMatching.this.global.Symbol],tvar: ParallelMatching.this.global.Symbol)ParallelMatching.this.Bindings">add</a>(<a href="#552224" title="(List[ParallelMatching.this.global.Symbol], ParallelMatching.this.global.Symbol)">pair</a>.<span title="=&gt; List[ParallelMatching.this.global.Symbol]">_1</span>, <a href="#552224" title="(List[ParallelMatching.this.global.Symbol], ParallelMatching.this.global.Symbol)">pair</a>.<span title="=&gt; ParallelMatching.this.global.Symbol">_2</span>))
              
            <a href="#543119" title="(subst: ParallelMatching.this.Bindings,guard: MatchMatrix.this.Guard,guardedRest: MatchMatrix.this.Rep,bx: Int)MatchMatrix.this.VariableRule">VariableRule</a>(<a href="#552011" title="ParallelMatching.this.Bindings">binding</a>, <a href="#551904" title="=&gt; MatchMatrix.this.Guard">guard</a>, <a href="#551908" title="=&gt; MatchMatrix.this.Rep">guardedRest</a>, <a href="#551906" title="=&gt; Int">index</a>)

          /** cut out the column (px) containing the non-default pattern. */
          <span title="MatchMatrix.this.RuleApplication" class="keyword">case</span> (<a title="ParallelMatching.this.global.Tree" id="552262">rpat</a> @ <a href="PatternNodes.scala.html#537253" title="(x: ParallelMatching.this.global.Tree)Option[(List[ParallelMatching.this.global.Symbol], ParallelMatching.this.global.Tree)]">Strip</a>(<a title="List[ParallelMatching.this.global.Symbol]" id="552268">vs</a>, _)) :: _ =&gt;
            <span class="keyword">val</span> <a title="Int" id="552272">px</a>        = <a href="#551912" title="=&gt; List[ParallelMatching.this.global.Tree]">defaults</a>.<span title="=&gt; Int">size</span>
            <span class="keyword">val</span> <a title="List[ParallelMatching.this.global.Tree]" id="552273">column</a>    = <a href="#552262" title="ParallelMatching.this.global.Tree">rpat</a> <a href="#552276" title="ParallelMatching.this.global.Tree">::</a> <span title="(x: ParallelMatching.this.global.Tree)List[ParallelMatching.this.global.Tree]">(</span><a href="#541303" title="=&gt; List[MatchMatrix.this.Row]">rows</a>.<span title="(f: (MatchMatrix.this.Row) =&gt; ParallelMatching.this.global.Tree)(implicit bf: scala.collection.generic.BuilderFactory[ParallelMatching.this.global.Tree,List[ParallelMatching.this.global.Tree],List[MatchMatrix.this.Row]])List[ParallelMatching.this.global.Tree]">tail</span> <span title="scala.collection.generic.BuilderFactory[ParallelMatching.this.global.Tree,List[ParallelMatching.this.global.Tree],List#Coll]">map</span> (<a href="#541202" title="(n: Int)ParallelMatching.this.global.Tree">_</a> pat <a href="#552272" title="Int">px</a>))
            <span class="keyword">val</span> <a title="List[ParallelMatching.this.global.Symbol]" id="552274">restTemp</a>  = <a href="#551895" title="(xs: List[ParallelMatching.this.global.Symbol],n: Int)List[ParallelMatching.this.global.Symbol]">dropIndex</a>(<a href="#541302" title="=&gt; List[ParallelMatching.this.global.Symbol]">tvars</a>, <a href="#552272" title="Int">px</a>)
            <span class="keyword">val</span> <a title="List[MatchMatrix.this.Row]" id="552275">restRows</a>  = <a href="#541303" title="(f: (MatchMatrix.this.Row) =&gt; MatchMatrix.this.Row)(implicit bf: scala.collection.generic.BuilderFactory[MatchMatrix.this.Row,List[MatchMatrix.this.Row],List[MatchMatrix.this.Row]])List[MatchMatrix.this.Row]">rows</a> <span title="scala.collection.generic.BuilderFactory[MatchMatrix.this.Row,List[MatchMatrix.this.Row],List#Coll]">map</span> (<a title="MatchMatrix.this.Row" id="552402">r</a> =&gt; <a href="#541175" title="(hs: List[ParallelMatching.this.global.Tree])MatchMatrix.this.Row">r</a> replace <a href="#551895" title="(xs: List[ParallelMatching.this.global.Tree],n: Int)List[ParallelMatching.this.global.Tree]">dropIndex</a>(<a href="#552402" title="MatchMatrix.this.Row">r</a>.<a href="#541202" title="=&gt; List[ParallelMatching.this.global.Tree]">pat</a>, <a href="#552272" title="Int">px</a>))
        
            <a href="#81362" title="(scrut: MatchMatrix.this.Scrutinee,column: List[ParallelMatching.this.global.Tree],rest: MatchMatrix.this.Rep)MatchMatrix.this.RuleApplication">MixtureRule</a>(<span title="MatchMatrix.this.Scrutinee" class="keyword">new</span> <a href="#541915" title="MatchMatrix.this.Scrutinee">Scrutinee</a>(<a href="#541302" title="(n: Int)ParallelMatching.this.global.Symbol">tvars</a>(<a href="#552272" title="Int">px</a>)), <a href="#552273" title="List[ParallelMatching.this.global.Tree]">column</a>, <a href="#81349" title="(tvars: List[ParallelMatching.this.global.Symbol],row1: List[MatchMatrix.this.Row])MatchMatrix.this.Rep">make</a>(<a href="#552274" title="List[ParallelMatching.this.global.Symbol]">restTemp</a>, <a href="#552275" title="List[MatchMatrix.this.Row]">restRows</a>))
        }
      }
      
      <span class="keyword">def</span> <a title="=&gt; Rep.this.type" id="81428">checkExhaustive</a>: <span class="keyword">this</span>.<span class="keyword">type</span> = {
        <span class="keyword">val</span> <a title="List[List[MatchMatrix.this.Combo]]" id="552512">allcomb</a> = <a href="#81426" title="(colcom: List[(Int, scala.collection.Set[ParallelMatching.this.global.Symbol])])List[List[MatchMatrix.this.Combo]]">combine</a>(<a href="#81425" title="=&gt; List[(Int, scala.collection.Set[ParallelMatching.this.global.Symbol])]">setsToCombine</a>)
        <span title="Unit" class="keyword">if</span> (<a href="#552512" title="(p: (List[MatchMatrix.this.Combo]) =&gt; Boolean)Boolean">allcomb</a> forall (<a title="List[MatchMatrix.this.Combo]" id="552522">combo</a> =&gt; <a href="#541303" title="(p: (MatchMatrix.this.Row) =&gt; Boolean)Boolean">rows</a> exists (<a href="#541180" title="(combos: List[MatchMatrix.this.Combo])Boolean">_</a> covers <a href="#552522" title="List[MatchMatrix.this.Combo]">combo</a>)))
          <span title="Nothing" class="keyword">return</span> <a href="#541300" title="Rep.this.type" class="keyword">this</a>

        // if we reach here, patterns were not exhaustive
        <span class="keyword">def</span> <a title="(xs: List[MatchMatrix.this.Combo],i: Int)String" id="552513">mkPad</a>(<a title="List[MatchMatrix.this.Combo]" id="552534">xs</a>: <span title="List[MatchMatrix.this.Combo]">List</span>[Combo], <a title="Int" id="552535">i</a>: <span title="Int">Int</span>): <span title="String">String</span> = <a href="#552534" title="List[MatchMatrix.this.Combo]">xs</a> <span title="String" class="keyword">match</span> {
          <span title="String" class="keyword">case</span> <span title="object Nil">Nil</span>                    =&gt; <a href="#81436" title="(s: String)String">pad</a>(<span title="java.lang.String(&quot;*&quot;)" class="string">&quot;*&quot;</span>)
          <span title="String" class="keyword">case</span> Combo(<a title="Int" id="552551">j</a>, <a title="ParallelMatching.this.global.Symbol" id="552552">sym</a>) :: <a title="List[MatchMatrix.this.Combo]" id="552555">rest</a>  =&gt; <span title="String" class="keyword">if</span> (<a href="#552551" title="(x$1: Int)Boolean">j</a> == <a href="#552535" title="Int">i</a>) <a href="#81436" title="(s: String)String">pad</a>(<a href="#552552" title="ParallelMatching.this.global.Symbol">sym</a>.<a href="../symtab/Symbols.scala.html#27147" title="=&gt; ParallelMatching.this.global.Name">name</a>.<a href="../symtab/Names.scala.html#28391" title="()String">toString</a>) <span class="keyword">else</span> <a href="#552513" title="(xs: List[MatchMatrix.this.Combo],i: Int)String">mkPad</a>(<a href="#552555" title="List[MatchMatrix.this.Combo]">rest</a>, <a href="#552535" title="Int">i</a>)
        }
        <span class="keyword">def</span> <a title="(open: List[MatchMatrix.this.Combo])java.lang.String" id="552514">mkMissingStr</a>(<a title="List[MatchMatrix.this.Combo]" id="552576">open</a>: <span title="List[MatchMatrix.this.Combo]">List</span>[Combo]) =
          <span title="(x$1: Any)java.lang.String" class="string">&quot;missing combination &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#541302" title="=&gt; List[ParallelMatching.this.global.Symbol]">tvars</a>.<span title="=&gt; Range">indices</span>.<a title="(f: (Int) =&gt; String)(implicit bf: scala.collection.generic.BuilderFactory[String,scala.collection.generic.VectorView[String,Vector[_]],scala.collection.generic.VectorView[Int,scala.collection.immutable.Vector[Int]]])scala.collection.generic.VectorView[String,Vector[_]]" id="57109">map</a><a title="scala.collection.generic.BuilderFactory[String,scala.collection.generic.VectorView[String,Vector[_]],scala.collection.generic.VectorView#Coll]" id="23626">(</a><a href="#552513" title="(xs: List[MatchMatrix.this.Combo],i: Int)String">mkPad</a>(<a href="#552576" title="List[MatchMatrix.this.Combo]">open</a>, <a href="#552592" title="Int">_</a>)).<span title="=&gt; String">mkString</span> + <span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span>

        <span class="keyword">val</span> <a title="List[java.lang.String]" id="552515">missingCombos</a> = <a href="#552512" title="(p: (List[MatchMatrix.this.Combo]) =&gt; Boolean)List[List[MatchMatrix.this.Combo]]">allcomb</a> <span title="(f: (List[MatchMatrix.this.Combo]) =&gt; java.lang.String)(implicit bf: scala.collection.generic.BuilderFactory[java.lang.String,List[java.lang.String],List[List[MatchMatrix.this.Combo]]])List[java.lang.String]">filter</span> (<a title="List[MatchMatrix.this.Combo]" id="552748">open</a> =&gt; <a href="#541303" title="=&gt; List[MatchMatrix.this.Row]">rows</a>.<span title="(p: (MatchMatrix.this.Row) =&gt; Boolean)Boolean">forall</span>(<span title="=&gt; Boolean">!</span><a href="#552753" title="MatchMatrix.this.Row">_</a>.<a href="#541180" title="(combos: List[MatchMatrix.this.Combo])Boolean">covers</a>(<a href="#552748" title="List[MatchMatrix.this.Combo]">open</a>))) <span title="scala.collection.generic.BuilderFactory[java.lang.String,List[java.lang.String],List#Coll]">map</span> <a href="#552514" title="(open: List[MatchMatrix.this.Combo])java.lang.String">mkMissingStr</a>
        <a href="TransMatcher.scala.html#79456" title="=&gt; ParallelMatching.this.global.CompilationUnit">cunit</a>.<a href="../CompilationUnits.scala.html#45688" title="(pos: scala.tools.nsc.util.Position,msg: String)Unit">warning</a>(<a href="#541302" title="=&gt; List[ParallelMatching.this.global.Symbol]">tvars</a>.<span title="=&gt; ParallelMatching.this.global.Symbol">head</span>.<a href="../symtab/Symbols.scala.html#27006" title="=&gt; scala.tools.nsc.util.Position">pos</a>, <span title="(x$1: Any)java.lang.String" class="string">&quot;match is not exhaustive!\n&quot;</span> + <a href="#552515" title="List[java.lang.String]">missingCombos</a>.<span title="=&gt; String">mkString</span>)
        <a href="#541300" title="Rep.this.type" class="keyword">this</a>
      }

      // a fancy toString method for debugging
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="()java.lang.String" id="81429">toString</a>() = {
        <span class="keyword">val</span> <a title="String" id="552863">tempStr</a> = (<a href="#541302" title="(f: (ParallelMatching.this.global.Symbol) =&gt; String)(implicit bf: scala.collection.generic.BuilderFactory[String,List[String],List[ParallelMatching.this.global.Symbol]])List[String]">tvars</a> <span title="scala.collection.generic.BuilderFactory[String,List[String],List#Coll]">map</span> (<a title="ParallelMatching.this.global.Symbol" id="552874">t</a> =&gt; <a href="#81435" title="(s: Any)String">pad</a>(<a href="#552874" title="ParallelMatching.this.global.Symbol">t</a>.<a href="../symtab/Symbols.scala.html#27147" title="=&gt; ParallelMatching.this.global.Name">name</a>))).<span title="=&gt; String">mkString</span>
        <span class="keyword">val</span> <a title="java.lang.String" id="552864">underlines</a> = <a href="#552863" title="String">tempStr</a>.<a title="(x$1: java.lang.String,x$2: java.lang.String)java.lang.String" id="7103">replaceAll</a>(<span title="java.lang.String(&quot;\S&quot;)" class="string">&quot;&quot;&quot;\S&quot;&quot;&quot;</span>, <span title="java.lang.String(&quot;-&quot;)" class="string">&quot;-&quot;</span>)
        <span class="keyword">val</span> <a title="String" id="552865">rowStr</a> = (
          <span class="keyword">for</span> (Row(<a title="List[ParallelMatching.this.global.Tree]" id="552991">pat</a>, <a title="ParallelMatching.this.Bindings" id="552992">subst</a>, <a title="MatchMatrix.this.Guard" id="552993">guard</a>, <a title="Int" id="552994">bx</a>) &lt;- <a href="#541303" title="(f: (MatchMatrix.this.Row) =&gt; String)(implicit bf: scala.collection.generic.BuilderFactory[String,List[String],List[MatchMatrix.this.Row]])List[String]">rows</a>) <span class="keyword">yield</span> {
            <span class="keyword">val</span> <a title="String" id="552997">extraStr</a>: <span title="String">String</span> = <a href="#552993" title="MatchMatrix.this.Guard">guard</a>.<a href="#537594" title="(x$1: Any)java.lang.String">toString</a> + <a href="#552992" title="ParallelMatching.this.Bindings">subst</a>
            <span title="implicit scala.Predef.stringWrapper : (x: String)scala.runtime.RichString" class="string">&quot;%s %s\n&quot;</span>.<span title="(args: Any*)String">format</span>(<a href="#552991" title="(f: (ParallelMatching.this.global.Tree) =&gt; String)(implicit bf: scala.collection.generic.BuilderFactory[String,List[String],List[ParallelMatching.this.global.Tree]])List[String]">pat</a> <span title="scala.collection.generic.BuilderFactory[String,List[String],List#Coll]">map</span> <a href="#81435" title="(s: Any)String">pad</a> <span title="=&gt; String">mkString</span>, <a href="#552997" title="String">extraStr</a>)
          }
        ) <span title="=&gt; String">mkString</span>

        <span title="java.lang.String" class="keyword">if</span> (<a href="#541302" title="=&gt; List[ParallelMatching.this.global.Symbol]">tvars</a>.<span title="(x$1: Int)Boolean">size</span> == <span title="Int(0)" class="int">0</span>) <span title="implicit scala.Predef.stringWrapper : (x: String)scala.runtime.RichString" class="string">&quot;Rep(%dx%d)&quot;</span>.<span title="(args: Any*)String">format</span>(<a href="#541302" title="=&gt; List[ParallelMatching.this.global.Symbol]">tvars</a>.<span title="=&gt; Int">size</span>, <a href="#541303" title="=&gt; List[MatchMatrix.this.Row]">rows</a>.<span title="=&gt; Int">size</span>)
        <span class="keyword">else</span> <span title="implicit scala.Predef.stringWrapper : (x: String)scala.runtime.RichString" class="string">&quot;Rep(%dx%d)\n%s\n%s\n%s&quot;</span>.<span title="(args: Any*)String">format</span>(<a href="#541302" title="=&gt; List[ParallelMatching.this.global.Symbol]">tvars</a>.<span title="=&gt; Int">size</span>, <a href="#541303" title="=&gt; List[MatchMatrix.this.Row]">rows</a>.<span title="=&gt; Int">size</span>, <a href="#552863" title="String">tempStr</a>, <a href="#552864" title="java.lang.String">underlines</a>, <a href="#552865" title="String">rowStr</a>)
      }

      <span class="keyword">private</span> <span class="keyword">val</span> <a title="Int" id="81430">NPAD</a> = <span title="Int(15)" class="int">15</span>

      <span class="keyword">private</span> <span class="keyword">def</span> <a title="(t: ParallelMatching.this.global.Type)String" id="81432">typeToString</a>(<a title="ParallelMatching.this.global.Type" id="553261">t</a>: <a href="../symtab/Types.scala.html#26364" title="ParallelMatching.this.global.Type">Type</a>): <span title="String">String</span> = <a href="#553261" title="ParallelMatching.this.global.Type">t</a> <span title="String" class="keyword">match</span> {
        <span title="java.lang.String(&quot;x&quot;)" class="keyword">case</span> <a href="../symtab/Types.scala.html#26383" title="object ParallelMatching.this.global.NoType">NoType</a> =&gt; <span title="java.lang.String(&quot;x&quot;)" class="string">&quot;x&quot;</span>
        <span title="String" class="keyword">case</span> <a title="ParallelMatching.this.global.Type" id="553263">x</a>      =&gt; <a href="#553263" title="ParallelMatching.this.global.Type">x</a>.<a href="../symtab/Types.scala.html#30453" title="()String">toString</a>
      }
      <span class="keyword">private</span> <span class="keyword">def</span> <a title="(s: ParallelMatching.this.global.Symbol)String" id="81433">symbolToString</a>(<a title="ParallelMatching.this.global.Symbol" id="553266">s</a>: <a href="../symtab/Symbols.scala.html#26286" title="ParallelMatching.this.global.Symbol">Symbol</a>): <span title="String">String</span> = <a href="#553266" title="ParallelMatching.this.global.Symbol">s</a> <span title="String" class="keyword">match</span> {
        <span title="String" class="keyword">case</span> <a title="ParallelMatching.this.global.Symbol" id="553268">x</a>  =&gt; <a href="#553268" title="ParallelMatching.this.global.Symbol">x</a>.<a href="../symtab/Symbols.scala.html#27250" title="()String">toString</a>
      }
      <span class="keyword">private</span> <span class="keyword">def</span> <a title="(t: ParallelMatching.this.global.Tree)String" id="81434">treeToString</a>(<a title="ParallelMatching.this.global.Tree" id="553271">t</a>: <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a>): <span title="String">String</span> = <a href="../ast/TreeDSL.scala.html#42720" title="(x: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">unbind</a>(<a href="#553271" title="ParallelMatching.this.global.Tree">t</a>) <span title="String" class="keyword">match</span> {
        <span title="java.lang.String(&quot;?&quot;)" class="keyword">case</span> <a href="../ast/Trees.scala.html#26761" title="object ParallelMatching.this.global.EmptyTree">EmptyTree</a>            =&gt; <span title="java.lang.String(&quot;?&quot;)" class="string">&quot;?&quot;</span>
        <span title="java.lang.String(&quot;_&quot;)" class="keyword">case</span> <a href="../ast/TreeDSL.scala.html#537140" title="(other: Any)Boolean">WILD</a>()               =&gt; <span title="java.lang.String(&quot;_&quot;)" class="string">&quot;_&quot;</span>
        <span title="String" class="keyword">case</span> Literal(Constant(<a title="Any" id="553283">x</a>)) =&gt; <span title="implicit scala.Predef.stringWrapper : (x: String)scala.runtime.RichString" class="string">&quot;LIT(%s)&quot;</span>.<span title="(args: Any*)String">format</span>(<a href="#553283" title="Any">x</a>)
        <span title="String" class="keyword">case</span> Apply(<a title="ParallelMatching.this.global.Tree" id="553311">fn</a>, <a title="List[ParallelMatching.this.global.Tree]" id="553312">args</a>)      =&gt; <span title="implicit scala.Predef.stringWrapper : (x: String)scala.runtime.RichString" class="string">&quot;%s(%s)&quot;</span>.<span title="(args: Any*)String">format</span>(<a href="#81434" title="(t: ParallelMatching.this.global.Tree)String">treeToString</a>(<a href="#553311" title="ParallelMatching.this.global.Tree">fn</a>), <a href="#553312" title="(f: (ParallelMatching.this.global.Tree) =&gt; String)(implicit bf: scala.collection.generic.BuilderFactory[String,List[String],List[ParallelMatching.this.global.Tree]])List[String]">args</a> <span title="(sep: String)String">map</span> <a href="#81434" title="(t: ParallelMatching.this.global.Tree)String">treeToString</a> mkString <span title="java.lang.String(&quot;,&quot;)" class="string">&quot;,&quot;</span>)
        <span title="String" class="keyword">case</span> <a title="ParallelMatching.this.global.TypeTree" id="553434">x</a>: <a href="../ast/Trees.scala.html#26900" title="ParallelMatching.this.global.TypeTree">TypeTree</a>          =&gt; <span title="implicit scala.Predef.stringWrapper : (x: String)scala.runtime.RichString" class="string">&quot;TT(%s)&quot;</span>.<span title="(args: Any*)String">format</span>(<a href="#81433" title="(s: ParallelMatching.this.global.Symbol)String">symbolToString</a>(<a href="#553434" title="ParallelMatching.this.global.TypeTree">x</a>.<a href="../ast/Trees.scala.html#50712" title="=&gt; ParallelMatching.this.global.Symbol">symbol</a>))
        <span title="String" class="keyword">case</span> Typed(<a title="ParallelMatching.this.global.Tree" id="553460">expr</a>, <a title="ParallelMatching.this.global.Tree" id="553461">tpt</a>)     =&gt; <span title="implicit scala.Predef.stringWrapper : (x: String)scala.runtime.RichString" class="string">&quot;%s: %s&quot;</span>.<span title="(args: Any*)String">format</span>(<a href="#81434" title="(t: ParallelMatching.this.global.Tree)String">treeToString</a>(<a href="#553460" title="ParallelMatching.this.global.Tree">expr</a>), <a href="#81434" title="(t: ParallelMatching.this.global.Tree)String">treeToString</a>(<a href="#553461" title="ParallelMatching.this.global.Tree">tpt</a>))
        <span title="java.lang.String" class="keyword">case</span> <a title="ParallelMatching.this.global.Tree" id="553489">x</a>                    =&gt;  <a href="#553489" title="ParallelMatching.this.global.Tree">x</a>.<a href="../ast/Trees.scala.html#29567" title="(x$1: Any)java.lang.String">toString</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; (&quot;)" class="string">&quot; (&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#553489" title="ParallelMatching.this.global.Tree">x</a>.<span title="()java.lang.Class[_]">getClass</span> + <span title="java.lang.String(&quot;)&quot;)" class="string">&quot;)&quot;</span>
      }

      <span class="keyword">private</span> <span class="keyword">def</span> <a title="(s: Any)String" id="81435">pad</a>(<a title="Any" id="552541">s</a>: <a title="Any" id="49">Any</a>): <span title="String">String</span> = <a href="#81436" title="(s: String)String">pad</a>(<a href="#552541" title="Any">s</a> <span title="String" class="keyword">match</span> {
        <span title="String" class="keyword">case</span> <a title="ParallelMatching.this.global.Tree" id="553506">x</a>: <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a>    =&gt; <a href="#81434" title="(t: ParallelMatching.this.global.Tree)String">treeToString</a>(<a href="#553506" title="ParallelMatching.this.global.Tree">x</a>)
        // case x: AnyRef  =&gt; x.toString + &quot; (&quot; + x.getClass + &quot;)&quot;
        <span title="java.lang.String" class="keyword">case</span> <a title="Any" id="553509">x</a>                  =&gt; <a href="#553509" title="Any">x</a>.<span title="()java.lang.String">toString</span>
      })
      <span class="keyword">private</span> <span class="keyword">def</span> <a title="(s: String)String" id="81436">pad</a>(<a title="String" id="552539">s</a>: <span title="String">String</span>): <span title="String">String</span> = <span title="(args: Any*)String" class="string">&quot;%%%ds&quot;</span> <span title="(args: Any*)String">format</span> (<a href="#81430" title="(x$1: Int)Int">NPAD</a> - <span title="Int(1)" class="int">1</span>) format <a href="#552539" title="String">s</a>
    }
  
    /** Expands the patterns recursively. */
    <span class="keyword">final</span> <span class="keyword">def</span> <a title="(roots: List[ParallelMatching.this.global.Symbol],cases: List[ParallelMatching.this.global.Tree])(List[MatchMatrix.this.Row], List[MatchMatrix.this.FinalState], List[List[ParallelMatching.this.global.Symbol]])" id="81401">expand</a>(<a title="List[ParallelMatching.this.global.Symbol]" id="537581">roots</a>: <span title="List[ParallelMatching.this.global.Symbol]">List</span>[Symbol], <a title="List[ParallelMatching.this.global.Tree]" id="537582">cases</a>: <span title="List[ParallelMatching.this.global.Tree]">List</span>[Tree]): <span title="(List[MatchMatrix.this.Row], List[MatchMatrix.this.FinalState], List[List[ParallelMatching.this.global.Symbol]])">(</span>List[Row], List[FinalState], List[List[Symbol]]) = {
      <span class="keyword">val</span> <a title="(List[Option[MatchMatrix.this.Row]], List[MatchMatrix.this.FinalState], List[List[ParallelMatching.this.global.Symbol]])" id="553634">res</a> = <a href="MatchUtil.scala.html#79551" title="(xs: List[(Option[MatchMatrix.this.Row], MatchMatrix.this.FinalState, List[ParallelMatching.this.global.Symbol])])(List[Option[MatchMatrix.this.Row]], List[MatchMatrix.this.FinalState], List[List[ParallelMatching.this.global.Symbol]])">unzip3</a>(
        <span class="keyword">for</span> ((CaseDef(<a title="ParallelMatching.this.global.Tree" id="553763">pat</a>, <a title="ParallelMatching.this.global.Tree" id="553764">guard</a>, <a title="ParallelMatching.this.global.Tree" id="553765">body</a>), <a title="Int" id="553768">index</a>) &lt;- <a href="#537582" title="List[ParallelMatching.this.global.Tree]">cases</a>.<a href="#553725" title="(f: ((ParallelMatching.this.global.Tree, Int)) =&gt; (Option[MatchMatrix.this.Row], MatchMatrix.this.FinalState, List[ParallelMatching.this.global.Symbol]))(implicit bf: scala.collection.generic.BuilderFactory[(Option[MatchMatrix.this.Row], MatchMatrix.this.FinalState, List[ParallelMatching.this.global.Symbol]),List[(Option[MatchMatrix.this.Row], MatchMatrix.this.FinalState, List[ParallelMatching.this.global.Symbol])],List[(ParallelMatching.this.global.Tree, Int)]])List[(Option[MatchMatrix.this.Row], MatchMatrix.this.FinalState, List[ParallelMatching.this.global.Symbol])]">zipWithIndex</a>) <span class="keyword">yield</span> {
          <span class="keyword">def</span> <a title="(ps: List[ParallelMatching.this.global.Tree])MatchMatrix.this.Row" id="553771">mkRow</a>(<a title="List[ParallelMatching.this.global.Tree]" id="553773">ps</a>: <span title="List[ParallelMatching.this.global.Tree]">List</span>[Tree]) = <a href="#541200" title="(pat: List[ParallelMatching.this.global.Tree],subst: ParallelMatching.this.Bindings,guard: MatchMatrix.this.Guard,bx: Int)MatchMatrix.this.Row">Row</a>(<a href="#553773" title="List[ParallelMatching.this.global.Tree]">ps</a>, <a href="PatternNodes.scala.html#79545" title="=&gt; ParallelMatching.this.Bindings">NoBinding</a>, <a href="#537587" title="(tree: ParallelMatching.this.global.Tree)MatchMatrix.this.Guard">Guard</a>(<a href="#553764" title="ParallelMatching.this.global.Tree">guard</a>), <a href="#553768" title="Int">index</a>)
          
          <span class="keyword">def</span> <a title="=&gt; Option[MatchMatrix.this.Row]" id="553772">rowForPat</a>: <span title="Option[MatchMatrix.this.Row]">Option</span>[Row] = <a href="../ast/TreeDSL.scala.html#42712" title="(x: ParallelMatching.this.global.Tree)(f: PartialFunction[ParallelMatching.this.global.Tree,MatchMatrix.this.Row])Option[MatchMatrix.this.Row]">condOpt</a>(<a href="#553763" title="ParallelMatching.this.global.Tree">pat</a>) <a href="#553809" title="MatchMatrix.this.Row">{</a>
            <span title="MatchMatrix.this.Row" class="keyword">case</span> _ <span class="keyword">if</span> <a href="#537581" title="List[ParallelMatching.this.global.Symbol]">roots</a>.<a title="(x$1: Int)Boolean" id="2979">length</a> &lt;= <span title="Int(1)" class="int">1</span> =&gt; <a href="#553771" title="(ps: List[ParallelMatching.this.global.Tree])MatchMatrix.this.Row">mkRow</a>(<span title="(xs: ParallelMatching.this.global.Tree*)List[ParallelMatching.this.global.Tree]">List</span>(<a href="#553763" title="ParallelMatching.this.global.Tree">pat</a>))
            <span title="MatchMatrix.this.Row" class="keyword">case</span> Apply(<a title="ParallelMatching.this.global.Tree" id="553829">fn</a>, <a title="List[ParallelMatching.this.global.Tree]" id="553830">args</a>)        =&gt; <a href="#553771" title="(ps: List[ParallelMatching.this.global.Tree])MatchMatrix.this.Row">mkRow</a>(<a href="#553830" title="List[ParallelMatching.this.global.Tree]">args</a>)
            <span title="MatchMatrix.this.Row" class="keyword">case</span> <a href="../ast/TreeDSL.scala.html#537140" title="(other: Any)Boolean">WILD</a>()                 =&gt; <a href="#553771" title="(ps: List[ParallelMatching.this.global.Tree])MatchMatrix.this.Row">mkRow</a>(<a href="PatternNodes.scala.html#79516" title="(i: Int)List[ParallelMatching.this.global.Tree]">getDummies</a>(<a href="#537581" title="List[ParallelMatching.this.global.Symbol]">roots</a>.<span title="=&gt; Int">length</span>))
          }
      
          <span title="(_1: Option[MatchMatrix.this.Row],_2: MatchMatrix.this.FinalState,_3: List[ParallelMatching.this.global.Symbol])(Option[MatchMatrix.this.Row], MatchMatrix.this.FinalState, List[ParallelMatching.this.global.Symbol])">(</span><a href="#553772" title="=&gt; Option[MatchMatrix.this.Row]">rowForPat</a>, <a href="#538994" title="(subst: ParallelMatching.this.Bindings,body: ParallelMatching.this.global.Tree)MatchMatrix.this.FinalState">FinalState</a>(<a href="PatternNodes.scala.html#79545" title="=&gt; ParallelMatching.this.Bindings">NoBinding</a>, <a href="#553765" title="ParallelMatching.this.global.Tree">body</a>), <a href="PatternNodes.scala.html#79538" title="(x: ParallelMatching.this.global.Tree)List[ParallelMatching.this.global.Symbol]">definedVars</a>(<a href="#553763" title="ParallelMatching.this.global.Tree">pat</a>))
        }
      )
      
      <a href="#553634" title="(List[Option[MatchMatrix.this.Row]], List[MatchMatrix.this.FinalState], List[List[ParallelMatching.this.global.Symbol]])">res</a> <span title="(List[MatchMatrix.this.Row], List[MatchMatrix.this.FinalState], List[List[ParallelMatching.this.global.Symbol]])" class="keyword">match</span> { <span title="(List[MatchMatrix.this.Row], List[MatchMatrix.this.FinalState], List[List[ParallelMatching.this.global.Symbol]])" class="keyword">case</span> (<a title="List[Option[MatchMatrix.this.Row]]" id="553970">rows</a>, <a title="List[MatchMatrix.this.FinalState]" id="553971">finals</a>, <a title="List[List[ParallelMatching.this.global.Symbol]]" id="553972">vars</a>) =&gt; <span title="(_1: List[MatchMatrix.this.Row],_2: List[MatchMatrix.this.FinalState],_3: List[List[ParallelMatching.this.global.Symbol]])(List[MatchMatrix.this.Row], List[MatchMatrix.this.FinalState], List[List[ParallelMatching.this.global.Symbol]])">(</span><a href="#553970" title="(f: (Option[MatchMatrix.this.Row]) =&gt; Traversable[MatchMatrix.this.Row])(implicit bf: scala.collection.generic.BuilderFactory[MatchMatrix.this.Row,List[MatchMatrix.this.Row],List[Option[MatchMatrix.this.Row]]])List[MatchMatrix.this.Row]">rows</a> <span title="scala.collection.generic.BuilderFactory[MatchMatrix.this.Row,List[MatchMatrix.this.Row],List#Coll]">flatMap</span> (<a title="Option[MatchMatrix.this.Row]" id="553989">x</a> =&gt; <a href="#553989" title="(xo: Option[MatchMatrix.this.Row])Iterable[MatchMatrix.this.Row]">x</a>), <a href="#553971" title="List[MatchMatrix.this.FinalState]">finals</a>, <a href="#553972" title="List[List[ParallelMatching.this.global.Symbol]]">vars</a>) }
    }

    /** returns the condition in &quot;if (cond) k1 else k2&quot; 
     */
    <span class="keyword">final</span> <span class="keyword">def</span> <a title="(tpe: ParallelMatching.this.global.Type,scrut: MatchMatrix.this.Scrutinee)ParallelMatching.this.global.Tree" id="81402">condition</a>(<a title="ParallelMatching.this.global.Type" id="549938">tpe</a>: <a href="../symtab/Types.scala.html#26364" title="ParallelMatching.this.global.Type">Type</a>, <a title="MatchMatrix.this.Scrutinee" id="549939">scrut</a>: <a href="#541915" title="MatchMatrix.this.Scrutinee">Scrutinee</a>): <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a> = {
      <span title="(assertion: Boolean)Unit">assert</span>(<a href="#549939" title="MatchMatrix.this.Scrutinee">scrut</a>.<a href="#541759" title="=&gt; Boolean">isDefined</a>)
      <span class="keyword">val</span> <a title="ParallelMatching.this.global.Tree" id="554009">cond</a> = <a href="TransMatcher.scala.html#79666" title="(v1: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">handleOuter</a>(<a href="#81403" title="(tpe: ParallelMatching.this.global.Type,scrutTree: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">condition</a>(<a href="#549938" title="ParallelMatching.this.global.Type">tpe</a>, <a href="#549939" title="MatchMatrix.this.Scrutinee">scrut</a>.<a href="#541758" title="=&gt; ParallelMatching.this.global.gen.global.Tree">id</a>))
    
      <span title="ParallelMatching.this.global.Tree" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="../symtab/Types.scala.html#26539" title="(patType: ParallelMatching.this.global.Type,selType: ParallelMatching.this.global.Type,currentOwner: ParallelMatching.this.global.Symbol)Boolean">needsOuterTest</a>(<a href="#549938" title="ParallelMatching.this.global.Type">tpe</a>, <a href="#549939" title="MatchMatrix.this.Scrutinee">scrut</a>.<a href="#541755" title="=&gt; ParallelMatching.this.global.Type">tpe</a>, <a href="TransMatcher.scala.html#79670" title="=&gt; ParallelMatching.this.global.Symbol">owner</a>)) <a href="#554009" title="ParallelMatching.this.global.Tree">cond</a>
      <span class="keyword">else</span> <a href="#81404" title="(cond: ParallelMatching.this.global.Tree,tpe2test: ParallelMatching.this.global.Type,scrut: ParallelMatching.this.global.Tree,handleOuter: (ParallelMatching.this.global.Tree) =&gt; ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">addOuterCondition</a>(<a href="#554009" title="ParallelMatching.this.global.Tree">cond</a>, <a href="#549938" title="ParallelMatching.this.global.Type">tpe</a>, <a href="#549939" title="MatchMatrix.this.Scrutinee">scrut</a>.<a href="#541758" title="=&gt; ParallelMatching.this.global.gen.global.Tree">id</a>, <a href="TransMatcher.scala.html#79666" title="=&gt; (ParallelMatching.this.global.Tree) =&gt; ParallelMatching.this.global.Tree">handleOuter</a>)
    }

    <span class="keyword">final</span> <span class="keyword">def</span> <a title="(tpe: ParallelMatching.this.global.Type,scrutTree: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree" id="81403">condition</a>(<a title="ParallelMatching.this.global.Type" id="549935">tpe</a>: <a href="../symtab/Types.scala.html#26364" title="ParallelMatching.this.global.Type">Type</a>, <a title="ParallelMatching.this.global.Tree" id="549936">scrutTree</a>: <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a>): <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a> = {
      <span title="(assertion: Boolean)Unit">assert</span>(<span title="(x$1: Boolean)Boolean">(</span><a href="#549935" title="(x$1: AnyRef)Boolean">tpe</a> ne <a href="../symtab/Types.scala.html#26383" title="object ParallelMatching.this.global.NoType">NoType</a>) &amp;&amp; (<a href="#549936" title="ParallelMatching.this.global.Tree">scrutTree</a>.<a href="../ast/Trees.scala.html#29549" title="(x$1: AnyRef)Boolean">tpe</a> ne <a href="../symtab/Types.scala.html#26383" title="object ParallelMatching.this.global.NoType">NoType</a>))    
      <span class="keyword">def</span> <a title="=&gt; Boolean" id="554203">useEqTest</a>         = <a href="#549935" title="ParallelMatching.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30365" title="=&gt; ParallelMatching.this.global.Symbol">termSymbol</a>.<a href="../symtab/Symbols.scala.html#27076" title="(x$1: Boolean)Boolean">isModule</a> || (<a href="#549935" title="ParallelMatching.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30376" title="(x$1: AnyRef)Boolean">prefix</a> eq <a href="../symtab/Types.scala.html#26385" title="object ParallelMatching.this.global.NoPrefix">NoPrefix</a>)

      <a href="../typechecker/Typers.scala.html#42872" title="(tree: ParallelMatching.this.global.analyzer.global.Tree)ParallelMatching.this.global.analyzer.global.Tree">typer</a> typed (<a href="#549935" title="ParallelMatching.this.global.Type">tpe</a> <span title="ParallelMatching.this.global.analyzer.global.Tree" class="keyword">match</span> {
        <span title="ParallelMatching.this.global.analyzer.global.Tree" class="keyword">case</span> <a title="ParallelMatching.this.global.ConstantType" id="554227">ct</a>: <a href="../symtab/Types.scala.html#26410" title="ParallelMatching.this.global.ConstantType">ConstantType</a> =&gt; <a href="#554227" title="ParallelMatching.this.global.ConstantType">ct</a>.<a href="../symtab/Types.scala.html#42991" title="=&gt; ParallelMatching.this.global.Constant">value</a> <span title="ParallelMatching.this.global.analyzer.global.Tree" class="keyword">match</span> {
            <span title="ParallelMatching.this.global.Apply" class="keyword">case</span> <a title="ParallelMatching.this.global.Constant" id="554228">v</a> @ Constant(<span title="Null(null)" class="keyword">null</span>) <span class="keyword">if</span> <a href="PatternNodes.scala.html#79506" title="(t: ParallelMatching.this.global.Type)Boolean">isAnyRef</a>(<a href="#549936" title="ParallelMatching.this.global.Tree">scrutTree</a>.<a href="../ast/Trees.scala.html#29549" title="=&gt; ParallelMatching.this.global.Type">tpe</a>)  =&gt; <a href="../ast/TreeDSL.scala.html#45302" title="(other: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Apply">scrutTree</a> ANY_EQ <a href="../ast/TreeDSL.scala.html#42727" title="=&gt; ParallelMatching.this.global.Literal">NULL</a>
            <span title="ParallelMatching.this.global.Apply" class="keyword">case</span> <a title="ParallelMatching.this.global.Constant" id="554264">v</a>                                              =&gt; <a href="../ast/TreeDSL.scala.html#45303" title="(other: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Apply">scrutTree</a> ANY_== <a href="../ast/Trees.scala.html#49595" title="(value: ParallelMatching.this.global.Constant)ParallelMatching.this.global.Literal">Literal</a>(<a href="#554264" title="ParallelMatching.this.global.Constant">v</a>)
          }
        <span title="ParallelMatching.this.global.Tree" class="keyword">case</span> _: <a href="../symtab/Types.scala.html#26375" title="ParallelMatching.this.global.SingletonType">SingletonType</a> <span class="keyword">if</span> <a href="#554203" title="=&gt; Boolean">useEqTest</a>                      =&gt; 
          // See ticket #1503 for why both these checks are necessary.
          <a href="../ast/TreeDSL.scala.html#45300" title="(other: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">(</a><a href="../ast/TreeDSL.scala.html#42765" title="(sym: ParallelMatching.this.global.Symbol)ParallelMatching.this.global.gen.global.Tree">REF</a><a href="../ast/TreeDSL.scala.html#45303" title="(other: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Apply">(</a><a href="#549935" title="ParallelMatching.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30365" title="=&gt; ParallelMatching.this.global.Symbol">termSymbol</a>) <a href="../ast/TreeDSL.scala.html#42770" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeMethods : (target: ParallelMatching.this.global.Tree)ParallelMatching.this.CODE.TreeMethods">ANY_==</a> <a href="#549936" title="ParallelMatching.this.global.Tree">scrutTree</a>) AND (<a href="../ast/TreeDSL.scala.html#45323" title="(tpe: ParallelMatching.this.global.Type)ParallelMatching.this.global.gen.global.Tree">scrutTree</a> IS <a href="#549935" title="ParallelMatching.this.global.Type">tpe</a>.<a href="../symtab/Types.scala.html#30370" title="=&gt; ParallelMatching.this.global.Type">widen</a>)
          
        <span title="ParallelMatching.this.global.Apply" class="keyword">case</span> _ <span class="keyword">if</span> <a href="#549936" title="ParallelMatching.this.global.Tree">scrutTree</a>.<a href="../symtab/Types.scala.html#30421" title="(that: ParallelMatching.this.global.Type)Boolean">tpe</a> <span title="(x$1: Boolean)Boolean">&lt;:&lt;</span> <a href="#549935" title="ParallelMatching.this.global.Type">tpe</a> &amp;&amp; <a href="PatternNodes.scala.html#79506" title="(t: ParallelMatching.this.global.Type)Boolean">isAnyRef</a>(<a href="#549935" title="ParallelMatching.this.global.Type">tpe</a>)        =&gt; <a href="../ast/TreeDSL.scala.html#45306" title="(other: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Apply">scrutTree</a> OBJ_!= <a href="../ast/TreeDSL.scala.html#42727" title="=&gt; ParallelMatching.this.global.Literal">NULL</a>
        <span title="ParallelMatching.this.global.gen.global.Tree" class="keyword">case</span> _                                                  =&gt; <a href="../ast/TreeDSL.scala.html#45323" title="(tpe: ParallelMatching.this.global.Type)ParallelMatching.this.global.gen.global.Tree">scrutTree</a> IS <a href="#549935" title="ParallelMatching.this.global.Type">tpe</a>
      })
    }

    /** adds a test comparing the dynamic outer to the static outer */
    <span class="keyword">final</span> <span class="keyword">def</span> <a title="(cond: ParallelMatching.this.global.Tree,tpe2test: ParallelMatching.this.global.Type,scrut: ParallelMatching.this.global.Tree,handleOuter: (ParallelMatching.this.global.Tree) =&gt; ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree" id="81404">addOuterCondition</a>(<a title="ParallelMatching.this.global.Tree" id="554029">cond</a>: <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a>, <a title="ParallelMatching.this.global.Type" id="554030">tpe2test</a>: <a href="../symtab/Types.scala.html#26364" title="ParallelMatching.this.global.Type">Type</a>, <a title="ParallelMatching.this.global.Tree" id="554031">scrut</a>: <a href="../ast/Trees.scala.html#26752" title="ParallelMatching.this.global.Tree">Tree</a>, <a title="(ParallelMatching.this.global.Tree) =&gt; ParallelMatching.this.global.Tree" id="554032">handleOuter</a>: <span title="(ParallelMatching.this.global.Tree) =&gt; ParallelMatching.this.global.Tree">TreeFunction1</span>) = {
      <span class="keyword">val</span> <a title="ParallelMatching.this.global.Tree" id="554035">theRef</a> = <a href="#554032" title="(v1: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">handleOuter</a>(<a href="#554030" title="ParallelMatching.this.global.Type">tpe2test</a> <span title="ParallelMatching.this.global.Tree" class="keyword">match</span> {
        <span title="Nothing" class="keyword">case</span> TypeRef(<a href="../symtab/Types.scala.html#26385" title="object ParallelMatching.this.global.NoPrefix">NoPrefix</a>, _, _)          =&gt; <a href="../Global.scala.html#39309" title="(msg: String)Nothing">abort</a>(<span title="java.lang.String(&quot;assertion failed: NoPrefix&quot;)" class="string">&quot;assertion failed: NoPrefix&quot;</span>)
        <span title="ParallelMatching.this.global.gen.global.Tree" class="keyword">case</span> TypeRef(ThisType(<a title="ParallelMatching.this.global.Symbol" id="554048">clazz</a>), _, _)   =&gt; <a href="../ast/TreeDSL.scala.html#42763" title="(sym: ParallelMatching.this.global.Symbol)ParallelMatching.this.global.gen.global.Tree">THIS</a>(<a href="#554048" title="ParallelMatching.this.global.Symbol">clazz</a>)
        <span title="ParallelMatching.this.global.gen.global.Tree" class="keyword">case</span> TypeRef(<a title="ParallelMatching.this.global.Type" id="554066">prefix</a>, _, _)            =&gt; <a href="../ast/TreeDSL.scala.html#42766" title="(pre: ParallelMatching.this.global.Type,sym: ParallelMatching.this.global.Symbol)ParallelMatching.this.global.gen.global.Tree">REF</a>(<a href="#554066" title="ParallelMatching.this.global.Type">prefix</a>.<a href="../symtab/Types.scala.html#30376" title="=&gt; ParallelMatching.this.global.Type">prefix</a>, <a href="#554066" title="ParallelMatching.this.global.Type">prefix</a>.<a href="../symtab/Types.scala.html#30365" title="=&gt; ParallelMatching.this.global.Symbol">termSymbol</a>)
      })
    
      <a href="../transform/ExplicitOuter.scala.html#79484" title="(clazz: ParallelMatching.this.global.Symbol)ParallelMatching.this.global.Symbol">outerAccessor</a>(<a href="#554030" title="ParallelMatching.this.global.Type">tpe2test</a>.<a href="../symtab/Types.scala.html#30366" title="=&gt; ParallelMatching.this.global.Symbol">typeSymbol</a>) <span title="ParallelMatching.this.global.Tree" class="keyword">match</span> {
        <span title="ParallelMatching.this.global.Tree" class="keyword">case</span> <a href="../symtab/Symbols.scala.html#26293" title="object ParallelMatching.this.global.NoSymbol">NoSymbol</a> =&gt; <a href="#79572" title="(body: =&gt; Unit)Unit">ifDebug</a>(<a href="TransMatcher.scala.html#79456" title="=&gt; ParallelMatching.this.global.CompilationUnit">cunit</a>.<a href="../CompilationUnits.scala.html#45688" title="(pos: scala.tools.nsc.util.Position,msg: String)Unit">warning</a>(<a href="#554031" title="ParallelMatching.this.global.Tree">scrut</a>.<a href="../ast/Trees.scala.html#29547" title="=&gt; scala.tools.nsc.util.Position">pos</a>, <span title="(x$1: Any)java.lang.String" class="string">&quot;no outer acc for &quot;</span> + <a href="#554030" title="ParallelMatching.this.global.Type">tpe2test</a>.<a href="../symtab/Types.scala.html#30366" title="=&gt; ParallelMatching.this.global.Symbol">typeSymbol</a>)) ; <a href="#554029" title="ParallelMatching.this.global.Tree">cond</a>
        <span title="ParallelMatching.this.global.Tree" class="keyword">case</span> <a title="ParallelMatching.this.global.Symbol" id="554095">outerAcc</a> =&gt; <a href="../ast/TreeDSL.scala.html#45300" title="(other: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Tree">cond</a> AND ((<a href="../ast/TreeDSL.scala.html#45317" title="(sym: ParallelMatching.this.global.Symbol)ParallelMatching.this.CODE.SelectStart">(</a><a href="../ast/TreeDSL.scala.html#45321" title="(tpe: ParallelMatching.this.global.Type)ParallelMatching.this.global.gen.global.Tree">scrut</a> <a href="../ast/TreeDSL.scala.html#42770" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeMethods : (target: ParallelMatching.this.global.Tree)ParallelMatching.this.CODE.TreeMethods">AS_ANY</a> <a href="#554030" title="ParallelMatching.this.global.Type">tpe2test</a>) <a href="../ast/TreeDSL.scala.html#44955" title="(args: ParallelMatching.this.global.Tree*)ParallelMatching.this.global.Apply">DOT</a> <a href="#554095" title="ParallelMatching.this.global.Symbol">outerAcc</a>)<a href="../ast/TreeDSL.scala.html#45302" title="(other: ParallelMatching.this.global.Tree)ParallelMatching.this.global.Apply">(</a>) ANY_EQ <a href="#554035" title="ParallelMatching.this.global.Tree">theRef</a>)
      }
    }
  }
}

        </pre>
    </body>
</html>