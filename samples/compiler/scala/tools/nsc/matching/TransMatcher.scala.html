<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/tools/nsc/matching/TransMatcher.scala</title>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style">
    </head>
    <body onload="initializeLinked()">
        <pre>
<span class="comment">/* NSC -- new Scala compiler
 * Copyright 2005-2009 LAMP/EPFL
 * Copyright 2007 Google Inc. All Rights Reserved.
 * Author: bqe@google.com (Burak Emir)
 */</span>
<span class="comment">// $Id: TransMatcher.scala 17315 2009-03-16 17:46:58Z extempore $</span>

<span class="keyword">package</span> scala.tools.nsc.matching

<span class="comment">/** Translation of pattern matching
 *
 *  @author Burak Emir
 */</span>
<span class="keyword">trait</span> <span class="typed"><span class="type">trait TransMatcher extends java.lang.Object with ScalaObject</span><a id="7795">TransMatcher</a></span> { self: transform.ExplicitOuter <span class="keyword">with</span> PatternNodes <span class="keyword">with</span> ParallelMatching <span class="keyword">with</span> CodeFactory =&gt; 

  <span class="keyword">import</span> global.{ typer =&gt; _, _ }
  <span class="keyword">import</span> analyzer.Typer;
  <span class="keyword">import</span> definitions._
  <span class="keyword">import</span> symtab.Flags

  <span class="keyword">var</span> <span class="typed"><span class="type">TransMatcher.this.global.CompilationUnit</span><span id="29505"><span id="29503"><span id="29504"><a id="52561">cunit</a></span></span></span></span>: <span class="typed"><span class="type">TransMatcher.this.global.CompilationUnit</span><a href="../CompilationUnits.scala.html#22571">CompilationUnit</a></span> = _  <span class="comment">// memory leak?</span>
  <span class="keyword">var</span> <span class="typed"><span class="type">TransMatcher.this.global.Type</span><span id="29508"><span id="29506"><span id="29507"><a id="52562">resultType</a></span></span></span></span>: <span class="typed"><span class="type">TransMatcher.this.global.Type</span><a href="../symtab/Types.scala.html#21944">Type</a></span> = _

  <span class="comment">// cache these</span>
  <span class="keyword">final</span> <span class="keyword">val</span> <span class="typed"><span class="type">scala.tools.nsc.Settings.BooleanSetting#T</span><span id="29510"><a id="29509">settings_debug</a></span></span>       = <span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="../Global.scala.html#21157">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting</span><a href="../Settings.scala.html#30066">debug</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.BooleanSetting#T</span><a href="../Settings.scala.html#30301">value</a></span>
  <span class="keyword">final</span> <span class="keyword">val</span> <span class="typed"><span class="type">Boolean</span><span id="29512"><a id="29511">settings_squeeze</a></span></span>     = <span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings</span><a href="../Global.scala.html#21157">settings</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.ChoiceSetting</span><a href="../Settings.scala.html#30092">Xsqueeze</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.Settings.ChoiceSetting#T</span><a href="../Settings.scala.html#30301">value</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3509">==</a></span> <span class="typed"><span class="type">java.lang.String(&quot;on&quot;)</span><span class="string">&quot;on&quot;</span></span>

  <span class="comment">// check special case Seq(p1,...,pk,_*) </span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <span class="typed"><span class="type">(TransMatcher.this.global.ArrayValue)Boolean</span><a id="29513">isRightIgnoring</a></span>(<span class="typed"><span class="type">TransMatcher.this.global.ArrayValue</span><a id="52691">p</a></span>: <span class="typed"><span class="type">TransMatcher.this.global.ArrayValue</span><a href="../ast/Trees.scala.html#22457">ArrayValue</a></span>): <span class="typed"><span class="type">Boolean</span><a id="2170">Boolean</a></span> = {
    <span class="keyword">def</span> <span class="typed"><span class="type">(TransMatcher.this.global.Tree)Boolean</span><a id="52692">isDefaultStar</a></span>(<span class="typed"><span class="type">TransMatcher.this.global.Tree</span><a id="52693">tree</a></span>: <span class="typed"><span class="type">TransMatcher.this.global.Tree</span><a href="../ast/Trees.scala.html#22371">Tree</a></span>): <span class="typed"><span class="type">Boolean</span><a id="2170">Boolean</a></span> = <span class="typed"><span class="type">TransMatcher.this.global.Tree</span><a href="#52693">tree</a></span> <span class="typed"><span class="type">Boolean</span><span class="keyword">match</span></span> {
      <span class="typed"><span class="type">Boolean</span><span class="keyword">case</span></span> <a id="1">Bind</a>(_, <span class="typed"><span class="type">TransMatcher.this.global.Tree</span><a id="52695">q</a></span>)                 =&gt; <span class="typed"><span class="type">(TransMatcher.this.global.Tree)Boolean</span><a href="#52692">isDefaultStar</a></span>(<span class="typed"><span class="type">TransMatcher.this.global.Tree</span><a href="#52695">q</a></span>)
      <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">case</span></span> <a id="1">Star</a>(<a id="1">Ident</a>(<span class="typed"><span class="type">object TransMatcher.this.global.nme</span><a href="../symtab/StdNames.scala.html#22317">nme</a></span>.<span class="typed"><span class="type">=&gt; TransMatcher.this.global.Name</span><a href="../symtab/StdNames.scala.html#30595">WILDCARD</a></span>))  =&gt; <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>
      <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">case</span></span> _                          =&gt; <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>
    }

    <span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">TransMatcher.this.global.ArrayValue</span><a href="#52691">p</a></span>.<span class="typed"><span class="type">=&gt; List[TransMatcher.this.global.Tree]</span><a href="../ast/Trees.scala.html#31379">elems</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a id="21645">isEmpty</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">(TransMatcher.this.global.Tree)Boolean</span><a href="#52692">isDefaultStar</a></span>(<span class="typed"><span class="type">TransMatcher.this.global.ArrayValue</span><a href="#52691">p</a></span>.<span class="typed"><span class="type">=&gt; List[TransMatcher.this.global.Tree]</span><a href="../ast/Trees.scala.html#31379">elems</a></span>.<span class="typed"><span class="type">=&gt; TransMatcher.this.global.Tree</span><a id="21350">last</a></span>)
  }

  <span class="comment">/** handles all translation of pattern matching
   */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">(TransMatcher.this.global.Tree,List[TransMatcher.this.global.CaseDef],Boolean,TransMatcher.this.global.Symbol,(TransMatcher.this.global.Tree) =&gt; TransMatcher.this.global.Tree)(implicit TransMatcher.this.global.analyzer.Typer)TransMatcher.this.global.Tree</span><a id="29514">handlePattern</a></span>(
    <span class="typed"><span class="type">TransMatcher.this.global.Tree</span><a id="52515">selector</a></span>: <span class="typed"><span class="type">TransMatcher.this.global.Tree</span><a href="../ast/Trees.scala.html#22371">Tree</a></span>,
    <span class="typed"><span class="type">List[TransMatcher.this.global.CaseDef]</span><a id="52516">cases</a></span>: <span class="typed"><span class="type">List[TransMatcher.this.global.CaseDef]</span><a id="526">List</a></span>[CaseDef],
    <span class="typed"><span class="type">Boolean</span><a id="52517">doCheckExhaustive</a></span>: <span class="typed"><span class="type">Boolean</span><a id="2170">Boolean</a></span>,
    <span class="typed"><span class="type">TransMatcher.this.global.Symbol</span><a id="52518">owner</a></span>: <span class="typed"><span class="type">TransMatcher.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#21866">Symbol</a></span>,
    <span class="typed"><span class="type">(TransMatcher.this.global.Tree) =&gt; TransMatcher.this.global.Tree</span><a id="52519">handleOuter</a></span>: Tree =&gt; Tree)
    (<span class="keyword">implicit</span> <span class="typed"><span class="type">TransMatcher.this.global.analyzer.Typer</span><a id="52520">typer</a></span> : <span class="typed"><span class="type">TransMatcher.this.global.analyzer.Typer</span><a href="../typechecker/Typers.scala.html#28453">Typer</a></span>): <span class="typed"><span class="type">TransMatcher.this.global.Tree</span><a href="../ast/Trees.scala.html#22371">Tree</a></span> =
  {
    <span class="typed"><span class="type">(=&gt; String)Unit</span><a href="PatternNodes.scala.html#29407">DBG</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;****&quot;)</span><span class="string">&quot;****&quot;</span></span>)
    <span class="typed"><span class="type">(=&gt; String)Unit</span><a href="PatternNodes.scala.html#29407">DBG</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;**** initalize, selector = &quot;)</span><span class="string">&quot;**** initalize, selector = &quot;</span></span><span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span><span class="typed"><span class="type">TransMatcher.this.global.Tree</span><a href="#52515">selector</a></span><span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span><span class="typed"><span class="type">java.lang.String(&quot; selector.tpe = &quot;)</span><span class="string">&quot; selector.tpe = &quot;</span></span><span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span><span class="typed"><span class="type">TransMatcher.this.global.Tree</span><a href="#52515">selector</a></span>.<span class="typed"><span class="type">=&gt; TransMatcher.this.global.Type</span><a href="../ast/Trees.scala.html#25354">tpe</a></span>)
    <span class="typed"><span class="type">(=&gt; String)Unit</span><a href="PatternNodes.scala.html#29407">DBG</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;****    doCheckExhaustive == &quot;)</span><span class="string">&quot;****    doCheckExhaustive == &quot;</span></span><span class="typed"><span class="type">(Any)java.lang.String</span><a id="5802">+</a></span><span class="typed"><span class="type">Boolean</span><a href="#52517">doCheckExhaustive</a></span>)
    
    <span class="keyword">implicit</span> <span class="keyword">val</span> <span class="typed"><span class="type">TransMatcher.this.global.Symbol</span><a id="52697">theOwner</a></span> = <span class="typed"><span class="type">TransMatcher.this.global.Symbol</span><a href="#52518">owner</a></span>
    <span class="keyword">implicit</span> <span class="keyword">val</span> <span class="typed"><span class="type">TransMatcher.this.RepFactory</span><a id="52698">rep</a></span> = <span class="typed"><span class="type">TransMatcher.this.RepFactory</span><a href="#52520" class="keyword">new</a></span> <span class="typed"><span class="type">TransMatcher.this.RepFactory</span><a href="ParallelMatching.scala.html#29589">RepFactory</a></span>(<span class="typed"><span class="type">(TransMatcher.this.global.Tree) =&gt; TransMatcher.this.global.Tree</span><a href="#52519">handleOuter</a></span>)
    <span class="keyword">val</span> <span class="typed"><span class="type">List[Long]</span><a id="52699">flags</a></span> = <span class="typed"><span class="type">List[Long]</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Boolean</span><a href="#52517">doCheckExhaustive</a></span>) <span class="typed"><span class="type">object Nil</span><a id="335">Nil</a></span> <span class="keyword">else</span> <span class="typed"><span class="type">(Long*)List[Long]</span><span id="21328"><a id="527">List</a></span></span>(Flags.<span class="typed"><span class="type">Long(274877906944L)</span><span >TRANS_FLAG</span></span>)
    
    <span class="keyword">def</span> <span class="typed"><span class="type">(TransMatcher.this.global.CaseDef)Boolean</span><a id="52700">caseIsOk</a></span>(<span class="typed"><span class="type">TransMatcher.this.global.CaseDef</span><a id="52749">c</a></span>: <span class="typed"><span class="type">TransMatcher.this.global.CaseDef</span><a href="../ast/Trees.scala.html#22437">CaseDef</a></span>) = <span class="typed"><span class="type">TransMatcher.this.global.CaseDef</span><a href="#52749">c</a></span> <span class="typed"><span class="type">Boolean</span><span class="keyword">match</span></span> {
      <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">case</span></span> <a id="1">CaseDef</a>(_: <span class="typed"><span class="type">TransMatcher.this.global.Apply</span><a href="../ast/Trees.scala.html#22492">Apply</a></span>, _, _)            =&gt; <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>
      <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">case</span></span> <a id="1">CaseDef</a>(<a id="1">Ident</a>(<span class="typed"><span class="type">object TransMatcher.this.global.nme</span><a href="../symtab/StdNames.scala.html#22317">nme</a></span>.<span class="typed"><span class="type">=&gt; TransMatcher.this.global.Name</span><a href="../symtab/StdNames.scala.html#30595">WILDCARD</a></span>), _, _) =&gt; <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>
      <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">case</span></span> _                                  =&gt; <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>
    }
    <span class="keyword">def</span> <span class="typed"><span class="type">(TransMatcher.this.global.Tree)Boolean</span><a id="52701">doApply</a></span>(<span class="typed"><span class="type">TransMatcher.this.global.Tree</span><a id="52753">fn</a></span>: <span class="typed"><span class="type">TransMatcher.this.global.Tree</span><a href="../ast/Trees.scala.html#22371">Tree</a></span>) = (<span class="typed"><span class="type">TransMatcher.this.global.Tree</span><a href="#52753">fn</a></span>.<span class="typed"><span class="type">=&gt; TransMatcher.this.global.Symbol</span><a href="../ast/Trees.scala.html#25358">symbol</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5794">eq</a></span> <span class="typed"><span class="type">TransMatcher.this.global.Tree</span><a href="#52515">selector</a></span>.<span class="typed"><span class="type">=&gt; TransMatcher.this.global.Type</span><a href="../ast/Trees.scala.html#25354">tpe</a></span>.<span class="typed"><span class="type">=&gt; TransMatcher.this.global.Scope</span><a href="../symtab/Types.scala.html#25677">decls</a></span>.<span class="typed"><span class="type">(TransMatcher.this.global.Name)TransMatcher.this.global.Symbol</span><a href="../symtab/Scopes.scala.html#34624">lookup</a></span>(<span class="typed"><span class="type">object TransMatcher.this.global.nme</span><a href="../symtab/StdNames.scala.html#22317">nme</a></span>.<span class="typed"><span class="type">=&gt; TransMatcher.this.global.Name</span><a href="../symtab/StdNames.scala.html#30639">CONSTRUCTOR</a></span>)) <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> (<span class="typed"><span class="type">List[TransMatcher.this.global.CaseDef]</span><a href="#52516">cases</a></span> <span class="typed"><span class="type">((TransMatcher.this.global.CaseDef) =&gt; Boolean)Boolean</span><a id="21372">forall</a></span> <span class="typed"><span class="type">(TransMatcher.this.global.CaseDef)Boolean</span><a href="#52700">caseIsOk</a></span>)
    
    <span class="keyword">def</span> <span class="typed"><span class="type">(TransMatcher.this.global.Apply)(List[TransMatcher.this.global.Symbol], List[TransMatcher.this.global.Tree], TransMatcher.this.global.Tree)</span><a id="52702">processApply</a></span>(<span class="typed"><span class="type">TransMatcher.this.global.Apply</span><a id="52756">app</a></span>: <span class="typed"><span class="type">TransMatcher.this.global.Apply</span><a href="../ast/Trees.scala.html#22492">Apply</a></span>): <span class="typed"><span class="type">(List[TransMatcher.this.global.Symbol], List[TransMatcher.this.global.Tree], TransMatcher.this.global.Tree)</span><a id="448">(</a></span>List[Symbol], List[Tree], Tree) = {
      <span class="keyword">val</span> <span class="typed"><span class="type">(TransMatcher.this.global.Tree, List[TransMatcher.this.global.Tree])</span><span id="23625"><a href="#52763" id="1379">Apply</a></span></span>(<span class="typed"><span class="type">TransMatcher.this.global.Tree</span><span id="52763"><span id="52758"><a href="#52757" id="23614">fn</a></span></span></span>, <span class="typed"><span class="type">List[TransMatcher.this.global.Tree]</span><span id="52764"><span id="52759"><a href="#52757" id="23616">args</a></span></span></span>) = <span class="typed"><span class="type">TransMatcher.this.global.Apply</span><a href="#52756">app</a></span>
      <span class="keyword">val</span> <span class="typed"><span class="type">(List[TransMatcher.this.global.Symbol], List[TransMatcher.this.global.analyzer.global.Tree])</span><span id="23625"><a href="#52855" id="1379">(</a></span></span><span class="typed"><span class="type">List[TransMatcher.this.global.Symbol]</span><span id="52855"><span id="52761"><a href="#52760" id="23614">tmps</a></span></span></span>, <span class="typed"><span class="type">List[TransMatcher.this.global.analyzer.global.Tree]</span><span id="52856"><span id="52762"><a href="#52760" id="23616">vds</a></span></span></span>) = <span class="typed"><span class="type">object List</span><a id="527">List</a></span>.<span class="typed"><span class="type">(List[(TransMatcher.this.global.Symbol, TransMatcher.this.global.analyzer.global.Tree)])(List[TransMatcher.this.global.Symbol], List[TransMatcher.this.global.analyzer.global.Tree])</span><a id="21423">unzip</a></span>(
        <span class="keyword">for</span> (<span class="typed"><span class="type">(((TransMatcher.this.global.Tree, Int)) =&gt; (TransMatcher.this.global.Symbol, TransMatcher.this.global.analyzer.global.Tree))List[(TransMatcher.this.global.Symbol, TransMatcher.this.global.analyzer.global.Tree)]</span><span id="21362"><a href="#52774" id="21367">(</a></span></span><span class="typed"><span class="type">TransMatcher.this.global.Tree</span><span id="52775"><a id="52781">ti</a></span></span>, <span class="typed"><span class="type">Int</span><span id="52776"><a id="52782">i</a></span></span>) &lt;- <span class="typed"><span class="type">List[TransMatcher.this.global.Tree]</span><a href="#52759">args</a></span>.<span class="typed"><span class="type">=&gt; List[(TransMatcher.this.global.Tree, Int)]</span><a id="21388">zipWithIndex</a></span>) <span class="keyword">yield</span> {
          <span class="comment">// These type parameter vars were not being set as synthetic.</span>
          <span class="comment">// Temporarily noted on the off chance it was intentional.</span>
          <span class="keyword">val</span> <span class="typed"><span class="type">TransMatcher.this.global.Symbol</span><a id="52783">v</a></span> = <span class="typed"><span class="type">(scala.tools.nsc.util.Position,TransMatcher.this.global.Name,TransMatcher.this.global.Type,List[Long])(implicit TransMatcher.this.global.Symbol)TransMatcher.this.global.Symbol</span><a href="ParallelMatching.scala.html#29594">newVar</a></span>(<span class="typed"><span class="type">TransMatcher.this.global.Tree</span><a href="#52781">ti</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.util.Position</span><a href="../ast/Trees.scala.html#25352">pos</a></span>, <span class="typed"><span class="type">=&gt; TransMatcher.this.global.CompilationUnit</span><a href="#29503">cunit</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.util.FreshNameCreator</span><a href="../CompilationUnits.scala.html#24130">fresh</a></span>.<span class="typed"><span class="type">implicit scala.tools.nsc.symtab.Names.view : (String)TransMatcher.this.global.Name</span><a href="../symtab/Names.scala.html#21102">newName</a></span>(<span class="typed"><span class="type">TransMatcher.this.global.Tree</span><a href="#52781">ti</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.util.Position</span><a href="../ast/Trees.scala.html#25352">pos</a></span>, <span class="typed"><span class="type">java.lang.String(&quot;tp&quot;)</span><span class="string">&quot;tp&quot;</span></span>), <span class="typed"><span class="type">TransMatcher.this.global.Tree</span><a href="#52515">selector</a></span>.<span class="typed"><span class="type">=&gt; TransMatcher.this.global.Type</span><a href="../ast/Trees.scala.html#25354">tpe</a></span>.<span class="typed"><span class="type">(Int)TransMatcher.this.global.Type</span><a href="../symtab/Types.scala.html#25662" id="21361">typeArgs</a></span>(<span class="typed"><span class="type">Int</span><a href="#52782">i</a></span>), <span class="typed"><span class="type">List[Long]</span><a href="#52699">flags</a></span>)
          <span class="typed"><span class="type">(TransMatcher.this.global.Symbol,TransMatcher.this.global.analyzer.global.Tree)(TransMatcher.this.global.Symbol, TransMatcher.this.global.analyzer.global.Tree)</span><span id="23625"><a id="1379">(</a></span></span><span class="typed"><span class="type">TransMatcher.this.global.Symbol</span><a href="#52783">v</a></span>, <span class="typed"><span class="type">(TransMatcher.this.global.Symbol,TransMatcher.this.global.Tree)(implicit TransMatcher.this.global.analyzer.Typer)TransMatcher.this.global.analyzer.global.Tree</span><a href="CodeFactory.scala.html#29526">typedValDef</a></span>(<span class="typed"><span class="type">TransMatcher.this.global.Symbol</span><a href="#52783">v</a></span>, <span class="typed"><span class="type">TransMatcher.this.global.Tree</span><a href="#52781">ti</a></span>))
        }
      )
      <span class="typed"><span class="type">(List[TransMatcher.this.global.Symbol],List[TransMatcher.this.global.analyzer.global.Tree],TransMatcher.this.global.Throw)(List[TransMatcher.this.global.Symbol], List[TransMatcher.this.global.analyzer.global.Tree], TransMatcher.this.global.Throw)</span><span id="23590"><a id="449">(</a></span></span><span class="typed"><span class="type">List[TransMatcher.this.global.Symbol]</span><a href="#52761">tmps</a></span>, <span class="typed"><span class="type">List[TransMatcher.this.global.analyzer.global.Tree]</span><a href="#52762">vds</a></span>, <span class="typed"><span class="type">(scala.tools.nsc.util.Position,TransMatcher.this.global.Tree)TransMatcher.this.global.Throw</span><a href="CodeFactory.scala.html#29540">ThrowMatchError</a></span>(<span class="typed"><span class="type">TransMatcher.this.global.Tree</span><a href="#52515">selector</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.util.Position</span><a href="../ast/Trees.scala.html#25352">pos</a></span>, <span class="typed"><span class="type">=&gt; TransMatcher.this.global.LazyTreeCopier</span><a href="../ast/Trees.scala.html#22362">copy</a></span>.<span class="typed"><span class="type">(TransMatcher.this.global.Tree,TransMatcher.this.global.Tree,List[TransMatcher.this.global.Tree])TransMatcher.this.global.Apply</span><a href="../ast/Trees.scala.html#43631">Apply</a></span>(<span class="typed"><span class="type">TransMatcher.this.global.Apply</span><a href="#52756">app</a></span>, <span class="typed"><span class="type">TransMatcher.this.global.Tree</span><a href="#52758">fn</a></span>, <span class="typed"><span class="type">List[TransMatcher.this.global.Symbol]</span><a href="#52761">tmps</a></span> <span class="typed"><span class="type">((TransMatcher.this.global.Symbol) =&gt; TransMatcher.this.global.Ident)List[TransMatcher.this.global.Ident]</span><a id="21362">map</a></span> <span class="typed"><span class="type">(TransMatcher.this.global.Symbol)TransMatcher.this.global.Ident</span><a href="CodeFactory.scala.html#29527">mkIdent</a></span>)))
    }
      
    <span class="comment">// sets temporaries, variable declarations, and the fail tree</span>
    <span class="keyword">val</span> <span class="typed"><span class="type">(List[TransMatcher.this.global.Symbol], List[TransMatcher.this.global.Tree], TransMatcher.this.global.Tree)</span><span id="23590"><a href="#52896" id="449">(</a></span></span><span class="typed"><span class="type">List[TransMatcher.this.global.Symbol]</span><span id="52896"><span id="52704"><a href="#52703" id="23578">tmps</a></span></span></span>, <span class="typed"><span class="type">List[TransMatcher.this.global.Tree]</span><span id="52897"><span id="52705"><a href="#52703" id="23580">vds</a></span></span></span>, <span class="typed"><span class="type">TransMatcher.this.global.Tree</span><span id="52898"><span id="52706"><a href="#52703" id="23582">theFailTree</a></span></span></span>) = <span class="typed"><span class="type">TransMatcher.this.global.Tree</span><a href="#52515">selector</a></span> <span class="typed"><span class="type">(List[TransMatcher.this.global.Symbol], List[TransMatcher.this.global.Tree], TransMatcher.this.global.Tree)</span><span class="keyword">match</span></span> {
      <span class="typed"><span class="type">(List[TransMatcher.this.global.Symbol], List[TransMatcher.this.global.Tree], TransMatcher.this.global.Tree)</span><span class="keyword">case</span></span> <span class="typed"><span class="type">TransMatcher.this.global.Apply</span><a id="52878">app</a></span> @ <a id="1">Apply</a>(<span class="typed"><span class="type">TransMatcher.this.global.Tree</span><a id="52879">fn</a></span>, _) <span class="keyword">if</span> <span class="typed"><span class="type">(TransMatcher.this.global.Type)Boolean</span><a href="../symtab/Definitions.scala.html#25966">isTupleType</a></span>(<span class="typed"><span class="type">TransMatcher.this.global.Tree</span><a href="#52515">selector</a></span>.<span class="typed"><span class="type">=&gt; TransMatcher.this.global.Type</span><a href="../ast/Trees.scala.html#25354">tpe</a></span>) <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2751">&amp;&amp;</a></span> <span class="typed"><span class="type">(TransMatcher.this.global.Tree)Boolean</span><a href="#52701">doApply</a></span>(<span class="typed"><span class="type">TransMatcher.this.global.Tree</span><a href="#52879">fn</a></span>) =&gt; <span class="typed"><span class="type">(TransMatcher.this.global.Apply)(List[TransMatcher.this.global.Symbol], List[TransMatcher.this.global.Tree], TransMatcher.this.global.Tree)</span><a href="#52702">processApply</a></span>(<span class="typed"><span class="type">TransMatcher.this.global.Apply</span><a href="#52878">app</a></span>)
      <span class="typed"><span class="type">(List[TransMatcher.this.global.Symbol], List[TransMatcher.this.global.Tree], TransMatcher.this.global.Tree)</span><span class="keyword">case</span></span> _ =&gt; 
        <span class="keyword">val</span> <span class="typed"><span class="type">TransMatcher.this.global.Symbol</span><a id="52881">root</a></span>: <span class="typed"><span class="type">TransMatcher.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#21866">Symbol</a></span>      = <span class="typed"><span class="type">(scala.tools.nsc.util.Position,TransMatcher.this.global.Type,List[Long])(implicit TransMatcher.this.global.Symbol)TransMatcher.this.global.Symbol</span><a href="ParallelMatching.scala.html#29595">newVar</a></span>(<span class="typed"><span class="type">TransMatcher.this.global.Tree</span><a href="#52515">selector</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.util.Position</span><a href="../ast/Trees.scala.html#25352">pos</a></span>, <span class="typed"><span class="type">TransMatcher.this.global.Tree</span><a href="#52515">selector</a></span>.<span class="typed"><span class="type">=&gt; TransMatcher.this.global.Type</span><a href="../ast/Trees.scala.html#25354">tpe</a></span>, <span class="typed"><span class="type">List[Long]</span><a href="#52699">flags</a></span>)
        <span class="keyword">val</span> <span class="typed"><span class="type">TransMatcher.this.global.Tree</span><a id="52882">vdef</a></span>: <span class="typed"><span class="type">TransMatcher.this.global.Tree</span><a href="../ast/Trees.scala.html#22371">Tree</a></span>        = <span class="typed"><span class="type">TransMatcher.this.global.analyzer.Typer</span><a href="#52520">typer</a></span>.<span class="typed"><span class="type">(TransMatcher.this.global.analyzer.global.Tree)TransMatcher.this.global.analyzer.global.Tree</span><a href="../typechecker/Typers.scala.html#31830">typed</a></span>(<span class="typed"><span class="type">(TransMatcher.this.global.Symbol,TransMatcher.this.global.Tree)TransMatcher.this.global.ValDef</span><a href="../ast/Trees.scala.html#22401">ValDef</a></span>(<span class="typed"><span class="type">TransMatcher.this.global.Symbol</span><a href="#52881">root</a></span>, <span class="typed"><span class="type">TransMatcher.this.global.Tree</span><a href="#52515">selector</a></span>))
        <span class="keyword">val</span> <span class="typed"><span class="type">TransMatcher.this.global.Tree</span><a id="52883">failTree</a></span>: <span class="typed"><span class="type">TransMatcher.this.global.Tree</span><a href="../ast/Trees.scala.html#22371">Tree</a></span>    = <span class="typed"><span class="type">(scala.tools.nsc.util.Position,TransMatcher.this.global.Tree)TransMatcher.this.global.Throw</span><a href="CodeFactory.scala.html#29540">ThrowMatchError</a></span>(<span class="typed"><span class="type">TransMatcher.this.global.Tree</span><a href="#52515">selector</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.util.Position</span><a href="../ast/Trees.scala.html#25352">pos</a></span>, <span class="typed"><span class="type">(TransMatcher.this.global.Symbol)TransMatcher.this.global.Ident</span><a href="CodeFactory.scala.html#29527">mkIdent</a></span>(<span class="typed"><span class="type">TransMatcher.this.global.Symbol</span><a href="#52881">root</a></span>))
        <span class="typed"><span class="type">(List[TransMatcher.this.global.Symbol],List[TransMatcher.this.global.Tree],TransMatcher.this.global.Tree)(List[TransMatcher.this.global.Symbol], List[TransMatcher.this.global.Tree], TransMatcher.this.global.Tree)</span><span id="23590"><a id="449">(</a></span></span><span class="typed"><span class="type">(TransMatcher.this.global.Symbol*)List[TransMatcher.this.global.Symbol]</span><span id="21328"><a id="527">List</a></span></span>(<span class="typed"><span class="type">TransMatcher.this.global.Symbol</span><a href="#52881">root</a></span>), <span class="typed"><span class="type">(TransMatcher.this.global.Tree*)List[TransMatcher.this.global.Tree]</span><span id="21328"><a id="527">List</a></span></span>(<span class="typed"><span class="type">TransMatcher.this.global.Tree</span><a href="#52882">vdef</a></span>), <span class="typed"><span class="type">TransMatcher.this.global.Tree</span><a href="#52883">failTree</a></span>)
    }
    
    <span class="keyword">implicit</span> <span class="keyword">val</span> <span class="typed"><span class="type">TransMatcher.this.global.Tree</span><a id="52707">fail</a></span>: <span class="typed"><span class="type">TransMatcher.this.global.Tree</span><a href="../ast/Trees.scala.html#22371">Tree</a></span> = <span class="typed"><span class="type">TransMatcher.this.global.Tree</span><a href="#52706">theFailTree</a></span>
    <span class="keyword">val</span> <span class="typed"><span class="type">TransMatcher.this.Rep</span><a id="52708">irep</a></span>                = <span class="typed"><span class="type">(List[TransMatcher.this.global.Symbol],List[TransMatcher.this.global.Tree],TransMatcher.this.RepFactory)(implicit TransMatcher.this.global.Symbol)TransMatcher.this.Rep</span><a href="ParallelMatching.scala.html#29593">initRep</a></span>(<span class="typed"><span class="type">List[TransMatcher.this.global.Symbol]</span><a href="#52704">tmps</a></span>, <span class="typed"><span class="type">List[TransMatcher.this.global.CaseDef]</span><a href="#52516">cases</a></span>, <span class="typed"><span class="type">TransMatcher.this.RepFactory</span><a href="#52698">rep</a></span>)
    <span class="keyword">val</span> <span class="typed"><span class="type">TransMatcher.this.global.analyzer.global.Tree</span><a id="52709">mch</a></span>                 = <span class="typed"><span class="type">TransMatcher.this.global.analyzer.Typer</span><a href="#52520">typer</a></span>.<span class="typed"><span class="type">(TransMatcher.this.global.analyzer.global.Tree)TransMatcher.this.global.analyzer.global.Tree</span><a href="../typechecker/Typers.scala.html#31830">typed</a></span>(<span class="typed"><span class="type">TransMatcher.this.Rep</span><a href="#52708">irep</a></span>.<span class="typed"><span class="type">(implicit TransMatcher.this.global.Symbol,TransMatcher.this.global.Tree,TransMatcher.this.RepFactory)TransMatcher.this.global.Tree</span><a href="ParallelMatching.scala.html#53027">toTree</a></span>)
    <span class="keyword">var</span> <span class="typed"><span class="type">TransMatcher.this.global.analyzer.global.Tree</span><a id="52710">dfatree</a></span>             = <span class="typed"><span class="type">TransMatcher.this.global.analyzer.Typer</span><a href="#52520">typer</a></span>.<span class="typed"><span class="type">(TransMatcher.this.global.analyzer.global.Tree)TransMatcher.this.global.analyzer.global.Tree</span><a href="../typechecker/Typers.scala.html#31830">typed</a></span>(<span class="typed"><span class="type">(List[TransMatcher.this.global.Tree],TransMatcher.this.global.Tree)TransMatcher.this.global.Block</span><a href="../ast/Trees.scala.html#42662">Block</a></span>(<span class="typed"><span class="type">List[TransMatcher.this.global.Tree]</span><a href="#52705">vds</a></span>, <span class="typed"><span class="type">TransMatcher.this.global.analyzer.global.Tree</span><a href="#52709">mch</a></span>))

    <span class="comment">// cannot use squeezedBlock because of side-effects, see t275     </span>
    <span class="keyword">for</span> (<span class="typed"><span class="type">(((TransMatcher.this.global.CaseDef, Int)) =&gt; Unit)Unit</span><span id="21366"><a href="#53045" id="21367">(</a></span></span><span class="typed"><span class="type">TransMatcher.this.global.CaseDef</span><span id="53046"><a id="53051">cs</a></span></span>, <span class="typed"><span class="type">Int</span><span id="53047"><a id="53052">bx</a></span></span>) &lt;- <span class="typed"><span class="type">List[TransMatcher.this.global.CaseDef]</span><a href="#52516">cases</a></span>.<span class="typed"><span class="type">=&gt; List[(TransMatcher.this.global.CaseDef, Int)]</span><a id="21388">zipWithIndex</a></span>)
      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a id="2747">!</a></span><span class="typed"><span class="type">TransMatcher.this.RepFactory</span><a href="#52698">rep</a></span>.<span class="typed"><span class="type">(Int)Boolean</span><a href="ParallelMatching.scala.html#52737">isReached</a></span>(<span class="typed"><span class="type">Int</span><a href="#53052">bx</a></span>)) <span class="typed"><span class="type">=&gt; TransMatcher.this.global.CompilationUnit</span><a href="#29503">cunit</a></span>.<span class="typed"><span class="type">(scala.tools.nsc.util.Position,String)Unit</span><a href="../CompilationUnits.scala.html#24150">error</a></span>(<span class="typed"><span class="type">TransMatcher.this.global.CaseDef</span><a href="#53051">cs</a></span>.<span class="typed"><span class="type">=&gt; TransMatcher.this.global.Tree</span><a href="../ast/Trees.scala.html#28126">body</a></span>.<span class="typed"><span class="type">=&gt; scala.tools.nsc.util.Position</span><a href="../ast/Trees.scala.html#25352">pos</a></span>, <span class="typed"><span class="type">java.lang.String(&quot;unreachable code&quot;)</span><span class="string">&quot;unreachable code&quot;</span></span>)
      
    <span class="typed"><span class="type">TransMatcher.this.global.analyzer.global.Tree</span><a href="#52710">dfatree</a></span> = <span class="typed"><span class="type">TransMatcher.this.RepFactory</span><a href="#52698">rep</a></span>.<span class="typed"><span class="type">(TransMatcher.this.global.Tree)(implicit TransMatcher.this.global.Symbol)TransMatcher.this.global.Tree</span><a href="ParallelMatching.scala.html#52735">cleanup</a></span>(<span class="typed"><span class="type">TransMatcher.this.global.analyzer.global.Tree</span><a href="#52710">dfatree</a></span>)
    <span class="typed"><span class="type">object TransMatcher.this.resetTrav</span><a href="#29515">resetTrav</a></span>.<span class="typed"><span class="type">(TransMatcher.this.global.Tree)Unit</span><a href="#53063">traverse</a></span>(<span class="typed"><span class="type">TransMatcher.this.global.analyzer.global.Tree</span><a href="#52710">dfatree</a></span>)
    <span class="typed"><span class="type">TransMatcher.this.global.analyzer.global.Tree</span><a href="#52710">dfatree</a></span>
  }
                    
  <span class="keyword">object</span> <span class="typed"><span class="type">object TransMatcher.this.resetTrav</span><a id="29515">resetTrav</a></span> <span class="keyword">extends</span> <span class="typed"><span class="type">TransMatcher.this.global.Traverser</span><a href="../ast/Trees.scala.html#22549">Traverser</a></span> {
    <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">(TransMatcher.this.global.Tree)Unit</span><a id="53063">traverse</a></span>(<span class="typed"><span class="type">TransMatcher.this.global.Tree</span><a id="53064">x</a></span>: <span class="typed"><span class="type">TransMatcher.this.global.Tree</span><a href="../ast/Trees.scala.html#22371">Tree</a></span>): <span class="typed"><span class="type">Unit</span><a id="2169">Unit</a></span> = <span class="typed"><span class="type">TransMatcher.this.global.Tree</span><a href="#53064">x</a></span> <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
      <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> (<span class="typed"><span class="type">TransMatcher.this.global.ValDef</span><a id="53066">vd</a></span>: <span class="typed"><span class="type">TransMatcher.this.global.ValDef</span><a href="../ast/Trees.scala.html#22398">ValDef</a></span>) =&gt; <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">TransMatcher.this.global.ValDef</span><a href="#53066">vd</a></span>.<span class="typed"><span class="type">=&gt; TransMatcher.this.global.Symbol</span><a href="../ast/Trees.scala.html#26908">symbol</a></span> <span class="typed"><span class="type">(Long)Boolean</span><a href="../symtab/Symbols.scala.html#25223">hasFlag</a></span> Flags.<span class="typed"><span class="type">Long(2097152L)</span><span >SYNTHETIC</span></span>) {
        <span class="typed"><span class="type">TransMatcher.this.global.ValDef</span><a href="#53066">vd</a></span>.<span class="typed"><span class="type">=&gt; TransMatcher.this.global.Symbol</span><a href="../ast/Trees.scala.html#26908">symbol</a></span> <span class="typed"><span class="type">(Long)TransMatcher.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#25221">resetFlag</a></span> Flags.<span class="typed"><span class="type">Long(274877906944L)</span><span >TRANS_FLAG</span></span>
        <span class="typed"><span class="type">TransMatcher.this.global.ValDef</span><a href="#53066">vd</a></span>.<span class="typed"><span class="type">=&gt; TransMatcher.this.global.Symbol</span><a href="../ast/Trees.scala.html#26908">symbol</a></span> <span class="typed"><span class="type">(Long)TransMatcher.this.global.Symbol</span><a href="../symtab/Symbols.scala.html#25221">resetFlag</a></span> Flags.<span class="typed"><span class="type">Long(4096L)</span><span >MUTABLE</span></span>
      }
      <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> _ =&gt;
        <span class="keyword">super</span>.<span class="typed"><span class="type">(TransMatcher.this.global.Tree)Unit</span><a href="../ast/Trees.scala.html#28559">traverse</a></span>(<span class="typed"><span class="type">TransMatcher.this.global.Tree</span><a href="#53064">x</a></span>)
    }
  }
}

        </pre>
    </body>
</html>