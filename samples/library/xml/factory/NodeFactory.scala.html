<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>xml/factory/NodeFactory.scala</title>
        <script type="text/javascript" src="../../jquery-all.js"></script>
        <script type="text/javascript" src="../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../style.css" title="Style">
    </head>
    <body>
        <pre>
/*                     __                                               *\
**     ________ ___   / /  ___     Scala API                            **
**    / __/ __// _ | / /  / _ |    (c) 2003-2009, LAMP/EPFL             **
**  __\ \/ /__/ __ |/ /__/ __ |                                         **
** /____/\___/_/ |_/____/_/ | |                                         **
**                          |/                                          **
\*                                                                      */

// $Id: NodeFactory.scala 18387 2009-07-24 15:28:37Z odersky $

<span class="keyword">package</span> scala.xml
<span class="keyword">package</span> factory

<span class="keyword">import</span> parsing.{ FactoryAdapter, NoBindingFactoryAdapter }
<span class="keyword">import</span> org.xml.sax.InputSource
<span class="keyword">import</span> java.io.{ InputStream, Reader, StringReader, File, FileDescriptor, FileInputStream }
<span class="keyword">import</span> javax.xml.parsers.{ SAXParser, SAXParserFactory }

<span class="keyword">trait</span> <a title="trait NodeFactory[A &lt;: scala.xml.Node] extends java.lang.Object with ScalaObject" id="15293">NodeFactory</a>[<a title="&gt;: Nothing &lt;: scala.xml.Node" id="16690">A</a> &lt;: Node]
<a href="../../ScalaObject.scala.html#957" title="ScalaObject">{</a>
  <span class="keyword">val</span> <a title="Boolean" id="243378">ignoreComments</a>  = <span title="Boolean(false)" class="keyword">false</span>
  <span class="keyword">val</span> <a title="Boolean" id="243380">ignoreProcInstr</a> = <span title="Boolean(false)" class="keyword">false</span>

  /* default behaviour is to use hash-consing */
  <span class="keyword">val</span> <a title="scala.collection.mutable.HashMap[Int,List[A]]" id="243382">cache</a> = <span title="scala.collection.mutable.HashMap[Int,List[A]]" class="keyword">new</span> collection.mutable.<a href="../../collection/mutable/HashMap.scala.html#7755" title="scala.collection.mutable.HashMap[Int,List[A]]">HashMap</a>[Int, List[A]]

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(pre: String,name: String,attrs: scala.xml.MetaData,scope: scala.xml.NamespaceBinding,children: Seq[scala.xml.Node])A" id="243384">create</a>(<a title="String" id="243403">pre</a>: <span title="String">String</span>, <a title="String" id="243404">name</a>: <span title="String">String</span>, <a title="scala.xml.MetaData" id="243405">attrs</a>: <a href="../MetaData.scala.html#8585" title="scala.xml.MetaData">MetaData</a>, <a title="scala.xml.NamespaceBinding" id="243406">scope</a>: <a href="../NamespaceBinding.scala.html#8759" title="scala.xml.NamespaceBinding">NamespaceBinding</a>, <a title="Seq[scala.xml.Node]" id="243407">children</a>:<a href="../../collection/Sequence.scala.html#4346" title="Seq[scala.xml.Node]">Seq</a>[Node]): <a href="#16690" title="A">A</a>
  
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(hash: Int,old: List[A],pre: String,name: String,attrSeq: scala.xml.MetaData,scope: scala.xml.NamespaceBinding,children: Seq[scala.xml.Node])A" id="243385">construct</a>(<a title="Int" id="251759">hash</a>: <a title="Int" id="2175">Int</a>, <a title="List[A]" id="251760">old</a>:<a href="../../collection/immutable/List.scala.html#8973" title="List[A]">List</a>[A], <a title="String" id="251761">pre</a>: <span title="String">String</span>, <a title="String" id="251762">name</a>: <span title="String">String</span>, <a title="scala.xml.MetaData" id="251763">attrSeq</a>:<a href="../MetaData.scala.html#8585" title="scala.xml.MetaData">MetaData</a>, <a title="scala.xml.NamespaceBinding" id="251764">scope</a>: <a href="../NamespaceBinding.scala.html#8759" title="scala.xml.NamespaceBinding">NamespaceBinding</a>, <a title="Seq[scala.xml.Node]" id="251765">children</a>:<a href="../../collection/Sequence.scala.html#4346" title="Seq[scala.xml.Node]">Seq</a>[Node]): <a href="#16690" title="A">A</a> = {
    <span class="keyword">val</span> <a title="A" id="251767">el</a> = <a href="#243384" title="(pre: String,name: String,attrs: scala.xml.MetaData,scope: scala.xml.NamespaceBinding,children: Seq[scala.xml.Node])A">create</a>(<a href="#251761" title="String">pre</a>, <a href="#251762" title="String">name</a>, <a href="#251763" title="scala.xml.MetaData">attrSeq</a>, <a href="#251764" title="scala.xml.NamespaceBinding">scope</a>, <a href="#251765" title="Seq[scala.xml.Node]">children</a>)
    <a href="#243382" title="=&gt; scala.collection.mutable.HashMap[Int,List[A]]">cache</a>.<a href="../../collection/mutable/HashMap.scala.html#91079" title="(key: Int,value: List[A])Unit">update</a>(<a href="#251759" title="Int">hash</a>, <a href="#251767" title="A">el</a> <a href="#251776" title="A">::</a> <a href="../../collection/immutable/List.scala.html#17630" title="(x: A)List[A]">old</a>)
    <a href="#251767" title="A">el</a>
  }
  
  <span class="keyword">def</span> <a title="(ch1: Seq[scala.xml.Node],ch2: Seq[scala.xml.Node])Boolean" id="243386">eqElements</a>(<a title="Seq[scala.xml.Node]" id="251786">ch1</a>: <a href="../../collection/Sequence.scala.html#4346" title="Seq[scala.xml.Node]">Seq</a>[Node], <a title="Seq[scala.xml.Node]" id="251787">ch2</a>: <a href="../../collection/Sequence.scala.html#4346" title="Seq[scala.xml.Node]">Seq</a>[Node]): <a title="Boolean" id="1949">Boolean</a> =
    <a href="#251786" title="Seq[scala.xml.Node]">ch1</a>.<a href="../../collection/generic/SequenceTemplate.scala.html#17418" title="=&gt; &lt;refinement&gt; extends java.lang.Object with scala.collection.generic.SequenceView[scala.xml.Node,Sequence[scala.xml.Node]]">view</a>.<a href="../../collection/generic/IterableViewTemplate.scala.html#20537" title="(that: Iterable[scala.xml.Node],thisElem: scala.xml.Node,thatElem: scala.xml.Node)(implicit bf: scala.collection.generic.BuilderFactory[(scala.xml.Node, scala.xml.Node),scala.collection.generic.SequenceView[(scala.xml.Node, scala.xml.Node),Sequence[_]],scala.collection.generic.SequenceView[scala.xml.Node,Sequence[scala.xml.Node]]])scala.collection.generic.SequenceView[(scala.xml.Node, scala.xml.Node),Sequence[_]]">zipAll</a><a href="../../collection/generic/TraversableTemplate.scala.html#17183" title="(p: ((scala.xml.Node, scala.xml.Node)) =&gt; Boolean)Boolean">(</a><a href="#251787" title="Seq[scala.xml.Node]">ch2</a>.<a href="../../collection/generic/SequenceTemplate.scala.html#17418" title="=&gt; &lt;refinement&gt; extends java.lang.Object with scala.collection.generic.SequenceView[scala.xml.Node,Sequence[scala.xml.Node]]">view</a>, <span title="Null(null)" class="keyword">null</span>, <span title="Null(null)" class="keyword">null</span>) forall <a href="#251935" title="Boolean">{</a> <span title="Boolean" class="keyword">case</span> (<a title="scala.xml.Node" id="251938">x</a>,<a title="scala.xml.Node" id="251939">y</a>) =&gt; <a href="#251938" title="(x$1: AnyRef)Boolean" id="6531">x</a> eq <a href="#251939" title="scala.xml.Node">y</a> }

  <span class="keyword">def</span> <a title="(n: scala.xml.Node,pre: String,name: String,attrSeq: scala.xml.MetaData,scope: scala.xml.NamespaceBinding,children: Seq[scala.xml.Node])Boolean" id="243387">nodeEquals</a>(<a title="scala.xml.Node" id="251946">n</a>: <a href="../Node.scala.html#8654" title="scala.xml.Node">Node</a>, <a title="String" id="251947">pre</a>: <span title="String">String</span>, <a title="String" id="251948">name</a>: <span title="String">String</span>, <a title="scala.xml.MetaData" id="251949">attrSeq</a>:<a href="../MetaData.scala.html#8585" title="scala.xml.MetaData">MetaData</a>, <a title="scala.xml.NamespaceBinding" id="251950">scope</a>: <a href="../NamespaceBinding.scala.html#8759" title="scala.xml.NamespaceBinding">NamespaceBinding</a>, <a title="Seq[scala.xml.Node]" id="251951">children</a>: <a href="../../collection/Sequence.scala.html#4346" title="Seq[scala.xml.Node]">Seq</a>[Node]) =
    <a href="#251946" title="scala.xml.Node">n</a>.<a href="../Node.scala.html#20991" title="(x$1: AnyRef)Boolean">prefix</a> <span title="(x$1: Boolean)Boolean">==</span> <a href="#251947" title="String">pre</a> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span>
    <a href="#251946" title="scala.xml.Node">n</a>.<a href="../Node.scala.html#20992" title="(x$1: AnyRef)Boolean">label</a> == <a href="#251948" title="String">name</a> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span>
    <a href="#251946" title="scala.xml.Node">n</a>.<a href="../Node.scala.html#21001" title="(x$1: AnyRef)Boolean">attributes</a> == <a href="#251949" title="scala.xml.MetaData">attrSeq</a> &amp;&amp; 
    // scope?
    <a href="#243386" title="(ch1: Seq[scala.xml.Node],ch2: Seq[scala.xml.Node])Boolean">eqElements</a>(<a href="#251946" title="scala.xml.Node">n</a>.<a href="../Node.scala.html#21002" title="=&gt; Seq[scala.xml.Node]">child</a>, <a href="#251951" title="Seq[scala.xml.Node]">children</a>)
  
  <span class="keyword">def</span> <a title="(pre: String,name: String,attrSeq: scala.xml.MetaData,scope: scala.xml.NamespaceBinding,children: Seq[scala.xml.Node])A" id="243388">makeNode</a>(<a title="String" id="251983">pre</a>: <span title="String">String</span>, <a title="String" id="251984">name</a>: <span title="String">String</span>, <a title="scala.xml.MetaData" id="251985">attrSeq</a>: <a href="../MetaData.scala.html#8585" title="scala.xml.MetaData">MetaData</a>, <a title="scala.xml.NamespaceBinding" id="251986">scope</a>: <a href="../NamespaceBinding.scala.html#8759" title="scala.xml.NamespaceBinding">NamespaceBinding</a>, <a title="Seq[scala.xml.Node]" id="251987">children</a>: <a href="../../collection/Sequence.scala.html#4346" title="Seq[scala.xml.Node]">Seq</a>[Node]): <a href="#16690" title="A">A</a> = {
    <span class="keyword">val</span> <a title="Int" id="251989">hash</a> = <a href="../Utility.scala.html#8724" title="object scala.xml.Utility">Utility</a>.<a href="../Utility.scala.html#26591" title="(pre: String,label: String,attribHashCode: Int,scpeHash: Int,children: Seq[scala.xml.Node])Int">hashCode</a>( <a href="#251983" title="String">pre</a>, <a href="#251984" title="String">name</a>, <a href="#251985" title="scala.xml.MetaData">attrSeq</a>.<a title="()Int" id="6513">hashCode</a>(), <a href="#251986" title="scala.xml.NamespaceBinding">scope</a>.<a href="../NamespaceBinding.scala.html#55923" title="()Int">hashCode</a>(), <a href="#251987" title="Seq[scala.xml.Node]">children</a>)
    <span class="keyword">def</span> <a title="(old: List[A])A" id="251990">cons</a>(<a title="List[A]" id="251999">old</a>: <a href="../../collection/immutable/List.scala.html#8973" title="List[A]">List</a>[A]) = <a href="#243385" title="(hash: Int,old: List[A],pre: String,name: String,attrSeq: scala.xml.MetaData,scope: scala.xml.NamespaceBinding,children: Seq[scala.xml.Node])A">construct</a>(<a href="#251989" title="Int">hash</a>, <a href="#251999" title="List[A]">old</a>, <a href="#251983" title="String">pre</a>, <a href="#251984" title="String">name</a>, <a href="#251985" title="scala.xml.MetaData">attrSeq</a>, <a href="#251986" title="scala.xml.NamespaceBinding">scope</a>, <a href="#251987" title="Seq[scala.xml.Node]">children</a>)
    
    (<a href="../../collection/mutable/HashMap.scala.html#91077" title="(key: Int)Option[List[A]]">cache</a> get <a href="#251989" title="Int">hash</a>) <span title="A" class="keyword">match</span> {
      <span title="A" class="keyword">case</span> Some(<a title="List[A]" id="252008">list</a>) =&gt;    // find structurally equal
        <a href="#252008" title="List[A]">list</a>.<a href="../../collection/generic/LinearSequenceTemplate.scala.html#19408" title="(p: (A) =&gt; Boolean)Option[A]">find</a>(<a href="#243387" title="(n: scala.xml.Node,pre: String,name: String,attrSeq: scala.xml.MetaData,scope: scala.xml.NamespaceBinding,children: Seq[scala.xml.Node])Boolean">nodeEquals</a>(<a href="#252015" title="A">_</a>, <a href="#251983" title="String">pre</a>, <a href="#251984" title="String">name</a>, <a href="#251985" title="scala.xml.MetaData">attrSeq</a>, <a href="#251986" title="scala.xml.NamespaceBinding">scope</a>, <a href="#251987" title="Seq[scala.xml.Node]">children</a>)) <span title="A" class="keyword">match</span> {
          <span title="A" class="keyword">case</span> Some(<a title="A" id="252021">x</a>)    =&gt; <a href="#252021" title="A">x</a>
          <span title="A" class="keyword">case</span> _          =&gt; <a href="#251990" title="(old: List[A])A">cons</a>(<a href="#252008" title="List[A]">list</a>)
        }
      <span title="A" class="keyword">case</span> <a href="../../Option.scala.html#463" title="object None">None</a>           =&gt; <a href="#251990" title="(old: List[A])A">cons</a>(<a href="../../collection/immutable/List.scala.html#9259" title="object Nil">Nil</a>)
    }
  }
  
  <span class="keyword">def</span> <a title="(s: String)scala.xml.Text" id="243389">makeText</a>(<a title="String" id="252028">s</a>: <span title="String">String</span>) = <a href="../Text.scala.html#26684" title="(_data: String)scala.xml.Text">Text</a>(<a href="#252028" title="String">s</a>)
  <span class="keyword">def</span> <a title="(s: String)Seq[scala.xml.Comment]" id="243390">makeComment</a>(<a title="String" id="252037">s</a>: <span title="String">String</span>): <a href="../../collection/Sequence.scala.html#4346" title="Seq[scala.xml.Comment]">Seq</a>[Comment]  = 
    <span title="Seq[scala.xml.Comment]" class="keyword">if</span> (<a href="#243378" title="=&gt; Boolean">ignoreComments</a>) <a href="../../collection/immutable/List.scala.html#9259" title="object Nil">Nil</a> <span class="keyword">else</span> <a href="../../collection/immutable/List.scala.html#17535" title="(xs: scala.xml.Comment*)List[scala.xml.Comment]">List</a>(<a href="../Comment.scala.html#50331" title="(commentText: String)scala.xml.Comment">Comment</a>(<a href="#252037" title="String">s</a>))
  <span class="keyword">def</span> <a title="(t: String,s: String)Seq[scala.xml.ProcInstr]" id="243391">makeProcInstr</a>(<a title="String" id="243432">t</a>: <span title="String">String</span>, <a title="String" id="243433">s</a>: <span title="String">String</span>): <a href="../../collection/Sequence.scala.html#4346" title="Seq[scala.xml.ProcInstr]">Seq</a>[ProcInstr] =
    <span title="Seq[scala.xml.ProcInstr]" class="keyword">if</span> (<a href="#243380" title="=&gt; Boolean">ignoreProcInstr</a>) <a href="../../collection/immutable/List.scala.html#9259" title="object Nil">Nil</a> <span class="keyword">else</span> <a href="../../collection/immutable/List.scala.html#17535" title="(xs: scala.xml.ProcInstr*)List[scala.xml.ProcInstr]">List</a>(<a href="../ProcInstr.scala.html#50287" title="(target: String,proctext: String)scala.xml.ProcInstr">ProcInstr</a>(<a href="#243432" title="String">t</a>, <a href="#243433" title="String">s</a>))
}

        </pre>
    </body>
</html>