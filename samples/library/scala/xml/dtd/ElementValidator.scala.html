<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/xml/dtd/ElementValidator.scala</title>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style">
    </head>
    <body onload="initializeLinked()">
        <pre>
<span class="comment">/*                     __                                               *\
**     ________ ___   / /  ___     Scala API                            **
**    / __/ __// _ | / /  / _ |    (c) 2002-2009, LAMP/EPFL             **
**  __\ \/ /__/ __ |/ /__/ __ |    http://www.scala-lang.org/           **
** /____/\___/_/ |_/____/_/ | |                                         **
**                          |/                                          **
\*                                                                      */</span>

<span class="comment">// $Id: ElementValidator.scala 16842 2009-01-06 15:46:05Z michelou $</span>


<span class="keyword">package</span> scala.xml.dtd


<span class="keyword">import</span> ContentModel.ElemName
<span class="keyword">import</span> scala.util.automata._

<span class="comment">/** validate children and/or attributes of an element
 *  exceptions are created but not thrown.
 */</span>
<span class="keyword">class</span> <span class="typed"><span class="type">class ElementValidator extends java.lang.Object with (scala.xml.Node) =&gt; Boolean with ScalaObject</span><a id="9821">ElementValidator</a></span>() <span class="keyword">extends</span> <span class="typed"><span class="type">(scala.xml.Node) =&gt; Boolean</span><a href="../../Function1.scala.html#179">Function1</a></span>[Node,Boolean] {

  <span class="keyword">var</span> <span class="typed"><span class="type">List[scala.xml.dtd.ValidationException]</span><span id="59198"><span id="59196"><span id="59197"><a id="59216">exc</a></span></span></span></span>: <span class="typed"><span class="type">List[scala.xml.dtd.ValidationException]</span><a href="../../List.scala.html#524">List</a></span>[ValidationException] = <span class="typed"><span class="type">object Nil</span><a href="../../List.scala.html#333">Nil</a></span>

  <span class="keyword">protected</span> <span class="keyword">var</span> <span class="typed"><span class="type">scala.xml.dtd.ContentModel</span><span id="59201"><span id="59199"><span id="59200"><a id="59217">contentModel</a></span></span></span></span>: <span class="typed"><span class="type">scala.xml.dtd.ContentModel</span><a href="ContentModel.scala.html#9767">ContentModel</a></span>           = _
  <span class="keyword">protected</span> <span class="keyword">var</span> <span class="typed"><span class="type">scala.util.automata.DetWordAutom[scala.xml.dtd.ContentModel.ElemName]</span><span id="59204"><span id="59202"><span id="59203"><a id="59218">dfa</a></span></span></span></span>:          <span class="typed"><span class="type">scala.util.automata.DetWordAutom[scala.xml.dtd.ContentModel.ElemName]</span><a href="../../util/automata/DetWordAutom.scala.html#12962">DetWordAutom</a></span>[ElemName] = _
  <span class="keyword">protected</span> <span class="keyword">var</span> <span class="typed"><span class="type">List[scala.xml.dtd.AttrDecl]</span><span id="59207"><span id="59205"><span id="59206"><a id="59219">adecls</a></span></span></span></span>:       <span class="typed"><span class="type">List[scala.xml.dtd.AttrDecl]</span><a href="../../List.scala.html#524">List</a></span>[AttrDecl]         = _

  <span class="comment">/** set content model, enabling element validation */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">(scala.xml.dtd.ContentModel)Unit</span><a id="59208">setContentModel</a></span>(<span class="typed"><span class="type">scala.xml.dtd.ContentModel</span><a id="59223">cm</a></span>:<span class="typed"><span class="type">scala.xml.dtd.ContentModel</span><a href="ContentModel.scala.html#9767">ContentModel</a></span>) = {
    <span class="typed"><span class="type">(scala.xml.dtd.ContentModel)Unit</span><a href="#59200">contentModel</a></span> = <span class="typed"><span class="type">scala.xml.dtd.ContentModel</span><a href="#59223">cm</a></span>; <span class="typed"><span class="type">scala.xml.dtd.ContentModel</span><a href="#59223">cm</a></span> <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
      <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">ELEMENTS</a>(<span class="typed"><span class="type">scala.xml.dtd.ContentModel.RegExp</span><a id="59246">r</a></span>) =&gt;
        <span class="keyword">val</span> <span class="typed"><span class="type">scala.util.automata.NondetWordAutom[scala.xml.dtd.ContentModel.Translator._labelT]</span><a id="59247">nfa</a></span> = <span class="typed"><span class="type">object scala.xml.dtd.ContentModel</span><a href="ContentModel.scala.html#9768">ContentModel</a></span>.<span class="typed"><span class="type">object scala.xml.dtd.ContentModel.Translator</span><a href="ContentModel.scala.html#59182">Translator</a></span>.<span class="typed"><span class="type">(scala.xml.dtd.ContentModel.Translator.lang.RegExp,Int)scala.util.automata.NondetWordAutom[scala.xml.dtd.ContentModel.Translator._labelT]</span><a href="../../util/automata/WordBerrySethi.scala.html#59302">automatonFrom</a></span>(<span class="typed"><span class="type">scala.xml.dtd.ContentModel.RegExp</span><a href="#59246">r</a></span>, <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>)
        <span class="typed"><span class="type">(scala.util.automata.DetWordAutom[scala.xml.dtd.ContentModel.ElemName])Unit</span><a href="#59203">dfa</a></span> = <span class="typed"><span class="type">scala.util.automata.SubsetConstruction[scala.xml.dtd.ContentModel.Translator._labelT]</span><span class="keyword">new</span></span> <span class="typed"><span class="type">scala.util.automata.SubsetConstruction[scala.xml.dtd.ContentModel.Translator._labelT]</span><a href="../../util/automata/SubsetConstruction.scala.html#12884">SubsetConstruction</a></span>(<span class="typed"><span class="type">scala.util.automata.NondetWordAutom[scala.xml.dtd.ContentModel.Translator._labelT]</span><a href="#59247">nfa</a></span>).<span class="typed"><span class="type">=&gt; scala.util.automata.DetWordAutom[scala.xml.dtd.ContentModel.Translator._labelT]</span><a href="../../util/automata/SubsetConstruction.scala.html#50684">determinize</a></span>
      <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> _ =&gt;
        <span class="typed"><span class="type">(scala.util.automata.DetWordAutom[scala.xml.dtd.ContentModel.ElemName])Unit</span><a href="#59203">dfa</a></span> = <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>
    }
  }

  <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; scala.xml.dtd.ContentModel</span><a id="59209">getContentModel</a></span> = <span class="typed"><span class="type">=&gt; scala.xml.dtd.ContentModel</span><a href="#59199">contentModel</a></span>

  <span class="comment">/** set meta data, enabling attribute validation */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">(List[scala.xml.dtd.AttrDecl])Unit</span><a id="59210">setMetaData</a></span>(<span class="typed"><span class="type">List[scala.xml.dtd.AttrDecl]</span><a id="59317">adecls</a></span>: <span class="typed"><span class="type">List[scala.xml.dtd.AttrDecl]</span><a href="../../List.scala.html#524">List</a></span>[AttrDecl]) { <span class="typed"><span class="type">ElementValidator.this.type</span><a href="#9821" class="keyword">this</a></span>.<span class="typed"><span class="type">(List[scala.xml.dtd.AttrDecl])Unit</span><a href="#59206">adecls</a></span> = <span class="typed"><span class="type">List[scala.xml.dtd.AttrDecl]</span><a href="#59317">adecls</a></span> }

  <span class="keyword">def</span> <span class="typed"><span class="type">(Seq[scala.xml.Node],Boolean)Iterator[scala.xml.dtd.ContentModel.ElemName]</span><a id="59211">getIterator</a></span>(<span class="typed"><span class="type">Seq[scala.xml.Node]</span><a id="59318">nodes</a></span>: <span class="typed"><span class="type">Seq[scala.xml.Node]</span><a href="../../Seq.scala.html#761">Seq</a></span>[Node], <span class="typed"><span class="type">Boolean</span><a id="59319">skipPCDATA</a></span>: <span class="typed"><span class="type">Boolean</span><a id="2168">Boolean</a></span>): <span class="typed"><span class="type">Iterator[scala.xml.dtd.ContentModel.ElemName]</span><a href="../../Iterator.scala.html#1337">Iterator</a></span>[ElemName] = 
    <span class="typed"><span class="type">Seq[scala.xml.Node]</span><a href="#59318">nodes</a></span>.<span class="typed"><span class="type">=&gt; List[scala.xml.Node]</span><a href="../../Iterable.scala.html#17360">toList</a></span>
	 .<span class="typed"><span class="type">((scala.xml.Node) =&gt; Boolean)List[scala.xml.Node]</span><a href="../../List.scala.html#20911">filter</a></span> { <span class="typed"><span class="type">scala.xml.Node</span><a id="59323">x</a></span> =&gt; <span class="typed"><span class="type">scala.xml.Node</span><a href="#59323">x</a></span> <span class="typed"><span class="type">Boolean</span><span class="keyword">match</span></span> {
           <span class="typed"><span class="type">Boolean</span><span class="keyword">case</span></span> <span class="typed"><span class="type">scala.xml.SpecialNode</span><a id="59324">y</a></span>:<span class="typed"><span class="type">scala.xml.SpecialNode</span><a href="../SpecialNode.scala.html#7249">SpecialNode</a></span> =&gt; <span class="typed"><span class="type">scala.xml.SpecialNode</span><a href="#59324">y</a></span> <span class="typed"><span class="type">Boolean</span><span class="keyword">match</span></span> { 
             
             <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">case</span></span> <span class="typed"><span class="type">scala.xml.Atom[_]</span><a id="59325">a</a></span>:<span class="typed"><span class="type">scala.xml.Atom[_]</span><a href="../Atom.scala.html#7201">Atom</a></span>[_] <span class="keyword">if</span> (<span class="typed"><span class="type">scala.xml.Atom[_]</span><a href="#59325">a</a></span>.<span class="typed"><span class="type">=&gt; _</span><a href="../Atom.scala.html#22625">data</a></span>.<span class="typed"><span class="type">Boolean</span><a id="3499">isInstanceOf</a></span>[<span class="typed"><span class="type">String</span><a id="1859">String</a></span>] <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2749">&amp;&amp;</a></span> 
                                <span class="typed"><span class="type">scala.xml.Atom[_]</span><a href="#59325">a</a></span>.<span class="typed"><span class="type">=&gt; _</span><a href="../Atom.scala.html#22625">data</a></span>.<span class="typed"><span class="type">String</span><a id="3501">asInstanceOf</a></span>[<span class="typed"><span class="type">String</span><a id="1859">String</a></span>].<span class="typed"><span class="type">()java.lang.String</span><a id="5868">trim</a></span>.<span class="typed"><span class="type">()Int</span><a id="5819">length</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3139">==</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span> ) =&gt; 
                <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>; <span class="comment">// always skip all-whitespace nodes</span>

              <span class="typed"><span class="type">Boolean</span><span class="keyword">case</span></span> _ =&gt; 
                <span class="typed"><span class="type">=&gt; Boolean</span><a id="2745">!</a></span><span class="typed"><span class="type">Boolean</span><a href="#59319">skipPCDATA</a></span>

            }
            <span class="typed"><span class="type">Boolean</span><span class="keyword">case</span></span> _ =&gt;
              <span class="typed"><span class="type">scala.xml.Node</span><a href="#59323">x</a></span>.<span class="typed"><span class="type">=&gt; String</span><a href="../Node.scala.html#19947">namespace</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5792">eq</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>
          }}
          . <span class="typed"><span class="type">((scala.xml.Node) =&gt; scala.xml.dtd.ContentModel.ElemName)List[scala.xml.dtd.ContentModel.ElemName]</span><a href="../../List.scala.html#20904">map</a></span> { <span class="typed"><span class="type">scala.xml.Node</span><a id="59336">x</a></span> =&gt; <span class="typed"><span class="type">(String)scala.xml.dtd.ContentModel.ElemName</span><a href="ContentModel.scala.html#59338">ElemName</a></span>(<span class="typed"><span class="type">scala.xml.Node</span><a href="#59336">x</a></span>.<span class="typed"><span class="type">=&gt; String</span><a href="../Node.scala.html#19944">label</a></span>) }
          . <span class="typed"><span class="type">=&gt; Iterator[scala.xml.dtd.ContentModel.ElemName]</span><a href="../../List.scala.html#20889">elements</a></span>;

  <span class="comment">/** check attributes, return true if md corresponds to attribute declarations in adecls.
   */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">(scala.xml.MetaData)Boolean</span><a id="59212">check</a></span>(<span class="typed"><span class="type">scala.xml.MetaData</span><a id="59342">md</a></span>: <span class="typed"><span class="type">scala.xml.MetaData</span><a href="../MetaData.scala.html#7378">MetaData</a></span>): <span class="typed"><span class="type">Boolean</span><a id="2168">Boolean</a></span> = {
    <span class="comment">//@todo other exceptions</span>
    <span class="keyword">import</span> MakeValidationException._;
    <span class="keyword">val</span> <span class="typed"><span class="type">Int</span><a id="59344">len</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span> = <span class="typed"><span class="type">=&gt; List[scala.xml.dtd.ValidationException]</span><a href="#59196">exc</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a href="../../List.scala.html#20887">length</a></span>;
    <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="59345">j</a></span> = <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>;
    <span class="keyword">var</span> <span class="typed"><span class="type">scala.collection.mutable.BitSet</span><a id="59346">ok</a></span> = <span class="typed"><span class="type">scala.collection.mutable.BitSet</span><span class="keyword">new</span></span> scala.collection.mutable.<span class="typed"><span class="type">scala.collection.mutable.BitSet</span><a href="../../collection/mutable/BitSet.scala.html#11191">BitSet</a></span>(<span class="typed"><span class="type">=&gt; List[scala.xml.dtd.AttrDecl]</span><a href="#59205">adecls</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a href="../../List.scala.html#20887">length</a></span>);
    <span class="keyword">def</span> <span class="typed"><span class="type">(String)scala.xml.dtd.AttrDecl</span><a id="59347">find</a></span>(<span class="typed"><span class="type">String</span><a id="59355">Key</a></span>:<span class="typed"><span class="type">String</span><a id="1859">String</a></span>): <span class="typed"><span class="type">scala.xml.dtd.AttrDecl</span><a href="Decl.scala.html#9809">AttrDecl</a></span> = {
      <span class="keyword">var</span> <span class="typed"><span class="type">scala.xml.dtd.AttrDecl</span><a id="59368">attr</a></span>: <span class="typed"><span class="type">scala.xml.dtd.AttrDecl</span><a href="Decl.scala.html#9809">AttrDecl</a></span> = <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>;
      <span class="keyword">val</span> <span class="typed"><span class="type">Iterator[scala.xml.dtd.AttrDecl]</span><a id="59369">jt</a></span> = <span class="typed"><span class="type">=&gt; List[scala.xml.dtd.AttrDecl]</span><a href="#59205">adecls</a></span>.<span class="typed"><span class="type">=&gt; Iterator[scala.xml.dtd.AttrDecl]</span><a href="../../List.scala.html#20889">elements</a></span>; <span class="typed"><span class="type">Unit</span><a href="#59370" class="keyword">while</a></span>(<span class="typed"><span class="type">Int</span><a href="#59345">j</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3141">&lt;</a></span> <span class="typed"><span class="type">=&gt; List[scala.xml.dtd.AttrDecl]</span><a href="#59205">adecls</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a href="../../List.scala.html#20887">length</a></span>) {
        <span class="typed"><span class="type">Iterator[scala.xml.dtd.AttrDecl]</span><a href="#59369">jt</a></span>.<span class="typed"><span class="type">()scala.xml.dtd.AttrDecl</span><a href="../../Iterator.scala.html#19976">next</a></span> <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
          <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">scala.xml.dtd.AttrDecl</span><a id="59374">a</a></span> @ <a id="1">AttrDecl</a>(<span class="typed"><span class="type">String</span><a href="#59355">Key</a></span>, _, _) =&gt; <span class="typed"><span class="type">scala.xml.dtd.AttrDecl</span><a href="#59368">attr</a></span> = <span class="typed"><span class="type">scala.xml.dtd.AttrDecl</span><a href="#59374">a</a></span>; <span class="typed"><span class="type">scala.collection.mutable.BitSet</span><a href="#59346">ok</a></span> <span class="typed"><span class="type">(Int)Unit</span><a href="../../collection/mutable/BitSet.scala.html#50724">+=</a></span> <span class="typed"><span class="type">Int</span><a href="#59345">j</a></span>; <span class="typed"><span class="type">Int</span><a href="#59345">j</a></span> = <span class="typed"><span class="type">=&gt; List[scala.xml.dtd.AttrDecl]</span><a href="#59205">adecls</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a href="../../List.scala.html#20887">length</a></span>;
          <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> _                       =&gt; <span class="typed"><span class="type">Int</span><a href="#59345">j</a></span> = <span class="typed"><span class="type">Int</span><a href="#59345">j</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>;
        }
      }
      <span class="typed"><span class="type">scala.xml.dtd.AttrDecl</span><a href="#59368">attr</a></span>
    }
    <span class="keyword">val</span> <span class="typed"><span class="type">Iterator[scala.xml.MetaData]</span><a id="59348">it</a></span> = <span class="typed"><span class="type">scala.xml.MetaData</span><a href="#59342">md</a></span>.<span class="typed"><span class="type">=&gt; Iterator[scala.xml.MetaData]</span><a href="../MetaData.scala.html#25470">elements</a></span>; <span class="typed"><span class="type">Unit</span><a href="#59350" class="keyword">while</a></span>(<span class="typed"><span class="type">Iterator[scala.xml.MetaData]</span><a href="#59348">it</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../../Iterator.scala.html#19975">hasNext</a></span>) {
      <span class="keyword">val</span> <span class="typed"><span class="type">scala.xml.MetaData</span><a id="59413">attr</a></span> = <span class="typed"><span class="type">Iterator[scala.xml.MetaData]</span><a href="#59348">it</a></span>.<span class="typed"><span class="type">()scala.xml.MetaData</span><a href="../../Iterator.scala.html#19976">next</a></span>
      <span class="typed"><span class="type">Int</span><a href="#59345">j</a></span> = <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>
      <span class="typed"><span class="type">(String)scala.xml.dtd.AttrDecl</span><a href="#59347">find</a></span>(<span class="typed"><span class="type">scala.xml.MetaData</span><a href="#59413">attr</a></span>.<span class="typed"><span class="type">=&gt; String</span><a href="../MetaData.scala.html#25474">key</a></span>) <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {

        <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span> =&gt; 
          <span class="comment">//Console.println(&quot;exc&quot;);</span>
          <span class="typed"><span class="type">(List[scala.xml.dtd.ValidationException])Unit</span><a href="#59197">exc</a></span> = <span class="typed"><span class="type">(String)scala.xml.dtd.ValidationException</span><a href="ValidationException.scala.html#22884">fromUndefinedAttribute</a></span>( <span class="typed"><span class="type">scala.xml.MetaData</span><a href="#59413">attr</a></span>.<span class="typed"><span class="type">=&gt; String</span><a href="../MetaData.scala.html#25474">key</a></span> ) <span class="typed"><span class="type">(scala.xml.dtd.ValidationException)List[scala.xml.dtd.ValidationException]</span><a href="../../List.scala.html#20872">::</a></span> <span class="typed"><span class="type">=&gt; List[scala.xml.dtd.ValidationException]</span><a href="#59196">exc</a></span>;

        <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">AttrDecl</a>(_, <span class="typed"><span class="type">String</span><a id="59417">tpe</a></span>, <a id="1">DEFAULT</a>(<span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>, <span class="typed"><span class="type">String</span><a id="59437">fixedValue</a></span>)) <span class="keyword">if</span>(<span class="typed"><span class="type">scala.xml.MetaData</span><a href="#59413">attr</a></span>.<span class="typed"><span class="type">=&gt; Seq[scala.xml.Node]</span><a href="../MetaData.scala.html#25475">value</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5791">!=</a></span> <span class="typed"><span class="type">String</span><a href="#59437">fixedValue</a></span>) =&gt; 
          <span class="typed"><span class="type">(List[scala.xml.dtd.ValidationException])Unit</span><a href="#59197">exc</a></span> = <span class="typed"><span class="type">(String,String,String)scala.xml.dtd.ValidationException</span><a href="ValidationException.scala.html#22881">fromFixedAttribute</a></span>( <span class="typed"><span class="type">scala.xml.MetaData</span><a href="#59413">attr</a></span>.<span class="typed"><span class="type">=&gt; String</span><a href="../MetaData.scala.html#25474">key</a></span>, <span class="typed"><span class="type">String</span><a href="#59437">fixedValue</a></span>, <span class="typed"><span class="type">scala.xml.MetaData</span><a href="#59413">attr</a></span>.<span class="typed"><span class="type">=&gt; Seq[scala.xml.Node]</span><a href="../MetaData.scala.html#25475">value</a></span>.<span class="typed"><span class="type">()String</span><a href="../../Collection.scala.html#17380">toString</a></span>) <span class="typed"><span class="type">(scala.xml.dtd.ValidationException)List[scala.xml.dtd.ValidationException]</span><a href="../../List.scala.html#20872">::</a></span> <span class="typed"><span class="type">=&gt; List[scala.xml.dtd.ValidationException]</span><a href="#59196">exc</a></span>;

        <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">scala.xml.dtd.AttrDecl</span><a id="59444">s</a></span> =&gt;
          <span class="comment">//Console.println(&quot;s: &quot;+s);</span>

      }
    }
    
    <span class="comment">//val missing = ok.toSet(false); FIXME: it doesn't seem to be used anywhere</span>
    <span class="typed"><span class="type">Int</span><a href="#59345">j</a></span> = <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>
    <span class="keyword">var</span> <span class="typed"><span class="type">Iterator[scala.xml.dtd.AttrDecl]</span><a id="59349">kt</a></span> = <span class="typed"><span class="type">=&gt; List[scala.xml.dtd.AttrDecl]</span><a href="#59205">adecls</a></span>.<span class="typed"><span class="type">=&gt; Iterator[scala.xml.dtd.AttrDecl]</span><a href="../../List.scala.html#20889">elements</a></span>
    <span class="typed"><span class="type">Unit</span><a href="#59351" class="keyword">while</a></span> (<span class="typed"><span class="type">Iterator[scala.xml.dtd.AttrDecl]</span><a href="#59349">kt</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../../Iterator.scala.html#19975">hasNext</a></span>) {
      <span class="typed"><span class="type">Iterator[scala.xml.dtd.AttrDecl]</span><a href="#59349">kt</a></span>.<span class="typed"><span class="type">()scala.xml.dtd.AttrDecl</span><a href="../../Iterator.scala.html#19976">next</a></span> <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
        <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">AttrDecl</a>(<span class="typed"><span class="type">String</span><a id="59446">key</a></span>, <span class="typed"><span class="type">String</span><a id="59447">tpe</a></span>, <span class="typed"><span class="type">object scala.xml.dtd.REQUIRED</span><a href="Decl.scala.html#9852">REQUIRED</a></span>) <span class="keyword">if</span> <span class="typed"><span class="type">=&gt; Boolean</span><a id="2745">!</a></span><span class="typed"><span class="type">(Int)Boolean</span><a href="../../collection/Set.scala.html#22908">ok</a></span>(<span class="typed"><span class="type">Int</span><a href="#59345">j</a></span>) =&gt; 
          <span class="typed"><span class="type">(List[scala.xml.dtd.ValidationException])Unit</span><a href="#59197">exc</a></span> = <span class="typed"><span class="type">(String,String)scala.xml.dtd.ValidationException</span><a href="ValidationException.scala.html#22886">fromMissingAttribute</a></span>( <span class="typed"><span class="type">String</span><a href="#59446">key</a></span>, <span class="typed"><span class="type">String</span><a href="#59447">tpe</a></span> ) <span class="typed"><span class="type">(scala.xml.dtd.ValidationException)List[scala.xml.dtd.ValidationException]</span><a href="../../List.scala.html#20872">::</a></span> <span class="typed"><span class="type">=&gt; List[scala.xml.dtd.ValidationException]</span><a href="#59196">exc</a></span>;
          <span class="typed"><span class="type">Int</span><a href="#59345">j</a></span> = <span class="typed"><span class="type">Int</span><a href="#59345">j</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>;
        <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> _ =&gt;
          <span class="typed"><span class="type">Int</span><a href="#59345">j</a></span> = <span class="typed"><span class="type">Int</span><a href="#59345">j</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>;
      }
    }
    <span class="typed"><span class="type">=&gt; List[scala.xml.dtd.ValidationException]</span><a href="#59196">exc</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a href="../../List.scala.html#20887">length</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3139">==</a></span> <span class="typed"><span class="type">Int</span><a href="#59344">len</a></span> <span class="comment">//- true if no new exception</span>
  }

  <span class="comment">/** check children, return true if conform to content model
   *  @pre contentModel != null
   */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">(Seq[scala.xml.Node])Boolean</span><a id="59213">check</a></span>(<span class="typed"><span class="type">Seq[scala.xml.Node]</span><a id="59505">nodes</a></span>: <span class="typed"><span class="type">Seq[scala.xml.Node]</span><a href="../../Seq.scala.html#761">Seq</a></span>[Node]): <span class="typed"><span class="type">Boolean</span><a id="2168">Boolean</a></span> = <span class="typed"><span class="type">=&gt; scala.xml.dtd.ContentModel</span><a href="#59199">contentModel</a></span> <span class="typed"><span class="type">Boolean</span><span class="keyword">match</span></span> {
    <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object scala.xml.dtd.ANY</span><a href="ContentModel.scala.html#9864">ANY</a></span> =&gt;
      <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>

    <span class="typed"><span class="type">Boolean</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object scala.xml.dtd.EMPTY</span><a href="ContentModel.scala.html#9816">EMPTY</a></span> =&gt;
      <span class="typed"><span class="type">=&gt; Boolean</span><a id="2745">!</a></span><span class="typed"><span class="type">(Seq[scala.xml.Node],Boolean)Iterator[scala.xml.dtd.ContentModel.ElemName]</span><a href="#59211">getIterator</a></span>(<span class="typed"><span class="type">Seq[scala.xml.Node]</span><a href="#59505">nodes</a></span>, <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>).<span class="typed"><span class="type">=&gt; Boolean</span><a href="../../Iterator.scala.html#19975">hasNext</a></span>

    <span class="typed"><span class="type">Boolean</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object scala.xml.dtd.PCDATA</span><a href="ContentModel.scala.html#9846">PCDATA</a></span> =&gt;
      <span class="typed"><span class="type">=&gt; Boolean</span><a id="2745">!</a></span><span class="typed"><span class="type">(Seq[scala.xml.Node],Boolean)Iterator[scala.xml.dtd.ContentModel.ElemName]</span><a href="#59211">getIterator</a></span>(<span class="typed"><span class="type">Seq[scala.xml.Node]</span><a href="#59505">nodes</a></span>, <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>).<span class="typed"><span class="type">=&gt; Boolean</span><a href="../../Iterator.scala.html#19975">hasNext</a></span>

    <span class="typed"><span class="type">Boolean</span><span class="keyword">case</span></span> <a id="1">MIXED</a>(ContentModel.<a id="1">Alt</a>(<span class="typed"><span class="type">Seq[scala.xml.dtd.ContentModel._regexpT]</span><a id="59538">branches</a></span> @ _*))  =&gt; <span class="comment">//@todo</span>
      <span class="keyword">val</span> <span class="typed"><span class="type">Int</span><a id="59539">j</a></span> = <span class="typed"><span class="type">=&gt; List[scala.xml.dtd.ValidationException]</span><a href="#59196">exc</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a href="../../List.scala.html#20887">length</a></span>
      <span class="keyword">def</span> <span class="typed"><span class="type">(String)Boolean</span><a id="59540">find</a></span>(<span class="typed"><span class="type">String</span><a id="59544">Key</a></span>: <span class="typed"><span class="type">String</span><a id="1859">String</a></span>): <span class="typed"><span class="type">Boolean</span><a id="2168">Boolean</a></span> = {
        <span class="keyword">var</span> <span class="typed"><span class="type">Boolean</span><a id="59545">res</a></span> = <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>
        <span class="keyword">val</span> <span class="typed"><span class="type">Iterator[scala.xml.dtd.ContentModel._regexpT]</span><a id="59546">jt</a></span> = <span class="typed"><span class="type">Seq[scala.xml.dtd.ContentModel._regexpT]</span><a href="#59538">branches</a></span>.<span class="typed"><span class="type">=&gt; Iterator[scala.xml.dtd.ContentModel._regexpT]</span><a href="../../Iterable.scala.html#17309">elements</a></span>
        <span class="typed"><span class="type">Unit</span><a href="#59547" class="keyword">while</a></span> (<span class="typed"><span class="type">Iterator[scala.xml.dtd.ContentModel._regexpT]</span><a href="#59546">jt</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../../Iterator.scala.html#19975">hasNext</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2749">&amp;&amp;</a></span> <span class="typed"><span class="type">=&gt; Boolean</span><a id="2745">!</a></span><span class="typed"><span class="type">Boolean</span><a href="#59545">res</a></span>) 
          <span class="typed"><span class="type">Iterator[scala.xml.dtd.ContentModel._regexpT]</span><a href="#59546">jt</a></span>.<span class="typed"><span class="type">()scala.xml.dtd.ContentModel._regexpT</span><a href="../../Iterator.scala.html#19976">next</a></span> <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> { <span class="comment">// !!! check for match translation problem</span>
            <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> ContentModel.<a id="1">Letter</a>(<a id="1">ElemName</a>(<span class="typed"><span class="type">String</span><a href="#59544">Key</a></span>)) =&gt; <span class="typed"><span class="type">Boolean</span><a href="#59545">res</a></span> = <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>;
            <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> _                                  =&gt;
          }
        <span class="typed"><span class="type">Boolean</span><a href="#59545">res</a></span>
      }
    
      <span class="keyword">var</span> <span class="typed"><span class="type">Iterator[scala.xml.dtd.ContentModel.ElemName]</span><a id="59541">it</a></span> = <span class="typed"><span class="type">(Seq[scala.xml.Node],Boolean)Iterator[scala.xml.dtd.ContentModel.ElemName]</span><a href="#59211">getIterator</a></span>(<span class="typed"><span class="type">Seq[scala.xml.Node]</span><a href="#59505">nodes</a></span>, <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>); <span class="typed"><span class="type">Unit</span><a href="#59542" class="keyword">while</a></span>(<span class="typed"><span class="type">Iterator[scala.xml.dtd.ContentModel.ElemName]</span><a href="#59541">it</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../../Iterator.scala.html#19975">hasNext</a></span>) {
        <span class="keyword">var</span> <span class="typed"><span class="type">String</span><a id="59568">label</a></span> = <span class="typed"><span class="type">Iterator[scala.xml.dtd.ContentModel.ElemName]</span><a href="#59541">it</a></span>.<span class="typed"><span class="type">()scala.xml.dtd.ContentModel.ElemName</span><a href="../../Iterator.scala.html#19976">next</a></span>.<span class="typed"><span class="type">=&gt; String</span><a href="ContentModel.scala.html#59310">name</a></span>;
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a id="2745">!</a></span><span class="typed"><span class="type">(String)Boolean</span><a href="#59540">find</a></span>(<span class="typed"><span class="type">String</span><a href="#59568">label</a></span>)) {
          <span class="typed"><span class="type">(List[scala.xml.dtd.ValidationException])Unit</span><a href="#59197">exc</a></span> = <span class="typed"><span class="type">object scala.xml.dtd.MakeValidationException</span><a href="ValidationException.scala.html#9834">MakeValidationException</a></span>.<span class="typed"><span class="type">(String)scala.xml.dtd.ValidationException</span><a href="ValidationException.scala.html#22883">fromUndefinedElement</a></span>(<span class="typed"><span class="type">String</span><a href="#59568">label</a></span>) <span class="typed"><span class="type">(scala.xml.dtd.ValidationException)List[scala.xml.dtd.ValidationException]</span><a href="../../List.scala.html#20872">::</a></span> <span class="typed"><span class="type">=&gt; List[scala.xml.dtd.ValidationException]</span><a href="#59196">exc</a></span>;
        }
      }

      (<span class="typed"><span class="type">=&gt; List[scala.xml.dtd.ValidationException]</span><a href="#59196">exc</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a href="../../List.scala.html#20887">length</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3139">==</a></span> <span class="typed"><span class="type">Int</span><a href="#59539">j</a></span>) <span class="comment">//- true if no new exception</span>

    <span class="typed"><span class="type">Boolean</span><span class="keyword">case</span></span> _:<span class="typed"><span class="type">scala.xml.dtd.ELEMENTS</span><a href="ContentModel.scala.html#9731">ELEMENTS</a></span> =&gt; 
      <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="59575">q</a></span> = <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>
      <span class="keyword">val</span> <span class="typed"><span class="type">Iterator[scala.xml.dtd.ContentModel.ElemName]</span><a id="59576">it</a></span> = <span class="typed"><span class="type">(Seq[scala.xml.Node],Boolean)Iterator[scala.xml.dtd.ContentModel.ElemName]</span><a href="#59211">getIterator</a></span>(<span class="typed"><span class="type">Seq[scala.xml.Node]</span><a href="#59505">nodes</a></span>, <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>)
      <span class="typed"><span class="type">Unit</span><a href="#59577" class="keyword">while</a></span> (<span class="typed"><span class="type">Iterator[scala.xml.dtd.ContentModel.ElemName]</span><a href="#59576">it</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../../Iterator.scala.html#19975">hasNext</a></span>) {
        <span class="keyword">val</span> <span class="typed"><span class="type">scala.xml.dtd.ContentModel.ElemName</span><a id="59578">e</a></span> = <span class="typed"><span class="type">Iterator[scala.xml.dtd.ContentModel.ElemName]</span><a href="#59576">it</a></span>.<span class="typed"><span class="type">()scala.xml.dtd.ContentModel.ElemName</span><a href="../../Iterator.scala.html#19976">next</a></span>      
        <span class="typed"><span class="type">=&gt; scala.util.automata.DetWordAutom[scala.xml.dtd.ContentModel.ElemName]</span><a href="#59202">dfa</a></span>.<span class="typed"><span class="type">(Int)scala.collection.Map[scala.xml.dtd.ContentModel.ElemName,Int]</span><a href="../../Array.scala.html#17253">delta</a></span>(<span class="typed"><span class="type">Int</span><a href="#59575">q</a></span>).<span class="typed"><span class="type">(scala.xml.dtd.ContentModel.ElemName)Option[Int]</span><a href="../../collection/Map.scala.html#21386">get</a></span>(<span class="typed"><span class="type">scala.xml.dtd.ContentModel.ElemName</span><a href="#59578">e</a></span>) <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
          <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <a id="1">Some</a>(<span class="typed"><span class="type">Int</span><a id="59583">p</a></span>) =&gt; <span class="typed"><span class="type">Int</span><a href="#59575">q</a></span> = <span class="typed"><span class="type">Int</span><a href="#59583">p</a></span>
          <span class="typed"><span class="type">Nothing</span><span class="keyword">case</span></span> _       =&gt; <span class="typed"><span class="type">Nothing</span><span class="keyword">throw</span></span> <span class="typed"><span class="type">(String)scala.xml.dtd.ValidationException</span><a href="ValidationException.scala.html#22868">ValidationException</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;element &quot;)</span><span class="string">&quot;element &quot;</span></span><span class="typed"><span class="type">(Any)java.lang.String</span><a id="5800">+</a></span><span class="typed"><span class="type">scala.xml.dtd.ContentModel.ElemName</span><a href="#59578">e</a></span><span class="typed"><span class="type">(Any)java.lang.String</span><a id="5800">+</a></span><span class="typed"><span class="type">java.lang.String(&quot; not allowed here&quot;)</span><span class="string">&quot; not allowed here&quot;</span></span>)
        }
      }
      <span class="typed"><span class="type">=&gt; scala.util.automata.DetWordAutom[scala.xml.dtd.ContentModel.ElemName]</span><a href="#59202">dfa</a></span>.<span class="typed"><span class="type">(Int)Boolean</span><a href="../../util/automata/DetWordAutom.scala.html#50805">isFinal</a></span>(<span class="typed"><span class="type">Int</span><a href="#59575">q</a></span>) <span class="comment">//- true if arrived in final state</span>
  }

  <span class="comment">/** applies various validations - accumulates error messages in exc
   *  @todo: fail on first error, ignore other errors (rearranging conditions)
   */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">(scala.xml.Node)Boolean</span><a id="59214">apply</a></span>(<span class="typed"><span class="type">scala.xml.Node</span><a id="59591">n</a></span>: <span class="typed"><span class="type">scala.xml.Node</span><a href="../Node.scala.html#7174">Node</a></span>): <span class="typed"><span class="type">Boolean</span><a id="2168">Boolean</a></span> = {
    <span class="comment">//- ? check children</span>
    <span class="keyword">var</span> <span class="typed"><span class="type">Boolean</span><a id="59592">res</a></span> = (<span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3507">==</a></span> <span class="typed"><span class="type">=&gt; scala.xml.dtd.ContentModel</span><a href="#59199">contentModel</a></span>) <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2748">||</a></span> <span class="typed"><span class="type">(Seq[scala.xml.Node])Boolean</span><a href="#59213">check</a></span>( <span class="typed"><span class="type">scala.xml.Node</span><a href="#59591">n</a></span>.<span class="typed"><span class="type">=&gt; Seq[scala.xml.Node]</span><a href="../Node.scala.html#19952">child</a></span> );	  
      
    <span class="comment">//- ? check attributes</span>
    <span class="typed"><span class="type">Boolean</span><a href="#59592">res</a></span> = ((<span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3507">==</a></span> <span class="typed"><span class="type">=&gt; List[scala.xml.dtd.AttrDecl]</span><a href="#59205">adecls</a></span>) <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2748">||</a></span> <span class="typed"><span class="type">(scala.xml.MetaData)Boolean</span><a href="#59212">check</a></span>( <span class="typed"><span class="type">scala.xml.Node</span><a href="#59591">n</a></span>.<span class="typed"><span class="type">=&gt; scala.xml.MetaData</span><a href="../Node.scala.html#19951">attributes</a></span> )) <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2749">&amp;&amp;</a></span> <span class="typed"><span class="type">Boolean</span><a href="#59592">res</a></span>;      

    <span class="typed"><span class="type">Boolean</span><a href="#59592">res</a></span>
  }	
}

        </pre>
    </body>
</html>