<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/xml/include/sax/XIncluder.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style">
    </head>
    <body>
        <pre>
/*                     __                                               *\
**     ________ ___   / /  ___     Scala API                            **
**    / __/ __// _ | / /  / _ |    (c) 2002-2009, LAMP/EPFL             **
**  __\ \/ /__/ __ |/ /__/ __ |    http://scala-lang.org/               **
** /____/\___/_/ |_/____/_/ | |                                         **
**                          |/                                          **
\*                                                                      */

// $Id: XIncluder.scala 18387 2009-07-24 15:28:37Z odersky $

<span class="keyword">package</span> scala.xml
<span class="keyword">package</span> include.sax
<span class="keyword">import</span> scala.xml.include._

<span class="keyword">import</span> org.xml.sax.SAXException
<span class="keyword">import</span> org.xml.sax.SAXParseException
<span class="keyword">import</span> org.xml.sax.ContentHandler
<span class="keyword">import</span> org.xml.sax.EntityResolver
<span class="keyword">import</span> org.xml.sax.helpers.XMLReaderFactory
<span class="keyword">import</span> org.xml.sax.XMLReader
<span class="keyword">import</span> org.xml.sax.Locator
<span class="keyword">import</span> org.xml.sax.Attributes
<span class="keyword">import</span> org.xml.sax.ext.LexicalHandler

<span class="keyword">import</span> java.io.{File, IOException, OutputStream, OutputStreamWriter,
                UnsupportedEncodingException, Writer}
<span class="keyword">import</span> java.net.{MalformedURLException, URL}
<span class="keyword">import</span> java.util.Stack

/** XIncluder is a SAX &lt;code&gt;ContentHandler&lt;/code&gt; 
 * that writes its XML document onto an output stream after resolving
 * all &lt;code&gt;xinclude:include&lt;/code&gt; elements.
 *
 * &lt;p&gt;
 *   based on Eliotte Rusty Harold's SAXXIncluder
 * &lt;/p&gt;
 */
<span class="keyword">class</span> <a title="class XIncluder extends java.lang.Object with org.xml.sax.ContentHandler with org.xml.sax.ext.LexicalHandler with ScalaObject" id="9980">XIncluder</a><a href="../../../ScalaObject.scala.html#969" title="ScalaObject">(</a><a title="java.io.OutputStream" id="25528">outs</a>:<a title="java.io.OutputStream" id="3964">OutputStream</a>, <a title="String" id="25529">encoding</a>:<span title="String">String</span>) <span class="keyword">extends</span> <a title="java.lang.Object" id="1771">Object</a> 
<span class="keyword">with</span> <a title="org.xml.sax.ContentHandler" id="23990">ContentHandler</a> <span class="keyword">with</span> <a title="org.xml.sax.ext.LexicalHandler" id="25460">LexicalHandler</a> {

  <span class="keyword">var</span> <a title="java.io.OutputStreamWriter" id="25499">out</a> = <span title="java.io.OutputStreamWriter" class="keyword">new</span> <a title="java.io.OutputStreamWriter" id="4009">OutputStreamWriter</a>(<a href="#25528" title="java.io.OutputStream">outs</a>, <a href="#25529" title="String">encoding</a>)

  <span class="keyword">def</span> <a title="(locator: org.xml.sax.Locator)Unit" id="25501">setDocumentLocator</a>(<a title="org.xml.sax.Locator" id="153253">locator</a>: <a title="org.xml.sax.Locator" id="23987">Locator</a>) <span title="Unit">{</span>}
    
  <span class="keyword">def</span> <a title="()Unit" id="25502">startDocument</a>() {
    <span class="keyword">try</span> {
      <a href="#25499" title="=&gt; java.io.OutputStreamWriter">out</a>.<span title="(x$1: java.lang.String)Unit">write</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;&lt;?xml version='1.0' encoding='&quot;</span> 
                <span title="(x$1: Any)java.lang.String">+</span> <a href="#25529" title="String">encoding</a> + <span title="java.lang.String(&quot;'?&gt;\015\012&quot;)" class="string">&quot;'?&gt;\r\n&quot;</span>);
    }
    <span class="keyword">catch</span> {
      <span title="Nothing" class="keyword">case</span> <a title="java.io.IOException" id="153271">e</a>:<span title="java.io.IOException">IOException</span> =&gt;
        <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String,x$2: java.lang.Exception)org.xml.sax.SAXException" class="keyword">new</span> <span title="org.xml.sax.SAXException">SAXException</span>(<span title="java.lang.String(&quot;Write failed&quot;)" class="string">&quot;Write failed&quot;</span>, <a href="#153271" title="java.io.IOException">e</a>)
    }        
  }

  <span class="keyword">def</span> <a title="()Unit" id="25503">endDocument</a>() {
    <span class="keyword">try</span> {
      <a href="#25499" title="=&gt; java.io.OutputStreamWriter">out</a>.<a title="()Unit" id="153034">flush</a>()
    }
    <span class="keyword">catch</span> { 
      <span title="Nothing" class="keyword">case</span> <a title="java.io.IOException" id="153295">e</a>:<span title="java.io.IOException">IOException</span> =&gt;
        <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String,x$2: java.lang.Exception)org.xml.sax.SAXException" class="keyword">new</span> <span title="org.xml.sax.SAXException">SAXException</span>(<span title="java.lang.String(&quot;Flush failed&quot;)" class="string">&quot;Flush failed&quot;</span>, <a href="#153295" title="java.io.IOException">e</a>)
    }
  }
    
  <span class="keyword">def</span> <a title="(prefix: String,uri: String)Unit" id="25504">startPrefixMapping</a>(<a title="String" id="153308">prefix</a>: <span title="String">String</span> , <a title="String" id="153309">uri</a>: <span title="String">String</span>) <span title="Unit">{</span>}
    
  <span class="keyword">def</span> <a title="(prefix: String)Unit" id="25505">endPrefixMapping</a>(<a title="String" id="153311">prefix</a>: <span title="String">String</span>) <span title="Unit">{</span>}

  <span class="keyword">def</span> <a title="(namespaceURI: String,localName: String,qualifiedName: String,atts: org.xml.sax.Attributes)Unit" id="25506">startElement</a>(<a title="String" id="153313">namespaceURI</a>: <span title="String">String</span>, <a title="String" id="153314">localName</a>: <span title="String">String</span>, <a title="String" id="153315">qualifiedName</a>: <span title="String">String</span>, <a title="org.xml.sax.Attributes" id="153316">atts</a>: <a title="org.xml.sax.Attributes" id="24005">Attributes</a>) = {
    <span class="keyword">try</span> {
      <a href="#25499" title="=&gt; java.io.OutputStreamWriter">out</a>.<span title="(x$1: java.lang.String)Unit">write</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;&lt;&quot;</span> + <a href="#153315" title="String">qualifiedName</a>);
      <span class="keyword">var</span> <a title="Int" id="153345">i</a> = <span title="Int(0)" class="int">0</span>; <span title="Unit" class="keyword">while</span> (<a href="#153345" title="(x$1: Int)Boolean">i</a> &lt; <a href="#153316" title="org.xml.sax.Attributes">atts</a>.<a title="()Int" id="153318">getLength</a>()) <a href="#153346" title="()Unit">{</a>
        <a href="#25499" title="=&gt; java.io.OutputStreamWriter">out</a>.<span title="(x$1: java.lang.String)Unit">write</span>(<span title="java.lang.String(&quot; &quot;)" class="string">&quot; &quot;</span>);   
        <a href="#25499" title="=&gt; java.io.OutputStreamWriter">out</a>.<span title="(x$1: java.lang.String)Unit">write</span>(<a href="#153316" title="org.xml.sax.Attributes">atts</a>.<a title="(x$1: Int)java.lang.String" id="153323">getQName</a>(<a href="#153345" title="Int">i</a>));   
        <a href="#25499" title="=&gt; java.io.OutputStreamWriter">out</a>.<span title="(x$1: java.lang.String)Unit">write</span>(<span title="java.lang.String(&quot;='&quot;)" class="string">&quot;='&quot;</span>);
        <span class="keyword">val</span> <a title="java.lang.String" id="153364">value</a> = <a href="#153316" title="org.xml.sax.Attributes">atts</a>.<a title="(x$1: Int)java.lang.String" id="153327">getValue</a>(<a href="#153345" title="Int">i</a>);
        // @todo Need to use character references if the encoding
        // can't support the character
        <a href="#25499" title="=&gt; java.io.OutputStreamWriter">out</a>.<span title="(x$1: java.lang.String)Unit">write</span>(xml.<a href="../../Utility.scala.html#8793" title="object scala.xml.Utility">Utility</a>.<a href="../../Utility.scala.html#26687" title="(text: String)String">escape</a>(<a href="#153364" title="java.lang.String">value</a>))
        <a href="#25499" title="=&gt; java.io.OutputStreamWriter">out</a>.<span title="(x$1: java.lang.String)Unit">write</span>(<span title="java.lang.String(&quot;'&quot;)" class="string">&quot;'&quot;</span>);
        <a href="#153345" title="Int">i</a> += <span title="Int(1)" class="int">1</span>
      }
      <a href="#25499" title="=&gt; java.io.OutputStreamWriter">out</a>.<span title="(x$1: java.lang.String)Unit">write</span>(<span title="java.lang.String(&quot;&gt;&quot;)" class="string">&quot;&gt;&quot;</span>)
    }
    <span class="keyword">catch</span> { 
      <span title="Nothing" class="keyword">case</span> <a title="java.io.IOException" id="153455">e</a>:<span title="java.io.IOException">IOException</span> =&gt;
        <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String,x$2: java.lang.Exception)org.xml.sax.SAXException" class="keyword">new</span> <span title="org.xml.sax.SAXException">SAXException</span>(<span title="java.lang.String(&quot;Write failed&quot;)" class="string">&quot;Write failed&quot;</span>, <a href="#153455" title="java.io.IOException">e</a>)
    }        
  }
  
  <span class="keyword">def</span> <a title="(namespaceURI: String,localName: String,qualifiedName: String)Unit" id="25507">endElement</a>(<a title="String" id="153468">namespaceURI</a>: <span title="String">String</span>, <a title="String" id="153469">localName</a>:<span title="String">String</span>, <a title="String" id="153470">qualifiedName</a>: <span title="String">String</span>) {
    <span class="keyword">try</span> {
      <a href="#25499" title="=&gt; java.io.OutputStreamWriter">out</a>.<span title="(x$1: java.lang.String)Unit">write</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;&lt;/&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#153470" title="String">qualifiedName</a> + <span title="java.lang.String(&quot;&gt;&quot;)" class="string">&quot;&gt;&quot;</span>)
    }
    <span class="keyword">catch</span> {
      <span title="Nothing" class="keyword">case</span> <a title="java.io.IOException" id="153483">e</a>: <span title="java.io.IOException">IOException</span> =&gt;
        <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String,x$2: java.lang.Exception)org.xml.sax.SAXException" class="keyword">new</span> <span title="org.xml.sax.SAXException">SAXException</span>(<span title="java.lang.String(&quot;Write failed&quot;)" class="string">&quot;Write failed&quot;</span>, <a href="#153483" title="java.io.IOException">e</a>)
    }
  }

  // need to escape characters that are not in the given 
  // encoding using character references????
  <span class="keyword">def</span> <a title="(ch: Array[Char],start: Int,length: Int)Unit" id="25508">characters</a>(<a title="Array[Char]" id="153496">ch</a>: <a href="../../../Array.scala.html#897" title="Array[Char]">Array</a>[Char], <a title="Int" id="153497">start</a>: <span title="Int">Int</span>, <a title="Int" id="153498">length</a>: <span title="Int">Int</span>) {
    <span class="keyword">try</span> {
      <span class="keyword">var</span>  <a title="Int" id="153500">i</a> = <span title="Int(0)" class="int">0</span>; <span title="Unit" class="keyword">while</span> (<a href="#153500" title="(x$1: Int)Boolean">i</a> &lt; <a href="#153498" title="Int">length</a>) <a href="#153501" title="()Unit">{</a>
        <span class="keyword">val</span> <a title="Char" id="153508">c</a> = <a href="../../../Array.scala.html#17823" title="(i: Int)Char">ch</a>(<a href="#153497" title="(x$1: Int)Int">start</a>+<a href="#153500" title="Int">i</a>);
        <span title="Unit" class="keyword">if</span> (<a href="#153508" title="(x$1: Char)Boolean">c</a> == <span title="Char('&amp;')" class="char">'&amp;'</span>) <a href="#25499" title="=&gt; java.io.OutputStreamWriter">out</a>.<span title="(x$1: java.lang.String)Unit">write</span>(<span title="java.lang.String(&quot;&amp;amp;&quot;)" class="string">&quot;&amp;amp;&quot;</span>);
        <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<a href="#153508" title="(x$1: Char)Boolean">c</a> == <span title="Char('&lt;')" class="char">'&lt;'</span>) <a href="#25499" title="=&gt; java.io.OutputStreamWriter">out</a>.<span title="(x$1: java.lang.String)Unit">write</span>(<span title="java.lang.String(&quot;&amp;lt;&quot;)" class="string">&quot;&amp;lt;&quot;</span>);
        // This next fix is normally not necessary.
        // However, it is required if text contains ]]&gt;
        // (The end CDATA section delimiter)
        <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<a href="#153508" title="(x$1: Char)Boolean">c</a> == <span title="Char('&gt;')" class="char">'&gt;'</span>) <a href="#25499" title="=&gt; java.io.OutputStreamWriter">out</a>.<span title="(x$1: java.lang.String)Unit">write</span>(<span title="java.lang.String(&quot;&amp;gt;&quot;)" class="string">&quot;&amp;gt;&quot;</span>);
        <span class="keyword">else</span> <a href="#25499" title="=&gt; java.io.OutputStreamWriter">out</a>.<a title="(x$1: Int)Unit" id="153024">write</a>(<a href="../../../Predef.scala.html#16486" title="implicit scala.Predef.char2int : (x: Char)Int">c</a>);
        <a href="#153500" title="Int">i</a> = <a href="#153500" title="(x$1: Int)Int">i</a>+<span title="Int(1)" class="int">1</span>;
      }
    }
    <span class="keyword">catch</span> { 
      <span title="Nothing" class="keyword">case</span> <a title="java.io.IOException" id="153652">e</a>: <span title="java.io.IOException">IOException</span> =&gt; 
        <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String,x$2: java.lang.Exception)org.xml.sax.SAXException" class="keyword">new</span> <span title="org.xml.sax.SAXException">SAXException</span>(<span title="java.lang.String(&quot;Write failed&quot;)" class="string">&quot;Write failed&quot;</span>, <a href="#153652" title="java.io.IOException">e</a>);      
    }
  }

  <span class="keyword">def</span>  <a title="(ch: Array[Char],start: Int,length: Int)Unit" id="25509">ignorableWhitespace</a>(<a title="Array[Char]" id="153665">ch</a>: <a href="../../../Array.scala.html#897" title="Array[Char]">Array</a>[Char], <a title="Int" id="153666">start</a>: <span title="Int">Int</span> , <a title="Int" id="153667">length</a>: <span title="Int">Int</span>) {
    <a href="#9980" title="XIncluder.this.type" class="keyword">this</a>.<a href="#25508" title="(ch: Array[Char],start: Int,length: Int)Unit">characters</a>(<a href="#153665" title="Array[Char]">ch</a>, <a href="#153666" title="Int">start</a>, <a href="#153667" title="Int">length</a>)
  }
  
  // do I need to escape text in PI????
  <span class="keyword">def</span> <a title="(target: String,data: String)Unit" id="25510">processingInstruction</a>(<a title="String" id="153671">target</a>: <span title="String">String</span>, <a title="String" id="153672">data</a>: <span title="String">String</span>) {
    <span class="keyword">try</span> {
      <a href="#25499" title="=&gt; java.io.OutputStreamWriter">out</a>.<span title="(x$1: java.lang.String)Unit">write</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;&lt;?&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#153671" title="String">target</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; &quot;)" class="string">&quot; &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#153672" title="String">data</a> + <span title="java.lang.String(&quot;?&gt;&quot;)" class="string">&quot;?&gt;&quot;</span>)
    }
    <span class="keyword">catch</span> { 
      <span title="Nothing" class="keyword">case</span> <a title="java.io.IOException" id="153689">e</a>:<span title="java.io.IOException">IOException</span> =&gt;
        <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String,x$2: java.lang.Exception)org.xml.sax.SAXException" class="keyword">new</span> <span title="org.xml.sax.SAXException">SAXException</span>(<span title="java.lang.String(&quot;Write failed&quot;)" class="string">&quot;Write failed&quot;</span>, <a href="#153689" title="java.io.IOException">e</a>)
    }
  }
  
  <span class="keyword">def</span> <a title="(name: String)Unit" id="25511">skippedEntity</a>(<a title="String" id="153702">name</a>: <span title="String">String</span>) {
    <span class="keyword">try</span> {
      <a href="#25499" title="=&gt; java.io.OutputStreamWriter">out</a>.<span title="(x$1: java.lang.String)Unit">write</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;&amp;&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#153702" title="String">name</a> + <span title="java.lang.String(&quot;;&quot;)" class="string">&quot;;&quot;</span>)
    }
    <span class="keyword">catch</span> {
      <span title="Nothing" class="keyword">case</span> <a title="java.io.IOException" id="153715">e</a>:<span title="java.io.IOException">IOException</span> =&gt;
        <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String,x$2: java.lang.Exception)org.xml.sax.SAXException" class="keyword">new</span> <span title="org.xml.sax.SAXException">SAXException</span>(<span title="java.lang.String(&quot;Write failed&quot;)" class="string">&quot;Write failed&quot;</span>, <a href="#153715" title="java.io.IOException">e</a>)
    }
  }

  // LexicalHandler methods
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Boolean" id="25513">inDTD</a>: <a title="Boolean" id="1964">Boolean</a> = <span title="Boolean(false)" class="keyword">false</span>
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="java.util.Stack[String]" id="25515">entities</a> = <span title="java.util.Stack[String]" class="keyword">new</span> <a title="java.util.Stack[String]" id="5842">Stack</a>[String]()

  <span class="keyword">def</span> <a title="(name: String,publicID: String,systemID: String)Unit" id="25517">startDTD</a>(<a title="String" id="153728">name</a>: <span title="String">String</span>, <a title="String" id="153729">publicID</a>: <span title="String">String</span>, <a title="String" id="153730">systemID</a>: <span title="String">String</span>) {
    <a href="#25513" title="(x$1: Boolean)Unit">inDTD</a> = <span title="Boolean(true)" class="keyword">true</span>
    // if this is the source document, output a DOCTYPE declaration
    <span title="Unit" class="keyword">if</span> (<a href="#25515" title="=&gt; java.util.Stack[String]">entities</a>.<a title="()Int" id="153084">size</a><a title="(x$1: Int)Boolean" id="2965">(</a>) == <span title="Int(0)" class="int">0</span>) {
      <span class="keyword">var</span> <a title="java.lang.String" id="153743">id</a> = <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>
      <span title="Unit" class="keyword">if</span> (<a href="#153729" title="(x$1: AnyRef)Boolean">publicID</a> != <span title="Null(null)" class="keyword">null</span>) <a href="#153743" title="java.lang.String">id</a> = <span title="(x$1: Any)java.lang.String" class="string">&quot; PUBLIC \&quot;&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#153729" title="String">publicID</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;&quot; &quot;&quot;)" class="string">&quot;\&quot; \&quot;&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#153730" title="String">systemID</a> + <span title="Char('&quot;')" class="char">'&quot;'</span>;
      <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<a href="#153730" title="(x$1: AnyRef)Boolean">systemID</a> != <span title="Null(null)" class="keyword">null</span>) <a href="#153743" title="java.lang.String">id</a> = <span title="(x$1: Any)java.lang.String" class="string">&quot; SYSTEM \&quot;&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#153730" title="String">systemID</a> + <span title="Char('&quot;')" class="char">'&quot;'</span>;
      <span class="keyword">try</span> {
        <a href="#25499" title="=&gt; java.io.OutputStreamWriter">out</a>.<span title="(x$1: java.lang.String)Unit">write</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;&lt;!DOCTYPE &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#153728" title="String">name</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="#153743" title="java.lang.String">id</a> + <span title="java.lang.String(&quot;&gt;\015\012&quot;)" class="string">&quot;&gt;\r\n&quot;</span>)
      }
      <span class="keyword">catch</span> { 
        <span title="Nothing" class="keyword">case</span> <a title="java.io.IOException" id="153781">e</a>:<span title="java.io.IOException">IOException</span> =&gt;
          <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String,x$2: java.lang.Exception)org.xml.sax.SAXException" class="keyword">new</span> <span title="org.xml.sax.SAXException">SAXException</span>(<span title="java.lang.String(&quot;Error while writing DOCTYPE&quot;)" class="string">&quot;Error while writing DOCTYPE&quot;</span>, <a href="#153781" title="java.io.IOException">e</a>)
      }
    }
  }
  <span class="keyword">def</span> <a title="()Unit" id="25518">endDTD</a>() <span title="Unit">{</span>}
    
  <span class="keyword">def</span> <a title="(name: String)Unit" id="25519">startEntity</a>(<a title="String" id="153795">name</a>: <span title="String">String</span>) {
    <a href="#25515" title="=&gt; java.util.Stack[String]">entities</a>.<a title="(x$1: String)String" id="153053">push</a><span title="Unit">(</span><a href="#153795" title="String">name</a>)
  }

  <span class="keyword">def</span> <a title="(name: String)Unit" id="25520">endEntity</a>(<a title="String" id="153800">name</a>: <span title="String">String</span>) {
    <a href="#25515" title="=&gt; java.util.Stack[String]">entities</a>.<a title="()String" id="153056">pop</a><span title="Unit">(</span>)
  }

  <span class="keyword">def</span> <a title="()Unit" id="25521">startCDATA</a>() <span title="Unit">{</span>}
  <span class="keyword">def</span> <a title="()Unit" id="25522">endCDATA</a>() <span title="Unit">{</span>}

  // Just need this reference so we can ask if a comment is 
  // inside an include element or not
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="scala.xml.include.sax.XIncludeFilter" id="25524">filter</a>: <a href="XIncludeFilter.scala.html#9986" title="scala.xml.include.sax.XIncludeFilter">XIncludeFilter</a> = <span title="Null(null)" class="keyword">null</span>
  
  <span class="keyword">def</span> <a title="(filter: scala.xml.include.sax.XIncludeFilter)Unit" id="25526">setFilter</a>(<a title="scala.xml.include.sax.XIncludeFilter" id="25545">filter</a>: <a href="XIncludeFilter.scala.html#9986" title="scala.xml.include.sax.XIncludeFilter">XIncludeFilter</a>) {
    <a href="#9980" title="XIncluder.this.type" class="keyword">this</a>.<a href="#25524" title="(x$1: scala.xml.include.sax.XIncludeFilter)Unit">filter</a> = <a href="#25545" title="scala.xml.include.sax.XIncludeFilter">filter</a>
  }

  <span class="keyword">def</span> <a title="(ch: Array[Char],start: Int,length: Int)Unit" id="25527">comment</a>(<a title="Array[Char]" id="153808">ch</a>: <a href="../../../Array.scala.html#897" title="Array[Char]">Array</a>[Char], <a title="Int" id="153809">start</a>: <span title="Int">Int</span>, <a title="Int" id="153810">length</a>: <span title="Int">Int</span>) {
    <span title="Unit" class="keyword">if</span> (<a title="(x$1: Boolean)Boolean" id="2225">!</a><a href="#25513" title="=&gt; Boolean">inDTD</a> &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#25524" title="=&gt; scala.xml.include.sax.XIncludeFilter">filter</a>.<a href="XIncludeFilter.scala.html#25381" title="()Boolean">insideIncludeElement</a>()) {
      <span class="keyword">try</span> {
        <a href="#25499" title="=&gt; java.io.OutputStreamWriter">out</a>.<span title="(x$1: java.lang.String)Unit">write</span>(<span title="java.lang.String(&quot;&lt;!--&quot;)" class="string">&quot;&lt;!--&quot;</span>)
        <a href="#25499" title="=&gt; java.io.OutputStreamWriter">out</a>.<a title="(x$1: Array[Char],x$2: Int,x$3: Int)Unit" id="153026">write</a>(<a href="#153808" title="Array[Char]">ch</a>, <a href="#153809" title="Int">start</a>, <a href="#153810" title="Int">length</a>)
        <a href="#25499" title="=&gt; java.io.OutputStreamWriter">out</a>.<span title="(x$1: java.lang.String)Unit">write</span>(<span title="java.lang.String(&quot;--&gt;&quot;)" class="string">&quot;--&gt;&quot;</span>)
      }
      <span class="keyword">catch</span> { 
        <span title="Nothing" class="keyword">case</span> <a title="java.io.IOException" id="153850">e</a>: <span title="java.io.IOException">IOException</span> =&gt;
          <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String,x$2: java.lang.Exception)org.xml.sax.SAXException" class="keyword">new</span> <span title="org.xml.sax.SAXException">SAXException</span>(<span title="java.lang.String(&quot;Write failed&quot;)" class="string">&quot;Write failed&quot;</span>, <a href="#153850" title="java.io.IOException">e</a>)
      }
    }
  }
}

        </pre>
    </body>
</html>