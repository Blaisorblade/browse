<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/xml/include/sax/XIncluder.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style">
    </head>
    <body>
        <pre>
/*                     __                                               *\
**     ________ ___   / /  ___     Scala API                            **
**    / __/ __// _ | / /  / _ |    (c) 2002-2009, LAMP/EPFL             **
**  __\ \/ /__/ __ |/ /__/ __ |    http://scala-lang.org/               **
** /____/\___/_/ |_/____/_/ | |                                         **
**                          |/                                          **
\*                                                                      */

// $Id: XIncluder.scala 18387 2009-07-24 15:28:37Z odersky $

<span class="keyword">package</span> scala.xml
<span class="keyword">package</span> include.sax
<span class="keyword">import</span> scala.xml.include._

<span class="keyword">import</span> org.xml.sax.SAXException
<span class="keyword">import</span> org.xml.sax.SAXParseException
<span class="keyword">import</span> org.xml.sax.ContentHandler
<span class="keyword">import</span> org.xml.sax.EntityResolver
<span class="keyword">import</span> org.xml.sax.helpers.XMLReaderFactory
<span class="keyword">import</span> org.xml.sax.XMLReader
<span class="keyword">import</span> org.xml.sax.Locator
<span class="keyword">import</span> org.xml.sax.Attributes
<span class="keyword">import</span> org.xml.sax.ext.LexicalHandler

<span class="keyword">import</span> java.io.{File, IOException, OutputStream, OutputStreamWriter,
                UnsupportedEncodingException, Writer}
<span class="keyword">import</span> java.net.{MalformedURLException, URL}
<span class="keyword">import</span> java.util.Stack

/** XIncluder is a SAX &lt;code&gt;ContentHandler&lt;/code&gt; 
 * that writes its XML document onto an output stream after resolving
 * all &lt;code&gt;xinclude:include&lt;/code&gt; elements.
 *
 * &lt;p&gt;
 *   based on Eliotte Rusty Harold's SAXXIncluder
 * &lt;/p&gt;
 */
<span class="keyword">class</span> <a title="class XIncluder extends java.lang.Object with org.xml.sax.ContentHandler with org.xml.sax.ext.LexicalHandler with ScalaObject" id="9903">XIncluder</a><a href="../../../ScalaObject.scala.html#957" title="ScalaObject">(</a><a title="java.io.OutputStream" id="25421">outs</a>:<a title="java.io.OutputStream" id="3949">OutputStream</a>, <a title="String" id="25422">encoding</a>:<span title="String">String</span>) <span class="keyword">extends</span> <a title="java.lang.Object" id="1756">Object</a> 
<span class="keyword">with</span> <a title="org.xml.sax.ContentHandler" id="23883">ContentHandler</a> <span class="keyword">with</span> <a title="org.xml.sax.ext.LexicalHandler" id="25353">LexicalHandler</a> {

  <span class="keyword">var</span> <a title="java.io.OutputStreamWriter" id="25392">out</a> = <span title="java.io.OutputStreamWriter" class="keyword">new</span> <a title="java.io.OutputStreamWriter" id="3994">OutputStreamWriter</a>(<a href="#25421" title="java.io.OutputStream">outs</a>, <a href="#25422" title="String">encoding</a>)

  <span class="keyword">def</span> <a title="(locator: org.xml.sax.Locator)Unit" id="25394">setDocumentLocator</a>(<a title="org.xml.sax.Locator" id="152584">locator</a>: <a title="org.xml.sax.Locator" id="23880">Locator</a>) <span title="Unit">{</span>}
    
  <span class="keyword">def</span> <a title="()Unit" id="25395">startDocument</a>() {
    <span class="keyword">try</span> {
      <a href="#25392" title="=&gt; java.io.OutputStreamWriter">out</a>.<span title="(x$1: java.lang.String)Unit">write</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;&lt;?xml version='1.0' encoding='&quot;</span> 
                <span title="(x$1: Any)java.lang.String">+</span> <a href="#25422" title="String">encoding</a> + <span title="java.lang.String(&quot;'?&gt;\015\012&quot;)" class="string">&quot;'?&gt;\r\n&quot;</span>);
    }
    <span class="keyword">catch</span> {
      <span title="Nothing" class="keyword">case</span> <a title="java.io.IOException" id="152602">e</a>:<span title="java.io.IOException">IOException</span> =&gt;
        <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String,x$2: java.lang.Exception)org.xml.sax.SAXException" class="keyword">new</span> <span title="org.xml.sax.SAXException">SAXException</span>(<span title="java.lang.String(&quot;Write failed&quot;)" class="string">&quot;Write failed&quot;</span>, <a href="#152602" title="java.io.IOException">e</a>)
    }        
  }

  <span class="keyword">def</span> <a title="()Unit" id="25396">endDocument</a>() {
    <span class="keyword">try</span> {
      <a href="#25392" title="=&gt; java.io.OutputStreamWriter">out</a>.<a title="()Unit" id="152365">flush</a>()
    }
    <span class="keyword">catch</span> { 
      <span title="Nothing" class="keyword">case</span> <a title="java.io.IOException" id="152626">e</a>:<span title="java.io.IOException">IOException</span> =&gt;
        <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String,x$2: java.lang.Exception)org.xml.sax.SAXException" class="keyword">new</span> <span title="org.xml.sax.SAXException">SAXException</span>(<span title="java.lang.String(&quot;Flush failed&quot;)" class="string">&quot;Flush failed&quot;</span>, <a href="#152626" title="java.io.IOException">e</a>)
    }
  }
    
  <span class="keyword">def</span> <a title="(prefix: String,uri: String)Unit" id="25397">startPrefixMapping</a>(<a title="String" id="152639">prefix</a>: <span title="String">String</span> , <a title="String" id="152640">uri</a>: <span title="String">String</span>) <span title="Unit">{</span>}
    
  <span class="keyword">def</span> <a title="(prefix: String)Unit" id="25398">endPrefixMapping</a>(<a title="String" id="152642">prefix</a>: <span title="String">String</span>) <span title="Unit">{</span>}

  <span class="keyword">def</span> <a title="(namespaceURI: String,localName: String,qualifiedName: String,atts: org.xml.sax.Attributes)Unit" id="25399">startElement</a>(<a title="String" id="152644">namespaceURI</a>: <span title="String">String</span>, <a title="String" id="152645">localName</a>: <span title="String">String</span>, <a title="String" id="152646">qualifiedName</a>: <span title="String">String</span>, <a title="org.xml.sax.Attributes" id="152647">atts</a>: <a title="org.xml.sax.Attributes" id="23898">Attributes</a>) = {
    <span class="keyword">try</span> {
      <a href="#25392" title="=&gt; java.io.OutputStreamWriter">out</a>.<span title="(x$1: java.lang.String)Unit">write</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;&lt;&quot;</span> + <a href="#152646" title="String">qualifiedName</a>);
      <span class="keyword">var</span> <a title="Int" id="152676">i</a> = <span title="Int(0)" class="int">0</span>; <span title="Unit" class="keyword">while</span> (<a href="#152676" title="(x$1: Int)Boolean">i</a> &lt; <a href="#152647" title="org.xml.sax.Attributes">atts</a>.<a title="()Int" id="152649">getLength</a>()) <a href="#152677" title="()Unit">{</a>
        <a href="#25392" title="=&gt; java.io.OutputStreamWriter">out</a>.<span title="(x$1: java.lang.String)Unit">write</span>(<span title="java.lang.String(&quot; &quot;)" class="string">&quot; &quot;</span>);   
        <a href="#25392" title="=&gt; java.io.OutputStreamWriter">out</a>.<span title="(x$1: java.lang.String)Unit">write</span>(<a href="#152647" title="org.xml.sax.Attributes">atts</a>.<a title="(x$1: Int)java.lang.String" id="152654">getQName</a>(<a href="#152676" title="Int">i</a>));   
        <a href="#25392" title="=&gt; java.io.OutputStreamWriter">out</a>.<span title="(x$1: java.lang.String)Unit">write</span>(<span title="java.lang.String(&quot;='&quot;)" class="string">&quot;='&quot;</span>);
        <span class="keyword">val</span> <a title="java.lang.String" id="152695">value</a> = <a href="#152647" title="org.xml.sax.Attributes">atts</a>.<a title="(x$1: Int)java.lang.String" id="152658">getValue</a>(<a href="#152676" title="Int">i</a>);
        // @todo Need to use character references if the encoding
        // can't support the character
        <a href="#25392" title="=&gt; java.io.OutputStreamWriter">out</a>.<span title="(x$1: java.lang.String)Unit">write</span>(xml.<a href="../../Utility.scala.html#8724" title="object scala.xml.Utility">Utility</a>.<a href="../../Utility.scala.html#26580" title="(text: String)String">escape</a>(<a href="#152695" title="java.lang.String">value</a>))
        <a href="#25392" title="=&gt; java.io.OutputStreamWriter">out</a>.<span title="(x$1: java.lang.String)Unit">write</span>(<span title="java.lang.String(&quot;'&quot;)" class="string">&quot;'&quot;</span>);
        <a href="#152676" title="Int">i</a> += <span title="Int(1)" class="int">1</span>
      }
      <a href="#25392" title="=&gt; java.io.OutputStreamWriter">out</a>.<span title="(x$1: java.lang.String)Unit">write</span>(<span title="java.lang.String(&quot;&gt;&quot;)" class="string">&quot;&gt;&quot;</span>)
    }
    <span class="keyword">catch</span> { 
      <span title="Nothing" class="keyword">case</span> <a title="java.io.IOException" id="152786">e</a>:<span title="java.io.IOException">IOException</span> =&gt;
        <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String,x$2: java.lang.Exception)org.xml.sax.SAXException" class="keyword">new</span> <span title="org.xml.sax.SAXException">SAXException</span>(<span title="java.lang.String(&quot;Write failed&quot;)" class="string">&quot;Write failed&quot;</span>, <a href="#152786" title="java.io.IOException">e</a>)
    }        
  }
  
  <span class="keyword">def</span> <a title="(namespaceURI: String,localName: String,qualifiedName: String)Unit" id="25400">endElement</a>(<a title="String" id="152799">namespaceURI</a>: <span title="String">String</span>, <a title="String" id="152800">localName</a>:<span title="String">String</span>, <a title="String" id="152801">qualifiedName</a>: <span title="String">String</span>) {
    <span class="keyword">try</span> {
      <a href="#25392" title="=&gt; java.io.OutputStreamWriter">out</a>.<span title="(x$1: java.lang.String)Unit">write</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;&lt;/&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#152801" title="String">qualifiedName</a> + <span title="java.lang.String(&quot;&gt;&quot;)" class="string">&quot;&gt;&quot;</span>)
    }
    <span class="keyword">catch</span> {
      <span title="Nothing" class="keyword">case</span> <a title="java.io.IOException" id="152814">e</a>: <span title="java.io.IOException">IOException</span> =&gt;
        <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String,x$2: java.lang.Exception)org.xml.sax.SAXException" class="keyword">new</span> <span title="org.xml.sax.SAXException">SAXException</span>(<span title="java.lang.String(&quot;Write failed&quot;)" class="string">&quot;Write failed&quot;</span>, <a href="#152814" title="java.io.IOException">e</a>)
    }
  }

  // need to escape characters that are not in the given 
  // encoding using character references????
  <span class="keyword">def</span> <a title="(ch: Array[Char],start: Int,length: Int)Unit" id="25401">characters</a>(<a title="Array[Char]" id="152827">ch</a>: <a href="../../../Array.scala.html#885" title="Array[Char]">Array</a>[Char], <a title="Int" id="152828">start</a>: <span title="Int">Int</span>, <a title="Int" id="152829">length</a>: <span title="Int">Int</span>) {
    <span class="keyword">try</span> {
      <span class="keyword">var</span>  <a title="Int" id="152831">i</a> = <span title="Int(0)" class="int">0</span>; <span title="Unit" class="keyword">while</span> (<a href="#152831" title="(x$1: Int)Boolean">i</a> &lt; <a href="#152829" title="Int">length</a>) <a href="#152832" title="()Unit">{</a>
        <span class="keyword">val</span> <a title="Char" id="152839">c</a> = <a href="../../../Array.scala.html#17716" title="(i: Int)Char">ch</a>(<a href="#152828" title="(x$1: Int)Int">start</a>+<a href="#152831" title="Int">i</a>);
        <span title="Unit" class="keyword">if</span> (<a href="#152839" title="(x$1: Char)Boolean">c</a> == <span title="Char('&amp;')" class="char">'&amp;'</span>) <a href="#25392" title="=&gt; java.io.OutputStreamWriter">out</a>.<span title="(x$1: java.lang.String)Unit">write</span>(<span title="java.lang.String(&quot;&amp;amp;&quot;)" class="string">&quot;&amp;amp;&quot;</span>);
        <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<a href="#152839" title="(x$1: Char)Boolean">c</a> == <span title="Char('&lt;')" class="char">'&lt;'</span>) <a href="#25392" title="=&gt; java.io.OutputStreamWriter">out</a>.<span title="(x$1: java.lang.String)Unit">write</span>(<span title="java.lang.String(&quot;&amp;lt;&quot;)" class="string">&quot;&amp;lt;&quot;</span>);
        // This next fix is normally not necessary.
        // However, it is required if text contains ]]&gt;
        // (The end CDATA section delimiter)
        <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<a href="#152839" title="(x$1: Char)Boolean">c</a> == <span title="Char('&gt;')" class="char">'&gt;'</span>) <a href="#25392" title="=&gt; java.io.OutputStreamWriter">out</a>.<span title="(x$1: java.lang.String)Unit">write</span>(<span title="java.lang.String(&quot;&amp;gt;&quot;)" class="string">&quot;&amp;gt;&quot;</span>);
        <span class="keyword">else</span> <a href="#25392" title="=&gt; java.io.OutputStreamWriter">out</a>.<a title="(x$1: Int)Unit" id="152355">write</a>(<a href="../../../Predef.scala.html#16381" title="implicit scala.Predef.char2int : (x: Char)Int">c</a>);
        <a href="#152831" title="Int">i</a> = <a href="#152831" title="(x$1: Int)Int">i</a>+<span title="Int(1)" class="int">1</span>;
      }
    }
    <span class="keyword">catch</span> { 
      <span title="Nothing" class="keyword">case</span> <a title="java.io.IOException" id="152983">e</a>: <span title="java.io.IOException">IOException</span> =&gt; 
        <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String,x$2: java.lang.Exception)org.xml.sax.SAXException" class="keyword">new</span> <span title="org.xml.sax.SAXException">SAXException</span>(<span title="java.lang.String(&quot;Write failed&quot;)" class="string">&quot;Write failed&quot;</span>, <a href="#152983" title="java.io.IOException">e</a>);      
    }
  }

  <span class="keyword">def</span>  <a title="(ch: Array[Char],start: Int,length: Int)Unit" id="25402">ignorableWhitespace</a>(<a title="Array[Char]" id="152996">ch</a>: <a href="../../../Array.scala.html#885" title="Array[Char]">Array</a>[Char], <a title="Int" id="152997">start</a>: <span title="Int">Int</span> , <a title="Int" id="152998">length</a>: <span title="Int">Int</span>) {
    <a href="#9903" title="XIncluder.this.type" class="keyword">this</a>.<a href="#25401" title="(ch: Array[Char],start: Int,length: Int)Unit">characters</a>(<a href="#152996" title="Array[Char]">ch</a>, <a href="#152997" title="Int">start</a>, <a href="#152998" title="Int">length</a>)
  }
  
  // do I need to escape text in PI????
  <span class="keyword">def</span> <a title="(target: String,data: String)Unit" id="25403">processingInstruction</a>(<a title="String" id="153002">target</a>: <span title="String">String</span>, <a title="String" id="153003">data</a>: <span title="String">String</span>) {
    <span class="keyword">try</span> {
      <a href="#25392" title="=&gt; java.io.OutputStreamWriter">out</a>.<span title="(x$1: java.lang.String)Unit">write</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;&lt;?&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#153002" title="String">target</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; &quot;)" class="string">&quot; &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#153003" title="String">data</a> + <span title="java.lang.String(&quot;?&gt;&quot;)" class="string">&quot;?&gt;&quot;</span>)
    }
    <span class="keyword">catch</span> { 
      <span title="Nothing" class="keyword">case</span> <a title="java.io.IOException" id="153020">e</a>:<span title="java.io.IOException">IOException</span> =&gt;
        <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String,x$2: java.lang.Exception)org.xml.sax.SAXException" class="keyword">new</span> <span title="org.xml.sax.SAXException">SAXException</span>(<span title="java.lang.String(&quot;Write failed&quot;)" class="string">&quot;Write failed&quot;</span>, <a href="#153020" title="java.io.IOException">e</a>)
    }
  }
  
  <span class="keyword">def</span> <a title="(name: String)Unit" id="25404">skippedEntity</a>(<a title="String" id="153033">name</a>: <span title="String">String</span>) {
    <span class="keyword">try</span> {
      <a href="#25392" title="=&gt; java.io.OutputStreamWriter">out</a>.<span title="(x$1: java.lang.String)Unit">write</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;&amp;&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#153033" title="String">name</a> + <span title="java.lang.String(&quot;;&quot;)" class="string">&quot;;&quot;</span>)
    }
    <span class="keyword">catch</span> {
      <span title="Nothing" class="keyword">case</span> <a title="java.io.IOException" id="153046">e</a>:<span title="java.io.IOException">IOException</span> =&gt;
        <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String,x$2: java.lang.Exception)org.xml.sax.SAXException" class="keyword">new</span> <span title="org.xml.sax.SAXException">SAXException</span>(<span title="java.lang.String(&quot;Write failed&quot;)" class="string">&quot;Write failed&quot;</span>, <a href="#153046" title="java.io.IOException">e</a>)
    }
  }

  // LexicalHandler methods
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Boolean" id="25406">inDTD</a>: <a title="Boolean" id="1949">Boolean</a> = <span title="Boolean(false)" class="keyword">false</span>
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="java.util.Stack[String]" id="25408">entities</a> = <span title="java.util.Stack[String]" class="keyword">new</span> <a title="java.util.Stack[String]" id="5779">Stack</a>[String]()

  <span class="keyword">def</span> <a title="(name: String,publicID: String,systemID: String)Unit" id="25410">startDTD</a>(<a title="String" id="153059">name</a>: <span title="String">String</span>, <a title="String" id="153060">publicID</a>: <span title="String">String</span>, <a title="String" id="153061">systemID</a>: <span title="String">String</span>) {
    <a href="#25406" title="(x$1: Boolean)Unit">inDTD</a> = <span title="Boolean(true)" class="keyword">true</span>
    // if this is the source document, output a DOCTYPE declaration
    <span title="Unit" class="keyword">if</span> (<a href="#25408" title="=&gt; java.util.Stack[String]">entities</a>.<a title="()Int" id="152415">size</a><a title="(x$1: Int)Boolean" id="2950">(</a>) == <span title="Int(0)" class="int">0</span>) {
      <span class="keyword">var</span> <a title="java.lang.String" id="153074">id</a> = <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>
      <span title="Unit" class="keyword">if</span> (<a href="#153060" title="(x$1: AnyRef)Boolean">publicID</a> != <span title="Null(null)" class="keyword">null</span>) <a href="#153074" title="java.lang.String">id</a> = <span title="(x$1: Any)java.lang.String" class="string">&quot; PUBLIC \&quot;&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#153060" title="String">publicID</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;&quot; &quot;&quot;)" class="string">&quot;\&quot; \&quot;&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#153061" title="String">systemID</a> + <span title="Char('&quot;')" class="char">'&quot;'</span>;
      <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> (<a href="#153061" title="(x$1: AnyRef)Boolean">systemID</a> != <span title="Null(null)" class="keyword">null</span>) <a href="#153074" title="java.lang.String">id</a> = <span title="(x$1: Any)java.lang.String" class="string">&quot; SYSTEM \&quot;&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#153061" title="String">systemID</a> + <span title="Char('&quot;')" class="char">'&quot;'</span>;
      <span class="keyword">try</span> {
        <a href="#25392" title="=&gt; java.io.OutputStreamWriter">out</a>.<span title="(x$1: java.lang.String)Unit">write</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;&lt;!DOCTYPE &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#153059" title="String">name</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="#153074" title="java.lang.String">id</a> + <span title="java.lang.String(&quot;&gt;\015\012&quot;)" class="string">&quot;&gt;\r\n&quot;</span>)
      }
      <span class="keyword">catch</span> { 
        <span title="Nothing" class="keyword">case</span> <a title="java.io.IOException" id="153112">e</a>:<span title="java.io.IOException">IOException</span> =&gt;
          <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String,x$2: java.lang.Exception)org.xml.sax.SAXException" class="keyword">new</span> <span title="org.xml.sax.SAXException">SAXException</span>(<span title="java.lang.String(&quot;Error while writing DOCTYPE&quot;)" class="string">&quot;Error while writing DOCTYPE&quot;</span>, <a href="#153112" title="java.io.IOException">e</a>)
      }
    }
  }
  <span class="keyword">def</span> <a title="()Unit" id="25411">endDTD</a>() <span title="Unit">{</span>}
    
  <span class="keyword">def</span> <a title="(name: String)Unit" id="25412">startEntity</a>(<a title="String" id="153126">name</a>: <span title="String">String</span>) {
    <a href="#25408" title="=&gt; java.util.Stack[String]">entities</a>.<a title="(x$1: String)String" id="152384">push</a><span title="Unit">(</span><a href="#153126" title="String">name</a>)
  }

  <span class="keyword">def</span> <a title="(name: String)Unit" id="25413">endEntity</a>(<a title="String" id="153131">name</a>: <span title="String">String</span>) {
    <a href="#25408" title="=&gt; java.util.Stack[String]">entities</a>.<a title="()String" id="152387">pop</a><span title="Unit">(</span>)
  }

  <span class="keyword">def</span> <a title="()Unit" id="25414">startCDATA</a>() <span title="Unit">{</span>}
  <span class="keyword">def</span> <a title="()Unit" id="25415">endCDATA</a>() <span title="Unit">{</span>}

  // Just need this reference so we can ask if a comment is 
  // inside an include element or not
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="scala.xml.include.sax.XIncludeFilter" id="25417">filter</a>: <a href="XIncludeFilter.scala.html#9909" title="scala.xml.include.sax.XIncludeFilter">XIncludeFilter</a> = <span title="Null(null)" class="keyword">null</span>
  
  <span class="keyword">def</span> <a title="(filter: scala.xml.include.sax.XIncludeFilter)Unit" id="25419">setFilter</a>(<a title="scala.xml.include.sax.XIncludeFilter" id="25438">filter</a>: <a href="XIncludeFilter.scala.html#9909" title="scala.xml.include.sax.XIncludeFilter">XIncludeFilter</a>) {
    <a href="#9903" title="XIncluder.this.type" class="keyword">this</a>.<a href="#25417" title="(x$1: scala.xml.include.sax.XIncludeFilter)Unit">filter</a> = <a href="#25438" title="scala.xml.include.sax.XIncludeFilter">filter</a>
  }

  <span class="keyword">def</span> <a title="(ch: Array[Char],start: Int,length: Int)Unit" id="25420">comment</a>(<a title="Array[Char]" id="153139">ch</a>: <a href="../../../Array.scala.html#885" title="Array[Char]">Array</a>[Char], <a title="Int" id="153140">start</a>: <span title="Int">Int</span>, <a title="Int" id="153141">length</a>: <span title="Int">Int</span>) {
    <span title="Unit" class="keyword">if</span> (<a title="(x$1: Boolean)Boolean" id="2210">!</a><a href="#25406" title="=&gt; Boolean">inDTD</a> &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#25417" title="=&gt; scala.xml.include.sax.XIncludeFilter">filter</a>.<a href="XIncludeFilter.scala.html#25274" title="()Boolean">insideIncludeElement</a>()) {
      <span class="keyword">try</span> {
        <a href="#25392" title="=&gt; java.io.OutputStreamWriter">out</a>.<span title="(x$1: java.lang.String)Unit">write</span>(<span title="java.lang.String(&quot;&lt;!--&quot;)" class="string">&quot;&lt;!--&quot;</span>)
        <a href="#25392" title="=&gt; java.io.OutputStreamWriter">out</a>.<a title="(x$1: Array[Char],x$2: Int,x$3: Int)Unit" id="152357">write</a>(<a href="#153139" title="Array[Char]">ch</a>, <a href="#153140" title="Int">start</a>, <a href="#153141" title="Int">length</a>)
        <a href="#25392" title="=&gt; java.io.OutputStreamWriter">out</a>.<span title="(x$1: java.lang.String)Unit">write</span>(<span title="java.lang.String(&quot;--&gt;&quot;)" class="string">&quot;--&gt;&quot;</span>)
      }
      <span class="keyword">catch</span> { 
        <span title="Nothing" class="keyword">case</span> <a title="java.io.IOException" id="153181">e</a>: <span title="java.io.IOException">IOException</span> =&gt;
          <span title="Nothing" class="keyword">throw</span> <span title="(x$1: java.lang.String,x$2: java.lang.Exception)org.xml.sax.SAXException" class="keyword">new</span> <span title="org.xml.sax.SAXException">SAXException</span>(<span title="java.lang.String(&quot;Write failed&quot;)" class="string">&quot;Write failed&quot;</span>, <a href="#153181" title="java.io.IOException">e</a>)
      }
    }
  }
}

        </pre>
    </body>
</html>