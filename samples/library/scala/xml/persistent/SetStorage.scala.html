<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/xml/persistent/SetStorage.scala</title>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style">
    </head>
    <body onload="initializeLinked()">
        <pre>
<span class="comment">/*                     __                                               *\
**     ________ ___   / /  ___     Scala API                            **
**    / __/ __// _ | / /  / _ |    (c) 2002-2009, LAMP/EPFL             **
**  __\ \/ /__/ __ |/ /__/ __ |    http://scala-lang.org/               **
** /____/\___/_/ |_/____/_/ | |                                         **
**                          |/                                          **
\*                                                                      */</span>

<span class="comment">// $Id: SetStorage.scala 16893 2009-01-13 13:09:22Z cunei $</span>

<span class="keyword">package</span> scala.xml.persistent

<span class="keyword">import</span> scala.collection.mutable
<span class="keyword">import</span> java.io.File

<span class="comment">/** A persistent store with set semantics. This class allows to add and remove 
 *  trees, but never contains two structurally equal trees.
 *
 *  @author Burak Emir
 */</span>
<span class="keyword">class</span> <span class="typed"><span class="type">class SetStorage extends scala.xml.persistent.CachedFileStorage with ScalaObject</span><a id="13192">SetStorage</a></span>(<span class="typed"><span class="type">java.io.File</span><span id="78998"><a id="79009">file</a></span></span>: <span class="typed"><span class="type">java.io.File</span><a id="3667">File</a></span>) <span class="keyword">extends</span> <span class="typed"><span class="type">scala.xml.persistent.CachedFileStorage</span><a href="CachedFileStorage.scala.html#13183">CachedFileStorage</a></span>(<span class="typed"><span class="type">java.io.File</span><a href="#79009">file</a></span>) {

  <span class="keyword">private</span> <span class="keyword">var</span> <span class="typed"><span class="type">scala.collection.mutable.HashSet[scala.xml.Node]</span><span id="79002"><span id="79000"><span id="79001"><a id="79008">theSet</a></span></span></span></span>: mutable.<span class="typed"><span class="type">scala.collection.mutable.HashSet[scala.xml.Node]</span><a href="../../collection/mutable/HashSet.scala.html#11140">HashSet</a></span>[Node] = <span class="typed"><span class="type">scala.collection.mutable.HashSet[scala.xml.Node]</span><span class="keyword">new</span></span> mutable.<span class="typed"><span class="type">scala.collection.mutable.HashSet[scala.xml.Node]</span><a href="../../collection/mutable/HashSet.scala.html#11140">HashSet</a></span>[Node]

  <span class="comment">// initialize</span>

  {
    <span class="keyword">val</span> <span class="typed"><span class="type">Iterator[scala.xml.Node]</span><a id="79010">it</a></span> = <span class="keyword">super</span>.<span class="typed"><span class="type">=&gt; Iterator[scala.xml.Node]</span><a href="CachedFileStorage.scala.html#54347">initialNodes</a></span>
    <span class="typed"><span class="type">(Boolean)Unit</span><a href="CachedFileStorage.scala.html#54343">dirty</a></span> = <span class="typed"><span class="type">Iterator[scala.xml.Node]</span><a href="#79010">it</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../../Iterator.scala.html#19975">hasNext</a></span>
    <span class="keyword">for</span>(<span class="keyword">val</span> <span class="typed"><span class="type">((scala.xml.Node) =&gt; Unit)Unit</span><a href="../../Iterator.scala.html#20001" id="79013">x</a></span> &lt;- <span class="typed"><span class="type">Iterator[scala.xml.Node]</span><a href="#79010">it</a></span>) {
      <span class="typed"><span class="type">=&gt; scala.collection.mutable.HashSet[scala.xml.Node]</span><a href="#79000">theSet</a></span> <span class="typed"><span class="type">(scala.xml.Node)Unit</span><a href="../../collection/mutable/HashSet.scala.html#38148">+=</a></span> <span class="typed"><span class="type">scala.xml.Node</span><a href="#79013">x</a></span>;
    }
  }

  <span class="comment">/* forwarding methods to hashset*/</span>

  <span class="keyword">def</span> <span class="typed"><span class="type">(scala.xml.Node)Unit</span><a id="79003">+=</a></span> (<span class="typed"><span class="type">scala.xml.Node</span><a id="79016">e</a></span>: <span class="typed"><span class="type">scala.xml.Node</span><a href="../Node.scala.html#7174">Node</a></span>): <span class="typed"><span class="type">Unit</span><a id="2167">Unit</a></span> = <span class="typed"><span class="type">(Unit)Unit</span><a href="#13192" id="5794">synchronized</a></span> { <span class="typed"><span class="type">SetStorage.this.type</span><a href="#13192" class="keyword">this</a></span>.<span class="typed"><span class="type">(Boolean)Unit</span><a href="CachedFileStorage.scala.html#54343">dirty</a></span> = <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>; <span class="typed"><span class="type">=&gt; scala.collection.mutable.HashSet[scala.xml.Node]</span><a href="#79000">theSet</a></span> <span class="typed"><span class="type">(scala.xml.Node)Unit</span><a href="../../collection/mutable/HashSet.scala.html#38148">+=</a></span> <span class="typed"><span class="type">scala.xml.Node</span><a href="#79016">e</a></span> }

  <span class="keyword">def</span> <span class="typed"><span class="type">(scala.xml.Node)Unit</span><a id="79004">-=</a></span> (<span class="typed"><span class="type">scala.xml.Node</span><a id="79020">e</a></span>: <span class="typed"><span class="type">scala.xml.Node</span><a href="../Node.scala.html#7174">Node</a></span>): <span class="typed"><span class="type">Unit</span><a id="2167">Unit</a></span> = <span class="typed"><span class="type">(Unit)Unit</span><a href="#13192" id="5794">synchronized</a></span> { <span class="typed"><span class="type">SetStorage.this.type</span><a href="#13192" class="keyword">this</a></span>.<span class="typed"><span class="type">(Boolean)Unit</span><a href="CachedFileStorage.scala.html#54343">dirty</a></span> = <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>; <span class="typed"><span class="type">=&gt; scala.collection.mutable.HashSet[scala.xml.Node]</span><a href="#79000">theSet</a></span> <span class="typed"><span class="type">(scala.xml.Node)Unit</span><a href="../../collection/mutable/HashSet.scala.html#38149">-=</a></span> <span class="typed"><span class="type">scala.xml.Node</span><a href="#79020">e</a></span> }

  <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; &lt;refinement&gt; extends java.lang.Object with Iterator[scala.xml.Node]</span><a id="79005">nodes</a></span> = <span class="typed"><span class="type">(java.lang.Object with Iterator[scala.xml.Node])java.lang.Object with Iterator[scala.xml.Node]</span><a href="#13192" id="5794">synchronized</a></span> { <span class="typed"><span class="type">=&gt; scala.collection.mutable.HashSet[scala.xml.Node]</span><a href="#79000">theSet</a></span>.<span class="typed"><span class="type">=&gt; &lt;refinement&gt; extends java.lang.Object with Iterator[scala.xml.Node]</span><a href="../../collection/mutable/FlatHashTable.scala.html#38172">elements</a></span> }

}

        </pre>
    </body>
</html>