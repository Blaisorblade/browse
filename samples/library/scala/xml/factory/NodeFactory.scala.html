<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/xml/factory/NodeFactory.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style">
    </head>
    <body>
        <pre>
/*                     __                                               *\
**     ________ ___   / /  ___     Scala API                            **
**    / __/ __// _ | / /  / _ |    (c) 2003-2009, LAMP/EPFL             **
**  __\ \/ /__/ __ |/ /__/ __ |                                         **
** /____/\___/_/ |_/____/_/ | |                                         **
**                          |/                                          **
\*                                                                      */

// $Id: NodeFactory.scala 18387 2009-07-24 15:28:37Z odersky $

<span class="keyword">package</span> scala.xml
<span class="keyword">package</span> factory

<span class="keyword">import</span> parsing.{ FactoryAdapter, NoBindingFactoryAdapter }
<span class="keyword">import</span> org.xml.sax.InputSource
<span class="keyword">import</span> java.io.{ InputStream, Reader, StringReader, File, FileDescriptor, FileInputStream }
<span class="keyword">import</span> javax.xml.parsers.{ SAXParser, SAXParserFactory }

<span class="keyword">trait</span> <a title="trait NodeFactory[A &lt;: scala.xml.Node] extends java.lang.Object with ScalaObject" id="15398">NodeFactory</a>[<a title="&gt;: Nothing &lt;: scala.xml.Node" id="16797">A</a> &lt;: Node]
<a href="../../ScalaObject.scala.html#969" title="ScalaObject">{</a>
  <span class="keyword">val</span> <a title="Boolean" id="244258">ignoreComments</a>  = <span title="Boolean(false)" class="keyword">false</span>
  <span class="keyword">val</span> <a title="Boolean" id="244260">ignoreProcInstr</a> = <span title="Boolean(false)" class="keyword">false</span>

  /* default behaviour is to use hash-consing */
  <span class="keyword">val</span> <a title="scala.collection.mutable.HashMap[Int,List[A]]" id="244262">cache</a> = <span title="scala.collection.mutable.HashMap[Int,List[A]]" class="keyword">new</span> collection.mutable.<a href="../../collection/mutable/HashMap.scala.html#7818" title="scala.collection.mutable.HashMap[Int,List[A]]">HashMap</a>[Int, List[A]]

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(pre: String,name: String,attrs: scala.xml.MetaData,scope: scala.xml.NamespaceBinding,children: Seq[scala.xml.Node])A" id="244264">create</a>(<a title="String" id="244283">pre</a>: <span title="String">String</span>, <a title="String" id="244284">name</a>: <span title="String">String</span>, <a title="scala.xml.MetaData" id="244285">attrs</a>: <a href="../MetaData.scala.html#8654" title="scala.xml.MetaData">MetaData</a>, <a title="scala.xml.NamespaceBinding" id="244286">scope</a>: <a href="../NamespaceBinding.scala.html#8828" title="scala.xml.NamespaceBinding">NamespaceBinding</a>, <a title="Seq[scala.xml.Node]" id="244287">children</a>:<a href="../../collection/Sequence.scala.html#4376" title="Seq[scala.xml.Node]">Seq</a>[Node]): <a href="#16797" title="A">A</a>
  
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(hash: Int,old: List[A],pre: String,name: String,attrSeq: scala.xml.MetaData,scope: scala.xml.NamespaceBinding,children: Seq[scala.xml.Node])A" id="244265">construct</a>(<a title="Int" id="252650">hash</a>: <a title="Int" id="2190">Int</a>, <a title="List[A]" id="252651">old</a>:<a href="../../collection/immutable/List.scala.html#9048" title="List[A]">List</a>[A], <a title="String" id="252652">pre</a>: <span title="String">String</span>, <a title="String" id="252653">name</a>: <span title="String">String</span>, <a title="scala.xml.MetaData" id="252654">attrSeq</a>:<a href="../MetaData.scala.html#8654" title="scala.xml.MetaData">MetaData</a>, <a title="scala.xml.NamespaceBinding" id="252655">scope</a>: <a href="../NamespaceBinding.scala.html#8828" title="scala.xml.NamespaceBinding">NamespaceBinding</a>, <a title="Seq[scala.xml.Node]" id="252656">children</a>:<a href="../../collection/Sequence.scala.html#4376" title="Seq[scala.xml.Node]">Seq</a>[Node]): <a href="#16797" title="A">A</a> = {
    <span class="keyword">val</span> <a title="A" id="252658">el</a> = <a href="#244264" title="(pre: String,name: String,attrs: scala.xml.MetaData,scope: scala.xml.NamespaceBinding,children: Seq[scala.xml.Node])A">create</a>(<a href="#252652" title="String">pre</a>, <a href="#252653" title="String">name</a>, <a href="#252654" title="scala.xml.MetaData">attrSeq</a>, <a href="#252655" title="scala.xml.NamespaceBinding">scope</a>, <a href="#252656" title="Seq[scala.xml.Node]">children</a>)
    <a href="#244262" title="=&gt; scala.collection.mutable.HashMap[Int,List[A]]">cache</a>.<a href="../../collection/mutable/HashMap.scala.html#91739" title="(key: Int,value: List[A])Unit">update</a>(<a href="#252650" title="Int">hash</a>, <a href="#252658" title="A">el</a> <a href="#252667" title="A">::</a> <a href="../../collection/immutable/List.scala.html#17737" title="(x: A)List[A]">old</a>)
    <a href="#252658" title="A">el</a>
  }
  
  <span class="keyword">def</span> <a title="(ch1: Seq[scala.xml.Node],ch2: Seq[scala.xml.Node])Boolean" id="244266">eqElements</a>(<a title="Seq[scala.xml.Node]" id="252677">ch1</a>: <a href="../../collection/Sequence.scala.html#4376" title="Seq[scala.xml.Node]">Seq</a>[Node], <a title="Seq[scala.xml.Node]" id="252678">ch2</a>: <a href="../../collection/Sequence.scala.html#4376" title="Seq[scala.xml.Node]">Seq</a>[Node]): <a title="Boolean" id="1964">Boolean</a> =
    <a href="#252677" title="Seq[scala.xml.Node]">ch1</a>.<a href="../../collection/generic/SequenceTemplate.scala.html#17525" title="=&gt; &lt;refinement&gt; extends java.lang.Object with scala.collection.generic.SequenceView[scala.xml.Node,Sequence[scala.xml.Node]]">view</a>.<a href="../../collection/generic/IterableViewTemplate.scala.html#20644" title="(that: Iterable[scala.xml.Node],thisElem: scala.xml.Node,thatElem: scala.xml.Node)(implicit bf: scala.collection.generic.BuilderFactory[(scala.xml.Node, scala.xml.Node),scala.collection.generic.SequenceView[(scala.xml.Node, scala.xml.Node),Sequence[_]],scala.collection.generic.SequenceView[scala.xml.Node,Sequence[scala.xml.Node]]])scala.collection.generic.SequenceView[(scala.xml.Node, scala.xml.Node),Sequence[_]]">zipAll</a><a href="../../collection/generic/TraversableTemplate.scala.html#17290" title="(p: ((scala.xml.Node, scala.xml.Node)) =&gt; Boolean)Boolean">(</a><a href="#252678" title="Seq[scala.xml.Node]">ch2</a>.<a href="../../collection/generic/SequenceTemplate.scala.html#17525" title="=&gt; &lt;refinement&gt; extends java.lang.Object with scala.collection.generic.SequenceView[scala.xml.Node,Sequence[scala.xml.Node]]">view</a>, <span title="Null(null)" class="keyword">null</span>, <span title="Null(null)" class="keyword">null</span>) forall <a href="#252820" title="Boolean">{</a> <span title="Boolean" class="keyword">case</span> (<a title="scala.xml.Node" id="252823">x</a>,<a title="scala.xml.Node" id="252824">y</a>) =&gt; <a href="#252823" title="(x$1: AnyRef)Boolean" id="6594">x</a> eq <a href="#252824" title="scala.xml.Node">y</a> }

  <span class="keyword">def</span> <a title="(n: scala.xml.Node,pre: String,name: String,attrSeq: scala.xml.MetaData,scope: scala.xml.NamespaceBinding,children: Seq[scala.xml.Node])Boolean" id="244267">nodeEquals</a>(<a title="scala.xml.Node" id="252831">n</a>: <a href="../Node.scala.html#8723" title="scala.xml.Node">Node</a>, <a title="String" id="252832">pre</a>: <span title="String">String</span>, <a title="String" id="252833">name</a>: <span title="String">String</span>, <a title="scala.xml.MetaData" id="252834">attrSeq</a>:<a href="../MetaData.scala.html#8654" title="scala.xml.MetaData">MetaData</a>, <a title="scala.xml.NamespaceBinding" id="252835">scope</a>: <a href="../NamespaceBinding.scala.html#8828" title="scala.xml.NamespaceBinding">NamespaceBinding</a>, <a title="Seq[scala.xml.Node]" id="252836">children</a>: <a href="../../collection/Sequence.scala.html#4376" title="Seq[scala.xml.Node]">Seq</a>[Node]) =
    <a href="#252831" title="scala.xml.Node">n</a>.<a href="../Node.scala.html#21098" title="(x$1: AnyRef)Boolean">prefix</a> <span title="(x$1: Boolean)Boolean">==</span> <a href="#252832" title="String">pre</a> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span>
    <a href="#252831" title="scala.xml.Node">n</a>.<a href="../Node.scala.html#21099" title="(x$1: AnyRef)Boolean">label</a> == <a href="#252833" title="String">name</a> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span>
    <a href="#252831" title="scala.xml.Node">n</a>.<a href="../Node.scala.html#21108" title="(x$1: AnyRef)Boolean">attributes</a> == <a href="#252834" title="scala.xml.MetaData">attrSeq</a> &amp;&amp; 
    // scope?
    <a href="#244266" title="(ch1: Seq[scala.xml.Node],ch2: Seq[scala.xml.Node])Boolean">eqElements</a>(<a href="#252831" title="scala.xml.Node">n</a>.<a href="../Node.scala.html#21109" title="=&gt; Seq[scala.xml.Node]">child</a>, <a href="#252836" title="Seq[scala.xml.Node]">children</a>)
  
  <span class="keyword">def</span> <a title="(pre: String,name: String,attrSeq: scala.xml.MetaData,scope: scala.xml.NamespaceBinding,children: Seq[scala.xml.Node])A" id="244268">makeNode</a>(<a title="String" id="252868">pre</a>: <span title="String">String</span>, <a title="String" id="252869">name</a>: <span title="String">String</span>, <a title="scala.xml.MetaData" id="252870">attrSeq</a>: <a href="../MetaData.scala.html#8654" title="scala.xml.MetaData">MetaData</a>, <a title="scala.xml.NamespaceBinding" id="252871">scope</a>: <a href="../NamespaceBinding.scala.html#8828" title="scala.xml.NamespaceBinding">NamespaceBinding</a>, <a title="Seq[scala.xml.Node]" id="252872">children</a>: <a href="../../collection/Sequence.scala.html#4376" title="Seq[scala.xml.Node]">Seq</a>[Node]): <a href="#16797" title="A">A</a> = {
    <span class="keyword">val</span> <a title="Int" id="252874">hash</a> = <a href="../Utility.scala.html#8793" title="object scala.xml.Utility">Utility</a>.<a href="../Utility.scala.html#26698" title="(pre: String,label: String,attribHashCode: Int,scpeHash: Int,children: Seq[scala.xml.Node])Int">hashCode</a>( <a href="#252868" title="String">pre</a>, <a href="#252869" title="String">name</a>, <a href="#252870" title="scala.xml.MetaData">attrSeq</a>.<a title="()Int" id="6576">hashCode</a>(), <a href="#252871" title="scala.xml.NamespaceBinding">scope</a>.<a href="../NamespaceBinding.scala.html#56036" title="()Int">hashCode</a>(), <a href="#252872" title="Seq[scala.xml.Node]">children</a>)
    <span class="keyword">def</span> <a title="(old: List[A])A" id="252875">cons</a>(<a title="List[A]" id="252884">old</a>: <a href="../../collection/immutable/List.scala.html#9048" title="List[A]">List</a>[A]) = <a href="#244265" title="(hash: Int,old: List[A],pre: String,name: String,attrSeq: scala.xml.MetaData,scope: scala.xml.NamespaceBinding,children: Seq[scala.xml.Node])A">construct</a>(<a href="#252874" title="Int">hash</a>, <a href="#252884" title="List[A]">old</a>, <a href="#252868" title="String">pre</a>, <a href="#252869" title="String">name</a>, <a href="#252870" title="scala.xml.MetaData">attrSeq</a>, <a href="#252871" title="scala.xml.NamespaceBinding">scope</a>, <a href="#252872" title="Seq[scala.xml.Node]">children</a>)
    
    (<a href="../../collection/mutable/HashMap.scala.html#91737" title="(key: Int)Option[List[A]]">cache</a> get <a href="#252874" title="Int">hash</a>) <span title="A" class="keyword">match</span> {
      <span title="A" class="keyword">case</span> Some(<a title="List[A]" id="252893">list</a>) =&gt;    // find structurally equal
        <a href="#252893" title="List[A]">list</a>.<a href="../../collection/generic/LinearSequenceTemplate.scala.html#19515" title="(p: (A) =&gt; Boolean)Option[A]">find</a>(<a href="#244267" title="(n: scala.xml.Node,pre: String,name: String,attrSeq: scala.xml.MetaData,scope: scala.xml.NamespaceBinding,children: Seq[scala.xml.Node])Boolean">nodeEquals</a>(<a href="#252900" title="A">_</a>, <a href="#252868" title="String">pre</a>, <a href="#252869" title="String">name</a>, <a href="#252870" title="scala.xml.MetaData">attrSeq</a>, <a href="#252871" title="scala.xml.NamespaceBinding">scope</a>, <a href="#252872" title="Seq[scala.xml.Node]">children</a>)) <span title="A" class="keyword">match</span> {
          <span title="A" class="keyword">case</span> Some(<a title="A" id="252906">x</a>)    =&gt; <a href="#252906" title="A">x</a>
          <span title="A" class="keyword">case</span> _          =&gt; <a href="#252875" title="(old: List[A])A">cons</a>(<a href="#252893" title="List[A]">list</a>)
        }
      <span title="A" class="keyword">case</span> <a href="../../Option.scala.html#472" title="object None">None</a>           =&gt; <a href="#252875" title="(old: List[A])A">cons</a>(<a href="../../collection/immutable/List.scala.html#9334" title="object Nil">Nil</a>)
    }
  }
  
  <span class="keyword">def</span> <a title="(s: String)scala.xml.Text" id="244269">makeText</a>(<a title="String" id="252913">s</a>: <span title="String">String</span>) = <a href="../Text.scala.html#26791" title="(_data: String)scala.xml.Text">Text</a>(<a href="#252913" title="String">s</a>)
  <span class="keyword">def</span> <a title="(s: String)Seq[scala.xml.Comment]" id="244270">makeComment</a>(<a title="String" id="252922">s</a>: <span title="String">String</span>): <a href="../../collection/Sequence.scala.html#4376" title="Seq[scala.xml.Comment]">Seq</a>[Comment]  = 
    <span title="Seq[scala.xml.Comment]" class="keyword">if</span> (<a href="#244258" title="=&gt; Boolean">ignoreComments</a>) <a href="../../collection/immutable/List.scala.html#9334" title="object Nil">Nil</a> <span class="keyword">else</span> <a href="../../collection/immutable/List.scala.html#17642" title="(xs: scala.xml.Comment*)List[scala.xml.Comment]">List</a>(<a href="../Comment.scala.html#50444" title="(commentText: String)scala.xml.Comment">Comment</a>(<a href="#252922" title="String">s</a>))
  <span class="keyword">def</span> <a title="(t: String,s: String)Seq[scala.xml.ProcInstr]" id="244271">makeProcInstr</a>(<a title="String" id="244312">t</a>: <span title="String">String</span>, <a title="String" id="244313">s</a>: <span title="String">String</span>): <a href="../../collection/Sequence.scala.html#4376" title="Seq[scala.xml.ProcInstr]">Seq</a>[ProcInstr] =
    <span title="Seq[scala.xml.ProcInstr]" class="keyword">if</span> (<a href="#244260" title="=&gt; Boolean">ignoreProcInstr</a>) <a href="../../collection/immutable/List.scala.html#9334" title="object Nil">Nil</a> <span class="keyword">else</span> <a href="../../collection/immutable/List.scala.html#17642" title="(xs: scala.xml.ProcInstr*)List[scala.xml.ProcInstr]">List</a>(<a href="../ProcInstr.scala.html#50400" title="(target: String,proctext: String)scala.xml.ProcInstr">ProcInstr</a>(<a href="#244312" title="String">t</a>, <a href="#244313" title="String">s</a>))
}

        </pre>
    </body>
</html>