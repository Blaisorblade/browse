<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/xml/factory/NodeFactory.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style">
    </head>
    <body>
        <pre>
/*                     __                                               *\
**     ________ ___   / /  ___     Scala API                            **
**    / __/ __// _ | / /  / _ |    (c) 2003-2009, LAMP/EPFL             **
**  __\ \/ /__/ __ |/ /__/ __ |                                         **
** /____/\___/_/ |_/____/_/ | |                                         **
**                          |/                                          **
\*                                                                      */

// $Id: NodeFactory.scala 18387 2009-07-24 15:28:37Z odersky $

<span class="keyword">package</span> scala.xml
<span class="keyword">package</span> factory

<span class="keyword">import</span> parsing.{ FactoryAdapter, NoBindingFactoryAdapter }
<span class="keyword">import</span> org.xml.sax.InputSource
<span class="keyword">import</span> java.io.{ InputStream, Reader, StringReader, File, FileDescriptor, FileInputStream }
<span class="keyword">import</span> javax.xml.parsers.{ SAXParser, SAXParserFactory }

<span class="keyword">trait</span> <a title="trait NodeFactory[A &lt;: scala.xml.Node] extends java.lang.Object with ScalaObject" id="15293">NodeFactory</a>[<a title="&gt;: Nothing &lt;: scala.xml.Node" id="16690">A</a> &lt;: Node]
<a href="../../ScalaObject.scala.html#957" title="ScalaObject">{</a>
  <span class="keyword">val</span> <a title="Boolean" id="243348">ignoreComments</a>  = <span title="Boolean(false)" class="keyword">false</span>
  <span class="keyword">val</span> <a title="Boolean" id="243350">ignoreProcInstr</a> = <span title="Boolean(false)" class="keyword">false</span>

  /* default behaviour is to use hash-consing */
  <span class="keyword">val</span> <a title="scala.collection.mutable.HashMap[Int,List[A]]" id="243352">cache</a> = <span title="scala.collection.mutable.HashMap[Int,List[A]]" class="keyword">new</span> collection.mutable.<a href="../../collection/mutable/HashMap.scala.html#7755" title="scala.collection.mutable.HashMap[Int,List[A]]">HashMap</a>[Int, List[A]]

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(pre: String,name: String,attrs: scala.xml.MetaData,scope: scala.xml.NamespaceBinding,children: Seq[scala.xml.Node])A" id="243354">create</a>(<a title="String" id="243373">pre</a>: <span title="String">String</span>, <a title="String" id="243374">name</a>: <span title="String">String</span>, <a title="scala.xml.MetaData" id="243375">attrs</a>: <a href="../MetaData.scala.html#8585" title="scala.xml.MetaData">MetaData</a>, <a title="scala.xml.NamespaceBinding" id="243376">scope</a>: <a href="../NamespaceBinding.scala.html#8759" title="scala.xml.NamespaceBinding">NamespaceBinding</a>, <a title="Seq[scala.xml.Node]" id="243377">children</a>:<a href="../../collection/Sequence.scala.html#4346" title="Seq[scala.xml.Node]">Seq</a>[Node]): <a href="#16690" title="A">A</a>
  
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(hash: Int,old: List[A],pre: String,name: String,attrSeq: scala.xml.MetaData,scope: scala.xml.NamespaceBinding,children: Seq[scala.xml.Node])A" id="243355">construct</a>(<a title="Int" id="251727">hash</a>: <a title="Int" id="2175">Int</a>, <a title="List[A]" id="251728">old</a>:<a href="../../collection/immutable/List.scala.html#8973" title="List[A]">List</a>[A], <a title="String" id="251729">pre</a>: <span title="String">String</span>, <a title="String" id="251730">name</a>: <span title="String">String</span>, <a title="scala.xml.MetaData" id="251731">attrSeq</a>:<a href="../MetaData.scala.html#8585" title="scala.xml.MetaData">MetaData</a>, <a title="scala.xml.NamespaceBinding" id="251732">scope</a>: <a href="../NamespaceBinding.scala.html#8759" title="scala.xml.NamespaceBinding">NamespaceBinding</a>, <a title="Seq[scala.xml.Node]" id="251733">children</a>:<a href="../../collection/Sequence.scala.html#4346" title="Seq[scala.xml.Node]">Seq</a>[Node]): <a href="#16690" title="A">A</a> = {
    <span class="keyword">val</span> <a title="A" id="251735">el</a> = <a href="#243354" title="(pre: String,name: String,attrs: scala.xml.MetaData,scope: scala.xml.NamespaceBinding,children: Seq[scala.xml.Node])A">create</a>(<a href="#251729" title="String">pre</a>, <a href="#251730" title="String">name</a>, <a href="#251731" title="scala.xml.MetaData">attrSeq</a>, <a href="#251732" title="scala.xml.NamespaceBinding">scope</a>, <a href="#251733" title="Seq[scala.xml.Node]">children</a>)
    <a href="#243352" title="=&gt; scala.collection.mutable.HashMap[Int,List[A]]">cache</a>.<a href="../../collection/mutable/HashMap.scala.html#91075" title="(key: Int,value: List[A])Unit">update</a>(<a href="#251727" title="Int">hash</a>, <a href="#251735" title="A">el</a> <a href="#251744" title="A">::</a> <a href="../../collection/immutable/List.scala.html#17630" title="(x: A)List[A]">old</a>)
    <a href="#251735" title="A">el</a>
  }
  
  <span class="keyword">def</span> <a title="(ch1: Seq[scala.xml.Node],ch2: Seq[scala.xml.Node])Boolean" id="243356">eqElements</a>(<a title="Seq[scala.xml.Node]" id="251754">ch1</a>: <a href="../../collection/Sequence.scala.html#4346" title="Seq[scala.xml.Node]">Seq</a>[Node], <a title="Seq[scala.xml.Node]" id="251755">ch2</a>: <a href="../../collection/Sequence.scala.html#4346" title="Seq[scala.xml.Node]">Seq</a>[Node]): <a title="Boolean" id="1949">Boolean</a> =
    <a href="#251754" title="Seq[scala.xml.Node]">ch1</a>.<a href="../../collection/generic/SequenceTemplate.scala.html#17418" title="=&gt; &lt;refinement&gt; extends java.lang.Object with scala.collection.generic.SequenceView[scala.xml.Node,Sequence[scala.xml.Node]]">view</a>.<a href="../../collection/generic/IterableViewTemplate.scala.html#20537" title="(that: Iterable[scala.xml.Node],thisElem: scala.xml.Node,thatElem: scala.xml.Node)(implicit bf: scala.collection.generic.BuilderFactory[(scala.xml.Node, scala.xml.Node),scala.collection.generic.SequenceView[(scala.xml.Node, scala.xml.Node),Sequence[_]],scala.collection.generic.SequenceView[scala.xml.Node,Sequence[scala.xml.Node]]])scala.collection.generic.SequenceView[(scala.xml.Node, scala.xml.Node),Sequence[_]]">zipAll</a><a href="../../collection/generic/TraversableTemplate.scala.html#17183" title="(p: ((scala.xml.Node, scala.xml.Node)) =&gt; Boolean)Boolean">(</a><a href="#251755" title="Seq[scala.xml.Node]">ch2</a>.<a href="../../collection/generic/SequenceTemplate.scala.html#17418" title="=&gt; &lt;refinement&gt; extends java.lang.Object with scala.collection.generic.SequenceView[scala.xml.Node,Sequence[scala.xml.Node]]">view</a>, <span title="Null(null)" class="keyword">null</span>, <span title="Null(null)" class="keyword">null</span>) forall <a href="#251903" title="Boolean">{</a> <span title="Boolean" class="keyword">case</span> (<a title="scala.xml.Node" id="251906">x</a>,<a title="scala.xml.Node" id="251907">y</a>) =&gt; <a href="#251906" title="(x$1: AnyRef)Boolean" id="6531">x</a> eq <a href="#251907" title="scala.xml.Node">y</a> }

  <span class="keyword">def</span> <a title="(n: scala.xml.Node,pre: String,name: String,attrSeq: scala.xml.MetaData,scope: scala.xml.NamespaceBinding,children: Seq[scala.xml.Node])Boolean" id="243357">nodeEquals</a>(<a title="scala.xml.Node" id="251914">n</a>: <a href="../Node.scala.html#8654" title="scala.xml.Node">Node</a>, <a title="String" id="251915">pre</a>: <span title="String">String</span>, <a title="String" id="251916">name</a>: <span title="String">String</span>, <a title="scala.xml.MetaData" id="251917">attrSeq</a>:<a href="../MetaData.scala.html#8585" title="scala.xml.MetaData">MetaData</a>, <a title="scala.xml.NamespaceBinding" id="251918">scope</a>: <a href="../NamespaceBinding.scala.html#8759" title="scala.xml.NamespaceBinding">NamespaceBinding</a>, <a title="Seq[scala.xml.Node]" id="251919">children</a>: <a href="../../collection/Sequence.scala.html#4346" title="Seq[scala.xml.Node]">Seq</a>[Node]) =
    <a href="#251914" title="scala.xml.Node">n</a>.<a href="../Node.scala.html#20991" title="(x$1: AnyRef)Boolean">prefix</a> <span title="(x$1: Boolean)Boolean">==</span> <a href="#251915" title="String">pre</a> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span>
    <a href="#251914" title="scala.xml.Node">n</a>.<a href="../Node.scala.html#20992" title="(x$1: AnyRef)Boolean">label</a> == <a href="#251916" title="String">name</a> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span>
    <a href="#251914" title="scala.xml.Node">n</a>.<a href="../Node.scala.html#21001" title="(x$1: AnyRef)Boolean">attributes</a> == <a href="#251917" title="scala.xml.MetaData">attrSeq</a> &amp;&amp; 
    // scope?
    <a href="#243356" title="(ch1: Seq[scala.xml.Node],ch2: Seq[scala.xml.Node])Boolean">eqElements</a>(<a href="#251914" title="scala.xml.Node">n</a>.<a href="../Node.scala.html#21002" title="=&gt; Seq[scala.xml.Node]">child</a>, <a href="#251919" title="Seq[scala.xml.Node]">children</a>)
  
  <span class="keyword">def</span> <a title="(pre: String,name: String,attrSeq: scala.xml.MetaData,scope: scala.xml.NamespaceBinding,children: Seq[scala.xml.Node])A" id="243358">makeNode</a>(<a title="String" id="251951">pre</a>: <span title="String">String</span>, <a title="String" id="251952">name</a>: <span title="String">String</span>, <a title="scala.xml.MetaData" id="251953">attrSeq</a>: <a href="../MetaData.scala.html#8585" title="scala.xml.MetaData">MetaData</a>, <a title="scala.xml.NamespaceBinding" id="251954">scope</a>: <a href="../NamespaceBinding.scala.html#8759" title="scala.xml.NamespaceBinding">NamespaceBinding</a>, <a title="Seq[scala.xml.Node]" id="251955">children</a>: <a href="../../collection/Sequence.scala.html#4346" title="Seq[scala.xml.Node]">Seq</a>[Node]): <a href="#16690" title="A">A</a> = {
    <span class="keyword">val</span> <a title="Int" id="251957">hash</a> = <a href="../Utility.scala.html#8724" title="object scala.xml.Utility">Utility</a>.<a href="../Utility.scala.html#26591" title="(pre: String,label: String,attribHashCode: Int,scpeHash: Int,children: Seq[scala.xml.Node])Int">hashCode</a>( <a href="#251951" title="String">pre</a>, <a href="#251952" title="String">name</a>, <a href="#251953" title="scala.xml.MetaData">attrSeq</a>.<a title="()Int" id="6513">hashCode</a>(), <a href="#251954" title="scala.xml.NamespaceBinding">scope</a>.<a href="../NamespaceBinding.scala.html#55923" title="()Int">hashCode</a>(), <a href="#251955" title="Seq[scala.xml.Node]">children</a>)
    <span class="keyword">def</span> <a title="(old: List[A])A" id="251958">cons</a>(<a title="List[A]" id="251967">old</a>: <a href="../../collection/immutable/List.scala.html#8973" title="List[A]">List</a>[A]) = <a href="#243355" title="(hash: Int,old: List[A],pre: String,name: String,attrSeq: scala.xml.MetaData,scope: scala.xml.NamespaceBinding,children: Seq[scala.xml.Node])A">construct</a>(<a href="#251957" title="Int">hash</a>, <a href="#251967" title="List[A]">old</a>, <a href="#251951" title="String">pre</a>, <a href="#251952" title="String">name</a>, <a href="#251953" title="scala.xml.MetaData">attrSeq</a>, <a href="#251954" title="scala.xml.NamespaceBinding">scope</a>, <a href="#251955" title="Seq[scala.xml.Node]">children</a>)
    
    (<a href="../../collection/mutable/HashMap.scala.html#91073" title="(key: Int)Option[List[A]]">cache</a> get <a href="#251957" title="Int">hash</a>) <span title="A" class="keyword">match</span> {
      <span title="A" class="keyword">case</span> Some(<a title="List[A]" id="251976">list</a>) =&gt;    // find structurally equal
        <a href="#251976" title="List[A]">list</a>.<a href="../../collection/generic/LinearSequenceTemplate.scala.html#19408" title="(p: (A) =&gt; Boolean)Option[A]">find</a>(<a href="#243357" title="(n: scala.xml.Node,pre: String,name: String,attrSeq: scala.xml.MetaData,scope: scala.xml.NamespaceBinding,children: Seq[scala.xml.Node])Boolean">nodeEquals</a>(<a href="#251983" title="A">_</a>, <a href="#251951" title="String">pre</a>, <a href="#251952" title="String">name</a>, <a href="#251953" title="scala.xml.MetaData">attrSeq</a>, <a href="#251954" title="scala.xml.NamespaceBinding">scope</a>, <a href="#251955" title="Seq[scala.xml.Node]">children</a>)) <span title="A" class="keyword">match</span> {
          <span title="A" class="keyword">case</span> Some(<a title="A" id="251989">x</a>)    =&gt; <a href="#251989" title="A">x</a>
          <span title="A" class="keyword">case</span> _          =&gt; <a href="#251958" title="(old: List[A])A">cons</a>(<a href="#251976" title="List[A]">list</a>)
        }
      <span title="A" class="keyword">case</span> <a href="../../Option.scala.html#463" title="object None">None</a>           =&gt; <a href="#251958" title="(old: List[A])A">cons</a>(<a href="../../collection/immutable/List.scala.html#9259" title="object Nil">Nil</a>)
    }
  }
  
  <span class="keyword">def</span> <a title="(s: String)scala.xml.Text" id="243359">makeText</a>(<a title="String" id="251996">s</a>: <span title="String">String</span>) = <a href="../Text.scala.html#26684" title="(_data: String)scala.xml.Text">Text</a>(<a href="#251996" title="String">s</a>)
  <span class="keyword">def</span> <a title="(s: String)Seq[scala.xml.Comment]" id="243360">makeComment</a>(<a title="String" id="252005">s</a>: <span title="String">String</span>): <a href="../../collection/Sequence.scala.html#4346" title="Seq[scala.xml.Comment]">Seq</a>[Comment]  = 
    <span title="Seq[scala.xml.Comment]" class="keyword">if</span> (<a href="#243348" title="=&gt; Boolean">ignoreComments</a>) <a href="../../collection/immutable/List.scala.html#9259" title="object Nil">Nil</a> <span class="keyword">else</span> <a href="../../collection/immutable/List.scala.html#17535" title="(xs: scala.xml.Comment*)List[scala.xml.Comment]">List</a>(<a href="../Comment.scala.html#50331" title="(commentText: String)scala.xml.Comment">Comment</a>(<a href="#252005" title="String">s</a>))
  <span class="keyword">def</span> <a title="(t: String,s: String)Seq[scala.xml.ProcInstr]" id="243361">makeProcInstr</a>(<a title="String" id="243402">t</a>: <span title="String">String</span>, <a title="String" id="243403">s</a>: <span title="String">String</span>): <a href="../../collection/Sequence.scala.html#4346" title="Seq[scala.xml.ProcInstr]">Seq</a>[ProcInstr] =
    <span title="Seq[scala.xml.ProcInstr]" class="keyword">if</span> (<a href="#243350" title="=&gt; Boolean">ignoreProcInstr</a>) <a href="../../collection/immutable/List.scala.html#9259" title="object Nil">Nil</a> <span class="keyword">else</span> <a href="../../collection/immutable/List.scala.html#17535" title="(xs: scala.xml.ProcInstr*)List[scala.xml.ProcInstr]">List</a>(<a href="../ProcInstr.scala.html#50287" title="(target: String,proctext: String)scala.xml.ProcInstr">ProcInstr</a>(<a href="#243402" title="String">t</a>, <a href="#243403" title="String">s</a>))
}

        </pre>
    </body>
</html>