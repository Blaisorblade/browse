<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/xml/XML.scala</title>
        <script type="text/javascript" src="../../jquery-all.js"></script>
        <script type="text/javascript" src="../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../style.css" title="Style">
    </head>
    <body>
        <pre>
/*                     __                                               *\
**     ________ ___   / /  ___     Scala API                            **
**    / __/ __// _ | / /  / _ |    (c) 2003-2009, LAMP/EPFL             **
**  __\ \/ /__/ __ |/ /__/ __ |    http://scala-lang.org/               **
** /____/\___/_/ |_/____/_/ | |                                         **
**                          |/                                          **
\*                                                                      */

// $Id: XML.scala 17990 2009-06-03 16:41:02Z extempore $


<span class="keyword">package</span> scala.xml

<span class="keyword">import</span> Predef._
<span class="keyword">import</span> scala.xml.parsing.NoBindingFactoryAdapter
<span class="keyword">import</span> scala.xml.factory.XMLLoader
<span class="keyword">import</span> org.xml.sax.InputSource
<span class="keyword">import</span> javax.xml.parsers.{ SAXParser, SAXParserFactory }
<span class="keyword">import</span> java.io.{File, FileDescriptor, FileInputStream, FileOutputStream}
<span class="keyword">import</span> java.io.{InputStream, Reader, StringReader, Writer}
<span class="keyword">import</span> java.nio.channels.Channels
<span class="keyword">import</span> scala.util.control.Exception.ultimately

<span class="keyword">object</span> <a title="object scala.xml.Source" id="8856">Source</a>
<a href="../ScalaObject.scala.html#969" title="ScalaObject">{</a>
  <span class="keyword">def</span> <a title="(file: java.io.File)org.xml.sax.InputSource" id="46979">fromFile</a>(<a title="java.io.File" id="46989">file</a>: <a title="java.io.File" id="3820">File</a>)              = <span title="(x$1: java.io.InputStream)org.xml.sax.InputSource" class="keyword">new</span> <span title="org.xml.sax.InputSource">InputSource</span>(<a title="(x$1: java.io.File)java.io.FileInputStream" id="47016" class="keyword">new</a> <span title="java.io.FileInputStream">FileInputStream</span>(<a href="#46989" title="java.io.File">file</a>))
  <span class="keyword">def</span> <a title="(fd: java.io.FileDescriptor)org.xml.sax.InputSource" id="46980">fromFile</a>(<a title="java.io.FileDescriptor" id="47050">fd</a>: <a title="java.io.FileDescriptor" id="3910">FileDescriptor</a>)      = <span title="(x$1: java.io.InputStream)org.xml.sax.InputSource" class="keyword">new</span> <span title="org.xml.sax.InputSource">InputSource</span>(<a title="(x$1: java.io.FileDescriptor)java.io.FileInputStream" id="47018" class="keyword">new</a> <span title="java.io.FileInputStream">FileInputStream</span>(<a href="#47050" title="java.io.FileDescriptor">fd</a>))
  <span class="keyword">def</span> <a title="(name: String)org.xml.sax.InputSource" id="46981">fromFile</a>(<a title="String" id="47065">name</a>: <span title="String">String</span>)            = <span title="(x$1: java.io.InputStream)org.xml.sax.InputSource" class="keyword">new</span> <span title="org.xml.sax.InputSource">InputSource</span>(<span title="java.io.FileInputStream" class="keyword">new</span> <span title="java.io.FileInputStream">FileInputStream</span>(<a href="#47065" title="String">name</a>))

  <span class="keyword">def</span> <a title="(is: java.io.InputStream)org.xml.sax.InputSource" id="46982">fromInputStream</a>(<a title="java.io.InputStream" id="47080">is</a>: <a title="java.io.InputStream" id="3907">InputStream</a>)  = <span title="(x$1: java.io.InputStream)org.xml.sax.InputSource" class="keyword">new</span> <span title="org.xml.sax.InputSource">InputSource</span>(<a href="#47080" title="java.io.InputStream">is</a>)
  <span class="keyword">def</span> <a title="(reader: java.io.Reader)org.xml.sax.InputSource" id="46983">fromReader</a>(<a title="java.io.Reader" id="47089">reader</a>: <a title="java.io.Reader" id="3691">Reader</a>)        = <a title="(x$1: java.io.Reader)org.xml.sax.InputSource" id="25555" class="keyword">new</a> <span title="org.xml.sax.InputSource">InputSource</span>(<a href="#47089" title="java.io.Reader">reader</a>)
  <span class="keyword">def</span> <a title="(sysID: String)org.xml.sax.InputSource" id="46984">fromSysId</a>(<a title="String" id="47098">sysID</a>: <span title="String">String</span>)          = <a title="(x$1: java.lang.String)org.xml.sax.InputSource" id="25551" class="keyword">new</a> <span title="org.xml.sax.InputSource">InputSource</span>(<a href="#47098" title="String">sysID</a>)
  <span class="keyword">def</span> <a title="(string: String)org.xml.sax.InputSource" id="46985">fromString</a>(<a title="String" id="47107">string</a>: <span title="String">String</span>)        = <a href="#46983" title="(reader: java.io.Reader)org.xml.sax.InputSource">fromReader</a>(<span title="java.io.StringReader" class="keyword">new</span> <a title="java.io.StringReader" id="3721">StringReader</a>(<a href="#47107" title="String">string</a>))
}
<span class="keyword">import</span> Source._

/** The object &lt;code&gt;XML&lt;/code&gt; provides constants, and functions to load
 *  and save XML elements. Use this when data binding is not desired, i.e.
 *  when XML is handled using &lt;code&gt;Symbol&lt;/code&gt; nodes.
 *
 *  @author  Burak Emir
 *  @version 1.0, 25/04/2005
 */
<span class="keyword">object</span> <a title="object scala.xml.XML" id="8826">XML</a> <a href="../ScalaObject.scala.html#969" title="ScalaObject" class="keyword">extends</a> <a href="factory/XMLLoader.scala.html#15404" title="scala.xml.factory.XMLLoader[scala.xml.Elem]">XMLLoader</a>[Elem]
{  
  <span class="keyword">val</span> <a title="java.lang.String" id="47143">xml</a>       = <span title="java.lang.String(&quot;xml&quot;)" class="string">&quot;xml&quot;</span>
  <span class="keyword">val</span> <a title="java.lang.String" id="47145">xmlns</a>     = <span title="java.lang.String(&quot;xmlns&quot;)" class="string">&quot;xmlns&quot;</span>
  <span class="keyword">val</span> <a title="java.lang.String" id="47147">namespace</a> = <span title="java.lang.String(&quot;http://www.w3.org/XML/1998/namespace&quot;)" class="string">&quot;http://www.w3.org/XML/1998/namespace&quot;</span>
  <span class="keyword">val</span> <a title="java.lang.String" id="47149">preserve</a>  = <span title="java.lang.String(&quot;preserve&quot;)" class="string">&quot;preserve&quot;</span>
  <span class="keyword">val</span> <a title="java.lang.String" id="47151">space</a>     = <span title="java.lang.String(&quot;space&quot;)" class="string">&quot;space&quot;</span>
  <span class="keyword">val</span> <a title="java.lang.String" id="47153">lang</a>      = <span title="java.lang.String(&quot;lang&quot;)" class="string">&quot;lang&quot;</span>
  <span class="keyword">val</span> <a title="java.lang.String" id="47155">encoding</a>  = <span title="java.lang.String(&quot;ISO-8859-1&quot;)" class="string">&quot;ISO-8859-1&quot;</span>
  
  /** Returns an XMLLoader whose load* methods will use the supplied SAXParser. */
  <span class="keyword">def</span> <a title="(p: javax.xml.parsers.SAXParser)scala.xml.factory.XMLLoader[scala.xml.Elem]" id="47157">withSAXParser</a>(<a title="javax.xml.parsers.SAXParser" id="47165">p</a>: <span title="javax.xml.parsers.SAXParser">SAXParser</span>): <a href="factory/XMLLoader.scala.html#15404" title="scala.xml.factory.XMLLoader[scala.xml.Elem]">XMLLoader</a>[Elem] =
    <a href="#47269" title="java.lang.Object with scala.xml.factory.XMLLoader[scala.xml.Elem]{ ... }" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with scala.xml.factory.XMLLoader[scala.xml.Elem]" id="47269">XMLLoader</a>[Elem] { <span class="keyword">override</span> <span class="keyword">val</span> <a title="javax.xml.parsers.SAXParser" id="47271">parser</a>: <span title="javax.xml.parsers.SAXParser">SAXParser</span> = <a href="#47165" title="javax.xml.parsers.SAXParser">p</a> }

  @deprecated(<span class="string">&quot;Use save() instead&quot;</span>)
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(filename: String,node: scala.xml.Node,xmlDecl: Boolean,doctype: scala.xml.dtd.DocType)Unit" id="47158">saveFull</a>(<a title="String" id="47279">filename</a>: <span title="String">String</span>, <a title="scala.xml.Node" id="47280">node</a>: <a href="Node.scala.html#8723" title="scala.xml.Node">Node</a>, <a title="Boolean" id="47281">xmlDecl</a>: <span title="Boolean">Boolean</span>, <a title="scala.xml.dtd.DocType" id="47282">doctype</a>: dtd.<a href="dtd/DocType.scala.html#11271" title="scala.xml.dtd.DocType">DocType</a>): <span title="Unit">Unit</span> = 
    <a href="#47159" title="(filename: String,node: scala.xml.Node,enc: String,xmlDecl: Boolean,doctype: scala.xml.dtd.DocType)Unit">saveFull</a>(<a href="#47279" title="String">filename</a>, <a href="#47280" title="scala.xml.Node">node</a>, <a href="#47155" title="=&gt; java.lang.String">encoding</a>, <a href="#47281" title="Boolean">xmlDecl</a>, <a href="#47282" title="scala.xml.dtd.DocType">doctype</a>)
    
  @deprecated(<span class="string">&quot;Use save() instead&quot;</span>)  
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(filename: String,node: scala.xml.Node,enc: String,xmlDecl: Boolean,doctype: scala.xml.dtd.DocType)Unit" id="47159">saveFull</a>(<a title="String" id="47299">filename</a>: <span title="String">String</span>, <a title="scala.xml.Node" id="47300">node</a>: <a href="Node.scala.html#8723" title="scala.xml.Node">Node</a>, <a title="String" id="47301">enc</a>: <span title="String">String</span>, <a title="Boolean" id="47302">xmlDecl</a>: <span title="Boolean">Boolean</span>, <a title="scala.xml.dtd.DocType" id="47303">doctype</a>: dtd.<a href="dtd/DocType.scala.html#11271" title="scala.xml.dtd.DocType">DocType</a>): <span title="Unit">Unit</span> = 
    <a href="#47159" title="(filename: String,node: scala.xml.Node,enc: String,xmlDecl: Boolean,doctype: scala.xml.dtd.DocType)Unit">saveFull</a>(<a href="#47299" title="String">filename</a>, <a href="#47300" title="scala.xml.Node">node</a>, <a href="#47301" title="String">enc</a>, <a href="#47302" title="Boolean">xmlDecl</a>, <a href="#47303" title="scala.xml.dtd.DocType">doctype</a>)
  
  /** Saves a node to a file with given filename using given encoding
   *  optionally with xmldecl and doctype declaration.
   *
   *  @param filename the filename
   *  @param node     the xml node we want to write
   *  @param enc      encoding to use
   *  @param xmlDecl  if true, write xml declaration
   *  @param doctype  if not null, write doctype declaration
   */
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(filename: String,node: scala.xml.Node,enc: String,xmlDecl: Boolean,doctype: scala.xml.dtd.DocType)Unit" id="47160">save</a>(
    <a title="String" id="47312">filename</a>: <span title="String">String</span>,
    <a title="scala.xml.Node" id="47313">node</a>: <a href="Node.scala.html#8723" title="scala.xml.Node">Node</a>,
    <a title="String" id="47318">enc</a>: <span title="String">String</span> = <a href="#47155" title="=&gt; java.lang.String">encoding</a>,
    <a title="Boolean" id="47319">xmlDecl</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span>,
    <a title="scala.xml.dtd.DocType" id="47316">doctype</a>: dtd.<a href="dtd/DocType.scala.html#11271" title="scala.xml.dtd.DocType">DocType</a>
    ): <span title="Unit">Unit</span> = 
  {
    <span class="keyword">val</span> <a title="java.io.FileOutputStream" id="47320">fos</a> = <span title="java.io.FileOutputStream" class="keyword">new</span> <a title="java.io.FileOutputStream" id="3961">FileOutputStream</a>(<a href="#47312" title="String">filename</a>)
    <span class="keyword">val</span> <a title="java.io.Writer" id="47321">w</a> = <a title="object java.nio.channels.Channels" id="24177">Channels</a>.<a title="(x$1: java.nio.channels.WritableByteChannel,x$2: java.lang.String)java.io.Writer" id="47378">newWriter</a>(<a href="#47320" title="java.io.FileOutputStream">fos</a>.<a title="()java.nio.channels.FileChannel" id="47344">getChannel</a>(), <a href="#47318" title="String">enc</a>)
    
    <a href="../util/control/Exception.scala.html#31363" title="(body: =&gt; Unit)util.control.Exception.Catch[Nothing]">ultimately</a><a href="../util/control/Exception.scala.html#47591" title="(body: =&gt; Unit)Unit">(</a>{ <a href="#47321" title="java.io.Writer">w</a>.<a title="()Unit" id="25796">close</a>() ; <a href="#47320" title="java.io.FileOutputStream">fos</a>.<a title="()Unit" id="47342">close</a>() })(
      <a href="#47161" title="(w: java.io.Writer,node: scala.xml.Node,enc: String,xmlDecl: Boolean,doctype: scala.xml.dtd.DocType)Unit">write</a>(<a href="#47321" title="java.io.Writer">w</a>, <a href="#47313" title="scala.xml.Node">node</a>, <a href="#47318" title="String">enc</a>, <a href="#47319" title="Boolean">xmlDecl</a>, <a href="#47316" title="scala.xml.dtd.DocType">doctype</a>)
    )
  }

  /** Writes the given node using writer, optionally with xml decl and doctype.
   *  It's the caller's responsibility to close the writer.
   *
   *  @param w        the writer 
   *  @param node     the xml node we want to write
   *  @param enc      the string to be used in &lt;code&gt;xmlDecl&lt;/code&gt;
   *  @param xmlDecl  if true, write xml declaration
   *  @param doctype  if not null, write doctype declaration
   */
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="(w: java.io.Writer,node: scala.xml.Node,enc: String,xmlDecl: Boolean,doctype: scala.xml.dtd.DocType)Unit" id="47161">write</a>(<a title="java.io.Writer" id="47613">w</a>: java.io.<a title="java.io.Writer" id="3967">Writer</a>, <a title="scala.xml.Node" id="47614">node</a>: <a href="Node.scala.html#8723" title="scala.xml.Node">Node</a>, <a title="String" id="47615">enc</a>: <span title="String">String</span>, <a title="Boolean" id="47616">xmlDecl</a>: <span title="Boolean">Boolean</span>, <a title="scala.xml.dtd.DocType" id="47617">doctype</a>: dtd.<a href="dtd/DocType.scala.html#11271" title="scala.xml.dtd.DocType">DocType</a>) {
    /* TODO: optimize by giving writer parameter to toXML*/
    <span title="Unit" class="keyword">if</span> (<a href="#47616" title="Boolean">xmlDecl</a>) <a href="#47613" title="java.io.Writer">w</a>.<span title="(x$1: java.lang.String)Unit">write</span>(<span title="(x$1: Any)java.lang.String" class="string">&quot;&lt;?xml version='1.0' encoding='&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#47615" title="String">enc</a> + <span title="java.lang.String(&quot;'?&gt;\012&quot;)" class="string">&quot;'?&gt;\n&quot;</span>)
    <span title="Unit" class="keyword">if</span> (<a href="#47617" title="(x$1: AnyRef)Boolean" id="6596">doctype</a> ne <span title="Null(null)" class="keyword">null</span>) <a href="#47613" title="java.io.Writer">w</a>.<span title="(x$1: java.lang.String)Unit">write</span>( <a href="#47617" title="scala.xml.dtd.DocType">doctype</a>.<a href="dtd/DocType.scala.html#47294" title="()String">toString</a><span title="(x$1: Any)java.lang.String">(</span>) + <span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span>)
    <a href="#47613" title="java.io.Writer">w</a>.<span title="(x$1: java.lang.String)Unit">write</span>(<a href="Utility.scala.html#8793" title="object scala.xml.Utility">Utility</a>.<a href="Utility.scala.html#26695" title="(x: scala.xml.Node,pscope: scala.xml.NamespaceBinding,sb: StringBuilder,stripComments: Boolean,decodeEntities: Boolean,preserveWhitespace: Boolean,minimizeTags: Boolean)StringBuilder">toXML</a>(<a href="#47614" title="scala.xml.Node">node</a>).<a href="../collection/mutable/StringBuilder.scala.html#23516" title="()String">toString</a>)
  }
}

        </pre>
    </body>
</html>