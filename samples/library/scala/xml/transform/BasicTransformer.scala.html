<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/xml/transform/BasicTransformer.scala</title>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style">
    </head>
    <body onload="initializeLinked()">
        <pre>
<span class="comment">/*                     __                                               *\
**     ________ ___   / /  ___     Scala API                            **
**    / __/ __// _ | / /  / _ |    (c) 2002-2009, LAMP/EPFL             **
**  __\ \/ /__/ __ |/ /__/ __ |    http://scala-lang.org/               **
** /____/\___/_/ |_/____/_/ | |                                         **
**                          |/                                          **
\*                                                                      */</span>

<span class="comment">// $Id: BasicTransformer.scala 16893 2009-01-13 13:09:22Z cunei $</span>


<span class="keyword">package</span> scala.xml.transform

<span class="comment">/** A class for XML transformations.
 *
 *  @author  Burak Emir
 *  @version 1.0
 */</span>
<span class="keyword">abstract</span> <span class="keyword">class</span> <span class="typed"><span class="type">class BasicTransformer extends java.lang.Object with (scala.xml.Node) =&gt; scala.xml.Node with ScalaObject</span><a id="7433">BasicTransformer</a></span> <span class="keyword">extends</span> <span class="typed"><span class="type">(scala.xml.Node) =&gt; scala.xml.Node</span><a href="../../Function1.scala.html#179">Function1</a></span>[Node,Node] {

  <span class="keyword">protected</span> <span class="keyword">case</span> <span class="keyword">class</span> <span class="typed"><span class="type">class NeedsCopy extends java.lang.Throwable with ScalaObject with Product</span><span id="34491"><span id="34504"><span id="34497"><span id="34492"><span id="19912"><span id="2749"><span id="2748"><span id="34493"><span id="34502"><span id="5792"><span id="19891"><span id="34500"><span id="34495"><span id="3507"><span id="34496"><span id="34503"><span id="19911"><span id="34505"><span id="3499"><a href="../../runtime/ScalaRunTime.scala.html#19785" id="3498">NeedsCopy</a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>(<span class="typed"><span class="type">Seq[scala.xml.Node]</span><span id="34481"><span id="34480"><span id="34485"><a id="34592">result</a></span></span></span></span>: <span class="typed"><span class="type">Seq[scala.xml.Node]</span><a href="../../Seq.scala.html#761">Seq</a></span>[Node]) <span class="keyword">extends</span> <span class="typed"><span class="type">java.lang.Throwable</span><a href="../../Predef.scala.html#13331">Throwable</a></span>

  <span class="comment">/** Returns a new node buffer with the first &lt;code&gt;pos&lt;/code&gt; elements
   *  from &lt;code&gt;ns&lt;/code&gt;.
   *
   *  @param pos ..
   *  @param ns  ..
   *  @return    ..
   */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <span class="typed"><span class="type">(Int,Seq[scala.xml.Node])scala.xml.NodeBuffer</span><a id="19914">buffer</a></span>(<span class="typed"><span class="type">Int</span><a id="34507">pos</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>, <span class="typed"><span class="type">Seq[scala.xml.Node]</span><a id="34508">ns</a></span>: <span class="typed"><span class="type">Seq[scala.xml.Node]</span><a href="../../Seq.scala.html#761">Seq</a></span>[Node]): <span class="typed"><span class="type">scala.xml.NodeBuffer</span><a href="../NodeBuffer.scala.html#7231">NodeBuffer</a></span> = {
    <span class="keyword">val</span> <span class="typed"><span class="type">scala.xml.NodeBuffer</span><a id="34509">nb</a></span> = <span class="typed"><span class="type">scala.xml.NodeBuffer</span><span class="keyword">new</span></span> <span class="typed"><span class="type">scala.xml.NodeBuffer</span><a href="../NodeBuffer.scala.html#7231">NodeBuffer</a></span>()
    <span class="keyword">var</span> <span class="typed"><span class="type">Iterator[scala.xml.Node]</span><a id="34510">jt</a></span> = <span class="typed"><span class="type">Seq[scala.xml.Node]</span><a href="#34508">ns</a></span>.<span class="typed"><span class="type">=&gt; Iterator[scala.xml.Node]</span><a href="../../Iterable.scala.html#17309">elements</a></span>
    <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="34511">j</a></span> = <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>; <span class="typed"><span class="type">Unit</span><a href="#34512" class="keyword">while</a></span> (<span class="typed"><span class="type">Int</span><a href="#34511">j</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3141">&lt;</a></span> <span class="typed"><span class="type">Int</span><a href="#34507">pos</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span><span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>) {
      <span class="typed"><span class="type">scala.xml.NodeBuffer</span><a href="#34509">nb</a></span>.<span class="typed"><span class="type">(scala.xml.Node*)Unit</span><a href="../../collection/mutable/Buffer.scala.html#19241">append</a></span>(<span class="typed"><span class="type">Iterator[scala.xml.Node]</span><a href="#34510">jt</a></span>.<span class="typed"><span class="type">()scala.xml.Node</span><a href="../../Iterator.scala.html#19976">next</a></span>)
      <span class="typed"><span class="type">Int</span><a href="#34511">j</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
    }
    <span class="typed"><span class="type">scala.xml.NodeBuffer</span><a href="#34509">nb</a></span>
  }

  <span class="comment">/** Turns a nodebuffer into a sequence, so hashcode works.
   *
   *  @param nb ..
   *  @return   ..
   */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <span class="typed"><span class="type">(scala.xml.NodeBuffer)Seq[scala.xml.Node]</span><a id="19915">freeze</a></span>(<span class="typed"><span class="type">scala.xml.NodeBuffer</span><a id="34538">nb</a></span>: <span class="typed"><span class="type">scala.xml.NodeBuffer</span><a href="../NodeBuffer.scala.html#7231">NodeBuffer</a></span>): <span class="typed"><span class="type">Seq[scala.xml.Node]</span><a href="../../Seq.scala.html#761">Seq</a></span>[Node] = {
    <span class="keyword">val</span> <span class="typed"><span class="type">Array[scala.xml.Node]</span><a id="34539">arr</a></span> = <span class="typed"><span class="type">Array[scala.xml.Node]</span><span class="keyword">new</span></span> <span class="typed"><span class="type">Array[scala.xml.Node]</span><a href="../../Array.scala.html#1070">Array</a></span>[Node](<span class="typed"><span class="type">scala.xml.NodeBuffer</span><a href="#34538">nb</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a href="../../collection/mutable/ResizableArray.scala.html#22603">length</a></span>)
    <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="34540">i</a></span> = <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>
    <span class="keyword">val</span> <span class="typed"><span class="type">Iterator[scala.xml.Node]</span><a id="34541">it</a></span> = <span class="typed"><span class="type">scala.xml.NodeBuffer</span><a href="#34538">nb</a></span>.<span class="typed"><span class="type">=&gt; Iterator[scala.xml.Node]</span><a href="../../collection/mutable/ResizableArray.scala.html#22612">elements</a></span>; <span class="typed"><span class="type">Unit</span><a href="#34543" class="keyword">while</a></span> (<span class="typed"><span class="type">Iterator[scala.xml.Node]</span><a href="#34541">it</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../../Iterator.scala.html#19975">hasNext</a></span>) {
      <span class="typed"><span class="type">Array[scala.xml.Node]</span><a href="#34539">arr</a></span>(<span class="typed"><span class="type">Int</span><a href="#34540">i</a></span>) = <span class="typed"><span class="type">Iterator[scala.xml.Node]</span><a href="#34541">it</a></span>.<span class="typed"><span class="type">()scala.xml.Node</span><a href="../../Iterator.scala.html#19976">next</a></span>
      <span class="typed"><span class="type">Int</span><a href="#34540">i</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
    }
    <span class="keyword">val</span> <span class="typed"><span class="type">Seq[scala.xml.Node]</span><a id="34542">seq</a></span>: <span class="typed"><span class="type">Seq[scala.xml.Node]</span><a href="../../Seq.scala.html#761">Seq</a></span>[Node] = <span class="typed"><span class="type">Array[scala.xml.Node]</span><a href="#34539">arr</a></span>
    <span class="typed"><span class="type">Seq[scala.xml.Node]</span><a href="#34542">seq</a></span>
  }

  <span class="keyword">protected</span> <span class="keyword">def</span> <span class="typed"><span class="type">(Seq[scala.xml.Node])Boolean</span><a id="19916">single</a></span>(<span class="typed"><span class="type">Seq[scala.xml.Node]</span><a id="34569">ns</a></span>: <span class="typed"><span class="type">Seq[scala.xml.Node]</span><a href="../../Seq.scala.html#761">Seq</a></span>[Node]) =
    <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3139">==</a></span> <span class="typed"><span class="type">Seq[scala.xml.Node]</span><a href="#34569">ns</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a href="../../Seq.scala.html#17146">length</a></span>

  <span class="comment">/**
   *  @param n  ...
   *  @param ns ...
   *  @return   ...
   */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <span class="typed"><span class="type">(scala.xml.Node,Seq[scala.xml.Node])Boolean</span><a id="19917">unchanged</a></span>(<span class="typed"><span class="type">scala.xml.Node</span><a id="34573">n</a></span>: <span class="typed"><span class="type">scala.xml.Node</span><a href="../Node.scala.html#7174">Node</a></span>, <span class="typed"><span class="type">Seq[scala.xml.Node]</span><a id="34574">ns</a></span>: <span class="typed"><span class="type">Seq[scala.xml.Node]</span><a href="../../Seq.scala.html#761">Seq</a></span>[Node]) =
    <span class="typed"><span class="type">(Seq[scala.xml.Node])Boolean</span><a href="#19916">single</a></span>(<span class="typed"><span class="type">Seq[scala.xml.Node]</span><a href="#34574">ns</a></span>) <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2749">&amp;&amp;</a></span> (<span class="typed"><span class="type">Seq[scala.xml.Node]</span><a href="#34574">ns</a></span>.<span class="typed"><span class="type">=&gt; Iterator[scala.xml.Node]</span><a href="../../Iterable.scala.html#17309">elements</a></span>.<span class="typed"><span class="type">()scala.xml.Node</span><a href="../../Iterator.scala.html#19976">next</a></span>.<span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5792">eq</a></span>(<span class="typed"><span class="type">scala.xml.Node</span><a href="#34573">n</a></span>))

  <span class="comment">/** Call transform(Node) for each node in ns, append results
   *  to NodeBuffer.
   */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">(Iterator[scala.xml.Node],scala.xml.NodeBuffer)Seq[scala.xml.Node]</span><a id="19918">transform</a></span>(<span class="typed"><span class="type">Iterator[scala.xml.Node]</span><a id="19970">it</a></span>: <span class="typed"><span class="type">Iterator[scala.xml.Node]</span><a href="../../Iterator.scala.html#1337">Iterator</a></span>[Node], <span class="typed"><span class="type">scala.xml.NodeBuffer</span><a id="19971">nb</a></span>: <span class="typed"><span class="type">scala.xml.NodeBuffer</span><a href="../NodeBuffer.scala.html#7231">NodeBuffer</a></span>): <span class="typed"><span class="type">Seq[scala.xml.Node]</span><a href="../../Seq.scala.html#761">Seq</a></span>[Node] = {
    <span class="typed"><span class="type">Unit</span><a href="#34576" class="keyword">while</a></span> (<span class="typed"><span class="type">Iterator[scala.xml.Node]</span><a href="#19970">it</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../../Iterator.scala.html#19975">hasNext</a></span>)
      <span class="typed"><span class="type">scala.xml.NodeBuffer</span><a href="#19971">nb</a></span> <span class="typed"><span class="type">(Iterable[scala.xml.Node])Unit</span><a href="../../collection/mutable/ArrayBuffer.scala.html#22575">++=</a></span> <span class="typed"><span class="type">(scala.xml.Node)Seq[scala.xml.Node]</span><a href="#19920">transform</a></span>(<span class="typed"><span class="type">Iterator[scala.xml.Node]</span><a href="#19970">it</a></span>.<span class="typed"><span class="type">()scala.xml.Node</span><a href="../../Iterator.scala.html#19976">next</a></span>);
    <span class="typed"><span class="type">(scala.xml.NodeBuffer)Seq[scala.xml.Node]</span><a href="#19915">freeze</a></span>(<span class="typed"><span class="type">scala.xml.NodeBuffer</span><a href="#19971">nb</a></span>)
  }

  <span class="comment">/** Call transform(Node) to each node in ns, yield ns if nothing changes,
   *  otherwise a new sequence of concatenated results.
   */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">(Seq[scala.xml.Node])Seq[scala.xml.Node]</span><a id="19919">transform</a></span>(<span class="typed"><span class="type">Seq[scala.xml.Node]</span><a id="19969">ns</a></span>: <span class="typed"><span class="type">Seq[scala.xml.Node]</span><a href="../../Seq.scala.html#761">Seq</a></span>[Node]): <span class="typed"><span class="type">Seq[scala.xml.Node]</span><a href="../../Seq.scala.html#761">Seq</a></span>[Node] = {
    <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="34585">i</a></span> = <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>
    <span class="keyword">val</span> <span class="typed"><span class="type">Iterator[scala.xml.Node]</span><a id="34586">it</a></span> = <span class="typed"><span class="type">Seq[scala.xml.Node]</span><a href="#19969">ns</a></span>.<span class="typed"><span class="type">=&gt; Iterator[scala.xml.Node]</span><a href="../../Iterable.scala.html#17309">elements</a></span>
    <span class="keyword">try</span> {
      <span class="typed"><span class="type">Unit</span><a href="#34587" class="keyword">while</a></span> (<span class="typed"><span class="type">Iterator[scala.xml.Node]</span><a href="#34586">it</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../../Iterator.scala.html#19975">hasNext</a></span>) {
        <span class="keyword">val</span> <span class="typed"><span class="type">scala.xml.Node</span><a id="34588">n</a></span> = <span class="typed"><span class="type">Iterator[scala.xml.Node]</span><a href="#34586">it</a></span>.<span class="typed"><span class="type">()scala.xml.Node</span><a href="../../Iterator.scala.html#19976">next</a></span>
        <span class="keyword">val</span> <span class="typed"><span class="type">Seq[scala.xml.Node]</span><a id="34589">n2</a></span> = <span class="typed"><span class="type">(scala.xml.Node)Seq[scala.xml.Node]</span><a href="#19920">transform</a></span>(<span class="typed"><span class="type">scala.xml.Node</span><a href="#34588">n</a></span>)
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a id="2745">!</a></span><span class="typed"><span class="type">(scala.xml.Node,Seq[scala.xml.Node])Boolean</span><a href="#19917">unchanged</a></span>(<span class="typed"><span class="type">scala.xml.Node</span><a href="#34588">n</a></span>, <span class="typed"><span class="type">Seq[scala.xml.Node]</span><a href="#34589">n2</a></span>)) {
          <span class="typed"><span class="type">Nothing</span><span class="keyword">throw</span></span> <span class="typed"><span class="type">(Seq[scala.xml.Node])BasicTransformer.this.NeedsCopy</span><a href="#34495">NeedsCopy</a></span>(<span class="typed"><span class="type">Seq[scala.xml.Node]</span><a href="#34589">n2</a></span>)
        }
        <span class="typed"><span class="type">Int</span><a href="#34585">i</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
      }
      <span class="typed"><span class="type">Seq[scala.xml.Node]</span><a href="#19969">ns</a></span>
    } <span class="keyword">catch</span> {
      <span class="typed"><span class="type">Seq[scala.xml.Node]</span><span class="keyword">case</span></span> <a id="1">NeedsCopy</a>(<span class="typed"><span class="type">Seq[scala.xml.Node]</span><a id="34615">n2</a></span>) =&gt;
        <span class="keyword">val</span> <span class="typed"><span class="type">scala.xml.NodeBuffer</span><a id="34616">nb</a></span> = <span class="typed"><span class="type">(Int,Seq[scala.xml.Node])scala.xml.NodeBuffer</span><a href="#19914">buffer</a></span>(<span class="typed"><span class="type">Int</span><a href="#34585">i</a></span>, <span class="typed"><span class="type">Seq[scala.xml.Node]</span><a href="#19969">ns</a></span>)
        <span class="typed"><span class="type">scala.xml.NodeBuffer</span><a href="#34616">nb</a></span> <span class="typed"><span class="type">(Iterable[scala.xml.Node])Unit</span><a href="../../collection/mutable/ArrayBuffer.scala.html#22575">++=</a></span> (<span class="typed"><span class="type">Seq[scala.xml.Node]</span><a href="#34615">n2</a></span>:<span class="typed"><span class="type">Iterable[scala.xml.Node]</span><a href="../../Iterable.scala.html#401">Iterable</a></span>[xml.Node])
        <span class="typed"><span class="type">(Iterator[scala.xml.Node],scala.xml.NodeBuffer)Seq[scala.xml.Node]</span><a href="#19918">transform</a></span>(<span class="typed"><span class="type">Iterator[scala.xml.Node]</span><a href="#34586">it</a></span>, <span class="typed"><span class="type">scala.xml.NodeBuffer</span><a href="#34616">nb</a></span>)
    }
  }

  <span class="keyword">def</span> <span class="typed"><span class="type">(scala.xml.Node)Seq[scala.xml.Node]</span><a id="19920">transform</a></span>(<span class="typed"><span class="type">scala.xml.Node</span><a id="19968">n</a></span>: <span class="typed"><span class="type">scala.xml.Node</span><a href="../Node.scala.html#7174">Node</a></span>): <span class="typed"><span class="type">Seq[scala.xml.Node]</span><a href="../../Seq.scala.html#761">Seq</a></span>[Node] = {
    <span class="typed"><span class="type">Seq[scala.xml.Node]</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">scala.xml.Node</span><a href="#19968">n</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a href="../Node.scala.html#19945">typeTag$</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3141">&lt;</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>)
      <span class="typed"><span class="type">scala.xml.Node</span><a href="#19968">n</a></span>
    <span class="keyword">else</span> {
      <span class="keyword">val</span> <span class="typed"><span class="type">Seq[scala.xml.Node]</span><a id="34652">ch</a></span> = <span class="typed"><span class="type">scala.xml.Node</span><a href="#19968">n</a></span>.<span class="typed"><span class="type">=&gt; Seq[scala.xml.Node]</span><a href="../Node.scala.html#19952">child</a></span>
      <span class="keyword">val</span> <span class="typed"><span class="type">Seq[scala.xml.Node]</span><a id="34653">nch</a></span> = <span class="typed"><span class="type">(Seq[scala.xml.Node])Seq[scala.xml.Node]</span><a href="#19919">transform</a></span>(<span class="typed"><span class="type">Seq[scala.xml.Node]</span><a href="#34652">ch</a></span>)
      <span class="typed"><span class="type">Seq[scala.xml.Node]</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Seq[scala.xml.Node]</span><a href="#34652">ch</a></span>.<span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5792">eq</a></span>(<span class="typed"><span class="type">Seq[scala.xml.Node]</span><a href="#34653">nch</a></span>))
        <span class="typed"><span class="type">scala.xml.Node</span><a href="#19968">n</a></span>
      <span class="keyword">else</span>
        <span class="typed"><span class="type">(String,String,scala.xml.MetaData,scala.xml.NamespaceBinding,scala.xml.Node*)scala.xml.Elem</span><a href="../Elem.scala.html#34658">Elem</a></span>(<span class="typed"><span class="type">scala.xml.Node</span><a href="#19968">n</a></span>.<span class="typed"><span class="type">=&gt; String</span><a href="../Node.scala.html#19943">prefix</a></span>, <span class="typed"><span class="type">scala.xml.Node</span><a href="#19968">n</a></span>.<span class="typed"><span class="type">=&gt; String</span><a href="../Node.scala.html#19944">label</a></span>, <span class="typed"><span class="type">scala.xml.Node</span><a href="#19968">n</a></span>.<span class="typed"><span class="type">=&gt; scala.xml.MetaData</span><a href="../Node.scala.html#19951">attributes</a></span>, <span class="typed"><span class="type">scala.xml.Node</span><a href="#19968">n</a></span>.<span class="typed"><span class="type">=&gt; scala.xml.NamespaceBinding</span><a href="../Node.scala.html#19946">scope</a></span>, <span class="typed"><span class="type">Seq[scala.xml.Node]</span><a href="#34653">nch</a></span>:_*)
    }
  }

  <span class="keyword">def</span> <span class="typed"><span class="type">(scala.xml.Node)scala.xml.Node</span><a id="19921">apply</a></span>(<span class="typed"><span class="type">scala.xml.Node</span><a id="34675">n</a></span>: <span class="typed"><span class="type">scala.xml.Node</span><a href="../Node.scala.html#7174">Node</a></span>): <span class="typed"><span class="type">scala.xml.Node</span><a href="../Node.scala.html#7174">Node</a></span> = {
    <span class="keyword">val</span> <span class="typed"><span class="type">Seq[scala.xml.Node]</span><a id="34676">seq</a></span> = <span class="typed"><span class="type">(scala.xml.Node)Seq[scala.xml.Node]</span><a href="#19920">transform</a></span>(<span class="typed"><span class="type">scala.xml.Node</span><a href="#34675">n</a></span>)
    <span class="typed"><span class="type">scala.xml.Node</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a id="2745">!</a></span><span class="typed"><span class="type">(Seq[scala.xml.Node])Boolean</span><a href="#19916">single</a></span>(<span class="typed"><span class="type">Seq[scala.xml.Node]</span><a href="#34676">seq</a></span>))
      <span class="typed"><span class="type">Nothing</span><span class="keyword">throw</span></span> <span class="typed"><span class="type">(java.lang.String)java.lang.UnsupportedOperationException</span><a id="30111" class="keyword">new</a></span> <span class="typed"><span class="type">java.lang.UnsupportedOperationException</span><a href="../../Predef.scala.html#13340">UnsupportedOperationException</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;transform must return single node for root&quot;)</span><span class="string">&quot;transform must return single node for root&quot;</span></span>);
    <span class="keyword">else</span> <span class="typed"><span class="type">Seq[scala.xml.Node]</span><a href="#34676">seq</a></span>.<span class="typed"><span class="type">=&gt; Iterator[scala.xml.Node]</span><a href="../../Iterable.scala.html#17309">elements</a></span>.<span class="typed"><span class="type">()scala.xml.Node</span><a href="../../Iterator.scala.html#19976">next</a></span>
  }
}

<span class="comment">/*
class IdentityTransformer extends BasicTransformer {
  override def transform(n: Node): Seq[Node] = n.match {
    case &lt;world/&gt; =&gt; &lt;xml-world/&gt;
    case _ =&gt; super.transform(n);
  }
}

object Foo with Application {

  val tr = new IdentityTransformer;
  val n = tr( &lt;hello&gt;&lt;world/&gt;&lt;/hello&gt; );
  Console.println(n);

  val tr2 = new RewriteRule {
    final override val name = &quot;A rule&quot;;
    override def transform(n: Node) = n.match {
      case &lt;a/&gt; =&gt; &lt;b/&gt;&lt;c/&gt;
      case _    =&gt; n
    }
  }
  val tr3 = new RewriteRule {
    final override val name = &quot;E rule&quot;;
    override def transform(n: Node) = n.match {
      case &lt;e/&gt; =&gt; &lt;f&gt;&lt;f/&gt;&lt;/f&gt;
      case _    =&gt; n
    }
  }
  val tr4 = new RuleTransformer(tr2, tr3);
  val m = tr4( &lt;hello&gt;&lt;a/&gt;&lt;e/&gt;&lt;/hello&gt; );
  Console.println(m);
}
*/</span>

        </pre>
    </body>
</html>