<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/xml/Utility.scala</title>
        <script type="text/javascript" src="../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../style.css" title="Style">
    </head>
    <body onload="initializeLinked()">
        <pre>
<span class="comment">/*                     __                                               *\
**     ________ ___   / /  ___     Scala API                            **
**    / __/ __// _ | / /  / _ |    (c) 2003-2009, LAMP/EPFL             **
**  __\ \/ /__/ __ |/ /__/ __ |    http://scala-lang.org/               **
** /____/\___/_/ |_/____/_/ | |                                         **
**                          |/                                          **
\*                                                                      */</span>

<span class="comment">// $Id: Utility.scala 17481 2009-04-14 01:08:36Z acruise $</span>


<span class="keyword">package</span> scala.xml

<span class="keyword">import</span> collection.mutable.{Set, HashSet}

<span class="comment">/**
 * The &lt;code&gt;Utility&lt;/code&gt; object provides utility functions for processing
 * instances of bound and not bound XML classes, as well as escaping text nodes.
 *
 * @author Burak Emir
 */</span>
<span class="keyword">object</span> <span class="typed"><span class="type">object scala.xml.Utility</span><a id="7277">Utility</a></span> <span class="keyword">extends</span> <span class="typed"><span class="type">java.lang.Object</span><a id="2163">AnyRef</a></span> <span class="keyword">with</span> parsing.<span class="typed"><span class="type">scala.xml.parsing.TokenTests</span><a href="parsing/TokenTests.scala.html#12609">TokenTests</a></span> {


  <span class="comment">/** trims an element - call this method, when you know that it is an
   *  element (and not a text node) so you know that it will not be trimmed
   *  away. With this assumption, the function can return a &lt;code&gt;Node&lt;/code&gt;,
   *  rather than a &lt;code&gt;Seq[Node]&lt;/code&gt;. If you don't know, call
   *  &lt;code&gt;trimProper&lt;/code&gt; and account for the fact that you may get back
   *  an empty sequence of nodes.
   *
   *  precondition: node is not a text node (it might be trimmed) 
   */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">(scala.xml.Node)scala.xml.Node</span><a id="25369">trim</a></span>(<span class="typed"><span class="type">scala.xml.Node</span><a id="83795">x</a></span>: <span class="typed"><span class="type">scala.xml.Node</span><a href="Node.scala.html#7174">Node</a></span>): <span class="typed"><span class="type">scala.xml.Node</span><a href="Node.scala.html#7174">Node</a></span> = <span class="typed"><span class="type">scala.xml.Node</span><a href="#83795">x</a></span> <span class="typed"><span class="type">scala.xml.Node</span><span class="keyword">match</span></span> {
    <span class="typed"><span class="type">scala.xml.Elem</span><span class="keyword">case</span></span> <span class="typed"><span class="type">(scala.xml.Node)Option[(String, String, scala.xml.MetaData, scala.xml.NamespaceBinding, Seq[scala.xml.Node])]</span><a href="Elem.scala.html#34659">Elem</a></span>(<span class="typed"><span class="type">String</span><a id="83827">pre</a></span>, <span class="typed"><span class="type">String</span><a id="83828">lab</a></span>, <span class="typed"><span class="type">scala.xml.MetaData</span><a id="83829">md</a></span>, <span class="typed"><span class="type">scala.xml.NamespaceBinding</span><a id="83830">scp</a></span>, <span class="typed"><span class="type">Seq[scala.xml.Node]</span><a id="83831">child</a></span>@_*) =&gt; 
      <span class="typed"><span class="type">(String,String,scala.xml.MetaData,scala.xml.NamespaceBinding,scala.xml.Node*)scala.xml.Elem</span><a href="Elem.scala.html#34658">Elem</a></span>(<span class="typed"><span class="type">String</span><a href="#83827">pre</a></span>, <span class="typed"><span class="type">String</span><a href="#83828">lab</a></span>, <span class="typed"><span class="type">scala.xml.MetaData</span><a href="#83829">md</a></span>, <span class="typed"><span class="type">scala.xml.NamespaceBinding</span><a href="#83830">scp</a></span>, (<span class="typed"><span class="type">Seq[scala.xml.Node]</span><a href="#83831">child</a></span> <span class="typed"><span class="type">((scala.xml.Node) =&gt; Iterable[scala.xml.Node])Seq[scala.xml.Node]</span><a href="../Seq.scala.html#17172">flatMap</a></span> <span class="typed"><span class="type">(scala.xml.Node)Seq[scala.xml.Node]</span><a href="#25370">trimProper</a></span>):_*)
  }

  <span class="comment">/** trim a child of an element. &lt;code&gt;Attribute&lt;/code&gt; values and
   *  &lt;code&gt;Atom&lt;/code&gt; nodes that are not &lt;code&gt;Text&lt;/code&gt; nodes are unaffected.
   */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">(scala.xml.Node)Seq[scala.xml.Node]</span><a id="25370">trimProper</a></span>(<span class="typed"><span class="type">scala.xml.Node</span><a id="83833">x</a></span>:<span class="typed"><span class="type">scala.xml.Node</span><a href="Node.scala.html#7174">Node</a></span>): <span class="typed"><span class="type">Seq[scala.xml.Node]</span><a href="../Seq.scala.html#761">Seq</a></span>[Node] = <span class="typed"><span class="type">scala.xml.Node</span><a href="#83833">x</a></span> <span class="typed"><span class="type">Seq[scala.xml.Node]</span><span class="keyword">match</span></span> {
    <span class="typed"><span class="type">scala.xml.Elem</span><span class="keyword">case</span></span> <span class="typed"><span class="type">(scala.xml.Node)Option[(String, String, scala.xml.MetaData, scala.xml.NamespaceBinding, Seq[scala.xml.Node])]</span><a href="Elem.scala.html#34659">Elem</a></span>(<span class="typed"><span class="type">String</span><a id="83837">pre</a></span>,<span class="typed"><span class="type">String</span><a id="83838">lab</a></span>,<span class="typed"><span class="type">scala.xml.MetaData</span><a id="83839">md</a></span>,<span class="typed"><span class="type">scala.xml.NamespaceBinding</span><a id="83840">scp</a></span>,<span class="typed"><span class="type">Seq[scala.xml.Node]</span><a id="83841">child</a></span>@_*) =&gt; 
      <span class="typed"><span class="type">(String,String,scala.xml.MetaData,scala.xml.NamespaceBinding,scala.xml.Node*)scala.xml.Elem</span><a href="Elem.scala.html#34658">Elem</a></span>(<span class="typed"><span class="type">String</span><a href="#83837">pre</a></span>,<span class="typed"><span class="type">String</span><a href="#83838">lab</a></span>,<span class="typed"><span class="type">scala.xml.MetaData</span><a href="#83839">md</a></span>,<span class="typed"><span class="type">scala.xml.NamespaceBinding</span><a href="#83840">scp</a></span>, (<span class="typed"><span class="type">Seq[scala.xml.Node]</span><a href="#83841">child</a></span> <span class="typed"><span class="type">((scala.xml.Node) =&gt; Iterable[scala.xml.Node])Seq[scala.xml.Node]</span><a href="../Seq.scala.html#17172">flatMap</a></span> <span class="typed"><span class="type">(scala.xml.Node)Seq[scala.xml.Node]</span><a href="#25370">trimProper</a></span>):_*)
    <span class="typed"><span class="type">Seq[scala.xml.Text]</span><span class="keyword">case</span></span> <a id="1">Text</a>(<span class="typed"><span class="type">String</span><a id="83845">s</a></span>) =&gt; 
      <span class="typed"><span class="type">scala.xml.TextBuffer</span><span class="keyword">new</span></span> <span class="typed"><span class="type">scala.xml.TextBuffer</span><a href="TextBuffer.scala.html#7210">TextBuffer</a></span>().<span class="typed"><span class="type">(Seq[Char])scala.xml.TextBuffer</span><a href="TextBuffer.scala.html#48051">append</a></span>(<span class="typed"><span class="type">implicit scala.Predef.stringWrapper : (String)scala.runtime.RichString</span><a href="../Predef.scala.html#13518">s</a></span>).<span class="typed"><span class="type">=&gt; Seq[scala.xml.Text]</span><a href="TextBuffer.scala.html#48052">toText</a></span>
    <span class="typed"><span class="type">scala.xml.Node</span><span class="keyword">case</span></span> _ =&gt; 
      <span class="typed"><span class="type">scala.xml.Node</span><a href="#83833">x</a></span>
  }
  <span class="comment">/** returns a sorted attribute list */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">(scala.xml.MetaData)scala.xml.MetaData</span><a id="25371">sort</a></span>(<span class="typed"><span class="type">scala.xml.MetaData</span><a id="83848">md</a></span>: <span class="typed"><span class="type">scala.xml.MetaData</span><a href="MetaData.scala.html#7378">MetaData</a></span>): <span class="typed"><span class="type">scala.xml.MetaData</span><a href="MetaData.scala.html#7378">MetaData</a></span> = <span class="typed"><span class="type">scala.xml.MetaData</span><span class="keyword">if</span></span>((<span class="typed"><span class="type">scala.xml.MetaData</span><a href="#83848">md</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5792">eq</a></span> <span class="typed"><span class="type">object scala.xml.Null</span><a href="Null.scala.html#7298">Null</a></span>) <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2748">||</a></span> (<span class="typed"><span class="type">scala.xml.MetaData</span><a href="#83848">md</a></span>.<span class="typed"><span class="type">=&gt; scala.xml.MetaData</span><a href="MetaData.scala.html#25477">next</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5792">eq</a></span> <span class="typed"><span class="type">object scala.xml.Null</span><a href="Null.scala.html#7298">Null</a></span>)) <span class="typed"><span class="type">scala.xml.MetaData</span><a href="#83848">md</a></span> <span class="keyword">else</span> {
    <span class="keyword">val</span> <span class="typed"><span class="type">String</span><a id="83849">key</a></span> = <span class="typed"><span class="type">scala.xml.MetaData</span><a href="#83848">md</a></span>.<span class="typed"><span class="type">=&gt; String</span><a href="MetaData.scala.html#25474">key</a></span>
    <span class="keyword">val</span> <span class="typed"><span class="type">scala.xml.MetaData</span><a id="83850">smaller</a></span> = <span class="typed"><span class="type">(scala.xml.MetaData)scala.xml.MetaData</span><a href="#25371">sort</a></span>(<span class="typed"><span class="type">scala.xml.MetaData</span><a href="#83848">md</a></span>.<span class="typed"><span class="type">((scala.xml.MetaData) =&gt; Boolean)scala.xml.MetaData</span><a href="MetaData.scala.html#25473">filter</a></span> { <span class="typed"><span class="type">scala.xml.MetaData</span><a id="83856">m</a></span> =&gt; <span class="typed"><span class="type">scala.xml.MetaData</span><a href="#83856">m</a></span>.<span class="typed"><span class="type">implicit scala.Predef.stringWrapper : (String)scala.runtime.RichString</span><a href="../Predef.scala.html#13518">key</a></span> <span class="typed"><span class="type">(String)Boolean</span><a href="../Ordered.scala.html#18904">&lt;</a></span> <span class="typed"><span class="type">String</span><a href="#83849">key</a></span> })
    <span class="keyword">val</span> <span class="typed"><span class="type">scala.xml.MetaData</span><a id="83851">greater</a></span> = <span class="typed"><span class="type">(scala.xml.MetaData)scala.xml.MetaData</span><a href="#25371">sort</a></span>(<span class="typed"><span class="type">scala.xml.MetaData</span><a href="#83848">md</a></span>.<span class="typed"><span class="type">((scala.xml.MetaData) =&gt; Boolean)scala.xml.MetaData</span><a href="MetaData.scala.html#25473">filter</a></span> { <span class="typed"><span class="type">scala.xml.MetaData</span><a id="83863">m</a></span> =&gt; <span class="typed"><span class="type">scala.xml.MetaData</span><a href="#83863">m</a></span>.<span class="typed"><span class="type">implicit scala.Predef.stringWrapper : (String)scala.runtime.RichString</span><a href="../Predef.scala.html#13518">key</a></span> <span class="typed"><span class="type">(String)Boolean</span><a href="../Ordered.scala.html#18905">&gt;</a></span> <span class="typed"><span class="type">String</span><a href="#83849">key</a></span> })
    <span class="typed"><span class="type">scala.xml.MetaData</span><a href="#83850">smaller</a></span>.<span class="typed"><span class="type">(scala.xml.MetaData)scala.xml.MetaData</span><a href="MetaData.scala.html#25457">append</a></span>( <span class="typed"><span class="type">object scala.xml.Null</span><a href="Null.scala.html#7298">Null</a></span> ).<span class="typed"><span class="type">(scala.xml.MetaData)scala.xml.MetaData</span><a href="MetaData.scala.html#25457">append</a></span>(<span class="typed"><span class="type">scala.xml.MetaData</span><a href="#83848">md</a></span>.<span class="typed"><span class="type">(scala.xml.MetaData)scala.xml.MetaData</span><a href="MetaData.scala.html#25463">copy</a></span> ( <span class="typed"><span class="type">scala.xml.MetaData</span><a href="#83851">greater</a></span> ))
  }

  <span class="comment">/** returns the node with its attribute list sorted alphabetically (prefixes are ignored) */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">(scala.xml.Node)scala.xml.Node</span><a id="25372">sort</a></span>(<span class="typed"><span class="type">scala.xml.Node</span><a id="83853">n</a></span>:<span class="typed"><span class="type">scala.xml.Node</span><a href="Node.scala.html#7174">Node</a></span>): <span class="typed"><span class="type">scala.xml.Node</span><a href="Node.scala.html#7174">Node</a></span> = <span class="typed"><span class="type">scala.xml.Node</span><a href="#83853">n</a></span> <span class="typed"><span class="type">scala.xml.Node</span><span class="keyword">match</span></span> {
	  <span class="typed"><span class="type">scala.xml.Elem</span><span class="keyword">case</span></span> <span class="typed"><span class="type">(scala.xml.Node)Option[(String, String, scala.xml.MetaData, scala.xml.NamespaceBinding, Seq[scala.xml.Node])]</span><a href="Elem.scala.html#34659">Elem</a></span>(<span class="typed"><span class="type">String</span><a id="83875">pre</a></span>,<span class="typed"><span class="type">String</span><a id="83876">lab</a></span>,<span class="typed"><span class="type">scala.xml.MetaData</span><a id="83877">md</a></span>,<span class="typed"><span class="type">scala.xml.NamespaceBinding</span><a id="83878">scp</a></span>,<span class="typed"><span class="type">Seq[scala.xml.Node]</span><a id="83879">child</a></span>@_*) =&gt;
		  <span class="typed"><span class="type">(String,String,scala.xml.MetaData,scala.xml.NamespaceBinding,scala.xml.Node*)scala.xml.Elem</span><a href="Elem.scala.html#34658">Elem</a></span>(<span class="typed"><span class="type">String</span><a href="#83875">pre</a></span>,<span class="typed"><span class="type">String</span><a href="#83876">lab</a></span>,<span class="typed"><span class="type">(scala.xml.MetaData)scala.xml.MetaData</span><a href="#25371">sort</a></span>(<span class="typed"><span class="type">scala.xml.MetaData</span><a href="#83877">md</a></span>),<span class="typed"><span class="type">scala.xml.NamespaceBinding</span><a href="#83878">scp</a></span>, (<span class="typed"><span class="type">Seq[scala.xml.Node]</span><a href="#83879">child</a></span> <span class="typed"><span class="type">((scala.xml.Node) =&gt; scala.xml.Node)Seq[scala.xml.Node]</span><a href="../Seq.scala.html#17169">map</a></span> <span class="typed"><span class="type">(scala.xml.Node)scala.xml.Node</span><a href="#25372">sort</a></span>):_*)
	  <span class="typed"><span class="type">scala.xml.Node</span><span class="keyword">case</span></span> _ =&gt; <span class="typed"><span class="type">scala.xml.Node</span><a href="#83853">n</a></span>
  }
													  
  <span class="comment">/** @deprecated a string might also be Atom(s) - define your own conversion
   */</span>
  @<span class="typed"><span class="type">deprecated</span><a href="../deprecated.scala.html#215">deprecated</a></span> <span class="keyword">def</span> <span class="typed"><span class="type">(String)scala.xml.Text</span><a id="25373">view</a></span>(<span class="typed"><span class="type">String</span><a id="83915">s</a></span>: <span class="typed"><span class="type">String</span><a id="1859">String</a></span>): <span class="typed"><span class="type">scala.xml.Text</span><a href="Text.scala.html#7159">Text</a></span> = <span class="typed"><span class="type">(String)scala.xml.Text</span><a href="Text.scala.html#22618">Text</a></span>(<span class="typed"><span class="type">String</span><a href="#83915">s</a></span>)

  <span class="comment">/**
   * Escapes the characters &amp;lt; &amp;gt; &amp;amp; and &amp;quot; from string.
   *
   * @param text ...
   * @return     ...
   */</span>
  <span class="keyword">final</span> <span class="keyword">def</span> <span class="typed"><span class="type">(String)String</span><a id="25374">escape</a></span>(<span class="typed"><span class="type">String</span><a id="39921">text</a></span>: <span class="typed"><span class="type">String</span><a id="1859">String</a></span>): <span class="typed"><span class="type">String</span><a id="1859">String</a></span> =
    <span class="typed"><span class="type">(String,StringBuilder)StringBuilder</span><a href="#25375">escape</a></span>(<span class="typed"><span class="type">String</span><a href="#39921">text</a></span>, <span class="typed"><span class="type">()StringBuilder</span><a href="../StringBuilder.scala.html#19620" class="keyword">new</a></span> <span class="typed"><span class="type">StringBuilder</span><a href="../StringBuilder.scala.html#1433">StringBuilder</a></span>()).<span class="typed"><span class="type">()String</span><a href="../StringBuilder.scala.html#19672">toString</a></span>()

  <span class="comment">/**
   * Appends escaped string to &lt;code&gt;s&lt;/code&gt;.
   *
   * @param text ...
   * @param s    ...
   * @return     ...
   */</span>
  <span class="keyword">final</span> <span class="keyword">def</span> <span class="typed"><span class="type">(String,StringBuilder)StringBuilder</span><a id="25375">escape</a></span>(<span class="typed"><span class="type">String</span><a id="39919">text</a></span>: <span class="typed"><span class="type">String</span><a id="1859">String</a></span>, <span class="typed"><span class="type">StringBuilder</span><a id="39920">s</a></span>: <span class="typed"><span class="type">StringBuilder</span><a href="../StringBuilder.scala.html#1433">StringBuilder</a></span>): <span class="typed"><span class="type">StringBuilder</span><a href="../StringBuilder.scala.html#1433">StringBuilder</a></span> = {
    <span class="keyword">for</span> (<span class="typed"><span class="type">((Char) =&gt; Unit)Unit</span><a href="../Iterator.scala.html#20001" id="83933">c</a></span> &lt;- <span class="typed"><span class="type">implicit scala.Predef.stringWrapper : (String)scala.runtime.RichString</span><a href="../Predef.scala.html#13518">text</a></span>.<span class="typed"><span class="type">=&gt; Iterator[Char]</span><a href="../RandomAccessSeq.scala.html#17210">elements</a></span>) <span class="typed"><span class="type">Char</span><a href="#83933">c</a></span> <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
      <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Char('&lt;')</span><span class="char">'&lt;'</span></span> =&gt; <span class="typed"><span class="type">StringBuilder</span><a href="#39920">s</a></span>.<span class="typed"><span class="type">(String)StringBuilder</span><a href="../StringBuilder.scala.html#19639">append</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;&amp;lt;&quot;)</span><span class="string">&quot;&amp;lt;&quot;</span></span>)
      <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Char('&gt;')</span><span class="char">'&gt;'</span></span> =&gt; <span class="typed"><span class="type">StringBuilder</span><a href="#39920">s</a></span>.<span class="typed"><span class="type">(String)StringBuilder</span><a href="../StringBuilder.scala.html#19639">append</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;&amp;gt;&quot;)</span><span class="string">&quot;&amp;gt;&quot;</span></span>)
      <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Char('&amp;')</span><span class="char">'&amp;'</span></span> =&gt; <span class="typed"><span class="type">StringBuilder</span><a href="#39920">s</a></span>.<span class="typed"><span class="type">(String)StringBuilder</span><a href="../StringBuilder.scala.html#19639">append</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;&amp;amp;&quot;)</span><span class="string">&quot;&amp;amp;&quot;</span></span>)
      <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Char('&quot;')</span><span class="char">'&quot;'</span></span> =&gt; <span class="typed"><span class="type">StringBuilder</span><a href="#39920">s</a></span>.<span class="typed"><span class="type">(String)StringBuilder</span><a href="../StringBuilder.scala.html#19639">append</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;&amp;quot;&quot;)</span><span class="string">&quot;&amp;quot;&quot;</span></span>)
      <span class="comment">//case '\'' =&gt; s.append(&quot;&amp;apos;&quot;) // is valid xhtml but not html, and IE doesn't know it, says jweb</span>
      <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> _   =&gt; <span class="typed"><span class="type">StringBuilder</span><a href="#39920">s</a></span>.<span class="typed"><span class="type">(Char)StringBuilder</span><a href="../StringBuilder.scala.html#19646">append</a></span>(<span class="typed"><span class="type">Char</span><a href="#83933">c</a></span>)
    }
    <span class="typed"><span class="type">StringBuilder</span><a href="#39920">s</a></span>
  }

  <span class="comment">/**
   * Appends unescaped string to &lt;code&gt;s&lt;/code&gt;, amp becomes &amp;amp;
   * lt becomes &amp;lt; etc..
   *
   * @param ref ...
   * @param s   ...
   * @return    &lt;code&gt;null&lt;/code&gt; if &lt;code&gt;ref&lt;/code&gt; was not a predefined
   *            entity.
   */</span>
  <span class="keyword">final</span> <span class="keyword">def</span> <span class="typed"><span class="type">(String,StringBuilder)StringBuilder</span><a id="25376">unescape</a></span>(<span class="typed"><span class="type">String</span><a id="83944">ref</a></span>: <span class="typed"><span class="type">String</span><a id="1859">String</a></span>, <span class="typed"><span class="type">StringBuilder</span><a id="83945">s</a></span>: <span class="typed"><span class="type">StringBuilder</span><a href="../StringBuilder.scala.html#1433">StringBuilder</a></span>): <span class="typed"><span class="type">StringBuilder</span><a href="../StringBuilder.scala.html#1433">StringBuilder</a></span> = 
    <span class="typed"><span class="type">String</span><a href="#83944">ref</a></span> <span class="typed"><span class="type">StringBuilder</span><span class="keyword">match</span></span> {
      <span class="typed"><span class="type">StringBuilder</span><span class="keyword">case</span></span> <span class="typed"><span class="type">java.lang.String(&quot;lt&quot;)</span><span class="string">&quot;lt&quot;</span></span>   =&gt; <span class="typed"><span class="type">StringBuilder</span><a href="#83945">s</a></span>.<span class="typed"><span class="type">(Char)StringBuilder</span><a href="../StringBuilder.scala.html#19646">append</a></span>(<span class="typed"><span class="type">Char('&lt;')</span><span class="char">'&lt;'</span></span>)
      <span class="typed"><span class="type">StringBuilder</span><span class="keyword">case</span></span> <span class="typed"><span class="type">java.lang.String(&quot;gt&quot;)</span><span class="string">&quot;gt&quot;</span></span>   =&gt; <span class="typed"><span class="type">StringBuilder</span><a href="#83945">s</a></span>.<span class="typed"><span class="type">(Char)StringBuilder</span><a href="../StringBuilder.scala.html#19646">append</a></span>(<span class="typed"><span class="type">Char('&gt;')</span><span class="char">'&gt;'</span></span>)
      <span class="typed"><span class="type">StringBuilder</span><span class="keyword">case</span></span> <span class="typed"><span class="type">java.lang.String(&quot;amp&quot;)</span><span class="string">&quot;amp&quot;</span></span>  =&gt; <span class="typed"><span class="type">StringBuilder</span><a href="#83945">s</a></span>.<span class="typed"><span class="type">(Char)StringBuilder</span><a href="../StringBuilder.scala.html#19646">append</a></span>(<span class="typed"><span class="type">Char('&amp;')</span><span class="char">'&amp;'</span></span>)
      <span class="typed"><span class="type">StringBuilder</span><span class="keyword">case</span></span> <span class="typed"><span class="type">java.lang.String(&quot;quot&quot;)</span><span class="string">&quot;quot&quot;</span></span> =&gt; <span class="typed"><span class="type">StringBuilder</span><a href="#83945">s</a></span>.<span class="typed"><span class="type">(Char)StringBuilder</span><a href="../StringBuilder.scala.html#19646">append</a></span>(<span class="typed"><span class="type">Char('&quot;')</span><span class="char">'&quot;'</span></span>)
      <span class="typed"><span class="type">StringBuilder</span><span class="keyword">case</span></span> <span class="typed"><span class="type">java.lang.String(&quot;apos&quot;)</span><span class="string">&quot;apos&quot;</span></span> =&gt; <span class="typed"><span class="type">StringBuilder</span><a href="#83945">s</a></span>.<span class="typed"><span class="type">(Char)StringBuilder</span><a href="../StringBuilder.scala.html#19646">append</a></span>(<span class="typed"><span class="type">Char(''')</span><span class="char">'\''</span></span>)
      <span class="typed"><span class="type">Null(null)</span><span class="keyword">case</span></span> _   =&gt; <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>
    }

  <span class="comment">/**
   * Returns a set of all namespaces used in a sequence of nodes 
   * and all their descendants, including the empty namespaces.
   *
   * @param nodes ...
   * @return      ...
   */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">(Seq[scala.xml.Node])scala.collection.mutable.Set[String]</span><a id="25377">collectNamespaces</a></span>(<span class="typed"><span class="type">Seq[scala.xml.Node]</span><a id="83956">nodes</a></span>: <span class="typed"><span class="type">Seq[scala.xml.Node]</span><a href="../Seq.scala.html#761">Seq</a></span>[Node]): <span class="typed"><span class="type">scala.collection.mutable.Set[String]</span><a href="../collection/mutable/Set.scala.html#11392">Set</a></span>[String] = {
    <span class="keyword">var</span> <span class="typed"><span class="type">scala.collection.mutable.HashSet[String]</span><a id="83957">m</a></span> = <span class="typed"><span class="type">scala.collection.mutable.HashSet[String]</span><span class="keyword">new</span></span> <span class="typed"><span class="type">scala.collection.mutable.HashSet[String]</span><a href="../collection/mutable/HashSet.scala.html#11140">HashSet</a></span>[String]()
    <span class="keyword">val</span> <span class="typed"><span class="type">Iterator[scala.xml.Node]</span><a id="83958">it</a></span> = <span class="typed"><span class="type">Seq[scala.xml.Node]</span><a href="#83956">nodes</a></span>.<span class="typed"><span class="type">=&gt; Iterator[scala.xml.Node]</span><a href="../Iterable.scala.html#17309">elements</a></span>
    <span class="typed"><span class="type">Unit</span><a href="#83959" class="keyword">while</a></span> (<span class="typed"><span class="type">Iterator[scala.xml.Node]</span><a href="#83958">it</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../Iterator.scala.html#19975">hasNext</a></span>)
      <span class="typed"><span class="type">(scala.xml.Node,scala.collection.mutable.Set[String])Unit</span><a href="#25378">collectNamespaces</a></span>(<span class="typed"><span class="type">Iterator[scala.xml.Node]</span><a href="#83958">it</a></span>.<span class="typed"><span class="type">()scala.xml.Node</span><a href="../Iterator.scala.html#19976">next</a></span>, <span class="typed"><span class="type">scala.collection.mutable.HashSet[String]</span><a href="#83957">m</a></span>);
    <span class="typed"><span class="type">scala.collection.mutable.HashSet[String]</span><a href="#83957">m</a></span>
  }

  <span class="comment">/**
   * Adds all namespaces in node to set.
   *
   * @param n   ...
   * @param set ...
   */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">(scala.xml.Node,scala.collection.mutable.Set[String])Unit</span><a id="25378">collectNamespaces</a></span>(<span class="typed"><span class="type">scala.xml.Node</span><a id="83961">n</a></span>: <span class="typed"><span class="type">scala.xml.Node</span><a href="Node.scala.html#7174">Node</a></span>, <span class="typed"><span class="type">scala.collection.mutable.Set[String]</span><a id="83962">set</a></span>: <span class="typed"><span class="type">scala.collection.mutable.Set[String]</span><a href="../collection/mutable/Set.scala.html#11392">Set</a></span>[String]) {
    <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">scala.xml.Node</span><a href="#83961">n</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a href="Node.scala.html#19945">typeTag$</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3144">&gt;=</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>) {
      <span class="typed"><span class="type">scala.collection.mutable.Set[String]</span><a href="#83962">set</a></span> <span class="typed"><span class="type">(String)Unit</span><a href="../collection/mutable/Set.scala.html#34725">+=</a></span> <span class="typed"><span class="type">scala.xml.Node</span><a href="#83961">n</a></span>.<span class="typed"><span class="type">=&gt; String</span><a href="Node.scala.html#19947">namespace</a></span>
      <span class="keyword">for</span> (<span class="typed"><span class="type">((scala.xml.MetaData) =&gt; Unit)Unit</span><a href="../Iterable.scala.html#17328" id="83978">a</a></span> &lt;- <span class="typed"><span class="type">scala.xml.Node</span><a href="#83961">n</a></span>.<span class="typed"><span class="type">=&gt; scala.xml.MetaData</span><a href="Node.scala.html#19951">attributes</a></span>) <span class="typed"><span class="type">scala.xml.MetaData</span><a href="#83978">a</a></span> <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
        <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> _:<span class="typed"><span class="type">scala.xml.PrefixedAttribute</span><a href="PrefixedAttribute.scala.html#7243">PrefixedAttribute</a></span> =&gt;
          <span class="typed"><span class="type">scala.collection.mutable.Set[String]</span><a href="#83962">set</a></span> <span class="typed"><span class="type">(String)Unit</span><a href="../collection/mutable/Set.scala.html#34725">+=</a></span> <span class="typed"><span class="type">scala.xml.MetaData</span><a href="#83978">a</a></span>.<span class="typed"><span class="type">(scala.xml.Node)String</span><a href="MetaData.scala.html#25464">getNamespace</a></span>(<span class="typed"><span class="type">scala.xml.Node</span><a href="#83961">n</a></span>)
        <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> _ =&gt;
      }
      <span class="keyword">for</span> (<span class="typed"><span class="type">((scala.xml.Node) =&gt; Unit)Unit</span><a href="../Iterable.scala.html#17328" id="83981">i</a></span> &lt;- <span class="typed"><span class="type">scala.xml.Node</span><a href="#83961">n</a></span>.<span class="typed"><span class="type">=&gt; Seq[scala.xml.Node]</span><a href="Node.scala.html#19952">child</a></span>) 
        <span class="typed"><span class="type">(scala.xml.Node,scala.collection.mutable.Set[String])Unit</span><a href="#25378">collectNamespaces</a></span>(<span class="typed"><span class="type">scala.xml.Node</span><a href="#83981">i</a></span>, <span class="typed"><span class="type">scala.collection.mutable.Set[String]</span><a href="#83962">set</a></span>)
    }
  }

  <span class="comment">/**
   * Returs the string representation of an XML node, with comments stripped
   * the comments.
   *
   * @param n the XML node
   * @return  the string representation of node &lt;code&gt;n&lt;/code&gt;.
   *
   * @see &quot;toXML(Node, Boolean)&quot;
   */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">(scala.xml.Node)String</span><a id="25379">toXML</a></span>(<span class="typed"><span class="type">scala.xml.Node</span><a id="26597">n</a></span>: <span class="typed"><span class="type">scala.xml.Node</span><a href="Node.scala.html#7174">Node</a></span>): <span class="typed"><span class="type">String</span><a id="1859">String</a></span> = <span class="typed"><span class="type">(scala.xml.Node,Boolean)String</span><a href="#25380">toXML</a></span>(<span class="typed"><span class="type">scala.xml.Node</span><a href="#26597">n</a></span>, <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>)

  <span class="comment">/**
   * Return the string representation of a Node. uses namespace mapping from
   *  &lt;code&gt;defaultPrefixes(n)&lt;/code&gt;.
   *
   * @param n            the XML node
   * @param stripComment ...
   * @return             ...
   *
   * @todo define a way to escape literal characters to &amp;amp;xx; references
   */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">(scala.xml.Node,Boolean)String</span><a id="25380">toXML</a></span>(<span class="typed"><span class="type">scala.xml.Node</span><a id="26595">n</a></span>: <span class="typed"><span class="type">scala.xml.Node</span><a href="Node.scala.html#7174">Node</a></span>, <span class="typed"><span class="type">Boolean</span><a id="26596">stripComment</a></span>: <span class="typed"><span class="type">Boolean</span><a id="2168">Boolean</a></span>): <span class="typed"><span class="type">String</span><a id="1859">String</a></span> = {
    <span class="keyword">val</span> <span class="typed"><span class="type">StringBuilder</span><a id="84008">sb</a></span> = <span class="typed"><span class="type">()StringBuilder</span><a href="../StringBuilder.scala.html#19620" class="keyword">new</a></span> <span class="typed"><span class="type">StringBuilder</span><a href="../StringBuilder.scala.html#1433">StringBuilder</a></span>()
    <span class="typed"><span class="type">(scala.xml.Node,scala.xml.NamespaceBinding,StringBuilder,Boolean)Unit</span><a href="#25381">toXML</a></span>(<span class="typed"><span class="type">scala.xml.Node</span><a href="#26595">n</a></span>, <span class="typed"><span class="type">object scala.xml.TopScope</span><a href="TopScope.scala.html#7361">TopScope</a></span>, <span class="typed"><span class="type">StringBuilder</span><a href="#84008">sb</a></span>, <span class="typed"><span class="type">Boolean</span><a href="#26596">stripComment</a></span>)
    <span class="typed"><span class="type">StringBuilder</span><a href="#84008">sb</a></span>.<span class="typed"><span class="type">()String</span><a href="../StringBuilder.scala.html#19672">toString</a></span>()
  }


  <span class="comment">/** 
   * Appends a tree to the given stringbuffer within given namespace scope.
   *
   * @param n            the node
   * @param pscope       the parent scope
   * @param sb           stringbuffer to append to
   * @param stripComment if true, strip comments
   */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">(scala.xml.Node,scala.xml.NamespaceBinding,StringBuilder,Boolean)Unit</span><a id="25381">toXML</a></span>(<span class="typed"><span class="type">scala.xml.Node</span><a id="26591">x</a></span>: <span class="typed"><span class="type">scala.xml.Node</span><a href="Node.scala.html#7174">Node</a></span>, <span class="typed"><span class="type">scala.xml.NamespaceBinding</span><a id="26592">pscope</a></span>: <span class="typed"><span class="type">scala.xml.NamespaceBinding</span><a href="NamespaceBinding.scala.html#7324">NamespaceBinding</a></span>, <span class="typed"><span class="type">StringBuilder</span><a id="26593">sb</a></span>: <span class="typed"><span class="type">StringBuilder</span><a href="../StringBuilder.scala.html#1433">StringBuilder</a></span>, <span class="typed"><span class="type">Boolean</span><a id="26594">stripComment</a></span>: <span class="typed"><span class="type">Boolean</span><a id="2168">Boolean</a></span>) {
    <span class="typed"><span class="type">scala.xml.Node</span><a href="#26591">x</a></span> <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {

      <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">scala.xml.Comment</span><a id="84025">c</a></span>: <span class="typed"><span class="type">scala.xml.Comment</span><a href="Comment.scala.html#7147">Comment</a></span> <span class="keyword">if</span> <span class="typed"><span class="type">=&gt; Boolean</span><a id="2745">!</a></span><span class="typed"><span class="type">Boolean</span><a href="#26594">stripComment</a></span> =&gt;
        <span class="typed"><span class="type">scala.xml.Comment</span><a href="#84025">c</a></span>.<span class="typed"><span class="type">(StringBuilder)StringBuilder</span><a href="Comment.scala.html#47962">toString</a></span>(<span class="typed"><span class="type">StringBuilder</span><a href="#26593">sb</a></span>)

      <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">scala.xml.SpecialNode</span><a id="84028">x</a></span>: <span class="typed"><span class="type">scala.xml.SpecialNode</span><a href="SpecialNode.scala.html#7249">SpecialNode</a></span> =&gt;
        <span class="typed"><span class="type">scala.xml.SpecialNode</span><a href="#84028">x</a></span>.<span class="typed"><span class="type">(StringBuilder)StringBuilder</span><a href="SpecialNode.scala.html#22623">toString</a></span>(<span class="typed"><span class="type">StringBuilder</span><a href="#26593">sb</a></span>)

      <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">scala.xml.Group</span><a id="84031">g</a></span>: <span class="typed"><span class="type">scala.xml.Group</span><a href="Group.scala.html#7168">Group</a></span> =&gt;
        <span class="keyword">for</span> (<span class="typed"><span class="type">((scala.xml.Node) =&gt; Unit)Unit</span><a href="../Iterable.scala.html#17328" id="84033">c</a></span> &lt;- <span class="typed"><span class="type">scala.xml.Group</span><a href="#84031">g</a></span>.<span class="typed"><span class="type">=&gt; Seq[scala.xml.Node]</span><a href="Group.scala.html#47991">nodes</a></span>) <span class="typed"><span class="type">(scala.xml.Node,scala.xml.NamespaceBinding,StringBuilder,Boolean)Unit</span><a href="#25381">toXML</a></span>(<span class="typed"><span class="type">scala.xml.Node</span><a href="#84033">c</a></span>, <span class="typed"><span class="type">scala.xml.Node</span><a href="#26591">x</a></span>.<span class="typed"><span class="type">=&gt; scala.xml.NamespaceBinding</span><a href="Node.scala.html#19946">scope</a></span>, <span class="typed"><span class="type">StringBuilder</span><a href="#26593">sb</a></span>, <span class="typed"><span class="type">Boolean</span><a href="#26594">stripComment</a></span>)

      <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> _  =&gt;
        <span class="comment">// print tag with namespace declarations</span>
        <span class="typed"><span class="type">StringBuilder</span><a href="#26593">sb</a></span>.<span class="typed"><span class="type">(Char)StringBuilder</span><a href="../StringBuilder.scala.html#19646">append</a></span>(<span class="typed"><span class="type">Char('&lt;')</span><span class="char">'&lt;'</span></span>)
        <span class="typed"><span class="type">scala.xml.Node</span><a href="#26591">x</a></span>.<span class="typed"><span class="type">(StringBuilder)StringBuilder</span><a href="Node.scala.html#19960">nameToString</a></span>(<span class="typed"><span class="type">StringBuilder</span><a href="#26593">sb</a></span>)
        <span class="typed"><span class="type">Any</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">scala.xml.Node</span><a href="#26591">x</a></span>.<span class="typed"><span class="type">=&gt; scala.xml.MetaData</span><a href="Node.scala.html#19951">attributes</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5793">ne</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>) <span class="typed"><span class="type">scala.xml.Node</span><a href="#26591">x</a></span>.<span class="typed"><span class="type">=&gt; scala.xml.MetaData</span><a href="Node.scala.html#19951">attributes</a></span>.<span class="typed"><span class="type">(StringBuilder)StringBuilder</span><a href="MetaData.scala.html#25485">toString</a></span>(<span class="typed"><span class="type">StringBuilder</span><a href="#26593">sb</a></span>)
        <span class="typed"><span class="type">scala.xml.Node</span><a href="#26591">x</a></span>.<span class="typed"><span class="type">=&gt; scala.xml.NamespaceBinding</span><a href="Node.scala.html#19946">scope</a></span>.<span class="typed"><span class="type">(StringBuilder,scala.xml.NamespaceBinding)Unit</span><a href="NamespaceBinding.scala.html#42711">toString</a></span>(<span class="typed"><span class="type">StringBuilder</span><a href="#26593">sb</a></span>, <span class="typed"><span class="type">scala.xml.NamespaceBinding</span><a href="#26592">pscope</a></span>)
        <span class="typed"><span class="type">StringBuilder</span><a href="#26593">sb</a></span>.<span class="typed"><span class="type">(Char)StringBuilder</span><a href="../StringBuilder.scala.html#19646">append</a></span>(<span class="typed"><span class="type">Char('&gt;')</span><span class="char">'&gt;'</span></span>)
        <span class="typed"><span class="type">(Seq[scala.xml.Node],scala.xml.NamespaceBinding,StringBuilder,Boolean)Unit</span><a href="#25382">sequenceToXML</a></span>(<span class="typed"><span class="type">scala.xml.Node</span><a href="#26591">x</a></span>.<span class="typed"><span class="type">=&gt; Seq[scala.xml.Node]</span><a href="Node.scala.html#19952">child</a></span>, <span class="typed"><span class="type">scala.xml.Node</span><a href="#26591">x</a></span>.<span class="typed"><span class="type">=&gt; scala.xml.NamespaceBinding</span><a href="Node.scala.html#19946">scope</a></span>, <span class="typed"><span class="type">StringBuilder</span><a href="#26593">sb</a></span>, <span class="typed"><span class="type">Boolean</span><a href="#26594">stripComment</a></span>)
        <span class="typed"><span class="type">StringBuilder</span><a href="#26593">sb</a></span>.<span class="typed"><span class="type">(String)StringBuilder</span><a href="../StringBuilder.scala.html#19639">append</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;&lt;/&quot;)</span><span class="string">&quot;&lt;/&quot;</span></span>)
        <span class="typed"><span class="type">scala.xml.Node</span><a href="#26591">x</a></span>.<span class="typed"><span class="type">(StringBuilder)StringBuilder</span><a href="Node.scala.html#19960">nameToString</a></span>(<span class="typed"><span class="type">StringBuilder</span><a href="#26593">sb</a></span>)
        <span class="typed"><span class="type">StringBuilder</span><a href="#26593">sb</a></span>.<span class="typed"><span class="type">(Char)StringBuilder</span><a href="../StringBuilder.scala.html#19646">append</a></span>(<span class="typed"><span class="type">Char('&gt;')</span><span class="char">'&gt;'</span></span>)
    }
  }

  <span class="comment">/**
   * @param children     ...
   * @param pscope       ...
   * @param sb           ...
   * @param stripComment ...
   */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">(Seq[scala.xml.Node],scala.xml.NamespaceBinding,StringBuilder,Boolean)Unit</span><a id="25382">sequenceToXML</a></span>(<span class="typed"><span class="type">Seq[scala.xml.Node]</span><a id="84065">children</a></span>: <span class="typed"><span class="type">Seq[scala.xml.Node]</span><a href="../Seq.scala.html#761">Seq</a></span>[Node], <span class="typed"><span class="type">scala.xml.NamespaceBinding</span><a id="84066">pscope</a></span>: <span class="typed"><span class="type">scala.xml.NamespaceBinding</span><a href="NamespaceBinding.scala.html#7324">NamespaceBinding</a></span>,
                    <span class="typed"><span class="type">StringBuilder</span><a id="84067">sb</a></span>: <span class="typed"><span class="type">StringBuilder</span><a href="../StringBuilder.scala.html#1433">StringBuilder</a></span>, <span class="typed"><span class="type">Boolean</span><a id="84068">stripComment</a></span>: <span class="typed"><span class="type">Boolean</span><a id="2168">Boolean</a></span>) {
    <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Seq[scala.xml.Node]</span><a href="#84065">children</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../Seq.scala.html#17149">isEmpty</a></span>) {
      <span class="typed"><span class="type">Nothing</span><span class="keyword">return</span></span>
    } <span class="keyword">else</span> <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Seq[scala.xml.Node]</span><a href="#84065">children</a></span> <span class="typed"><span class="type">((scala.xml.Node) =&gt; Boolean)Boolean</span><a href="../Iterable.scala.html#17329">forall</a></span> <span class="typed"><span class="type">Boolean</span><a href="#84074">{</a></span> 
      <span class="typed"><span class="type">Boolean</span><span class="keyword">case</span></span> <span class="typed"><span class="type">scala.xml.Atom[_]</span><a id="84075">y</a></span>: <span class="typed"><span class="type">scala.xml.Atom[_]</span><a href="Atom.scala.html#7201">Atom</a></span>[_] =&gt; <span class="typed"><span class="type">=&gt; Boolean</span><a id="2745">!</a></span><span class="typed"><span class="type">scala.xml.Atom[_]</span><a href="#84075">y</a></span>.<span class="typed"><span class="type">Boolean</span><a id="3499">isInstanceOf</a></span>[<span class="typed"><span class="type">scala.xml.Text</span><a href="Text.scala.html#7159">Text</a></span>] 
      <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">case</span></span> _ =&gt; <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>
    }) { <span class="comment">// add space</span>
      <span class="keyword">val</span> <span class="typed"><span class="type">Iterator[scala.xml.Node]</span><a id="84077">it</a></span> = <span class="typed"><span class="type">Seq[scala.xml.Node]</span><a href="#84065">children</a></span>.<span class="typed"><span class="type">=&gt; Iterator[scala.xml.Node]</span><a href="../Iterable.scala.html#17309">elements</a></span>
      <span class="keyword">val</span> <span class="typed"><span class="type">scala.xml.Node</span><a id="84078">f</a></span> = <span class="typed"><span class="type">Iterator[scala.xml.Node]</span><a href="#84077">it</a></span>.<span class="typed"><span class="type">()scala.xml.Node</span><a href="../Iterator.scala.html#19976">next</a></span>
      <span class="typed"><span class="type">(scala.xml.Node,scala.xml.NamespaceBinding,StringBuilder,Boolean)Unit</span><a href="#25381">toXML</a></span>(<span class="typed"><span class="type">scala.xml.Node</span><a href="#84078">f</a></span>, <span class="typed"><span class="type">scala.xml.NamespaceBinding</span><a href="#84066">pscope</a></span>, <span class="typed"><span class="type">StringBuilder</span><a href="#84067">sb</a></span>, <span class="typed"><span class="type">Boolean</span><a href="#84068">stripComment</a></span>)
      <span class="typed"><span class="type">Unit</span><a href="#84092" class="keyword">while</a></span> (<span class="typed"><span class="type">Iterator[scala.xml.Node]</span><a href="#84077">it</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../Iterator.scala.html#19975">hasNext</a></span>) {
        <span class="keyword">val</span> <span class="typed"><span class="type">scala.xml.Node</span><a id="84093">x</a></span> = <span class="typed"><span class="type">Iterator[scala.xml.Node]</span><a href="#84077">it</a></span>.<span class="typed"><span class="type">()scala.xml.Node</span><a href="../Iterator.scala.html#19976">next</a></span>
        <span class="typed"><span class="type">StringBuilder</span><a href="#84067">sb</a></span>.<span class="typed"><span class="type">(Char)StringBuilder</span><a href="../StringBuilder.scala.html#19646">append</a></span>(<span class="typed"><span class="type">Char(' ')</span><span class="char">' '</span></span>)
        <span class="typed"><span class="type">(scala.xml.Node,scala.xml.NamespaceBinding,StringBuilder,Boolean)Unit</span><a href="#25381">toXML</a></span>(<span class="typed"><span class="type">scala.xml.Node</span><a href="#84093">x</a></span>, <span class="typed"><span class="type">scala.xml.NamespaceBinding</span><a href="#84066">pscope</a></span>, <span class="typed"><span class="type">StringBuilder</span><a href="#84067">sb</a></span>, <span class="typed"><span class="type">Boolean</span><a href="#84068">stripComment</a></span>)
      }
    } <span class="keyword">else</span> {
      <span class="keyword">for</span> (<span class="typed"><span class="type">((scala.xml.Node) =&gt; Unit)Unit</span><a href="../Iterable.scala.html#17328" id="84110">c</a></span> &lt;- <span class="typed"><span class="type">Seq[scala.xml.Node]</span><a href="#84065">children</a></span>) <span class="typed"><span class="type">(scala.xml.Node,scala.xml.NamespaceBinding,StringBuilder,Boolean)Unit</span><a href="#25381">toXML</a></span>(<span class="typed"><span class="type">scala.xml.Node</span><a href="#84110">c</a></span>, <span class="typed"><span class="type">scala.xml.NamespaceBinding</span><a href="#84066">pscope</a></span>, <span class="typed"><span class="type">StringBuilder</span><a href="#84067">sb</a></span>, <span class="typed"><span class="type">Boolean</span><a href="#84068">stripComment</a></span>)
    }
  }

  <span class="comment">/**
   * Returns prefix of qualified name if any.
   *
   * @param name ...
   * @return     ... 
   */</span>
  <span class="keyword">final</span> <span class="keyword">def</span> <span class="typed"><span class="type">(String)Option[String]</span><a id="25383">prefix</a></span>(<span class="typed"><span class="type">String</span><a id="84124">name</a></span>: <span class="typed"><span class="type">String</span><a id="1859">String</a></span>): <span class="typed"><span class="type">Option[String]</span><a href="../Option.scala.html#932">Option</a></span>[String] = {
    <span class="keyword">val</span> <span class="typed"><span class="type">Int</span><a id="84125">i</a></span> = <span class="typed"><span class="type">String</span><a href="#84124">name</a></span>.<span class="typed"><span class="type">(Int)Int</span><a id="5842">indexOf</a></span>(<span class="typed"><span class="type">Char(':')</span><span class="char">':'</span></span>.<span class="typed"><span class="type">Int</span><a id="3501">asInstanceOf</a></span>[<span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>])
    <span class="typed"><span class="type">Option[String]</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#84125">i</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3140">!=</a></span> -<span class="typed"><span class="type">Int(-1)</span><span class="int">1</span></span>) <span class="typed"><span class="type">(java.lang.String)Some[java.lang.String]</span><a href="../Option.scala.html#19455">Some</a></span>(<span class="typed"><span class="type">String</span><a href="#84124">name</a></span>.<span class="typed"><span class="type">(Int,Int)java.lang.String</span><a id="5853">substring</a></span>(<span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>, <span class="typed"><span class="type">Int</span><a href="#84125">i</a></span>)) <span class="keyword">else</span> <span class="typed"><span class="type">object None</span><a href="../Option.scala.html#534">None</a></span>
  }

  <span class="comment">/**
   * Returns a hashcode for the given constituents of a node
   *
   * @param uri
   * @param label
   * @param attribHashCode
   * @param children
   */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">(String,String,Int,Int,Seq[scala.xml.Node])Int</span><a id="25384">hashCode</a></span>(<span class="typed"><span class="type">String</span><a id="70758">pre</a></span>: <span class="typed"><span class="type">String</span><a id="1859">String</a></span>, <span class="typed"><span class="type">String</span><a id="70759">label</a></span>: <span class="typed"><span class="type">String</span><a id="1859">String</a></span>, <span class="typed"><span class="type">Int</span><a id="70760">attribHashCode</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>, <span class="typed"><span class="type">Int</span><a id="70761">scpeHash</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>, <span class="typed"><span class="type">Seq[scala.xml.Node]</span><a id="70762">children</a></span>: <span class="typed"><span class="type">Seq[scala.xml.Node]</span><a href="../Seq.scala.html#761">Seq</a></span>[Node]) = (
    ( <span class="typed"><span class="type">Int</span><span class="keyword">if</span></span>(<span class="typed"><span class="type">String</span><a href="#70758">pre</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5793">ne</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>) {<span class="typed"><span class="type">Int(41)</span><span class="int">41</span></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">*</a></span> <span class="typed"><span class="type">String</span><a href="#70758">pre</a></span>.<span class="typed"><span class="type">()Int</span><a id="5841">hashCode</a></span>() <span class="typed"><span class="type">(Int)Int</span><a id="3149">%</a></span> <span class="typed"><span class="type">Int(7)</span><span class="int">7</span></span>} <span class="keyword">else</span> {<span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>})
    <span class="typed"><span class="type">(Int)Int</span><a id="3145">+</a></span> <span class="typed"><span class="type">String</span><a href="#70759">label</a></span>.<span class="typed"><span class="type">()Int</span><a id="5841">hashCode</a></span>() <span class="typed"><span class="type">(Int)Int</span><a id="3147">*</a></span> <span class="typed"><span class="type">Int(53)</span><span class="int">53</span></span>
    <span class="typed"><span class="type">(Int)Int</span><a id="3145">+</a></span> <span class="typed"><span class="type">Int</span><a href="#70760">attribHashCode</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">*</a></span> <span class="typed"><span class="type">Int(7)</span><span class="int">7</span></span>
    <span class="typed"><span class="type">(Int)Int</span><a id="3145">+</a></span> <span class="typed"><span class="type">Int</span><a href="#70761">scpeHash</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">*</a></span> <span class="typed"><span class="type">Int(31)</span><span class="int">31</span></span>
    <span class="typed"><span class="type">(Int)Int</span><a id="3145">+</a></span> {
      <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="70773">c</a></span> = <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>
      <span class="keyword">val</span> <span class="typed"><span class="type">Iterator[scala.xml.Node]</span><a id="70774">i</a></span> = <span class="typed"><span class="type">Seq[scala.xml.Node]</span><a href="#70762">children</a></span>.<span class="typed"><span class="type">=&gt; Iterator[scala.xml.Node]</span><a href="../Iterable.scala.html#17309">elements</a></span>
      <span class="typed"><span class="type">Unit</span><a href="#70775" class="keyword">while</a></span>(<span class="typed"><span class="type">Iterator[scala.xml.Node]</span><a href="#70774">i</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../Iterator.scala.html#19975">hasNext</a></span>) <span class="typed"><span class="type">Int</span><a href="#70773">c</a></span> = <span class="typed"><span class="type">Int</span><a href="#70773">c</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">*</a></span> <span class="typed"><span class="type">Int(41)</span><span class="int">41</span></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+</a></span> <span class="typed"><span class="type">Iterator[scala.xml.Node]</span><a href="#70774">i</a></span>.<span class="typed"><span class="type">()scala.xml.Node</span><a href="../Iterator.scala.html#19976">next</a></span>.<span class="typed"><span class="type">()Int</span><a href="Node.scala.html#19956">hashCode</a></span>
      <span class="typed"><span class="type">Int</span><a href="#70773">c</a></span>
    }
  )

  <span class="comment">/**
   * Returns a hashcode for the given constituents of a node
   *
   * @param uri
   * @param label
   * @param attribs
   * @param children
  def hashCode(uri: String, label: String, attribs: scala.collection.mutable.HashMap[(String,String),String], scpe: Int, children: Seq[Node]): Int = {
    41 * uri.hashCode() % 7 + label.hashCode() + attribs.toList.hashCode() + scpe + children.hashCode()
  }
   */</span>

  <span class="comment">/**
   * @param s ...
   * @return  ...
   */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">(String)String</span><a id="25385">systemLiteralToString</a></span>(<span class="typed"><span class="type">String</span><a id="25399">s</a></span>: <span class="typed"><span class="type">String</span><a id="1859">String</a></span>): <span class="typed"><span class="type">String</span><a id="1859">String</a></span> = {
    <span class="keyword">val</span> <span class="typed"><span class="type">StringBuilder</span><a id="84137">sb</a></span> = <span class="typed"><span class="type">()StringBuilder</span><a href="../StringBuilder.scala.html#19620" class="keyword">new</a></span> <span class="typed"><span class="type">StringBuilder</span><a href="../StringBuilder.scala.html#1433">StringBuilder</a></span>()
    <span class="typed"><span class="type">(StringBuilder,String)StringBuilder</span><a href="#25386">systemLiteralToString</a></span>(<span class="typed"><span class="type">StringBuilder</span><a href="#84137">sb</a></span>, <span class="typed"><span class="type">String</span><a href="#25399">s</a></span>)
    <span class="typed"><span class="type">StringBuilder</span><a href="#84137">sb</a></span>.<span class="typed"><span class="type">()String</span><a href="../StringBuilder.scala.html#19672">toString</a></span>()
  }

  <span class="comment">/**
   * @param sb ...
   * @param s  ...
   * @return   ...
   */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">(StringBuilder,String)StringBuilder</span><a id="25386">systemLiteralToString</a></span>(<span class="typed"><span class="type">StringBuilder</span><a id="25397">sb</a></span>: <span class="typed"><span class="type">StringBuilder</span><a href="../StringBuilder.scala.html#1433">StringBuilder</a></span>, <span class="typed"><span class="type">String</span><a id="25398">s</a></span>: <span class="typed"><span class="type">String</span><a id="1859">String</a></span>): <span class="typed"><span class="type">StringBuilder</span><a href="../StringBuilder.scala.html#1433">StringBuilder</a></span> = {
    <span class="typed"><span class="type">StringBuilder</span><a href="#25397">sb</a></span>.<span class="typed"><span class="type">(String)StringBuilder</span><a href="../StringBuilder.scala.html#19639">append</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;SYSTEM &quot;)</span><span class="string">&quot;SYSTEM &quot;</span></span>)
    <span class="typed"><span class="type">(String,StringBuilder)StringBuilder</span><a href="#25390">appendQuoted</a></span>(<span class="typed"><span class="type">String</span><a href="#25398">s</a></span>, <span class="typed"><span class="type">StringBuilder</span><a href="#25397">sb</a></span>)
  }

  <span class="comment">/**
   * @param s ...
   * @return  ...
   */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">(String)String</span><a id="25387">publicLiteralToString</a></span>(<span class="typed"><span class="type">String</span><a id="25504">s</a></span>: <span class="typed"><span class="type">String</span><a id="1859">String</a></span>): <span class="typed"><span class="type">String</span><a id="1859">String</a></span> = {
    <span class="keyword">val</span> <span class="typed"><span class="type">StringBuilder</span><a id="84153">sb</a></span> = <span class="typed"><span class="type">()StringBuilder</span><a href="../StringBuilder.scala.html#19620" class="keyword">new</a></span> <span class="typed"><span class="type">StringBuilder</span><a href="../StringBuilder.scala.html#1433">StringBuilder</a></span>()
    <span class="typed"><span class="type">(StringBuilder,String)StringBuilder</span><a href="#25388">publicLiteralToString</a></span>(<span class="typed"><span class="type">StringBuilder</span><a href="#84153">sb</a></span>, <span class="typed"><span class="type">String</span><a href="#25504">s</a></span>)
    <span class="typed"><span class="type">StringBuilder</span><a href="#84153">sb</a></span>.<span class="typed"><span class="type">()String</span><a href="../StringBuilder.scala.html#19672">toString</a></span>()
  }

  <span class="comment">/**
   * @param sb ...
   * @param s  ...
   * @return   ...
   */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">(StringBuilder,String)StringBuilder</span><a id="25388">publicLiteralToString</a></span>(<span class="typed"><span class="type">StringBuilder</span><a id="25502">sb</a></span>: <span class="typed"><span class="type">StringBuilder</span><a href="../StringBuilder.scala.html#1433">StringBuilder</a></span>, <span class="typed"><span class="type">String</span><a id="25503">s</a></span>: <span class="typed"><span class="type">String</span><a id="1859">String</a></span>): <span class="typed"><span class="type">StringBuilder</span><a href="../StringBuilder.scala.html#1433">StringBuilder</a></span> = {
    <span class="typed"><span class="type">StringBuilder</span><a href="#25502">sb</a></span>.<span class="typed"><span class="type">(String)StringBuilder</span><a href="../StringBuilder.scala.html#19639">append</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;PUBLIC &quot;&quot;)</span><span class="string">&quot;PUBLIC \&quot;&quot;</span></span>).<span class="typed"><span class="type">(String)StringBuilder</span><a href="../StringBuilder.scala.html#19639">append</a></span>(<span class="typed"><span class="type">String</span><a href="#25503">s</a></span>).<span class="typed"><span class="type">(Char)StringBuilder</span><a href="../StringBuilder.scala.html#19646">append</a></span>(<span class="typed"><span class="type">Char('&quot;')</span><span class="char">'&quot;'</span></span>)
  }

  <span class="keyword">def</span> <span class="typed"><span class="type">(String)String</span><a id="25389">appendQuoted</a></span>(<span class="typed"><span class="type">String</span><a id="25526">s</a></span>: <span class="typed"><span class="type">String</span><a id="1859">String</a></span>): <span class="typed"><span class="type">String</span><a id="1859">String</a></span> = {
    <span class="keyword">val</span> <span class="typed"><span class="type">StringBuilder</span><a id="84168">sb</a></span> = <span class="typed"><span class="type">()StringBuilder</span><a href="../StringBuilder.scala.html#19620" class="keyword">new</a></span> <span class="typed"><span class="type">StringBuilder</span><a href="../StringBuilder.scala.html#1433">StringBuilder</a></span>()
    <span class="typed"><span class="type">(String,StringBuilder)StringBuilder</span><a href="#25390">appendQuoted</a></span>(<span class="typed"><span class="type">String</span><a href="#25526">s</a></span>, <span class="typed"><span class="type">StringBuilder</span><a href="#84168">sb</a></span>)
    <span class="typed"><span class="type">StringBuilder</span><a href="#84168">sb</a></span>.<span class="typed"><span class="type">()String</span><a href="../StringBuilder.scala.html#19672">toString</a></span>()
  }

  <span class="comment">/**
   * Appends &amp;quot;s&amp;quot; if string &lt;code&gt;s&lt;/code&gt; does not contain &amp;quot;,
   * &amp;apos;s&amp;apos; otherwise.
   *
   * @param s  ...
   * @param sb ...
   * @return   ...
   */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">(String,StringBuilder)StringBuilder</span><a id="25390">appendQuoted</a></span>(<span class="typed"><span class="type">String</span><a id="25512">s</a></span>: <span class="typed"><span class="type">String</span><a id="1859">String</a></span>, <span class="typed"><span class="type">StringBuilder</span><a id="25513">sb</a></span>: <span class="typed"><span class="type">StringBuilder</span><a href="../StringBuilder.scala.html#1433">StringBuilder</a></span>) = {
    <span class="keyword">val</span> <span class="typed"><span class="type">Char</span><a id="25515">ch</a></span> = <span class="typed"><span class="type">Char</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">String</span><a href="#25512">s</a></span>.<span class="typed"><span class="type">(Int)Int</span><a id="5842">indexOf</a></span>(<span class="typed"><span class="type">Char('&quot;')</span><span class="char">'&quot;'</span></span>.<span class="typed"><span class="type">Int</span><a id="3501">asInstanceOf</a></span>[<span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>]) <span class="typed"><span class="type">(Int)Boolean</span><a id="3139">==</a></span> -<span class="typed"><span class="type">Int(-1)</span><span class="int">1</span></span>) <span class="typed"><span class="type">Char('&quot;')</span><span class="char">'&quot;'</span></span> <span class="keyword">else</span> <span class="typed"><span class="type">Char(''')</span><span class="char">'\''</span></span>;
    <span class="typed"><span class="type">StringBuilder</span><a href="#25513">sb</a></span>.<span class="typed"><span class="type">(Char)StringBuilder</span><a href="../StringBuilder.scala.html#19646">append</a></span>(<span class="typed"><span class="type">Char</span><a href="#25515">ch</a></span>).<span class="typed"><span class="type">(String)StringBuilder</span><a href="../StringBuilder.scala.html#19639">append</a></span>(<span class="typed"><span class="type">String</span><a href="#25512">s</a></span>).<span class="typed"><span class="type">(Char)StringBuilder</span><a href="../StringBuilder.scala.html#19646">append</a></span>(<span class="typed"><span class="type">Char</span><a href="#25515">ch</a></span>)
  }

  <span class="comment">/**
   * Appends &amp;quot;s&amp;quot; and escapes and &amp;quot; i s with \&amp;quot;
   *
   * @param s  ...
   * @param sb ...
   * @return   ...
   */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">(String,StringBuilder)StringBuilder</span><a id="25391">appendEscapedQuoted</a></span>(<span class="typed"><span class="type">String</span><a id="84177">s</a></span>: <span class="typed"><span class="type">String</span><a id="1859">String</a></span>, <span class="typed"><span class="type">StringBuilder</span><a id="84178">sb</a></span>: <span class="typed"><span class="type">StringBuilder</span><a href="../StringBuilder.scala.html#1433">StringBuilder</a></span>): <span class="typed"><span class="type">StringBuilder</span><a href="../StringBuilder.scala.html#1433">StringBuilder</a></span> = {
    <span class="typed"><span class="type">StringBuilder</span><a href="#84178">sb</a></span>.<span class="typed"><span class="type">(Char)StringBuilder</span><a href="../StringBuilder.scala.html#19646">append</a></span>(<span class="typed"><span class="type">Char('&quot;')</span><span class="char">'&quot;'</span></span>)
    <span class="keyword">for</span> (<span class="typed"><span class="type">((Char) =&gt; Unit)Unit</span><a href="../Iterable.scala.html#17328" id="84186">c</a></span> &lt;- <span class="typed"><span class="type">implicit scala.Predef.stringWrapper : (String)scala.runtime.RichString</span><a href="../Predef.scala.html#13518">s</a></span>) <span class="typed"><span class="type">Char</span><a href="#84186">c</a></span> <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
      <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Char('&quot;')</span><span class="char">'&quot;'</span></span> =&gt; <span class="typed"><span class="type">StringBuilder</span><a href="#84178">sb</a></span>.<span class="typed"><span class="type">(Char)StringBuilder</span><a href="../StringBuilder.scala.html#19646">append</a></span>(<span class="typed"><span class="type">Char('\')</span><span class="char">'\\'</span></span>); <span class="typed"><span class="type">StringBuilder</span><a href="#84178">sb</a></span>.<span class="typed"><span class="type">(Char)StringBuilder</span><a href="../StringBuilder.scala.html#19646">append</a></span>(<span class="typed"><span class="type">Char('&quot;')</span><span class="char">'&quot;'</span></span>)
      <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> _   =&gt; <span class="typed"><span class="type">StringBuilder</span><a href="#84178">sb</a></span>.<span class="typed"><span class="type">(Char)StringBuilder</span><a href="../StringBuilder.scala.html#19646">append</a></span>(<span class="typed"><span class="type">Char</span><a href="#84186">c</a></span>)
    }
    <span class="typed"><span class="type">StringBuilder</span><a href="#84178">sb</a></span>.<span class="typed"><span class="type">(Char)StringBuilder</span><a href="../StringBuilder.scala.html#19646">append</a></span>(<span class="typed"><span class="type">Char('&quot;')</span><span class="char">'&quot;'</span></span>)
  }

  <span class="comment">/**
   * @param s     ...
   * @param index ...
   * @return      ...
   */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">(String,Int)String</span><a id="25392">getName</a></span>(<span class="typed"><span class="type">String</span><a id="84195">s</a></span>: <span class="typed"><span class="type">String</span><a id="1859">String</a></span>, <span class="typed"><span class="type">Int</span><a id="84196">index</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>): <span class="typed"><span class="type">String</span><a id="1859">String</a></span> = {
    <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="84197">i</a></span> = <span class="typed"><span class="type">Int</span><a href="#84196">index</a></span>;
    <span class="keyword">val</span> <span class="typed"><span class="type">StringBuilder</span><a id="84198">sb</a></span> = <span class="typed"><span class="type">()StringBuilder</span><a href="../StringBuilder.scala.html#19620" class="keyword">new</a></span> <span class="typed"><span class="type">StringBuilder</span><a href="../StringBuilder.scala.html#1433">StringBuilder</a></span>();
    <span class="typed"><span class="type">String</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#84197">i</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3141">&lt;</a></span> <span class="typed"><span class="type">String</span><a href="#84195">s</a></span>.<span class="typed"><span class="type">()Int</span><a id="5819">length</a></span>) {
      <span class="keyword">var</span> <span class="typed"><span class="type">Char</span><a id="84203">c</a></span> = <span class="typed"><span class="type">String</span><a href="#84195">s</a></span>.<span class="typed"><span class="type">(Int)Char</span><a id="5820">charAt</a></span>(<span class="typed"><span class="type">Int</span><a href="#84197">i</a></span>);
      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">(Char)Boolean</span><a href="parsing/TokenTests.scala.html#25356">isNameStart</a></span>(<span class="typed"><span class="type">String</span><a href="#84195">s</a></span>.<span class="typed"><span class="type">(Int)Char</span><a id="5820">charAt</a></span>(<span class="typed"><span class="type">Int</span><a href="#84197">i</a></span>)))  
        <span class="typed"><span class="type">Unit</span><a href="#84207" class="keyword">while</a></span> (<span class="typed"><span class="type">Int</span><a href="#84197">i</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3141">&lt;</a></span> <span class="typed"><span class="type">String</span><a href="#84195">s</a></span>.<span class="typed"><span class="type">()Int</span><a id="5819">length</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2749">&amp;&amp;</a></span> { <span class="typed"><span class="type">Char</span><a href="#84203">c</a></span> = <span class="typed"><span class="type">String</span><a href="#84195">s</a></span>.<span class="typed"><span class="type">(Int)Char</span><a id="5820">charAt</a></span>(<span class="typed"><span class="type">Int</span><a href="#84197">i</a></span>); <span class="typed"><span class="type">(Char)Boolean</span><a href="parsing/TokenTests.scala.html#25355">isNameChar</a></span>(<span class="typed"><span class="type">Char</span><a href="#84203">c</a></span>)}) {
          <span class="typed"><span class="type">StringBuilder</span><a href="#84198">sb</a></span>.<span class="typed"><span class="type">(Char)StringBuilder</span><a href="../StringBuilder.scala.html#19646">append</a></span>(<span class="typed"><span class="type">Char</span><a href="#84203">c</a></span>)
          <span class="typed"><span class="type">Int</span><a href="#84197">i</a></span> = <span class="typed"><span class="type">Int</span><a href="#84197">i</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
        }
      <span class="typed"><span class="type">StringBuilder</span><a href="#84198">sb</a></span>.<span class="typed"><span class="type">()String</span><a href="../StringBuilder.scala.html#19672">toString</a></span>()
    } <span class="keyword">else</span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>
  }

  <span class="comment">/**
   * Returns &lt;code&gt;null&lt;/code&gt; if the value is a correct attribute value,
   * error message if it isn't.
   *
   * @param value ...
   * @return      ... 
   */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">(String)String</span><a id="25393">checkAttributeValue</a></span>(<span class="typed"><span class="type">String</span><a id="84232">value</a></span>: <span class="typed"><span class="type">String</span><a id="1859">String</a></span>): <span class="typed"><span class="type">String</span><a id="1859">String</a></span> = {
    <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="84233">i</a></span> = <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>
    <span class="typed"><span class="type">Unit</span><a href="#84234" class="keyword">while</a></span> (<span class="typed"><span class="type">Int</span><a href="#84233">i</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3141">&lt;</a></span> <span class="typed"><span class="type">String</span><a href="#84232">value</a></span>.<span class="typed"><span class="type">()Int</span><a id="5819">length</a></span>) {
      <span class="typed"><span class="type">String</span><a href="#84232">value</a></span>.<span class="typed"><span class="type">(Int)Char</span><a id="5820">charAt</a></span>(<span class="typed"><span class="type">Int</span><a href="#84233">i</a></span>) <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
        <span class="typed"><span class="type">Nothing</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Char('&lt;')</span><span class="char">'&lt;'</span></span> =&gt; 
          <span class="typed"><span class="type">Nothing</span><span class="keyword">return</span></span> <span class="typed"><span class="type">java.lang.String(&quot;&lt; not allowed in attribute value&quot;)</span><span class="string">&quot;&lt; not allowed in attribute value&quot;</span></span>;
        <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Char('&amp;')</span><span class="char">'&amp;'</span></span> =&gt; 
          <span class="keyword">val</span> <span class="typed"><span class="type">String</span><a id="84236">n</a></span> = <span class="typed"><span class="type">(String,Int)String</span><a href="#25392">getName</a></span>(<span class="typed"><span class="type">String</span><a href="#84232">value</a></span>, <span class="typed"><span class="type">Int</span><a href="#84233">i</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3145">+</a></span><span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>)
          <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">String</span><a href="#84236">n</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5792">eq</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>)
            <span class="typed"><span class="type">Nothing</span><span class="keyword">return</span></span> <span class="typed"><span class="type">java.lang.String(&quot;malformed entity reference in attribute value [&quot;)</span><span class="string">&quot;malformed entity reference in attribute value [&quot;</span></span><span class="typed"><span class="type">(Any)java.lang.String</span><a id="5800">+</a></span><span class="typed"><span class="type">String</span><a href="#84232">value</a></span><span class="typed"><span class="type">(Any)java.lang.String</span><a id="5800">+</a></span><span class="typed"><span class="type">java.lang.String(&quot;]&quot;)</span><span class="string">&quot;]&quot;</span></span>;
          <span class="typed"><span class="type">Int</span><a href="#84233">i</a></span> = <span class="typed"><span class="type">Int</span><a href="#84233">i</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+</a></span> <span class="typed"><span class="type">String</span><a href="#84236">n</a></span>.<span class="typed"><span class="type">()Int</span><a id="5819">length</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
          <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#84233">i</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3144">&gt;=</a></span> <span class="typed"><span class="type">String</span><a href="#84232">value</a></span>.<span class="typed"><span class="type">()Int</span><a id="5819">length</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2748">||</a></span> <span class="typed"><span class="type">String</span><a href="#84232">value</a></span>.<span class="typed"><span class="type">(Int)Char</span><a id="5820">charAt</a></span>(<span class="typed"><span class="type">Int</span><a href="#84233">i</a></span>) <span class="typed"><span class="type">(Char)Boolean</span><a id="3017">!=</a></span> <span class="typed"><span class="type">Char(';')</span><span class="char">';'</span></span>)
            <span class="typed"><span class="type">Nothing</span><span class="keyword">return</span></span> <span class="typed"><span class="type">java.lang.String(&quot;malformed entity reference in attribute value [&quot;)</span><span class="string">&quot;malformed entity reference in attribute value [&quot;</span></span><span class="typed"><span class="type">(Any)java.lang.String</span><a id="5800">+</a></span><span class="typed"><span class="type">String</span><a href="#84232">value</a></span><span class="typed"><span class="type">(Any)java.lang.String</span><a id="5800">+</a></span><span class="typed"><span class="type">java.lang.String(&quot;]&quot;)</span><span class="string">&quot;]&quot;</span></span>;
        <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> _   =&gt;
      }
      <span class="typed"><span class="type">Int</span><a href="#84233">i</a></span> = <span class="typed"><span class="type">Int</span><a href="#84233">i</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
    }
    <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>
  }

  <span class="comment">/**
   * new
   *
   * @param value ...
   * @return      ...
   */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">(String)Seq[scala.xml.Node]</span><a id="25394">parseAttributeValue</a></span>(<span class="typed"><span class="type">String</span><a id="84295">value</a></span>: <span class="typed"><span class="type">String</span><a id="1859">String</a></span>): <span class="typed"><span class="type">Seq[scala.xml.Node]</span><a href="../Seq.scala.html#761">Seq</a></span>[Node] = {
    <span class="keyword">val</span> <span class="typed"><span class="type">Seq[Char]</span><a id="84296">zs</a></span>: <span class="typed"><span class="type">Seq[Char]</span><a href="../Seq.scala.html#761">Seq</a></span>[Char] = <span class="typed"><span class="type">implicit scala.Predef.stringWrapper : (String)scala.runtime.RichString</span><a href="../Predef.scala.html#13518">value</a></span>
    <span class="keyword">val</span> <span class="typed"><span class="type">StringBuilder</span><a id="84297">sb</a></span>  = <span class="typed"><span class="type">()StringBuilder</span><a href="../StringBuilder.scala.html#19620" class="keyword">new</a></span> <span class="typed"><span class="type">StringBuilder</span><a href="../StringBuilder.scala.html#1433">StringBuilder</a></span>
    <span class="keyword">var</span> <span class="typed"><span class="type">StringBuilder</span><a id="84298">rfb</a></span>: <span class="typed"><span class="type">StringBuilder</span><a href="../StringBuilder.scala.html#1433">StringBuilder</a></span> = <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>
    <span class="keyword">val</span> <span class="typed"><span class="type">scala.xml.NodeBuffer</span><a id="84299">nb</a></span> = <span class="typed"><span class="type">scala.xml.NodeBuffer</span><span class="keyword">new</span></span> <span class="typed"><span class="type">scala.xml.NodeBuffer</span><a href="NodeBuffer.scala.html#7231">NodeBuffer</a></span>()
    <span class="keyword">val</span> <span class="typed"><span class="type">Iterator[Char]</span><a id="84300">it</a></span> = <span class="typed"><span class="type">Seq[Char]</span><a href="#84296">zs</a></span>.<span class="typed"><span class="type">=&gt; Iterator[Char]</span><a href="../Iterable.scala.html#17309">elements</a></span>
    <span class="typed"><span class="type">Unit</span><a href="#84301" class="keyword">while</a></span> (<span class="typed"><span class="type">Iterator[Char]</span><a href="#84300">it</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="../Iterator.scala.html#19975">hasNext</a></span>) {
      <span class="keyword">var</span> <span class="typed"><span class="type">Char</span><a id="84305">c</a></span> = <span class="typed"><span class="type">Iterator[Char]</span><a href="#84300">it</a></span>.<span class="typed"><span class="type">()Char</span><a href="../Iterator.scala.html#19976">next</a></span>
      <span class="typed"><span class="type">Char</span><a href="#84305">c</a></span> <span class="typed"><span class="type">Any</span><span class="keyword">match</span></span> {
        <span class="typed"><span class="type">Any</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Char('&amp;')</span><span class="char">'&amp;'</span></span> =&gt; <span class="comment">// entity! flush buffer into text node</span>
          <span class="typed"><span class="type">Iterator[Char]</span><a href="#84300">it</a></span>.<span class="typed"><span class="type">()Char</span><a href="../Iterator.scala.html#19976">next</a></span> <span class="typed"><span class="type">Any</span><span class="keyword">match</span></span> {
            <span class="typed"><span class="type">StringBuilder</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Char('#')</span><span class="char">'#'</span></span> =&gt;
              <span class="typed"><span class="type">Char</span><a href="#84305">c</a></span> = <span class="typed"><span class="type">Iterator[Char]</span><a href="#84300">it</a></span>.<span class="typed"><span class="type">()Char</span><a href="../Iterator.scala.html#19976">next</a></span>
              <span class="keyword">val</span> <span class="typed"><span class="type">String</span><a id="84306">theChar</a></span> = <span class="typed"><span class="type">(() =&gt; Char,() =&gt; Unit,(String) =&gt; Unit)String</span><a href="#25395">parseCharRef</a></span> ({ ()=&gt; <span class="typed"><span class="type">Char</span><a href="#84305">c</a></span> },{ () =&gt; <span class="typed"><span class="type">Char</span><a href="#84305">c</a></span> = <span class="typed"><span class="type">Iterator[Char]</span><a href="#84300">it</a></span>.<span class="typed"><span class="type">()Char</span><a href="../Iterator.scala.html#19976">next</a></span> },{<span class="typed"><span class="type">String</span><a id="84313">s</a></span> =&gt; <span class="typed"><span class="type">Nothing</span><span class="keyword">throw</span></span> <span class="typed"><span class="type">(java.lang.String)java.lang.RuntimeException</span><a id="19894" class="keyword">new</a></span> <span class="typed"><span class="type">java.lang.RuntimeException</span><a href="../Predef.scala.html#13334">RuntimeException</a></span>(<span class="typed"><span class="type">String</span><a href="#84313">s</a></span>)})
              <span class="typed"><span class="type">StringBuilder</span><a href="#84297">sb</a></span>.<span class="typed"><span class="type">(String)StringBuilder</span><a href="../StringBuilder.scala.html#19639">append</a></span>(<span class="typed"><span class="type">String</span><a href="#84306">theChar</a></span>)

            <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Char</span><a id="84318">x</a></span> =&gt;
              <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">StringBuilder</span><a href="#84298">rfb</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5792">eq</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>) <span class="typed"><span class="type">StringBuilder</span><a href="#84298">rfb</a></span> = <span class="typed"><span class="type">()StringBuilder</span><a href="../StringBuilder.scala.html#19620" class="keyword">new</a></span> <span class="typed"><span class="type">StringBuilder</span><a href="../StringBuilder.scala.html#1433">StringBuilder</a></span>()
              <span class="typed"><span class="type">StringBuilder</span><a href="#84298">rfb</a></span>.<span class="typed"><span class="type">(Char)StringBuilder</span><a href="../StringBuilder.scala.html#19646">append</a></span>(<span class="typed"><span class="type">Char</span><a href="#84318">x</a></span>)
              <span class="typed"><span class="type">Char</span><a href="#84305">c</a></span> = <span class="typed"><span class="type">Iterator[Char]</span><a href="#84300">it</a></span>.<span class="typed"><span class="type">()Char</span><a href="../Iterator.scala.html#19976">next</a></span>
              <span class="typed"><span class="type">Unit</span><a href="#84320" class="keyword">while</a></span> (<span class="typed"><span class="type">Char</span><a href="#84305">c</a></span> <span class="typed"><span class="type">(Char)Boolean</span><a id="3017">!=</a></span> <span class="typed"><span class="type">Char(';')</span><span class="char">';'</span></span>) {
                <span class="typed"><span class="type">StringBuilder</span><a href="#84298">rfb</a></span>.<span class="typed"><span class="type">(Char)StringBuilder</span><a href="../StringBuilder.scala.html#19646">append</a></span>(<span class="typed"><span class="type">Char</span><a href="#84305">c</a></span>)
                <span class="typed"><span class="type">Char</span><a href="#84305">c</a></span> = <span class="typed"><span class="type">Iterator[Char]</span><a href="#84300">it</a></span>.<span class="typed"><span class="type">()Char</span><a href="../Iterator.scala.html#19976">next</a></span>
              }
              <span class="keyword">val</span> <span class="typed"><span class="type">String</span><a id="84319">ref</a></span> = <span class="typed"><span class="type">StringBuilder</span><a href="#84298">rfb</a></span>.<span class="typed"><span class="type">()String</span><a href="../StringBuilder.scala.html#19672">toString</a></span>() 
              <span class="typed"><span class="type">StringBuilder</span><a href="#84298">rfb</a></span>.<span class="typed"><span class="type">(Int)Unit</span><a href="../StringBuilder.scala.html#19626">setLength</a></span>(<span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>)
              <span class="typed"><span class="type">(String,StringBuilder)StringBuilder</span><a href="#25376">unescape</a></span>(<span class="typed"><span class="type">String</span><a href="#84319">ref</a></span>,<span class="typed"><span class="type">StringBuilder</span><a href="#84297">sb</a></span>) <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
                <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span> =&gt; 
                  <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">StringBuilder</span><a href="#84297">sb</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a href="../StringBuilder.scala.html#19624">length</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&gt;</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>) {          <span class="comment">// flush buffer</span>
                    <span class="typed"><span class="type">scala.xml.NodeBuffer</span><a href="#84299">nb</a></span> <span class="typed"><span class="type">(scala.xml.Node)Unit</span><a href="../collection/mutable/ArrayBuffer.scala.html#22574">+=</a></span> <span class="typed"><span class="type">(String)scala.xml.Text</span><a href="Text.scala.html#22618">Text</a></span>(<span class="typed"><span class="type">StringBuilder</span><a href="#84297">sb</a></span>.<span class="typed"><span class="type">()String</span><a href="../StringBuilder.scala.html#19672">toString</a></span>())
                    <span class="typed"><span class="type">StringBuilder</span><a href="#84297">sb</a></span>.<span class="typed"><span class="type">(Int)Unit</span><a href="../StringBuilder.scala.html#19626">setLength</a></span>(<span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>)
                  }
                  <span class="typed"><span class="type">scala.xml.NodeBuffer</span><a href="#84299">nb</a></span> <span class="typed"><span class="type">(scala.xml.Node)Unit</span><a href="../collection/mutable/ArrayBuffer.scala.html#22574">+=</a></span> <span class="typed"><span class="type">(String)scala.xml.EntityRef</span><a href="EntityRef.scala.html#69506">EntityRef</a></span>(<span class="typed"><span class="type">StringBuilder</span><a href="#84297">sb</a></span>.<span class="typed"><span class="type">()String</span><a href="../StringBuilder.scala.html#19672">toString</a></span>()) <span class="comment">// add entityref</span>
                <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> _ =&gt;
              }
          }
        <span class="typed"><span class="type">StringBuilder</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Char</span><a id="84338">x</a></span>   =&gt; 
          <span class="typed"><span class="type">StringBuilder</span><a href="#84297">sb</a></span>.<span class="typed"><span class="type">(Char)StringBuilder</span><a href="../StringBuilder.scala.html#19646">append</a></span>(<span class="typed"><span class="type">Char</span><a href="#84338">x</a></span>)
      }
    } 
    <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">StringBuilder</span><a href="#84297">sb</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a href="../StringBuilder.scala.html#19624">length</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&gt;</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>) { <span class="comment">// flush buffer</span>
      <span class="keyword">val</span> <span class="typed"><span class="type">scala.xml.Text</span><a id="84342">x</a></span> = <span class="typed"><span class="type">(String)scala.xml.Text</span><a href="Text.scala.html#22618">Text</a></span>(<span class="typed"><span class="type">StringBuilder</span><a href="#84297">sb</a></span>.<span class="typed"><span class="type">()String</span><a href="../StringBuilder.scala.html#19672">toString</a></span>())
      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">scala.xml.NodeBuffer</span><a href="#84299">nb</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a href="../collection/mutable/ResizableArray.scala.html#22603">length</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3139">==</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>)
        <span class="typed"><span class="type">Nothing</span><span class="keyword">return</span></span> <span class="typed"><span class="type">scala.xml.Text</span><a href="#84342">x</a></span>
      <span class="keyword">else</span>
        <span class="typed"><span class="type">scala.xml.NodeBuffer</span><a href="#84299">nb</a></span> <span class="typed"><span class="type">(scala.xml.Node)Unit</span><a href="../collection/mutable/ArrayBuffer.scala.html#22574">+=</a></span> <span class="typed"><span class="type">scala.xml.Text</span><a href="#84342">x</a></span>
    }
    <span class="typed"><span class="type">scala.xml.NodeBuffer</span><a href="#84299">nb</a></span> 
  }

  <span class="comment">/**
   * &lt;pre&gt;
   *   CharRef ::= &quot;&amp;amp;#&quot; '0'..'9' {'0'..'9'} &quot;;&quot;
   *             | &quot;&amp;amp;#x&quot; '0'..'9'|'A'..'F'|'a'..'f' { hexdigit } &quot;;&quot;
   * &lt;/pre&gt;
   * &lt;p&gt;
   *   see [66]
   * &lt;p&gt;
   *
   * @param ch                ...
   * @param nextch            ...
   * @param reportSyntaxError ...
   * @return                  ...
   */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">(() =&gt; Char,() =&gt; Unit,(String) =&gt; Unit)String</span><a id="25395">parseCharRef</a></span>(<span class="typed"><span class="type">() =&gt; Char</span><a id="84307">ch</a></span>: () =&gt; Char, <span class="typed"><span class="type">() =&gt; Unit</span><a id="84308">nextch</a></span>: () =&gt; Unit, <span class="typed"><span class="type">(String) =&gt; Unit</span><a id="84309">reportSyntaxError</a></span>: String =&gt; Unit): <span class="typed"><span class="type">String</span><a id="1859">String</a></span> = {
    <span class="keyword">val</span> <span class="typed"><span class="type">Boolean</span><a id="84345">hex</a></span>  = (<span class="typed"><span class="type">()Char</span><a href="../Function0.scala.html#21123">ch</a></span>() <span class="typed"><span class="type">(Char)Boolean</span><a id="3016">==</a></span> <span class="typed"><span class="type">Char('x')</span><span class="char">'x'</span></span>) <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2749">&amp;&amp;</a></span> { <span class="typed"><span class="type">()Unit</span><a href="../Function0.scala.html#21123">nextch</a></span>(); <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span> }
    <span class="keyword">val</span> <span class="typed"><span class="type">Int</span><a id="84346">base</a></span> = <span class="typed"><span class="type">Int</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Boolean</span><a href="#84345">hex</a></span>) <span class="typed"><span class="type">Int(16)</span><span class="int">16</span></span> <span class="keyword">else</span> <span class="typed"><span class="type">Int(10)</span><span class="int">10</span></span>
    <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="84347">i</a></span> = <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>
    <span class="typed"><span class="type">Unit</span><a href="#84348" class="keyword">while</a></span> (<span class="typed"><span class="type">()Char</span><a href="../Function0.scala.html#21123">ch</a></span>() <span class="typed"><span class="type">(Char)Boolean</span><a id="3017">!=</a></span> <span class="typed"><span class="type">Char(';')</span><span class="char">';'</span></span>) {
      <span class="typed"><span class="type">()Char</span><a href="../Function0.scala.html#21123">ch</a></span>() <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
        <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Char('0')</span><span class="char">'0'</span></span> | <span class="typed"><span class="type">Char('1')</span><span class="char">'1'</span></span> | <span class="typed"><span class="type">Char('2')</span><span class="char">'2'</span></span> | <span class="typed"><span class="type">Char('3')</span><span class="char">'3'</span></span> | <span class="typed"><span class="type">Char('4')</span><span class="char">'4'</span></span> | <span class="typed"><span class="type">Char('5')</span><span class="char">'5'</span></span> | <span class="typed"><span class="type">Char('6')</span><span class="char">'6'</span></span> | <span class="typed"><span class="type">Char('7')</span><span class="char">'7'</span></span> | <span class="typed"><span class="type">Char('8')</span><span class="char">'8'</span></span> | <span class="typed"><span class="type">Char('9')</span><span class="char">'9'</span></span> =&gt;
          <span class="typed"><span class="type">Int</span><a href="#84347">i</a></span> = <span class="typed"><span class="type">Int</span><a href="#84347">i</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">*</a></span> <span class="typed"><span class="type">Int</span><a href="#84346">base</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+</a></span> <span class="typed"><span class="type">implicit scala.Predef.charWrapper : (Char)scala.runtime.RichChar</span><a href="../Predef.scala.html#13512">ch</a></span>().<span class="typed"><span class="type">=&gt; Int</span><a href="../runtime/RichChar.scala.html#19382">asDigit</a></span>
        <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Char('a')</span><span class="char">'a'</span></span> | <span class="typed"><span class="type">Char('b')</span><span class="char">'b'</span></span> | <span class="typed"><span class="type">Char('c')</span><span class="char">'c'</span></span> | <span class="typed"><span class="type">Char('d')</span><span class="char">'d'</span></span> | <span class="typed"><span class="type">Char('e')</span><span class="char">'e'</span></span> | <span class="typed"><span class="type">Char('f')</span><span class="char">'f'</span></span>
           | <span class="typed"><span class="type">Char('A')</span><span class="char">'A'</span></span> | <span class="typed"><span class="type">Char('B')</span><span class="char">'B'</span></span> | <span class="typed"><span class="type">Char('C')</span><span class="char">'C'</span></span> | <span class="typed"><span class="type">Char('D')</span><span class="char">'D'</span></span> | <span class="typed"><span class="type">Char('E')</span><span class="char">'E'</span></span> | <span class="typed"><span class="type">Char('F')</span><span class="char">'F'</span></span> =&gt;
          <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a id="2745">!</a></span> <span class="typed"><span class="type">Boolean</span><a href="#84345">hex</a></span>) 
            <span class="typed"><span class="type">(String)Unit</span><a href="../Function1.scala.html#17300">reportSyntaxError</a></span>(<span class="string">&quot;hex char not allowed in decimal char ref\n&quot;</span> <span class="typed"><span class="type">java.lang.String(&quot;hex char not allowed in decimal char ref\012Did you mean to write &amp;#x ?&quot;)</span><span >+</span></span>
                              <span class="string">&quot;Did you mean to write &amp;#x ?&quot;</span>)
          <span class="keyword">else</span>
            <span class="typed"><span class="type">Int</span><a href="#84347">i</a></span> = <span class="typed"><span class="type">Int</span><a href="#84347">i</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">*</a></span> <span class="typed"><span class="type">Int</span><a href="#84346">base</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+</a></span> <span class="typed"><span class="type">implicit scala.Predef.charWrapper : (Char)scala.runtime.RichChar</span><a href="../Predef.scala.html#13512">ch</a></span>().<span class="typed"><span class="type">=&gt; Int</span><a href="../runtime/RichChar.scala.html#19382">asDigit</a></span>
        <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> _ =&gt;
          <span class="typed"><span class="type">(String)Unit</span><a href="../Function1.scala.html#17300">reportSyntaxError</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;character '&quot;)</span><span class="string">&quot;character '&quot;</span></span> <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5800">+</a></span> <span class="typed"><span class="type">()Char</span><a href="../Function0.scala.html#21123">ch</a></span>() <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5800">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;' not allowed in char ref\012&quot;)</span><span class="string">&quot;' not allowed in char ref\n&quot;</span></span>)
      }
      <span class="typed"><span class="type">()Unit</span><a href="../Function0.scala.html#21123">nextch</a></span>()
    }
    <span class="typed"><span class="type">(Array[Byte],java.lang.String)java.lang.String</span><a id="5813" class="keyword">new</a></span> <span class="typed"><span class="type">java.lang.String</span><a href="../Predef.scala.html#13327">String</a></span>(io.<span class="typed"><span class="type">object scala.io.UTF8Codec</span><a href="../io/UTF8Codec.scala.html#8928">UTF8Codec</a></span>.<span class="typed"><span class="type">(Int)Array[Byte]</span><a href="../io/UTF8Codec.scala.html#56242">encode</a></span>(<span class="typed"><span class="type">Int</span><a href="#84347">i</a></span>), <span class="typed"><span class="type">java.lang.String(&quot;utf8&quot;)</span><span class="string">&quot;utf8&quot;</span></span>)
  }

}

        </pre>
    </body>
</html>