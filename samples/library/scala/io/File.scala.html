<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/io/File.scala</title>
        <script type="text/javascript" src="../../jquery-all.js"></script>
        <script type="text/javascript" src="../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../style.css" title="Style">
    </head>
    <body>
        <pre>
/*                     __                                               *\
**     ________ ___   / /  ___     Scala API                            **
**    / __/ __// _ | / /  / _ |    (c) 2003-2009, LAMP/EPFL             **
**  __\ \/ /__/ __ |/ /__/ __ |    http://scala-lang.org/               **
** /____/\___/_/ |_/____/_/ | |                                         **
**                          |/                                          **
\*                                                                      */

// $Id$

<span class="keyword">package</span> scala.io

<span class="keyword">import</span> java.io.{ 
  FileInputStream, FileOutputStream, BufferedReader, BufferedWriter, InputStreamReader, OutputStreamWriter, 
  BufferedInputStream, BufferedOutputStream, IOException, File =&gt; JFile }
<span class="keyword">import</span> java.nio.channels.FileChannel
<span class="keyword">import</span> collection.Traversable

<span class="keyword">object</span> <a title="object scala.io.File" id="9715">File</a>
<a href="../ScalaObject.scala.html#969" title="ScalaObject">{</a>
  <span class="keyword">def</span> <a title="(path: scala.io.Path)(implicit codec: scala.io.Codec)scala.io.File" id="33623">apply</a>(<a title="scala.io.Path" id="33835">path</a>: <a href="Path.scala.html#9639" title="scala.io.Path">Path</a>)(<span class="keyword">implicit</span> <a title="scala.io.Codec" id="33640">codec</a>: <a href="Codec.scala.html#9894" title="scala.io.Codec">Codec</a> = <span title="Null(null)" class="keyword">null</span>) = 
    <span title="scala.io.File" class="keyword">if</span> (<a href="#33640" title="(x$1: AnyRef)Boolean" id="6592">codec</a> != <span title="Null(null)" class="keyword">null</span>) <span title="scala.io.File" class="keyword">new</span> <a href="#9714" title="scala.io.File">File</a>(<a href="#33835" title="scala.io.Path">path</a>.<a href="Path.scala.html#32704" title="=&gt; java.io.File">jfile</a>)(<a href="#33640" title="scala.io.Codec">codec</a>)
    <span class="keyword">else</span> <a href="#33835" title="scala.io.Path">path</a>.<a href="Path.scala.html#32710" title="=&gt; scala.io.File">toFile</a>

  // Create a temporary file
  <span class="keyword">def</span> <a title="(prefix: String,suffix: String,dir: java.io.File)scala.io.File" id="33624">makeTemp</a>(<a title="String" id="33633">prefix</a>: <span title="String">String</span> = <a href="Path.scala.html#9640" title="object scala.io.Path">Path</a>.<a href="Path.scala.html#32770" title="=&gt; java.lang.String">randomPrefix</a>, <a title="String" id="33634">suffix</a>: <span title="String">String</span> = <span title="Null(null)" class="keyword">null</span>, <a title="java.io.File" id="33635">dir</a>: <span title="java.io.File">JFile</span> = <span title="Null(null)" class="keyword">null</span>) =
    <a href="#33623" title="(path: scala.io.Path)(implicit codec: scala.io.Codec)scala.io.File">apply</a><a href="#33640" title="scala.io.Codec" id="33840">(</a><a title="object java.io.File" id="3821">JFile</a>.<a title="(x$1: java.lang.String,x$2: java.lang.String,x$3: java.io.File)java.io.File" id="32848">createTempFile</a><a href="Path.scala.html#32766" title="scala.io.Path" id="33833">(</a><a href="#33633" title="String">prefix</a>, <a href="#33634" title="String">suffix</a>, <a href="#33635" title="java.io.File">dir</a>))
    
  <span class="keyword">import</span> java.nio.channels.Channel
  <span class="keyword">type</span> <a title="&lt;refinement&gt; extends AnyRef" id="33626">Closeable</a> = <a href="#236344" title="&lt;refinement&gt; extends AnyRef">{</a> <span class="keyword">def</span> close(): Unit }
  <span class="keyword">def</span> <a title="(target: scala.io.File.Closeable)Unit" id="33627">closeQuietly</a>(<a title="scala.io.File.Closeable" id="236346">target</a>: <a href="#236344" title="scala.io.File.Closeable">Closeable</a>) {
    <span class="keyword">try</span> <a href="#236346" title="scala.io.File.Closeable">target</a>.<a href="#236345" title="()Unit">close</a>() <span class="keyword">catch</span> { <span title="Unit" class="keyword">case</span> <a title="java.io.IOException" id="236350">e</a>: <a title="java.io.IOException" id="3649">IOException</a> =&gt; }
  }  
}
<span class="keyword">import</span> File._
<span class="keyword">import</span> Path._

/** An abstraction for files.  For character data, a Codec
 *  can be supplied at either creation time or when a method
 *  involving character data is called (with the latter taking
 *  precdence if supplied.) If neither is available, the value
 *  of scala.io.Codec.default is used.
 *
 *  @author  Paul Phillips
 *  @since   2.8
 */
<span class="keyword">class</span> <a title="class File extends scala.io.Path with scala.io.Streamable.Chars with ScalaObject" id="9714">File</a><a href="../ScalaObject.scala.html#969" title="ScalaObject">(</a><a title="java.io.File" id="33709">jfile</a>: <span title="java.io.File">JFile</span>)(<span class="keyword">implicit</span> <span class="keyword">val</span> <a title="(jfile: java.io.File)scala.io.Codec" id="33710">creationCodec</a>: <a href="Codec.scala.html#9894" title="scala.io.Codec">Codec</a> = <span title="Null(null)" class="keyword">null</span>)
<span class="keyword">extends</span> <a href="Path.scala.html#9639" title="scala.io.Path">Path</a>(<a href="#33709" title="java.io.File">jfile</a>)
<span class="keyword">with</span> Streamable.<a href="Streamable.scala.html#33673" title="scala.io.Streamable.Chars">Chars</a>
{  
  <span class="keyword">def</span> <a title="(codec: scala.io.Codec)scala.io.File" id="33680">withCodec</a>(<a title="scala.io.Codec" id="236360">codec</a>: <a href="Codec.scala.html#9894" title="scala.io.Codec">Codec</a>): <a href="#9714" title="scala.io.File">File</a> = <span title="scala.io.File" class="keyword">new</span> <a href="#9714" title="scala.io.File">File</a>(<a href="Path.scala.html#32704" title="=&gt; java.io.File">jfile</a>)(<a href="#236360" title="scala.io.Codec">codec</a>)
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; scala.io.Directory" id="33681">toDirectory</a>: <a href="Directory.scala.html#9645" title="scala.io.Directory">Directory</a> = <span title="scala.io.Directory" class="keyword">new</span> <a href="Directory.scala.html#9645" title="scala.io.Directory">Directory</a>(<a href="Path.scala.html#32704" title="=&gt; java.io.File">jfile</a>)
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; scala.io.File" id="33682">toFile</a>: <a href="#9714" title="scala.io.File">File</a> = <a href="#9714" title="scala.io.File" class="keyword">this</a>
  
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Boolean" id="33683">isValid</a> = <a href="Path.scala.html#32704" title="=&gt; java.io.File">jfile</a>.<a title="()Boolean" id="32806">isFile</a><a title="(x$1: Boolean)Boolean" id="2223">(</a>) || <span title="=&gt; Boolean">!</span><a href="Path.scala.html#32704" title="=&gt; java.io.File">jfile</a>.<a title="()Boolean" id="32804">exists</a>()
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Long" id="33684">length</a> = <span class="keyword">super</span>[Path].<a href="Path.scala.html#32737" title="=&gt; Long">length</a>

  /** Obtains an InputStream. */
  <span class="keyword">def</span> <a title="()java.io.FileInputStream" id="33685">inputStream</a>() = <a title="(x$1: java.io.File)java.io.FileInputStream" id="47016" class="keyword">new</a> <a title="java.io.FileInputStream" id="3973">FileInputStream</a>(<a href="Path.scala.html#32704" title="=&gt; java.io.File">jfile</a>)
  
  /** Obtains a OutputStream. */
  <span class="keyword">def</span> <a title="(append: Boolean)java.io.FileOutputStream" id="33686">outputStream</a>(<a title="Boolean" id="236395">append</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span>) = <a title="(x$1: java.io.File,x$2: Boolean)java.io.FileOutputStream" id="47329" class="keyword">new</a> <a title="java.io.FileOutputStream" id="3961">FileOutputStream</a>(<a href="Path.scala.html#32704" title="=&gt; java.io.File">jfile</a>, <a href="#236395" title="Boolean">append</a>)
  <span class="keyword">def</span> <a title="(append: Boolean)java.io.BufferedOutputStream" id="33687">bufferedOutput</a>(<a title="Boolean" id="236420">append</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span>) = <span title="java.io.BufferedOutputStream" class="keyword">new</span> <a title="java.io.BufferedOutputStream" id="3886">BufferedOutputStream</a>(<a href="#33686" title="(append: Boolean)java.io.FileOutputStream">outputStream</a>(<a href="#236420" title="Boolean">append</a>))

  /** Obtains an OutputStreamWriter wrapped around a FileOutputStream.
   *  This should behave like a less broken version of java.io.FileWriter,
   *  in that unlike the java version you can specify the encoding.
   */
  <span class="keyword">def</span> <a title="(append: Boolean,codec: scala.io.Codec)java.io.OutputStreamWriter" id="33688">writer</a>(<a title="Boolean" id="236447">append</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span>, <a title="scala.io.Codec" id="236448">codec</a>: <a href="Codec.scala.html#9894" title="scala.io.Codec">Codec</a> = <a href="Streamable.scala.html#33703" title="(givenCodec: scala.io.Codec,allowDefault: Boolean)scala.io.Codec">getCodec</a>()) =
    <a title="(x$1: java.io.OutputStream,x$2: java.nio.charset.Charset)java.io.OutputStreamWriter" id="153016" class="keyword">new</a> <a title="java.io.OutputStreamWriter" id="4009">OutputStreamWriter</a>(<a href="#33686" title="(append: Boolean)java.io.FileOutputStream">outputStream</a>(<a href="#236447" title="Boolean">append</a>), <a href="#236448" title="scala.io.Codec">codec</a>.<a href="Codec.scala.html#33642" title="=&gt; java.nio.charset.Charset">charSet</a>)
  
  /** Wraps a BufferedWriter around the result of writer().
   */
  <span class="keyword">def</span> <a title="(append: Boolean,codec: scala.io.Codec)java.io.BufferedWriter" id="33689">bufferedWriter</a>(<a title="Boolean" id="236469">append</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span>, <a title="scala.io.Codec" id="236470">codec</a>: <a href="Codec.scala.html#9894" title="scala.io.Codec">Codec</a> = <a href="Streamable.scala.html#33703" title="(givenCodec: scala.io.Codec,allowDefault: Boolean)scala.io.Codec">getCodec</a>()) =
    <span title="java.io.BufferedWriter" class="keyword">new</span> <a title="java.io.BufferedWriter" id="3970">BufferedWriter</a>(<a href="#33688" title="(append: Boolean,codec: scala.io.Codec)java.io.OutputStreamWriter">writer</a>(<a href="#236469" title="Boolean">append</a>, <a href="#236470" title="scala.io.Codec">codec</a>))
  
  /** Writes all the Strings in the given iterator to the file. */
  <span class="keyword">def</span> <a title="(xs: Traversable[String],append: Boolean,codec: scala.io.Codec)Unit" id="33690">writeAll</a>(<a title="Traversable[String]" id="236501">xs</a>: <a href="../collection/Traversable.scala.html#4487" title="Traversable[String]">Traversable</a>[String], <a title="Boolean" id="236505">append</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span>, <a title="scala.io.Codec" id="236506">codec</a>: <a href="Codec.scala.html#9894" title="scala.io.Codec">Codec</a> = <a href="Streamable.scala.html#33703" title="(givenCodec: scala.io.Codec,allowDefault: Boolean)scala.io.Codec">getCodec</a>()): <a title="Unit" id="1963">Unit</a> = {
    <span class="keyword">val</span> <a title="java.io.BufferedWriter" id="236509">out</a> = <a href="#33689" title="(append: Boolean,codec: scala.io.Codec)java.io.BufferedWriter">bufferedWriter</a>(<a href="#236505" title="Boolean">append</a>, <a href="#236506" title="scala.io.Codec">codec</a>)
    <span class="keyword">try</span> <a href="../collection/generic/TraversableClass.scala.html#17368" title="(f: (String) =&gt; Unit)Unit">xs</a> foreach (<a href="#236509" title="(x$1: java.lang.String)Unit" id="25781">out</a> write <a href="#236519" title="String">_</a>)
    <span class="keyword">finally</span> <a href="#236509" title="java.io.BufferedWriter">out</a> <a title="()Unit" id="236489">close</a>
  }
  
  <span class="keyword">def</span> <a title="(destPath: scala.io.Path,preserveFileDate: Boolean)Unit" id="33691">copyFile</a>(<a title="scala.io.Path" id="236533">destPath</a>: <a href="Path.scala.html#9639" title="scala.io.Path">Path</a>, <a title="Boolean" id="236537">preserveFileDate</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span>) = {
    <span class="keyword">val</span> <a title="Int" id="236538">FIFTY_MB</a> = <span class="int">1024</span> * <span class="int">1024</span> <span title="Int(52428800)">*</span> <span class="int">50</span>
    <span class="keyword">val</span> <a title="scala.io.File" id="236539">dest</a> = <a href="#236533" title="scala.io.Path">destPath</a>.<a href="Path.scala.html#32710" title="=&gt; scala.io.File">toFile</a>
    <span title="Unit" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="#33683" title="=&gt; Boolean">isValid</a>) <a href="Path.scala.html#32771" title="(msg: String)Nothing">fail</a>(<a href="../runtime/RichString.scala.html#18167" title="(args: Any*)String" class="string">&quot;Source %s is not a valid file.&quot;</a> format <a href="Path.scala.html#32718" title="=&gt; String">name</a>)
    <span title="Unit" class="keyword">if</span> (<a href="#9714" title="File.this.type" class="keyword">this</a>.<a href="Path.scala.html#32720" title="(x$1: AnyRef)Boolean" id="3639">normalize</a> == <a href="#236539" title="scala.io.File">dest</a>.<a href="Path.scala.html#32720" title="=&gt; scala.io.Path">normalize</a>) <a href="Path.scala.html#32771" title="(msg: String)Nothing">fail</a>(<span title="java.lang.String(&quot;Source and destination are the same.&quot;)" class="string">&quot;Source and destination are the same.&quot;</span>)
    <span title="Unit" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="#236539" title="scala.io.File">dest</a>.<a href="Path.scala.html#32723" title="=&gt; Option[scala.io.Path]">parent</a>.<a href="../Option.scala.html#19873" title="(f: (scala.io.Path) =&gt; Boolean)Option[Boolean]">map</a>(<a href="#236596" title="scala.io.Path">_</a>.<a href="Path.scala.html#32728" title="=&gt; Boolean">exists</a>).<a href="../Option.scala.html#19870" title="(default: =&gt; Boolean)Boolean">getOrElse</a>(<span title="Boolean(false)" class="keyword">false</span>)) <a href="Path.scala.html#32771" title="(msg: String)Nothing">fail</a>(<span title="java.lang.String(&quot;Destination cannot be created.&quot;)" class="string">&quot;Destination cannot be created.&quot;</span>)
    <span title="Unit" class="keyword">if</span> (<a href="#236539" title="scala.io.File">dest</a>.<a href="Path.scala.html#32728" title="(x$1: Boolean)Boolean" id="2225">exists</a> &amp;&amp; <span title="=&gt; Boolean">!</span><a href="#236539" title="scala.io.File">dest</a>.<a href="Path.scala.html#32727" title="=&gt; Boolean">canWrite</a>) <a href="Path.scala.html#32771" title="(msg: String)Nothing">fail</a>(<span title="java.lang.String(&quot;Destination exists but is not writable.&quot;)" class="string">&quot;Destination exists but is not writable.&quot;</span>)
    <span title="Unit" class="keyword">if</span> (<a href="#236539" title="scala.io.File">dest</a>.<a href="Path.scala.html#32731" title="=&gt; Boolean">isDirectory</a>) <a href="Path.scala.html#32771" title="(msg: String)Nothing">fail</a>(<span title="java.lang.String(&quot;Destination exists but is a directory.&quot;)" class="string">&quot;Destination exists but is a directory.&quot;</span>)

    <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="java.io.FileInputStream" id="236541">in_s</a> = <a href="#33685" title="()java.io.FileInputStream">inputStream</a>()
    <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="java.io.FileOutputStream" id="236543">out_s</a> = <a href="#236539" title="scala.io.File">dest</a>.<a href="#33686" title="(append: Boolean)java.io.FileOutputStream">outputStream</a>()
    <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="java.nio.channels.FileChannel" id="236545">in</a> = <a href="#236540" title="=&gt; java.io.FileInputStream">in_s</a>.<a title="()java.nio.channels.FileChannel" id="47032">getChannel</a>()
    <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="java.nio.channels.FileChannel" id="236547">out</a> = <a href="#236542" title="=&gt; java.io.FileOutputStream">out_s</a>.<a title="()java.nio.channels.FileChannel" id="47344">getChannel</a>()

    <span class="keyword">try</span> {      
      <span class="keyword">val</span> <a title="Long" id="236623">size</a> = <a href="#236544" title="=&gt; java.nio.channels.FileChannel">in</a>.<a title="()Long" id="47487">size</a>()
      <span class="keyword">var</span> <a title="Long" id="236624">pos</a>, <a title="Long" id="236625">count</a> = <span title="Long(0L)" class="long">0L</span>
      <span title="Unit" class="keyword">while</span> (<a href="#236624" title="(x$1: Long)Boolean" id="3205">pos</a> &lt; <a href="#236623" title="Long">size</a>) <a href="#236628" title="()Unit">{</a>
        <a href="#236625" title="Long">count</a> = <a href="../runtime/RichLong.scala.html#19124" title="(y: Long)Long">(</a><a href="#236623" title="(x$1: Long)Long" id="3215">size</a> <a href="../Predef.scala.html#16467" title="implicit scala.Predef.longWrapper : (x: Long)scala.runtime.RichLong">-</a> <a href="#236624" title="Long">pos</a>) min <a href="../Predef.scala.html#16490" title="implicit scala.Predef.int2long : (x: Int)Long">FIFTY_MB</a>
        <a href="#236624" title="Long" id="3213">pos</a> += <a href="#236546" title="=&gt; java.nio.channels.FileChannel">out</a>.<a title="(x$1: java.nio.channels.ReadableByteChannel,x$2: Long,x$3: Long)Long" id="47496">transferFrom</a>(<a href="#236544" title="=&gt; java.nio.channels.FileChannel">in</a>, <a href="#236624" title="Long">pos</a>, <a href="#236625" title="Long">count</a>)
      }
    }
    <span class="keyword">finally</span> <a href="../collection/immutable/List.scala.html#17642" title="[A](xs: A*)List[A]">List</a><span title="(xs: scala.io.File.Closeable*)List[scala.io.File.Closeable]">[</span><a href="#236344" title="scala.io.File.Closeable">Closeable</a>]<a href="../collection/generic/LinearSequenceTemplate.scala.html#19509" title="(f: (scala.io.File.Closeable) =&gt; Unit)Unit">(</a><a href="#236546" title="=&gt; java.nio.channels.FileChannel">out</a>, <a href="#236542" title="=&gt; java.io.FileOutputStream">out_s</a>, <a href="#236544" title="=&gt; java.nio.channels.FileChannel">in</a>, <a href="#236540" title="=&gt; java.io.FileInputStream">in_s</a>) foreach <a href="#33627" title="(target: scala.io.File.Closeable)Unit">closeQuietly</a>
    
    <span title="Unit" class="keyword">if</span> (<a href="#9714" title="File.this.type" class="keyword">this</a>.<a href="#33684" title="(x$1: Long)Boolean" id="3203">length</a> != <a href="#236539" title="scala.io.File">dest</a>.<a href="#33684" title="=&gt; Long">length</a>)
      <a href="Path.scala.html#32771" title="(msg: String)Nothing">fail</a>(<a href="../Predef.scala.html#16471" title="implicit scala.Predef.stringWrapper : (x: String)scala.runtime.RichString" class="string">&quot;Failed to completely copy %s to %s&quot;</a>.<a href="../runtime/RichString.scala.html#18167" title="(args: Any*)String">format</a>(<a href="Path.scala.html#32718" title="=&gt; String">name</a>, <a href="#236539" title="scala.io.File">dest</a>.<a href="Path.scala.html#32718" title="=&gt; String">name</a>))
    
    <span title="AnyVal with NotNull" class="keyword">if</span> (<a href="#236537" title="Boolean">preserveFileDate</a>)
      <a href="#236539" title="scala.io.File">dest</a>.<a href="Path.scala.html#32736" title="(time: Long)Boolean">lastModified</a> = <a href="#9714" title="File.this.type" class="keyword">this</a>.<a href="Path.scala.html#32735" title="=&gt; Long">lastModified</a>
    
    <span title="Unit">(</span>)
  }
  
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="33692">toString</a>() = <a href="../Predef.scala.html#16471" title="implicit scala.Predef.stringWrapper : (x: String)scala.runtime.RichString" class="string">&quot;File(%s)&quot;</a>.<a href="../runtime/RichString.scala.html#18167" title="(args: Any*)String">format</a>(<a href="Path.scala.html#32719" title="=&gt; String">path</a>)
}

        </pre>
    </body>
</html>