<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/collection/generic/LinkedListTemplate.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style">
    </head>
    <body>
        <pre>
/*                     __                                               *\
**     ________ ___   / /  ___     Scala API                            **
**    / __/ __// _ | / /  / _ |    (c) 2003-2009, LAMP/EPFL             **
**  __\ \/ /__/ __ |/ /__/ __ |                                         **
** /____/\___/_/ |_/____/_/ | |                                         **
**                          |/                                          **
\*                                                                      */

// $Id: LinkedListTemplate.scala 18553 2009-08-23 14:58:41Z extempore $


<span class="keyword">package</span> scala.collection.generic
<span class="keyword">import</span> scala.collection._
<span class="keyword">import</span> annotation.tailrec

/** This extensible class may be used as a basis for implementing linked
 *  list. Type variable &lt;code&gt;A&lt;/code&gt; refers to the element type of the
 *  list, type variable &lt;code&gt;This&lt;/code&gt; is used to model self types of
 *  linked lists.
 *  !!! todo: integrate with LinearSequence, need to drop null then. 
 *  @author  Matthias Zenger
 *  @author  Martin Odersky
 *  @version 2.8
 */
<span class="keyword">trait</span> <a title="trait LinkedListTemplate[A, This &gt;: Null &lt;: Sequence[A] with scala.collection.generic.LinkedListTemplate[A,This]] extends java.lang.Object with scala.collection.generic.SequenceTemplate[A,This] with ScalaObject" id="11047">LinkedListTemplate</a>[<a title="&gt;: Nothing &lt;: Any" id="13625">A</a>, <a title="&gt;: Null &lt;: Sequence[A] with scala.collection.generic.LinkedListTemplate[A,This]" id="13626">This</a> &gt;: Null &lt;: Sequence[A] <span class="keyword">with</span> LinkedListTemplate[A, This]] <a href="../../ScalaObject.scala.html#969" title="ScalaObject" class="keyword">extends</a> <a href="SequenceTemplate.scala.html#11041" title="scala.collection.generic.SequenceTemplate[A,This]">SequenceTemplate</a>[A, This] { self =&gt;
  
  <span class="keyword">var</span> <a title="A" id="19748">elem</a>: <a href="#13625" title="A">A</a> = _
  <span class="keyword">var</span> <a title="This" id="19751">next</a>: <a href="#13626" title="This">This</a> = _

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Boolean" id="19753">isEmpty</a> = <span title="Boolean(false)" class="keyword">false</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Int" id="19754">length</a>: <span title="Int">Int</span> = <span title="(x$1: Int)Int" class="int">1</span> + (<span title="Int" class="keyword">if</span> (<a href="#19751" title="(x$1: AnyRef)Boolean">next</a> eq <span title="Null(null)" class="keyword">null</span>) <span title="Int(0)" class="int">0</span> <span class="keyword">else</span> <a href="#19751" title="=&gt; This">next</a>.<a href="#19754" title="=&gt; Int">length</a>)

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; A" id="19755">head</a>: <a href="#13625" title="A">A</a>    = <a href="#19748" title="=&gt; A">elem</a>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; This" id="19756">tail</a>: <a href="#13626" title="This">This</a> = <a href="#19751" title="=&gt; This">next</a>

  <span class="keyword">def</span> <a title="(that: This)Unit" id="19757">append</a>(<a title="This" id="119094">that</a>: <a href="#13626" title="This">This</a>): <span title="Unit">Unit</span> = {
    @tailrec
    <span class="keyword">def</span> <a title="(x: This)Unit" id="119096">loop</a>(<a title="This" id="119097">x</a>: <a href="#13626" title="This">This</a>): <span title="Unit">Unit</span> = {
      <span title="Unit" class="keyword">if</span> (<a href="#119097" title="This">x</a>.<a href="#19751" title="(x$1: AnyRef)Boolean">next</a> eq <span title="Null(null)" class="keyword">null</span>) <a href="#119097" title="This">x</a>.<a href="#19751" title="(x$1: This)Unit">next</a> = <a href="#119094" title="This">that</a>
      <span class="keyword">else</span> <a href="#119096" title="(x: This)Unit">loop</a>(<a href="#119097" title="This">x</a>.<a href="#19751" title="=&gt; This">next</a>)
    }
    <a href="#119096" title="(x: This)Unit">loop</a>(<a href="TraversableTemplate.scala.html#17237" title="=&gt; This">thisCollection</a>)
  }

  <span class="keyword">def</span> <a title="(that: This)Unit" id="19758">insert</a>(<a title="This" id="119106">that</a>: <a href="#13626" title="This">This</a>): <span title="Unit">Unit</span> = <span title="Unit" class="keyword">if</span> (<a href="#119106" title="(x$1: AnyRef)Boolean">that</a> ne <span title="Null(null)" class="keyword">null</span>) {
    <a href="#119106" title="This">that</a>.<a href="#19757" title="(that: This)Unit">append</a>(<a href="#19751" title="=&gt; This">next</a>)
    <a href="#19751" title="(x$1: This)Unit">next</a> = <a href="#119106" title="This">that</a>
  }

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(n: Int)This" id="19759">drop</a>(<a title="Int" id="119114">n</a>: <span title="Int">Int</span>): <a href="#13626" title="This">This</a> = {
    <span class="keyword">var</span> <a title="Int" id="119116">i</a> = <span title="Int(0)" class="int">0</span>
    <span class="keyword">var</span> <a title="This" id="119117">these</a>: <a href="#13626" title="This">This</a> = <a href="TraversableTemplate.scala.html#17237" title="=&gt; This">thisCollection</a>
    <span title="Unit" class="keyword">while</span> (<a href="#119116" title="(x$1: Int)Boolean" id="2969">i</a> <a title="(x$1: Boolean)Boolean" id="2225">&lt;</a> <a href="#119114" title="Int">n</a> &amp;&amp; (<a href="#119117" title="(x$1: AnyRef)Boolean">these</a> ne <span title="Null(null)" class="keyword">null</span>)) <a href="#119118" title="()Unit">{</a>
      <a href="#119117" title="This">these</a> = <a href="#119117" title="This">these</a>.<a href="#19751" title="=&gt; This">next</a>.<a title="[T0]T0" id="3636">asInstanceOf</a><span title="This">[</span><a href="#13626" title="This">This</a>] // !!! concrete overrides abstract problem
      <a href="#119116" title="Int">i</a> += <span title="Int(1)" class="int">1</span>
    }
    <a href="#119117" title="This">these</a>
  }
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="[T](n: Int)(f: (This) =&gt; T)T" id="19760">atLocation</a>[<a title="&gt;: Nothing &lt;: Any" id="19762">T</a>](<a title="Int" id="119165">n</a>: <span title="Int">Int</span>)(<a title="(This) =&gt; T" id="119166">f</a>: This =&gt; T) = {
    <span class="keyword">val</span> <a title="This" id="119169">loc</a> = <a href="#19759" title="(n: Int)This">drop</a>(<a href="#119165" title="Int">n</a>)
    <span title="T" class="keyword">if</span> (<a href="#119169" title="(x$1: AnyRef)Boolean">loc</a> ne <span title="Null(null)" class="keyword">null</span>) <a href="../../Function1.scala.html#17226" title="(v1: This)T">f</a>(<a href="#119169" title="This">loc</a>)
    <span class="keyword">else</span> <span title="Nothing" class="keyword">throw</span> <a title="(x$1: java.lang.String)java.lang.IndexOutOfBoundsException" id="20832" class="keyword">new</a> <a href="../../Predef.scala.html#16271" title="java.lang.IndexOutOfBoundsException">IndexOutOfBoundsException</a>(<a href="#119165" title="Int">n</a>.<a title="()java.lang.String" id="3632">toString</a>)
  }

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(n: Int)A" id="19763">apply</a>(<a title="Int" id="119184">n</a>: <span title="Int">Int</span>): <a href="#13625" title="A">A</a>   = <a href="#19760" title="(n: Int)(f: (This) =&gt; A)A">atLocation</a>(<a href="#119184" title="Int">n</a>)(<a href="#119193" title="This">_</a>.<a href="#19748" title="=&gt; A">elem</a>)
  <span class="keyword">def</span> <a title="(n: Int,x: A)Unit" id="19764">update</a>(<a title="Int" id="119198">n</a>: <span title="Int">Int</span>, <a title="A" id="119199">x</a>: <a href="#13625" title="A">A</a>): <span title="Unit">Unit</span>  = <a href="#19760" title="(n: Int)(f: (This) =&gt; Unit)Unit">atLocation</a>(<a href="#119198" title="Int">n</a>)(<a href="#119208" title="This">_</a>.<a href="#19748" title="(x$1: A)Unit">elem</a> = <a href="#119199" title="A">x</a>)

  <span class="keyword">def</span> <a title="(n: Int)Option[A]" id="19765">get</a>(<a title="Int" id="119215">n</a>: <span title="Int">Int</span>): <a href="../../Option.scala.html#789" title="Option[A]">Option</a>[A] = {
    <span class="keyword">val</span> <a title="This" id="119217">loc</a> = <a href="#19759" title="(n: Int)This">drop</a>(<a href="#119215" title="Int">n</a>)
    <span title="Option[A]" class="keyword">if</span> (<a href="#119217" title="(x$1: AnyRef)Boolean">loc</a> ne <span title="Null(null)" class="keyword">null</span>) <a href="../../Option.scala.html#19907" title="(x: A)Some[A]">Some</a>(<a href="#119217" title="This">loc</a>.<a href="#19748" title="=&gt; A">elem</a>)
    <span class="keyword">else</span> <a href="../../Option.scala.html#472" title="object None">None</a>
  }

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Iterator[A]" id="19766">iterator</a>: <a href="../Iterator.scala.html#4301" title="Iterator[A]">Iterator</a>[A] = <a href="#119229" title="java.lang.Object with Iterator[A]{ ... }" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with Iterator[A]" id="119229">Iterator</a>[A] {
    <span class="keyword">var</span> <a title="scala.collection.generic.LinkedListTemplate[A,This]" id="119232">elems</a> = <a href="#11047" title="scala.collection.generic.LinkedListTemplate[A,This]">self</a>
    <span class="keyword">def</span> <a title="=&gt; Boolean" id="119234">hasNext</a> = (<a href="#119232" title="(x$1: AnyRef)Boolean">elems</a> ne <span title="Null(null)" class="keyword">null</span>)
    <span class="keyword">def</span> <a title="()A" id="119235">next</a> = {
      <span class="keyword">val</span> <a title="A" id="119249">res</a> = <a href="#119232" title="=&gt; scala.collection.generic.LinkedListTemplate[A,This]">elems</a>.<a href="#19748" title="=&gt; A">elem</a>
      <a href="#119232" title="(x$1: scala.collection.generic.LinkedListTemplate[A,This])Unit">elems</a> = <a href="#119232" title="=&gt; scala.collection.generic.LinkedListTemplate[A,This]">elems</a>.<a href="#19751" title="=&gt; This">next</a>
      <a href="#119249" title="A">res</a>;
    }
  }

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="[B](f: (A) =&gt; B)Unit" id="19767">foreach</a>[<a title="&gt;: Nothing &lt;: Any" id="19769">B</a>](<a title="(A) =&gt; B" id="119254">f</a>: A =&gt; B) {
    <span class="keyword">var</span> <a title="scala.collection.generic.LinkedListTemplate[A,This]" id="119263">these</a> = <a href="#11047" title="scala.collection.generic.LinkedListTemplate[A,This]" class="keyword">this</a>
    <span title="Unit" class="keyword">while</span> (<a href="#119263" title="(x$1: AnyRef)Boolean">these</a> ne <span title="Null(null)" class="keyword">null</span>) <a href="#119264" title="()Unit">{</a>
      <a href="../../Function1.scala.html#17226" title="(v1: A)B">f</a>(<a href="#119263" title="scala.collection.generic.LinkedListTemplate[A,This]">these</a>.<a href="#19748" title="=&gt; A">elem</a>);
      <a href="#119263" title="scala.collection.generic.LinkedListTemplate[A,This]">these</a> = <a href="#119263" title="scala.collection.generic.LinkedListTemplate[A,This]">these</a>.<a href="#19751" title="=&gt; This">next</a>
    }
  }
}

        </pre>
    </body>
</html>