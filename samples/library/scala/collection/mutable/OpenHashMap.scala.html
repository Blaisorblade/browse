<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/collection/mutable/OpenHashMap.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style">
    </head>
    <body>
        <pre>
/*                     __                                               *\
**     ________ ___   / /  ___     Scala API                            **
**    / __/ __// _ | / /  / _ |    (c) 2003-2009, LAMP/EPFL             **
**  __\ \/ /__/ __ |/ /__/ __ |                                         **
** /____/\___/_/ |_/____/_/ | |                                         **
**                          |/                                          **
\*                                                                      */

// $Id: OpenHashMap.scala 17925 2009-05-30 18:10:21Z rytz $


<span class="keyword">package</span> scala.collection.mutable;

<span class="keyword">object</span> <a title="object scala.collection.mutable.OpenHashMap" id="7762">OpenHashMap</a><a href="../../ScalaObject.scala.html#969" title="ScalaObject">{</a>
  <span class="keyword">def</span> <a title="[K, V](elems: (K, V)*)scala.collection.mutable.OpenHashMap[K,V]" id="151121">apply</a>[<a title="&gt;: Nothing &lt;: Any" id="151124">K</a>, <a title="&gt;: Nothing &lt;: Any" id="151125">V</a>](<a title="(K, V)*" id="151184">elems</a> : <a title="(K, V)*" id="4191">(</a>K, V)*) = {
    <span class="keyword">val</span> <a title="scala.collection.mutable.OpenHashMap[K,V]" id="151187">dict</a> = <a href="#151139" title="()scala.collection.mutable.OpenHashMap[K,V]" class="keyword">new</a> <a href="#7761" title="scala.collection.mutable.OpenHashMap[K,V]">OpenHashMap</a>[K, V];
    <a href="#151184" title="(K, V)*">elems</a>.<a href="../generic/IterableTemplate.scala.html#17394" title="(f: ((K, V)) =&gt; Unit)Unit">foreach</a>(<a href="#151209" title="Unit">{</a><span title="Unit" class="keyword">case</span> (<a title="K" id="151212">x</a>, <a title="V" id="151213">y</a>) =&gt; <a href="#151162" title="(key: K,value: V)Unit">dict</a>(<a href="#151212" title="K">x</a>) = <a href="#151213" title="V">y</a>});
    <a href="#151187" title="scala.collection.mutable.OpenHashMap[K,V]">dict</a>;
  }

  <span class="keyword">def</span> <a title="[K, V]scala.collection.mutable.OpenHashMap[K,V]" id="151126">empty</a>[<a title="&gt;: Nothing &lt;: Any" id="151129">K</a>, <a title="&gt;: Nothing &lt;: Any" id="151130">V</a>] = <a href="#151139" title="()scala.collection.mutable.OpenHashMap[K,V]" class="keyword">new</a> <a href="#7761" title="scala.collection.mutable.OpenHashMap[K,V]">OpenHashMap</a>[K, V];

  <span class="keyword">private</span>[mutable] <span class="keyword">class</span> <a title="class Entry[Key, Value] extends java.lang.Object with ScalaObject" id="151131">Entry</a>[<a title="&gt;: Nothing &lt;: Any" id="151132">Key</a>, <a title="&gt;: Nothing &lt;: Any" id="151133">Value</a>]<a href="../../ScalaObject.scala.html#969" title="ScalaObject">(</a><span class="keyword">val</span> <a title="Key" id="151260">key</a> : <a href="#151132" title="Key">Key</a>, 
                                           <span class="keyword">val</span> <a title="Int" id="151261">hash</a> : <span title="Int">Int</span>,
                                           <span class="keyword">var</span> <a title="Option[Value]" id="151262">value</a> : <a href="../../Option.scala.html#789" title="Option[Value]">Option</a>[Value])

  <span class="keyword">private</span>[mutable] <span class="keyword">def</span> <a title="(j: Int)Int" id="151134">highestOneBit</a>(<a title="Int" id="151265">j</a> : <span title="Int">Int</span>) = { // This should really go somewhere central as we're now code sharing by cut and paste. :(
    <span class="keyword">var</span> <a title="Int" id="151268">i</a> = <a href="#151265" title="Int">j</a>;
    <a href="#151268" title="Int">i</a> |= (<a href="#151268" title="(x$1: Int)Int">i</a> &gt;&gt;  <span title="Int(1)" class="int">1</span>);
    <a href="#151268" title="Int">i</a> |= (<a href="#151268" title="(x$1: Int)Int">i</a> &gt;&gt;  <span title="Int(2)" class="int">2</span>);
    <a href="#151268" title="Int">i</a> |= (<a href="#151268" title="(x$1: Int)Int">i</a> &gt;&gt;  <span title="Int(4)" class="int">4</span>);
    <a href="#151268" title="Int">i</a> |= (<a href="#151268" title="(x$1: Int)Int">i</a> &gt;&gt;  <span title="Int(8)" class="int">8</span>);
    <a href="#151268" title="Int">i</a> |= (<a href="#151268" title="(x$1: Int)Int">i</a> &gt;&gt; <span title="Int(16)" class="int">16</span>);
    <a href="#151268" title="(x$1: Int)Int">i</a> - (<a href="#151268" title="(x$1: Int)Int">i</a> &gt;&gt;&gt; <span title="Int(1)" class="int">1</span>);
  }

  <span class="keyword">private</span>[mutable] <span class="keyword">def</span> <a title="(i: Int)Int" id="151135">nextPowerOfTwo</a>(<a title="Int" id="151421">i</a> : <span title="Int">Int</span>) = <a href="#151134" title="(j: Int)Int">highestOneBit</a><a title="(x$1: Int)Int" id="2866">(</a><a href="#151421" title="Int">i</a>) &lt;&lt; <span title="Int(1)" class="int">1</span>; 
}

<span class="keyword">import</span> OpenHashMap.Entry;

/**
 * A mutable hash map based on an open hashing scheme. The precise scheme is undefined,
 * but it should make a reasonable effort to ensure that an insert with consecutive hash
 * codes is not unneccessarily penalised. In particular, mappings of consecutive integer
 * keys should work without significant performance loss.
 *
 * @author David MacIver
 */
<span class="keyword">class</span> <a title="class OpenHashMap[Key, Value] extends java.lang.Object with scala.collection.mutable.Map[Key,Value] with ScalaObject" id="7761">OpenHashMap</a>[<a title="&gt;: Nothing &lt;: Any" id="14479">Key</a>, <a title="&gt;: Nothing &lt;: Any" id="14480">Value</a>]<a href="../../ScalaObject.scala.html#969" title="ScalaObject">(</a><a title="Int" id="151180">initialSize</a> : <span title="Int">Int</span>) <span class="keyword">extends</span> scala.collection.mutable.<a href="Map.scala.html#7653" title="scala.collection.mutable.Map[Key,Value]">Map</a>[Key, Value]{
  <span class="keyword">def</span> <a title="()scala.collection.mutable.OpenHashMap[Key,Value]" id="151139" class="keyword">this</a>() = <a href="#7761" title="OpenHashMap.this.type" class="keyword">this</a>(<span title="Int(8)" class="int">8</span>);

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; scala.collection.mutable.OpenHashMap[Key,Value]" id="151140">empty</a> = <a href="#7762" title="object scala.collection.mutable.OpenHashMap">OpenHashMap</a>.<a href="#151126" title="scala.collection.mutable.OpenHashMap[Key,Value]">empty</a>

  <span class="keyword">private</span>[<span class="keyword">this</span>] <span class="keyword">val</span> <a title="Int" id="151141">actualInitialSize</a> = <a href="#7762" title="object scala.collection.mutable.OpenHashMap">OpenHashMap</a>.<a href="#151135" title="(i: Int)Int">nextPowerOfTwo</a>(<a href="#151180" title="Int">initialSize</a>);

  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Int" id="151143">mask</a> = <a href="#151141" title="(x$1: Int)Int">actualInitialSize</a> - <span title="Int(1)" class="int">1</span>;;
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Array[scala.collection.mutable.OpenHashMap.Entry[Key,Value]]" id="151146">table</a> : <a href="../../Array.scala.html#897" title="Array[scala.collection.mutable.OpenHashMap.Entry[Key,Value]]">Array</a>[Entry[Key, Value]] = <span title="Array[scala.collection.mutable.OpenHashMap.Entry[Key,Value]]" class="keyword">new</span> <a href="../../Array.scala.html#897" title="Array[scala.collection.mutable.OpenHashMap.Entry[Key,Value]]">Array</a>[Entry[Key, Value]](<a href="#151141" title="Int">actualInitialSize</a>);
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Int" id="151149">_size</a> = <span title="Int(0)" class="int">0</span>;
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Int" id="151152">deleted</a> = <span title="Int(0)" class="int">0</span>; 
 
  // Used for tracking inserts so that iterators can determine in concurrent modification has occurred.
  <span class="keyword">private</span>[<span class="keyword">this</span>] <span class="keyword">var</span> <a title="Int" id="151154">modCount</a> = <span title="Int(0)" class="int">0</span>;

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Int" id="151155">size</a> = <a href="#151149" title="=&gt; Int">_size</a>;
  <span class="keyword">private</span>[<span class="keyword">this</span>] <span class="keyword">def</span> <a title="(s: Int)Unit" id="151156">size_=</a>(<a title="Int" id="151469">s</a> : <span title="Int">Int</span>) = <a href="#151149" title="(x$1: Int)Unit">_size</a> = <a href="#151469" title="Int">s</a>;

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(key: Key)Int" id="151157">hashOf</a>(<a title="Key" id="151474">key</a> : <a href="#14479" title="Key">Key</a>) = {
    <span class="keyword">var</span> <a title="Int" id="151477">h</a> = <a href="#151474" title="Key">key</a>.<a title="()Int" id="3631">hashCode</a>;
    <a href="#151477" title="Int">h</a> ^= (<span title="(x$1: Int)Int">(</span><a href="#151477" title="(x$1: Int)Int">h</a> &gt;&gt;&gt; <span title="Int(20)" class="int">20</span>) ^ (<a href="#151477" title="(x$1: Int)Int">h</a> &gt;&gt;&gt; <span title="Int(12)" class="int">12</span>));
    <a href="#151477" title="(x$1: Int)Int">h</a> <span title="(x$1: Int)Int">^</span> (<a href="#151477" title="(x$1: Int)Int">h</a> &gt;&gt;&gt; <span title="Int(7)" class="int">7</span>) ^ (<a href="#151477" title="(x$1: Int)Int">h</a> &gt;&gt;&gt; <span title="Int(4)" class="int">4</span>);
  }

  <span class="keyword">private</span>[<span class="keyword">this</span>] <span class="keyword">def</span> <a title="=&gt; Unit" id="151158">growTable</a> = {
    <span class="keyword">val</span> <a title="Int" id="151547">oldSize</a> = <a href="#151143" title="(x$1: Int)Int">mask</a> + <span title="Int(1)" class="int">1</span>;
    <span class="keyword">val</span> <a title="Int" id="151548">newSize</a> = <span title="(x$1: Int)Int" class="int">4</span> * <a href="#151547" title="Int">oldSize</a>;
    <span class="keyword">val</span> <a title="Array[scala.collection.mutable.OpenHashMap.Entry[Key,Value]]" id="151549">oldTable</a> = <a href="#151146" title="=&gt; Array[scala.collection.mutable.OpenHashMap.Entry[Key,Value]]">table</a>;
    <a href="#151146" title="(x$1: Array[scala.collection.mutable.OpenHashMap.Entry[Key,Value]])Unit">table</a> = <span title="Array[scala.collection.mutable.OpenHashMap.Entry[Key,Value]]" class="keyword">new</span> <a href="../../Array.scala.html#897" title="Array[scala.collection.mutable.OpenHashMap.Entry[Key,Value]]">Array</a>[Entry[Key, Value]](<a href="#151548" title="Int">newSize</a>);
    <a href="#151143" title="(x$1: Int)Unit">mask</a> = <a href="#151548" title="(x$1: Int)Int">newSize</a> - <span title="Int(1)" class="int">1</span>;     
    <a href="#151549" title="Array[scala.collection.mutable.OpenHashMap.Entry[Key,Value]]">oldTable</a>.<a href="../generic/VectorTemplate.scala.html#17859" title="(f: (scala.collection.mutable.OpenHashMap.Entry[Key,Value]) =&gt; Unit)Unit">foreach</a>( <a title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]" id="151604">entry</a> =&gt;
      <span title="Unit" class="keyword">if</span> (<a href="#151604" title="(x$1: AnyRef)Boolean">entry</a> <span title="(x$1: Boolean)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span> &amp;&amp; <a href="#151604" title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]">entry</a>.<a href="#151262" title="(x$1: AnyRef)Boolean">value</a> != <a href="../../Option.scala.html#472" title="object None">None</a>) <a href="#151161" title="(entry: scala.collection.mutable.OpenHashMap.Entry[Key,Value])Unit">addEntry</a>(<a href="#151604" title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]">entry</a>));
    <a href="#151152" title="(x$1: Int)Unit">deleted</a> = <span title="Int(0)" class="int">0</span>;
  } 

  <span class="keyword">private</span>[<span class="keyword">this</span>] <span class="keyword">def</span> <a title="(key: Key)Int" id="151159">findIndex</a>(<a title="Key" id="151646">key</a> : <a href="#14479" title="Key">Key</a>) : <span title="Int">Int</span> = <a href="#151160" title="(key: Key,hash: Int)Int">findIndex</a>(<a href="#151646" title="Key">key</a>, <a href="#151157" title="(key: Key)Int">hashOf</a>(<a href="#151646" title="Key">key</a>));

  <span class="keyword">private</span>[<span class="keyword">this</span>] <span class="keyword">def</span> <a title="(key: Key,hash: Int)Int" id="151160">findIndex</a>(<a title="Key" id="151643">key</a> : <a href="#14479" title="Key">Key</a>, <a title="Int" id="151644">hash</a> : <span title="Int">Int</span>) : <span title="Int">Int</span> = {
    <span class="keyword">var</span> <a title="Int" id="151689">j</a> = <a href="#151644" title="Int">hash</a>;

    <span class="keyword">var</span> <a title="Int" id="151690">index</a> = <a href="#151644" title="(x$1: Int)Int">hash</a> &amp; <a href="#151143" title="=&gt; Int">mask</a>;
    <span class="keyword">var</span> <a title="Int" id="151691">perturb</a> = <a href="#151690" title="Int">index</a>;
    <span title="Unit" class="keyword">while</span>(<a href="../../Array.scala.html#17823" title="(i: Int)scala.collection.mutable.OpenHashMap.Entry[Key,Value]">table</a><span title="(x$1: AnyRef)Boolean">(</span><a href="#151690" title="Int">index</a>) <span title="(x$1: Boolean)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span> &amp;&amp; 
          <span title="=&gt; Boolean">!</span>(<a href="../../Array.scala.html#17823" title="(i: Int)scala.collection.mutable.OpenHashMap.Entry[Key,Value]">table</a>(<a href="#151690" title="Int">index</a>).<a href="#151261" title="(x$1: Int)Boolean">hash</a> <span title="(x$1: Boolean)Boolean">==</span> <a href="#151644" title="Int">hash</a> &amp;&amp;
            <a href="../../Array.scala.html#17823" title="(i: Int)scala.collection.mutable.OpenHashMap.Entry[Key,Value]">table</a>(<a href="#151690" title="Int">index</a>).<a href="#151260" title="(x$1: Any)Boolean">key</a> == <a href="#151643" title="Key">key</a>))<a href="#151692" title="()Unit">{</a>
      <a href="#151689" title="Int">j</a> = <span title="(x$1: Int)Int" class="int">5</span> <span title="(x$1: Int)Int">*</span> <a href="#151689" title="Int">j</a> <span title="(x$1: Int)Int">+</span> <span title="Int(1)" class="int">1</span> + <a href="#151691" title="Int">perturb</a>;
      <a href="#151691" title="Int">perturb</a> &gt;&gt;= <span title="Int(5)" class="int">5</span>;
      <a href="#151690" title="Int">index</a> = <a href="#151689" title="(x$1: Int)Int">j</a> &amp; <a href="#151143" title="=&gt; Int">mask</a>;
    }
    <a href="#151690" title="Int">index</a>;
  }

  <span class="keyword">private</span>[<span class="keyword">this</span>] <span class="keyword">def</span> <a title="(entry: scala.collection.mutable.OpenHashMap.Entry[Key,Value])Unit" id="151161">addEntry</a>(<a title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]" id="151620">entry</a> : <a href="#151131" title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]">Entry</a>[Key, Value]) = 
    <span title="Unit" class="keyword">if</span> (<a href="#151620" title="(x$1: AnyRef)Boolean">entry</a> != <span title="Null(null)" class="keyword">null</span>) <a href="../../Array.scala.html#17824" title="(i: Int,x: scala.collection.mutable.OpenHashMap.Entry[Key,Value])Unit">table</a>(<a href="#151160" title="(key: Key,hash: Int)Int">findIndex</a>(<a href="#151620" title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]">entry</a>.<a href="#151260" title="=&gt; Key">key</a>, <a href="#151620" title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]">entry</a>.<a href="#151261" title="=&gt; Int">hash</a>)) = <a href="#151620" title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]">entry</a>;

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(key: Key,value: Value)Unit" id="151162">update</a>(<a title="Key" id="151216">key</a> : <a href="#14479" title="Key">Key</a>, <a title="Value" id="151217">value</a> : <a href="#14480" title="Value">Value</a>) {
    <a href="#151166" title="(key: Key,hash: Int,value: Value)Option[Value]">put</a><span title="Unit">(</span><a href="#151216" title="Key">key</a>, <a href="#151157" title="(key: Key)Int">hashOf</a>(<a href="#151216" title="Key">key</a>), <a href="#151217" title="Value">value</a>);
  }

  <span class="keyword">def</span> <a title="(kv: (Key, Value))OpenHashMap.this.type" id="151163">+=</a> (<a title="(Key, Value)" id="151833">kv</a>: <a href="../../Tuple2.scala.html#1167" title="(Key, Value)">(</a>Key, Value)): <span class="keyword">this</span>.<span class="keyword">type</span> = { <a href="#151165" title="(key: Key,value: Value)Option[Value]">put</a>(<a href="#151833" title="(Key, Value)">kv</a>.<a href="../../Tuple2.scala.html#20579" title="=&gt; Key">_1</a>, <a href="#151833" title="(Key, Value)">kv</a>.<a href="../../Tuple2.scala.html#20581" title="=&gt; Value">_2</a>); <a href="#7761" title="OpenHashMap.this.type" class="keyword">this</a> }
  <span class="keyword">def</span> <a title="(key: Key)OpenHashMap.this.type" id="151164">-=</a> (<a title="Key" id="151859">key</a>: <a href="#14479" title="Key">Key</a>): <span class="keyword">this</span>.<span class="keyword">type</span> = { <a href="#151167" title="(key: Key)Option[Value]">remove</a>(<a href="#151859" title="Key">key</a>); <a href="#7761" title="OpenHashMap.this.type" class="keyword">this</a> }

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(key: Key,value: Value)Option[Value]" id="151165">put</a>(<a title="Key" id="151813">key</a> : <a href="#14479" title="Key">Key</a>, <a title="Value" id="151814">value</a> : <a href="#14480" title="Value">Value</a>): <a href="../../Option.scala.html#789" title="Option[Value]">Option</a>[Value] = 
    <a href="#151166" title="(key: Key,hash: Int,value: Value)Option[Value]">put</a>(<a href="#151813" title="Key">key</a>, <a href="#151157" title="(key: Key)Int">hashOf</a>(<a href="#151813" title="Key">key</a>), <a href="#151814" title="Value">value</a>)

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(key: Key,hash: Int,value: Value)Option[Value]" id="151166">put</a>(<a title="Key" id="151823">key</a> : <a href="#14479" title="Key">Key</a>, <a title="Int" id="151824">hash</a> : <span title="Int">Int</span>, <a title="Value" id="151825">value</a> : <a href="#14480" title="Value">Value</a>): <a href="../../Option.scala.html#789" title="Option[Value]">Option</a>[Value] = {
    <span title="Unit" class="keyword">if</span> (<span title="(x$1: Int)Int" class="int">2</span> <a title="(x$1: Int)Boolean" id="2973">*</a> (<a href="#151155" title="(x$1: Int)Int">size</a> + <a href="#151152" title="=&gt; Int">deleted</a>) &gt; <a href="#151143" title="=&gt; Int">mask</a>) <a href="#151158" title="=&gt; Unit">growTable</a>;
    <span class="keyword">val</span> <a title="Int" id="151903">index</a> = <a href="#151160" title="(key: Key,hash: Int)Int">findIndex</a>(<a href="#151823" title="Key">key</a>, <a href="#151824" title="Int">hash</a>);
    <span class="keyword">val</span> <a title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]" id="151904">entry</a> = <a href="../../Array.scala.html#17823" title="(i: Int)scala.collection.mutable.OpenHashMap.Entry[Key,Value]">table</a>(<a href="#151903" title="Int">index</a>);
    <span title="Option[Value]" class="keyword">if</span> (<a href="#151904" title="(x$1: AnyRef)Boolean">entry</a> == <span title="Null(null)" class="keyword">null</span>) {
      <a href="../../Array.scala.html#17824" title="(i: Int,x: scala.collection.mutable.OpenHashMap.Entry[Key,Value])Unit">table</a>(<a href="#151903" title="Int">index</a>) = <span title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]" class="keyword">new</span> <a href="#151131" title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]">Entry</a>(<a href="#151823" title="Key">key</a>, <a href="#151824" title="Int">hash</a>, <a href="../../Option.scala.html#19907" title="(x: Value)Some[Value]">Some</a>(<a href="#151825" title="Value">value</a>));
      <a href="#151154" title="Int">modCount</a> += <span title="Int(1)" class="int">1</span>;
      <a href="#151156" title="(s: Int)Unit">size</a> += <span title="Int(1)" class="int">1</span>;
      <a href="../../Option.scala.html#472" title="object None">None</a>
    } <span class="keyword">else</span> {
      <span class="keyword">val</span> <a title="Option[Value]" id="152050">res</a> = <a href="#151904" title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]">entry</a>.<a href="#151262" title="=&gt; Option[Value]">value</a>
      <span title="Unit" class="keyword">if</span> (<a href="#151904" title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]">entry</a>.<a href="#151262" title="(x$1: AnyRef)Boolean">value</a> == <a href="../../Option.scala.html#472" title="object None">None</a>) { <a href="#151156" title="(s: Int)Unit">size</a> += <span title="Int(1)" class="int">1</span>; <a href="#151154" title="Int">modCount</a> += <span title="Int(1)" class="int">1</span> }
      <a href="#151904" title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]">entry</a>.<a href="#151262" title="(x$1: Option[Value])Unit">value</a> = <a href="../../Option.scala.html#19907" title="(x: Value)Some[Value]">Some</a>(<a href="#151825" title="Value">value</a>);
      <a href="#152050" title="Option[Value]">res</a>
    }
  }

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(key: Key)Option[Value]" id="151167">remove</a>(<a title="Key" id="151876">key</a> : <a href="#14479" title="Key">Key</a>): <a href="../../Option.scala.html#789" title="Option[Value]">Option</a>[Value] = {
    <span class="keyword">val</span> <a title="Int" id="152136">index</a> = <a href="#151159" title="(key: Key)Int">findIndex</a>(<a href="#151876" title="Key">key</a>);
    <span title="Option[Value]" class="keyword">if</span> (<a href="../../Array.scala.html#17823" title="(i: Int)scala.collection.mutable.OpenHashMap.Entry[Key,Value]">table</a><span title="(x$1: AnyRef)Boolean">(</span><a href="#152136" title="Int">index</a>) <span title="(x$1: Boolean)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span> &amp;&amp; <a href="../../Array.scala.html#17823" title="(i: Int)scala.collection.mutable.OpenHashMap.Entry[Key,Value]">table</a>(<a href="#152136" title="Int">index</a>).<a href="#151262" title="(x$1: AnyRef)Boolean">value</a> != <a href="../../Option.scala.html#472" title="object None">None</a>){      
      <span class="keyword">val</span> <a title="Option[Value]" id="152178">res</a> = <a href="../../Array.scala.html#17823" title="(i: Int)scala.collection.mutable.OpenHashMap.Entry[Key,Value]">table</a>(<a href="#152136" title="Int">index</a>).<a href="#151262" title="=&gt; Option[Value]">value</a>
      <a href="../../Array.scala.html#17823" title="(i: Int)scala.collection.mutable.OpenHashMap.Entry[Key,Value]">table</a>(<a href="#152136" title="Int">index</a>).<a href="#151262" title="(x$1: Option[Value])Unit">value</a> = <a href="../../Option.scala.html#472" title="object None">None</a>;
      <a href="#151156" title="(s: Int)Unit">size</a> -= <span title="Int(1)" class="int">1</span>;
      <a href="#151152" title="(x$1: Int)Unit">deleted</a> += <span title="Int(1)" class="int">1</span>;
      <a href="#152178" title="Option[Value]">res</a>
    } <span class="keyword">else</span> <a href="../../Option.scala.html#472" title="object None">None</a>
  }

  <span class="keyword">def</span> <a title="(key: Key)Option[Value]" id="151168">get</a>(<a title="Key" id="152270">key</a> : <a href="#14479" title="Key">Key</a>) : <a href="../../Option.scala.html#789" title="Option[Value]">Option</a>[Value] = {
    <span class="keyword">val</span> <a title="Int" id="152273">hash</a> = <a href="#151157" title="(key: Key)Int">hashOf</a>(<a href="#152270" title="Key">key</a>);

    <span class="keyword">var</span> <a title="Int" id="152274">j</a> = <a href="#152273" title="Int">hash</a>;
    <span class="keyword">var</span> <a title="Int" id="152275">index</a> = <a href="#152273" title="(x$1: Int)Int">hash</a> &amp; <a href="#151143" title="=&gt; Int">mask</a>;
    <span class="keyword">var</span> <a title="Int" id="152276">perturb</a> = <a href="#152275" title="Int">index</a>;
    <span class="keyword">var</span> <a title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]" id="152277">entry</a> = <a href="../../Array.scala.html#17823" title="(i: Int)scala.collection.mutable.OpenHashMap.Entry[Key,Value]">table</a>(<a href="#152275" title="Int">index</a>);
    <span title="Unit" class="keyword">while</span>(<a href="#152277" title="(x$1: AnyRef)Boolean">entry</a> != <span title="Null(null)" class="keyword">null</span>)<a href="#152278" title="()Unit">{</a>
      <span title="Unit" class="keyword">if</span> (<a href="#152277" title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]">entry</a>.<a href="#151261" title="(x$1: Int)Boolean">hash</a> <span title="(x$1: Boolean)Boolean">==</span> <a href="#152273" title="Int">hash</a> &amp;&amp;
          <a href="#152277" title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]">entry</a>.<a href="#151260" title="(x$1: Any)Boolean">key</a> == <a href="#152270" title="Key">key</a>){
        <span title="Nothing" class="keyword">return</span> <a href="#152277" title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]">entry</a>.<a href="#151262" title="=&gt; Option[Value]">value</a>;
      }
      
      <a href="#152274" title="Int">j</a> = <span title="(x$1: Int)Int" class="int">5</span> <span title="(x$1: Int)Int">*</span> <a href="#152274" title="Int">j</a> <span title="(x$1: Int)Int">+</span> <span title="Int(1)" class="int">1</span> + <a href="#152276" title="Int">perturb</a>;
      <a href="#152276" title="Int">perturb</a> &gt;&gt;= <span title="Int(5)" class="int">5</span>;
      <a href="#152275" title="Int">index</a> = <a href="#152274" title="(x$1: Int)Int">j</a> &amp; <a href="#151143" title="=&gt; Int">mask</a>;
      <a href="#152277" title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]">entry</a> = <a href="../../Array.scala.html#17823" title="(i: Int)scala.collection.mutable.OpenHashMap.Entry[Key,Value]">table</a>(<a href="#152275" title="Int">index</a>);
    }
    <a href="../../Option.scala.html#472" title="object None">None</a>;
  }
 
  /**
   * An iterator over the elements of this map. Use of this iterator follows the same
   * contract for concurrent modification as the foreach method.
   */ 
  <span class="keyword">def</span> <a title="=&gt; &lt;refinement&gt; extends java.lang.Object with Iterator[(Key, Value)]" id="151169">iterator</a> = <a href="#152392" title="java.lang.Object with Iterator[(Key, Value)]{ ... }" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with Iterator[(Key, Value)]" id="152392">Iterator</a>[(Key, Value)]{
    <span class="keyword">var</span> <a title="Int" id="152395">index</a> = <span title="Int(0)" class="int">0</span>;
    <span class="keyword">val</span> <a title="Int" id="152397">initialModCount</a> = <a href="#151154" title="Int">modCount</a>;

    <span class="keyword">private</span>[<span class="keyword">this</span>] <span class="keyword">def</span> <a title="=&gt; Unit" id="152399">advance</a> {
      <span title="Unit" class="keyword">if</span> (<a href="#152397" title="(x$1: Int)Boolean">initialModCount</a> != <a href="#151154" title="Int">modCount</a>) <a href="../../Predef.scala.html#16315" title="(message: String)Nothing">error</a>(<span title="java.lang.String(&quot;Concurrent modification&quot;)" class="string">&quot;Concurrent modification&quot;</span>);
      <span title="Unit" class="keyword">while</span>(<span title="(x$1: Boolean)Boolean">(</span><a href="#152395" title="(x$1: Int)Boolean">index</a> &lt;= <a href="#151143" title="=&gt; Int">mask</a>) &amp;&amp; (<a href="../../Array.scala.html#17823" title="(i: Int)scala.collection.mutable.OpenHashMap.Entry[Key,Value]">table</a><span title="(x$1: AnyRef)Boolean">(</span><a href="#152395" title="=&gt; Int">index</a>) <a title="(x$1: Boolean)Boolean" id="2223">==</a> <span title="Null(null)" class="keyword">null</span> || <a href="../../Array.scala.html#17823" title="(i: Int)scala.collection.mutable.OpenHashMap.Entry[Key,Value]">table</a>(<a href="#152395" title="=&gt; Int">index</a>).<a href="#151262" title="(x$1: AnyRef)Boolean">value</a> == <a href="../../Option.scala.html#472" title="object None">None</a>)) <a href="#152395" title="(x$1: Int)Unit">index</a><a href="#152418" title="()Unit">+=</a><span title="Int(1)" class="int">1</span>;
    }

    <span class="keyword">def</span> <a title="=&gt; Boolean" id="152400">hasNext</a> = {<a href="#152399" title="=&gt; Unit">advance</a>; <a href="#152395" title="(x$1: Int)Boolean">index</a> &lt;= <a href="#151143" title="=&gt; Int">mask</a>; }

    <span class="keyword">def</span> <a title="()(Key, Value)" id="152401">next</a> = {
      <a href="#152399" title="=&gt; Unit">advance</a>;
      <span class="keyword">val</span> <a title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]" id="152513">result</a> = <a href="../../Array.scala.html#17823" title="(i: Int)scala.collection.mutable.OpenHashMap.Entry[Key,Value]">table</a>(<a href="#152395" title="=&gt; Int">index</a>);
      <a href="#152395" title="(x$1: Int)Unit">index</a> += <span title="Int(1)" class="int">1</span>;
      <a href="../../Tuple2.scala.html#20777" title="(_1: Key,_2: Value)(Key, Value)">(</a><a href="#152513" title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]">result</a>.<a href="#151260" title="=&gt; Key">key</a>, <a href="#152513" title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]">result</a>.<a href="#151262" title="=&gt; Option[Value]">value</a>.<a href="../../Option.scala.html#19866" title="=&gt; Value">get</a>);
    }
  }

  @deprecated(<span class="string">&quot;use `iterator' instead&quot;</span>)
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Iterator[(Key, Value)]" id="151170">elements</a>: <a href="../Iterator.scala.html#4301" title="Iterator[(Key, Value)]">Iterator</a>[(Key, Value)] = <a href="#151169" title="=&gt; &lt;refinement&gt; extends java.lang.Object with Iterator[(Key, Value)]">iterator</a>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()scala.collection.mutable.OpenHashMap[Key,Value]" id="151171">clone</a> : <a href="#7761" title="scala.collection.mutable.OpenHashMap[Key,Value]">OpenHashMap</a>[Key, Value] = {
    <span class="keyword">val</span> <a title="scala.collection.mutable.OpenHashMap[Key,Value]" id="152598">it</a> = <a href="#151139" title="()scala.collection.mutable.OpenHashMap[Key,Value]" class="keyword">new</a> <a href="#7761" title="scala.collection.mutable.OpenHashMap[Key,Value]">OpenHashMap</a>[Key, Value]
    <a href="#151175" title="(f: (scala.collection.mutable.OpenHashMap.Entry[Key,Value]) =&gt; Unit)Unit">foreachUndeletedEntry</a>(<a title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]" id="152610">entry</a> =&gt; <a href="#152598" title="scala.collection.mutable.OpenHashMap[Key,Value]">it</a>.<a href="#151166" title="(key: Key,hash: Int,value: Value)Option[Value]">put</a><span title="Unit">(</span><a href="#152610" title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]">entry</a>.<a href="#151260" title="=&gt; Key">key</a>, <a href="#152610" title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]">entry</a>.<a href="#151261" title="=&gt; Int">hash</a>, <a href="#152610" title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]">entry</a>.<a href="#151262" title="=&gt; Option[Value]">value</a>.<a href="../../Option.scala.html#19866" title="=&gt; Value">get</a>));
    <a href="#152598" title="scala.collection.mutable.OpenHashMap[Key,Value]">it</a>
  }

  /**
   * Loop over the key, value mappings of this map.
   *
   * The behaviour of modifying the map during an iteration is as follows: 
   *
   * &lt;ul&gt;
   *  &lt;li&gt;Deleting a mapping is always permitted.&lt;/li&gt;
   *  &lt;li&gt;Changing the value of mapping which is already present is permitted.&lt;/li&gt;
   *  &lt;li&gt;Anything else is not permitted. It will usually, but not always, throw an exception.&lt;/li&gt;
   * &lt;/ul&gt;
   *
   * @param  f The function to apply to each key, value mapping.
   */ 
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="[U](f: ((Key, Value)) =&gt; U)Unit" id="151172">foreach</a>[<a title="&gt;: Nothing &lt;: Any" id="151174">U</a>](<a title="((Key, Value)) =&gt; U" id="152623">f</a> : ((Key, Value)) =&gt;  U){
    <span class="keyword">val</span> <a title="Int" id="152635">startModCount</a> = <a href="#151154" title="Int">modCount</a>;
    <a href="#151175" title="(f: (scala.collection.mutable.OpenHashMap.Entry[Key,Value]) =&gt; Unit)Unit">foreachUndeletedEntry</a>(<a title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]" id="152637">entry</a> =&gt; {
      <span title="Unit" class="keyword">if</span> (<a href="#151154" title="(x$1: Int)Boolean">modCount</a> != <a href="#152635" title="Int">startModCount</a>) <a href="../../Predef.scala.html#16315" title="(message: String)Nothing">error</a>(<span title="java.lang.String(&quot;Concurrent Modification&quot;)" class="string">&quot;Concurrent Modification&quot;</span>)
      <a href="../../Function1.scala.html#17226" title="(v1: (Key, Value))U">f</a><span title="Unit">(</span><a href="../../Tuple2.scala.html#20777" title="(_1: Key,_2: Value)(Key, Value)">(</a><a href="#152637" title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]">entry</a>.<a href="#151260" title="=&gt; Key">key</a>, <a href="#152637" title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]">entry</a>.<a href="#151262" title="=&gt; Option[Value]">value</a>.<a href="../../Option.scala.html#19866" title="=&gt; Value">get</a>))}
    );  
  }

  <span class="keyword">private</span>[<span class="keyword">this</span>] <span class="keyword">def</span> <a title="(f: (scala.collection.mutable.OpenHashMap.Entry[Key,Value]) =&gt; Unit)Unit" id="151175">foreachUndeletedEntry</a>(<a title="(scala.collection.mutable.OpenHashMap.Entry[Key,Value]) =&gt; Unit" id="152607">f</a> : Entry[Key, Value] =&gt; Unit){
    <a href="#151146" title="=&gt; Array[scala.collection.mutable.OpenHashMap.Entry[Key,Value]]">table</a>.<a href="../generic/VectorTemplate.scala.html#17859" title="(f: (scala.collection.mutable.OpenHashMap.Entry[Key,Value]) =&gt; Unit)Unit">foreach</a>(<a title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]" id="152682">entry</a> =&gt; <span title="Unit" class="keyword">if</span> (<a href="#152682" title="(x$1: AnyRef)Boolean">entry</a> <span title="(x$1: Boolean)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span> &amp;&amp; <a href="#152682" title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]">entry</a>.<a href="#151262" title="(x$1: AnyRef)Boolean">value</a> != <a href="../../Option.scala.html#472" title="object None">None</a>) <a href="../../Function1.scala.html#17226" title="(v1: scala.collection.mutable.OpenHashMap.Entry[Key,Value])Unit">f</a>(<a href="#152682" title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]">entry</a>));
  }
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(f: (Key, Value) =&gt; Value)OpenHashMap.this.type" id="151176">transform</a>(<a title="(Key, Value) =&gt; Value" id="152704">f</a> : (Key, Value) =&gt; Value) = {
    <a href="#151175" title="(f: (scala.collection.mutable.OpenHashMap.Entry[Key,Value]) =&gt; Unit)Unit">foreachUndeletedEntry</a>(<a title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]" id="152711">entry</a> =&gt; <a href="#152711" title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]">entry</a>.<a href="#151262" title="(x$1: Option[Value])Unit">value</a> = <a href="../../Option.scala.html#19907" title="(x: Value)Some[Value]">Some</a>(<a href="../../Function2.scala.html#20550" title="(v1: Key,v2: Value)Value">f</a>(<a href="#152711" title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]">entry</a>.<a href="#151260" title="=&gt; Key">key</a>, <a href="#152711" title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]">entry</a>.<a href="#151262" title="=&gt; Option[Value]">value</a>.<a href="../../Option.scala.html#19866" title="=&gt; Value">get</a>)));
    <a href="#7761" title="OpenHashMap.this.type" class="keyword">this</a>
  }

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(f: (Key, Value) =&gt; Boolean)OpenHashMap.this.type" id="151177">retain</a>(<a title="(Key, Value) =&gt; Boolean" id="152730">f</a> : (Key, Value) =&gt; Boolean) = {
    <a href="#151175" title="(f: (scala.collection.mutable.OpenHashMap.Entry[Key,Value]) =&gt; Unit)Unit">foreachUndeletedEntry</a>(<a title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]" id="152737">entry</a> =&gt; <span title="Unit" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="../../Function2.scala.html#20550" title="(v1: Key,v2: Value)Boolean">f</a>(<a href="#152737" title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]">entry</a>.<a href="#151260" title="=&gt; Key">key</a>, <a href="#152737" title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]">entry</a>.<a href="#151262" title="=&gt; Option[Value]">value</a>.<a href="../../Option.scala.html#19866" title="=&gt; Value">get</a>)) {<a href="#152737" title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]">entry</a>.<a href="#151262" title="(x$1: Option[Value])Unit">value</a> = <a href="../../Option.scala.html#472" title="object None">None</a>; <a href="#151156" title="(s: Int)Unit">size</a> -= <span title="Int(1)" class="int">1</span>; <a href="#151152" title="(x$1: Int)Unit">deleted</a> += <span title="Int(1)" class="int">1</span>} );
    <a href="#7761" title="OpenHashMap.this.type" class="keyword">this</a>
  }

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; java.lang.String" id="151178">stringPrefix</a> = <span title="java.lang.String(&quot;OpenHashMap&quot;)" class="string">&quot;OpenHashMap&quot;</span>
}

        </pre>
    </body>
</html>