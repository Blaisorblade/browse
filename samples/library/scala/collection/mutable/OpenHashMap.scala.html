<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/collection/mutable/OpenHashMap.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style">
    </head>
    <body>
        <pre>
/*                     __                                               *\
**     ________ ___   / /  ___     Scala API                            **
**    / __/ __// _ | / /  / _ |    (c) 2003-2009, LAMP/EPFL             **
**  __\ \/ /__/ __ |/ /__/ __ |                                         **
** /____/\___/_/ |_/____/_/ | |                                         **
**                          |/                                          **
\*                                                                      */

// $Id: OpenHashMap.scala 17925 2009-05-30 18:10:21Z rytz $


<span class="keyword">package</span> scala.collection.mutable;

<span class="keyword">object</span> <a title="object scala.collection.mutable.OpenHashMap" id="7699">OpenHashMap</a><a href="../../ScalaObject.scala.html#957" title="ScalaObject">{</a>
  <span class="keyword">def</span> <a title="[K, V](elems: (K, V)*)scala.collection.mutable.OpenHashMap[K,V]" id="150452">apply</a>[<a title="&gt;: Nothing &lt;: Any" id="150455">K</a>, <a title="&gt;: Nothing &lt;: Any" id="150456">V</a>](<a title="(K, V)*" id="150515">elems</a> : <a title="(K, V)*" id="4176">(</a>K, V)*) = {
    <span class="keyword">val</span> <a title="scala.collection.mutable.OpenHashMap[K,V]" id="150518">dict</a> = <a href="#150470" title="()scala.collection.mutable.OpenHashMap[K,V]" class="keyword">new</a> <a href="#7698" title="scala.collection.mutable.OpenHashMap[K,V]">OpenHashMap</a>[K, V];
    <a href="#150515" title="(K, V)*">elems</a>.<a href="../generic/IterableTemplate.scala.html#17287" title="(f: ((K, V)) =&gt; Unit)Unit">foreach</a>(<a href="#150540" title="Unit">{</a><span title="Unit" class="keyword">case</span> (<a title="K" id="150543">x</a>, <a title="V" id="150544">y</a>) =&gt; <a href="#150493" title="(key: K,value: V)Unit">dict</a>(<a href="#150543" title="K">x</a>) = <a href="#150544" title="V">y</a>});
    <a href="#150518" title="scala.collection.mutable.OpenHashMap[K,V]">dict</a>;
  }

  <span class="keyword">def</span> <a title="[K, V]scala.collection.mutable.OpenHashMap[K,V]" id="150457">empty</a>[<a title="&gt;: Nothing &lt;: Any" id="150460">K</a>, <a title="&gt;: Nothing &lt;: Any" id="150461">V</a>] = <a href="#150470" title="()scala.collection.mutable.OpenHashMap[K,V]" class="keyword">new</a> <a href="#7698" title="scala.collection.mutable.OpenHashMap[K,V]">OpenHashMap</a>[K, V];

  <span class="keyword">private</span>[mutable] <span class="keyword">class</span> <a title="class Entry[Key, Value] extends java.lang.Object with ScalaObject" id="150462">Entry</a>[<a title="&gt;: Nothing &lt;: Any" id="150463">Key</a>, <a title="&gt;: Nothing &lt;: Any" id="150464">Value</a>]<a href="../../ScalaObject.scala.html#957" title="ScalaObject">(</a><span class="keyword">val</span> <a title="Key" id="150591">key</a> : <a href="#150463" title="Key">Key</a>, 
                                           <span class="keyword">val</span> <a title="Int" id="150592">hash</a> : <span title="Int">Int</span>,
                                           <span class="keyword">var</span> <a title="Option[Value]" id="150593">value</a> : <a href="../../Option.scala.html#777" title="Option[Value]">Option</a>[Value])

  <span class="keyword">private</span>[mutable] <span class="keyword">def</span> <a title="(j: Int)Int" id="150465">highestOneBit</a>(<a title="Int" id="150596">j</a> : <span title="Int">Int</span>) = { // This should really go somewhere central as we're now code sharing by cut and paste. :(
    <span class="keyword">var</span> <a title="Int" id="150599">i</a> = <a href="#150596" title="Int">j</a>;
    <a href="#150599" title="Int">i</a> |= (<a href="#150599" title="(x$1: Int)Int">i</a> &gt;&gt;  <span title="Int(1)" class="int">1</span>);
    <a href="#150599" title="Int">i</a> |= (<a href="#150599" title="(x$1: Int)Int">i</a> &gt;&gt;  <span title="Int(2)" class="int">2</span>);
    <a href="#150599" title="Int">i</a> |= (<a href="#150599" title="(x$1: Int)Int">i</a> &gt;&gt;  <span title="Int(4)" class="int">4</span>);
    <a href="#150599" title="Int">i</a> |= (<a href="#150599" title="(x$1: Int)Int">i</a> &gt;&gt;  <span title="Int(8)" class="int">8</span>);
    <a href="#150599" title="Int">i</a> |= (<a href="#150599" title="(x$1: Int)Int">i</a> &gt;&gt; <span title="Int(16)" class="int">16</span>);
    <a href="#150599" title="(x$1: Int)Int">i</a> - (<a href="#150599" title="(x$1: Int)Int">i</a> &gt;&gt;&gt; <span title="Int(1)" class="int">1</span>);
  }

  <span class="keyword">private</span>[mutable] <span class="keyword">def</span> <a title="(i: Int)Int" id="150466">nextPowerOfTwo</a>(<a title="Int" id="150752">i</a> : <span title="Int">Int</span>) = <a href="#150465" title="(j: Int)Int">highestOneBit</a><a title="(x$1: Int)Int" id="2851">(</a><a href="#150752" title="Int">i</a>) &lt;&lt; <span title="Int(1)" class="int">1</span>; 
}

<span class="keyword">import</span> OpenHashMap.Entry;

/**
 * A mutable hash map based on an open hashing scheme. The precise scheme is undefined,
 * but it should make a reasonable effort to ensure that an insert with consecutive hash
 * codes is not unneccessarily penalised. In particular, mappings of consecutive integer
 * keys should work without significant performance loss.
 *
 * @author David MacIver
 */
<span class="keyword">class</span> <a title="class OpenHashMap[Key, Value] extends java.lang.Object with scala.collection.mutable.Map[Key,Value] with ScalaObject" id="7698">OpenHashMap</a>[<a title="&gt;: Nothing &lt;: Any" id="14374">Key</a>, <a title="&gt;: Nothing &lt;: Any" id="14375">Value</a>]<a href="../../ScalaObject.scala.html#957" title="ScalaObject">(</a><a title="Int" id="150511">initialSize</a> : <span title="Int">Int</span>) <span class="keyword">extends</span> scala.collection.mutable.<a href="Map.scala.html#7590" title="scala.collection.mutable.Map[Key,Value]">Map</a>[Key, Value]{
  <span class="keyword">def</span> <a title="()scala.collection.mutable.OpenHashMap[Key,Value]" id="150470" class="keyword">this</a>() = <a href="#7698" title="OpenHashMap.this.type" class="keyword">this</a>(<span title="Int(8)" class="int">8</span>);

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; scala.collection.mutable.OpenHashMap[Key,Value]" id="150471">empty</a> = <a href="#7699" title="object scala.collection.mutable.OpenHashMap">OpenHashMap</a>.<a href="#150457" title="scala.collection.mutable.OpenHashMap[Key,Value]">empty</a>

  <span class="keyword">private</span>[<span class="keyword">this</span>] <span class="keyword">val</span> <a title="Int" id="150472">actualInitialSize</a> = <a href="#7699" title="object scala.collection.mutable.OpenHashMap">OpenHashMap</a>.<a href="#150466" title="(i: Int)Int">nextPowerOfTwo</a>(<a href="#150511" title="Int">initialSize</a>);

  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Int" id="150474">mask</a> = <a href="#150472" title="(x$1: Int)Int">actualInitialSize</a> - <span title="Int(1)" class="int">1</span>;;
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Array[scala.collection.mutable.OpenHashMap.Entry[Key,Value]]" id="150477">table</a> : <a href="../../Array.scala.html#885" title="Array[scala.collection.mutable.OpenHashMap.Entry[Key,Value]]">Array</a>[Entry[Key, Value]] = <span title="Array[scala.collection.mutable.OpenHashMap.Entry[Key,Value]]" class="keyword">new</span> <a href="../../Array.scala.html#885" title="Array[scala.collection.mutable.OpenHashMap.Entry[Key,Value]]">Array</a>[Entry[Key, Value]](<a href="#150472" title="Int">actualInitialSize</a>);
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Int" id="150480">_size</a> = <span title="Int(0)" class="int">0</span>;
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Int" id="150483">deleted</a> = <span title="Int(0)" class="int">0</span>; 
 
  // Used for tracking inserts so that iterators can determine in concurrent modification has occurred.
  <span class="keyword">private</span>[<span class="keyword">this</span>] <span class="keyword">var</span> <a title="Int" id="150485">modCount</a> = <span title="Int(0)" class="int">0</span>;

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Int" id="150486">size</a> = <a href="#150480" title="=&gt; Int">_size</a>;
  <span class="keyword">private</span>[<span class="keyword">this</span>] <span class="keyword">def</span> <a title="(s: Int)Unit" id="150487">size_=</a>(<a title="Int" id="150800">s</a> : <span title="Int">Int</span>) = <a href="#150480" title="(x$1: Int)Unit">_size</a> = <a href="#150800" title="Int">s</a>;

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(key: Key)Int" id="150488">hashOf</a>(<a title="Key" id="150805">key</a> : <a href="#14374" title="Key">Key</a>) = {
    <span class="keyword">var</span> <a title="Int" id="150808">h</a> = <a href="#150805" title="Key">key</a>.<a title="()Int" id="3616">hashCode</a>;
    <a href="#150808" title="Int">h</a> ^= (<span title="(x$1: Int)Int">(</span><a href="#150808" title="(x$1: Int)Int">h</a> &gt;&gt;&gt; <span title="Int(20)" class="int">20</span>) ^ (<a href="#150808" title="(x$1: Int)Int">h</a> &gt;&gt;&gt; <span title="Int(12)" class="int">12</span>));
    <a href="#150808" title="(x$1: Int)Int">h</a> <span title="(x$1: Int)Int">^</span> (<a href="#150808" title="(x$1: Int)Int">h</a> &gt;&gt;&gt; <span title="Int(7)" class="int">7</span>) ^ (<a href="#150808" title="(x$1: Int)Int">h</a> &gt;&gt;&gt; <span title="Int(4)" class="int">4</span>);
  }

  <span class="keyword">private</span>[<span class="keyword">this</span>] <span class="keyword">def</span> <a title="=&gt; Unit" id="150489">growTable</a> = {
    <span class="keyword">val</span> <a title="Int" id="150878">oldSize</a> = <a href="#150474" title="(x$1: Int)Int">mask</a> + <span title="Int(1)" class="int">1</span>;
    <span class="keyword">val</span> <a title="Int" id="150879">newSize</a> = <span title="(x$1: Int)Int" class="int">4</span> * <a href="#150878" title="Int">oldSize</a>;
    <span class="keyword">val</span> <a title="Array[scala.collection.mutable.OpenHashMap.Entry[Key,Value]]" id="150880">oldTable</a> = <a href="#150477" title="=&gt; Array[scala.collection.mutable.OpenHashMap.Entry[Key,Value]]">table</a>;
    <a href="#150477" title="(x$1: Array[scala.collection.mutable.OpenHashMap.Entry[Key,Value]])Unit">table</a> = <span title="Array[scala.collection.mutable.OpenHashMap.Entry[Key,Value]]" class="keyword">new</span> <a href="../../Array.scala.html#885" title="Array[scala.collection.mutable.OpenHashMap.Entry[Key,Value]]">Array</a>[Entry[Key, Value]](<a href="#150879" title="Int">newSize</a>);
    <a href="#150474" title="(x$1: Int)Unit">mask</a> = <a href="#150879" title="(x$1: Int)Int">newSize</a> - <span title="Int(1)" class="int">1</span>;     
    <a href="#150880" title="Array[scala.collection.mutable.OpenHashMap.Entry[Key,Value]]">oldTable</a>.<a href="../generic/VectorTemplate.scala.html#17752" title="(f: (scala.collection.mutable.OpenHashMap.Entry[Key,Value]) =&gt; Unit)Unit">foreach</a>( <a title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]" id="150935">entry</a> =&gt;
      <span title="Unit" class="keyword">if</span> (<a href="#150935" title="(x$1: AnyRef)Boolean">entry</a> <span title="(x$1: Boolean)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span> &amp;&amp; <a href="#150935" title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]">entry</a>.<a href="#150593" title="(x$1: AnyRef)Boolean">value</a> != <a href="../../Option.scala.html#463" title="object None">None</a>) <a href="#150492" title="(entry: scala.collection.mutable.OpenHashMap.Entry[Key,Value])Unit">addEntry</a>(<a href="#150935" title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]">entry</a>));
    <a href="#150483" title="(x$1: Int)Unit">deleted</a> = <span title="Int(0)" class="int">0</span>;
  } 

  <span class="keyword">private</span>[<span class="keyword">this</span>] <span class="keyword">def</span> <a title="(key: Key)Int" id="150490">findIndex</a>(<a title="Key" id="150977">key</a> : <a href="#14374" title="Key">Key</a>) : <span title="Int">Int</span> = <a href="#150491" title="(key: Key,hash: Int)Int">findIndex</a>(<a href="#150977" title="Key">key</a>, <a href="#150488" title="(key: Key)Int">hashOf</a>(<a href="#150977" title="Key">key</a>));

  <span class="keyword">private</span>[<span class="keyword">this</span>] <span class="keyword">def</span> <a title="(key: Key,hash: Int)Int" id="150491">findIndex</a>(<a title="Key" id="150974">key</a> : <a href="#14374" title="Key">Key</a>, <a title="Int" id="150975">hash</a> : <span title="Int">Int</span>) : <span title="Int">Int</span> = {
    <span class="keyword">var</span> <a title="Int" id="151020">j</a> = <a href="#150975" title="Int">hash</a>;

    <span class="keyword">var</span> <a title="Int" id="151021">index</a> = <a href="#150975" title="(x$1: Int)Int">hash</a> &amp; <a href="#150474" title="=&gt; Int">mask</a>;
    <span class="keyword">var</span> <a title="Int" id="151022">perturb</a> = <a href="#151021" title="Int">index</a>;
    <span title="Unit" class="keyword">while</span>(<a href="../../Array.scala.html#17716" title="(i: Int)scala.collection.mutable.OpenHashMap.Entry[Key,Value]">table</a><span title="(x$1: AnyRef)Boolean">(</span><a href="#151021" title="Int">index</a>) <span title="(x$1: Boolean)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span> &amp;&amp; 
          <span title="=&gt; Boolean">!</span>(<a href="../../Array.scala.html#17716" title="(i: Int)scala.collection.mutable.OpenHashMap.Entry[Key,Value]">table</a>(<a href="#151021" title="Int">index</a>).<a href="#150592" title="(x$1: Int)Boolean">hash</a> <span title="(x$1: Boolean)Boolean">==</span> <a href="#150975" title="Int">hash</a> &amp;&amp;
            <a href="../../Array.scala.html#17716" title="(i: Int)scala.collection.mutable.OpenHashMap.Entry[Key,Value]">table</a>(<a href="#151021" title="Int">index</a>).<a href="#150591" title="(x$1: Any)Boolean">key</a> == <a href="#150974" title="Key">key</a>))<a href="#151023" title="()Unit">{</a>
      <a href="#151020" title="Int">j</a> = <span title="(x$1: Int)Int" class="int">5</span> <span title="(x$1: Int)Int">*</span> <a href="#151020" title="Int">j</a> <span title="(x$1: Int)Int">+</span> <span title="Int(1)" class="int">1</span> + <a href="#151022" title="Int">perturb</a>;
      <a href="#151022" title="Int">perturb</a> &gt;&gt;= <span title="Int(5)" class="int">5</span>;
      <a href="#151021" title="Int">index</a> = <a href="#151020" title="(x$1: Int)Int">j</a> &amp; <a href="#150474" title="=&gt; Int">mask</a>;
    }
    <a href="#151021" title="Int">index</a>;
  }

  <span class="keyword">private</span>[<span class="keyword">this</span>] <span class="keyword">def</span> <a title="(entry: scala.collection.mutable.OpenHashMap.Entry[Key,Value])Unit" id="150492">addEntry</a>(<a title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]" id="150951">entry</a> : <a href="#150462" title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]">Entry</a>[Key, Value]) = 
    <span title="Unit" class="keyword">if</span> (<a href="#150951" title="(x$1: AnyRef)Boolean">entry</a> != <span title="Null(null)" class="keyword">null</span>) <a href="../../Array.scala.html#17717" title="(i: Int,x: scala.collection.mutable.OpenHashMap.Entry[Key,Value])Unit">table</a>(<a href="#150491" title="(key: Key,hash: Int)Int">findIndex</a>(<a href="#150951" title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]">entry</a>.<a href="#150591" title="=&gt; Key">key</a>, <a href="#150951" title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]">entry</a>.<a href="#150592" title="=&gt; Int">hash</a>)) = <a href="#150951" title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]">entry</a>;

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(key: Key,value: Value)Unit" id="150493">update</a>(<a title="Key" id="150547">key</a> : <a href="#14374" title="Key">Key</a>, <a title="Value" id="150548">value</a> : <a href="#14375" title="Value">Value</a>) {
    <a href="#150497" title="(key: Key,hash: Int,value: Value)Option[Value]">put</a><span title="Unit">(</span><a href="#150547" title="Key">key</a>, <a href="#150488" title="(key: Key)Int">hashOf</a>(<a href="#150547" title="Key">key</a>), <a href="#150548" title="Value">value</a>);
  }

  <span class="keyword">def</span> <a title="(kv: (Key, Value))OpenHashMap.this.type" id="150494">+=</a> (<a title="(Key, Value)" id="151164">kv</a>: <a href="../../Tuple2.scala.html#1152" title="(Key, Value)">(</a>Key, Value)): <span class="keyword">this</span>.<span class="keyword">type</span> = { <a href="#150496" title="(key: Key,value: Value)Option[Value]">put</a>(<a href="#151164" title="(Key, Value)">kv</a>.<a href="../../Tuple2.scala.html#20472" title="=&gt; Key">_1</a>, <a href="#151164" title="(Key, Value)">kv</a>.<a href="../../Tuple2.scala.html#20474" title="=&gt; Value">_2</a>); <a href="#7698" title="OpenHashMap.this.type" class="keyword">this</a> }
  <span class="keyword">def</span> <a title="(key: Key)OpenHashMap.this.type" id="150495">-=</a> (<a title="Key" id="151190">key</a>: <a href="#14374" title="Key">Key</a>): <span class="keyword">this</span>.<span class="keyword">type</span> = { <a href="#150498" title="(key: Key)Option[Value]">remove</a>(<a href="#151190" title="Key">key</a>); <a href="#7698" title="OpenHashMap.this.type" class="keyword">this</a> }

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(key: Key,value: Value)Option[Value]" id="150496">put</a>(<a title="Key" id="151144">key</a> : <a href="#14374" title="Key">Key</a>, <a title="Value" id="151145">value</a> : <a href="#14375" title="Value">Value</a>): <a href="../../Option.scala.html#777" title="Option[Value]">Option</a>[Value] = 
    <a href="#150497" title="(key: Key,hash: Int,value: Value)Option[Value]">put</a>(<a href="#151144" title="Key">key</a>, <a href="#150488" title="(key: Key)Int">hashOf</a>(<a href="#151144" title="Key">key</a>), <a href="#151145" title="Value">value</a>)

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(key: Key,hash: Int,value: Value)Option[Value]" id="150497">put</a>(<a title="Key" id="151154">key</a> : <a href="#14374" title="Key">Key</a>, <a title="Int" id="151155">hash</a> : <span title="Int">Int</span>, <a title="Value" id="151156">value</a> : <a href="#14375" title="Value">Value</a>): <a href="../../Option.scala.html#777" title="Option[Value]">Option</a>[Value] = {
    <span title="Unit" class="keyword">if</span> (<span title="(x$1: Int)Int" class="int">2</span> <a title="(x$1: Int)Boolean" id="2958">*</a> (<a href="#150486" title="(x$1: Int)Int">size</a> + <a href="#150483" title="=&gt; Int">deleted</a>) &gt; <a href="#150474" title="=&gt; Int">mask</a>) <a href="#150489" title="=&gt; Unit">growTable</a>;
    <span class="keyword">val</span> <a title="Int" id="151234">index</a> = <a href="#150491" title="(key: Key,hash: Int)Int">findIndex</a>(<a href="#151154" title="Key">key</a>, <a href="#151155" title="Int">hash</a>);
    <span class="keyword">val</span> <a title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]" id="151235">entry</a> = <a href="../../Array.scala.html#17716" title="(i: Int)scala.collection.mutable.OpenHashMap.Entry[Key,Value]">table</a>(<a href="#151234" title="Int">index</a>);
    <span title="Option[Value]" class="keyword">if</span> (<a href="#151235" title="(x$1: AnyRef)Boolean">entry</a> == <span title="Null(null)" class="keyword">null</span>) {
      <a href="../../Array.scala.html#17717" title="(i: Int,x: scala.collection.mutable.OpenHashMap.Entry[Key,Value])Unit">table</a>(<a href="#151234" title="Int">index</a>) = <span title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]" class="keyword">new</span> <a href="#150462" title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]">Entry</a>(<a href="#151154" title="Key">key</a>, <a href="#151155" title="Int">hash</a>, <a href="../../Option.scala.html#19800" title="(x: Value)Some[Value]">Some</a>(<a href="#151156" title="Value">value</a>));
      <a href="#150485" title="Int">modCount</a> += <span title="Int(1)" class="int">1</span>;
      <a href="#150487" title="(s: Int)Unit">size</a> += <span title="Int(1)" class="int">1</span>;
      <a href="../../Option.scala.html#463" title="object None">None</a>
    } <span class="keyword">else</span> {
      <span class="keyword">val</span> <a title="Option[Value]" id="151381">res</a> = <a href="#151235" title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]">entry</a>.<a href="#150593" title="=&gt; Option[Value]">value</a>
      <span title="Unit" class="keyword">if</span> (<a href="#151235" title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]">entry</a>.<a href="#150593" title="(x$1: AnyRef)Boolean">value</a> == <a href="../../Option.scala.html#463" title="object None">None</a>) { <a href="#150487" title="(s: Int)Unit">size</a> += <span title="Int(1)" class="int">1</span>; <a href="#150485" title="Int">modCount</a> += <span title="Int(1)" class="int">1</span> }
      <a href="#151235" title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]">entry</a>.<a href="#150593" title="(x$1: Option[Value])Unit">value</a> = <a href="../../Option.scala.html#19800" title="(x: Value)Some[Value]">Some</a>(<a href="#151156" title="Value">value</a>);
      <a href="#151381" title="Option[Value]">res</a>
    }
  }

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(key: Key)Option[Value]" id="150498">remove</a>(<a title="Key" id="151207">key</a> : <a href="#14374" title="Key">Key</a>): <a href="../../Option.scala.html#777" title="Option[Value]">Option</a>[Value] = {
    <span class="keyword">val</span> <a title="Int" id="151467">index</a> = <a href="#150490" title="(key: Key)Int">findIndex</a>(<a href="#151207" title="Key">key</a>);
    <span title="Option[Value]" class="keyword">if</span> (<a href="../../Array.scala.html#17716" title="(i: Int)scala.collection.mutable.OpenHashMap.Entry[Key,Value]">table</a><span title="(x$1: AnyRef)Boolean">(</span><a href="#151467" title="Int">index</a>) <span title="(x$1: Boolean)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span> &amp;&amp; <a href="../../Array.scala.html#17716" title="(i: Int)scala.collection.mutable.OpenHashMap.Entry[Key,Value]">table</a>(<a href="#151467" title="Int">index</a>).<a href="#150593" title="(x$1: AnyRef)Boolean">value</a> != <a href="../../Option.scala.html#463" title="object None">None</a>){      
      <span class="keyword">val</span> <a title="Option[Value]" id="151509">res</a> = <a href="../../Array.scala.html#17716" title="(i: Int)scala.collection.mutable.OpenHashMap.Entry[Key,Value]">table</a>(<a href="#151467" title="Int">index</a>).<a href="#150593" title="=&gt; Option[Value]">value</a>
      <a href="../../Array.scala.html#17716" title="(i: Int)scala.collection.mutable.OpenHashMap.Entry[Key,Value]">table</a>(<a href="#151467" title="Int">index</a>).<a href="#150593" title="(x$1: Option[Value])Unit">value</a> = <a href="../../Option.scala.html#463" title="object None">None</a>;
      <a href="#150487" title="(s: Int)Unit">size</a> -= <span title="Int(1)" class="int">1</span>;
      <a href="#150483" title="(x$1: Int)Unit">deleted</a> += <span title="Int(1)" class="int">1</span>;
      <a href="#151509" title="Option[Value]">res</a>
    } <span class="keyword">else</span> <a href="../../Option.scala.html#463" title="object None">None</a>
  }

  <span class="keyword">def</span> <a title="(key: Key)Option[Value]" id="150499">get</a>(<a title="Key" id="151601">key</a> : <a href="#14374" title="Key">Key</a>) : <a href="../../Option.scala.html#777" title="Option[Value]">Option</a>[Value] = {
    <span class="keyword">val</span> <a title="Int" id="151604">hash</a> = <a href="#150488" title="(key: Key)Int">hashOf</a>(<a href="#151601" title="Key">key</a>);

    <span class="keyword">var</span> <a title="Int" id="151605">j</a> = <a href="#151604" title="Int">hash</a>;
    <span class="keyword">var</span> <a title="Int" id="151606">index</a> = <a href="#151604" title="(x$1: Int)Int">hash</a> &amp; <a href="#150474" title="=&gt; Int">mask</a>;
    <span class="keyword">var</span> <a title="Int" id="151607">perturb</a> = <a href="#151606" title="Int">index</a>;
    <span class="keyword">var</span> <a title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]" id="151608">entry</a> = <a href="../../Array.scala.html#17716" title="(i: Int)scala.collection.mutable.OpenHashMap.Entry[Key,Value]">table</a>(<a href="#151606" title="Int">index</a>);
    <span title="Unit" class="keyword">while</span>(<a href="#151608" title="(x$1: AnyRef)Boolean">entry</a> != <span title="Null(null)" class="keyword">null</span>)<a href="#151609" title="()Unit">{</a>
      <span title="Unit" class="keyword">if</span> (<a href="#151608" title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]">entry</a>.<a href="#150592" title="(x$1: Int)Boolean">hash</a> <span title="(x$1: Boolean)Boolean">==</span> <a href="#151604" title="Int">hash</a> &amp;&amp;
          <a href="#151608" title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]">entry</a>.<a href="#150591" title="(x$1: Any)Boolean">key</a> == <a href="#151601" title="Key">key</a>){
        <span title="Nothing" class="keyword">return</span> <a href="#151608" title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]">entry</a>.<a href="#150593" title="=&gt; Option[Value]">value</a>;
      }
      
      <a href="#151605" title="Int">j</a> = <span title="(x$1: Int)Int" class="int">5</span> <span title="(x$1: Int)Int">*</span> <a href="#151605" title="Int">j</a> <span title="(x$1: Int)Int">+</span> <span title="Int(1)" class="int">1</span> + <a href="#151607" title="Int">perturb</a>;
      <a href="#151607" title="Int">perturb</a> &gt;&gt;= <span title="Int(5)" class="int">5</span>;
      <a href="#151606" title="Int">index</a> = <a href="#151605" title="(x$1: Int)Int">j</a> &amp; <a href="#150474" title="=&gt; Int">mask</a>;
      <a href="#151608" title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]">entry</a> = <a href="../../Array.scala.html#17716" title="(i: Int)scala.collection.mutable.OpenHashMap.Entry[Key,Value]">table</a>(<a href="#151606" title="Int">index</a>);
    }
    <a href="../../Option.scala.html#463" title="object None">None</a>;
  }
 
  /**
   * An iterator over the elements of this map. Use of this iterator follows the same
   * contract for concurrent modification as the foreach method.
   */ 
  <span class="keyword">def</span> <a title="=&gt; &lt;refinement&gt; extends java.lang.Object with Iterator[(Key, Value)]" id="150500">iterator</a> = <a href="#151723" title="java.lang.Object with Iterator[(Key, Value)]{ ... }" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with Iterator[(Key, Value)]" id="151723">Iterator</a>[(Key, Value)]{
    <span class="keyword">var</span> <a title="Int" id="151726">index</a> = <span title="Int(0)" class="int">0</span>;
    <span class="keyword">val</span> <a title="Int" id="151728">initialModCount</a> = <a href="#150485" title="Int">modCount</a>;

    <span class="keyword">private</span>[<span class="keyword">this</span>] <span class="keyword">def</span> <a title="=&gt; Unit" id="151730">advance</a> {
      <span title="Unit" class="keyword">if</span> (<a href="#151728" title="(x$1: Int)Boolean">initialModCount</a> != <a href="#150485" title="Int">modCount</a>) <a href="../../Predef.scala.html#16210" title="(message: String)Nothing">error</a>(<span title="java.lang.String(&quot;Concurrent modification&quot;)" class="string">&quot;Concurrent modification&quot;</span>);
      <span title="Unit" class="keyword">while</span>(<span title="(x$1: Boolean)Boolean">(</span><a href="#151726" title="(x$1: Int)Boolean">index</a> &lt;= <a href="#150474" title="=&gt; Int">mask</a>) &amp;&amp; (<a href="../../Array.scala.html#17716" title="(i: Int)scala.collection.mutable.OpenHashMap.Entry[Key,Value]">table</a><span title="(x$1: AnyRef)Boolean">(</span><a href="#151726" title="=&gt; Int">index</a>) <a title="(x$1: Boolean)Boolean" id="2208">==</a> <span title="Null(null)" class="keyword">null</span> || <a href="../../Array.scala.html#17716" title="(i: Int)scala.collection.mutable.OpenHashMap.Entry[Key,Value]">table</a>(<a href="#151726" title="=&gt; Int">index</a>).<a href="#150593" title="(x$1: AnyRef)Boolean">value</a> == <a href="../../Option.scala.html#463" title="object None">None</a>)) <a href="#151726" title="(x$1: Int)Unit">index</a><a href="#151749" title="()Unit">+=</a><span title="Int(1)" class="int">1</span>;
    }

    <span class="keyword">def</span> <a title="=&gt; Boolean" id="151731">hasNext</a> = {<a href="#151730" title="=&gt; Unit">advance</a>; <a href="#151726" title="(x$1: Int)Boolean">index</a> &lt;= <a href="#150474" title="=&gt; Int">mask</a>; }

    <span class="keyword">def</span> <a title="()(Key, Value)" id="151732">next</a> = {
      <a href="#151730" title="=&gt; Unit">advance</a>;
      <span class="keyword">val</span> <a title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]" id="151844">result</a> = <a href="../../Array.scala.html#17716" title="(i: Int)scala.collection.mutable.OpenHashMap.Entry[Key,Value]">table</a>(<a href="#151726" title="=&gt; Int">index</a>);
      <a href="#151726" title="(x$1: Int)Unit">index</a> += <span title="Int(1)" class="int">1</span>;
      <a href="../../Tuple2.scala.html#20670" title="(_1: Key,_2: Value)(Key, Value)">(</a><a href="#151844" title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]">result</a>.<a href="#150591" title="=&gt; Key">key</a>, <a href="#151844" title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]">result</a>.<a href="#150593" title="=&gt; Option[Value]">value</a>.<a href="../../Option.scala.html#19759" title="=&gt; Value">get</a>);
    }
  }

  @deprecated(<span class="string">&quot;use `iterator' instead&quot;</span>)
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Iterator[(Key, Value)]" id="150501">elements</a>: <a href="../Iterator.scala.html#4274" title="Iterator[(Key, Value)]">Iterator</a>[(Key, Value)] = <a href="#150500" title="=&gt; &lt;refinement&gt; extends java.lang.Object with Iterator[(Key, Value)]">iterator</a>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()scala.collection.mutable.OpenHashMap[Key,Value]" id="150502">clone</a> : <a href="#7698" title="scala.collection.mutable.OpenHashMap[Key,Value]">OpenHashMap</a>[Key, Value] = {
    <span class="keyword">val</span> <a title="scala.collection.mutable.OpenHashMap[Key,Value]" id="151929">it</a> = <a href="#150470" title="()scala.collection.mutable.OpenHashMap[Key,Value]" class="keyword">new</a> <a href="#7698" title="scala.collection.mutable.OpenHashMap[Key,Value]">OpenHashMap</a>[Key, Value]
    <a href="#150506" title="(f: (scala.collection.mutable.OpenHashMap.Entry[Key,Value]) =&gt; Unit)Unit">foreachUndeletedEntry</a>(<a title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]" id="151941">entry</a> =&gt; <a href="#151929" title="scala.collection.mutable.OpenHashMap[Key,Value]">it</a>.<a href="#150497" title="(key: Key,hash: Int,value: Value)Option[Value]">put</a><span title="Unit">(</span><a href="#151941" title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]">entry</a>.<a href="#150591" title="=&gt; Key">key</a>, <a href="#151941" title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]">entry</a>.<a href="#150592" title="=&gt; Int">hash</a>, <a href="#151941" title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]">entry</a>.<a href="#150593" title="=&gt; Option[Value]">value</a>.<a href="../../Option.scala.html#19759" title="=&gt; Value">get</a>));
    <a href="#151929" title="scala.collection.mutable.OpenHashMap[Key,Value]">it</a>
  }

  /**
   * Loop over the key, value mappings of this map.
   *
   * The behaviour of modifying the map during an iteration is as follows: 
   *
   * &lt;ul&gt;
   *  &lt;li&gt;Deleting a mapping is always permitted.&lt;/li&gt;
   *  &lt;li&gt;Changing the value of mapping which is already present is permitted.&lt;/li&gt;
   *  &lt;li&gt;Anything else is not permitted. It will usually, but not always, throw an exception.&lt;/li&gt;
   * &lt;/ul&gt;
   *
   * @param  f The function to apply to each key, value mapping.
   */ 
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="[U](f: ((Key, Value)) =&gt; U)Unit" id="150503">foreach</a>[<a title="&gt;: Nothing &lt;: Any" id="150505">U</a>](<a title="((Key, Value)) =&gt; U" id="151954">f</a> : ((Key, Value)) =&gt;  U){
    <span class="keyword">val</span> <a title="Int" id="151966">startModCount</a> = <a href="#150485" title="Int">modCount</a>;
    <a href="#150506" title="(f: (scala.collection.mutable.OpenHashMap.Entry[Key,Value]) =&gt; Unit)Unit">foreachUndeletedEntry</a>(<a title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]" id="151968">entry</a> =&gt; {
      <span title="Unit" class="keyword">if</span> (<a href="#150485" title="(x$1: Int)Boolean">modCount</a> != <a href="#151966" title="Int">startModCount</a>) <a href="../../Predef.scala.html#16210" title="(message: String)Nothing">error</a>(<span title="java.lang.String(&quot;Concurrent Modification&quot;)" class="string">&quot;Concurrent Modification&quot;</span>)
      <a href="../../Function1.scala.html#17119" title="(v1: (Key, Value))U">f</a><span title="Unit">(</span><a href="../../Tuple2.scala.html#20670" title="(_1: Key,_2: Value)(Key, Value)">(</a><a href="#151968" title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]">entry</a>.<a href="#150591" title="=&gt; Key">key</a>, <a href="#151968" title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]">entry</a>.<a href="#150593" title="=&gt; Option[Value]">value</a>.<a href="../../Option.scala.html#19759" title="=&gt; Value">get</a>))}
    );  
  }

  <span class="keyword">private</span>[<span class="keyword">this</span>] <span class="keyword">def</span> <a title="(f: (scala.collection.mutable.OpenHashMap.Entry[Key,Value]) =&gt; Unit)Unit" id="150506">foreachUndeletedEntry</a>(<a title="(scala.collection.mutable.OpenHashMap.Entry[Key,Value]) =&gt; Unit" id="151938">f</a> : Entry[Key, Value] =&gt; Unit){
    <a href="#150477" title="=&gt; Array[scala.collection.mutable.OpenHashMap.Entry[Key,Value]]">table</a>.<a href="../generic/VectorTemplate.scala.html#17752" title="(f: (scala.collection.mutable.OpenHashMap.Entry[Key,Value]) =&gt; Unit)Unit">foreach</a>(<a title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]" id="152013">entry</a> =&gt; <span title="Unit" class="keyword">if</span> (<a href="#152013" title="(x$1: AnyRef)Boolean">entry</a> <span title="(x$1: Boolean)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span> &amp;&amp; <a href="#152013" title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]">entry</a>.<a href="#150593" title="(x$1: AnyRef)Boolean">value</a> != <a href="../../Option.scala.html#463" title="object None">None</a>) <a href="../../Function1.scala.html#17119" title="(v1: scala.collection.mutable.OpenHashMap.Entry[Key,Value])Unit">f</a>(<a href="#152013" title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]">entry</a>));
  }
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(f: (Key, Value) =&gt; Value)OpenHashMap.this.type" id="150507">transform</a>(<a title="(Key, Value) =&gt; Value" id="152035">f</a> : (Key, Value) =&gt; Value) = {
    <a href="#150506" title="(f: (scala.collection.mutable.OpenHashMap.Entry[Key,Value]) =&gt; Unit)Unit">foreachUndeletedEntry</a>(<a title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]" id="152042">entry</a> =&gt; <a href="#152042" title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]">entry</a>.<a href="#150593" title="(x$1: Option[Value])Unit">value</a> = <a href="../../Option.scala.html#19800" title="(x: Value)Some[Value]">Some</a>(<a href="../../Function2.scala.html#20443" title="(v1: Key,v2: Value)Value">f</a>(<a href="#152042" title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]">entry</a>.<a href="#150591" title="=&gt; Key">key</a>, <a href="#152042" title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]">entry</a>.<a href="#150593" title="=&gt; Option[Value]">value</a>.<a href="../../Option.scala.html#19759" title="=&gt; Value">get</a>)));
    <a href="#7698" title="OpenHashMap.this.type" class="keyword">this</a>
  }

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(f: (Key, Value) =&gt; Boolean)OpenHashMap.this.type" id="150508">retain</a>(<a title="(Key, Value) =&gt; Boolean" id="152061">f</a> : (Key, Value) =&gt; Boolean) = {
    <a href="#150506" title="(f: (scala.collection.mutable.OpenHashMap.Entry[Key,Value]) =&gt; Unit)Unit">foreachUndeletedEntry</a>(<a title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]" id="152068">entry</a> =&gt; <span title="Unit" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="../../Function2.scala.html#20443" title="(v1: Key,v2: Value)Boolean">f</a>(<a href="#152068" title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]">entry</a>.<a href="#150591" title="=&gt; Key">key</a>, <a href="#152068" title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]">entry</a>.<a href="#150593" title="=&gt; Option[Value]">value</a>.<a href="../../Option.scala.html#19759" title="=&gt; Value">get</a>)) {<a href="#152068" title="scala.collection.mutable.OpenHashMap.Entry[Key,Value]">entry</a>.<a href="#150593" title="(x$1: Option[Value])Unit">value</a> = <a href="../../Option.scala.html#463" title="object None">None</a>; <a href="#150487" title="(s: Int)Unit">size</a> -= <span title="Int(1)" class="int">1</span>; <a href="#150483" title="(x$1: Int)Unit">deleted</a> += <span title="Int(1)" class="int">1</span>} );
    <a href="#7698" title="OpenHashMap.this.type" class="keyword">this</a>
  }

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; java.lang.String" id="150509">stringPrefix</a> = <span title="java.lang.String(&quot;OpenHashMap&quot;)" class="string">&quot;OpenHashMap&quot;</span>
}

        </pre>
    </body>
</html>