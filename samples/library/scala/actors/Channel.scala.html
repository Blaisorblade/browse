<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/actors/Channel.scala</title>
        <script type="text/javascript" src="../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../style.css" title="Style">
    </head>
    <body onload="initializeLinked()">
        <pre>
<span class="comment">/*                     __                                               *\
**     ________ ___   / /  ___     Scala API                            **
**    / __/ __// _ | / /  / _ |    (c) 2005-2009, LAMP/EPFL             **
**  __\ \/ /__/ __ |/ /__/ __ |    http://scala-lang.org/               **
** /____/\___/_/ |_/____/_/ | |                                         **
**                          |/                                          **
\*                                                                      */</span>

<span class="comment">// $Id: Channel.scala 17139 2009-02-18 13:57:35Z phaller $</span>

<span class="keyword">package</span> scala.actors


<span class="comment">/** &lt;p&gt;
 *    This class is used to pattern match on values that were sent
 *    to some channel &lt;code&gt;Chan&lt;sub&gt;n&lt;/sub&gt;&lt;/code&gt; by the current
 *    actor &lt;code&gt;self&lt;/code&gt;.
 *  &lt;/p&gt;
 *  &lt;p&gt;
 *    The following example demonstrates its usage:
 *  &lt;/p&gt;&lt;pre&gt;
 *  receive {
 *    &lt;b&gt;case&lt;/b&gt; Chan1 ! msg1 =&gt; ...
 *    &lt;b&gt;case&lt;/b&gt; Chan2 ! msg2 =&gt; ...
 *  }
 *  &lt;/pre&gt;
 *
 * @version 0.9.8
 * @author Philipp Haller
 */</span>
<span class="keyword">case</span> <span class="keyword">class</span> <span class="typed"><span class="type">class ![a] extends java.lang.Object with ScalaObject with Product</span><span id="7893"><span id="45150"><span id="7892"><span id="45144"><span id="2748"><span id="2749"><span id="27814"><span id="45148"><span id="27827"><span id="45141"><span id="5792"><span id="45142"><span id="19891"><span id="45149"><span id="27824"><span id="3494"><span id="45146"><span id="45143"><span id="3507"><span id="45151"><span id="3499"><span id="45145"><a href="../runtime/ScalaRunTime.scala.html#19785" id="3498">!</a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span> [<span class="typed"><span class="type">&gt;: Nothing &lt;: Any</span><span id="12712"><span id="27826"><a id="27816">a</a></span></span></span>](<span class="typed"><span class="type">scala.actors.Channel[a]</span><span id="27820"><span id="27819"><span id="27852"><a id="45167">ch</a></span></span></span></span>: <span class="typed"><span class="type">scala.actors.Channel[a]</span><a href="#7952">Channel</a></span>[a], <span class="typed"><span class="type">a</span><span id="27822"><span id="27821"><span id="27853"><a id="45168">msg</a></span></span></span></span>: <span class="typed"><span class="type">a</span><a href="#12712">a</a></span>)

<span class="comment">/**
 * This class provides a means for typed communication among
 * actors. Only the actor creating an instance of a
 * &lt;code&gt;Channel&lt;/code&gt; may receive from it.
 *
 * @version 0.9.17
 * @author Philipp Haller
 */</span>
<span class="keyword">class</span> <span class="typed"><span class="type">class Channel[Msg] extends java.lang.Object with scala.actors.InputChannel[Msg] with scala.actors.OutputChannel[Msg] with ScalaObject</span><a id="7952">Channel</a></span>[<span class="typed"><span class="type">&gt;: Nothing &lt;: Any</span><a id="12713">Msg</a></span>] <span class="keyword">extends</span> <span class="typed"><span class="type">scala.actors.InputChannel[Msg]</span><a href="InputChannel.scala.html#8069">InputChannel</a></span>[Msg] <span class="keyword">with</span> <span class="typed"><span class="type">scala.actors.OutputChannel[Msg]</span><a href="OutputChannel.scala.html#8150">OutputChannel</a></span>[Msg] {

  <span class="keyword">private</span>[actors] <span class="keyword">var</span> <span class="typed"><span class="type">scala.actors.Actor</span><span id="27835"><span id="27833"><span id="27834"><a id="45154">recv</a></span></span></span></span>: <span class="typed"><span class="type">scala.actors.Actor</span><a href="Actor.scala.html#7907">Actor</a></span> = {
    <span class="comment">// basically Actor.self, but can be null</span>
    <span class="typed"><span class="type">object scala.actors.Actor</span><a href="Actor.scala.html#7908">Actor</a></span>.<span class="typed"><span class="type">=&gt; java.lang.ThreadLocal[scala.actors.Actor]</span><a href="Actor.scala.html#27708">tl</a></span>.<span class="typed"><span class="type">()scala.actors.Actor</span><a id="20499">get</a></span>.<span class="typed"><span class="type">scala.actors.Actor</span><a id="3501">asInstanceOf</a></span>[<span class="typed"><span class="type">scala.actors.Actor</span><a href="Actor.scala.html#7907">Actor</a></span>]
  }

  <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; scala.actors.Actor</span><a id="27836">receiver</a></span>: <span class="typed"><span class="type">scala.actors.Actor</span><a href="Actor.scala.html#7907">Actor</a></span> = <span class="typed"><span class="type">=&gt; scala.actors.Actor</span><a href="#27833">recv</a></span>

  <span class="keyword">def</span> <span class="typed"><span class="type">(scala.actors.Actor)scala.actors.Channel[Msg]</span><a id="27837" class="keyword">this</a></span>(<span class="typed"><span class="type">scala.actors.Actor</span><a id="37756">recv</a></span>: <span class="typed"><span class="type">scala.actors.Actor</span><a href="Actor.scala.html#7907">Actor</a></span>) = <span class="typed"><span class="type">Unit</span><span >{</span></span>
    <span class="typed"><span class="type">Channel.this.type</span><a href="#7952" class="keyword">this</a></span>()
    <span class="typed"><span class="type">Channel.this.type</span><a href="#7952" class="keyword">this</a></span>.<span class="typed"><span class="type">(scala.actors.Actor)Unit</span><a href="#27834">recv</a></span> = <span class="typed"><span class="type">scala.actors.Actor</span><a href="#37756">recv</a></span>
  }

  <span class="comment">/**
   * Sends a message to this &lt;code&gt;Channel&lt;/code&gt;.
   *
   * @param  msg the message to be sent
   */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">(Msg)Unit</span><a id="27838">!</a></span>(<span class="typed"><span class="type">Msg</span><a id="37801">msg</a></span>: <span class="typed"><span class="type">Msg</span><a href="#12713">Msg</a></span>) {
    <span class="typed"><span class="type">=&gt; scala.actors.Actor</span><a href="#27833">recv</a></span> <span class="typed"><span class="type">(Any)Unit</span><a href="Actor.scala.html#27642">!</a></span> scala.actors.<span class="typed"><span class="type">(scala.actors.Channel[Msg],Msg)scala.actors.![Msg]</span><a href="#27814">!</a></span>(<span class="typed"><span class="type">scala.actors.Channel[Msg]</span><a href="#7952" class="keyword">this</a></span>, <span class="typed"><span class="type">Msg</span><a href="#37801">msg</a></span>)
  }

  <span class="comment">/**
   * Sends a message to this &lt;code&gt;Channel&lt;/code&gt;
   * (asynchronous) supplying explicit reply destination.
   *
   * @param  msg     the message to send
   * @param  replyTo the reply destination
   */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">(Msg,scala.actors.OutputChannel[Any])Unit</span><a id="27839">send</a></span>(<span class="typed"><span class="type">Msg</span><a id="37805">msg</a></span>: <span class="typed"><span class="type">Msg</span><a href="#12713">Msg</a></span>, <span class="typed"><span class="type">scala.actors.OutputChannel[Any]</span><a id="37806">replyTo</a></span>: <span class="typed"><span class="type">scala.actors.OutputChannel[Any]</span><a href="OutputChannel.scala.html#8150">OutputChannel</a></span>[Any]) {
    <span class="typed"><span class="type">=&gt; scala.actors.Actor</span><a href="#27833">recv</a></span>.<span class="typed"><span class="type">(Any,scala.actors.OutputChannel[Any])Unit</span><a href="Actor.scala.html#27632">send</a></span>(scala.actors.<span class="typed"><span class="type">(scala.actors.Channel[Msg],Msg)scala.actors.![Msg]</span><a href="#27814">!</a></span>(<span class="typed"><span class="type">scala.actors.Channel[Msg]</span><a href="#7952" class="keyword">this</a></span>, <span class="typed"><span class="type">Msg</span><a href="#37805">msg</a></span>), <span class="typed"><span class="type">scala.actors.OutputChannel[Any]</span><a href="#37806">replyTo</a></span>)
  }

  <span class="comment">/**
   * Forwards &lt;code&gt;msg&lt;/code&gt; to &lt;code&gt;this&lt;/code&gt; keeping the
   * last sender as sender instead of &lt;code&gt;self&lt;/code&gt;.
   */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">(Msg)Unit</span><a id="27840">forward</a></span>(<span class="typed"><span class="type">Msg</span><a id="37810">msg</a></span>: <span class="typed"><span class="type">Msg</span><a href="#12713">Msg</a></span>) {
    <span class="typed"><span class="type">=&gt; scala.actors.Actor</span><a href="#27833">recv</a></span> <span class="typed"><span class="type">(Any)Unit</span><a href="Actor.scala.html#27643">forward</a></span> scala.actors.<span class="typed"><span class="type">(scala.actors.Channel[Msg],Msg)scala.actors.![Msg]</span><a href="#27814">!</a></span>(<span class="typed"><span class="type">scala.actors.Channel[Msg]</span><a href="#7952" class="keyword">this</a></span>, <span class="typed"><span class="type">Msg</span><a href="#37810">msg</a></span>)
  }

  <span class="comment">/**
   * Receives a message from this &lt;code&gt;Channel&lt;/code&gt;.
   *
   * @param  f    a partial function with message patterns and actions
   * @return      result of processing the received value
   */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">[R](PartialFunction[Msg,R])R</span><a id="27841">receive</a></span>[<span class="typed"><span class="type">&gt;: Nothing &lt;: Any</span><a id="27843">R</a></span>](<span class="typed"><span class="type">PartialFunction[Msg,R]</span><a id="37758">f</a></span>: <span class="typed"><span class="type">PartialFunction[Msg,R]</span><a href="../PartialFunction.scala.html#1295">PartialFunction</a></span>[Msg, R]): <span class="typed"><span class="type">R</span><a href="#27843">R</a></span> = {
    <span class="keyword">val</span> <span class="typed"><span class="type">scala.actors.Channel[Any]</span><a id="45174">C</a></span> = <span class="typed"><span class="type">Channel.this.type</span><a href="#7952" class="keyword">this</a></span>.<span class="typed"><span class="type">scala.actors.Channel[Any]</span><a id="3501">asInstanceOf</a></span>[<span class="typed"><span class="type">scala.actors.Channel[Any]</span><a href="#7952">Channel</a></span>[Any]]
    <span class="typed"><span class="type">=&gt; scala.actors.Actor</span><a href="#27833">recv</a></span>.<span class="typed"><span class="type">(PartialFunction[Any,R])R</span><a href="Actor.scala.html#27633">receive</a></span> <span class="typed"><span class="type">R</span><a href="#45177">{</a></span>
      <span class="typed"><span class="type">R</span><span class="keyword">case</span></span> <span class="typed"><span class="type">scala.actors.Channel[Any]</span><a href="#45174">C</a></span> <a id="1">!</a> <span class="typed"><span class="type">Any</span><a id="45178">msg</a></span> <span class="keyword">if</span> (<span class="typed"><span class="type">PartialFunction[Msg,R]</span><a href="#37758">f</a></span>.<span class="typed"><span class="type">(Msg)Boolean</span><a href="../PartialFunction.scala.html#17289">isDefinedAt</a></span>(<span class="typed"><span class="type">Any</span><a href="#45178">msg</a></span>.<span class="typed"><span class="type">Msg</span><a id="3501">asInstanceOf</a></span>[<span class="typed"><span class="type">Msg</span><a href="#12713">Msg</a></span>])) =&gt; <span class="typed"><span class="type">(Msg)R</span><a href="../Function1.scala.html#17300">f</a></span>(<span class="typed"><span class="type">Any</span><a href="#45178">msg</a></span>.<span class="typed"><span class="type">Msg</span><a id="3501">asInstanceOf</a></span>[<span class="typed"><span class="type">Msg</span><a href="#12713">Msg</a></span>])
    }
  }

  <span class="comment">/**
   * Receives the next message from this &lt;code&gt;Channel&lt;/code&gt;.
   */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Msg</span><a id="27844">?</a></span> : <span class="typed"><span class="type">Msg</span><a href="#12713">Msg</a></span> = <span class="typed"><span class="type">(PartialFunction[Msg,Msg])Msg</span><a href="#27841">receive</a></span> <span class="typed"><span class="type">Msg</span><a href="#45182">{</a></span>
    <span class="typed"><span class="type">Msg</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Msg</span><a id="45183">x</a></span> =&gt; <span class="typed"><span class="type">Msg</span><a href="#45183">x</a></span>
  }

  <span class="comment">/**
   * Receives a message from this &lt;code&gt;Channel&lt;/code&gt; within a certain
   * time span.
   *
   * @param  msec the time span before timeout
   * @param  f    a partial function with message patterns and actions
   * @return      result of processing the received value
   */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">[R](Long)(PartialFunction[Any,R])R</span><a id="27845">receiveWithin</a></span>[<span class="typed"><span class="type">&gt;: Nothing &lt;: Any</span><a id="27847">R</a></span>](<span class="typed"><span class="type">Long</span><a id="37769">msec</a></span>: <span class="typed"><span class="type">Long</span><a id="2397">Long</a></span>)(<span class="typed"><span class="type">PartialFunction[Any,R]</span><a id="37770">f</a></span>: <span class="typed"><span class="type">PartialFunction[Any,R]</span><a href="../PartialFunction.scala.html#1295">PartialFunction</a></span>[Any, R]): <span class="typed"><span class="type">R</span><a href="#27847">R</a></span> = {
    <span class="keyword">val</span> <span class="typed"><span class="type">scala.actors.Channel[Any]</span><a id="45184">C</a></span> = <span class="typed"><span class="type">Channel.this.type</span><a href="#7952" class="keyword">this</a></span>.<span class="typed"><span class="type">scala.actors.Channel[Any]</span><a id="3501">asInstanceOf</a></span>[<span class="typed"><span class="type">scala.actors.Channel[Any]</span><a href="#7952">Channel</a></span>[Any]]
    <span class="typed"><span class="type">=&gt; scala.actors.Actor</span><a href="#27833">recv</a></span>.<span class="typed"><span class="type">(Long)(PartialFunction[Any,R])R</span><a href="Actor.scala.html#27636">receiveWithin</a></span>(<span class="typed"><span class="type">Long</span><a href="#37769">msec</a></span>) <span class="typed"><span class="type">R</span><a href="#45187">{</a></span>
      <span class="typed"><span class="type">R</span><span class="keyword">case</span></span> <span class="typed"><span class="type">scala.actors.Channel[Any]</span><a href="#45184">C</a></span> <a id="1">!</a> <span class="typed"><span class="type">Any</span><a id="45188">msg</a></span> <span class="keyword">if</span> (<span class="typed"><span class="type">PartialFunction[Any,R]</span><a href="#37770">f</a></span>.<span class="typed"><span class="type">(Any)Boolean</span><a href="../PartialFunction.scala.html#17289">isDefinedAt</a></span>(<span class="typed"><span class="type">Any</span><a href="#45188">msg</a></span>)) =&gt; <span class="typed"><span class="type">(Any)R</span><a href="../Function1.scala.html#17300">f</a></span>(<span class="typed"><span class="type">Any</span><a href="#45188">msg</a></span>)
      <span class="typed"><span class="type">R</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object scala.actors.TIMEOUT</span><a href="Actor.scala.html#8157">TIMEOUT</a></span> =&gt; <span class="typed"><span class="type">(Any)R</span><a href="../Function1.scala.html#17300">f</a></span>(<span class="typed"><span class="type">object scala.actors.TIMEOUT</span><a href="Actor.scala.html#8157">TIMEOUT</a></span>)
    }
  }

  <span class="comment">/**
   * Receives a message from this &lt;code&gt;Channel&lt;/code&gt;.
   * &lt;p&gt;
   * This method never returns. Therefore, the rest of the computation
   * has to be contained in the actions of the partial function.
   *
   * @param  f    a partial function with message patterns and actions
   */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">(PartialFunction[Msg,Unit])Nothing</span><a id="27848">react</a></span>(<span class="typed"><span class="type">PartialFunction[Msg,Unit]</span><a id="45189">f</a></span>: <span class="typed"><span class="type">PartialFunction[Msg,Unit]</span><a href="../PartialFunction.scala.html#1295">PartialFunction</a></span>[Msg, Unit]): <span class="typed"><span class="type">Nothing</span><a id="2165">Nothing</a></span> = {
    <span class="keyword">val</span> <span class="typed"><span class="type">scala.actors.Channel[Any]</span><a id="45190">C</a></span> = <span class="typed"><span class="type">Channel.this.type</span><a href="#7952" class="keyword">this</a></span>.<span class="typed"><span class="type">scala.actors.Channel[Any]</span><a id="3501">asInstanceOf</a></span>[<span class="typed"><span class="type">scala.actors.Channel[Any]</span><a href="#7952">Channel</a></span>[Any]]
    <span class="typed"><span class="type">=&gt; scala.actors.Actor</span><a href="#27833">recv</a></span>.<span class="typed"><span class="type">(PartialFunction[Any,Unit])Nothing</span><a href="Actor.scala.html#27639">react</a></span> <span class="typed"><span class="type">Unit</span><a href="#45192">{</a></span>
      <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">scala.actors.Channel[Any]</span><a href="#45190">C</a></span> <a id="1">!</a> <span class="typed"><span class="type">Any</span><a id="45193">msg</a></span> <span class="keyword">if</span> (<span class="typed"><span class="type">PartialFunction[Msg,Unit]</span><a href="#45189">f</a></span>.<span class="typed"><span class="type">(Msg)Boolean</span><a href="../PartialFunction.scala.html#17289">isDefinedAt</a></span>(<span class="typed"><span class="type">Any</span><a href="#45193">msg</a></span>.<span class="typed"><span class="type">Msg</span><a id="3501">asInstanceOf</a></span>[<span class="typed"><span class="type">Msg</span><a href="#12713">Msg</a></span>])) =&gt; <span class="typed"><span class="type">(Msg)Unit</span><a href="../Function1.scala.html#17300">f</a></span>(<span class="typed"><span class="type">Any</span><a href="#45193">msg</a></span>.<span class="typed"><span class="type">Msg</span><a id="3501">asInstanceOf</a></span>[<span class="typed"><span class="type">Msg</span><a href="#12713">Msg</a></span>])
    }
  }

  <span class="comment">/**
   * Receives a message from this &lt;code&gt;Channel&lt;/code&gt; within a certain
   * time span.
   * &lt;p&gt;
   * This method never returns. Therefore, the rest of the computation
   * has to be contained in the actions of the partial function.
   *
   * @param  msec the time span before timeout
   * @param  f    a partial function with message patterns and actions
   */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">(Long)(PartialFunction[Any,Unit])Nothing</span><a id="27849">reactWithin</a></span>(<span class="typed"><span class="type">Long</span><a id="45194">msec</a></span>: <span class="typed"><span class="type">Long</span><a id="2397">Long</a></span>)(<span class="typed"><span class="type">PartialFunction[Any,Unit]</span><a id="45195">f</a></span>: <span class="typed"><span class="type">PartialFunction[Any,Unit]</span><a href="../PartialFunction.scala.html#1295">PartialFunction</a></span>[Any, Unit]): <span class="typed"><span class="type">Nothing</span><a id="2165">Nothing</a></span> = {
    <span class="keyword">val</span> <span class="typed"><span class="type">scala.actors.Channel[Any]</span><a id="45196">C</a></span> = <span class="typed"><span class="type">Channel.this.type</span><a href="#7952" class="keyword">this</a></span>.<span class="typed"><span class="type">scala.actors.Channel[Any]</span><a id="3501">asInstanceOf</a></span>[<span class="typed"><span class="type">scala.actors.Channel[Any]</span><a href="#7952">Channel</a></span>[Any]]
    <span class="typed"><span class="type">=&gt; scala.actors.Actor</span><a href="#27833">recv</a></span>.<span class="typed"><span class="type">(Long)(PartialFunction[Any,Unit])Nothing</span><a href="Actor.scala.html#27640">reactWithin</a></span>(<span class="typed"><span class="type">Long</span><a href="#45194">msec</a></span>) <span class="typed"><span class="type">Unit</span><a href="#45198">{</a></span>
      <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">scala.actors.Channel[Any]</span><a href="#45196">C</a></span> <a id="1">!</a> <span class="typed"><span class="type">Any</span><a id="45199">msg</a></span> <span class="keyword">if</span> (<span class="typed"><span class="type">PartialFunction[Any,Unit]</span><a href="#45195">f</a></span>.<span class="typed"><span class="type">(Any)Boolean</span><a href="../PartialFunction.scala.html#17289">isDefinedAt</a></span>(<span class="typed"><span class="type">Any</span><a href="#45199">msg</a></span>)) =&gt; <span class="typed"><span class="type">(Any)Unit</span><a href="../Function1.scala.html#17300">f</a></span>(<span class="typed"><span class="type">Any</span><a href="#45199">msg</a></span>)
      <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object scala.actors.TIMEOUT</span><a href="Actor.scala.html#8157">TIMEOUT</a></span> =&gt; <span class="typed"><span class="type">(Any)Unit</span><a href="../Function1.scala.html#17300">f</a></span>(<span class="typed"><span class="type">object scala.actors.TIMEOUT</span><a href="Actor.scala.html#8157">TIMEOUT</a></span>)
    }
  }

  <span class="comment">/**
   * Sends a message to this &lt;code&gt;Channel&lt;/code&gt; and
   * awaits reply.
   *
   * @param  msg the message to be sent
   * @return     the reply
   */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">(Msg)Any</span><a id="27850">!?</a></span>(<span class="typed"><span class="type">Msg</span><a id="45200">msg</a></span>: <span class="typed"><span class="type">Msg</span><a href="#12713">Msg</a></span>): <span class="typed"><span class="type">Any</span><a id="49">Any</a></span> = {
    <span class="keyword">val</span> <span class="typed"><span class="type">scala.actors.Channel[Any]</span><a id="45201">replyCh</a></span> = <span class="typed"><span class="type">(scala.actors.Actor)scala.actors.Channel[Any]</span><a href="#27837" class="keyword">new</a></span> <span class="typed"><span class="type">scala.actors.Channel[Any]</span><a href="#7952">Channel</a></span>[Any](<span class="typed"><span class="type">object scala.actors.Actor</span><a href="Actor.scala.html#7908">Actor</a></span>.<span class="typed"><span class="type">(scala.actors.IScheduler)scala.actors.Actor</span><a href="Actor.scala.html#27713">self</a></span>(<span class="typed"><span class="type">=&gt; scala.actors.Actor</span><a href="#27833">recv</a></span>.<span class="typed"><span class="type">=&gt; scala.actors.IScheduler</span><a href="Actor.scala.html#27630">scheduler</a></span>))
    <span class="typed"><span class="type">=&gt; scala.actors.Actor</span><a href="#27833">recv</a></span>.<span class="typed"><span class="type">(Any,scala.actors.OutputChannel[Any])Unit</span><a href="Actor.scala.html#27632">send</a></span>(scala.actors.<span class="typed"><span class="type">(scala.actors.Channel[Msg],Msg)scala.actors.![Msg]</span><a href="#27814">!</a></span>(<span class="typed"><span class="type">scala.actors.Channel[Msg]</span><a href="#7952" class="keyword">this</a></span>, <span class="typed"><span class="type">Msg</span><a href="#45200">msg</a></span>), <span class="typed"><span class="type">scala.actors.Channel[Any]</span><a href="#45201">replyCh</a></span>)
    <span class="typed"><span class="type">scala.actors.Channel[Any]</span><a href="#45201">replyCh</a></span>.<span class="typed"><span class="type">(PartialFunction[Any,Any])Any</span><a href="#27841">receive</a></span> <span class="typed"><span class="type">Any</span><a href="#45208">{</a></span>
      <span class="typed"><span class="type">Any</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Any</span><a id="45209">x</a></span> =&gt; <span class="typed"><span class="type">Any</span><a href="#45209">x</a></span>
    }
  }

  <span class="comment">/**
   * Sends a message to this &lt;code&gt;Channel&lt;/code&gt; and
   * awaits reply within a certain time span.
   *
   * @param  msec the time span before timeout
   * @param  msg  the message to be sent
   * @return      &lt;code&gt;None&lt;/code&gt; in case of timeout, otherwise
   *              &lt;code&gt;Some(x)&lt;/code&gt; where &lt;code&gt;x&lt;/code&gt; is the reply
   */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">(Long,Msg)Option[Any]</span><a id="27851">!?</a></span>(<span class="typed"><span class="type">Long</span><a id="45210">msec</a></span>: <span class="typed"><span class="type">Long</span><a id="2397">Long</a></span>, <span class="typed"><span class="type">Msg</span><a id="45211">msg</a></span>: <span class="typed"><span class="type">Msg</span><a href="#12713">Msg</a></span>): <span class="typed"><span class="type">Option[Any]</span><a href="../Option.scala.html#932">Option</a></span>[Any] = {
    <span class="keyword">val</span> <span class="typed"><span class="type">scala.actors.Channel[Any]</span><a id="45212">replyCh</a></span> = <span class="typed"><span class="type">(scala.actors.Actor)scala.actors.Channel[Any]</span><a href="#27837" class="keyword">new</a></span> <span class="typed"><span class="type">scala.actors.Channel[Any]</span><a href="#7952">Channel</a></span>[Any](<span class="typed"><span class="type">object scala.actors.Actor</span><a href="Actor.scala.html#7908">Actor</a></span>.<span class="typed"><span class="type">(scala.actors.IScheduler)scala.actors.Actor</span><a href="Actor.scala.html#27713">self</a></span>(<span class="typed"><span class="type">=&gt; scala.actors.Actor</span><a href="#27833">recv</a></span>.<span class="typed"><span class="type">=&gt; scala.actors.IScheduler</span><a href="Actor.scala.html#27630">scheduler</a></span>))
    <span class="typed"><span class="type">=&gt; scala.actors.Actor</span><a href="#27833">recv</a></span>.<span class="typed"><span class="type">(Any,scala.actors.OutputChannel[Any])Unit</span><a href="Actor.scala.html#27632">send</a></span>(scala.actors.<span class="typed"><span class="type">(scala.actors.Channel[Msg],Msg)scala.actors.![Msg]</span><a href="#27814">!</a></span>(<span class="typed"><span class="type">scala.actors.Channel[Msg]</span><a href="#7952" class="keyword">this</a></span>, <span class="typed"><span class="type">Msg</span><a href="#45211">msg</a></span>), <span class="typed"><span class="type">scala.actors.Channel[Any]</span><a href="#45212">replyCh</a></span>)
    <span class="typed"><span class="type">scala.actors.Channel[Any]</span><a href="#45212">replyCh</a></span>.<span class="typed"><span class="type">(Long)(PartialFunction[Any,Option[Any]])Option[Any]</span><a href="#27845">receiveWithin</a></span>(<span class="typed"><span class="type">Long</span><a href="#45210">msec</a></span>) <span class="typed"><span class="type">Option[Any]</span><a href="#45219">{</a></span>
      <span class="typed"><span class="type">None.type</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object scala.actors.TIMEOUT</span><a href="Actor.scala.html#8157">TIMEOUT</a></span> =&gt; <span class="typed"><span class="type">object None</span><a href="../Option.scala.html#534">None</a></span>
      <span class="typed"><span class="type">Some[Any]</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Any</span><a id="45220">x</a></span> =&gt; <span class="typed"><span class="type">(Any)Some[Any]</span><a href="../Option.scala.html#19455">Some</a></span>(<span class="typed"><span class="type">Any</span><a href="#45220">x</a></span>)
    }
  }

}

        </pre>
    </body>
</html>