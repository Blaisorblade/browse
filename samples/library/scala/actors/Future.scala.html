<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/actors/Future.scala</title>
        <script type="text/javascript" src="../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../style.css" title="Style">
    </head>
    <body onload="initializeLinked()">
        <pre>
<span class="comment">/*                     __                                               *\
**     ________ ___   / /  ___     Scala API                            **
**    / __/ __// _ | / /  / _ |    (c) 2005-2009, LAMP/EPFL             **
**  __\ \/ /__/ __ |/ /__/ __ |    http://scala-lang.org/               **
** /____/\___/_/ |_/____/_/ | |                                         **
**                          |/                                          **
\*                                                                      */</span>

<span class="comment">// $Id: Future.scala 17462 2009-04-08 16:06:59Z phaller $</span>

<span class="keyword">package</span> scala.actors

<span class="comment">/**
 * &lt;p&gt;
 *   A &lt;code&gt;Future[T]&lt;/code&gt; is a function of arity 0 that
 *   returns a value of type &lt;code&gt;T&lt;/code&gt;.
 *   Applying a future blocks the current actor (&lt;code&gt;self&lt;/code&gt;)
 *   until the future's value is available.
 * &lt;/p&gt;
 * &lt;p&gt;
 *   A future can be queried to find out whether its value
 *   is already available.
 * &lt;/p&gt;
 *
 * @author Philipp Haller
 * @version 0.9.16
 */</span>
<span class="keyword">abstract</span> <span class="keyword">class</span> <span class="typed"><span class="type">class Future[+T] extends Responder[T] with () =&gt; T with ScalaObject</span><a id="8024">Future</a></span>[+<span class="typed"><span class="type">&gt;: Nothing &lt;: Any</span><a id="11071">T</a></span>](<span class="keyword">val</span> <span class="typed"><span class="type">scala.actors.InputChannel[T]</span><span id="27205"><span id="27204"><a id="27223">ch</a></span></span></span>: <span class="typed"><span class="type">scala.actors.InputChannel[T]</span><a href="InputChannel.scala.html#8069">InputChannel</a></span>[T]) <span class="keyword">extends</span> <span class="typed"><span class="type">Responder[T]</span><a href="../Responder.scala.html#1523">Responder</a></span>[T] <span class="keyword">with</span> <span class="typed"><span class="type">() =&gt; T</span><a href="../Function0.scala.html#413">Function0</a></span>[T] {
  <span class="keyword">protected</span> <span class="keyword">var</span> <span class="typed"><span class="type">Option[Any]</span><span id="27209"><span id="27207"><span id="27208"><a id="27222">value</a></span></span></span></span>: <span class="typed"><span class="type">Option[Any]</span><a href="../Option.scala.html#932">Option</a></span>[Any] = <span class="typed"><span class="type">object None</span><a href="../Option.scala.html#534">None</a></span>
  <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Boolean</span><a id="27210">isSet</a></span>: <span class="typed"><span class="type">Boolean</span><a id="2168">Boolean</a></span>
}

<span class="comment">/**
 * The &lt;code&gt;Futures&lt;/code&gt; object contains methods that operate on Futures.
 *
 * @version 0.9.8
 * @author Philipp Haller
 */</span>
<span class="keyword">object</span> <span class="typed"><span class="type">object scala.actors.Futures</span><a id="8244">Futures</a></span> {

  <span class="keyword">private</span> <span class="keyword">val</span> <span class="typed"><span class="type">scala.actors.FJTaskScheduler2</span><span id="27227"><a id="27226">sched</a></span></span> = <span class="typed"><span class="type">scala.actors.FJTaskScheduler2</span><span class="keyword">new</span></span> <span class="typed"><span class="type">scala.actors.FJTaskScheduler2</span><a href="FJTaskScheduler2.scala.html#7988">FJTaskScheduler2</a></span>(<span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>)

  <span class="keyword">def</span> <span class="typed"><span class="type">[T](=&gt; T)scala.actors.Future[T]</span><a id="27228">future</a></span>[<span class="typed"><span class="type">&gt;: Nothing &lt;: Any</span><a id="27230">T</a></span>](<span class="typed"><span class="type">=&gt; T</span><a id="27290">body</a></span>: =&gt; T): <span class="typed"><span class="type">scala.actors.Future[T]</span><a href="#8024">Future</a></span>[T] = {
    <span class="keyword">case</span> <span class="keyword">object</span> <span class="typed"><span class="type">object Eval</span><span id="19891"><span id="27302"><span id="27299"><span id="27300"><span id="27296"><span id="27297"><span id="27291"><span id="27298"><a id="3498">Eval</a></span></span></span></span></span></span></span></span></span>
    <span class="keyword">val</span> <span class="typed"><span class="type">&lt;refinement&gt; extends java.lang.Object with scala.actors.Actor</span><a id="27293">a</a></span> = <span class="typed"><span class="type">template $anon extends java.lang.Object with scala.actors.Actor</span><a id="27303" class="keyword">new</a></span> <span class="typed"><span class="type">scala.actors.Actor</span><a href="Actor.scala.html#7907">Actor</a></span> {
      <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; scala.actors.IScheduler</span><a id="27701">scheduler</a></span>: <span class="typed"><span class="type">scala.actors.IScheduler</span><a href="Scheduler.scala.html#8114">IScheduler</a></span> = <span class="typed"><span class="type">=&gt; scala.actors.FJTaskScheduler2</span><a href="#27226">sched</a></span>
      <span class="keyword">def</span> <span class="typed"><span class="type">()Unit</span><a id="27702">act</a></span>() {
        <span class="typed"><span class="type">object scala.actors.Actor</span><a href="Actor.scala.html#7908">Actor</a></span>.<span class="typed"><span class="type">(PartialFunction[Any,Unit])Nothing</span><a href="Actor.scala.html#27726">react</a></span> <span class="typed"><span class="type">Unit</span><a href="#27754">{</a></span>
          <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object Eval</span><a href="#27291">Eval</a></span> =&gt; <span class="typed"><span class="type">object scala.actors.Actor</span><a href="Actor.scala.html#7908">Actor</a></span>.<span class="typed"><span class="type">(Any)Unit</span><a href="Actor.scala.html#27731">reply</a></span>(<span class="typed"><span class="type">=&gt; T</span><a href="#27290">body</a></span>)
        }
      }
    }
    <span class="typed"><span class="type">&lt;refinement&gt; extends java.lang.Object with scala.actors.Actor</span><a href="#27293">a</a></span>.<span class="typed"><span class="type">()scala.actors.Actor</span><a href="Actor.scala.html#27670">start</a></span>()
    <span class="typed"><span class="type">&lt;refinement&gt; extends java.lang.Object with scala.actors.Actor</span><a href="#27293">a</a></span> <span class="typed"><span class="type">(Any,PartialFunction[Any,T])scala.actors.Future[T]</span><a href="Actor.scala.html#27647">!!</a></span> (<span class="typed"><span class="type">object Eval</span><a href="#27291">Eval</a></span>, <span class="typed"><span class="type">T</span><a href="#27795">{</a></span> <span class="typed"><span class="type">T</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Any</span><a id="27796">any</a></span> =&gt; <span class="typed"><span class="type">Any</span><a href="#27796">any</a></span>.<span class="typed"><span class="type">T</span><a id="3501">asInstanceOf</a></span>[<span class="typed"><span class="type">T</span><a href="#27230">T</a></span>] })
  }

  <span class="keyword">def</span> <span class="typed"><span class="type">(Long)scala.actors.Future[Nothing]</span><a id="27231">alarm</a></span>(<span class="typed"><span class="type">Long</span><a id="27797">t</a></span>: <span class="typed"><span class="type">Long</span><a id="2397">Long</a></span>) = <span class="typed"><span class="type">(=&gt; Nothing)scala.actors.Future[Nothing]</span><a href="#27228">future</a></span> {
    <span class="typed"><span class="type">object scala.actors.Actor</span><a href="Actor.scala.html#7908">Actor</a></span>.<span class="typed"><span class="type">(Long)(PartialFunction[Any,Unit])Nothing</span><a href="Actor.scala.html#27727">reactWithin</a></span>(<span class="typed"><span class="type">Long</span><a href="#27797">t</a></span>) <span class="typed"><span class="type">Unit</span><a href="#27803">{</a></span>
      <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object scala.actors.TIMEOUT</span><a href="Actor.scala.html#8157">TIMEOUT</a></span> =&gt; <span class="typed"><span class="type">Unit</span><span >{</span></span>}
    }
  }

  <span class="keyword">def</span> <span class="typed"><span class="type">[a, b](scala.actors.Future[a],scala.actors.Future[b])Any</span><a id="27232">awaitEither</a></span>[<span class="typed"><span class="type">&gt;: Nothing &lt;: Any</span><a id="27235">a</a></span>, <span class="typed"><span class="type">&gt;: Nothing &lt;: Any</span><a id="27236">b</a></span>](<span class="typed"><span class="type">scala.actors.Future[a]</span><a id="27805">ft1</a></span>: <span class="typed"><span class="type">scala.actors.Future[a]</span><a href="#8024">Future</a></span>[a], <span class="typed"><span class="type">scala.actors.Future[b]</span><a id="27806">ft2</a></span>: <span class="typed"><span class="type">scala.actors.Future[b]</span><a href="#8024">Future</a></span>[b]): <span class="typed"><span class="type">Any</span><a id="49">Any</a></span> = {
    <span class="keyword">val</span> <span class="typed"><span class="type">scala.actors.InputChannel[a]</span><a id="27807">FutCh1</a></span> = <span class="typed"><span class="type">scala.actors.Future[a]</span><a href="#27805">ft1</a></span>.<span class="typed"><span class="type">=&gt; scala.actors.InputChannel[a]</span><a href="#27204">ch</a></span>; <span class="keyword">val</span> <span class="typed"><span class="type">scala.actors.InputChannel[b]</span><a id="27808">FutCh2</a></span> = <span class="typed"><span class="type">scala.actors.Future[b]</span><a href="#27806">ft2</a></span>.<span class="typed"><span class="type">=&gt; scala.actors.InputChannel[b]</span><a href="#27204">ch</a></span>
    <span class="typed"><span class="type">object scala.actors.Actor</span><a href="Actor.scala.html#7908">Actor</a></span>.<span class="typed"><span class="type">(PartialFunction[Any,Any])Any</span><a href="Actor.scala.html#27720">receive</a></span> <span class="typed"><span class="type">Any</span><a href="#27812">{</a></span>
      <span class="typed"><span class="type">Any</span><span class="keyword">case</span></span> <span class="typed"><span class="type">scala.actors.InputChannel[a]</span><a href="#27807">FutCh1</a></span> <a id="1">!</a> <span class="typed"><span class="type">Any</span><a id="27854">arg1</a></span> =&gt; <span class="typed"><span class="type">Any</span><a href="#27854">arg1</a></span>
      <span class="typed"><span class="type">Any</span><span class="keyword">case</span></span> <span class="typed"><span class="type">scala.actors.InputChannel[b]</span><a href="#27808">FutCh2</a></span> <a id="1">!</a> <span class="typed"><span class="type">Any</span><a id="27855">arg2</a></span> =&gt; <span class="typed"><span class="type">Any</span><a href="#27855">arg2</a></span>
    }
  }

  <span class="comment">/**
   * &lt;p&gt;
   *   Awaits all futures returning an option containing a list of replies,
   *   or timeouts returning &lt;code&gt;None&lt;/code&gt;.
   * &lt;/p&gt;
   * &lt;p&gt;
   *   Note that some of the futures might already have been awaited.
   * &lt;/p&gt;
   */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">(Long,scala.actors.Future[Any]*)List[Option[Any]]</span><a id="27237">awaitAll</a></span>(<span class="typed"><span class="type">Long</span><a id="27856">timeout</a></span>: <span class="typed"><span class="type">Long</span><a id="2397">Long</a></span>, <span class="typed"><span class="type">scala.actors.Future[Any]*</span><a id="27857">fts</a></span>: <span class="typed"><span class="type">scala.actors.Future[Any]*</span><a id="2739">Future</a></span>[Any]*): <span class="typed"><span class="type">List[Option[Any]]</span><a href="../List.scala.html#524">List</a></span>[Option[Any]] = {
    <span class="keyword">val</span> <span class="typed"><span class="type">scala.actors.Actor</span><a id="27858">thisActor</a></span> = <span class="typed"><span class="type">object scala.actors.Actor</span><a href="Actor.scala.html#7908">Actor</a></span>.<span class="typed"><span class="type">=&gt; scala.actors.Actor</span><a href="Actor.scala.html#27712">self</a></span>
    <span class="typed"><span class="type">object scala.actors.Actor</span><a href="Actor.scala.html#7908">Actor</a></span>.<span class="typed"><span class="type">=&gt; java.util.Timer</span><a href="Actor.scala.html#27710">timer</a></span>.<span class="typed"><span class="type">(java.util.TimerTask,Long)Unit</span><a id="27874">schedule</a></span>(<span class="typed"><span class="type">template $anon extends java.util.TimerTask</span><a id="27937" class="keyword">new</a></span> java.util.<span class="typed"><span class="type">java.util.TimerTask</span><a id="5252">TimerTask</a></span> {
      <span class="keyword">def</span> <span class="typed"><span class="type">()Unit</span><a id="27939">run</a></span>() { <span class="typed"><span class="type">scala.actors.Actor</span><a href="#27858">thisActor</a></span> <span class="typed"><span class="type">(Any)Unit</span><a href="Actor.scala.html#27642">!</a></span> <span class="typed"><span class="type">object scala.actors.TIMEOUT</span><a href="Actor.scala.html#8157">TIMEOUT</a></span> }
    }, <span class="typed"><span class="type">Long</span><a href="#27856">timeout</a></span>)

    <span class="keyword">var</span> <span class="typed"><span class="type">scala.collection.mutable.Map[Int,Option[Any]]</span><a id="27859">resultsMap</a></span>: collection.mutable.<span class="typed"><span class="type">scala.collection.mutable.Map[Int,Option[Any]]</span><a href="../collection/mutable/Map.scala.html#11125">Map</a></span>[Int, Option[Any]] = <span class="typed"><span class="type">scala.collection.mutable.HashMap[Int,Option[Any]]</span><span class="keyword">new</span></span> collection.mutable.<span class="typed"><span class="type">scala.collection.mutable.HashMap[Int,Option[Any]]</span><a href="../collection/mutable/HashMap.scala.html#11326">HashMap</a></span>[Int, Option[Any]]

    <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="27860">cnt</a></span> = <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>
    <span class="keyword">val</span> <span class="typed"><span class="type">Seq[(Int, scala.actors.Future[Any])]</span><a id="27861">mappedFts</a></span> = <span class="typed"><span class="type">scala.actors.Future[Any]*</span><a href="#27857">fts</a></span>.<span class="typed"><span class="type">((scala.actors.Future[Any]) =&gt; (Int, scala.actors.Future[Any]))Seq[(Int, scala.actors.Future[Any])]</span><a href="../Seq.scala.html#17169">map</a></span>(<span class="typed"><span class="type">scala.actors.Future[Any]</span><a id="27945">ft</a></span> =&gt;
      <span class="typed"><span class="type">(Int,scala.actors.Future[Any])(Int, scala.actors.Future[Any])</span><a href="../Predef.scala.html#27947">Pair</a></span>({<span class="typed"><span class="type">Int</span><a href="#27860">cnt</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3145">+=</a></span><span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>; <span class="typed"><span class="type">Int</span><a href="#27860">cnt</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span><span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>}, <span class="typed"><span class="type">scala.actors.Future[Any]</span><a href="#27945">ft</a></span>))

    <span class="keyword">val</span> <span class="typed"><span class="type">Seq[(Int, scala.actors.Future[Any])]</span><a id="27862">unsetFts</a></span> = <span class="typed"><span class="type">Seq[(Int, scala.actors.Future[Any])]</span><a href="#27861">mappedFts</a></span>.<span class="typed"><span class="type">(((Int, scala.actors.Future[Any])) =&gt; Boolean)Seq[(Int, scala.actors.Future[Any])]</span><a href="../Seq.scala.html#17175">filter</a></span>((<span class="typed"><span class="type">(Int, scala.actors.Future[Any])</span><a id="27989">p</a></span>: <span class="typed"><span class="type">(Int, scala.actors.Future[Any])</span><a href="../Tuple2.scala.html#1376">Pair</a></span>[Int, Future[Any]]) =&gt; {
      <span class="typed"><span class="type">Boolean</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">(Int, scala.actors.Future[Any])</span><a href="#27989">p</a></span>.<span class="typed"><span class="type">=&gt; scala.actors.Future[Any]</span><a href="../Tuple2.scala.html#19163">_2</a></span>.<span class="typed"><span class="type">=&gt; Boolean</span><a href="#27210">isSet</a></span>) { <span class="typed"><span class="type">scala.collection.mutable.Map[Int,Option[Any]]</span><a href="#27859">resultsMap</a></span>(<span class="typed"><span class="type">(Int, scala.actors.Future[Any])</span><a href="#27989">p</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a href="../Tuple2.scala.html#19161">_1</a></span>) = <span class="typed"><span class="type">(Any)Some[Any]</span><a href="../Option.scala.html#19455">Some</a></span>(<span class="typed"><span class="type">(Int, scala.actors.Future[Any])</span><a href="#27989">p</a></span>.<span class="typed"><span class="type">()Any</span><a href="../Function0.scala.html#21123">_2</a></span>()); <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span> }
      <span class="keyword">else</span> { <span class="typed"><span class="type">scala.collection.mutable.Map[Int,Option[Any]]</span><a href="#27859">resultsMap</a></span>(<span class="typed"><span class="type">(Int, scala.actors.Future[Any])</span><a href="#27989">p</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a href="../Tuple2.scala.html#19161">_1</a></span>) = <span class="typed"><span class="type">object None</span><a href="../Option.scala.html#534">None</a></span>; <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span> }
    })

    <span class="keyword">val</span> <span class="typed"><span class="type">Seq[PartialFunction[Any,(Int, Any)]]</span><a id="27863">partFuns</a></span> = <span class="typed"><span class="type">Seq[(Int, scala.actors.Future[Any])]</span><a href="#27862">unsetFts</a></span>.<span class="typed"><span class="type">(((Int, scala.actors.Future[Any])) =&gt; PartialFunction[Any,(Int, Any)])Seq[PartialFunction[Any,(Int, Any)]]</span><a href="../Seq.scala.html#17169">map</a></span>((<span class="typed"><span class="type">(Int, scala.actors.Future[Any])</span><a id="27993">p</a></span>: <span class="typed"><span class="type">(Int, scala.actors.Future[Any])</span><a href="../Tuple2.scala.html#1376">Pair</a></span>[Int, Future[Any]]) =&gt; {
      <span class="keyword">val</span> <span class="typed"><span class="type">scala.actors.InputChannel[Any]</span><a id="27994">FutCh</a></span> = <span class="typed"><span class="type">(Int, scala.actors.Future[Any])</span><a href="#27993">p</a></span>.<span class="typed"><span class="type">=&gt; scala.actors.Future[Any]</span><a href="../Tuple2.scala.html#19163">_2</a></span>.<span class="typed"><span class="type">=&gt; scala.actors.InputChannel[Any]</span><a href="#27204">ch</a></span>
      <span class="keyword">val</span> <span class="typed"><span class="type">PartialFunction[Any,(Int, Any)]</span><a id="27995">singleCase</a></span>: <span class="typed"><span class="type">PartialFunction[Any,(Int, Any)]</span><a href="../PartialFunction.scala.html#1295">PartialFunction</a></span>[Any, Pair[Int, Any]] = <span class="typed"><span class="type">(Int, Any)</span><a href="#27997">{</a></span>
        <span class="typed"><span class="type">(Int, Any)</span><span class="keyword">case</span></span> <span class="typed"><span class="type">scala.actors.InputChannel[Any]</span><a href="#27994">FutCh</a></span> <a id="1">!</a> <span class="typed"><span class="type">Any</span><a id="27998">any</a></span> =&gt; <span class="typed"><span class="type">(Int,Any)(Int, Any)</span><a href="../Predef.scala.html#27947">Pair</a></span>(<span class="typed"><span class="type">(Int, scala.actors.Future[Any])</span><a href="#27993">p</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a href="../Tuple2.scala.html#19161">_1</a></span>, <span class="typed"><span class="type">Any</span><a href="#27998">any</a></span>)
      }
      <span class="typed"><span class="type">PartialFunction[Any,(Int, Any)]</span><a href="#27995">singleCase</a></span>
    })

    <span class="keyword">def</span> <span class="typed"><span class="type">(Seq[PartialFunction[Any,(Int, Any)]])Unit</span><a id="27864">awaitWith</a></span>(<span class="typed"><span class="type">Seq[PartialFunction[Any,(Int, Any)]]</span><a id="28001">partFuns</a></span>: <span class="typed"><span class="type">Seq[PartialFunction[Any,(Int, Any)]]</span><a href="../Seq.scala.html#761">Seq</a></span>[PartialFunction[Any, Pair[Int, Any]]]) {
      <span class="keyword">val</span> <span class="typed"><span class="type">PartialFunction[Any,Unit]</span><a id="28002">reaction</a></span>: <span class="typed"><span class="type">PartialFunction[Any,Unit]</span><a href="../PartialFunction.scala.html#1295">PartialFunction</a></span>[Any, Unit] = <span class="typed"><span class="type">template $anon extends java.lang.Object with PartialFunction[Any,Unit]</span><a id="28003" class="keyword">new</a></span> <span class="typed"><span class="type">PartialFunction[Any,Unit]</span><a href="../PartialFunction.scala.html#1295">PartialFunction</a></span>[Any, Unit] {
        <span class="keyword">def</span> <span class="typed"><span class="type">(Any)Boolean</span><a id="28005">isDefinedAt</a></span>(<span class="typed"><span class="type">Any</span><a id="28009">msg</a></span>: <span class="typed"><span class="type">Any</span><a id="49">Any</a></span>) = <span class="typed"><span class="type">Any</span><a href="#28009">msg</a></span> <span class="typed"><span class="type">Boolean</span><span class="keyword">match</span></span> {
          <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object scala.actors.TIMEOUT</span><a href="Actor.scala.html#8157">TIMEOUT</a></span> =&gt; <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>
          <span class="typed"><span class="type">Boolean</span><span class="keyword">case</span></span> _ =&gt; <span class="typed"><span class="type">Seq[PartialFunction[Any,(Int, Any)]]</span><a href="#28001">partFuns</a></span> <span class="typed"><span class="type">((PartialFunction[Any,(Int, Any)]) =&gt; Boolean)Boolean</span><a href="../Iterable.scala.html#17330">exists</a></span> (<span class="typed"><span class="type">PartialFunction[Any,(Int, Any)]</span><a href="#28013">_</a></span> <span class="typed"><span class="type">(Any)Boolean</span><a href="../PartialFunction.scala.html#17289">isDefinedAt</a></span> <span class="typed"><span class="type">Any</span><a href="#28009">msg</a></span>)
        }
        <span class="keyword">def</span> <span class="typed"><span class="type">(Any)Unit</span><a id="28006">apply</a></span>(<span class="typed"><span class="type">Any</span><a id="28014">msg</a></span>: <span class="typed"><span class="type">Any</span><a id="49">Any</a></span>): <span class="typed"><span class="type">Unit</span><a id="2167">Unit</a></span> = <span class="typed"><span class="type">Any</span><a href="#28014">msg</a></span> <span class="typed"><span class="type">Unit</span><span class="keyword">match</span></span> {
          <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object scala.actors.TIMEOUT</span><a href="Actor.scala.html#8157">TIMEOUT</a></span> =&gt; <span class="comment">// do nothing</span>
          <span class="typed"><span class="type">Unit</span><span class="keyword">case</span></span> _ =&gt; {
            <span class="keyword">val</span> <span class="typed"><span class="type">Option[PartialFunction[Any,(Int, Any)]]</span><a id="28015">pfOpt</a></span> = <span class="typed"><span class="type">Seq[PartialFunction[Any,(Int, Any)]]</span><a href="#28001">partFuns</a></span> <span class="typed"><span class="type">((PartialFunction[Any,(Int, Any)]) =&gt; Boolean)Option[PartialFunction[Any,(Int, Any)]]</span><a href="../Iterable.scala.html#17331">find</a></span> (<span class="typed"><span class="type">PartialFunction[Any,(Int, Any)]</span><a href="#28023">_</a></span> <span class="typed"><span class="type">(Any)Boolean</span><a href="../PartialFunction.scala.html#17289">isDefinedAt</a></span> <span class="typed"><span class="type">Any</span><a href="#28014">msg</a></span>)
            <span class="keyword">val</span> <span class="typed"><span class="type">PartialFunction[Any,(Int, Any)]</span><a id="28016">pf</a></span> = <span class="typed"><span class="type">Option[PartialFunction[Any,(Int, Any)]]</span><a href="#28015">pfOpt</a></span>.<span class="typed"><span class="type">=&gt; PartialFunction[Any,(Int, Any)]</span><a href="../Option.scala.html#18270">get</a></span> <span class="comment">// succeeds always</span>
            <span class="keyword">val</span> <span class="typed"><span class="type">(Int, Any)</span><a href="../Predef.scala.html#27952">Pair</a></span>(<span class="typed"><span class="type">Int</span><span id="28034"><a href="../Tuple2.scala.html#19161" id="28018">idx</a></span></span>, <span class="typed"><span class="type">Any</span><span id="28035"><a href="../Tuple2.scala.html#19163" id="28019">subres</a></span></span>) = <span class="typed"><span class="type">(Any)(Int, Any)</span><a href="../Function1.scala.html#17300">pf</a></span>(<span class="typed"><span class="type">Any</span><a href="#28014">msg</a></span>)
            <span class="typed"><span class="type">scala.collection.mutable.Map[Int,Option[Any]]</span><a href="#27859">resultsMap</a></span>(<span class="typed"><span class="type">Int</span><a href="#28018">idx</a></span>) = <span class="typed"><span class="type">(Any)Some[Any]</span><a href="../Option.scala.html#19455">Some</a></span>(<span class="typed"><span class="type">Any</span><a href="#28019">subres</a></span>)

            <span class="keyword">val</span> <span class="typed"><span class="type">Seq[PartialFunction[Any,(Int, Any)]]</span><a id="28020">partFunsRest</a></span> = <span class="typed"><span class="type">Seq[PartialFunction[Any,(Int, Any)]]</span><a href="#28001">partFuns</a></span> <span class="typed"><span class="type">((PartialFunction[Any,(Int, Any)]) =&gt; Boolean)Seq[PartialFunction[Any,(Int, Any)]]</span><a href="../Seq.scala.html#17175">filter</a></span> (<span class="typed"><span class="type">PartialFunction[Any,(Int, Any)]</span><a href="#28040">_</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5791">!=</a></span> <span class="typed"><span class="type">PartialFunction[Any,(Int, Any)]</span><a href="#28016">pf</a></span>)
            <span class="comment">// wait on rest of partial functions</span>
            <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Seq[PartialFunction[Any,(Int, Any)]]</span><a href="#28020">partFunsRest</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a href="../Seq.scala.html#17146">length</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&gt;</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>)
              <span class="typed"><span class="type">(Seq[PartialFunction[Any,(Int, Any)]])Unit</span><a href="#27864">awaitWith</a></span>(<span class="typed"><span class="type">Seq[PartialFunction[Any,(Int, Any)]]</span><a href="#28020">partFunsRest</a></span>)
          }
        }
      }
      <span class="typed"><span class="type">object scala.actors.Actor</span><a href="Actor.scala.html#7908">Actor</a></span>.<span class="typed"><span class="type">(PartialFunction[Any,Unit])Unit</span><a href="Actor.scala.html#27720">receive</a></span>(<span class="typed"><span class="type">PartialFunction[Any,Unit]</span><a href="#28002">reaction</a></span>)
    }

    <span class="typed"><span class="type">(Seq[PartialFunction[Any,(Int, Any)]])Unit</span><a href="#27864">awaitWith</a></span>(<span class="typed"><span class="type">Seq[PartialFunction[Any,(Int, Any)]]</span><a href="#27863">partFuns</a></span>)

    <span class="keyword">var</span> <span class="typed"><span class="type">List[Option[Any]]</span><a id="27865">results</a></span>: <span class="typed"><span class="type">List[Option[Any]]</span><a href="../List.scala.html#524">List</a></span>[Option[Any]] = <span class="typed"><span class="type">object Nil</span><a href="../List.scala.html#333">Nil</a></span>
    <span class="keyword">val</span> <span class="typed"><span class="type">Int</span><a id="27866">size</a></span> = <span class="typed"><span class="type">scala.collection.mutable.Map[Int,Option[Any]]</span><a href="#27859">resultsMap</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a href="../collection/Map.scala.html#21385">size</a></span>
    <span class="keyword">for</span> (<span class="typed"><span class="type">((Int) =&gt; Unit)Unit</span><a href="../Range.scala.html#25001" id="28055">i</a></span> &lt;- <span class="typed"><span class="type">implicit scala.Predef.intWrapper : (Int)scala.runtime.RichInt</span><a href="../Predef.scala.html#13511" class="int">0</a></span> <span class="typed"><span class="type">(Int)Range</span><a href="../runtime/RichInt.scala.html#19402">until</a></span> <span class="typed"><span class="type">Int</span><a href="#27866">size</a></span>) {
      <span class="typed"><span class="type">List[Option[Any]]</span><a href="#27865">results</a></span> = <span class="typed"><span class="type">(Int)Option[Any]</span><a href="../collection/Map.scala.html#21391">resultsMap</a></span>(<span class="typed"><span class="type">Int</span><a href="#27866">size</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span> <span class="typed"><span class="type">Int</span><a href="#28055">i</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>) <span class="typed"><span class="type">(Option[Any])List[Option[Any]]</span><a href="../List.scala.html#20872">::</a></span> <span class="typed"><span class="type">List[Option[Any]]</span><a href="#27865">results</a></span>
    }
    <span class="typed"><span class="type">List[Option[Any]]</span><a href="#27865">results</a></span>
  }
}

        </pre>
    </body>
</html>