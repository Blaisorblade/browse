<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/util/automata/Inclusion.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style">
    </head>
    <body>
        <pre>
/*                     __                                               *\
**     ________ ___   / /  ___     Scala API                            **
**    / __/ __// _ | / /  / _ |    (c) 2003-2009, LAMP/EPFL             **
**  __\ \/ /__/ __ |/ /__/ __ |    http://scala-lang.org/               **
** /____/\___/_/ |_/____/_/ | |                                         **
**                          |/                                          **
\*                                                                      */

// $Id: Inclusion.scala 16893 2009-01-13 13:09:22Z cunei $


<span class="keyword">package</span> scala.util.automata


/** A fast test of language inclusion between minimal automata.
 *  inspired by the AMoRE automata library
 *
 *  @author Burak Emir
 *  @version 1.0
 */
<span class="keyword">trait</span> <a title="trait Inclusion[A &lt;: AnyRef] extends java.lang.Object with ScalaObject" id="14035">Inclusion</a>[<a title="&gt;: Nothing &lt;: AnyRef" id="15034">A</a> &lt;: <a id="1">AnyRef</a>] <a href="../../ScalaObject.scala.html#957" title="ScalaObject">{</a>

  <span class="keyword">val</span> <a title="=&gt; Seq[A]" id="176964">labels</a>: <a href="../../collection/Sequence.scala.html#4346" title="Seq[A]">Seq</a>[A]

  /** Returns true if dfa1 is included in dfa2.
   *
   *  @param dfa1 ...
   *  @param dfa2 ...
   */
  <span class="keyword">def</span> <a title="(dfa1: scala.util.automata.DetWordAutom[A],dfa2: scala.util.automata.DetWordAutom[A])Boolean" id="176965">inclusion</a>(<a title="scala.util.automata.DetWordAutom[A]" id="176968">dfa1</a>: <a href="DetWordAutom.scala.html#14056" title="scala.util.automata.DetWordAutom[A]">DetWordAutom</a>[A], <a title="scala.util.automata.DetWordAutom[A]" id="176969">dfa2</a>: <a href="DetWordAutom.scala.html#14056" title="scala.util.automata.DetWordAutom[A]">DetWordAutom</a>[A]) = {
    
    <span class="keyword">def</span> <a title="(q1: Int,q2: Int)Int" id="176972">encode</a>(<a title="Int" id="176983">q1</a>: <span title="Int">Int</span>, <a title="Int" id="176984">q2</a>: <span title="Int">Int</span>) = <span title="(x$1: Int)Int" class="int">1</span> <span title="(x$1: Int)Int">+</span> <a href="#176983" title="Int">q1</a> + <a href="#176984" title="(x$1: Int)Int">q2</a> * <a href="#176968" title="scala.util.automata.DetWordAutom[A]">dfa1</a>.<a href="DetWordAutom.scala.html#56246" title="=&gt; Int">nstates</a>
    <span class="keyword">def</span> <a title="(c: Int)Int" id="176973">decode2</a>(<a title="Int" id="177003">c</a>: <span title="Int">Int</span>) = <a title="(x$1: Int)Int" id="2968">(</a><a href="#177003" title="(x$1: Int)Int">c</a>-<span title="Int(1)" class="int">1</span>) / (<a href="#176968" title="scala.util.automata.DetWordAutom[A]">dfa1</a>.<a href="DetWordAutom.scala.html#56246" title="=&gt; Int">nstates</a>) //integer division
    <span class="keyword">def</span> <a title="(c: Int)Int" id="176974">decode1</a>(<a title="Int" id="177016">c</a>: <span title="Int">Int</span>) = <a title="(x$1: Int)Int" id="2970">(</a><a href="#177016" title="(x$1: Int)Int">c</a>-<span title="Int(1)" class="int">1</span>) % (<a href="#176968" title="scala.util.automata.DetWordAutom[A]">dfa1</a>.<a href="DetWordAutom.scala.html#56246" title="=&gt; Int">nstates</a>)
 
    <span class="keyword">var</span> <a title="Int" id="176975">q1</a> = <span title="Int(0)" class="int">0</span> //dfa1.initstate; // == 0
    <span class="keyword">var</span> <a title="Int" id="176976">q2</a> = <span title="Int(0)" class="int">0</span> //dfa2.initstate; // == 0
    
    <span class="keyword">val</span> <a title="Int" id="176977">max</a> = <span title="(x$1: Int)Int" class="int">1</span> + <a href="#176968" title="scala.util.automata.DetWordAutom[A]">dfa1</a>.<a href="DetWordAutom.scala.html#56246" title="(x$1: Int)Int">nstates</a> * <a href="#176969" title="scala.util.automata.DetWordAutom[A]">dfa2</a>.<a href="DetWordAutom.scala.html#56246" title="=&gt; Int">nstates</a>
    <span class="keyword">val</span> <a title="Array[Int]" id="176978">mark</a> = <span title="Array[Int]" class="keyword">new</span> <a href="../../Array.scala.html#885" title="Array[Int]">Array</a>[Int](<a href="#176977" title="Int">max</a>)
    
    <span class="keyword">var</span> <a title="Boolean" id="176979">result</a> = <span title="Boolean(true)" class="keyword">true</span>
    <span class="keyword">var</span> <a title="Int" id="176980">current</a> = <a href="#176972" title="(q1: Int,q2: Int)Int">encode</a>(<a href="#176975" title="Int">q1</a>, <a href="#176976" title="Int">q2</a>)
    <span class="keyword">var</span> <a title="Int" id="176981">last</a> = <a href="#176980" title="Int">current</a>
    <a href="../../Array.scala.html#17717" title="(i: Int,x: Int)Unit">mark</a>(<a href="#176981" title="Int">last</a>) = <a href="#176977" title="Int">max</a> // mark (q1,q2)
    <span title="Unit" class="keyword">while</span> (<a href="#176980" title="(x$1: Int)Boolean">current</a> <span title="(x$1: Boolean)Boolean">!=</span> <span title="Int(0)" class="int">0</span> &amp;&amp; <a href="#176979" title="Boolean">result</a>) <a href="#176982" title="()Unit">{</a>
      //Console.println(&quot;current = [[&quot;+q1+&quot; &quot;+q2+&quot;]] = &quot;+current);
      <span class="keyword">for</span> (<a title="A" id="177079">letter</a> &lt;- <a href="../../collection/generic/IterableTemplate.scala.html#17287" title="(f: (A) =&gt; Unit)Unit">labels</a>) {
        <span class="keyword">val</span> <a title="Int" id="177080">r1</a> = <a href="#176968" title="scala.util.automata.DetWordAutom[A]">dfa1</a>.<a href="DetWordAutom.scala.html#56252" title="(q: Int,label: A)Int">next</a>(<a href="#176975" title="Int">q1</a>,<a href="#177079" title="A">letter</a>)
        <span class="keyword">val</span> <a title="Int" id="177081">r2</a> = <a href="#176969" title="scala.util.automata.DetWordAutom[A]">dfa2</a>.<a href="DetWordAutom.scala.html#56252" title="(q: Int,label: A)Int">next</a>(<a href="#176976" title="Int">q2</a>,<a href="#177079" title="A">letter</a>)
        <span title="Unit" class="keyword">if</span> (<a href="#176968" title="scala.util.automata.DetWordAutom[A]">dfa1</a>.<a href="DetWordAutom.scala.html#56250" title="(q: Int)Boolean">isFinal</a><span title="(x$1: Boolean)Boolean">(</span><a href="#177080" title="Int">r1</a>) &amp;&amp; <a title="=&gt; Boolean" id="2203">!</a><a href="#176969" title="scala.util.automata.DetWordAutom[A]">dfa2</a>.<a href="DetWordAutom.scala.html#56250" title="(q: Int)Boolean">isFinal</a>(<a href="#177081" title="Int">r2</a>))
	  <a href="#176979" title="Boolean">result</a> = <span title="Boolean(false)" class="keyword">false</span>
        <span class="keyword">val</span> <a title="Int" id="177082">test</a> = <a href="#176972" title="(q1: Int,q2: Int)Int">encode</a>(<a href="#177080" title="Int">r1</a>, <a href="#177081" title="Int">r2</a>)
        //Console.println(&quot;test = [[&quot;+r1+&quot; &quot;+r2+&quot;]] = &quot;+test);
        <span title="Unit" class="keyword">if</span> (<a href="../../Array.scala.html#17716" title="(i: Int)Int">mark</a><a title="(x$1: Int)Boolean" id="2950">(</a><a href="#177082" title="Int">test</a>) == <span title="Int(0)" class="int">0</span>) {
	  <a href="../../Array.scala.html#17717" title="(i: Int,x: Int)Unit">mark</a>(<a href="#176981" title="Int">last</a>) = <a href="#177082" title="Int">test</a>
	  <a href="../../Array.scala.html#17717" title="(i: Int,x: Int)Unit">mark</a>(<a href="#177082" title="Int">test</a>) = <a href="#176977" title="Int">max</a>
	  <a href="#176981" title="Int">last</a> = <a href="#177082" title="Int">test</a>
        }
      }
      <span class="keyword">val</span> <a title="Int" id="177068">ncurrent</a> = <a href="../../Array.scala.html#17716" title="(i: Int)Int">mark</a>(<a href="#176980" title="Int">current</a>)
      <span title="Unit" class="keyword">if</span>( <a href="#177068" title="(x$1: Int)Boolean">ncurrent</a> != <a href="#176977" title="Int">max</a> ) {
        <a href="#176975" title="Int">q1</a> = <a href="#176974" title="(c: Int)Int">decode1</a>(<a href="#177068" title="Int">ncurrent</a>)
        <a href="#176976" title="Int">q2</a> = <a href="#176973" title="(c: Int)Int">decode2</a>(<a href="#177068" title="Int">ncurrent</a>)
        <a href="#176980" title="Int">current</a> = <a href="#177068" title="Int">ncurrent</a>
      } <span class="keyword">else</span> {
        <a href="#176980" title="Int">current</a> = <span title="Int(0)" class="int">0</span>
      }
    }
    <a href="#176979" title="Boolean">result</a>
  }
}

        </pre>
    </body>
</html>