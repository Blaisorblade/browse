<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/util/parsing/combinator/RegexParsers.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style">
    </head>
    <body>
        <pre>
/*                     __                                               *\
**     ________ ___   / /  ___     Scala API                            **
**    / __/ __// _ | / /  / _ |    (c) 2006-2009, LAMP/EPFL             **
**  __\ \/ /__/ __ |/ /__/ __ |    http://scala-lang.org/               **
** /____/\___/_/ |_/____/_/ | |                                         **
**                          |/                                          **
\*                                                                      */

// $Id: RegexParsers.scala 16893 2009-01-13 13:09:22Z cunei $

<span class="keyword">package</span> scala.util.parsing.combinator

<span class="keyword">import</span> java.util.regex.Pattern
<span class="keyword">import</span> scala.util.matching.Regex
<span class="keyword">import</span> scala.util.parsing.input._
<span class="keyword">import</span> scala.collection.immutable.PagedSeq

<span class="keyword">trait</span> <a title="trait RegexParsers extends java.lang.Object with scala.util.parsing.combinator.Parsers with ScalaObject" id="12606">RegexParsers</a> <a href="../../../ScalaObject.scala.html#969" title="ScalaObject" class="keyword">extends</a> <a href="Parsers.scala.html#12639" title="scala.util.parsing.combinator.Parsers">Parsers</a> {

  <span class="keyword">type</span> <a title="Char" id="168928">Elem</a> = <a title="Char" id="2176">Char</a>

  <span class="keyword">protected</span> <span class="keyword">val</span> <a title="scala.util.matching.Regex" id="168929">whiteSpace</a> = <a href="../../../Predef.scala.html#16471" title="implicit scala.Predef.stringWrapper : (x: String)scala.runtime.RichString" class="string">&quot;&quot;&quot;\s+&quot;&quot;&quot;</a>.<a href="../../../runtime/RichString.scala.html#18158" title="=&gt; scala.util.matching.Regex">r</a>

  <span class="keyword">def</span> <a title="=&gt; Boolean" id="168931">skipWhitespace</a> = <a href="#168929" title="=&gt; scala.util.matching.Regex">whiteSpace</a>.<a href="../../matching/Regex.scala.html#59908" title="()String">toString</a>.<a title="(x$1: Int)Boolean" id="2973">length</a> &gt; <span title="Int(0)" class="int">0</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(source: java.lang.CharSequence,offset: Int)Int" id="168932">handleWhiteSpace</a>(<a title="java.lang.CharSequence" id="269149">source</a>: java.lang.<span title="java.lang.CharSequence">CharSequence</span>, <a title="Int" id="269150">offset</a>: <span title="Int">Int</span>): <span title="Int">Int</span> =
    <span title="Int" class="keyword">if</span> (<a href="#168931" title="=&gt; Boolean">skipWhitespace</a>)
      (<a href="../../matching/Regex.scala.html#59904" title="(source: java.lang.CharSequence)Option[scala.util.matching.Regex.Match]">whiteSpace</a> findPrefixMatchOf (<a href="#269149" title="java.lang.CharSequence">source</a>.<span title="(x$1: Int,x$2: Int)java.lang.CharSequence">subSequence</span>(<a href="#269150" title="Int">offset</a>, <a href="#269149" title="java.lang.CharSequence">source</a>.<span title="()Int">length</span>))) <span title="Int" class="keyword">match</span> {
        <span title="Int" class="keyword">case</span> Some(<a title="scala.util.matching.Regex.Match" id="269159">matched</a>) =&gt; <a href="#269150" title="(x$1: Int)Int">offset</a> + <a href="#269159" title="scala.util.matching.Regex.Match">matched</a>.<a href="../../matching/Regex.scala.html#60365" title="=&gt; Int">end</a>
        <span title="Int" class="keyword">case</span> <a href="../../../Option.scala.html#472" title="object None">None</a> =&gt; <a href="#269150" title="Int">offset</a>
      }
    <span class="keyword">else</span> 
      <a href="#269150" title="Int">offset</a>

  /** A parser that matches a literal string */
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit scala.util.parsing.combinator.RegexParsers.literal : (s: String)RegexParsers.this.Parser[String]" id="168933">literal</a>(<a title="String" id="168973">s</a>: <a title="String" id="1618">String</a>): <a href="Parsers.scala.html#57512" title="RegexParsers.this.Parser[String]">Parser</a>[String] = <a href="#269191" title="RegexParsers.this.Parser[String]{ ... }" class="keyword">new</a> <a title="anonymous class $anon extends RegexParsers.this.Parser[String]" id="269191">Parser</a>[String] {
    <span class="keyword">def</span> <a title="(in: RegexParsers.this.Input)RegexParsers.this.ParseResult[String]" id="269193">apply</a>(<a title="RegexParsers.this.Input" id="269197">in</a>: <a href="../input/Reader.scala.html#9517" title="RegexParsers.this.Input">Input</a>) = {
      <span class="keyword">val</span> <a title="java.lang.CharSequence" id="269207">source</a> = <a href="#269197" title="RegexParsers.this.Input">in</a>.<a href="../input/Reader.scala.html#21995" title="=&gt; java.lang.CharSequence">source</a>
      <span class="keyword">val</span> <a title="Int" id="269208">offset</a> = <a href="#269197" title="RegexParsers.this.Input">in</a>.<a href="../input/Reader.scala.html#21996" title="=&gt; Int">offset</a>
      <span class="keyword">val</span> <a title="Int" id="269209">start</a> = <a href="#168932" title="(source: java.lang.CharSequence,offset: Int)Int">handleWhiteSpace</a>(<a href="#269207" title="java.lang.CharSequence">source</a>, <a href="#269208" title="Int">offset</a>)
      <span class="keyword">var</span> <a title="Int" id="269210">i</a> = <span title="Int(0)" class="int">0</span>
      <span class="keyword">var</span> <a title="Int" id="269211">j</a> = <a href="#269209" title="Int">start</a>
      <span title="Unit" class="keyword">while</span> (<a href="#269210" title="(x$1: Int)Boolean">i</a> <span title="(x$1: Boolean)Boolean">&lt;</span> <a href="#168973" title="String">s</a>.<span title="()Int">length</span> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> <a href="#269211" title="(x$1: Int)Boolean">j</a> &lt; <a href="#269207" title="java.lang.CharSequence">source</a>.<span title="()Int">length</span> &amp;&amp; <a href="#168973" title="String">s</a>.<a title="(x$1: Int)Char" id="6969">charAt</a><a title="(x$1: Char)Boolean" id="2729">(</a><a href="#269210" title="Int">i</a>) == <a href="#269207" title="java.lang.CharSequence">source</a>.<a title="(x$1: Int)Char" id="18108">charAt</a>(<a href="#269211" title="Int">j</a>)) <a href="#269212" title="()Unit">{</a>
        <a href="#269210" title="Int">i</a> += <span title="Int(1)" class="int">1</span>
        <a href="#269211" title="Int">j</a> += <span title="Int(1)" class="int">1</span>
      }
      <span title="RegexParsers.this.ParseResult[String]" class="keyword">if</span> (<a href="#269210" title="(x$1: Int)Boolean" id="2965">i</a> == <a href="#168973" title="String">s</a>.<span title="()Int">length</span>)
        <a href="Parsers.scala.html#125344" title="(result: java.lang.String,next: RegexParsers.this.Input)RegexParsers.this.Success[java.lang.String]">Success</a>(<a href="#269207" title="java.lang.CharSequence">source</a>.<span title="(x$1: Int,x$2: Int)java.lang.CharSequence">subSequence</span>(<a href="#269209" title="Int">start</a>, <a href="#269211" title="Int">j</a>).<span title="()java.lang.String">toString</span>, <a href="#269197" title="RegexParsers.this.Input">in</a>.<a href="../input/Reader.scala.html#21999" title="(n: Int)scala.util.parsing.input.Reader[RegexParsers.this.Elem]">drop</a>(<a href="#269211" title="(x$1: Int)Int">j</a> - <a href="#269208" title="Int">offset</a>))
      <span class="keyword">else</span> 
        <a href="Parsers.scala.html#85051" title="(msg: String,next: RegexParsers.this.Input)RegexParsers.this.Failure">Failure</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;`&quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#168973" title="String">s</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot;' expected but `&quot;)" class="string">&quot;' expected but `&quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#269197" title="RegexParsers.this.Input">in</a>.<a href="../input/Reader.scala.html#21997" title="=&gt; RegexParsers.this.Elem">first</a>+<span title="java.lang.String(&quot;' found&quot;)" class="string">&quot;' found&quot;</span>, <a href="#269197" title="RegexParsers.this.Input">in</a>.<a href="../input/Reader.scala.html#21999" title="(n: Int)scala.util.parsing.input.Reader[RegexParsers.this.Elem]">drop</a>(<a href="#269209" title="(x$1: Int)Int">start</a> - <a href="#269208" title="Int">offset</a>))
    }
  }

  /** A parser that matches a regex string */
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit scala.util.parsing.combinator.RegexParsers.regex : (r: scala.util.matching.Regex)RegexParsers.this.Parser[String]" id="168934">regex</a>(<a title="scala.util.matching.Regex" id="168971">r</a>: <a href="../../matching/Regex.scala.html#13007" title="scala.util.matching.Regex">Regex</a>): <a href="Parsers.scala.html#57512" title="RegexParsers.this.Parser[String]">Parser</a>[String] = <a href="#269409" title="RegexParsers.this.Parser[String]{ ... }" class="keyword">new</a> <a title="anonymous class $anon extends RegexParsers.this.Parser[String]" id="269409">Parser</a>[String] {
    <span class="keyword">def</span> <a title="(in: RegexParsers.this.Input)RegexParsers.this.ParseResult[String]" id="269411">apply</a>(<a title="RegexParsers.this.Input" id="269415">in</a>: <a href="../input/Reader.scala.html#9517" title="RegexParsers.this.Input">Input</a>) = {
      <span class="keyword">val</span> <a title="java.lang.CharSequence" id="269425">source</a> = <a href="#269415" title="RegexParsers.this.Input">in</a>.<a href="../input/Reader.scala.html#21995" title="=&gt; java.lang.CharSequence">source</a>
      <span class="keyword">val</span> <a title="Int" id="269426">offset</a> = <a href="#269415" title="RegexParsers.this.Input">in</a>.<a href="../input/Reader.scala.html#21996" title="=&gt; Int">offset</a>
      <span class="keyword">val</span> <a title="Int" id="269427">start</a> = <a href="#168932" title="(source: java.lang.CharSequence,offset: Int)Int">handleWhiteSpace</a>(<a href="#269425" title="java.lang.CharSequence">source</a>, <a href="#269426" title="Int">offset</a>)
      (<a href="../../matching/Regex.scala.html#59904" title="(source: java.lang.CharSequence)Option[scala.util.matching.Regex.Match]">r</a> findPrefixMatchOf (<a href="#269425" title="java.lang.CharSequence">source</a>.<span title="(x$1: Int,x$2: Int)java.lang.CharSequence">subSequence</span>(<a href="#269427" title="Int">start</a>, <a href="#269425" title="java.lang.CharSequence">source</a>.<span title="()Int">length</span>))) <span title="RegexParsers.this.ParseResult[String]" class="keyword">match</span> {
        <span title="RegexParsers.this.Success[java.lang.String]" class="keyword">case</span> Some(<a title="scala.util.matching.Regex.Match" id="269437">matched</a>) =&gt;
          <a href="Parsers.scala.html#125344" title="(result: java.lang.String,next: RegexParsers.this.Input)RegexParsers.this.Success[java.lang.String]">Success</a>(<a href="#269425" title="java.lang.CharSequence">source</a>.<span title="(x$1: Int,x$2: Int)java.lang.CharSequence">subSequence</span>(<a href="#269427" title="Int">start</a>, <a href="#269427" title="(x$1: Int)Int">start</a> + <a href="#269437" title="scala.util.matching.Regex.Match">matched</a>.<a href="../../matching/Regex.scala.html#60365" title="=&gt; Int">end</a>).<span title="()java.lang.String">toString</span>, 
                  <a href="#269415" title="RegexParsers.this.Input">in</a>.<a href="../input/Reader.scala.html#21999" title="(n: Int)scala.util.parsing.input.Reader[RegexParsers.this.Elem]">drop</a>(<a href="#269427" title="(x$1: Int)Int">start</a> <span title="(x$1: Int)Int">+</span> <a href="#269437" title="scala.util.matching.Regex.Match">matched</a>.<a href="../../matching/Regex.scala.html#60365" title="=&gt; Int">end</a> - <a href="#269426" title="Int">offset</a>))
        <span title="RegexParsers.this.Failure" class="keyword">case</span> <a href="../../../Option.scala.html#472" title="object None">None</a> =&gt;
          <a href="Parsers.scala.html#85051" title="(msg: String,next: RegexParsers.this.Input)RegexParsers.this.Failure">Failure</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;string matching regex `&quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#168971" title="scala.util.matching.Regex">r</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot;' expected but `&quot;)" class="string">&quot;' expected but `&quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#269415" title="RegexParsers.this.Input">in</a>.<a href="../input/Reader.scala.html#21997" title="=&gt; RegexParsers.this.Elem">first</a>+<span title="java.lang.String(&quot;' found&quot;)" class="string">&quot;' found&quot;</span>, <a href="#269415" title="RegexParsers.this.Input">in</a>.<a href="../input/Reader.scala.html#21999" title="(n: Int)scala.util.parsing.input.Reader[RegexParsers.this.Elem]">drop</a>(<a href="#269427" title="(x$1: Int)Int">start</a> - <a href="#269426" title="Int">offset</a>))
      }
    }
  }

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="[T](p: RegexParsers.this.Parser[T])RegexParsers.this.Parser[T]" id="168935">phrase</a>[<a title="&gt;: Nothing &lt;: Any" id="168937">T</a>](<a title="RegexParsers.this.Parser[T]" id="203511">p</a>: <a href="Parsers.scala.html#57512" title="RegexParsers.this.Parser[T]">Parser</a>[T]): <a href="Parsers.scala.html#57512" title="RegexParsers.this.Parser[T]">Parser</a>[T] =
    <a href="#274277" title="[T](p: RegexParsers.this.Parser[T])RegexParsers.this.Parser[T]" class="keyword">super</a>.<a title="[T](p: RegexParsers.this.Parser[T])RegexParsers.this.Parser[T]" id="274277">phrase</a>(<a href="Parsers.scala.html#57697" title="(p: =&gt; RegexParsers.this.Parser[Option[String]])RegexParsers.this.Parser[T]">p</a> &lt;~ <a href="Parsers.scala.html#57579" title="(p: =&gt; RegexParsers.this.Parser[String])RegexParsers.this.Parser[Option[String]]">opt</a>(<a href="../../../Predef.scala.html#16471" title="implicit scala.Predef.stringWrapper : (x: String)scala.runtime.RichString" class="string">&quot;&quot;&quot;\z&quot;&quot;&quot;</a>.<a href="#168934" title="implicit scala.util.parsing.combinator.RegexParsers.regex : (r: scala.util.matching.Regex)RegexParsers.this.Parser[String]">r</a>))

  /** Parse some prefix of reader `in' with parser `p' */
  <span class="keyword">def</span> <a title="[T](p: RegexParsers.this.Parser[T],in: scala.util.parsing.input.Reader[Char])RegexParsers.this.ParseResult[T]" id="168938">parse</a>[<a title="&gt;: Nothing &lt;: Any" id="168940">T</a>](<a title="RegexParsers.this.Parser[T]" id="269594">p</a>: <a href="Parsers.scala.html#57512" title="RegexParsers.this.Parser[T]">Parser</a>[T], <a title="scala.util.parsing.input.Reader[Char]" id="269595">in</a>: <a href="../input/Reader.scala.html#9517" title="scala.util.parsing.input.Reader[Char]">Reader</a>[Char]): <a href="Parsers.scala.html#57488" title="RegexParsers.this.ParseResult[T]">ParseResult</a>[T] = 
    <a href="Parsers.scala.html#57681" title="(in: RegexParsers.this.Input)RegexParsers.this.ParseResult[T]">p</a>(<a href="#269595" title="scala.util.parsing.input.Reader[Char]">in</a>)

  /** Parse some prefix of character sequence `in' with parser `p' */
  <span class="keyword">def</span> <a title="[T](p: RegexParsers.this.Parser[T],in: java.lang.CharSequence)RegexParsers.this.ParseResult[T]" id="168941">parse</a>[<a title="&gt;: Nothing &lt;: Any" id="168943">T</a>](<a title="RegexParsers.this.Parser[T]" id="269613">p</a>: <a href="Parsers.scala.html#57512" title="RegexParsers.this.Parser[T]">Parser</a>[T], <a title="java.lang.CharSequence" id="269614">in</a>: java.lang.<span title="java.lang.CharSequence">CharSequence</span>): <a href="Parsers.scala.html#57488" title="RegexParsers.this.ParseResult[T]">ParseResult</a>[T] = 
    <a href="Parsers.scala.html#57681" title="(in: RegexParsers.this.Input)RegexParsers.this.ParseResult[T]">p</a>(<a href="../input/CharSequenceReader.scala.html#66632" title="(source: java.lang.CharSequence)scala.util.parsing.input.CharSequenceReader" class="keyword">new</a> <a href="../input/CharSequenceReader.scala.html#9520" title="scala.util.parsing.input.CharSequenceReader">CharSequenceReader</a>(<a href="#269614" title="java.lang.CharSequence">in</a>))
  
  /** Parse some prefix of reader `in' with parser `p' */
  <span class="keyword">def</span> <a title="[T](p: RegexParsers.this.Parser[T],in: java.io.Reader)RegexParsers.this.ParseResult[T]" id="168944">parse</a>[<a title="&gt;: Nothing &lt;: Any" id="168946">T</a>](<a title="RegexParsers.this.Parser[T]" id="269636">p</a>: <a href="Parsers.scala.html#57512" title="RegexParsers.this.Parser[T]">Parser</a>[T], <a title="java.io.Reader" id="269637">in</a>: java.io.<span title="java.io.Reader">Reader</span>): <a href="Parsers.scala.html#57488" title="RegexParsers.this.ParseResult[T]">ParseResult</a>[T] =
    <a href="Parsers.scala.html#57681" title="(in: RegexParsers.this.Input)RegexParsers.this.ParseResult[T]">p</a>(<a href="../input/PagedSeqReader.scala.html#22011" title="(seq: scala.collection.immutable.PagedSeq[Char])scala.util.parsing.input.PagedSeqReader" class="keyword">new</a> <a href="../input/PagedSeqReader.scala.html#9538" title="scala.util.parsing.input.PagedSeqReader">PagedSeqReader</a>(<a href="../../../collection/immutable/PagedSeq.scala.html#9346" title="object scala.collection.immutable.PagedSeq">PagedSeq</a>.<a href="../../../collection/immutable/PagedSeq.scala.html#22071" title="(source: java.io.Reader)scala.collection.immutable.PagedSeq[Char]">fromReader</a>(<a href="#269637" title="java.io.Reader">in</a>)))

  /** Parse all of reader `in' with parser `p' */
  <span class="keyword">def</span> <a title="[T](p: RegexParsers.this.Parser[T],in: scala.util.parsing.input.Reader[Char])RegexParsers.this.ParseResult[T]" id="168947">parseAll</a>[<a title="&gt;: Nothing &lt;: Any" id="168949">T</a>](<a title="RegexParsers.this.Parser[T]" id="269661">p</a>: <a href="Parsers.scala.html#57512" title="RegexParsers.this.Parser[T]">Parser</a>[T], <a title="scala.util.parsing.input.Reader[Char]" id="269662">in</a>: <a href="../input/Reader.scala.html#9517" title="scala.util.parsing.input.Reader[Char]">Reader</a>[Char]): <a href="Parsers.scala.html#57488" title="RegexParsers.this.ParseResult[T]">ParseResult</a>[T] =
    <a href="#168938" title="(p: RegexParsers.this.Parser[T],in: scala.util.parsing.input.Reader[Char])RegexParsers.this.ParseResult[T]">parse</a>(<a href="#168935" title="(p: RegexParsers.this.Parser[T])RegexParsers.this.Parser[T]">phrase</a>(<a href="#269661" title="RegexParsers.this.Parser[T]">p</a>), <a href="#269662" title="scala.util.parsing.input.Reader[Char]">in</a>)

  /** Parse all of reader `in' with parser `p' */
  <span class="keyword">def</span> <a title="[T](p: RegexParsers.this.Parser[T],in: java.io.Reader)RegexParsers.this.ParseResult[T]" id="168950">parseAll</a>[<a title="&gt;: Nothing &lt;: Any" id="168952">T</a>](<a title="RegexParsers.this.Parser[T]" id="269703">p</a>: <a href="Parsers.scala.html#57512" title="RegexParsers.this.Parser[T]">Parser</a>[T], <a title="java.io.Reader" id="269704">in</a>: java.io.<span title="java.io.Reader">Reader</span>): <a href="Parsers.scala.html#57488" title="RegexParsers.this.ParseResult[T]">ParseResult</a>[T] =
    <a href="#168944" title="(p: RegexParsers.this.Parser[T],in: java.io.Reader)RegexParsers.this.ParseResult[T]">parse</a>(<a href="#168935" title="(p: RegexParsers.this.Parser[T])RegexParsers.this.Parser[T]">phrase</a>(<a href="#269703" title="RegexParsers.this.Parser[T]">p</a>), <a href="#269704" title="java.io.Reader">in</a>)

  /** Parse all of character sequence `in' with parser `p' */
  <span class="keyword">def</span> <a title="[T](p: RegexParsers.this.Parser[T],in: java.lang.CharSequence)RegexParsers.this.ParseResult[T]" id="168953">parseAll</a>[<a title="&gt;: Nothing &lt;: Any" id="168955">T</a>](<a title="RegexParsers.this.Parser[T]" id="269745">p</a>: <a href="Parsers.scala.html#57512" title="RegexParsers.this.Parser[T]">Parser</a>[T], <a title="java.lang.CharSequence" id="269746">in</a>: java.lang.<span title="java.lang.CharSequence">CharSequence</span>): <a href="Parsers.scala.html#57488" title="RegexParsers.this.ParseResult[T]">ParseResult</a>[T] = 
    <a href="#168941" title="(p: RegexParsers.this.Parser[T],in: java.lang.CharSequence)RegexParsers.this.ParseResult[T]">parse</a>(<a href="#168935" title="(p: RegexParsers.this.Parser[T])RegexParsers.this.Parser[T]">phrase</a>(<a href="#269745" title="RegexParsers.this.Parser[T]">p</a>), <a href="#269746" title="java.lang.CharSequence">in</a>)
}

        </pre>
    </body>
</html>