<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/util/parsing/combinator/ImplicitConversions.scala</title>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style">
    </head>
    <body onload="initializeLinked()">
        <pre>
<span class="comment">/*                     __                                               *\
**     ________ ___   / /  ___     Scala API                            **
**    / __/ __// _ | / /  / _ |    (c) 2006-2009, LAMP/EPFL             **
**  __\ \/ /__/ __ |/ /__/ __ |                                         **
** /____/\___/_/ |_/____/_/ | |                                         **
**                          |/                                          **
\*                                                                      */</span>

<span class="comment">// $Id: ImplicitConversions.scala 16893 2009-01-13 13:09:22Z cunei $</span>

<span class="keyword">package</span> scala.util.parsing.combinator

<span class="comment">/** This object contains implicit conversions that come in handy when using the `^^' combinator 
 * {@see Parsers} to construct an AST from the concrete syntax.
 *&lt;p&gt;
 * The reason for this is that the sequential composition combinator (`~') combines its constituents
 * into a ~. When several `~'s are combined, this results in nested `~'s (to the left).
 * The `flatten*' coercions makes it easy to apply an `n'-argument function to a nested ~ of
 * depth (`n-1')&lt;/p&gt;
 *&lt;p&gt;
 * The `headOptionTailToFunList' converts a function that takes a List[A] to a function that 
 * accepts a ~[A, Option[List[A]]] (this happens when, e.g., parsing something of the following
 * shape: p ~ opt(&quot;.&quot; ~ repsep(p, &quot;.&quot;)) -- where `p' is a parser that yields an A)&lt;/p&gt;
 *
 * @author Martin Odersky, Iulian Dragos, Adriaan Moors 
 */</span>
<span class="keyword">trait</span> <span class="typed"><span class="type">trait ImplicitConversions extends java.lang.Object with ScalaObject</span><a id="7019">ImplicitConversions</a></span> { self: Parsers =&gt; 
  <span class="keyword">implicit</span> <span class="keyword">def</span> <span class="typed"><span class="type">[A, B, C]((A, B) =&gt; C)(ImplicitConversions.this.~[A,B]) =&gt; C</span><a id="67990">flatten2</a></span>[<span class="typed"><span class="type">&gt;: Nothing &lt;: Any</span><a id="67994">A</a></span>, <span class="typed"><span class="type">&gt;: Nothing &lt;: Any</span><a id="67995">B</a></span>, <span class="typed"><span class="type">&gt;: Nothing &lt;: Any</span><a id="67996">C</a></span>]         (<span class="typed"><span class="type">(A, B) =&gt; C</span><a id="68088">f</a></span>: (A, B) =&gt; C) = 
    (<span class="typed"><span class="type">ImplicitConversions.this.~[A,B]</span><a id="68091">p</a></span>: <span class="typed"><span class="type">ImplicitConversions.this.~[A,B]</span><a href="Parsers.scala.html#18090">~</a></span>[A, B]) =&gt; <span class="typed"><span class="type">ImplicitConversions.this.~[A,B]</span><a href="#68091">p</a></span> <span class="typed"><span class="type">C</span><span class="keyword">match</span></span> {<span class="typed"><span class="type">C</span><span class="keyword">case</span></span> <span class="typed"><span class="type">A</span><a id="68092">a</a></span> <a id="1">~</a> <span class="typed"><span class="type">B</span><a id="68093">b</a></span> =&gt; <span class="typed"><span class="type">(A,B)C</span><a href="../../../Function2.scala.html#20399">f</a></span>(<span class="typed"><span class="type">A</span><a href="#68092">a</a></span>, <span class="typed"><span class="type">B</span><a href="#68093">b</a></span>)}
  <span class="keyword">implicit</span> <span class="keyword">def</span> <span class="typed"><span class="type">[A, B, C, D]((A, B, C) =&gt; D)(ImplicitConversions.this.~[ImplicitConversions.this.~[A,B],C]) =&gt; D</span><a id="67997">flatten3</a></span>[<span class="typed"><span class="type">&gt;: Nothing &lt;: Any</span><a id="68002">A</a></span>, <span class="typed"><span class="type">&gt;: Nothing &lt;: Any</span><a id="68003">B</a></span>, <span class="typed"><span class="type">&gt;: Nothing &lt;: Any</span><a id="68004">C</a></span>, <span class="typed"><span class="type">&gt;: Nothing &lt;: Any</span><a id="68005">D</a></span>]      (<span class="typed"><span class="type">(A, B, C) =&gt; D</span><a id="68081">f</a></span>: (A, B, C) =&gt; D) = 
    (<span class="typed"><span class="type">ImplicitConversions.this.~[ImplicitConversions.this.~[A,B],C]</span><a id="68084">p</a></span>: <span class="typed"><span class="type">ImplicitConversions.this.~[ImplicitConversions.this.~[A,B],C]</span><a href="Parsers.scala.html#18090">~</a></span>[~[A, B], C]) =&gt; <span class="typed"><span class="type">ImplicitConversions.this.~[ImplicitConversions.this.~[A,B],C]</span><a href="#68084">p</a></span> <span class="typed"><span class="type">D</span><span class="keyword">match</span></span> {<span class="typed"><span class="type">D</span><span class="keyword">case</span></span> <span class="typed"><span class="type">A</span><a id="68085">a</a></span> <a id="1">~</a> <span class="typed"><span class="type">B</span><a id="68086">b</a></span> <a id="1">~</a> <span class="typed"><span class="type">C</span><a id="68087">c</a></span> =&gt; <span class="typed"><span class="type">(A,B,C)D</span><a href="../../../Function3.scala.html#23948">f</a></span>(<span class="typed"><span class="type">A</span><a href="#68085">a</a></span>, <span class="typed"><span class="type">B</span><a href="#68086">b</a></span>, <span class="typed"><span class="type">C</span><a href="#68087">c</a></span>)}
  <span class="keyword">implicit</span> <span class="keyword">def</span> <span class="typed"><span class="type">[A, B, C, D, E]((A, B, C, D) =&gt; E)(ImplicitConversions.this.~[ImplicitConversions.this.~[ImplicitConversions.this.~[A,B],C],D]) =&gt; E</span><a id="68006">flatten4</a></span>[<span class="typed"><span class="type">&gt;: Nothing &lt;: Any</span><a id="68012">A</a></span>, <span class="typed"><span class="type">&gt;: Nothing &lt;: Any</span><a id="68013">B</a></span>, <span class="typed"><span class="type">&gt;: Nothing &lt;: Any</span><a id="68014">C</a></span>, <span class="typed"><span class="type">&gt;: Nothing &lt;: Any</span><a id="68015">D</a></span>, <span class="typed"><span class="type">&gt;: Nothing &lt;: Any</span><a id="68016">E</a></span>]   (<span class="typed"><span class="type">(A, B, C, D) =&gt; E</span><a id="68073">f</a></span>: (A, B, C, D) =&gt; E) = 
    (<span class="typed"><span class="type">ImplicitConversions.this.~[ImplicitConversions.this.~[ImplicitConversions.this.~[A,B],C],D]</span><a id="68076">p</a></span>: <span class="typed"><span class="type">ImplicitConversions.this.~[ImplicitConversions.this.~[ImplicitConversions.this.~[A,B],C],D]</span><a href="Parsers.scala.html#18090">~</a></span>[~[~[A, B], C], D]) =&gt; <span class="typed"><span class="type">ImplicitConversions.this.~[ImplicitConversions.this.~[ImplicitConversions.this.~[A,B],C],D]</span><a href="#68076">p</a></span> <span class="typed"><span class="type">E</span><span class="keyword">match</span></span> {<span class="typed"><span class="type">E</span><span class="keyword">case</span></span> <span class="typed"><span class="type">A</span><a id="68077">a</a></span> <a id="1">~</a> <span class="typed"><span class="type">B</span><a id="68078">b</a></span> <a id="1">~</a> <span class="typed"><span class="type">C</span><a id="68079">c</a></span> <a id="1">~</a> <span class="typed"><span class="type">D</span><a id="68080">d</a></span> =&gt; <span class="typed"><span class="type">(A,B,C,D)E</span><a href="../../../Function4.scala.html#21007">f</a></span>(<span class="typed"><span class="type">A</span><a href="#68077">a</a></span>, <span class="typed"><span class="type">B</span><a href="#68078">b</a></span>, <span class="typed"><span class="type">C</span><a href="#68079">c</a></span>, <span class="typed"><span class="type">D</span><a href="#68080">d</a></span>)}
  <span class="keyword">implicit</span> <span class="keyword">def</span> <span class="typed"><span class="type">[A, B, C, D, E, F]((A, B, C, D, E) =&gt; F)(ImplicitConversions.this.~[ImplicitConversions.this.~[ImplicitConversions.this.~[ImplicitConversions.this.~[A,B],C],D],E]) =&gt; F</span><a id="68017">flatten5</a></span>[<span class="typed"><span class="type">&gt;: Nothing &lt;: Any</span><a id="68024">A</a></span>, <span class="typed"><span class="type">&gt;: Nothing &lt;: Any</span><a id="68025">B</a></span>, <span class="typed"><span class="type">&gt;: Nothing &lt;: Any</span><a id="68026">C</a></span>, <span class="typed"><span class="type">&gt;: Nothing &lt;: Any</span><a id="68027">D</a></span>, <span class="typed"><span class="type">&gt;: Nothing &lt;: Any</span><a id="68028">E</a></span>, <span class="typed"><span class="type">&gt;: Nothing &lt;: Any</span><a id="68029">F</a></span>](<span class="typed"><span class="type">(A, B, C, D, E) =&gt; F</span><a id="68054">f</a></span>: (A, B, C, D, E) =&gt; F) = 
    (<span class="typed"><span class="type">ImplicitConversions.this.~[ImplicitConversions.this.~[ImplicitConversions.this.~[ImplicitConversions.this.~[A,B],C],D],E]</span><a id="68057">p</a></span>: <span class="typed"><span class="type">ImplicitConversions.this.~[ImplicitConversions.this.~[ImplicitConversions.this.~[ImplicitConversions.this.~[A,B],C],D],E]</span><a href="Parsers.scala.html#18090">~</a></span>[~[~[~[A, B], C], D], E]) =&gt; <span class="typed"><span class="type">ImplicitConversions.this.~[ImplicitConversions.this.~[ImplicitConversions.this.~[ImplicitConversions.this.~[A,B],C],D],E]</span><a href="#68057">p</a></span> <span class="typed"><span class="type">F</span><span class="keyword">match</span></span> {<span class="typed"><span class="type">F</span><span class="keyword">case</span></span> <span class="typed"><span class="type">A</span><a id="68058">a</a></span> <a id="1">~</a> <span class="typed"><span class="type">B</span><a id="68059">b</a></span> <a id="1">~</a> <span class="typed"><span class="type">C</span><a id="68060">c</a></span> <a id="1">~</a> <span class="typed"><span class="type">D</span><a id="68061">d</a></span> <a id="1">~</a> <span class="typed"><span class="type">E</span><a id="68062">e</a></span>=&gt; <span class="typed"><span class="type">(A,B,C,D,E)F</span><a href="../../../Function5.scala.html#68065">f</a></span>(<span class="typed"><span class="type">A</span><a href="#68058">a</a></span>, <span class="typed"><span class="type">B</span><a href="#68059">b</a></span>, <span class="typed"><span class="type">C</span><a href="#68060">c</a></span>, <span class="typed"><span class="type">D</span><a href="#68061">d</a></span>, <span class="typed"><span class="type">E</span><a href="#68062">e</a></span>)}
  <span class="keyword">implicit</span> <span class="keyword">def</span> <span class="typed"><span class="type">[A, T]((List[A]) =&gt; T)(ImplicitConversions.this.~[A,Option[List[A]]]) =&gt; T</span><a id="68030">headOptionTailToFunList</a></span>[<span class="typed"><span class="type">&gt;: Nothing &lt;: Any</span><a id="68033">A</a></span>, <span class="typed"><span class="type">&gt;: Nothing &lt;: Any</span><a id="68034">T</a></span>] (<span class="typed"><span class="type">(List[A]) =&gt; T</span><a id="68045">f</a></span>: List[A] =&gt; T)= 
    (<span class="typed"><span class="type">ImplicitConversions.this.~[A,Option[List[A]]]</span><a id="68048">p</a></span>: <span class="typed"><span class="type">ImplicitConversions.this.~[A,Option[List[A]]]</span><a href="Parsers.scala.html#18090">~</a></span>[A, Option[List[A]]]) =&gt; <span class="typed"><span class="type">(List[A])T</span><a href="../../../Function1.scala.html#17300">f</a></span>(<span class="typed"><span class="type">ImplicitConversions.this.~[A,Option[List[A]]]</span><a href="#68048">p</a></span>.<span class="typed"><span class="type">=&gt; A</span><a href="Parsers.scala.html#33833">_1</a></span> <span class="typed"><span class="type">(A)List[A]</span><a href="../../../List.scala.html#20872">::</a></span> (<span class="typed"><span class="type">ImplicitConversions.this.~[A,Option[List[A]]]</span><a href="#68048">p</a></span>.<span class="typed"><span class="type">=&gt; Option[List[A]]</span><a href="Parsers.scala.html#33835">_2</a></span> <span class="typed"><span class="type">List[A]</span><span class="keyword">match</span></span> { <span class="typed"><span class="type">List[A]</span><span class="keyword">case</span></span> <a id="1">Some</a>(<span class="typed"><span class="type">List[A]</span><a id="68051">xs</a></span>) =&gt; <span class="typed"><span class="type">List[A]</span><a href="#68051">xs</a></span> <span class="typed"><span class="type">Nil.type</span><span class="keyword">case</span></span> <span class="typed"><span class="type">object None</span><a href="../../../Option.scala.html#534">None</a></span> =&gt; <span class="typed"><span class="type">object Nil</span><a href="../../../List.scala.html#333">Nil</a></span>}))
}

        </pre>
    </body>
</html>