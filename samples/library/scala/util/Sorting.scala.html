<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/util/Sorting.scala</title>
        <script type="text/javascript" src="../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../style.css" title="Style">
    </head>
    <body onload="initializeLinked()">
        <pre>
<span class="comment">/*                     __                                               *\
**     ________ ___   / /  ___     Scala API                            **
**    / __/ __// _ | / /  / _ |    (c) 2006-2009, Ross Judson           **
**  __\ \/ /__/ __ |/ /__/ __ |    http://scala-lang.org/               **
** /____/\___/_/ |_/____/_/ | |                                         **
**                          |/                                          **
\*                                                                      */</span>

<span class="comment">// $Id: Sorting.scala 17274 2009-03-10 11:39:04Z michelou $</span>


<span class="keyword">package</span> scala.util

<span class="comment">/** &lt;p&gt;
 *    The Sorting object provides functions that can sort various kinds of
 *    objects. You can provide a comparison function, or you can request a sort
 *    of items that are viewable as &lt;code&gt;Ordered&lt;/code&gt;. Some sorts that
 *    operate directly on a subset of value types are also provided. These
 *    implementations are derived from those in the Sun JDK.
 *  &lt;/p&gt;
 *  &lt;p&gt;
 *    Note that stability doesn't matter for value types, so use the quickSort
 *    variants for those. &lt;code&gt;stableSort&lt;/code&gt; is intended to be used with
 *    objects when the prior ordering should be preserved, where possible.
 *  &lt;/p&gt;
 *
 *  @author  Ross Judson
 *  @version 1.0
 */</span>
<span class="keyword">object</span> <span class="typed"><span class="type">object scala.util.Sorting</span><a id="6703">Sorting</a></span> {

  <span class="comment">/** Provides implicit access to sorting on arbitrary sequences of orderable
   *  items. This doesn't quite work the way that I want yet -- K should be
   *  bounded as viewable, but the compiler rejects that.
   */</span>
  <span class="keyword">implicit</span> <span class="keyword">def</span> <span class="typed"><span class="type">[K &lt;: Ordered[K]](Seq[K])scala.util.RichSorting[K]</span><a id="66791">seq2RichSort</a></span>[<span class="typed"><span class="type">&gt;: Nothing &lt;: Ordered[K]</span><a id="66793">K</a></span> &lt;: Ordered[K]](<span class="typed"><span class="type">Seq[K]</span><a id="66863">s</a></span>: <span class="typed"><span class="type">Seq[K]</span><a href="../Seq.scala.html#761">Seq</a></span>[K]) = <span class="typed"><span class="type">scala.util.RichSorting[K]</span><span class="keyword">new</span></span> <span class="typed"><span class="type">scala.util.RichSorting[K]</span><a href="#6687">RichSorting</a></span>[K](<span class="typed"><span class="type">Seq[K]</span><a href="#66863">s</a></span>)

  <span class="comment">/** Quickly sort an array of Doubles. */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">(Array[Double])Unit</span><a id="66794">quickSort</a></span>(<span class="typed"><span class="type">Array[Double]</span><a id="66874">a</a></span>: <span class="typed"><span class="type">Array[Double]</span><a href="../Array.scala.html#1070">Array</a></span>[Double]) = <span class="typed"><span class="type">(Array[Double],Int,Int)Unit</span><a href="#66821">sort1</a></span>(<span class="typed"><span class="type">Array[Double]</span><a href="#66874">a</a></span>, <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>, <span class="typed"><span class="type">Array[Double]</span><a href="#66874">a</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a href="../Array.scala.html#17252">length</a></span>)

  <span class="comment">/** Quickly sort an array of items that are viewable as ordered. */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">[K](Array[K])(implicit (K) =&gt; Ordered[K])Unit</span><span id="66795"><a id="66856">quickSort</a></span></span>[<span class="typed"><span class="type">&gt;: Nothing &lt;: Any</span><a id="66797">K</a></span> &lt;% Ordered[K]](<span class="typed"><span class="type">Array[K]</span><a id="66855">a</a></span>: <span class="typed"><span class="type">Array[K]</span><a href="../Array.scala.html#1070">Array</a></span>[K]) = <span class="typed"><span class="type">(Array[K],Int,Int)(implicit (K) =&gt; Ordered[K])Unit</span><a href="#66817">sort1</a></span>(<span class="typed"><span class="type">Array[K]</span><a href="#66855">a</a></span>, <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>, <span class="typed"><span class="type">Array[K]</span><a href="#66855">a</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a href="../Array.scala.html#17252">length</a></span>)

  <span class="comment">/** Quickly sort an array of Ints. */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">(Array[Int])Unit</span><a id="66798">quickSort</a></span>(<span class="typed"><span class="type">Array[Int]</span><a id="66848">a</a></span>: <span class="typed"><span class="type">Array[Int]</span><a href="../Array.scala.html#1070">Array</a></span>[Int]) = <span class="typed"><span class="type">(Array[Int],Int,Int)Unit</span><a href="#66820">sort1</a></span>(<span class="typed"><span class="type">Array[Int]</span><a href="#66848">a</a></span>, <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>, <span class="typed"><span class="type">Array[Int]</span><a href="#66848">a</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a href="../Array.scala.html#17252">length</a></span>)

  <span class="comment">/** Quickly sort an array of Floats. */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">(Array[Float])Unit</span><a id="66799">quickSort</a></span>(<span class="typed"><span class="type">Array[Float]</span><a id="66828">a</a></span>: <span class="typed"><span class="type">Array[Float]</span><a href="../Array.scala.html#1070">Array</a></span>[Float]) = <span class="typed"><span class="type">(Array[Float],Int,Int)Unit</span><a href="#66822">sort1</a></span>(<span class="typed"><span class="type">Array[Float]</span><a href="#66828">a</a></span>, <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>, <span class="typed"><span class="type">Array[Float]</span><a href="#66828">a</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a href="../Array.scala.html#17252">length</a></span>)

  <span class="comment">/** Sort an array of K where K is Ordered, preserving the existing order
      where the values are equal. */</span>  
  <span class="keyword">def</span> <span class="typed"><span class="type">[K](Array[K])(implicit (K) =&gt; Ordered[K])Unit</span><span id="66800"><a id="98397">stableSort</a></span></span>[<span class="typed"><span class="type">&gt;: Nothing &lt;: Any</span><a id="66802">K</a></span> &lt;% Ordered[K]](<span class="typed"><span class="type">Array[K]</span><a id="98396">a</a></span>: <span class="typed"><span class="type">Array[K]</span><a href="../Array.scala.html#1070">Array</a></span>[K]) {
    <span class="typed"><span class="type">(Array[K],Int,Int,Array[K],(K, K) =&gt; Boolean)Unit</span><a href="#66823">stableSort</a></span>(<span class="typed"><span class="type">Array[K]</span><a href="#98396">a</a></span>, <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>, <span class="typed"><span class="type">Array[K]</span><a href="#98396">a</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a href="../Array.scala.html#17252">length</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span><span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>, <span class="typed"><span class="type">Array[K]</span><span class="keyword">new</span></span> <span class="typed"><span class="type">Array[K]</span><a href="../Array.scala.html#1070">Array</a></span>[K](<span class="typed"><span class="type">Array[K]</span><a href="#98396">a</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a href="../Array.scala.html#17252">length</a></span>), (<span class="typed"><span class="type">K</span><a id="98458">a</a></span>:<span class="typed"><span class="type">K</span><a href="#66802">K</a></span>, <span class="typed"><span class="type">K</span><a id="98459">b</a></span>:<span class="typed"><span class="type">K</span><a href="#66802">K</a></span>) =&gt; <span class="typed"><span class="type">(K)Ordered[K]</span><a href="../Function1.scala.html#17300">a</a></span> <span class="typed"><span class="type">(K)Boolean</span><a href="../Ordered.scala.html#18904">&lt;</a></span> <span class="typed"><span class="type">K</span><a href="#98459">b</a></span>)
  }

  <span class="comment">/** Sorts an array of &lt;code&gt;K&lt;/code&gt; given an ordering function
   *  &lt;code&gt;f&lt;/code&gt;. &lt;code&gt;f&lt;/code&gt; should return &lt;code&gt;true&lt;/code&gt; iff
   *  its first parameter is strictly less than its second parameter.
   */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">[K](Array[K],(K, K) =&gt; Boolean)Unit</span><a id="66803">stableSort</a></span>[<span class="typed"><span class="type">&gt;: Nothing &lt;: Any</span><a id="66805">K</a></span>](<span class="typed"><span class="type">Array[K]</span><a id="98425">a</a></span>: <span class="typed"><span class="type">Array[K]</span><a href="../Array.scala.html#1070">Array</a></span>[K], <span class="typed"><span class="type">(K, K) =&gt; Boolean</span><a id="98426">f</a></span>: (K,K) =&gt; Boolean) {
    <span class="typed"><span class="type">(Array[K],Int,Int,Array[K],(K, K) =&gt; Boolean)Unit</span><a href="#66823">stableSort</a></span>(<span class="typed"><span class="type">Array[K]</span><a href="#98425">a</a></span>, <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>, <span class="typed"><span class="type">Array[K]</span><a href="#98425">a</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a href="../Array.scala.html#17252">length</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span><span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>, <span class="typed"><span class="type">Array[K]</span><span class="keyword">new</span></span> <span class="typed"><span class="type">Array[K]</span><a href="../Array.scala.html#1070">Array</a></span>[K](<span class="typed"><span class="type">Array[K]</span><a href="#98425">a</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a href="../Array.scala.html#17252">length</a></span>), <span class="typed"><span class="type">(K, K) =&gt; Boolean</span><a href="#98426">f</a></span>)
  }

  <span class="comment">/** Sorts an arbitrary sequence into an array, given a comparison function
   *  that should return &lt;code&gt;true&lt;/code&gt; iff parameter one is strictly less
   *  than parameter two.
   *
   *  @param  a the sequence to be sorted.
   *  @param  f the comparison function.
   *  @return the sorted sequence of items.
   */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">[K](Seq[K],(K, K) =&gt; Boolean)Array[K]</span><a id="66806">stableSort</a></span>[<span class="typed"><span class="type">&gt;: Nothing &lt;: Any</span><a id="66808">K</a></span>](<span class="typed"><span class="type">Seq[K]</span><a id="98422">a</a></span>: <span class="typed"><span class="type">Seq[K]</span><a href="../Seq.scala.html#761">Seq</a></span>[K], <span class="typed"><span class="type">(K, K) =&gt; Boolean</span><a id="98423">f</a></span>: (K,K) =&gt; Boolean): <span class="typed"><span class="type">Array[K]</span><a href="../Array.scala.html#1070">Array</a></span>[K] = {
    <span class="keyword">val</span> <span class="typed"><span class="type">Array[K]</span><a id="98508">ret</a></span> = <span class="typed"><span class="type">Seq[K]</span><a href="#98422">a</a></span>.<span class="typed"><span class="type">Array[K]</span><a href="../Seq.scala.html#17185">toArray</a></span>
    <span class="typed"><span class="type">(Array[K],(K, K) =&gt; Boolean)Unit</span><a href="#66803">stableSort</a></span>(<span class="typed"><span class="type">Array[K]</span><a href="#98508">ret</a></span>, <span class="typed"><span class="type">(K, K) =&gt; Boolean</span><a href="#98423">f</a></span>)
    <span class="typed"><span class="type">Array[K]</span><a href="#98508">ret</a></span>
  }

  <span class="comment">/** Sorts an arbitrary sequence of items that are viewable as ordered. */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">[K](Seq[K])(implicit (K) =&gt; Ordered[K])Array[K]</span><span id="66809"><a id="98411">stableSort</a></span></span>[<span class="typed"><span class="type">&gt;: Nothing &lt;: Any</span><a id="66811">K</a></span> &lt;% Ordered[K]](<span class="typed"><span class="type">Seq[K]</span><a id="98410">a</a></span>: <span class="typed"><span class="type">Seq[K]</span><a href="../Seq.scala.html#761">Seq</a></span>[K]): <span class="typed"><span class="type">Array[K]</span><a href="../Array.scala.html#1070">Array</a></span>[K] =
    <span class="typed"><span class="type">(Seq[K],(K, K) =&gt; Boolean)Array[K]</span><a href="#66806">stableSort</a></span>(<span class="typed"><span class="type">Seq[K]</span><a href="#98410">a</a></span>, (<span class="typed"><span class="type">K</span><a id="98597">a</a></span>:<span class="typed"><span class="type">K</span><a href="#66811">K</a></span>, <span class="typed"><span class="type">K</span><a id="98598">b</a></span>:<span class="typed"><span class="type">K</span><a href="#66811">K</a></span>) =&gt; <span class="typed"><span class="type">(K)Ordered[K]</span><a href="../Function1.scala.html#17300">a</a></span> <span class="typed"><span class="type">(K)Boolean</span><a href="../Ordered.scala.html#18904">&lt;</a></span> <span class="typed"><span class="type">K</span><a href="#98598">b</a></span>)

  <span class="comment">/** Stably sorts a sequence of items given an extraction function that will
   *  return an ordered key from an item.
   *
   *  @param  a the sequence to be sorted.
   *  @param  f the comparison function.
   *  @return the sorted sequence of items.
   */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">[K, M](Seq[K],(K) =&gt; M)(implicit (M) =&gt; Ordered[M])Array[K]</span><span id="66812"><a id="98407">stableSort</a></span></span>[<span class="typed"><span class="type">&gt;: Nothing &lt;: Any</span><a id="66815">K</a></span>, <span class="typed"><span class="type">&gt;: Nothing &lt;: Any</span><a id="66816">M</a></span> &lt;% Ordered[M]](<span class="typed"><span class="type">Seq[K]</span><a id="98405">a</a></span>: <span class="typed"><span class="type">Seq[K]</span><a href="../Seq.scala.html#761">Seq</a></span>[K], <span class="typed"><span class="type">(K) =&gt; M</span><a id="98406">f</a></span>: K =&gt; M): <span class="typed"><span class="type">Array[K]</span><a href="../Array.scala.html#1070">Array</a></span>[K] =
    <span class="typed"><span class="type">(Seq[K],(K, K) =&gt; Boolean)Array[K]</span><a href="#66806">stableSort</a></span>(<span class="typed"><span class="type">Seq[K]</span><a href="#98405">a</a></span>, (<span class="typed"><span class="type">K</span><a id="98649">a</a></span>: <span class="typed"><span class="type">K</span><a href="#66815">K</a></span>, <span class="typed"><span class="type">K</span><a id="98650">b</a></span>: <span class="typed"><span class="type">K</span><a href="#66815">K</a></span>) =&gt; <span class="typed"><span class="type">(M)Ordered[M]</span><a href="../Function1.scala.html#17300">f</a></span>(<span class="typed"><span class="type">K</span><a href="#98649">a</a></span>) <span class="typed"><span class="type">(M)Boolean</span><a href="../Ordered.scala.html#18904">&lt;</a></span> <span class="typed"><span class="type">(K)M</span><a href="../Function1.scala.html#17300">f</a></span>(<span class="typed"><span class="type">K</span><a href="#98650">b</a></span>))

  <span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">[K](Array[K],Int,Int)(implicit (K) =&gt; Ordered[K])Unit</span><span id="66817"><a id="66843">sort1</a></span></span>[<span class="typed"><span class="type">&gt;: Nothing &lt;: Any</span><a id="66819">K</a></span> &lt;% Ordered[K]](<span class="typed"><span class="type">Array[K]</span><a id="66840">x</a></span>: <span class="typed"><span class="type">Array[K]</span><a href="../Array.scala.html#1070">Array</a></span>[K], <span class="typed"><span class="type">Int</span><a id="66841">off</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>, <span class="typed"><span class="type">Int</span><a id="66842">len</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>) {
    <span class="keyword">def</span> <span class="typed"><span class="type">(Int,Int)Unit</span><a id="98655">swap</a></span>(<span class="typed"><span class="type">Int</span><a id="98659">a</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>, <span class="typed"><span class="type">Int</span><a id="98660">b</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>) {
      <span class="keyword">val</span> <span class="typed"><span class="type">K</span><a id="98661">t</a></span> = <span class="typed"><span class="type">(Int)K</span><a href="../Array.scala.html#17253">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#98659">a</a></span>)
      <span class="typed"><span class="type">Array[K]</span><a href="#66840">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#98659">a</a></span>) = <span class="typed"><span class="type">(Int)K</span><a href="../Array.scala.html#17253">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#98660">b</a></span>)
      <span class="typed"><span class="type">Array[K]</span><a href="#66840">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#98660">b</a></span>) = <span class="typed"><span class="type">K</span><a href="#98661">t</a></span>
    }
    <span class="keyword">def</span> <span class="typed"><span class="type">(Int,Int,Int)Unit</span><a id="98656">vecswap</a></span>(<span class="typed"><span class="type">Int</span><a id="98668">_a</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>, <span class="typed"><span class="type">Int</span><a id="98669">_b</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>, <span class="typed"><span class="type">Int</span><a id="98670">n</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>) {
      <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="98671">a</a></span> = <span class="typed"><span class="type">Int</span><a href="#98668">_a</a></span>
      <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="98672">b</a></span> = <span class="typed"><span class="type">Int</span><a href="#98669">_b</a></span>
      <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="98673">i</a></span> = <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>
      <span class="typed"><span class="type">Unit</span><a href="#98674" class="keyword">while</a></span> (<span class="typed"><span class="type">Int</span><a href="#98673">i</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3141">&lt;</a></span> <span class="typed"><span class="type">Int</span><a href="#98670">n</a></span>) {
        <span class="typed"><span class="type">(Int,Int)Unit</span><a href="#98655">swap</a></span>(<span class="typed"><span class="type">Int</span><a href="#98671">a</a></span>, <span class="typed"><span class="type">Int</span><a href="#98672">b</a></span>)
        <span class="typed"><span class="type">Int</span><a href="#98673">i</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
        <span class="typed"><span class="type">Int</span><a href="#98671">a</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
        <span class="typed"><span class="type">Int</span><a href="#98672">b</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
      }
    }
    <span class="keyword">def</span> <span class="typed"><span class="type">(Int,Int,Int)Int</span><a id="98657">med3</a></span>(<span class="typed"><span class="type">Int</span><a id="98742">a</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>, <span class="typed"><span class="type">Int</span><a id="98743">b</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>, <span class="typed"><span class="type">Int</span><a id="98744">c</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>) = {
      <span class="typed"><span class="type">Int</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">(K)Ordered[K]</span><a href="../Function1.scala.html#17300">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#98742">a</a></span>) <span class="typed"><span class="type">(K)Boolean</span><a href="../Ordered.scala.html#18904">&lt;</a></span> <span class="typed"><span class="type">(Int)K</span><a href="../Array.scala.html#17253">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#98743">b</a></span>)) {
        <span class="typed"><span class="type">Int</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">(K)Ordered[K]</span><a href="../Function1.scala.html#17300">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#98743">b</a></span>) <span class="typed"><span class="type">(K)Boolean</span><a href="../Ordered.scala.html#18904">&lt;</a></span> <span class="typed"><span class="type">(Int)K</span><a href="../Array.scala.html#17253">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#98744">c</a></span>)) <span class="typed"><span class="type">Int</span><a href="#98743">b</a></span> <span class="keyword">else</span> <span class="typed"><span class="type">Int</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">(K)Ordered[K]</span><a href="../Function1.scala.html#17300">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#98742">a</a></span>) <span class="typed"><span class="type">(K)Boolean</span><a href="../Ordered.scala.html#18904">&lt;</a></span> <span class="typed"><span class="type">(Int)K</span><a href="../Array.scala.html#17253">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#98744">c</a></span>)) <span class="typed"><span class="type">Int</span><a href="#98744">c</a></span> <span class="keyword">else</span> <span class="typed"><span class="type">Int</span><a href="#98742">a</a></span>
      } <span class="keyword">else</span> {
        <span class="typed"><span class="type">Int</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">(K)Ordered[K]</span><a href="../Function1.scala.html#17300">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#98743">b</a></span>) <span class="typed"><span class="type">(K)Boolean</span><a href="../Ordered.scala.html#18905">&gt;</a></span> <span class="typed"><span class="type">(Int)K</span><a href="../Array.scala.html#17253">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#98744">c</a></span>)) <span class="typed"><span class="type">Int</span><a href="#98743">b</a></span> <span class="keyword">else</span> <span class="typed"><span class="type">Int</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">(K)Ordered[K]</span><a href="../Function1.scala.html#17300">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#98742">a</a></span>) <span class="typed"><span class="type">(K)Boolean</span><a href="../Ordered.scala.html#18905">&gt;</a></span> <span class="typed"><span class="type">(Int)K</span><a href="../Array.scala.html#17253">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#98744">c</a></span>)) <span class="typed"><span class="type">Int</span><a href="#98744">c</a></span> <span class="keyword">else</span> <span class="typed"><span class="type">Int</span><a href="#98742">a</a></span>
      }
    }
    <span class="keyword">def</span> <span class="typed"><span class="type">(Int,Int)Unit</span><a id="98658">sort2</a></span>(<span class="typed"><span class="type">Int</span><a id="98795">off</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>, <span class="typed"><span class="type">Int</span><a id="98796">len</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>) {
      <span class="comment">// Insertion sort on smallest arrays</span>
      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#98796">len</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3141">&lt;</a></span> <span class="typed"><span class="type">Int(7)</span><span class="int">7</span></span>) {
        <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="98798">i</a></span> = <span class="typed"><span class="type">Int</span><a href="#98795">off</a></span>
        <span class="typed"><span class="type">Unit</span><a href="#98799" class="keyword">while</a></span> (<span class="typed"><span class="type">Int</span><a href="#98798">i</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3141">&lt;</a></span> <span class="typed"><span class="type">Int</span><a href="#98796">len</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+</a></span> <span class="typed"><span class="type">Int</span><a href="#98795">off</a></span>) {
          <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="98802">j</a></span> = <span class="typed"><span class="type">Int</span><a href="#98798">i</a></span>
          <span class="typed"><span class="type">Unit</span><a href="#98803" class="keyword">while</a></span> (<span class="typed"><span class="type">Int</span><a href="#98802">j</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&gt;</a></span> <span class="typed"><span class="type">Int</span><a href="#98795">off</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2749">&amp;&amp;</a></span> <span class="typed"><span class="type">(K)Ordered[K]</span><a href="../Function1.scala.html#17300">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#98802">j</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span><span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>) <span class="typed"><span class="type">(K)Boolean</span><a href="../Ordered.scala.html#18905">&gt;</a></span> <span class="typed"><span class="type">(Int)K</span><a href="../Array.scala.html#17253">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#98802">j</a></span>)) {
            <span class="typed"><span class="type">(Int,Int)Unit</span><a href="#98655">swap</a></span>(<span class="typed"><span class="type">Int</span><a href="#98802">j</a></span>, <span class="typed"><span class="type">Int</span><a href="#98802">j</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span><span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>)
            <span class="typed"><span class="type">Int</span><a href="#98802">j</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3146">-=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
          }
          <span class="typed"><span class="type">Int</span><a href="#98798">i</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
        }
      } <span class="keyword">else</span> {
        <span class="comment">// Choose a partition element, v</span>
        <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="98883">m</a></span> = <span class="typed"><span class="type">Int</span><a href="#98795">off</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+</a></span> (<span class="typed"><span class="type">Int</span><a href="#98796">len</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3092">&gt;&gt;</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>)        <span class="comment">// Small arrays, middle element</span>
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#98796">len</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&gt;</a></span> <span class="typed"><span class="type">Int(7)</span><span class="int">7</span></span>) {
          <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="98896">l</a></span> = <span class="typed"><span class="type">Int</span><a href="#98795">off</a></span>
          <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="98897">n</a></span> = <span class="typed"><span class="type">Int</span><a href="#98795">off</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+</a></span> <span class="typed"><span class="type">Int</span><a href="#98796">len</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
          <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#98796">len</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&gt;</a></span> <span class="typed"><span class="type">Int(40)</span><span class="int">40</span></span>) {        <span class="comment">// Big arrays, pseudomedian of 9</span>
            <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="98901">s</a></span> = <span class="typed"><span class="type">Int</span><a href="#98796">len</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3148">/</a></span> <span class="typed"><span class="type">Int(8)</span><span class="int">8</span></span>
            <span class="typed"><span class="type">Int</span><a href="#98896">l</a></span> = <span class="typed"><span class="type">(Int,Int,Int)Int</span><a href="#98657">med3</a></span>(<span class="typed"><span class="type">Int</span><a href="#98896">l</a></span>, <span class="typed"><span class="type">Int</span><a href="#98896">l</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3145">+</a></span><span class="typed"><span class="type">Int</span><a href="#98901">s</a></span>, <span class="typed"><span class="type">Int</span><a href="#98896">l</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3145">+</a></span><span class="typed"><span class="type">Int(2)</span><span class="int">2</span></span><span class="typed"><span class="type">(Int)Int</span><a id="3147">*</a></span><span class="typed"><span class="type">Int</span><a href="#98901">s</a></span>)
            <span class="typed"><span class="type">Int</span><a href="#98883">m</a></span> = <span class="typed"><span class="type">(Int,Int,Int)Int</span><a href="#98657">med3</a></span>(<span class="typed"><span class="type">Int</span><a href="#98883">m</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span><span class="typed"><span class="type">Int</span><a href="#98901">s</a></span>, <span class="typed"><span class="type">Int</span><a href="#98883">m</a></span>, <span class="typed"><span class="type">Int</span><a href="#98883">m</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3145">+</a></span><span class="typed"><span class="type">Int</span><a href="#98901">s</a></span>)
            <span class="typed"><span class="type">Int</span><a href="#98897">n</a></span> = <span class="typed"><span class="type">(Int,Int,Int)Int</span><a href="#98657">med3</a></span>(<span class="typed"><span class="type">Int</span><a href="#98897">n</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span><span class="typed"><span class="type">Int(2)</span><span class="int">2</span></span><span class="typed"><span class="type">(Int)Int</span><a id="3147">*</a></span><span class="typed"><span class="type">Int</span><a href="#98901">s</a></span>, <span class="typed"><span class="type">Int</span><a href="#98897">n</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span><span class="typed"><span class="type">Int</span><a href="#98901">s</a></span>, <span class="typed"><span class="type">Int</span><a href="#98897">n</a></span>)
          }
          <span class="typed"><span class="type">Int</span><a href="#98883">m</a></span> = <span class="typed"><span class="type">(Int,Int,Int)Int</span><a href="#98657">med3</a></span>(<span class="typed"><span class="type">Int</span><a href="#98896">l</a></span>, <span class="typed"><span class="type">Int</span><a href="#98883">m</a></span>, <span class="typed"><span class="type">Int</span><a href="#98897">n</a></span>) <span class="comment">// Mid-size, med of 3</span>
        }
        <span class="keyword">val</span> <span class="typed"><span class="type">K</span><a id="98884">v</a></span> = <span class="typed"><span class="type">(Int)K</span><a href="../Array.scala.html#17253">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#98883">m</a></span>)

        <span class="comment">// Establish Invariant: v* (&lt;v)* (&gt;v)* v*</span>
        <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="98885">a</a></span> = <span class="typed"><span class="type">Int</span><a href="#98795">off</a></span>
        <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="98886">b</a></span> = <span class="typed"><span class="type">Int</span><a href="#98885">a</a></span>
        <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="98887">c</a></span> = <span class="typed"><span class="type">Int</span><a href="#98795">off</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+</a></span> <span class="typed"><span class="type">Int</span><a href="#98796">len</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
        <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="98888">d</a></span> = <span class="typed"><span class="type">Int</span><a href="#98887">c</a></span>
        <span class="keyword">var</span> <span class="typed"><span class="type">Boolean</span><a id="98889">done</a></span> = <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>
        <span class="typed"><span class="type">Unit</span><a href="#98892" class="keyword">while</a></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a id="2745">!</a></span><span class="typed"><span class="type">Boolean</span><a href="#98889">done</a></span>) {
          <span class="typed"><span class="type">Unit</span><a href="#99006" class="keyword">while</a></span> (<span class="typed"><span class="type">Int</span><a href="#98886">b</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3142">&lt;=</a></span> <span class="typed"><span class="type">Int</span><a href="#98887">c</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2749">&amp;&amp;</a></span> <span class="typed"><span class="type">(K)Ordered[K]</span><a href="../Function1.scala.html#17300">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#98886">b</a></span>) <span class="typed"><span class="type">(K)Boolean</span><a href="../Ordered.scala.html#18906">&lt;=</a></span> <span class="typed"><span class="type">K</span><a href="#98884">v</a></span>) {
            <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">(Int)K</span><a href="../Array.scala.html#17253">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#98886">b</a></span>) <span class="typed"><span class="type">(Any)Boolean</span><a id="3494">==</a></span> <span class="typed"><span class="type">K</span><a href="#98884">v</a></span>) {
              <span class="typed"><span class="type">(Int,Int)Unit</span><a href="#98655">swap</a></span>(<span class="typed"><span class="type">Int</span><a href="#98885">a</a></span>, <span class="typed"><span class="type">Int</span><a href="#98886">b</a></span>)
              <span class="typed"><span class="type">Int</span><a href="#98885">a</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
            }
            <span class="typed"><span class="type">Int</span><a href="#98886">b</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
          }
          <span class="typed"><span class="type">Unit</span><a href="#99007" class="keyword">while</a></span> (<span class="typed"><span class="type">Int</span><a href="#98887">c</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3144">&gt;=</a></span> <span class="typed"><span class="type">Int</span><a href="#98886">b</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2749">&amp;&amp;</a></span> <span class="typed"><span class="type">(K)Ordered[K]</span><a href="../Function1.scala.html#17300">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#98887">c</a></span>) <span class="typed"><span class="type">(K)Boolean</span><a href="../Ordered.scala.html#18907">&gt;=</a></span> <span class="typed"><span class="type">K</span><a href="#98884">v</a></span>) {
            <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">(Int)K</span><a href="../Array.scala.html#17253">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#98887">c</a></span>) <span class="typed"><span class="type">(Any)Boolean</span><a id="3494">==</a></span> <span class="typed"><span class="type">K</span><a href="#98884">v</a></span>) {
              <span class="typed"><span class="type">(Int,Int)Unit</span><a href="#98655">swap</a></span>(<span class="typed"><span class="type">Int</span><a href="#98887">c</a></span>, <span class="typed"><span class="type">Int</span><a href="#98888">d</a></span>)
              <span class="typed"><span class="type">Int</span><a href="#98888">d</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3146">-=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
            }
            <span class="typed"><span class="type">Int</span><a href="#98887">c</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3146">-=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
          }
          <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#98886">b</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&gt;</a></span> <span class="typed"><span class="type">Int</span><a href="#98887">c</a></span>) {
            <span class="typed"><span class="type">Boolean</span><a href="#98889">done</a></span> = <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>
          } <span class="keyword">else</span> {
            <span class="typed"><span class="type">(Int,Int)Unit</span><a href="#98655">swap</a></span>(<span class="typed"><span class="type">Int</span><a href="#98886">b</a></span>, <span class="typed"><span class="type">Int</span><a href="#98887">c</a></span>)
            <span class="typed"><span class="type">Int</span><a href="#98887">c</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3146">-=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
            <span class="typed"><span class="type">Int</span><a href="#98886">b</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
          }
        }

        <span class="comment">// Swap partition elements back to middle</span>
        <span class="keyword">val</span> <span class="typed"><span class="type">Int</span><a id="98890">n</a></span> = <span class="typed"><span class="type">Int</span><a href="#98795">off</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+</a></span> <span class="typed"><span class="type">Int</span><a href="#98796">len</a></span>
        <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="98891">s</a></span> = <span class="typed"><span class="type">object Math</span><a href="../Math.scala.html#606">Math</a></span>.<span class="typed"><span class="type">(Int,Int)Int</span><a href="../Math.scala.html#25150">min</a></span>(<span class="typed"><span class="type">Int</span><a href="#98885">a</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span><span class="typed"><span class="type">Int</span><a href="#98795">off</a></span>, <span class="typed"><span class="type">Int</span><a href="#98886">b</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span><span class="typed"><span class="type">Int</span><a href="#98885">a</a></span>)
        <span class="typed"><span class="type">(Int,Int,Int)Unit</span><a href="#98656">vecswap</a></span>(<span class="typed"><span class="type">Int</span><a href="#98795">off</a></span>, <span class="typed"><span class="type">Int</span><a href="#98886">b</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span><span class="typed"><span class="type">Int</span><a href="#98891">s</a></span>, <span class="typed"><span class="type">Int</span><a href="#98891">s</a></span>)
        <span class="typed"><span class="type">Int</span><a href="#98891">s</a></span> = <span class="typed"><span class="type">object Math</span><a href="../Math.scala.html#606">Math</a></span>.<span class="typed"><span class="type">(Int,Int)Int</span><a href="../Math.scala.html#25150">min</a></span>(<span class="typed"><span class="type">Int</span><a href="#98888">d</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span><span class="typed"><span class="type">Int</span><a href="#98887">c</a></span>, <span class="typed"><span class="type">Int</span><a href="#98890">n</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span><span class="typed"><span class="type">Int</span><a href="#98888">d</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span><span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>)
        <span class="typed"><span class="type">(Int,Int,Int)Unit</span><a href="#98656">vecswap</a></span>(<span class="typed"><span class="type">Int</span><a href="#98886">b</a></span>,   <span class="typed"><span class="type">Int</span><a href="#98890">n</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span><span class="typed"><span class="type">Int</span><a href="#98891">s</a></span>, <span class="typed"><span class="type">Int</span><a href="#98891">s</a></span>)

        <span class="comment">// Recursively sort non-partition-elements</span>
        <span class="typed"><span class="type">Int</span><a href="#98891">s</a></span> = <span class="typed"><span class="type">Int</span><a href="#98886">b</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span> <span class="typed"><span class="type">Int</span><a href="#98885">a</a></span>
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#98891">s</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&gt;</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>)
          <span class="typed"><span class="type">(Int,Int)Unit</span><a href="#98658">sort2</a></span>(<span class="typed"><span class="type">Int</span><a href="#98795">off</a></span>, <span class="typed"><span class="type">Int</span><a href="#98891">s</a></span>)
        <span class="typed"><span class="type">Int</span><a href="#98891">s</a></span> = <span class="typed"><span class="type">Int</span><a href="#98888">d</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span> <span class="typed"><span class="type">Int</span><a href="#98887">c</a></span>
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#98891">s</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&gt;</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>)
          <span class="typed"><span class="type">(Int,Int)Unit</span><a href="#98658">sort2</a></span>(<span class="typed"><span class="type">Int</span><a href="#98890">n</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span><span class="typed"><span class="type">Int</span><a href="#98891">s</a></span>, <span class="typed"><span class="type">Int</span><a href="#98891">s</a></span>)
      }
    }
    <span class="typed"><span class="type">(Int,Int)Unit</span><a href="#98658">sort2</a></span>(<span class="typed"><span class="type">Int</span><a href="#66841">off</a></span>, <span class="typed"><span class="type">Int</span><a href="#66842">len</a></span>)
  }

  <span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(Array[Int],Int,Int)Unit</span><a id="66820">sort1</a></span>(<span class="typed"><span class="type">Array[Int]</span><a id="66837">x</a></span>: <span class="typed"><span class="type">Array[Int]</span><a href="../Array.scala.html#1070">Array</a></span>[Int], <span class="typed"><span class="type">Int</span><a id="66838">off</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>, <span class="typed"><span class="type">Int</span><a id="66839">len</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>) {
    <span class="keyword">def</span> <span class="typed"><span class="type">(Int,Int)Unit</span><a id="99271">swap</a></span>(<span class="typed"><span class="type">Int</span><a id="99275">a</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>, <span class="typed"><span class="type">Int</span><a id="99276">b</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>) {
      <span class="keyword">val</span> <span class="typed"><span class="type">Int</span><a id="99277">t</a></span> = <span class="typed"><span class="type">(Int)Int</span><a href="../Array.scala.html#17253">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#99275">a</a></span>)
      <span class="typed"><span class="type">Array[Int]</span><a href="#66837">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#99275">a</a></span>) = <span class="typed"><span class="type">(Int)Int</span><a href="../Array.scala.html#17253">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#99276">b</a></span>)
      <span class="typed"><span class="type">Array[Int]</span><a href="#66837">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#99276">b</a></span>) = <span class="typed"><span class="type">Int</span><a href="#99277">t</a></span>
    }
    <span class="keyword">def</span> <span class="typed"><span class="type">(Int,Int,Int)Unit</span><a id="99272">vecswap</a></span>(<span class="typed"><span class="type">Int</span><a id="99284">_a</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>, <span class="typed"><span class="type">Int</span><a id="99285">_b</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>, <span class="typed"><span class="type">Int</span><a id="99286">n</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>) {
      <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="99287">a</a></span> = <span class="typed"><span class="type">Int</span><a href="#99284">_a</a></span>
      <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="99288">b</a></span> = <span class="typed"><span class="type">Int</span><a href="#99285">_b</a></span>
      <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="99289">i</a></span> = <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>
      <span class="typed"><span class="type">Unit</span><a href="#99290" class="keyword">while</a></span> (<span class="typed"><span class="type">Int</span><a href="#99289">i</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3141">&lt;</a></span> <span class="typed"><span class="type">Int</span><a href="#99286">n</a></span>) {
        <span class="typed"><span class="type">(Int,Int)Unit</span><a href="#99271">swap</a></span>(<span class="typed"><span class="type">Int</span><a href="#99287">a</a></span>, <span class="typed"><span class="type">Int</span><a href="#99288">b</a></span>)
        <span class="typed"><span class="type">Int</span><a href="#99289">i</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
        <span class="typed"><span class="type">Int</span><a href="#99287">a</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
        <span class="typed"><span class="type">Int</span><a href="#99288">b</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
      }
    }
    <span class="keyword">def</span> <span class="typed"><span class="type">(Int,Int,Int)Int</span><a id="99273">med3</a></span>(<span class="typed"><span class="type">Int</span><a id="99358">a</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>, <span class="typed"><span class="type">Int</span><a id="99359">b</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>, <span class="typed"><span class="type">Int</span><a id="99360">c</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>) = {
      <span class="typed"><span class="type">Int</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">(Int)Int</span><a href="../Array.scala.html#17253">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#99358">a</a></span>) <span class="typed"><span class="type">(Int)Boolean</span><a id="3141">&lt;</a></span> <span class="typed"><span class="type">(Int)Int</span><a href="../Array.scala.html#17253">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#99359">b</a></span>)) {
        <span class="typed"><span class="type">Int</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">(Int)Int</span><a href="../Array.scala.html#17253">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#99359">b</a></span>) <span class="typed"><span class="type">(Int)Boolean</span><a id="3141">&lt;</a></span> <span class="typed"><span class="type">(Int)Int</span><a href="../Array.scala.html#17253">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#99360">c</a></span>)) <span class="typed"><span class="type">Int</span><a href="#99359">b</a></span> <span class="keyword">else</span> <span class="typed"><span class="type">Int</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">(Int)Int</span><a href="../Array.scala.html#17253">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#99358">a</a></span>) <span class="typed"><span class="type">(Int)Boolean</span><a id="3141">&lt;</a></span> <span class="typed"><span class="type">(Int)Int</span><a href="../Array.scala.html#17253">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#99360">c</a></span>)) <span class="typed"><span class="type">Int</span><a href="#99360">c</a></span> <span class="keyword">else</span> <span class="typed"><span class="type">Int</span><a href="#99358">a</a></span>
      } <span class="keyword">else</span> {
        <span class="typed"><span class="type">Int</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">(Int)Int</span><a href="../Array.scala.html#17253">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#99359">b</a></span>) <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&gt;</a></span> <span class="typed"><span class="type">(Int)Int</span><a href="../Array.scala.html#17253">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#99360">c</a></span>)) <span class="typed"><span class="type">Int</span><a href="#99359">b</a></span> <span class="keyword">else</span> <span class="typed"><span class="type">Int</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">(Int)Int</span><a href="../Array.scala.html#17253">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#99358">a</a></span>) <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&gt;</a></span> <span class="typed"><span class="type">(Int)Int</span><a href="../Array.scala.html#17253">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#99360">c</a></span>)) <span class="typed"><span class="type">Int</span><a href="#99360">c</a></span> <span class="keyword">else</span> <span class="typed"><span class="type">Int</span><a href="#99358">a</a></span>
      }
    }
    <span class="keyword">def</span> <span class="typed"><span class="type">(Int,Int)Unit</span><a id="99274">sort2</a></span>(<span class="typed"><span class="type">Int</span><a id="99396">off</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>, <span class="typed"><span class="type">Int</span><a id="99397">len</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>) {
      <span class="comment">// Insertion sort on smallest arrays</span>
      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#99397">len</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3141">&lt;</a></span> <span class="typed"><span class="type">Int(7)</span><span class="int">7</span></span>) {
        <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="99399">i</a></span> = <span class="typed"><span class="type">Int</span><a href="#99396">off</a></span>
        <span class="typed"><span class="type">Unit</span><a href="#99400" class="keyword">while</a></span> (<span class="typed"><span class="type">Int</span><a href="#99399">i</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3141">&lt;</a></span> <span class="typed"><span class="type">Int</span><a href="#99397">len</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+</a></span> <span class="typed"><span class="type">Int</span><a href="#99396">off</a></span>) {
          <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="99403">j</a></span> = <span class="typed"><span class="type">Int</span><a href="#99399">i</a></span>
          <span class="typed"><span class="type">Unit</span><a href="#99404" class="keyword">while</a></span> (<span class="typed"><span class="type">Int</span><a href="#99403">j</a></span><span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&gt;</a></span><span class="typed"><span class="type">Int</span><a href="#99396">off</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2749">&amp;&amp;</a></span> <span class="typed"><span class="type">(Int)Int</span><a href="../Array.scala.html#17253">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#99403">j</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span><span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>) <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&gt;</a></span> <span class="typed"><span class="type">(Int)Int</span><a href="../Array.scala.html#17253">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#99403">j</a></span>)) {
            <span class="typed"><span class="type">(Int,Int)Unit</span><a href="#99271">swap</a></span>(<span class="typed"><span class="type">Int</span><a href="#99403">j</a></span>, <span class="typed"><span class="type">Int</span><a href="#99403">j</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span><span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>)
            <span class="typed"><span class="type">Int</span><a href="#99403">j</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3146">-=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
          }
          <span class="typed"><span class="type">Int</span><a href="#99399">i</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
        }
      } <span class="keyword">else</span> {
        <span class="comment">// Choose a partition element, v</span>
        <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="99481">m</a></span> = <span class="typed"><span class="type">Int</span><a href="#99396">off</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+</a></span> (<span class="typed"><span class="type">Int</span><a href="#99397">len</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3092">&gt;&gt;</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>)        <span class="comment">// Small arrays, middle element</span>
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#99397">len</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&gt;</a></span> <span class="typed"><span class="type">Int(7)</span><span class="int">7</span></span>) {
          <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="99494">l</a></span> = <span class="typed"><span class="type">Int</span><a href="#99396">off</a></span>
          <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="99495">n</a></span> = <span class="typed"><span class="type">Int</span><a href="#99396">off</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+</a></span> <span class="typed"><span class="type">Int</span><a href="#99397">len</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
          <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#99397">len</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&gt;</a></span> <span class="typed"><span class="type">Int(40)</span><span class="int">40</span></span>) {        <span class="comment">// Big arrays, pseudomedian of 9</span>
            <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="99499">s</a></span> = <span class="typed"><span class="type">Int</span><a href="#99397">len</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3148">/</a></span> <span class="typed"><span class="type">Int(8)</span><span class="int">8</span></span>
            <span class="typed"><span class="type">Int</span><a href="#99494">l</a></span> = <span class="typed"><span class="type">(Int,Int,Int)Int</span><a href="#99273">med3</a></span>(<span class="typed"><span class="type">Int</span><a href="#99494">l</a></span>, <span class="typed"><span class="type">Int</span><a href="#99494">l</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3145">+</a></span><span class="typed"><span class="type">Int</span><a href="#99499">s</a></span>, <span class="typed"><span class="type">Int</span><a href="#99494">l</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3145">+</a></span><span class="typed"><span class="type">Int(2)</span><span class="int">2</span></span><span class="typed"><span class="type">(Int)Int</span><a id="3147">*</a></span><span class="typed"><span class="type">Int</span><a href="#99499">s</a></span>)
            <span class="typed"><span class="type">Int</span><a href="#99481">m</a></span> = <span class="typed"><span class="type">(Int,Int,Int)Int</span><a href="#99273">med3</a></span>(<span class="typed"><span class="type">Int</span><a href="#99481">m</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span><span class="typed"><span class="type">Int</span><a href="#99499">s</a></span>, <span class="typed"><span class="type">Int</span><a href="#99481">m</a></span>, <span class="typed"><span class="type">Int</span><a href="#99481">m</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3145">+</a></span><span class="typed"><span class="type">Int</span><a href="#99499">s</a></span>)
            <span class="typed"><span class="type">Int</span><a href="#99495">n</a></span> = <span class="typed"><span class="type">(Int,Int,Int)Int</span><a href="#99273">med3</a></span>(<span class="typed"><span class="type">Int</span><a href="#99495">n</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span><span class="typed"><span class="type">Int(2)</span><span class="int">2</span></span><span class="typed"><span class="type">(Int)Int</span><a id="3147">*</a></span><span class="typed"><span class="type">Int</span><a href="#99499">s</a></span>, <span class="typed"><span class="type">Int</span><a href="#99495">n</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span><span class="typed"><span class="type">Int</span><a href="#99499">s</a></span>, <span class="typed"><span class="type">Int</span><a href="#99495">n</a></span>)
          }
          <span class="typed"><span class="type">Int</span><a href="#99481">m</a></span> = <span class="typed"><span class="type">(Int,Int,Int)Int</span><a href="#99273">med3</a></span>(<span class="typed"><span class="type">Int</span><a href="#99494">l</a></span>, <span class="typed"><span class="type">Int</span><a href="#99481">m</a></span>, <span class="typed"><span class="type">Int</span><a href="#99495">n</a></span>) <span class="comment">// Mid-size, med of 3</span>
        }
        <span class="keyword">val</span> <span class="typed"><span class="type">Int</span><a id="99482">v</a></span> = <span class="typed"><span class="type">(Int)Int</span><a href="../Array.scala.html#17253">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#99481">m</a></span>)

        <span class="comment">// Establish Invariant: v* (&lt;v)* (&gt;v)* v*</span>
        <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="99483">a</a></span> = <span class="typed"><span class="type">Int</span><a href="#99396">off</a></span>
        <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="99484">b</a></span> = <span class="typed"><span class="type">Int</span><a href="#99483">a</a></span>
        <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="99485">c</a></span> = <span class="typed"><span class="type">Int</span><a href="#99396">off</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+</a></span> <span class="typed"><span class="type">Int</span><a href="#99397">len</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
        <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="99486">d</a></span> = <span class="typed"><span class="type">Int</span><a href="#99485">c</a></span>
        <span class="keyword">var</span> <span class="typed"><span class="type">Boolean</span><a id="99487">done</a></span> = <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>
        <span class="typed"><span class="type">Unit</span><a href="#99490" class="keyword">while</a></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a id="2745">!</a></span><span class="typed"><span class="type">Boolean</span><a href="#99487">done</a></span>) {
          <span class="typed"><span class="type">Unit</span><a href="#99604" class="keyword">while</a></span> (<span class="typed"><span class="type">Int</span><a href="#99484">b</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3142">&lt;=</a></span> <span class="typed"><span class="type">Int</span><a href="#99485">c</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2749">&amp;&amp;</a></span> <span class="typed"><span class="type">(Int)Int</span><a href="../Array.scala.html#17253">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#99484">b</a></span>) <span class="typed"><span class="type">(Int)Boolean</span><a id="3142">&lt;=</a></span> <span class="typed"><span class="type">Int</span><a href="#99482">v</a></span>) {
            <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">(Int)Int</span><a href="../Array.scala.html#17253">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#99484">b</a></span>) <span class="typed"><span class="type">(Int)Boolean</span><a id="3139">==</a></span> <span class="typed"><span class="type">Int</span><a href="#99482">v</a></span>) {
              <span class="typed"><span class="type">(Int,Int)Unit</span><a href="#99271">swap</a></span>(<span class="typed"><span class="type">Int</span><a href="#99483">a</a></span>, <span class="typed"><span class="type">Int</span><a href="#99484">b</a></span>)
              <span class="typed"><span class="type">Int</span><a href="#99483">a</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
            }
            <span class="typed"><span class="type">Int</span><a href="#99484">b</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
          }
          <span class="typed"><span class="type">Unit</span><a href="#99605" class="keyword">while</a></span> (<span class="typed"><span class="type">Int</span><a href="#99485">c</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3144">&gt;=</a></span> <span class="typed"><span class="type">Int</span><a href="#99484">b</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2749">&amp;&amp;</a></span> <span class="typed"><span class="type">(Int)Int</span><a href="../Array.scala.html#17253">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#99485">c</a></span>) <span class="typed"><span class="type">(Int)Boolean</span><a id="3144">&gt;=</a></span> <span class="typed"><span class="type">Int</span><a href="#99482">v</a></span>) {
            <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">(Int)Int</span><a href="../Array.scala.html#17253">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#99485">c</a></span>) <span class="typed"><span class="type">(Int)Boolean</span><a id="3139">==</a></span> <span class="typed"><span class="type">Int</span><a href="#99482">v</a></span>) {
              <span class="typed"><span class="type">(Int,Int)Unit</span><a href="#99271">swap</a></span>(<span class="typed"><span class="type">Int</span><a href="#99485">c</a></span>, <span class="typed"><span class="type">Int</span><a href="#99486">d</a></span>)
              <span class="typed"><span class="type">Int</span><a href="#99486">d</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3146">-=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
            }
            <span class="typed"><span class="type">Int</span><a href="#99485">c</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3146">-=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
          }
          <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#99484">b</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&gt;</a></span> <span class="typed"><span class="type">Int</span><a href="#99485">c</a></span>) {
            <span class="typed"><span class="type">Boolean</span><a href="#99487">done</a></span> = <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>
          } <span class="keyword">else</span> {
            <span class="typed"><span class="type">(Int,Int)Unit</span><a href="#99271">swap</a></span>(<span class="typed"><span class="type">Int</span><a href="#99484">b</a></span>, <span class="typed"><span class="type">Int</span><a href="#99485">c</a></span>)
            <span class="typed"><span class="type">Int</span><a href="#99485">c</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3146">-=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
            <span class="typed"><span class="type">Int</span><a href="#99484">b</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
          }
        }

        <span class="comment">// Swap partition elements back to middle</span>
        <span class="keyword">val</span> <span class="typed"><span class="type">Int</span><a id="99488">n</a></span> = <span class="typed"><span class="type">Int</span><a href="#99396">off</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+</a></span> <span class="typed"><span class="type">Int</span><a href="#99397">len</a></span>
        <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="99489">s</a></span> = <span class="typed"><span class="type">object Math</span><a href="../Math.scala.html#606">Math</a></span>.<span class="typed"><span class="type">(Int,Int)Int</span><a href="../Math.scala.html#25150">min</a></span>(<span class="typed"><span class="type">Int</span><a href="#99483">a</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span><span class="typed"><span class="type">Int</span><a href="#99396">off</a></span>, <span class="typed"><span class="type">Int</span><a href="#99484">b</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span><span class="typed"><span class="type">Int</span><a href="#99483">a</a></span>)
        <span class="typed"><span class="type">(Int,Int,Int)Unit</span><a href="#99272">vecswap</a></span>(<span class="typed"><span class="type">Int</span><a href="#99396">off</a></span>, <span class="typed"><span class="type">Int</span><a href="#99484">b</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span><span class="typed"><span class="type">Int</span><a href="#99489">s</a></span>, <span class="typed"><span class="type">Int</span><a href="#99489">s</a></span>)
        <span class="typed"><span class="type">Int</span><a href="#99489">s</a></span> = <span class="typed"><span class="type">object Math</span><a href="../Math.scala.html#606">Math</a></span>.<span class="typed"><span class="type">(Int,Int)Int</span><a href="../Math.scala.html#25150">min</a></span>(<span class="typed"><span class="type">Int</span><a href="#99486">d</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span><span class="typed"><span class="type">Int</span><a href="#99485">c</a></span>, <span class="typed"><span class="type">Int</span><a href="#99488">n</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span><span class="typed"><span class="type">Int</span><a href="#99486">d</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span><span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>)
        <span class="typed"><span class="type">(Int,Int,Int)Unit</span><a href="#99272">vecswap</a></span>(<span class="typed"><span class="type">Int</span><a href="#99484">b</a></span>,   <span class="typed"><span class="type">Int</span><a href="#99488">n</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span><span class="typed"><span class="type">Int</span><a href="#99489">s</a></span>, <span class="typed"><span class="type">Int</span><a href="#99489">s</a></span>)

        <span class="comment">// Recursively sort non-partition-elements</span>
        <span class="typed"><span class="type">Int</span><a href="#99489">s</a></span> = <span class="typed"><span class="type">Int</span><a href="#99484">b</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span> <span class="typed"><span class="type">Int</span><a href="#99483">a</a></span>
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#99489">s</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&gt;</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>)
          <span class="typed"><span class="type">(Int,Int)Unit</span><a href="#99274">sort2</a></span>(<span class="typed"><span class="type">Int</span><a href="#99396">off</a></span>, <span class="typed"><span class="type">Int</span><a href="#99489">s</a></span>)
        <span class="typed"><span class="type">Int</span><a href="#99489">s</a></span> = <span class="typed"><span class="type">Int</span><a href="#99486">d</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span> <span class="typed"><span class="type">Int</span><a href="#99485">c</a></span>
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#99489">s</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&gt;</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>)
          <span class="typed"><span class="type">(Int,Int)Unit</span><a href="#99274">sort2</a></span>(<span class="typed"><span class="type">Int</span><a href="#99488">n</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span><span class="typed"><span class="type">Int</span><a href="#99489">s</a></span>, <span class="typed"><span class="type">Int</span><a href="#99489">s</a></span>)
      }
    }
    <span class="typed"><span class="type">(Int,Int)Unit</span><a href="#99274">sort2</a></span>(<span class="typed"><span class="type">Int</span><a href="#66838">off</a></span>, <span class="typed"><span class="type">Int</span><a href="#66839">len</a></span>)
  }

  <span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(Array[Double],Int,Int)Unit</span><a id="66821">sort1</a></span>(<span class="typed"><span class="type">Array[Double]</span><a id="66834">x</a></span>: <span class="typed"><span class="type">Array[Double]</span><a href="../Array.scala.html#1070">Array</a></span>[Double], <span class="typed"><span class="type">Int</span><a id="66835">off</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>, <span class="typed"><span class="type">Int</span><a id="66836">len</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>) {
    <span class="keyword">def</span> <span class="typed"><span class="type">(Int,Int)Unit</span><a id="99865">swap</a></span>(<span class="typed"><span class="type">Int</span><a id="99869">a</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>, <span class="typed"><span class="type">Int</span><a id="99870">b</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>) {
      <span class="keyword">val</span> <span class="typed"><span class="type">Double</span><a id="99871">t</a></span> = <span class="typed"><span class="type">(Int)Double</span><a href="../Array.scala.html#17253">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#99869">a</a></span>)
      <span class="typed"><span class="type">Array[Double]</span><a href="#66834">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#99869">a</a></span>) = <span class="typed"><span class="type">(Int)Double</span><a href="../Array.scala.html#17253">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#99870">b</a></span>)
      <span class="typed"><span class="type">Array[Double]</span><a href="#66834">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#99870">b</a></span>) = <span class="typed"><span class="type">Double</span><a href="#99871">t</a></span>
    }
    <span class="keyword">def</span> <span class="typed"><span class="type">(Int,Int,Int)Unit</span><a id="99866">vecswap</a></span>(<span class="typed"><span class="type">Int</span><a id="99878">_a</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>, <span class="typed"><span class="type">Int</span><a id="99879">_b</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>, <span class="typed"><span class="type">Int</span><a id="99880">n</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>) {
      <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="99881">a</a></span> = <span class="typed"><span class="type">Int</span><a href="#99878">_a</a></span>
      <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="99882">b</a></span> = <span class="typed"><span class="type">Int</span><a href="#99879">_b</a></span>
      <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="99883">i</a></span> = <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>
      <span class="typed"><span class="type">Unit</span><a href="#99884" class="keyword">while</a></span> (<span class="typed"><span class="type">Int</span><a href="#99883">i</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3141">&lt;</a></span> <span class="typed"><span class="type">Int</span><a href="#99880">n</a></span>) {
        <span class="typed"><span class="type">(Int,Int)Unit</span><a href="#99865">swap</a></span>(<span class="typed"><span class="type">Int</span><a href="#99881">a</a></span>, <span class="typed"><span class="type">Int</span><a href="#99882">b</a></span>)
        <span class="typed"><span class="type">Int</span><a href="#99883">i</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
        <span class="typed"><span class="type">Int</span><a href="#99881">a</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
        <span class="typed"><span class="type">Int</span><a href="#99882">b</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
      }
    }
    <span class="keyword">def</span> <span class="typed"><span class="type">(Int,Int,Int)Int</span><a id="99867">med3</a></span>(<span class="typed"><span class="type">Int</span><a id="99952">a</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>, <span class="typed"><span class="type">Int</span><a id="99953">b</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>, <span class="typed"><span class="type">Int</span><a id="99954">c</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>) = {
      <span class="keyword">val</span> <span class="typed"><span class="type">Int</span><a id="99955">ab</a></span> = <span class="typed"><span class="type">implicit scala.Predef.doubleWrapper : (Double)scala.runtime.RichDouble</span><a href="../Predef.scala.html#13515">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#99952">a</a></span>) <span class="typed"><span class="type">(Double)Int</span><a href="../runtime/RichDouble.scala.html#19329">compare</a></span> <span class="typed"><span class="type">(Int)Double</span><a href="../Array.scala.html#17253">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#99953">b</a></span>)
      <span class="keyword">val</span> <span class="typed"><span class="type">Int</span><a id="99956">bc</a></span> = <span class="typed"><span class="type">implicit scala.Predef.doubleWrapper : (Double)scala.runtime.RichDouble</span><a href="../Predef.scala.html#13515">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#99953">b</a></span>) <span class="typed"><span class="type">(Double)Int</span><a href="../runtime/RichDouble.scala.html#19329">compare</a></span> <span class="typed"><span class="type">(Int)Double</span><a href="../Array.scala.html#17253">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#99954">c</a></span>)
      <span class="keyword">val</span> <span class="typed"><span class="type">Int</span><a id="99957">ac</a></span> = <span class="typed"><span class="type">implicit scala.Predef.doubleWrapper : (Double)scala.runtime.RichDouble</span><a href="../Predef.scala.html#13515">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#99952">a</a></span>) <span class="typed"><span class="type">(Double)Int</span><a href="../runtime/RichDouble.scala.html#19329">compare</a></span> <span class="typed"><span class="type">(Int)Double</span><a href="../Array.scala.html#17253">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#99954">c</a></span>)
      <span class="typed"><span class="type">Int</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#99955">ab</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3141">&lt;</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>) {
        <span class="typed"><span class="type">Int</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#99956">bc</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3141">&lt;</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>) <span class="typed"><span class="type">Int</span><a href="#99953">b</a></span> <span class="keyword">else</span> <span class="typed"><span class="type">Int</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#99957">ac</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3141">&lt;</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>) <span class="typed"><span class="type">Int</span><a href="#99954">c</a></span> <span class="keyword">else</span> <span class="typed"><span class="type">Int</span><a href="#99952">a</a></span>
      } <span class="keyword">else</span> {
        <span class="typed"><span class="type">Int</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#99956">bc</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&gt;</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>) <span class="typed"><span class="type">Int</span><a href="#99953">b</a></span> <span class="keyword">else</span> <span class="typed"><span class="type">Int</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#99957">ac</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&gt;</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>) <span class="typed"><span class="type">Int</span><a href="#99954">c</a></span> <span class="keyword">else</span> <span class="typed"><span class="type">Int</span><a href="#99952">a</a></span>
      }
    }
    <span class="keyword">def</span> <span class="typed"><span class="type">(Int,Int)Unit</span><a id="99868">sort2</a></span>(<span class="typed"><span class="type">Int</span><a id="100002">off</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>, <span class="typed"><span class="type">Int</span><a id="100003">len</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>) {
      <span class="comment">// Insertion sort on smallest arrays</span>
      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#100003">len</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3141">&lt;</a></span> <span class="typed"><span class="type">Int(7)</span><span class="int">7</span></span>) {
        <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="100005">i</a></span> = <span class="typed"><span class="type">Int</span><a href="#100002">off</a></span>
        <span class="typed"><span class="type">Unit</span><a href="#100006" class="keyword">while</a></span> (<span class="typed"><span class="type">Int</span><a href="#100005">i</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3141">&lt;</a></span> <span class="typed"><span class="type">Int</span><a href="#100003">len</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+</a></span> <span class="typed"><span class="type">Int</span><a href="#100002">off</a></span>) {
          <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="100009">j</a></span> = <span class="typed"><span class="type">Int</span><a href="#100005">i</a></span>
          <span class="typed"><span class="type">Unit</span><a href="#100010" class="keyword">while</a></span> (<span class="typed"><span class="type">Int</span><a href="#100009">j</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&gt;</a></span> <span class="typed"><span class="type">Int</span><a href="#100002">off</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2749">&amp;&amp;</a></span> (<span class="typed"><span class="type">implicit scala.Predef.doubleWrapper : (Double)scala.runtime.RichDouble</span><a href="../Predef.scala.html#13515">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#100009">j</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span><span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>) <span class="typed"><span class="type">(Double)Int</span><a href="../runtime/RichDouble.scala.html#19329">compare</a></span> <span class="typed"><span class="type">(Int)Double</span><a href="../Array.scala.html#17253">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#100009">j</a></span>)) <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&gt;</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>) {
            <span class="typed"><span class="type">(Int,Int)Unit</span><a href="#99865">swap</a></span>(<span class="typed"><span class="type">Int</span><a href="#100009">j</a></span>, <span class="typed"><span class="type">Int</span><a href="#100009">j</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span><span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>)
            <span class="typed"><span class="type">Int</span><a href="#100009">j</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3146">-=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
          }
          <span class="typed"><span class="type">Int</span><a href="#100005">i</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
        }
      } <span class="keyword">else</span> {
        <span class="comment">// Choose a partition element, v</span>
        <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="100094">m</a></span> = <span class="typed"><span class="type">Int</span><a href="#100002">off</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+</a></span> (<span class="typed"><span class="type">Int</span><a href="#100003">len</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3092">&gt;&gt;</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>)        <span class="comment">// Small arrays, middle element</span>
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#100003">len</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&gt;</a></span> <span class="typed"><span class="type">Int(7)</span><span class="int">7</span></span>) {
          <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="100107">l</a></span> = <span class="typed"><span class="type">Int</span><a href="#100002">off</a></span>
          <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="100108">n</a></span> = <span class="typed"><span class="type">Int</span><a href="#100002">off</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+</a></span> <span class="typed"><span class="type">Int</span><a href="#100003">len</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
          <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#100003">len</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&gt;</a></span> <span class="typed"><span class="type">Int(40)</span><span class="int">40</span></span>) {        <span class="comment">// Big arrays, pseudomedian of 9</span>
            <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="100112">s</a></span> = <span class="typed"><span class="type">Int</span><a href="#100003">len</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3148">/</a></span> <span class="typed"><span class="type">Int(8)</span><span class="int">8</span></span>
            <span class="typed"><span class="type">Int</span><a href="#100107">l</a></span> = <span class="typed"><span class="type">(Int,Int,Int)Int</span><a href="#99867">med3</a></span>(<span class="typed"><span class="type">Int</span><a href="#100107">l</a></span>, <span class="typed"><span class="type">Int</span><a href="#100107">l</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3145">+</a></span><span class="typed"><span class="type">Int</span><a href="#100112">s</a></span>, <span class="typed"><span class="type">Int</span><a href="#100107">l</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3145">+</a></span><span class="typed"><span class="type">Int(2)</span><span class="int">2</span></span><span class="typed"><span class="type">(Int)Int</span><a id="3147">*</a></span><span class="typed"><span class="type">Int</span><a href="#100112">s</a></span>)
            <span class="typed"><span class="type">Int</span><a href="#100094">m</a></span> = <span class="typed"><span class="type">(Int,Int,Int)Int</span><a href="#99867">med3</a></span>(<span class="typed"><span class="type">Int</span><a href="#100094">m</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span><span class="typed"><span class="type">Int</span><a href="#100112">s</a></span>, <span class="typed"><span class="type">Int</span><a href="#100094">m</a></span>, <span class="typed"><span class="type">Int</span><a href="#100094">m</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3145">+</a></span><span class="typed"><span class="type">Int</span><a href="#100112">s</a></span>)
            <span class="typed"><span class="type">Int</span><a href="#100108">n</a></span> = <span class="typed"><span class="type">(Int,Int,Int)Int</span><a href="#99867">med3</a></span>(<span class="typed"><span class="type">Int</span><a href="#100108">n</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span><span class="typed"><span class="type">Int(2)</span><span class="int">2</span></span><span class="typed"><span class="type">(Int)Int</span><a id="3147">*</a></span><span class="typed"><span class="type">Int</span><a href="#100112">s</a></span>, <span class="typed"><span class="type">Int</span><a href="#100108">n</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span><span class="typed"><span class="type">Int</span><a href="#100112">s</a></span>, <span class="typed"><span class="type">Int</span><a href="#100108">n</a></span>)
          }
          <span class="typed"><span class="type">Int</span><a href="#100094">m</a></span> = <span class="typed"><span class="type">(Int,Int,Int)Int</span><a href="#99867">med3</a></span>(<span class="typed"><span class="type">Int</span><a href="#100107">l</a></span>, <span class="typed"><span class="type">Int</span><a href="#100094">m</a></span>, <span class="typed"><span class="type">Int</span><a href="#100108">n</a></span>) <span class="comment">// Mid-size, med of 3</span>
        }
        <span class="keyword">val</span> <span class="typed"><span class="type">Double</span><a id="100095">v</a></span> = <span class="typed"><span class="type">(Int)Double</span><a href="../Array.scala.html#17253">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#100094">m</a></span>)

        <span class="comment">// Establish Invariant: v* (&lt;v)* (&gt;v)* v*</span>
        <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="100096">a</a></span> = <span class="typed"><span class="type">Int</span><a href="#100002">off</a></span>
        <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="100097">b</a></span> = <span class="typed"><span class="type">Int</span><a href="#100096">a</a></span>
        <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="100098">c</a></span> = <span class="typed"><span class="type">Int</span><a href="#100002">off</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+</a></span> <span class="typed"><span class="type">Int</span><a href="#100003">len</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
        <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="100099">d</a></span> = <span class="typed"><span class="type">Int</span><a href="#100098">c</a></span>
        <span class="keyword">var</span> <span class="typed"><span class="type">Boolean</span><a id="100100">done</a></span> = <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>
        <span class="typed"><span class="type">Unit</span><a href="#100103" class="keyword">while</a></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a id="2745">!</a></span><span class="typed"><span class="type">Boolean</span><a href="#100100">done</a></span>) {
          <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="100217">bv</a></span> = <span class="typed"><span class="type">implicit scala.Predef.doubleWrapper : (Double)scala.runtime.RichDouble</span><a href="../Predef.scala.html#13515">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#100097">b</a></span>) <span class="typed"><span class="type">(Double)Int</span><a href="../runtime/RichDouble.scala.html#19329">compare</a></span> <span class="typed"><span class="type">Double</span><a href="#100095">v</a></span>
          <span class="typed"><span class="type">Unit</span><a href="#100219" class="keyword">while</a></span> (<span class="typed"><span class="type">Int</span><a href="#100097">b</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3142">&lt;=</a></span> <span class="typed"><span class="type">Int</span><a href="#100098">c</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2749">&amp;&amp;</a></span> <span class="typed"><span class="type">Int</span><a href="#100217">bv</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3142">&lt;=</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>) {
            <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#100217">bv</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3139">==</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>) {
              <span class="typed"><span class="type">(Int,Int)Unit</span><a href="#99865">swap</a></span>(<span class="typed"><span class="type">Int</span><a href="#100096">a</a></span>, <span class="typed"><span class="type">Int</span><a href="#100097">b</a></span>)
              <span class="typed"><span class="type">Int</span><a href="#100096">a</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
            }
            <span class="typed"><span class="type">Int</span><a href="#100097">b</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
            <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#100097">b</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3142">&lt;=</a></span> <span class="typed"><span class="type">Int</span><a href="#100098">c</a></span>) <span class="typed"><span class="type">Int</span><a href="#100217">bv</a></span> = <span class="typed"><span class="type">implicit scala.Predef.doubleWrapper : (Double)scala.runtime.RichDouble</span><a href="../Predef.scala.html#13515">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#100097">b</a></span>) <span class="typed"><span class="type">(Double)Int</span><a href="../runtime/RichDouble.scala.html#19329">compare</a></span> <span class="typed"><span class="type">Double</span><a href="#100095">v</a></span>
          }
          <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="100218">cv</a></span> = <span class="typed"><span class="type">implicit scala.Predef.doubleWrapper : (Double)scala.runtime.RichDouble</span><a href="../Predef.scala.html#13515">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#100098">c</a></span>) <span class="typed"><span class="type">(Double)Int</span><a href="../runtime/RichDouble.scala.html#19329">compare</a></span> <span class="typed"><span class="type">Double</span><a href="#100095">v</a></span>
          <span class="typed"><span class="type">Unit</span><a href="#100220" class="keyword">while</a></span> (<span class="typed"><span class="type">Int</span><a href="#100098">c</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3144">&gt;=</a></span> <span class="typed"><span class="type">Int</span><a href="#100097">b</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2749">&amp;&amp;</a></span> <span class="typed"><span class="type">Int</span><a href="#100218">cv</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3144">&gt;=</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>) {
            <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#100218">cv</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3139">==</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>) {
              <span class="typed"><span class="type">(Int,Int)Unit</span><a href="#99865">swap</a></span>(<span class="typed"><span class="type">Int</span><a href="#100098">c</a></span>, <span class="typed"><span class="type">Int</span><a href="#100099">d</a></span>)
              <span class="typed"><span class="type">Int</span><a href="#100099">d</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3146">-=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
            }
            <span class="typed"><span class="type">Int</span><a href="#100098">c</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3146">-=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
            <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#100098">c</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3144">&gt;=</a></span> <span class="typed"><span class="type">Int</span><a href="#100097">b</a></span>) <span class="typed"><span class="type">Int</span><a href="#100218">cv</a></span> = <span class="typed"><span class="type">implicit scala.Predef.doubleWrapper : (Double)scala.runtime.RichDouble</span><a href="../Predef.scala.html#13515">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#100098">c</a></span>) <span class="typed"><span class="type">(Double)Int</span><a href="../runtime/RichDouble.scala.html#19329">compare</a></span> <span class="typed"><span class="type">Double</span><a href="#100095">v</a></span>
          }
          <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#100097">b</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&gt;</a></span> <span class="typed"><span class="type">Int</span><a href="#100098">c</a></span>) {
            <span class="typed"><span class="type">Boolean</span><a href="#100100">done</a></span> = <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>
          } <span class="keyword">else</span> {
            <span class="typed"><span class="type">(Int,Int)Unit</span><a href="#99865">swap</a></span>(<span class="typed"><span class="type">Int</span><a href="#100097">b</a></span>, <span class="typed"><span class="type">Int</span><a href="#100098">c</a></span>)
            <span class="typed"><span class="type">Int</span><a href="#100098">c</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3146">-=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
            <span class="typed"><span class="type">Int</span><a href="#100097">b</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
          }
        }

        <span class="comment">// Swap partition elements back to middle</span>
        <span class="keyword">val</span> <span class="typed"><span class="type">Int</span><a id="100101">n</a></span> = <span class="typed"><span class="type">Int</span><a href="#100002">off</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+</a></span> <span class="typed"><span class="type">Int</span><a href="#100003">len</a></span>
        <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="100102">s</a></span> = <span class="typed"><span class="type">object Math</span><a href="../Math.scala.html#606">Math</a></span>.<span class="typed"><span class="type">(Int,Int)Int</span><a href="../Math.scala.html#25150">min</a></span>(<span class="typed"><span class="type">Int</span><a href="#100096">a</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span><span class="typed"><span class="type">Int</span><a href="#100002">off</a></span>, <span class="typed"><span class="type">Int</span><a href="#100097">b</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span><span class="typed"><span class="type">Int</span><a href="#100096">a</a></span>)
        <span class="typed"><span class="type">(Int,Int,Int)Unit</span><a href="#99866">vecswap</a></span>(<span class="typed"><span class="type">Int</span><a href="#100002">off</a></span>, <span class="typed"><span class="type">Int</span><a href="#100097">b</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span><span class="typed"><span class="type">Int</span><a href="#100102">s</a></span>, <span class="typed"><span class="type">Int</span><a href="#100102">s</a></span>)
        <span class="typed"><span class="type">Int</span><a href="#100102">s</a></span> = <span class="typed"><span class="type">object Math</span><a href="../Math.scala.html#606">Math</a></span>.<span class="typed"><span class="type">(Int,Int)Int</span><a href="../Math.scala.html#25150">min</a></span>(<span class="typed"><span class="type">Int</span><a href="#100099">d</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span><span class="typed"><span class="type">Int</span><a href="#100098">c</a></span>, <span class="typed"><span class="type">Int</span><a href="#100101">n</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span><span class="typed"><span class="type">Int</span><a href="#100099">d</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span><span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>)
        <span class="typed"><span class="type">(Int,Int,Int)Unit</span><a href="#99866">vecswap</a></span>(<span class="typed"><span class="type">Int</span><a href="#100097">b</a></span>,   <span class="typed"><span class="type">Int</span><a href="#100101">n</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span><span class="typed"><span class="type">Int</span><a href="#100102">s</a></span>, <span class="typed"><span class="type">Int</span><a href="#100102">s</a></span>)

        <span class="comment">// Recursively sort non-partition-elements</span>
        <span class="typed"><span class="type">Int</span><a href="#100102">s</a></span> = <span class="typed"><span class="type">Int</span><a href="#100097">b</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span> <span class="typed"><span class="type">Int</span><a href="#100096">a</a></span>
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#100102">s</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&gt;</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>)
          <span class="typed"><span class="type">(Int,Int)Unit</span><a href="#99868">sort2</a></span>(<span class="typed"><span class="type">Int</span><a href="#100002">off</a></span>, <span class="typed"><span class="type">Int</span><a href="#100102">s</a></span>)
        <span class="typed"><span class="type">Int</span><a href="#100102">s</a></span> = <span class="typed"><span class="type">Int</span><a href="#100099">d</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span> <span class="typed"><span class="type">Int</span><a href="#100098">c</a></span>
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#100102">s</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&gt;</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>)
          <span class="typed"><span class="type">(Int,Int)Unit</span><a href="#99868">sort2</a></span>(<span class="typed"><span class="type">Int</span><a href="#100101">n</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span><span class="typed"><span class="type">Int</span><a href="#100102">s</a></span>, <span class="typed"><span class="type">Int</span><a href="#100102">s</a></span>)
      }
    }
    <span class="typed"><span class="type">(Int,Int)Unit</span><a href="#99868">sort2</a></span>(<span class="typed"><span class="type">Int</span><a href="#66835">off</a></span>, <span class="typed"><span class="type">Int</span><a href="#66836">len</a></span>)
  }

  <span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(Array[Float],Int,Int)Unit</span><a id="66822">sort1</a></span>(<span class="typed"><span class="type">Array[Float]</span><a id="66831">x</a></span>: <span class="typed"><span class="type">Array[Float]</span><a href="../Array.scala.html#1070">Array</a></span>[Float], <span class="typed"><span class="type">Int</span><a id="66832">off</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>, <span class="typed"><span class="type">Int</span><a id="66833">len</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>) {
    <span class="keyword">def</span> <span class="typed"><span class="type">(Int,Int)Unit</span><a id="100510">swap</a></span>(<span class="typed"><span class="type">Int</span><a id="100514">a</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>, <span class="typed"><span class="type">Int</span><a id="100515">b</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>) {
      <span class="keyword">val</span> <span class="typed"><span class="type">Float</span><a id="100516">t</a></span> = <span class="typed"><span class="type">(Int)Float</span><a href="../Array.scala.html#17253">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#100514">a</a></span>)
      <span class="typed"><span class="type">Array[Float]</span><a href="#66831">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#100514">a</a></span>) = <span class="typed"><span class="type">(Int)Float</span><a href="../Array.scala.html#17253">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#100515">b</a></span>)
      <span class="typed"><span class="type">Array[Float]</span><a href="#66831">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#100515">b</a></span>) = <span class="typed"><span class="type">Float</span><a href="#100516">t</a></span>
    }
    <span class="keyword">def</span> <span class="typed"><span class="type">(Int,Int,Int)Unit</span><a id="100511">vecswap</a></span>(<span class="typed"><span class="type">Int</span><a id="100523">_a</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>, <span class="typed"><span class="type">Int</span><a id="100524">_b</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>, <span class="typed"><span class="type">Int</span><a id="100525">n</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>) {
      <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="100526">a</a></span> = <span class="typed"><span class="type">Int</span><a href="#100523">_a</a></span>
      <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="100527">b</a></span> = <span class="typed"><span class="type">Int</span><a href="#100524">_b</a></span>
      <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="100528">i</a></span> = <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>
      <span class="typed"><span class="type">Unit</span><a href="#100529" class="keyword">while</a></span> (<span class="typed"><span class="type">Int</span><a href="#100528">i</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3141">&lt;</a></span> <span class="typed"><span class="type">Int</span><a href="#100525">n</a></span>) {
        <span class="typed"><span class="type">(Int,Int)Unit</span><a href="#100510">swap</a></span>(<span class="typed"><span class="type">Int</span><a href="#100526">a</a></span>, <span class="typed"><span class="type">Int</span><a href="#100527">b</a></span>)
        <span class="typed"><span class="type">Int</span><a href="#100528">i</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
        <span class="typed"><span class="type">Int</span><a href="#100526">a</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
        <span class="typed"><span class="type">Int</span><a href="#100527">b</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
      }
    }
    <span class="keyword">def</span> <span class="typed"><span class="type">(Int,Int,Int)Int</span><a id="100512">med3</a></span>(<span class="typed"><span class="type">Int</span><a id="100597">a</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>, <span class="typed"><span class="type">Int</span><a id="100598">b</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>, <span class="typed"><span class="type">Int</span><a id="100599">c</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>) = {
      <span class="keyword">val</span> <span class="typed"><span class="type">Int</span><a id="100600">ab</a></span> = <span class="typed"><span class="type">implicit scala.Predef.floatWrapper : (Float)scala.runtime.RichFloat</span><a href="../Predef.scala.html#13514">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#100597">a</a></span>) <span class="typed"><span class="type">(Float)Int</span><a href="../runtime/RichFloat.scala.html#19348">compare</a></span> <span class="typed"><span class="type">(Int)Float</span><a href="../Array.scala.html#17253">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#100598">b</a></span>)
      <span class="keyword">val</span> <span class="typed"><span class="type">Int</span><a id="100601">bc</a></span> = <span class="typed"><span class="type">implicit scala.Predef.floatWrapper : (Float)scala.runtime.RichFloat</span><a href="../Predef.scala.html#13514">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#100598">b</a></span>) <span class="typed"><span class="type">(Float)Int</span><a href="../runtime/RichFloat.scala.html#19348">compare</a></span> <span class="typed"><span class="type">(Int)Float</span><a href="../Array.scala.html#17253">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#100599">c</a></span>)
      <span class="keyword">val</span> <span class="typed"><span class="type">Int</span><a id="100602">ac</a></span> = <span class="typed"><span class="type">implicit scala.Predef.floatWrapper : (Float)scala.runtime.RichFloat</span><a href="../Predef.scala.html#13514">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#100597">a</a></span>) <span class="typed"><span class="type">(Float)Int</span><a href="../runtime/RichFloat.scala.html#19348">compare</a></span> <span class="typed"><span class="type">(Int)Float</span><a href="../Array.scala.html#17253">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#100599">c</a></span>)
      <span class="typed"><span class="type">Int</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#100600">ab</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3141">&lt;</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>) {
        <span class="typed"><span class="type">Int</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#100601">bc</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3141">&lt;</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>) <span class="typed"><span class="type">Int</span><a href="#100598">b</a></span> <span class="keyword">else</span> <span class="typed"><span class="type">Int</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#100602">ac</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3141">&lt;</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>) <span class="typed"><span class="type">Int</span><a href="#100599">c</a></span> <span class="keyword">else</span> <span class="typed"><span class="type">Int</span><a href="#100597">a</a></span>
      } <span class="keyword">else</span> {
        <span class="typed"><span class="type">Int</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#100601">bc</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&gt;</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>) <span class="typed"><span class="type">Int</span><a href="#100598">b</a></span> <span class="keyword">else</span> <span class="typed"><span class="type">Int</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#100602">ac</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&gt;</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>) <span class="typed"><span class="type">Int</span><a href="#100599">c</a></span> <span class="keyword">else</span> <span class="typed"><span class="type">Int</span><a href="#100597">a</a></span>
      }
    }
    <span class="keyword">def</span> <span class="typed"><span class="type">(Int,Int)Unit</span><a id="100513">sort2</a></span>(<span class="typed"><span class="type">Int</span><a id="100648">off</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>, <span class="typed"><span class="type">Int</span><a id="100649">len</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>) {
      <span class="comment">// Insertion sort on smallest arrays</span>
      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#100649">len</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3141">&lt;</a></span> <span class="typed"><span class="type">Int(7)</span><span class="int">7</span></span>) {
        <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="100651">i</a></span> = <span class="typed"><span class="type">Int</span><a href="#100648">off</a></span>
        <span class="typed"><span class="type">Unit</span><a href="#100652" class="keyword">while</a></span> (<span class="typed"><span class="type">Int</span><a href="#100651">i</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3141">&lt;</a></span> <span class="typed"><span class="type">Int</span><a href="#100649">len</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+</a></span> <span class="typed"><span class="type">Int</span><a href="#100648">off</a></span>) {
          <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="100655">j</a></span> = <span class="typed"><span class="type">Int</span><a href="#100651">i</a></span>
          <span class="typed"><span class="type">Unit</span><a href="#100656" class="keyword">while</a></span> (<span class="typed"><span class="type">Int</span><a href="#100655">j</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&gt;</a></span> <span class="typed"><span class="type">Int</span><a href="#100648">off</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2749">&amp;&amp;</a></span> (<span class="typed"><span class="type">implicit scala.Predef.floatWrapper : (Float)scala.runtime.RichFloat</span><a href="../Predef.scala.html#13514">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#100655">j</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span><span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>) <span class="typed"><span class="type">(Float)Int</span><a href="../runtime/RichFloat.scala.html#19348">compare</a></span> <span class="typed"><span class="type">(Int)Float</span><a href="../Array.scala.html#17253">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#100655">j</a></span>)) <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&gt;</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>) {
            <span class="typed"><span class="type">(Int,Int)Unit</span><a href="#100510">swap</a></span>(<span class="typed"><span class="type">Int</span><a href="#100655">j</a></span>, <span class="typed"><span class="type">Int</span><a href="#100655">j</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span><span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>)
            <span class="typed"><span class="type">Int</span><a href="#100655">j</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3146">-=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
          }
          <span class="typed"><span class="type">Int</span><a href="#100651">i</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
        }
      } <span class="keyword">else</span> {
        <span class="comment">// Choose a partition element, v</span>
        <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="100740">m</a></span> = <span class="typed"><span class="type">Int</span><a href="#100648">off</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+</a></span> (<span class="typed"><span class="type">Int</span><a href="#100649">len</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3092">&gt;&gt;</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>)        <span class="comment">// Small arrays, middle element</span>
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#100649">len</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&gt;</a></span> <span class="typed"><span class="type">Int(7)</span><span class="int">7</span></span>) {
          <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="100753">l</a></span> = <span class="typed"><span class="type">Int</span><a href="#100648">off</a></span>
          <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="100754">n</a></span> = <span class="typed"><span class="type">Int</span><a href="#100648">off</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+</a></span> <span class="typed"><span class="type">Int</span><a href="#100649">len</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
          <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#100649">len</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&gt;</a></span> <span class="typed"><span class="type">Int(40)</span><span class="int">40</span></span>) {        <span class="comment">// Big arrays, pseudomedian of 9</span>
            <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="100758">s</a></span> = <span class="typed"><span class="type">Int</span><a href="#100649">len</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3148">/</a></span> <span class="typed"><span class="type">Int(8)</span><span class="int">8</span></span>
            <span class="typed"><span class="type">Int</span><a href="#100753">l</a></span> = <span class="typed"><span class="type">(Int,Int,Int)Int</span><a href="#100512">med3</a></span>(<span class="typed"><span class="type">Int</span><a href="#100753">l</a></span>, <span class="typed"><span class="type">Int</span><a href="#100753">l</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3145">+</a></span><span class="typed"><span class="type">Int</span><a href="#100758">s</a></span>, <span class="typed"><span class="type">Int</span><a href="#100753">l</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3145">+</a></span><span class="typed"><span class="type">Int(2)</span><span class="int">2</span></span><span class="typed"><span class="type">(Int)Int</span><a id="3147">*</a></span><span class="typed"><span class="type">Int</span><a href="#100758">s</a></span>)
            <span class="typed"><span class="type">Int</span><a href="#100740">m</a></span> = <span class="typed"><span class="type">(Int,Int,Int)Int</span><a href="#100512">med3</a></span>(<span class="typed"><span class="type">Int</span><a href="#100740">m</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span><span class="typed"><span class="type">Int</span><a href="#100758">s</a></span>, <span class="typed"><span class="type">Int</span><a href="#100740">m</a></span>, <span class="typed"><span class="type">Int</span><a href="#100740">m</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3145">+</a></span><span class="typed"><span class="type">Int</span><a href="#100758">s</a></span>)
            <span class="typed"><span class="type">Int</span><a href="#100754">n</a></span> = <span class="typed"><span class="type">(Int,Int,Int)Int</span><a href="#100512">med3</a></span>(<span class="typed"><span class="type">Int</span><a href="#100754">n</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span><span class="typed"><span class="type">Int(2)</span><span class="int">2</span></span><span class="typed"><span class="type">(Int)Int</span><a id="3147">*</a></span><span class="typed"><span class="type">Int</span><a href="#100758">s</a></span>, <span class="typed"><span class="type">Int</span><a href="#100754">n</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span><span class="typed"><span class="type">Int</span><a href="#100758">s</a></span>, <span class="typed"><span class="type">Int</span><a href="#100754">n</a></span>)
          }
          <span class="typed"><span class="type">Int</span><a href="#100740">m</a></span> = <span class="typed"><span class="type">(Int,Int,Int)Int</span><a href="#100512">med3</a></span>(<span class="typed"><span class="type">Int</span><a href="#100753">l</a></span>, <span class="typed"><span class="type">Int</span><a href="#100740">m</a></span>, <span class="typed"><span class="type">Int</span><a href="#100754">n</a></span>) <span class="comment">// Mid-size, med of 3</span>
        }
        <span class="keyword">val</span> <span class="typed"><span class="type">Float</span><a id="100741">v</a></span> = <span class="typed"><span class="type">(Int)Float</span><a href="../Array.scala.html#17253">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#100740">m</a></span>)

        <span class="comment">// Establish Invariant: v* (&lt;v)* (&gt;v)* v*</span>
        <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="100742">a</a></span> = <span class="typed"><span class="type">Int</span><a href="#100648">off</a></span>
        <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="100743">b</a></span> = <span class="typed"><span class="type">Int</span><a href="#100742">a</a></span>
        <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="100744">c</a></span> = <span class="typed"><span class="type">Int</span><a href="#100648">off</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+</a></span> <span class="typed"><span class="type">Int</span><a href="#100649">len</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
        <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="100745">d</a></span> = <span class="typed"><span class="type">Int</span><a href="#100744">c</a></span>
        <span class="keyword">var</span> <span class="typed"><span class="type">Boolean</span><a id="100746">done</a></span> = <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>
        <span class="typed"><span class="type">Unit</span><a href="#100749" class="keyword">while</a></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a id="2745">!</a></span><span class="typed"><span class="type">Boolean</span><a href="#100746">done</a></span>) {
          <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="100863">bv</a></span> = <span class="typed"><span class="type">implicit scala.Predef.floatWrapper : (Float)scala.runtime.RichFloat</span><a href="../Predef.scala.html#13514">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#100743">b</a></span>) <span class="typed"><span class="type">(Float)Int</span><a href="../runtime/RichFloat.scala.html#19348">compare</a></span> <span class="typed"><span class="type">Float</span><a href="#100741">v</a></span>
          <span class="typed"><span class="type">Unit</span><a href="#100865" class="keyword">while</a></span> (<span class="typed"><span class="type">Int</span><a href="#100743">b</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3142">&lt;=</a></span> <span class="typed"><span class="type">Int</span><a href="#100744">c</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2749">&amp;&amp;</a></span> <span class="typed"><span class="type">Int</span><a href="#100863">bv</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3142">&lt;=</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>) {
            <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#100863">bv</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3139">==</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>) {
              <span class="typed"><span class="type">(Int,Int)Unit</span><a href="#100510">swap</a></span>(<span class="typed"><span class="type">Int</span><a href="#100742">a</a></span>, <span class="typed"><span class="type">Int</span><a href="#100743">b</a></span>)
              <span class="typed"><span class="type">Int</span><a href="#100742">a</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
            }
            <span class="typed"><span class="type">Int</span><a href="#100743">b</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
            <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#100743">b</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3142">&lt;=</a></span> <span class="typed"><span class="type">Int</span><a href="#100744">c</a></span>) <span class="typed"><span class="type">Int</span><a href="#100863">bv</a></span> = <span class="typed"><span class="type">implicit scala.Predef.floatWrapper : (Float)scala.runtime.RichFloat</span><a href="../Predef.scala.html#13514">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#100743">b</a></span>) <span class="typed"><span class="type">(Float)Int</span><a href="../runtime/RichFloat.scala.html#19348">compare</a></span> <span class="typed"><span class="type">Float</span><a href="#100741">v</a></span>
          }
          <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="100864">cv</a></span> = <span class="typed"><span class="type">implicit scala.Predef.floatWrapper : (Float)scala.runtime.RichFloat</span><a href="../Predef.scala.html#13514">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#100744">c</a></span>) <span class="typed"><span class="type">(Float)Int</span><a href="../runtime/RichFloat.scala.html#19348">compare</a></span> <span class="typed"><span class="type">Float</span><a href="#100741">v</a></span>
          <span class="typed"><span class="type">Unit</span><a href="#100866" class="keyword">while</a></span> (<span class="typed"><span class="type">Int</span><a href="#100744">c</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3144">&gt;=</a></span> <span class="typed"><span class="type">Int</span><a href="#100743">b</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2749">&amp;&amp;</a></span> <span class="typed"><span class="type">Int</span><a href="#100864">cv</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3144">&gt;=</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>) {
            <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#100864">cv</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3139">==</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>) {
              <span class="typed"><span class="type">(Int,Int)Unit</span><a href="#100510">swap</a></span>(<span class="typed"><span class="type">Int</span><a href="#100744">c</a></span>, <span class="typed"><span class="type">Int</span><a href="#100745">d</a></span>)
              <span class="typed"><span class="type">Int</span><a href="#100745">d</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3146">-=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
            }
            <span class="typed"><span class="type">Int</span><a href="#100744">c</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3146">-=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
            <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#100744">c</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3144">&gt;=</a></span> <span class="typed"><span class="type">Int</span><a href="#100743">b</a></span>) <span class="typed"><span class="type">Int</span><a href="#100864">cv</a></span> = <span class="typed"><span class="type">implicit scala.Predef.floatWrapper : (Float)scala.runtime.RichFloat</span><a href="../Predef.scala.html#13514">x</a></span>(<span class="typed"><span class="type">Int</span><a href="#100744">c</a></span>) <span class="typed"><span class="type">(Float)Int</span><a href="../runtime/RichFloat.scala.html#19348">compare</a></span> <span class="typed"><span class="type">Float</span><a href="#100741">v</a></span>
          }
          <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#100743">b</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&gt;</a></span> <span class="typed"><span class="type">Int</span><a href="#100744">c</a></span>) {
            <span class="typed"><span class="type">Boolean</span><a href="#100746">done</a></span> = <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>
          } <span class="keyword">else</span> {
            <span class="typed"><span class="type">(Int,Int)Unit</span><a href="#100510">swap</a></span>(<span class="typed"><span class="type">Int</span><a href="#100743">b</a></span>, <span class="typed"><span class="type">Int</span><a href="#100744">c</a></span>)
            <span class="typed"><span class="type">Int</span><a href="#100744">c</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3146">-=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
            <span class="typed"><span class="type">Int</span><a href="#100743">b</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
          }
        }

        <span class="comment">// Swap partition elements back to middle</span>
        <span class="keyword">val</span> <span class="typed"><span class="type">Int</span><a id="100747">n</a></span> = <span class="typed"><span class="type">Int</span><a href="#100648">off</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+</a></span> <span class="typed"><span class="type">Int</span><a href="#100649">len</a></span>
        <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="100748">s</a></span> = <span class="typed"><span class="type">object Math</span><a href="../Math.scala.html#606">Math</a></span>.<span class="typed"><span class="type">(Int,Int)Int</span><a href="../Math.scala.html#25150">min</a></span>(<span class="typed"><span class="type">Int</span><a href="#100742">a</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span><span class="typed"><span class="type">Int</span><a href="#100648">off</a></span>, <span class="typed"><span class="type">Int</span><a href="#100743">b</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span><span class="typed"><span class="type">Int</span><a href="#100742">a</a></span>)
        <span class="typed"><span class="type">(Int,Int,Int)Unit</span><a href="#100511">vecswap</a></span>(<span class="typed"><span class="type">Int</span><a href="#100648">off</a></span>, <span class="typed"><span class="type">Int</span><a href="#100743">b</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span><span class="typed"><span class="type">Int</span><a href="#100748">s</a></span>, <span class="typed"><span class="type">Int</span><a href="#100748">s</a></span>)
        <span class="typed"><span class="type">Int</span><a href="#100748">s</a></span> = <span class="typed"><span class="type">object Math</span><a href="../Math.scala.html#606">Math</a></span>.<span class="typed"><span class="type">(Int,Int)Int</span><a href="../Math.scala.html#25150">min</a></span>(<span class="typed"><span class="type">Int</span><a href="#100745">d</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span><span class="typed"><span class="type">Int</span><a href="#100744">c</a></span>, <span class="typed"><span class="type">Int</span><a href="#100747">n</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span><span class="typed"><span class="type">Int</span><a href="#100745">d</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span><span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>)
        <span class="typed"><span class="type">(Int,Int,Int)Unit</span><a href="#100511">vecswap</a></span>(<span class="typed"><span class="type">Int</span><a href="#100743">b</a></span>,   <span class="typed"><span class="type">Int</span><a href="#100747">n</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span><span class="typed"><span class="type">Int</span><a href="#100748">s</a></span>, <span class="typed"><span class="type">Int</span><a href="#100748">s</a></span>)

        <span class="comment">// Recursively sort non-partition-elements</span>
        <span class="typed"><span class="type">Int</span><a href="#100748">s</a></span> = <span class="typed"><span class="type">Int</span><a href="#100743">b</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span> <span class="typed"><span class="type">Int</span><a href="#100742">a</a></span>
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#100748">s</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&gt;</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>)
          <span class="typed"><span class="type">(Int,Int)Unit</span><a href="#100513">sort2</a></span>(<span class="typed"><span class="type">Int</span><a href="#100648">off</a></span>, <span class="typed"><span class="type">Int</span><a href="#100748">s</a></span>)
        <span class="typed"><span class="type">Int</span><a href="#100748">s</a></span> = <span class="typed"><span class="type">Int</span><a href="#100745">d</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span> <span class="typed"><span class="type">Int</span><a href="#100744">c</a></span>
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#100748">s</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&gt;</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>)
          <span class="typed"><span class="type">(Int,Int)Unit</span><a href="#100513">sort2</a></span>(<span class="typed"><span class="type">Int</span><a href="#100747">n</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span><span class="typed"><span class="type">Int</span><a href="#100748">s</a></span>, <span class="typed"><span class="type">Int</span><a href="#100748">s</a></span>)
      }
    }
    <span class="typed"><span class="type">(Int,Int)Unit</span><a href="#100513">sort2</a></span>(<span class="typed"><span class="type">Int</span><a href="#66832">off</a></span>, <span class="typed"><span class="type">Int</span><a href="#66833">len</a></span>)
  }

  <span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">[K](Array[K],Int,Int,Array[K],(K, K) =&gt; Boolean)Unit</span><a id="66823">stableSort</a></span>[<span class="typed"><span class="type">&gt;: Nothing &lt;: Any</span><a id="66825">K</a></span>](<span class="typed"><span class="type">Array[K]</span><a id="98399">a</a></span>: <span class="typed"><span class="type">Array[K]</span><a href="../Array.scala.html#1070">Array</a></span>[K], <span class="typed"><span class="type">Int</span><a id="98400">lo</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>, <span class="typed"><span class="type">Int</span><a id="98401">hi</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>, <span class="typed"><span class="type">Array[K]</span><a id="98402">scratch</a></span>: <span class="typed"><span class="type">Array[K]</span><a href="../Array.scala.html#1070">Array</a></span>[K], <span class="typed"><span class="type">(K, K) =&gt; Boolean</span><a id="98403">f</a></span>: (K,K) =&gt; Boolean) {
    <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#98400">lo</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3141">&lt;</a></span> <span class="typed"><span class="type">Int</span><a href="#98401">hi</a></span>) {
      <span class="keyword">val</span> <span class="typed"><span class="type">Int</span><a id="101157">mid</a></span> = (<span class="typed"><span class="type">Int</span><a href="#98400">lo</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3145">+</a></span><span class="typed"><span class="type">Int</span><a href="#98401">hi</a></span>) <span class="typed"><span class="type">(Int)Int</span><a id="3148">/</a></span> <span class="typed"><span class="type">Int(2)</span><span class="int">2</span></span>
      <span class="typed"><span class="type">(Array[K],Int,Int,Array[K],(K, K) =&gt; Boolean)Unit</span><a href="#66823">stableSort</a></span>(<span class="typed"><span class="type">Array[K]</span><a href="#98399">a</a></span>, <span class="typed"><span class="type">Int</span><a href="#98400">lo</a></span>, <span class="typed"><span class="type">Int</span><a href="#101157">mid</a></span>, <span class="typed"><span class="type">Array[K]</span><a href="#98402">scratch</a></span>, <span class="typed"><span class="type">(K, K) =&gt; Boolean</span><a href="#98403">f</a></span>)
      <span class="typed"><span class="type">(Array[K],Int,Int,Array[K],(K, K) =&gt; Boolean)Unit</span><a href="#66823">stableSort</a></span>(<span class="typed"><span class="type">Array[K]</span><a href="#98399">a</a></span>, <span class="typed"><span class="type">Int</span><a href="#101157">mid</a></span><span class="typed"><span class="type">(Int)Int</span><a id="3145">+</a></span><span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>, <span class="typed"><span class="type">Int</span><a href="#98401">hi</a></span>, <span class="typed"><span class="type">Array[K]</span><a href="#98402">scratch</a></span>, <span class="typed"><span class="type">(K, K) =&gt; Boolean</span><a href="#98403">f</a></span>)
      <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="101158">k</a></span>, <span class="typed"><span class="type">Int</span><a id="101159">t_lo</a></span> = <span class="typed"><span class="type">Int</span><a href="#98400">lo</a></span>
      <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="101160">t_hi</a></span> = <span class="typed"><span class="type">Int</span><a href="#101157">mid</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
      <span class="typed"><span class="type">Unit</span><a href="#101161" class="keyword">while</a></span> (<span class="typed"><span class="type">Int</span><a href="#101158">k</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3142">&lt;=</a></span> <span class="typed"><span class="type">Int</span><a href="#98401">hi</a></span>) {
        <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> ((<span class="typed"><span class="type">Int</span><a href="#101159">t_lo</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3142">&lt;=</a></span> <span class="typed"><span class="type">Int</span><a href="#101157">mid</a></span>) <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2749">&amp;&amp;</a></span> ((<span class="typed"><span class="type">Int</span><a href="#101160">t_hi</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&gt;</a></span> <span class="typed"><span class="type">Int</span><a href="#98401">hi</a></span>) <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2748">||</a></span> (<span class="typed"><span class="type">=&gt; Boolean</span><a id="2745">!</a></span><span class="typed"><span class="type">(K,K)Boolean</span><a href="../Function2.scala.html#20399">f</a></span>(<span class="typed"><span class="type">(Int)K</span><a href="../Array.scala.html#17253">a</a></span>(<span class="typed"><span class="type">Int</span><a href="#101160">t_hi</a></span>), <span class="typed"><span class="type">(Int)K</span><a href="../Array.scala.html#17253">a</a></span>(<span class="typed"><span class="type">Int</span><a href="#101159">t_lo</a></span>))))) { 
          <span class="typed"><span class="type">Array[K]</span><a href="#98402">scratch</a></span>(<span class="typed"><span class="type">Int</span><a href="#101158">k</a></span>) = <span class="typed"><span class="type">(Int)K</span><a href="../Array.scala.html#17253">a</a></span>(<span class="typed"><span class="type">Int</span><a href="#101159">t_lo</a></span>) 
          <span class="typed"><span class="type">Int</span><a href="#101159">t_lo</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span> 
        } <span class="keyword">else</span> { 
          <span class="typed"><span class="type">Array[K]</span><a href="#98402">scratch</a></span>(<span class="typed"><span class="type">Int</span><a href="#101158">k</a></span>) = <span class="typed"><span class="type">(Int)K</span><a href="../Array.scala.html#17253">a</a></span>(<span class="typed"><span class="type">Int</span><a href="#101160">t_hi</a></span>) 
          <span class="typed"><span class="type">Int</span><a href="#101160">t_hi</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span> 
        }
        <span class="typed"><span class="type">Int</span><a href="#101158">k</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
      }
      <span class="typed"><span class="type">Int</span><a href="#101158">k</a></span> = <span class="typed"><span class="type">Int</span><a href="#98400">lo</a></span>
      <span class="typed"><span class="type">Unit</span><a href="#101322" class="keyword">while</a></span> (<span class="typed"><span class="type">Int</span><a href="#101158">k</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3142">&lt;=</a></span> <span class="typed"><span class="type">Int</span><a href="#98401">hi</a></span>) {
        <span class="typed"><span class="type">Array[K]</span><a href="#98399">a</a></span>(<span class="typed"><span class="type">Int</span><a href="#101158">k</a></span>) = <span class="typed"><span class="type">(Int)K</span><a href="../Array.scala.html#17253">scratch</a></span>(<span class="typed"><span class="type">Int</span><a href="#101158">k</a></span>)
        <span class="typed"><span class="type">Int</span><a href="#101158">k</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
      }
    }
  }

  <span class="comment">// for testing</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">(Array[String])Unit</span><a id="66826">main</a></span>(<span class="typed"><span class="type">Array[String]</span><a id="101349">args</a></span>: <span class="typed"><span class="type">Array[String]</span><a href="../Array.scala.html#1070">Array</a></span>[String]) {
    <span class="keyword">val</span> <span class="typed"><span class="type">Array[(Int, java.lang.String)]</span><a id="101350">tuples</a></span> = <span class="typed"><span class="type">((Int, java.lang.String)*)Array[(Int, java.lang.String)]</span><a href="../Array.scala.html#17073">Array</a></span>(
      <span class="typed"><span class="type">(Int,java.lang.String)(Int, java.lang.String)</span><a href="../Tuple2.scala.html#20366">(</a></span><span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>, <span class="typed"><span class="type">java.lang.String(&quot;one&quot;)</span><span class="string">&quot;one&quot;</span></span>), <span class="typed"><span class="type">(Int,java.lang.String)(Int, java.lang.String)</span><a href="../Tuple2.scala.html#20366">(</a></span><span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>, <span class="typed"><span class="type">java.lang.String(&quot;un&quot;)</span><span class="string">&quot;un&quot;</span></span>), <span class="typed"><span class="type">(Int,java.lang.String)(Int, java.lang.String)</span><a href="../Tuple2.scala.html#20366">(</a></span><span class="typed"><span class="type">Int(3)</span><span class="int">3</span></span>, <span class="typed"><span class="type">java.lang.String(&quot;three&quot;)</span><span class="string">&quot;three&quot;</span></span>), <span class="typed"><span class="type">(Int,java.lang.String)(Int, java.lang.String)</span><a href="../Tuple2.scala.html#20366">(</a></span><span class="typed"><span class="type">Int(2)</span><span class="int">2</span></span>, <span class="typed"><span class="type">java.lang.String(&quot;deux&quot;)</span><span class="string">&quot;deux&quot;</span></span>),
      <span class="typed"><span class="type">(Int,java.lang.String)(Int, java.lang.String)</span><a href="../Tuple2.scala.html#20366">(</a></span><span class="typed"><span class="type">Int(2)</span><span class="int">2</span></span>, <span class="typed"><span class="type">java.lang.String(&quot;two&quot;)</span><span class="string">&quot;two&quot;</span></span>), <span class="typed"><span class="type">(Int,java.lang.String)(Int, java.lang.String)</span><a href="../Tuple2.scala.html#20366">(</a></span><span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>, <span class="typed"><span class="type">java.lang.String(&quot;zero&quot;)</span><span class="string">&quot;zero&quot;</span></span>), <span class="typed"><span class="type">(Int,java.lang.String)(Int, java.lang.String)</span><a href="../Tuple2.scala.html#20366">(</a></span><span class="typed"><span class="type">Int(3)</span><span class="int">3</span></span>, <span class="typed"><span class="type">java.lang.String(&quot;trois&quot;)</span><span class="string">&quot;trois&quot;</span></span>)
    )
    <span class="keyword">val</span> <span class="typed"><span class="type">Array[Int]</span><a id="101351">integers</a></span> = <span class="typed"><span class="type">(Int*)Array[Int]</span><a href="../Array.scala.html#17080">Array</a></span>(
      <span class="typed"><span class="type">Int(3)</span><span class="int">3</span></span>, <span class="typed"><span class="type">Int(4)</span><span class="int">4</span></span>, <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>, <span class="typed"><span class="type">Int(4)</span><span class="int">4</span></span>, <span class="typed"><span class="type">Int(5)</span><span class="int">5</span></span>, <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>, <span class="typed"><span class="type">Int(3)</span><span class="int">3</span></span>, <span class="typed"><span class="type">Int(3)</span><span class="int">3</span></span>, <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>
    )
    <span class="keyword">val</span> <span class="typed"><span class="type">Array[Double]</span><a id="101352">doubles</a></span> = <span class="typed"><span class="type">(Double*)Array[Double]</span><a href="../Array.scala.html#17083">Array</a></span>(
      <span class="typed"><span class="type">Double(3.4054752250314283E9)</span><span class="double">3.4054752250314283E9</span></span>,
      <span class="typed"><span class="type">Double(4.9663151227666664E10)</span><span class="double">4.9663151227666664E10</span></span>,
<span class="comment">// 0.0/0.0 is interpreted as Nan      </span>
<span class="comment">//      0.0/0.0,</span>
      <span class="typed"><span class="type">Double(4.9663171987125E10)</span><span class="double">4.9663171987125E10</span></span>,
      <span class="typed"><span class="type">Double(5.785996973446602E9)</span><span class="double">5.785996973446602E9</span></span>,
<span class="comment">//      0.0/0.0,</span>
      <span class="typed"><span class="type">Double(3.973064849653333E10)</span><span class="double">3.973064849653333E10</span></span>,
      <span class="typed"><span class="type">Double(3.724737288678125E10)</span><span class="double">3.724737288678125E10</span></span>
<span class="comment">//      0.0/0.0</span>
    )
    <span class="keyword">val</span> <span class="typed"><span class="type">Array[Float]</span><a id="101353">floats</a></span> = <span class="typed"><span class="type">(Float*)Array[Float]</span><a href="../Array.scala.html#17082">Array</a></span>(
      <span class="typed"><span class="type">Float(3.40547533E9)</span><span class="float">3.4054752250314283E9f</span></span>,
      <span class="typed"><span class="type">Float(4.9663152E10)</span><span class="float">4.9663151227666664E10f</span></span>,
<span class="comment">//      0.0f/0.0f,</span>
      <span class="typed"><span class="type">Float(4.9663173E10)</span><span class="float">4.9663171987125E10f</span></span>,
      <span class="typed"><span class="type">Float(5.7859968E9)</span><span class="float">5.785996973446602E9f</span></span>,
<span class="comment">//      0.0f/0.0f,</span>
      <span class="typed"><span class="type">Float(3.9730647E10)</span><span class="float">3.973064849653333E10f</span></span>,
      <span class="typed"><span class="type">Float(3.7247373E10)</span><span class="float">3.724737288678125E10f</span></span>
<span class="comment">//      0.0f/0.0f</span>
    )
    <span class="typed"><span class="type">object scala.util.Sorting</span><a href="#6703">Sorting</a></span> <span class="typed"><span class="type">(Array[(Int, java.lang.String)])(implicit ((Int, java.lang.String)) =&gt; Ordered[(Int, java.lang.String)])Unit</span><a href="#66795">quickSort</a></span> <span class="typed"><span class="type">Array[(Int, java.lang.String)]</span><a href="#101350">tuples</a></span>
    <span class="typed"><span class="type">(Any)Unit</span><a href="../Predef.scala.html#13489">println</a></span>(<span class="typed"><span class="type">Array[(Int, java.lang.String)]</span><a href="#101350">tuples</a></span>.<span class="typed"><span class="type">=&gt; List[(Int, java.lang.String)]</span><a href="../Iterable.scala.html#17360">toList</a></span>)

    <span class="typed"><span class="type">object scala.util.Sorting</span><a href="#6703">Sorting</a></span> <span class="typed"><span class="type">(Array[Int])Unit</span><a href="#66798">quickSort</a></span> <span class="typed"><span class="type">Array[Int]</span><a href="#101351">integers</a></span>
    <span class="typed"><span class="type">(Any)Unit</span><a href="../Predef.scala.html#13489">println</a></span>(<span class="typed"><span class="type">Array[Int]</span><a href="#101351">integers</a></span>.<span class="typed"><span class="type">=&gt; List[Int]</span><a href="../Iterable.scala.html#17360">toList</a></span>)

    <span class="typed"><span class="type">object scala.util.Sorting</span><a href="#6703">Sorting</a></span> <span class="typed"><span class="type">(Array[Double])Unit</span><a href="#66794">quickSort</a></span> <span class="typed"><span class="type">Array[Double]</span><a href="#101352">doubles</a></span>
    <span class="typed"><span class="type">(Any)Unit</span><a href="../Predef.scala.html#13489">println</a></span>(<span class="typed"><span class="type">Array[Double]</span><a href="#101352">doubles</a></span>.<span class="typed"><span class="type">=&gt; List[Double]</span><a href="../Iterable.scala.html#17360">toList</a></span>)

    <span class="typed"><span class="type">object scala.util.Sorting</span><a href="#6703">Sorting</a></span> <span class="typed"><span class="type">(Array[Float])Unit</span><a href="#66799">quickSort</a></span> <span class="typed"><span class="type">Array[Float]</span><a href="#101353">floats</a></span>
    <span class="typed"><span class="type">(Any)Unit</span><a href="../Predef.scala.html#13489">println</a></span>(<span class="typed"><span class="type">Array[Float]</span><a href="#101353">floats</a></span>.<span class="typed"><span class="type">=&gt; List[Float]</span><a href="../Iterable.scala.html#17360">toList</a></span>)
  }
}

<span class="comment">/** &lt;p&gt;
 *    A &lt;code&gt;RichSorting&lt;/code&gt; object is generally created implicitly through
 *    the use of the &lt;code&gt;sort&lt;/code&gt; function on an arbitrary sequence, where
 *    the items are ordered.
 *  &lt;/p&gt;
 */</span>
<span class="keyword">class</span> <span class="typed"><span class="type">class RichSorting[K &lt;: Ordered[K]] extends java.lang.Object with ScalaObject</span><a id="6687">RichSorting</a></span>[<span class="typed"><span class="type">&gt;: Nothing &lt;: Ordered[K]</span><a id="15884">K</a></span> &lt;: Ordered[K]](<span class="typed"><span class="type">Seq[K]</span><span id="66866"><a id="66869">s</a></span></span>: <span class="typed"><span class="type">Seq[K]</span><a href="../Seq.scala.html#761">Seq</a></span>[K]) {

  <span class="comment">/** Returns an array with a sorted copy of the RichSorting's sequence.
   */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Array[K]</span><a id="66868">sort</a></span> = <span class="typed"><span class="type">object scala.util.Sorting</span><a href="#6703">Sorting</a></span>.<span class="typed"><span class="type">(Seq[K])(implicit (K) =&gt; Ordered[K])Array[K]</span><a href="#66809">stableSort</a></span>(<span class="typed"><span class="type">Seq[K]</span><a href="#66866">s</a></span>)
}

        </pre>
    </body>
</html>