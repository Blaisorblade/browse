<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/concurrent/pilib.scala</title>
        <script type="text/javascript" src="../../jquery-all.js"></script>
        <script type="text/javascript" src="../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../style.css" title="Style">
    </head>
    <body>
        <pre>
/*                     __                                               *\
**     ________ ___   / /  ___     Scala API                            **
**    / __/ __// _ | / /  / _ |    (c) 2003-2009, LAMP/EPFL             **
**  __\ \/ /__/ __ |/ /__/ __ |    http://scala-lang.org/               **
** /____/\___/_/ |_/____/_/ | |                                         **
**                          |/                                          **
\*                                                                      */

// $Id: pilib.scala 18437 2009-08-03 15:56:44Z phaller $


<span class="keyword">package</span> scala.concurrent

/** &lt;p&gt;
 *    Library for using Pi-calculus concurrent primitives in
 *    &lt;a href=&quot;http://scala-lang.org/&quot; target=&quot;_top&quot;&gt;Scala&lt;/a&gt;. As an
 *    example, the definition of a two-place buffer using the &lt;code&gt;pilib&lt;/code&gt;
 *    library looks like:
 *  &lt;/p&gt;&lt;pre&gt;
 *  &lt;b&gt;def&lt;/b&gt; Buffer[a](put: Chan[a], get: Chan[a]) {
 *    &lt;b&gt;def&lt;/b&gt; B0 { choice ( put * { x =&gt; B1(x) } ) }
 *    &lt;b&gt;def&lt;/b&gt; B1(x: a) { choice ( get(x) * B0, put * { y =&gt; B2(x, y) } ) }
 *    &lt;b&gt;def&lt;/b&gt; B2(x: a, y: a) { choice ( get(x) * B1(y) ) }
 *    B0
 *  }
 *  &lt;/pre&gt;
 *
 *  @see     &lt;a href=&quot;http://scala-lang.org/docu/papers.html&quot; target=&quot;_top&quot;&gt;
 *           PiLib: A Hosted Language for Pi-Calculus Style Concurrency&lt;/a&gt;
 *  @author  Vincent Cremet, Martin Odersky
 *  @version 1.0
 */ 
<span class="keyword">object</span> <a title="object scala.concurrent.pilib" id="8354">pilib</a> <a href="../ScalaObject.scala.html#957" title="ScalaObject">{</a>

  <span class="keyword">import</span> TaskRunners.threadRunner

  //////////////////////////////// SPAWN /////////////////////////////////

  /**
   * Run several processes in parallel using the following syntax:
   * &lt;code&gt;spawn &amp;lt; p&lt;sub&gt;1&lt;/sub&gt; | ... | p&lt;sub&gt;n&lt;/sub&gt; &amp;gt;&lt;/code&gt;
   */
  <span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class Spawn extends java.lang.Object with ScalaObject" id="156466">Spawn</a> <a href="../ScalaObject.scala.html#957" title="ScalaObject">{</a>
    <span class="keyword">def</span> <a title="(p: =&gt; Unit)scala.concurrent.pilib.Spawn" id="156493">&lt;</a>(<a title="=&gt; Unit" id="156504">p</a>: =&gt; Unit): <a href="#156466" title="scala.concurrent.pilib.Spawn">Spawn</a>
    <span class="keyword">def</span> <a title="(p: =&gt; Unit)scala.concurrent.pilib.Spawn" id="156494">|</a>(<a title="=&gt; Unit" id="156514">p</a>: =&gt; Unit): <a href="#156466" title="scala.concurrent.pilib.Spawn">Spawn</a>
    <span class="keyword">def</span> <a title="=&gt; Unit" id="156495">&gt;</a> : <span title="Unit">Unit</span>
  }
  <span class="keyword">val</span> <a title="scala.concurrent.pilib.Spawn" id="156467">spawn</a> = <a href="#156491" title="scala.concurrent.pilib.Spawn{ ... }" class="keyword">new</a> <a href="#156466" title="anonymous class $anon extends scala.concurrent.pilib.Spawn" id="156491">Spawn</a> {
  //object spawn extends Spawn { // BUG !
    <span class="keyword">def</span> <a title="(p: =&gt; Unit)scala.concurrent.pilib.Spawn" id="156497">&lt;</a>(<a title="=&gt; Unit" id="156503">p</a>: =&gt; Unit): <a href="#156466" title="scala.concurrent.pilib.Spawn">Spawn</a> = { scala.concurrent.<a href="ops.scala.html#8195" title="object scala.concurrent.ops">ops</a>.<a href="ops.scala.html#52268" title="(p: =&gt; Unit)(implicit runner: scala.concurrent.TaskRunner[Unit])Unit">spawn</a><a href="TaskRunners.scala.html#71379" title="=&gt; scala.concurrent.TaskRunner[Unit]">(</a><a href="#156503" title="=&gt; Unit">p</a>); <a href="#156491" title="scala.concurrent.pilib.Spawn{ ... }" class="keyword">this</a> }
    <span class="keyword">def</span> <a title="(p: =&gt; Unit)scala.concurrent.pilib.Spawn" id="156498">|</a>(<a title="=&gt; Unit" id="156513">p</a>: =&gt; Unit): <a href="#156466" title="scala.concurrent.pilib.Spawn">Spawn</a> = { scala.concurrent.<a href="ops.scala.html#8195" title="object scala.concurrent.ops">ops</a>.<a href="ops.scala.html#52268" title="(p: =&gt; Unit)(implicit runner: scala.concurrent.TaskRunner[Unit])Unit">spawn</a><a href="TaskRunners.scala.html#71379" title="=&gt; scala.concurrent.TaskRunner[Unit]">(</a><a href="#156513" title="=&gt; Unit">p</a>); <a href="#156491" title="scala.concurrent.pilib.Spawn{ ... }" class="keyword">this</a> }
    <span class="keyword">def</span> <a title="=&gt; Unit" id="156499">&gt;</a> : <span title="Unit">Unit</span> = <span title="Unit">(</span>)
  }

  /////////////////////////// GUARDED PROCESSES //////////////////////////

  /** Untyped channel. */
  <span class="keyword">class</span> <a title="class UChan extends java.lang.Object with ScalaObject" id="156469">UChan</a> <a href="../ScalaObject.scala.html#957" title="ScalaObject">{</a>
    /** Default log function. */
    <span class="keyword">var</span> <a title="(Any) =&gt; Unit" id="156545">log</a> = (x: <span title="Any">Any</span>) =&gt; <span title="Unit">(</span>)
  }

  /** An untyped guarded process.
   *
   *  @param n         channel name
   *  @param polarity  input (true) or output (false)
   *  @param v         transmitted value
   *  @param c         continuation
   */
  case <span class="keyword">class</span> <a title="class UGP extends java.lang.Object with ScalaObject with Product" id="156612">UGP</a><a href="../ScalaObject.scala.html#957" title="ScalaObject">(</a><a title="scala.concurrent.pilib.UChan" id="156702">n</a>: <a href="#156469" title="scala.concurrent.pilib.UChan">UChan</a>, <a title="Boolean" id="156703">polarity</a>: <span title="Boolean">Boolean</span>, <a title="Any" id="156704">v</a>: <span title="Any">Any</span>, <a title="(Any) =&gt; Any" id="156705">c</a>: Any =&gt; Any)

  /** Typed guarded process. */
  <span class="keyword">class</span> <a title="class GP[a] extends java.lang.Object with ScalaObject" id="156473">GP</a>[<a title="&gt;: Nothing &lt;: Any" id="156474">a</a>]<a href="../ScalaObject.scala.html#957" title="ScalaObject">(</a><a title="scala.concurrent.pilib.UChan" id="156729">n</a>: <a href="#156469" title="scala.concurrent.pilib.UChan">UChan</a>, <a title="Boolean" id="156730">polarity</a>: <span title="Boolean">Boolean</span>, <a title="Any" id="156731">v</a>: <span title="Any">Any</span>, <a title="(Any) =&gt; a" id="156732">c</a>: Any =&gt; a) {
    <span class="keyword">val</span> <a title="scala.concurrent.pilib.UGP" id="156695">untyped</a> = <a href="#156612" title="(n: scala.concurrent.pilib.UChan,polarity: Boolean,v: Any,c: (Any) =&gt; Any)scala.concurrent.pilib.UGP">UGP</a>(<a href="#156729" title="scala.concurrent.pilib.UChan">n</a>, <a href="#156730" title="Boolean">polarity</a>, <a href="#156731" title="Any">v</a>, <a href="#156732" title="(Any) =&gt; a">c</a>)
  }

  //////////////////////////////// CHANNELS //////////////////////////////

  /**
   * Name on which one can emit, receive or that can be emitted or received
   * during a communication.
   */
  <span class="keyword">class</span> <a title="class Chan[A] extends scala.concurrent.pilib.UChan with (A) =&gt; scala.concurrent.pilib.Product[A] with ScalaObject" id="156475">Chan</a>[<a title="&gt;: Nothing &lt;: Any" id="156476">A</a>] <a href="../ScalaObject.scala.html#957" title="ScalaObject" class="keyword">extends</a> <a href="#156469" title="scala.concurrent.pilib.UChan">UChan</a> <span class="keyword">with</span> <a href="../Function1.scala.html#159" title="(A) =&gt; scala.concurrent.pilib.Product[A]">Function1</a>[A, Product[A]] {

    <span class="keyword">var</span> <a title="A" id="156737">defaultValue</a>: <a href="#156476" title="A">A</a> = _

    /** Creates an input guarded process. */
    <span class="keyword">def</span> <a title="[B](c: (A) =&gt; B)scala.concurrent.pilib.GP[B]" id="156739">input</a>[<a title="&gt;: Nothing &lt;: Any" id="156741">B</a>](<a title="(A) =&gt; B" id="156764">c</a>: A =&gt; B) =
      <span title="scala.concurrent.pilib.GP[B]" class="keyword">new</span> <a href="#156473" title="scala.concurrent.pilib.GP[B]">GP</a>(<a href="#156475" title="scala.concurrent.pilib.Chan[A]" class="keyword">this</a>, <span title="Boolean(true)" class="keyword">true</span>, <span title="Unit">(</span>), <a title="Any" id="156773">x</a> =&gt; <a href="../Function1.scala.html#17119" title="(v1: A)B">c</a>(<a href="#156773" title="Any">x</a>.<span title="[T0]T0">asInstanceOf</span><span title="A">[</span><a href="#156476" title="A">A</a>]))

    /** Creates an input guarded process. */
    <span class="keyword">def</span> <a title="[B](v: A,c: () =&gt; B)scala.concurrent.pilib.GP[B]" id="156742">output</a>[<a title="&gt;: Nothing &lt;: Any" id="156744">B</a>](<a title="A" id="156784">v</a>: <a href="#156476" title="A">A</a>, <a title="() =&gt; B" id="156785">c</a>: () =&gt; B) =
      <span title="scala.concurrent.pilib.GP[B]" class="keyword">new</span> <a href="#156473" title="scala.concurrent.pilib.GP[B]">GP</a>(<a href="#156475" title="scala.concurrent.pilib.Chan[A]" class="keyword">this</a>, <span title="Boolean(false)" class="keyword">false</span>, <a href="#156784" title="A">v</a>, <a title="Any" id="156794">x</a> =&gt; <a href="../Function0.scala.html#34096" title="()B">c</a>())

    /** Blocking read. */
    <span class="keyword">def</span> <a title="=&gt; A" id="156745">read</a> = {
      <span class="keyword">var</span> <a title="A" id="156808">res</a>: <a href="#156476" title="A">A</a> = <a href="#156737" title="=&gt; A">defaultValue</a>
      <a href="#156487" title="(s: scala.concurrent.pilib.GP[Unit]*)Unit">choice</a> ( <a href="#156739" title="(c: (A) =&gt; Unit)scala.concurrent.pilib.GP[Unit]">input</a>(<a title="A" id="156817">x</a> =&gt; <a href="#156808" title="A">res</a> = <a href="#156817" title="A">x</a>) )
      <a href="#156808" title="A">res</a>
    }

    /** Blocking write. */
    <span class="keyword">def</span> <a title="(x: A)Unit" id="156746">write</a>(<a title="A" id="156824">x</a>: <a href="#156476" title="A">A</a>) =
      <a href="#156487" title="(s: scala.concurrent.pilib.GP[Unit]*)Unit">choice</a> ( <a href="#156742" title="(v: A,c: () =&gt; Unit)scala.concurrent.pilib.GP[Unit]">output</a>(<a href="#156824" title="A">x</a>, () =&gt; <span title="Unit">(</span>)) )

    /** Syntactic sugar for input. */
    <span class="keyword">def</span> <a title="[B](f: (A) =&gt; B)scala.concurrent.pilib.GP[B]" id="156747">*</a>[<a title="&gt;: Nothing &lt;: Any" id="156749">B</a>](<a title="(A) =&gt; B" id="156840">f</a>: A =&gt; B) =
      <a href="#156739" title="(c: (A) =&gt; B)scala.concurrent.pilib.GP[B]">input</a>(<a href="#156840" title="(A) =&gt; B">f</a>)

    /** Syntactic sugar for output. */
    <span class="keyword">def</span> <a title="(v: A)scala.concurrent.pilib.Product[A]" id="156750">apply</a>(<a title="A" id="156849">v</a>: <a href="#156476" title="A">A</a>) =
      <span title="scala.concurrent.pilib.Product[A]" class="keyword">new</span> <a href="#156477" title="scala.concurrent.pilib.Product[A]">Product</a>(<a href="#156475" title="scala.concurrent.pilib.Chan[A]" class="keyword">this</a>, <a href="#156849" title="A">v</a>)

    /** Attach a function to be evaluated at each communication event
     *  on this channel. Replace previous attached function.
     */
    <span class="keyword">def</span> <a title="(f: (A) =&gt; Unit)Unit" id="156751">attach</a>(<a title="(A) =&gt; Unit" id="156864">f</a>: A =&gt; Unit) =
      <a href="#156545" title="(x$1: (Any) =&gt; Unit)Unit">log</a> = <a title="Any" id="156868">x</a> =&gt; <a href="../Function1.scala.html#17119" title="(v1: A)Unit">f</a>(<a href="#156868" title="Any">x</a>.<span title="[T0]T0">asInstanceOf</span><span title="A">[</span><a href="#156476" title="A">A</a>])
  }

  <span class="keyword">class</span> <a title="class Product[A] extends java.lang.Object with ScalaObject" id="156477">Product</a>[<a title="&gt;: Nothing &lt;: Any" id="156478">A</a>]<a href="../ScalaObject.scala.html#957" title="ScalaObject">(</a><a title="scala.concurrent.pilib.Chan[A]" id="156856">c</a>: <a href="#156475" title="scala.concurrent.pilib.Chan[A]">Chan</a>[A], <a title="A" id="156857">v</a>: <a href="#156478" title="A">A</a>) {
    <span class="keyword">def</span> <a title="[B](f: =&gt; B)scala.concurrent.pilib.GP[B]" id="156758">*</a>[<a title="&gt;: Nothing &lt;: Any" id="156760">B</a>](<a title="=&gt; B" id="156879">f</a>: =&gt; B) = <a href="#156856" title="scala.concurrent.pilib.Chan[A]">c</a>.<a href="#156742" title="(v: A,c: () =&gt; B)scala.concurrent.pilib.GP[B]">output</a>(<a href="#156857" title="A">v</a>, () =&gt; <a href="#156879" title="=&gt; B">f</a>)
  }

  /////////////////////// SUM OF GUARDED PROCESSES ///////////////////////

  case <span class="keyword">class</span> <a title="class Sum extends java.lang.Object with ScalaObject with Product" id="156965">Sum</a><a href="../ScalaObject.scala.html#957" title="ScalaObject">(</a><a title="List[scala.concurrent.pilib.UGP]" id="157177">gs</a>: <a href="../collection/immutable/List.scala.html#8973" title="List[scala.concurrent.pilib.UGP]">List</a>[UGP]) {

    /** Continuation of the sum. */
    <span class="keyword">var</span> <a title="() =&gt; Any" id="156898">cont</a>: () =&gt; Any = _

    <span class="keyword">var</span> <a title="Boolean" id="156901">initialized</a> = <span title="Boolean(false)" class="keyword">false</span>

    /** Block if not initialized otherwise continue with the
     *  continuation.
     */
    <span class="keyword">def</span> <a title="=&gt; Any" id="156903">continue</a> = <a href="#156965" title="(x$1: Any)Any">synchronized</a> {
      <span title="Unit" class="keyword">if</span> (<span title="=&gt; Boolean">!</span><a href="#156901" title="=&gt; Boolean">initialized</a>) <a href="#156965" title="()Unit" id="6525">wait</a>()
      <a href="../Function0.scala.html#34096" title="()Any">cont</a>()
    }

    /** Set the values of parameters and awake the sleeping sum.
     *
     *  @param f ...
     */
    <span class="keyword">def</span> <a title="(f: () =&gt; Any)Unit" id="156904">set</a>(<a title="() =&gt; Any" id="156932">f</a>: () =&gt; Any) = <a href="#156965" title="(x$1: Unit)Unit">synchronized</a> {
      <a href="#156898" title="(x$1: () =&gt; Any)Unit">cont</a> = <a href="#156932" title="() =&gt; Any">f</a>
      <a href="#156901" title="(x$1: Boolean)Unit">initialized</a> = <span title="Boolean(true)" class="keyword">true</span>
      <a href="#156965" title="()Unit" id="6518">notify</a>()
    }
  }

  ///////////////////////////// COMMUNICATION ////////////////////////////

  <span class="keyword">private</span> <span class="keyword">var</span> <a title="List[scala.concurrent.pilib.Sum]" id="156483">sums</a>: <a href="../collection/immutable/List.scala.html#8973" title="List[scala.concurrent.pilib.Sum]">List</a>[Sum] = <a href="../collection/immutable/List.scala.html#9259" title="object Nil">Nil</a>

  /** Test if two lists of guarded processes can communicate.
   *
   *  @param gs1 ...
   *  @param gs2 ...
   *  @return    ...
   */
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(gs1: List[scala.concurrent.pilib.UGP],gs2: List[scala.concurrent.pilib.UGP])Option[(() =&gt; Unit, () =&gt; Any, () =&gt; Any)]" id="156485">matches</a>(<a title="List[scala.concurrent.pilib.UGP]" id="157007">gs1</a>: <a href="../collection/immutable/List.scala.html#8973" title="List[scala.concurrent.pilib.UGP]">List</a>[UGP], <a title="List[scala.concurrent.pilib.UGP]" id="157008">gs2</a>: <a href="../collection/immutable/List.scala.html#8973" title="List[scala.concurrent.pilib.UGP]">List</a>[UGP]): <a href="../Option.scala.html#777" title="Option[(() =&gt; Unit, () =&gt; Any, () =&gt; Any)]">Option</a>[(() =&gt; Unit, () =&gt; Any, () =&gt; Any)] =
    <a href="../Tuple2.scala.html#20670" title="(_1: List[scala.concurrent.pilib.UGP],_2: List[scala.concurrent.pilib.UGP])(List[scala.concurrent.pilib.UGP], List[scala.concurrent.pilib.UGP])">(</a><a href="#157007" title="List[scala.concurrent.pilib.UGP]">gs1</a>, <a href="#157008" title="List[scala.concurrent.pilib.UGP]">gs2</a>) <span title="Option[(() =&gt; Unit, () =&gt; Any, () =&gt; Any)]" class="keyword">match</span> {
      <span title="None.type" class="keyword">case</span> (<a href="../collection/immutable/List.scala.html#9259" title="object Nil">Nil</a>, _) =&gt; <a href="../Option.scala.html#463" title="object None">None</a>
      <span title="None.type" class="keyword">case</span> (_, <a href="../collection/immutable/List.scala.html#9259" title="object Nil">Nil</a>) =&gt; <a href="../Option.scala.html#463" title="object None">None</a>
      <span title="Option[(() =&gt; Unit, () =&gt; Any, () =&gt; Any)]" class="keyword">case</span> (UGP(<a title="scala.concurrent.pilib.UChan" id="157032">a1</a>, <a title="Boolean" id="157033">d1</a>, <a title="Any" id="157034">v1</a>, <a title="(Any) =&gt; Any" id="157035">c1</a>) :: <a title="List[scala.concurrent.pilib.UGP]" id="157038">rest1</a>, UGP(<a title="scala.concurrent.pilib.UChan" id="157045">a2</a>, <a title="Boolean" id="157046">d2</a>, <a title="Any" id="157047">v2</a>, <a title="(Any) =&gt; Any" id="157048">c2</a>) :: <a title="List[scala.concurrent.pilib.UGP]" id="157051">rest2</a>) =&gt;
        <span title="Option[(() =&gt; Unit, () =&gt; Any, () =&gt; Any)]" class="keyword">if</span> (<a href="#157032" title="(x$1: AnyRef)Boolean">a1</a> <span title="(x$1: Boolean)Boolean">==</span> <a href="#157045" title="scala.concurrent.pilib.UChan">a2</a> &amp;&amp; <a href="#157033" title="(x$1: Boolean)Boolean">d1</a> == <span title="=&gt; Boolean">!</span><a href="#157046" title="Boolean">d2</a>)
          <a href="../Option.scala.html#19800" title="(x: (() =&gt; Unit, () =&gt; Any, () =&gt; Any))Some[(() =&gt; Unit, () =&gt; Any, () =&gt; Any)]">Some</a>(<a href="../Tuple3.scala.html#19124" title="(_1: () =&gt; Unit,_2: () =&gt; Any,_3: () =&gt; Any)(() =&gt; Unit, () =&gt; Any, () =&gt; Any)">(</a>(() =&gt; <span title="Unit" class="keyword">if</span> (<a href="#157033" title="Boolean">d1</a>) <a href="#157032" title="scala.concurrent.pilib.UChan">a1</a>.<a href="../Function1.scala.html#17119" title="(v1: Any)Unit">log</a>(<a href="#157047" title="Any">v2</a>) <span class="keyword">else</span> <a href="#157032" title="scala.concurrent.pilib.UChan">a1</a>.<a href="../Function1.scala.html#17119" title="(v1: Any)Unit">log</a>(<a href="#157034" title="Any">v1</a>)), (() =&gt; <a href="../Function1.scala.html#17119" title="(v1: Any)Any">c1</a>(<a href="#157047" title="Any">v2</a>)), (() =&gt; <a href="../Function1.scala.html#17119" title="(v1: Any)Any">c2</a>(<a href="#157034" title="Any">v1</a>))))
        <span class="keyword">else</span> <a href="#156485" title="(gs1: List[scala.concurrent.pilib.UGP],gs2: List[scala.concurrent.pilib.UGP])Option[(() =&gt; Unit, () =&gt; Any, () =&gt; Any)]">matches</a>(<a href="#157007" title="List[scala.concurrent.pilib.UGP]">gs1</a>, <a href="#157051" title="List[scala.concurrent.pilib.UGP]">rest2</a>) <span title="Option[(() =&gt; Unit, () =&gt; Any, () =&gt; Any)]" class="keyword">match</span> {
          <span title="Option[(() =&gt; Unit, () =&gt; Any, () =&gt; Any)]" class="keyword">case</span> <a href="../Option.scala.html#463" title="object None">None</a> =&gt; <a href="#156485" title="(gs1: List[scala.concurrent.pilib.UGP],gs2: List[scala.concurrent.pilib.UGP])Option[(() =&gt; Unit, () =&gt; Any, () =&gt; Any)]">matches</a>(<a href="#157038" title="List[scala.concurrent.pilib.UGP]">rest1</a>, <a href="#157008" title="List[scala.concurrent.pilib.UGP]">gs2</a>)
          <span title="Some[(() =&gt; Unit, () =&gt; Any, () =&gt; Any)]" class="keyword">case</span> Some(<a title="(() =&gt; Unit, () =&gt; Any, () =&gt; Any)" id="157106">t</a>) =&gt; <a href="../Option.scala.html#19800" title="(x: (() =&gt; Unit, () =&gt; Any, () =&gt; Any))Some[(() =&gt; Unit, () =&gt; Any, () =&gt; Any)]">Some</a>(<a href="#157106" title="(() =&gt; Unit, () =&gt; Any, () =&gt; Any)">t</a>)
        }
    }

  /** Test if the given sum can react with one of the pending sums.
   *  If yes then do the reaction otherwise append the sum at the end
   *  of the pending sums.
   *
   *  @param s1 ...
   *  @param ss ...
   *  @return   ...
   */
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(s1: scala.concurrent.pilib.Sum,ss: List[scala.concurrent.pilib.Sum])List[scala.concurrent.pilib.Sum]" id="156486">compare</a>(<a title="scala.concurrent.pilib.Sum" id="157114">s1</a>: <a href="#156965" title="scala.concurrent.pilib.Sum">Sum</a>, <a title="List[scala.concurrent.pilib.Sum]" id="157115">ss</a>: <a href="../collection/immutable/List.scala.html#8973" title="List[scala.concurrent.pilib.Sum]">List</a>[Sum]): <a href="../collection/immutable/List.scala.html#8973" title="List[scala.concurrent.pilib.Sum]">List</a>[Sum] =
    <a href="#157115" title="List[scala.concurrent.pilib.Sum]">ss</a> <span title="List[scala.concurrent.pilib.Sum]" class="keyword">match</span> {
      <span title="List[scala.concurrent.pilib.Sum]" class="keyword">case</span> <a href="../collection/immutable/List.scala.html#9259" title="object Nil">Nil</a> =&gt; <a href="#157115" title="List[scala.concurrent.pilib.Sum]">ss</a> <a href="#157117" title="List[scala.concurrent.pilib.Sum]">:::</a> <a href="../collection/immutable/List.scala.html#17535" title="(xs: scala.concurrent.pilib.Sum*)List[scala.concurrent.pilib.Sum]">List</a><a href="../collection/immutable/List.scala.html#17633" title="(prefix: List[scala.concurrent.pilib.Sum])List[scala.concurrent.pilib.Sum]">(</a><a href="#157114" title="scala.concurrent.pilib.Sum">s1</a>)
      <span title="List[scala.concurrent.pilib.Sum]" class="keyword">case</span> <a title="scala.concurrent.pilib.Sum" id="157143">s2</a> :: <a title="List[scala.concurrent.pilib.Sum]" id="157144">rest</a> =&gt; <a href="#156485" title="(gs1: List[scala.concurrent.pilib.UGP],gs2: List[scala.concurrent.pilib.UGP])Option[(() =&gt; Unit, () =&gt; Any, () =&gt; Any)]">matches</a>(<a href="#157114" title="scala.concurrent.pilib.Sum">s1</a>.<a href="#157177" title="=&gt; List[scala.concurrent.pilib.UGP]">gs</a>, <a href="#157143" title="scala.concurrent.pilib.Sum">s2</a>.<a href="#157177" title="=&gt; List[scala.concurrent.pilib.UGP]">gs</a>) <span title="List[scala.concurrent.pilib.Sum]" class="keyword">match</span> {
        <span title="List[scala.concurrent.pilib.Sum]" class="keyword">case</span> <a href="../Option.scala.html#463" title="object None">None</a> =&gt; <a href="#157143" title="scala.concurrent.pilib.Sum">s2</a> <a href="#157149" title="scala.concurrent.pilib.Sum">::</a> <a href="#156486" title="(s1: scala.concurrent.pilib.Sum,ss: List[scala.concurrent.pilib.Sum])List[scala.concurrent.pilib.Sum]">compare</a><a href="../collection/immutable/List.scala.html#17630" title="(x: scala.concurrent.pilib.Sum)List[scala.concurrent.pilib.Sum]">(</a><a href="#157114" title="scala.concurrent.pilib.Sum">s1</a>, <a href="#157144" title="List[scala.concurrent.pilib.Sum]">rest</a>)
        <span title="List[scala.concurrent.pilib.Sum]" class="keyword">case</span> Some((<a title="() =&gt; Unit" id="157163">log</a>, <a title="() =&gt; Any" id="157164">c1</a>, <a title="() =&gt; Any" id="157165">c2</a>)) =&gt;
          <a href="../Function0.scala.html#34096" title="()Unit">log</a>()
          <a href="#157114" title="scala.concurrent.pilib.Sum">s1</a>.<a href="#156904" title="(f: () =&gt; Any)Unit">set</a>(<a href="#157164" title="() =&gt; Any">c1</a>)
          <a href="#157143" title="scala.concurrent.pilib.Sum">s2</a>.<a href="#156904" title="(f: () =&gt; Any)Unit">set</a>(<a href="#157165" title="() =&gt; Any">c2</a>)
          <a href="#157144" title="List[scala.concurrent.pilib.Sum]">rest</a>
      }
    }

  /** Pi-calculus non-deterministic choice.
   *
   *  @param s ...
   *  @return  ...
   */
  <span class="keyword">def</span> <a title="[A](s: scala.concurrent.pilib.GP[A]*)A" id="156487">choice</a>[<a title="&gt;: Nothing &lt;: Any" id="156489">A</a>](<a title="scala.concurrent.pilib.GP[A]*" id="156809">s</a>: <a title="scala.concurrent.pilib.GP[A]*" id="4176">GP</a>[A]*): <a href="#156489" title="A">A</a> = {
    <span class="keyword">val</span> <a title="scala.concurrent.pilib.Sum" id="157176">sum</a> = <a href="#156965" title="(gs: List[scala.concurrent.pilib.UGP])scala.concurrent.pilib.Sum">Sum</a>(<a href="#156809" title="scala.concurrent.pilib.GP[A]*">s</a>.<a href="../collection/generic/TraversableTemplate.scala.html#17161" title="(f: (scala.concurrent.pilib.GP[A]) =&gt; scala.concurrent.pilib.UGP)(implicit bf: scala.collection.generic.BuilderFactory[scala.concurrent.pilib.UGP,List[scala.concurrent.pilib.UGP],List[scala.concurrent.pilib.GP[A]]])List[scala.concurrent.pilib.UGP]">toList</a> <a href="../collection/immutable/List.scala.html#17526" title="scala.collection.generic.BuilderFactory[scala.concurrent.pilib.UGP,List[scala.concurrent.pilib.UGP],List#Coll]">map</a> { <a href="#157192" title="scala.concurrent.pilib.GP[A]">_</a>.<a href="#156695" title="=&gt; scala.concurrent.pilib.UGP">untyped</a> })
    <span title="(x$1: Unit)Unit">synchronized</span> { <a href="#156483" title="(x$1: List[scala.concurrent.pilib.Sum])Unit">sums</a> = <a href="#156486" title="(s1: scala.concurrent.pilib.Sum,ss: List[scala.concurrent.pilib.Sum])List[scala.concurrent.pilib.Sum]">compare</a>(<a href="#157176" title="scala.concurrent.pilib.Sum">sum</a>, <a href="#156483" title="=&gt; List[scala.concurrent.pilib.Sum]">sums</a>) }
    (<a href="#157176" title="scala.concurrent.pilib.Sum">sum</a>.<a href="#156903" title="=&gt; Any">continue</a>).<span title="[T0]T0">asInstanceOf</span><span title="A">[</span><a href="#156489" title="A">A</a>]
  }

}

        </pre>
    </body>
</html>