<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scala/concurrent/MailBox.scala</title>
        <script type="text/javascript" src="../../jquery-all.js"></script>
        <script type="text/javascript" src="../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../style.css" title="Style">
    </head>
    <body>
        <pre>
/*                     __                                               *\
**     ________ ___   / /  ___     Scala API                            **
**    / __/ __// _ | / /  / _ |    (c) 2003-2009, LAMP/EPFL             **
**  __\ \/ /__/ __ |/ /__/ __ |    http://scala-lang.org/               **
** /____/\___/_/ |_/____/_/ | |                                         **
**                          |/                                          **
\*                                                                      */

// $Id: MailBox.scala 16893 2009-01-13 13:09:22Z cunei $


<span class="keyword">package</span> scala.concurrent

/** This class ...
 *
 *  @author  Martin Odersky
 *  @version 1.0, 12/03/2003
 */
//class MailBox with Monitor with LinkedListQueueCreator {
<span class="keyword">class</span> <a title="class MailBox extends java.lang.Object with scala.concurrent.ListQueueCreator with ScalaObject" id="8371">MailBox</a> <a href="../ScalaObject.scala.html#969" title="ScalaObject" class="keyword">extends</a> <span title="java.lang.Object">AnyRef</span> <span class="keyword">with</span> <a href="#8419" title="scala.concurrent.ListQueueCreator">ListQueueCreator</a> {

  <span class="keyword">type</span> <a title="AnyRef" id="198725">Message</a> = <span title="AnyRef">AnyRef</span>

  <span class="keyword">private</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class PreReceiver extends java.lang.Object with ScalaObject" id="198726">PreReceiver</a> <a href="../ScalaObject.scala.html#969" title="ScalaObject">{</a>
    <span class="keyword">var</span> <a title="MailBox.this.Message" id="198762">msg</a>: <span title="MailBox.this.Message">Message</span> = <span title="Null(null)" class="keyword">null</span>
    <span class="keyword">def</span> <a title="(msg: MailBox.this.Message)Boolean" id="198764">isDefinedAt</a>(<a title="MailBox.this.Message" id="198773">msg</a>: <span title="MailBox.this.Message">Message</span>): <a title="Boolean" id="1964">Boolean</a>
  }

  <span class="keyword">private</span> <span class="keyword">class</span> <a title="class Receiver[A] extends MailBox.this.PreReceiver with ScalaObject" id="198727">Receiver</a>[<a title="&gt;: Nothing &lt;: Any" id="198728">A</a>]<a href="../ScalaObject.scala.html#969" title="ScalaObject">(</a><a title="PartialFunction[MailBox.this.Message,A]" id="198783">receiver</a>: <a href="../PartialFunction.scala.html#1098" title="PartialFunction[MailBox.this.Message,A]">PartialFunction</a>[Message, A]) <span class="keyword">extends</span> <a href="#198726" title="MailBox.this.PreReceiver">PreReceiver</a> {

    <span class="keyword">def</span> <a title="(msg: MailBox.this.Message)Boolean" id="198778">isDefinedAt</a>(<a title="MailBox.this.Message" id="198786">msg</a>: <span title="MailBox.this.Message">Message</span>) = <a href="#198783" title="PartialFunction[MailBox.this.Message,A]">receiver</a>.<a href="../PartialFunction.scala.html#17178" title="(x: MailBox.this.Message)Boolean">isDefinedAt</a>(<a href="#198786" title="MailBox.this.Message">msg</a>)

    <span class="keyword">def</span> <a title="()A" id="198779">receive</a>(): <a href="#198728" title="A">A</a> = <a href="#198727" title="(x$1: A)A">synchronized</a> {
      <span title="Unit" class="keyword">while</span> (<a href="#198762" title="(x$1: AnyRef)Boolean">msg</a> eq <span title="Null(null)" class="keyword">null</span>) <a href="#198727" title="()Unit" id="6588">wait</a><a href="#198795" title="()Unit">(</a>)
      <a href="../Function1.scala.html#17226" title="(v1: MailBox.this.Message)A">receiver</a>(<a href="#198762" title="=&gt; MailBox.this.Message">msg</a>)
    }

    <span class="keyword">def</span> <a title="(msec: Long)A" id="198780">receiveWithin</a>(<a title="Long" id="198818">msec</a>: <span title="Long">Long</span>): <a href="#198728" title="A">A</a> = <a href="#198727" title="(x$1: A)A">synchronized</a> {
      <span title="Unit" class="keyword">if</span> (<a href="#198762" title="(x$1: AnyRef)Boolean">msg</a> eq <span title="Null(null)" class="keyword">null</span>) <a href="#198727" title="(x$1: Long)Unit" id="6583">wait</a>(<a href="#198818" title="Long">msec</a>)
      <a href="../Function1.scala.html#17226" title="(v1: MailBox.this.Message)A">receiver</a>(<span title="MailBox.this.Message" class="keyword">if</span> (<a href="#198762" title="(x$1: AnyRef)Boolean">msg</a> ne <span title="Null(null)" class="keyword">null</span>) <a href="#198762" title="=&gt; MailBox.this.Message">msg</a> <span class="keyword">else</span> <a href="TIMEOUT.scala.html#8303" title="object scala.concurrent.TIMEOUT">TIMEOUT</a>)
    }
  }

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.concurrent.QueueModule[MailBox.this.Message]" id="198729">messageQueue</a> = <a href="#198751" title="[A]scala.concurrent.QueueModule[A]">queueCreate</a><span title="scala.concurrent.QueueModule[MailBox.this.Message]">[</span><span title="MailBox.this.Message">Message</span>]
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.concurrent.QueueModule[MailBox.this.PreReceiver]" id="198731">receiverQueue</a> = <a href="#198751" title="[A]scala.concurrent.QueueModule[A]">queueCreate</a><span title="scala.concurrent.QueueModule[MailBox.this.PreReceiver]">[</span><a href="#198726" title="MailBox.this.PreReceiver">PreReceiver</a>]

  /** Unconsumed messages. */
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="MailBox.this.messageQueue.T" id="198734">sent</a> = <a href="#198729" title="=&gt; scala.concurrent.QueueModule[MailBox.this.Message]">messageQueue</a>.<a href="#198757" title="=&gt; MailBox.this.messageQueue.T">make</a>

  /** Pending receivers. */
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="MailBox.this.receiverQueue.T" id="198737">receivers</a> = <a href="#198731" title="=&gt; scala.concurrent.QueueModule[MailBox.this.PreReceiver]">receiverQueue</a>.<a href="#198757" title="=&gt; MailBox.this.receiverQueue.T">make</a>

  /**
  * Check whether the receiver can be applied to an unconsumed message.
  * If yes, the message is extracted and associated with the receiver.
  * Otherwise the receiver is appended to the list of pending receivers.
  */
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="[A](receiver: MailBox.this.Receiver[A])Unit" id="198739">scanSentMsgs</a>[<a title="&gt;: Nothing &lt;: Any" id="198741">A</a>](<a title="MailBox.this.Receiver[A]" id="198837">receiver</a>: <a href="#198727" title="MailBox.this.Receiver[A]">Receiver</a>[A]): <span title="Unit">Unit</span> = <a href="#8371" title="(x$1: Unit)Unit">synchronized</a> {
    <a href="#198729" title="=&gt; scala.concurrent.QueueModule[MailBox.this.Message]">messageQueue</a>.<a href="#198759" title="(l: MailBox.this.messageQueue.T,p: (MailBox.this.Message) =&gt; Boolean)Option[(MailBox.this.Message, MailBox.this.messageQueue.T)]">extractFirst</a>(<a href="#198734" title="=&gt; MailBox.this.messageQueue.T">sent</a>, <a title="MailBox.this.Message" id="198847">msg</a> =&gt; <a href="#198837" title="MailBox.this.Receiver[A]">receiver</a>.<a href="#198778" title="(msg: MailBox.this.Message)Boolean">isDefinedAt</a>(<a href="#198847" title="MailBox.this.Message">msg</a>)) <span title="Unit" class="keyword">match</span> {
      <span title="Unit" class="keyword">case</span> <a href="../Option.scala.html#472" title="object None">None</a> =&gt;
        <a href="#198737" title="(x$1: MailBox.this.receiverQueue.T)Unit">receivers</a> = <a href="#198731" title="=&gt; scala.concurrent.QueueModule[MailBox.this.PreReceiver]">receiverQueue</a>.<a href="#198758" title="(l: MailBox.this.receiverQueue.T,x: MailBox.this.PreReceiver)MailBox.this.receiverQueue.T">append</a>(<a href="#198737" title="=&gt; MailBox.this.receiverQueue.T">receivers</a>, <a href="#198837" title="MailBox.this.Receiver[A]">receiver</a>)
      <span title="Unit" class="keyword">case</span> Some((<a title="MailBox.this.Message" id="198863">msg</a>, <a title="MailBox.this.messageQueue.T" id="198864">withoutMsg</a>)) =&gt;
        <a href="#198734" title="(x$1: MailBox.this.messageQueue.T)Unit">sent</a> = <a href="#198864" title="MailBox.this.messageQueue.T">withoutMsg</a>
        <a href="#198837" title="MailBox.this.Receiver[A]">receiver</a>.<a href="#198762" title="(x$1: MailBox.this.Message)Unit">msg</a> = <a href="#198863" title="MailBox.this.Message">msg</a>
    }
  }

  /**
  * First check whether a pending receiver is applicable to the sent
  * message. If yes, the receiver is notified. Otherwise the message
  * is appended to the linked list of sent messages.  
  */
  <span class="keyword">def</span> <a title="(msg: MailBox.this.Message)Unit" id="198742">send</a>(<a title="MailBox.this.Message" id="198876">msg</a>: <span title="MailBox.this.Message">Message</span>): <span title="Unit">Unit</span> = <a href="#8371" title="(x$1: Unit)Unit">synchronized</a> {
    <a href="#198731" title="=&gt; scala.concurrent.QueueModule[MailBox.this.PreReceiver]">receiverQueue</a>.<a href="#198759" title="(l: MailBox.this.receiverQueue.T,p: (MailBox.this.PreReceiver) =&gt; Boolean)Option[(MailBox.this.PreReceiver, MailBox.this.receiverQueue.T)]">extractFirst</a>(<a href="#198737" title="=&gt; MailBox.this.receiverQueue.T">receivers</a>, <a title="MailBox.this.PreReceiver" id="198883">r</a> =&gt; <a href="#198883" title="MailBox.this.PreReceiver">r</a>.<a href="#198764" title="(msg: MailBox.this.Message)Boolean">isDefinedAt</a>(<a href="#198876" title="MailBox.this.Message">msg</a>)) <span title="Unit" class="keyword">match</span> {
      <span title="Unit" class="keyword">case</span> <a href="../Option.scala.html#472" title="object None">None</a> =&gt;
        <a href="#198734" title="(x$1: MailBox.this.messageQueue.T)Unit">sent</a> = <a href="#198729" title="=&gt; scala.concurrent.QueueModule[MailBox.this.Message]">messageQueue</a>.<a href="#198758" title="(l: MailBox.this.messageQueue.T,x: MailBox.this.Message)MailBox.this.messageQueue.T">append</a>(<a href="#198734" title="=&gt; MailBox.this.messageQueue.T">sent</a>, <a href="#198876" title="MailBox.this.Message">msg</a>)
      <span title="Unit" class="keyword">case</span> Some((<a title="MailBox.this.PreReceiver" id="198897">receiver</a>, <a title="MailBox.this.receiverQueue.T" id="198898">withoutReceiver</a>)) =&gt;
        <a href="#198737" title="(x$1: MailBox.this.receiverQueue.T)Unit">receivers</a> = <a href="#198898" title="MailBox.this.receiverQueue.T">withoutReceiver</a>
        <a href="#198897" title="MailBox.this.PreReceiver">receiver</a>.<a href="#198762" title="(x$1: MailBox.this.Message)Unit">msg</a> = <a href="#198876" title="MailBox.this.Message">msg</a>
        <a href="#198897" title="(x$1: Unit)Unit">receiver</a> synchronized { <a href="#198897" title="MailBox.this.PreReceiver">receiver</a>.<a title="()Unit" id="6581">notify</a>() }
    }
  }

  /**
  * Block until there is a message in the mailbox for which the processor
  * &lt;code&gt;f&lt;/code&gt; is defined.
  */
  <span class="keyword">def</span> <a title="[A](f: PartialFunction[MailBox.this.Message,A])A" id="198743">receive</a>[<a title="&gt;: Nothing &lt;: Any" id="198745">A</a>](<a title="PartialFunction[MailBox.this.Message,A]" id="198917">f</a>: <a href="../PartialFunction.scala.html#1098" title="PartialFunction[MailBox.this.Message,A]">PartialFunction</a>[Message, A]): <a href="#198745" title="A">A</a> = {
    <span class="keyword">val</span> <a title="MailBox.this.Receiver[A]" id="198920">r</a> = <span title="MailBox.this.Receiver[A]" class="keyword">new</span> <a href="#198727" title="MailBox.this.Receiver[A]">Receiver</a>(<a href="#198917" title="PartialFunction[MailBox.this.Message,A]">f</a>)
    <a href="#198739" title="(receiver: MailBox.this.Receiver[A])Unit">scanSentMsgs</a>(<a href="#198920" title="MailBox.this.Receiver[A]">r</a>)
    <a href="#198920" title="MailBox.this.Receiver[A]">r</a>.<a href="#198779" title="()A">receive</a>()
  }

  /**
  * Block until there is a message in the mailbox for which the processor
  * &lt;code&gt;f&lt;/code&gt; is defined or the timeout is over.
  */
  <span class="keyword">def</span> <a title="[A](msec: Long)(f: PartialFunction[MailBox.this.Message,A])A" id="198746">receiveWithin</a>[<a title="&gt;: Nothing &lt;: Any" id="198748">A</a>](<a title="Long" id="198933">msec</a>: <span title="Long">Long</span>)(<a title="PartialFunction[MailBox.this.Message,A]" id="198934">f</a>: <a href="../PartialFunction.scala.html#1098" title="PartialFunction[MailBox.this.Message,A]">PartialFunction</a>[Message, A]): <a href="#198748" title="A">A</a> = {
    <span class="keyword">val</span> <a title="MailBox.this.Receiver[A]" id="198937">r</a> = <span title="MailBox.this.Receiver[A]" class="keyword">new</span> <a href="#198727" title="MailBox.this.Receiver[A]">Receiver</a>(<a href="#198934" title="PartialFunction[MailBox.this.Message,A]">f</a>)
    <a href="#198739" title="(receiver: MailBox.this.Receiver[A])Unit">scanSentMsgs</a>(<a href="#198937" title="MailBox.this.Receiver[A]">r</a>)
    <a href="#198937" title="MailBox.this.Receiver[A]">r</a>.<a href="#198780" title="(msec: Long)A">receiveWithin</a>(<a href="#198933" title="Long">msec</a>)
  }

}

/////////////////////////////////////////////////////////////////

/**
* Module for dealing with queues.
*/
<span class="keyword">trait</span> <a title="trait QueueModule[A] extends java.lang.Object" id="8317">QueueModule</a>[<a title="&gt;: Nothing &lt;: Any" id="15634">A</a>] <span title="java.lang.Object">{</span>
  /** Type of queues. */
  <span class="keyword">type</span> <a title="&gt;: Nothing &lt;: Any" id="198756">T</a>
  /** Create an empty queue. */
  <span class="keyword">def</span> <a title="=&gt; QueueModule.this.T" id="198757">make</a>: <a href="#198756" title="QueueModule.this.T">T</a>
  /** Append an element to a queue. */
  <span class="keyword">def</span> <a title="(l: QueueModule.this.T,x: A)QueueModule.this.T" id="198758">append</a>(<a title="QueueModule.this.T" id="198852">l</a>: <a href="#198756" title="QueueModule.this.T">T</a>, <a title="A" id="198853">x</a>: <a href="#15634" title="A">A</a>): <a href="#198756" title="QueueModule.this.T">T</a>
  /** Extract an element satisfying a predicate from a queue. */
  <span class="keyword">def</span> <a title="(l: QueueModule.this.T,p: (A) =&gt; Boolean)Option[(A, QueueModule.this.T)]" id="198759">extractFirst</a>(<a title="QueueModule.this.T" id="198842">l</a>: <a href="#198756" title="QueueModule.this.T">T</a>, <a title="(A) =&gt; Boolean" id="198843">p</a>: A =&gt; Boolean): <a href="../Option.scala.html#789" title="Option[(A, QueueModule.this.T)]">Option</a>[(A, T)]
}

/** Inefficient but simple queue module creator. */
<span class="keyword">trait</span> <a title="trait ListQueueCreator extends java.lang.Object with ScalaObject" id="8419">ListQueueCreator</a> <a href="../ScalaObject.scala.html#969" title="ScalaObject">{</a>
  <span class="keyword">def</span> <a title="[A]scala.concurrent.QueueModule[A]" id="198751">queueCreate</a>[<a title="&gt;: Nothing &lt;: Any" id="198753">A</a>]: <a href="#8317" title="scala.concurrent.QueueModule[A]">QueueModule</a>[A] = <a href="#198953" title="java.lang.Object with scala.concurrent.QueueModule[A]{ ... }" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with scala.concurrent.QueueModule[A]" id="198953">QueueModule</a>[A] {
    <span class="keyword">type</span> <a title="List[A]" id="198955">T</a> = <a href="../collection/immutable/List.scala.html#9048" title="List[A]">List</a>[A]
    <span class="keyword">def</span> <a title="=&gt; this.T" id="198956">make</a>: <a href="../collection/immutable/List.scala.html#9048" title="this.T">T</a> = <a href="../collection/immutable/List.scala.html#9334" title="object Nil">Nil</a>
    <span class="keyword">def</span> <a title="(l: this.T,x: A)this.T" id="198957">append</a>(<a title="this.T" id="198965">l</a>: <a href="../collection/immutable/List.scala.html#9048" title="this.T">T</a>, <a title="A" id="198966">x</a>: <a href="#198753" title="A">A</a>): <a href="../collection/immutable/List.scala.html#9048" title="this.T">T</a> = <a href="#198965" title="this.T">l</a> <a href="#198970" title="this.T">:::</a> <a href="#198966" title="A">x</a> <a href="../collection/immutable/List.scala.html#17740" title="(prefix: List[A])List[A]">::</a> <a href="../collection/immutable/List.scala.html#17737" title="(x: A)List[A]">Nil</a>
    <span class="keyword">def</span> <a title="(l: this.T,p: (A) =&gt; Boolean)Option[(A, this.T)]" id="198958">extractFirst</a>(<a title="this.T" id="198991">l</a>: <a href="../collection/immutable/List.scala.html#9048" title="this.T">T</a>, <a title="(A) =&gt; Boolean" id="198992">p</a>: A =&gt; Boolean): <a href="../Option.scala.html#789" title="Option[(A, this.T)]">Option</a>[(A, T)] =
      <a href="#198991" title="this.T">l</a> <span title="Option[(A, this.T)]" class="keyword">match</span> {
        <span title="None.type" class="keyword">case</span> <a href="../collection/immutable/List.scala.html#9334" title="object Nil">Nil</a> =&gt; <a href="../Option.scala.html#472" title="object None">None</a>
        <span title="Option[(A, this.T)]" class="keyword">case</span> <a title="A" id="199000">head</a> :: <a title="List[A]" id="199001">tail</a> =&gt;
          <span title="Option[(A, this.T)]" class="keyword">if</span> (<a href="../Function1.scala.html#17226" title="(v1: A)Boolean">p</a>(<a href="#199000" title="A">head</a>))
            <a href="../Option.scala.html#19907" title="(x: (A, List[A]))Some[(A, List[A])]">Some</a>(<a href="../Tuple2.scala.html#20777" title="(_1: A,_2: List[A])(A, List[A])">(</a><a href="#199000" title="A">head</a>, <a href="#199001" title="List[A]">tail</a>))
          <span class="keyword">else</span>
            <a href="#198958" title="(l: this.T,p: (A) =&gt; Boolean)Option[(A, this.T)]">extractFirst</a>(<a href="#199001" title="List[A]">tail</a>, <a href="#198992" title="(A) =&gt; Boolean">p</a>) <span title="Option[(A, this.T)]" class="keyword">match</span> {
              <span title="None.type" class="keyword">case</span> <a href="../Option.scala.html#472" title="object None">None</a> =&gt; <a href="../Option.scala.html#472" title="object None">None</a>
              <span title="Some[(A, List[A])]" class="keyword">case</span> Some((<a title="A" id="199027">x</a>, <a title="this.T" id="199028">without_x</a>)) =&gt; <a href="../Option.scala.html#19907" title="(x: (A, List[A]))Some[(A, List[A])]">Some</a>(<a href="../Tuple2.scala.html#20777" title="(_1: A,_2: List[A])(A, List[A])">(</a><a href="#199027" title="A">x</a>, <a href="#199000" title="A">head</a> <a href="#199039" title="A">::</a> <a href="../collection/immutable/List.scala.html#17737" title="(x: A)List[A]">without_x</a>))
            }
      }
  }
}

/** Efficient queue module creator based on linked lists. */
<span class="keyword">trait</span> <a title="trait LinkedListQueueCreator extends java.lang.Object with ScalaObject" id="8251">LinkedListQueueCreator</a> <a href="../ScalaObject.scala.html#969" title="ScalaObject">{</a>
  <span class="keyword">import</span> scala.collection.mutable.LinkedList
  <span class="keyword">def</span> <a title="[A &gt;: Null &lt;: AnyRef]scala.concurrent.QueueModule[A]" id="199058">queueCreate</a>[<a title="&gt;: Null &lt;: AnyRef" id="199060">A</a> &gt;: Null &lt;: AnyRef]: <a href="#8317" title="scala.concurrent.QueueModule[A]">QueueModule</a>[A] = <a href="#199065" title="java.lang.Object with scala.concurrent.QueueModule[A]{ ... }" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with scala.concurrent.QueueModule[A]" id="199065">QueueModule</a>[A] {
    <span class="keyword">type</span> <a title="(scala.collection.mutable.LinkedList[A], scala.collection.mutable.LinkedList[A])" id="199067">T</a> = <a href="../Tuple2.scala.html#1167" title="(scala.collection.mutable.LinkedList[A], scala.collection.mutable.LinkedList[A])">(</a>LinkedList[A], LinkedList[A]) // fst = the list, snd = last elem
    <span class="keyword">def</span> <a title="=&gt; (scala.collection.mutable.LinkedList[A], scala.collection.mutable.LinkedList[A])" id="199068">make</a>: <a href="../Tuple2.scala.html#1167" title="(scala.collection.mutable.LinkedList[A], scala.collection.mutable.LinkedList[A])">T</a> = {
      <span class="keyword">val</span> <a title="scala.collection.mutable.LinkedList[A]" id="199077">l</a> = <span title="scala.collection.mutable.LinkedList[A]" class="keyword">new</span> <a href="../collection/mutable/LinkedList.scala.html#7902" title="scala.collection.mutable.LinkedList[A]">LinkedList</a>[A](<span title="Null(null)" class="keyword">null</span>, <span title="Null(null)" class="keyword">null</span>)
      <a href="../Tuple2.scala.html#20777" title="(_1: scala.collection.mutable.LinkedList[A],_2: scala.collection.mutable.LinkedList[A])(scala.collection.mutable.LinkedList[A], scala.collection.mutable.LinkedList[A])">(</a><a href="#199077" title="scala.collection.mutable.LinkedList[A]">l</a>, <a href="#199077" title="scala.collection.mutable.LinkedList[A]">l</a>)
    }
    <span class="keyword">def</span> <a title="(l: (scala.collection.mutable.LinkedList[A], scala.collection.mutable.LinkedList[A]),x: A)(scala.collection.mutable.LinkedList[A], scala.collection.mutable.LinkedList[A])" id="199069">append</a>(<a title="(scala.collection.mutable.LinkedList[A], scala.collection.mutable.LinkedList[A])" id="199094">l</a>: <a href="../Tuple2.scala.html#1167" title="(scala.collection.mutable.LinkedList[A], scala.collection.mutable.LinkedList[A])">T</a>, <a title="A" id="199095">x</a>: <a href="#199060" title="A">A</a>): <a href="../Tuple2.scala.html#1167" title="(scala.collection.mutable.LinkedList[A], scala.collection.mutable.LinkedList[A])">T</a> = {
      <span class="keyword">val</span> <a title="scala.collection.mutable.LinkedList[A]" id="199099">atTail</a> = <span title="scala.collection.mutable.LinkedList[A]" class="keyword">new</span> <a href="../collection/mutable/LinkedList.scala.html#7902" title="scala.collection.mutable.LinkedList[A]">LinkedList</a>(<a href="#199095" title="A">x</a>, <span title="Null(null)" class="keyword">null</span>)
      <a href="#199094" title="(scala.collection.mutable.LinkedList[A], scala.collection.mutable.LinkedList[A])">l</a>.<a href="../collection/generic/LinkedListTemplate.scala.html#19757" title="(that: scala.collection.mutable.LinkedList[A])Unit">_2</a> append <a href="#199099" title="scala.collection.mutable.LinkedList[A]">atTail</a>;
      <a href="../Tuple2.scala.html#20777" title="(_1: scala.collection.mutable.LinkedList[A],_2: scala.collection.mutable.LinkedList[A])(scala.collection.mutable.LinkedList[A], scala.collection.mutable.LinkedList[A])">(</a><a href="#199094" title="(scala.collection.mutable.LinkedList[A], scala.collection.mutable.LinkedList[A])">l</a>.<a href="../Tuple2.scala.html#20579" title="=&gt; scala.collection.mutable.LinkedList[A]">_1</a>, <a href="#199099" title="scala.collection.mutable.LinkedList[A]">atTail</a>)
    }
    <span class="keyword">def</span> <a title="(l: (scala.collection.mutable.LinkedList[A], scala.collection.mutable.LinkedList[A]),p: (A) =&gt; Boolean)Option[(A, (scala.collection.mutable.LinkedList[A], scala.collection.mutable.LinkedList[A]))]" id="199070">extractFirst</a>(<a title="(scala.collection.mutable.LinkedList[A], scala.collection.mutable.LinkedList[A])" id="199122">l</a>: <a href="../Tuple2.scala.html#1167" title="(scala.collection.mutable.LinkedList[A], scala.collection.mutable.LinkedList[A])">T</a>, <a title="(A) =&gt; Boolean" id="199123">p</a>: A =&gt; Boolean): <a href="../Option.scala.html#789" title="Option[(A, (scala.collection.mutable.LinkedList[A], scala.collection.mutable.LinkedList[A]))]">Option</a>[(A, T)] = {
      <span class="keyword">var</span> <a title="scala.collection.mutable.LinkedList[A]" id="199127">xs</a> = <a href="#199122" title="(scala.collection.mutable.LinkedList[A], scala.collection.mutable.LinkedList[A])">l</a>.<a href="../Tuple2.scala.html#20579" title="=&gt; scala.collection.mutable.LinkedList[A]">_1</a>
      <span class="keyword">var</span> <a title="scala.collection.mutable.LinkedList[A]" id="199128">xs1</a> = <a href="#199127" title="scala.collection.mutable.LinkedList[A]">xs</a>.<a href="../collection/generic/LinkedListTemplate.scala.html#19750" title="=&gt; scala.collection.mutable.LinkedList[A]">next</a>
      <span title="Unit" class="keyword">while</span> (<a title="(x$1: Boolean)Boolean" id="2225">(</a><a href="#199128" title="(x$1: AnyRef)Boolean">xs1</a> ne <span title="Null(null)" class="keyword">null</span>) &amp;&amp; <a title="=&gt; Boolean" id="2218">!</a><a href="../Function1.scala.html#17226" title="(v1: A)Boolean">p</a>(<a href="#199128" title="scala.collection.mutable.LinkedList[A]">xs1</a>.<a href="../collection/generic/LinkedListTemplate.scala.html#19747" title="=&gt; A">elem</a>)) <a href="#199129" title="()Unit">{</a>
        <a href="#199127" title="scala.collection.mutable.LinkedList[A]">xs</a> = <a href="#199128" title="scala.collection.mutable.LinkedList[A]">xs1</a>
        <a href="#199128" title="scala.collection.mutable.LinkedList[A]">xs1</a> = <a href="#199128" title="scala.collection.mutable.LinkedList[A]">xs1</a>.<a href="../collection/generic/LinkedListTemplate.scala.html#19750" title="=&gt; scala.collection.mutable.LinkedList[A]">next</a>
      }
      <span title="Option[(A, (scala.collection.mutable.LinkedList[A], scala.collection.mutable.LinkedList[A]))]" class="keyword">if</span> (<a href="#199128" title="(x$1: AnyRef)Boolean">xs1</a> ne <span title="Null(null)" class="keyword">null</span>) {
        <a href="#199127" title="scala.collection.mutable.LinkedList[A]">xs</a>.<a href="../collection/generic/LinkedListTemplate.scala.html#19751" title="(x$1: scala.collection.mutable.LinkedList[A])Unit">next</a> = <a href="#199128" title="scala.collection.mutable.LinkedList[A]">xs1</a>.<a href="../collection/generic/LinkedListTemplate.scala.html#19750" title="=&gt; scala.collection.mutable.LinkedList[A]">next</a>
        <span title="Option[(A, (scala.collection.mutable.LinkedList[A], scala.collection.mutable.LinkedList[A]))]" class="keyword">if</span> (<a href="#199127" title="scala.collection.mutable.LinkedList[A]">xs</a>.<a href="../collection/generic/LinkedListTemplate.scala.html#19750" title="(x$1: AnyRef)Boolean">next</a> eq <span title="Null(null)" class="keyword">null</span>)
          <a href="../Option.scala.html#19907" title="(x: (A, (scala.collection.mutable.LinkedList[A], scala.collection.mutable.LinkedList[A])))Some[(A, (scala.collection.mutable.LinkedList[A], scala.collection.mutable.LinkedList[A]))]">Some</a>(<a href="../Tuple2.scala.html#20777" title="(_1: A,_2: (scala.collection.mutable.LinkedList[A], scala.collection.mutable.LinkedList[A]))(A, (scala.collection.mutable.LinkedList[A], scala.collection.mutable.LinkedList[A]))">(</a><a href="#199128" title="scala.collection.mutable.LinkedList[A]">xs1</a>.<a href="../collection/generic/LinkedListTemplate.scala.html#19747" title="=&gt; A">elem</a>, <a href="../Tuple2.scala.html#20777" title="(_1: scala.collection.mutable.LinkedList[A],_2: scala.collection.mutable.LinkedList[A])(scala.collection.mutable.LinkedList[A], scala.collection.mutable.LinkedList[A])">(</a><a href="#199122" title="(scala.collection.mutable.LinkedList[A], scala.collection.mutable.LinkedList[A])">l</a>.<a href="../Tuple2.scala.html#20579" title="=&gt; scala.collection.mutable.LinkedList[A]">_1</a>, <a href="#199127" title="scala.collection.mutable.LinkedList[A]">xs</a>)))
        <span class="keyword">else</span>
          <a href="../Option.scala.html#19907" title="(x: (A, (scala.collection.mutable.LinkedList[A], scala.collection.mutable.LinkedList[A])))Some[(A, (scala.collection.mutable.LinkedList[A], scala.collection.mutable.LinkedList[A]))]">Some</a>(<a href="../Tuple2.scala.html#20777" title="(_1: A,_2: (scala.collection.mutable.LinkedList[A], scala.collection.mutable.LinkedList[A]))(A, (scala.collection.mutable.LinkedList[A], scala.collection.mutable.LinkedList[A]))">(</a><a href="#199128" title="scala.collection.mutable.LinkedList[A]">xs1</a>.<a href="../collection/generic/LinkedListTemplate.scala.html#19747" title="=&gt; A">elem</a>, <a href="#199122" title="(scala.collection.mutable.LinkedList[A], scala.collection.mutable.LinkedList[A])">l</a>))
      }
      <span class="keyword">else</span>
        <a href="../Option.scala.html#472" title="object None">None</a>
    }
  }
}


        </pre>
    </body>
</html>