<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>util/parsing/combinator/RegexParsers.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style">
    </head>
    <body>
        <pre>
/*                     __                                               *\
**     ________ ___   / /  ___     Scala API                            **
**    / __/ __// _ | / /  / _ |    (c) 2006-2009, LAMP/EPFL             **
**  __\ \/ /__/ __ |/ /__/ __ |    http://scala-lang.org/               **
** /____/\___/_/ |_/____/_/ | |                                         **
**                          |/                                          **
\*                                                                      */

// $Id: RegexParsers.scala 16893 2009-01-13 13:09:22Z cunei $

<span class="keyword">package</span> scala.util.parsing.combinator

<span class="keyword">import</span> java.util.regex.Pattern
<span class="keyword">import</span> scala.util.matching.Regex
<span class="keyword">import</span> scala.util.parsing.input._
<span class="keyword">import</span> scala.collection.immutable.PagedSeq

<span class="keyword">trait</span> <a title="trait RegexParsers extends java.lang.Object with scala.util.parsing.combinator.Parsers with ScalaObject" id="12511">RegexParsers</a> <a href="../../../ScalaObject.scala.html#957" title="ScalaObject" class="keyword">extends</a> <a href="Parsers.scala.html#12544" title="scala.util.parsing.combinator.Parsers">Parsers</a> {

  <span class="keyword">type</span> <a title="Char" id="168285">Elem</a> = <a title="Char" id="2161">Char</a>

  <span class="keyword">protected</span> <span class="keyword">val</span> <a title="scala.util.matching.Regex" id="168286">whiteSpace</a> = <a href="../../../Predef.scala.html#16366" title="implicit scala.Predef.stringWrapper : (x: String)scala.runtime.RichString" class="string">&quot;&quot;&quot;\s+&quot;&quot;&quot;</a>.<a href="../../../runtime/RichString.scala.html#18051" title="=&gt; scala.util.matching.Regex">r</a>

  <span class="keyword">def</span> <a title="=&gt; Boolean" id="168288">skipWhitespace</a> = <a href="#168286" title="=&gt; scala.util.matching.Regex">whiteSpace</a>.<a href="../../matching/Regex.scala.html#59795" title="()String">toString</a>.<a title="(x$1: Int)Boolean" id="2958">length</a> &gt; <span title="Int(0)" class="int">0</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(source: java.lang.CharSequence,offset: Int)Int" id="168289">handleWhiteSpace</a>(<a title="java.lang.CharSequence" id="268309">source</a>: java.lang.<span title="java.lang.CharSequence">CharSequence</span>, <a title="Int" id="268310">offset</a>: <span title="Int">Int</span>): <span title="Int">Int</span> =
    <span title="Int" class="keyword">if</span> (<a href="#168288" title="=&gt; Boolean">skipWhitespace</a>)
      (<a href="../../matching/Regex.scala.html#59791" title="(source: java.lang.CharSequence)Option[scala.util.matching.Regex.Match]">whiteSpace</a> findPrefixMatchOf (<a href="#268309" title="java.lang.CharSequence">source</a>.<span title="(x$1: Int,x$2: Int)java.lang.CharSequence">subSequence</span>(<a href="#268310" title="Int">offset</a>, <a href="#268309" title="java.lang.CharSequence">source</a>.<span title="()Int">length</span>))) <span title="Int" class="keyword">match</span> {
        <span title="Int" class="keyword">case</span> Some(<a title="scala.util.matching.Regex.Match" id="268319">matched</a>) =&gt; <a href="#268310" title="(x$1: Int)Int">offset</a> + <a href="#268319" title="scala.util.matching.Regex.Match">matched</a>.<a href="../../matching/Regex.scala.html#60252" title="=&gt; Int">end</a>
        <span title="Int" class="keyword">case</span> <a href="../../../Option.scala.html#463" title="object None">None</a> =&gt; <a href="#268310" title="Int">offset</a>
      }
    <span class="keyword">else</span> 
      <a href="#268310" title="Int">offset</a>

  /** A parser that matches a literal string */
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit scala.util.parsing.combinator.RegexParsers.literal : (s: String)RegexParsers.this.Parser[String]" id="168290">literal</a>(<a title="String" id="168330">s</a>: <a title="String" id="1603">String</a>): <a href="Parsers.scala.html#57399" title="RegexParsers.this.Parser[String]">Parser</a>[String] = <a href="#268351" title="RegexParsers.this.Parser[String]{ ... }" class="keyword">new</a> <a title="anonymous class $anon extends RegexParsers.this.Parser[String]" id="268351">Parser</a>[String] {
    <span class="keyword">def</span> <a title="(in: RegexParsers.this.Input)RegexParsers.this.ParseResult[String]" id="268353">apply</a>(<a title="RegexParsers.this.Input" id="268357">in</a>: <a href="../input/Reader.scala.html#9440" title="RegexParsers.this.Input">Input</a>) = {
      <span class="keyword">val</span> <a title="java.lang.CharSequence" id="268367">source</a> = <a href="#268357" title="RegexParsers.this.Input">in</a>.<a href="../input/Reader.scala.html#21888" title="=&gt; java.lang.CharSequence">source</a>
      <span class="keyword">val</span> <a title="Int" id="268368">offset</a> = <a href="#268357" title="RegexParsers.this.Input">in</a>.<a href="../input/Reader.scala.html#21889" title="=&gt; Int">offset</a>
      <span class="keyword">val</span> <a title="Int" id="268369">start</a> = <a href="#168289" title="(source: java.lang.CharSequence,offset: Int)Int">handleWhiteSpace</a>(<a href="#268367" title="java.lang.CharSequence">source</a>, <a href="#268368" title="Int">offset</a>)
      <span class="keyword">var</span> <a title="Int" id="268370">i</a> = <span title="Int(0)" class="int">0</span>
      <span class="keyword">var</span> <a title="Int" id="268371">j</a> = <a href="#268369" title="Int">start</a>
      <span title="Unit" class="keyword">while</span> (<a href="#268370" title="(x$1: Int)Boolean">i</a> <span title="(x$1: Boolean)Boolean">&lt;</span> <a href="#168330" title="String">s</a>.<span title="()Int">length</span> <span title="(x$1: Boolean)Boolean">&amp;&amp;</span> <a href="#268371" title="(x$1: Int)Boolean">j</a> &lt; <a href="#268367" title="java.lang.CharSequence">source</a>.<span title="()Int">length</span> &amp;&amp; <a href="#168330" title="String">s</a>.<a title="(x$1: Int)Char" id="6906">charAt</a><a title="(x$1: Char)Boolean" id="2714">(</a><a href="#268370" title="Int">i</a>) == <a href="#268367" title="java.lang.CharSequence">source</a>.<a title="(x$1: Int)Char" id="18001">charAt</a>(<a href="#268371" title="Int">j</a>)) <a href="#268372" title="()Unit">{</a>
        <a href="#268370" title="Int">i</a> += <span title="Int(1)" class="int">1</span>
        <a href="#268371" title="Int">j</a> += <span title="Int(1)" class="int">1</span>
      }
      <span title="RegexParsers.this.ParseResult[String]" class="keyword">if</span> (<a href="#268370" title="(x$1: Int)Boolean" id="2950">i</a> == <a href="#168330" title="String">s</a>.<span title="()Int">length</span>)
        <a href="Parsers.scala.html#124689" title="(result: java.lang.String,next: RegexParsers.this.Input)RegexParsers.this.Success[java.lang.String]">Success</a>(<a href="#268367" title="java.lang.CharSequence">source</a>.<span title="(x$1: Int,x$2: Int)java.lang.CharSequence">subSequence</span>(<a href="#268369" title="Int">start</a>, <a href="#268371" title="Int">j</a>).<span title="()java.lang.String">toString</span>, <a href="#268357" title="RegexParsers.this.Input">in</a>.<a href="../input/Reader.scala.html#21892" title="(n: Int)scala.util.parsing.input.Reader[RegexParsers.this.Elem]">drop</a>(<a href="#268371" title="(x$1: Int)Int">j</a> - <a href="#268368" title="Int">offset</a>))
      <span class="keyword">else</span> 
        <a href="Parsers.scala.html#84391" title="(msg: String,next: RegexParsers.this.Input)RegexParsers.this.Failure">Failure</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;`&quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#168330" title="String">s</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot;' expected but `&quot;)" class="string">&quot;' expected but `&quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#268357" title="RegexParsers.this.Input">in</a>.<a href="../input/Reader.scala.html#21890" title="=&gt; RegexParsers.this.Elem">first</a>+<span title="java.lang.String(&quot;' found&quot;)" class="string">&quot;' found&quot;</span>, <a href="#268357" title="RegexParsers.this.Input">in</a>.<a href="../input/Reader.scala.html#21892" title="(n: Int)scala.util.parsing.input.Reader[RegexParsers.this.Elem]">drop</a>(<a href="#268369" title="(x$1: Int)Int">start</a> - <a href="#268368" title="Int">offset</a>))
    }
  }

  /** A parser that matches a regex string */
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit scala.util.parsing.combinator.RegexParsers.regex : (r: scala.util.matching.Regex)RegexParsers.this.Parser[String]" id="168291">regex</a>(<a title="scala.util.matching.Regex" id="168328">r</a>: <a href="../../matching/Regex.scala.html#12912" title="scala.util.matching.Regex">Regex</a>): <a href="Parsers.scala.html#57399" title="RegexParsers.this.Parser[String]">Parser</a>[String] = <a href="#268569" title="RegexParsers.this.Parser[String]{ ... }" class="keyword">new</a> <a title="anonymous class $anon extends RegexParsers.this.Parser[String]" id="268569">Parser</a>[String] {
    <span class="keyword">def</span> <a title="(in: RegexParsers.this.Input)RegexParsers.this.ParseResult[String]" id="268571">apply</a>(<a title="RegexParsers.this.Input" id="268575">in</a>: <a href="../input/Reader.scala.html#9440" title="RegexParsers.this.Input">Input</a>) = {
      <span class="keyword">val</span> <a title="java.lang.CharSequence" id="268585">source</a> = <a href="#268575" title="RegexParsers.this.Input">in</a>.<a href="../input/Reader.scala.html#21888" title="=&gt; java.lang.CharSequence">source</a>
      <span class="keyword">val</span> <a title="Int" id="268586">offset</a> = <a href="#268575" title="RegexParsers.this.Input">in</a>.<a href="../input/Reader.scala.html#21889" title="=&gt; Int">offset</a>
      <span class="keyword">val</span> <a title="Int" id="268587">start</a> = <a href="#168289" title="(source: java.lang.CharSequence,offset: Int)Int">handleWhiteSpace</a>(<a href="#268585" title="java.lang.CharSequence">source</a>, <a href="#268586" title="Int">offset</a>)
      (<a href="../../matching/Regex.scala.html#59791" title="(source: java.lang.CharSequence)Option[scala.util.matching.Regex.Match]">r</a> findPrefixMatchOf (<a href="#268585" title="java.lang.CharSequence">source</a>.<span title="(x$1: Int,x$2: Int)java.lang.CharSequence">subSequence</span>(<a href="#268587" title="Int">start</a>, <a href="#268585" title="java.lang.CharSequence">source</a>.<span title="()Int">length</span>))) <span title="RegexParsers.this.ParseResult[String]" class="keyword">match</span> {
        <span title="RegexParsers.this.Success[java.lang.String]" class="keyword">case</span> Some(<a title="scala.util.matching.Regex.Match" id="268597">matched</a>) =&gt;
          <a href="Parsers.scala.html#124689" title="(result: java.lang.String,next: RegexParsers.this.Input)RegexParsers.this.Success[java.lang.String]">Success</a>(<a href="#268585" title="java.lang.CharSequence">source</a>.<span title="(x$1: Int,x$2: Int)java.lang.CharSequence">subSequence</span>(<a href="#268587" title="Int">start</a>, <a href="#268587" title="(x$1: Int)Int">start</a> + <a href="#268597" title="scala.util.matching.Regex.Match">matched</a>.<a href="../../matching/Regex.scala.html#60252" title="=&gt; Int">end</a>).<span title="()java.lang.String">toString</span>, 
                  <a href="#268575" title="RegexParsers.this.Input">in</a>.<a href="../input/Reader.scala.html#21892" title="(n: Int)scala.util.parsing.input.Reader[RegexParsers.this.Elem]">drop</a>(<a href="#268587" title="(x$1: Int)Int">start</a> <span title="(x$1: Int)Int">+</span> <a href="#268597" title="scala.util.matching.Regex.Match">matched</a>.<a href="../../matching/Regex.scala.html#60252" title="=&gt; Int">end</a> - <a href="#268586" title="Int">offset</a>))
        <span title="RegexParsers.this.Failure" class="keyword">case</span> <a href="../../../Option.scala.html#463" title="object None">None</a> =&gt;
          <a href="Parsers.scala.html#84391" title="(msg: String,next: RegexParsers.this.Input)RegexParsers.this.Failure">Failure</a>(<span title="(x$1: Any)java.lang.String" class="string">&quot;string matching regex `&quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#168328" title="scala.util.matching.Regex">r</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot;' expected but `&quot;)" class="string">&quot;' expected but `&quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#268575" title="RegexParsers.this.Input">in</a>.<a href="../input/Reader.scala.html#21890" title="=&gt; RegexParsers.this.Elem">first</a>+<span title="java.lang.String(&quot;' found&quot;)" class="string">&quot;' found&quot;</span>, <a href="#268575" title="RegexParsers.this.Input">in</a>.<a href="../input/Reader.scala.html#21892" title="(n: Int)scala.util.parsing.input.Reader[RegexParsers.this.Elem]">drop</a>(<a href="#268587" title="(x$1: Int)Int">start</a> - <a href="#268586" title="Int">offset</a>))
      }
    }
  }

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="[T](p: RegexParsers.this.Parser[T])RegexParsers.this.Parser[T]" id="168292">phrase</a>[<a title="&gt;: Nothing &lt;: Any" id="168294">T</a>](<a title="RegexParsers.this.Parser[T]" id="202770">p</a>: <a href="Parsers.scala.html#57399" title="RegexParsers.this.Parser[T]">Parser</a>[T]): <a href="Parsers.scala.html#57399" title="RegexParsers.this.Parser[T]">Parser</a>[T] =
    <a href="#273434" title="[T](p: RegexParsers.this.Parser[T])RegexParsers.this.Parser[T]" class="keyword">super</a>.<a title="[T](p: RegexParsers.this.Parser[T])RegexParsers.this.Parser[T]" id="273434">phrase</a>(<a href="Parsers.scala.html#57584" title="(p: =&gt; RegexParsers.this.Parser[Option[String]])RegexParsers.this.Parser[T]">p</a> &lt;~ <a href="Parsers.scala.html#57466" title="(p: =&gt; RegexParsers.this.Parser[String])RegexParsers.this.Parser[Option[String]]">opt</a>(<a href="../../../Predef.scala.html#16366" title="implicit scala.Predef.stringWrapper : (x: String)scala.runtime.RichString" class="string">&quot;&quot;&quot;\z&quot;&quot;&quot;</a>.<a href="#168291" title="implicit scala.util.parsing.combinator.RegexParsers.regex : (r: scala.util.matching.Regex)RegexParsers.this.Parser[String]">r</a>))

  /** Parse some prefix of reader `in' with parser `p' */
  <span class="keyword">def</span> <a title="[T](p: RegexParsers.this.Parser[T],in: scala.util.parsing.input.Reader[Char])RegexParsers.this.ParseResult[T]" id="168295">parse</a>[<a title="&gt;: Nothing &lt;: Any" id="168297">T</a>](<a title="RegexParsers.this.Parser[T]" id="268754">p</a>: <a href="Parsers.scala.html#57399" title="RegexParsers.this.Parser[T]">Parser</a>[T], <a title="scala.util.parsing.input.Reader[Char]" id="268755">in</a>: <a href="../input/Reader.scala.html#9440" title="scala.util.parsing.input.Reader[Char]">Reader</a>[Char]): <a href="Parsers.scala.html#57375" title="RegexParsers.this.ParseResult[T]">ParseResult</a>[T] = 
    <a href="Parsers.scala.html#57568" title="(in: RegexParsers.this.Input)RegexParsers.this.ParseResult[T]">p</a>(<a href="#268755" title="scala.util.parsing.input.Reader[Char]">in</a>)

  /** Parse some prefix of character sequence `in' with parser `p' */
  <span class="keyword">def</span> <a title="[T](p: RegexParsers.this.Parser[T],in: java.lang.CharSequence)RegexParsers.this.ParseResult[T]" id="168298">parse</a>[<a title="&gt;: Nothing &lt;: Any" id="168300">T</a>](<a title="RegexParsers.this.Parser[T]" id="268773">p</a>: <a href="Parsers.scala.html#57399" title="RegexParsers.this.Parser[T]">Parser</a>[T], <a title="java.lang.CharSequence" id="268774">in</a>: java.lang.<span title="java.lang.CharSequence">CharSequence</span>): <a href="Parsers.scala.html#57375" title="RegexParsers.this.ParseResult[T]">ParseResult</a>[T] = 
    <a href="Parsers.scala.html#57568" title="(in: RegexParsers.this.Input)RegexParsers.this.ParseResult[T]">p</a>(<a href="../input/CharSequenceReader.scala.html#66531" title="(source: java.lang.CharSequence)scala.util.parsing.input.CharSequenceReader" class="keyword">new</a> <a href="../input/CharSequenceReader.scala.html#9443" title="scala.util.parsing.input.CharSequenceReader">CharSequenceReader</a>(<a href="#268774" title="java.lang.CharSequence">in</a>))
  
  /** Parse some prefix of reader `in' with parser `p' */
  <span class="keyword">def</span> <a title="[T](p: RegexParsers.this.Parser[T],in: java.io.Reader)RegexParsers.this.ParseResult[T]" id="168301">parse</a>[<a title="&gt;: Nothing &lt;: Any" id="168303">T</a>](<a title="RegexParsers.this.Parser[T]" id="268796">p</a>: <a href="Parsers.scala.html#57399" title="RegexParsers.this.Parser[T]">Parser</a>[T], <a title="java.io.Reader" id="268797">in</a>: java.io.<span title="java.io.Reader">Reader</span>): <a href="Parsers.scala.html#57375" title="RegexParsers.this.ParseResult[T]">ParseResult</a>[T] =
    <a href="Parsers.scala.html#57568" title="(in: RegexParsers.this.Input)RegexParsers.this.ParseResult[T]">p</a>(<a href="../input/PagedSeqReader.scala.html#21904" title="(seq: scala.collection.immutable.PagedSeq[Char])scala.util.parsing.input.PagedSeqReader" class="keyword">new</a> <a href="../input/PagedSeqReader.scala.html#9461" title="scala.util.parsing.input.PagedSeqReader">PagedSeqReader</a>(<a href="../../../collection/immutable/PagedSeq.scala.html#9271" title="object scala.collection.immutable.PagedSeq">PagedSeq</a>.<a href="../../../collection/immutable/PagedSeq.scala.html#21964" title="(source: java.io.Reader)scala.collection.immutable.PagedSeq[Char]">fromReader</a>(<a href="#268797" title="java.io.Reader">in</a>)))

  /** Parse all of reader `in' with parser `p' */
  <span class="keyword">def</span> <a title="[T](p: RegexParsers.this.Parser[T],in: scala.util.parsing.input.Reader[Char])RegexParsers.this.ParseResult[T]" id="168304">parseAll</a>[<a title="&gt;: Nothing &lt;: Any" id="168306">T</a>](<a title="RegexParsers.this.Parser[T]" id="268821">p</a>: <a href="Parsers.scala.html#57399" title="RegexParsers.this.Parser[T]">Parser</a>[T], <a title="scala.util.parsing.input.Reader[Char]" id="268822">in</a>: <a href="../input/Reader.scala.html#9440" title="scala.util.parsing.input.Reader[Char]">Reader</a>[Char]): <a href="Parsers.scala.html#57375" title="RegexParsers.this.ParseResult[T]">ParseResult</a>[T] =
    <a href="#168295" title="(p: RegexParsers.this.Parser[T],in: scala.util.parsing.input.Reader[Char])RegexParsers.this.ParseResult[T]">parse</a>(<a href="#168292" title="(p: RegexParsers.this.Parser[T])RegexParsers.this.Parser[T]">phrase</a>(<a href="#268821" title="RegexParsers.this.Parser[T]">p</a>), <a href="#268822" title="scala.util.parsing.input.Reader[Char]">in</a>)

  /** Parse all of reader `in' with parser `p' */
  <span class="keyword">def</span> <a title="[T](p: RegexParsers.this.Parser[T],in: java.io.Reader)RegexParsers.this.ParseResult[T]" id="168307">parseAll</a>[<a title="&gt;: Nothing &lt;: Any" id="168309">T</a>](<a title="RegexParsers.this.Parser[T]" id="268863">p</a>: <a href="Parsers.scala.html#57399" title="RegexParsers.this.Parser[T]">Parser</a>[T], <a title="java.io.Reader" id="268864">in</a>: java.io.<span title="java.io.Reader">Reader</span>): <a href="Parsers.scala.html#57375" title="RegexParsers.this.ParseResult[T]">ParseResult</a>[T] =
    <a href="#168301" title="(p: RegexParsers.this.Parser[T],in: java.io.Reader)RegexParsers.this.ParseResult[T]">parse</a>(<a href="#168292" title="(p: RegexParsers.this.Parser[T])RegexParsers.this.Parser[T]">phrase</a>(<a href="#268863" title="RegexParsers.this.Parser[T]">p</a>), <a href="#268864" title="java.io.Reader">in</a>)

  /** Parse all of character sequence `in' with parser `p' */
  <span class="keyword">def</span> <a title="[T](p: RegexParsers.this.Parser[T],in: java.lang.CharSequence)RegexParsers.this.ParseResult[T]" id="168310">parseAll</a>[<a title="&gt;: Nothing &lt;: Any" id="168312">T</a>](<a title="RegexParsers.this.Parser[T]" id="268905">p</a>: <a href="Parsers.scala.html#57399" title="RegexParsers.this.Parser[T]">Parser</a>[T], <a title="java.lang.CharSequence" id="268906">in</a>: java.lang.<span title="java.lang.CharSequence">CharSequence</span>): <a href="Parsers.scala.html#57375" title="RegexParsers.this.ParseResult[T]">ParseResult</a>[T] = 
    <a href="#168298" title="(p: RegexParsers.this.Parser[T],in: java.lang.CharSequence)RegexParsers.this.ParseResult[T]">parse</a>(<a href="#168292" title="(p: RegexParsers.this.Parser[T])RegexParsers.this.Parser[T]">phrase</a>(<a href="#268905" title="RegexParsers.this.Parser[T]">p</a>), <a href="#268906" title="java.lang.CharSequence">in</a>)
}

        </pre>
    </body>
</html>