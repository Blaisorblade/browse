<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>util/Properties.scala</title>
        <script type="text/javascript" src="../jquery-all.js"></script>
        <script type="text/javascript" src="../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../style.css" title="Style">
    </head>
    <body>
        <pre>
/*                     __                                               *\
**     ________ ___   / /  ___     Scala API                            **
**    / __/ __// _ | / /  / _ |    (c) 2006-2009, LAMP/EPFL             **
**  __\ \/ /__/ __ |/ /__/ __ |    http://scala-lang.org/               **
** /____/\___/_/ |_/____/_/ | |                                         **
**                          |/                                          **
\*                                                                      */

// $Id: Properties.scala 18447 2009-08-05 14:17:06Z extempore $


<span class="keyword">package</span> scala.util

<span class="keyword">private</span>[scala] <span class="keyword">trait</span> <a title="trait PropertiesTrait extends java.lang.Object with ScalaObject" id="8047">PropertiesTrait</a>
<a href="../ScalaObject.scala.html#957" title="ScalaObject">{</a>
  <span class="keyword">import</span> java.io.{ IOException, PrintWriter }
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; String" id="73309">propCategory</a>: <span title="String">String</span>      // specializes the remainder of the values
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; Class[_]" id="73310">pickJarBasedOn</a>: <a title="Class[_]" id="1414">Class</a>[_]  // props file comes from jar containing this
  
  /** The name of the properties file */
  <span class="keyword">protected</span> <span class="keyword">val</span> <a title="java.lang.String" id="73311">propFilename</a> = <span title="(x$1: Any)java.lang.String" class="string">&quot;/&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#73309" title="=&gt; String">propCategory</a> + <span title="java.lang.String(&quot;.properties&quot;)" class="string">&quot;.properties&quot;</span>
  
  /** The loaded properties */
  <span class="keyword">protected</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="java.util.Properties" id="73314">props</a>: java.util.<span title="java.util.Properties">Properties</span> = {
    <span class="keyword">val</span> <a title="java.util.Properties" id="194957">props</a> = <span title="java.util.Properties" class="keyword">new</span> java.util.<span title="java.util.Properties">Properties</span>
    <span class="keyword">val</span> <a title="java.io.InputStream" id="194958">stream</a> = <a href="#73310" title="(x$1: java.lang.String)java.io.InputStream" id="4876">pickJarBasedOn</a> getResourceAsStream <a href="#73311" title="=&gt; java.lang.String">propFilename</a>
    <span title="Unit" class="keyword">if</span> (<a href="#194958" title="(x$1: AnyRef)Boolean" id="6533">stream</a> ne <span title="Null(null)" class="keyword">null</span>)
      <a href="#73318" title="(action: =&gt; Unit,disposal: =&gt; Unit)Unit">quietlyDispose</a>(<a href="#194957" title="(x$1: java.io.InputStream)Unit" id="194787">props</a> load <a href="#194958" title="java.io.InputStream">stream</a>, <a href="#194958" title="java.io.InputStream">stream</a>.<a title="()Unit" id="46892">close</a>)
    
    <a href="#194957" title="java.util.Properties">props</a>
  }    
  
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[T &lt;: AnyRef](x: T)Option[T]" id="73315">onull</a>[<a title="&gt;: Nothing &lt;: AnyRef" id="73317">T</a> &lt;: <a id="1">AnyRef</a>](<a title="T" id="195119">x</a>: <a href="#73317" title="T">T</a>) = <span title="Option[T]" class="keyword">if</span> (<a href="#195119" title="(x$1: AnyRef)Boolean" id="6531">x</a> eq <span title="Null(null)" class="keyword">null</span>) <a href="../Option.scala.html#463" title="object None">None</a> <span class="keyword">else</span> <a href="../Option.scala.html#19800" title="(x: T)Some[T]">Some</a>(<a href="#195119" title="T">x</a>)
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(action: =&gt; Unit,disposal: =&gt; Unit)Unit" id="73318">quietlyDispose</a>(<a title="=&gt; Unit" id="195105">action</a>: =&gt; Unit, <a title="=&gt; Unit" id="195106">disposal</a>: =&gt; Unit) =
    <span class="keyword">try</span>     { <a href="#195105" title="=&gt; Unit">action</a> }
    <span class="keyword">finally</span> { 
        <span class="keyword">try</span>     { <a href="#195106" title="=&gt; Unit">disposal</a> }
        <span class="keyword">catch</span>   { <span title="Unit" class="keyword">case</span> _: <a title="java.io.IOException" id="3634">IOException</a> =&gt; }
    }
  
  // for values based on system properties
  <span class="keyword">def</span> <a title="(name: String)String" id="73319">sysprop</a>(<a title="String" id="74166">name</a>: <span title="String">String</span>): <span title="String">String</span>                   = <a href="#73320" title="(name: String,default: String)String">sysprop</a>(<a href="#74166" title="String">name</a>, <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>)
  <span class="keyword">def</span> <a title="(name: String,default: String)String" id="73320">sysprop</a>(<a title="String" id="74163">name</a>: <span title="String">String</span>, <a title="String" id="74164">default</a>: <span title="String">String</span>): <span title="String">String</span>  = <span title="object java.lang.System">System</span>.<a title="(x$1: java.lang.String,x$2: java.lang.String)java.lang.String" id="24194">getProperty</a>(<a href="#74163" title="String">name</a>, <a href="#74164" title="String">default</a>)
  <span class="keyword">def</span> <a title="(name: String,value: String)java.lang.String" id="73321">syspropset</a>(<a title="String" id="195177">name</a>: <span title="String">String</span>, <a title="String" id="195178">value</a>: <span title="String">String</span>)         = <span title="object java.lang.System">System</span>.<a title="(x$1: java.lang.String,x$2: java.lang.String)java.lang.String" id="24197">setProperty</a>(<a href="#195177" title="String">name</a>, <a href="#195178" title="String">value</a>)
  
  // for values based on propFilename
  <span class="keyword">def</span> <a title="(name: String)String" id="73322">prop</a>(<a title="String" id="194830">name</a>: <span title="String">String</span>): <span title="String">String</span>                      = <a href="#73313" title="=&gt; java.util.Properties">props</a>.<span title="(x$1: java.lang.String,x$2: java.lang.String)java.lang.String">getProperty</span>(<a href="#194830" title="String">name</a>, <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>)
  <span class="keyword">def</span> <a title="(name: String,default: String)String" id="73323">prop</a>(<a title="String" id="194827">name</a>: <span title="String">String</span>, <a title="String" id="194828">default</a>: <span title="String">String</span>): <span title="String">String</span>     = <a href="#73313" title="=&gt; java.util.Properties">props</a>.<span title="(x$1: java.lang.String,x$2: java.lang.String)java.lang.String">getProperty</span>(<a href="#194827" title="String">name</a>, <a href="#194828" title="String">default</a>)
  
  /** The version number of the jar this was loaded from plus &quot;version &quot; prefix,
   *  or &quot;version (unknown)&quot; if it cannot be determined.
   */   
  <span class="keyword">val</span> <a title="java.lang.String" id="73324">versionString</a>         = <span title="(x$1: Any)java.lang.String" class="string">&quot;version &quot;</span> + <a href="#73323" title="(name: String,default: String)String">prop</a>(<span title="java.lang.String(&quot;version.number&quot;)" class="string">&quot;version.number&quot;</span>, <span title="java.lang.String(&quot;(unknown)&quot;)" class="string">&quot;(unknown)&quot;</span>)
  <span class="keyword">val</span> <a title="String" id="73326">copyrightString</a>       = <a href="#73323" title="(name: String,default: String)String">prop</a>(<span title="java.lang.String(&quot;copyright.string&quot;)" class="string">&quot;copyright.string&quot;</span>, <span title="java.lang.String(&quot;(c) 2002-2009 LAMP/EPFL&quot;)" class="string">&quot;(c) 2002-2009 LAMP/EPFL&quot;</span>)
  
  /** This is the encoding to use reading in source files, overridden with -encoding
   *  Note that it uses &quot;prop&quot; i.e. looks in the scala jar, not the system properties.
   */
  <span class="keyword">val</span> <a title="String" id="73328">sourceEncoding</a>        = <a href="#73323" title="(name: String,default: String)String">prop</a>(<span title="java.lang.String(&quot;file.encoding&quot;)" class="string">&quot;file.encoding&quot;</span>, <span title="java.lang.String(&quot;UTF8&quot;)" class="string">&quot;UTF8&quot;</span>)
  
  /** This is the default text encoding, overridden (unreliably) with
   *  JAVA_OPTS=&quot;-Dfile.encoding=Foo&quot;
   */
  <span class="keyword">val</span> <a title="String" id="73330">encodingString</a>        = <a href="#73320" title="(name: String,default: String)String">sysprop</a>(<span title="java.lang.String(&quot;file.encoding&quot;)" class="string">&quot;file.encoding&quot;</span>, <span title="java.lang.String(&quot;UTF8&quot;)" class="string">&quot;UTF8&quot;</span>)
  
  <span class="keyword">val</span> <a title="Boolean" id="73332">isWin</a>                 = <a href="#73319" title="(name: String)String">sysprop</a><span title="(x$1: java.lang.String)Boolean">(</span><span title="java.lang.String(&quot;os.name&quot;)" class="string">&quot;os.name&quot;</span>) startsWith <span title="java.lang.String(&quot;Windows&quot;)" class="string">&quot;Windows&quot;</span>
  <span class="keyword">val</span> <a title="Boolean" id="73334">isMac</a>                 = <a href="#73319" title="(name: String)String">sysprop</a><span title="(x$1: java.lang.String)Boolean">(</span><span title="java.lang.String(&quot;java.vendor&quot;)" class="string">&quot;java.vendor&quot;</span>) startsWith <span title="java.lang.String(&quot;Apple&quot;)" class="string">&quot;Apple&quot;</span>
  <span class="keyword">val</span> <a title="String" id="73336">javaClassPath</a>         = <a href="#73319" title="(name: String)String">sysprop</a>(<span title="java.lang.String(&quot;java.class.path&quot;)" class="string">&quot;java.class.path&quot;</span>)
  <span class="keyword">val</span> <a title="String" id="73338">javaHome</a>              = <a href="#73319" title="(name: String)String">sysprop</a>(<span title="java.lang.String(&quot;java.home&quot;)" class="string">&quot;java.home&quot;</span>)
  <span class="keyword">val</span> <a title="String" id="73340">javaVmName</a>            = <a href="#73319" title="(name: String)String">sysprop</a>(<span title="java.lang.String(&quot;java.vm.name&quot;)" class="string">&quot;java.vm.name&quot;</span>)
  <span class="keyword">val</span> <a title="String" id="73342">javaVmVersion</a>         = <a href="#73319" title="(name: String)String">sysprop</a>(<span title="java.lang.String(&quot;java.vm.version&quot;)" class="string">&quot;java.vm.version&quot;</span>)
  <span class="keyword">val</span> <a title="String" id="73344">javaVmInfo</a>            = <a href="#73319" title="(name: String)String">sysprop</a>(<span title="java.lang.String(&quot;java.vm.info&quot;)" class="string">&quot;java.vm.info&quot;</span>)
  <span class="keyword">val</span> <a title="String" id="73346">javaVersion</a>           = <a href="#73319" title="(name: String)String">sysprop</a>(<span title="java.lang.String(&quot;java.version&quot;)" class="string">&quot;java.version&quot;</span>)
  <span class="keyword">val</span> <a title="String" id="73348">tmpDir</a>                = <a href="#73319" title="(name: String)String">sysprop</a>(<span title="java.lang.String(&quot;java.io.tmpdir&quot;)" class="string">&quot;java.io.tmpdir&quot;</span>)
  <span class="keyword">val</span> <a title="String" id="73350">userName</a>              = <a href="#73319" title="(name: String)String">sysprop</a>(<span title="java.lang.String(&quot;user.name&quot;)" class="string">&quot;user.name&quot;</span>)
  <span class="keyword">val</span> <a title="String" id="73352">scalaHome</a>             = <a href="#73320" title="(name: String,default: String)String">sysprop</a>(<span title="java.lang.String(&quot;scala.home&quot;)" class="string">&quot;scala.home&quot;</span>, <span title="Null(null)" class="keyword">null</span>) // XXX places do null checks...  
  
  // provide a main method so version info can be obtained by running this
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="java.io.PrintWriter" id="73354">writer</a> = <a title="(x$1: java.io.OutputStream,x$2: Boolean)java.io.PrintWriter" id="25545" class="keyword">new</a> java.io.<a title="java.io.PrintWriter" id="3904">PrintWriter</a>(<a href="../Console.scala.html#388" title="object Console">Console</a>.<a href="../Console.scala.html#58842" title="=&gt; java.io.PrintStream">err</a>, <span title="Boolean(true)" class="keyword">true</span>)
  <span class="keyword">def</span> <a title="=&gt; String" id="73356">versionMsg</a>            = <a href="../Predef.scala.html#16366" title="implicit scala.Predef.stringWrapper : (x: String)scala.runtime.RichString" class="string">&quot;Scala %s %s -- %s&quot;</a>.<a href="../runtime/RichString.scala.html#18060" title="(args: Any*)String">format</a>(<a href="#73309" title="=&gt; String">propCategory</a>, <a href="#73324" title="=&gt; java.lang.String">versionString</a>, <a href="#73326" title="=&gt; String">copyrightString</a>)
  <span class="keyword">def</span> <a title="(args: Array[String])Unit" id="73357">main</a>(<a title="Array[String]" id="195223">args</a>: <a href="../Array.scala.html#885" title="Array[String]">Array</a>[String]) { <a href="#73354" title="(x$1: java.lang.String)Unit" id="25610">writer</a> println <a href="#73356" title="=&gt; String">versionMsg</a> }
}  

/** Loads library.properties from the jar. */
<span class="keyword">object</span> <a title="object scala.util.Properties" id="8099">Properties</a> <a href="../ScalaObject.scala.html#957" title="ScalaObject" class="keyword">extends</a> <a href="#8047" title="scala.util.PropertiesTrait">PropertiesTrait</a> {
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; java.lang.String" id="73359">propCategory</a>    = <span title="java.lang.String(&quot;library&quot;)" class="string">&quot;library&quot;</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; java.lang.Class[Application]" id="73360">pickJarBasedOn</a>  = classOf<span title="java.lang.Class[Application]">[</span>Application]
}

        </pre>
    </body>
</html>