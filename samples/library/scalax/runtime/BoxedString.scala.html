<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scalax/runtime/BoxedString.scala</title>
        <script type="text/javascript" src="../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../style.css" title="Style">
    </head>
    <body onload="initializeLinked()">
        <pre>
<span class="comment">/*                     __                                               *\
**     ________ ___   / /  ___     Scala API                            **
**    / __/ __// _ | / /  / _ |    (c) 2002-2009, LAMP/EPFL             **
**  __\ \/ /__/ __ |/ /__/ __ |    http://scala-lang.org/               **
** /____/\___/_/ |_/____/_/ | |                                         **
**                          |/                                          **
\*                                                                      */</span>

<span class="comment">// $Id: RichString.scala 15602 2008-07-24 08:20:38Z washburn $</span>


<span class="keyword">package</span> scalax.runtime

<span class="keyword">import</span> scala.util.matching.Regex
<span class="keyword">import</span> scalax.collection._
<span class="keyword">import</span> scalax.collection.mutable.StringBuilder
<span class="keyword">import</span> scalax.collection.generic
<span class="keyword">import</span> scalax.collection.generic._

<span class="keyword">object</span> <span class="typed"><span class="type">object scalax.runtime.BoxedString</span><a id="9991">BoxedString</a></span> {
  <span class="comment">// just statics for rich string.</span>
  <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">val</span> <span class="typed"><span class="type">Char</span><span id="42053"><a id="42052">LF</a></span></span>: <span class="typed"><span class="type">Char</span><a id="2387">Char</a></span> = <span class="typed"><span class="type">Char('\012')</span><span class="int">0x0A</span></span>
  <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">val</span> <span class="typed"><span class="type">Char</span><span id="42055"><a id="42054">FF</a></span></span>: <span class="typed"><span class="type">Char</span><a id="2387">Char</a></span> = <span class="typed"><span class="type">Char('\014')</span><span class="int">0x0C</span></span>
  <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">val</span> <span class="typed"><span class="type">Char</span><span id="42057"><a id="42056">CR</a></span></span>: <span class="typed"><span class="type">Char</span><a id="2387">Char</a></span> = <span class="typed"><span class="type">Char('\015')</span><span class="int">0x0D</span></span>
  <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">val</span> <span class="typed"><span class="type">Char</span><span id="42059"><a id="42058">SU</a></span></span>: <span class="typed"><span class="type">Char</span><a id="2387">Char</a></span> = <span class="typed"><span class="type">Char('\032')</span><span class="int">0x1A</span></span>
}

<span class="keyword">import</span> BoxedString._

<span class="keyword">class</span> <span class="typed"><span class="type">class BoxedString extends scalax.runtime.StringVector[Char] with Proxy with PartialFunction[Int,Char] with Ordered[String] with ScalaObject</span><a id="9990">BoxedString</a></span>(<span class="keyword">val</span> <span class="typed"><span class="type">String</span><span id="42063"><span id="42062"><a id="42097">self</a></span></span></span>: <span class="typed"><span class="type">String</span><a id="1859">String</a></span>) <span class="keyword">extends</span> <span class="typed"><span class="type">scalax.runtime.StringVector[Char]</span><a href="StringVector.scala.html#9927">StringVector</a></span>[Char] <span class="keyword">with</span> <span class="typed"><span class="type">Proxy</span><a href="../../scala/Proxy.scala.html#191">Proxy</a></span> <span class="keyword">with</span> <span class="typed"><span class="type">PartialFunction[Int,Char]</span><a href="../../scala/PartialFunction.scala.html#1295">PartialFunction</a></span>[Int, Char] <span class="keyword">with</span> <span class="typed"><span class="type">Ordered[String]</span><a href="../../scala/Ordered.scala.html#1460">Ordered</a></span>[String] {

  <span class="comment">/** Return element at index `n`
   *  @throws   IndexOutofBoundsException if the index is not valid
   */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">(Int)Char</span><a id="42065">apply</a></span>(<span class="typed"><span class="type">Int</span><a id="42098">n</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>): <span class="typed"><span class="type">Char</span><a id="2387">Char</a></span> = <span class="typed"><span class="type">=&gt; String</span><a href="#42062">self</a></span> <span class="typed"><span class="type">(Int)Char</span><a id="5820">charAt</a></span> <span class="typed"><span class="type">Int</span><a href="#42098">n</a></span>

  <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Int</span><a id="42066">length</a></span> = <span class="typed"><span class="type">=&gt; String</span><a href="#42062">self</a></span>.<span class="typed"><span class="type">()Int</span><a id="5819">length</a></span>

  <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; String</span><a id="42067">unbox</a></span> = <span class="typed"><span class="type">=&gt; String</span><a href="#42062">self</a></span>
  <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; String</span><a id="42068">mkString</a></span> = <span class="typed"><span class="type">=&gt; String</span><a href="#42062">self</a></span>
  <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">()String</span><a id="42069">toString</a></span> = <span class="typed"><span class="type">=&gt; String</span><a href="#42062">self</a></span>

  <span class="comment">/** return n times the current string 
   */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">(Int)String</span><a id="42070">*</a></span> (<span class="typed"><span class="type">Int</span><a id="42110">n</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>): <span class="typed"><span class="type">String</span><a id="1859">String</a></span> = {
    <span class="keyword">val</span> <span class="typed"><span class="type">scalax.collection.mutable.StringBuilder</span><a id="42111">buf</a></span> = <span class="typed"><span class="type">()scalax.collection.mutable.StringBuilder</span><a href="../collection/mutable/StringBuilder.scala.html#42137" class="keyword">new</a></span> <span class="typed"><span class="type">scalax.collection.mutable.StringBuilder</span><a href="../collection/mutable/StringBuilder.scala.html#6530">StringBuilder</a></span>
    <span class="keyword">for</span> (<span class="typed"><span class="type">((Int) =&gt; Unit)Unit</span><a href="../../scala/Range.scala.html#25001" id="42216">i</a></span> &lt;- <span class="typed"><span class="type">implicit scala.Predef.intWrapper : (Int)scala.runtime.RichInt</span><a href="../../scala/Predef.scala.html#13511" class="int">0</a></span> <span class="typed"><span class="type">(Int)Range</span><a href="../../scala/runtime/RichInt.scala.html#19402">until</a></span> <span class="typed"><span class="type">Int</span><a href="#42110">n</a></span>) <span class="typed"><span class="type">scalax.collection.mutable.StringBuilder</span><a href="#42111">buf</a></span> <span class="typed"><span class="type">(String)scalax.collection.mutable.StringBuilder</span><a href="../collection/mutable/StringBuilder.scala.html#42159">append</a></span> <span class="typed"><span class="type">=&gt; String</span><a href="#42062">self</a></span>
    <span class="typed"><span class="type">scalax.collection.mutable.StringBuilder</span><a href="#42111">buf</a></span>.<span class="typed"><span class="type">()String</span><a href="../collection/mutable/StringBuilder.scala.html#42198">toString</a></span>
  }

  <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">(String)Int</span><a id="42071">compare</a></span>(<span class="typed"><span class="type">String</span><a id="42235">other</a></span>: <span class="typed"><span class="type">String</span><a id="1859">String</a></span>) = <span class="typed"><span class="type">=&gt; String</span><a href="#42062">self</a></span> <span class="typed"><span class="type">(java.lang.String)Int</span><a id="5834">compareTo</a></span> <span class="typed"><span class="type">String</span><a href="#42235">other</a></span>

  <span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(Char)Boolean</span><a id="42072">isLineBreak</a></span>(<span class="typed"><span class="type">Char</span><a id="42238">c</a></span>: <span class="typed"><span class="type">Char</span><a id="2387">Char</a></span>) = <span class="typed"><span class="type">Char</span><a href="#42238">c</a></span> <span class="typed"><span class="type">(Char)Boolean</span><a id="3016">==</a></span> <span class="typed"><span class="type">=&gt; Char</span><a href="#42052">LF</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2748">||</a></span> <span class="typed"><span class="type">Char</span><a href="#42238">c</a></span> <span class="typed"><span class="type">(Char)Boolean</span><a id="3016">==</a></span> <span class="typed"><span class="type">=&gt; Char</span><a href="#42054">FF</a></span>

  <span class="comment">/** &lt;p&gt;
   *    Strip trailing line end character from this string if it has one.
   *    A line end character is one of
   *  &lt;/p&gt;
   *  &lt;ul style=&quot;list-style-type: none;&quot;&gt;
   *    &lt;li&gt;LF - line feed   (0x0A hex)&lt;/li&gt;
   *    &lt;li&gt;FF - form feed   (0x0C hex)&lt;/li&gt;
   *  &lt;/ul&gt;
   *  &lt;p&gt;
   *    If a line feed character LF is preceded by a carriage return CR
   *    (0x0D hex), the CR character is also stripped (Windows convention).
   *  &lt;/p&gt;
   */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; String</span><a id="42073">stripLineEnd</a></span>: <span class="typed"><span class="type">String</span><a id="1859">String</a></span> = {
    <span class="keyword">val</span> <span class="typed"><span class="type">Int</span><a id="42243">len</a></span> = <span class="typed"><span class="type">=&gt; String</span><a href="#42062">self</a></span>.<span class="typed"><span class="type">()Int</span><a id="5819">length</a></span>
    <span class="typed"><span class="type">String</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#42243">len</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3139">==</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>) <span class="typed"><span class="type">=&gt; String</span><a href="#42062">self</a></span>
    <span class="keyword">else</span> {
      <span class="keyword">val</span> <span class="typed"><span class="type">Char</span><a id="42245">last</a></span> = <span class="typed"><span class="type">(Int)Char</span><a href="#42065">apply</a></span>(<span class="typed"><span class="type">Int</span><a href="#42243">len</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>)
      <span class="typed"><span class="type">String</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">(Char)Boolean</span><a href="#42072">isLineBreak</a></span>(<span class="typed"><span class="type">Char</span><a href="#42245">last</a></span>))
        <span class="typed"><span class="type">=&gt; String</span><a href="#42062">self</a></span>.<span class="typed"><span class="type">(Int,Int)java.lang.String</span><a id="5853">substring</a></span>(<span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>, <span class="typed"><span class="type">Int</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Char</span><a href="#42245">last</a></span> <span class="typed"><span class="type">(Char)Boolean</span><a id="3016">==</a></span> <span class="typed"><span class="type">=&gt; Char</span><a href="#42052">LF</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2749">&amp;&amp;</a></span> <span class="typed"><span class="type">Int</span><a href="#42243">len</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3144">&gt;=</a></span> <span class="typed"><span class="type">Int(2)</span><span class="int">2</span></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2749">&amp;&amp;</a></span> <span class="typed"><span class="type">(Int)Char</span><a href="#42065">apply</a></span>(<span class="typed"><span class="type">Int</span><a href="#42243">len</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span> <span class="typed"><span class="type">Int(2)</span><span class="int">2</span></span>) <span class="typed"><span class="type">(Char)Boolean</span><a id="3016">==</a></span> <span class="typed"><span class="type">=&gt; Char</span><a href="#42056">CR</a></span>) <span class="typed"><span class="type">Int</span><a href="#42243">len</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span> <span class="typed"><span class="type">Int(2)</span><span class="int">2</span></span> <span class="keyword">else</span> <span class="typed"><span class="type">Int</span><a href="#42243">len</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3146">-</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>)
      <span class="keyword">else</span> 
        <span class="typed"><span class="type">=&gt; String</span><a href="#42062">self</a></span>
    }
  }

  <span class="comment">/** &lt;p&gt;
   *    Return all lines in this string in an iterator, including trailing
   *    line end characters.
   *  &lt;/p&gt;
   *  &lt;p&gt;
   *    The number of strings returned is one greater than the number of line
   *    end characters in this string. For an empty string, a single empty
   *    line is returned. A line end character is one of
   *  &lt;/p&gt;
   *  &lt;ul style=&quot;list-style-type: none;&quot;&gt;
   *    &lt;li&gt;LF - line feed   (0x0A hex)&lt;/li&gt;
   *    &lt;li&gt;FF - form feed   (0x0C hex)&lt;/li&gt;
   *  &lt;/ul&gt;
   */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; &lt;refinement&gt; extends java.lang.Object with scalax.collection.Iterator[String]</span><a id="42074">linesWithSeparators</a></span> = <span class="typed"><span class="type">template $anon extends java.lang.Object with scalax.collection.Iterator[String]</span><a id="42315" class="keyword">new</a></span> <span class="typed"><span class="type">scalax.collection.Iterator[String]</span><a href="../collection/Iterator.scala.html#6386">Iterator</a></span>[String] {
    <span class="keyword">val</span> <span class="typed"><span class="type">Int</span><span id="42318"><a id="42317">len</a></span></span> = <span class="typed"><span class="type">=&gt; String</span><a href="#42062">self</a></span>.<span class="typed"><span class="type">()Int</span><a id="5819">length</a></span>
    <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><span id="42321"><span id="42319"><span id="42320"><a id="42326">index</a></span></span></span></span> = <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>
    <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Boolean</span><a id="42322">hasNext</a></span>: <span class="typed"><span class="type">Boolean</span><a id="2168">Boolean</a></span> = <span class="typed"><span class="type">=&gt; Int</span><a href="#42319">index</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3141">&lt;</a></span> <span class="typed"><span class="type">=&gt; Int</span><a href="#42317">len</a></span>
    <span class="keyword">def</span> <span class="typed"><span class="type">()String</span><a id="42323">next</a></span>(): <span class="typed"><span class="type">String</span><a id="1859">String</a></span> = {
      <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; Int</span><a href="#42319">index</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3144">&gt;=</a></span> <span class="typed"><span class="type">=&gt; Int</span><a href="#42317">len</a></span>) <span class="typed"><span class="type">Nothing</span><span class="keyword">throw</span></span> <span class="typed"><span class="type">(java.lang.String)java.util.NoSuchElementException</span><a id="25317" class="keyword">new</a></span> <span class="typed"><span class="type">java.util.NoSuchElementException</span><a href="../../scala/Predef.scala.html#13342">NoSuchElementException</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;next on empty iterator&quot;)</span><span class="string">&quot;next on empty iterator&quot;</span></span>)
      <span class="keyword">val</span> <span class="typed"><span class="type">Int</span><a id="42329">start</a></span> = <span class="typed"><span class="type">=&gt; Int</span><a href="#42319">index</a></span>
      <span class="typed"><span class="type">Unit</span><a href="#42330" class="keyword">while</a></span> (<span class="typed"><span class="type">=&gt; Int</span><a href="#42319">index</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3141">&lt;</a></span> <span class="typed"><span class="type">=&gt; Int</span><a href="#42317">len</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2749">&amp;&amp;</a></span> <span class="typed"><span class="type">=&gt; Boolean</span><a id="2745">!</a></span><span class="typed"><span class="type">(Char)Boolean</span><a href="#42072">isLineBreak</a></span>(<span class="typed"><span class="type">(Int)Char</span><a href="#42065">apply</a></span>(<span class="typed"><span class="type">=&gt; Int</span><a href="#42319">index</a></span>))) <span class="typed"><span class="type">(Int)Unit</span><a href="#42320">index</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
      <span class="typed"><span class="type">(Int)Unit</span><a href="#42320">index</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
      <span class="typed"><span class="type">=&gt; String</span><a href="#42062">self</a></span>.<span class="typed"><span class="type">(Int,Int)java.lang.String</span><a id="5853">substring</a></span>(<span class="typed"><span class="type">Int</span><a href="#42329">start</a></span>, <span class="typed"><span class="type">implicit scala.Predef.intWrapper : (Int)scala.runtime.RichInt</span><a href="../../scala/Predef.scala.html#13511">index</a></span> <span class="typed"><span class="type">(Int)Int</span><a href="../../scala/runtime/RichInt.scala.html#19405">min</a></span> <span class="typed"><span class="type">=&gt; Int</span><a href="#42317">len</a></span>)
    }
  }

  <span class="comment">/** Return all lines in this string in an iterator, excluding trailing line
   *  end characters, i.e. apply &lt;code&gt;.stripLineEnd&lt;/code&gt; to all lines
   *  returned by &lt;code&gt;linesWithSeparators&lt;/code&gt;.
   */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; scalax.collection.Iterator[String]</span><a id="42075">lines</a></span>: <span class="typed"><span class="type">scalax.collection.Iterator[String]</span><a href="../collection/Iterator.scala.html#6386">Iterator</a></span>[String] = 
    <span class="typed"><span class="type">=&gt; &lt;refinement&gt; extends java.lang.Object with scalax.collection.Iterator[String]</span><a href="#42074">linesWithSeparators</a></span> <span class="typed"><span class="type">((String) =&gt; String)scalax.collection.Iterator[String]</span><a href="../collection/Iterator.scala.html#20221">map</a></span> (<span class="typed"><span class="type">String</span><a id="42406">line</a></span> =&gt; <span class="typed"><span class="type">scalax.runtime.BoxedString</span><span class="keyword">new</span></span> <span class="typed"><span class="type">scalax.runtime.BoxedString</span><a href="#9990">BoxedString</a></span>(<span class="typed"><span class="type">String</span><a href="#42406">line</a></span>).<span class="typed"><span class="type">=&gt; String</span><a href="#42073">stripLineEnd</a></span>)

  <span class="comment">/** Returns this string with first character converted to upper case */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; String</span><a id="42076">capitalize</a></span>: <span class="typed"><span class="type">String</span><a id="1859">String</a></span> =
    <span class="typed"><span class="type">String</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; String</span><a href="#42062">self</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="3507">==</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>) <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>
    <span class="keyword">else</span> <span class="typed"><span class="type">String</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">=&gt; String</span><a href="#42062">self</a></span>.<span class="typed"><span class="type">()Int</span><a id="5819">length</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3139">==</a></span> <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>) <span class="typed"><span class="type">java.lang.String(&quot;&quot;)</span><span class="string">&quot;&quot;</span></span>
    <span class="keyword">else</span> {
      <span class="keyword">val</span> <span class="typed"><span class="type">Array[Char]</span><a id="42411">chars</a></span> = <span class="typed"><span class="type">=&gt; String</span><a href="#42062">self</a></span>.<span class="typed"><span class="type">()Array[Char]</span><a id="5870">toCharArray</a></span>
      <span class="typed"><span class="type">Array[Char]</span><a href="#42411">chars</a></span>(<span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>) = <span class="typed"><span class="type">implicit scala.Predef.charWrapper : (Char)scala.runtime.RichChar</span><a href="../../scala/Predef.scala.html#13512">chars</a></span>(<span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>).<span class="typed"><span class="type">=&gt; Char</span><a href="../../scala/runtime/RichChar.scala.html#19391">toUpperCase</a></span>
      <span class="typed"><span class="type">(Array[Char])java.lang.String</span><a id="5807" class="keyword">new</a></span> <span class="typed"><span class="type">java.lang.String</span><a href="../../scala/Predef.scala.html#13327">String</a></span>(<span class="typed"><span class="type">Array[Char]</span><a href="#42411">chars</a></span>)
    }

  <span class="comment">/** &lt;p&gt;
   *    For every line in this string:
   *  &lt;/p&gt;
   *  &lt;blockquote&gt;
   *     Strip a leading prefix consisting of blanks or control characters
   *     followed by &lt;code&gt;marginChar&lt;/code&gt; from the line.
   *  &lt;/blockquote&gt;
   */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">(Char)String</span><a id="42077">stripMargin</a></span>(<span class="typed"><span class="type">Char</span><a id="42423">marginChar</a></span>: <span class="typed"><span class="type">Char</span><a id="2387">Char</a></span>): <span class="typed"><span class="type">String</span><a id="1859">String</a></span> = {
    <span class="keyword">val</span> <span class="typed"><span class="type">scalax.collection.mutable.StringBuilder</span><a id="42424">buf</a></span> = <span class="typed"><span class="type">()scalax.collection.mutable.StringBuilder</span><a href="../collection/mutable/StringBuilder.scala.html#42137" class="keyword">new</a></span> <span class="typed"><span class="type">scalax.collection.mutable.StringBuilder</span><a href="../collection/mutable/StringBuilder.scala.html#6530">StringBuilder</a></span>
    <span class="keyword">for</span> (<span class="typed"><span class="type">((String) =&gt; Unit)Unit</span><a href="../collection/Iterator.scala.html#20248" id="42429">line</a></span> &lt;- <span class="typed"><span class="type">=&gt; &lt;refinement&gt; extends java.lang.Object with scalax.collection.Iterator[String]</span><a href="#42074">linesWithSeparators</a></span>) {
      <span class="keyword">val</span> <span class="typed"><span class="type">Int</span><a id="42430">len</a></span> = <span class="typed"><span class="type">String</span><a href="#42429">line</a></span>.<span class="typed"><span class="type">()Int</span><a id="5819">length</a></span>
      <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="42431">index</a></span> = <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>
      <span class="typed"><span class="type">Unit</span><a href="#42432" class="keyword">while</a></span> (<span class="typed"><span class="type">Int</span><a href="#42431">index</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3141">&lt;</a></span> <span class="typed"><span class="type">Int</span><a href="#42430">len</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2749">&amp;&amp;</a></span> <span class="typed"><span class="type">String</span><a href="#42429">line</a></span>.<span class="typed"><span class="type">(Int)Char</span><a id="5820">charAt</a></span>(<span class="typed"><span class="type">Int</span><a href="#42431">index</a></span>) <span class="typed"><span class="type">(Char)Boolean</span><a id="3019">&lt;=</a></span> <span class="typed"><span class="type">Char(' ')</span><span class="char">' '</span></span>) <span class="typed"><span class="type">Int</span><a href="#42431">index</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
      <span class="typed"><span class="type">scalax.collection.mutable.StringBuilder</span><a href="#42424">buf</a></span> <span class="typed"><span class="type">(String)scalax.collection.mutable.StringBuilder</span><a href="../collection/mutable/StringBuilder.scala.html#42159">append</a></span>
        (<span class="typed"><span class="type">java.lang.String</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#42431">index</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3141">&lt;</a></span> <span class="typed"><span class="type">Int</span><a href="#42430">len</a></span> <span class="typed"><span class="type">(Boolean)Boolean</span><a id="2749">&amp;&amp;</a></span> <span class="typed"><span class="type">String</span><a href="#42429">line</a></span>.<span class="typed"><span class="type">(Int)Char</span><a id="5820">charAt</a></span>(<span class="typed"><span class="type">Int</span><a href="#42431">index</a></span>) <span class="typed"><span class="type">(Char)Boolean</span><a id="3016">==</a></span> <span class="typed"><span class="type">Char</span><a href="#42423">marginChar</a></span>) <span class="typed"><span class="type">String</span><a href="#42429">line</a></span>.<span class="typed"><span class="type">(Int)java.lang.String</span><a id="5852">substring</a></span>(<span class="typed"><span class="type">Int</span><a href="#42431">index</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>) <span class="keyword">else</span> <span class="typed"><span class="type">String</span><a href="#42429">line</a></span>)
    }
    <span class="typed"><span class="type">scalax.collection.mutable.StringBuilder</span><a href="#42424">buf</a></span>.<span class="typed"><span class="type">()String</span><a href="../collection/mutable/StringBuilder.scala.html#42198">toString</a></span>
  }

  <span class="comment">/** &lt;p&gt;
   *    For every line in this string:
   *  &lt;/p&gt;
   *  &lt;blockquote&gt;
   *     Strip a leading prefix consisting of blanks or control characters
   *     followed by &lt;code&gt;|&lt;/code&gt; from the line.
   *  &lt;/blockquote&gt;
   */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; String</span><a id="42078">stripMargin</a></span>: <span class="typed"><span class="type">String</span><a id="1859">String</a></span> = <span class="typed"><span class="type">(Char)String</span><a href="#42077">stripMargin</a></span>(<span class="typed"><span class="type">Char('|')</span><span class="char">'|'</span></span>)

  <span class="comment">// NB. &quot;\\Q&quot; + '\\' + &quot;\\E&quot; works on Java 1.5 and newer, but not on Java 1.4</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(Char)String</span><a id="42079">escape</a></span>(<span class="typed"><span class="type">Char</span><a id="42483">ch</a></span>: <span class="typed"><span class="type">Char</span><a id="2387">Char</a></span>): <span class="typed"><span class="type">String</span><a id="1859">String</a></span> = <span class="typed"><span class="type">Char</span><a href="#42483">ch</a></span> <span class="typed"><span class="type">String</span><span class="keyword">match</span></span> {
    <span class="typed"><span class="type">java.lang.String(&quot;\\&quot;)</span><span class="keyword">case</span></span> <span class="typed"><span class="type">Char('\')</span><span class="char">'\\'</span></span> =&gt; <span class="typed"><span class="type">java.lang.String(&quot;\\&quot;)</span><span class="string">&quot;\\\\&quot;</span></span>
    <span class="typed"><span class="type">java.lang.String</span><span class="keyword">case</span></span> _ =&gt; <span class="typed"><span class="type">java.lang.String(&quot;\Q&quot;)</span><span class="string">&quot;\\Q&quot;</span></span><span class="typed"><span class="type">(Any)java.lang.String</span><a id="5800">+</a></span><span class="typed"><span class="type">Char</span><a href="#42483">ch</a></span><span class="typed"><span class="type">(Any)java.lang.String</span><a id="5800">+</a></span><span class="typed"><span class="type">java.lang.String(&quot;\E&quot;)</span><span class="string">&quot;\\E&quot;</span></span>
  }

  @<span class="typed"><span class="type">throws</span><a href="../../scala/throws.scala.html#254">throws</a></span>(<span class="typed"><span class="type">java.lang.Class[java.util.regex.PatternSyntaxException]</span><span >classOf</span></span>[java.util.regex.PatternSyntaxException])
  <span class="keyword">def</span> <span class="typed"><span class="type">(Char)Array[String]</span><a id="42080">split</a></span>(<span class="typed"><span class="type">Char</span><a id="42490">separator</a></span>: <span class="typed"><span class="type">Char</span><a id="2387">Char</a></span>): <span class="typed"><span class="type">Array[String]</span><a href="../../scala/Array.scala.html#1070">Array</a></span>[String] = <span class="typed"><span class="type">=&gt; String</span><a href="#42062">self</a></span>.<span class="typed"><span class="type">(java.lang.String)Array[java.lang.String]</span><a id="5863">split</a></span>(<span class="typed"><span class="type">(Char)String</span><a href="#42079">escape</a></span>(<span class="typed"><span class="type">Char</span><a href="#42490">separator</a></span>))

  @<span class="typed"><span class="type">throws</span><a href="../../scala/throws.scala.html#254">throws</a></span>(<span class="typed"><span class="type">java.lang.Class[java.util.regex.PatternSyntaxException]</span><span >classOf</span></span>[java.util.regex.PatternSyntaxException])
  <span class="keyword">def</span> <span class="typed"><span class="type">(Array[Char])Array[String]</span><a id="42081">split</a></span>(<span class="typed"><span class="type">Array[Char]</span><a id="42492">separators</a></span>: <span class="typed"><span class="type">Array[Char]</span><a href="../../scala/Array.scala.html#1070">Array</a></span>[Char]): <span class="typed"><span class="type">Array[String]</span><a href="../../scala/Array.scala.html#1070">Array</a></span>[String] = {
    <span class="keyword">val</span> <span class="typed"><span class="type">java.lang.String</span><a id="42493">re</a></span> = <span class="typed"><span class="type">Array[Char]</span><a href="#42492">separators</a></span>.<span class="typed"><span class="type">(java.lang.String)((java.lang.String, Char) =&gt; java.lang.String)java.lang.String</span><a href="../../scala/Iterable.scala.html#17336">foldLeft</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;[&quot;)</span><span class="string">&quot;[&quot;</span></span>)(<span class="typed"><span class="type">java.lang.String</span><a href="#42496">_</a></span><span class="typed"><span class="type">(Any)java.lang.String</span><a id="5800">+</a></span><span class="typed"><span class="type">(Char)String</span><a href="#42079">escape</a></span>(<span class="typed"><span class="type">Char</span><a href="#42497">_</a></span>)) <span class="typed"><span class="type">(Any)java.lang.String</span><a id="5800">+</a></span> <span class="typed"><span class="type">java.lang.String(&quot;]&quot;)</span><span class="string">&quot;]&quot;</span></span>
    <span class="typed"><span class="type">=&gt; String</span><a href="#42062">self</a></span>.<span class="typed"><span class="type">(java.lang.String)Array[java.lang.String]</span><a id="5863">split</a></span>(<span class="typed"><span class="type">java.lang.String</span><a href="#42493">re</a></span>)
  }

  <span class="comment">/** You can follow a string with `.r', turning
   *  it into a Regex. E.g.
   *
   *  &quot;&quot;&quot;A\w*&quot;&quot;&quot;.r   is the regular expression for identifiers starting with `A'.
   */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; scala.util.matching.Regex</span><a id="42082">r</a></span>: <span class="typed"><span class="type">scala.util.matching.Regex</span><a href="../../scala/util/matching/Regex.scala.html#14007">Regex</a></span> = <span class="typed"><span class="type">scala.util.matching.Regex</span><span class="keyword">new</span></span> <span class="typed"><span class="type">scala.util.matching.Regex</span><a href="../../scala/util/matching/Regex.scala.html#14007">Regex</a></span>(<span class="typed"><span class="type">=&gt; String</span><a href="#42062">self</a></span>)
  
  <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Boolean</span><a id="42083">toBoolean</a></span>: <span class="typed"><span class="type">Boolean</span><a id="2168">Boolean</a></span> = <span class="typed"><span class="type">(String)Boolean</span><a href="#42090">parseBoolean</a></span>(<span class="typed"><span class="type">=&gt; String</span><a href="#42062">self</a></span>)
  <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Byte</span><a id="42084">toByte</a></span>: <span class="typed"><span class="type">Byte</span><a id="2377">Byte</a></span>       = java.lang.<span class="typed"><span class="type">object java.lang.Byte</span><a id="1830">Byte</a></span>.<span class="typed"><span class="type">(java.lang.String)Byte</span><a id="18852">parseByte</a></span>(<span class="typed"><span class="type">=&gt; String</span><a href="#42062">self</a></span>)
  <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Short</span><a id="42085">toShort</a></span>: <span class="typed"><span class="type">Short</span><a id="2382">Short</a></span>     = java.lang.<span class="typed"><span class="type">object java.lang.Short</span><a id="1956">Short</a></span>.<span class="typed"><span class="type">(java.lang.String)Short</span><a id="18817">parseShort</a></span>(<span class="typed"><span class="type">=&gt; String</span><a href="#42062">self</a></span>)
  <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Int</span><a id="42086">toInt</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>         = java.lang.<span class="typed"><span class="type">object java.lang.Integer</span><a id="1782">Integer</a></span>.<span class="typed"><span class="type">(java.lang.String)Int</span><a id="18606">parseInt</a></span>(<span class="typed"><span class="type">=&gt; String</span><a href="#42062">self</a></span>)
  <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Long</span><a id="42087">toLong</a></span>: <span class="typed"><span class="type">Long</span><a id="2397">Long</a></span>       = java.lang.<span class="typed"><span class="type">object java.lang.Long</span><a id="1953">Long</a></span>.<span class="typed"><span class="type">(java.lang.String)Long</span><a id="18550">parseLong</a></span>(<span class="typed"><span class="type">=&gt; String</span><a href="#42062">self</a></span>)
  <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Float</span><a id="42088">toFloat</a></span>: <span class="typed"><span class="type">Float</span><a id="2402">Float</a></span>     = java.lang.<span class="typed"><span class="type">object java.lang.Float</span><a id="2124">Float</a></span>.<span class="typed"><span class="type">(java.lang.String)Float</span><a id="18507">parseFloat</a></span>(<span class="typed"><span class="type">=&gt; String</span><a href="#42062">self</a></span>)
  <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Double</span><a id="42089">toDouble</a></span>: <span class="typed"><span class="type">Double</span><a id="2407">Double</a></span>   = java.lang.<span class="typed"><span class="type">object java.lang.Double</span><a id="2133">Double</a></span>.<span class="typed"><span class="type">(java.lang.String)Double</span><a id="18462">parseDouble</a></span>(<span class="typed"><span class="type">=&gt; String</span><a href="#42062">self</a></span>)

  <span class="keyword">private</span> <span class="keyword">def</span> <span class="typed"><span class="type">(String)Boolean</span><a id="42090">parseBoolean</a></span>(<span class="typed"><span class="type">String</span><a id="42503">s</a></span>: <span class="typed"><span class="type">String</span><a id="1859">String</a></span>): <span class="typed"><span class="type">Boolean</span><a id="2168">Boolean</a></span> =
    <span class="typed"><span class="type">Boolean</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">String</span><a href="#42503">s</a></span> <span class="typed"><span class="type">(AnyRef)Boolean</span><a id="5791">!=</a></span> <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>) <span class="typed"><span class="type">String</span><a href="#42503">s</a></span>.<span class="typed"><span class="type">()java.lang.String</span><a id="5865">toLowerCase</a></span> <span class="typed"><span class="type">Boolean</span><span class="keyword">match</span></span> {
      <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">case</span></span> <span class="typed"><span class="type">java.lang.String(&quot;true&quot;)</span><span class="string">&quot;true&quot;</span></span> =&gt; <span class="typed"><span class="type">Boolean(true)</span><span class="keyword">true</span></span>
      <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">case</span></span> <span class="typed"><span class="type">java.lang.String(&quot;false&quot;)</span><span class="string">&quot;false&quot;</span></span> =&gt; <span class="typed"><span class="type">Boolean(false)</span><span class="keyword">false</span></span>
      <span class="typed"><span class="type">Nothing</span><span class="keyword">case</span></span> _ =&gt; <span class="typed"><span class="type">Nothing</span><span class="keyword">throw</span></span> <span class="typed"><span class="type">(java.lang.String)java.lang.NumberFormatException</span><a id="42566" class="keyword">new</a></span> <span class="typed"><span class="type">java.lang.NumberFormatException</span><a href="../../scala/Predef.scala.html#13343">NumberFormatException</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;For input string: &quot;&quot;)</span><span class="string">&quot;For input string: \&quot;&quot;</span></span><span class="typed"><span class="type">(Any)java.lang.String</span><a id="5800">+</a></span><span class="typed"><span class="type">String</span><a href="#42503">s</a></span><span class="typed"><span class="type">(Any)java.lang.String</span><a id="5800">+</a></span><span class="typed"><span class="type">java.lang.String(&quot;&quot;&quot;)</span><span class="string">&quot;\&quot;&quot;</span></span>)
    }
    <span class="keyword">else</span>
      <span class="typed"><span class="type">Nothing</span><span class="keyword">throw</span></span> <span class="typed"><span class="type">(java.lang.String)java.lang.NumberFormatException</span><a id="42566" class="keyword">new</a></span> <span class="typed"><span class="type">java.lang.NumberFormatException</span><a href="../../scala/Predef.scala.html#13343">NumberFormatException</a></span>(<span class="typed"><span class="type">java.lang.String(&quot;For input string: &quot;null&quot;&quot;)</span><span class="string">&quot;For input string: \&quot;null\&quot;&quot;</span></span>)

  <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Array[Char]</span><a id="42091">toArray</a></span>: <span class="typed"><span class="type">Array[Char]</span><a href="../../scala/Array.scala.html#1070">Array</a></span>[Char] = {
    <span class="keyword">val</span> <span class="typed"><span class="type">Array[Char]</span><a id="42574">result</a></span> = <span class="typed"><span class="type">Array[Char]</span><span class="keyword">new</span></span> <span class="typed"><span class="type">Array[Char]</span><a href="../../scala/Array.scala.html#1070">Array</a></span>[Char](<span class="typed"><span class="type">=&gt; Int</span><a href="#42066">length</a></span>)
    <span class="typed"><span class="type">=&gt; String</span><a href="#42062">self</a></span>.<span class="typed"><span class="type">(Int,Int,Array[Char],Int)Unit</span><a id="5826">getChars</a></span>(<span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>, <span class="typed"><span class="type">=&gt; Int</span><a href="#42066">length</a></span>, <span class="typed"><span class="type">Array[Char]</span><a href="#42574">result</a></span>, <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>)
    <span class="typed"><span class="type">Array[Char]</span><a href="#42574">result</a></span>
  }
}


        </pre>
    </body>
</html>