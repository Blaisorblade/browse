<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>scalax/collection/mutable/ResizableArray.scala</title>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style">
    </head>
    <body onload="initializeLinked()">
        <pre>
<span class="comment">/*                     __                                               *\
**     ________ ___   / /  ___     Scala API                            **
**    / __/ __// _ | / /  / _ |    (c) 2003-2009, LAMP/EPFL             **
**  __\ \/ /__/ __ |/ /__/ __ |    http://scala-lang.org/               **
** /____/\___/_/ |_/____/_/ | |                                         **
**                          |/                                          **
\*                                                                      */</span>

<span class="comment">// $Id: ResizableArray.scala 15407 2008-06-20 09:26:36Z stepancheg $</span>


<span class="keyword">package</span> scalax.collection.mutable

<span class="comment">/** This class is used internally to implement data structures that
 *  are based on resizable arrays.
 *
 *  @author  Matthias Zenger, Burak Emir
 *  @version 1.0, 03/05/2004
 */</span>
<span class="keyword">trait</span> <span class="typed"><span class="type">trait ResizableArray[A] extends java.lang.Object with scalax.collection.mutable.Vector[A] with ScalaObject</span><a id="6590">ResizableArray</a></span>[<span class="typed"><span class="type">&gt;: Nothing &lt;: Any</span><a id="14279">A</a></span>] <span class="keyword">extends</span> <span class="typed"><span class="type">scalax.collection.mutable.Vector[A]</span><a href="Vector.scala.html#6524">Vector</a></span>[A] {

  <span class="keyword">import</span> scala.Array <span class="comment">// !!!</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Int</span><a id="17942">initialSize</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span> = <span class="typed"><span class="type">Int(16)</span><span class="int">16</span></span>
  <span class="keyword">protected</span> <span class="keyword">var</span> <span class="typed"><span class="type">Array[AnyRef]</span><span id="17945"><span id="17943"><span id="17944"><a id="67474">array</a></span></span></span></span>: <span class="typed"><span class="type">Array[AnyRef]</span><a href="../../../scala/Array.scala.html#1070">Array</a></span>[AnyRef] = <span class="typed"><span class="type">Array[AnyRef]</span><span class="keyword">new</span></span> <span class="typed"><span class="type">Array[AnyRef]</span><a href="../../../scala/Array.scala.html#1070">Array</a></span>[AnyRef](<span class="typed"><span class="type">implicit scala.Predef.intWrapper : (Int)scala.runtime.RichInt</span><a href="../../../scala/Predef.scala.html#13511">initialSize</a></span> <span class="typed"><span class="type">(Int)Int</span><a href="../../../scala/runtime/RichInt.scala.html#19405">min</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>)

  <span class="keyword">protected</span> <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><span id="17948"><span id="17946"><span id="17947"><a id="67475">size0</a></span></span></span></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span> = <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>

  <span class="comment">//##########################################################################</span>
  <span class="comment">// implement/override methods of Vector[A]</span>

  <span class="comment">/** Returns the length of this resizable array.
   */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">=&gt; Int</span><a id="17949">length</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span> = <span class="typed"><span class="type">=&gt; Int</span><a href="#17946">size0</a></span>

  <span class="keyword">def</span> <span class="typed"><span class="type">(Int)A</span><a id="17950">apply</a></span>(<span class="typed"><span class="type">Int</span><a id="35273">idx</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>) = {
    <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#35273">idx</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3144">&gt;=</a></span> <span class="typed"><span class="type">=&gt; Int</span><a href="#17946">size0</a></span>) <span class="typed"><span class="type">Nothing</span><span class="keyword">throw</span></span> <span class="typed"><span class="type">(java.lang.String)java.lang.IndexOutOfBoundsException</span><a id="19891" class="keyword">new</a></span> <span class="typed"><span class="type">java.lang.IndexOutOfBoundsException</span><a href="../../../scala/Predef.scala.html#13337">IndexOutOfBoundsException</a></span>(<span class="typed"><span class="type">Int</span><a href="#35273">idx</a></span>.<span class="typed"><span class="type">()java.lang.String</span><a id="3498">toString</a></span>)
    <span class="typed"><span class="type">(Int)AnyRef</span><a href="../../../scala/Array.scala.html#17253">array</a></span>(<span class="typed"><span class="type">Int</span><a href="#35273">idx</a></span>).<span class="typed"><span class="type">A</span><a id="3501">asInstanceOf</a></span>[<span class="typed"><span class="type">A</span><a href="#14279">A</a></span>]
  }

  <span class="keyword">def</span> <span class="typed"><span class="type">(Int,A)Unit</span><a id="17951">update</a></span>(<span class="typed"><span class="type">Int</span><a id="67485">idx</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>, <span class="typed"><span class="type">A</span><a id="67486">elem</a></span>: <span class="typed"><span class="type">A</span><a href="#14279">A</a></span>) { 
    <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#67485">idx</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3144">&gt;=</a></span> <span class="typed"><span class="type">=&gt; Int</span><a href="#17946">size0</a></span>) <span class="typed"><span class="type">Nothing</span><span class="keyword">throw</span></span> <span class="typed"><span class="type">(java.lang.String)java.lang.IndexOutOfBoundsException</span><a id="19891" class="keyword">new</a></span> <span class="typed"><span class="type">java.lang.IndexOutOfBoundsException</span><a href="../../../scala/Predef.scala.html#13337">IndexOutOfBoundsException</a></span>(<span class="typed"><span class="type">Int</span><a href="#67485">idx</a></span>.<span class="typed"><span class="type">()java.lang.String</span><a id="3498">toString</a></span>)
    <span class="typed"><span class="type">=&gt; Array[AnyRef]</span><a href="#17943">array</a></span>(<span class="typed"><span class="type">Int</span><a href="#67485">idx</a></span>) = <span class="typed"><span class="type">A</span><a href="#67486">elem</a></span>.<span class="typed"><span class="type">AnyRef</span><a id="3501">asInstanceOf</a></span>[<span class="typed"><span class="type">AnyRef</span><a id="2015">AnyRef</a></span>]
  }

  <span class="comment">/** Fills the given array &lt;code&gt;xs&lt;/code&gt; with the elements of
   *  this sequence starting at position &lt;code&gt;start&lt;/code&gt;.
   *
   *  @param  xs the array to fill.
   *  @param  start starting index.
   */</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">[B &gt;: A](Array[B],Int)Unit</span><a id="17952">copyToArray</a></span>[<span class="typed"><span class="type">&gt;: A &lt;: Any</span><a id="17954">B</a></span> &gt;: A](<span class="typed"><span class="type">Array[B]</span><a id="67490">xs</a></span>: <span class="typed"><span class="type">Array[B]</span><a href="../../../scala/Array.scala.html#1070">Array</a></span>[B], <span class="typed"><span class="type">Int</span><a id="67491">start</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>) {
    <span class="typed"><span class="type">object Array</span><a href="../../../scala/Array.scala.html#1071">Array</a></span>.<span class="typed"><span class="type">(AnyRef,Int,AnyRef,Int,Int)Unit</span><a href="../../../scala/Array.scala.html#17068">copy</a></span>(<span class="typed"><span class="type">=&gt; Array[AnyRef]</span><a href="#17943">array</a></span>, <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>, <span class="typed"><span class="type">Array[B]</span><a href="#67490">xs</a></span>, <span class="typed"><span class="type">Int</span><a href="#67491">start</a></span>, <span class="typed"><span class="type">=&gt; Int</span><a href="#17946">size0</a></span>)
  }

  <span class="comment">/** Copy all elements to a buffer 
   *  @param   The buffer to which elements are copied
   */</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">[B &gt;: A](scalax.collection.mutable.Buffer[B])Unit</span><a id="17955">copyToBuffer</a></span>[<span class="typed"><span class="type">&gt;: A &lt;: Any</span><a id="17957">B</a></span> &gt;: A](<span class="typed"><span class="type">scalax.collection.mutable.Buffer[B]</span><a id="67492">dest</a></span>: <span class="typed"><span class="type">scalax.collection.mutable.Buffer[B]</span><a href="Buffer.scala.html#6566">Buffer</a></span>[B]) {
    <span class="typed"><span class="type">scalax.collection.mutable.Buffer[B]</span><a href="#67492">dest</a></span> <span class="typed"><span class="type">(scalax.collection.Iterable[B])Unit</span><a href="../generic/Growable.scala.html#17913">++=</a></span> <span class="typed"><span class="type">=&gt; Array[AnyRef]</span><a href="#17943">array</a></span>.<span class="typed"><span class="type">scalax.collection.mutable.Iterable[A]</span><a id="3501">asInstanceOf</a></span>[<span class="typed"><span class="type">scalax.collection.mutable.Iterable[A]</span><a href="Iterable.scala.html#6659">Iterable</a></span>[A]] <span class="comment">// !@!</span>
  }

  <span class="keyword">override</span> <span class="keyword">def</span> <span class="typed"><span class="type">((A) =&gt; Unit)Unit</span><a id="17958">foreach</a></span>(<span class="typed"><span class="type">(A) =&gt; Unit</span><a id="35285">f</a></span>: A =&gt; Unit) {
    <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="67495">i</a></span> = <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>
    <span class="typed"><span class="type">Unit</span><a href="#67496" class="keyword">while</a></span> (<span class="typed"><span class="type">Int</span><a href="#67495">i</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3141">&lt;</a></span> <span class="typed"><span class="type">=&gt; Int</span><a href="../generic/SequenceTemplate.scala.html#17649">size</a></span>) {
      <span class="typed"><span class="type">(A)Unit</span><a href="../../../scala/Function1.scala.html#17300">f</a></span>(<span class="typed"><span class="type">(Int)AnyRef</span><a href="../../../scala/Array.scala.html#17253">array</a></span>(<span class="typed"><span class="type">Int</span><a href="#67495">i</a></span>).<span class="typed"><span class="type">A</span><a id="3501">asInstanceOf</a></span>[<span class="typed"><span class="type">A</span><a href="#14279">A</a></span>])
      <span class="typed"><span class="type">Int</span><a href="#67495">i</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3145">+=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
    }
  }

  <span class="comment">//##########################################################################</span>

  <span class="comment">/** remove elements of this array at indices after &lt;code&gt;sz&lt;/code&gt; 
   */</span>
  <span class="keyword">def</span> <span class="typed"><span class="type">(Int)Unit</span><a id="17959">reduceToSize</a></span>(<span class="typed"><span class="type">Int</span><a id="67526">sz</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>) {
    <span class="typed"><span class="type">(Boolean)Unit</span><a href="../../../scala/Predef.scala.html#13365">require</a></span>(<span class="typed"><span class="type">Int</span><a href="#67526">sz</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3142">&lt;=</a></span> <span class="typed"><span class="type">=&gt; Int</span><a href="#17946">size0</a></span>)
    <span class="typed"><span class="type">Unit</span><a href="#67529" class="keyword">while</a></span> (<span class="typed"><span class="type">=&gt; Int</span><a href="#17946">size0</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&gt;</a></span> <span class="typed"><span class="type">Int</span><a href="#67526">sz</a></span>) {
      <span class="typed"><span class="type">(Int)Unit</span><a href="#17947">size0</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3146">-=</a></span> <span class="typed"><span class="type">Int(1)</span><span class="int">1</span></span>
      <span class="typed"><span class="type">=&gt; Array[AnyRef]</span><a href="#17943">array</a></span>(<span class="typed"><span class="type">=&gt; Int</span><a href="#17946">size0</a></span>) = <span class="typed"><span class="type">Null(null)</span><span class="keyword">null</span></span>
    }
  }

  <span class="comment">/** ensure that the internal array has at n cells */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <span class="typed"><span class="type">(Int)Unit</span><a id="17960">ensureSize</a></span>(<span class="typed"><span class="type">Int</span><a id="67550">n</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>) {
    <span class="typed"><span class="type">Unit</span><span class="keyword">if</span></span> (<span class="typed"><span class="type">Int</span><a href="#67550">n</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&gt;</a></span> <span class="typed"><span class="type">=&gt; Array[AnyRef]</span><a href="#17943">array</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a href="../../../scala/Array.scala.html#17252">length</a></span>) {
      <span class="keyword">var</span> <span class="typed"><span class="type">Int</span><a id="67553">newsize</a></span> = <span class="typed"><span class="type">=&gt; Array[AnyRef]</span><a href="#17943">array</a></span>.<span class="typed"><span class="type">=&gt; Int</span><a href="../../../scala/Array.scala.html#17252">length</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">*</a></span> <span class="typed"><span class="type">Int(2)</span><span class="int">2</span></span>
      <span class="typed"><span class="type">Unit</span><a href="#67555" class="keyword">while</a></span> (<span class="typed"><span class="type">Int</span><a href="#67550">n</a></span> <span class="typed"><span class="type">(Int)Boolean</span><a id="3143">&gt;</a></span> <span class="typed"><span class="type">Int</span><a href="#67553">newsize</a></span>)
        <span class="typed"><span class="type">Int</span><a href="#67553">newsize</a></span> = <span class="typed"><span class="type">Int</span><a href="#67553">newsize</a></span> <span class="typed"><span class="type">(Int)Int</span><a id="3147">*</a></span> <span class="typed"><span class="type">Int(2)</span><span class="int">2</span></span>
      <span class="keyword">val</span> <span class="typed"><span class="type">Array[AnyRef]</span><a id="67554">newar</a></span>: <span class="typed"><span class="type">Array[AnyRef]</span><a href="../../../scala/Array.scala.html#1070">Array</a></span>[AnyRef] = <span class="typed"><span class="type">Array[AnyRef]</span><span class="keyword">new</span></span> <span class="typed"><span class="type">Array[AnyRef]</span><a href="../../../scala/Array.scala.html#1070">Array</a></span>(<span class="typed"><span class="type">Int</span><a href="#67553">newsize</a></span>)
      <span class="typed"><span class="type">object Array</span><a href="../../../scala/Array.scala.html#1071">Array</a></span>.<span class="typed"><span class="type">(AnyRef,Int,AnyRef,Int,Int)Unit</span><a href="../../../scala/Array.scala.html#17068">copy</a></span>(<span class="typed"><span class="type">=&gt; Array[AnyRef]</span><a href="#17943">array</a></span>, <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>, <span class="typed"><span class="type">Array[AnyRef]</span><a href="#67554">newar</a></span>, <span class="typed"><span class="type">Int(0)</span><span class="int">0</span></span>, <span class="typed"><span class="type">=&gt; Int</span><a href="#17946">size0</a></span>)
      <span class="typed"><span class="type">(Array[AnyRef])Unit</span><a href="#17944">array</a></span> = <span class="typed"><span class="type">Array[AnyRef]</span><a href="#67554">newar</a></span>
    }
  }

  <span class="comment">/** Swap two elements of this array.
   */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <span class="typed"><span class="type">(Int,Int)Unit</span><a id="17961">swap</a></span>(<span class="typed"><span class="type">Int</span><a id="67575">a</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>, <span class="typed"><span class="type">Int</span><a id="67576">b</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>) {
    <span class="keyword">val</span> <span class="typed"><span class="type">AnyRef</span><a id="67577">h</a></span> = <span class="typed"><span class="type">(Int)AnyRef</span><a href="../../../scala/Array.scala.html#17253">array</a></span>(<span class="typed"><span class="type">Int</span><a href="#67575">a</a></span>)
    <span class="typed"><span class="type">=&gt; Array[AnyRef]</span><a href="#17943">array</a></span>(<span class="typed"><span class="type">Int</span><a href="#67575">a</a></span>) = <span class="typed"><span class="type">(Int)AnyRef</span><a href="../../../scala/Array.scala.html#17253">array</a></span>(<span class="typed"><span class="type">Int</span><a href="#67576">b</a></span>)
    <span class="typed"><span class="type">=&gt; Array[AnyRef]</span><a href="#17943">array</a></span>(<span class="typed"><span class="type">Int</span><a href="#67576">b</a></span>) = <span class="typed"><span class="type">AnyRef</span><a href="#67577">h</a></span>
  }

  <span class="comment">/** Move parts of the array.
   */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <span class="typed"><span class="type">(Int,Int,Int)Unit</span><a id="17962">copy</a></span>(<span class="typed"><span class="type">Int</span><a id="67588">m</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>, <span class="typed"><span class="type">Int</span><a id="67589">n</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>, <span class="typed"><span class="type">Int</span><a id="67590">len</a></span>: <span class="typed"><span class="type">Int</span><a id="2392">Int</a></span>) {
    <span class="typed"><span class="type">object Array</span><a href="../../../scala/Array.scala.html#1071">Array</a></span>.<span class="typed"><span class="type">(AnyRef,Int,AnyRef,Int,Int)Unit</span><a href="../../../scala/Array.scala.html#17068">copy</a></span>(<span class="typed"><span class="type">=&gt; Array[AnyRef]</span><a href="#17943">array</a></span>, <span class="typed"><span class="type">Int</span><a href="#67588">m</a></span>, <span class="typed"><span class="type">=&gt; Array[AnyRef]</span><a href="#17943">array</a></span>, <span class="typed"><span class="type">Int</span><a href="#67589">n</a></span>, <span class="typed"><span class="type">Int</span><a href="#67590">len</a></span>)
  }
}

        </pre>
    </body>
</html>